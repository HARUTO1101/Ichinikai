(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=t(i);fetch(i.href,a)}})();function j4(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var vm={exports:{}},Hu={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wE;function B4(){if(wE)return Hu;wE=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(r,i,a){var o=null;if(a!==void 0&&(o=""+a),i.key!==void 0&&(o=""+i.key),"key"in i){a={};for(var c in i)c!=="key"&&(a[c]=i[c])}else a=i;return i=a.ref,{$$typeof:n,type:r,key:o,ref:i!==void 0?i:null,props:a}}return Hu.Fragment=e,Hu.jsx=t,Hu.jsxs=t,Hu}var AE;function V4(){return AE||(AE=1,vm.exports=B4()),vm.exports}var m=V4(),ym={exports:{}},ze={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bE;function F4(){if(bE)return ze;bE=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),o=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),g=Symbol.for("react.activity"),_=Symbol.iterator;function E(X){return X===null||typeof X!="object"?null:(X=_&&X[_]||X["@@iterator"],typeof X=="function"?X:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,D={};function T(X,te,pe){this.props=X,this.context=te,this.refs=D,this.updater=pe||w}T.prototype.isReactComponent={},T.prototype.setState=function(X,te){if(typeof X!="object"&&typeof X!="function"&&X!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,X,te,"setState")},T.prototype.forceUpdate=function(X){this.updater.enqueueForceUpdate(this,X,"forceUpdate")};function O(){}O.prototype=T.prototype;function j(X,te,pe){this.props=X,this.context=te,this.refs=D,this.updater=pe||w}var z=j.prototype=new O;z.constructor=j,S(z,T.prototype),z.isPureReactComponent=!0;var H=Array.isArray;function q(){}var N={H:null,A:null,T:null,S:null},b=Object.prototype.hasOwnProperty;function I(X,te,pe){var ye=pe.ref;return{$$typeof:n,type:X,key:te,ref:ye!==void 0?ye:null,props:pe}}function k(X,te){return I(X.type,te,X.props)}function M(X){return typeof X=="object"&&X!==null&&X.$$typeof===n}function V(X){var te={"=":"=0",":":"=2"};return"$"+X.replace(/[=:]/g,function(pe){return te[pe]})}var L=/\/+/g;function ie(X,te){return typeof X=="object"&&X!==null&&X.key!=null?V(""+X.key):te.toString(36)}function we(X){switch(X.status){case"fulfilled":return X.value;case"rejected":throw X.reason;default:switch(typeof X.status=="string"?X.then(q,q):(X.status="pending",X.then(function(te){X.status==="pending"&&(X.status="fulfilled",X.value=te)},function(te){X.status==="pending"&&(X.status="rejected",X.reason=te)})),X.status){case"fulfilled":return X.value;case"rejected":throw X.reason}}throw X}function F(X,te,pe,ye,Te){var Ne=typeof X;(Ne==="undefined"||Ne==="boolean")&&(X=null);var xe=!1;if(X===null)xe=!0;else switch(Ne){case"bigint":case"string":case"number":xe=!0;break;case"object":switch(X.$$typeof){case n:case e:xe=!0;break;case p:return xe=X._init,F(xe(X._payload),te,pe,ye,Te)}}if(xe)return Te=Te(X),xe=ye===""?"."+ie(X,0):ye,H(Te)?(pe="",xe!=null&&(pe=xe.replace(L,"$&/")+"/"),F(Te,te,pe,"",function(sn){return sn})):Te!=null&&(M(Te)&&(Te=k(Te,pe+(Te.key==null||X&&X.key===Te.key?"":(""+Te.key).replace(L,"$&/")+"/")+xe)),te.push(Te)),1;xe=0;var Qe=ye===""?".":ye+":";if(H(X))for(var Ze=0;Ze<X.length;Ze++)ye=X[Ze],Ne=Qe+ie(ye,Ze),xe+=F(ye,te,pe,Ne,Te);else if(Ze=E(X),typeof Ze=="function")for(X=Ze.call(X),Ze=0;!(ye=X.next()).done;)ye=ye.value,Ne=Qe+ie(ye,Ze++),xe+=F(ye,te,pe,Ne,Te);else if(Ne==="object"){if(typeof X.then=="function")return F(we(X),te,pe,ye,Te);throw te=String(X),Error("Objects are not valid as a React child (found: "+(te==="[object Object]"?"object with keys {"+Object.keys(X).join(", ")+"}":te)+"). If you meant to render a collection of children, use an array instead.")}return xe}function se(X,te,pe){if(X==null)return X;var ye=[],Te=0;return F(X,ye,"","",function(Ne){return te.call(pe,Ne,Te++)}),ye}function he(X){if(X._status===-1){var te=X._result;te=te(),te.then(function(pe){(X._status===0||X._status===-1)&&(X._status=1,X._result=pe)},function(pe){(X._status===0||X._status===-1)&&(X._status=2,X._result=pe)}),X._status===-1&&(X._status=0,X._result=te)}if(X._status===1)return X._result.default;throw X._result}var Ie=typeof reportError=="function"?reportError:function(X){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var te=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof X=="object"&&X!==null&&typeof X.message=="string"?String(X.message):String(X),error:X});if(!window.dispatchEvent(te))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",X);return}console.error(X)},De={map:se,forEach:function(X,te,pe){se(X,function(){te.apply(this,arguments)},pe)},count:function(X){var te=0;return se(X,function(){te++}),te},toArray:function(X){return se(X,function(te){return te})||[]},only:function(X){if(!M(X))throw Error("React.Children.only expected to receive a single React element child.");return X}};return ze.Activity=g,ze.Children=De,ze.Component=T,ze.Fragment=t,ze.Profiler=i,ze.PureComponent=j,ze.StrictMode=r,ze.Suspense=u,ze.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=N,ze.__COMPILER_RUNTIME={__proto__:null,c:function(X){return N.H.useMemoCache(X)}},ze.cache=function(X){return function(){return X.apply(null,arguments)}},ze.cacheSignal=function(){return null},ze.cloneElement=function(X,te,pe){if(X==null)throw Error("The argument must be a React element, but you passed "+X+".");var ye=S({},X.props),Te=X.key;if(te!=null)for(Ne in te.key!==void 0&&(Te=""+te.key),te)!b.call(te,Ne)||Ne==="key"||Ne==="__self"||Ne==="__source"||Ne==="ref"&&te.ref===void 0||(ye[Ne]=te[Ne]);var Ne=arguments.length-2;if(Ne===1)ye.children=pe;else if(1<Ne){for(var xe=Array(Ne),Qe=0;Qe<Ne;Qe++)xe[Qe]=arguments[Qe+2];ye.children=xe}return I(X.type,Te,ye)},ze.createContext=function(X){return X={$$typeof:o,_currentValue:X,_currentValue2:X,_threadCount:0,Provider:null,Consumer:null},X.Provider=X,X.Consumer={$$typeof:a,_context:X},X},ze.createElement=function(X,te,pe){var ye,Te={},Ne=null;if(te!=null)for(ye in te.key!==void 0&&(Ne=""+te.key),te)b.call(te,ye)&&ye!=="key"&&ye!=="__self"&&ye!=="__source"&&(Te[ye]=te[ye]);var xe=arguments.length-2;if(xe===1)Te.children=pe;else if(1<xe){for(var Qe=Array(xe),Ze=0;Ze<xe;Ze++)Qe[Ze]=arguments[Ze+2];Te.children=Qe}if(X&&X.defaultProps)for(ye in xe=X.defaultProps,xe)Te[ye]===void 0&&(Te[ye]=xe[ye]);return I(X,Ne,Te)},ze.createRef=function(){return{current:null}},ze.forwardRef=function(X){return{$$typeof:c,render:X}},ze.isValidElement=M,ze.lazy=function(X){return{$$typeof:p,_payload:{_status:-1,_result:X},_init:he}},ze.memo=function(X,te){return{$$typeof:h,type:X,compare:te===void 0?null:te}},ze.startTransition=function(X){var te=N.T,pe={};N.T=pe;try{var ye=X(),Te=N.S;Te!==null&&Te(pe,ye),typeof ye=="object"&&ye!==null&&typeof ye.then=="function"&&ye.then(q,Ie)}catch(Ne){Ie(Ne)}finally{te!==null&&pe.types!==null&&(te.types=pe.types),N.T=te}},ze.unstable_useCacheRefresh=function(){return N.H.useCacheRefresh()},ze.use=function(X){return N.H.use(X)},ze.useActionState=function(X,te,pe){return N.H.useActionState(X,te,pe)},ze.useCallback=function(X,te){return N.H.useCallback(X,te)},ze.useContext=function(X){return N.H.useContext(X)},ze.useDebugValue=function(){},ze.useDeferredValue=function(X,te){return N.H.useDeferredValue(X,te)},ze.useEffect=function(X,te){return N.H.useEffect(X,te)},ze.useEffectEvent=function(X){return N.H.useEffectEvent(X)},ze.useId=function(){return N.H.useId()},ze.useImperativeHandle=function(X,te,pe){return N.H.useImperativeHandle(X,te,pe)},ze.useInsertionEffect=function(X,te){return N.H.useInsertionEffect(X,te)},ze.useLayoutEffect=function(X,te){return N.H.useLayoutEffect(X,te)},ze.useMemo=function(X,te){return N.H.useMemo(X,te)},ze.useOptimistic=function(X,te){return N.H.useOptimistic(X,te)},ze.useReducer=function(X,te,pe){return N.H.useReducer(X,te,pe)},ze.useRef=function(X){return N.H.useRef(X)},ze.useState=function(X){return N.H.useState(X)},ze.useSyncExternalStore=function(X,te,pe){return N.H.useSyncExternalStore(X,te,pe)},ze.useTransition=function(){return N.H.useTransition()},ze.version="19.2.0",ze}var SE;function bv(){return SE||(SE=1,ym.exports=F4()),ym.exports}var P=bv(),_m={exports:{}},Gu={},xm={exports:{}},Em={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var CE;function U4(){return CE||(CE=1,(function(n){function e(F,se){var he=F.length;F.push(se);e:for(;0<he;){var Ie=he-1>>>1,De=F[Ie];if(0<i(De,se))F[Ie]=se,F[he]=De,he=Ie;else break e}}function t(F){return F.length===0?null:F[0]}function r(F){if(F.length===0)return null;var se=F[0],he=F.pop();if(he!==se){F[0]=he;e:for(var Ie=0,De=F.length,X=De>>>1;Ie<X;){var te=2*(Ie+1)-1,pe=F[te],ye=te+1,Te=F[ye];if(0>i(pe,he))ye<De&&0>i(Te,pe)?(F[Ie]=Te,F[ye]=he,Ie=ye):(F[Ie]=pe,F[te]=he,Ie=te);else if(ye<De&&0>i(Te,he))F[Ie]=Te,F[ye]=he,Ie=ye;else break e}}return se}function i(F,se){var he=F.sortIndex-se.sortIndex;return he!==0?he:F.id-se.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var o=Date,c=o.now();n.unstable_now=function(){return o.now()-c}}var u=[],h=[],p=1,g=null,_=3,E=!1,w=!1,S=!1,D=!1,T=typeof setTimeout=="function"?setTimeout:null,O=typeof clearTimeout=="function"?clearTimeout:null,j=typeof setImmediate<"u"?setImmediate:null;function z(F){for(var se=t(h);se!==null;){if(se.callback===null)r(h);else if(se.startTime<=F)r(h),se.sortIndex=se.expirationTime,e(u,se);else break;se=t(h)}}function H(F){if(S=!1,z(F),!w)if(t(u)!==null)w=!0,q||(q=!0,V());else{var se=t(h);se!==null&&we(H,se.startTime-F)}}var q=!1,N=-1,b=5,I=-1;function k(){return D?!0:!(n.unstable_now()-I<b)}function M(){if(D=!1,q){var F=n.unstable_now();I=F;var se=!0;try{e:{w=!1,S&&(S=!1,O(N),N=-1),E=!0;var he=_;try{t:{for(z(F),g=t(u);g!==null&&!(g.expirationTime>F&&k());){var Ie=g.callback;if(typeof Ie=="function"){g.callback=null,_=g.priorityLevel;var De=Ie(g.expirationTime<=F);if(F=n.unstable_now(),typeof De=="function"){g.callback=De,z(F),se=!0;break t}g===t(u)&&r(u),z(F)}else r(u);g=t(u)}if(g!==null)se=!0;else{var X=t(h);X!==null&&we(H,X.startTime-F),se=!1}}break e}finally{g=null,_=he,E=!1}se=void 0}}finally{se?V():q=!1}}}var V;if(typeof j=="function")V=function(){j(M)};else if(typeof MessageChannel<"u"){var L=new MessageChannel,ie=L.port2;L.port1.onmessage=M,V=function(){ie.postMessage(null)}}else V=function(){T(M,0)};function we(F,se){N=T(function(){F(n.unstable_now())},se)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(F){F.callback=null},n.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):b=0<F?Math.floor(1e3/F):5},n.unstable_getCurrentPriorityLevel=function(){return _},n.unstable_next=function(F){switch(_){case 1:case 2:case 3:var se=3;break;default:se=_}var he=_;_=se;try{return F()}finally{_=he}},n.unstable_requestPaint=function(){D=!0},n.unstable_runWithPriority=function(F,se){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var he=_;_=F;try{return se()}finally{_=he}},n.unstable_scheduleCallback=function(F,se,he){var Ie=n.unstable_now();switch(typeof he=="object"&&he!==null?(he=he.delay,he=typeof he=="number"&&0<he?Ie+he:Ie):he=Ie,F){case 1:var De=-1;break;case 2:De=250;break;case 5:De=1073741823;break;case 4:De=1e4;break;default:De=5e3}return De=he+De,F={id:p++,callback:se,priorityLevel:F,startTime:he,expirationTime:De,sortIndex:-1},he>Ie?(F.sortIndex=he,e(h,F),t(u)===null&&F===t(h)&&(S?(O(N),N=-1):S=!0,we(H,he-Ie))):(F.sortIndex=De,e(u,F),w||E||(w=!0,q||(q=!0,V()))),F},n.unstable_shouldYield=k,n.unstable_wrapCallback=function(F){var se=_;return function(){var he=_;_=se;try{return F.apply(this,arguments)}finally{_=he}}}})(Em)),Em}var TE;function z4(){return TE||(TE=1,xm.exports=U4()),xm.exports}var wm={exports:{}},or={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var IE;function H4(){if(IE)return or;IE=1;var n=bv();function e(u){var h="https://react.dev/errors/"+u;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)h+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+u+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var r={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},i=Symbol.for("react.portal");function a(u,h,p){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:g==null?null:""+g,children:u,containerInfo:h,implementation:p}}var o=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(u,h){if(u==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return or.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,or.createPortal=function(u,h){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(e(299));return a(u,h,null,p)},or.flushSync=function(u){var h=o.T,p=r.p;try{if(o.T=null,r.p=2,u)return u()}finally{o.T=h,r.p=p,r.d.f()}},or.preconnect=function(u,h){typeof u=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,r.d.C(u,h))},or.prefetchDNS=function(u){typeof u=="string"&&r.d.D(u)},or.preinit=function(u,h){if(typeof u=="string"&&h&&typeof h.as=="string"){var p=h.as,g=c(p,h.crossOrigin),_=typeof h.integrity=="string"?h.integrity:void 0,E=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;p==="style"?r.d.S(u,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:g,integrity:_,fetchPriority:E}):p==="script"&&r.d.X(u,{crossOrigin:g,integrity:_,fetchPriority:E,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},or.preinitModule=function(u,h){if(typeof u=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var p=c(h.as,h.crossOrigin);r.d.M(u,{crossOrigin:p,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&r.d.M(u)},or.preload=function(u,h){if(typeof u=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var p=h.as,g=c(p,h.crossOrigin);r.d.L(u,p,{crossOrigin:g,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},or.preloadModule=function(u,h){if(typeof u=="string")if(h){var p=c(h.as,h.crossOrigin);r.d.m(u,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:p,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else r.d.m(u)},or.requestFormReset=function(u){r.d.r(u)},or.unstable_batchedUpdates=function(u,h){return u(h)},or.useFormState=function(u,h,p){return o.H.useFormState(u,h,p)},or.useFormStatus=function(){return o.H.useHostTransitionStatus()},or.version="19.2.0",or}var NE;function G4(){if(NE)return wm.exports;NE=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),wm.exports=H4(),wm.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var RE;function q4(){if(RE)return Gu;RE=1;var n=z4(),e=bv(),t=G4();function r(s){var l="https://react.dev/errors/"+s;if(1<arguments.length){l+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)l+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+s+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function a(s){var l=s,f=s;if(s.alternate)for(;l.return;)l=l.return;else{s=l;do l=s,(l.flags&4098)!==0&&(f=l.return),s=l.return;while(s)}return l.tag===3?f:null}function o(s){if(s.tag===13){var l=s.memoizedState;if(l===null&&(s=s.alternate,s!==null&&(l=s.memoizedState)),l!==null)return l.dehydrated}return null}function c(s){if(s.tag===31){var l=s.memoizedState;if(l===null&&(s=s.alternate,s!==null&&(l=s.memoizedState)),l!==null)return l.dehydrated}return null}function u(s){if(a(s)!==s)throw Error(r(188))}function h(s){var l=s.alternate;if(!l){if(l=a(s),l===null)throw Error(r(188));return l!==s?null:s}for(var f=s,d=l;;){var y=f.return;if(y===null)break;var x=y.alternate;if(x===null){if(d=y.return,d!==null){f=d;continue}break}if(y.child===x.child){for(x=y.child;x;){if(x===f)return u(y),s;if(x===d)return u(y),l;x=x.sibling}throw Error(r(188))}if(f.return!==d.return)f=y,d=x;else{for(var C=!1,B=y.child;B;){if(B===f){C=!0,f=y,d=x;break}if(B===d){C=!0,d=y,f=x;break}B=B.sibling}if(!C){for(B=x.child;B;){if(B===f){C=!0,f=x,d=y;break}if(B===d){C=!0,d=x,f=y;break}B=B.sibling}if(!C)throw Error(r(189))}}if(f.alternate!==d)throw Error(r(190))}if(f.tag!==3)throw Error(r(188));return f.stateNode.current===f?s:l}function p(s){var l=s.tag;if(l===5||l===26||l===27||l===6)return s;for(s=s.child;s!==null;){if(l=p(s),l!==null)return l;s=s.sibling}return null}var g=Object.assign,_=Symbol.for("react.element"),E=Symbol.for("react.transitional.element"),w=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),D=Symbol.for("react.strict_mode"),T=Symbol.for("react.profiler"),O=Symbol.for("react.consumer"),j=Symbol.for("react.context"),z=Symbol.for("react.forward_ref"),H=Symbol.for("react.suspense"),q=Symbol.for("react.suspense_list"),N=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),I=Symbol.for("react.activity"),k=Symbol.for("react.memo_cache_sentinel"),M=Symbol.iterator;function V(s){return s===null||typeof s!="object"?null:(s=M&&s[M]||s["@@iterator"],typeof s=="function"?s:null)}var L=Symbol.for("react.client.reference");function ie(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===L?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case S:return"Fragment";case T:return"Profiler";case D:return"StrictMode";case H:return"Suspense";case q:return"SuspenseList";case I:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case w:return"Portal";case j:return s.displayName||"Context";case O:return(s._context.displayName||"Context")+".Consumer";case z:var l=s.render;return s=s.displayName,s||(s=l.displayName||l.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case N:return l=s.displayName||null,l!==null?l:ie(s.type)||"Memo";case b:l=s._payload,s=s._init;try{return ie(s(l))}catch{}}return null}var we=Array.isArray,F=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,se=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,he={pending:!1,data:null,method:null,action:null},Ie=[],De=-1;function X(s){return{current:s}}function te(s){0>De||(s.current=Ie[De],Ie[De]=null,De--)}function pe(s,l){De++,Ie[De]=s.current,s.current=l}var ye=X(null),Te=X(null),Ne=X(null),xe=X(null);function Qe(s,l){switch(pe(Ne,l),pe(Te,s),pe(ye,null),l.nodeType){case 9:case 11:s=(s=l.documentElement)&&(s=s.namespaceURI)?qx(s):0;break;default:if(s=l.tagName,l=l.namespaceURI)l=qx(l),s=$x(l,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}te(ye),pe(ye,s)}function Ze(){te(ye),te(Te),te(Ne)}function sn(s){s.memoizedState!==null&&pe(xe,s);var l=ye.current,f=$x(l,s.type);l!==f&&(pe(Te,s),pe(ye,f))}function me(s){Te.current===s&&(te(ye),te(Te)),xe.current===s&&(te(xe),Vu._currentValue=he)}var Fe,He;function Ue(s){if(Fe===void 0)try{throw Error()}catch(f){var l=f.stack.trim().match(/\n( *(at )?)/);Fe=l&&l[1]||"",He=-1<f.stack.indexOf(`
    at`)?" (<anonymous>)":-1<f.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Fe+s+He}var Gt=!1;function gt(s,l){if(!s||Gt)return"";Gt=!0;var f=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var d={DetermineComponentFrameRoot:function(){try{if(l){var fe=function(){throw Error()};if(Object.defineProperty(fe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(fe,[])}catch(re){var ee=re}Reflect.construct(s,[],fe)}else{try{fe.call()}catch(re){ee=re}s.call(fe.prototype)}}else{try{throw Error()}catch(re){ee=re}(fe=s())&&typeof fe.catch=="function"&&fe.catch(function(){})}}catch(re){if(re&&ee&&typeof re.stack=="string")return[re.stack,ee.stack]}return[null,null]}};d.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var y=Object.getOwnPropertyDescriptor(d.DetermineComponentFrameRoot,"name");y&&y.configurable&&Object.defineProperty(d.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var x=d.DetermineComponentFrameRoot(),C=x[0],B=x[1];if(C&&B){var $=C.split(`
`),J=B.split(`
`);for(y=d=0;d<$.length&&!$[d].includes("DetermineComponentFrameRoot");)d++;for(;y<J.length&&!J[y].includes("DetermineComponentFrameRoot");)y++;if(d===$.length||y===J.length)for(d=$.length-1,y=J.length-1;1<=d&&0<=y&&$[d]!==J[y];)y--;for(;1<=d&&0<=y;d--,y--)if($[d]!==J[y]){if(d!==1||y!==1)do if(d--,y--,0>y||$[d]!==J[y]){var oe=`
`+$[d].replace(" at new "," at ");return s.displayName&&oe.includes("<anonymous>")&&(oe=oe.replace("<anonymous>",s.displayName)),oe}while(1<=d&&0<=y);break}}}finally{Gt=!1,Error.prepareStackTrace=f}return(f=s?s.displayName||s.name:"")?Ue(f):""}function kn(s,l){switch(s.tag){case 26:case 27:case 5:return Ue(s.type);case 16:return Ue("Lazy");case 13:return s.child!==l&&l!==null?Ue("Suspense Fallback"):Ue("Suspense");case 19:return Ue("SuspenseList");case 0:case 15:return gt(s.type,!1);case 11:return gt(s.type.render,!1);case 1:return gt(s.type,!0);case 31:return Ue("Activity");default:return""}}function lt(s){try{var l="",f=null;do l+=kn(s,f),f=s,s=s.return;while(s);return l}catch(d){return`
Error generating stack: `+d.message+`
`+d.stack}}var Ge=Object.prototype.hasOwnProperty,Et=n.unstable_scheduleCallback,$n=n.unstable_cancelCallback,es=n.unstable_shouldYield,le=n.unstable_requestPaint,Ee=n.unstable_now,Ke=n.unstable_getCurrentPriorityLevel,Wt=n.unstable_ImmediatePriority,dr=n.unstable_UserBlockingPriority,Xn=n.unstable_NormalPriority,di=n.unstable_LowPriority,qe=n.unstable_IdlePriority,jt=n.log,Kn=n.unstable_setDisableYieldValue,Nt=null,Qt=null;function $r(s){if(typeof jt=="function"&&Kn(s),Qt&&typeof Qt.setStrictMode=="function")try{Qt.setStrictMode(Nt,s)}catch{}}var on=Math.clz32?Math.clz32:Wf,Yf=Math.log,cl=Math.LN2;function Wf(s){return s>>>=0,s===0?32:31-(Yf(s)/cl|0)|0}var Vi=256,ho=262144,pn=4194304;function Fi(s){var l=s&42;if(l!==0)return l;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return s&261888;case 262144:case 524288:case 1048576:case 2097152:return s&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function Ui(s,l,f){var d=s.pendingLanes;if(d===0)return 0;var y=0,x=s.suspendedLanes,C=s.pingedLanes;s=s.warmLanes;var B=d&134217727;return B!==0?(d=B&~x,d!==0?y=Fi(d):(C&=B,C!==0?y=Fi(C):f||(f=B&~s,f!==0&&(y=Fi(f))))):(B=d&~x,B!==0?y=Fi(B):C!==0?y=Fi(C):f||(f=d&~s,f!==0&&(y=Fi(f)))),y===0?0:l!==0&&l!==y&&(l&x)===0&&(x=y&-y,f=l&-l,x>=f||x===32&&(f&4194048)!==0)?l:y}function pi(s,l){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&l)===0}function Ep(s,l){switch(s){case 1:case 2:case 4:case 8:case 64:return l+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Qf(){var s=pn;return pn<<=1,(pn&62914560)===0&&(pn=4194304),s}function zi(s){for(var l=[],f=0;31>f;f++)l.push(s);return l}function po(s,l){s.pendingLanes|=l,l!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function wp(s,l,f,d,y,x){var C=s.pendingLanes;s.pendingLanes=f,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=f,s.entangledLanes&=f,s.errorRecoveryDisabledLanes&=f,s.shellSuspendCounter=0;var B=s.entanglements,$=s.expirationTimes,J=s.hiddenUpdates;for(f=C&~f;0<f;){var oe=31-on(f),fe=1<<oe;B[oe]=0,$[oe]=-1;var ee=J[oe];if(ee!==null)for(J[oe]=null,oe=0;oe<ee.length;oe++){var re=ee[oe];re!==null&&(re.lane&=-536870913)}f&=~fe}d!==0&&mo(s,d,0),x!==0&&y===0&&s.tag!==0&&(s.suspendedLanes|=x&~(C&~l))}function mo(s,l,f){s.pendingLanes|=l,s.suspendedLanes&=~l;var d=31-on(l);s.entangledLanes|=l,s.entanglements[d]=s.entanglements[d]|1073741824|f&261930}function Gc(s,l){var f=s.entangledLanes|=l;for(s=s.entanglements;f;){var d=31-on(f),y=1<<d;y&l|s[d]&l&&(s[d]|=l),f&=~y}}function qc(s,l){var f=l&-l;return f=(f&42)!==0?1:go(f),(f&(s.suspendedLanes|l))!==0?0:f}function go(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function Ea(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function Zf(){var s=se.p;return s!==0?s:(s=window.event,s===void 0?32:mE(s.type))}function mi(s,l){var f=se.p;try{return se.p=s,l()}finally{se.p=f}}var gi=Math.random().toString(36).slice(2),mn="__reactFiber$"+gi,Ln="__reactProps$"+gi,Hi="__reactContainer$"+gi,ul="__reactEvents$"+gi,Ap="__reactListeners$"+gi,Jf="__reactHandles$"+gi,eh="__reactResources$"+gi,Gi="__reactMarker$"+gi;function fl(s){delete s[mn],delete s[Ln],delete s[ul],delete s[Ap],delete s[Jf]}function qi(s){var l=s[mn];if(l)return l;for(var f=s.parentNode;f;){if(l=f[Hi]||f[mn]){if(f=l.alternate,l.child!==null||f!==null&&f.child!==null)for(s=Jx(s);s!==null;){if(f=s[mn])return f;s=Jx(s)}return l}s=f,f=s.parentNode}return null}function Xr(s){if(s=s[mn]||s[Hi]){var l=s.tag;if(l===5||l===6||l===13||l===31||l===26||l===27||l===3)return s}return null}function Mr(s){var l=s.tag;if(l===5||l===26||l===27||l===6)return s.stateNode;throw Error(r(33))}function $i(s){var l=s[eh];return l||(l=s[eh]={hoistableStyles:new Map,hoistableScripts:new Map}),l}function gn(s){s[Gi]=!0}var $c=new Set,Xc={};function Xi(s,l){Ki(s,l),Ki(s+"Capture",l)}function Ki(s,l){for(Xc[s]=l,s=0;s<l.length;s++)$c.add(l[s])}var Kc=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Yc={},Wc={};function th(s){return Ge.call(Wc,s)?!0:Ge.call(Yc,s)?!1:Kc.test(s)?Wc[s]=!0:(Yc[s]=!0,!1)}function hl(s,l,f){if(th(l))if(f===null)s.removeAttribute(l);else{switch(typeof f){case"undefined":case"function":case"symbol":s.removeAttribute(l);return;case"boolean":var d=l.toLowerCase().slice(0,5);if(d!=="data-"&&d!=="aria-"){s.removeAttribute(l);return}}s.setAttribute(l,""+f)}}function Pr(s,l,f){if(f===null)s.removeAttribute(l);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(l);return}s.setAttribute(l,""+f)}}function vn(s,l,f,d){if(d===null)s.removeAttribute(f);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(f);return}s.setAttributeNS(l,f,""+d)}}function jn(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function ts(s){var l=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function Qc(s,l,f){var d=Object.getOwnPropertyDescriptor(s.constructor.prototype,l);if(!s.hasOwnProperty(l)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var y=d.get,x=d.set;return Object.defineProperty(s,l,{configurable:!0,get:function(){return y.call(this)},set:function(C){f=""+C,x.call(this,C)}}),Object.defineProperty(s,l,{enumerable:d.enumerable}),{getValue:function(){return f},setValue:function(C){f=""+C},stopTracking:function(){s._valueTracker=null,delete s[l]}}}}function At(s){if(!s._valueTracker){var l=ts(s)?"checked":"value";s._valueTracker=Qc(s,l,""+s[l])}}function vo(s){if(!s)return!1;var l=s._valueTracker;if(!l)return!0;var f=l.getValue(),d="";return s&&(d=ts(s)?s.checked?"true":"false":s.value),s=d,s!==f?(l.setValue(s),!0):!1}function Yi(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var yo=/[\n"\\]/g;function xr(s){return s.replace(yo,function(l){return"\\"+l.charCodeAt(0).toString(16)+" "})}function dl(s,l,f,d,y,x,C,B){s.name="",C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?s.type=C:s.removeAttribute("type"),l!=null?C==="number"?(l===0&&s.value===""||s.value!=l)&&(s.value=""+jn(l)):s.value!==""+jn(l)&&(s.value=""+jn(l)):C!=="submit"&&C!=="reset"||s.removeAttribute("value"),l!=null?Zc(s,C,jn(l)):f!=null?Zc(s,C,jn(f)):d!=null&&s.removeAttribute("value"),y==null&&x!=null&&(s.defaultChecked=!!x),y!=null&&(s.checked=y&&typeof y!="function"&&typeof y!="symbol"),B!=null&&typeof B!="function"&&typeof B!="symbol"&&typeof B!="boolean"?s.name=""+jn(B):s.removeAttribute("name")}function nh(s,l,f,d,y,x,C,B){if(x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"&&(s.type=x),l!=null||f!=null){if(!(x!=="submit"&&x!=="reset"||l!=null)){At(s);return}f=f!=null?""+jn(f):"",l=l!=null?""+jn(l):f,B||l===s.value||(s.value=l),s.defaultValue=l}d=d??y,d=typeof d!="function"&&typeof d!="symbol"&&!!d,s.checked=B?s.checked:!!d,s.defaultChecked=!!d,C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"&&(s.name=C),At(s)}function Zc(s,l,f){l==="number"&&Yi(s.ownerDocument)===s||s.defaultValue===""+f||(s.defaultValue=""+f)}function ns(s,l,f,d){if(s=s.options,l){l={};for(var y=0;y<f.length;y++)l["$"+f[y]]=!0;for(f=0;f<s.length;f++)y=l.hasOwnProperty("$"+s[f].value),s[f].selected!==y&&(s[f].selected=y),y&&d&&(s[f].defaultSelected=!0)}else{for(f=""+jn(f),l=null,y=0;y<s.length;y++){if(s[y].value===f){s[y].selected=!0,d&&(s[y].defaultSelected=!0);return}l!==null||s[y].disabled||(l=s[y])}l!==null&&(l.selected=!0)}}function rh(s,l,f){if(l!=null&&(l=""+jn(l),l!==s.value&&(s.value=l),f==null)){s.defaultValue!==l&&(s.defaultValue=l);return}s.defaultValue=f!=null?""+jn(f):""}function rs(s,l,f,d){if(l==null){if(d!=null){if(f!=null)throw Error(r(92));if(we(d)){if(1<d.length)throw Error(r(93));d=d[0]}f=d}f==null&&(f=""),l=f}f=jn(l),s.defaultValue=f,d=s.textContent,d===f&&d!==""&&d!==null&&(s.value=d),At(s)}function Er(s,l){if(l){var f=s.firstChild;if(f&&f===s.lastChild&&f.nodeType===3){f.nodeValue=l;return}}s.textContent=l}var ih=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Jc(s,l,f){var d=l.indexOf("--")===0;f==null||typeof f=="boolean"||f===""?d?s.setProperty(l,""):l==="float"?s.cssFloat="":s[l]="":d?s.setProperty(l,f):typeof f!="number"||f===0||ih.has(l)?l==="float"?s.cssFloat=f:s[l]=(""+f).trim():s[l]=f+"px"}function eu(s,l,f){if(l!=null&&typeof l!="object")throw Error(r(62));if(s=s.style,f!=null){for(var d in f)!f.hasOwnProperty(d)||l!=null&&l.hasOwnProperty(d)||(d.indexOf("--")===0?s.setProperty(d,""):d==="float"?s.cssFloat="":s[d]="");for(var y in l)d=l[y],l.hasOwnProperty(y)&&f[y]!==d&&Jc(s,y,d)}else for(var x in l)l.hasOwnProperty(x)&&Jc(s,x,l[x])}function pl(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ah=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),is=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ml(s){return is.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}function vi(){}var tu=null;function Kr(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var as=null,Wi=null;function _o(s){var l=Xr(s);if(l&&(s=l.stateNode)){var f=s[Ln]||null;e:switch(s=l.stateNode,l.type){case"input":if(dl(s,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name),l=f.name,f.type==="radio"&&l!=null){for(f=s;f.parentNode;)f=f.parentNode;for(f=f.querySelectorAll('input[name="'+xr(""+l)+'"][type="radio"]'),l=0;l<f.length;l++){var d=f[l];if(d!==s&&d.form===s.form){var y=d[Ln]||null;if(!y)throw Error(r(90));dl(d,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name)}}for(l=0;l<f.length;l++)d=f[l],d.form===s.form&&vo(d)}break e;case"textarea":rh(s,f.value,f.defaultValue);break e;case"select":l=f.value,l!=null&&ns(s,!!f.multiple,l,!1)}}}var gl=!1;function ss(s,l,f){if(gl)return s(l,f);gl=!0;try{var d=s(l);return d}finally{if(gl=!1,(as!==null||Wi!==null)&&(Zh(),as&&(l=as,s=Wi,Wi=as=null,_o(l),s)))for(l=0;l<s.length;l++)_o(s[l])}}function yi(s,l){var f=s.stateNode;if(f===null)return null;var d=f[Ln]||null;if(d===null)return null;f=d[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(s=s.type,d=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!d;break e;default:s=!1}if(s)return null;if(f&&typeof f!="function")throw Error(r(231,l,typeof f));return f}var Yr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),xo=!1;if(Yr)try{var Rt={};Object.defineProperty(Rt,"passive",{get:function(){xo=!0}}),window.addEventListener("test",Rt,Rt),window.removeEventListener("test",Rt,Rt)}catch{xo=!1}var Qi=null,nu=null,Eo=null;function ru(){if(Eo)return Eo;var s,l=nu,f=l.length,d,y="value"in Qi?Qi.value:Qi.textContent,x=y.length;for(s=0;s<f&&l[s]===y[s];s++);var C=f-s;for(d=1;d<=C&&l[f-d]===y[x-d];d++);return Eo=y.slice(s,1<d?1-d:void 0)}function wo(s){var l=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&l===13&&(s=13)):s=l,s===10&&(s=13),32<=s||s===13?s:0}function wa(){return!0}function _i(){return!1}function Yn(s){function l(f,d,y,x,C){this._reactName=f,this._targetInst=y,this.type=d,this.nativeEvent=x,this.target=C,this.currentTarget=null;for(var B in s)s.hasOwnProperty(B)&&(f=s[B],this[B]=f?f(x):x[B]);return this.isDefaultPrevented=(x.defaultPrevented!=null?x.defaultPrevented:x.returnValue===!1)?wa:_i,this.isPropagationStopped=_i,this}return g(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var f=this.nativeEvent;f&&(f.preventDefault?f.preventDefault():typeof f.returnValue!="unknown"&&(f.returnValue=!1),this.isDefaultPrevented=wa)},stopPropagation:function(){var f=this.nativeEvent;f&&(f.stopPropagation?f.stopPropagation():typeof f.cancelBubble!="unknown"&&(f.cancelBubble=!0),this.isPropagationStopped=wa)},persist:function(){},isPersistent:wa}),l}var Aa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Zi=Yn(Aa),os=g({},Aa,{view:0,detail:0}),iu=Yn(os),ls,vl,Ji,yl=g({},os,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:cs,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==Ji&&(Ji&&s.type==="mousemove"?(ls=s.screenX-Ji.screenX,vl=s.screenY-Ji.screenY):vl=ls=0,Ji=s),ls)},movementY:function(s){return"movementY"in s?s.movementY:vl}}),au=Yn(yl),Ao=g({},yl,{dataTransfer:0}),sh=Yn(Ao),oh=g({},os,{relatedTarget:0}),bo=Yn(oh),su=g({},Aa,{animationName:0,elapsedTime:0,pseudoElement:0}),lh=Yn(su),_l=g({},Aa,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),ch=Yn(_l),uh=g({},Aa,{data:0}),ea=Yn(uh),fh={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},hh={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},dh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ph(s){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(s):(s=dh[s])?!!l[s]:!1}function cs(){return ph}var pr=g({},os,{key:function(s){if(s.key){var l=fh[s.key]||s.key;if(l!=="Unidentified")return l}return s.type==="keypress"?(s=wo(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?hh[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:cs,charCode:function(s){return s.type==="keypress"?wo(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?wo(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),mh=Yn(pr),gh=g({},yl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ba=Yn(gh),v=g({},os,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:cs}),A=Yn(v),R=g({},Aa,{propertyName:0,elapsedTime:0,pseudoElement:0}),U=Yn(R),W=g({},yl,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),ne=Yn(W),ve=g({},Aa,{newState:0,oldState:0}),$e=Yn(ve),ln=[9,13,27,32],vt=Yr&&"CompositionEvent"in window,qt=null;Yr&&"documentMode"in document&&(qt=document.documentMode);var Wr=Yr&&"TextEvent"in window&&!qt,ta=Yr&&(!vt||qt&&8<qt&&11>=qt),xi=" ",Ei=!1;function So(s,l){switch(s){case"keyup":return ln.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function xl(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var El=!1;function oI(s,l){switch(s){case"compositionend":return xl(l);case"keypress":return l.which!==32?null:(Ei=!0,xi);case"textInput":return s=l.data,s===xi&&Ei?null:s;default:return null}}function lI(s,l){if(El)return s==="compositionend"||!vt&&So(s,l)?(s=ru(),Eo=nu=Qi=null,El=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return ta&&l.locale!=="ko"?null:l.data;default:return null}}var cI={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function n2(s){var l=s&&s.nodeName&&s.nodeName.toLowerCase();return l==="input"?!!cI[s.type]:l==="textarea"}function r2(s,l,f,d){as?Wi?Wi.push(d):Wi=[d]:as=d,l=ad(l,"onChange"),0<l.length&&(f=new Zi("onChange","change",null,f,d),s.push({event:f,listeners:l}))}var ou=null,lu=null;function uI(s){Vx(s,0)}function vh(s){var l=Mr(s);if(vo(l))return s}function i2(s,l){if(s==="change")return l}var a2=!1;if(Yr){var bp;if(Yr){var Sp="oninput"in document;if(!Sp){var s2=document.createElement("div");s2.setAttribute("oninput","return;"),Sp=typeof s2.oninput=="function"}bp=Sp}else bp=!1;a2=bp&&(!document.documentMode||9<document.documentMode)}function o2(){ou&&(ou.detachEvent("onpropertychange",l2),lu=ou=null)}function l2(s){if(s.propertyName==="value"&&vh(lu)){var l=[];r2(l,lu,s,Kr(s)),ss(uI,l)}}function fI(s,l,f){s==="focusin"?(o2(),ou=l,lu=f,ou.attachEvent("onpropertychange",l2)):s==="focusout"&&o2()}function hI(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return vh(lu)}function dI(s,l){if(s==="click")return vh(l)}function pI(s,l){if(s==="input"||s==="change")return vh(l)}function mI(s,l){return s===l&&(s!==0||1/s===1/l)||s!==s&&l!==l}var kr=typeof Object.is=="function"?Object.is:mI;function cu(s,l){if(kr(s,l))return!0;if(typeof s!="object"||s===null||typeof l!="object"||l===null)return!1;var f=Object.keys(s),d=Object.keys(l);if(f.length!==d.length)return!1;for(d=0;d<f.length;d++){var y=f[d];if(!Ge.call(l,y)||!kr(s[y],l[y]))return!1}return!0}function c2(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function u2(s,l){var f=c2(s);s=0;for(var d;f;){if(f.nodeType===3){if(d=s+f.textContent.length,s<=l&&d>=l)return{node:f,offset:l-s};s=d}e:{for(;f;){if(f.nextSibling){f=f.nextSibling;break e}f=f.parentNode}f=void 0}f=c2(f)}}function f2(s,l){return s&&l?s===l?!0:s&&s.nodeType===3?!1:l&&l.nodeType===3?f2(s,l.parentNode):"contains"in s?s.contains(l):s.compareDocumentPosition?!!(s.compareDocumentPosition(l)&16):!1:!1}function h2(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var l=Yi(s.document);l instanceof s.HTMLIFrameElement;){try{var f=typeof l.contentWindow.location.href=="string"}catch{f=!1}if(f)s=l.contentWindow;else break;l=Yi(s.document)}return l}function Cp(s){var l=s&&s.nodeName&&s.nodeName.toLowerCase();return l&&(l==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||l==="textarea"||s.contentEditable==="true")}var gI=Yr&&"documentMode"in document&&11>=document.documentMode,wl=null,Tp=null,uu=null,Ip=!1;function d2(s,l,f){var d=f.window===f?f.document:f.nodeType===9?f:f.ownerDocument;Ip||wl==null||wl!==Yi(d)||(d=wl,"selectionStart"in d&&Cp(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),uu&&cu(uu,d)||(uu=d,d=ad(Tp,"onSelect"),0<d.length&&(l=new Zi("onSelect","select",null,l,f),s.push({event:l,listeners:d}),l.target=wl)))}function Co(s,l){var f={};return f[s.toLowerCase()]=l.toLowerCase(),f["Webkit"+s]="webkit"+l,f["Moz"+s]="moz"+l,f}var Al={animationend:Co("Animation","AnimationEnd"),animationiteration:Co("Animation","AnimationIteration"),animationstart:Co("Animation","AnimationStart"),transitionrun:Co("Transition","TransitionRun"),transitionstart:Co("Transition","TransitionStart"),transitioncancel:Co("Transition","TransitionCancel"),transitionend:Co("Transition","TransitionEnd")},Np={},p2={};Yr&&(p2=document.createElement("div").style,"AnimationEvent"in window||(delete Al.animationend.animation,delete Al.animationiteration.animation,delete Al.animationstart.animation),"TransitionEvent"in window||delete Al.transitionend.transition);function To(s){if(Np[s])return Np[s];if(!Al[s])return s;var l=Al[s],f;for(f in l)if(l.hasOwnProperty(f)&&f in p2)return Np[s]=l[f];return s}var m2=To("animationend"),g2=To("animationiteration"),v2=To("animationstart"),vI=To("transitionrun"),yI=To("transitionstart"),_I=To("transitioncancel"),y2=To("transitionend"),_2=new Map,Rp="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Rp.push("scrollEnd");function wi(s,l){_2.set(s,l),Xi(l,[s])}var yh=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var l=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(l))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)},Qr=[],bl=0,Op=0;function _h(){for(var s=bl,l=Op=bl=0;l<s;){var f=Qr[l];Qr[l++]=null;var d=Qr[l];Qr[l++]=null;var y=Qr[l];Qr[l++]=null;var x=Qr[l];if(Qr[l++]=null,d!==null&&y!==null){var C=d.pending;C===null?y.next=y:(y.next=C.next,C.next=y),d.pending=y}x!==0&&x2(f,y,x)}}function xh(s,l,f,d){Qr[bl++]=s,Qr[bl++]=l,Qr[bl++]=f,Qr[bl++]=d,Op|=d,s.lanes|=d,s=s.alternate,s!==null&&(s.lanes|=d)}function Dp(s,l,f,d){return xh(s,l,f,d),Eh(s)}function Io(s,l){return xh(s,null,null,l),Eh(s)}function x2(s,l,f){s.lanes|=f;var d=s.alternate;d!==null&&(d.lanes|=f);for(var y=!1,x=s.return;x!==null;)x.childLanes|=f,d=x.alternate,d!==null&&(d.childLanes|=f),x.tag===22&&(s=x.stateNode,s===null||s._visibility&1||(y=!0)),s=x,x=x.return;return s.tag===3?(x=s.stateNode,y&&l!==null&&(y=31-on(f),s=x.hiddenUpdates,d=s[y],d===null?s[y]=[l]:d.push(l),l.lane=f|536870912),x):null}function Eh(s){if(50<Du)throw Du=0,U1=null,Error(r(185));for(var l=s.return;l!==null;)s=l,l=s.return;return s.tag===3?s.stateNode:null}var Sl={};function xI(s,l,f,d){this.tag=s,this.key=f,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Lr(s,l,f,d){return new xI(s,l,f,d)}function Mp(s){return s=s.prototype,!(!s||!s.isReactComponent)}function Sa(s,l){var f=s.alternate;return f===null?(f=Lr(s.tag,l,s.key,s.mode),f.elementType=s.elementType,f.type=s.type,f.stateNode=s.stateNode,f.alternate=s,s.alternate=f):(f.pendingProps=l,f.type=s.type,f.flags=0,f.subtreeFlags=0,f.deletions=null),f.flags=s.flags&65011712,f.childLanes=s.childLanes,f.lanes=s.lanes,f.child=s.child,f.memoizedProps=s.memoizedProps,f.memoizedState=s.memoizedState,f.updateQueue=s.updateQueue,l=s.dependencies,f.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},f.sibling=s.sibling,f.index=s.index,f.ref=s.ref,f.refCleanup=s.refCleanup,f}function E2(s,l){s.flags&=65011714;var f=s.alternate;return f===null?(s.childLanes=0,s.lanes=l,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=f.childLanes,s.lanes=f.lanes,s.child=f.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=f.memoizedProps,s.memoizedState=f.memoizedState,s.updateQueue=f.updateQueue,s.type=f.type,l=f.dependencies,s.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext}),s}function wh(s,l,f,d,y,x){var C=0;if(d=s,typeof s=="function")Mp(s)&&(C=1);else if(typeof s=="string")C=S4(s,f,ye.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case I:return s=Lr(31,f,l,y),s.elementType=I,s.lanes=x,s;case S:return No(f.children,y,x,l);case D:C=8,y|=24;break;case T:return s=Lr(12,f,l,y|2),s.elementType=T,s.lanes=x,s;case H:return s=Lr(13,f,l,y),s.elementType=H,s.lanes=x,s;case q:return s=Lr(19,f,l,y),s.elementType=q,s.lanes=x,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case j:C=10;break e;case O:C=9;break e;case z:C=11;break e;case N:C=14;break e;case b:C=16,d=null;break e}C=29,f=Error(r(130,s===null?"null":typeof s,"")),d=null}return l=Lr(C,f,l,y),l.elementType=s,l.type=d,l.lanes=x,l}function No(s,l,f,d){return s=Lr(7,s,d,l),s.lanes=f,s}function Pp(s,l,f){return s=Lr(6,s,null,l),s.lanes=f,s}function w2(s){var l=Lr(18,null,null,0);return l.stateNode=s,l}function kp(s,l,f){return l=Lr(4,s.children!==null?s.children:[],s.key,l),l.lanes=f,l.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},l}var A2=new WeakMap;function Zr(s,l){if(typeof s=="object"&&s!==null){var f=A2.get(s);return f!==void 0?f:(l={value:s,source:l,stack:lt(l)},A2.set(s,l),l)}return{value:s,source:l,stack:lt(l)}}var Cl=[],Tl=0,Ah=null,fu=0,Jr=[],ei=0,us=null,na=1,ra="";function Ca(s,l){Cl[Tl++]=fu,Cl[Tl++]=Ah,Ah=s,fu=l}function b2(s,l,f){Jr[ei++]=na,Jr[ei++]=ra,Jr[ei++]=us,us=s;var d=na;s=ra;var y=32-on(d)-1;d&=~(1<<y),f+=1;var x=32-on(l)+y;if(30<x){var C=y-y%5;x=(d&(1<<C)-1).toString(32),d>>=C,y-=C,na=1<<32-on(l)+y|f<<y|d,ra=x+s}else na=1<<x|f<<y|d,ra=s}function Lp(s){s.return!==null&&(Ca(s,1),b2(s,1,0))}function jp(s){for(;s===Ah;)Ah=Cl[--Tl],Cl[Tl]=null,fu=Cl[--Tl],Cl[Tl]=null;for(;s===us;)us=Jr[--ei],Jr[ei]=null,ra=Jr[--ei],Jr[ei]=null,na=Jr[--ei],Jr[ei]=null}function S2(s,l){Jr[ei++]=na,Jr[ei++]=ra,Jr[ei++]=us,na=l.id,ra=l.overflow,us=s}var Wn=null,Ft=null,ot=!1,fs=null,ti=!1,Bp=Error(r(519));function hs(s){var l=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw hu(Zr(l,s)),Bp}function C2(s){var l=s.stateNode,f=s.type,d=s.memoizedProps;switch(l[mn]=s,l[Ln]=d,f){case"dialog":tt("cancel",l),tt("close",l);break;case"iframe":case"object":case"embed":tt("load",l);break;case"video":case"audio":for(f=0;f<Pu.length;f++)tt(Pu[f],l);break;case"source":tt("error",l);break;case"img":case"image":case"link":tt("error",l),tt("load",l);break;case"details":tt("toggle",l);break;case"input":tt("invalid",l),nh(l,d.value,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name,!0);break;case"select":tt("invalid",l);break;case"textarea":tt("invalid",l),rs(l,d.value,d.defaultValue,d.children)}f=d.children,typeof f!="string"&&typeof f!="number"&&typeof f!="bigint"||l.textContent===""+f||d.suppressHydrationWarning===!0||Hx(l.textContent,f)?(d.popover!=null&&(tt("beforetoggle",l),tt("toggle",l)),d.onScroll!=null&&tt("scroll",l),d.onScrollEnd!=null&&tt("scrollend",l),d.onClick!=null&&(l.onclick=vi),l=!0):l=!1,l||hs(s,!0)}function T2(s){for(Wn=s.return;Wn;)switch(Wn.tag){case 5:case 31:case 13:ti=!1;return;case 27:case 3:ti=!0;return;default:Wn=Wn.return}}function Il(s){if(s!==Wn)return!1;if(!ot)return T2(s),ot=!0,!1;var l=s.tag,f;if((f=l!==3&&l!==27)&&((f=l===5)&&(f=s.type,f=!(f!=="form"&&f!=="button")||nm(s.type,s.memoizedProps)),f=!f),f&&Ft&&hs(s),T2(s),l===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(317));Ft=Zx(s)}else if(l===31){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(317));Ft=Zx(s)}else l===27?(l=Ft,Cs(s.type)?(s=om,om=null,Ft=s):Ft=l):Ft=Wn?ri(s.stateNode.nextSibling):null;return!0}function Ro(){Ft=Wn=null,ot=!1}function Vp(){var s=fs;return s!==null&&(Sr===null?Sr=s:Sr.push.apply(Sr,s),fs=null),s}function hu(s){fs===null?fs=[s]:fs.push(s)}var Fp=X(null),Oo=null,Ta=null;function ds(s,l,f){pe(Fp,l._currentValue),l._currentValue=f}function Ia(s){s._currentValue=Fp.current,te(Fp)}function Up(s,l,f){for(;s!==null;){var d=s.alternate;if((s.childLanes&l)!==l?(s.childLanes|=l,d!==null&&(d.childLanes|=l)):d!==null&&(d.childLanes&l)!==l&&(d.childLanes|=l),s===f)break;s=s.return}}function zp(s,l,f,d){var y=s.child;for(y!==null&&(y.return=s);y!==null;){var x=y.dependencies;if(x!==null){var C=y.child;x=x.firstContext;e:for(;x!==null;){var B=x;x=y;for(var $=0;$<l.length;$++)if(B.context===l[$]){x.lanes|=f,B=x.alternate,B!==null&&(B.lanes|=f),Up(x.return,f,s),d||(C=null);break e}x=B.next}}else if(y.tag===18){if(C=y.return,C===null)throw Error(r(341));C.lanes|=f,x=C.alternate,x!==null&&(x.lanes|=f),Up(C,f,s),C=null}else C=y.child;if(C!==null)C.return=y;else for(C=y;C!==null;){if(C===s){C=null;break}if(y=C.sibling,y!==null){y.return=C.return,C=y;break}C=C.return}y=C}}function Nl(s,l,f,d){s=null;for(var y=l,x=!1;y!==null;){if(!x){if((y.flags&524288)!==0)x=!0;else if((y.flags&262144)!==0)break}if(y.tag===10){var C=y.alternate;if(C===null)throw Error(r(387));if(C=C.memoizedProps,C!==null){var B=y.type;kr(y.pendingProps.value,C.value)||(s!==null?s.push(B):s=[B])}}else if(y===xe.current){if(C=y.alternate,C===null)throw Error(r(387));C.memoizedState.memoizedState!==y.memoizedState.memoizedState&&(s!==null?s.push(Vu):s=[Vu])}y=y.return}s!==null&&zp(l,s,f,d),l.flags|=262144}function bh(s){for(s=s.firstContext;s!==null;){if(!kr(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function Do(s){Oo=s,Ta=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function Qn(s){return I2(Oo,s)}function Sh(s,l){return Oo===null&&Do(s),I2(s,l)}function I2(s,l){var f=l._currentValue;if(l={context:l,memoizedValue:f,next:null},Ta===null){if(s===null)throw Error(r(308));Ta=l,s.dependencies={lanes:0,firstContext:l},s.flags|=524288}else Ta=Ta.next=l;return f}var EI=typeof AbortController<"u"?AbortController:function(){var s=[],l=this.signal={aborted:!1,addEventListener:function(f,d){s.push(d)}};this.abort=function(){l.aborted=!0,s.forEach(function(f){return f()})}},wI=n.unstable_scheduleCallback,AI=n.unstable_NormalPriority,yn={$$typeof:j,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Hp(){return{controller:new EI,data:new Map,refCount:0}}function du(s){s.refCount--,s.refCount===0&&wI(AI,function(){s.controller.abort()})}var pu=null,Gp=0,Rl=0,Ol=null;function bI(s,l){if(pu===null){var f=pu=[];Gp=0,Rl=X1(),Ol={status:"pending",value:void 0,then:function(d){f.push(d)}}}return Gp++,l.then(N2,N2),l}function N2(){if(--Gp===0&&pu!==null){Ol!==null&&(Ol.status="fulfilled");var s=pu;pu=null,Rl=0,Ol=null;for(var l=0;l<s.length;l++)(0,s[l])()}}function SI(s,l){var f=[],d={status:"pending",value:null,reason:null,then:function(y){f.push(y)}};return s.then(function(){d.status="fulfilled",d.value=l;for(var y=0;y<f.length;y++)(0,f[y])(l)},function(y){for(d.status="rejected",d.reason=y,y=0;y<f.length;y++)(0,f[y])(void 0)}),d}var R2=F.S;F.S=function(s,l){dx=Ee(),typeof l=="object"&&l!==null&&typeof l.then=="function"&&bI(s,l),R2!==null&&R2(s,l)};var Mo=X(null);function qp(){var s=Mo.current;return s!==null?s:Lt.pooledCache}function Ch(s,l){l===null?pe(Mo,Mo.current):pe(Mo,l.pool)}function O2(){var s=qp();return s===null?null:{parent:yn._currentValue,pool:s}}var Dl=Error(r(460)),$p=Error(r(474)),Th=Error(r(542)),Ih={then:function(){}};function D2(s){return s=s.status,s==="fulfilled"||s==="rejected"}function M2(s,l,f){switch(f=s[f],f===void 0?s.push(l):f!==l&&(l.then(vi,vi),l=f),l.status){case"fulfilled":return l.value;case"rejected":throw s=l.reason,k2(s),s;default:if(typeof l.status=="string")l.then(vi,vi);else{if(s=Lt,s!==null&&100<s.shellSuspendCounter)throw Error(r(482));s=l,s.status="pending",s.then(function(d){if(l.status==="pending"){var y=l;y.status="fulfilled",y.value=d}},function(d){if(l.status==="pending"){var y=l;y.status="rejected",y.reason=d}})}switch(l.status){case"fulfilled":return l.value;case"rejected":throw s=l.reason,k2(s),s}throw ko=l,Dl}}function Po(s){try{var l=s._init;return l(s._payload)}catch(f){throw f!==null&&typeof f=="object"&&typeof f.then=="function"?(ko=f,Dl):f}}var ko=null;function P2(){if(ko===null)throw Error(r(459));var s=ko;return ko=null,s}function k2(s){if(s===Dl||s===Th)throw Error(r(483))}var Ml=null,mu=0;function Nh(s){var l=mu;return mu+=1,Ml===null&&(Ml=[]),M2(Ml,s,l)}function gu(s,l){l=l.props.ref,s.ref=l!==void 0?l:null}function Rh(s,l){throw l.$$typeof===_?Error(r(525)):(s=Object.prototype.toString.call(l),Error(r(31,s==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":s)))}function L2(s){function l(Y,K){if(s){var Z=Y.deletions;Z===null?(Y.deletions=[K],Y.flags|=16):Z.push(K)}}function f(Y,K){if(!s)return null;for(;K!==null;)l(Y,K),K=K.sibling;return null}function d(Y){for(var K=new Map;Y!==null;)Y.key!==null?K.set(Y.key,Y):K.set(Y.index,Y),Y=Y.sibling;return K}function y(Y,K){return Y=Sa(Y,K),Y.index=0,Y.sibling=null,Y}function x(Y,K,Z){return Y.index=Z,s?(Z=Y.alternate,Z!==null?(Z=Z.index,Z<K?(Y.flags|=67108866,K):Z):(Y.flags|=67108866,K)):(Y.flags|=1048576,K)}function C(Y){return s&&Y.alternate===null&&(Y.flags|=67108866),Y}function B(Y,K,Z,ue){return K===null||K.tag!==6?(K=Pp(Z,Y.mode,ue),K.return=Y,K):(K=y(K,Z),K.return=Y,K)}function $(Y,K,Z,ue){var Oe=Z.type;return Oe===S?oe(Y,K,Z.props.children,ue,Z.key):K!==null&&(K.elementType===Oe||typeof Oe=="object"&&Oe!==null&&Oe.$$typeof===b&&Po(Oe)===K.type)?(K=y(K,Z.props),gu(K,Z),K.return=Y,K):(K=wh(Z.type,Z.key,Z.props,null,Y.mode,ue),gu(K,Z),K.return=Y,K)}function J(Y,K,Z,ue){return K===null||K.tag!==4||K.stateNode.containerInfo!==Z.containerInfo||K.stateNode.implementation!==Z.implementation?(K=kp(Z,Y.mode,ue),K.return=Y,K):(K=y(K,Z.children||[]),K.return=Y,K)}function oe(Y,K,Z,ue,Oe){return K===null||K.tag!==7?(K=No(Z,Y.mode,ue,Oe),K.return=Y,K):(K=y(K,Z),K.return=Y,K)}function fe(Y,K,Z){if(typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint")return K=Pp(""+K,Y.mode,Z),K.return=Y,K;if(typeof K=="object"&&K!==null){switch(K.$$typeof){case E:return Z=wh(K.type,K.key,K.props,null,Y.mode,Z),gu(Z,K),Z.return=Y,Z;case w:return K=kp(K,Y.mode,Z),K.return=Y,K;case b:return K=Po(K),fe(Y,K,Z)}if(we(K)||V(K))return K=No(K,Y.mode,Z,null),K.return=Y,K;if(typeof K.then=="function")return fe(Y,Nh(K),Z);if(K.$$typeof===j)return fe(Y,Sh(Y,K),Z);Rh(Y,K)}return null}function ee(Y,K,Z,ue){var Oe=K!==null?K.key:null;if(typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint")return Oe!==null?null:B(Y,K,""+Z,ue);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case E:return Z.key===Oe?$(Y,K,Z,ue):null;case w:return Z.key===Oe?J(Y,K,Z,ue):null;case b:return Z=Po(Z),ee(Y,K,Z,ue)}if(we(Z)||V(Z))return Oe!==null?null:oe(Y,K,Z,ue,null);if(typeof Z.then=="function")return ee(Y,K,Nh(Z),ue);if(Z.$$typeof===j)return ee(Y,K,Sh(Y,Z),ue);Rh(Y,Z)}return null}function re(Y,K,Z,ue,Oe){if(typeof ue=="string"&&ue!==""||typeof ue=="number"||typeof ue=="bigint")return Y=Y.get(Z)||null,B(K,Y,""+ue,Oe);if(typeof ue=="object"&&ue!==null){switch(ue.$$typeof){case E:return Y=Y.get(ue.key===null?Z:ue.key)||null,$(K,Y,ue,Oe);case w:return Y=Y.get(ue.key===null?Z:ue.key)||null,J(K,Y,ue,Oe);case b:return ue=Po(ue),re(Y,K,Z,ue,Oe)}if(we(ue)||V(ue))return Y=Y.get(Z)||null,oe(K,Y,ue,Oe,null);if(typeof ue.then=="function")return re(Y,K,Z,Nh(ue),Oe);if(ue.$$typeof===j)return re(Y,K,Z,Sh(K,ue),Oe);Rh(K,ue)}return null}function be(Y,K,Z,ue){for(var Oe=null,dt=null,Ce=K,Ye=K=0,rt=null;Ce!==null&&Ye<Z.length;Ye++){Ce.index>Ye?(rt=Ce,Ce=null):rt=Ce.sibling;var pt=ee(Y,Ce,Z[Ye],ue);if(pt===null){Ce===null&&(Ce=rt);break}s&&Ce&&pt.alternate===null&&l(Y,Ce),K=x(pt,K,Ye),dt===null?Oe=pt:dt.sibling=pt,dt=pt,Ce=rt}if(Ye===Z.length)return f(Y,Ce),ot&&Ca(Y,Ye),Oe;if(Ce===null){for(;Ye<Z.length;Ye++)Ce=fe(Y,Z[Ye],ue),Ce!==null&&(K=x(Ce,K,Ye),dt===null?Oe=Ce:dt.sibling=Ce,dt=Ce);return ot&&Ca(Y,Ye),Oe}for(Ce=d(Ce);Ye<Z.length;Ye++)rt=re(Ce,Y,Ye,Z[Ye],ue),rt!==null&&(s&&rt.alternate!==null&&Ce.delete(rt.key===null?Ye:rt.key),K=x(rt,K,Ye),dt===null?Oe=rt:dt.sibling=rt,dt=rt);return s&&Ce.forEach(function(Os){return l(Y,Os)}),ot&&Ca(Y,Ye),Oe}function Le(Y,K,Z,ue){if(Z==null)throw Error(r(151));for(var Oe=null,dt=null,Ce=K,Ye=K=0,rt=null,pt=Z.next();Ce!==null&&!pt.done;Ye++,pt=Z.next()){Ce.index>Ye?(rt=Ce,Ce=null):rt=Ce.sibling;var Os=ee(Y,Ce,pt.value,ue);if(Os===null){Ce===null&&(Ce=rt);break}s&&Ce&&Os.alternate===null&&l(Y,Ce),K=x(Os,K,Ye),dt===null?Oe=Os:dt.sibling=Os,dt=Os,Ce=rt}if(pt.done)return f(Y,Ce),ot&&Ca(Y,Ye),Oe;if(Ce===null){for(;!pt.done;Ye++,pt=Z.next())pt=fe(Y,pt.value,ue),pt!==null&&(K=x(pt,K,Ye),dt===null?Oe=pt:dt.sibling=pt,dt=pt);return ot&&Ca(Y,Ye),Oe}for(Ce=d(Ce);!pt.done;Ye++,pt=Z.next())pt=re(Ce,Y,Ye,pt.value,ue),pt!==null&&(s&&pt.alternate!==null&&Ce.delete(pt.key===null?Ye:pt.key),K=x(pt,K,Ye),dt===null?Oe=pt:dt.sibling=pt,dt=pt);return s&&Ce.forEach(function(L4){return l(Y,L4)}),ot&&Ca(Y,Ye),Oe}function Mt(Y,K,Z,ue){if(typeof Z=="object"&&Z!==null&&Z.type===S&&Z.key===null&&(Z=Z.props.children),typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case E:e:{for(var Oe=Z.key;K!==null;){if(K.key===Oe){if(Oe=Z.type,Oe===S){if(K.tag===7){f(Y,K.sibling),ue=y(K,Z.props.children),ue.return=Y,Y=ue;break e}}else if(K.elementType===Oe||typeof Oe=="object"&&Oe!==null&&Oe.$$typeof===b&&Po(Oe)===K.type){f(Y,K.sibling),ue=y(K,Z.props),gu(ue,Z),ue.return=Y,Y=ue;break e}f(Y,K);break}else l(Y,K);K=K.sibling}Z.type===S?(ue=No(Z.props.children,Y.mode,ue,Z.key),ue.return=Y,Y=ue):(ue=wh(Z.type,Z.key,Z.props,null,Y.mode,ue),gu(ue,Z),ue.return=Y,Y=ue)}return C(Y);case w:e:{for(Oe=Z.key;K!==null;){if(K.key===Oe)if(K.tag===4&&K.stateNode.containerInfo===Z.containerInfo&&K.stateNode.implementation===Z.implementation){f(Y,K.sibling),ue=y(K,Z.children||[]),ue.return=Y,Y=ue;break e}else{f(Y,K);break}else l(Y,K);K=K.sibling}ue=kp(Z,Y.mode,ue),ue.return=Y,Y=ue}return C(Y);case b:return Z=Po(Z),Mt(Y,K,Z,ue)}if(we(Z))return be(Y,K,Z,ue);if(V(Z)){if(Oe=V(Z),typeof Oe!="function")throw Error(r(150));return Z=Oe.call(Z),Le(Y,K,Z,ue)}if(typeof Z.then=="function")return Mt(Y,K,Nh(Z),ue);if(Z.$$typeof===j)return Mt(Y,K,Sh(Y,Z),ue);Rh(Y,Z)}return typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint"?(Z=""+Z,K!==null&&K.tag===6?(f(Y,K.sibling),ue=y(K,Z),ue.return=Y,Y=ue):(f(Y,K),ue=Pp(Z,Y.mode,ue),ue.return=Y,Y=ue),C(Y)):f(Y,K)}return function(Y,K,Z,ue){try{mu=0;var Oe=Mt(Y,K,Z,ue);return Ml=null,Oe}catch(Ce){if(Ce===Dl||Ce===Th)throw Ce;var dt=Lr(29,Ce,null,Y.mode);return dt.lanes=ue,dt.return=Y,dt}finally{}}}var Lo=L2(!0),j2=L2(!1),ps=!1;function Xp(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Kp(s,l){s=s.updateQueue,l.updateQueue===s&&(l.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function ms(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function gs(s,l,f){var d=s.updateQueue;if(d===null)return null;if(d=d.shared,(yt&2)!==0){var y=d.pending;return y===null?l.next=l:(l.next=y.next,y.next=l),d.pending=l,l=Eh(s),x2(s,null,f),l}return xh(s,d,l,f),Eh(s)}function vu(s,l,f){if(l=l.updateQueue,l!==null&&(l=l.shared,(f&4194048)!==0)){var d=l.lanes;d&=s.pendingLanes,f|=d,l.lanes=f,Gc(s,f)}}function Yp(s,l){var f=s.updateQueue,d=s.alternate;if(d!==null&&(d=d.updateQueue,f===d)){var y=null,x=null;if(f=f.firstBaseUpdate,f!==null){do{var C={lane:f.lane,tag:f.tag,payload:f.payload,callback:null,next:null};x===null?y=x=C:x=x.next=C,f=f.next}while(f!==null);x===null?y=x=l:x=x.next=l}else y=x=l;f={baseState:d.baseState,firstBaseUpdate:y,lastBaseUpdate:x,shared:d.shared,callbacks:d.callbacks},s.updateQueue=f;return}s=f.lastBaseUpdate,s===null?f.firstBaseUpdate=l:s.next=l,f.lastBaseUpdate=l}var Wp=!1;function yu(){if(Wp){var s=Ol;if(s!==null)throw s}}function _u(s,l,f,d){Wp=!1;var y=s.updateQueue;ps=!1;var x=y.firstBaseUpdate,C=y.lastBaseUpdate,B=y.shared.pending;if(B!==null){y.shared.pending=null;var $=B,J=$.next;$.next=null,C===null?x=J:C.next=J,C=$;var oe=s.alternate;oe!==null&&(oe=oe.updateQueue,B=oe.lastBaseUpdate,B!==C&&(B===null?oe.firstBaseUpdate=J:B.next=J,oe.lastBaseUpdate=$))}if(x!==null){var fe=y.baseState;C=0,oe=J=$=null,B=x;do{var ee=B.lane&-536870913,re=ee!==B.lane;if(re?(nt&ee)===ee:(d&ee)===ee){ee!==0&&ee===Rl&&(Wp=!0),oe!==null&&(oe=oe.next={lane:0,tag:B.tag,payload:B.payload,callback:null,next:null});e:{var be=s,Le=B;ee=l;var Mt=f;switch(Le.tag){case 1:if(be=Le.payload,typeof be=="function"){fe=be.call(Mt,fe,ee);break e}fe=be;break e;case 3:be.flags=be.flags&-65537|128;case 0:if(be=Le.payload,ee=typeof be=="function"?be.call(Mt,fe,ee):be,ee==null)break e;fe=g({},fe,ee);break e;case 2:ps=!0}}ee=B.callback,ee!==null&&(s.flags|=64,re&&(s.flags|=8192),re=y.callbacks,re===null?y.callbacks=[ee]:re.push(ee))}else re={lane:ee,tag:B.tag,payload:B.payload,callback:B.callback,next:null},oe===null?(J=oe=re,$=fe):oe=oe.next=re,C|=ee;if(B=B.next,B===null){if(B=y.shared.pending,B===null)break;re=B,B=re.next,re.next=null,y.lastBaseUpdate=re,y.shared.pending=null}}while(!0);oe===null&&($=fe),y.baseState=$,y.firstBaseUpdate=J,y.lastBaseUpdate=oe,x===null&&(y.shared.lanes=0),Es|=C,s.lanes=C,s.memoizedState=fe}}function B2(s,l){if(typeof s!="function")throw Error(r(191,s));s.call(l)}function V2(s,l){var f=s.callbacks;if(f!==null)for(s.callbacks=null,s=0;s<f.length;s++)B2(f[s],l)}var Pl=X(null),Oh=X(0);function F2(s,l){s=ja,pe(Oh,s),pe(Pl,l),ja=s|l.baseLanes}function Qp(){pe(Oh,ja),pe(Pl,Pl.current)}function Zp(){ja=Oh.current,te(Pl),te(Oh)}var jr=X(null),ni=null;function vs(s){var l=s.alternate;pe(cn,cn.current&1),pe(jr,s),ni===null&&(l===null||Pl.current!==null||l.memoizedState!==null)&&(ni=s)}function Jp(s){pe(cn,cn.current),pe(jr,s),ni===null&&(ni=s)}function U2(s){s.tag===22?(pe(cn,cn.current),pe(jr,s),ni===null&&(ni=s)):ys()}function ys(){pe(cn,cn.current),pe(jr,jr.current)}function Br(s){te(jr),ni===s&&(ni=null),te(cn)}var cn=X(0);function Dh(s){for(var l=s;l!==null;){if(l.tag===13){var f=l.memoizedState;if(f!==null&&(f=f.dehydrated,f===null||am(f)||sm(f)))return l}else if(l.tag===19&&(l.memoizedProps.revealOrder==="forwards"||l.memoizedProps.revealOrder==="backwards"||l.memoizedProps.revealOrder==="unstable_legacy-backwards"||l.memoizedProps.revealOrder==="together")){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===s)break;for(;l.sibling===null;){if(l.return===null||l.return===s)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}var Na=0,Xe=null,Ot=null,_n=null,Mh=!1,kl=!1,jo=!1,Ph=0,xu=0,Ll=null,CI=0;function nn(){throw Error(r(321))}function e1(s,l){if(l===null)return!1;for(var f=0;f<l.length&&f<s.length;f++)if(!kr(s[f],l[f]))return!1;return!0}function t1(s,l,f,d,y,x){return Na=x,Xe=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,F.H=s===null||s.memoizedState===null?b_:g1,jo=!1,x=f(d,y),jo=!1,kl&&(x=H2(l,f,d,y)),z2(s),x}function z2(s){F.H=Au;var l=Ot!==null&&Ot.next!==null;if(Na=0,_n=Ot=Xe=null,Mh=!1,xu=0,Ll=null,l)throw Error(r(300));s===null||xn||(s=s.dependencies,s!==null&&bh(s)&&(xn=!0))}function H2(s,l,f,d){Xe=s;var y=0;do{if(kl&&(Ll=null),xu=0,kl=!1,25<=y)throw Error(r(301));if(y+=1,_n=Ot=null,s.updateQueue!=null){var x=s.updateQueue;x.lastEffect=null,x.events=null,x.stores=null,x.memoCache!=null&&(x.memoCache.index=0)}F.H=S_,x=l(f,d)}while(kl);return x}function TI(){var s=F.H,l=s.useState()[0];return l=typeof l.then=="function"?Eu(l):l,s=s.useState()[0],(Ot!==null?Ot.memoizedState:null)!==s&&(Xe.flags|=1024),l}function n1(){var s=Ph!==0;return Ph=0,s}function r1(s,l,f){l.updateQueue=s.updateQueue,l.flags&=-2053,s.lanes&=~f}function i1(s){if(Mh){for(s=s.memoizedState;s!==null;){var l=s.queue;l!==null&&(l.pending=null),s=s.next}Mh=!1}Na=0,_n=Ot=Xe=null,kl=!1,xu=Ph=0,Ll=null}function mr(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return _n===null?Xe.memoizedState=_n=s:_n=_n.next=s,_n}function un(){if(Ot===null){var s=Xe.alternate;s=s!==null?s.memoizedState:null}else s=Ot.next;var l=_n===null?Xe.memoizedState:_n.next;if(l!==null)_n=l,Ot=s;else{if(s===null)throw Xe.alternate===null?Error(r(467)):Error(r(310));Ot=s,s={memoizedState:Ot.memoizedState,baseState:Ot.baseState,baseQueue:Ot.baseQueue,queue:Ot.queue,next:null},_n===null?Xe.memoizedState=_n=s:_n=_n.next=s}return _n}function kh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Eu(s){var l=xu;return xu+=1,Ll===null&&(Ll=[]),s=M2(Ll,s,l),l=Xe,(_n===null?l.memoizedState:_n.next)===null&&(l=l.alternate,F.H=l===null||l.memoizedState===null?b_:g1),s}function Lh(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return Eu(s);if(s.$$typeof===j)return Qn(s)}throw Error(r(438,String(s)))}function a1(s){var l=null,f=Xe.updateQueue;if(f!==null&&(l=f.memoCache),l==null){var d=Xe.alternate;d!==null&&(d=d.updateQueue,d!==null&&(d=d.memoCache,d!=null&&(l={data:d.data.map(function(y){return y.slice()}),index:0})))}if(l==null&&(l={data:[],index:0}),f===null&&(f=kh(),Xe.updateQueue=f),f.memoCache=l,f=l.data[l.index],f===void 0)for(f=l.data[l.index]=Array(s),d=0;d<s;d++)f[d]=k;return l.index++,f}function Ra(s,l){return typeof l=="function"?l(s):l}function jh(s){var l=un();return s1(l,Ot,s)}function s1(s,l,f){var d=s.queue;if(d===null)throw Error(r(311));d.lastRenderedReducer=f;var y=s.baseQueue,x=d.pending;if(x!==null){if(y!==null){var C=y.next;y.next=x.next,x.next=C}l.baseQueue=y=x,d.pending=null}if(x=s.baseState,y===null)s.memoizedState=x;else{l=y.next;var B=C=null,$=null,J=l,oe=!1;do{var fe=J.lane&-536870913;if(fe!==J.lane?(nt&fe)===fe:(Na&fe)===fe){var ee=J.revertLane;if(ee===0)$!==null&&($=$.next={lane:0,revertLane:0,gesture:null,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null}),fe===Rl&&(oe=!0);else if((Na&ee)===ee){J=J.next,ee===Rl&&(oe=!0);continue}else fe={lane:0,revertLane:J.revertLane,gesture:null,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null},$===null?(B=$=fe,C=x):$=$.next=fe,Xe.lanes|=ee,Es|=ee;fe=J.action,jo&&f(x,fe),x=J.hasEagerState?J.eagerState:f(x,fe)}else ee={lane:fe,revertLane:J.revertLane,gesture:J.gesture,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null},$===null?(B=$=ee,C=x):$=$.next=ee,Xe.lanes|=fe,Es|=fe;J=J.next}while(J!==null&&J!==l);if($===null?C=x:$.next=B,!kr(x,s.memoizedState)&&(xn=!0,oe&&(f=Ol,f!==null)))throw f;s.memoizedState=x,s.baseState=C,s.baseQueue=$,d.lastRenderedState=x}return y===null&&(d.lanes=0),[s.memoizedState,d.dispatch]}function o1(s){var l=un(),f=l.queue;if(f===null)throw Error(r(311));f.lastRenderedReducer=s;var d=f.dispatch,y=f.pending,x=l.memoizedState;if(y!==null){f.pending=null;var C=y=y.next;do x=s(x,C.action),C=C.next;while(C!==y);kr(x,l.memoizedState)||(xn=!0),l.memoizedState=x,l.baseQueue===null&&(l.baseState=x),f.lastRenderedState=x}return[x,d]}function G2(s,l,f){var d=Xe,y=un(),x=ot;if(x){if(f===void 0)throw Error(r(407));f=f()}else f=l();var C=!kr((Ot||y).memoizedState,f);if(C&&(y.memoizedState=f,xn=!0),y=y.queue,u1(X2.bind(null,d,y,s),[s]),y.getSnapshot!==l||C||_n!==null&&_n.memoizedState.tag&1){if(d.flags|=2048,jl(9,{destroy:void 0},$2.bind(null,d,y,f,l),null),Lt===null)throw Error(r(349));x||(Na&127)!==0||q2(d,l,f)}return f}function q2(s,l,f){s.flags|=16384,s={getSnapshot:l,value:f},l=Xe.updateQueue,l===null?(l=kh(),Xe.updateQueue=l,l.stores=[s]):(f=l.stores,f===null?l.stores=[s]:f.push(s))}function $2(s,l,f,d){l.value=f,l.getSnapshot=d,K2(l)&&Y2(s)}function X2(s,l,f){return f(function(){K2(l)&&Y2(s)})}function K2(s){var l=s.getSnapshot;s=s.value;try{var f=l();return!kr(s,f)}catch{return!0}}function Y2(s){var l=Io(s,2);l!==null&&Cr(l,s,2)}function l1(s){var l=mr();if(typeof s=="function"){var f=s;if(s=f(),jo){$r(!0);try{f()}finally{$r(!1)}}}return l.memoizedState=l.baseState=s,l.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ra,lastRenderedState:s},l}function W2(s,l,f,d){return s.baseState=f,s1(s,Ot,typeof d=="function"?d:Ra)}function II(s,l,f,d,y){if(Fh(s))throw Error(r(485));if(s=l.action,s!==null){var x={payload:y,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(C){x.listeners.push(C)}};F.T!==null?f(!0):x.isTransition=!1,d(x),f=l.pending,f===null?(x.next=l.pending=x,Q2(l,x)):(x.next=f.next,l.pending=f.next=x)}}function Q2(s,l){var f=l.action,d=l.payload,y=s.state;if(l.isTransition){var x=F.T,C={};F.T=C;try{var B=f(y,d),$=F.S;$!==null&&$(C,B),Z2(s,l,B)}catch(J){c1(s,l,J)}finally{x!==null&&C.types!==null&&(x.types=C.types),F.T=x}}else try{x=f(y,d),Z2(s,l,x)}catch(J){c1(s,l,J)}}function Z2(s,l,f){f!==null&&typeof f=="object"&&typeof f.then=="function"?f.then(function(d){J2(s,l,d)},function(d){return c1(s,l,d)}):J2(s,l,f)}function J2(s,l,f){l.status="fulfilled",l.value=f,e_(l),s.state=f,l=s.pending,l!==null&&(f=l.next,f===l?s.pending=null:(f=f.next,l.next=f,Q2(s,f)))}function c1(s,l,f){var d=s.pending;if(s.pending=null,d!==null){d=d.next;do l.status="rejected",l.reason=f,e_(l),l=l.next;while(l!==d)}s.action=null}function e_(s){s=s.listeners;for(var l=0;l<s.length;l++)(0,s[l])()}function t_(s,l){return l}function n_(s,l){if(ot){var f=Lt.formState;if(f!==null){e:{var d=Xe;if(ot){if(Ft){t:{for(var y=Ft,x=ti;y.nodeType!==8;){if(!x){y=null;break t}if(y=ri(y.nextSibling),y===null){y=null;break t}}x=y.data,y=x==="F!"||x==="F"?y:null}if(y){Ft=ri(y.nextSibling),d=y.data==="F!";break e}}hs(d)}d=!1}d&&(l=f[0])}}return f=mr(),f.memoizedState=f.baseState=l,d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t_,lastRenderedState:l},f.queue=d,f=E_.bind(null,Xe,d),d.dispatch=f,d=l1(!1),x=m1.bind(null,Xe,!1,d.queue),d=mr(),y={state:l,dispatch:null,action:s,pending:null},d.queue=y,f=II.bind(null,Xe,y,x,f),y.dispatch=f,d.memoizedState=s,[l,f,!1]}function r_(s){var l=un();return i_(l,Ot,s)}function i_(s,l,f){if(l=s1(s,l,t_)[0],s=jh(Ra)[0],typeof l=="object"&&l!==null&&typeof l.then=="function")try{var d=Eu(l)}catch(C){throw C===Dl?Th:C}else d=l;l=un();var y=l.queue,x=y.dispatch;return f!==l.memoizedState&&(Xe.flags|=2048,jl(9,{destroy:void 0},NI.bind(null,y,f),null)),[d,x,s]}function NI(s,l){s.action=l}function a_(s){var l=un(),f=Ot;if(f!==null)return i_(l,f,s);un(),l=l.memoizedState,f=un();var d=f.queue.dispatch;return f.memoizedState=s,[l,d,!1]}function jl(s,l,f,d){return s={tag:s,create:f,deps:d,inst:l,next:null},l=Xe.updateQueue,l===null&&(l=kh(),Xe.updateQueue=l),f=l.lastEffect,f===null?l.lastEffect=s.next=s:(d=f.next,f.next=s,s.next=d,l.lastEffect=s),s}function s_(){return un().memoizedState}function Bh(s,l,f,d){var y=mr();Xe.flags|=s,y.memoizedState=jl(1|l,{destroy:void 0},f,d===void 0?null:d)}function Vh(s,l,f,d){var y=un();d=d===void 0?null:d;var x=y.memoizedState.inst;Ot!==null&&d!==null&&e1(d,Ot.memoizedState.deps)?y.memoizedState=jl(l,x,f,d):(Xe.flags|=s,y.memoizedState=jl(1|l,x,f,d))}function o_(s,l){Bh(8390656,8,s,l)}function u1(s,l){Vh(2048,8,s,l)}function RI(s){Xe.flags|=4;var l=Xe.updateQueue;if(l===null)l=kh(),Xe.updateQueue=l,l.events=[s];else{var f=l.events;f===null?l.events=[s]:f.push(s)}}function l_(s){var l=un().memoizedState;return RI({ref:l,nextImpl:s}),function(){if((yt&2)!==0)throw Error(r(440));return l.impl.apply(void 0,arguments)}}function c_(s,l){return Vh(4,2,s,l)}function u_(s,l){return Vh(4,4,s,l)}function f_(s,l){if(typeof l=="function"){s=s();var f=l(s);return function(){typeof f=="function"?f():l(null)}}if(l!=null)return s=s(),l.current=s,function(){l.current=null}}function h_(s,l,f){f=f!=null?f.concat([s]):null,Vh(4,4,f_.bind(null,l,s),f)}function f1(){}function d_(s,l){var f=un();l=l===void 0?null:l;var d=f.memoizedState;return l!==null&&e1(l,d[1])?d[0]:(f.memoizedState=[s,l],s)}function p_(s,l){var f=un();l=l===void 0?null:l;var d=f.memoizedState;if(l!==null&&e1(l,d[1]))return d[0];if(d=s(),jo){$r(!0);try{s()}finally{$r(!1)}}return f.memoizedState=[d,l],d}function h1(s,l,f){return f===void 0||(Na&1073741824)!==0&&(nt&261930)===0?s.memoizedState=l:(s.memoizedState=f,s=mx(),Xe.lanes|=s,Es|=s,f)}function m_(s,l,f,d){return kr(f,l)?f:Pl.current!==null?(s=h1(s,f,d),kr(s,l)||(xn=!0),s):(Na&42)===0||(Na&1073741824)!==0&&(nt&261930)===0?(xn=!0,s.memoizedState=f):(s=mx(),Xe.lanes|=s,Es|=s,l)}function g_(s,l,f,d,y){var x=se.p;se.p=x!==0&&8>x?x:8;var C=F.T,B={};F.T=B,m1(s,!1,l,f);try{var $=y(),J=F.S;if(J!==null&&J(B,$),$!==null&&typeof $=="object"&&typeof $.then=="function"){var oe=SI($,d);wu(s,l,oe,Ur(s))}else wu(s,l,d,Ur(s))}catch(fe){wu(s,l,{then:function(){},status:"rejected",reason:fe},Ur())}finally{se.p=x,C!==null&&B.types!==null&&(C.types=B.types),F.T=C}}function OI(){}function d1(s,l,f,d){if(s.tag!==5)throw Error(r(476));var y=v_(s).queue;g_(s,y,l,he,f===null?OI:function(){return y_(s),f(d)})}function v_(s){var l=s.memoizedState;if(l!==null)return l;l={memoizedState:he,baseState:he,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ra,lastRenderedState:he},next:null};var f={};return l.next={memoizedState:f,baseState:f,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ra,lastRenderedState:f},next:null},s.memoizedState=l,s=s.alternate,s!==null&&(s.memoizedState=l),l}function y_(s){var l=v_(s);l.next===null&&(l=s.alternate.memoizedState),wu(s,l.next.queue,{},Ur())}function p1(){return Qn(Vu)}function __(){return un().memoizedState}function x_(){return un().memoizedState}function DI(s){for(var l=s.return;l!==null;){switch(l.tag){case 24:case 3:var f=Ur();s=ms(f);var d=gs(l,s,f);d!==null&&(Cr(d,l,f),vu(d,l,f)),l={cache:Hp()},s.payload=l;return}l=l.return}}function MI(s,l,f){var d=Ur();f={lane:d,revertLane:0,gesture:null,action:f,hasEagerState:!1,eagerState:null,next:null},Fh(s)?w_(l,f):(f=Dp(s,l,f,d),f!==null&&(Cr(f,s,d),A_(f,l,d)))}function E_(s,l,f){var d=Ur();wu(s,l,f,d)}function wu(s,l,f,d){var y={lane:d,revertLane:0,gesture:null,action:f,hasEagerState:!1,eagerState:null,next:null};if(Fh(s))w_(l,y);else{var x=s.alternate;if(s.lanes===0&&(x===null||x.lanes===0)&&(x=l.lastRenderedReducer,x!==null))try{var C=l.lastRenderedState,B=x(C,f);if(y.hasEagerState=!0,y.eagerState=B,kr(B,C))return xh(s,l,y,0),Lt===null&&_h(),!1}catch{}finally{}if(f=Dp(s,l,y,d),f!==null)return Cr(f,s,d),A_(f,l,d),!0}return!1}function m1(s,l,f,d){if(d={lane:2,revertLane:X1(),gesture:null,action:d,hasEagerState:!1,eagerState:null,next:null},Fh(s)){if(l)throw Error(r(479))}else l=Dp(s,f,d,2),l!==null&&Cr(l,s,2)}function Fh(s){var l=s.alternate;return s===Xe||l!==null&&l===Xe}function w_(s,l){kl=Mh=!0;var f=s.pending;f===null?l.next=l:(l.next=f.next,f.next=l),s.pending=l}function A_(s,l,f){if((f&4194048)!==0){var d=l.lanes;d&=s.pendingLanes,f|=d,l.lanes=f,Gc(s,f)}}var Au={readContext:Qn,use:Lh,useCallback:nn,useContext:nn,useEffect:nn,useImperativeHandle:nn,useLayoutEffect:nn,useInsertionEffect:nn,useMemo:nn,useReducer:nn,useRef:nn,useState:nn,useDebugValue:nn,useDeferredValue:nn,useTransition:nn,useSyncExternalStore:nn,useId:nn,useHostTransitionStatus:nn,useFormState:nn,useActionState:nn,useOptimistic:nn,useMemoCache:nn,useCacheRefresh:nn};Au.useEffectEvent=nn;var b_={readContext:Qn,use:Lh,useCallback:function(s,l){return mr().memoizedState=[s,l===void 0?null:l],s},useContext:Qn,useEffect:o_,useImperativeHandle:function(s,l,f){f=f!=null?f.concat([s]):null,Bh(4194308,4,f_.bind(null,l,s),f)},useLayoutEffect:function(s,l){return Bh(4194308,4,s,l)},useInsertionEffect:function(s,l){Bh(4,2,s,l)},useMemo:function(s,l){var f=mr();l=l===void 0?null:l;var d=s();if(jo){$r(!0);try{s()}finally{$r(!1)}}return f.memoizedState=[d,l],d},useReducer:function(s,l,f){var d=mr();if(f!==void 0){var y=f(l);if(jo){$r(!0);try{f(l)}finally{$r(!1)}}}else y=l;return d.memoizedState=d.baseState=y,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:y},d.queue=s,s=s.dispatch=MI.bind(null,Xe,s),[d.memoizedState,s]},useRef:function(s){var l=mr();return s={current:s},l.memoizedState=s},useState:function(s){s=l1(s);var l=s.queue,f=E_.bind(null,Xe,l);return l.dispatch=f,[s.memoizedState,f]},useDebugValue:f1,useDeferredValue:function(s,l){var f=mr();return h1(f,s,l)},useTransition:function(){var s=l1(!1);return s=g_.bind(null,Xe,s.queue,!0,!1),mr().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,l,f){var d=Xe,y=mr();if(ot){if(f===void 0)throw Error(r(407));f=f()}else{if(f=l(),Lt===null)throw Error(r(349));(nt&127)!==0||q2(d,l,f)}y.memoizedState=f;var x={value:f,getSnapshot:l};return y.queue=x,o_(X2.bind(null,d,x,s),[s]),d.flags|=2048,jl(9,{destroy:void 0},$2.bind(null,d,x,f,l),null),f},useId:function(){var s=mr(),l=Lt.identifierPrefix;if(ot){var f=ra,d=na;f=(d&~(1<<32-on(d)-1)).toString(32)+f,l="_"+l+"R_"+f,f=Ph++,0<f&&(l+="H"+f.toString(32)),l+="_"}else f=CI++,l="_"+l+"r_"+f.toString(32)+"_";return s.memoizedState=l},useHostTransitionStatus:p1,useFormState:n_,useActionState:n_,useOptimistic:function(s){var l=mr();l.memoizedState=l.baseState=s;var f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return l.queue=f,l=m1.bind(null,Xe,!0,f),f.dispatch=l,[s,l]},useMemoCache:a1,useCacheRefresh:function(){return mr().memoizedState=DI.bind(null,Xe)},useEffectEvent:function(s){var l=mr(),f={impl:s};return l.memoizedState=f,function(){if((yt&2)!==0)throw Error(r(440));return f.impl.apply(void 0,arguments)}}},g1={readContext:Qn,use:Lh,useCallback:d_,useContext:Qn,useEffect:u1,useImperativeHandle:h_,useInsertionEffect:c_,useLayoutEffect:u_,useMemo:p_,useReducer:jh,useRef:s_,useState:function(){return jh(Ra)},useDebugValue:f1,useDeferredValue:function(s,l){var f=un();return m_(f,Ot.memoizedState,s,l)},useTransition:function(){var s=jh(Ra)[0],l=un().memoizedState;return[typeof s=="boolean"?s:Eu(s),l]},useSyncExternalStore:G2,useId:__,useHostTransitionStatus:p1,useFormState:r_,useActionState:r_,useOptimistic:function(s,l){var f=un();return W2(f,Ot,s,l)},useMemoCache:a1,useCacheRefresh:x_};g1.useEffectEvent=l_;var S_={readContext:Qn,use:Lh,useCallback:d_,useContext:Qn,useEffect:u1,useImperativeHandle:h_,useInsertionEffect:c_,useLayoutEffect:u_,useMemo:p_,useReducer:o1,useRef:s_,useState:function(){return o1(Ra)},useDebugValue:f1,useDeferredValue:function(s,l){var f=un();return Ot===null?h1(f,s,l):m_(f,Ot.memoizedState,s,l)},useTransition:function(){var s=o1(Ra)[0],l=un().memoizedState;return[typeof s=="boolean"?s:Eu(s),l]},useSyncExternalStore:G2,useId:__,useHostTransitionStatus:p1,useFormState:a_,useActionState:a_,useOptimistic:function(s,l){var f=un();return Ot!==null?W2(f,Ot,s,l):(f.baseState=s,[s,f.queue.dispatch])},useMemoCache:a1,useCacheRefresh:x_};S_.useEffectEvent=l_;function v1(s,l,f,d){l=s.memoizedState,f=f(d,l),f=f==null?l:g({},l,f),s.memoizedState=f,s.lanes===0&&(s.updateQueue.baseState=f)}var y1={enqueueSetState:function(s,l,f){s=s._reactInternals;var d=Ur(),y=ms(d);y.payload=l,f!=null&&(y.callback=f),l=gs(s,y,d),l!==null&&(Cr(l,s,d),vu(l,s,d))},enqueueReplaceState:function(s,l,f){s=s._reactInternals;var d=Ur(),y=ms(d);y.tag=1,y.payload=l,f!=null&&(y.callback=f),l=gs(s,y,d),l!==null&&(Cr(l,s,d),vu(l,s,d))},enqueueForceUpdate:function(s,l){s=s._reactInternals;var f=Ur(),d=ms(f);d.tag=2,l!=null&&(d.callback=l),l=gs(s,d,f),l!==null&&(Cr(l,s,f),vu(l,s,f))}};function C_(s,l,f,d,y,x,C){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(d,x,C):l.prototype&&l.prototype.isPureReactComponent?!cu(f,d)||!cu(y,x):!0}function T_(s,l,f,d){s=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(f,d),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(f,d),l.state!==s&&y1.enqueueReplaceState(l,l.state,null)}function Bo(s,l){var f=l;if("ref"in l){f={};for(var d in l)d!=="ref"&&(f[d]=l[d])}if(s=s.defaultProps){f===l&&(f=g({},f));for(var y in s)f[y]===void 0&&(f[y]=s[y])}return f}function I_(s){yh(s)}function N_(s){console.error(s)}function R_(s){yh(s)}function Uh(s,l){try{var f=s.onUncaughtError;f(l.value,{componentStack:l.stack})}catch(d){setTimeout(function(){throw d})}}function O_(s,l,f){try{var d=s.onCaughtError;d(f.value,{componentStack:f.stack,errorBoundary:l.tag===1?l.stateNode:null})}catch(y){setTimeout(function(){throw y})}}function _1(s,l,f){return f=ms(f),f.tag=3,f.payload={element:null},f.callback=function(){Uh(s,l)},f}function D_(s){return s=ms(s),s.tag=3,s}function M_(s,l,f,d){var y=f.type.getDerivedStateFromError;if(typeof y=="function"){var x=d.value;s.payload=function(){return y(x)},s.callback=function(){O_(l,f,d)}}var C=f.stateNode;C!==null&&typeof C.componentDidCatch=="function"&&(s.callback=function(){O_(l,f,d),typeof y!="function"&&(ws===null?ws=new Set([this]):ws.add(this));var B=d.stack;this.componentDidCatch(d.value,{componentStack:B!==null?B:""})})}function PI(s,l,f,d,y){if(f.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){if(l=f.alternate,l!==null&&Nl(l,f,y,!0),f=jr.current,f!==null){switch(f.tag){case 31:case 13:return ni===null?Jh():f.alternate===null&&rn===0&&(rn=3),f.flags&=-257,f.flags|=65536,f.lanes=y,d===Ih?f.flags|=16384:(l=f.updateQueue,l===null?f.updateQueue=new Set([d]):l.add(d),G1(s,d,y)),!1;case 22:return f.flags|=65536,d===Ih?f.flags|=16384:(l=f.updateQueue,l===null?(l={transitions:null,markerInstances:null,retryQueue:new Set([d])},f.updateQueue=l):(f=l.retryQueue,f===null?l.retryQueue=new Set([d]):f.add(d)),G1(s,d,y)),!1}throw Error(r(435,f.tag))}return G1(s,d,y),Jh(),!1}if(ot)return l=jr.current,l!==null?((l.flags&65536)===0&&(l.flags|=256),l.flags|=65536,l.lanes=y,d!==Bp&&(s=Error(r(422),{cause:d}),hu(Zr(s,f)))):(d!==Bp&&(l=Error(r(423),{cause:d}),hu(Zr(l,f))),s=s.current.alternate,s.flags|=65536,y&=-y,s.lanes|=y,d=Zr(d,f),y=_1(s.stateNode,d,y),Yp(s,y),rn!==4&&(rn=2)),!1;var x=Error(r(520),{cause:d});if(x=Zr(x,f),Ou===null?Ou=[x]:Ou.push(x),rn!==4&&(rn=2),l===null)return!0;d=Zr(d,f),f=l;do{switch(f.tag){case 3:return f.flags|=65536,s=y&-y,f.lanes|=s,s=_1(f.stateNode,d,s),Yp(f,s),!1;case 1:if(l=f.type,x=f.stateNode,(f.flags&128)===0&&(typeof l.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(ws===null||!ws.has(x))))return f.flags|=65536,y&=-y,f.lanes|=y,y=D_(y),M_(y,s,f,d),Yp(f,y),!1}f=f.return}while(f!==null);return!1}var x1=Error(r(461)),xn=!1;function Zn(s,l,f,d){l.child=s===null?j2(l,null,f,d):Lo(l,s.child,f,d)}function P_(s,l,f,d,y){f=f.render;var x=l.ref;if("ref"in d){var C={};for(var B in d)B!=="ref"&&(C[B]=d[B])}else C=d;return Do(l),d=t1(s,l,f,C,x,y),B=n1(),s!==null&&!xn?(r1(s,l,y),Oa(s,l,y)):(ot&&B&&Lp(l),l.flags|=1,Zn(s,l,d,y),l.child)}function k_(s,l,f,d,y){if(s===null){var x=f.type;return typeof x=="function"&&!Mp(x)&&x.defaultProps===void 0&&f.compare===null?(l.tag=15,l.type=x,L_(s,l,x,d,y)):(s=wh(f.type,null,d,l,l.mode,y),s.ref=l.ref,s.return=l,l.child=s)}if(x=s.child,!I1(s,y)){var C=x.memoizedProps;if(f=f.compare,f=f!==null?f:cu,f(C,d)&&s.ref===l.ref)return Oa(s,l,y)}return l.flags|=1,s=Sa(x,d),s.ref=l.ref,s.return=l,l.child=s}function L_(s,l,f,d,y){if(s!==null){var x=s.memoizedProps;if(cu(x,d)&&s.ref===l.ref)if(xn=!1,l.pendingProps=d=x,I1(s,y))(s.flags&131072)!==0&&(xn=!0);else return l.lanes=s.lanes,Oa(s,l,y)}return E1(s,l,f,d,y)}function j_(s,l,f,d){var y=d.children,x=s!==null?s.memoizedState:null;if(s===null&&l.stateNode===null&&(l.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),d.mode==="hidden"){if((l.flags&128)!==0){if(x=x!==null?x.baseLanes|f:f,s!==null){for(d=l.child=s.child,y=0;d!==null;)y=y|d.lanes|d.childLanes,d=d.sibling;d=y&~x}else d=0,l.child=null;return B_(s,l,x,f,d)}if((f&536870912)!==0)l.memoizedState={baseLanes:0,cachePool:null},s!==null&&Ch(l,x!==null?x.cachePool:null),x!==null?F2(l,x):Qp(),U2(l);else return d=l.lanes=536870912,B_(s,l,x!==null?x.baseLanes|f:f,f,d)}else x!==null?(Ch(l,x.cachePool),F2(l,x),ys(),l.memoizedState=null):(s!==null&&Ch(l,null),Qp(),ys());return Zn(s,l,y,f),l.child}function bu(s,l){return s!==null&&s.tag===22||l.stateNode!==null||(l.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.sibling}function B_(s,l,f,d,y){var x=qp();return x=x===null?null:{parent:yn._currentValue,pool:x},l.memoizedState={baseLanes:f,cachePool:x},s!==null&&Ch(l,null),Qp(),U2(l),s!==null&&Nl(s,l,d,!0),l.childLanes=y,null}function zh(s,l){return l=Gh({mode:l.mode,children:l.children},s.mode),l.ref=s.ref,s.child=l,l.return=s,l}function V_(s,l,f){return Lo(l,s.child,null,f),s=zh(l,l.pendingProps),s.flags|=2,Br(l),l.memoizedState=null,s}function kI(s,l,f){var d=l.pendingProps,y=(l.flags&128)!==0;if(l.flags&=-129,s===null){if(ot){if(d.mode==="hidden")return s=zh(l,d),l.lanes=536870912,bu(null,s);if(Jp(l),(s=Ft)?(s=Qx(s,ti),s=s!==null&&s.data==="&"?s:null,s!==null&&(l.memoizedState={dehydrated:s,treeContext:us!==null?{id:na,overflow:ra}:null,retryLane:536870912,hydrationErrors:null},f=w2(s),f.return=l,l.child=f,Wn=l,Ft=null)):s=null,s===null)throw hs(l);return l.lanes=536870912,null}return zh(l,d)}var x=s.memoizedState;if(x!==null){var C=x.dehydrated;if(Jp(l),y)if(l.flags&256)l.flags&=-257,l=V_(s,l,f);else if(l.memoizedState!==null)l.child=s.child,l.flags|=128,l=null;else throw Error(r(558));else if(xn||Nl(s,l,f,!1),y=(f&s.childLanes)!==0,xn||y){if(d=Lt,d!==null&&(C=qc(d,f),C!==0&&C!==x.retryLane))throw x.retryLane=C,Io(s,C),Cr(d,s,C),x1;Jh(),l=V_(s,l,f)}else s=x.treeContext,Ft=ri(C.nextSibling),Wn=l,ot=!0,fs=null,ti=!1,s!==null&&S2(l,s),l=zh(l,d),l.flags|=4096;return l}return s=Sa(s.child,{mode:d.mode,children:d.children}),s.ref=l.ref,l.child=s,s.return=l,s}function Hh(s,l){var f=l.ref;if(f===null)s!==null&&s.ref!==null&&(l.flags|=4194816);else{if(typeof f!="function"&&typeof f!="object")throw Error(r(284));(s===null||s.ref!==f)&&(l.flags|=4194816)}}function E1(s,l,f,d,y){return Do(l),f=t1(s,l,f,d,void 0,y),d=n1(),s!==null&&!xn?(r1(s,l,y),Oa(s,l,y)):(ot&&d&&Lp(l),l.flags|=1,Zn(s,l,f,y),l.child)}function F_(s,l,f,d,y,x){return Do(l),l.updateQueue=null,f=H2(l,d,f,y),z2(s),d=n1(),s!==null&&!xn?(r1(s,l,x),Oa(s,l,x)):(ot&&d&&Lp(l),l.flags|=1,Zn(s,l,f,x),l.child)}function U_(s,l,f,d,y){if(Do(l),l.stateNode===null){var x=Sl,C=f.contextType;typeof C=="object"&&C!==null&&(x=Qn(C)),x=new f(d,x),l.memoizedState=x.state!==null&&x.state!==void 0?x.state:null,x.updater=y1,l.stateNode=x,x._reactInternals=l,x=l.stateNode,x.props=d,x.state=l.memoizedState,x.refs={},Xp(l),C=f.contextType,x.context=typeof C=="object"&&C!==null?Qn(C):Sl,x.state=l.memoizedState,C=f.getDerivedStateFromProps,typeof C=="function"&&(v1(l,f,C,d),x.state=l.memoizedState),typeof f.getDerivedStateFromProps=="function"||typeof x.getSnapshotBeforeUpdate=="function"||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(C=x.state,typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount(),C!==x.state&&y1.enqueueReplaceState(x,x.state,null),_u(l,d,x,y),yu(),x.state=l.memoizedState),typeof x.componentDidMount=="function"&&(l.flags|=4194308),d=!0}else if(s===null){x=l.stateNode;var B=l.memoizedProps,$=Bo(f,B);x.props=$;var J=x.context,oe=f.contextType;C=Sl,typeof oe=="object"&&oe!==null&&(C=Qn(oe));var fe=f.getDerivedStateFromProps;oe=typeof fe=="function"||typeof x.getSnapshotBeforeUpdate=="function",B=l.pendingProps!==B,oe||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(B||J!==C)&&T_(l,x,d,C),ps=!1;var ee=l.memoizedState;x.state=ee,_u(l,d,x,y),yu(),J=l.memoizedState,B||ee!==J||ps?(typeof fe=="function"&&(v1(l,f,fe,d),J=l.memoizedState),($=ps||C_(l,f,$,d,ee,J,C))?(oe||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount()),typeof x.componentDidMount=="function"&&(l.flags|=4194308)):(typeof x.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=d,l.memoizedState=J),x.props=d,x.state=J,x.context=C,d=$):(typeof x.componentDidMount=="function"&&(l.flags|=4194308),d=!1)}else{x=l.stateNode,Kp(s,l),C=l.memoizedProps,oe=Bo(f,C),x.props=oe,fe=l.pendingProps,ee=x.context,J=f.contextType,$=Sl,typeof J=="object"&&J!==null&&($=Qn(J)),B=f.getDerivedStateFromProps,(J=typeof B=="function"||typeof x.getSnapshotBeforeUpdate=="function")||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(C!==fe||ee!==$)&&T_(l,x,d,$),ps=!1,ee=l.memoizedState,x.state=ee,_u(l,d,x,y),yu();var re=l.memoizedState;C!==fe||ee!==re||ps||s!==null&&s.dependencies!==null&&bh(s.dependencies)?(typeof B=="function"&&(v1(l,f,B,d),re=l.memoizedState),(oe=ps||C_(l,f,oe,d,ee,re,$)||s!==null&&s.dependencies!==null&&bh(s.dependencies))?(J||typeof x.UNSAFE_componentWillUpdate!="function"&&typeof x.componentWillUpdate!="function"||(typeof x.componentWillUpdate=="function"&&x.componentWillUpdate(d,re,$),typeof x.UNSAFE_componentWillUpdate=="function"&&x.UNSAFE_componentWillUpdate(d,re,$)),typeof x.componentDidUpdate=="function"&&(l.flags|=4),typeof x.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof x.componentDidUpdate!="function"||C===s.memoizedProps&&ee===s.memoizedState||(l.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||C===s.memoizedProps&&ee===s.memoizedState||(l.flags|=1024),l.memoizedProps=d,l.memoizedState=re),x.props=d,x.state=re,x.context=$,d=oe):(typeof x.componentDidUpdate!="function"||C===s.memoizedProps&&ee===s.memoizedState||(l.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||C===s.memoizedProps&&ee===s.memoizedState||(l.flags|=1024),d=!1)}return x=d,Hh(s,l),d=(l.flags&128)!==0,x||d?(x=l.stateNode,f=d&&typeof f.getDerivedStateFromError!="function"?null:x.render(),l.flags|=1,s!==null&&d?(l.child=Lo(l,s.child,null,y),l.child=Lo(l,null,f,y)):Zn(s,l,f,y),l.memoizedState=x.state,s=l.child):s=Oa(s,l,y),s}function z_(s,l,f,d){return Ro(),l.flags|=256,Zn(s,l,f,d),l.child}var w1={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function A1(s){return{baseLanes:s,cachePool:O2()}}function b1(s,l,f){return s=s!==null?s.childLanes&~f:0,l&&(s|=Fr),s}function H_(s,l,f){var d=l.pendingProps,y=!1,x=(l.flags&128)!==0,C;if((C=x)||(C=s!==null&&s.memoizedState===null?!1:(cn.current&2)!==0),C&&(y=!0,l.flags&=-129),C=(l.flags&32)!==0,l.flags&=-33,s===null){if(ot){if(y?vs(l):ys(),(s=Ft)?(s=Qx(s,ti),s=s!==null&&s.data!=="&"?s:null,s!==null&&(l.memoizedState={dehydrated:s,treeContext:us!==null?{id:na,overflow:ra}:null,retryLane:536870912,hydrationErrors:null},f=w2(s),f.return=l,l.child=f,Wn=l,Ft=null)):s=null,s===null)throw hs(l);return sm(s)?l.lanes=32:l.lanes=536870912,null}var B=d.children;return d=d.fallback,y?(ys(),y=l.mode,B=Gh({mode:"hidden",children:B},y),d=No(d,y,f,null),B.return=l,d.return=l,B.sibling=d,l.child=B,d=l.child,d.memoizedState=A1(f),d.childLanes=b1(s,C,f),l.memoizedState=w1,bu(null,d)):(vs(l),S1(l,B))}var $=s.memoizedState;if($!==null&&(B=$.dehydrated,B!==null)){if(x)l.flags&256?(vs(l),l.flags&=-257,l=C1(s,l,f)):l.memoizedState!==null?(ys(),l.child=s.child,l.flags|=128,l=null):(ys(),B=d.fallback,y=l.mode,d=Gh({mode:"visible",children:d.children},y),B=No(B,y,f,null),B.flags|=2,d.return=l,B.return=l,d.sibling=B,l.child=d,Lo(l,s.child,null,f),d=l.child,d.memoizedState=A1(f),d.childLanes=b1(s,C,f),l.memoizedState=w1,l=bu(null,d));else if(vs(l),sm(B)){if(C=B.nextSibling&&B.nextSibling.dataset,C)var J=C.dgst;C=J,d=Error(r(419)),d.stack="",d.digest=C,hu({value:d,source:null,stack:null}),l=C1(s,l,f)}else if(xn||Nl(s,l,f,!1),C=(f&s.childLanes)!==0,xn||C){if(C=Lt,C!==null&&(d=qc(C,f),d!==0&&d!==$.retryLane))throw $.retryLane=d,Io(s,d),Cr(C,s,d),x1;am(B)||Jh(),l=C1(s,l,f)}else am(B)?(l.flags|=192,l.child=s.child,l=null):(s=$.treeContext,Ft=ri(B.nextSibling),Wn=l,ot=!0,fs=null,ti=!1,s!==null&&S2(l,s),l=S1(l,d.children),l.flags|=4096);return l}return y?(ys(),B=d.fallback,y=l.mode,$=s.child,J=$.sibling,d=Sa($,{mode:"hidden",children:d.children}),d.subtreeFlags=$.subtreeFlags&65011712,J!==null?B=Sa(J,B):(B=No(B,y,f,null),B.flags|=2),B.return=l,d.return=l,d.sibling=B,l.child=d,bu(null,d),d=l.child,B=s.child.memoizedState,B===null?B=A1(f):(y=B.cachePool,y!==null?($=yn._currentValue,y=y.parent!==$?{parent:$,pool:$}:y):y=O2(),B={baseLanes:B.baseLanes|f,cachePool:y}),d.memoizedState=B,d.childLanes=b1(s,C,f),l.memoizedState=w1,bu(s.child,d)):(vs(l),f=s.child,s=f.sibling,f=Sa(f,{mode:"visible",children:d.children}),f.return=l,f.sibling=null,s!==null&&(C=l.deletions,C===null?(l.deletions=[s],l.flags|=16):C.push(s)),l.child=f,l.memoizedState=null,f)}function S1(s,l){return l=Gh({mode:"visible",children:l},s.mode),l.return=s,s.child=l}function Gh(s,l){return s=Lr(22,s,null,l),s.lanes=0,s}function C1(s,l,f){return Lo(l,s.child,null,f),s=S1(l,l.pendingProps.children),s.flags|=2,l.memoizedState=null,s}function G_(s,l,f){s.lanes|=l;var d=s.alternate;d!==null&&(d.lanes|=l),Up(s.return,l,f)}function T1(s,l,f,d,y,x){var C=s.memoizedState;C===null?s.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:d,tail:f,tailMode:y,treeForkCount:x}:(C.isBackwards=l,C.rendering=null,C.renderingStartTime=0,C.last=d,C.tail=f,C.tailMode=y,C.treeForkCount=x)}function q_(s,l,f){var d=l.pendingProps,y=d.revealOrder,x=d.tail;d=d.children;var C=cn.current,B=(C&2)!==0;if(B?(C=C&1|2,l.flags|=128):C&=1,pe(cn,C),Zn(s,l,d,f),d=ot?fu:0,!B&&s!==null&&(s.flags&128)!==0)e:for(s=l.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&G_(s,f,l);else if(s.tag===19)G_(s,f,l);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===l)break e;for(;s.sibling===null;){if(s.return===null||s.return===l)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}switch(y){case"forwards":for(f=l.child,y=null;f!==null;)s=f.alternate,s!==null&&Dh(s)===null&&(y=f),f=f.sibling;f=y,f===null?(y=l.child,l.child=null):(y=f.sibling,f.sibling=null),T1(l,!1,y,f,x,d);break;case"backwards":case"unstable_legacy-backwards":for(f=null,y=l.child,l.child=null;y!==null;){if(s=y.alternate,s!==null&&Dh(s)===null){l.child=y;break}s=y.sibling,y.sibling=f,f=y,y=s}T1(l,!0,f,null,x,d);break;case"together":T1(l,!1,null,null,void 0,d);break;default:l.memoizedState=null}return l.child}function Oa(s,l,f){if(s!==null&&(l.dependencies=s.dependencies),Es|=l.lanes,(f&l.childLanes)===0)if(s!==null){if(Nl(s,l,f,!1),(f&l.childLanes)===0)return null}else return null;if(s!==null&&l.child!==s.child)throw Error(r(153));if(l.child!==null){for(s=l.child,f=Sa(s,s.pendingProps),l.child=f,f.return=l;s.sibling!==null;)s=s.sibling,f=f.sibling=Sa(s,s.pendingProps),f.return=l;f.sibling=null}return l.child}function I1(s,l){return(s.lanes&l)!==0?!0:(s=s.dependencies,!!(s!==null&&bh(s)))}function LI(s,l,f){switch(l.tag){case 3:Qe(l,l.stateNode.containerInfo),ds(l,yn,s.memoizedState.cache),Ro();break;case 27:case 5:sn(l);break;case 4:Qe(l,l.stateNode.containerInfo);break;case 10:ds(l,l.type,l.memoizedProps.value);break;case 31:if(l.memoizedState!==null)return l.flags|=128,Jp(l),null;break;case 13:var d=l.memoizedState;if(d!==null)return d.dehydrated!==null?(vs(l),l.flags|=128,null):(f&l.child.childLanes)!==0?H_(s,l,f):(vs(l),s=Oa(s,l,f),s!==null?s.sibling:null);vs(l);break;case 19:var y=(s.flags&128)!==0;if(d=(f&l.childLanes)!==0,d||(Nl(s,l,f,!1),d=(f&l.childLanes)!==0),y){if(d)return q_(s,l,f);l.flags|=128}if(y=l.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),pe(cn,cn.current),d)break;return null;case 22:return l.lanes=0,j_(s,l,f,l.pendingProps);case 24:ds(l,yn,s.memoizedState.cache)}return Oa(s,l,f)}function $_(s,l,f){if(s!==null)if(s.memoizedProps!==l.pendingProps)xn=!0;else{if(!I1(s,f)&&(l.flags&128)===0)return xn=!1,LI(s,l,f);xn=(s.flags&131072)!==0}else xn=!1,ot&&(l.flags&1048576)!==0&&b2(l,fu,l.index);switch(l.lanes=0,l.tag){case 16:e:{var d=l.pendingProps;if(s=Po(l.elementType),l.type=s,typeof s=="function")Mp(s)?(d=Bo(s,d),l.tag=1,l=U_(null,l,s,d,f)):(l.tag=0,l=E1(null,l,s,d,f));else{if(s!=null){var y=s.$$typeof;if(y===z){l.tag=11,l=P_(null,l,s,d,f);break e}else if(y===N){l.tag=14,l=k_(null,l,s,d,f);break e}}throw l=ie(s)||s,Error(r(306,l,""))}}return l;case 0:return E1(s,l,l.type,l.pendingProps,f);case 1:return d=l.type,y=Bo(d,l.pendingProps),U_(s,l,d,y,f);case 3:e:{if(Qe(l,l.stateNode.containerInfo),s===null)throw Error(r(387));d=l.pendingProps;var x=l.memoizedState;y=x.element,Kp(s,l),_u(l,d,null,f);var C=l.memoizedState;if(d=C.cache,ds(l,yn,d),d!==x.cache&&zp(l,[yn],f,!0),yu(),d=C.element,x.isDehydrated)if(x={element:d,isDehydrated:!1,cache:C.cache},l.updateQueue.baseState=x,l.memoizedState=x,l.flags&256){l=z_(s,l,d,f);break e}else if(d!==y){y=Zr(Error(r(424)),l),hu(y),l=z_(s,l,d,f);break e}else{switch(s=l.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(Ft=ri(s.firstChild),Wn=l,ot=!0,fs=null,ti=!0,f=j2(l,null,d,f),l.child=f;f;)f.flags=f.flags&-3|4096,f=f.sibling}else{if(Ro(),d===y){l=Oa(s,l,f);break e}Zn(s,l,d,f)}l=l.child}return l;case 26:return Hh(s,l),s===null?(f=rE(l.type,null,l.pendingProps,null))?l.memoizedState=f:ot||(f=l.type,s=l.pendingProps,d=sd(Ne.current).createElement(f),d[mn]=l,d[Ln]=s,Jn(d,f,s),gn(d),l.stateNode=d):l.memoizedState=rE(l.type,s.memoizedProps,l.pendingProps,s.memoizedState),null;case 27:return sn(l),s===null&&ot&&(d=l.stateNode=eE(l.type,l.pendingProps,Ne.current),Wn=l,ti=!0,y=Ft,Cs(l.type)?(om=y,Ft=ri(d.firstChild)):Ft=y),Zn(s,l,l.pendingProps.children,f),Hh(s,l),s===null&&(l.flags|=4194304),l.child;case 5:return s===null&&ot&&((y=d=Ft)&&(d=h4(d,l.type,l.pendingProps,ti),d!==null?(l.stateNode=d,Wn=l,Ft=ri(d.firstChild),ti=!1,y=!0):y=!1),y||hs(l)),sn(l),y=l.type,x=l.pendingProps,C=s!==null?s.memoizedProps:null,d=x.children,nm(y,x)?d=null:C!==null&&nm(y,C)&&(l.flags|=32),l.memoizedState!==null&&(y=t1(s,l,TI,null,null,f),Vu._currentValue=y),Hh(s,l),Zn(s,l,d,f),l.child;case 6:return s===null&&ot&&((s=f=Ft)&&(f=d4(f,l.pendingProps,ti),f!==null?(l.stateNode=f,Wn=l,Ft=null,s=!0):s=!1),s||hs(l)),null;case 13:return H_(s,l,f);case 4:return Qe(l,l.stateNode.containerInfo),d=l.pendingProps,s===null?l.child=Lo(l,null,d,f):Zn(s,l,d,f),l.child;case 11:return P_(s,l,l.type,l.pendingProps,f);case 7:return Zn(s,l,l.pendingProps,f),l.child;case 8:return Zn(s,l,l.pendingProps.children,f),l.child;case 12:return Zn(s,l,l.pendingProps.children,f),l.child;case 10:return d=l.pendingProps,ds(l,l.type,d.value),Zn(s,l,d.children,f),l.child;case 9:return y=l.type._context,d=l.pendingProps.children,Do(l),y=Qn(y),d=d(y),l.flags|=1,Zn(s,l,d,f),l.child;case 14:return k_(s,l,l.type,l.pendingProps,f);case 15:return L_(s,l,l.type,l.pendingProps,f);case 19:return q_(s,l,f);case 31:return kI(s,l,f);case 22:return j_(s,l,f,l.pendingProps);case 24:return Do(l),d=Qn(yn),s===null?(y=qp(),y===null&&(y=Lt,x=Hp(),y.pooledCache=x,x.refCount++,x!==null&&(y.pooledCacheLanes|=f),y=x),l.memoizedState={parent:d,cache:y},Xp(l),ds(l,yn,y)):((s.lanes&f)!==0&&(Kp(s,l),_u(l,null,null,f),yu()),y=s.memoizedState,x=l.memoizedState,y.parent!==d?(y={parent:d,cache:d},l.memoizedState=y,l.lanes===0&&(l.memoizedState=l.updateQueue.baseState=y),ds(l,yn,d)):(d=x.cache,ds(l,yn,d),d!==y.cache&&zp(l,[yn],f,!0))),Zn(s,l,l.pendingProps.children,f),l.child;case 29:throw l.pendingProps}throw Error(r(156,l.tag))}function Da(s){s.flags|=4}function N1(s,l,f,d,y){if((l=(s.mode&32)!==0)&&(l=!1),l){if(s.flags|=16777216,(y&335544128)===y)if(s.stateNode.complete)s.flags|=8192;else if(_x())s.flags|=8192;else throw ko=Ih,$p}else s.flags&=-16777217}function X_(s,l){if(l.type!=="stylesheet"||(l.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!lE(l))if(_x())s.flags|=8192;else throw ko=Ih,$p}function qh(s,l){l!==null&&(s.flags|=4),s.flags&16384&&(l=s.tag!==22?Qf():536870912,s.lanes|=l,Ul|=l)}function Su(s,l){if(!ot)switch(s.tailMode){case"hidden":l=s.tail;for(var f=null;l!==null;)l.alternate!==null&&(f=l),l=l.sibling;f===null?s.tail=null:f.sibling=null;break;case"collapsed":f=s.tail;for(var d=null;f!==null;)f.alternate!==null&&(d=f),f=f.sibling;d===null?l||s.tail===null?s.tail=null:s.tail.sibling=null:d.sibling=null}}function Ut(s){var l=s.alternate!==null&&s.alternate.child===s.child,f=0,d=0;if(l)for(var y=s.child;y!==null;)f|=y.lanes|y.childLanes,d|=y.subtreeFlags&65011712,d|=y.flags&65011712,y.return=s,y=y.sibling;else for(y=s.child;y!==null;)f|=y.lanes|y.childLanes,d|=y.subtreeFlags,d|=y.flags,y.return=s,y=y.sibling;return s.subtreeFlags|=d,s.childLanes=f,l}function jI(s,l,f){var d=l.pendingProps;switch(jp(l),l.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ut(l),null;case 1:return Ut(l),null;case 3:return f=l.stateNode,d=null,s!==null&&(d=s.memoizedState.cache),l.memoizedState.cache!==d&&(l.flags|=2048),Ia(yn),Ze(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(s===null||s.child===null)&&(Il(l)?Da(l):s===null||s.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,Vp())),Ut(l),null;case 26:var y=l.type,x=l.memoizedState;return s===null?(Da(l),x!==null?(Ut(l),X_(l,x)):(Ut(l),N1(l,y,null,d,f))):x?x!==s.memoizedState?(Da(l),Ut(l),X_(l,x)):(Ut(l),l.flags&=-16777217):(s=s.memoizedProps,s!==d&&Da(l),Ut(l),N1(l,y,s,d,f)),null;case 27:if(me(l),f=Ne.current,y=l.type,s!==null&&l.stateNode!=null)s.memoizedProps!==d&&Da(l);else{if(!d){if(l.stateNode===null)throw Error(r(166));return Ut(l),null}s=ye.current,Il(l)?C2(l):(s=eE(y,d,f),l.stateNode=s,Da(l))}return Ut(l),null;case 5:if(me(l),y=l.type,s!==null&&l.stateNode!=null)s.memoizedProps!==d&&Da(l);else{if(!d){if(l.stateNode===null)throw Error(r(166));return Ut(l),null}if(x=ye.current,Il(l))C2(l);else{var C=sd(Ne.current);switch(x){case 1:x=C.createElementNS("http://www.w3.org/2000/svg",y);break;case 2:x=C.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;default:switch(y){case"svg":x=C.createElementNS("http://www.w3.org/2000/svg",y);break;case"math":x=C.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;case"script":x=C.createElement("div"),x.innerHTML="<script><\/script>",x=x.removeChild(x.firstChild);break;case"select":x=typeof d.is=="string"?C.createElement("select",{is:d.is}):C.createElement("select"),d.multiple?x.multiple=!0:d.size&&(x.size=d.size);break;default:x=typeof d.is=="string"?C.createElement(y,{is:d.is}):C.createElement(y)}}x[mn]=l,x[Ln]=d;e:for(C=l.child;C!==null;){if(C.tag===5||C.tag===6)x.appendChild(C.stateNode);else if(C.tag!==4&&C.tag!==27&&C.child!==null){C.child.return=C,C=C.child;continue}if(C===l)break e;for(;C.sibling===null;){if(C.return===null||C.return===l)break e;C=C.return}C.sibling.return=C.return,C=C.sibling}l.stateNode=x;e:switch(Jn(x,y,d),y){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break e;case"img":d=!0;break e;default:d=!1}d&&Da(l)}}return Ut(l),N1(l,l.type,s===null?null:s.memoizedProps,l.pendingProps,f),null;case 6:if(s&&l.stateNode!=null)s.memoizedProps!==d&&Da(l);else{if(typeof d!="string"&&l.stateNode===null)throw Error(r(166));if(s=Ne.current,Il(l)){if(s=l.stateNode,f=l.memoizedProps,d=null,y=Wn,y!==null)switch(y.tag){case 27:case 5:d=y.memoizedProps}s[mn]=l,s=!!(s.nodeValue===f||d!==null&&d.suppressHydrationWarning===!0||Hx(s.nodeValue,f)),s||hs(l,!0)}else s=sd(s).createTextNode(d),s[mn]=l,l.stateNode=s}return Ut(l),null;case 31:if(f=l.memoizedState,s===null||s.memoizedState!==null){if(d=Il(l),f!==null){if(s===null){if(!d)throw Error(r(318));if(s=l.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(557));s[mn]=l}else Ro(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;Ut(l),s=!1}else f=Vp(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=f),s=!0;if(!s)return l.flags&256?(Br(l),l):(Br(l),null);if((l.flags&128)!==0)throw Error(r(558))}return Ut(l),null;case 13:if(d=l.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(y=Il(l),d!==null&&d.dehydrated!==null){if(s===null){if(!y)throw Error(r(318));if(y=l.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(r(317));y[mn]=l}else Ro(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;Ut(l),y=!1}else y=Vp(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=y),y=!0;if(!y)return l.flags&256?(Br(l),l):(Br(l),null)}return Br(l),(l.flags&128)!==0?(l.lanes=f,l):(f=d!==null,s=s!==null&&s.memoizedState!==null,f&&(d=l.child,y=null,d.alternate!==null&&d.alternate.memoizedState!==null&&d.alternate.memoizedState.cachePool!==null&&(y=d.alternate.memoizedState.cachePool.pool),x=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(x=d.memoizedState.cachePool.pool),x!==y&&(d.flags|=2048)),f!==s&&f&&(l.child.flags|=8192),qh(l,l.updateQueue),Ut(l),null);case 4:return Ze(),s===null&&Q1(l.stateNode.containerInfo),Ut(l),null;case 10:return Ia(l.type),Ut(l),null;case 19:if(te(cn),d=l.memoizedState,d===null)return Ut(l),null;if(y=(l.flags&128)!==0,x=d.rendering,x===null)if(y)Su(d,!1);else{if(rn!==0||s!==null&&(s.flags&128)!==0)for(s=l.child;s!==null;){if(x=Dh(s),x!==null){for(l.flags|=128,Su(d,!1),s=x.updateQueue,l.updateQueue=s,qh(l,s),l.subtreeFlags=0,s=f,f=l.child;f!==null;)E2(f,s),f=f.sibling;return pe(cn,cn.current&1|2),ot&&Ca(l,d.treeForkCount),l.child}s=s.sibling}d.tail!==null&&Ee()>Wh&&(l.flags|=128,y=!0,Su(d,!1),l.lanes=4194304)}else{if(!y)if(s=Dh(x),s!==null){if(l.flags|=128,y=!0,s=s.updateQueue,l.updateQueue=s,qh(l,s),Su(d,!0),d.tail===null&&d.tailMode==="hidden"&&!x.alternate&&!ot)return Ut(l),null}else 2*Ee()-d.renderingStartTime>Wh&&f!==536870912&&(l.flags|=128,y=!0,Su(d,!1),l.lanes=4194304);d.isBackwards?(x.sibling=l.child,l.child=x):(s=d.last,s!==null?s.sibling=x:l.child=x,d.last=x)}return d.tail!==null?(s=d.tail,d.rendering=s,d.tail=s.sibling,d.renderingStartTime=Ee(),s.sibling=null,f=cn.current,pe(cn,y?f&1|2:f&1),ot&&Ca(l,d.treeForkCount),s):(Ut(l),null);case 22:case 23:return Br(l),Zp(),d=l.memoizedState!==null,s!==null?s.memoizedState!==null!==d&&(l.flags|=8192):d&&(l.flags|=8192),d?(f&536870912)!==0&&(l.flags&128)===0&&(Ut(l),l.subtreeFlags&6&&(l.flags|=8192)):Ut(l),f=l.updateQueue,f!==null&&qh(l,f.retryQueue),f=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(f=s.memoizedState.cachePool.pool),d=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(d=l.memoizedState.cachePool.pool),d!==f&&(l.flags|=2048),s!==null&&te(Mo),null;case 24:return f=null,s!==null&&(f=s.memoizedState.cache),l.memoizedState.cache!==f&&(l.flags|=2048),Ia(yn),Ut(l),null;case 25:return null;case 30:return null}throw Error(r(156,l.tag))}function BI(s,l){switch(jp(l),l.tag){case 1:return s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 3:return Ia(yn),Ze(),s=l.flags,(s&65536)!==0&&(s&128)===0?(l.flags=s&-65537|128,l):null;case 26:case 27:case 5:return me(l),null;case 31:if(l.memoizedState!==null){if(Br(l),l.alternate===null)throw Error(r(340));Ro()}return s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 13:if(Br(l),s=l.memoizedState,s!==null&&s.dehydrated!==null){if(l.alternate===null)throw Error(r(340));Ro()}return s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 19:return te(cn),null;case 4:return Ze(),null;case 10:return Ia(l.type),null;case 22:case 23:return Br(l),Zp(),s!==null&&te(Mo),s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 24:return Ia(yn),null;case 25:return null;default:return null}}function K_(s,l){switch(jp(l),l.tag){case 3:Ia(yn),Ze();break;case 26:case 27:case 5:me(l);break;case 4:Ze();break;case 31:l.memoizedState!==null&&Br(l);break;case 13:Br(l);break;case 19:te(cn);break;case 10:Ia(l.type);break;case 22:case 23:Br(l),Zp(),s!==null&&te(Mo);break;case 24:Ia(yn)}}function Cu(s,l){try{var f=l.updateQueue,d=f!==null?f.lastEffect:null;if(d!==null){var y=d.next;f=y;do{if((f.tag&s)===s){d=void 0;var x=f.create,C=f.inst;d=x(),C.destroy=d}f=f.next}while(f!==y)}}catch(B){St(l,l.return,B)}}function _s(s,l,f){try{var d=l.updateQueue,y=d!==null?d.lastEffect:null;if(y!==null){var x=y.next;d=x;do{if((d.tag&s)===s){var C=d.inst,B=C.destroy;if(B!==void 0){C.destroy=void 0,y=l;var $=f,J=B;try{J()}catch(oe){St(y,$,oe)}}}d=d.next}while(d!==x)}}catch(oe){St(l,l.return,oe)}}function Y_(s){var l=s.updateQueue;if(l!==null){var f=s.stateNode;try{V2(l,f)}catch(d){St(s,s.return,d)}}}function W_(s,l,f){f.props=Bo(s.type,s.memoizedProps),f.state=s.memoizedState;try{f.componentWillUnmount()}catch(d){St(s,l,d)}}function Tu(s,l){try{var f=s.ref;if(f!==null){switch(s.tag){case 26:case 27:case 5:var d=s.stateNode;break;case 30:d=s.stateNode;break;default:d=s.stateNode}typeof f=="function"?s.refCleanup=f(d):f.current=d}}catch(y){St(s,l,y)}}function ia(s,l){var f=s.ref,d=s.refCleanup;if(f!==null)if(typeof d=="function")try{d()}catch(y){St(s,l,y)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof f=="function")try{f(null)}catch(y){St(s,l,y)}else f.current=null}function Q_(s){var l=s.type,f=s.memoizedProps,d=s.stateNode;try{e:switch(l){case"button":case"input":case"select":case"textarea":f.autoFocus&&d.focus();break e;case"img":f.src?d.src=f.src:f.srcSet&&(d.srcset=f.srcSet)}}catch(y){St(s,s.return,y)}}function R1(s,l,f){try{var d=s.stateNode;s4(d,s.type,f,l),d[Ln]=l}catch(y){St(s,s.return,y)}}function Z_(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&Cs(s.type)||s.tag===4}function O1(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||Z_(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&Cs(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function D1(s,l,f){var d=s.tag;if(d===5||d===6)s=s.stateNode,l?(f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f).insertBefore(s,l):(l=f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f,l.appendChild(s),f=f._reactRootContainer,f!=null||l.onclick!==null||(l.onclick=vi));else if(d!==4&&(d===27&&Cs(s.type)&&(f=s.stateNode,l=null),s=s.child,s!==null))for(D1(s,l,f),s=s.sibling;s!==null;)D1(s,l,f),s=s.sibling}function $h(s,l,f){var d=s.tag;if(d===5||d===6)s=s.stateNode,l?f.insertBefore(s,l):f.appendChild(s);else if(d!==4&&(d===27&&Cs(s.type)&&(f=s.stateNode),s=s.child,s!==null))for($h(s,l,f),s=s.sibling;s!==null;)$h(s,l,f),s=s.sibling}function J_(s){var l=s.stateNode,f=s.memoizedProps;try{for(var d=s.type,y=l.attributes;y.length;)l.removeAttributeNode(y[0]);Jn(l,d,f),l[mn]=s,l[Ln]=f}catch(x){St(s,s.return,x)}}var Ma=!1,En=!1,M1=!1,ex=typeof WeakSet=="function"?WeakSet:Set,Bn=null;function VI(s,l){if(s=s.containerInfo,em=dd,s=h2(s),Cp(s)){if("selectionStart"in s)var f={start:s.selectionStart,end:s.selectionEnd};else e:{f=(f=s.ownerDocument)&&f.defaultView||window;var d=f.getSelection&&f.getSelection();if(d&&d.rangeCount!==0){f=d.anchorNode;var y=d.anchorOffset,x=d.focusNode;d=d.focusOffset;try{f.nodeType,x.nodeType}catch{f=null;break e}var C=0,B=-1,$=-1,J=0,oe=0,fe=s,ee=null;t:for(;;){for(var re;fe!==f||y!==0&&fe.nodeType!==3||(B=C+y),fe!==x||d!==0&&fe.nodeType!==3||($=C+d),fe.nodeType===3&&(C+=fe.nodeValue.length),(re=fe.firstChild)!==null;)ee=fe,fe=re;for(;;){if(fe===s)break t;if(ee===f&&++J===y&&(B=C),ee===x&&++oe===d&&($=C),(re=fe.nextSibling)!==null)break;fe=ee,ee=fe.parentNode}fe=re}f=B===-1||$===-1?null:{start:B,end:$}}else f=null}f=f||{start:0,end:0}}else f=null;for(tm={focusedElem:s,selectionRange:f},dd=!1,Bn=l;Bn!==null;)if(l=Bn,s=l.child,(l.subtreeFlags&1028)!==0&&s!==null)s.return=l,Bn=s;else for(;Bn!==null;){switch(l=Bn,x=l.alternate,s=l.flags,l.tag){case 0:if((s&4)!==0&&(s=l.updateQueue,s=s!==null?s.events:null,s!==null))for(f=0;f<s.length;f++)y=s[f],y.ref.impl=y.nextImpl;break;case 11:case 15:break;case 1:if((s&1024)!==0&&x!==null){s=void 0,f=l,y=x.memoizedProps,x=x.memoizedState,d=f.stateNode;try{var be=Bo(f.type,y);s=d.getSnapshotBeforeUpdate(be,x),d.__reactInternalSnapshotBeforeUpdate=s}catch(Le){St(f,f.return,Le)}}break;case 3:if((s&1024)!==0){if(s=l.stateNode.containerInfo,f=s.nodeType,f===9)im(s);else if(f===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":im(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(r(163))}if(s=l.sibling,s!==null){s.return=l.return,Bn=s;break}Bn=l.return}}function tx(s,l,f){var d=f.flags;switch(f.tag){case 0:case 11:case 15:ka(s,f),d&4&&Cu(5,f);break;case 1:if(ka(s,f),d&4)if(s=f.stateNode,l===null)try{s.componentDidMount()}catch(C){St(f,f.return,C)}else{var y=Bo(f.type,l.memoizedProps);l=l.memoizedState;try{s.componentDidUpdate(y,l,s.__reactInternalSnapshotBeforeUpdate)}catch(C){St(f,f.return,C)}}d&64&&Y_(f),d&512&&Tu(f,f.return);break;case 3:if(ka(s,f),d&64&&(s=f.updateQueue,s!==null)){if(l=null,f.child!==null)switch(f.child.tag){case 27:case 5:l=f.child.stateNode;break;case 1:l=f.child.stateNode}try{V2(s,l)}catch(C){St(f,f.return,C)}}break;case 27:l===null&&d&4&&J_(f);case 26:case 5:ka(s,f),l===null&&d&4&&Q_(f),d&512&&Tu(f,f.return);break;case 12:ka(s,f);break;case 31:ka(s,f),d&4&&ix(s,f);break;case 13:ka(s,f),d&4&&ax(s,f),d&64&&(s=f.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(f=KI.bind(null,f),p4(s,f))));break;case 22:if(d=f.memoizedState!==null||Ma,!d){l=l!==null&&l.memoizedState!==null||En,y=Ma;var x=En;Ma=d,(En=l)&&!x?La(s,f,(f.subtreeFlags&8772)!==0):ka(s,f),Ma=y,En=x}break;case 30:break;default:ka(s,f)}}function nx(s){var l=s.alternate;l!==null&&(s.alternate=null,nx(l)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(l=s.stateNode,l!==null&&fl(l)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var $t=null,wr=!1;function Pa(s,l,f){for(f=f.child;f!==null;)rx(s,l,f),f=f.sibling}function rx(s,l,f){if(Qt&&typeof Qt.onCommitFiberUnmount=="function")try{Qt.onCommitFiberUnmount(Nt,f)}catch{}switch(f.tag){case 26:En||ia(f,l),Pa(s,l,f),f.memoizedState?f.memoizedState.count--:f.stateNode&&(f=f.stateNode,f.parentNode.removeChild(f));break;case 27:En||ia(f,l);var d=$t,y=wr;Cs(f.type)&&($t=f.stateNode,wr=!1),Pa(s,l,f),Lu(f.stateNode),$t=d,wr=y;break;case 5:En||ia(f,l);case 6:if(d=$t,y=wr,$t=null,Pa(s,l,f),$t=d,wr=y,$t!==null)if(wr)try{($t.nodeType===9?$t.body:$t.nodeName==="HTML"?$t.ownerDocument.body:$t).removeChild(f.stateNode)}catch(x){St(f,l,x)}else try{$t.removeChild(f.stateNode)}catch(x){St(f,l,x)}break;case 18:$t!==null&&(wr?(s=$t,Yx(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,f.stateNode),Yl(s)):Yx($t,f.stateNode));break;case 4:d=$t,y=wr,$t=f.stateNode.containerInfo,wr=!0,Pa(s,l,f),$t=d,wr=y;break;case 0:case 11:case 14:case 15:_s(2,f,l),En||_s(4,f,l),Pa(s,l,f);break;case 1:En||(ia(f,l),d=f.stateNode,typeof d.componentWillUnmount=="function"&&W_(f,l,d)),Pa(s,l,f);break;case 21:Pa(s,l,f);break;case 22:En=(d=En)||f.memoizedState!==null,Pa(s,l,f),En=d;break;default:Pa(s,l,f)}}function ix(s,l){if(l.memoizedState===null&&(s=l.alternate,s!==null&&(s=s.memoizedState,s!==null))){s=s.dehydrated;try{Yl(s)}catch(f){St(l,l.return,f)}}}function ax(s,l){if(l.memoizedState===null&&(s=l.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{Yl(s)}catch(f){St(l,l.return,f)}}function FI(s){switch(s.tag){case 31:case 13:case 19:var l=s.stateNode;return l===null&&(l=s.stateNode=new ex),l;case 22:return s=s.stateNode,l=s._retryCache,l===null&&(l=s._retryCache=new ex),l;default:throw Error(r(435,s.tag))}}function Xh(s,l){var f=FI(s);l.forEach(function(d){if(!f.has(d)){f.add(d);var y=YI.bind(null,s,d);d.then(y,y)}})}function Ar(s,l){var f=l.deletions;if(f!==null)for(var d=0;d<f.length;d++){var y=f[d],x=s,C=l,B=C;e:for(;B!==null;){switch(B.tag){case 27:if(Cs(B.type)){$t=B.stateNode,wr=!1;break e}break;case 5:$t=B.stateNode,wr=!1;break e;case 3:case 4:$t=B.stateNode.containerInfo,wr=!0;break e}B=B.return}if($t===null)throw Error(r(160));rx(x,C,y),$t=null,wr=!1,x=y.alternate,x!==null&&(x.return=null),y.return=null}if(l.subtreeFlags&13886)for(l=l.child;l!==null;)sx(l,s),l=l.sibling}var Ai=null;function sx(s,l){var f=s.alternate,d=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:Ar(l,s),br(s),d&4&&(_s(3,s,s.return),Cu(3,s),_s(5,s,s.return));break;case 1:Ar(l,s),br(s),d&512&&(En||f===null||ia(f,f.return)),d&64&&Ma&&(s=s.updateQueue,s!==null&&(d=s.callbacks,d!==null&&(f=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=f===null?d:f.concat(d))));break;case 26:var y=Ai;if(Ar(l,s),br(s),d&512&&(En||f===null||ia(f,f.return)),d&4){var x=f!==null?f.memoizedState:null;if(d=s.memoizedState,f===null)if(d===null)if(s.stateNode===null){e:{d=s.type,f=s.memoizedProps,y=y.ownerDocument||y;t:switch(d){case"title":x=y.getElementsByTagName("title")[0],(!x||x[Gi]||x[mn]||x.namespaceURI==="http://www.w3.org/2000/svg"||x.hasAttribute("itemprop"))&&(x=y.createElement(d),y.head.insertBefore(x,y.querySelector("head > title"))),Jn(x,d,f),x[mn]=s,gn(x),d=x;break e;case"link":var C=sE("link","href",y).get(d+(f.href||""));if(C){for(var B=0;B<C.length;B++)if(x=C[B],x.getAttribute("href")===(f.href==null||f.href===""?null:f.href)&&x.getAttribute("rel")===(f.rel==null?null:f.rel)&&x.getAttribute("title")===(f.title==null?null:f.title)&&x.getAttribute("crossorigin")===(f.crossOrigin==null?null:f.crossOrigin)){C.splice(B,1);break t}}x=y.createElement(d),Jn(x,d,f),y.head.appendChild(x);break;case"meta":if(C=sE("meta","content",y).get(d+(f.content||""))){for(B=0;B<C.length;B++)if(x=C[B],x.getAttribute("content")===(f.content==null?null:""+f.content)&&x.getAttribute("name")===(f.name==null?null:f.name)&&x.getAttribute("property")===(f.property==null?null:f.property)&&x.getAttribute("http-equiv")===(f.httpEquiv==null?null:f.httpEquiv)&&x.getAttribute("charset")===(f.charSet==null?null:f.charSet)){C.splice(B,1);break t}}x=y.createElement(d),Jn(x,d,f),y.head.appendChild(x);break;default:throw Error(r(468,d))}x[mn]=s,gn(x),d=x}s.stateNode=d}else oE(y,s.type,s.stateNode);else s.stateNode=aE(y,d,s.memoizedProps);else x!==d?(x===null?f.stateNode!==null&&(f=f.stateNode,f.parentNode.removeChild(f)):x.count--,d===null?oE(y,s.type,s.stateNode):aE(y,d,s.memoizedProps)):d===null&&s.stateNode!==null&&R1(s,s.memoizedProps,f.memoizedProps)}break;case 27:Ar(l,s),br(s),d&512&&(En||f===null||ia(f,f.return)),f!==null&&d&4&&R1(s,s.memoizedProps,f.memoizedProps);break;case 5:if(Ar(l,s),br(s),d&512&&(En||f===null||ia(f,f.return)),s.flags&32){y=s.stateNode;try{Er(y,"")}catch(be){St(s,s.return,be)}}d&4&&s.stateNode!=null&&(y=s.memoizedProps,R1(s,y,f!==null?f.memoizedProps:y)),d&1024&&(M1=!0);break;case 6:if(Ar(l,s),br(s),d&4){if(s.stateNode===null)throw Error(r(162));d=s.memoizedProps,f=s.stateNode;try{f.nodeValue=d}catch(be){St(s,s.return,be)}}break;case 3:if(cd=null,y=Ai,Ai=od(l.containerInfo),Ar(l,s),Ai=y,br(s),d&4&&f!==null&&f.memoizedState.isDehydrated)try{Yl(l.containerInfo)}catch(be){St(s,s.return,be)}M1&&(M1=!1,ox(s));break;case 4:d=Ai,Ai=od(s.stateNode.containerInfo),Ar(l,s),br(s),Ai=d;break;case 12:Ar(l,s),br(s);break;case 31:Ar(l,s),br(s),d&4&&(d=s.updateQueue,d!==null&&(s.updateQueue=null,Xh(s,d)));break;case 13:Ar(l,s),br(s),s.child.flags&8192&&s.memoizedState!==null!=(f!==null&&f.memoizedState!==null)&&(Yh=Ee()),d&4&&(d=s.updateQueue,d!==null&&(s.updateQueue=null,Xh(s,d)));break;case 22:y=s.memoizedState!==null;var $=f!==null&&f.memoizedState!==null,J=Ma,oe=En;if(Ma=J||y,En=oe||$,Ar(l,s),En=oe,Ma=J,br(s),d&8192)e:for(l=s.stateNode,l._visibility=y?l._visibility&-2:l._visibility|1,y&&(f===null||$||Ma||En||Vo(s)),f=null,l=s;;){if(l.tag===5||l.tag===26){if(f===null){$=f=l;try{if(x=$.stateNode,y)C=x.style,typeof C.setProperty=="function"?C.setProperty("display","none","important"):C.display="none";else{B=$.stateNode;var fe=$.memoizedProps.style,ee=fe!=null&&fe.hasOwnProperty("display")?fe.display:null;B.style.display=ee==null||typeof ee=="boolean"?"":(""+ee).trim()}}catch(be){St($,$.return,be)}}}else if(l.tag===6){if(f===null){$=l;try{$.stateNode.nodeValue=y?"":$.memoizedProps}catch(be){St($,$.return,be)}}}else if(l.tag===18){if(f===null){$=l;try{var re=$.stateNode;y?Wx(re,!0):Wx($.stateNode,!1)}catch(be){St($,$.return,be)}}}else if((l.tag!==22&&l.tag!==23||l.memoizedState===null||l===s)&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===s)break e;for(;l.sibling===null;){if(l.return===null||l.return===s)break e;f===l&&(f=null),l=l.return}f===l&&(f=null),l.sibling.return=l.return,l=l.sibling}d&4&&(d=s.updateQueue,d!==null&&(f=d.retryQueue,f!==null&&(d.retryQueue=null,Xh(s,f))));break;case 19:Ar(l,s),br(s),d&4&&(d=s.updateQueue,d!==null&&(s.updateQueue=null,Xh(s,d)));break;case 30:break;case 21:break;default:Ar(l,s),br(s)}}function br(s){var l=s.flags;if(l&2){try{for(var f,d=s.return;d!==null;){if(Z_(d)){f=d;break}d=d.return}if(f==null)throw Error(r(160));switch(f.tag){case 27:var y=f.stateNode,x=O1(s);$h(s,x,y);break;case 5:var C=f.stateNode;f.flags&32&&(Er(C,""),f.flags&=-33);var B=O1(s);$h(s,B,C);break;case 3:case 4:var $=f.stateNode.containerInfo,J=O1(s);D1(s,J,$);break;default:throw Error(r(161))}}catch(oe){St(s,s.return,oe)}s.flags&=-3}l&4096&&(s.flags&=-4097)}function ox(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var l=s;ox(l),l.tag===5&&l.flags&1024&&l.stateNode.reset(),s=s.sibling}}function ka(s,l){if(l.subtreeFlags&8772)for(l=l.child;l!==null;)tx(s,l.alternate,l),l=l.sibling}function Vo(s){for(s=s.child;s!==null;){var l=s;switch(l.tag){case 0:case 11:case 14:case 15:_s(4,l,l.return),Vo(l);break;case 1:ia(l,l.return);var f=l.stateNode;typeof f.componentWillUnmount=="function"&&W_(l,l.return,f),Vo(l);break;case 27:Lu(l.stateNode);case 26:case 5:ia(l,l.return),Vo(l);break;case 22:l.memoizedState===null&&Vo(l);break;case 30:Vo(l);break;default:Vo(l)}s=s.sibling}}function La(s,l,f){for(f=f&&(l.subtreeFlags&8772)!==0,l=l.child;l!==null;){var d=l.alternate,y=s,x=l,C=x.flags;switch(x.tag){case 0:case 11:case 15:La(y,x,f),Cu(4,x);break;case 1:if(La(y,x,f),d=x,y=d.stateNode,typeof y.componentDidMount=="function")try{y.componentDidMount()}catch(J){St(d,d.return,J)}if(d=x,y=d.updateQueue,y!==null){var B=d.stateNode;try{var $=y.shared.hiddenCallbacks;if($!==null)for(y.shared.hiddenCallbacks=null,y=0;y<$.length;y++)B2($[y],B)}catch(J){St(d,d.return,J)}}f&&C&64&&Y_(x),Tu(x,x.return);break;case 27:J_(x);case 26:case 5:La(y,x,f),f&&d===null&&C&4&&Q_(x),Tu(x,x.return);break;case 12:La(y,x,f);break;case 31:La(y,x,f),f&&C&4&&ix(y,x);break;case 13:La(y,x,f),f&&C&4&&ax(y,x);break;case 22:x.memoizedState===null&&La(y,x,f),Tu(x,x.return);break;case 30:break;default:La(y,x,f)}l=l.sibling}}function P1(s,l){var f=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(f=s.memoizedState.cachePool.pool),s=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(s=l.memoizedState.cachePool.pool),s!==f&&(s!=null&&s.refCount++,f!=null&&du(f))}function k1(s,l){s=null,l.alternate!==null&&(s=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==s&&(l.refCount++,s!=null&&du(s))}function bi(s,l,f,d){if(l.subtreeFlags&10256)for(l=l.child;l!==null;)lx(s,l,f,d),l=l.sibling}function lx(s,l,f,d){var y=l.flags;switch(l.tag){case 0:case 11:case 15:bi(s,l,f,d),y&2048&&Cu(9,l);break;case 1:bi(s,l,f,d);break;case 3:bi(s,l,f,d),y&2048&&(s=null,l.alternate!==null&&(s=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==s&&(l.refCount++,s!=null&&du(s)));break;case 12:if(y&2048){bi(s,l,f,d),s=l.stateNode;try{var x=l.memoizedProps,C=x.id,B=x.onPostCommit;typeof B=="function"&&B(C,l.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch($){St(l,l.return,$)}}else bi(s,l,f,d);break;case 31:bi(s,l,f,d);break;case 13:bi(s,l,f,d);break;case 23:break;case 22:x=l.stateNode,C=l.alternate,l.memoizedState!==null?x._visibility&2?bi(s,l,f,d):Iu(s,l):x._visibility&2?bi(s,l,f,d):(x._visibility|=2,Bl(s,l,f,d,(l.subtreeFlags&10256)!==0||!1)),y&2048&&P1(C,l);break;case 24:bi(s,l,f,d),y&2048&&k1(l.alternate,l);break;default:bi(s,l,f,d)}}function Bl(s,l,f,d,y){for(y=y&&((l.subtreeFlags&10256)!==0||!1),l=l.child;l!==null;){var x=s,C=l,B=f,$=d,J=C.flags;switch(C.tag){case 0:case 11:case 15:Bl(x,C,B,$,y),Cu(8,C);break;case 23:break;case 22:var oe=C.stateNode;C.memoizedState!==null?oe._visibility&2?Bl(x,C,B,$,y):Iu(x,C):(oe._visibility|=2,Bl(x,C,B,$,y)),y&&J&2048&&P1(C.alternate,C);break;case 24:Bl(x,C,B,$,y),y&&J&2048&&k1(C.alternate,C);break;default:Bl(x,C,B,$,y)}l=l.sibling}}function Iu(s,l){if(l.subtreeFlags&10256)for(l=l.child;l!==null;){var f=s,d=l,y=d.flags;switch(d.tag){case 22:Iu(f,d),y&2048&&P1(d.alternate,d);break;case 24:Iu(f,d),y&2048&&k1(d.alternate,d);break;default:Iu(f,d)}l=l.sibling}}var Nu=8192;function Vl(s,l,f){if(s.subtreeFlags&Nu)for(s=s.child;s!==null;)cx(s,l,f),s=s.sibling}function cx(s,l,f){switch(s.tag){case 26:Vl(s,l,f),s.flags&Nu&&s.memoizedState!==null&&C4(f,Ai,s.memoizedState,s.memoizedProps);break;case 5:Vl(s,l,f);break;case 3:case 4:var d=Ai;Ai=od(s.stateNode.containerInfo),Vl(s,l,f),Ai=d;break;case 22:s.memoizedState===null&&(d=s.alternate,d!==null&&d.memoizedState!==null?(d=Nu,Nu=16777216,Vl(s,l,f),Nu=d):Vl(s,l,f));break;default:Vl(s,l,f)}}function ux(s){var l=s.alternate;if(l!==null&&(s=l.child,s!==null)){l.child=null;do l=s.sibling,s.sibling=null,s=l;while(s!==null)}}function Ru(s){var l=s.deletions;if((s.flags&16)!==0){if(l!==null)for(var f=0;f<l.length;f++){var d=l[f];Bn=d,hx(d,s)}ux(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)fx(s),s=s.sibling}function fx(s){switch(s.tag){case 0:case 11:case 15:Ru(s),s.flags&2048&&_s(9,s,s.return);break;case 3:Ru(s);break;case 12:Ru(s);break;case 22:var l=s.stateNode;s.memoizedState!==null&&l._visibility&2&&(s.return===null||s.return.tag!==13)?(l._visibility&=-3,Kh(s)):Ru(s);break;default:Ru(s)}}function Kh(s){var l=s.deletions;if((s.flags&16)!==0){if(l!==null)for(var f=0;f<l.length;f++){var d=l[f];Bn=d,hx(d,s)}ux(s)}for(s=s.child;s!==null;){switch(l=s,l.tag){case 0:case 11:case 15:_s(8,l,l.return),Kh(l);break;case 22:f=l.stateNode,f._visibility&2&&(f._visibility&=-3,Kh(l));break;default:Kh(l)}s=s.sibling}}function hx(s,l){for(;Bn!==null;){var f=Bn;switch(f.tag){case 0:case 11:case 15:_s(8,f,l);break;case 23:case 22:if(f.memoizedState!==null&&f.memoizedState.cachePool!==null){var d=f.memoizedState.cachePool.pool;d!=null&&d.refCount++}break;case 24:du(f.memoizedState.cache)}if(d=f.child,d!==null)d.return=f,Bn=d;else e:for(f=s;Bn!==null;){d=Bn;var y=d.sibling,x=d.return;if(nx(d),d===f){Bn=null;break e}if(y!==null){y.return=x,Bn=y;break e}Bn=x}}}var UI={getCacheForType:function(s){var l=Qn(yn),f=l.data.get(s);return f===void 0&&(f=s(),l.data.set(s,f)),f},cacheSignal:function(){return Qn(yn).controller.signal}},zI=typeof WeakMap=="function"?WeakMap:Map,yt=0,Lt=null,et=null,nt=0,bt=0,Vr=null,xs=!1,Fl=!1,L1=!1,ja=0,rn=0,Es=0,Fo=0,j1=0,Fr=0,Ul=0,Ou=null,Sr=null,B1=!1,Yh=0,dx=0,Wh=1/0,Qh=null,ws=null,Cn=0,As=null,zl=null,Ba=0,V1=0,F1=null,px=null,Du=0,U1=null;function Ur(){return(yt&2)!==0&&nt!==0?nt&-nt:F.T!==null?X1():Zf()}function mx(){if(Fr===0)if((nt&536870912)===0||ot){var s=ho;ho<<=1,(ho&3932160)===0&&(ho=262144),Fr=s}else Fr=536870912;return s=jr.current,s!==null&&(s.flags|=32),Fr}function Cr(s,l,f){(s===Lt&&(bt===2||bt===9)||s.cancelPendingCommit!==null)&&(Hl(s,0),bs(s,nt,Fr,!1)),po(s,f),((yt&2)===0||s!==Lt)&&(s===Lt&&((yt&2)===0&&(Fo|=f),rn===4&&bs(s,nt,Fr,!1)),aa(s))}function gx(s,l,f){if((yt&6)!==0)throw Error(r(327));var d=!f&&(l&127)===0&&(l&s.expiredLanes)===0||pi(s,l),y=d?qI(s,l):H1(s,l,!0),x=d;do{if(y===0){Fl&&!d&&bs(s,l,0,!1);break}else{if(f=s.current.alternate,x&&!HI(f)){y=H1(s,l,!1),x=!1;continue}if(y===2){if(x=l,s.errorRecoveryDisabledLanes&x)var C=0;else C=s.pendingLanes&-536870913,C=C!==0?C:C&536870912?536870912:0;if(C!==0){l=C;e:{var B=s;y=Ou;var $=B.current.memoizedState.isDehydrated;if($&&(Hl(B,C).flags|=256),C=H1(B,C,!1),C!==2){if(L1&&!$){B.errorRecoveryDisabledLanes|=x,Fo|=x,y=4;break e}x=Sr,Sr=y,x!==null&&(Sr===null?Sr=x:Sr.push.apply(Sr,x))}y=C}if(x=!1,y!==2)continue}}if(y===1){Hl(s,0),bs(s,l,0,!0);break}e:{switch(d=s,x=y,x){case 0:case 1:throw Error(r(345));case 4:if((l&4194048)!==l)break;case 6:bs(d,l,Fr,!xs);break e;case 2:Sr=null;break;case 3:case 5:break;default:throw Error(r(329))}if((l&62914560)===l&&(y=Yh+300-Ee(),10<y)){if(bs(d,l,Fr,!xs),Ui(d,0,!0)!==0)break e;Ba=l,d.timeoutHandle=Xx(vx.bind(null,d,f,Sr,Qh,B1,l,Fr,Fo,Ul,xs,x,"Throttled",-0,0),y);break e}vx(d,f,Sr,Qh,B1,l,Fr,Fo,Ul,xs,x,null,-0,0)}}break}while(!0);aa(s)}function vx(s,l,f,d,y,x,C,B,$,J,oe,fe,ee,re){if(s.timeoutHandle=-1,fe=l.subtreeFlags,fe&8192||(fe&16785408)===16785408){fe={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:vi},cx(l,x,fe);var be=(x&62914560)===x?Yh-Ee():(x&4194048)===x?dx-Ee():0;if(be=T4(fe,be),be!==null){Ba=x,s.cancelPendingCommit=be(Sx.bind(null,s,l,x,f,d,y,C,B,$,oe,fe,null,ee,re)),bs(s,x,C,!J);return}}Sx(s,l,x,f,d,y,C,B,$)}function HI(s){for(var l=s;;){var f=l.tag;if((f===0||f===11||f===15)&&l.flags&16384&&(f=l.updateQueue,f!==null&&(f=f.stores,f!==null)))for(var d=0;d<f.length;d++){var y=f[d],x=y.getSnapshot;y=y.value;try{if(!kr(x(),y))return!1}catch{return!1}}if(f=l.child,l.subtreeFlags&16384&&f!==null)f.return=l,l=f;else{if(l===s)break;for(;l.sibling===null;){if(l.return===null||l.return===s)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function bs(s,l,f,d){l&=~j1,l&=~Fo,s.suspendedLanes|=l,s.pingedLanes&=~l,d&&(s.warmLanes|=l),d=s.expirationTimes;for(var y=l;0<y;){var x=31-on(y),C=1<<x;d[x]=-1,y&=~C}f!==0&&mo(s,f,l)}function Zh(){return(yt&6)===0?(Mu(0),!1):!0}function z1(){if(et!==null){if(bt===0)var s=et.return;else s=et,Ta=Oo=null,i1(s),Ml=null,mu=0,s=et;for(;s!==null;)K_(s.alternate,s),s=s.return;et=null}}function Hl(s,l){var f=s.timeoutHandle;f!==-1&&(s.timeoutHandle=-1,c4(f)),f=s.cancelPendingCommit,f!==null&&(s.cancelPendingCommit=null,f()),Ba=0,z1(),Lt=s,et=f=Sa(s.current,null),nt=l,bt=0,Vr=null,xs=!1,Fl=pi(s,l),L1=!1,Ul=Fr=j1=Fo=Es=rn=0,Sr=Ou=null,B1=!1,(l&8)!==0&&(l|=l&32);var d=s.entangledLanes;if(d!==0)for(s=s.entanglements,d&=l;0<d;){var y=31-on(d),x=1<<y;l|=s[y],d&=~x}return ja=l,_h(),f}function yx(s,l){Xe=null,F.H=Au,l===Dl||l===Th?(l=P2(),bt=3):l===$p?(l=P2(),bt=4):bt=l===x1?8:l!==null&&typeof l=="object"&&typeof l.then=="function"?6:1,Vr=l,et===null&&(rn=1,Uh(s,Zr(l,s.current)))}function _x(){var s=jr.current;return s===null?!0:(nt&4194048)===nt?ni===null:(nt&62914560)===nt||(nt&536870912)!==0?s===ni:!1}function xx(){var s=F.H;return F.H=Au,s===null?Au:s}function Ex(){var s=F.A;return F.A=UI,s}function Jh(){rn=4,xs||(nt&4194048)!==nt&&jr.current!==null||(Fl=!0),(Es&134217727)===0&&(Fo&134217727)===0||Lt===null||bs(Lt,nt,Fr,!1)}function H1(s,l,f){var d=yt;yt|=2;var y=xx(),x=Ex();(Lt!==s||nt!==l)&&(Qh=null,Hl(s,l)),l=!1;var C=rn;e:do try{if(bt!==0&&et!==null){var B=et,$=Vr;switch(bt){case 8:z1(),C=6;break e;case 3:case 2:case 9:case 6:jr.current===null&&(l=!0);var J=bt;if(bt=0,Vr=null,Gl(s,B,$,J),f&&Fl){C=0;break e}break;default:J=bt,bt=0,Vr=null,Gl(s,B,$,J)}}GI(),C=rn;break}catch(oe){yx(s,oe)}while(!0);return l&&s.shellSuspendCounter++,Ta=Oo=null,yt=d,F.H=y,F.A=x,et===null&&(Lt=null,nt=0,_h()),C}function GI(){for(;et!==null;)wx(et)}function qI(s,l){var f=yt;yt|=2;var d=xx(),y=Ex();Lt!==s||nt!==l?(Qh=null,Wh=Ee()+500,Hl(s,l)):Fl=pi(s,l);e:do try{if(bt!==0&&et!==null){l=et;var x=Vr;t:switch(bt){case 1:bt=0,Vr=null,Gl(s,l,x,1);break;case 2:case 9:if(D2(x)){bt=0,Vr=null,Ax(l);break}l=function(){bt!==2&&bt!==9||Lt!==s||(bt=7),aa(s)},x.then(l,l);break e;case 3:bt=7;break e;case 4:bt=5;break e;case 7:D2(x)?(bt=0,Vr=null,Ax(l)):(bt=0,Vr=null,Gl(s,l,x,7));break;case 5:var C=null;switch(et.tag){case 26:C=et.memoizedState;case 5:case 27:var B=et;if(C?lE(C):B.stateNode.complete){bt=0,Vr=null;var $=B.sibling;if($!==null)et=$;else{var J=B.return;J!==null?(et=J,ed(J)):et=null}break t}}bt=0,Vr=null,Gl(s,l,x,5);break;case 6:bt=0,Vr=null,Gl(s,l,x,6);break;case 8:z1(),rn=6;break e;default:throw Error(r(462))}}$I();break}catch(oe){yx(s,oe)}while(!0);return Ta=Oo=null,F.H=d,F.A=y,yt=f,et!==null?0:(Lt=null,nt=0,_h(),rn)}function $I(){for(;et!==null&&!es();)wx(et)}function wx(s){var l=$_(s.alternate,s,ja);s.memoizedProps=s.pendingProps,l===null?ed(s):et=l}function Ax(s){var l=s,f=l.alternate;switch(l.tag){case 15:case 0:l=F_(f,l,l.pendingProps,l.type,void 0,nt);break;case 11:l=F_(f,l,l.pendingProps,l.type.render,l.ref,nt);break;case 5:i1(l);default:K_(f,l),l=et=E2(l,ja),l=$_(f,l,ja)}s.memoizedProps=s.pendingProps,l===null?ed(s):et=l}function Gl(s,l,f,d){Ta=Oo=null,i1(l),Ml=null,mu=0;var y=l.return;try{if(PI(s,y,l,f,nt)){rn=1,Uh(s,Zr(f,s.current)),et=null;return}}catch(x){if(y!==null)throw et=y,x;rn=1,Uh(s,Zr(f,s.current)),et=null;return}l.flags&32768?(ot||d===1?s=!0:Fl||(nt&536870912)!==0?s=!1:(xs=s=!0,(d===2||d===9||d===3||d===6)&&(d=jr.current,d!==null&&d.tag===13&&(d.flags|=16384))),bx(l,s)):ed(l)}function ed(s){var l=s;do{if((l.flags&32768)!==0){bx(l,xs);return}s=l.return;var f=jI(l.alternate,l,ja);if(f!==null){et=f;return}if(l=l.sibling,l!==null){et=l;return}et=l=s}while(l!==null);rn===0&&(rn=5)}function bx(s,l){do{var f=BI(s.alternate,s);if(f!==null){f.flags&=32767,et=f;return}if(f=s.return,f!==null&&(f.flags|=32768,f.subtreeFlags=0,f.deletions=null),!l&&(s=s.sibling,s!==null)){et=s;return}et=s=f}while(s!==null);rn=6,et=null}function Sx(s,l,f,d,y,x,C,B,$){s.cancelPendingCommit=null;do td();while(Cn!==0);if((yt&6)!==0)throw Error(r(327));if(l!==null){if(l===s.current)throw Error(r(177));if(x=l.lanes|l.childLanes,x|=Op,wp(s,f,x,C,B,$),s===Lt&&(et=Lt=null,nt=0),zl=l,As=s,Ba=f,V1=x,F1=y,px=d,(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,WI(Xn,function(){return Rx(),null})):(s.callbackNode=null,s.callbackPriority=0),d=(l.flags&13878)!==0,(l.subtreeFlags&13878)!==0||d){d=F.T,F.T=null,y=se.p,se.p=2,C=yt,yt|=4;try{VI(s,l,f)}finally{yt=C,se.p=y,F.T=d}}Cn=1,Cx(),Tx(),Ix()}}function Cx(){if(Cn===1){Cn=0;var s=As,l=zl,f=(l.flags&13878)!==0;if((l.subtreeFlags&13878)!==0||f){f=F.T,F.T=null;var d=se.p;se.p=2;var y=yt;yt|=4;try{sx(l,s);var x=tm,C=h2(s.containerInfo),B=x.focusedElem,$=x.selectionRange;if(C!==B&&B&&B.ownerDocument&&f2(B.ownerDocument.documentElement,B)){if($!==null&&Cp(B)){var J=$.start,oe=$.end;if(oe===void 0&&(oe=J),"selectionStart"in B)B.selectionStart=J,B.selectionEnd=Math.min(oe,B.value.length);else{var fe=B.ownerDocument||document,ee=fe&&fe.defaultView||window;if(ee.getSelection){var re=ee.getSelection(),be=B.textContent.length,Le=Math.min($.start,be),Mt=$.end===void 0?Le:Math.min($.end,be);!re.extend&&Le>Mt&&(C=Mt,Mt=Le,Le=C);var Y=u2(B,Le),K=u2(B,Mt);if(Y&&K&&(re.rangeCount!==1||re.anchorNode!==Y.node||re.anchorOffset!==Y.offset||re.focusNode!==K.node||re.focusOffset!==K.offset)){var Z=fe.createRange();Z.setStart(Y.node,Y.offset),re.removeAllRanges(),Le>Mt?(re.addRange(Z),re.extend(K.node,K.offset)):(Z.setEnd(K.node,K.offset),re.addRange(Z))}}}}for(fe=[],re=B;re=re.parentNode;)re.nodeType===1&&fe.push({element:re,left:re.scrollLeft,top:re.scrollTop});for(typeof B.focus=="function"&&B.focus(),B=0;B<fe.length;B++){var ue=fe[B];ue.element.scrollLeft=ue.left,ue.element.scrollTop=ue.top}}dd=!!em,tm=em=null}finally{yt=y,se.p=d,F.T=f}}s.current=l,Cn=2}}function Tx(){if(Cn===2){Cn=0;var s=As,l=zl,f=(l.flags&8772)!==0;if((l.subtreeFlags&8772)!==0||f){f=F.T,F.T=null;var d=se.p;se.p=2;var y=yt;yt|=4;try{tx(s,l.alternate,l)}finally{yt=y,se.p=d,F.T=f}}Cn=3}}function Ix(){if(Cn===4||Cn===3){Cn=0,le();var s=As,l=zl,f=Ba,d=px;(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?Cn=5:(Cn=0,zl=As=null,Nx(s,s.pendingLanes));var y=s.pendingLanes;if(y===0&&(ws=null),Ea(f),l=l.stateNode,Qt&&typeof Qt.onCommitFiberRoot=="function")try{Qt.onCommitFiberRoot(Nt,l,void 0,(l.current.flags&128)===128)}catch{}if(d!==null){l=F.T,y=se.p,se.p=2,F.T=null;try{for(var x=s.onRecoverableError,C=0;C<d.length;C++){var B=d[C];x(B.value,{componentStack:B.stack})}}finally{F.T=l,se.p=y}}(Ba&3)!==0&&td(),aa(s),y=s.pendingLanes,(f&261930)!==0&&(y&42)!==0?s===U1?Du++:(Du=0,U1=s):Du=0,Mu(0)}}function Nx(s,l){(s.pooledCacheLanes&=l)===0&&(l=s.pooledCache,l!=null&&(s.pooledCache=null,du(l)))}function td(){return Cx(),Tx(),Ix(),Rx()}function Rx(){if(Cn!==5)return!1;var s=As,l=V1;V1=0;var f=Ea(Ba),d=F.T,y=se.p;try{se.p=32>f?32:f,F.T=null,f=F1,F1=null;var x=As,C=Ba;if(Cn=0,zl=As=null,Ba=0,(yt&6)!==0)throw Error(r(331));var B=yt;if(yt|=4,fx(x.current),lx(x,x.current,C,f),yt=B,Mu(0,!1),Qt&&typeof Qt.onPostCommitFiberRoot=="function")try{Qt.onPostCommitFiberRoot(Nt,x)}catch{}return!0}finally{se.p=y,F.T=d,Nx(s,l)}}function Ox(s,l,f){l=Zr(f,l),l=_1(s.stateNode,l,2),s=gs(s,l,2),s!==null&&(po(s,2),aa(s))}function St(s,l,f){if(s.tag===3)Ox(s,s,f);else for(;l!==null;){if(l.tag===3){Ox(l,s,f);break}else if(l.tag===1){var d=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(ws===null||!ws.has(d))){s=Zr(f,s),f=D_(2),d=gs(l,f,2),d!==null&&(M_(f,d,l,s),po(d,2),aa(d));break}}l=l.return}}function G1(s,l,f){var d=s.pingCache;if(d===null){d=s.pingCache=new zI;var y=new Set;d.set(l,y)}else y=d.get(l),y===void 0&&(y=new Set,d.set(l,y));y.has(f)||(L1=!0,y.add(f),s=XI.bind(null,s,l,f),l.then(s,s))}function XI(s,l,f){var d=s.pingCache;d!==null&&d.delete(l),s.pingedLanes|=s.suspendedLanes&f,s.warmLanes&=~f,Lt===s&&(nt&f)===f&&(rn===4||rn===3&&(nt&62914560)===nt&&300>Ee()-Yh?(yt&2)===0&&Hl(s,0):j1|=f,Ul===nt&&(Ul=0)),aa(s)}function Dx(s,l){l===0&&(l=Qf()),s=Io(s,l),s!==null&&(po(s,l),aa(s))}function KI(s){var l=s.memoizedState,f=0;l!==null&&(f=l.retryLane),Dx(s,f)}function YI(s,l){var f=0;switch(s.tag){case 31:case 13:var d=s.stateNode,y=s.memoizedState;y!==null&&(f=y.retryLane);break;case 19:d=s.stateNode;break;case 22:d=s.stateNode._retryCache;break;default:throw Error(r(314))}d!==null&&d.delete(l),Dx(s,f)}function WI(s,l){return Et(s,l)}var nd=null,ql=null,q1=!1,rd=!1,$1=!1,Ss=0;function aa(s){s!==ql&&s.next===null&&(ql===null?nd=ql=s:ql=ql.next=s),rd=!0,q1||(q1=!0,ZI())}function Mu(s,l){if(!$1&&rd){$1=!0;do for(var f=!1,d=nd;d!==null;){if(s!==0){var y=d.pendingLanes;if(y===0)var x=0;else{var C=d.suspendedLanes,B=d.pingedLanes;x=(1<<31-on(42|s)+1)-1,x&=y&~(C&~B),x=x&201326741?x&201326741|1:x?x|2:0}x!==0&&(f=!0,Lx(d,x))}else x=nt,x=Ui(d,d===Lt?x:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),(x&3)===0||pi(d,x)||(f=!0,Lx(d,x));d=d.next}while(f);$1=!1}}function QI(){Mx()}function Mx(){rd=q1=!1;var s=0;Ss!==0&&l4()&&(s=Ss);for(var l=Ee(),f=null,d=nd;d!==null;){var y=d.next,x=Px(d,l);x===0?(d.next=null,f===null?nd=y:f.next=y,y===null&&(ql=f)):(f=d,(s!==0||(x&3)!==0)&&(rd=!0)),d=y}Cn!==0&&Cn!==5||Mu(s),Ss!==0&&(Ss=0)}function Px(s,l){for(var f=s.suspendedLanes,d=s.pingedLanes,y=s.expirationTimes,x=s.pendingLanes&-62914561;0<x;){var C=31-on(x),B=1<<C,$=y[C];$===-1?((B&f)===0||(B&d)!==0)&&(y[C]=Ep(B,l)):$<=l&&(s.expiredLanes|=B),x&=~B}if(l=Lt,f=nt,f=Ui(s,s===l?f:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),d=s.callbackNode,f===0||s===l&&(bt===2||bt===9)||s.cancelPendingCommit!==null)return d!==null&&d!==null&&$n(d),s.callbackNode=null,s.callbackPriority=0;if((f&3)===0||pi(s,f)){if(l=f&-f,l===s.callbackPriority)return l;switch(d!==null&&$n(d),Ea(f)){case 2:case 8:f=dr;break;case 32:f=Xn;break;case 268435456:f=qe;break;default:f=Xn}return d=kx.bind(null,s),f=Et(f,d),s.callbackPriority=l,s.callbackNode=f,l}return d!==null&&d!==null&&$n(d),s.callbackPriority=2,s.callbackNode=null,2}function kx(s,l){if(Cn!==0&&Cn!==5)return s.callbackNode=null,s.callbackPriority=0,null;var f=s.callbackNode;if(td()&&s.callbackNode!==f)return null;var d=nt;return d=Ui(s,s===Lt?d:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),d===0?null:(gx(s,d,l),Px(s,Ee()),s.callbackNode!=null&&s.callbackNode===f?kx.bind(null,s):null)}function Lx(s,l){if(td())return null;gx(s,l,!0)}function ZI(){u4(function(){(yt&6)!==0?Et(Wt,QI):Mx()})}function X1(){if(Ss===0){var s=Rl;s===0&&(s=Vi,Vi<<=1,(Vi&261888)===0&&(Vi=256)),Ss=s}return Ss}function jx(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:ml(""+s)}function Bx(s,l){var f=l.ownerDocument.createElement("input");return f.name=l.name,f.value=l.value,s.id&&f.setAttribute("form",s.id),l.parentNode.insertBefore(f,l),s=new FormData(s),f.parentNode.removeChild(f),s}function JI(s,l,f,d,y){if(l==="submit"&&f&&f.stateNode===y){var x=jx((y[Ln]||null).action),C=d.submitter;C&&(l=(l=C[Ln]||null)?jx(l.formAction):C.getAttribute("formAction"),l!==null&&(x=l,C=null));var B=new Zi("action","action",null,d,y);s.push({event:B,listeners:[{instance:null,listener:function(){if(d.defaultPrevented){if(Ss!==0){var $=C?Bx(y,C):new FormData(y);d1(f,{pending:!0,data:$,method:y.method,action:x},null,$)}}else typeof x=="function"&&(B.preventDefault(),$=C?Bx(y,C):new FormData(y),d1(f,{pending:!0,data:$,method:y.method,action:x},x,$))},currentTarget:y}]})}}for(var K1=0;K1<Rp.length;K1++){var Y1=Rp[K1],e4=Y1.toLowerCase(),t4=Y1[0].toUpperCase()+Y1.slice(1);wi(e4,"on"+t4)}wi(m2,"onAnimationEnd"),wi(g2,"onAnimationIteration"),wi(v2,"onAnimationStart"),wi("dblclick","onDoubleClick"),wi("focusin","onFocus"),wi("focusout","onBlur"),wi(vI,"onTransitionRun"),wi(yI,"onTransitionStart"),wi(_I,"onTransitionCancel"),wi(y2,"onTransitionEnd"),Ki("onMouseEnter",["mouseout","mouseover"]),Ki("onMouseLeave",["mouseout","mouseover"]),Ki("onPointerEnter",["pointerout","pointerover"]),Ki("onPointerLeave",["pointerout","pointerover"]),Xi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Xi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Xi("onBeforeInput",["compositionend","keypress","textInput","paste"]),Xi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Xi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Xi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Pu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),n4=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Pu));function Vx(s,l){l=(l&4)!==0;for(var f=0;f<s.length;f++){var d=s[f],y=d.event;d=d.listeners;e:{var x=void 0;if(l)for(var C=d.length-1;0<=C;C--){var B=d[C],$=B.instance,J=B.currentTarget;if(B=B.listener,$!==x&&y.isPropagationStopped())break e;x=B,y.currentTarget=J;try{x(y)}catch(oe){yh(oe)}y.currentTarget=null,x=$}else for(C=0;C<d.length;C++){if(B=d[C],$=B.instance,J=B.currentTarget,B=B.listener,$!==x&&y.isPropagationStopped())break e;x=B,y.currentTarget=J;try{x(y)}catch(oe){yh(oe)}y.currentTarget=null,x=$}}}}function tt(s,l){var f=l[ul];f===void 0&&(f=l[ul]=new Set);var d=s+"__bubble";f.has(d)||(Fx(l,s,2,!1),f.add(d))}function W1(s,l,f){var d=0;l&&(d|=4),Fx(f,s,d,l)}var id="_reactListening"+Math.random().toString(36).slice(2);function Q1(s){if(!s[id]){s[id]=!0,$c.forEach(function(f){f!=="selectionchange"&&(n4.has(f)||W1(f,!1,s),W1(f,!0,s))});var l=s.nodeType===9?s:s.ownerDocument;l===null||l[id]||(l[id]=!0,W1("selectionchange",!1,l))}}function Fx(s,l,f,d){switch(mE(l)){case 2:var y=R4;break;case 8:y=O4;break;default:y=hm}f=y.bind(null,l,f,s),y=void 0,!xo||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(y=!0),d?y!==void 0?s.addEventListener(l,f,{capture:!0,passive:y}):s.addEventListener(l,f,!0):y!==void 0?s.addEventListener(l,f,{passive:y}):s.addEventListener(l,f,!1)}function Z1(s,l,f,d,y){var x=d;if((l&1)===0&&(l&2)===0&&d!==null)e:for(;;){if(d===null)return;var C=d.tag;if(C===3||C===4){var B=d.stateNode.containerInfo;if(B===y)break;if(C===4)for(C=d.return;C!==null;){var $=C.tag;if(($===3||$===4)&&C.stateNode.containerInfo===y)return;C=C.return}for(;B!==null;){if(C=qi(B),C===null)return;if($=C.tag,$===5||$===6||$===26||$===27){d=x=C;continue e}B=B.parentNode}}d=d.return}ss(function(){var J=x,oe=Kr(f),fe=[];e:{var ee=_2.get(s);if(ee!==void 0){var re=Zi,be=s;switch(s){case"keypress":if(wo(f)===0)break e;case"keydown":case"keyup":re=mh;break;case"focusin":be="focus",re=bo;break;case"focusout":be="blur",re=bo;break;case"beforeblur":case"afterblur":re=bo;break;case"click":if(f.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":re=au;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":re=sh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":re=A;break;case m2:case g2:case v2:re=lh;break;case y2:re=U;break;case"scroll":case"scrollend":re=iu;break;case"wheel":re=ne;break;case"copy":case"cut":case"paste":re=ch;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":re=ba;break;case"toggle":case"beforetoggle":re=$e}var Le=(l&4)!==0,Mt=!Le&&(s==="scroll"||s==="scrollend"),Y=Le?ee!==null?ee+"Capture":null:ee;Le=[];for(var K=J,Z;K!==null;){var ue=K;if(Z=ue.stateNode,ue=ue.tag,ue!==5&&ue!==26&&ue!==27||Z===null||Y===null||(ue=yi(K,Y),ue!=null&&Le.push(ku(K,ue,Z))),Mt)break;K=K.return}0<Le.length&&(ee=new re(ee,be,null,f,oe),fe.push({event:ee,listeners:Le}))}}if((l&7)===0){e:{if(ee=s==="mouseover"||s==="pointerover",re=s==="mouseout"||s==="pointerout",ee&&f!==tu&&(be=f.relatedTarget||f.fromElement)&&(qi(be)||be[Hi]))break e;if((re||ee)&&(ee=oe.window===oe?oe:(ee=oe.ownerDocument)?ee.defaultView||ee.parentWindow:window,re?(be=f.relatedTarget||f.toElement,re=J,be=be?qi(be):null,be!==null&&(Mt=a(be),Le=be.tag,be!==Mt||Le!==5&&Le!==27&&Le!==6)&&(be=null)):(re=null,be=J),re!==be)){if(Le=au,ue="onMouseLeave",Y="onMouseEnter",K="mouse",(s==="pointerout"||s==="pointerover")&&(Le=ba,ue="onPointerLeave",Y="onPointerEnter",K="pointer"),Mt=re==null?ee:Mr(re),Z=be==null?ee:Mr(be),ee=new Le(ue,K+"leave",re,f,oe),ee.target=Mt,ee.relatedTarget=Z,ue=null,qi(oe)===J&&(Le=new Le(Y,K+"enter",be,f,oe),Le.target=Z,Le.relatedTarget=Mt,ue=Le),Mt=ue,re&&be)t:{for(Le=r4,Y=re,K=be,Z=0,ue=Y;ue;ue=Le(ue))Z++;ue=0;for(var Oe=K;Oe;Oe=Le(Oe))ue++;for(;0<Z-ue;)Y=Le(Y),Z--;for(;0<ue-Z;)K=Le(K),ue--;for(;Z--;){if(Y===K||K!==null&&Y===K.alternate){Le=Y;break t}Y=Le(Y),K=Le(K)}Le=null}else Le=null;re!==null&&Ux(fe,ee,re,Le,!1),be!==null&&Mt!==null&&Ux(fe,Mt,be,Le,!0)}}e:{if(ee=J?Mr(J):window,re=ee.nodeName&&ee.nodeName.toLowerCase(),re==="select"||re==="input"&&ee.type==="file")var dt=i2;else if(n2(ee))if(a2)dt=pI;else{dt=hI;var Ce=fI}else re=ee.nodeName,!re||re.toLowerCase()!=="input"||ee.type!=="checkbox"&&ee.type!=="radio"?J&&pl(J.elementType)&&(dt=i2):dt=dI;if(dt&&(dt=dt(s,J))){r2(fe,dt,f,oe);break e}Ce&&Ce(s,ee,J),s==="focusout"&&J&&ee.type==="number"&&J.memoizedProps.value!=null&&Zc(ee,"number",ee.value)}switch(Ce=J?Mr(J):window,s){case"focusin":(n2(Ce)||Ce.contentEditable==="true")&&(wl=Ce,Tp=J,uu=null);break;case"focusout":uu=Tp=wl=null;break;case"mousedown":Ip=!0;break;case"contextmenu":case"mouseup":case"dragend":Ip=!1,d2(fe,f,oe);break;case"selectionchange":if(gI)break;case"keydown":case"keyup":d2(fe,f,oe)}var Ye;if(vt)e:{switch(s){case"compositionstart":var rt="onCompositionStart";break e;case"compositionend":rt="onCompositionEnd";break e;case"compositionupdate":rt="onCompositionUpdate";break e}rt=void 0}else El?So(s,f)&&(rt="onCompositionEnd"):s==="keydown"&&f.keyCode===229&&(rt="onCompositionStart");rt&&(ta&&f.locale!=="ko"&&(El||rt!=="onCompositionStart"?rt==="onCompositionEnd"&&El&&(Ye=ru()):(Qi=oe,nu="value"in Qi?Qi.value:Qi.textContent,El=!0)),Ce=ad(J,rt),0<Ce.length&&(rt=new ea(rt,s,null,f,oe),fe.push({event:rt,listeners:Ce}),Ye?rt.data=Ye:(Ye=xl(f),Ye!==null&&(rt.data=Ye)))),(Ye=Wr?oI(s,f):lI(s,f))&&(rt=ad(J,"onBeforeInput"),0<rt.length&&(Ce=new ea("onBeforeInput","beforeinput",null,f,oe),fe.push({event:Ce,listeners:rt}),Ce.data=Ye)),JI(fe,s,J,f,oe)}Vx(fe,l)})}function ku(s,l,f){return{instance:s,listener:l,currentTarget:f}}function ad(s,l){for(var f=l+"Capture",d=[];s!==null;){var y=s,x=y.stateNode;if(y=y.tag,y!==5&&y!==26&&y!==27||x===null||(y=yi(s,f),y!=null&&d.unshift(ku(s,y,x)),y=yi(s,l),y!=null&&d.push(ku(s,y,x))),s.tag===3)return d;s=s.return}return[]}function r4(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function Ux(s,l,f,d,y){for(var x=l._reactName,C=[];f!==null&&f!==d;){var B=f,$=B.alternate,J=B.stateNode;if(B=B.tag,$!==null&&$===d)break;B!==5&&B!==26&&B!==27||J===null||($=J,y?(J=yi(f,x),J!=null&&C.unshift(ku(f,J,$))):y||(J=yi(f,x),J!=null&&C.push(ku(f,J,$)))),f=f.return}C.length!==0&&s.push({event:l,listeners:C})}var i4=/\r\n?/g,a4=/\u0000|\uFFFD/g;function zx(s){return(typeof s=="string"?s:""+s).replace(i4,`
`).replace(a4,"")}function Hx(s,l){return l=zx(l),zx(s)===l}function Dt(s,l,f,d,y,x){switch(f){case"children":typeof d=="string"?l==="body"||l==="textarea"&&d===""||Er(s,d):(typeof d=="number"||typeof d=="bigint")&&l!=="body"&&Er(s,""+d);break;case"className":Pr(s,"class",d);break;case"tabIndex":Pr(s,"tabindex",d);break;case"dir":case"role":case"viewBox":case"width":case"height":Pr(s,f,d);break;case"style":eu(s,d,x);break;case"data":if(l!=="object"){Pr(s,"data",d);break}case"src":case"href":if(d===""&&(l!=="a"||f!=="href")){s.removeAttribute(f);break}if(d==null||typeof d=="function"||typeof d=="symbol"||typeof d=="boolean"){s.removeAttribute(f);break}d=ml(""+d),s.setAttribute(f,d);break;case"action":case"formAction":if(typeof d=="function"){s.setAttribute(f,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof x=="function"&&(f==="formAction"?(l!=="input"&&Dt(s,l,"name",y.name,y,null),Dt(s,l,"formEncType",y.formEncType,y,null),Dt(s,l,"formMethod",y.formMethod,y,null),Dt(s,l,"formTarget",y.formTarget,y,null)):(Dt(s,l,"encType",y.encType,y,null),Dt(s,l,"method",y.method,y,null),Dt(s,l,"target",y.target,y,null)));if(d==null||typeof d=="symbol"||typeof d=="boolean"){s.removeAttribute(f);break}d=ml(""+d),s.setAttribute(f,d);break;case"onClick":d!=null&&(s.onclick=vi);break;case"onScroll":d!=null&&tt("scroll",s);break;case"onScrollEnd":d!=null&&tt("scrollend",s);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(r(61));if(f=d.__html,f!=null){if(y.children!=null)throw Error(r(60));s.innerHTML=f}}break;case"multiple":s.multiple=d&&typeof d!="function"&&typeof d!="symbol";break;case"muted":s.muted=d&&typeof d!="function"&&typeof d!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(d==null||typeof d=="function"||typeof d=="boolean"||typeof d=="symbol"){s.removeAttribute("xlink:href");break}f=ml(""+d),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",f);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":d!=null&&typeof d!="function"&&typeof d!="symbol"?s.setAttribute(f,""+d):s.removeAttribute(f);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":d&&typeof d!="function"&&typeof d!="symbol"?s.setAttribute(f,""):s.removeAttribute(f);break;case"capture":case"download":d===!0?s.setAttribute(f,""):d!==!1&&d!=null&&typeof d!="function"&&typeof d!="symbol"?s.setAttribute(f,d):s.removeAttribute(f);break;case"cols":case"rows":case"size":case"span":d!=null&&typeof d!="function"&&typeof d!="symbol"&&!isNaN(d)&&1<=d?s.setAttribute(f,d):s.removeAttribute(f);break;case"rowSpan":case"start":d==null||typeof d=="function"||typeof d=="symbol"||isNaN(d)?s.removeAttribute(f):s.setAttribute(f,d);break;case"popover":tt("beforetoggle",s),tt("toggle",s),hl(s,"popover",d);break;case"xlinkActuate":vn(s,"http://www.w3.org/1999/xlink","xlink:actuate",d);break;case"xlinkArcrole":vn(s,"http://www.w3.org/1999/xlink","xlink:arcrole",d);break;case"xlinkRole":vn(s,"http://www.w3.org/1999/xlink","xlink:role",d);break;case"xlinkShow":vn(s,"http://www.w3.org/1999/xlink","xlink:show",d);break;case"xlinkTitle":vn(s,"http://www.w3.org/1999/xlink","xlink:title",d);break;case"xlinkType":vn(s,"http://www.w3.org/1999/xlink","xlink:type",d);break;case"xmlBase":vn(s,"http://www.w3.org/XML/1998/namespace","xml:base",d);break;case"xmlLang":vn(s,"http://www.w3.org/XML/1998/namespace","xml:lang",d);break;case"xmlSpace":vn(s,"http://www.w3.org/XML/1998/namespace","xml:space",d);break;case"is":hl(s,"is",d);break;case"innerText":case"textContent":break;default:(!(2<f.length)||f[0]!=="o"&&f[0]!=="O"||f[1]!=="n"&&f[1]!=="N")&&(f=ah.get(f)||f,hl(s,f,d))}}function J1(s,l,f,d,y,x){switch(f){case"style":eu(s,d,x);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(r(61));if(f=d.__html,f!=null){if(y.children!=null)throw Error(r(60));s.innerHTML=f}}break;case"children":typeof d=="string"?Er(s,d):(typeof d=="number"||typeof d=="bigint")&&Er(s,""+d);break;case"onScroll":d!=null&&tt("scroll",s);break;case"onScrollEnd":d!=null&&tt("scrollend",s);break;case"onClick":d!=null&&(s.onclick=vi);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Xc.hasOwnProperty(f))e:{if(f[0]==="o"&&f[1]==="n"&&(y=f.endsWith("Capture"),l=f.slice(2,y?f.length-7:void 0),x=s[Ln]||null,x=x!=null?x[f]:null,typeof x=="function"&&s.removeEventListener(l,x,y),typeof d=="function")){typeof x!="function"&&x!==null&&(f in s?s[f]=null:s.hasAttribute(f)&&s.removeAttribute(f)),s.addEventListener(l,d,y);break e}f in s?s[f]=d:d===!0?s.setAttribute(f,""):hl(s,f,d)}}}function Jn(s,l,f){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":tt("error",s),tt("load",s);var d=!1,y=!1,x;for(x in f)if(f.hasOwnProperty(x)){var C=f[x];if(C!=null)switch(x){case"src":d=!0;break;case"srcSet":y=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,l));default:Dt(s,l,x,C,f,null)}}y&&Dt(s,l,"srcSet",f.srcSet,f,null),d&&Dt(s,l,"src",f.src,f,null);return;case"input":tt("invalid",s);var B=x=C=y=null,$=null,J=null;for(d in f)if(f.hasOwnProperty(d)){var oe=f[d];if(oe!=null)switch(d){case"name":y=oe;break;case"type":C=oe;break;case"checked":$=oe;break;case"defaultChecked":J=oe;break;case"value":x=oe;break;case"defaultValue":B=oe;break;case"children":case"dangerouslySetInnerHTML":if(oe!=null)throw Error(r(137,l));break;default:Dt(s,l,d,oe,f,null)}}nh(s,x,B,$,J,C,y,!1);return;case"select":tt("invalid",s),d=C=x=null;for(y in f)if(f.hasOwnProperty(y)&&(B=f[y],B!=null))switch(y){case"value":x=B;break;case"defaultValue":C=B;break;case"multiple":d=B;default:Dt(s,l,y,B,f,null)}l=x,f=C,s.multiple=!!d,l!=null?ns(s,!!d,l,!1):f!=null&&ns(s,!!d,f,!0);return;case"textarea":tt("invalid",s),x=y=d=null;for(C in f)if(f.hasOwnProperty(C)&&(B=f[C],B!=null))switch(C){case"value":d=B;break;case"defaultValue":y=B;break;case"children":x=B;break;case"dangerouslySetInnerHTML":if(B!=null)throw Error(r(91));break;default:Dt(s,l,C,B,f,null)}rs(s,d,y,x);return;case"option":for($ in f)if(f.hasOwnProperty($)&&(d=f[$],d!=null))switch($){case"selected":s.selected=d&&typeof d!="function"&&typeof d!="symbol";break;default:Dt(s,l,$,d,f,null)}return;case"dialog":tt("beforetoggle",s),tt("toggle",s),tt("cancel",s),tt("close",s);break;case"iframe":case"object":tt("load",s);break;case"video":case"audio":for(d=0;d<Pu.length;d++)tt(Pu[d],s);break;case"image":tt("error",s),tt("load",s);break;case"details":tt("toggle",s);break;case"embed":case"source":case"link":tt("error",s),tt("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(J in f)if(f.hasOwnProperty(J)&&(d=f[J],d!=null))switch(J){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,l));default:Dt(s,l,J,d,f,null)}return;default:if(pl(l)){for(oe in f)f.hasOwnProperty(oe)&&(d=f[oe],d!==void 0&&J1(s,l,oe,d,f,void 0));return}}for(B in f)f.hasOwnProperty(B)&&(d=f[B],d!=null&&Dt(s,l,B,d,f,null))}function s4(s,l,f,d){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var y=null,x=null,C=null,B=null,$=null,J=null,oe=null;for(re in f){var fe=f[re];if(f.hasOwnProperty(re)&&fe!=null)switch(re){case"checked":break;case"value":break;case"defaultValue":$=fe;default:d.hasOwnProperty(re)||Dt(s,l,re,null,d,fe)}}for(var ee in d){var re=d[ee];if(fe=f[ee],d.hasOwnProperty(ee)&&(re!=null||fe!=null))switch(ee){case"type":x=re;break;case"name":y=re;break;case"checked":J=re;break;case"defaultChecked":oe=re;break;case"value":C=re;break;case"defaultValue":B=re;break;case"children":case"dangerouslySetInnerHTML":if(re!=null)throw Error(r(137,l));break;default:re!==fe&&Dt(s,l,ee,re,d,fe)}}dl(s,C,B,$,J,oe,x,y);return;case"select":re=C=B=ee=null;for(x in f)if($=f[x],f.hasOwnProperty(x)&&$!=null)switch(x){case"value":break;case"multiple":re=$;default:d.hasOwnProperty(x)||Dt(s,l,x,null,d,$)}for(y in d)if(x=d[y],$=f[y],d.hasOwnProperty(y)&&(x!=null||$!=null))switch(y){case"value":ee=x;break;case"defaultValue":B=x;break;case"multiple":C=x;default:x!==$&&Dt(s,l,y,x,d,$)}l=B,f=C,d=re,ee!=null?ns(s,!!f,ee,!1):!!d!=!!f&&(l!=null?ns(s,!!f,l,!0):ns(s,!!f,f?[]:"",!1));return;case"textarea":re=ee=null;for(B in f)if(y=f[B],f.hasOwnProperty(B)&&y!=null&&!d.hasOwnProperty(B))switch(B){case"value":break;case"children":break;default:Dt(s,l,B,null,d,y)}for(C in d)if(y=d[C],x=f[C],d.hasOwnProperty(C)&&(y!=null||x!=null))switch(C){case"value":ee=y;break;case"defaultValue":re=y;break;case"children":break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(r(91));break;default:y!==x&&Dt(s,l,C,y,d,x)}rh(s,ee,re);return;case"option":for(var be in f)if(ee=f[be],f.hasOwnProperty(be)&&ee!=null&&!d.hasOwnProperty(be))switch(be){case"selected":s.selected=!1;break;default:Dt(s,l,be,null,d,ee)}for($ in d)if(ee=d[$],re=f[$],d.hasOwnProperty($)&&ee!==re&&(ee!=null||re!=null))switch($){case"selected":s.selected=ee&&typeof ee!="function"&&typeof ee!="symbol";break;default:Dt(s,l,$,ee,d,re)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Le in f)ee=f[Le],f.hasOwnProperty(Le)&&ee!=null&&!d.hasOwnProperty(Le)&&Dt(s,l,Le,null,d,ee);for(J in d)if(ee=d[J],re=f[J],d.hasOwnProperty(J)&&ee!==re&&(ee!=null||re!=null))switch(J){case"children":case"dangerouslySetInnerHTML":if(ee!=null)throw Error(r(137,l));break;default:Dt(s,l,J,ee,d,re)}return;default:if(pl(l)){for(var Mt in f)ee=f[Mt],f.hasOwnProperty(Mt)&&ee!==void 0&&!d.hasOwnProperty(Mt)&&J1(s,l,Mt,void 0,d,ee);for(oe in d)ee=d[oe],re=f[oe],!d.hasOwnProperty(oe)||ee===re||ee===void 0&&re===void 0||J1(s,l,oe,ee,d,re);return}}for(var Y in f)ee=f[Y],f.hasOwnProperty(Y)&&ee!=null&&!d.hasOwnProperty(Y)&&Dt(s,l,Y,null,d,ee);for(fe in d)ee=d[fe],re=f[fe],!d.hasOwnProperty(fe)||ee===re||ee==null&&re==null||Dt(s,l,fe,ee,d,re)}function Gx(s){switch(s){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function o4(){if(typeof performance.getEntriesByType=="function"){for(var s=0,l=0,f=performance.getEntriesByType("resource"),d=0;d<f.length;d++){var y=f[d],x=y.transferSize,C=y.initiatorType,B=y.duration;if(x&&B&&Gx(C)){for(C=0,B=y.responseEnd,d+=1;d<f.length;d++){var $=f[d],J=$.startTime;if(J>B)break;var oe=$.transferSize,fe=$.initiatorType;oe&&Gx(fe)&&($=$.responseEnd,C+=oe*($<B?1:(B-J)/($-J)))}if(--d,l+=8*(x+C)/(y.duration/1e3),s++,10<s)break}}if(0<s)return l/s/1e6}return navigator.connection&&(s=navigator.connection.downlink,typeof s=="number")?s:5}var em=null,tm=null;function sd(s){return s.nodeType===9?s:s.ownerDocument}function qx(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function $x(s,l){if(s===0)switch(l){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&l==="foreignObject"?0:s}function nm(s,l){return s==="textarea"||s==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.children=="bigint"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var rm=null;function l4(){var s=window.event;return s&&s.type==="popstate"?s===rm?!1:(rm=s,!0):(rm=null,!1)}var Xx=typeof setTimeout=="function"?setTimeout:void 0,c4=typeof clearTimeout=="function"?clearTimeout:void 0,Kx=typeof Promise=="function"?Promise:void 0,u4=typeof queueMicrotask=="function"?queueMicrotask:typeof Kx<"u"?function(s){return Kx.resolve(null).then(s).catch(f4)}:Xx;function f4(s){setTimeout(function(){throw s})}function Cs(s){return s==="head"}function Yx(s,l){var f=l,d=0;do{var y=f.nextSibling;if(s.removeChild(f),y&&y.nodeType===8)if(f=y.data,f==="/$"||f==="/&"){if(d===0){s.removeChild(y),Yl(l);return}d--}else if(f==="$"||f==="$?"||f==="$~"||f==="$!"||f==="&")d++;else if(f==="html")Lu(s.ownerDocument.documentElement);else if(f==="head"){f=s.ownerDocument.head,Lu(f);for(var x=f.firstChild;x;){var C=x.nextSibling,B=x.nodeName;x[Gi]||B==="SCRIPT"||B==="STYLE"||B==="LINK"&&x.rel.toLowerCase()==="stylesheet"||f.removeChild(x),x=C}}else f==="body"&&Lu(s.ownerDocument.body);f=y}while(f);Yl(l)}function Wx(s,l){var f=s;s=0;do{var d=f.nextSibling;if(f.nodeType===1?l?(f._stashedDisplay=f.style.display,f.style.display="none"):(f.style.display=f._stashedDisplay||"",f.getAttribute("style")===""&&f.removeAttribute("style")):f.nodeType===3&&(l?(f._stashedText=f.nodeValue,f.nodeValue=""):f.nodeValue=f._stashedText||""),d&&d.nodeType===8)if(f=d.data,f==="/$"){if(s===0)break;s--}else f!=="$"&&f!=="$?"&&f!=="$~"&&f!=="$!"||s++;f=d}while(f)}function im(s){var l=s.firstChild;for(l&&l.nodeType===10&&(l=l.nextSibling);l;){var f=l;switch(l=l.nextSibling,f.nodeName){case"HTML":case"HEAD":case"BODY":im(f),fl(f);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(f.rel.toLowerCase()==="stylesheet")continue}s.removeChild(f)}}function h4(s,l,f,d){for(;s.nodeType===1;){var y=f;if(s.nodeName.toLowerCase()!==l.toLowerCase()){if(!d&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(d){if(!s[Gi])switch(l){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(x=s.getAttribute("rel"),x==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(x!==y.rel||s.getAttribute("href")!==(y.href==null||y.href===""?null:y.href)||s.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin)||s.getAttribute("title")!==(y.title==null?null:y.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(x=s.getAttribute("src"),(x!==(y.src==null?null:y.src)||s.getAttribute("type")!==(y.type==null?null:y.type)||s.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin))&&x&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(l==="input"&&s.type==="hidden"){var x=y.name==null?null:""+y.name;if(y.type==="hidden"&&s.getAttribute("name")===x)return s}else return s;if(s=ri(s.nextSibling),s===null)break}return null}function d4(s,l,f){if(l==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!f||(s=ri(s.nextSibling),s===null))return null;return s}function Qx(s,l){for(;s.nodeType!==8;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!l||(s=ri(s.nextSibling),s===null))return null;return s}function am(s){return s.data==="$?"||s.data==="$~"}function sm(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState!=="loading"}function p4(s,l){var f=s.ownerDocument;if(s.data==="$~")s._reactRetry=l;else if(s.data!=="$?"||f.readyState!=="loading")l();else{var d=function(){l(),f.removeEventListener("DOMContentLoaded",d)};f.addEventListener("DOMContentLoaded",d),s._reactRetry=d}}function ri(s){for(;s!=null;s=s.nextSibling){var l=s.nodeType;if(l===1||l===3)break;if(l===8){if(l=s.data,l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"||l==="F!"||l==="F")break;if(l==="/$"||l==="/&")return null}}return s}var om=null;function Zx(s){s=s.nextSibling;for(var l=0;s;){if(s.nodeType===8){var f=s.data;if(f==="/$"||f==="/&"){if(l===0)return ri(s.nextSibling);l--}else f!=="$"&&f!=="$!"&&f!=="$?"&&f!=="$~"&&f!=="&"||l++}s=s.nextSibling}return null}function Jx(s){s=s.previousSibling;for(var l=0;s;){if(s.nodeType===8){var f=s.data;if(f==="$"||f==="$!"||f==="$?"||f==="$~"||f==="&"){if(l===0)return s;l--}else f!=="/$"&&f!=="/&"||l++}s=s.previousSibling}return null}function eE(s,l,f){switch(l=sd(f),s){case"html":if(s=l.documentElement,!s)throw Error(r(452));return s;case"head":if(s=l.head,!s)throw Error(r(453));return s;case"body":if(s=l.body,!s)throw Error(r(454));return s;default:throw Error(r(451))}}function Lu(s){for(var l=s.attributes;l.length;)s.removeAttributeNode(l[0]);fl(s)}var ii=new Map,tE=new Set;function od(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var Va=se.d;se.d={f:m4,r:g4,D:v4,C:y4,L:_4,m:x4,X:w4,S:E4,M:A4};function m4(){var s=Va.f(),l=Zh();return s||l}function g4(s){var l=Xr(s);l!==null&&l.tag===5&&l.type==="form"?y_(l):Va.r(s)}var $l=typeof document>"u"?null:document;function nE(s,l,f){var d=$l;if(d&&typeof l=="string"&&l){var y=xr(l);y='link[rel="'+s+'"][href="'+y+'"]',typeof f=="string"&&(y+='[crossorigin="'+f+'"]'),tE.has(y)||(tE.add(y),s={rel:s,crossOrigin:f,href:l},d.querySelector(y)===null&&(l=d.createElement("link"),Jn(l,"link",s),gn(l),d.head.appendChild(l)))}}function v4(s){Va.D(s),nE("dns-prefetch",s,null)}function y4(s,l){Va.C(s,l),nE("preconnect",s,l)}function _4(s,l,f){Va.L(s,l,f);var d=$l;if(d&&s&&l){var y='link[rel="preload"][as="'+xr(l)+'"]';l==="image"&&f&&f.imageSrcSet?(y+='[imagesrcset="'+xr(f.imageSrcSet)+'"]',typeof f.imageSizes=="string"&&(y+='[imagesizes="'+xr(f.imageSizes)+'"]')):y+='[href="'+xr(s)+'"]';var x=y;switch(l){case"style":x=Xl(s);break;case"script":x=Kl(s)}ii.has(x)||(s=g({rel:"preload",href:l==="image"&&f&&f.imageSrcSet?void 0:s,as:l},f),ii.set(x,s),d.querySelector(y)!==null||l==="style"&&d.querySelector(ju(x))||l==="script"&&d.querySelector(Bu(x))||(l=d.createElement("link"),Jn(l,"link",s),gn(l),d.head.appendChild(l)))}}function x4(s,l){Va.m(s,l);var f=$l;if(f&&s){var d=l&&typeof l.as=="string"?l.as:"script",y='link[rel="modulepreload"][as="'+xr(d)+'"][href="'+xr(s)+'"]',x=y;switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":x=Kl(s)}if(!ii.has(x)&&(s=g({rel:"modulepreload",href:s},l),ii.set(x,s),f.querySelector(y)===null)){switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(f.querySelector(Bu(x)))return}d=f.createElement("link"),Jn(d,"link",s),gn(d),f.head.appendChild(d)}}}function E4(s,l,f){Va.S(s,l,f);var d=$l;if(d&&s){var y=$i(d).hoistableStyles,x=Xl(s);l=l||"default";var C=y.get(x);if(!C){var B={loading:0,preload:null};if(C=d.querySelector(ju(x)))B.loading=5;else{s=g({rel:"stylesheet",href:s,"data-precedence":l},f),(f=ii.get(x))&&lm(s,f);var $=C=d.createElement("link");gn($),Jn($,"link",s),$._p=new Promise(function(J,oe){$.onload=J,$.onerror=oe}),$.addEventListener("load",function(){B.loading|=1}),$.addEventListener("error",function(){B.loading|=2}),B.loading|=4,ld(C,l,d)}C={type:"stylesheet",instance:C,count:1,state:B},y.set(x,C)}}}function w4(s,l){Va.X(s,l);var f=$l;if(f&&s){var d=$i(f).hoistableScripts,y=Kl(s),x=d.get(y);x||(x=f.querySelector(Bu(y)),x||(s=g({src:s,async:!0},l),(l=ii.get(y))&&cm(s,l),x=f.createElement("script"),gn(x),Jn(x,"link",s),f.head.appendChild(x)),x={type:"script",instance:x,count:1,state:null},d.set(y,x))}}function A4(s,l){Va.M(s,l);var f=$l;if(f&&s){var d=$i(f).hoistableScripts,y=Kl(s),x=d.get(y);x||(x=f.querySelector(Bu(y)),x||(s=g({src:s,async:!0,type:"module"},l),(l=ii.get(y))&&cm(s,l),x=f.createElement("script"),gn(x),Jn(x,"link",s),f.head.appendChild(x)),x={type:"script",instance:x,count:1,state:null},d.set(y,x))}}function rE(s,l,f,d){var y=(y=Ne.current)?od(y):null;if(!y)throw Error(r(446));switch(s){case"meta":case"title":return null;case"style":return typeof f.precedence=="string"&&typeof f.href=="string"?(l=Xl(f.href),f=$i(y).hoistableStyles,d=f.get(l),d||(d={type:"style",instance:null,count:0,state:null},f.set(l,d)),d):{type:"void",instance:null,count:0,state:null};case"link":if(f.rel==="stylesheet"&&typeof f.href=="string"&&typeof f.precedence=="string"){s=Xl(f.href);var x=$i(y).hoistableStyles,C=x.get(s);if(C||(y=y.ownerDocument||y,C={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},x.set(s,C),(x=y.querySelector(ju(s)))&&!x._p&&(C.instance=x,C.state.loading=5),ii.has(s)||(f={rel:"preload",as:"style",href:f.href,crossOrigin:f.crossOrigin,integrity:f.integrity,media:f.media,hrefLang:f.hrefLang,referrerPolicy:f.referrerPolicy},ii.set(s,f),x||b4(y,s,f,C.state))),l&&d===null)throw Error(r(528,""));return C}if(l&&d!==null)throw Error(r(529,""));return null;case"script":return l=f.async,f=f.src,typeof f=="string"&&l&&typeof l!="function"&&typeof l!="symbol"?(l=Kl(f),f=$i(y).hoistableScripts,d=f.get(l),d||(d={type:"script",instance:null,count:0,state:null},f.set(l,d)),d):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,s))}}function Xl(s){return'href="'+xr(s)+'"'}function ju(s){return'link[rel="stylesheet"]['+s+"]"}function iE(s){return g({},s,{"data-precedence":s.precedence,precedence:null})}function b4(s,l,f,d){s.querySelector('link[rel="preload"][as="style"]['+l+"]")?d.loading=1:(l=s.createElement("link"),d.preload=l,l.addEventListener("load",function(){return d.loading|=1}),l.addEventListener("error",function(){return d.loading|=2}),Jn(l,"link",f),gn(l),s.head.appendChild(l))}function Kl(s){return'[src="'+xr(s)+'"]'}function Bu(s){return"script[async]"+s}function aE(s,l,f){if(l.count++,l.instance===null)switch(l.type){case"style":var d=s.querySelector('style[data-href~="'+xr(f.href)+'"]');if(d)return l.instance=d,gn(d),d;var y=g({},f,{"data-href":f.href,"data-precedence":f.precedence,href:null,precedence:null});return d=(s.ownerDocument||s).createElement("style"),gn(d),Jn(d,"style",y),ld(d,f.precedence,s),l.instance=d;case"stylesheet":y=Xl(f.href);var x=s.querySelector(ju(y));if(x)return l.state.loading|=4,l.instance=x,gn(x),x;d=iE(f),(y=ii.get(y))&&lm(d,y),x=(s.ownerDocument||s).createElement("link"),gn(x);var C=x;return C._p=new Promise(function(B,$){C.onload=B,C.onerror=$}),Jn(x,"link",d),l.state.loading|=4,ld(x,f.precedence,s),l.instance=x;case"script":return x=Kl(f.src),(y=s.querySelector(Bu(x)))?(l.instance=y,gn(y),y):(d=f,(y=ii.get(x))&&(d=g({},f),cm(d,y)),s=s.ownerDocument||s,y=s.createElement("script"),gn(y),Jn(y,"link",d),s.head.appendChild(y),l.instance=y);case"void":return null;default:throw Error(r(443,l.type))}else l.type==="stylesheet"&&(l.state.loading&4)===0&&(d=l.instance,l.state.loading|=4,ld(d,f.precedence,s));return l.instance}function ld(s,l,f){for(var d=f.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),y=d.length?d[d.length-1]:null,x=y,C=0;C<d.length;C++){var B=d[C];if(B.dataset.precedence===l)x=B;else if(x!==y)break}x?x.parentNode.insertBefore(s,x.nextSibling):(l=f.nodeType===9?f.head:f,l.insertBefore(s,l.firstChild))}function lm(s,l){s.crossOrigin==null&&(s.crossOrigin=l.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=l.referrerPolicy),s.title==null&&(s.title=l.title)}function cm(s,l){s.crossOrigin==null&&(s.crossOrigin=l.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=l.referrerPolicy),s.integrity==null&&(s.integrity=l.integrity)}var cd=null;function sE(s,l,f){if(cd===null){var d=new Map,y=cd=new Map;y.set(f,d)}else y=cd,d=y.get(f),d||(d=new Map,y.set(f,d));if(d.has(s))return d;for(d.set(s,null),f=f.getElementsByTagName(s),y=0;y<f.length;y++){var x=f[y];if(!(x[Gi]||x[mn]||s==="link"&&x.getAttribute("rel")==="stylesheet")&&x.namespaceURI!=="http://www.w3.org/2000/svg"){var C=x.getAttribute(l)||"";C=s+C;var B=d.get(C);B?B.push(x):d.set(C,[x])}}return d}function oE(s,l,f){s=s.ownerDocument||s,s.head.insertBefore(f,l==="title"?s.querySelector("head > title"):null)}function S4(s,l,f){if(f===1||l.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof l.precedence!="string"||typeof l.href!="string"||l.href==="")break;return!0;case"link":if(typeof l.rel!="string"||typeof l.href!="string"||l.href===""||l.onLoad||l.onError)break;switch(l.rel){case"stylesheet":return s=l.disabled,typeof l.precedence=="string"&&s==null;default:return!0}case"script":if(l.async&&typeof l.async!="function"&&typeof l.async!="symbol"&&!l.onLoad&&!l.onError&&l.src&&typeof l.src=="string")return!0}return!1}function lE(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}function C4(s,l,f,d){if(f.type==="stylesheet"&&(typeof d.media!="string"||matchMedia(d.media).matches!==!1)&&(f.state.loading&4)===0){if(f.instance===null){var y=Xl(d.href),x=l.querySelector(ju(y));if(x){l=x._p,l!==null&&typeof l=="object"&&typeof l.then=="function"&&(s.count++,s=ud.bind(s),l.then(s,s)),f.state.loading|=4,f.instance=x,gn(x);return}x=l.ownerDocument||l,d=iE(d),(y=ii.get(y))&&lm(d,y),x=x.createElement("link"),gn(x);var C=x;C._p=new Promise(function(B,$){C.onload=B,C.onerror=$}),Jn(x,"link",d),f.instance=x}s.stylesheets===null&&(s.stylesheets=new Map),s.stylesheets.set(f,l),(l=f.state.preload)&&(f.state.loading&3)===0&&(s.count++,f=ud.bind(s),l.addEventListener("load",f),l.addEventListener("error",f))}}var um=0;function T4(s,l){return s.stylesheets&&s.count===0&&hd(s,s.stylesheets),0<s.count||0<s.imgCount?function(f){var d=setTimeout(function(){if(s.stylesheets&&hd(s,s.stylesheets),s.unsuspend){var x=s.unsuspend;s.unsuspend=null,x()}},6e4+l);0<s.imgBytes&&um===0&&(um=62500*o4());var y=setTimeout(function(){if(s.waitingForImages=!1,s.count===0&&(s.stylesheets&&hd(s,s.stylesheets),s.unsuspend)){var x=s.unsuspend;s.unsuspend=null,x()}},(s.imgBytes>um?50:800)+l);return s.unsuspend=f,function(){s.unsuspend=null,clearTimeout(d),clearTimeout(y)}}:null}function ud(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)hd(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var fd=null;function hd(s,l){s.stylesheets=null,s.unsuspend!==null&&(s.count++,fd=new Map,l.forEach(I4,s),fd=null,ud.call(s))}function I4(s,l){if(!(l.state.loading&4)){var f=fd.get(s);if(f)var d=f.get(null);else{f=new Map,fd.set(s,f);for(var y=s.querySelectorAll("link[data-precedence],style[data-precedence]"),x=0;x<y.length;x++){var C=y[x];(C.nodeName==="LINK"||C.getAttribute("media")!=="not all")&&(f.set(C.dataset.precedence,C),d=C)}d&&f.set(null,d)}y=l.instance,C=y.getAttribute("data-precedence"),x=f.get(C)||d,x===d&&f.set(null,y),f.set(C,y),this.count++,d=ud.bind(this),y.addEventListener("load",d),y.addEventListener("error",d),x?x.parentNode.insertBefore(y,x.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(y,s.firstChild)),l.state.loading|=4}}var Vu={$$typeof:j,Provider:null,Consumer:null,_currentValue:he,_currentValue2:he,_threadCount:0};function N4(s,l,f,d,y,x,C,B,$){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=zi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zi(0),this.hiddenUpdates=zi(null),this.identifierPrefix=d,this.onUncaughtError=y,this.onCaughtError=x,this.onRecoverableError=C,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=$,this.incompleteTransitions=new Map}function cE(s,l,f,d,y,x,C,B,$,J,oe,fe){return s=new N4(s,l,f,C,$,J,oe,fe,B),l=1,x===!0&&(l|=24),x=Lr(3,null,null,l),s.current=x,x.stateNode=s,l=Hp(),l.refCount++,s.pooledCache=l,l.refCount++,x.memoizedState={element:d,isDehydrated:f,cache:l},Xp(x),s}function uE(s){return s?(s=Sl,s):Sl}function fE(s,l,f,d,y,x){y=uE(y),d.context===null?d.context=y:d.pendingContext=y,d=ms(l),d.payload={element:f},x=x===void 0?null:x,x!==null&&(d.callback=x),f=gs(s,d,l),f!==null&&(Cr(f,s,l),vu(f,s,l))}function hE(s,l){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var f=s.retryLane;s.retryLane=f!==0&&f<l?f:l}}function fm(s,l){hE(s,l),(s=s.alternate)&&hE(s,l)}function dE(s){if(s.tag===13||s.tag===31){var l=Io(s,67108864);l!==null&&Cr(l,s,67108864),fm(s,67108864)}}function pE(s){if(s.tag===13||s.tag===31){var l=Ur();l=go(l);var f=Io(s,l);f!==null&&Cr(f,s,l),fm(s,l)}}var dd=!0;function R4(s,l,f,d){var y=F.T;F.T=null;var x=se.p;try{se.p=2,hm(s,l,f,d)}finally{se.p=x,F.T=y}}function O4(s,l,f,d){var y=F.T;F.T=null;var x=se.p;try{se.p=8,hm(s,l,f,d)}finally{se.p=x,F.T=y}}function hm(s,l,f,d){if(dd){var y=dm(d);if(y===null)Z1(s,l,d,pd,f),gE(s,d);else if(M4(y,s,l,f,d))d.stopPropagation();else if(gE(s,d),l&4&&-1<D4.indexOf(s)){for(;y!==null;){var x=Xr(y);if(x!==null)switch(x.tag){case 3:if(x=x.stateNode,x.current.memoizedState.isDehydrated){var C=Fi(x.pendingLanes);if(C!==0){var B=x;for(B.pendingLanes|=2,B.entangledLanes|=2;C;){var $=1<<31-on(C);B.entanglements[1]|=$,C&=~$}aa(x),(yt&6)===0&&(Wh=Ee()+500,Mu(0))}}break;case 31:case 13:B=Io(x,2),B!==null&&Cr(B,x,2),Zh(),fm(x,2)}if(x=dm(d),x===null&&Z1(s,l,d,pd,f),x===y)break;y=x}y!==null&&d.stopPropagation()}else Z1(s,l,d,null,f)}}function dm(s){return s=Kr(s),pm(s)}var pd=null;function pm(s){if(pd=null,s=qi(s),s!==null){var l=a(s);if(l===null)s=null;else{var f=l.tag;if(f===13){if(s=o(l),s!==null)return s;s=null}else if(f===31){if(s=c(l),s!==null)return s;s=null}else if(f===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;s=null}else l!==s&&(s=null)}}return pd=s,null}function mE(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ke()){case Wt:return 2;case dr:return 8;case Xn:case di:return 32;case qe:return 268435456;default:return 32}default:return 32}}var mm=!1,Ts=null,Is=null,Ns=null,Fu=new Map,Uu=new Map,Rs=[],D4="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function gE(s,l){switch(s){case"focusin":case"focusout":Ts=null;break;case"dragenter":case"dragleave":Is=null;break;case"mouseover":case"mouseout":Ns=null;break;case"pointerover":case"pointerout":Fu.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":Uu.delete(l.pointerId)}}function zu(s,l,f,d,y,x){return s===null||s.nativeEvent!==x?(s={blockedOn:l,domEventName:f,eventSystemFlags:d,nativeEvent:x,targetContainers:[y]},l!==null&&(l=Xr(l),l!==null&&dE(l)),s):(s.eventSystemFlags|=d,l=s.targetContainers,y!==null&&l.indexOf(y)===-1&&l.push(y),s)}function M4(s,l,f,d,y){switch(l){case"focusin":return Ts=zu(Ts,s,l,f,d,y),!0;case"dragenter":return Is=zu(Is,s,l,f,d,y),!0;case"mouseover":return Ns=zu(Ns,s,l,f,d,y),!0;case"pointerover":var x=y.pointerId;return Fu.set(x,zu(Fu.get(x)||null,s,l,f,d,y)),!0;case"gotpointercapture":return x=y.pointerId,Uu.set(x,zu(Uu.get(x)||null,s,l,f,d,y)),!0}return!1}function vE(s){var l=qi(s.target);if(l!==null){var f=a(l);if(f!==null){if(l=f.tag,l===13){if(l=o(f),l!==null){s.blockedOn=l,mi(s.priority,function(){pE(f)});return}}else if(l===31){if(l=c(f),l!==null){s.blockedOn=l,mi(s.priority,function(){pE(f)});return}}else if(l===3&&f.stateNode.current.memoizedState.isDehydrated){s.blockedOn=f.tag===3?f.stateNode.containerInfo:null;return}}}s.blockedOn=null}function md(s){if(s.blockedOn!==null)return!1;for(var l=s.targetContainers;0<l.length;){var f=dm(s.nativeEvent);if(f===null){f=s.nativeEvent;var d=new f.constructor(f.type,f);tu=d,f.target.dispatchEvent(d),tu=null}else return l=Xr(f),l!==null&&dE(l),s.blockedOn=f,!1;l.shift()}return!0}function yE(s,l,f){md(s)&&f.delete(l)}function P4(){mm=!1,Ts!==null&&md(Ts)&&(Ts=null),Is!==null&&md(Is)&&(Is=null),Ns!==null&&md(Ns)&&(Ns=null),Fu.forEach(yE),Uu.forEach(yE)}function gd(s,l){s.blockedOn===l&&(s.blockedOn=null,mm||(mm=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,P4)))}var vd=null;function _E(s){vd!==s&&(vd=s,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){vd===s&&(vd=null);for(var l=0;l<s.length;l+=3){var f=s[l],d=s[l+1],y=s[l+2];if(typeof d!="function"){if(pm(d||f)===null)continue;break}var x=Xr(f);x!==null&&(s.splice(l,3),l-=3,d1(x,{pending:!0,data:y,method:f.method,action:d},d,y))}}))}function Yl(s){function l($){return gd($,s)}Ts!==null&&gd(Ts,s),Is!==null&&gd(Is,s),Ns!==null&&gd(Ns,s),Fu.forEach(l),Uu.forEach(l);for(var f=0;f<Rs.length;f++){var d=Rs[f];d.blockedOn===s&&(d.blockedOn=null)}for(;0<Rs.length&&(f=Rs[0],f.blockedOn===null);)vE(f),f.blockedOn===null&&Rs.shift();if(f=(s.ownerDocument||s).$$reactFormReplay,f!=null)for(d=0;d<f.length;d+=3){var y=f[d],x=f[d+1],C=y[Ln]||null;if(typeof x=="function")C||_E(f);else if(C){var B=null;if(x&&x.hasAttribute("formAction")){if(y=x,C=x[Ln]||null)B=C.formAction;else if(pm(y)!==null)continue}else B=C.action;typeof B=="function"?f[d+1]=B:(f.splice(d,3),d-=3),_E(f)}}}function xE(){function s(x){x.canIntercept&&x.info==="react-transition"&&x.intercept({handler:function(){return new Promise(function(C){return y=C})},focusReset:"manual",scroll:"manual"})}function l(){y!==null&&(y(),y=null),d||setTimeout(f,20)}function f(){if(!d&&!navigation.transition){var x=navigation.currentEntry;x&&x.url!=null&&navigation.navigate(x.url,{state:x.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var d=!1,y=null;return navigation.addEventListener("navigate",s),navigation.addEventListener("navigatesuccess",l),navigation.addEventListener("navigateerror",l),setTimeout(f,100),function(){d=!0,navigation.removeEventListener("navigate",s),navigation.removeEventListener("navigatesuccess",l),navigation.removeEventListener("navigateerror",l),y!==null&&(y(),y=null)}}}function gm(s){this._internalRoot=s}yd.prototype.render=gm.prototype.render=function(s){var l=this._internalRoot;if(l===null)throw Error(r(409));var f=l.current,d=Ur();fE(f,d,s,l,null,null)},yd.prototype.unmount=gm.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var l=s.containerInfo;fE(s.current,2,null,s,null,null),Zh(),l[Hi]=null}};function yd(s){this._internalRoot=s}yd.prototype.unstable_scheduleHydration=function(s){if(s){var l=Zf();s={blockedOn:null,target:s,priority:l};for(var f=0;f<Rs.length&&l!==0&&l<Rs[f].priority;f++);Rs.splice(f,0,s),f===0&&vE(s)}};var EE=e.version;if(EE!=="19.2.0")throw Error(r(527,EE,"19.2.0"));se.findDOMNode=function(s){var l=s._reactInternals;if(l===void 0)throw typeof s.render=="function"?Error(r(188)):(s=Object.keys(s).join(","),Error(r(268,s)));return s=h(l),s=s!==null?p(s):null,s=s===null?null:s.stateNode,s};var k4={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:F,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var _d=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!_d.isDisabled&&_d.supportsFiber)try{Nt=_d.inject(k4),Qt=_d}catch{}}return Gu.createRoot=function(s,l){if(!i(s))throw Error(r(299));var f=!1,d="",y=I_,x=N_,C=R_;return l!=null&&(l.unstable_strictMode===!0&&(f=!0),l.identifierPrefix!==void 0&&(d=l.identifierPrefix),l.onUncaughtError!==void 0&&(y=l.onUncaughtError),l.onCaughtError!==void 0&&(x=l.onCaughtError),l.onRecoverableError!==void 0&&(C=l.onRecoverableError)),l=cE(s,1,!1,null,null,f,d,null,y,x,C,xE),s[Hi]=l.current,Q1(s),new gm(l)},Gu.hydrateRoot=function(s,l,f){if(!i(s))throw Error(r(299));var d=!1,y="",x=I_,C=N_,B=R_,$=null;return f!=null&&(f.unstable_strictMode===!0&&(d=!0),f.identifierPrefix!==void 0&&(y=f.identifierPrefix),f.onUncaughtError!==void 0&&(x=f.onUncaughtError),f.onCaughtError!==void 0&&(C=f.onCaughtError),f.onRecoverableError!==void 0&&(B=f.onRecoverableError),f.formState!==void 0&&($=f.formState)),l=cE(s,1,!0,l,f??null,d,y,$,x,C,B,xE),l.context=uE(null),f=l.current,d=Ur(),d=go(d),y=ms(d),y.callback=null,gs(f,y,d),f=d,l.current.lanes=f,po(l,f),aa(l),s[Hi]=l.current,Q1(s),new yd(l)},Gu.version="19.2.0",Gu}var OE;function $4(){if(OE)return _m.exports;OE=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),_m.exports=q4(),_m.exports}var X4=$4();/**
 * react-router v7.9.4
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var DE="popstate";function K4(n={}){function e(r,i){let{pathname:a,search:o,hash:c}=r.location;return wg("",{pathname:a,search:o,hash:c},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function t(r,i){return typeof i=="string"?i:mf(i)}return W4(e,t,null,n)}function Yt(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function fi(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Y4(){return Math.random().toString(36).substring(2,10)}function ME(n,e){return{usr:n.state,key:n.key,idx:e}}function wg(n,e,t=null,r){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?Ic(e):e,state:t,key:e&&e.key||r||Y4()}}function mf({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function Ic(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substring(r),n=n.substring(0,r)),n&&(e.pathname=n)}return e}function W4(n,e,t,r={}){let{window:i=document.defaultView,v5Compat:a=!1}=r,o=i.history,c="POP",u=null,h=p();h==null&&(h=0,o.replaceState({...o.state,idx:h},""));function p(){return(o.state||{idx:null}).idx}function g(){c="POP";let D=p(),T=D==null?null:D-h;h=D,u&&u({action:c,location:S.location,delta:T})}function _(D,T){c="PUSH";let O=wg(S.location,D,T);h=p()+1;let j=ME(O,h),z=S.createHref(O);try{o.pushState(j,"",z)}catch(H){if(H instanceof DOMException&&H.name==="DataCloneError")throw H;i.location.assign(z)}a&&u&&u({action:c,location:S.location,delta:1})}function E(D,T){c="REPLACE";let O=wg(S.location,D,T);h=p();let j=ME(O,h),z=S.createHref(O);o.replaceState(j,"",z),a&&u&&u({action:c,location:S.location,delta:0})}function w(D){return Q4(D)}let S={get action(){return c},get location(){return n(i,o)},listen(D){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(DE,g),u=D,()=>{i.removeEventListener(DE,g),u=null}},createHref(D){return e(i,D)},createURL:w,encodeLocation(D){let T=w(D);return{pathname:T.pathname,search:T.search,hash:T.hash}},push:_,replace:E,go(D){return o.go(D)}};return S}function Q4(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),Yt(t,"No window.location.(origin|href) available to create URL");let r=typeof n=="string"?n:mf(n);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=t+r),new URL(r,t)}function aS(n,e,t="/"){return Z4(n,e,t,!1)}function Z4(n,e,t,r){let i=typeof e=="string"?Ic(e):e,a=Xa(i.pathname||"/",t);if(a==null)return null;let o=sS(n);J4(o);let c=null;for(let u=0;c==null&&u<o.length;++u){let h=uN(a);c=lN(o[u],h,r)}return c}function sS(n,e=[],t=[],r="",i=!1){let a=(o,c,u=i,h)=>{let p={relativePath:h===void 0?o.path||"":h,caseSensitive:o.caseSensitive===!0,childrenIndex:c,route:o};if(p.relativePath.startsWith("/")){if(!p.relativePath.startsWith(r)&&u)return;Yt(p.relativePath.startsWith(r),`Absolute route path "${p.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),p.relativePath=p.relativePath.slice(r.length)}let g=qa([r,p.relativePath]),_=t.concat(p);o.children&&o.children.length>0&&(Yt(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${g}".`),sS(o.children,e,_,g,u)),!(o.path==null&&!o.index)&&e.push({path:g,score:sN(g,o.index),routesMeta:_})};return n.forEach((o,c)=>{if(o.path===""||!o.path?.includes("?"))a(o,c);else for(let u of oS(o.path))a(o,c,!0,u)}),e}function oS(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,i=t.endsWith("?"),a=t.replace(/\?$/,"");if(r.length===0)return i?[a,""]:[a];let o=oS(r.join("/")),c=[];return c.push(...o.map(u=>u===""?a:[a,u].join("/"))),i&&c.push(...o),c.map(u=>n.startsWith("/")&&u===""?"/":u)}function J4(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:oN(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}var eN=/^:[\w-]+$/,tN=3,nN=2,rN=1,iN=10,aN=-2,PE=n=>n==="*";function sN(n,e){let t=n.split("/"),r=t.length;return t.some(PE)&&(r+=aN),e&&(r+=nN),t.filter(i=>!PE(i)).reduce((i,a)=>i+(eN.test(a)?tN:a===""?rN:iN),r)}function oN(n,e){return n.length===e.length&&n.slice(0,-1).every((r,i)=>r===e[i])?n[n.length-1]-e[e.length-1]:0}function lN(n,e,t=!1){let{routesMeta:r}=n,i={},a="/",o=[];for(let c=0;c<r.length;++c){let u=r[c],h=c===r.length-1,p=a==="/"?e:e.slice(a.length)||"/",g=Zd({path:u.relativePath,caseSensitive:u.caseSensitive,end:h},p),_=u.route;if(!g&&h&&t&&!r[r.length-1].route.index&&(g=Zd({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},p)),!g)return null;Object.assign(i,g.params),o.push({params:i,pathname:qa([a,g.pathname]),pathnameBase:pN(qa([a,g.pathnameBase])),route:_}),g.pathnameBase!=="/"&&(a=qa([a,g.pathnameBase]))}return o}function Zd(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=cN(n.path,n.caseSensitive,n.end),i=e.match(t);if(!i)return null;let a=i[0],o=a.replace(/(.)\/+$/,"$1"),c=i.slice(1);return{params:r.reduce((h,{paramName:p,isOptional:g},_)=>{if(p==="*"){let w=c[_]||"";o=a.slice(0,a.length-w.length).replace(/(.)\/+$/,"$1")}const E=c[_];return g&&!E?h[p]=void 0:h[p]=(E||"").replace(/%2F/g,"/"),h},{}),pathname:a,pathnameBase:o,pattern:n}}function cN(n,e=!1,t=!0){fi(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let r=[],i="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,c,u)=>(r.push({paramName:c,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return n.endsWith("*")?(r.push({paramName:"*"}),i+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?i+="\\/*$":n!==""&&n!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function uN(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return fi(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function Xa(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}function fN(n,e="/"){let{pathname:t,search:r="",hash:i=""}=typeof n=="string"?Ic(n):n;return{pathname:t?t.startsWith("/")?t:hN(t,e):e,search:mN(r),hash:gN(i)}}function hN(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(i=>{i===".."?t.length>1&&t.pop():i!=="."&&t.push(i)}),t.length>1?t.join("/"):"/"}function Am(n,e,t,r){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function dN(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function Sv(n){let e=dN(n);return e.map((t,r)=>r===e.length-1?t.pathname:t.pathnameBase)}function Cv(n,e,t,r=!1){let i;typeof n=="string"?i=Ic(n):(i={...n},Yt(!i.pathname||!i.pathname.includes("?"),Am("?","pathname","search",i)),Yt(!i.pathname||!i.pathname.includes("#"),Am("#","pathname","hash",i)),Yt(!i.search||!i.search.includes("#"),Am("#","search","hash",i)));let a=n===""||i.pathname==="",o=a?"/":i.pathname,c;if(o==null)c=t;else{let g=e.length-1;if(!r&&o.startsWith("..")){let _=o.split("/");for(;_[0]==="..";)_.shift(),g-=1;i.pathname=_.join("/")}c=g>=0?e[g]:"/"}let u=fN(i,c),h=o&&o!=="/"&&o.endsWith("/"),p=(a||o===".")&&t.endsWith("/");return!u.pathname.endsWith("/")&&(h||p)&&(u.pathname+="/"),u}var qa=n=>n.join("/").replace(/\/\/+/g,"/"),pN=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),mN=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,gN=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function vN(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}var lS=["POST","PUT","PATCH","DELETE"];new Set(lS);var yN=["GET",...lS];new Set(yN);var Nc=P.createContext(null);Nc.displayName="DataRouter";var L0=P.createContext(null);L0.displayName="DataRouterState";P.createContext(!1);var cS=P.createContext({isTransitioning:!1});cS.displayName="ViewTransition";var _N=P.createContext(new Map);_N.displayName="Fetchers";var xN=P.createContext(null);xN.displayName="Await";var Li=P.createContext(null);Li.displayName="Navigation";var Rf=P.createContext(null);Rf.displayName="Location";var ji=P.createContext({outlet:null,matches:[],isDataRoute:!1});ji.displayName="Route";var Tv=P.createContext(null);Tv.displayName="RouteError";function EN(n,{relative:e}={}){Yt(Rc(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:r}=P.useContext(Li),{hash:i,pathname:a,search:o}=Of(n,{relative:e}),c=a;return t!=="/"&&(c=a==="/"?t:qa([t,a])),r.createHref({pathname:c,search:o,hash:i})}function Rc(){return P.useContext(Rf)!=null}function Bi(){return Yt(Rc(),"useLocation() may be used only in the context of a <Router> component."),P.useContext(Rf).location}var uS="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function fS(n){P.useContext(Li).static||P.useLayoutEffect(n)}function nl(){let{isDataRoute:n}=P.useContext(ji);return n?kN():wN()}function wN(){Yt(Rc(),"useNavigate() may be used only in the context of a <Router> component.");let n=P.useContext(Nc),{basename:e,navigator:t}=P.useContext(Li),{matches:r}=P.useContext(ji),{pathname:i}=Bi(),a=JSON.stringify(Sv(r)),o=P.useRef(!1);return fS(()=>{o.current=!0}),P.useCallback((u,h={})=>{if(fi(o.current,uS),!o.current)return;if(typeof u=="number"){t.go(u);return}let p=Cv(u,JSON.parse(a),i,h.relative==="path");n==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:qa([e,p.pathname])),(h.replace?t.replace:t.push)(p,h.state,h)},[e,t,a,i,n])}P.createContext(null);function AN(){let{matches:n}=P.useContext(ji),e=n[n.length-1];return e?e.params:{}}function Of(n,{relative:e}={}){let{matches:t}=P.useContext(ji),{pathname:r}=Bi(),i=JSON.stringify(Sv(t));return P.useMemo(()=>Cv(n,JSON.parse(i),r,e==="path"),[n,i,r,e])}function bN(n,e){return hS(n,e)}function hS(n,e,t,r,i){Yt(Rc(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=P.useContext(Li),{matches:o}=P.useContext(ji),c=o[o.length-1],u=c?c.params:{},h=c?c.pathname:"/",p=c?c.pathnameBase:"/",g=c&&c.route;{let O=g&&g.path||"";dS(h,!g||O.endsWith("*")||O.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${h}" (under <Route path="${O}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${O}"> to <Route path="${O==="/"?"*":`${O}/*`}">.`)}let _=Bi(),E;if(e){let O=typeof e=="string"?Ic(e):e;Yt(p==="/"||O.pathname?.startsWith(p),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${p}" but pathname "${O.pathname}" was given in the \`location\` prop.`),E=O}else E=_;let w=E.pathname||"/",S=w;if(p!=="/"){let O=p.replace(/^\//,"").split("/");S="/"+w.replace(/^\//,"").split("/").slice(O.length).join("/")}let D=aS(n,{pathname:S});fi(g||D!=null,`No routes matched location "${E.pathname}${E.search}${E.hash}" `),fi(D==null||D[D.length-1].route.element!==void 0||D[D.length-1].route.Component!==void 0||D[D.length-1].route.lazy!==void 0,`Matched leaf route at location "${E.pathname}${E.search}${E.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let T=NN(D&&D.map(O=>Object.assign({},O,{params:Object.assign({},u,O.params),pathname:qa([p,a.encodeLocation?a.encodeLocation(O.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:O.pathname]),pathnameBase:O.pathnameBase==="/"?p:qa([p,a.encodeLocation?a.encodeLocation(O.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:O.pathnameBase])})),o,t,r,i);return e&&T?P.createElement(Rf.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...E},navigationType:"POP"}},T):T}function SN(){let n=PN(),e=vN(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},a={padding:"2px 4px",backgroundColor:r},o=null;return console.error("Error handled by React Router default ErrorBoundary:",n),o=P.createElement(P.Fragment,null,P.createElement("p",null,"💿 Hey developer 👋"),P.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",P.createElement("code",{style:a},"ErrorBoundary")," or"," ",P.createElement("code",{style:a},"errorElement")," prop on your route.")),P.createElement(P.Fragment,null,P.createElement("h2",null,"Unexpected Application Error!"),P.createElement("h3",{style:{fontStyle:"italic"}},e),t?P.createElement("pre",{style:i},t):null,o)}var CN=P.createElement(SN,null),TN=class extends P.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){this.props.unstable_onError?this.props.unstable_onError(n,e):console.error("React Router caught the following error during render",n)}render(){return this.state.error!==void 0?P.createElement(ji.Provider,{value:this.props.routeContext},P.createElement(Tv.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function IN({routeContext:n,match:e,children:t}){let r=P.useContext(Nc);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),P.createElement(ji.Provider,{value:n},t)}function NN(n,e=[],t=null,r=null,i=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let a=n,o=t?.errors;if(o!=null){let h=a.findIndex(p=>p.route.id&&o?.[p.route.id]!==void 0);Yt(h>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),a=a.slice(0,Math.min(a.length,h+1))}let c=!1,u=-1;if(t)for(let h=0;h<a.length;h++){let p=a[h];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(u=h),p.route.id){let{loaderData:g,errors:_}=t,E=p.route.loader&&!g.hasOwnProperty(p.route.id)&&(!_||_[p.route.id]===void 0);if(p.route.lazy||E){c=!0,u>=0?a=a.slice(0,u+1):a=[a[0]];break}}}return a.reduceRight((h,p,g)=>{let _,E=!1,w=null,S=null;t&&(_=o&&p.route.id?o[p.route.id]:void 0,w=p.route.errorElement||CN,c&&(u<0&&g===0?(dS("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),E=!0,S=null):u===g&&(E=!0,S=p.route.hydrateFallbackElement||null)));let D=e.concat(a.slice(0,g+1)),T=()=>{let O;return _?O=w:E?O=S:p.route.Component?O=P.createElement(p.route.Component,null):p.route.element?O=p.route.element:O=h,P.createElement(IN,{match:p,routeContext:{outlet:h,matches:D,isDataRoute:t!=null},children:O})};return t&&(p.route.ErrorBoundary||p.route.errorElement||g===0)?P.createElement(TN,{location:t.location,revalidation:t.revalidation,component:w,error:_,children:T(),routeContext:{outlet:null,matches:D,isDataRoute:!0},unstable_onError:r}):T()},null)}function Iv(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function RN(n){let e=P.useContext(Nc);return Yt(e,Iv(n)),e}function ON(n){let e=P.useContext(L0);return Yt(e,Iv(n)),e}function DN(n){let e=P.useContext(ji);return Yt(e,Iv(n)),e}function Nv(n){let e=DN(n),t=e.matches[e.matches.length-1];return Yt(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function MN(){return Nv("useRouteId")}function PN(){let n=P.useContext(Tv),e=ON("useRouteError"),t=Nv("useRouteError");return n!==void 0?n:e.errors?.[t]}function kN(){let{router:n}=RN("useNavigate"),e=Nv("useNavigate"),t=P.useRef(!1);return fS(()=>{t.current=!0}),P.useCallback(async(i,a={})=>{fi(t.current,uS),t.current&&(typeof i=="number"?n.navigate(i):await n.navigate(i,{fromRouteId:e,...a}))},[n,e])}var kE={};function dS(n,e,t){!e&&!kE[n]&&(kE[n]=!0,fi(!1,t))}P.memo(LN);function LN({routes:n,future:e,state:t,unstable_onError:r}){return hS(n,void 0,t,r,e)}function ai({to:n,replace:e,state:t,relative:r}){Yt(Rc(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=P.useContext(Li);fi(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:a}=P.useContext(ji),{pathname:o}=Bi(),c=nl(),u=Cv(n,Sv(a),o,r==="path"),h=JSON.stringify(u);return P.useEffect(()=>{c(JSON.parse(h),{replace:e,state:t,relative:r})},[c,h,r,e,t]),null}function Kt(n){Yt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function jN({basename:n="/",children:e=null,location:t,navigationType:r="POP",navigator:i,static:a=!1}){Yt(!Rc(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=n.replace(/^\/*/,"/"),c=P.useMemo(()=>({basename:o,navigator:i,static:a,future:{}}),[o,i,a]);typeof t=="string"&&(t=Ic(t));let{pathname:u="/",search:h="",hash:p="",state:g=null,key:_="default"}=t,E=P.useMemo(()=>{let w=Xa(u,o);return w==null?null:{location:{pathname:w,search:h,hash:p,state:g,key:_},navigationType:r}},[o,u,h,p,g,_,r]);return fi(E!=null,`<Router basename="${o}"> is not able to match the URL "${u}${h}${p}" because it does not start with the basename, so the <Router> won't render anything.`),E==null?null:P.createElement(Li.Provider,{value:c},P.createElement(Rf.Provider,{children:e,value:E}))}function pS({children:n,location:e}){return bN(Ag(n),e)}function Ag(n,e=[]){let t=[];return P.Children.forEach(n,(r,i)=>{if(!P.isValidElement(r))return;let a=[...e,i];if(r.type===P.Fragment){t.push.apply(t,Ag(r.props.children,a));return}Yt(r.type===Kt,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Yt(!r.props.index||!r.props.children,"An index route cannot have child routes.");let o={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Ag(r.props.children,a)),t.push(o)}),t}var Ld="get",jd="application/x-www-form-urlencoded";function j0(n){return n!=null&&typeof n.tagName=="string"}function BN(n){return j0(n)&&n.tagName.toLowerCase()==="button"}function VN(n){return j0(n)&&n.tagName.toLowerCase()==="form"}function FN(n){return j0(n)&&n.tagName.toLowerCase()==="input"}function UN(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function zN(n,e){return n.button===0&&(!e||e==="_self")&&!UN(n)}function bg(n=""){return new URLSearchParams(typeof n=="string"||Array.isArray(n)||n instanceof URLSearchParams?n:Object.keys(n).reduce((e,t)=>{let r=n[t];return e.concat(Array.isArray(r)?r.map(i=>[t,i]):[[t,r]])},[]))}function HN(n,e){let t=bg(n);return e&&e.forEach((r,i)=>{t.has(i)||e.getAll(i).forEach(a=>{t.append(i,a)})}),t}var xd=null;function GN(){if(xd===null)try{new FormData(document.createElement("form"),0),xd=!1}catch{xd=!0}return xd}var qN=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function bm(n){return n!=null&&!qN.has(n)?(fi(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${jd}"`),null):n}function $N(n,e){let t,r,i,a,o;if(VN(n)){let c=n.getAttribute("action");r=c?Xa(c,e):null,t=n.getAttribute("method")||Ld,i=bm(n.getAttribute("enctype"))||jd,a=new FormData(n)}else if(BN(n)||FN(n)&&(n.type==="submit"||n.type==="image")){let c=n.form;if(c==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let u=n.getAttribute("formaction")||c.getAttribute("action");if(r=u?Xa(u,e):null,t=n.getAttribute("formmethod")||c.getAttribute("method")||Ld,i=bm(n.getAttribute("formenctype"))||bm(c.getAttribute("enctype"))||jd,a=new FormData(c,n),!GN()){let{name:h,type:p,value:g}=n;if(p==="image"){let _=h?`${h}.`:"";a.append(`${_}x`,"0"),a.append(`${_}y`,"0")}else h&&a.append(h,g)}}else{if(j0(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Ld,r=null,i=jd,o=n}return a&&i==="text/plain"&&(o=a,a=void 0),{action:r,method:t.toLowerCase(),encType:i,formData:a,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Rv(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function XN(n,e,t){let r=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return r.pathname==="/"?r.pathname=`_root.${t}`:e&&Xa(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.${t}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${t}`,r}async function KN(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function YN(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function WN(n,e,t){let r=await Promise.all(n.map(async i=>{let a=e.routes[i.route.id];if(a){let o=await KN(a,t);return o.links?o.links():[]}return[]}));return eR(r.flat(1).filter(YN).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function LE(n,e,t,r,i,a){let o=(u,h)=>t[h]?u.route.id!==t[h].route.id:!0,c=(u,h)=>t[h].pathname!==u.pathname||t[h].route.path?.endsWith("*")&&t[h].params["*"]!==u.params["*"];return a==="assets"?e.filter((u,h)=>o(u,h)||c(u,h)):a==="data"?e.filter((u,h)=>{let p=r.routes[u.route.id];if(!p||!p.hasLoader)return!1;if(o(u,h)||c(u,h))return!0;if(u.route.shouldRevalidate){let g=u.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:t[0]?.params||{},nextUrl:new URL(n,window.origin),nextParams:u.params,defaultShouldRevalidate:!0});if(typeof g=="boolean")return g}return!0}):[]}function QN(n,e,{includeHydrateFallback:t}={}){return ZN(n.map(r=>{let i=e.routes[r.route.id];if(!i)return[];let a=[i.module];return i.clientActionModule&&(a=a.concat(i.clientActionModule)),i.clientLoaderModule&&(a=a.concat(i.clientLoaderModule)),t&&i.hydrateFallbackModule&&(a=a.concat(i.hydrateFallbackModule)),i.imports&&(a=a.concat(i.imports)),a}).flat(1))}function ZN(n){return[...new Set(n)]}function JN(n){let e={},t=Object.keys(n).sort();for(let r of t)e[r]=n[r];return e}function eR(n,e){let t=new Set;return new Set(e),n.reduce((r,i)=>{let a=JSON.stringify(JN(i));return t.has(a)||(t.add(a),r.push({key:a,link:i})),r},[])}function mS(){let n=P.useContext(Nc);return Rv(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function tR(){let n=P.useContext(L0);return Rv(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var Ov=P.createContext(void 0);Ov.displayName="FrameworkContext";function gS(){let n=P.useContext(Ov);return Rv(n,"You must render this element inside a <HydratedRouter> element"),n}function nR(n,e){let t=P.useContext(Ov),[r,i]=P.useState(!1),[a,o]=P.useState(!1),{onFocus:c,onBlur:u,onMouseEnter:h,onMouseLeave:p,onTouchStart:g}=e,_=P.useRef(null);P.useEffect(()=>{if(n==="render"&&o(!0),n==="viewport"){let S=T=>{T.forEach(O=>{o(O.isIntersecting)})},D=new IntersectionObserver(S,{threshold:.5});return _.current&&D.observe(_.current),()=>{D.disconnect()}}},[n]),P.useEffect(()=>{if(r){let S=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(S)}}},[r]);let E=()=>{i(!0)},w=()=>{i(!1),o(!1)};return t?n!=="intent"?[a,_,{}]:[a,_,{onFocus:qu(c,E),onBlur:qu(u,w),onMouseEnter:qu(h,E),onMouseLeave:qu(p,w),onTouchStart:qu(g,E)}]:[!1,_,{}]}function qu(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function rR({page:n,...e}){let{router:t}=mS(),r=P.useMemo(()=>aS(t.routes,n,t.basename),[t.routes,n,t.basename]);return r?P.createElement(aR,{page:n,matches:r,...e}):null}function iR(n){let{manifest:e,routeModules:t}=gS(),[r,i]=P.useState([]);return P.useEffect(()=>{let a=!1;return WN(n,e,t).then(o=>{a||i(o)}),()=>{a=!0}},[n,e,t]),r}function aR({page:n,matches:e,...t}){let r=Bi(),{manifest:i,routeModules:a}=gS(),{basename:o}=mS(),{loaderData:c,matches:u}=tR(),h=P.useMemo(()=>LE(n,e,u,i,r,"data"),[n,e,u,i,r]),p=P.useMemo(()=>LE(n,e,u,i,r,"assets"),[n,e,u,i,r]),g=P.useMemo(()=>{if(n===r.pathname+r.search+r.hash)return[];let w=new Set,S=!1;if(e.forEach(T=>{let O=i.routes[T.route.id];!O||!O.hasLoader||(!h.some(j=>j.route.id===T.route.id)&&T.route.id in c&&a[T.route.id]?.shouldRevalidate||O.hasClientLoader?S=!0:w.add(T.route.id))}),w.size===0)return[];let D=XN(n,o,"data");return S&&w.size>0&&D.searchParams.set("_routes",e.filter(T=>w.has(T.route.id)).map(T=>T.route.id).join(",")),[D.pathname+D.search]},[o,c,r,i,h,e,n,a]),_=P.useMemo(()=>QN(p,i),[p,i]),E=iR(p);return P.createElement(P.Fragment,null,g.map(w=>P.createElement("link",{key:w,rel:"prefetch",as:"fetch",href:w,...t})),_.map(w=>P.createElement("link",{key:w,rel:"modulepreload",href:w,...t})),E.map(({key:w,link:S})=>P.createElement("link",{key:w,nonce:t.nonce,...S})))}function sR(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var vS=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{vS&&(window.__reactRouterVersion="7.9.4")}catch{}function oR({basename:n,children:e,window:t}){let r=P.useRef();r.current==null&&(r.current=K4({window:t,v5Compat:!0}));let i=r.current,[a,o]=P.useState({action:i.action,location:i.location}),c=P.useCallback(u=>{P.startTransition(()=>o(u))},[o]);return P.useLayoutEffect(()=>i.listen(c),[i,c]),P.createElement(jN,{basename:n,children:e,location:a.location,navigationType:a.action,navigator:i})}var yS=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Jd=P.forwardRef(function({onClick:e,discover:t="render",prefetch:r="none",relative:i,reloadDocument:a,replace:o,state:c,target:u,to:h,preventScrollReset:p,viewTransition:g,..._},E){let{basename:w}=P.useContext(Li),S=typeof h=="string"&&yS.test(h),D,T=!1;if(typeof h=="string"&&S&&(D=h,vS))try{let I=new URL(window.location.href),k=h.startsWith("//")?new URL(I.protocol+h):new URL(h),M=Xa(k.pathname,w);k.origin===I.origin&&M!=null?h=M+k.search+k.hash:T=!0}catch{fi(!1,`<Link to="${h}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let O=EN(h,{relative:i}),[j,z,H]=nR(r,_),q=fR(h,{replace:o,state:c,target:u,preventScrollReset:p,relative:i,viewTransition:g});function N(I){e&&e(I),I.defaultPrevented||q(I)}let b=P.createElement("a",{..._,...H,href:D||O,onClick:T||a?e:N,ref:sR(E,z),target:u,"data-discover":!S&&t==="render"?"true":void 0});return j&&!S?P.createElement(P.Fragment,null,b,P.createElement(rR,{page:O})):b});Jd.displayName="Link";var lR=P.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:i=!1,style:a,to:o,viewTransition:c,children:u,...h},p){let g=Of(o,{relative:h.relative}),_=Bi(),E=P.useContext(L0),{navigator:w,basename:S}=P.useContext(Li),D=E!=null&&gR(g)&&c===!0,T=w.encodeLocation?w.encodeLocation(g).pathname:g.pathname,O=_.pathname,j=E&&E.navigation&&E.navigation.location?E.navigation.location.pathname:null;t||(O=O.toLowerCase(),j=j?j.toLowerCase():null,T=T.toLowerCase()),j&&S&&(j=Xa(j,S)||j);const z=T!=="/"&&T.endsWith("/")?T.length-1:T.length;let H=O===T||!i&&O.startsWith(T)&&O.charAt(z)==="/",q=j!=null&&(j===T||!i&&j.startsWith(T)&&j.charAt(T.length)==="/"),N={isActive:H,isPending:q,isTransitioning:D},b=H?e:void 0,I;typeof r=="function"?I=r(N):I=[r,H?"active":null,q?"pending":null,D?"transitioning":null].filter(Boolean).join(" ");let k=typeof a=="function"?a(N):a;return P.createElement(Jd,{...h,"aria-current":b,className:I,ref:p,style:k,to:o,viewTransition:c},typeof u=="function"?u(N):u)});lR.displayName="NavLink";var cR=P.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:r,replace:i,state:a,method:o=Ld,action:c,onSubmit:u,relative:h,preventScrollReset:p,viewTransition:g,..._},E)=>{let w=pR(),S=mR(c,{relative:h}),D=o.toLowerCase()==="get"?"get":"post",T=typeof c=="string"&&yS.test(c),O=j=>{if(u&&u(j),j.defaultPrevented)return;j.preventDefault();let z=j.nativeEvent.submitter,H=z?.getAttribute("formmethod")||o;w(z||j.currentTarget,{fetcherKey:e,method:H,navigate:t,replace:i,state:a,relative:h,preventScrollReset:p,viewTransition:g})};return P.createElement("form",{ref:E,method:D,action:S,onSubmit:r?u:O,..._,"data-discover":!T&&n==="render"?"true":void 0})});cR.displayName="Form";function uR(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function _S(n){let e=P.useContext(Nc);return Yt(e,uR(n)),e}function fR(n,{target:e,replace:t,state:r,preventScrollReset:i,relative:a,viewTransition:o}={}){let c=nl(),u=Bi(),h=Of(n,{relative:a});return P.useCallback(p=>{if(zN(p,e)){p.preventDefault();let g=t!==void 0?t:mf(u)===mf(h);c(n,{replace:g,state:r,preventScrollReset:i,relative:a,viewTransition:o})}},[u,c,h,t,r,e,n,i,a,o])}function Dv(n){fi(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=P.useRef(bg(n)),t=P.useRef(!1),r=Bi(),i=P.useMemo(()=>HN(r.search,t.current?null:e.current),[r.search]),a=nl(),o=P.useCallback((c,u)=>{const h=bg(typeof c=="function"?c(new URLSearchParams(i)):c);t.current=!0,a("?"+h,u)},[a,i]);return[i,o]}var hR=0,dR=()=>`__${String(++hR)}__`;function pR(){let{router:n}=_S("useSubmit"),{basename:e}=P.useContext(Li),t=MN();return P.useCallback(async(r,i={})=>{let{action:a,method:o,encType:c,formData:u,body:h}=$N(r,e);if(i.navigate===!1){let p=i.fetcherKey||dR();await n.fetch(p,t,i.action||a,{preventScrollReset:i.preventScrollReset,formData:u,body:h,formMethod:i.method||o,formEncType:i.encType||c,flushSync:i.flushSync})}else await n.navigate(i.action||a,{preventScrollReset:i.preventScrollReset,formData:u,body:h,formMethod:i.method||o,formEncType:i.encType||c,replace:i.replace,state:i.state,fromRouteId:t,flushSync:i.flushSync,viewTransition:i.viewTransition})},[n,e,t])}function mR(n,{relative:e}={}){let{basename:t}=P.useContext(Li),r=P.useContext(ji);Yt(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),a={...Of(n||".",{relative:e})},o=Bi();if(n==null){a.search=o.search;let c=new URLSearchParams(a.search),u=c.getAll("index");if(u.some(p=>p==="")){c.delete("index"),u.filter(g=>g).forEach(g=>c.append("index",g));let p=c.toString();a.search=p?`?${p}`:""}}return(!n||n===".")&&i.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(a.pathname=a.pathname==="/"?t:qa([t,a.pathname])),mf(a)}function gR(n,{relative:e}={}){let t=P.useContext(cS);Yt(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=_S("useViewTransitionState"),i=Of(n,{relative:e});if(!t.isTransitioning)return!1;let a=Xa(t.currentLocation.pathname,r)||t.currentLocation.pathname,o=Xa(t.nextLocation.pathname,r)||t.nextLocation.pathname;return Zd(i.pathname,o)!=null||Zd(i.pathname,a)!=null}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vR=()=>{};var jE={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xS=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},yR=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const a=n[t++];e[r++]=String.fromCharCode((i&31)<<6|a&63)}else if(i>239&&i<365){const a=n[t++],o=n[t++],c=n[t++],u=((i&7)<<18|(a&63)<<12|(o&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const a=n[t++],o=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(a&63)<<6|o&63)}}return e.join("")},ES={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const a=n[i],o=i+1<n.length,c=o?n[i+1]:0,u=i+2<n.length,h=u?n[i+2]:0,p=a>>2,g=(a&3)<<4|c>>4;let _=(c&15)<<2|h>>6,E=h&63;u||(E=64,o||(_=64)),r.push(t[p],t[g],t[_],t[E])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(xS(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):yR(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const a=t[n.charAt(i++)],c=i<n.length?t[n.charAt(i)]:0;++i;const h=i<n.length?t[n.charAt(i)]:64;++i;const g=i<n.length?t[n.charAt(i)]:64;if(++i,a==null||c==null||h==null||g==null)throw new _R;const _=a<<2|c>>4;if(r.push(_),h!==64){const E=c<<4&240|h>>2;if(r.push(E),g!==64){const w=h<<6&192|g;r.push(w)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class _R extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const xR=function(n){const e=xS(n);return ES.encodeByteArray(e,!0)},e0=function(n){return xR(n).replace(/\./g,"")},wS=function(n){try{return ES.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ER(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wR=()=>ER().__FIREBASE_DEFAULTS__,AR=()=>{if(typeof process>"u"||typeof jE>"u")return;const n=jE.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},bR=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&wS(n[1]);return e&&JSON.parse(e)},B0=()=>{try{return vR()||wR()||AR()||bR()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},AS=n=>B0()?.emulatorHosts?.[n],SR=n=>{const e=AS(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},bS=()=>B0()?.config,SS=n=>B0()?.[`_${n}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CR{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oc(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function CS(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TR(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,a=n.sub||n.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}},...n};return[e0(JSON.stringify(t)),e0(JSON.stringify(o)),""].join(".")}const of={};function IR(){const n={prod:[],emulator:[]};for(const e of Object.keys(of))of[e]?n.emulator.push(e):n.prod.push(e);return n}function NR(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let BE=!1;function TS(n,e){if(typeof window>"u"||typeof document>"u"||!Oc(window.location.host)||of[n]===e||of[n]||BE)return;of[n]=e;function t(_){return`__firebase__banner__${_}`}const r="__firebase__banner",a=IR().prod.length>0;function o(){const _=document.getElementById(r);_&&_.remove()}function c(_){_.style.display="flex",_.style.background="#7faaf0",_.style.position="fixed",_.style.bottom="5px",_.style.left="5px",_.style.padding=".5em",_.style.borderRadius="5px",_.style.alignItems="center"}function u(_,E){_.setAttribute("width","24"),_.setAttribute("id",E),_.setAttribute("height","24"),_.setAttribute("viewBox","0 0 24 24"),_.setAttribute("fill","none"),_.style.marginLeft="-6px"}function h(){const _=document.createElement("span");return _.style.cursor="pointer",_.style.marginLeft="16px",_.style.fontSize="24px",_.innerHTML=" &times;",_.onclick=()=>{BE=!0,o()},_}function p(_,E){_.setAttribute("id",E),_.innerText="Learn more",_.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",_.setAttribute("target","__blank"),_.style.paddingLeft="5px",_.style.textDecoration="underline"}function g(){const _=NR(r),E=t("text"),w=document.getElementById(E)||document.createElement("span"),S=t("learnmore"),D=document.getElementById(S)||document.createElement("a"),T=t("preprendIcon"),O=document.getElementById(T)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(_.created){const j=_.element;c(j),p(D,S);const z=h();u(O,T),j.append(O,w,D,z),document.body.appendChild(j)}a?(w.innerText="Preview backend disconnected.",O.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(O.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,w.innerText="Preview backend running in this workspace."),w.setAttribute("id",E)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",g):g()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fr(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function RR(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(fr())}function OR(){const n=B0()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function DR(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function MR(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function PR(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function kR(){const n=fr();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function LR(){return!OR()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function jR(){try{return typeof indexedDB=="object"}catch{return!1}}function BR(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VR="FirebaseError";class _a extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=VR,Object.setPrototypeOf(this,_a.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Df.prototype.create)}}class Df{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},i=`${this.service}/${e}`,a=this.errors[e],o=a?FR(a,r):"Error",c=`${this.serviceName}: ${o} (${i}).`;return new _a(i,c,r)}}function FR(n,e){return n.replace(UR,(t,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const UR=/\{\$([^}]+)}/g;function zR(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Qo(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const i of t){if(!r.includes(i))return!1;const a=n[i],o=e[i];if(VE(a)&&VE(o)){if(!Qo(a,o))return!1}else if(a!==o)return!1}for(const i of r)if(!t.includes(i))return!1;return!0}function VE(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mf(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Wu(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,a]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(a)}}),e}function Qu(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function HR(n,e){const t=new GR(n,e);return t.subscribe.bind(t)}class GR{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");qR(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=Sm),i.error===void 0&&(i.error=Sm),i.complete===void 0&&(i.complete=Sm);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function qR(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Sm(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dn(n){return n&&n._delegate?n._delegate:n}class Zo{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ho="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $R{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new CR;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(KR(e))try{this.getOrInitializeService({instanceIdentifier:Ho})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const a=this.getOrInitializeService({instanceIdentifier:i});r.resolve(a)}catch{}}}}clearInstance(e=Ho){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ho){return this.instances.has(e)}getOptions(e=Ho){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[a,o]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(a);r===c&&o.resolve(i)}return i}onInit(e,t){const r=this.normalizeInstanceIdentifier(t),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const a=this.instances.get(r);return a&&e(a,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:XR(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Ho){return this.component?this.component.multipleInstances?e:Ho:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function XR(n){return n===Ho?void 0:n}function KR(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YR{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new $R(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var it;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(it||(it={}));const WR={debug:it.DEBUG,verbose:it.VERBOSE,info:it.INFO,warn:it.WARN,error:it.ERROR,silent:it.SILENT},QR=it.INFO,ZR={[it.DEBUG]:"log",[it.VERBOSE]:"log",[it.INFO]:"info",[it.WARN]:"warn",[it.ERROR]:"error"},JR=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),i=ZR[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Mv{constructor(e){this.name=e,this._logLevel=QR,this._logHandler=JR,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in it))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?WR[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,it.DEBUG,...e),this._logHandler(this,it.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,it.VERBOSE,...e),this._logHandler(this,it.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,it.INFO,...e),this._logHandler(this,it.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,it.WARN,...e),this._logHandler(this,it.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,it.ERROR,...e),this._logHandler(this,it.ERROR,...e)}}const e8=(n,e)=>e.some(t=>n instanceof t);let FE,UE;function t8(){return FE||(FE=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function n8(){return UE||(UE=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const IS=new WeakMap,Sg=new WeakMap,NS=new WeakMap,Cm=new WeakMap,Pv=new WeakMap;function r8(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",a),n.removeEventListener("error",o)},a=()=>{t(Hs(n.result)),i()},o=()=>{r(n.error),i()};n.addEventListener("success",a),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&IS.set(t,n)}).catch(()=>{}),Pv.set(e,n),e}function i8(n){if(Sg.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",a),n.removeEventListener("error",o),n.removeEventListener("abort",o)},a=()=>{t(),i()},o=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",a),n.addEventListener("error",o),n.addEventListener("abort",o)});Sg.set(n,e)}let Cg={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Sg.get(n);if(e==="objectStoreNames")return n.objectStoreNames||NS.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Hs(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function a8(n){Cg=n(Cg)}function s8(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(Tm(this),e,...t);return NS.set(r,e.sort?e.sort():[e]),Hs(r)}:n8().includes(n)?function(...e){return n.apply(Tm(this),e),Hs(IS.get(this))}:function(...e){return Hs(n.apply(Tm(this),e))}}function o8(n){return typeof n=="function"?s8(n):(n instanceof IDBTransaction&&i8(n),e8(n,t8())?new Proxy(n,Cg):n)}function Hs(n){if(n instanceof IDBRequest)return r8(n);if(Cm.has(n))return Cm.get(n);const e=o8(n);return e!==n&&(Cm.set(n,e),Pv.set(e,n)),e}const Tm=n=>Pv.get(n);function l8(n,e,{blocked:t,upgrade:r,blocking:i,terminated:a}={}){const o=indexedDB.open(n,e),c=Hs(o);return r&&o.addEventListener("upgradeneeded",u=>{r(Hs(o.result),u.oldVersion,u.newVersion,Hs(o.transaction),u)}),t&&o.addEventListener("blocked",u=>t(u.oldVersion,u.newVersion,u)),c.then(u=>{a&&u.addEventListener("close",()=>a()),i&&u.addEventListener("versionchange",h=>i(h.oldVersion,h.newVersion,h))}).catch(()=>{}),c}const c8=["get","getKey","getAll","getAllKeys","count"],u8=["put","add","delete","clear"],Im=new Map;function zE(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Im.get(e))return Im.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=u8.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||c8.includes(t)))return;const a=async function(o,...c){const u=this.transaction(o,i?"readwrite":"readonly");let h=u.store;return r&&(h=h.index(c.shift())),(await Promise.all([h[t](...c),i&&u.done]))[0]};return Im.set(e,a),a}a8(n=>({...n,get:(e,t,r)=>zE(e,t)||n.get(e,t,r),has:(e,t)=>!!zE(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f8{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(h8(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function h8(n){return n.getComponent()?.type==="VERSION"}const Tg="@firebase/app",HE="0.14.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ka=new Mv("@firebase/app"),d8="@firebase/app-compat",p8="@firebase/analytics-compat",m8="@firebase/analytics",g8="@firebase/app-check-compat",v8="@firebase/app-check",y8="@firebase/auth",_8="@firebase/auth-compat",x8="@firebase/database",E8="@firebase/data-connect",w8="@firebase/database-compat",A8="@firebase/functions",b8="@firebase/functions-compat",S8="@firebase/installations",C8="@firebase/installations-compat",T8="@firebase/messaging",I8="@firebase/messaging-compat",N8="@firebase/performance",R8="@firebase/performance-compat",O8="@firebase/remote-config",D8="@firebase/remote-config-compat",M8="@firebase/storage",P8="@firebase/storage-compat",k8="@firebase/firestore",L8="@firebase/ai",j8="@firebase/firestore-compat",B8="firebase",V8="12.3.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ig="[DEFAULT]",F8={[Tg]:"fire-core",[d8]:"fire-core-compat",[m8]:"fire-analytics",[p8]:"fire-analytics-compat",[v8]:"fire-app-check",[g8]:"fire-app-check-compat",[y8]:"fire-auth",[_8]:"fire-auth-compat",[x8]:"fire-rtdb",[E8]:"fire-data-connect",[w8]:"fire-rtdb-compat",[A8]:"fire-fn",[b8]:"fire-fn-compat",[S8]:"fire-iid",[C8]:"fire-iid-compat",[T8]:"fire-fcm",[I8]:"fire-fcm-compat",[N8]:"fire-perf",[R8]:"fire-perf-compat",[O8]:"fire-rc",[D8]:"fire-rc-compat",[M8]:"fire-gcs",[P8]:"fire-gcs-compat",[k8]:"fire-fst",[j8]:"fire-fst-compat",[L8]:"fire-vertex","fire-js":"fire-js",[B8]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gf=new Map,U8=new Map,Ng=new Map;function GE(n,e){try{n.container.addComponent(e)}catch(t){Ka.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function _c(n){const e=n.name;if(Ng.has(e))return Ka.debug(`There were multiple attempts to register component ${e}.`),!1;Ng.set(e,n);for(const t of gf.values())GE(t,n);for(const t of U8.values())GE(t,n);return!0}function kv(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function oi(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z8={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Gs=new Df("app","Firebase",z8);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H8{constructor(e,t,r){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Zo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Gs.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dc=V8;function RS(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r={name:Ig,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw Gs.create("bad-app-name",{appName:String(i)});if(t||(t=bS()),!t)throw Gs.create("no-options");const a=gf.get(i);if(a){if(Qo(t,a.options)&&Qo(r,a.config))return a;throw Gs.create("duplicate-app",{appName:i})}const o=new YR(i);for(const u of Ng.values())o.addComponent(u);const c=new H8(t,r,o);return gf.set(i,c),c}function OS(n=Ig){const e=gf.get(n);if(!e&&n===Ig&&bS())return RS();if(!e)throw Gs.create("no-app",{appName:n});return e}function qE(){return Array.from(gf.values())}function qs(n,e,t){let r=F8[n]??n;t&&(r+=`-${t}`);const i=r.match(/\s|\//),a=e.match(/\s|\//);if(i||a){const o=[`Unable to register library "${r}" with version "${e}":`];i&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&a&&o.push("and"),a&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ka.warn(o.join(" "));return}_c(new Zo(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G8="firebase-heartbeat-database",q8=1,vf="firebase-heartbeat-store";let Nm=null;function DS(){return Nm||(Nm=l8(G8,q8,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(vf)}catch(t){console.warn(t)}}}}).catch(n=>{throw Gs.create("idb-open",{originalErrorMessage:n.message})})),Nm}async function $8(n){try{const t=(await DS()).transaction(vf),r=await t.objectStore(vf).get(MS(n));return await t.done,r}catch(e){if(e instanceof _a)Ka.warn(e.message);else{const t=Gs.create("idb-get",{originalErrorMessage:e?.message});Ka.warn(t.message)}}}async function $E(n,e){try{const r=(await DS()).transaction(vf,"readwrite");await r.objectStore(vf).put(e,MS(n)),await r.done}catch(t){if(t instanceof _a)Ka.warn(t.message);else{const r=Gs.create("idb-set",{originalErrorMessage:t?.message});Ka.warn(r.message)}}}function MS(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X8=1024,K8=30;class Y8{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Q8(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=XE();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:t}),this._heartbeatsCache.heartbeats.length>K8){const i=Z8(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Ka.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=XE(),{heartbeatsToSend:t,unsentEntries:r}=W8(this._heartbeatsCache.heartbeats),i=e0(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return Ka.warn(e),""}}}function XE(){return new Date().toISOString().substring(0,10)}function W8(n,e=X8){const t=[];let r=n.slice();for(const i of n){const a=t.find(o=>o.agent===i.agent);if(a){if(a.dates.push(i.date),KE(t)>e){a.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),KE(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class Q8{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return jR()?BR().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await $8(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return $E(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return $E(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function KE(n){return e0(JSON.stringify({version:2,heartbeats:n})).length}function Z8(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J8(n){_c(new Zo("platform-logger",e=>new f8(e),"PRIVATE")),_c(new Zo("heartbeat",e=>new Y8(e),"PRIVATE")),qs(Tg,HE,n),qs(Tg,HE,"esm2020"),qs("fire-js","")}J8("");function PS(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const e6=PS,kS=new Df("auth","Firebase",PS());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t0=new Mv("@firebase/auth");function t6(n,...e){t0.logLevel<=it.WARN&&t0.warn(`Auth (${Dc}): ${n}`,...e)}function Bd(n,...e){t0.logLevel<=it.ERROR&&t0.error(`Auth (${Dc}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pi(n,...e){throw Lv(n,...e)}function fa(n,...e){return Lv(n,...e)}function LS(n,e,t){const r={...e6(),[e]:t};return new Df("auth","Firebase",r).create(e,{appName:n.name})}function $a(n){return LS(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Lv(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return kS.create(n,...e)}function Be(n,e,...t){if(!n)throw Lv(e,...t)}function za(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Bd(e),new Error(e)}function Ya(n,e){n||za(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rg(){return typeof self<"u"&&self.location?.href||""}function n6(){return YE()==="http:"||YE()==="https:"}function YE(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r6(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(n6()||MR()||"connection"in navigator)?navigator.onLine:!0}function i6(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pf{constructor(e,t){this.shortDelay=e,this.longDelay=t,Ya(t>e,"Short delay should be less than long delay!"),this.isMobile=RR()||PR()}get(){return r6()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jv(n,e){Ya(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jS{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;za("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;za("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;za("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a6={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s6=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],o6=new Pf(3e4,6e4);function so(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function oo(n,e,t,r,i={}){return BS(n,i,async()=>{let a={},o={};r&&(e==="GET"?o=r:a={body:JSON.stringify(r)});const c=Mf({key:n.config.apiKey,...o}).slice(1),u=await n._getAdditionalHeaders();u["Content-Type"]="application/json",n.languageCode&&(u["X-Firebase-Locale"]=n.languageCode);const h={method:e,headers:u,...a};return DR()||(h.referrerPolicy="no-referrer"),n.emulatorConfig&&Oc(n.emulatorConfig.host)&&(h.credentials="include"),jS.fetch()(await VS(n,n.config.apiHost,t,c),h)})}async function BS(n,e,t){n._canInitEmulator=!1;const r={...a6,...e};try{const i=new c6(n),a=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();const o=await a.json();if("needConfirmation"in o)throw Ed(n,"account-exists-with-different-credential",o);if(a.ok&&!("errorMessage"in o))return o;{const c=a.ok?o.errorMessage:o.error.message,[u,h]=c.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ed(n,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw Ed(n,"email-already-in-use",o);if(u==="USER_DISABLED")throw Ed(n,"user-disabled",o);const p=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw LS(n,p,h);Pi(n,p)}}catch(i){if(i instanceof _a)throw i;Pi(n,"network-request-failed",{message:String(i)})}}async function kf(n,e,t,r,i={}){const a=await oo(n,e,t,r,i);return"mfaPendingCredential"in a&&Pi(n,"multi-factor-auth-required",{_serverResponse:a}),a}async function VS(n,e,t,r){const i=`${e}${t}?${r}`,a=n,o=a.config.emulator?jv(n.config,i):`${n.config.apiScheme}://${i}`;return s6.includes(t)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(o).toString():o}function l6(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class c6{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(fa(this.auth,"network-request-failed")),o6.get())})}}function Ed(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=fa(n,e,r);return i.customData._tokenResponse=t,i}function WE(n){return n!==void 0&&n.enterprise!==void 0}class u6{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return l6(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function f6(n,e){return oo(n,"GET","/v2/recaptchaConfig",so(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function h6(n,e){return oo(n,"POST","/v1/accounts:delete",e)}async function n0(n,e){return oo(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lf(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function d6(n,e=!1){const t=dn(n),r=await t.getIdToken(e),i=Bv(r);Be(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const a=typeof i.firebase=="object"?i.firebase:void 0,o=a?.sign_in_provider;return{claims:i,token:r,authTime:lf(Rm(i.auth_time)),issuedAtTime:lf(Rm(i.iat)),expirationTime:lf(Rm(i.exp)),signInProvider:o||null,signInSecondFactor:a?.sign_in_second_factor||null}}function Rm(n){return Number(n)*1e3}function Bv(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Bd("JWT malformed, contained fewer than 3 sections"),null;try{const i=wS(t);return i?JSON.parse(i):(Bd("Failed to decode base64 JWT payload"),null)}catch(i){return Bd("Caught error parsing JWT payload as JSON",i?.toString()),null}}function QE(n){const e=Bv(n);return Be(e,"internal-error"),Be(typeof e.exp<"u","internal-error"),Be(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yf(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof _a&&p6(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function p6({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m6{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Og{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=lf(this.lastLoginAt),this.creationTime=lf(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function r0(n){const e=n.auth,t=await n.getIdToken(),r=await yf(n,n0(e,{idToken:t}));Be(r?.users.length,e,"internal-error");const i=r.users[0];n._notifyReloadListener(i);const a=i.providerUserInfo?.length?FS(i.providerUserInfo):[],o=v6(n.providerData,a),c=n.isAnonymous,u=!(n.email&&i.passwordHash)&&!o?.length,h=c?u:!1,p={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Og(i.createdAt,i.lastLoginAt),isAnonymous:h};Object.assign(n,p)}async function g6(n){const e=dn(n);await r0(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function v6(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function FS(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function y6(n,e){const t=await BS(n,{},async()=>{const r=Mf({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:a}=n.config,o=await VS(n,i,"/v1/token",`key=${a}`),c=await n._getAdditionalHeaders();c["Content-Type"]="application/x-www-form-urlencoded";const u={method:"POST",headers:c,body:r};return n.emulatorConfig&&Oc(n.emulatorConfig.host)&&(u.credentials="include"),jS.fetch()(o,u)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function _6(n,e){return oo(n,"POST","/v2/accounts:revokeToken",so(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dc{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Be(e.idToken,"internal-error"),Be(typeof e.idToken<"u","internal-error"),Be(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):QE(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Be(e.length!==0,"internal-error");const t=QE(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Be(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:i,expiresIn:a}=await y6(e,t);this.updateTokensAndExpiration(r,i,Number(a))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:a}=t,o=new dc;return r&&(Be(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(Be(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),a&&(Be(typeof a=="number","internal-error",{appName:e}),o.expirationTime=a),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new dc,this.toJSON())}_performRefresh(){return za("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ds(n,e){Be(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Ni{constructor({uid:e,auth:t,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new m6(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Og(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await yf(this,this.stsTokenManager.getToken(this.auth,e));return Be(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return d6(this,e)}reload(){return g6(this)}_assign(e){this!==e&&(Be(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Ni({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Be(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await r0(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(oi(this.auth.app))return Promise.reject($a(this.auth));const e=await this.getIdToken();return await yf(this,h6(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const r=t.displayName??void 0,i=t.email??void 0,a=t.phoneNumber??void 0,o=t.photoURL??void 0,c=t.tenantId??void 0,u=t._redirectEventId??void 0,h=t.createdAt??void 0,p=t.lastLoginAt??void 0,{uid:g,emailVerified:_,isAnonymous:E,providerData:w,stsTokenManager:S}=t;Be(g&&S,e,"internal-error");const D=dc.fromJSON(this.name,S);Be(typeof g=="string",e,"internal-error"),Ds(r,e.name),Ds(i,e.name),Be(typeof _=="boolean",e,"internal-error"),Be(typeof E=="boolean",e,"internal-error"),Ds(a,e.name),Ds(o,e.name),Ds(c,e.name),Ds(u,e.name),Ds(h,e.name),Ds(p,e.name);const T=new Ni({uid:g,auth:e,email:i,emailVerified:_,displayName:r,isAnonymous:E,photoURL:o,phoneNumber:a,tenantId:c,stsTokenManager:D,createdAt:h,lastLoginAt:p});return w&&Array.isArray(w)&&(T.providerData=w.map(O=>({...O}))),u&&(T._redirectEventId=u),T}static async _fromIdTokenResponse(e,t,r=!1){const i=new dc;i.updateFromServerResponse(t);const a=new Ni({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await r0(a),a}static async _fromGetAccountInfoResponse(e,t,r){const i=t.users[0];Be(i.localId!==void 0,"internal-error");const a=i.providerUserInfo!==void 0?FS(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!a?.length,c=new dc;c.updateFromIdToken(r);const u=new Ni({uid:i.localId,auth:e,stsTokenManager:c,isAnonymous:o}),h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new Og(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!a?.length};return Object.assign(u,h),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZE=new Map;function Ha(n){Ya(n instanceof Function,"Expected a class definition");let e=ZE.get(n);return e?(Ya(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,ZE.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class US{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}US.type="NONE";const JE=US;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vd(n,e,t){return`firebase:${n}:${e}:${t}`}class pc{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:a}=this.auth;this.fullUserKey=Vd(this.userKey,i.apiKey,a),this.fullPersistenceKey=Vd("persistence",i.apiKey,a),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await n0(this.auth,{idToken:e}).catch(()=>{});return t?Ni._fromGetAccountInfoResponse(this.auth,t,e):null}return Ni._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new pc(Ha(JE),e,r);const i=(await Promise.all(t.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let a=i[0]||Ha(JE);const o=Vd(r,e.config.apiKey,e.name);let c=null;for(const h of t)try{const p=await h._get(o);if(p){let g;if(typeof p=="string"){const _=await n0(e,{idToken:p}).catch(()=>{});if(!_)break;g=await Ni._fromGetAccountInfoResponse(e,_,p)}else g=Ni._fromJSON(e,p);h!==a&&(c=g),a=h;break}}catch{}const u=i.filter(h=>h._shouldAllowMigration);return!a._shouldAllowMigration||!u.length?new pc(a,e,r):(a=u[0],c&&await a._set(o,c.toJSON()),await Promise.all(t.map(async h=>{if(h!==a)try{await h._remove(o)}catch{}})),new pc(a,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ew(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(qS(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(zS(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(XS(e))return"Blackberry";if(KS(e))return"Webos";if(HS(e))return"Safari";if((e.includes("chrome/")||GS(e))&&!e.includes("edge/"))return"Chrome";if($S(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function zS(n=fr()){return/firefox\//i.test(n)}function HS(n=fr()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function GS(n=fr()){return/crios\//i.test(n)}function qS(n=fr()){return/iemobile/i.test(n)}function $S(n=fr()){return/android/i.test(n)}function XS(n=fr()){return/blackberry/i.test(n)}function KS(n=fr()){return/webos/i.test(n)}function Vv(n=fr()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function x6(n=fr()){return Vv(n)&&!!window.navigator?.standalone}function E6(){return kR()&&document.documentMode===10}function YS(n=fr()){return Vv(n)||$S(n)||KS(n)||XS(n)||/windows phone/i.test(n)||qS(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WS(n,e=[]){let t;switch(n){case"Browser":t=ew(fr());break;case"Worker":t=`${ew(fr())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Dc}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w6{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=a=>new Promise((o,c)=>{try{const u=e(a);o(u)}catch(u){c(u)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function A6(n,e={}){return oo(n,"GET","/v2/passwordPolicy",so(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b6=6;class S6{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??b6,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C6{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new tw(this),this.idTokenSubscription=new tw(this),this.beforeStateQueue=new w6(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=kS,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Ha(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await pc.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await n0(this,{idToken:e}),r=await Ni._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(oi(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(o,o))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let r=t,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=this.redirectUser?._redirectEventId,o=r?._redirectEventId,c=await this.tryRedirectSignIn(e);(!a||a===o)&&c?.user&&(r=c.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(a){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Be(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await r0(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=i6()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(oi(this.app))return Promise.reject($a(this));const t=e?dn(e):null;return t&&Be(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Be(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return oi(this.app)?Promise.reject($a(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return oi(this.app)?Promise.reject($a(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ha(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await A6(this),t=new S6(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Df("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await _6(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Ha(e)||this._popupRedirectResolver;Be(t,this,"argument-error"),this.redirectPersistenceManager=await pc.create(this,[Ha(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const a=typeof t=="function"?t:t.next.bind(t);let o=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(Be(c,this,"internal-error"),c.then(()=>{o||a(this.currentUser)}),typeof t=="function"){const u=e.addObserver(t,r,i);return()=>{o=!0,u()}}else{const u=e.addObserver(t);return()=>{o=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Be(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=WS(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(oi(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&t6(`Error while retrieving App Check token: ${e.error}`),e?.token}}function rl(n){return dn(n)}class tw{constructor(e){this.auth=e,this.observer=null,this.addObserver=HR(t=>this.observer=t)}get next(){return Be(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let V0={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function T6(n){V0=n}function QS(n){return V0.loadJS(n)}function I6(){return V0.recaptchaEnterpriseScript}function N6(){return V0.gapiScript}function R6(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class O6{constructor(){this.enterprise=new D6}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class D6{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const M6="recaptcha-enterprise",ZS="NO_RECAPTCHA";class P6{constructor(e){this.type=M6,this.auth=rl(e)}async verify(e="verify",t=!1){async function r(a){if(!t){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(o,c)=>{f6(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{const h=new u6(u);return a.tenantId==null?a._agentRecaptchaConfig=h:a._tenantRecaptchaConfigs[a.tenantId]=h,o(h.siteKey)}}).catch(u=>{c(u)})})}function i(a,o,c){const u=window.grecaptcha;WE(u)?u.enterprise.ready(()=>{u.enterprise.execute(a,{action:e}).then(h=>{o(h)}).catch(()=>{o(ZS)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new O6().execute("siteKey",{action:"verify"}):new Promise((a,o)=>{r(this.auth).then(c=>{if(!t&&WE(window.grecaptcha))i(c,a,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let u=I6();u.length!==0&&(u+=c),QS(u).then(()=>{i(c,a,o)}).catch(h=>{o(h)})}}).catch(c=>{o(c)})})}}async function nw(n,e,t,r=!1,i=!1){const a=new P6(n);let o;if(i)o=ZS;else try{o=await a.verify(t)}catch{o=await a.verify(t,!0)}const c={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in c){const u=c.phoneEnrollmentInfo.phoneNumber,h=c.phoneEnrollmentInfo.recaptchaToken;Object.assign(c,{phoneEnrollmentInfo:{phoneNumber:u,recaptchaToken:h,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in c){const u=c.phoneSignInInfo.recaptchaToken;Object.assign(c,{phoneSignInInfo:{recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return c}return r?Object.assign(c,{captchaResp:o}):Object.assign(c,{captchaResponse:o}),Object.assign(c,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(c,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),c}async function rw(n,e,t,r,i){if(n._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await nw(n,e,t,t==="getOobCode");return r(n,a)}else return r(n,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await nw(n,e,t,t==="getOobCode");return r(n,o)}else return Promise.reject(a)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k6(n,e){const t=kv(n,"auth");if(t.isInitialized()){const i=t.getImmediate(),a=t.getOptions();if(Qo(a,e??{}))return i;Pi(i,"already-initialized")}return t.initialize({options:e})}function L6(n,e){const t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(Ha);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function j6(n,e,t){const r=rl(n);Be(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,a=JS(e),{host:o,port:c}=B6(e),u=c===null?"":`:${c}`,h={url:`${a}//${o}${u}/`},p=Object.freeze({host:o,port:c,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){Be(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Be(Qo(h,r.config.emulator)&&Qo(p,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=h,r.emulatorConfig=p,r.settings.appVerificationDisabledForTesting=!0,Oc(o)?(CS(`${a}//${o}${u}`),TS("Auth",!0)):V6()}function JS(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function B6(n){const e=JS(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const a=i[1];return{host:a,port:iw(r.substr(a.length+1))}}else{const[a,o]=r.split(":");return{host:a,port:iw(o)}}}function iw(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function V6(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fv{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return za("not implemented")}_getIdTokenResponse(e){return za("not implemented")}_linkToIdToken(e,t){return za("not implemented")}_getReauthenticationResolver(e){return za("not implemented")}}async function F6(n,e){return oo(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function U6(n,e){return kf(n,"POST","/v1/accounts:signInWithPassword",so(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function z6(n,e){return kf(n,"POST","/v1/accounts:signInWithEmailLink",so(n,e))}async function H6(n,e){return kf(n,"POST","/v1/accounts:signInWithEmailLink",so(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _f extends Fv{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new _f(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new _f(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return rw(e,t,"signInWithPassword",U6);case"emailLink":return z6(e,{email:this._email,oobCode:this._password});default:Pi(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return rw(e,r,"signUpPassword",F6);case"emailLink":return H6(e,{idToken:t,email:this._email,oobCode:this._password});default:Pi(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mc(n,e){return kf(n,"POST","/v1/accounts:signInWithIdp",so(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G6="http://localhost";class Jo extends Fv{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Jo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Pi("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,...a}=t;if(!r||!i)return null;const o=new Jo(r,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}_getIdTokenResponse(e){const t=this.buildRequest();return mc(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,mc(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,mc(e,t)}buildRequest(){const e={requestUri:G6,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Mf(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q6(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function $6(n){const e=Wu(Qu(n)).link,t=e?Wu(Qu(e)).deep_link_id:null,r=Wu(Qu(n)).deep_link_id;return(r?Wu(Qu(r)).link:null)||r||t||e||n}class Uv{constructor(e){const t=Wu(Qu(e)),r=t.apiKey??null,i=t.oobCode??null,a=q6(t.mode??null);Be(r&&i&&a,"argument-error"),this.apiKey=r,this.operation=a,this.code=i,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=$6(e);try{return new Uv(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mc{constructor(){this.providerId=Mc.PROVIDER_ID}static credential(e,t){return _f._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=Uv.parseLink(t);return Be(r,"argument-error"),_f._fromEmailAndCode(e,r.code,r.tenantId)}}Mc.PROVIDER_ID="password";Mc.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Mc.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eC{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lf extends eC{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class js extends Lf{constructor(){super("facebook.com")}static credential(e){return Jo._fromParams({providerId:js.PROVIDER_ID,signInMethod:js.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return js.credentialFromTaggedObject(e)}static credentialFromError(e){return js.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return js.credential(e.oauthAccessToken)}catch{return null}}}js.FACEBOOK_SIGN_IN_METHOD="facebook.com";js.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bs extends Lf{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Jo._fromParams({providerId:Bs.PROVIDER_ID,signInMethod:Bs.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Bs.credentialFromTaggedObject(e)}static credentialFromError(e){return Bs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return Bs.credential(t,r)}catch{return null}}}Bs.GOOGLE_SIGN_IN_METHOD="google.com";Bs.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vs extends Lf{constructor(){super("github.com")}static credential(e){return Jo._fromParams({providerId:Vs.PROVIDER_ID,signInMethod:Vs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Vs.credentialFromTaggedObject(e)}static credentialFromError(e){return Vs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Vs.credential(e.oauthAccessToken)}catch{return null}}}Vs.GITHUB_SIGN_IN_METHOD="github.com";Vs.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fs extends Lf{constructor(){super("twitter.com")}static credential(e,t){return Jo._fromParams({providerId:Fs.PROVIDER_ID,signInMethod:Fs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Fs.credentialFromTaggedObject(e)}static credentialFromError(e){return Fs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return Fs.credential(t,r)}catch{return null}}}Fs.TWITTER_SIGN_IN_METHOD="twitter.com";Fs.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function X6(n,e){return kf(n,"POST","/v1/accounts:signUp",so(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zs{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,i=!1){const a=await Ni._fromIdTokenResponse(e,r,i),o=aw(r);return new Zs({user:a,providerId:o,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const i=aw(r);return new Zs({user:e,providerId:i,_tokenResponse:r,operationType:t})}}function aw(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tC(n){if(oi(n.app))return Promise.reject($a(n));const e=rl(n);if(await e._initializationPromise,e.currentUser?.isAnonymous)return new Zs({user:e.currentUser,providerId:null,operationType:"signIn"});const t=await X6(e,{returnSecureToken:!0}),r=await Zs._fromIdTokenResponse(e,"signIn",t,!0);return await e._updateCurrentUser(r.user),r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i0 extends _a{constructor(e,t,r,i){super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,i0.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new i0(e,t,r,i)}}function nC(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?i0._fromErrorAndOperation(n,a,e,r):a})}async function K6(n,e,t=!1){const r=await yf(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Zs._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Y6(n,e,t=!1){const{auth:r}=n;if(oi(r.app))return Promise.reject($a(r));const i="reauthenticate";try{const a=await yf(n,nC(r,i,e,n),t);Be(a.idToken,r,"internal-error");const o=Bv(a.idToken);Be(o,r,"internal-error");const{sub:c}=o;return Be(n.uid===c,r,"user-mismatch"),Zs._forOperation(n,i,a)}catch(a){throw a?.code==="auth/user-not-found"&&Pi(r,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rC(n,e,t=!1){if(oi(n.app))return Promise.reject($a(n));const r="signIn",i=await nC(n,r,e),a=await Zs._fromIdTokenResponse(n,r,i);return t||await n._updateCurrentUser(a.user),a}async function W6(n,e){return rC(rl(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Q6(n){const e=rl(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function Z6(n,e,t){return oi(n.app)?Promise.reject($a(n)):W6(dn(n),Mc.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&Q6(n),r})}function J6(n,e,t,r){return dn(n).onIdTokenChanged(e,t,r)}function eO(n,e,t){return dn(n).beforeAuthStateChanged(e,t)}function iC(n,e,t,r){return dn(n).onAuthStateChanged(e,t,r)}function tO(n){return dn(n).signOut()}const a0="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aC{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(a0,"1"),this.storage.removeItem(a0),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nO=1e3,rO=10;class sC extends aC{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=YS(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),i=this.localCache[t];r!==i&&e(t,i,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((o,c,u)=>{this.notifyListeners(o,u)});return}const r=e.key;t?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!t&&this.localCache[r]===o||this.notifyListeners(r,o)},a=this.storage.getItem(r);E6()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,rO):i()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},nO)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}sC.type="LOCAL";const iO=sC;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oC extends aC{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}oC.type="SESSION";const lC=oC;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aO(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F0{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(i=>i.isListeningto(e));if(t)return t;const r=new F0(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:i,data:a}=t.data,o=this.handlersMap[i];if(!o?.size)return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const c=Array.from(o).map(async h=>h(t.origin,a)),u=await aO(c);t.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:u})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}F0.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zv(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sO{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let a,o;return new Promise((c,u)=>{const h=zv("",20);i.port1.start();const p=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(g){const _=g;if(_.data.eventId===h)switch(_.data.status){case"ack":clearTimeout(p),a=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),c(_.data.response);break;default:clearTimeout(p),clearTimeout(a),u(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:h,data:t},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ha(){return window}function oO(n){ha().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cC(){return typeof ha().WorkerGlobalScope<"u"&&typeof ha().importScripts=="function"}async function lO(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function cO(){return navigator?.serviceWorker?.controller||null}function uO(){return cC()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uC="firebaseLocalStorageDb",fO=1,s0="firebaseLocalStorage",fC="fbase_key";class jf{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function U0(n,e){return n.transaction([s0],e?"readwrite":"readonly").objectStore(s0)}function hO(){const n=indexedDB.deleteDatabase(uC);return new jf(n).toPromise()}function Dg(){const n=indexedDB.open(uC,fO);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(s0,{keyPath:fC})}catch(i){t(i)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(s0)?e(r):(r.close(),await hO(),e(await Dg()))})})}async function sw(n,e,t){const r=U0(n,!0).put({[fC]:e,value:t});return new jf(r).toPromise()}async function dO(n,e){const t=U0(n,!1).get(e),r=await new jf(t).toPromise();return r===void 0?null:r.value}function ow(n,e){const t=U0(n,!0).delete(e);return new jf(t).toPromise()}const pO=800,mO=3;class hC{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Dg(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>mO)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return cC()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=F0._getInstance(uO()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await lO(),!this.activeServiceWorker)return;this.sender=new sO(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||cO()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Dg();return await sw(e,a0,"1"),await ow(e,a0),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>sw(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>dO(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>ow(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const a=U0(i,!1).getAll();return new jf(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:a}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(a)&&(this.notifyListeners(i,a),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),pO)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}hC.type="LOCAL";const gO=hC;new Pf(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vO(n,e){return e?Ha(e):(Be(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hv extends Fv{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return mc(e,this._buildIdpRequest())}_linkToIdToken(e,t){return mc(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return mc(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function yO(n){return rC(n.auth,new Hv(n),n.bypassAuthState)}function _O(n){const{auth:e,user:t}=n;return Be(t,e,"internal-error"),Y6(t,new Hv(n),n.bypassAuthState)}async function xO(n){const{auth:e,user:t}=n;return Be(t,e,"internal-error"),K6(t,new Hv(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dC{constructor(e,t,r,i,a=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:i,tenantId:a,error:o,type:c}=e;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:t,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(u))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return yO;case"linkViaPopup":case"linkViaRedirect":return xO;case"reauthViaPopup":case"reauthViaRedirect":return _O;default:Pi(this.auth,"internal-error")}}resolve(e){Ya(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ya(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EO=new Pf(2e3,1e4);class sc extends dC{constructor(e,t,r,i,a){super(e,t,i,a),this.provider=r,this.authWindow=null,this.pollId=null,sc.currentPopupAction&&sc.currentPopupAction.cancel(),sc.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Be(e,this.auth,"internal-error"),e}async onExecution(){Ya(this.filter.length===1,"Popup operations only handle one event");const e=zv();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(fa(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(fa(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,sc.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(fa(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,EO.get())};e()}}sc.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wO="pendingRedirect",Fd=new Map;class AO extends dC{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=Fd.get(this.auth._key());if(!e){try{const r=await bO(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Fd.set(this.auth._key(),e)}return this.bypassAuthState||Fd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function bO(n,e){const t=TO(e),r=CO(n);if(!await r._isAvailable())return!1;const i=await r._get(t)==="true";return await r._remove(t),i}function SO(n,e){Fd.set(n._key(),e)}function CO(n){return Ha(n._redirectPersistence)}function TO(n){return Vd(wO,n.config.apiKey,n.name)}async function IO(n,e,t=!1){if(oi(n.app))return Promise.reject($a(n));const r=rl(n),i=vO(r,e),o=await new AO(r,i,t).execute();return o&&!t&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NO=600*1e3;class RO{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!OO(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!pC(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";t.onError(fa(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=NO&&this.cachedEventUids.clear(),this.cachedEventUids.has(lw(e))}saveEventToCache(e){this.cachedEventUids.add(lw(e)),this.lastProcessedEventTime=Date.now()}}function lw(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function pC({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function OO(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return pC(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DO(n,e={}){return oo(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MO=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,PO=/^https?/;async function kO(n){if(n.config.emulator)return;const{authorizedDomains:e}=await DO(n);for(const t of e)try{if(LO(t))return}catch{}Pi(n,"unauthorized-domain")}function LO(n){const e=Rg(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const o=new URL(n);return o.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&o.hostname===r}if(!PO.test(t))return!1;if(MO.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jO=new Pf(3e4,6e4);function cw(){const n=ha().___jsl;if(n?.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function BO(n){return new Promise((e,t)=>{function r(){cw(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{cw(),t(fa(n,"network-request-failed"))},timeout:jO.get()})}if(ha().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(ha().gapi?.load)r();else{const i=R6("iframefcb");return ha()[i]=()=>{gapi.load?r():t(fa(n,"network-request-failed"))},QS(`${N6()}?onload=${i}`).catch(a=>t(a))}}).catch(e=>{throw Ud=null,e})}let Ud=null;function VO(n){return Ud=Ud||BO(n),Ud}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FO=new Pf(5e3,15e3),UO="__/auth/iframe",zO="emulator/auth/iframe",HO={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},GO=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function qO(n){const e=n.config;Be(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?jv(e,zO):`https://${n.config.authDomain}/${UO}`,r={apiKey:e.apiKey,appName:n.name,v:Dc},i=GO.get(n.config.apiHost);i&&(r.eid=i);const a=n._getFrameworks();return a.length&&(r.fw=a.join(",")),`${t}?${Mf(r).slice(1)}`}async function $O(n){const e=await VO(n),t=ha().gapi;return Be(t,n,"internal-error"),e.open({where:document.body,url:qO(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:HO,dontclear:!0},r=>new Promise(async(i,a)=>{await r.restyle({setHideOnLeave:!1});const o=fa(n,"network-request-failed"),c=ha().setTimeout(()=>{a(o)},FO.get());function u(){ha().clearTimeout(c),i(r)}r.ping(u).then(u,()=>{a(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XO={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},KO=500,YO=600,WO="_blank",QO="http://localhost";class uw{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function ZO(n,e,t,r=KO,i=YO){const a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let c="";const u={...XO,width:r.toString(),height:i.toString(),top:a,left:o},h=fr().toLowerCase();t&&(c=GS(h)?WO:t),zS(h)&&(e=e||QO,u.scrollbars="yes");const p=Object.entries(u).reduce((_,[E,w])=>`${_}${E}=${w},`,"");if(x6(h)&&c!=="_self")return JO(e||"",c),new uw(null);const g=window.open(e||"",c,p);Be(g,n,"popup-blocked");try{g.focus()}catch{}return new uw(g)}function JO(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eD="__/auth/handler",tD="emulator/auth/handler",nD=encodeURIComponent("fac");async function fw(n,e,t,r,i,a){Be(n.config.authDomain,n,"auth-domain-config-required"),Be(n.config.apiKey,n,"invalid-api-key");const o={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Dc,eventId:i};if(e instanceof eC){e.setDefaultLanguage(n.languageCode),o.providerId=e.providerId||"",zR(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[p,g]of Object.entries({}))o[p]=g}if(e instanceof Lf){const p=e.getScopes().filter(g=>g!=="");p.length>0&&(o.scopes=p.join(","))}n.tenantId&&(o.tid=n.tenantId);const c=o;for(const p of Object.keys(c))c[p]===void 0&&delete c[p];const u=await n._getAppCheckToken(),h=u?`#${nD}=${encodeURIComponent(u)}`:"";return`${rD(n)}?${Mf(c).slice(1)}${h}`}function rD({config:n}){return n.emulator?jv(n,tD):`https://${n.authDomain}/${eD}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Om="webStorageSupport";class iD{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=lC,this._completeRedirectFn=IO,this._overrideRedirectResult=SO}async _openPopup(e,t,r,i){Ya(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const a=await fw(e,t,r,Rg(),i);return ZO(e,a,zv())}async _openRedirect(e,t,r,i){await this._originValidation(e);const a=await fw(e,t,r,Rg(),i);return oO(a),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:a}=this.eventManagers[t];return i?Promise.resolve(i):(Ya(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await $O(e),r=new RO(e);return t.register("authEvent",i=>(Be(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Om,{type:Om},i=>{const a=i?.[0]?.[Om];a!==void 0&&t(!!a),Pi(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=kO(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return YS()||HS()||Vv()}}const aD=iD;var hw="@firebase/auth",dw="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sD{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Be(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oD(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function lD(n){_c(new Zo("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:o,authDomain:c}=r.options;Be(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:c,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:WS(n)},h=new C6(r,i,a,u);return L6(h,t),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),_c(new Zo("auth-internal",e=>{const t=rl(e.getProvider("auth").getImmediate());return(r=>new sD(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),qs(hw,dw,oD(n)),qs(hw,dw,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cD=300,uD=SS("authIdTokenMaxAge")||cD;let pw=null;const fD=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>uD)return;const i=t?.token;pw!==i&&(pw=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function hD(n=OS()){const e=kv(n,"auth");if(e.isInitialized())return e.getImmediate();const t=k6(n,{popupRedirectResolver:aD,persistence:[gO,iO,lC]}),r=SS("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(r,location.origin);if(location.origin===a.origin){const o=fD(a.toString());eO(t,o,()=>o(t.currentUser)),J6(t,c=>o(c))}}const i=AS("auth");return i&&j6(t,`http://${i}`),t}function dD(){return document.getElementsByTagName("head")?.[0]??document}T6({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{const a=fa("internal-error");a.customData=i,t(a)},r.type="text/javascript",r.charset="UTF-8",dD().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});lD("Browser");var pD="firebase",mD="12.3.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */qs(pD,mD,"app");var mw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var $s,mC;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(N,b){function I(){}I.prototype=b.prototype,N.F=b.prototype,N.prototype=new I,N.prototype.constructor=N,N.D=function(k,M,V){for(var L=Array(arguments.length-2),ie=2;ie<arguments.length;ie++)L[ie-2]=arguments[ie];return b.prototype[M].apply(k,L)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(N,b,I){I||(I=0);const k=Array(16);if(typeof b=="string")for(var M=0;M<16;++M)k[M]=b.charCodeAt(I++)|b.charCodeAt(I++)<<8|b.charCodeAt(I++)<<16|b.charCodeAt(I++)<<24;else for(M=0;M<16;++M)k[M]=b[I++]|b[I++]<<8|b[I++]<<16|b[I++]<<24;b=N.g[0],I=N.g[1],M=N.g[2];let V=N.g[3],L;L=b+(V^I&(M^V))+k[0]+3614090360&4294967295,b=I+(L<<7&4294967295|L>>>25),L=V+(M^b&(I^M))+k[1]+3905402710&4294967295,V=b+(L<<12&4294967295|L>>>20),L=M+(I^V&(b^I))+k[2]+606105819&4294967295,M=V+(L<<17&4294967295|L>>>15),L=I+(b^M&(V^b))+k[3]+3250441966&4294967295,I=M+(L<<22&4294967295|L>>>10),L=b+(V^I&(M^V))+k[4]+4118548399&4294967295,b=I+(L<<7&4294967295|L>>>25),L=V+(M^b&(I^M))+k[5]+1200080426&4294967295,V=b+(L<<12&4294967295|L>>>20),L=M+(I^V&(b^I))+k[6]+2821735955&4294967295,M=V+(L<<17&4294967295|L>>>15),L=I+(b^M&(V^b))+k[7]+4249261313&4294967295,I=M+(L<<22&4294967295|L>>>10),L=b+(V^I&(M^V))+k[8]+1770035416&4294967295,b=I+(L<<7&4294967295|L>>>25),L=V+(M^b&(I^M))+k[9]+2336552879&4294967295,V=b+(L<<12&4294967295|L>>>20),L=M+(I^V&(b^I))+k[10]+4294925233&4294967295,M=V+(L<<17&4294967295|L>>>15),L=I+(b^M&(V^b))+k[11]+2304563134&4294967295,I=M+(L<<22&4294967295|L>>>10),L=b+(V^I&(M^V))+k[12]+1804603682&4294967295,b=I+(L<<7&4294967295|L>>>25),L=V+(M^b&(I^M))+k[13]+4254626195&4294967295,V=b+(L<<12&4294967295|L>>>20),L=M+(I^V&(b^I))+k[14]+2792965006&4294967295,M=V+(L<<17&4294967295|L>>>15),L=I+(b^M&(V^b))+k[15]+1236535329&4294967295,I=M+(L<<22&4294967295|L>>>10),L=b+(M^V&(I^M))+k[1]+4129170786&4294967295,b=I+(L<<5&4294967295|L>>>27),L=V+(I^M&(b^I))+k[6]+3225465664&4294967295,V=b+(L<<9&4294967295|L>>>23),L=M+(b^I&(V^b))+k[11]+643717713&4294967295,M=V+(L<<14&4294967295|L>>>18),L=I+(V^b&(M^V))+k[0]+3921069994&4294967295,I=M+(L<<20&4294967295|L>>>12),L=b+(M^V&(I^M))+k[5]+3593408605&4294967295,b=I+(L<<5&4294967295|L>>>27),L=V+(I^M&(b^I))+k[10]+38016083&4294967295,V=b+(L<<9&4294967295|L>>>23),L=M+(b^I&(V^b))+k[15]+3634488961&4294967295,M=V+(L<<14&4294967295|L>>>18),L=I+(V^b&(M^V))+k[4]+3889429448&4294967295,I=M+(L<<20&4294967295|L>>>12),L=b+(M^V&(I^M))+k[9]+568446438&4294967295,b=I+(L<<5&4294967295|L>>>27),L=V+(I^M&(b^I))+k[14]+3275163606&4294967295,V=b+(L<<9&4294967295|L>>>23),L=M+(b^I&(V^b))+k[3]+4107603335&4294967295,M=V+(L<<14&4294967295|L>>>18),L=I+(V^b&(M^V))+k[8]+1163531501&4294967295,I=M+(L<<20&4294967295|L>>>12),L=b+(M^V&(I^M))+k[13]+2850285829&4294967295,b=I+(L<<5&4294967295|L>>>27),L=V+(I^M&(b^I))+k[2]+4243563512&4294967295,V=b+(L<<9&4294967295|L>>>23),L=M+(b^I&(V^b))+k[7]+1735328473&4294967295,M=V+(L<<14&4294967295|L>>>18),L=I+(V^b&(M^V))+k[12]+2368359562&4294967295,I=M+(L<<20&4294967295|L>>>12),L=b+(I^M^V)+k[5]+4294588738&4294967295,b=I+(L<<4&4294967295|L>>>28),L=V+(b^I^M)+k[8]+2272392833&4294967295,V=b+(L<<11&4294967295|L>>>21),L=M+(V^b^I)+k[11]+1839030562&4294967295,M=V+(L<<16&4294967295|L>>>16),L=I+(M^V^b)+k[14]+4259657740&4294967295,I=M+(L<<23&4294967295|L>>>9),L=b+(I^M^V)+k[1]+2763975236&4294967295,b=I+(L<<4&4294967295|L>>>28),L=V+(b^I^M)+k[4]+1272893353&4294967295,V=b+(L<<11&4294967295|L>>>21),L=M+(V^b^I)+k[7]+4139469664&4294967295,M=V+(L<<16&4294967295|L>>>16),L=I+(M^V^b)+k[10]+3200236656&4294967295,I=M+(L<<23&4294967295|L>>>9),L=b+(I^M^V)+k[13]+681279174&4294967295,b=I+(L<<4&4294967295|L>>>28),L=V+(b^I^M)+k[0]+3936430074&4294967295,V=b+(L<<11&4294967295|L>>>21),L=M+(V^b^I)+k[3]+3572445317&4294967295,M=V+(L<<16&4294967295|L>>>16),L=I+(M^V^b)+k[6]+76029189&4294967295,I=M+(L<<23&4294967295|L>>>9),L=b+(I^M^V)+k[9]+3654602809&4294967295,b=I+(L<<4&4294967295|L>>>28),L=V+(b^I^M)+k[12]+3873151461&4294967295,V=b+(L<<11&4294967295|L>>>21),L=M+(V^b^I)+k[15]+530742520&4294967295,M=V+(L<<16&4294967295|L>>>16),L=I+(M^V^b)+k[2]+3299628645&4294967295,I=M+(L<<23&4294967295|L>>>9),L=b+(M^(I|~V))+k[0]+4096336452&4294967295,b=I+(L<<6&4294967295|L>>>26),L=V+(I^(b|~M))+k[7]+1126891415&4294967295,V=b+(L<<10&4294967295|L>>>22),L=M+(b^(V|~I))+k[14]+2878612391&4294967295,M=V+(L<<15&4294967295|L>>>17),L=I+(V^(M|~b))+k[5]+4237533241&4294967295,I=M+(L<<21&4294967295|L>>>11),L=b+(M^(I|~V))+k[12]+1700485571&4294967295,b=I+(L<<6&4294967295|L>>>26),L=V+(I^(b|~M))+k[3]+2399980690&4294967295,V=b+(L<<10&4294967295|L>>>22),L=M+(b^(V|~I))+k[10]+4293915773&4294967295,M=V+(L<<15&4294967295|L>>>17),L=I+(V^(M|~b))+k[1]+2240044497&4294967295,I=M+(L<<21&4294967295|L>>>11),L=b+(M^(I|~V))+k[8]+1873313359&4294967295,b=I+(L<<6&4294967295|L>>>26),L=V+(I^(b|~M))+k[15]+4264355552&4294967295,V=b+(L<<10&4294967295|L>>>22),L=M+(b^(V|~I))+k[6]+2734768916&4294967295,M=V+(L<<15&4294967295|L>>>17),L=I+(V^(M|~b))+k[13]+1309151649&4294967295,I=M+(L<<21&4294967295|L>>>11),L=b+(M^(I|~V))+k[4]+4149444226&4294967295,b=I+(L<<6&4294967295|L>>>26),L=V+(I^(b|~M))+k[11]+3174756917&4294967295,V=b+(L<<10&4294967295|L>>>22),L=M+(b^(V|~I))+k[2]+718787259&4294967295,M=V+(L<<15&4294967295|L>>>17),L=I+(V^(M|~b))+k[9]+3951481745&4294967295,N.g[0]=N.g[0]+b&4294967295,N.g[1]=N.g[1]+(M+(L<<21&4294967295|L>>>11))&4294967295,N.g[2]=N.g[2]+M&4294967295,N.g[3]=N.g[3]+V&4294967295}r.prototype.v=function(N,b){b===void 0&&(b=N.length);const I=b-this.blockSize,k=this.C;let M=this.h,V=0;for(;V<b;){if(M==0)for(;V<=I;)i(this,N,V),V+=this.blockSize;if(typeof N=="string"){for(;V<b;)if(k[M++]=N.charCodeAt(V++),M==this.blockSize){i(this,k),M=0;break}}else for(;V<b;)if(k[M++]=N[V++],M==this.blockSize){i(this,k),M=0;break}}this.h=M,this.o+=b},r.prototype.A=function(){var N=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);N[0]=128;for(var b=1;b<N.length-8;++b)N[b]=0;b=this.o*8;for(var I=N.length-8;I<N.length;++I)N[I]=b&255,b/=256;for(this.v(N),N=Array(16),b=0,I=0;I<4;++I)for(let k=0;k<32;k+=8)N[b++]=this.g[I]>>>k&255;return N};function a(N,b){var I=c;return Object.prototype.hasOwnProperty.call(I,N)?I[N]:I[N]=b(N)}function o(N,b){this.h=b;const I=[];let k=!0;for(let M=N.length-1;M>=0;M--){const V=N[M]|0;k&&V==b||(I[M]=V,k=!1)}this.g=I}var c={};function u(N){return-128<=N&&N<128?a(N,function(b){return new o([b|0],b<0?-1:0)}):new o([N|0],N<0?-1:0)}function h(N){if(isNaN(N)||!isFinite(N))return g;if(N<0)return D(h(-N));const b=[];let I=1;for(let k=0;N>=I;k++)b[k]=N/I|0,I*=4294967296;return new o(b,0)}function p(N,b){if(N.length==0)throw Error("number format error: empty string");if(b=b||10,b<2||36<b)throw Error("radix out of range: "+b);if(N.charAt(0)=="-")return D(p(N.substring(1),b));if(N.indexOf("-")>=0)throw Error('number format error: interior "-" character');const I=h(Math.pow(b,8));let k=g;for(let V=0;V<N.length;V+=8){var M=Math.min(8,N.length-V);const L=parseInt(N.substring(V,V+M),b);M<8?(M=h(Math.pow(b,M)),k=k.j(M).add(h(L))):(k=k.j(I),k=k.add(h(L)))}return k}var g=u(0),_=u(1),E=u(16777216);n=o.prototype,n.m=function(){if(S(this))return-D(this).m();let N=0,b=1;for(let I=0;I<this.g.length;I++){const k=this.i(I);N+=(k>=0?k:4294967296+k)*b,b*=4294967296}return N},n.toString=function(N){if(N=N||10,N<2||36<N)throw Error("radix out of range: "+N);if(w(this))return"0";if(S(this))return"-"+D(this).toString(N);const b=h(Math.pow(N,6));var I=this;let k="";for(;;){const M=z(I,b).g;I=T(I,M.j(b));let V=((I.g.length>0?I.g[0]:I.h)>>>0).toString(N);if(I=M,w(I))return V+k;for(;V.length<6;)V="0"+V;k=V+k}},n.i=function(N){return N<0?0:N<this.g.length?this.g[N]:this.h};function w(N){if(N.h!=0)return!1;for(let b=0;b<N.g.length;b++)if(N.g[b]!=0)return!1;return!0}function S(N){return N.h==-1}n.l=function(N){return N=T(this,N),S(N)?-1:w(N)?0:1};function D(N){const b=N.g.length,I=[];for(let k=0;k<b;k++)I[k]=~N.g[k];return new o(I,~N.h).add(_)}n.abs=function(){return S(this)?D(this):this},n.add=function(N){const b=Math.max(this.g.length,N.g.length),I=[];let k=0;for(let M=0;M<=b;M++){let V=k+(this.i(M)&65535)+(N.i(M)&65535),L=(V>>>16)+(this.i(M)>>>16)+(N.i(M)>>>16);k=L>>>16,V&=65535,L&=65535,I[M]=L<<16|V}return new o(I,I[I.length-1]&-2147483648?-1:0)};function T(N,b){return N.add(D(b))}n.j=function(N){if(w(this)||w(N))return g;if(S(this))return S(N)?D(this).j(D(N)):D(D(this).j(N));if(S(N))return D(this.j(D(N)));if(this.l(E)<0&&N.l(E)<0)return h(this.m()*N.m());const b=this.g.length+N.g.length,I=[];for(var k=0;k<2*b;k++)I[k]=0;for(k=0;k<this.g.length;k++)for(let M=0;M<N.g.length;M++){const V=this.i(k)>>>16,L=this.i(k)&65535,ie=N.i(M)>>>16,we=N.i(M)&65535;I[2*k+2*M]+=L*we,O(I,2*k+2*M),I[2*k+2*M+1]+=V*we,O(I,2*k+2*M+1),I[2*k+2*M+1]+=L*ie,O(I,2*k+2*M+1),I[2*k+2*M+2]+=V*ie,O(I,2*k+2*M+2)}for(N=0;N<b;N++)I[N]=I[2*N+1]<<16|I[2*N];for(N=b;N<2*b;N++)I[N]=0;return new o(I,0)};function O(N,b){for(;(N[b]&65535)!=N[b];)N[b+1]+=N[b]>>>16,N[b]&=65535,b++}function j(N,b){this.g=N,this.h=b}function z(N,b){if(w(b))throw Error("division by zero");if(w(N))return new j(g,g);if(S(N))return b=z(D(N),b),new j(D(b.g),D(b.h));if(S(b))return b=z(N,D(b)),new j(D(b.g),b.h);if(N.g.length>30){if(S(N)||S(b))throw Error("slowDivide_ only works with positive integers.");for(var I=_,k=b;k.l(N)<=0;)I=H(I),k=H(k);var M=q(I,1),V=q(k,1);for(k=q(k,2),I=q(I,2);!w(k);){var L=V.add(k);L.l(N)<=0&&(M=M.add(I),V=L),k=q(k,1),I=q(I,1)}return b=T(N,M.j(b)),new j(M,b)}for(M=g;N.l(b)>=0;){for(I=Math.max(1,Math.floor(N.m()/b.m())),k=Math.ceil(Math.log(I)/Math.LN2),k=k<=48?1:Math.pow(2,k-48),V=h(I),L=V.j(b);S(L)||L.l(N)>0;)I-=k,V=h(I),L=V.j(b);w(V)&&(V=_),M=M.add(V),N=T(N,L)}return new j(M,N)}n.B=function(N){return z(this,N).h},n.and=function(N){const b=Math.max(this.g.length,N.g.length),I=[];for(let k=0;k<b;k++)I[k]=this.i(k)&N.i(k);return new o(I,this.h&N.h)},n.or=function(N){const b=Math.max(this.g.length,N.g.length),I=[];for(let k=0;k<b;k++)I[k]=this.i(k)|N.i(k);return new o(I,this.h|N.h)},n.xor=function(N){const b=Math.max(this.g.length,N.g.length),I=[];for(let k=0;k<b;k++)I[k]=this.i(k)^N.i(k);return new o(I,this.h^N.h)};function H(N){const b=N.g.length+1,I=[];for(let k=0;k<b;k++)I[k]=N.i(k)<<1|N.i(k-1)>>>31;return new o(I,N.h)}function q(N,b){const I=b>>5;b%=32;const k=N.g.length-I,M=[];for(let V=0;V<k;V++)M[V]=b>0?N.i(V+I)>>>b|N.i(V+I+1)<<32-b:N.i(V+I);return new o(M,N.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,mC=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=h,o.fromString=p,$s=o}).apply(typeof mw<"u"?mw:typeof self<"u"?self:typeof window<"u"?window:{});var wd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var gC,Zu,vC,zd,Mg,yC,_C,xC;(function(){var n,e=Object.defineProperty;function t(v){v=[typeof globalThis=="object"&&globalThis,v,typeof window=="object"&&window,typeof self=="object"&&self,typeof wd=="object"&&wd];for(var A=0;A<v.length;++A){var R=v[A];if(R&&R.Math==Math)return R}throw Error("Cannot find global object")}var r=t(this);function i(v,A){if(A)e:{var R=r;v=v.split(".");for(var U=0;U<v.length-1;U++){var W=v[U];if(!(W in R))break e;R=R[W]}v=v[v.length-1],U=R[v],A=A(U),A!=U&&A!=null&&e(R,v,{configurable:!0,writable:!0,value:A})}}i("Symbol.dispose",function(v){return v||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(v){return v||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(v){return v||function(A){var R=[],U;for(U in A)Object.prototype.hasOwnProperty.call(A,U)&&R.push([U,A[U]]);return R}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},o=this||self;function c(v){var A=typeof v;return A=="object"&&v!=null||A=="function"}function u(v,A,R){return v.call.apply(v.bind,arguments)}function h(v,A,R){return h=u,h.apply(null,arguments)}function p(v,A){var R=Array.prototype.slice.call(arguments,1);return function(){var U=R.slice();return U.push.apply(U,arguments),v.apply(this,U)}}function g(v,A){function R(){}R.prototype=A.prototype,v.Z=A.prototype,v.prototype=new R,v.prototype.constructor=v,v.Ob=function(U,W,ne){for(var ve=Array(arguments.length-2),$e=2;$e<arguments.length;$e++)ve[$e-2]=arguments[$e];return A.prototype[W].apply(U,ve)}}var _=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?v=>v&&AsyncContext.Snapshot.wrap(v):v=>v;function E(v){const A=v.length;if(A>0){const R=Array(A);for(let U=0;U<A;U++)R[U]=v[U];return R}return[]}function w(v,A){for(let U=1;U<arguments.length;U++){const W=arguments[U];var R=typeof W;if(R=R!="object"?R:W?Array.isArray(W)?"array":R:"null",R=="array"||R=="object"&&typeof W.length=="number"){R=v.length||0;const ne=W.length||0;v.length=R+ne;for(let ve=0;ve<ne;ve++)v[R+ve]=W[ve]}else v.push(W)}}class S{constructor(A,R){this.i=A,this.j=R,this.h=0,this.g=null}get(){let A;return this.h>0?(this.h--,A=this.g,this.g=A.next,A.next=null):A=this.i(),A}}function D(v){o.setTimeout(()=>{throw v},0)}function T(){var v=N;let A=null;return v.g&&(A=v.g,v.g=v.g.next,v.g||(v.h=null),A.next=null),A}class O{constructor(){this.h=this.g=null}add(A,R){const U=j.get();U.set(A,R),this.h?this.h.next=U:this.g=U,this.h=U}}var j=new S(()=>new z,v=>v.reset());class z{constructor(){this.next=this.g=this.h=null}set(A,R){this.h=A,this.g=R,this.next=null}reset(){this.next=this.g=this.h=null}}let H,q=!1,N=new O,b=()=>{const v=Promise.resolve(void 0);H=()=>{v.then(I)}};function I(){for(var v;v=T();){try{v.h.call(v.g)}catch(R){D(R)}var A=j;A.j(v),A.h<100&&(A.h++,v.next=A.g,A.g=v)}q=!1}function k(){this.u=this.u,this.C=this.C}k.prototype.u=!1,k.prototype.dispose=function(){this.u||(this.u=!0,this.N())},k.prototype[Symbol.dispose]=function(){this.dispose()},k.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function M(v,A){this.type=v,this.g=this.target=A,this.defaultPrevented=!1}M.prototype.h=function(){this.defaultPrevented=!0};var V=(function(){if(!o.addEventListener||!Object.defineProperty)return!1;var v=!1,A=Object.defineProperty({},"passive",{get:function(){v=!0}});try{const R=()=>{};o.addEventListener("test",R,A),o.removeEventListener("test",R,A)}catch{}return v})();function L(v){return/^[\s\xa0]*$/.test(v)}function ie(v,A){M.call(this,v?v.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,v&&this.init(v,A)}g(ie,M),ie.prototype.init=function(v,A){const R=this.type=v.type,U=v.changedTouches&&v.changedTouches.length?v.changedTouches[0]:null;this.target=v.target||v.srcElement,this.g=A,A=v.relatedTarget,A||(R=="mouseover"?A=v.fromElement:R=="mouseout"&&(A=v.toElement)),this.relatedTarget=A,U?(this.clientX=U.clientX!==void 0?U.clientX:U.pageX,this.clientY=U.clientY!==void 0?U.clientY:U.pageY,this.screenX=U.screenX||0,this.screenY=U.screenY||0):(this.clientX=v.clientX!==void 0?v.clientX:v.pageX,this.clientY=v.clientY!==void 0?v.clientY:v.pageY,this.screenX=v.screenX||0,this.screenY=v.screenY||0),this.button=v.button,this.key=v.key||"",this.ctrlKey=v.ctrlKey,this.altKey=v.altKey,this.shiftKey=v.shiftKey,this.metaKey=v.metaKey,this.pointerId=v.pointerId||0,this.pointerType=v.pointerType,this.state=v.state,this.i=v,v.defaultPrevented&&ie.Z.h.call(this)},ie.prototype.h=function(){ie.Z.h.call(this);const v=this.i;v.preventDefault?v.preventDefault():v.returnValue=!1};var we="closure_listenable_"+(Math.random()*1e6|0),F=0;function se(v,A,R,U,W){this.listener=v,this.proxy=null,this.src=A,this.type=R,this.capture=!!U,this.ha=W,this.key=++F,this.da=this.fa=!1}function he(v){v.da=!0,v.listener=null,v.proxy=null,v.src=null,v.ha=null}function Ie(v,A,R){for(const U in v)A.call(R,v[U],U,v)}function De(v,A){for(const R in v)A.call(void 0,v[R],R,v)}function X(v){const A={};for(const R in v)A[R]=v[R];return A}const te="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function pe(v,A){let R,U;for(let W=1;W<arguments.length;W++){U=arguments[W];for(R in U)v[R]=U[R];for(let ne=0;ne<te.length;ne++)R=te[ne],Object.prototype.hasOwnProperty.call(U,R)&&(v[R]=U[R])}}function ye(v){this.src=v,this.g={},this.h=0}ye.prototype.add=function(v,A,R,U,W){const ne=v.toString();v=this.g[ne],v||(v=this.g[ne]=[],this.h++);const ve=Ne(v,A,U,W);return ve>-1?(A=v[ve],R||(A.fa=!1)):(A=new se(A,this.src,ne,!!U,W),A.fa=R,v.push(A)),A};function Te(v,A){const R=A.type;if(R in v.g){var U=v.g[R],W=Array.prototype.indexOf.call(U,A,void 0),ne;(ne=W>=0)&&Array.prototype.splice.call(U,W,1),ne&&(he(A),v.g[R].length==0&&(delete v.g[R],v.h--))}}function Ne(v,A,R,U){for(let W=0;W<v.length;++W){const ne=v[W];if(!ne.da&&ne.listener==A&&ne.capture==!!R&&ne.ha==U)return W}return-1}var xe="closure_lm_"+(Math.random()*1e6|0),Qe={};function Ze(v,A,R,U,W){if(Array.isArray(A)){for(let ne=0;ne<A.length;ne++)Ze(v,A[ne],R,U,W);return null}return R=lt(R),v&&v[we]?v.J(A,R,c(U)?!!U.capture:!1,W):sn(v,A,R,!1,U,W)}function sn(v,A,R,U,W,ne){if(!A)throw Error("Invalid event type");const ve=c(W)?!!W.capture:!!W;let $e=gt(v);if($e||(v[xe]=$e=new ye(v)),R=$e.add(A,R,U,ve,ne),R.proxy)return R;if(U=me(),R.proxy=U,U.src=v,U.listener=R,v.addEventListener)V||(W=ve),W===void 0&&(W=!1),v.addEventListener(A.toString(),U,W);else if(v.attachEvent)v.attachEvent(Ue(A.toString()),U);else if(v.addListener&&v.removeListener)v.addListener(U);else throw Error("addEventListener and attachEvent are unavailable.");return R}function me(){function v(R){return A.call(v.src,v.listener,R)}const A=Gt;return v}function Fe(v,A,R,U,W){if(Array.isArray(A))for(var ne=0;ne<A.length;ne++)Fe(v,A[ne],R,U,W);else U=c(U)?!!U.capture:!!U,R=lt(R),v&&v[we]?(v=v.i,ne=String(A).toString(),ne in v.g&&(A=v.g[ne],R=Ne(A,R,U,W),R>-1&&(he(A[R]),Array.prototype.splice.call(A,R,1),A.length==0&&(delete v.g[ne],v.h--)))):v&&(v=gt(v))&&(A=v.g[A.toString()],v=-1,A&&(v=Ne(A,R,U,W)),(R=v>-1?A[v]:null)&&He(R))}function He(v){if(typeof v!="number"&&v&&!v.da){var A=v.src;if(A&&A[we])Te(A.i,v);else{var R=v.type,U=v.proxy;A.removeEventListener?A.removeEventListener(R,U,v.capture):A.detachEvent?A.detachEvent(Ue(R),U):A.addListener&&A.removeListener&&A.removeListener(U),(R=gt(A))?(Te(R,v),R.h==0&&(R.src=null,A[xe]=null)):he(v)}}}function Ue(v){return v in Qe?Qe[v]:Qe[v]="on"+v}function Gt(v,A){if(v.da)v=!0;else{A=new ie(A,this);const R=v.listener,U=v.ha||v.src;v.fa&&He(v),v=R.call(U,A)}return v}function gt(v){return v=v[xe],v instanceof ye?v:null}var kn="__closure_events_fn_"+(Math.random()*1e9>>>0);function lt(v){return typeof v=="function"?v:(v[kn]||(v[kn]=function(A){return v.handleEvent(A)}),v[kn])}function Ge(){k.call(this),this.i=new ye(this),this.M=this,this.G=null}g(Ge,k),Ge.prototype[we]=!0,Ge.prototype.removeEventListener=function(v,A,R,U){Fe(this,v,A,R,U)};function Et(v,A){var R,U=v.G;if(U)for(R=[];U;U=U.G)R.push(U);if(v=v.M,U=A.type||A,typeof A=="string")A=new M(A,v);else if(A instanceof M)A.target=A.target||v;else{var W=A;A=new M(U,v),pe(A,W)}W=!0;let ne,ve;if(R)for(ve=R.length-1;ve>=0;ve--)ne=A.g=R[ve],W=$n(ne,U,!0,A)&&W;if(ne=A.g=v,W=$n(ne,U,!0,A)&&W,W=$n(ne,U,!1,A)&&W,R)for(ve=0;ve<R.length;ve++)ne=A.g=R[ve],W=$n(ne,U,!1,A)&&W}Ge.prototype.N=function(){if(Ge.Z.N.call(this),this.i){var v=this.i;for(const A in v.g){const R=v.g[A];for(let U=0;U<R.length;U++)he(R[U]);delete v.g[A],v.h--}}this.G=null},Ge.prototype.J=function(v,A,R,U){return this.i.add(String(v),A,!1,R,U)},Ge.prototype.K=function(v,A,R,U){return this.i.add(String(v),A,!0,R,U)};function $n(v,A,R,U){if(A=v.i.g[String(A)],!A)return!0;A=A.concat();let W=!0;for(let ne=0;ne<A.length;++ne){const ve=A[ne];if(ve&&!ve.da&&ve.capture==R){const $e=ve.listener,ln=ve.ha||ve.src;ve.fa&&Te(v.i,ve),W=$e.call(ln,U)!==!1&&W}}return W&&!U.defaultPrevented}function es(v,A){if(typeof v!="function")if(v&&typeof v.handleEvent=="function")v=h(v.handleEvent,v);else throw Error("Invalid listener argument");return Number(A)>2147483647?-1:o.setTimeout(v,A||0)}function le(v){v.g=es(()=>{v.g=null,v.i&&(v.i=!1,le(v))},v.l);const A=v.h;v.h=null,v.m.apply(null,A)}class Ee extends k{constructor(A,R){super(),this.m=A,this.l=R,this.h=null,this.i=!1,this.g=null}j(A){this.h=arguments,this.g?this.i=!0:le(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ke(v){k.call(this),this.h=v,this.g={}}g(Ke,k);var Wt=[];function dr(v){Ie(v.g,function(A,R){this.g.hasOwnProperty(R)&&He(A)},v),v.g={}}Ke.prototype.N=function(){Ke.Z.N.call(this),dr(this)},Ke.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Xn=o.JSON.stringify,di=o.JSON.parse,qe=class{stringify(v){return o.JSON.stringify(v,void 0)}parse(v){return o.JSON.parse(v,void 0)}};function jt(){}function Kn(){}var Nt={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Qt(){M.call(this,"d")}g(Qt,M);function $r(){M.call(this,"c")}g($r,M);var on={},Yf=null;function cl(){return Yf=Yf||new Ge}on.Ia="serverreachability";function Wf(v){M.call(this,on.Ia,v)}g(Wf,M);function Vi(v){const A=cl();Et(A,new Wf(A))}on.STAT_EVENT="statevent";function ho(v,A){M.call(this,on.STAT_EVENT,v),this.stat=A}g(ho,M);function pn(v){const A=cl();Et(A,new ho(A,v))}on.Ja="timingevent";function Fi(v,A){M.call(this,on.Ja,v),this.size=A}g(Fi,M);function Ui(v,A){if(typeof v!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){v()},A)}function pi(){this.g=!0}pi.prototype.ua=function(){this.g=!1};function Ep(v,A,R,U,W,ne){v.info(function(){if(v.g)if(ne){var ve="",$e=ne.split("&");for(let vt=0;vt<$e.length;vt++){var ln=$e[vt].split("=");if(ln.length>1){const qt=ln[0];ln=ln[1];const Wr=qt.split("_");ve=Wr.length>=2&&Wr[1]=="type"?ve+(qt+"="+ln+"&"):ve+(qt+"=redacted&")}}}else ve=null;else ve=ne;return"XMLHTTP REQ ("+U+") [attempt "+W+"]: "+A+`
`+R+`
`+ve})}function Qf(v,A,R,U,W,ne,ve){v.info(function(){return"XMLHTTP RESP ("+U+") [ attempt "+W+"]: "+A+`
`+R+`
`+ne+" "+ve})}function zi(v,A,R,U){v.info(function(){return"XMLHTTP TEXT ("+A+"): "+wp(v,R)+(U?" "+U:"")})}function po(v,A){v.info(function(){return"TIMEOUT: "+A})}pi.prototype.info=function(){};function wp(v,A){if(!v.g)return A;if(!A)return null;try{const ne=JSON.parse(A);if(ne){for(v=0;v<ne.length;v++)if(Array.isArray(ne[v])){var R=ne[v];if(!(R.length<2)){var U=R[1];if(Array.isArray(U)&&!(U.length<1)){var W=U[0];if(W!="noop"&&W!="stop"&&W!="close")for(let ve=1;ve<U.length;ve++)U[ve]=""}}}}return Xn(ne)}catch{return A}}var mo={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Gc={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},qc;function go(){}g(go,jt),go.prototype.g=function(){return new XMLHttpRequest},qc=new go;function Ea(v){return encodeURIComponent(String(v))}function Zf(v){var A=1;v=v.split(":");const R=[];for(;A>0&&v.length;)R.push(v.shift()),A--;return v.length&&R.push(v.join(":")),R}function mi(v,A,R,U){this.j=v,this.i=A,this.l=R,this.S=U||1,this.V=new Ke(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new gi}function gi(){this.i=null,this.g="",this.h=!1}var mn={},Ln={};function Hi(v,A,R){v.M=1,v.A=vo(vn(A)),v.u=R,v.R=!0,ul(v,null)}function ul(v,A){v.F=Date.now(),Gi(v),v.B=vn(v.A);var R=v.B,U=v.S;Array.isArray(U)||(U=[String(U)]),pl(R.i,"t",U),v.C=0,R=v.j.L,v.h=new gi,v.g=dh(v.j,R?A:null,!v.u),v.P>0&&(v.O=new Ee(h(v.Y,v,v.g),v.P)),A=v.V,R=v.g,U=v.ba;var W="readystatechange";Array.isArray(W)||(W&&(Wt[0]=W.toString()),W=Wt);for(let ne=0;ne<W.length;ne++){const ve=Ze(R,W[ne],U||A.handleEvent,!1,A.h||A);if(!ve)break;A.g[ve.key]=ve}A=v.J?X(v.J):{},v.u?(v.v||(v.v="POST"),A["Content-Type"]="application/x-www-form-urlencoded",v.g.ea(v.B,v.v,v.u,A)):(v.v="GET",v.g.ea(v.B,v.v,null,A)),Vi(),Ep(v.i,v.v,v.B,v.l,v.S,v.u)}mi.prototype.ba=function(v){v=v.target;const A=this.O;A&&_i(v)==3?A.j():this.Y(v)},mi.prototype.Y=function(v){try{if(v==this.g)e:{const $e=_i(this.g),ln=this.g.ya(),vt=this.g.ca();if(!($e<3)&&($e!=3||this.g&&(this.h.h||this.g.la()||Yn(this.g)))){this.K||$e!=4||ln==7||(ln==8||vt<=0?Vi(3):Vi(2)),qi(this);var A=this.g.ca();this.X=A;var R=Ap(this);if(this.o=A==200,Qf(this.i,this.v,this.B,this.l,this.S,$e,A),this.o){if(this.U&&!this.L){t:{if(this.g){var U,W=this.g;if((U=W.g?W.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!L(U)){var ne=U;break t}}ne=null}if(v=ne)zi(this.i,this.l,v,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,$i(this,v);else{this.o=!1,this.m=3,pn(12),Mr(this),Xr(this);break e}}if(this.R){v=!0;let qt;for(;!this.K&&this.C<R.length;)if(qt=eh(this,R),qt==Ln){$e==4&&(this.m=4,pn(14),v=!1),zi(this.i,this.l,null,"[Incomplete Response]");break}else if(qt==mn){this.m=4,pn(15),zi(this.i,this.l,R,"[Invalid Chunk]"),v=!1;break}else zi(this.i,this.l,qt,null),$i(this,qt);if(Jf(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),$e!=4||R.length!=0||this.h.h||(this.m=1,pn(16),v=!1),this.o=this.o&&v,!v)zi(this.i,this.l,R,"[Invalid Chunked Response]"),Mr(this),Xr(this);else if(R.length>0&&!this.W){this.W=!0;var ve=this.j;ve.g==this&&ve.aa&&!ve.P&&(ve.j.info("Great, no buffering proxy detected. Bytes received: "+R.length),su(ve),ve.P=!0,pn(11))}}else zi(this.i,this.l,R,null),$i(this,R);$e==4&&Mr(this),this.o&&!this.K&&($e==4?ch(this.j,this):(this.o=!1,Gi(this)))}else Aa(this.g),A==400&&R.indexOf("Unknown SID")>0?(this.m=3,pn(12)):(this.m=0,pn(13)),Mr(this),Xr(this)}}}catch{}finally{}};function Ap(v){if(!Jf(v))return v.g.la();const A=Yn(v.g);if(A==="")return"";let R="";const U=A.length,W=_i(v.g)==4;if(!v.h.i){if(typeof TextDecoder>"u")return Mr(v),Xr(v),"";v.h.i=new o.TextDecoder}for(let ne=0;ne<U;ne++)v.h.h=!0,R+=v.h.i.decode(A[ne],{stream:!(W&&ne==U-1)});return A.length=0,v.h.g+=R,v.C=0,v.h.g}function Jf(v){return v.g?v.v=="GET"&&v.M!=2&&v.j.Aa:!1}function eh(v,A){var R=v.C,U=A.indexOf(`
`,R);return U==-1?Ln:(R=Number(A.substring(R,U)),isNaN(R)?mn:(U+=1,U+R>A.length?Ln:(A=A.slice(U,U+R),v.C=U+R,A)))}mi.prototype.cancel=function(){this.K=!0,Mr(this)};function Gi(v){v.T=Date.now()+v.H,fl(v,v.H)}function fl(v,A){if(v.D!=null)throw Error("WatchDog timer not null");v.D=Ui(h(v.aa,v),A)}function qi(v){v.D&&(o.clearTimeout(v.D),v.D=null)}mi.prototype.aa=function(){this.D=null;const v=Date.now();v-this.T>=0?(po(this.i,this.B),this.M!=2&&(Vi(),pn(17)),Mr(this),this.m=2,Xr(this)):fl(this,this.T-v)};function Xr(v){v.j.I==0||v.K||ch(v.j,v)}function Mr(v){qi(v);var A=v.O;A&&typeof A.dispose=="function"&&A.dispose(),v.O=null,dr(v.V),v.g&&(A=v.g,v.g=null,A.abort(),A.dispose())}function $i(v,A){try{var R=v.j;if(R.I!=0&&(R.g==v||Ki(R.h,v))){if(!v.L&&Ki(R.h,v)&&R.I==3){try{var U=R.Ba.g.parse(A)}catch{U=null}if(Array.isArray(U)&&U.length==3){var W=U;if(W[0]==0){e:if(!R.v){if(R.g)if(R.g.F+3e3<v.F)_l(R),ls(R);else break e;bo(R),pn(18)}}else R.xa=W[1],0<R.xa-R.K&&W[2]<37500&&R.F&&R.A==0&&!R.C&&(R.C=Ui(h(R.Va,R),6e3));Xi(R.h)<=1&&R.ta&&(R.ta=void 0)}else ea(R,11)}else if((v.L||R.g==v)&&_l(R),!L(A))for(W=R.Ba.g.parse(A),A=0;A<W.length;A++){let vt=W[A];const qt=vt[0];if(!(qt<=R.K))if(R.K=qt,vt=vt[1],R.I==2)if(vt[0]=="c"){R.M=vt[1],R.ba=vt[2];const Wr=vt[3];Wr!=null&&(R.ka=Wr,R.j.info("VER="+R.ka));const ta=vt[4];ta!=null&&(R.za=ta,R.j.info("SVER="+R.za));const xi=vt[5];xi!=null&&typeof xi=="number"&&xi>0&&(U=1.5*xi,R.O=U,R.j.info("backChannelRequestTimeoutMs_="+U)),U=R;const Ei=v.g;if(Ei){const So=Ei.g?Ei.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(So){var ne=U.h;ne.g||So.indexOf("spdy")==-1&&So.indexOf("quic")==-1&&So.indexOf("h2")==-1||(ne.j=ne.l,ne.g=new Set,ne.h&&(Kc(ne,ne.h),ne.h=null))}if(U.G){const xl=Ei.g?Ei.g.getResponseHeader("X-HTTP-Session-Id"):null;xl&&(U.wa=xl,At(U.J,U.G,xl))}}R.I=3,R.l&&R.l.ra(),R.aa&&(R.T=Date.now()-v.F,R.j.info("Handshake RTT: "+R.T+"ms")),U=R;var ve=v;if(U.na=hh(U,U.L?U.ba:null,U.W),ve.L){Yc(U.h,ve);var $e=ve,ln=U.O;ln&&($e.H=ln),$e.D&&(qi($e),Gi($e)),U.g=ve}else oh(U);R.i.length>0&&Ji(R)}else vt[0]!="stop"&&vt[0]!="close"||ea(R,7);else R.I==3&&(vt[0]=="stop"||vt[0]=="close"?vt[0]=="stop"?ea(R,7):iu(R):vt[0]!="noop"&&R.l&&R.l.qa(vt),R.A=0)}}Vi(4)}catch{}}var gn=class{constructor(v,A){this.g=v,this.map=A}};function $c(v){this.l=v||10,o.PerformanceNavigationTiming?(v=o.performance.getEntriesByType("navigation"),v=v.length>0&&(v[0].nextHopProtocol=="hq"||v[0].nextHopProtocol=="h2")):v=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=v?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Xc(v){return v.h?!0:v.g?v.g.size>=v.j:!1}function Xi(v){return v.h?1:v.g?v.g.size:0}function Ki(v,A){return v.h?v.h==A:v.g?v.g.has(A):!1}function Kc(v,A){v.g?v.g.add(A):v.h=A}function Yc(v,A){v.h&&v.h==A?v.h=null:v.g&&v.g.has(A)&&v.g.delete(A)}$c.prototype.cancel=function(){if(this.i=Wc(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const v of this.g.values())v.cancel();this.g.clear()}};function Wc(v){if(v.h!=null)return v.i.concat(v.h.G);if(v.g!=null&&v.g.size!==0){let A=v.i;for(const R of v.g.values())A=A.concat(R.G);return A}return E(v.i)}var th=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function hl(v,A){if(v){v=v.split("&");for(let R=0;R<v.length;R++){const U=v[R].indexOf("=");let W,ne=null;U>=0?(W=v[R].substring(0,U),ne=v[R].substring(U+1)):W=v[R],A(W,ne?decodeURIComponent(ne.replace(/\+/g," ")):"")}}}function Pr(v){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let A;v instanceof Pr?(this.l=v.l,jn(this,v.j),this.o=v.o,this.g=v.g,ts(this,v.u),this.h=v.h,Qc(this,ah(v.i)),this.m=v.m):v&&(A=String(v).match(th))?(this.l=!1,jn(this,A[1]||"",!0),this.o=Yi(A[2]||""),this.g=Yi(A[3]||"",!0),ts(this,A[4]),this.h=Yi(A[5]||"",!0),Qc(this,A[6]||"",!0),this.m=Yi(A[7]||"")):(this.l=!1,this.i=new rs(null,this.l))}Pr.prototype.toString=function(){const v=[];var A=this.j;A&&v.push(yo(A,dl,!0),":");var R=this.g;return(R||A=="file")&&(v.push("//"),(A=this.o)&&v.push(yo(A,dl,!0),"@"),v.push(Ea(R).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),R=this.u,R!=null&&v.push(":",String(R))),(R=this.h)&&(this.g&&R.charAt(0)!="/"&&v.push("/"),v.push(yo(R,R.charAt(0)=="/"?Zc:nh,!0))),(R=this.i.toString())&&v.push("?",R),(R=this.m)&&v.push("#",yo(R,rh)),v.join("")},Pr.prototype.resolve=function(v){const A=vn(this);let R=!!v.j;R?jn(A,v.j):R=!!v.o,R?A.o=v.o:R=!!v.g,R?A.g=v.g:R=v.u!=null;var U=v.h;if(R)ts(A,v.u);else if(R=!!v.h){if(U.charAt(0)!="/")if(this.g&&!this.h)U="/"+U;else{var W=A.h.lastIndexOf("/");W!=-1&&(U=A.h.slice(0,W+1)+U)}if(W=U,W==".."||W==".")U="";else if(W.indexOf("./")!=-1||W.indexOf("/.")!=-1){U=W.lastIndexOf("/",0)==0,W=W.split("/");const ne=[];for(let ve=0;ve<W.length;){const $e=W[ve++];$e=="."?U&&ve==W.length&&ne.push(""):$e==".."?((ne.length>1||ne.length==1&&ne[0]!="")&&ne.pop(),U&&ve==W.length&&ne.push("")):(ne.push($e),U=!0)}U=ne.join("/")}else U=W}return R?A.h=U:R=v.i.toString()!=="",R?Qc(A,ah(v.i)):R=!!v.m,R&&(A.m=v.m),A};function vn(v){return new Pr(v)}function jn(v,A,R){v.j=R?Yi(A,!0):A,v.j&&(v.j=v.j.replace(/:$/,""))}function ts(v,A){if(A){if(A=Number(A),isNaN(A)||A<0)throw Error("Bad port number "+A);v.u=A}else v.u=null}function Qc(v,A,R){A instanceof rs?(v.i=A,ml(v.i,v.l)):(R||(A=yo(A,ns)),v.i=new rs(A,v.l))}function At(v,A,R){v.i.set(A,R)}function vo(v){return At(v,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),v}function Yi(v,A){return v?A?decodeURI(v.replace(/%25/g,"%2525")):decodeURIComponent(v):""}function yo(v,A,R){return typeof v=="string"?(v=encodeURI(v).replace(A,xr),R&&(v=v.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v):null}function xr(v){return v=v.charCodeAt(0),"%"+(v>>4&15).toString(16)+(v&15).toString(16)}var dl=/[#\/\?@]/g,nh=/[#\?:]/g,Zc=/[#\?]/g,ns=/[#\?@]/g,rh=/#/g;function rs(v,A){this.h=this.g=null,this.i=v||null,this.j=!!A}function Er(v){v.g||(v.g=new Map,v.h=0,v.i&&hl(v.i,function(A,R){v.add(decodeURIComponent(A.replace(/\+/g," ")),R)}))}n=rs.prototype,n.add=function(v,A){Er(this),this.i=null,v=is(this,v);let R=this.g.get(v);return R||this.g.set(v,R=[]),R.push(A),this.h+=1,this};function ih(v,A){Er(v),A=is(v,A),v.g.has(A)&&(v.i=null,v.h-=v.g.get(A).length,v.g.delete(A))}function Jc(v,A){return Er(v),A=is(v,A),v.g.has(A)}n.forEach=function(v,A){Er(this),this.g.forEach(function(R,U){R.forEach(function(W){v.call(A,W,U,this)},this)},this)};function eu(v,A){Er(v);let R=[];if(typeof A=="string")Jc(v,A)&&(R=R.concat(v.g.get(is(v,A))));else for(v=Array.from(v.g.values()),A=0;A<v.length;A++)R=R.concat(v[A]);return R}n.set=function(v,A){return Er(this),this.i=null,v=is(this,v),Jc(this,v)&&(this.h-=this.g.get(v).length),this.g.set(v,[A]),this.h+=1,this},n.get=function(v,A){return v?(v=eu(this,v),v.length>0?String(v[0]):A):A};function pl(v,A,R){ih(v,A),R.length>0&&(v.i=null,v.g.set(is(v,A),E(R)),v.h+=R.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const v=[],A=Array.from(this.g.keys());for(let U=0;U<A.length;U++){var R=A[U];const W=Ea(R);R=eu(this,R);for(let ne=0;ne<R.length;ne++){let ve=W;R[ne]!==""&&(ve+="="+Ea(R[ne])),v.push(ve)}}return this.i=v.join("&")};function ah(v){const A=new rs;return A.i=v.i,v.g&&(A.g=new Map(v.g),A.h=v.h),A}function is(v,A){return A=String(A),v.j&&(A=A.toLowerCase()),A}function ml(v,A){A&&!v.j&&(Er(v),v.i=null,v.g.forEach(function(R,U){const W=U.toLowerCase();U!=W&&(ih(this,U),pl(this,W,R))},v)),v.j=A}function vi(v,A){const R=new pi;if(o.Image){const U=new Image;U.onload=p(Kr,R,"TestLoadImage: loaded",!0,A,U),U.onerror=p(Kr,R,"TestLoadImage: error",!1,A,U),U.onabort=p(Kr,R,"TestLoadImage: abort",!1,A,U),U.ontimeout=p(Kr,R,"TestLoadImage: timeout",!1,A,U),o.setTimeout(function(){U.ontimeout&&U.ontimeout()},1e4),U.src=v}else A(!1)}function tu(v,A){const R=new pi,U=new AbortController,W=setTimeout(()=>{U.abort(),Kr(R,"TestPingServer: timeout",!1,A)},1e4);fetch(v,{signal:U.signal}).then(ne=>{clearTimeout(W),ne.ok?Kr(R,"TestPingServer: ok",!0,A):Kr(R,"TestPingServer: server error",!1,A)}).catch(()=>{clearTimeout(W),Kr(R,"TestPingServer: error",!1,A)})}function Kr(v,A,R,U,W){try{W&&(W.onload=null,W.onerror=null,W.onabort=null,W.ontimeout=null),U(R)}catch{}}function as(){this.g=new qe}function Wi(v){this.i=v.Sb||null,this.h=v.ab||!1}g(Wi,jt),Wi.prototype.g=function(){return new _o(this.i,this.h)};function _o(v,A){Ge.call(this),this.H=v,this.o=A,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}g(_o,Ge),n=_o.prototype,n.open=function(v,A){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=v,this.D=A,this.readyState=1,yi(this)},n.send=function(v){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const A={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};v&&(A.body=v),(this.H||o).fetch(new Request(this.D,A)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,ss(this)),this.readyState=0},n.Pa=function(v){if(this.g&&(this.l=v,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=v.headers,this.readyState=2,yi(this)),this.g&&(this.readyState=3,yi(this),this.g)))if(this.responseType==="arraybuffer")v.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in v){if(this.j=v.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;gl(this)}else v.text().then(this.Oa.bind(this),this.ga.bind(this))};function gl(v){v.j.read().then(v.Ma.bind(v)).catch(v.ga.bind(v))}n.Ma=function(v){if(this.g){if(this.o&&v.value)this.response.push(v.value);else if(!this.o){var A=v.value?v.value:new Uint8Array(0);(A=this.B.decode(A,{stream:!v.done}))&&(this.response=this.responseText+=A)}v.done?ss(this):yi(this),this.readyState==3&&gl(this)}},n.Oa=function(v){this.g&&(this.response=this.responseText=v,ss(this))},n.Na=function(v){this.g&&(this.response=v,ss(this))},n.ga=function(){this.g&&ss(this)};function ss(v){v.readyState=4,v.l=null,v.j=null,v.B=null,yi(v)}n.setRequestHeader=function(v,A){this.A.append(v,A)},n.getResponseHeader=function(v){return this.h&&this.h.get(v.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const v=[],A=this.h.entries();for(var R=A.next();!R.done;)R=R.value,v.push(R[0]+": "+R[1]),R=A.next();return v.join(`\r
`)};function yi(v){v.onreadystatechange&&v.onreadystatechange.call(v)}Object.defineProperty(_o.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(v){this.m=v?"include":"same-origin"}});function Yr(v){let A="";return Ie(v,function(R,U){A+=U,A+=":",A+=R,A+=`\r
`}),A}function xo(v,A,R){e:{for(U in R){var U=!1;break e}U=!0}U||(R=Yr(R),typeof v=="string"?R!=null&&Ea(R):At(v,A,R))}function Rt(v){Ge.call(this),this.headers=new Map,this.L=v||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}g(Rt,Ge);var Qi=/^https?$/i,nu=["POST","PUT"];n=Rt.prototype,n.Fa=function(v){this.H=v},n.ea=function(v,A,R,U){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+v);A=A?A.toUpperCase():"GET",this.D=v,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():qc.g(),this.g.onreadystatechange=_(h(this.Ca,this));try{this.B=!0,this.g.open(A,String(v),!0),this.B=!1}catch(ne){Eo(this,ne);return}if(v=R||"",R=new Map(this.headers),U)if(Object.getPrototypeOf(U)===Object.prototype)for(var W in U)R.set(W,U[W]);else if(typeof U.keys=="function"&&typeof U.get=="function")for(const ne of U.keys())R.set(ne,U.get(ne));else throw Error("Unknown input type for opt_headers: "+String(U));U=Array.from(R.keys()).find(ne=>ne.toLowerCase()=="content-type"),W=o.FormData&&v instanceof o.FormData,!(Array.prototype.indexOf.call(nu,A,void 0)>=0)||U||W||R.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ne,ve]of R)this.g.setRequestHeader(ne,ve);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(v),this.v=!1}catch(ne){Eo(this,ne)}};function Eo(v,A){v.h=!1,v.g&&(v.j=!0,v.g.abort(),v.j=!1),v.l=A,v.o=5,ru(v),wa(v)}function ru(v){v.A||(v.A=!0,Et(v,"complete"),Et(v,"error"))}n.abort=function(v){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=v||7,Et(this,"complete"),Et(this,"abort"),wa(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),wa(this,!0)),Rt.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?wo(this):this.Xa())},n.Xa=function(){wo(this)};function wo(v){if(v.h&&typeof a<"u"){if(v.v&&_i(v)==4)setTimeout(v.Ca.bind(v),0);else if(Et(v,"readystatechange"),_i(v)==4){v.h=!1;try{const ne=v.ca();e:switch(ne){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var A=!0;break e;default:A=!1}var R;if(!(R=A)){var U;if(U=ne===0){let ve=String(v.D).match(th)[1]||null;!ve&&o.self&&o.self.location&&(ve=o.self.location.protocol.slice(0,-1)),U=!Qi.test(ve?ve.toLowerCase():"")}R=U}if(R)Et(v,"complete"),Et(v,"success");else{v.o=6;try{var W=_i(v)>2?v.g.statusText:""}catch{W=""}v.l=W+" ["+v.ca()+"]",ru(v)}}finally{wa(v)}}}}function wa(v,A){if(v.g){v.m&&(clearTimeout(v.m),v.m=null);const R=v.g;v.g=null,A||Et(v,"ready");try{R.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function _i(v){return v.g?v.g.readyState:0}n.ca=function(){try{return _i(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(v){if(this.g){var A=this.g.responseText;return v&&A.indexOf(v)==0&&(A=A.substring(v.length)),di(A)}};function Yn(v){try{if(!v.g)return null;if("response"in v.g)return v.g.response;switch(v.F){case"":case"text":return v.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in v.g)return v.g.mozResponseArrayBuffer}return null}catch{return null}}function Aa(v){const A={};v=(v.g&&_i(v)>=2&&v.g.getAllResponseHeaders()||"").split(`\r
`);for(let U=0;U<v.length;U++){if(L(v[U]))continue;var R=Zf(v[U]);const W=R[0];if(R=R[1],typeof R!="string")continue;R=R.trim();const ne=A[W]||[];A[W]=ne,ne.push(R)}De(A,function(U){return U.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Zi(v,A,R){return R&&R.internalChannelParams&&R.internalChannelParams[v]||A}function os(v){this.za=0,this.i=[],this.j=new pi,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Zi("failFast",!1,v),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Zi("baseRetryDelayMs",5e3,v),this.Za=Zi("retryDelaySeedMs",1e4,v),this.Ta=Zi("forwardChannelMaxRetries",2,v),this.va=Zi("forwardChannelRequestTimeoutMs",2e4,v),this.ma=v&&v.xmlHttpFactory||void 0,this.Ua=v&&v.Rb||void 0,this.Aa=v&&v.useFetchStreams||!1,this.O=void 0,this.L=v&&v.supportsCrossDomainXhr||!1,this.M="",this.h=new $c(v&&v.concurrentRequestLimit),this.Ba=new as,this.S=v&&v.fastHandshake||!1,this.R=v&&v.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=v&&v.Pb||!1,v&&v.ua&&this.j.ua(),v&&v.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&v&&v.detectBufferingProxy||!1,this.ia=void 0,v&&v.longPollingTimeout&&v.longPollingTimeout>0&&(this.ia=v.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=os.prototype,n.ka=8,n.I=1,n.connect=function(v,A,R,U){pn(0),this.W=v,this.H=A||{},R&&U!==void 0&&(this.H.OSID=R,this.H.OAID=U),this.F=this.X,this.J=hh(this,null,this.W),Ji(this)};function iu(v){if(vl(v),v.I==3){var A=v.V++,R=vn(v.J);if(At(R,"SID",v.M),At(R,"RID",A),At(R,"TYPE","terminate"),Ao(v,R),A=new mi(v,v.j,A),A.M=2,A.A=vo(vn(R)),R=!1,o.navigator&&o.navigator.sendBeacon)try{R=o.navigator.sendBeacon(A.A.toString(),"")}catch{}!R&&o.Image&&(new Image().src=A.A,R=!0),R||(A.g=dh(A.j,null),A.g.ea(A.A)),A.F=Date.now(),Gi(A)}fh(v)}function ls(v){v.g&&(su(v),v.g.cancel(),v.g=null)}function vl(v){ls(v),v.v&&(o.clearTimeout(v.v),v.v=null),_l(v),v.h.cancel(),v.m&&(typeof v.m=="number"&&o.clearTimeout(v.m),v.m=null)}function Ji(v){if(!Xc(v.h)&&!v.m){v.m=!0;var A=v.Ea;H||b(),q||(H(),q=!0),N.add(A,v),v.D=0}}function yl(v,A){return Xi(v.h)>=v.h.j-(v.m?1:0)?!1:v.m?(v.i=A.G.concat(v.i),!0):v.I==1||v.I==2||v.D>=(v.Sa?0:v.Ta)?!1:(v.m=Ui(h(v.Ea,v,A),uh(v,v.D)),v.D++,!0)}n.Ea=function(v){if(this.m)if(this.m=null,this.I==1){if(!v){this.V=Math.floor(Math.random()*1e5),v=this.V++;const W=new mi(this,this.j,v);let ne=this.o;if(this.U&&(ne?(ne=X(ne),pe(ne,this.U)):ne=this.U),this.u!==null||this.R||(W.J=ne,ne=null),this.S)e:{for(var A=0,R=0;R<this.i.length;R++){t:{var U=this.i[R];if("__data__"in U.map&&(U=U.map.__data__,typeof U=="string")){U=U.length;break t}U=void 0}if(U===void 0)break;if(A+=U,A>4096){A=R;break e}if(A===4096||R===this.i.length-1){A=R+1;break e}}A=1e3}else A=1e3;A=sh(this,W,A),R=vn(this.J),At(R,"RID",v),At(R,"CVER",22),this.G&&At(R,"X-HTTP-Session-Id",this.G),Ao(this,R),ne&&(this.R?A="headers="+Ea(Yr(ne))+"&"+A:this.u&&xo(R,this.u,ne)),Kc(this.h,W),this.Ra&&At(R,"TYPE","init"),this.S?(At(R,"$req",A),At(R,"SID","null"),W.U=!0,Hi(W,R,null)):Hi(W,R,A),this.I=2}}else this.I==3&&(v?au(this,v):this.i.length==0||Xc(this.h)||au(this))};function au(v,A){var R;A?R=A.l:R=v.V++;const U=vn(v.J);At(U,"SID",v.M),At(U,"RID",R),At(U,"AID",v.K),Ao(v,U),v.u&&v.o&&xo(U,v.u,v.o),R=new mi(v,v.j,R,v.D+1),v.u===null&&(R.J=v.o),A&&(v.i=A.G.concat(v.i)),A=sh(v,R,1e3),R.H=Math.round(v.va*.5)+Math.round(v.va*.5*Math.random()),Kc(v.h,R),Hi(R,U,A)}function Ao(v,A){v.H&&Ie(v.H,function(R,U){At(A,U,R)}),v.l&&Ie({},function(R,U){At(A,U,R)})}function sh(v,A,R){R=Math.min(v.i.length,R);const U=v.l?h(v.l.Ka,v.l,v):null;e:{var W=v.i;let $e=-1;for(;;){const ln=["count="+R];$e==-1?R>0?($e=W[0].g,ln.push("ofs="+$e)):$e=0:ln.push("ofs="+$e);let vt=!0;for(let qt=0;qt<R;qt++){var ne=W[qt].g;const Wr=W[qt].map;if(ne-=$e,ne<0)$e=Math.max(0,W[qt].g-100),vt=!1;else try{ne="req"+ne+"_"||"";try{var ve=Wr instanceof Map?Wr:Object.entries(Wr);for(const[ta,xi]of ve){let Ei=xi;c(xi)&&(Ei=Xn(xi)),ln.push(ne+ta+"="+encodeURIComponent(Ei))}}catch(ta){throw ln.push(ne+"type="+encodeURIComponent("_badmap")),ta}}catch{U&&U(Wr)}}if(vt){ve=ln.join("&");break e}}ve=void 0}return v=v.i.splice(0,R),A.G=v,ve}function oh(v){if(!v.g&&!v.v){v.Y=1;var A=v.Da;H||b(),q||(H(),q=!0),N.add(A,v),v.A=0}}function bo(v){return v.g||v.v||v.A>=3?!1:(v.Y++,v.v=Ui(h(v.Da,v),uh(v,v.A)),v.A++,!0)}n.Da=function(){if(this.v=null,lh(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var v=4*this.T;this.j.info("BP detection timer enabled: "+v),this.B=Ui(h(this.Wa,this),v)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,pn(10),ls(this),lh(this))};function su(v){v.B!=null&&(o.clearTimeout(v.B),v.B=null)}function lh(v){v.g=new mi(v,v.j,"rpc",v.Y),v.u===null&&(v.g.J=v.o),v.g.P=0;var A=vn(v.na);At(A,"RID","rpc"),At(A,"SID",v.M),At(A,"AID",v.K),At(A,"CI",v.F?"0":"1"),!v.F&&v.ia&&At(A,"TO",v.ia),At(A,"TYPE","xmlhttp"),Ao(v,A),v.u&&v.o&&xo(A,v.u,v.o),v.O&&(v.g.H=v.O);var R=v.g;v=v.ba,R.M=1,R.A=vo(vn(A)),R.u=null,R.R=!0,ul(R,v)}n.Va=function(){this.C!=null&&(this.C=null,ls(this),bo(this),pn(19))};function _l(v){v.C!=null&&(o.clearTimeout(v.C),v.C=null)}function ch(v,A){var R=null;if(v.g==A){_l(v),su(v),v.g=null;var U=2}else if(Ki(v.h,A))R=A.G,Yc(v.h,A),U=1;else return;if(v.I!=0){if(A.o)if(U==1){R=A.u?A.u.length:0,A=Date.now()-A.F;var W=v.D;U=cl(),Et(U,new Fi(U,R)),Ji(v)}else oh(v);else if(W=A.m,W==3||W==0&&A.X>0||!(U==1&&yl(v,A)||U==2&&bo(v)))switch(R&&R.length>0&&(A=v.h,A.i=A.i.concat(R)),W){case 1:ea(v,5);break;case 4:ea(v,10);break;case 3:ea(v,6);break;default:ea(v,2)}}}function uh(v,A){let R=v.Qa+Math.floor(Math.random()*v.Za);return v.isActive()||(R*=2),R*A}function ea(v,A){if(v.j.info("Error code "+A),A==2){var R=h(v.bb,v),U=v.Ua;const W=!U;U=new Pr(U||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||jn(U,"https"),vo(U),W?vi(U.toString(),R):tu(U.toString(),R)}else pn(2);v.I=0,v.l&&v.l.pa(A),fh(v),vl(v)}n.bb=function(v){v?(this.j.info("Successfully pinged google.com"),pn(2)):(this.j.info("Failed to ping google.com"),pn(1))};function fh(v){if(v.I=0,v.ja=[],v.l){const A=Wc(v.h);(A.length!=0||v.i.length!=0)&&(w(v.ja,A),w(v.ja,v.i),v.h.i.length=0,E(v.i),v.i.length=0),v.l.oa()}}function hh(v,A,R){var U=R instanceof Pr?vn(R):new Pr(R);if(U.g!="")A&&(U.g=A+"."+U.g),ts(U,U.u);else{var W=o.location;U=W.protocol,A=A?A+"."+W.hostname:W.hostname,W=+W.port;const ne=new Pr(null);U&&jn(ne,U),A&&(ne.g=A),W&&ts(ne,W),R&&(ne.h=R),U=ne}return R=v.G,A=v.wa,R&&A&&At(U,R,A),At(U,"VER",v.ka),Ao(v,U),U}function dh(v,A,R){if(A&&!v.L)throw Error("Can't create secondary domain capable XhrIo object.");return A=v.Aa&&!v.ma?new Rt(new Wi({ab:R})):new Rt(v.ma),A.Fa(v.L),A}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function ph(){}n=ph.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function cs(){}cs.prototype.g=function(v,A){return new pr(v,A)};function pr(v,A){Ge.call(this),this.g=new os(A),this.l=v,this.h=A&&A.messageUrlParams||null,v=A&&A.messageHeaders||null,A&&A.clientProtocolHeaderRequired&&(v?v["X-Client-Protocol"]="webchannel":v={"X-Client-Protocol":"webchannel"}),this.g.o=v,v=A&&A.initMessageHeaders||null,A&&A.messageContentType&&(v?v["X-WebChannel-Content-Type"]=A.messageContentType:v={"X-WebChannel-Content-Type":A.messageContentType}),A&&A.sa&&(v?v["X-WebChannel-Client-Profile"]=A.sa:v={"X-WebChannel-Client-Profile":A.sa}),this.g.U=v,(v=A&&A.Qb)&&!L(v)&&(this.g.u=v),this.A=A&&A.supportsCrossDomainXhr||!1,this.v=A&&A.sendRawJson||!1,(A=A&&A.httpSessionIdParam)&&!L(A)&&(this.g.G=A,v=this.h,v!==null&&A in v&&(v=this.h,A in v&&delete v[A])),this.j=new ba(this)}g(pr,Ge),pr.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},pr.prototype.close=function(){iu(this.g)},pr.prototype.o=function(v){var A=this.g;if(typeof v=="string"){var R={};R.__data__=v,v=R}else this.v&&(R={},R.__data__=Xn(v),v=R);A.i.push(new gn(A.Ya++,v)),A.I==3&&Ji(A)},pr.prototype.N=function(){this.g.l=null,delete this.j,iu(this.g),delete this.g,pr.Z.N.call(this)};function mh(v){Qt.call(this),v.__headers__&&(this.headers=v.__headers__,this.statusCode=v.__status__,delete v.__headers__,delete v.__status__);var A=v.__sm__;if(A){e:{for(const R in A){v=R;break e}v=void 0}(this.i=v)&&(v=this.i,A=A!==null&&v in A?A[v]:void 0),this.data=A}else this.data=v}g(mh,Qt);function gh(){$r.call(this),this.status=1}g(gh,$r);function ba(v){this.g=v}g(ba,ph),ba.prototype.ra=function(){Et(this.g,"a")},ba.prototype.qa=function(v){Et(this.g,new mh(v))},ba.prototype.pa=function(v){Et(this.g,new gh)},ba.prototype.oa=function(){Et(this.g,"b")},cs.prototype.createWebChannel=cs.prototype.g,pr.prototype.send=pr.prototype.o,pr.prototype.open=pr.prototype.m,pr.prototype.close=pr.prototype.close,xC=function(){return new cs},_C=function(){return cl()},yC=on,Mg={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},mo.NO_ERROR=0,mo.TIMEOUT=8,mo.HTTP_ERROR=6,zd=mo,Gc.COMPLETE="complete",vC=Gc,Kn.EventType=Nt,Nt.OPEN="a",Nt.CLOSE="b",Nt.ERROR="c",Nt.MESSAGE="d",Ge.prototype.listen=Ge.prototype.J,Zu=Kn,Rt.prototype.listenOnce=Rt.prototype.K,Rt.prototype.getLastError=Rt.prototype.Ha,Rt.prototype.getLastErrorCode=Rt.prototype.ya,Rt.prototype.getStatus=Rt.prototype.ca,Rt.prototype.getResponseJson=Rt.prototype.La,Rt.prototype.getResponseText=Rt.prototype.la,Rt.prototype.send=Rt.prototype.ea,Rt.prototype.setWithCredentials=Rt.prototype.Fa,gC=Rt}).apply(typeof wd<"u"?wd:typeof self<"u"?self:typeof window<"u"?window:{});const gw="@firebase/firestore",vw="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ur{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ur.UNAUTHENTICATED=new ur(null),ur.GOOGLE_CREDENTIALS=new ur("google-credentials-uid"),ur.FIRST_PARTY=new ur("first-party-uid"),ur.MOCK_USER=new ur("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Pc="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const el=new Mv("@firebase/firestore");function nc(){return el.logLevel}function Ae(n,...e){if(el.logLevel<=it.DEBUG){const t=e.map(Gv);el.debug(`Firestore (${Pc}): ${n}`,...t)}}function Wa(n,...e){if(el.logLevel<=it.ERROR){const t=e.map(Gv);el.error(`Firestore (${Pc}): ${n}`,...t)}}function xc(n,...e){if(el.logLevel<=it.WARN){const t=e.map(Gv);el.warn(`Firestore (${Pc}): ${n}`,...t)}}function Gv(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ke(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,EC(n,r,t)}function EC(n,e,t){let r=`FIRESTORE (${Pc}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw Wa(r),new Error(r)}function ft(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||EC(e,i,r)}function Ve(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ce={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class _e extends _a{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class da{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wC{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class gD{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(ur.UNAUTHENTICATED)))}shutdown(){}}class vD{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class yD{constructor(e){this.t=e,this.currentUser=ur.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){ft(this.o===void 0,42304);let r=this.i;const i=u=>this.i!==r?(r=this.i,t(u)):Promise.resolve();let a=new da;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new da,e.enqueueRetryable((()=>i(this.currentUser)))};const o=()=>{const u=a;e.enqueueRetryable((async()=>{await u.promise,await i(this.currentUser)}))},c=u=>{Ae("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit((u=>c(u))),setTimeout((()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?c(u):(Ae("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new da)}}),0),o()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((r=>this.i!==e?(Ae("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ft(typeof r.accessToken=="string",31837,{l:r}),new wC(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ft(e===null||typeof e=="string",2055,{h:e}),new ur(e)}}class _D{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=ur.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class xD{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new _D(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(ur.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class yw{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class ED{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,oi(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){ft(this.o===void 0,3512);const r=a=>{a.error!=null&&Ae("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const o=a.token!==this.m;return this.m=a.token,Ae("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable((()=>r(a)))};const i=a=>{Ae("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((a=>i(a))),setTimeout((()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?i(a):Ae("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new yw(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(ft(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new yw(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wD(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qv{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=wD(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<t&&(r+=e.charAt(i[a]%62))}return r}}function at(n,e){return n<e?-1:n>e?1:0}function Pg(n,e){const t=Math.min(n.length,e.length);for(let r=0;r<t;r++){const i=n.charAt(r),a=e.charAt(r);if(i!==a)return Dm(i)===Dm(a)?at(i,a):Dm(i)?1:-1}return at(n.length,e.length)}const AD=55296,bD=57343;function Dm(n){const e=n.charCodeAt(0);return e>=AD&&e<=bD}function Ec(n,e,t){return n.length===e.length&&n.every(((r,i)=>t(r,e[i])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _w="__name__";class oa{constructor(e,t,r){t===void 0?t=0:t>e.length&&ke(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&ke(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return oa.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof oa?e.forEach((r=>{t.push(r)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const a=oa.compareSegments(e.get(i),t.get(i));if(a!==0)return a}return at(e.length,t.length)}static compareSegments(e,t){const r=oa.isNumericId(e),i=oa.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?oa.extractNumericId(e).compare(oa.extractNumericId(t)):Pg(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return $s.fromString(e.substring(4,e.length-2))}}class kt extends oa{construct(e,t,r){return new kt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new _e(ce.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter((i=>i.length>0)))}return new kt(t)}static emptyPath(){return new kt([])}}const SD=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class rr extends oa{construct(e,t,r){return new rr(e,t,r)}static isValidIdentifier(e){return SD.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),rr.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===_w}static keyField(){return new rr([_w])}static fromServerFormat(e){const t=[];let r="",i=0;const a=()=>{if(r.length===0)throw new _e(ce.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let o=!1;for(;i<e.length;){const c=e[i];if(c==="\\"){if(i+1===e.length)throw new _e(ce.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new _e(ce.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else c==="`"?(o=!o,i++):c!=="."||o?(r+=c,i++):(a(),i++)}if(a(),o)throw new _e(ce.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new rr(t)}static emptyPath(){return new rr([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Re{constructor(e){this.path=e}static fromPath(e){return new Re(kt.fromString(e))}static fromName(e){return new Re(kt.fromString(e).popFirst(5))}static empty(){return new Re(kt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&kt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return kt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Re(new kt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AC(n,e,t){if(!t)throw new _e(ce.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function CD(n,e,t,r){if(e===!0&&r===!0)throw new _e(ce.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function xw(n){if(!Re.isDocumentKey(n))throw new _e(ce.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Ew(n){if(Re.isDocumentKey(n))throw new _e(ce.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function bC(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function z0(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":ke(12329,{type:typeof n})}function ci(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new _e(ce.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=z0(n);throw new _e(ce.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function TD(n,e){if(e<=0)throw new _e(ce.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sn(n,e){const t={typeString:n};return e&&(t.value=e),t}function Bf(n,e){if(!bC(n))throw new _e(ce.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const i=e[r].typeString,a="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}const o=n[r];if(i&&typeof o!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(a!==void 0&&o!==a.value){t=`Expected '${r}' field to equal '${a.value}'`;break}}if(t)throw new _e(ce.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ww=-62135596800,Aw=1e6;class It{static now(){return It.fromMillis(Date.now())}static fromDate(e){return It.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*Aw);return new It(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new _e(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new _e(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<ww)throw new _e(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new _e(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Aw}_compareTo(e){return this.seconds===e.seconds?at(this.nanoseconds,e.nanoseconds):at(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:It._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Bf(e,It._jsonSchema))return new It(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-ww;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}It._jsonSchemaVersion="firestore/timestamp/1.0",It._jsonSchema={type:Sn("string",It._jsonSchemaVersion),seconds:Sn("number"),nanoseconds:Sn("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class je{static fromTimestamp(e){return new je(e)}static min(){return new je(new It(0,0))}static max(){return new je(new It(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xf=-1;function ID(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=je.fromTimestamp(r===1e9?new It(t+1,0):new It(t,r));return new Js(i,Re.empty(),e)}function ND(n){return new Js(n.readTime,n.key,xf)}class Js{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Js(je.min(),Re.empty(),xf)}static max(){return new Js(je.max(),Re.empty(),xf)}}function RD(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Re.comparator(n.documentKey,e.documentKey),t!==0?t:at(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OD="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class DD{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kc(n){if(n.code!==ce.FAILED_PRECONDITION||n.message!==OD)throw n;Ae("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class de{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ke(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new de(((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,i)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof de?t:de.resolve(t)}catch(t){return de.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):de.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):de.reject(t)}static resolve(e){return new de(((t,r)=>{t(e)}))}static reject(e){return new de(((t,r)=>{r(e)}))}static waitFor(e){return new de(((t,r)=>{let i=0,a=0,o=!1;e.forEach((c=>{++i,c.next((()=>{++a,o&&a===i&&t()}),(u=>r(u)))})),o=!0,a===i&&t()}))}static or(e){let t=de.resolve(!1);for(const r of e)t=t.next((i=>i?de.resolve(i):r()));return t}static forEach(e,t){const r=[];return e.forEach(((i,a)=>{r.push(t.call(this,i,a))})),this.waitFor(r)}static mapArray(e,t){return new de(((r,i)=>{const a=e.length,o=new Array(a);let c=0;for(let u=0;u<a;u++){const h=u;t(e[h]).next((p=>{o[h]=p,++c,c===a&&r(o)}),(p=>i(p)))}}))}static doWhile(e,t){return new de(((r,i)=>{const a=()=>{e()===!0?t().next((()=>{a()}),i):r()};a()}))}}function MD(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Lc(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H0{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>t.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}H0.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $v=-1;function Vf(n){return n==null}function o0(n){return n===0&&1/n==-1/0}function PD(n){return typeof n=="number"&&Number.isInteger(n)&&!o0(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SC="";function kD(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=bw(e)),e=LD(n.get(t),e);return bw(e)}function LD(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const a=n.charAt(i);switch(a){case"\0":t+="";break;case SC:t+="";break;default:t+=a}}return t}function bw(n){return n+SC+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sw(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function lo(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function CC(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tn{constructor(e,t){this.comparator=e,this.root=t||nr.EMPTY}insert(e,t){return new tn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,nr.BLACK,null,null))}remove(e){return new tn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,nr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,r)=>(e(t,r),!1)))}toString(){const e=[];return this.inorderTraversal(((t,r)=>(e.push(`${t}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ad(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ad(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ad(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ad(this.root,e,this.comparator,!0)}}class Ad{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,t&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class nr{constructor(e,t,r,i,a){this.key=e,this.value=t,this.color=r??nr.RED,this.left=i??nr.EMPTY,this.right=a??nr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,a){return new nr(e??this.key,t??this.value,r??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,t,r),null):a===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return nr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return nr.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,nr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,nr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ke(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ke(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ke(27949);return e+(this.isRed()?0:1)}}nr.EMPTY=null,nr.RED=!0,nr.BLACK=!1;nr.EMPTY=new class{constructor(){this.size=0}get key(){throw ke(57766)}get value(){throw ke(16141)}get color(){throw ke(16727)}get left(){throw ke(29726)}get right(){throw ke(36894)}copy(e,t,r,i,a){return this}insert(e,t,r){return new nr(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pn{constructor(e){this.comparator=e,this.data=new tn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,r)=>(e(t),!1)))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Cw(this.data.getIterator())}getIteratorFrom(e){return new Cw(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((r=>{t=t.add(r)})),t}isEqual(e){if(!(e instanceof Pn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(this.comparator(i,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Pn(this.comparator);return t.data=e,t}}class Cw{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gr{constructor(e){this.fields=e,e.sort(rr.comparator)}static empty(){return new Gr([])}unionWith(e){let t=new Pn(rr.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Gr(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ec(this.fields,e.fields,((t,r)=>t.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TC extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(i){try{return atob(i)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new TC("Invalid base64 string: "+a):a}})(e);return new sr(t)}static fromUint8Array(e){const t=(function(i){let a="";for(let o=0;o<i.length;++o)a+=String.fromCharCode(i[o]);return a})(e);return new sr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return at(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}sr.EMPTY_BYTE_STRING=new sr("");const jD=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function eo(n){if(ft(!!n,39018),typeof n=="string"){let e=0;const t=jD.exec(n);if(ft(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:hn(n.seconds),nanos:hn(n.nanos)}}function hn(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function to(n){return typeof n=="string"?sr.fromBase64String(n):sr.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IC="server_timestamp",NC="__type__",RC="__previous_value__",OC="__local_write_time__";function Xv(n){return(n?.mapValue?.fields||{})[NC]?.stringValue===IC}function G0(n){const e=n.mapValue.fields[RC];return Xv(e)?G0(e):e}function Ef(n){const e=eo(n.mapValue.fields[OC].timestampValue);return new It(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BD{constructor(e,t,r,i,a,o,c,u,h,p){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=c,this.longPollingOptions=u,this.useFetchStreams=h,this.isUsingEmulator=p}}const l0="(default)";class wf{constructor(e,t){this.projectId=e,this.database=t||l0}static empty(){return new wf("","")}get isDefaultDatabase(){return this.database===l0}isEqual(e){return e instanceof wf&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DC="__type__",VD="__max__",bd={mapValue:{}},MC="__vector__",c0="value";function no(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Xv(n)?4:UD(n)?9007199254740991:FD(n)?10:11:ke(28295,{value:n})}function va(n,e){if(n===e)return!0;const t=no(n);if(t!==no(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Ef(n).isEqual(Ef(e));case 3:return(function(i,a){if(typeof i.timestampValue=="string"&&typeof a.timestampValue=="string"&&i.timestampValue.length===a.timestampValue.length)return i.timestampValue===a.timestampValue;const o=eo(i.timestampValue),c=eo(a.timestampValue);return o.seconds===c.seconds&&o.nanos===c.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(i,a){return to(i.bytesValue).isEqual(to(a.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(i,a){return hn(i.geoPointValue.latitude)===hn(a.geoPointValue.latitude)&&hn(i.geoPointValue.longitude)===hn(a.geoPointValue.longitude)})(n,e);case 2:return(function(i,a){if("integerValue"in i&&"integerValue"in a)return hn(i.integerValue)===hn(a.integerValue);if("doubleValue"in i&&"doubleValue"in a){const o=hn(i.doubleValue),c=hn(a.doubleValue);return o===c?o0(o)===o0(c):isNaN(o)&&isNaN(c)}return!1})(n,e);case 9:return Ec(n.arrayValue.values||[],e.arrayValue.values||[],va);case 10:case 11:return(function(i,a){const o=i.mapValue.fields||{},c=a.mapValue.fields||{};if(Sw(o)!==Sw(c))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(c[u]===void 0||!va(o[u],c[u])))return!1;return!0})(n,e);default:return ke(52216,{left:n})}}function Af(n,e){return(n.values||[]).find((t=>va(t,e)))!==void 0}function wc(n,e){if(n===e)return 0;const t=no(n),r=no(e);if(t!==r)return at(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return at(n.booleanValue,e.booleanValue);case 2:return(function(a,o){const c=hn(a.integerValue||a.doubleValue),u=hn(o.integerValue||o.doubleValue);return c<u?-1:c>u?1:c===u?0:isNaN(c)?isNaN(u)?0:-1:1})(n,e);case 3:return Tw(n.timestampValue,e.timestampValue);case 4:return Tw(Ef(n),Ef(e));case 5:return Pg(n.stringValue,e.stringValue);case 6:return(function(a,o){const c=to(a),u=to(o);return c.compareTo(u)})(n.bytesValue,e.bytesValue);case 7:return(function(a,o){const c=a.split("/"),u=o.split("/");for(let h=0;h<c.length&&h<u.length;h++){const p=at(c[h],u[h]);if(p!==0)return p}return at(c.length,u.length)})(n.referenceValue,e.referenceValue);case 8:return(function(a,o){const c=at(hn(a.latitude),hn(o.latitude));return c!==0?c:at(hn(a.longitude),hn(o.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return Iw(n.arrayValue,e.arrayValue);case 10:return(function(a,o){const c=a.fields||{},u=o.fields||{},h=c[c0]?.arrayValue,p=u[c0]?.arrayValue,g=at(h?.values?.length||0,p?.values?.length||0);return g!==0?g:Iw(h,p)})(n.mapValue,e.mapValue);case 11:return(function(a,o){if(a===bd.mapValue&&o===bd.mapValue)return 0;if(a===bd.mapValue)return 1;if(o===bd.mapValue)return-1;const c=a.fields||{},u=Object.keys(c),h=o.fields||{},p=Object.keys(h);u.sort(),p.sort();for(let g=0;g<u.length&&g<p.length;++g){const _=Pg(u[g],p[g]);if(_!==0)return _;const E=wc(c[u[g]],h[p[g]]);if(E!==0)return E}return at(u.length,p.length)})(n.mapValue,e.mapValue);default:throw ke(23264,{he:t})}}function Tw(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return at(n,e);const t=eo(n),r=eo(e),i=at(t.seconds,r.seconds);return i!==0?i:at(t.nanos,r.nanos)}function Iw(n,e){const t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){const a=wc(t[i],r[i]);if(a)return a}return at(t.length,r.length)}function Ac(n){return kg(n)}function kg(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const r=eo(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return to(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return Re.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",i=!0;for(const a of t.values||[])i?i=!1:r+=",",r+=kg(a);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){const r=Object.keys(t.fields||{}).sort();let i="{",a=!0;for(const o of r)a?a=!1:i+=",",i+=`${o}:${kg(t.fields[o])}`;return i+"}"})(n.mapValue):ke(61005,{value:n})}function Hd(n){switch(no(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=G0(n);return e?16+Hd(e):16;case 5:return 2*n.stringValue.length;case 6:return to(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((i,a)=>i+Hd(a)),0)})(n.arrayValue);case 10:case 11:return(function(r){let i=0;return lo(r.fields,((a,o)=>{i+=a.length+Hd(o)})),i})(n.mapValue);default:throw ke(13486,{value:n})}}function Nw(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Lg(n){return!!n&&"integerValue"in n}function Kv(n){return!!n&&"arrayValue"in n}function Rw(n){return!!n&&"nullValue"in n}function Ow(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Gd(n){return!!n&&"mapValue"in n}function FD(n){return(n?.mapValue?.fields||{})[DC]?.stringValue===MC}function cf(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return lo(n.mapValue.fields,((t,r)=>e.mapValue.fields[t]=cf(r))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=cf(n.arrayValue.values[t]);return e}return{...n}}function UD(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===VD}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _r{constructor(e){this.value=e}static empty(){return new _r({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Gd(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=cf(t)}setAll(e){let t=rr.emptyPath(),r={},i=[];e.forEach(((o,c)=>{if(!t.isImmediateParentOf(c)){const u=this.getFieldsMap(t);this.applyChanges(u,r,i),r={},i=[],t=c.popLast()}o?r[c.lastSegment()]=cf(o):i.push(c.lastSegment())}));const a=this.getFieldsMap(t);this.applyChanges(a,r,i)}delete(e){const t=this.field(e.popLast());Gd(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return va(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Gd(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){lo(t,((i,a)=>e[i]=a));for(const i of r)delete e[i]}clone(){return new _r(cf(this.value))}}function PC(n){const e=[];return lo(n.fields,((t,r)=>{const i=new rr([t]);if(Gd(r)){const a=PC(r.mapValue).fields;if(a.length===0)e.push(i);else for(const o of a)e.push(i.child(o))}else e.push(i)})),new Gr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zn{constructor(e,t,r,i,a,o,c){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=a,this.data=o,this.documentState=c}static newInvalidDocument(e){return new zn(e,0,je.min(),je.min(),je.min(),_r.empty(),0)}static newFoundDocument(e,t,r,i){return new zn(e,1,t,je.min(),r,i,0)}static newNoDocument(e,t){return new zn(e,2,t,je.min(),je.min(),_r.empty(),0)}static newUnknownDocument(e,t){return new zn(e,3,t,je.min(),je.min(),_r.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(je.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=_r.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=_r.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=je.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof zn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new zn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u0{constructor(e,t){this.position=e,this.inclusive=t}}function Dw(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const a=e[i],o=n.position[i];if(a.field.isKeyField()?r=Re.comparator(Re.fromName(o.referenceValue),t.key):r=wc(o,t.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function Mw(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!va(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bf{constructor(e,t="asc"){this.field=e,this.dir=t}}function zD(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kC{}class An extends kC{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new GD(e,t,r):t==="array-contains"?new XD(e,r):t==="in"?new KD(e,r):t==="not-in"?new YD(e,r):t==="array-contains-any"?new WD(e,r):new An(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new qD(e,r):new $D(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(wc(t,this.value)):t!==null&&no(this.value)===no(t)&&this.matchesComparison(wc(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ke(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ki extends kC{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new ki(e,t)}matches(e){return LC(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function LC(n){return n.op==="and"}function jC(n){return HD(n)&&LC(n)}function HD(n){for(const e of n.filters)if(e instanceof ki)return!1;return!0}function jg(n){if(n instanceof An)return n.field.canonicalString()+n.op.toString()+Ac(n.value);if(jC(n))return n.filters.map((e=>jg(e))).join(",");{const e=n.filters.map((t=>jg(t))).join(",");return`${n.op}(${e})`}}function BC(n,e){return n instanceof An?(function(r,i){return i instanceof An&&r.op===i.op&&r.field.isEqual(i.field)&&va(r.value,i.value)})(n,e):n instanceof ki?(function(r,i){return i instanceof ki&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce(((a,o,c)=>a&&BC(o,i.filters[c])),!0):!1})(n,e):void ke(19439)}function VC(n){return n instanceof An?(function(t){return`${t.field.canonicalString()} ${t.op} ${Ac(t.value)}`})(n):n instanceof ki?(function(t){return t.op.toString()+" {"+t.getFilters().map(VC).join(" ,")+"}"})(n):"Filter"}class GD extends An{constructor(e,t,r){super(e,t,r),this.key=Re.fromName(r.referenceValue)}matches(e){const t=Re.comparator(e.key,this.key);return this.matchesComparison(t)}}class qD extends An{constructor(e,t){super(e,"in",t),this.keys=FC("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class $D extends An{constructor(e,t){super(e,"not-in",t),this.keys=FC("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function FC(n,e){return(e.arrayValue?.values||[]).map((t=>Re.fromName(t.referenceValue)))}class XD extends An{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Kv(t)&&Af(t.arrayValue,this.value)}}class KD extends An{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Af(this.value.arrayValue,t)}}class YD extends An{constructor(e,t){super(e,"not-in",t)}matches(e){if(Af(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Af(this.value.arrayValue,t)}}class WD extends An{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Kv(t)||!t.arrayValue.values)&&t.arrayValue.values.some((r=>Af(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QD{constructor(e,t=null,r=[],i=[],a=null,o=null,c=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=c,this.Te=null}}function Pw(n,e=null,t=[],r=[],i=null,a=null,o=null){return new QD(n,e,t,r,i,a,o)}function Yv(n){const e=Ve(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((r=>jg(r))).join(","),t+="|ob:",t+=e.orderBy.map((r=>(function(a){return a.field.canonicalString()+a.dir})(r))).join(","),Vf(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((r=>Ac(r))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((r=>Ac(r))).join(",")),e.Te=t}return e.Te}function Wv(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!zD(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!BC(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Mw(n.startAt,e.startAt)&&Mw(n.endAt,e.endAt)}function Bg(n){return Re.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jc{constructor(e,t=null,r=[],i=[],a=null,o="F",c=null,u=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=c,this.endAt=u,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function ZD(n,e,t,r,i,a,o,c){return new jc(n,e,t,r,i,a,o,c)}function q0(n){return new jc(n)}function kw(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function UC(n){return n.collectionGroup!==null}function uf(n){const e=Ve(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const a of e.explicitOrderBy)e.Ie.push(a),t.add(a.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let c=new Pn(rr.comparator);return o.filters.forEach((u=>{u.getFlattenedFilters().forEach((h=>{h.isInequality()&&(c=c.add(h.field))}))})),c})(e).forEach((a=>{t.has(a.canonicalString())||a.isKeyField()||e.Ie.push(new bf(a,r))})),t.has(rr.keyField().canonicalString())||e.Ie.push(new bf(rr.keyField(),r))}return e.Ie}function pa(n){const e=Ve(n);return e.Ee||(e.Ee=JD(e,uf(n))),e.Ee}function JD(n,e){if(n.limitType==="F")return Pw(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((i=>{const a=i.dir==="desc"?"asc":"desc";return new bf(i.field,a)}));const t=n.endAt?new u0(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new u0(n.startAt.position,n.startAt.inclusive):null;return Pw(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function Vg(n,e){const t=n.filters.concat([e]);return new jc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function f0(n,e,t){return new jc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function $0(n,e){return Wv(pa(n),pa(e))&&n.limitType===e.limitType}function zC(n){return`${Yv(pa(n))}|lt:${n.limitType}`}function rc(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map((i=>VC(i))).join(", ")}]`),Vf(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map((i=>(function(o){return`${o.field.canonicalString()} (${o.dir})`})(i))).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map((i=>Ac(i))).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map((i=>Ac(i))).join(",")),`Target(${r})`})(pa(n))}; limitType=${n.limitType})`}function X0(n,e){return e.isFoundDocument()&&(function(r,i){const a=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):Re.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)})(n,e)&&(function(r,i){for(const a of uf(r))if(!a.field.isKeyField()&&i.data.field(a.field)===null)return!1;return!0})(n,e)&&(function(r,i){for(const a of r.filters)if(!a.matches(i))return!1;return!0})(n,e)&&(function(r,i){return!(r.startAt&&!(function(o,c,u){const h=Dw(o,c,u);return o.inclusive?h<=0:h<0})(r.startAt,uf(r),i)||r.endAt&&!(function(o,c,u){const h=Dw(o,c,u);return o.inclusive?h>=0:h>0})(r.endAt,uf(r),i))})(n,e)}function e5(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function HC(n){return(e,t)=>{let r=!1;for(const i of uf(n)){const a=t5(i,e,t);if(a!==0)return a;r=r||i.field.isKeyField()}return 0}}function t5(n,e,t){const r=n.field.isKeyField()?Re.comparator(e.key,t.key):(function(a,o,c){const u=o.data.field(a),h=c.data.field(a);return u!==null&&h!==null?wc(u,h):ke(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return ke(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class il{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[i,a]of r)if(this.equalsFn(i,e))return a}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){lo(this.inner,((t,r)=>{for(const[i,a]of r)e(i,a)}))}isEmpty(){return CC(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n5=new tn(Re.comparator);function Qa(){return n5}const GC=new tn(Re.comparator);function Ju(...n){let e=GC;for(const t of n)e=e.insert(t.key,t);return e}function qC(n){let e=GC;return n.forEach(((t,r)=>e=e.insert(t,r.overlayedDocument))),e}function $o(){return ff()}function $C(){return ff()}function ff(){return new il((n=>n.toString()),((n,e)=>n.isEqual(e)))}const r5=new tn(Re.comparator),i5=new Pn(Re.comparator);function st(...n){let e=i5;for(const t of n)e=e.add(t);return e}const a5=new Pn(at);function s5(){return a5}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qv(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:o0(e)?"-0":e}}function XC(n){return{integerValue:""+n}}function o5(n,e){return PD(e)?XC(e):Qv(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K0{constructor(){this._=void 0}}function l5(n,e,t){return n instanceof Sf?(function(i,a){const o={fields:{[NC]:{stringValue:IC},[OC]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return a&&Xv(a)&&(a=G0(a)),a&&(o.fields[RC]=a),{mapValue:o}})(t,e):n instanceof Cf?YC(n,e):n instanceof Tf?WC(n,e):(function(i,a){const o=KC(i,a),c=Lw(o)+Lw(i.Ae);return Lg(o)&&Lg(i.Ae)?XC(c):Qv(i.serializer,c)})(n,e)}function c5(n,e,t){return n instanceof Cf?YC(n,e):n instanceof Tf?WC(n,e):t}function KC(n,e){return n instanceof h0?(function(r){return Lg(r)||(function(a){return!!a&&"doubleValue"in a})(r)})(e)?e:{integerValue:0}:null}class Sf extends K0{}class Cf extends K0{constructor(e){super(),this.elements=e}}function YC(n,e){const t=QC(e);for(const r of n.elements)t.some((i=>va(i,r)))||t.push(r);return{arrayValue:{values:t}}}class Tf extends K0{constructor(e){super(),this.elements=e}}function WC(n,e){let t=QC(e);for(const r of n.elements)t=t.filter((i=>!va(i,r)));return{arrayValue:{values:t}}}class h0 extends K0{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function Lw(n){return hn(n.integerValue||n.doubleValue)}function QC(n){return Kv(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u5{constructor(e,t){this.field=e,this.transform=t}}function f5(n,e){return n.field.isEqual(e.field)&&(function(r,i){return r instanceof Cf&&i instanceof Cf||r instanceof Tf&&i instanceof Tf?Ec(r.elements,i.elements,va):r instanceof h0&&i instanceof h0?va(r.Ae,i.Ae):r instanceof Sf&&i instanceof Sf})(n.transform,e.transform)}class h5{constructor(e,t){this.version=e,this.transformResults=t}}class ir{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new ir}static exists(e){return new ir(void 0,e)}static updateTime(e){return new ir(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function qd(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Y0{}function ZC(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new W0(n.key,ir.none()):new Ff(n.key,n.data,ir.none());{const t=n.data,r=_r.empty();let i=new Pn(rr.comparator);for(let a of e.fields)if(!i.has(a)){let o=t.field(a);o===null&&a.length>1&&(a=a.popLast(),o=t.field(a)),o===null?r.delete(a):r.set(a,o),i=i.add(a)}return new co(n.key,r,new Gr(i.toArray()),ir.none())}}function d5(n,e,t){n instanceof Ff?(function(i,a,o){const c=i.value.clone(),u=Bw(i.fieldTransforms,a,o.transformResults);c.setAll(u),a.convertToFoundDocument(o.version,c).setHasCommittedMutations()})(n,e,t):n instanceof co?(function(i,a,o){if(!qd(i.precondition,a))return void a.convertToUnknownDocument(o.version);const c=Bw(i.fieldTransforms,a,o.transformResults),u=a.data;u.setAll(JC(i)),u.setAll(c),a.convertToFoundDocument(o.version,u).setHasCommittedMutations()})(n,e,t):(function(i,a,o){a.convertToNoDocument(o.version).setHasCommittedMutations()})(0,e,t)}function hf(n,e,t,r){return n instanceof Ff?(function(a,o,c,u){if(!qd(a.precondition,o))return c;const h=a.value.clone(),p=Vw(a.fieldTransforms,u,o);return h.setAll(p),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),null})(n,e,t,r):n instanceof co?(function(a,o,c,u){if(!qd(a.precondition,o))return c;const h=Vw(a.fieldTransforms,u,o),p=o.data;return p.setAll(JC(a)),p.setAll(h),o.convertToFoundDocument(o.version,p).setHasLocalMutations(),c===null?null:c.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map((g=>g.field)))})(n,e,t,r):(function(a,o,c){return qd(a.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):c})(n,e,t)}function p5(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),a=KC(r.transform,i||null);a!=null&&(t===null&&(t=_r.empty()),t.set(r.field,a))}return t||null}function jw(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Ec(r,i,((a,o)=>f5(a,o)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Ff extends Y0{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class co extends Y0{constructor(e,t,r,i,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function JC(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}})),e}function Bw(n,e,t){const r=new Map;ft(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let i=0;i<t.length;i++){const a=n[i],o=a.transform,c=e.data.field(a.field);r.set(a.field,c5(o,c,t[i]))}return r}function Vw(n,e,t){const r=new Map;for(const i of n){const a=i.transform,o=t.data.field(i.field);r.set(i.field,l5(a,o,e))}return r}class W0 extends Y0{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class eT extends Y0{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m5{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&d5(a,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=hf(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=hf(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=$C();return this.mutations.forEach((i=>{const a=e.get(i.key),o=a.overlayedDocument;let c=this.applyToLocalView(o,a.mutatedFields);c=t.has(i.key)?null:c;const u=ZC(o,c);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(je.min())})),r}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),st())}isEqual(e){return this.batchId===e.batchId&&Ec(this.mutations,e.mutations,((t,r)=>jw(t,r)))&&Ec(this.baseMutations,e.baseMutations,((t,r)=>jw(t,r)))}}class Zv{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){ft(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=(function(){return r5})();const a=e.mutations;for(let o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new Zv(e,t,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g5{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v5{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var wn,ct;function tT(n){switch(n){case ce.OK:return ke(64938);case ce.CANCELLED:case ce.UNKNOWN:case ce.DEADLINE_EXCEEDED:case ce.RESOURCE_EXHAUSTED:case ce.INTERNAL:case ce.UNAVAILABLE:case ce.UNAUTHENTICATED:return!1;case ce.INVALID_ARGUMENT:case ce.NOT_FOUND:case ce.ALREADY_EXISTS:case ce.PERMISSION_DENIED:case ce.FAILED_PRECONDITION:case ce.ABORTED:case ce.OUT_OF_RANGE:case ce.UNIMPLEMENTED:case ce.DATA_LOSS:return!0;default:return ke(15467,{code:n})}}function nT(n){if(n===void 0)return Wa("GRPC error has no .code"),ce.UNKNOWN;switch(n){case wn.OK:return ce.OK;case wn.CANCELLED:return ce.CANCELLED;case wn.UNKNOWN:return ce.UNKNOWN;case wn.DEADLINE_EXCEEDED:return ce.DEADLINE_EXCEEDED;case wn.RESOURCE_EXHAUSTED:return ce.RESOURCE_EXHAUSTED;case wn.INTERNAL:return ce.INTERNAL;case wn.UNAVAILABLE:return ce.UNAVAILABLE;case wn.UNAUTHENTICATED:return ce.UNAUTHENTICATED;case wn.INVALID_ARGUMENT:return ce.INVALID_ARGUMENT;case wn.NOT_FOUND:return ce.NOT_FOUND;case wn.ALREADY_EXISTS:return ce.ALREADY_EXISTS;case wn.PERMISSION_DENIED:return ce.PERMISSION_DENIED;case wn.FAILED_PRECONDITION:return ce.FAILED_PRECONDITION;case wn.ABORTED:return ce.ABORTED;case wn.OUT_OF_RANGE:return ce.OUT_OF_RANGE;case wn.UNIMPLEMENTED:return ce.UNIMPLEMENTED;case wn.DATA_LOSS:return ce.DATA_LOSS;default:return ke(39323,{code:n})}}(ct=wn||(wn={}))[ct.OK=0]="OK",ct[ct.CANCELLED=1]="CANCELLED",ct[ct.UNKNOWN=2]="UNKNOWN",ct[ct.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ct[ct.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ct[ct.NOT_FOUND=5]="NOT_FOUND",ct[ct.ALREADY_EXISTS=6]="ALREADY_EXISTS",ct[ct.PERMISSION_DENIED=7]="PERMISSION_DENIED",ct[ct.UNAUTHENTICATED=16]="UNAUTHENTICATED",ct[ct.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ct[ct.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ct[ct.ABORTED=10]="ABORTED",ct[ct.OUT_OF_RANGE=11]="OUT_OF_RANGE",ct[ct.UNIMPLEMENTED=12]="UNIMPLEMENTED",ct[ct.INTERNAL=13]="INTERNAL",ct[ct.UNAVAILABLE=14]="UNAVAILABLE",ct[ct.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y5(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _5=new $s([4294967295,4294967295],0);function Fw(n){const e=y5().encode(n),t=new mC;return t.update(e),new Uint8Array(t.digest())}function Uw(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new $s([t,r],0),new $s([i,a],0)]}class Jv{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new ef(`Invalid padding: ${t}`);if(r<0)throw new ef(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new ef(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new ef(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=$s.fromNumber(this.ge)}ye(e,t,r){let i=e.add(t.multiply($s.fromNumber(r)));return i.compare(_5)===1&&(i=new $s([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=Fw(e),[r,i]=Uw(t);for(let a=0;a<this.hashCount;a++){const o=this.ye(r,i,a);if(!this.we(o))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),o=new Jv(a,i,t);return r.forEach((c=>o.insert(c))),o}insert(e){if(this.ge===0)return;const t=Fw(e),[r,i]=Uw(t);for(let a=0;a<this.hashCount;a++){const o=this.ye(r,i,a);this.Se(o)}}Se(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class ef extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q0{constructor(e,t,r,i,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,Uf.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Q0(je.min(),i,new tn(at),Qa(),st())}}class Uf{constructor(e,t,r,i,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Uf(r,t,st(),st(),st())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $d{constructor(e,t,r,i){this.be=e,this.removedTargetIds=t,this.key=r,this.De=i}}class rT{constructor(e,t){this.targetId=e,this.Ce=t}}class iT{constructor(e,t,r=sr.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class zw{constructor(){this.ve=0,this.Fe=Hw(),this.Me=sr.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=st(),t=st(),r=st();return this.Fe.forEach(((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:ke(38017,{changeType:a})}})),new Uf(this.Me,this.xe,e,t,r)}qe(){this.Oe=!1,this.Fe=Hw()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,ft(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class x5{constructor(e){this.Ge=e,this.ze=new Map,this.je=Qa(),this.Je=Sd(),this.He=Sd(),this.Ye=new tn(at)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:ke(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((r,i)=>{this.rt(i)&&t(i)}))}st(e){const t=e.targetId,r=e.Ce.count,i=this.ot(t);if(i){const a=i.target;if(Bg(a))if(r===0){const o=new Re(a.path);this.et(t,o,zn.newNoDocument(o,je.min()))}else ft(r===1,20013,{expectedCount:r});else{const o=this._t(t);if(o!==r){const c=this.ut(e),u=c?this.ct(c,e,o):1;if(u!==0){this.it(t);const h=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,h)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:a=0}=t;let o,c;try{o=to(r).toUint8Array()}catch(u){if(u instanceof TC)return xc("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{c=new Jv(o,i,a)}catch(u){return xc(u instanceof ef?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return c.ge===0?null:c}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){const r=this.Ge.getRemoteKeysForTarget(t);let i=0;return r.forEach((a=>{const o=this.Ge.ht(),c=`projects/${o.projectId}/databases/${o.database}/documents/${a.path.canonicalString()}`;e.mightContain(c)||(this.et(t,a,null),i++)})),i}Tt(e){const t=new Map;this.ze.forEach(((a,o)=>{const c=this.ot(o);if(c){if(a.current&&Bg(c.target)){const u=new Re(c.target.path);this.It(u).has(o)||this.Et(o,u)||this.et(o,u,zn.newNoDocument(u,e))}a.Be&&(t.set(o,a.ke()),a.qe())}}));let r=st();this.He.forEach(((a,o)=>{let c=!0;o.forEachWhile((u=>{const h=this.ot(u);return!h||h.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)})),c&&(r=r.add(a))})),this.je.forEach(((a,o)=>o.setReadTime(e)));const i=new Q0(e,t,this.Ye,this.je,r);return this.je=Qa(),this.Je=Sd(),this.He=Sd(),this.Ye=new tn(at),i}Xe(e,t){if(!this.rt(e))return;const r=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,r),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,t)?i.Qe(t,1):i.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new zw,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Pn(at),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Pn(at),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||Ae("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new zw),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Sd(){return new tn(Re.comparator)}function Hw(){return new tn(Re.comparator)}const E5={asc:"ASCENDING",desc:"DESCENDING"},w5={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},A5={and:"AND",or:"OR"};class b5{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Fg(n,e){return n.useProto3Json||Vf(e)?e:{value:e}}function d0(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function aT(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function S5(n,e){return d0(n,e.toTimestamp())}function qr(n){return ft(!!n,49232),je.fromTimestamp((function(t){const r=eo(t);return new It(r.seconds,r.nanos)})(n))}function ey(n,e){return Ug(n,e).canonicalString()}function Ug(n,e){const t=(function(i){return new kt(["projects",i.projectId,"databases",i.database])})(n).child("documents");return e===void 0?t:t.child(e)}function sT(n){const e=kt.fromString(n);return ft(hT(e),10190,{key:e.toString()}),e}function p0(n,e){return ey(n.databaseId,e.path)}function df(n,e){const t=sT(e);if(t.get(1)!==n.databaseId.projectId)throw new _e(ce.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new _e(ce.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Re(lT(t))}function oT(n,e){return ey(n.databaseId,e)}function C5(n){const e=sT(n);return e.length===4?kt.emptyPath():lT(e)}function zg(n){return new kt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function lT(n){return ft(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function Gw(n,e,t){return{name:p0(n,e),fields:t.value.mapValue.fields}}function T5(n,e){return"found"in e?(function(r,i){ft(!!i.found,43571),i.found.name,i.found.updateTime;const a=df(r,i.found.name),o=qr(i.found.updateTime),c=i.found.createTime?qr(i.found.createTime):je.min(),u=new _r({mapValue:{fields:i.found.fields}});return zn.newFoundDocument(a,o,c,u)})(n,e):"missing"in e?(function(r,i){ft(!!i.missing,3894),ft(!!i.readTime,22933);const a=df(r,i.missing),o=qr(i.readTime);return zn.newNoDocument(a,o)})(n,e):ke(7234,{result:e})}function I5(n,e){let t;if("targetChange"in e){e.targetChange;const r=(function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:ke(39313,{state:h})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],a=(function(h,p){return h.useProto3Json?(ft(p===void 0||typeof p=="string",58123),sr.fromBase64String(p||"")):(ft(p===void 0||p instanceof Buffer||p instanceof Uint8Array,16193),sr.fromUint8Array(p||new Uint8Array))})(n,e.targetChange.resumeToken),o=e.targetChange.cause,c=o&&(function(h){const p=h.code===void 0?ce.UNKNOWN:nT(h.code);return new _e(p,h.message||"")})(o);t=new iT(r,i,a,c||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=df(n,r.document.name),a=qr(r.document.updateTime),o=r.document.createTime?qr(r.document.createTime):je.min(),c=new _r({mapValue:{fields:r.document.fields}}),u=zn.newFoundDocument(i,a,o,c),h=r.targetIds||[],p=r.removedTargetIds||[];t=new $d(h,p,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=df(n,r.document),a=r.readTime?qr(r.readTime):je.min(),o=zn.newNoDocument(i,a),c=r.removedTargetIds||[];t=new $d([],c,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=df(n,r.document),a=r.removedTargetIds||[];t=new $d([],a,i,null)}else{if(!("filter"in e))return ke(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:a}=r,o=new v5(i,a),c=r.targetId;t=new rT(c,o)}}return t}function cT(n,e){let t;if(e instanceof Ff)t={update:Gw(n,e.key,e.value)};else if(e instanceof W0)t={delete:p0(n,e.key)};else if(e instanceof co)t={update:Gw(n,e.key,e.data),updateMask:j5(e.fieldMask)};else{if(!(e instanceof eT))return ke(16599,{Vt:e.type});t={verify:p0(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((r=>(function(a,o){const c=o.transform;if(c instanceof Sf)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Cf)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Tf)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof h0)return{fieldPath:o.field.canonicalString(),increment:c.Ae};throw ke(20930,{transform:o.transform})})(0,r)))),e.precondition.isNone||(t.currentDocument=(function(i,a){return a.updateTime!==void 0?{updateTime:S5(i,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:ke(27497)})(n,e.precondition)),t}function N5(n,e){return n&&n.length>0?(ft(e!==void 0,14353),n.map((t=>(function(i,a){let o=i.updateTime?qr(i.updateTime):qr(a);return o.isEqual(je.min())&&(o=qr(a)),new h5(o,i.transformResults||[])})(t,e)))):[]}function R5(n,e){return{documents:[oT(n,e.path)]}}function O5(n,e){const t={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=oT(n,i);const a=(function(h){if(h.length!==0)return fT(ki.create(h,"and"))})(e.filters);a&&(t.structuredQuery.where=a);const o=(function(h){if(h.length!==0)return h.map((p=>(function(_){return{field:ic(_.field),direction:P5(_.dir)}})(p)))})(e.orderBy);o&&(t.structuredQuery.orderBy=o);const c=Fg(n,e.limit);return c!==null&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt=(function(h){return{before:h.inclusive,values:h.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(h){return{before:!h.inclusive,values:h.position}})(e.endAt)),{ft:t,parent:i}}function D5(n){let e=C5(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){ft(r===1,65062);const p=t.from[0];p.allDescendants?i=p.collectionId:e=e.child(p.collectionId)}let a=[];t.where&&(a=(function(g){const _=uT(g);return _ instanceof ki&&jC(_)?_.getFilters():[_]})(t.where));let o=[];t.orderBy&&(o=(function(g){return g.map((_=>(function(w){return new bf(ac(w.field),(function(D){switch(D){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(w.direction))})(_)))})(t.orderBy));let c=null;t.limit&&(c=(function(g){let _;return _=typeof g=="object"?g.value:g,Vf(_)?null:_})(t.limit));let u=null;t.startAt&&(u=(function(g){const _=!!g.before,E=g.values||[];return new u0(E,_)})(t.startAt));let h=null;return t.endAt&&(h=(function(g){const _=!g.before,E=g.values||[];return new u0(E,_)})(t.endAt)),ZD(e,i,o,a,c,"F",u,h)}function M5(n,e){const t=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ke(28987,{purpose:i})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function uT(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=ac(t.unaryFilter.field);return An.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=ac(t.unaryFilter.field);return An.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=ac(t.unaryFilter.field);return An.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=ac(t.unaryFilter.field);return An.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ke(61313);default:return ke(60726)}})(n):n.fieldFilter!==void 0?(function(t){return An.create(ac(t.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ke(58110);default:return ke(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return ki.create(t.compositeFilter.filters.map((r=>uT(r))),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ke(1026)}})(t.compositeFilter.op))})(n):ke(30097,{filter:n})}function P5(n){return E5[n]}function k5(n){return w5[n]}function L5(n){return A5[n]}function ic(n){return{fieldPath:n.canonicalString()}}function ac(n){return rr.fromServerFormat(n.fieldPath)}function fT(n){return n instanceof An?(function(t){if(t.op==="=="){if(Ow(t.value))return{unaryFilter:{field:ic(t.field),op:"IS_NAN"}};if(Rw(t.value))return{unaryFilter:{field:ic(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Ow(t.value))return{unaryFilter:{field:ic(t.field),op:"IS_NOT_NAN"}};if(Rw(t.value))return{unaryFilter:{field:ic(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ic(t.field),op:k5(t.op),value:t.value}}})(n):n instanceof ki?(function(t){const r=t.getFilters().map((i=>fT(i)));return r.length===1?r[0]:{compositeFilter:{op:L5(t.op),filters:r}}})(n):ke(54877,{filter:n})}function j5(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function hT(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Us{constructor(e,t,r,i,a=je.min(),o=je.min(),c=sr.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=c,this.expectedCount=u}withSequenceNumber(e){return new Us(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Us(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Us(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Us(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B5{constructor(e){this.yt=e}}function V5(n){const e=D5({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?f0(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F5{constructor(){this.Cn=new U5}addToCollectionParentIndex(e,t){return this.Cn.add(t),de.resolve()}getCollectionParents(e,t){return de.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return de.resolve()}deleteFieldIndex(e,t){return de.resolve()}deleteAllFieldIndexes(e){return de.resolve()}createTargetIndexes(e,t){return de.resolve()}getDocumentsMatchingTarget(e,t){return de.resolve(null)}getIndexType(e,t){return de.resolve(0)}getFieldIndexes(e,t){return de.resolve([])}getNextCollectionGroupToUpdate(e){return de.resolve(null)}getMinOffset(e,t){return de.resolve(Js.min())}getMinOffsetFromCollectionGroup(e,t){return de.resolve(Js.min())}updateCollectionGroup(e,t,r){return de.resolve()}updateIndexEntries(e,t){return de.resolve()}}class U5{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Pn(kt.comparator),a=!i.has(r);return this.index[t]=i.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Pn(kt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qw={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},dT=41943040;class Ir{static withCacheSize(e){return new Ir(e,Ir.DEFAULT_COLLECTION_PERCENTILE,Ir.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ir.DEFAULT_COLLECTION_PERCENTILE=10,Ir.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ir.DEFAULT=new Ir(dT,Ir.DEFAULT_COLLECTION_PERCENTILE,Ir.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ir.DISABLED=new Ir(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bc{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new bc(0)}static cr(){return new bc(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $w="LruGarbageCollector",z5=1048576;function Xw([n,e],[t,r]){const i=at(n,t);return i===0?at(e,r):i}class H5{constructor(e){this.Ir=e,this.buffer=new Pn(Xw),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();Xw(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class G5{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Ae($w,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Lc(t)?Ae($w,"Ignoring IndexedDB error during garbage collection: ",t):await kc(t)}await this.Vr(3e5)}))}}class q5{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((r=>Math.floor(t/100*r)))}nthSequenceNumber(e,t){if(t===0)return de.resolve(H0.ce);const r=new H5(t);return this.mr.forEachTarget(e,(i=>r.Ar(i.sequenceNumber))).next((()=>this.mr.pr(e,(i=>r.Ar(i))))).next((()=>r.maxValue))}removeTargets(e,t,r){return this.mr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(Ae("LruGarbageCollector","Garbage collection skipped; disabled"),de.resolve(qw)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(Ae("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),qw):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let r,i,a,o,c,u,h;const p=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((g=>(g>this.params.maximumSequenceNumbersToCollect?(Ae("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${g}`),i=this.params.maximumSequenceNumbersToCollect):i=g,o=Date.now(),this.nthSequenceNumber(e,i)))).next((g=>(r=g,c=Date.now(),this.removeTargets(e,r,t)))).next((g=>(a=g,u=Date.now(),this.removeOrphanedDocuments(e,r)))).next((g=>(h=Date.now(),nc()<=it.DEBUG&&Ae("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-p}ms
	Determined least recently used ${i} in `+(c-o)+`ms
	Removed ${a} targets in `+(u-c)+`ms
	Removed ${g} documents in `+(h-u)+`ms
Total Duration: ${h-p}ms`),de.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:g}))))}}function $5(n,e){return new q5(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X5{constructor(){this.changes=new il((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,zn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?de.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K5{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y5{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next((i=>(r=i,this.remoteDocumentCache.getEntry(e,t)))).next((i=>(r!==null&&hf(r.mutation,i,Gr.empty(),It.now()),i)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.getLocalViewOfDocuments(e,r,st()).next((()=>r))))}getLocalViewOfDocuments(e,t,r=st()){const i=$o();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,r).next((a=>{let o=Ju();return a.forEach(((c,u)=>{o=o.insert(c,u.overlayedDocument)})),o}))))}getOverlayedDocuments(e,t){const r=$o();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,st())))}populateOverlays(e,t,r){const i=[];return r.forEach((a=>{t.has(a)||i.push(a)})),this.documentOverlayCache.getOverlays(e,i).next((a=>{a.forEach(((o,c)=>{t.set(o,c)}))}))}computeViews(e,t,r,i){let a=Qa();const o=ff(),c=(function(){return ff()})();return t.forEach(((u,h)=>{const p=r.get(h.key);i.has(h.key)&&(p===void 0||p.mutation instanceof co)?a=a.insert(h.key,h):p!==void 0?(o.set(h.key,p.mutation.getFieldMask()),hf(p.mutation,h,p.mutation.getFieldMask(),It.now())):o.set(h.key,Gr.empty())})),this.recalculateAndSaveOverlays(e,a).next((u=>(u.forEach(((h,p)=>o.set(h,p))),t.forEach(((h,p)=>c.set(h,new K5(p,o.get(h)??null)))),c)))}recalculateAndSaveOverlays(e,t){const r=ff();let i=new tn(((o,c)=>o-c)),a=st();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((o=>{for(const c of o)c.keys().forEach((u=>{const h=t.get(u);if(h===null)return;let p=r.get(u)||Gr.empty();p=c.applyToLocalView(h,p),r.set(u,p);const g=(i.get(c.batchId)||st()).add(u);i=i.insert(c.batchId,g)}))})).next((()=>{const o=[],c=i.getReverseIterator();for(;c.hasNext();){const u=c.getNext(),h=u.key,p=u.value,g=$C();p.forEach((_=>{if(!a.has(_)){const E=ZC(t.get(_),r.get(_));E!==null&&g.set(_,E),a=a.add(_)}})),o.push(this.documentOverlayCache.saveOverlays(e,h,g))}return de.waitFor(o)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,t,r,i){return(function(o){return Re.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):UC(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next((a=>{const o=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-a.size):de.resolve($o());let c=xf,u=a;return o.next((h=>de.forEach(h,((p,g)=>(c<g.largestBatchId&&(c=g.largestBatchId),a.get(p)?de.resolve():this.remoteDocumentCache.getEntry(e,p).next((_=>{u=u.insert(p,_)}))))).next((()=>this.populateOverlays(e,h,a))).next((()=>this.computeViews(e,u,h,st()))).next((p=>({batchId:c,changes:qC(p)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Re(t)).next((r=>{let i=Ju();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i}))}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const a=t.collectionGroup;let o=Ju();return this.indexManager.getCollectionParents(e,a).next((c=>de.forEach(c,(u=>{const h=(function(g,_){return new jc(_,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)})(t,u.child(a));return this.getDocumentsMatchingCollectionQuery(e,h,r,i).next((p=>{p.forEach(((g,_)=>{o=o.insert(g,_)}))}))})).next((()=>o))))}getDocumentsMatchingCollectionQuery(e,t,r,i){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next((o=>(a=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,a,i)))).next((o=>{a.forEach(((u,h)=>{const p=h.getKey();o.get(p)===null&&(o=o.insert(p,zn.newInvalidDocument(p)))}));let c=Ju();return o.forEach(((u,h)=>{const p=a.get(u);p!==void 0&&hf(p.mutation,h,Gr.empty(),It.now()),X0(t,h)&&(c=c.insert(u,h))})),c}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W5{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return de.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(i){return{id:i.id,version:i.version,createTime:qr(i.createTime)}})(t)),de.resolve()}getNamedQuery(e,t){return de.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(i){return{name:i.name,query:V5(i.bundledQuery),readTime:qr(i.readTime)}})(t)),de.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q5{constructor(){this.overlays=new tn(Re.comparator),this.qr=new Map}getOverlay(e,t){return de.resolve(this.overlays.get(t))}getOverlays(e,t){const r=$o();return de.forEach(t,(i=>this.getOverlay(e,i).next((a=>{a!==null&&r.set(i,a)})))).next((()=>r))}saveOverlays(e,t,r){return r.forEach(((i,a)=>{this.St(e,t,a)})),de.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.qr.get(r);return i!==void 0&&(i.forEach((a=>this.overlays=this.overlays.remove(a))),this.qr.delete(r)),de.resolve()}getOverlaysForCollection(e,t,r){const i=$o(),a=t.length+1,o=new Re(t.child("")),c=this.overlays.getIteratorFrom(o);for(;c.hasNext();){const u=c.getNext().value,h=u.getKey();if(!t.isPrefixOf(h.path))break;h.path.length===a&&u.largestBatchId>r&&i.set(u.getKey(),u)}return de.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let a=new tn(((h,p)=>h-p));const o=this.overlays.getIterator();for(;o.hasNext();){const h=o.getNext().value;if(h.getKey().getCollectionGroup()===t&&h.largestBatchId>r){let p=a.get(h.largestBatchId);p===null&&(p=$o(),a=a.insert(h.largestBatchId,p)),p.set(h.getKey(),h)}}const c=$o(),u=a.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach(((h,p)=>c.set(h,p))),!(c.size()>=i)););return de.resolve(c)}St(e,t,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new g5(t,r));let a=this.qr.get(t);a===void 0&&(a=st(),this.qr.set(t,a)),this.qr.set(t,a.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z5{constructor(){this.sessionToken=sr.EMPTY_BYTE_STRING}getSessionToken(e){return de.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,de.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ty{constructor(){this.Qr=new Pn(Un.$r),this.Ur=new Pn(Un.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const r=new Un(e,t);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,t){e.forEach((r=>this.addReference(r,t)))}removeReference(e,t){this.Gr(new Un(e,t))}zr(e,t){e.forEach((r=>this.removeReference(r,t)))}jr(e){const t=new Re(new kt([])),r=new Un(t,e),i=new Un(t,e+1),a=[];return this.Ur.forEachInRange([r,i],(o=>{this.Gr(o),a.push(o.key)})),a}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new Re(new kt([])),r=new Un(t,e),i=new Un(t,e+1);let a=st();return this.Ur.forEachInRange([r,i],(o=>{a=a.add(o.key)})),a}containsKey(e){const t=new Un(e,0),r=this.Qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class Un{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return Re.comparator(e.key,t.key)||at(e.Yr,t.Yr)}static Kr(e,t){return at(e.Yr,t.Yr)||Re.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J5{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Pn(Un.$r)}checkEmpty(e){return de.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){const a=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new m5(a,t,r,i);this.mutationQueue.push(o);for(const c of i)this.Zr=this.Zr.add(new Un(c.key,a)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return de.resolve(o)}lookupMutationBatch(e,t){return de.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=this.ei(r),a=i<0?0:i;return de.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return de.resolve(this.mutationQueue.length===0?$v:this.tr-1)}getAllMutationBatches(e){return de.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Un(t,0),i=new Un(t,Number.POSITIVE_INFINITY),a=[];return this.Zr.forEachInRange([r,i],(o=>{const c=this.Xr(o.Yr);a.push(c)})),de.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Pn(at);return t.forEach((i=>{const a=new Un(i,0),o=new Un(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([a,o],(c=>{r=r.add(c.Yr)}))})),de.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let a=r;Re.isDocumentKey(a)||(a=a.child(""));const o=new Un(new Re(a),0);let c=new Pn(at);return this.Zr.forEachWhile((u=>{const h=u.key.path;return!!r.isPrefixOf(h)&&(h.length===i&&(c=c.add(u.Yr)),!0)}),o),de.resolve(this.ti(c))}ti(e){const t=[];return e.forEach((r=>{const i=this.Xr(r);i!==null&&t.push(i)})),t}removeMutationBatch(e,t){ft(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return de.forEach(t.mutations,(i=>{const a=new Un(i.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,t){const r=new Un(t,0),i=this.Zr.firstAfterOrEqual(r);return de.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,de.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eM{constructor(e){this.ri=e,this.docs=(function(){return new tn(Re.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),a=i?i.size:0,o=this.ri(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return de.resolve(r?r.document.mutableCopy():zn.newInvalidDocument(t))}getEntries(e,t){let r=Qa();return t.forEach((i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():zn.newInvalidDocument(i))})),de.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let a=Qa();const o=t.path,c=new Re(o.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(c);for(;u.hasNext();){const{key:h,value:{document:p}}=u.getNext();if(!o.isPrefixOf(h.path))break;h.path.length>o.length+1||RD(ND(p),r)<=0||(i.has(p.key)||X0(t,p))&&(a=a.insert(p.key,p.mutableCopy()))}return de.resolve(a)}getAllFromCollectionGroup(e,t,r,i){ke(9500)}ii(e,t){return de.forEach(this.docs,(r=>t(r)))}newChangeBuffer(e){return new tM(this)}getSize(e){return de.resolve(this.size)}}class tM extends X5{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((r,i)=>{i.isValidDocument()?t.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)})),de.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nM{constructor(e){this.persistence=e,this.si=new il((t=>Yv(t)),Wv),this.lastRemoteSnapshotVersion=je.min(),this.highestTargetId=0,this.oi=0,this._i=new ty,this.targetCount=0,this.ai=bc.ur()}forEachTarget(e,t){return this.si.forEach(((r,i)=>t(i))),de.resolve()}getLastRemoteSnapshotVersion(e){return de.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return de.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),de.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.oi&&(this.oi=t),de.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new bc(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,de.resolve()}updateTargetData(e,t){return this.Pr(t),de.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,de.resolve()}removeTargets(e,t,r){let i=0;const a=[];return this.si.forEach(((o,c)=>{c.sequenceNumber<=t&&r.get(c.targetId)===null&&(this.si.delete(o),a.push(this.removeMatchingKeysForTargetId(e,c.targetId)),i++)})),de.waitFor(a).next((()=>i))}getTargetCount(e){return de.resolve(this.targetCount)}getTargetData(e,t){const r=this.si.get(t)||null;return de.resolve(r)}addMatchingKeys(e,t,r){return this._i.Wr(t,r),de.resolve()}removeMatchingKeys(e,t,r){this._i.zr(t,r);const i=this.persistence.referenceDelegate,a=[];return i&&t.forEach((o=>{a.push(i.markPotentiallyOrphaned(e,o))})),de.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),de.resolve()}getMatchingKeysForTargetId(e,t){const r=this._i.Hr(t);return de.resolve(r)}containsKey(e,t){return de.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pT{constructor(e,t){this.ui={},this.overlays={},this.ci=new H0(0),this.li=!1,this.li=!0,this.hi=new Z5,this.referenceDelegate=e(this),this.Pi=new nM(this),this.indexManager=new F5,this.remoteDocumentCache=(function(i){return new eM(i)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new B5(t),this.Ii=new W5(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Q5,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ui[e.toKey()];return r||(r=new J5(t,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,r){Ae("MemoryPersistence","Starting transaction:",e);const i=new rM(this.ci.next());return this.referenceDelegate.Ei(),r(i).next((a=>this.referenceDelegate.di(i).next((()=>a)))).toPromise().then((a=>(i.raiseOnCommittedEvent(),a)))}Ai(e,t){return de.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,t))))}}class rM extends DD{constructor(e){super(),this.currentSequenceNumber=e}}class ny{constructor(e){this.persistence=e,this.Ri=new ty,this.Vi=null}static mi(e){return new ny(e)}get fi(){if(this.Vi)return this.Vi;throw ke(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.fi.delete(r.toString()),de.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.fi.add(r.toString()),de.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),de.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((i=>this.fi.add(i.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((i=>{i.forEach((a=>this.fi.add(a.toString())))})).next((()=>r.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return de.forEach(this.fi,(r=>{const i=Re.fromPath(r);return this.gi(e,i).next((a=>{a||t.removeEntry(i,je.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((r=>{r?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return de.or([()=>de.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class m0{constructor(e,t){this.persistence=e,this.pi=new il((r=>kD(r.path)),((r,i)=>r.isEqual(i))),this.garbageCollector=$5(this,t)}static mi(e,t){return new m0(e,t)}Ei(){}di(e){return de.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>t.next((i=>r+i))))}wr(e){let t=0;return this.pr(e,(r=>{t++})).next((()=>t))}pr(e,t){return de.forEach(this.pi,((r,i)=>this.br(e,r,i).next((a=>a?de.resolve():t(i)))))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const i=this.persistence.getRemoteDocumentCache(),a=i.newChangeBuffer();return i.ii(e,(o=>this.br(e,o,t).next((c=>{c||(r++,a.removeEntry(o,je.min()))})))).next((()=>a.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),de.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),de.resolve()}removeReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),de.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),de.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Hd(e.data.value)),t}br(e,t,r){return de.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const i=this.pi.get(t);return de.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ry{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Es=r,this.ds=i}static As(e,t){let r=st(),i=st();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new ry(e,t.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iM{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aM{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return LR()?8:MD(fr())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,i){const a={result:null};return this.ys(e,t).next((o=>{a.result=o})).next((()=>{if(!a.result)return this.ws(e,t,i,r).next((o=>{a.result=o}))})).next((()=>{if(a.result)return;const o=new iM;return this.Ss(e,t,o).next((c=>{if(a.result=c,this.Vs)return this.bs(e,t,o,c.size)}))})).next((()=>a.result))}bs(e,t,r,i){return r.documentReadCount<this.fs?(nc()<=it.DEBUG&&Ae("QueryEngine","SDK will not create cache indexes for query:",rc(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),de.resolve()):(nc()<=it.DEBUG&&Ae("QueryEngine","Query:",rc(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(nc()<=it.DEBUG&&Ae("QueryEngine","The SDK decides to create cache indexes for query:",rc(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,pa(t))):de.resolve())}ys(e,t){if(kw(t))return de.resolve(null);let r=pa(t);return this.indexManager.getIndexType(e,r).next((i=>i===0?null:(t.limit!==null&&i===1&&(t=f0(t,null,"F"),r=pa(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next((a=>{const o=st(...a);return this.ps.getDocuments(e,o).next((c=>this.indexManager.getMinOffset(e,r).next((u=>{const h=this.Ds(t,c);return this.Cs(t,h,o,u.readTime)?this.ys(e,f0(t,null,"F")):this.vs(e,h,t,u)}))))})))))}ws(e,t,r,i){return kw(t)||i.isEqual(je.min())?de.resolve(null):this.ps.getDocuments(e,r).next((a=>{const o=this.Ds(t,a);return this.Cs(t,o,r,i)?de.resolve(null):(nc()<=it.DEBUG&&Ae("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),rc(t)),this.vs(e,o,t,ID(i,xf)).next((c=>c)))}))}Ds(e,t){let r=new Pn(HC(e));return t.forEach(((i,a)=>{X0(e,a)&&(r=r.add(a))})),r}Cs(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const a=e.limitType==="F"?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Ss(e,t,r){return nc()<=it.DEBUG&&Ae("QueryEngine","Using full collection scan to execute query:",rc(t)),this.ps.getDocumentsMatchingQuery(e,t,Js.min(),r)}vs(e,t,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next((a=>(t.forEach((o=>{a=a.insert(o.key,o)})),a)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iy="LocalStore",sM=3e8;class oM{constructor(e,t,r,i){this.persistence=e,this.Fs=t,this.serializer=i,this.Ms=new tn(at),this.xs=new il((a=>Yv(a)),Wv),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Y5(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function lM(n,e,t,r){return new oM(n,e,t,r)}async function mT(n,e){const t=Ve(n);return await t.persistence.runTransaction("Handle user change","readonly",(r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next((a=>(i=a,t.Bs(e),t.mutationQueue.getAllMutationBatches(r)))).next((a=>{const o=[],c=[];let u=st();for(const h of i){o.push(h.batchId);for(const p of h.mutations)u=u.add(p.key)}for(const h of a){c.push(h.batchId);for(const p of h.mutations)u=u.add(p.key)}return t.localDocuments.getDocuments(r,u).next((h=>({Ls:h,removedBatchIds:o,addedBatchIds:c})))}))}))}function cM(n,e){const t=Ve(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const i=e.batch.keys(),a=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(c,u,h,p){const g=h.batch,_=g.keys();let E=de.resolve();return _.forEach((w=>{E=E.next((()=>p.getEntry(u,w))).next((S=>{const D=h.docVersions.get(w);ft(D!==null,48541),S.version.compareTo(D)<0&&(g.applyToRemoteDocument(S,h),S.isValidDocument()&&(S.setReadTime(h.commitVersion),p.addEntry(S)))}))})),E.next((()=>c.mutationQueue.removeMutationBatch(u,g)))})(t,r,e,a).next((()=>a.apply(r))).next((()=>t.mutationQueue.performConsistencyCheck(r))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(c){let u=st();for(let h=0;h<c.mutationResults.length;++h)c.mutationResults[h].transformResults.length>0&&(u=u.add(c.batch.mutations[h].key));return u})(e)))).next((()=>t.localDocuments.getDocuments(r,i)))}))}function gT(n){const e=Ve(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function uM(n,e){const t=Ve(n),r=e.snapshotVersion;let i=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(a=>{const o=t.Ns.newChangeBuffer({trackRemovals:!0});i=t.Ms;const c=[];e.targetChanges.forEach(((p,g)=>{const _=i.get(g);if(!_)return;c.push(t.Pi.removeMatchingKeys(a,p.removedDocuments,g).next((()=>t.Pi.addMatchingKeys(a,p.addedDocuments,g))));let E=_.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(g)!==null?E=E.withResumeToken(sr.EMPTY_BYTE_STRING,je.min()).withLastLimboFreeSnapshotVersion(je.min()):p.resumeToken.approximateByteSize()>0&&(E=E.withResumeToken(p.resumeToken,r)),i=i.insert(g,E),(function(S,D,T){return S.resumeToken.approximateByteSize()===0||D.snapshotVersion.toMicroseconds()-S.snapshotVersion.toMicroseconds()>=sM?!0:T.addedDocuments.size+T.modifiedDocuments.size+T.removedDocuments.size>0})(_,E,p)&&c.push(t.Pi.updateTargetData(a,E))}));let u=Qa(),h=st();if(e.documentUpdates.forEach((p=>{e.resolvedLimboDocuments.has(p)&&c.push(t.persistence.referenceDelegate.updateLimboDocument(a,p))})),c.push(fM(a,o,e.documentUpdates).next((p=>{u=p.ks,h=p.qs}))),!r.isEqual(je.min())){const p=t.Pi.getLastRemoteSnapshotVersion(a).next((g=>t.Pi.setTargetsMetadata(a,a.currentSequenceNumber,r)));c.push(p)}return de.waitFor(c).next((()=>o.apply(a))).next((()=>t.localDocuments.getLocalViewOfDocuments(a,u,h))).next((()=>u))})).then((a=>(t.Ms=i,a)))}function fM(n,e,t){let r=st(),i=st();return t.forEach((a=>r=r.add(a))),e.getEntries(n,r).next((a=>{let o=Qa();return t.forEach(((c,u)=>{const h=a.get(c);u.isFoundDocument()!==h.isFoundDocument()&&(i=i.add(c)),u.isNoDocument()&&u.version.isEqual(je.min())?(e.removeEntry(c,u.readTime),o=o.insert(c,u)):!h.isValidDocument()||u.version.compareTo(h.version)>0||u.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(u),o=o.insert(c,u)):Ae(iy,"Ignoring outdated watch update for ",c,". Current version:",h.version," Watch version:",u.version)})),{ks:o,qs:i}}))}function hM(n,e){const t=Ve(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=$v),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function dM(n,e){const t=Ve(n);return t.persistence.runTransaction("Allocate target","readwrite",(r=>{let i;return t.Pi.getTargetData(r,e).next((a=>a?(i=a,de.resolve(i)):t.Pi.allocateTargetId(r).next((o=>(i=new Us(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.Pi.addTargetData(r,i).next((()=>i)))))))})).then((r=>{const i=t.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(r.targetId,r),t.xs.set(e,r.targetId)),r}))}async function Hg(n,e,t){const r=Ve(n),i=r.Ms.get(e),a=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",a,(o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!Lc(o))throw o;Ae(iy,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)}function Kw(n,e,t){const r=Ve(n);let i=je.min(),a=st();return r.persistence.runTransaction("Execute query","readwrite",(o=>(function(u,h,p){const g=Ve(u),_=g.xs.get(p);return _!==void 0?de.resolve(g.Ms.get(_)):g.Pi.getTargetData(h,p)})(r,o,pa(e)).next((c=>{if(c)return i=c.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(o,c.targetId).next((u=>{a=u}))})).next((()=>r.Fs.getDocumentsMatchingQuery(o,e,t?i:je.min(),t?a:st()))).next((c=>(pM(r,e5(e),c),{documents:c,Qs:a})))))}function pM(n,e,t){let r=n.Os.get(e)||je.min();t.forEach(((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)})),n.Os.set(e,r)}class Yw{constructor(){this.activeTargetIds=s5()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class mM{constructor(){this.Mo=new Yw,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,r){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Yw,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gM{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ww="ConnectivityMonitor";class Qw{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Ae(Ww,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Ae(Ww,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Cd=null;function Gg(){return Cd===null?Cd=(function(){return 268435456+Math.round(2147483648*Math.random())})():Cd++,"0x"+Cd.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mm="RestConnection",vM={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class yM{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===l0?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,t,r,i,a){const o=Gg(),c=this.zo(e,t.toUriEncodedString());Ae(Mm,`Sending RPC '${e}' ${o}:`,c,r);const u={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(u,i,a);const{host:h}=new URL(c),p=Oc(h);return this.Jo(e,c,u,r,p).then((g=>(Ae(Mm,`Received RPC '${e}' ${o}: `,g),g)),(g=>{throw xc(Mm,`RPC '${e}' ${o} failed with error: `,g,"url: ",c,"request:",r),g}))}Ho(e,t,r,i,a,o){return this.Go(e,t,r,i,a)}jo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Pc})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((i,a)=>e[a]=i)),r&&r.headers.forEach(((i,a)=>e[a]=i))}zo(e,t){const r=vM[e];return`${this.Uo}/v1/${t}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _M{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lr="WebChannelConnection";class xM extends yM{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,i,a){const o=Gg();return new Promise(((c,u)=>{const h=new gC;h.setWithCredentials(!0),h.listenOnce(vC.COMPLETE,(()=>{try{switch(h.getLastErrorCode()){case zd.NO_ERROR:const g=h.getResponseJson();Ae(lr,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(g)),c(g);break;case zd.TIMEOUT:Ae(lr,`RPC '${e}' ${o} timed out`),u(new _e(ce.DEADLINE_EXCEEDED,"Request time out"));break;case zd.HTTP_ERROR:const _=h.getStatus();if(Ae(lr,`RPC '${e}' ${o} failed with status:`,_,"response text:",h.getResponseText()),_>0){let E=h.getResponseJson();Array.isArray(E)&&(E=E[0]);const w=E?.error;if(w&&w.status&&w.message){const S=(function(T){const O=T.toLowerCase().replace(/_/g,"-");return Object.values(ce).indexOf(O)>=0?O:ce.UNKNOWN})(w.status);u(new _e(S,w.message))}else u(new _e(ce.UNKNOWN,"Server responded with status "+h.getStatus()))}else u(new _e(ce.UNAVAILABLE,"Connection failed."));break;default:ke(9055,{l_:e,streamId:o,h_:h.getLastErrorCode(),P_:h.getLastError()})}}finally{Ae(lr,`RPC '${e}' ${o} completed.`)}}));const p=JSON.stringify(i);Ae(lr,`RPC '${e}' ${o} sending request:`,i),h.send(t,"POST",p,r,15)}))}T_(e,t,r){const i=Gg(),a=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=xC(),c=_C(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(u.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(u.useFetchStreams=!0),this.jo(u.initMessageHeaders,t,r),u.encodeInitMessageHeaders=!0;const p=a.join("");Ae(lr,`Creating RPC '${e}' stream ${i}: ${p}`,u);const g=o.createWebChannel(p,u);this.I_(g);let _=!1,E=!1;const w=new _M({Yo:D=>{E?Ae(lr,`Not sending because RPC '${e}' stream ${i} is closed:`,D):(_||(Ae(lr,`Opening RPC '${e}' stream ${i} transport.`),g.open(),_=!0),Ae(lr,`RPC '${e}' stream ${i} sending:`,D),g.send(D))},Zo:()=>g.close()}),S=(D,T,O)=>{D.listen(T,(j=>{try{O(j)}catch(z){setTimeout((()=>{throw z}),0)}}))};return S(g,Zu.EventType.OPEN,(()=>{E||(Ae(lr,`RPC '${e}' stream ${i} transport opened.`),w.o_())})),S(g,Zu.EventType.CLOSE,(()=>{E||(E=!0,Ae(lr,`RPC '${e}' stream ${i} transport closed`),w.a_(),this.E_(g))})),S(g,Zu.EventType.ERROR,(D=>{E||(E=!0,xc(lr,`RPC '${e}' stream ${i} transport errored. Name:`,D.name,"Message:",D.message),w.a_(new _e(ce.UNAVAILABLE,"The operation could not be completed")))})),S(g,Zu.EventType.MESSAGE,(D=>{if(!E){const T=D.data[0];ft(!!T,16349);const O=T,j=O?.error||O[0]?.error;if(j){Ae(lr,`RPC '${e}' stream ${i} received error:`,j);const z=j.status;let H=(function(b){const I=wn[b];if(I!==void 0)return nT(I)})(z),q=j.message;H===void 0&&(H=ce.INTERNAL,q="Unknown error status: "+z+" with message "+j.message),E=!0,w.a_(new _e(H,q)),g.close()}else Ae(lr,`RPC '${e}' stream ${i} received:`,T),w.u_(T)}})),S(c,yC.STAT_EVENT,(D=>{D.stat===Mg.PROXY?Ae(lr,`RPC '${e}' stream ${i} detected buffering proxy`):D.stat===Mg.NOPROXY&&Ae(lr,`RPC '${e}' stream ${i} detected no buffering proxy`)})),setTimeout((()=>{w.__()}),0),w}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function Pm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z0(n){return new b5(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ay{constructor(e,t,r=1e3,i=1.5,a=6e4){this.Mi=e,this.timerId=t,this.d_=r,this.A_=i,this.R_=a,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,t-r);i>0&&Ae("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zw="PersistentStream";class vT{constructor(e,t,r,i,a,o,c,u){this.Mi=e,this.S_=r,this.b_=i,this.connection=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=c,this.listener=u,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new ay(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===ce.RESOURCE_EXHAUSTED?(Wa(t.toString()),Wa("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===ce.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,i])=>{this.D_===t&&this.G_(r,i)}),(r=>{e((()=>{const i=new _e(ce.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)}))}))}G_(e,t){const r=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((i=>{r((()=>this.z_(i)))})),this.stream.onMessage((i=>{r((()=>++this.F_==1?this.J_(i):this.onNext(i)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Ae(Zw,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(Ae(Zw,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class EM extends vT{constructor(e,t,r,i,a,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,o),this.serializer=a}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=I5(this.serializer,e),r=(function(a){if(!("targetChange"in a))return je.min();const o=a.targetChange;return o.targetIds&&o.targetIds.length?je.min():o.readTime?qr(o.readTime):je.min()})(e);return this.listener.H_(t,r)}Y_(e){const t={};t.database=zg(this.serializer),t.addTarget=(function(a,o){let c;const u=o.target;if(c=Bg(u)?{documents:R5(a,u)}:{query:O5(a,u).ft},c.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){c.resumeToken=aT(a,o.resumeToken);const h=Fg(a,o.expectedCount);h!==null&&(c.expectedCount=h)}else if(o.snapshotVersion.compareTo(je.min())>0){c.readTime=d0(a,o.snapshotVersion.toTimestamp());const h=Fg(a,o.expectedCount);h!==null&&(c.expectedCount=h)}return c})(this.serializer,e);const r=M5(this.serializer,e);r&&(t.labels=r),this.q_(t)}Z_(e){const t={};t.database=zg(this.serializer),t.removeTarget=e,this.q_(t)}}class wM extends vT{constructor(e,t,r,i,a,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,o),this.serializer=a}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return ft(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ft(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){ft(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=N5(e.writeResults,e.commitTime),r=qr(e.commitTime);return this.listener.na(r,t)}ra(){const e={};e.database=zg(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((r=>cT(this.serializer,r)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AM{}class bM extends AM{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new _e(ce.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,o])=>this.connection.Go(e,Ug(t,r),i,a,o))).catch((a=>{throw a.name==="FirebaseError"?(a.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new _e(ce.UNKNOWN,a.toString())}))}Ho(e,t,r,i,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,c])=>this.connection.Ho(e,Ug(t,r),i,o,c,a))).catch((o=>{throw o.name==="FirebaseError"?(o.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new _e(ce.UNKNOWN,o.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class SM{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Wa(t),this.aa=!1):Ae("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tl="RemoteStore";class CM{constructor(e,t,r,i,a){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=a,this.Aa.Oo((o=>{r.enqueueAndForget((async()=>{al(this)&&(Ae(tl,"Restarting streams for network reachability change."),await(async function(u){const h=Ve(u);h.Ea.add(4),await zf(h),h.Ra.set("Unknown"),h.Ea.delete(4),await J0(h)})(this))}))})),this.Ra=new SM(r,i)}}async function J0(n){if(al(n))for(const e of n.da)await e(!0)}async function zf(n){for(const e of n.da)await e(!1)}function yT(n,e){const t=Ve(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),cy(t)?ly(t):Bc(t).O_()&&oy(t,e))}function sy(n,e){const t=Ve(n),r=Bc(t);t.Ia.delete(e),r.O_()&&_T(t,e),t.Ia.size===0&&(r.O_()?r.L_():al(t)&&t.Ra.set("Unknown"))}function oy(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(je.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Bc(n).Y_(e)}function _T(n,e){n.Va.Ue(e),Bc(n).Z_(e)}function ly(n){n.Va=new x5({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),Bc(n).start(),n.Ra.ua()}function cy(n){return al(n)&&!Bc(n).x_()&&n.Ia.size>0}function al(n){return Ve(n).Ea.size===0}function xT(n){n.Va=void 0}async function TM(n){n.Ra.set("Online")}async function IM(n){n.Ia.forEach(((e,t)=>{oy(n,e)}))}async function NM(n,e){xT(n),cy(n)?(n.Ra.ha(e),ly(n)):n.Ra.set("Unknown")}async function RM(n,e,t){if(n.Ra.set("Online"),e instanceof iT&&e.state===2&&e.cause)try{await(async function(i,a){const o=a.cause;for(const c of a.targetIds)i.Ia.has(c)&&(await i.remoteSyncer.rejectListen(c,o),i.Ia.delete(c),i.Va.removeTarget(c))})(n,e)}catch(r){Ae(tl,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await g0(n,r)}else if(e instanceof $d?n.Va.Ze(e):e instanceof rT?n.Va.st(e):n.Va.tt(e),!t.isEqual(je.min()))try{const r=await gT(n.localStore);t.compareTo(r)>=0&&await(function(a,o){const c=a.Va.Tt(o);return c.targetChanges.forEach(((u,h)=>{if(u.resumeToken.approximateByteSize()>0){const p=a.Ia.get(h);p&&a.Ia.set(h,p.withResumeToken(u.resumeToken,o))}})),c.targetMismatches.forEach(((u,h)=>{const p=a.Ia.get(u);if(!p)return;a.Ia.set(u,p.withResumeToken(sr.EMPTY_BYTE_STRING,p.snapshotVersion)),_T(a,u);const g=new Us(p.target,u,h,p.sequenceNumber);oy(a,g)})),a.remoteSyncer.applyRemoteEvent(c)})(n,t)}catch(r){Ae(tl,"Failed to raise snapshot:",r),await g0(n,r)}}async function g0(n,e,t){if(!Lc(e))throw e;n.Ea.add(1),await zf(n),n.Ra.set("Offline"),t||(t=()=>gT(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{Ae(tl,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await J0(n)}))}function ET(n,e){return e().catch((t=>g0(n,t,e)))}async function ep(n){const e=Ve(n),t=ro(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:$v;for(;OM(e);)try{const i=await hM(e.localStore,r);if(i===null){e.Ta.length===0&&t.L_();break}r=i.batchId,DM(e,i)}catch(i){await g0(e,i)}wT(e)&&AT(e)}function OM(n){return al(n)&&n.Ta.length<10}function DM(n,e){n.Ta.push(e);const t=ro(n);t.O_()&&t.X_&&t.ea(e.mutations)}function wT(n){return al(n)&&!ro(n).x_()&&n.Ta.length>0}function AT(n){ro(n).start()}async function MM(n){ro(n).ra()}async function PM(n){const e=ro(n);for(const t of n.Ta)e.ea(t.mutations)}async function kM(n,e,t){const r=n.Ta.shift(),i=Zv.from(r,e,t);await ET(n,(()=>n.remoteSyncer.applySuccessfulWrite(i))),await ep(n)}async function LM(n,e){e&&ro(n).X_&&await(async function(r,i){if((function(o){return tT(o)&&o!==ce.ABORTED})(i.code)){const a=r.Ta.shift();ro(r).B_(),await ET(r,(()=>r.remoteSyncer.rejectFailedWrite(a.batchId,i))),await ep(r)}})(n,e),wT(n)&&AT(n)}async function Jw(n,e){const t=Ve(n);t.asyncQueue.verifyOperationInProgress(),Ae(tl,"RemoteStore received new credentials");const r=al(t);t.Ea.add(3),await zf(t),r&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await J0(t)}async function jM(n,e){const t=Ve(n);e?(t.Ea.delete(2),await J0(t)):e||(t.Ea.add(2),await zf(t),t.Ra.set("Unknown"))}function Bc(n){return n.ma||(n.ma=(function(t,r,i){const a=Ve(t);return a.sa(),new EM(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)})(n.datastore,n.asyncQueue,{Xo:TM.bind(null,n),t_:IM.bind(null,n),r_:NM.bind(null,n),H_:RM.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),cy(n)?ly(n):n.Ra.set("Unknown")):(await n.ma.stop(),xT(n))}))),n.ma}function ro(n){return n.fa||(n.fa=(function(t,r,i){const a=Ve(t);return a.sa(),new wM(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:MM.bind(null,n),r_:LM.bind(null,n),ta:PM.bind(null,n),na:kM.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await ep(n)):(await n.fa.stop(),n.Ta.length>0&&(Ae(tl,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uy{constructor(e,t,r,i,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new da,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((o=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,a){const o=Date.now()+r,c=new uy(e,t,o,i,a);return c.start(r),c}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new _e(ce.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function fy(n,e){if(Wa("AsyncQueue",`${e}: ${n}`),Lc(n))return new _e(ce.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gc{static emptySet(e){return new gc(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||Re.comparator(t.key,r.key):(t,r)=>Re.comparator(t.key,r.key),this.keyedMap=Ju(),this.sortedSet=new tn(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,r)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof gc)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new gc;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eA{constructor(){this.ga=new tn(Re.comparator)}track(e){const t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):ke(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,r)=>{e.push(r)})),e}}class Sc{constructor(e,t,r,i,a,o,c,u,h){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=c,this.excludesMetadataChanges=u,this.hasCachedResults=h}static fromInitialDocuments(e,t,r,i,a){const o=[];return t.forEach((c=>{o.push({type:0,doc:c})})),new Sc(e,t,gc.emptySet(t),o,r,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&$0(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BM{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class VM{constructor(){this.queries=tA(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){const i=Ve(t),a=i.queries;i.queries=tA(),a.forEach(((o,c)=>{for(const u of c.Sa)u.onError(r)}))})(this,new _e(ce.ABORTED,"Firestore shutting down"))}}function tA(){return new il((n=>zC(n)),$0)}async function hy(n,e){const t=Ve(n);let r=3;const i=e.query;let a=t.queries.get(i);a?!a.ba()&&e.Da()&&(r=2):(a=new BM,r=e.Da()?0:1);try{switch(r){case 0:a.wa=await t.onListen(i,!0);break;case 1:a.wa=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(o){const c=fy(o,`Initialization of query '${rc(e.query)}' failed`);return void e.onError(c)}t.queries.set(i,a),a.Sa.push(e),e.va(t.onlineState),a.wa&&e.Fa(a.wa)&&py(t)}async function dy(n,e){const t=Ve(n),r=e.query;let i=3;const a=t.queries.get(r);if(a){const o=a.Sa.indexOf(e);o>=0&&(a.Sa.splice(o,1),a.Sa.length===0?i=e.Da()?0:1:!a.ba()&&e.Da()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function FM(n,e){const t=Ve(n);let r=!1;for(const i of e){const a=i.query,o=t.queries.get(a);if(o){for(const c of o.Sa)c.Fa(i)&&(r=!0);o.wa=i}}r&&py(t)}function UM(n,e,t){const r=Ve(n),i=r.queries.get(e);if(i)for(const a of i.Sa)a.onError(t);r.queries.delete(e)}function py(n){n.Ca.forEach((e=>{e.next()}))}var qg,nA;(nA=qg||(qg={})).Ma="default",nA.Cache="cache";class my{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Sc(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const r=t!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Sc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==qg.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bT{constructor(e){this.key=e}}class ST{constructor(e){this.key=e}}class zM{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=st(),this.mutatedKeys=st(),this.eu=HC(e),this.tu=new gc(this.eu)}get nu(){return this.Ya}ru(e,t){const r=t?t.iu:new eA,i=t?t.tu:this.tu;let a=t?t.mutatedKeys:this.mutatedKeys,o=i,c=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,h=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal(((p,g)=>{const _=i.get(p),E=X0(this.query,g)?g:null,w=!!_&&this.mutatedKeys.has(_.key),S=!!E&&(E.hasLocalMutations||this.mutatedKeys.has(E.key)&&E.hasCommittedMutations);let D=!1;_&&E?_.data.isEqual(E.data)?w!==S&&(r.track({type:3,doc:E}),D=!0):this.su(_,E)||(r.track({type:2,doc:E}),D=!0,(u&&this.eu(E,u)>0||h&&this.eu(E,h)<0)&&(c=!0)):!_&&E?(r.track({type:0,doc:E}),D=!0):_&&!E&&(r.track({type:1,doc:_}),D=!0,(u||h)&&(c=!0)),D&&(E?(o=o.add(E),a=S?a.add(p):a.delete(p)):(o=o.delete(p),a=a.delete(p)))})),this.query.limit!==null)for(;o.size>this.query.limit;){const p=this.query.limitType==="F"?o.last():o.first();o=o.delete(p.key),a=a.delete(p.key),r.track({type:1,doc:p})}return{tu:o,iu:r,Cs:c,mutatedKeys:a}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const a=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort(((p,g)=>(function(E,w){const S=D=>{switch(D){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ke(20277,{Rt:D})}};return S(E)-S(w)})(p.type,g.type)||this.eu(p.doc,g.doc))),this.ou(r),i=i??!1;const c=t&&!i?this._u():[],u=this.Xa.size===0&&this.current&&!i?1:0,h=u!==this.Za;return this.Za=u,o.length!==0||h?{snapshot:new Sc(this.query,e.tu,a,o,e.mutatedKeys,u===0,h,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:c}:{au:c}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new eA,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=st(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const t=[];return e.forEach((r=>{this.Xa.has(r)||t.push(new ST(r))})),this.Xa.forEach((r=>{e.has(r)||t.push(new bT(r))})),t}cu(e){this.Ya=e.Qs,this.Xa=st();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Sc.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const gy="SyncEngine";class HM{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class GM{constructor(e){this.key=e,this.hu=!1}}class qM{constructor(e,t,r,i,a,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new il((c=>zC(c)),$0),this.Iu=new Map,this.Eu=new Set,this.du=new tn(Re.comparator),this.Au=new Map,this.Ru=new ty,this.Vu={},this.mu=new Map,this.fu=bc.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function $M(n,e,t=!0){const r=OT(n);let i;const a=r.Tu.get(e);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),i=a.view.lu()):i=await CT(r,e,t,!0),i}async function XM(n,e){const t=OT(n);await CT(t,e,!0,!1)}async function CT(n,e,t,r){const i=await dM(n.localStore,pa(e)),a=i.targetId,o=n.sharedClientState.addLocalQueryTarget(a,t);let c;return r&&(c=await KM(n,e,a,o==="current",i.resumeToken)),n.isPrimaryClient&&t&&yT(n.remoteStore,i),c}async function KM(n,e,t,r,i){n.pu=(g,_,E)=>(async function(S,D,T,O){let j=D.view.ru(T);j.Cs&&(j=await Kw(S.localStore,D.query,!1).then((({documents:N})=>D.view.ru(N,j))));const z=O&&O.targetChanges.get(D.targetId),H=O&&O.targetMismatches.get(D.targetId)!=null,q=D.view.applyChanges(j,S.isPrimaryClient,z,H);return iA(S,D.targetId,q.au),q.snapshot})(n,g,_,E);const a=await Kw(n.localStore,e,!0),o=new zM(e,a.Qs),c=o.ru(a.documents),u=Uf.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),h=o.applyChanges(c,n.isPrimaryClient,u);iA(n,t,h.au);const p=new HM(e,t,o);return n.Tu.set(e,p),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),h.snapshot}async function YM(n,e,t){const r=Ve(n),i=r.Tu.get(e),a=r.Iu.get(i.targetId);if(a.length>1)return r.Iu.set(i.targetId,a.filter((o=>!$0(o,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Hg(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),t&&sy(r.remoteStore,i.targetId),$g(r,i.targetId)})).catch(kc)):($g(r,i.targetId),await Hg(r.localStore,i.targetId,!0))}async function WM(n,e){const t=Ve(n),r=t.Tu.get(e),i=t.Iu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),sy(t.remoteStore,r.targetId))}async function QM(n,e,t){const r=i9(n);try{const i=await(function(o,c){const u=Ve(o),h=It.now(),p=c.reduce(((E,w)=>E.add(w.key)),st());let g,_;return u.persistence.runTransaction("Locally write mutations","readwrite",(E=>{let w=Qa(),S=st();return u.Ns.getEntries(E,p).next((D=>{w=D,w.forEach(((T,O)=>{O.isValidDocument()||(S=S.add(T))}))})).next((()=>u.localDocuments.getOverlayedDocuments(E,w))).next((D=>{g=D;const T=[];for(const O of c){const j=p5(O,g.get(O.key).overlayedDocument);j!=null&&T.push(new co(O.key,j,PC(j.value.mapValue),ir.exists(!0)))}return u.mutationQueue.addMutationBatch(E,h,T,c)})).next((D=>{_=D;const T=D.applyToLocalDocumentSet(g,S);return u.documentOverlayCache.saveOverlays(E,D.batchId,T)}))})).then((()=>({batchId:_.batchId,changes:qC(g)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(o,c,u){let h=o.Vu[o.currentUser.toKey()];h||(h=new tn(at)),h=h.insert(c,u),o.Vu[o.currentUser.toKey()]=h})(r,i.batchId,t),await Hf(r,i.changes),await ep(r.remoteStore)}catch(i){const a=fy(i,"Failed to persist write");t.reject(a)}}async function TT(n,e){const t=Ve(n);try{const r=await uM(t.localStore,e);e.targetChanges.forEach(((i,a)=>{const o=t.Au.get(a);o&&(ft(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?o.hu=!0:i.modifiedDocuments.size>0?ft(o.hu,14607):i.removedDocuments.size>0&&(ft(o.hu,42227),o.hu=!1))})),await Hf(t,r,e)}catch(r){await kc(r)}}function rA(n,e,t){const r=Ve(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const i=[];r.Tu.forEach(((a,o)=>{const c=o.view.va(e);c.snapshot&&i.push(c.snapshot)})),(function(o,c){const u=Ve(o);u.onlineState=c;let h=!1;u.queries.forEach(((p,g)=>{for(const _ of g.Sa)_.va(c)&&(h=!0)})),h&&py(u)})(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function ZM(n,e,t){const r=Ve(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Au.get(e),a=i&&i.key;if(a){let o=new tn(Re.comparator);o=o.insert(a,zn.newNoDocument(a,je.min()));const c=st().add(a),u=new Q0(je.min(),new Map,new tn(at),o,c);await TT(r,u),r.du=r.du.remove(a),r.Au.delete(e),vy(r)}else await Hg(r.localStore,e,!1).then((()=>$g(r,e,t))).catch(kc)}async function JM(n,e){const t=Ve(n),r=e.batch.batchId;try{const i=await cM(t.localStore,e);NT(t,r,null),IT(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await Hf(t,i)}catch(i){await kc(i)}}async function e9(n,e,t){const r=Ve(n);try{const i=await(function(o,c){const u=Ve(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",(h=>{let p;return u.mutationQueue.lookupMutationBatch(h,c).next((g=>(ft(g!==null,37113),p=g.keys(),u.mutationQueue.removeMutationBatch(h,g)))).next((()=>u.mutationQueue.performConsistencyCheck(h))).next((()=>u.documentOverlayCache.removeOverlaysForBatchId(h,p,c))).next((()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,p))).next((()=>u.localDocuments.getDocuments(h,p)))}))})(r.localStore,e);NT(r,e,t),IT(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await Hf(r,i)}catch(i){await kc(i)}}function IT(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function NT(n,e,t){const r=Ve(n);let i=r.Vu[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(t?a.reject(t):a.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function $g(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Iu.get(e))n.Tu.delete(r),t&&n.Pu.yu(r,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((r=>{n.Ru.containsKey(r)||RT(n,r)}))}function RT(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(sy(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),vy(n))}function iA(n,e,t){for(const r of t)r instanceof bT?(n.Ru.addReference(r.key,e),t9(n,r)):r instanceof ST?(Ae(gy,"Document no longer in limbo: "+r.key),n.Ru.removeReference(r.key,e),n.Ru.containsKey(r.key)||RT(n,r.key)):ke(19791,{wu:r})}function t9(n,e){const t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Eu.has(r)||(Ae(gy,"New document in limbo: "+t),n.Eu.add(r),vy(n))}function vy(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new Re(kt.fromString(e)),r=n.fu.next();n.Au.set(r,new GM(t)),n.du=n.du.insert(t,r),yT(n.remoteStore,new Us(pa(q0(t.path)),r,"TargetPurposeLimboResolution",H0.ce))}}async function Hf(n,e,t){const r=Ve(n),i=[],a=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach(((c,u)=>{o.push(r.pu(u,e,t).then((h=>{if((h||t)&&r.isPrimaryClient){const p=h?!h.fromCache:t?.targetChanges.get(u.targetId)?.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(h){i.push(h);const p=ry.As(u.targetId,h);a.push(p)}})))})),await Promise.all(o),r.Pu.H_(i),await(async function(u,h){const p=Ve(u);try{await p.persistence.runTransaction("notifyLocalViewChanges","readwrite",(g=>de.forEach(h,(_=>de.forEach(_.Es,(E=>p.persistence.referenceDelegate.addReference(g,_.targetId,E))).next((()=>de.forEach(_.ds,(E=>p.persistence.referenceDelegate.removeReference(g,_.targetId,E)))))))))}catch(g){if(!Lc(g))throw g;Ae(iy,"Failed to update sequence numbers: "+g)}for(const g of h){const _=g.targetId;if(!g.fromCache){const E=p.Ms.get(_),w=E.snapshotVersion,S=E.withLastLimboFreeSnapshotVersion(w);p.Ms=p.Ms.insert(_,S)}}})(r.localStore,a))}async function n9(n,e){const t=Ve(n);if(!t.currentUser.isEqual(e)){Ae(gy,"User change. New user:",e.toKey());const r=await mT(t.localStore,e);t.currentUser=e,(function(a,o){a.mu.forEach((c=>{c.forEach((u=>{u.reject(new _e(ce.CANCELLED,o))}))})),a.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Hf(t,r.Ls)}}function r9(n,e){const t=Ve(n),r=t.Au.get(e);if(r&&r.hu)return st().add(r.key);{let i=st();const a=t.Iu.get(e);if(!a)return i;for(const o of a){const c=t.Tu.get(o);i=i.unionWith(c.view.nu)}return i}}function OT(n){const e=Ve(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=TT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=r9.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=ZM.bind(null,e),e.Pu.H_=FM.bind(null,e.eventManager),e.Pu.yu=UM.bind(null,e.eventManager),e}function i9(n){const e=Ve(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=JM.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=e9.bind(null,e),e}class v0{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Z0(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return lM(this.persistence,new aM,e.initialUser,this.serializer)}Cu(e){return new pT(ny.mi,this.serializer)}Du(e){return new mM}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}v0.provider={build:()=>new v0};class a9 extends v0{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){ft(this.persistence.referenceDelegate instanceof m0,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new G5(r,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Ir.withCacheSize(this.cacheSizeBytes):Ir.DEFAULT;return new pT((r=>m0.mi(r,t)),this.serializer)}}class Xg{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>rA(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=n9.bind(null,this.syncEngine),await jM(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new VM})()}createDatastore(e){const t=Z0(e.databaseInfo.databaseId),r=(function(a){return new xM(a)})(e.databaseInfo);return(function(a,o,c,u){return new bM(a,o,c,u)})(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return(function(r,i,a,o,c){return new CM(r,i,a,o,c)})(this.localStore,this.datastore,e.asyncQueue,(t=>rA(this.syncEngine,t,0)),(function(){return Qw.v()?new Qw:new gM})())}createSyncEngine(e,t){return(function(i,a,o,c,u,h,p){const g=new qM(i,a,o,c,u,h);return p&&(g.gu=!0),g})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const r=Ve(t);Ae(tl,"RemoteStore shutting down."),r.Ea.add(5),await zf(r),r.Aa.shutdown(),r.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Xg.provider={build:()=>new Xg};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yy{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Wa("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s9{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new _e(ce.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await(async function(i,a){const o=Ve(i),c={documents:a.map((g=>p0(o.serializer,g)))},u=await o.Ho("BatchGetDocuments",o.serializer.databaseId,kt.emptyPath(),c,a.length),h=new Map;u.forEach((g=>{const _=T5(o.serializer,g);h.set(_.key.toString(),_)}));const p=[];return a.forEach((g=>{const _=h.get(g.toString());ft(!!_,55234,{key:g}),p.push(_)})),p})(this.datastore,e);return t.forEach((r=>this.recordVersion(r))),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new W0(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((t=>{e.delete(t.key.toString())})),e.forEach(((t,r)=>{const i=Re.fromPath(r);this.mutations.push(new eT(i,this.precondition(i)))})),await(async function(r,i){const a=Ve(r),o={writes:i.map((c=>cT(a.serializer,c)))};await a.Go("Commit",a.serializer.databaseId,kt.emptyPath(),o)})(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw ke(50498,{Gu:e.constructor.name});t=je.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new _e(ce.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(je.min())?ir.exists(!1):ir.updateTime(t):ir.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(je.min()))throw new _e(ce.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ir.updateTime(t)}return ir.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o9{constructor(e,t,r,i,a){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=a,this.zu=r.maxAttempts,this.M_=new ay(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Ju()}Ju(){this.M_.p_((async()=>{const e=new s9(this.datastore),t=this.Hu(e);t&&t.then((r=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(r)})).catch((i=>{this.Yu(i)}))))})).catch((r=>{this.Yu(r)}))}))}Hu(e){try{const t=this.updateFunction(e);return!Vf(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Yu(e){this.zu>0&&this.Zu(e)?(this.zu-=1,this.asyncQueue.enqueueAndForget((()=>(this.Ju(),Promise.resolve())))):this.deferred.reject(e)}Zu(e){if(e?.name==="FirebaseError"){const t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!tT(t)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const io="FirestoreClient";class l9{constructor(e,t,r,i,a){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=ur.UNAUTHENTICATED,this.clientId=qv.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,(async o=>{Ae(io,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(r,(o=>(Ae(io,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new da;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=fy(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function km(n,e){n.asyncQueue.verifyOperationInProgress(),Ae(io,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener((async i=>{r.isEqual(i)||(await mT(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function aA(n,e){n.asyncQueue.verifyOperationInProgress();const t=await c9(n);Ae(io,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((r=>Jw(e.remoteStore,r))),n.setAppCheckTokenChangeListener(((r,i)=>Jw(e.remoteStore,i))),n._onlineComponents=e}async function c9(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Ae(io,"Using user provided OfflineComponentProvider");try{await km(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(i){return i.name==="FirebaseError"?i.code===ce.FAILED_PRECONDITION||i.code===ce.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(t))throw t;xc("Error using user provided cache. Falling back to memory cache: "+t),await km(n,new v0)}}else Ae(io,"Using default OfflineComponentProvider"),await km(n,new a9(void 0));return n._offlineComponents}async function _y(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Ae(io,"Using user provided OnlineComponentProvider"),await aA(n,n._uninitializedComponentsProvider._online)):(Ae(io,"Using default OnlineComponentProvider"),await aA(n,new Xg))),n._onlineComponents}function u9(n){return _y(n).then((e=>e.syncEngine))}function f9(n){return _y(n).then((e=>e.datastore))}async function y0(n){const e=await _y(n),t=e.eventManager;return t.onListen=$M.bind(null,e.syncEngine),t.onUnlisten=YM.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=XM.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=WM.bind(null,e.syncEngine),t}function h9(n,e,t={}){const r=new da;return n.asyncQueue.enqueueAndForget((async()=>(function(a,o,c,u,h){const p=new yy({next:_=>{p.Nu(),o.enqueueAndForget((()=>dy(a,g)));const E=_.docs.has(c);!E&&_.fromCache?h.reject(new _e(ce.UNAVAILABLE,"Failed to get document because the client is offline.")):E&&_.fromCache&&u&&u.source==="server"?h.reject(new _e(ce.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(_)},error:_=>h.reject(_)}),g=new my(q0(c.path),p,{includeMetadataChanges:!0,qa:!0});return hy(a,g)})(await y0(n),n.asyncQueue,e,t,r))),r.promise}function d9(n,e,t={}){const r=new da;return n.asyncQueue.enqueueAndForget((async()=>(function(a,o,c,u,h){const p=new yy({next:_=>{p.Nu(),o.enqueueAndForget((()=>dy(a,g))),_.fromCache&&u.source==="server"?h.reject(new _e(ce.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(_)},error:_=>h.reject(_)}),g=new my(c,p,{includeMetadataChanges:!0,qa:!0});return hy(a,g)})(await y0(n),n.asyncQueue,e,t,r))),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DT(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sA=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MT="firestore.googleapis.com",oA=!0;class lA{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new _e(ce.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=MT,this.ssl=oA}else this.host=e.host,this.ssl=e.ssl??oA;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=dT;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<z5)throw new _e(ce.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}CD("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=DT(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new _e(ce.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new _e(ce.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new _e(ce.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class tp{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new lA({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new _e(ce.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new _e(ce.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new lA(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new gD;switch(r.type){case"firstParty":return new xD(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new _e(ce.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const r=sA.get(t);r&&(Ae("ComponentProvider","Removing Datastore"),sA.delete(t),r.terminate())})(this),Promise.resolve()}}function p9(n,e,t,r={}){n=ci(n,tp);const i=Oc(e),a=n._getSettings(),o={...a,emulatorOptions:n._getEmulatorOptions()},c=`${e}:${t}`;i&&(CS(`https://${c}`),TS("Firestore",!0)),a.host!==MT&&a.host!==c&&xc("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u={...a,host:c,ssl:i,emulatorOptions:r};if(!Qo(u,o)&&(n._setSettings(u),r.mockUserToken)){let h,p;if(typeof r.mockUserToken=="string")h=r.mockUserToken,p=ur.MOCK_USER;else{h=TR(r.mockUserToken,n._app?.options.projectId);const g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new _e(ce.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new ur(g)}n._authCredentials=new vD(new wC(h,p))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ja{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ja(this.firestore,e,this._query)}}class an{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Xs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new an(this.firestore,e,this._key)}toJSON(){return{type:an._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(Bf(t,an._jsonSchema))return new an(e,r||null,new Re(kt.fromString(t.referencePath)))}}an._jsonSchemaVersion="firestore/documentReference/1.0",an._jsonSchema={type:Sn("string",an._jsonSchemaVersion),referencePath:Sn("string")};class Xs extends Ja{constructor(e,t,r){super(e,t,q0(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new an(this.firestore,null,new Re(e))}withConverter(e){return new Xs(this.firestore,e,this._path)}}function np(n,e,...t){if(n=dn(n),AC("collection","path",e),n instanceof tp){const r=kt.fromString(e,...t);return Ew(r),new Xs(n,null,r)}{if(!(n instanceof an||n instanceof Xs))throw new _e(ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(kt.fromString(e,...t));return Ew(r),new Xs(n.firestore,null,r)}}function Di(n,e,...t){if(n=dn(n),arguments.length===1&&(e=qv.newId()),AC("doc","path",e),n instanceof tp){const r=kt.fromString(e,...t);return xw(r),new an(n,null,new Re(r))}{if(!(n instanceof an||n instanceof Xs))throw new _e(ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(kt.fromString(e,...t));return xw(r),new an(n.firestore,n instanceof Xs?n.converter:null,new Re(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cA="AsyncQueue";class uA{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new ay(this,"async_queue_retry"),this._c=()=>{const r=Pm();r&&Ae(cA,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const t=Pm();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Pm();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new da;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Lc(e))throw e;Ae(cA,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,Wa("INTERNAL UNHANDLED ERROR: ",fA(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const i=uy.createAndSchedule(this,e,t,r,(a=>this.hc(a)));return this.tc.push(i),i}uc(){this.nc&&ke(47125,{Pc:fA(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,r)=>t.targetTimeMs-r.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function fA(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hA(n){return(function(t,r){if(typeof t!="object"||t===null)return!1;const i=t;for(const a of r)if(a in i&&typeof i[a]=="function")return!0;return!1})(n,["next","error","complete"])}class ao extends tp{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new uA,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new uA(e),this._firestoreClient=void 0,await e}}}function m9(n,e){const t=typeof n=="object"?n:OS(),r=typeof n=="string"?n:l0,i=kv(t,"firestore").getImmediate({identifier:r});if(!i._initialized){const a=SR("firestore");a&&p9(i,...a)}return i}function Vc(n){if(n._terminated)throw new _e(ce.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||g9(n),n._firestoreClient}function g9(n){const e=n._freezeSettings(),t=(function(i,a,o,c){return new BD(i,a,o,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,DT(c.experimentalLongPollingOptions),c.useFetchStreams,c.isUsingEmulator)})(n._databaseId,n._app?.options.appId||"",n._persistenceKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new l9(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(i){const a=i?._online.build();return{_offline:i?._offline.build(a),_online:a}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Hr(sr.fromBase64String(e))}catch(t){throw new _e(ce.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Hr(sr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Hr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Bf(e,Hr._jsonSchema))return Hr.fromBase64String(e.bytes)}}Hr._jsonSchemaVersion="firestore/bytes/1.0",Hr._jsonSchema={type:Sn("string",Hr._jsonSchemaVersion),bytes:Sn("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gf{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new _e(ce.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new rr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rp{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ma{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new _e(ce.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new _e(ce.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return at(this._lat,e._lat)||at(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:ma._jsonSchemaVersion}}static fromJSON(e){if(Bf(e,ma._jsonSchema))return new ma(e.latitude,e.longitude)}}ma._jsonSchemaVersion="firestore/geoPoint/1.0",ma._jsonSchema={type:Sn("string",ma._jsonSchemaVersion),latitude:Sn("number"),longitude:Sn("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ga{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==i[a])return!1;return!0})(this._values,e._values)}toJSON(){return{type:ga._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Bf(e,ga._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new ga(e.vectorValues);throw new _e(ce.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}ga._jsonSchemaVersion="firestore/vectorValue/1.0",ga._jsonSchema={type:Sn("string",ga._jsonSchemaVersion),vectorValues:Sn("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v9=/^__.*__$/;class y9{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new co(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ff(e,this.data,t,this.fieldTransforms)}}class PT{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new co(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function kT(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ke(40011,{Ac:n})}}class xy{constructor(e,t,r,i,a,o){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,a===void 0&&this.Rc(),this.fieldTransforms=a||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new xy({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.gc(e),r}yc(e){const t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return _0(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(kT(this.Ac)&&v9.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class _9{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Z0(e)}Cc(e,t,r,i=!1){return new xy({Ac:e,methodName:t,Dc:r,path:rr.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ip(n){const e=n._freezeSettings(),t=Z0(n._databaseId);return new _9(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Ey(n,e,t,r,i,a={}){const o=n.Cc(a.merge||a.mergeFields?2:0,e,t,i);Ay("Data must be an object, but it was:",o,r);const c=BT(r,o);let u,h;if(a.merge)u=new Gr(o.fieldMask),h=o.fieldTransforms;else if(a.mergeFields){const p=[];for(const g of a.mergeFields){const _=Kg(e,g,t);if(!o.contains(_))throw new _e(ce.INVALID_ARGUMENT,`Field '${_}' is specified in your field mask but missing from your input data.`);FT(p,_)||p.push(_)}u=new Gr(p),h=o.fieldTransforms.filter((g=>u.covers(g.field)))}else u=null,h=o.fieldTransforms;return new y9(new _r(c),u,h)}class ap extends rp{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof ap}}class wy extends rp{_toFieldTransform(e){return new u5(e.path,new Sf)}isEqual(e){return e instanceof wy}}function LT(n,e,t,r){const i=n.Cc(1,e,t);Ay("Data must be an object, but it was:",i,r);const a=[],o=_r.empty();lo(r,((u,h)=>{const p=by(e,u,t);h=dn(h);const g=i.yc(p);if(h instanceof ap)a.push(p);else{const _=qf(h,g);_!=null&&(a.push(p),o.set(p,_))}}));const c=new Gr(a);return new PT(o,c,i.fieldTransforms)}function jT(n,e,t,r,i,a){const o=n.Cc(1,e,t),c=[Kg(e,r,t)],u=[i];if(a.length%2!=0)throw new _e(ce.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let _=0;_<a.length;_+=2)c.push(Kg(e,a[_])),u.push(a[_+1]);const h=[],p=_r.empty();for(let _=c.length-1;_>=0;--_)if(!FT(h,c[_])){const E=c[_];let w=u[_];w=dn(w);const S=o.yc(E);if(w instanceof ap)h.push(E);else{const D=qf(w,S);D!=null&&(h.push(E),p.set(E,D))}}const g=new Gr(h);return new PT(p,g,o.fieldTransforms)}function x9(n,e,t,r=!1){return qf(t,n.Cc(r?4:3,e))}function qf(n,e){if(VT(n=dn(n)))return Ay("Unsupported field value:",e,n),BT(n,e);if(n instanceof rp)return(function(r,i){if(!kT(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(i);a&&i.fieldTransforms.push(a)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,i){const a=[];let o=0;for(const c of r){let u=qf(c,i.wc(o));u==null&&(u={nullValue:"NULL_VALUE"}),a.push(u),o++}return{arrayValue:{values:a}}})(n,e)}return(function(r,i){if((r=dn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return o5(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=It.fromDate(r);return{timestampValue:d0(i.serializer,a)}}if(r instanceof It){const a=new It(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:d0(i.serializer,a)}}if(r instanceof ma)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Hr)return{bytesValue:aT(i.serializer,r._byteString)};if(r instanceof an){const a=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(a))throw i.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:ey(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof ga)return(function(o,c){return{mapValue:{fields:{[DC]:{stringValue:MC},[c0]:{arrayValue:{values:o.toArray().map((h=>{if(typeof h!="number")throw c.Sc("VectorValues must only contain numeric values.");return Qv(c.serializer,h)}))}}}}}})(r,i);throw i.Sc(`Unsupported field value: ${z0(r)}`)})(n,e)}function BT(n,e){const t={};return CC(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):lo(n,((r,i)=>{const a=qf(i,e.mc(r));a!=null&&(t[r]=a)})),{mapValue:{fields:t}}}function VT(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof It||n instanceof ma||n instanceof Hr||n instanceof an||n instanceof rp||n instanceof ga)}function Ay(n,e,t){if(!VT(t)||!bC(t)){const r=z0(t);throw r==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+r)}}function Kg(n,e,t){if((e=dn(e))instanceof Gf)return e._internalPath;if(typeof e=="string")return by(n,e);throw _0("Field path arguments must be of type string or ",n,!1,void 0,t)}const E9=new RegExp("[~\\*/\\[\\]]");function by(n,e,t){if(e.search(E9)>=0)throw _0(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Gf(...e.split("."))._internalPath}catch{throw _0(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function _0(n,e,t,r,i){const a=r&&!r.isEmpty(),o=i!==void 0;let c=`Function ${e}() called with invalid data`;t&&(c+=" (via `toFirestore()`)"),c+=". ";let u="";return(a||o)&&(u+=" (found",a&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new _e(ce.INVALID_ARGUMENT,c+n+u)}function FT(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x0{constructor(e,t,r,i,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new an(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new w9(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(sp("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class w9 extends x0{data(){return super.data()}}function sp(n,e){return typeof e=="string"?by(n,e):e instanceof Gf?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UT(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new _e(ce.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Sy{}class Cy extends Sy{}function op(n,e,...t){let r=[];e instanceof Sy&&r.push(e),r=r.concat(t),(function(a){const o=a.filter((u=>u instanceof Ty)).length,c=a.filter((u=>u instanceof lp)).length;if(o>1||o>0&&c>0)throw new _e(ce.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const i of r)n=i._apply(n);return n}class lp extends Cy{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new lp(e,t,r)}_apply(e){const t=this._parse(e);return HT(e._query,t),new Ja(e.firestore,e.converter,Vg(e._query,t))}_parse(e){const t=ip(e.firestore);return(function(a,o,c,u,h,p,g){let _;if(h.isKeyField()){if(p==="array-contains"||p==="array-contains-any")throw new _e(ce.INVALID_ARGUMENT,`Invalid Query. You can't perform '${p}' queries on documentId().`);if(p==="in"||p==="not-in"){pA(g,p);const w=[];for(const S of g)w.push(dA(u,a,S));_={arrayValue:{values:w}}}else _=dA(u,a,g)}else p!=="in"&&p!=="not-in"&&p!=="array-contains-any"||pA(g,p),_=x9(c,o,g,p==="in"||p==="not-in");return An.create(h,p,_)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function E0(n,e,t){const r=e,i=sp("where",n);return lp._create(i,r,t)}class Ty extends Sy{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Ty(e,t)}_parse(e){const t=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return t.length===1?t[0]:ki.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(i,a){let o=i;const c=a.getFlattenedFilters();for(const u of c)HT(o,u),o=Vg(o,u)})(e._query,t),new Ja(e.firestore,e.converter,Vg(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Iy extends Cy{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Iy(e,t)}_apply(e){const t=(function(i,a,o){if(i.startAt!==null)throw new _e(ce.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new _e(ce.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new bf(a,o)})(e._query,this._field,this._direction);return new Ja(e.firestore,e.converter,(function(i,a){const o=i.explicitOrderBy.concat([a]);return new jc(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)})(e._query,t))}}function cp(n,e="asc"){const t=e,r=sp("orderBy",n);return Iy._create(r,t)}class Ny extends Cy{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new Ny(e,t,r)}_apply(e){return new Ja(e.firestore,e.converter,f0(e._query,this._limit,this._limitType))}}function zT(n){return TD("limit",n),Ny._create("limit",n,"F")}function dA(n,e,t){if(typeof(t=dn(t))=="string"){if(t==="")throw new _e(ce.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!UC(e)&&t.indexOf("/")!==-1)throw new _e(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(kt.fromString(t));if(!Re.isDocumentKey(r))throw new _e(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Nw(n,new Re(r))}if(t instanceof an)return Nw(n,t._key);throw new _e(ce.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${z0(t)}.`)}function pA(n,e){if(!Array.isArray(n)||n.length===0)throw new _e(ce.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function HT(n,e){const t=(function(i,a){for(const o of i)for(const c of o.getFlattenedFilters())if(a.indexOf(c.op)>=0)return c.op;return null})(n.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new _e(ce.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new _e(ce.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class GT{convertValue(e,t="none"){switch(no(e)){case 0:return null;case 1:return e.booleanValue;case 2:return hn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(to(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw ke(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return lo(e,((i,a)=>{r[i]=this.convertValue(a,t)})),r}convertVectorValue(e){const t=e.fields?.[c0].arrayValue?.values?.map((r=>hn(r.doubleValue)));return new ga(t)}convertGeoPoint(e){return new ma(hn(e.latitude),hn(e.longitude))}convertArray(e,t){return(e.values||[]).map((r=>this.convertValue(r,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const r=G0(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Ef(e));default:return null}}convertTimestamp(e){const t=eo(e);return new It(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=kt.fromString(e);ft(hT(r),9688,{name:e});const i=new wf(r.get(1),r.get(3)),a=new Re(r.popFirst(5));return i.isEqual(t)||Wa(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ry(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class A9 extends GT{constructor(e){super(),this.firestore=e}convertBytes(e){return new Hr(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new an(this.firestore,null,t)}}class oc{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ks extends x0{constructor(e,t,r,i,a,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Xd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(sp("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new _e(ce.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Ks._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Ks._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ks._jsonSchema={type:Sn("string",Ks._jsonSchemaVersion),bundleSource:Sn("string","DocumentSnapshot"),bundleName:Sn("string"),bundle:Sn("string")};class Xd extends Ks{data(e={}){return super.data(e)}}class Yo{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new oc(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((r=>{e.call(t,new Xd(this._firestore,this._userDataWriter,r.key,r,new oc(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new _e(ce.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(i,a){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map((c=>{const u=new Xd(i._firestore,i._userDataWriter,c.doc.key,c.doc,new oc(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);return c.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}}))}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter((c=>a||c.type!==3)).map((c=>{const u=new Xd(i._firestore,i._userDataWriter,c.doc.key,c.doc,new oc(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);let h=-1,p=-1;return c.type!==0&&(h=o.indexOf(c.doc.key),o=o.delete(c.doc.key)),c.type!==1&&(o=o.add(c.doc),p=o.indexOf(c.doc.key)),{type:b9(c.type),doc:u,oldIndex:h,newIndex:p}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new _e(ce.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Yo._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=qv.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],i=[];return this.docs.forEach((a=>{a._document!==null&&(t.push(a._document),r.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),i.push(a.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function b9(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ke(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oy(n){n=ci(n,an);const e=ci(n.firestore,ao);return h9(Vc(e),n._key).then((t=>XT(e,n,t)))}Yo._jsonSchemaVersion="firestore/querySnapshot/1.0",Yo._jsonSchema={type:Sn("string",Yo._jsonSchemaVersion),bundleSource:Sn("string","QuerySnapshot"),bundleName:Sn("string"),bundle:Sn("string")};class up extends GT{constructor(e){super(),this.firestore=e}convertBytes(e){return new Hr(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new an(this.firestore,null,t)}}function qT(n){n=ci(n,Ja);const e=ci(n.firestore,ao),t=Vc(e),r=new up(e);return UT(n._query),d9(t,n._query).then((i=>new Yo(e,r,n,i)))}function S9(n,e,t){n=ci(n,an);const r=ci(n.firestore,ao),i=Ry(n.converter,e,t);return $T(r,[Ey(ip(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,ir.none())])}function fp(n,...e){n=dn(n);let t={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||hA(e[r])||(t=e[r++]);const i={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(hA(e[r])){const u=e[r];e[r]=u.next?.bind(u),e[r+1]=u.error?.bind(u),e[r+2]=u.complete?.bind(u)}let a,o,c;if(n instanceof an)o=ci(n.firestore,ao),c=q0(n._key.path),a={next:u=>{e[r]&&e[r](XT(o,n,u))},error:e[r+1],complete:e[r+2]};else{const u=ci(n,Ja);o=ci(u.firestore,ao),c=u._query;const h=new up(o);a={next:p=>{e[r]&&e[r](new Yo(o,h,u,p))},error:e[r+1],complete:e[r+2]},UT(n._query)}return(function(h,p,g,_){const E=new yy(_),w=new my(p,E,g);return h.asyncQueue.enqueueAndForget((async()=>hy(await y0(h),w))),()=>{E.Nu(),h.asyncQueue.enqueueAndForget((async()=>dy(await y0(h),w)))}})(Vc(o),c,i,a)}function $T(n,e){return(function(r,i){const a=new da;return r.asyncQueue.enqueueAndForget((async()=>QM(await u9(r),i,a))),a.promise})(Vc(n),e)}function XT(n,e,t){const r=t.docs.get(e._key),i=new up(n);return new Ks(n,i,e._key,r,new oc(t.hasPendingWrites,t.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C9={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T9{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=ip(e)}set(e,t,r){this._verifyNotCommitted();const i=zs(e,this._firestore),a=Ry(i.converter,t,r),o=Ey(this._dataReader,"WriteBatch.set",i._key,a,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,ir.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const a=zs(e,this._firestore);let o;return o=typeof(t=dn(t))=="string"||t instanceof Gf?jT(this._dataReader,"WriteBatch.update",a._key,t,r,i):LT(this._dataReader,"WriteBatch.update",a._key,t),this._mutations.push(o.toMutation(a._key,ir.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=zs(e,this._firestore);return this._mutations=this._mutations.concat(new W0(t._key,ir.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new _e(ce.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function zs(n,e){if((n=dn(n)).firestore!==e)throw new _e(ce.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I9{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=ip(e)}get(e){const t=zs(e,this._firestore),r=new A9(this._firestore);return this._transaction.lookup([t._key]).then((i=>{if(!i||i.length!==1)return ke(24041);const a=i[0];if(a.isFoundDocument())return new x0(this._firestore,r,a.key,a,t.converter);if(a.isNoDocument())return new x0(this._firestore,r,t._key,null,t.converter);throw ke(18433,{doc:a})}))}set(e,t,r){const i=zs(e,this._firestore),a=Ry(i.converter,t,r),o=Ey(this._dataReader,"Transaction.set",i._key,a,i.converter!==null,r);return this._transaction.set(i._key,o),this}update(e,t,r,...i){const a=zs(e,this._firestore);let o;return o=typeof(t=dn(t))=="string"||t instanceof Gf?jT(this._dataReader,"Transaction.update",a._key,t,r,i):LT(this._dataReader,"Transaction.update",a._key,t),this._transaction.update(a._key,o),this}delete(e){const t=zs(e,this._firestore);return this._transaction.delete(t._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N9 extends I9{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=zs(e,this._firestore),r=new up(this._firestore);return super.get(e).then((i=>new Ks(this._firestore,r,t._key,i._document,new oc(!1,!1),t.converter)))}}function R9(n,e,t){n=ci(n,ao);const r={...C9,...t};return(function(a){if(a.maxAttempts<1)throw new _e(ce.INVALID_ARGUMENT,"Max attempts must be at least 1")})(r),(function(a,o,c){const u=new da;return a.asyncQueue.enqueueAndForget((async()=>{const h=await f9(a);new o9(a.asyncQueue,h,c,o,u).ju()})),u.promise})(Vc(n),(i=>e(new N9(n,i))),r)}function Cc(){return new wy("serverTimestamp")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KT(n){return Vc(n=ci(n,ao)),new T9(n,(e=>$T(n,e)))}(function(e,t=!0){(function(i){Pc=i})(Dc),_c(new Zo("firestore",((r,{instanceIdentifier:i,options:a})=>{const o=r.getProvider("app").getImmediate(),c=new ao(new yD(r.getProvider("auth-internal")),new ED(o,r.getProvider("app-check-internal")),(function(h,p){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new _e(ce.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new wf(h.options.projectId,p)})(o,i),o);return a={useFetchStreams:t,...a},c._setSettings(a),c}),"PUBLIC").setMultipleInstances(!0)),qs(gw,vw,e),qs(gw,vw,"esm2020")})();const Yg={apiKey:"AIzaSyBxVSYgc9mqtDeczSZjOcPn0D-sB0PBUKM",authDomain:"ichinikai-order.firebaseapp.com",projectId:"ichinikai-order",storageBucket:"ichinikai-order.appspot.com",messagingSenderId:"829152459225",appId:"1:829152459225:web:a8966a583e54d7553ac1c8"};function O9(n){const e=Object.entries(n).filter(([,t])=>typeof t>"u").map(([t])=>t);if(e.length>0)throw new Error(`Firebaseの設定値が不足しています: ${e.join(", ")}. Viteの.envファイルを確認してください。`)}const YT=Object.entries(Yg).filter(([,n])=>!n||n==="undefined").map(([n])=>n),WT=YT.length>0,Dy=WT,Ua=Dy;let Lm=null,Wg,Qg;if(!Dy)O9(Yg),Lm=qE().length?qE()[0]:RS(Yg),Wg=hD(Lm),Qg=m9(Lm);else{const n=WT?`Firebase設定値が不足しているためモックモードに切り替えました（不足: ${YT.join(", ")}）`:"モックモードが環境変数で有効化されています";console.info(`Firebase initialization skipped: ${n}`),Wg={currentUser:null},Qg={}}const Ri=Wg,Hn=Qg;async function QT(){if(!Dy){if(!Ri.currentUser){await(await tC(Ri)).user.getIdToken(!0);return}Ri.currentUser.isAnonymous&&await Ri.currentUser.getIdToken(!0)}}const ZT=P.createContext(void 0),jm=["admin","kitchen","staff"];function D9(n){const e=[];return n.admin&&e.push("admin"),n.kitchen&&e.push("kitchen"),n.staff&&e.push("staff"),e}function M9({children:n}){const[e,t]=P.useState(()=>Ua?"signed-in":"loading"),[r,i]=P.useState(null),[a,o]=P.useState(()=>Ua?jm:[]),[c,u]=P.useState(null);P.useEffect(()=>{if(Ua){t("signed-in"),i(null),o(jm),u(null);return}const E=iC(Ri,async w=>{if(!w){i(null),o([]),t("signed-out");return}try{const S=await w.getIdTokenResult(!0),D=D9(S.claims);i(w),o(D),t("signed-in"),u(null)}catch(S){console.error("Failed to refresh token claims",S),i(w),o([]),t("signed-in"),u("ロール情報の取得に失敗しました。再読み込みしてください。")}});return()=>E()},[]);const h=P.useCallback(async({email:E,password:w})=>{if(u(null),Ua){t("signed-in"),i(null),o(jm);return}try{await Z6(Ri,E,w)}catch(S){console.error("Failed to sign in",S);const D=S instanceof Error?S.message:"サインインに失敗しました。";throw u(D),S}},[]),p=P.useCallback(async()=>{if(u(null),Ua){t("signed-out"),i(null),o([]);return}await tO(Ri)},[]),g=P.useCallback(E=>{const w=Array.isArray(E)?E:[E];return w.length===0||Ua?!0:w.some(S=>a.includes(S))},[a]),_=P.useMemo(()=>({status:e,user:r,roles:a,error:c,signIn:h,signOut:p,hasRole:g}),[c,g,a,h,p,e,r]);return m.jsx(ZT.Provider,{value:_,children:n})}function hp(){const n=P.useContext(ZT);if(!n)throw new Error("useAuth must be used within an AuthProvider");return n}const Nn=n=>{const e="/Ichinikai/",t=e.endsWith("/")?e:`${e}/`,r=n.replace(/^\/+/u,"");return`${t}${r}`},P9={wheat:{key:"wheat",label:"小麦",icon:Nn("allergy_icon/Wheat.png")},egg:{key:"egg",label:"卵",icon:Nn("allergy_icon/Egg.png")},soy:{key:"soy",label:"大豆",icon:Nn("allergy_icon/Soy.png")}},JT={potaufeu:{key:"potaufeu",label:"ポトフ",description:"生姜たくさん入ってます！ぜひポトフを飲んであったまってください！",price:250,image:Nn("menu_photo/5.png"),allergens:["soy"],soldOut:!1},plain:{key:"plain",label:"揚げパン(プレーン)",description:"やっぱり王道プレーン味！揚げパン沼にお連れします！是非にお試しあれ🙌",price:250,image:Nn("menu_photo/1.png"),allergens:["wheat","egg"],soldOut:!1},cocoa:{key:"cocoa",label:"揚げパン(ココア)",description:"揚げパン×ココアなんておいしくないわけがない！みんな虜にしちゃいます！",price:250,image:Nn("menu_photo/2.png"),allergens:["wheat","egg","soy"],soldOut:!1},kinako:{key:"kinako",label:"揚げパン(きなこ)",description:"給食で出てきた懐かしの味！みんな大好ききなこ揚げパン！",price:250,image:Nn("menu_photo/3.png"),allergens:["wheat","soy"],soldOut:!1},garlic:{key:"garlic",label:"揚げパン(ガーリック)",description:"甘くない揚げパンだって大アリなんです！あなたの価値観変えちゃいます",price:250,image:Nn("menu_photo/4.png"),allergens:["wheat"],soldOut:!1},drink_hojicha:{key:"drink_hojicha",label:"ほうじ茶(温)",description:"香ばしいほうじ茶でほっと一息",price:150,image:Nn("menu_photo/6.png"),allergens:[],soldOut:!1},drink_cocoa:{key:"drink_cocoa",label:"ココア(温)",description:"甘くて濃厚なココアでほっと一息",price:150,image:Nn("menu_photo/7.png"),allergens:[],soldOut:!1},drink_coffee:{key:"drink_coffee",label:"コーヒー(温)",description:"香り高いホットコーヒーでリフレッシュ",price:150,image:Nn("menu_photo/8.png"),allergens:[],soldOut:!1},drink_milkcoffee:{key:"drink_milkcoffee",label:"コーヒー牛乳(冷)",description:"ミルクたっぷりのまろやかなホットコーヒー",price:150,image:Nn("menu_photo/9.png"),allergens:[],soldOut:!1},minestrone:{key:"minestrone",label:"ミネストローネ",description:"具沢山なイタリアの家庭料理を召し上がれ💕 トマトの恵みを丸ごと味わう、飲む美容液。",price:250,image:Nn("menu_photo/5.png"),allergens:["soy"],soldOut:!1},strawberry:{key:"strawberry",label:"スモア(いちごジャム味)",description:" 恋の味って、たぶんこれ。甘くてちょっと酸っぱい、青春スモア🍓",price:250,image:Nn("menu_photo/1.png"),allergens:["wheat","egg"],soldOut:!1},blueberry:{key:"blueberry",label:"スモア(ブルーベリージャム味)",description:" ブルーベリーの甘みと酸味で頭スッキリ。三限目の眠気も吹っ飛ぶ（かも？）🫐",price:250,image:Nn("menu_photo/2.png"),allergens:["wheat","egg","soy"],soldOut:!1},chocolate:{key:"chocolate",label:"スモア(チョコ味)",description:"悩んだらチョコ。迷ったらチョコ。人生もスモアも、まずはチョコ。🍫",price:250,image:Nn("menu_photo/3.png"),allergens:["wheat","soy"],soldOut:!1},honey:{key:"honey",label:"スモア(はちみつ味)",description:" 疲れたあなたに、甘〜い救済。ハチもびっくりのしあわせスモア🐝🍯",price:250,image:Nn("menu_photo/4.png"),allergens:["wheat"],soldOut:!1}},k9={potaufeu:"ポトフ",minestrone:"ミネスト",plain:"プレーン",cocoa:"ココア",kinako:"きなこ",garlic:"ガーリック",strawberry:"いちご",blueberry:"ブルーベリー",chocolate:"チョコ",honey:"はちみつ",drink_hojicha:"ほうじ茶",drink_cocoa:"ココア(飲)",drink_coffee:"コーヒー",drink_milkcoffee:"コーヒー牛乳"},tf=(n,e)=>k9[n]??e,L9={day12:["potaufeu","plain","cocoa","kinako","garlic","drink_hojicha","drink_cocoa","drink_coffee","drink_milkcoffee"],day34:["minestrone","strawberry","blueberry","chocolate","honey","drink_hojicha","drink_cocoa","drink_coffee","drink_milkcoffee"]},j9="day12",B9=n=>n==="day12"||n==="day34",Bm="day12".toLowerCase(),e3=Bm&&B9(Bm)?Bm:j9,V9=e3,t3=L9[e3],Fc=t3.reduce((n,e)=>(n[e]=JT[e],n),{});t3.map(n=>JT[n]);const F9=["未払い","支払い済み","キャンセル"],n3="order-app.menu-overrides.v1",U9="config",z9="menuOverrides",r3=Ua;let Gn={};const Zg=new Set;let My;const i3=typeof window<"u",vc=Ua?null:Di(Hn,U9,z9),a3=(n,e)=>{if(typeof n!="string")return;const t=n.trim();if(!(!t||t===e))return t},s3=(n,e)=>{if(!Number.isFinite(n))return;const t=Math.max(0,Math.round(n));if(t!==e)return t},o3=(n,e)=>{if(typeof n=="boolean")return n===e?void 0:n},Jg=n=>!n||typeof n!="object"?{}:Object.entries(n).reduce((e,[t,r])=>{if(!l3(t)||!r||typeof r!="object")return e;const i=Fc[t],a=a3(r.label,i.label),o=s3(r.price,i.price),c=o3(r.soldOut,i.soldOut);if(!a&&!Number.isFinite(o)&&typeof c!="boolean")return e;const u={};return a&&(u.label=a),Number.isFinite(o)&&(u.price=o),typeof c=="boolean"&&(u.soldOut=c),e[t]=u,e},{}),H9=()=>{if(!i3)return{};try{const n=window.localStorage.getItem(n3);if(!n)return{};const e=JSON.parse(n);return Jg(e)}catch(n){return console.warn("[menuConfigStore] Failed to load overrides",n),{}}},G9=n=>{if(i3)try{const e=JSON.stringify(n);window.localStorage.setItem(n3,e)}catch(e){console.warn("[menuConfigStore] Failed to persist overrides",e)}},l3=n=>n in Fc,c3=()=>{const n=Object.entries(Fc).reduce((e,[t,r])=>{const i=t,a=Gn[i]??{},o=a.label??r.label,c=a.price??r.price,u=a.soldOut??r.soldOut;return e[i]={...r,label:o,price:c,soldOut:u},e},{});return{map:n,list:Object.values(n)}},nf=(n,e)=>{const t=Object.keys(n),r=Object.keys(e);return t.length!==r.length?!1:t.every(i=>{if(!l3(i))return!1;const a=n[i],o=e[i];return!a&&!o?!0:!a||!o?!1:a.label===o.label&&a.price===o.price&&a.soldOut===o.soldOut})},lc=(n,e={})=>{const{persist:t=!0}=e;Gn=n,My=c3(),r3&&t&&G9(n),Zg.forEach(r=>r())},q9=async n=>{vc&&await S9(vc,{overrides:n,updatedAt:Cc(),updatedBy:Ri.currentUser?.uid??null},{merge:!0})},w0=async n=>{if(nf(n,Gn))return;const e=Gn;if(lc(n),vc)try{await q9(n)}catch(t){throw console.error("[menuConfigStore] Failed to sync overrides to Firestore",t),lc(e,{persist:!1}),t}},$9=()=>{vc&&((async()=>{try{await QT();const n=await Oy(vc);if(!n.exists()){nf(Gn,{})||lc({},{persist:!1});return}const e=n.data(),t=Jg(e?.overrides);nf(t,Gn)||lc(t,{persist:!1})}catch(n){console.error("[menuConfigStore] Failed to load menu overrides from Firestore",n)}})(),fp(vc,n=>{if(n.metadata.hasPendingWrites)return;if(!n.exists()){nf(Gn,{})||lc({},{persist:!1});return}const e=n.data(),t=Jg(e?.overrides);nf(t,Gn)||lc(t,{persist:!1})},n=>{console.error("[menuConfigStore] Failed to subscribe to menu overrides",n)}))},uo=()=>My,X9=n=>(Zg.add(n),()=>{Zg.delete(n)}),K9=async(n,e)=>{const t=Fc[n];if(!t)throw new Error(`Unknown menu item key: ${n}`);const i={...Gn[n]??{}};let a=!1;if(Object.prototype.hasOwnProperty.call(e,"label")){const p=a3(e.label,t.label);typeof p=="string"?i.label!==p&&(i.label=p,a=!0):i.label!==void 0&&(delete i.label,a=!0)}if(Object.prototype.hasOwnProperty.call(e,"price")){const p=s3(e.price,t.price);typeof p=="number"?i.price!==p&&(i.price=p,a=!0):i.price!==void 0&&(delete i.price,a=!0)}if(Object.prototype.hasOwnProperty.call(e,"soldOut")){const p=o3(e.soldOut,t.soldOut);typeof p=="boolean"?i.soldOut!==p&&(i.soldOut=p,a=!0):i.soldOut!==void 0&&(delete i.soldOut,a=!0)}if(!a)return;if(Object.keys(i).length===0){if(!Gn[n])return;const p={...Gn};delete p[n],await w0(p);return}const h={...Gn,[n]:i};await w0(h)},Y9=async n=>{if(!Gn[n])return;const e={...Gn};delete e[n],await w0(e)},W9=async()=>{Object.keys(Gn).length!==0&&await w0({})},Q9=()=>Fc,Z9=()=>Gn;r3?Gn=H9():(Gn={},$9());My=c3();const J9={day12:[{key:"potaufeu",label:"ポトフ",icon:"🥘",itemKeys:["potaufeu"]},{key:"friedBread",label:"揚げパン",icon:"🍞",itemKeys:["plain","cocoa","kinako","garlic"]}],day34:[{key:"potaufeu",label:"ミネストローネ",icon:"🥣",itemKeys:["minestrone"]},{key:"friedBread",label:"スモア",icon:"🍪",itemKeys:["strawberry","blueberry","chocolate","honey"]}]},Mi=J9[V9],e7=new Map(Mi.flatMap(n=>n.itemKeys.map(e=>[e,n.key])));function t7(n){return e7.get(n)??null}function n7(n){const e=Mi.reduce((t,r)=>(t[r.key]=0,t),{potaufeu:0,friedBread:0});return Mi.reduce((t,r)=>(t[r.key]=r.itemKeys.reduce((i,a)=>i+(n[a]??0),0),t),e)}function Or(n,e){const t=n7(n);return{potaufeu:e?.potaufeu??t.potaufeu===0,friedBread:e?.friedBread??t.friedBread===0}}function Py(n){return Or(n,null)}function r7(n,e){const t=Or(n,e);return{potaufeu:t.potaufeu?"ready":"pending",friedBread:t.friedBread?"ready":"pending"}}function u3(n,e){const t=Mi.find(r=>r.key===e);return t?t.itemKeys.reduce((r,i)=>r+(n[i]??0),0):0}function i7(n,e){return Mi.every(t=>t.itemKeys.reduce((i,a)=>i+(n[a]??0),0)===0?!0:e[t.key]==="ready")}function a7(n){const e=h=>h.toString().padStart(2,"0"),t=n.getFullYear(),r=e(n.getMonth()+1),i=e(n.getDate()),a=e(n.getHours()),o=e(n.getMinutes()),c=e(n.getSeconds()),u=Array.from({length:4},()=>String.fromCharCode(65+Math.floor(Math.random()*26))).join("");return`ORD-${t}${r}${i}${a}${o}${c}-${u}`}function s7(){const n="ABCDEFGHJKLMNPQRSTUVWXYZ23456789";return Array.from({length:16},()=>n.charAt(Math.floor(Math.random()*n.length))).join("")}function o7(n){return Object.entries(n).reduce((e,[t,r])=>{const i=Number.isFinite(r)?Math.max(0,Math.floor(r)):0;return i>0&&(e[t]=i),e},{})}function l7(n){const{map:e}=uo();return Object.entries(n).reduce((t,[r,i])=>{const o=e[r]?.price??0;return t+o*i},0)}function hi(n){return n?n.toDate():void 0}const c7=20;async function u7(n){await QT();const e=o7(n);if(!Object.values(e).some(w=>w>0))throw new Error("商品を1点以上ご注文ください。");const r=new Date,i=a7(r),a=s7(),o=l7(e),c="未払い",u="受注済み",h=Py(e),p=Di(Hn,"orders",i),g=Di(Hn,"orderLookup",a),_=Di(Hn,"metadata","counters"),E=await R9(Hn,async w=>{const T=((await w.get(_)).data()?.lastCallNumber??0)+1;w.set(_,{lastCallNumber:T,updatedAt:Cc()},{merge:!0});const O=Cc();return w.set(p,{orderId:i,ticket:a,callNumber:T,createdBy:Ri.currentUser?.uid??null,items:e,total:o,payment:c,progress:u,plating:h,createdAt:O,updatedAt:O}),w.set(g,{orderId:i,ticket:a,callNumber:T,items:e,total:o,payment:c,progress:u,plating:h,createdAt:O,updatedAt:O}),T});return{orderId:i,ticket:a,callNumber:E,total:o,items:e,payment:c,progress:u,plating:h,createdAt:r}}async function f7(n){const e=n.trim().toUpperCase();if(!e)return null;const t=Di(Hn,"orderLookup",e),r=await Oy(t);if(!r.exists())return null;const i=r.data(),a=i.items??{},o=Or(a,i.plating);return{orderId:i.orderId,ticket:e,callNumber:i.callNumber??0,total:i.total,items:a,payment:i.payment,progress:i.progress,plating:o,updatedAt:hi(i.updatedAt),createdAt:hi(i.createdAt)}}async function h7(n){const e=Di(Hn,"orders",n),t=await Oy(e);if(!t.exists())return null;const r=t.data(),i=r.items??{};return{orderId:r.orderId,ticket:r.ticket,callNumber:r.callNumber??0,items:i,total:r.total,payment:r.payment,progress:r.progress,plating:Or(i,r.plating),createdAt:hi(r.createdAt),updatedAt:hi(r.updatedAt),createdBy:r.createdBy??null}}async function d7(n,e,t){const r=KT(Hn),i=Di(Hn,"orders",n),a=Di(Hn,"orderLookup",e);r.update(i,{payment:t.payment,progress:t.progress,updatedAt:Cc()}),r.update(a,{payment:t.payment,progress:t.progress,updatedAt:Cc()}),await r.commit()}async function p7(n,e,t){const r=Object.entries(t).filter(([,u])=>typeof u=="boolean");if(r.length===0)return;const i=KT(Hn),a=Di(Hn,"orders",n),o=Di(Hn,"orderLookup",e),c={updatedAt:Cc()};r.forEach(([u,h])=>{c[`plating.${u}`]=h}),i.update(a,c),i.update(o,c),await i.commit()}async function m7(n={}){const{start:e,end:t}=n,r=np(Hn,"orders"),i=[cp("createdAt","asc")];return e&&i.push(E0("createdAt",">=",It.fromDate(e))),t&&i.push(E0("createdAt","<",It.fromDate(t))),(await qT(op(r,...i))).docs.map(o=>{const c=o.data(),u=c.items??{};return{orderId:c.orderId,ticket:c.ticket,callNumber:c.callNumber??0,items:u,total:c.total,payment:c.payment,progress:c.progress,plating:Or(u,c.plating),createdAt:hi(c.createdAt),updatedAt:hi(c.updatedAt),createdBy:c.createdBy??null}})}function g7(n,e={}){const t=np(Hn,"orders"),r=op(t,cp("createdAt","desc"),zT(c7)),i=new Set;let a=!1;return fp(r,c=>{if(!a){c.docs.forEach(u=>i.add(u.id)),a=!0;return}c.docChanges().filter(u=>u.type==="added").forEach(u=>{const h=u.doc.id;if(i.has(h))return;i.add(h);const p=u.doc.data(),g=p.items??{};n({orderId:p.orderId,ticket:p.ticket,callNumber:p.callNumber??0,items:g,total:p.total,payment:p.payment,progress:p.progress,plating:Or(g,p.plating),createdAt:hi(p.createdAt),updatedAt:hi(p.updatedAt),createdBy:p.createdBy??null})})},c=>{console.error("Failed to subscribe new orders",c),e.onError?.(c)})}function v7(n,e={}){const t=np(Hn,"orders"),r=[cp("createdAt","desc")],i=e.start;i&&!Number.isNaN(i.getTime())&&r.push(E0("createdAt",">=",It.fromDate(i)));const a=e.end;a&&!Number.isNaN(a.getTime())&&r.push(E0("createdAt","<",It.fromDate(a)));const o=e.limit;typeof o=="number"&&Number.isFinite(o)&&o>0&&r.push(zT(Math.floor(o)));const c=op(t,...r);return fp(c,h=>{const p=h.docs.map(g=>{const _=g.data(),E=_.items??{};return{orderId:_.orderId??g.id,ticket:_.ticket,callNumber:_.callNumber??0,items:E,total:_.total,payment:_.payment,progress:_.progress,plating:Or(E,_.plating),createdAt:hi(_.createdAt),updatedAt:hi(_.updatedAt),createdBy:_.createdBy??null}});n(p)},h=>{console.error("Failed to subscribe orders collection",h),e.onError?.(h)})}function y7(n,e,t={}){const r=n.trim().toUpperCase();if(!r)return e(null),()=>{};const i=Di(Hn,"orderLookup",r);return fp(i,o=>{if(!o.exists()){e(null);return}const c=o.data(),u=c.items??{};e({orderId:c.orderId??r,ticket:r,callNumber:c.callNumber??0,total:c.total,items:u,payment:c.payment,progress:c.progress,plating:Or(u,c.plating),updatedAt:hi(c.updatedAt),createdAt:hi(c.createdAt)})},o=>{console.error("Failed to subscribe order lookup",o),t.onError?.(o)})}function _7(n){if(n===null||typeof n>"u")return"";const e=String(n);return e.includes(",")||e.includes('"')||e.includes(`
`)?`"${e.replace(/"/g,'""')}"`:e}async function x7(){const n=np(Hn,"orders"),e=await qT(op(n,cp("createdAt","asc"))),t=["orderId","callNumber","ticket","total","payment","progress","items","createdAt","updatedAt"],{map:r}=uo(),i=e.docs.map(h=>{const p=h.data(),g=p.items,_=Object.entries(g).map(([E,w])=>`${r[E]?.label??E}:${w}`).join(" | ");return[p.orderId,p.callNumber??"",p.ticket,p.total,p.payment,p.progress,_,p.createdAt?.toDate()?.toISOString()??"",p.updatedAt?.toDate()?.toISOString()??""].map(_7).join(",")}),a=[t.join(","),...i].join(`
`),o=new Blob([a],{type:"text/csv"}),c=URL.createObjectURL(o),u=document.createElement("a");u.href=c,u.download=`orders-${new Date().toISOString().slice(0,10)}.csv`,u.click(),URL.revokeObjectURL(c)}const f3="mock-orders-state-v1",ev=new Set,tv=new Set,qo=new Map;function E7(n){ev.forEach(e=>{try{e({...n})}catch(t){console.error("モック新規注文通知でエラーが発生しました",t)}})}function w7(){const n=Oi.orders.map(e=>h3(e));tv.forEach(e=>{try{e(n)}catch(t){console.error("モック注文購読の通知でエラーが発生しました",t)}})}function h3(n){return{...n,items:{...n.items},plating:Or(n.items,n.plating),createdAt:n.createdAt?new Date(n.createdAt):void 0,updatedAt:n.updatedAt?new Date(n.updatedAt):void 0}}function d3(n){return{orderId:n.orderId,ticket:n.ticket,callNumber:n.callNumber??0,items:{...n.items},total:n.total,payment:n.payment,progress:n.progress,plating:Or(n.items,n.plating),createdAt:n.createdAt,updatedAt:n.updatedAt}}function p3(n){const e=n.trim().toUpperCase();if(!e)return;const t=qo.get(e);if(!t||t.size===0)return;const r=Ly(e),i=r?d3(r):null;t.forEach(a=>{try{a(i)}catch(o){console.error("モック注文詳細購読の通知でエラーが発生しました",o)}})}function A7(){Array.from(qo.keys()).forEach(n=>p3(n))}function b7(n){if(!n||typeof n!="object")return pf;const e=n,t=(e.orders??[]).map(i=>{const a=i.createdAt?new Date(i.createdAt):void 0,o=i.updatedAt?new Date(i.updatedAt):void 0;return{...i,createdAt:a,updatedAt:o}});if(t.length===0)return pf;const r=Number.isFinite(e.lastCallNumber)?Number(e.lastCallNumber):Math.max(0,...t.map(i=>i.callNumber??0));return{orders:t,lastCallNumber:r}}function S7(){if(typeof window>"u")return pf;try{const n=window.localStorage.getItem(f3);return n?b7(JSON.parse(n)):pf}catch(n){return console.warn("モックデータの読み込みに失敗しました。初期データを使用します。",n),pf}}function C7(n){if(!(typeof window>"u"))try{const e={orders:n.orders.map(t=>({...t,createdAt:t.createdAt?.toISOString()??null,updatedAt:t.updatedAt?.toISOString()??null})),lastCallNumber:n.lastCallNumber};window.localStorage.setItem(f3,JSON.stringify(e))}catch(e){console.warn("モックデータの保存に失敗しました。",e)}}function m3(n){return Object.entries(n).reduce((e,[t,r])=>{const i=Number.isFinite(r)?Math.max(0,Math.floor(r)):0;return i>0&&(e[t]=i),e},{})}function g3(n){const{map:e}=uo();return Object.entries(n).reduce((t,[r,i])=>{const o=e[r]?.price??0;return t+o*i},0)}function T7(n){const e=h=>h.toString().padStart(2,"0"),t=n.getFullYear(),r=e(n.getMonth()+1),i=e(n.getDate()),a=e(n.getHours()),o=e(n.getMinutes()),c=e(n.getSeconds()),u=Array.from({length:4},()=>String.fromCharCode(65+Math.floor(Math.random()*26))).join("");return`ORD-${t}${r}${i}${a}${o}${c}-${u}`}function I7(){const n="ABCDEFGHJKLMNPQRSTUVWXYZ23456789";return Array.from({length:16},()=>n.charAt(Math.floor(Math.random()*n.length))).join("")}const Vm=m3({plain:2,cocoa:1}),pf={orders:[{orderId:"ORD-20251009090000-DEMO",ticket:"MOCKTICKET123456",callNumber:1,items:Vm,total:g3(Vm),payment:"未払い",progress:"受注済み",plating:Py(Vm),createdAt:new Date,updatedAt:new Date,createdBy:"mock-user"}],lastCallNumber:1};let Oi=S7();function ky(n){const e={orders:Oi.orders.map(t=>({...t})),lastCallNumber:Oi.lastCallNumber};n(e),Oi=e,C7(Oi),w7(),A7()}function Ly(n){const e=n.trim().toUpperCase();return e?Oi.orders.find(t=>t.ticket===e)??null:null}async function N7(n){const e=m3(n);if(!Object.values(e).some(g=>g>0))throw new Error("商品を1点以上ご注文ください。");const r=new Date,i=T7(r),a=I7(),o=g3(e),c="未払い",u="受注済み",h=Oi.lastCallNumber+1,p={orderId:i,ticket:a,callNumber:h,items:e,total:o,payment:c,progress:u,plating:Py(e),createdAt:r,updatedAt:r,createdBy:"mock-user"};return ky(g=>{g.orders.push(p),g.lastCallNumber=h}),E7(p),p3(p.ticket),{orderId:i,ticket:a,callNumber:h,total:o,items:e,payment:c,progress:u,plating:p.plating,createdAt:r}}async function R7(n){const e=Ly(n);return e?{orderId:e.orderId,ticket:e.ticket,callNumber:e.callNumber,items:e.items,total:e.total,payment:e.payment,progress:e.progress,plating:Or(e.items,e.plating),updatedAt:e.updatedAt,createdAt:e.createdAt}:null}async function O7(n){const e=n.trim().toUpperCase();if(!e)return null;const t=Oi.orders.find(r=>r.orderId===e);return t?{...t}:null}async function D7(n,e,t){ky(r=>{r.orders=r.orders.map(i=>i.orderId!==n&&i.ticket!==e?i:{...i,payment:t.payment,progress:t.progress,updatedAt:new Date})})}async function M7(n,e,t){const r=Object.entries(t).filter(([,i])=>typeof i=="boolean");r.length!==0&&ky(i=>{i.orders=i.orders.map(a=>{if(a.orderId!==n&&a.ticket!==e)return a;const o=Or(a.items,{...a.plating,...Object.fromEntries(r)});return{...a,plating:o,updatedAt:new Date}})})}async function P7(n={}){const{start:e,end:t}=n,r=e?.getTime(),i=t?.getTime();return Oi.orders.filter(a=>{const o=a.createdAt??a.updatedAt;if(!o)return!r&&!i;const c=o.getTime();return!(typeof r=="number"&&c<r||typeof i=="number"&&c>=i)}).sort((a,o)=>{const c=(a.createdAt??a.updatedAt??new Date(0)).getTime(),u=(o.createdAt??o.updatedAt??new Date(0)).getTime();return c-u}).map(a=>({...a}))}async function k7(){const n=["orderId","callNumber","ticket","total","payment","progress","items","createdAt","updatedAt"],{map:e}=uo(),t=Oi.orders.map(o=>{const c=Object.entries(o.items).map(([u,h])=>`${e[u]?.label??u}:${h}`).join(" | ");return[o.orderId,o.callNumber??"",o.ticket,o.total,o.payment,o.progress,c,o.createdAt?.toISOString()??"",o.updatedAt?.toISOString()??""].map(u=>{const h=String(u);return h.includes(",")||h.includes('"')||h.includes(`
`)?`"${h.replace(/"/g,'""')}"`:h}).join(",")}),r=new Blob([[n.join(","),...t].join(`
`)],{type:"text/csv"}),i=URL.createObjectURL(r),a=document.createElement("a");a.href=i,a.download=`orders-mock-${new Date().toISOString().slice(0,10)}.csv`,a.click(),URL.revokeObjectURL(i)}function L7(n){return ev.add(n),()=>{ev.delete(n)}}function j7(n,e={}){const t=e.start?.getTime(),r=e.end?.getTime(),i=e.limit&&Number.isFinite(e.limit)&&e.limit>0?Math.floor(e.limit):null,a=c=>{const h=c.filter(g=>{const _=g.createdAt??g.updatedAt;if(!_)return!(t!=null||r!=null);const E=_.getTime();return!(Number.isNaN(E)||t!=null&&E<t||r!=null&&E>=r)}).sort((g,_)=>{const E=g.createdAt?.getTime()??0;return(_.createdAt?.getTime()??0)-E});return(i?h.slice(0,i):h).map(g=>({...g,items:{...g.items},plating:Or(g.items,g.plating),createdAt:g.createdAt?new Date(g.createdAt):void 0,updatedAt:g.updatedAt?new Date(g.updatedAt):void 0}))},o=c=>{try{n(a(c))}catch(u){console.error("モック注文購読のフィルタリングでエラーが発生しました",u)}};return tv.add(o),o(Oi.orders.map(c=>h3(c))),()=>{tv.delete(o)}}function B7(n,e){const t=n.trim().toUpperCase();if(!t)return e(null),()=>{};const r=qo.get(t)??new Set;qo.has(t)||qo.set(t,r),r.add(e);const i=Ly(t);return e(i?d3(i):null),()=>{const a=qo.get(t);a&&(a.delete(e),a.size===0&&qo.delete(t))}}const V7=["AIzaSyBxVSYgc9mqtDeczSZjOcPn0D-sB0PBUKM","ichinikai-order.firebaseapp.com","ichinikai-order","ichinikai-order.appspot.com","829152459225","1:829152459225:web:a8966a583e54d7553ac1c8"],F7=V7.some(n=>!n||n==="undefined"),xa=F7,U7=xa?N7:u7,z7=xa?R7:f7,H7=xa?O7:h7,G7=xa?D7:d7,q7=xa?M7:p7,$7=xa?k7:x7,X7=xa?P7:m7,K7=xa?L7:g7,Y7=xa?j7:v7,W7=xa?B7:y7,Q7=U7,mA=z7,gA=H7,Ga=G7,Fm=q7,v3=$7,Z7=X7,J7=K7,eP=Y7,tP=W7;function Uc(n={}){const[e,t]=P.useState([]),[r,i]=P.useState(!0),[a,o]=P.useState(null),{autoStopWhen:c,...u}=n,h=u.start?.getTime(),p=typeof h=="number"&&!Number.isNaN(h)?h:null,g=u.end?.getTime(),_=typeof g=="number"&&!Number.isNaN(g)?g:null,E=typeof u.limit=="number"&&Number.isFinite(u.limit)&&u.limit>0?Math.floor(u.limit):null;return P.useEffect(()=>{let w=!0,S=!1,D=null;const T=()=>{D&&(D(),D=null)};i(!0),o(null);const O={...p!=null&&u.start?{start:u.start}:{},..._!=null&&u.end?{end:u.end}:{},...E!=null?{limit:E}:{},onError:j=>{w&&(console.error("注文データの購読に失敗しました",j),o(j instanceof Error?j:new Error("注文データの購読に失敗しました")),i(!1))}};return D=eP(j=>{w&&(t(j),i(!1),!S&&c?.(j)&&(S=!0,w=!1,T()))},O),()=>{w=!1,T()}},[c,_,E,p]),{orders:e,loading:r,error:a}}function sl(){const n=P.useSyncExternalStore(X9,uo);return P.useMemo(()=>({menuItems:n.list,menuItemMap:n.map,baseMenuItemMap:Q9(),overrides:Z9(),updateMenuItem:K9,resetMenuItem:Y9,resetAllMenuItems:W9}),[n])}const nP={soup:"スープ",friedBread:"揚げパン",smore:"スモア",drink:"ドリンク"},rP=["soup","friedBread","smore","drink"],iP={potaufeu:"soup",minestrone:"soup",plain:"friedBread",cocoa:"friedBread",kinako:"friedBread",garlic:"friedBread",strawberry:"smore",blueberry:"smore",chocolate:"smore",honey:"smore",drink_hojicha:"drink",drink_cocoa:"drink",drink_coffee:"drink",drink_milkcoffee:"drink"},aP=[{value:"today",label:"今日"},{value:"yesterday",label:"昨日"},{value:"7days",label:"直近7日間"}],sP=["最新 24 時間の注文を CSV 形式でダウンロードできます。","Google スプレッドシートにインポートすると集計や共有が容易になります。","エクスポートにはデータ量に応じて最大 10 秒ほどかかる場合があります。"],Wl=new Intl.NumberFormat("ja-JP",{style:"currency",currency:"JPY",maximumFractionDigits:0}),Fa=new Intl.NumberFormat("ja-JP",{maximumFractionDigits:0});function vA({mode:n="default"}){const[e,t]=P.useState("today"),{menuItems:r}=sl(),{start:i,end:a}=P.useMemo(()=>oP(e),[e]),o=P.useMemo(()=>({start:i,end:a,autoStopWhen:e==="today"?void 0:q=>q.length>0}),[a,i,e]),{orders:c,loading:u,error:h}=Uc(o),p=P.useMemo(()=>{const H=Array.from({length:24},(b,I)=>({hour:I,orderCount:0,revenue:0,cumulativeRevenue:0}));if(c.length===0)return H;c.map(b=>({order:b,timestamp:yA(b)})).filter(b=>b.timestamp!=null).sort((b,I)=>b.timestamp.getTime()-I.timestamp.getTime()).forEach(({order:b,timestamp:I})=>{if(b.payment==="キャンセル")return;const k=I.getHours();if(k<0||k>=H.length)return;const M=Number.isFinite(b.total)?b.total:0;H[k].orderCount+=1,H[k].revenue+=M});let N=0;return H.forEach(b=>{N+=b.revenue,b.cumulativeRevenue=N}),H},[c]),g=P.useMemo(()=>{if(c.length===0)return{totalOrders:0,paidOrders:0,totalRevenue:0,averageOrderValue:0};let H=0,q=0,N=0;c.forEach(I=>{if(I.payment==="キャンセル")return;H+=1,I.payment==="支払い済み"&&(q+=1);const k=Number.isFinite(I.total)?I.total:0;N+=k});const b=H>0?N/H:0;return{totalOrders:H,paidOrders:q,totalRevenue:N,averageOrderValue:b}},[c]),_=P.useMemo(()=>p.reduce((H,q)=>Math.max(H,q.revenue),0),[p]),E=P.useMemo(()=>r.map(H=>{const q=tf(H.key,H.label),N=Array.from({length:24},()=>({count:0,revenue:0}));let b=0,I=0;c.forEach(V=>{if(V.payment==="キャンセル")return;const L=yA(V);if(!L)return;const ie=V.items[H.key]??0;if(ie<=0)return;const we=L.getHours();if(we<0||we>=N.length)return;const F=ie*H.price;N[we].count+=ie,N[we].revenue+=F,b+=ie,I+=F});const k=N.reduce((V,L,ie)=>L.count>V.count?{count:L.count,hour:ie}:V,{count:0,hour:-1}),M=N.map((V,L)=>({hour:L,count:V.count,revenue:V.revenue})).filter(V=>V.count>0);return{key:H.key,label:q,totalCount:b,totalRevenue:I,peakHour:k.count>0?k.hour:null,hourlyBreakdown:M}}),[c,r]),w=P.useMemo(()=>new Map(r.map(H=>[H.key,H])),[r]),S=P.useMemo(()=>Array.from({length:24},(H,q)=>{const N=r.map(({key:I})=>{const M=E.find(V=>V.key===I)?.hourlyBreakdown.find(V=>V.hour===q);return{key:I,count:M?.count??0}}),b=N.reduce((I,k)=>I+k.count,0);return{hour:q,total:b,segments:N}}),[r,E]),D=P.useMemo(()=>S.filter(H=>H.total>0),[S]),T=P.useMemo(()=>new Map(S.map(H=>[H.hour,H])),[S]),O=P.useMemo(()=>S.reduce((H,q)=>Math.max(H,q.total),0),[S]),j=c.length>0,z=P.useMemo(()=>lP(i,a),[i,a]);return n==="export"?m.jsxs("div",{className:"admin-grid",style:{gap:"28px"},children:[m.jsxs("section",{className:"admin-card",children:[m.jsx("h3",{children:"データエクスポート"}),m.jsx("p",{children:"注文データを CSV として出力します。期間や対象を選択してから「エクスポートを開始」ボタンを押してください。"}),m.jsxs("div",{className:"admin-toolbar",children:[m.jsxs("div",{className:"field",children:[m.jsx("label",{htmlFor:"export-range",children:"対象期間"}),m.jsxs("select",{id:"export-range",defaultValue:"today",children:[m.jsx("option",{value:"today",children:"本日"}),m.jsx("option",{value:"yesterday",children:"昨日"}),m.jsx("option",{value:"week",children:"直近 7 日"}),m.jsx("option",{value:"custom",children:"カスタム期間"})]})]}),m.jsxs("div",{className:"field",children:[m.jsx("label",{htmlFor:"export-status",children:"進捗ステータス"}),m.jsxs("select",{id:"export-status",defaultValue:"all",children:[m.jsx("option",{value:"all",children:"すべて"}),m.jsx("option",{value:"open",children:"調理済みまで"}),m.jsx("option",{value:"ready",children:"調理済みのみ"}),m.jsx("option",{value:"closed",children:"クローズ済み"})]})]})]}),m.jsx("button",{type:"button",className:"admin-primary-button",style:{width:"fit-content"},children:"エクスポートを開始"})]}),m.jsxs("section",{className:"admin-card",children:[m.jsx("h3",{children:"エクスポートのヒント"}),m.jsx("ul",{className:"admin-list",children:sP.map(H=>m.jsx("li",{children:H},H))})]})]}):m.jsxs("div",{className:"admin-grid",style:{gap:"28px"},children:[m.jsxs("section",{className:"admin-card admin-dashboard-controls",children:[m.jsxs("div",{children:[m.jsx("p",{className:"admin-content-overline",children:"集計期間"}),m.jsx("h3",{children:z})]}),m.jsx("div",{className:"admin-toolbar",style:{marginBottom:0},children:m.jsxs("div",{className:"field",children:[m.jsx("label",{htmlFor:"dashboard-range",children:"期間を選択"}),m.jsx("select",{id:"dashboard-range",value:e,onChange:H=>t(H.target.value),children:aP.map(H=>m.jsx("option",{value:H.value,children:H.label},H.value))})]})})]}),u?m.jsx("section",{className:"admin-card admin-empty-state",children:m.jsx("p",{children:"注文データを読み込んでいます…"})}):h?m.jsxs("section",{className:"admin-card admin-empty-state",children:[m.jsx("p",{children:"注文データの取得に失敗しました。"}),m.jsx("small",{children:h.message})]}):m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"admin-grid admin-metric-cards",children:[m.jsxs("article",{className:"admin-card admin-metric-card",children:[m.jsx("p",{className:"admin-content-overline",children:"総売上"}),m.jsx("h3",{className:"admin-metric-card-value",children:Wl.format(g.totalRevenue)}),m.jsx("p",{className:"admin-metric-card-helper",children:"キャンセルを除く注文の合計金額"})]}),m.jsxs("article",{className:"admin-card admin-metric-card",children:[m.jsx("p",{className:"admin-content-overline",children:"注文件数"}),m.jsxs("h3",{className:"admin-metric-card-value",children:[Fa.format(g.totalOrders)," 件"]}),m.jsxs("p",{className:"admin-metric-card-helper",children:["支払い済み ",Fa.format(g.paidOrders)," 件"]})]}),m.jsxs("article",{className:"admin-card admin-metric-card",children:[m.jsx("p",{className:"admin-content-overline",children:"平均単価"}),m.jsx("h3",{className:"admin-metric-card-value",children:Wl.format(g.averageOrderValue||0)}),m.jsx("p",{className:"admin-metric-card-helper",children:"キャンセルを除く注文から算出"})]})]}),m.jsxs("section",{className:"admin-card",children:[m.jsx("header",{className:"admin-card-header",children:m.jsxs("div",{children:[m.jsx("h3",{children:"時間帯別の推移"}),m.jsx("p",{children:"売上と件数を 1 時間ごとに集計しています。"})]})}),j?m.jsxs("table",{className:"admin-table admin-hourly-table",children:[m.jsx("thead",{children:m.jsxs("tr",{children:[m.jsx("th",{scope:"col",children:"時間帯"}),m.jsx("th",{scope:"col",children:"件数"}),m.jsx("th",{scope:"col",children:"売上"}),m.jsx("th",{scope:"col",children:"累積売上"})]})}),m.jsx("tbody",{children:p.map(H=>{const N=T.get(H.hour)?.segments??[],b={soup:0,friedBread:0,smore:0,drink:0};return N.forEach(I=>{if(!I||I.count===0)return;const k=iP[I.key];b[k]+=I.count}),m.jsxs("tr",{children:[m.jsx("td",{children:Id(H.hour)}),m.jsx("td",{children:m.jsxs("div",{className:"admin-hourly-volume",children:[m.jsxs("span",{className:"admin-hourly-volume-count",children:[Fa.format(H.orderCount)," 件"]}),m.jsx("div",{className:"admin-hourly-volume-bar","aria-hidden":H.orderCount===0,children:N.map(I=>{if(!I||I.count===0)return null;const k=O>0?I.count/O*100:0;if(k<=0)return null;const M=k<4?"6px":void 0,V=k<8,L=w.get(I.key);return m.jsx("span",{className:`admin-product-sales-segment menu-item-${I.key}`,style:{width:`${k}%`,flexBasis:`${k}%`,minWidth:M},"data-compact":V?"true":void 0,title:`${tf(I.key,L?.label??I.key)}: ${Fa.format(I.count)}個`,children:m.jsx("span",{className:"admin-product-sales-count",children:I.count})},I.key)})}),m.jsx("div",{className:"admin-hourly-volume-category","aria-hidden":H.orderCount===0,children:rP.map(I=>{const k=b[I];return m.jsxs("span",{"data-muted":k===0?"true":void 0,children:[nP[I]," ",Fa.format(k)," 個"]},I)})})]})}),m.jsxs("td",{children:[Wl.format(H.revenue),m.jsx("div",{className:"admin-trend-bar revenue",children:m.jsx("span",{style:{width:`${_>0?H.revenue/_*100:0}%`}})})]}),m.jsx("td",{children:Wl.format(H.cumulativeRevenue)})]},H.hour)})})]}):m.jsx("p",{className:"admin-empty-inline",children:"指定期間の注文はありません。"})]}),m.jsxs("section",{className:"admin-card",children:[m.jsx("header",{className:"admin-card-header",children:m.jsxs("div",{children:[m.jsx("h3",{children:"商品別の売上・数量"}),m.jsx("p",{children:"時間帯ごとの傾向も確認できます。"})]})}),j?m.jsxs(m.Fragment,{children:[m.jsxs("table",{className:"admin-table admin-product-table",children:[m.jsx("thead",{children:m.jsxs("tr",{children:[m.jsx("th",{scope:"col",children:"商品"}),m.jsx("th",{scope:"col",children:"数量"}),m.jsx("th",{scope:"col",children:"売上"}),m.jsx("th",{scope:"col",children:"ピーク時間"})]})}),m.jsx("tbody",{children:E.map(H=>m.jsxs("tr",{className:`menu-item-${H.key}`,children:[m.jsx("td",{className:"admin-product-name",children:H.label}),m.jsxs("td",{children:[Fa.format(H.totalCount)," 個"]}),m.jsx("td",{children:Wl.format(H.totalRevenue)}),m.jsx("td",{children:H.peakHour!=null?Id(H.peakHour):"—"})]},H.key))})]}),D.length>0&&m.jsxs("div",{className:"admin-product-sales-chart",role:"img","aria-label":"時間帯別の商品別販売数",children:[m.jsxs("div",{className:"admin-product-sales-header",children:[m.jsx("h4",{children:"時間帯別 販売個数の内訳"}),m.jsx("div",{className:"admin-product-sales-legend","aria-hidden":"true",children:r.map(H=>m.jsxs("span",{className:`admin-product-sales-legend-item menu-item-${H.key}`,children:[m.jsx("span",{className:"admin-product-sales-legend-swatch"}),tf(H.key,H.label)]},H.key))})]}),m.jsx("div",{className:"admin-product-sales-rows",children:D.map(H=>m.jsxs("div",{className:"admin-product-sales-row",children:[m.jsx("div",{className:"admin-product-sales-hour",children:Id(H.hour)}),m.jsx("div",{className:"admin-product-sales-bar","aria-hidden":H.total===0,children:H.segments.map(q=>{if(q.count===0)return null;const N=q.count/H.total*100,b=N<6?"6px":void 0,I=w.get(q.key);return m.jsx("span",{className:`admin-product-sales-segment menu-item-${q.key}`,style:{width:`${N}%`,flexBasis:`${N}%`,minWidth:b},title:`${tf(q.key,I?.label??q.key)}: ${Fa.format(q.count)}個`,children:m.jsx("span",{className:"admin-product-sales-count",children:q.count})},q.key)})}),m.jsxs("div",{className:"admin-product-sales-total",children:[Fa.format(H.total)," 個"]})]},H.hour))})]}),m.jsx("div",{className:"admin-product-breakdown",children:E.every(H=>H.hourlyBreakdown.length===0)?m.jsx("p",{className:"admin-empty-inline",children:"商品別の販売データがありません。"}):E.filter(H=>H.hourlyBreakdown.length>0).map(H=>m.jsxs("details",{className:`admin-product-breakdown-item menu-item-${H.key}`,children:[m.jsxs("summary",{children:[H.label," の時間帯別内訳"]}),m.jsxs("table",{children:[m.jsx("thead",{children:m.jsxs("tr",{children:[m.jsx("th",{scope:"col",children:"時間帯"}),m.jsx("th",{scope:"col",children:"数量"}),m.jsx("th",{scope:"col",children:"売上"})]})}),m.jsx("tbody",{children:H.hourlyBreakdown.map(q=>m.jsxs("tr",{children:[m.jsx("td",{children:Id(q.hour)}),m.jsxs("td",{children:[Fa.format(q.count)," 個"]}),m.jsx("td",{children:Wl.format(q.revenue)})]},`${H.key}-${q.hour}`))})]})]},H.key))})]}):m.jsx("p",{className:"admin-empty-inline",children:"商品別の集計はデータがあるときに表示されます。"})]})]})]})}function oP(n){const e=new Date,t=new Date(e.getFullYear(),e.getMonth(),e.getDate());return n==="today"?{start:t,end:Td(t,1)}:n==="yesterday"?{start:Td(t,-1),end:t}:{start:Td(t,-6),end:Td(t,1)}}function Td(n,e){const t=new Date(n);return t.setDate(t.getDate()+e),t}function yA(n){const e=n.createdAt,t=n.updatedAt;return e instanceof Date?e:typeof e=="string"?new Date(e):t instanceof Date?t:typeof t=="string"?new Date(t):null}function Id(n){const e=`${n.toString().padStart(2,"0")}:00`,t=n===23?"23:59":`${(n+1).toString().padStart(2,"0")}:00`;return`${e} - ${t}`}function lP(n,e){const t=new Intl.DateTimeFormat("ja-JP",{month:"numeric",day:"numeric",hour:"2-digit",minute:"2-digit"}),r=t.format(n),i=new Date(e.getTime()-1),a=t.format(i);return`${r} 〜 ${a}`}const cP=new Intl.DateTimeFormat("ja-JP",{hour:"2-digit",minute:"2-digit"}),_A=["受注済み","調理済み","クローズ"];function uP(n){const{map:e}=uo();return Object.entries(n).filter(([,r])=>r>0).map(([r,i])=>`${e[r]?.label??r}（${i}）`).join("／")||"—"}function fP(n){return n?cP.format(n):"--:--"}function dp(n){const e=n.createdAt??n.updatedAt??null,t=n.updatedAt??null;return{id:n.orderId,callNumber:n.callNumber??0,ticket:n.ticket,items:uP(n.items??{}),total:n.total,payment:n.payment,progress:n.progress,createdAt:fP(e),createdAtDate:e,updatedAtDate:t,confirmationCode:Ci(n.orderId),raw:n,platingStatus:r7(n.items??{},n.plating)}}function Ci(n){if(!n)return"----";const e=(n.match(/[A-Za-z]/g)??[]).map(r=>r.toUpperCase());return e.length===0?"----":e.length>=4?e.slice(-4).join(""):e.join("").repeat(Math.ceil(4/e.length)).slice(-4)}function A0(n){return n==="受注済み"?"調理済み":n==="調理済み"?"クローズ":null}function b0(n){return n==="クローズ"?"調理済み":n==="調理済み"?"受注済み":null}function hP(){const{orders:n,loading:e,error:t}=Uc(),r=P.useMemo(()=>n.map(dp),[n]),[i,a]=P.useState("すべて"),[o,c]=P.useState("すべて"),[u,h]=P.useState(""),[p,g]=P.useState(null),[_,E]=P.useState(null),w=P.useMemo(()=>{const O=u.trim().toLowerCase(),j=new Map(_A.map((z,H)=>[z,H]));return r.filter(z=>i==="すべて"?!0:z.progress===i).filter(z=>o==="すべて"?!0:z.payment===o).filter(z=>O?`${z.id} ${z.ticket} ${z.callNumber} ${z.items}`.toLowerCase().includes(O):!0).sort((z,H)=>{const q=(j.get(z.progress)??0)-(j.get(H.progress)??0);if(q!==0)return q;const N=z.createdAtDate?.getTime()??0;return(H.createdAtDate?.getTime()??0)-N})},[u,o,i,r]),S=P.useCallback(async O=>{const j=A0(O.progress);if(j){g(O.id),E(null);try{await Ga(O.id,O.ticket,{payment:O.payment,progress:j})}catch(z){console.error("ステータス更新に失敗しました",z),E("ステータスの更新に失敗しました。通信環境をご確認ください。")}finally{g(null)}}},[]),D=P.useCallback(async O=>{const j=b0(O.progress);if(j){g(O.id),E(null);try{await Ga(O.id,O.ticket,{payment:O.payment,progress:j})}catch(z){console.error("ステータスを戻せませんでした",z),E("ステータスを戻せませんでした。もう一度お試しください。")}finally{g(null)}}},[]),T=P.useCallback(async()=>{E(null);try{await v3()}catch(O){console.error("CSV 出力に失敗しました",O),E("CSV の出力に失敗しました。通信環境をご確認ください。")}},[]);return e?m.jsx("p",{children:"注文データを読み込み中です…"}):m.jsxs("div",{children:[m.jsxs("div",{className:"admin-toolbar",role:"region","aria-label":"フィルタ",children:[m.jsxs("div",{className:"field",children:[m.jsx("label",{htmlFor:"order-progress",children:"進捗"}),m.jsxs("select",{id:"order-progress",value:i,onChange:O=>a(O.target.value),children:[m.jsx("option",{value:"すべて",children:"すべて"}),_A.map(O=>m.jsx("option",{value:O,children:O},O))]})]}),m.jsxs("div",{className:"field",children:[m.jsx("label",{htmlFor:"order-payment",children:"支払い"}),m.jsxs("select",{id:"order-payment",value:o,onChange:O=>c(O.target.value),children:[m.jsx("option",{value:"すべて",children:"すべて"}),F9.map(O=>m.jsx("option",{value:O,children:O},O))]})]}),m.jsxs("div",{className:"field",style:{flex:"1 1 240px"},children:[m.jsx("label",{htmlFor:"order-search",children:"検索"}),m.jsx("input",{id:"order-search",type:"search",placeholder:"呼出番号・確認コード・注文番号",value:u,onChange:O=>h(O.target.value)})]}),m.jsx("button",{type:"button",className:"admin-secondary-button",disabled:w.length===0,onClick:()=>{const O=w[0];O&&S(O).catch(()=>{})},children:"選択行を進捗更新"}),m.jsx("button",{type:"button",className:"admin-primary-button",onClick:()=>void T(),disabled:r.length===0,children:"CSV 出力"})]}),t&&m.jsx("p",{className:"admin-error",role:"alert",children:"データの取得に失敗しました。ページを再読み込みしてください。"}),_&&m.jsx("p",{className:"admin-error",role:"alert",children:_}),m.jsx("div",{style:{overflowX:"auto"},children:m.jsxs("table",{className:"admin-table",children:[m.jsx("thead",{children:m.jsxs("tr",{children:[m.jsx("th",{scope:"col",children:"時刻"}),m.jsx("th",{scope:"col",children:"注文番号"}),m.jsx("th",{scope:"col",children:"呼出番号"}),m.jsx("th",{scope:"col",children:"進捗確認コード"}),m.jsx("th",{scope:"col",children:"品目"}),m.jsx("th",{scope:"col",children:"合計"}),m.jsx("th",{scope:"col",children:"支払い"}),m.jsx("th",{scope:"col",children:"進捗"}),m.jsx("th",{scope:"col",children:"操作"})]})}),m.jsx("tbody",{children:w.map(O=>m.jsxs("tr",{children:[m.jsx("td",{children:O.createdAt}),m.jsx("td",{children:O.id}),m.jsx("td",{children:O.callNumber}),m.jsx("td",{children:O.ticket}),m.jsx("td",{children:O.items}),m.jsxs("td",{children:[O.total.toLocaleString()," 円"]}),m.jsx("td",{children:m.jsx("span",{className:O.payment==="支払い済み"?"admin-status-badge success":O.payment==="未払い"?"admin-status-badge warning":"admin-status-badge neutral",children:O.payment})}),m.jsx("td",{children:m.jsx("span",{className:"admin-status-badge",children:O.progress})}),m.jsx("td",{children:m.jsxs("div",{style:{display:"flex",gap:8},children:[m.jsx("button",{type:"button",className:"admin-secondary-button",onClick:()=>S(O),disabled:p===O.id||A0(O.progress)===null,children:"次のステータスへ"}),m.jsx("button",{type:"button",className:"admin-secondary-button",onClick:()=>D(O),disabled:p===O.id||b0(O.progress)===null,children:"戻す"})]})})]},O.id))})]})}),w.length===0&&m.jsx("p",{style:{marginTop:18,color:"#64748b"},children:"該当する注文はありません。"}),m.jsx("p",{style:{marginTop:18,color:"#64748b"},children:"Firestore の注文データをリアルタイムに表示しています。操作すると全スタッフに即時反映されます。"})]})}function dP(n,e){return n===0?"is-zero":e==="ready"?"is-complete":"is-pending"}function If(n){const e=n.raw.items??{},{list:t,map:r}=uo();return t.map(i=>{const a=e[i.key]??0,o=t7(i.key),c=o?n.platingStatus[o]??"ready":"ready",u=dP(a,c);return{key:i.key,label:tf(i.key,r[i.key].label),quantity:a,stateClass:u}})}function nv({entries:n,showTotal:e=!0,totalAriaLabel:t="合計数量",variant:r="default",className:i}){const a=n.reduce((c,u)=>c+u.quantity,0),o=["admin-order-items-inline",r==="compact"?"compact":null,i].filter(Boolean).join(" ");return m.jsxs("div",{className:o,children:[m.jsx("div",{className:"admin-production-items-card",role:"presentation",children:m.jsx("div",{className:"admin-production-items-grid",children:n.map(c=>m.jsxs("div",{className:"admin-production-item-cell",children:[m.jsx("span",{className:`admin-production-item-label menu-item-${c.key}`,children:c.label}),m.jsx("span",{className:`admin-production-quantity ${c.stateClass} menu-item-${c.key}`,"data-menu-item":c.key,children:c.quantity})]},c.key))})}),e&&m.jsx("div",{className:"admin-production-total-quantity","aria-label":t,children:a})]})}const pP=[{key:"ordered",label:"受注済み",hint:"受付済み・仕込み待ち",statuses:["受注済み"]},{key:"plating",label:"調理済み",hint:"お渡し待ち",statuses:["調理済み"]}],mP=[{key:"summary",label:"全体",icon:"📋"},...Mi.map(n=>({key:n.key,label:n.label,icon:n.icon}))];function gP(n){return n?Mi.some(e=>e.key===n):!1}const y3=(n,e)=>`${n}:${e}`;function vP(){const n=P.useMemo(()=>{const b=new Date;b.setHours(0,0,0,0);const I=new Date(b);return I.setDate(I.getDate()+1),{start:b,end:I}},[]),{orders:e,loading:t,error:r}=Uc(n),i=P.useMemo(()=>e.map(dp),[e]),[a,o]=P.useState(null),[c,u]=P.useState(null),[h,p]=P.useState(null),[g,_]=Dv(),E=g.get("view"),w=E==="summary"?"summary":gP(E)?E:"summary",S=w==="summary"?null:Mi.find(b=>b.key===w)??null,D=P.useCallback(b=>{p(null),_(I=>{const k=new URLSearchParams(I);return b==="summary"?k.delete("view"):k.set("view",b),k})},[p,_]),T=P.useMemo(()=>pP.map(b=>({...b,orders:i.filter(I=>b.statuses.includes(I.progress)).sort((I,k)=>{const M=I.createdAtDate?.getTime()??0,V=k.createdAtDate?.getTime()??0;return M-V})})),[i]),O=P.useMemo(()=>({ordered:T.find(b=>b.key==="ordered")?.orders.length??0,plating:T.find(b=>b.key==="plating")?.orders.length??0}),[T]),j=P.useMemo(()=>{const b={potaufeu:{pending:[],ready:[]},friedBread:{pending:[],ready:[]}};i.forEach(k=>{if(k.progress==="クローズ")return;const M=k.raw.items??{};Mi.forEach(V=>{if(u3(M,V.key)===0)return;const we=(k.platingStatus[V.key]??"ready")==="ready"?"ready":"pending";b[V.key][we].push(k)})});const I=(k,M)=>(k.createdAtDate?.getTime()??0)-(M.createdAtDate?.getTime()??0);return Mi.forEach(k=>{b[k.key].pending.sort(I),b[k.key].ready.sort(I)}),b},[i]),z=P.useCallback(async b=>{const I=A0(b.progress);if(I){o(b.id),p(null);try{if(b.progress==="受注済み"){const k=EA(b,!0);Object.keys(k).length>0&&await Fm(b.id,b.ticket,k)}await Ga(b.id,b.ticket,{progress:I,payment:b.payment})}catch(k){console.error("ステータス更新に失敗しました",k),p("ステータスの更新に失敗しました。通信環境をご確認ください。")}finally{o(null)}}},[]),H=P.useCallback(async b=>{const I=b0(b.progress);if(I){o(b.id),p(null);try{if(b.progress==="調理済み"&&I==="受注済み"){const k=EA(b,!1);Object.keys(k).length>0&&await Fm(b.id,b.ticket,k)}await Ga(b.id,b.ticket,{progress:I,payment:b.payment})}catch(k){console.error("ステータスを戻せませんでした",k),p("ステータスを戻せませんでした。もう一度お試しください。")}finally{o(null)}}},[]),q=P.useCallback(async(b,I,k)=>{const M=y3(b.id,I);u(M),p(null);try{await Fm(b.id,b.ticket,{[I]:k});const V=b.raw.items??{},L={...b.platingStatus,[I]:k?"ready":"pending"};i7(V,L)&&b.progress==="受注済み"?await Ga(b.id,b.ticket,{progress:"調理済み",payment:b.payment}):!k&&b.progress==="調理済み"&&await Ga(b.id,b.ticket,{progress:"受注済み",payment:b.payment})}catch(V){console.error("盛り付け状況の更新に失敗しました",V),p("盛り付け状況の更新に失敗しました。通信環境をご確認ください。")}finally{u(null)}},[p]),N=P.useCallback(async()=>{p(null);try{await v3()}catch(b){console.error("CSV 出力に失敗しました",b),p("CSV の出力に失敗しました。通信環境をご確認ください。")}},[]);return t?m.jsx("p",{children:"注文データを読み込み中です…"}):m.jsxs("div",{className:"admin-production-page",children:[m.jsxs("div",{className:"admin-production-toolbar",role:"region","aria-label":"現在の注文サマリー",children:[m.jsxs("div",{className:"admin-production-summary",children:[m.jsx("p",{className:"admin-production-summary-title",children:"受注済み"}),m.jsxs("p",{className:"admin-production-summary-count",children:[O.ordered,"件"]}),m.jsx("p",{className:"admin-production-summary-hint",children:"受付済み・仕込み待ち"})]}),m.jsxs("div",{className:"admin-production-summary",children:[m.jsx("p",{className:"admin-production-summary-title",children:"調理済み"}),m.jsxs("p",{className:"admin-production-summary-count",children:[O.plating,"件"]}),m.jsx("p",{className:"admin-production-summary-hint",children:"お渡し待ち／クローズ済み"})]})]}),m.jsx("nav",{className:"admin-production-view-tabs",role:"tablist","aria-label":"盛り付けビュー選択",children:mP.map(b=>{const I=b.key===w,k=b.key!=="summary",M=k?j[b.key].pending.length:0;return m.jsxs("button",{type:"button",role:"tab",className:`admin-production-view-tab${I?" is-active":""}`,"aria-selected":I,onClick:()=>D(b.key),children:[m.jsxs("span",{className:"admin-production-view-tab-label",children:[m.jsx("span",{className:"admin-production-view-tab-icon","aria-hidden":"true",children:b.icon}),m.jsx("span",{className:"admin-production-view-tab-text",children:b.label})]}),k&&M>0&&m.jsx("span",{className:"admin-production-view-tab-count",children:m.jsx("span",{className:"admin-production-badge",children:M})})]},b.key)})}),w==="summary"?m.jsxs("div",{className:"admin-production-table",role:"table","aria-label":"全体の盛り付け状況",children:[m.jsx("div",{className:"admin-production-table-header",role:"row",children:T.map(b=>m.jsxs("div",{className:"admin-production-table-header-cell",role:"columnheader",children:[m.jsxs("div",{children:[m.jsx("h2",{children:b.label}),m.jsx("p",{children:b.hint})]}),m.jsx("span",{className:"admin-production-badge",children:b.orders.length})]},b.key))}),m.jsx("div",{className:"admin-production-table-body",children:T.map(b=>m.jsx("section",{className:"admin-production-table-column","aria-label":b.label,role:"rowgroup",children:m.jsxs("div",{className:"admin-production-table-list",children:[b.orders.map(I=>{const k=!!A0(I.progress),M=!!b0(I.progress);return m.jsx(yP,{order:I,onForward:()=>{z(I)},onBack:()=>{H(I)},allowForward:k,allowBack:M,busy:a===I.id},I.id)}),b.orders.length===0&&m.jsx("p",{className:"admin-production-empty",children:"対象の注文はありません。"})]})},b.key))})]}):S&&m.jsx(_P,{category:S,orders:j[S.key],busyKey:c,onUpdate:(b,I)=>q(b,S.key,I)}),r&&m.jsx("p",{className:"admin-error",role:"alert",children:"データの取得に失敗しました。ページを再読み込みしてください。"}),h&&m.jsx("p",{className:"admin-error",role:"alert",children:h}),m.jsx("div",{style:{marginTop:16},children:m.jsx("button",{type:"button",className:"admin-secondary-button",onClick:()=>void N(),disabled:i.length===0,children:"CSV 出力"})})]})}function yP({order:n,onForward:e,onBack:t,allowForward:r,allowBack:i,busy:a}){if(n.progress==="調理済み"||n.progress==="クローズ")return m.jsx("article",{className:"admin-production-row admin-production-row--compact",children:m.jsx("div",{className:"admin-production-row-main",children:m.jsxs("div",{className:"admin-production-row-compact",children:[m.jsx("span",{className:"admin-payment-ticket badge admin-production-ticket-compact","aria-label":`呼出番号 ${n.callNumber}`,children:n.callNumber}),m.jsxs("div",{className:"admin-production-row-actions admin-production-row-actions--compact",children:[m.jsx("button",{type:"button",className:"admin-production-button ghost",onClick:t,disabled:!i||a,children:"← 戻す"}),m.jsx("button",{type:"button",className:"admin-production-button primary",onClick:e,disabled:!r||a,children:"進める →"})]})]})})});const c=If(n),u=c.reduce((h,p)=>h+p.quantity,0);return m.jsx("article",{className:"admin-production-row",children:m.jsx("div",{className:"admin-production-row-main",children:m.jsxs("div",{className:"admin-production-row-inline",children:[m.jsx("div",{className:"admin-production-ticket-block","aria-label":`呼出番号 ${n.callNumber}`,children:m.jsx("span",{className:"admin-payment-ticket badge",children:n.callNumber})}),m.jsx("div",{className:"admin-production-items-card",role:"presentation",children:m.jsx("div",{className:"admin-production-items-grid",children:c.map(h=>m.jsxs("div",{className:"admin-production-item-cell",children:[m.jsx("span",{className:"admin-production-item-label",children:h.label}),m.jsx("span",{className:`admin-production-quantity ${h.stateClass}`,children:h.quantity})]},h.key))})}),m.jsx("div",{className:"admin-production-total-quantity","aria-label":"合計数量",children:u}),m.jsxs("div",{className:"admin-production-row-actions",children:[m.jsx("button",{type:"button",className:"admin-production-button ghost",onClick:t,disabled:!i||a,children:"← 戻す"}),m.jsx("button",{type:"button",className:"admin-production-button primary",onClick:e,disabled:!r||a,children:"進める →"})]})]})})})}function _P({category:n,orders:e,busyKey:t,onUpdate:r}){const i=`${n.label}の盛り付け待ち`,a=`${n.label}の盛り付け完了`;return m.jsxs("div",{className:"admin-production-table",role:"table","aria-label":`${n.label}の盛り付け状況`,children:[m.jsxs("div",{className:"admin-production-table-header",role:"row",children:[m.jsxs("div",{className:"admin-production-table-header-cell",role:"columnheader",children:[m.jsxs("div",{children:[m.jsx("h2",{children:i}),m.jsx("p",{children:"キッチンから受け取った順に表示されます。"})]}),m.jsx("span",{className:"admin-production-badge",children:e.pending.length})]}),m.jsxs("div",{className:"admin-production-table-header-cell",role:"columnheader",children:[m.jsxs("div",{children:[m.jsx("h2",{children:a}),m.jsx("p",{children:"盛り付け済みで引き渡し待ちの注文です。"})]}),m.jsx("span",{className:"admin-production-badge",children:e.ready.length})]})]}),m.jsxs("div",{className:"admin-production-table-body",children:[m.jsx("section",{className:"admin-production-table-column","aria-label":i,role:"rowgroup",children:m.jsxs("div",{className:"admin-production-table-list",children:[e.pending.map(o=>m.jsx(xA,{order:o,category:n,status:"pending",busyKey:t,onUpdate:c=>r(o,c)},o.id)),e.pending.length===0&&m.jsx("p",{className:"admin-production-empty",children:"盛り付け待ちの注文はありません。"})]})}),m.jsx("section",{className:"admin-production-table-column","aria-label":a,role:"rowgroup",children:m.jsxs("div",{className:"admin-production-table-list",children:[e.ready.map(o=>m.jsx(xA,{order:o,category:n,status:"ready",busyKey:t,onUpdate:c=>r(o,c)},o.id)),e.ready.length===0&&m.jsx("p",{className:"admin-production-empty",children:"盛り付け済みの注文はありません。"})]})})]})]})}function xA({order:n,category:e,status:t,busyKey:r,onUpdate:i}){const a=r===y3(n.id,e.key);if(t==="ready")return m.jsx("article",{className:"admin-production-row admin-production-row--compact",children:m.jsx("div",{className:"admin-production-row-main",children:m.jsxs("div",{className:"admin-production-row-compact",children:[m.jsx("span",{className:"admin-payment-ticket badge admin-production-ticket-compact","aria-label":`呼出番号 ${n.callNumber}`,children:n.callNumber}),m.jsx("div",{className:"admin-production-row-actions admin-production-row-actions--compact",children:m.jsx("button",{type:"button",className:"admin-production-button ghost",onClick:()=>{i(!1)},disabled:a,children:"← 未完了に戻す"})})]})})});const o=If(n).filter(u=>e.itemKeys.includes(u.key)),c=o.reduce((u,h)=>u+h.quantity,0);return m.jsx("article",{className:"admin-production-row",children:m.jsx("div",{className:"admin-production-row-main",children:m.jsxs("div",{className:"admin-production-row-inline",children:[m.jsx("div",{className:"admin-production-ticket-block","aria-label":`呼出番号 ${n.callNumber}`,children:m.jsx("span",{className:"admin-payment-ticket badge",children:n.callNumber})}),m.jsx("div",{className:"admin-production-items-card",role:"presentation",children:m.jsx("div",{className:"admin-production-items-grid",children:o.map(u=>m.jsxs("div",{className:"admin-production-item-cell",children:[m.jsx("span",{className:"admin-production-item-label",children:u.label}),m.jsx("span",{className:`admin-production-quantity ${u.stateClass}`,children:u.quantity})]},u.key))})}),m.jsx("div",{className:"admin-production-total-quantity","aria-label":"対象数量",children:c}),m.jsx("div",{className:"admin-production-row-actions",children:m.jsx("button",{type:"button",className:"admin-production-button primary",onClick:()=>{i(!0)},disabled:a,children:"盛り付け完了 →"})})]})})})}function EA(n,e){const t=n.raw.items??{},r={};return Mi.forEach(i=>{u3(t,i.key)>0&&(r[i.key]=e)}),r}function xP(n,e){var t=Object.setPrototypeOf;t?t(n,e):n.__proto__=e}function EP(n,e){e===void 0&&(e=n.constructor);var t=Error.captureStackTrace;t&&t(n,e)}var wP=(function(){var n=function(t,r){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(i[o]=a[o])},n(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),AP=(function(n){wP(e,n);function e(t,r){var i=this.constructor,a=n.call(this,t,r)||this;return Object.defineProperty(a,"name",{value:i.name,enumerable:!1,configurable:!0}),xP(a,i.prototype),EP(a),a}return e})(Error),bP=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Dr=(function(n){bP(e,n);function e(t){t===void 0&&(t=void 0);var r=n.call(this,t)||this;return r.message=t,r}return e.prototype.getKind=function(){var t=this.constructor;return t.kind},e.kind="Exception",e})(AP),SP=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),fn=(function(n){SP(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="ArgumentException",e})(Dr),CP=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Pe=(function(n){CP(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="IllegalArgumentException",e})(Dr),_3=(function(){function n(e){if(this.binarizer=e,e===null)throw new Pe("Binarizer must be non-null.")}return n.prototype.getWidth=function(){return this.binarizer.getWidth()},n.prototype.getHeight=function(){return this.binarizer.getHeight()},n.prototype.getBlackRow=function(e,t){return this.binarizer.getBlackRow(e,t)},n.prototype.getBlackMatrix=function(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix},n.prototype.isCropSupported=function(){return this.binarizer.getLuminanceSource().isCropSupported()},n.prototype.crop=function(e,t,r,i){var a=this.binarizer.getLuminanceSource().crop(e,t,r,i);return new n(this.binarizer.createBinarizer(a))},n.prototype.isRotateSupported=function(){return this.binarizer.getLuminanceSource().isRotateSupported()},n.prototype.rotateCounterClockwise=function(){var e=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new n(this.binarizer.createBinarizer(e))},n.prototype.rotateCounterClockwise45=function(){var e=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new n(this.binarizer.createBinarizer(e))},n.prototype.toString=function(){try{return this.getBlackMatrix().toString()}catch{return""}},n})(),TP=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),bn=(function(n){TP(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.getChecksumInstance=function(){return new e},e.kind="ChecksumException",e})(Dr),IP=(function(){function n(e){this.source=e}return n.prototype.getLuminanceSource=function(){return this.source},n.prototype.getWidth=function(){return this.source.getWidth()},n.prototype.getHeight=function(){return this.source.getHeight()},n})(),Bt=(function(){function n(){}return n.arraycopy=function(e,t,r,i,a){for(;a--;)r[i++]=e[t++]},n.currentTimeMillis=function(){return Date.now()},n})(),NP=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),jy=(function(n){NP(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="IndexOutOfBoundsException",e})(Dr),RP=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),wA=(function(n){RP(e,n);function e(t,r){t===void 0&&(t=void 0),r===void 0&&(r=void 0);var i=n.call(this,r)||this;return i.index=t,i.message=r,i}return e.kind="ArrayIndexOutOfBoundsException",e})(jy),OP=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Dn=(function(){function n(){}return n.fill=function(e,t){for(var r=0,i=e.length;r<i;r++)e[r]=t},n.fillWithin=function(e,t,r,i){n.rangeCheck(e.length,t,r);for(var a=t;a<r;a++)e[a]=i},n.rangeCheck=function(e,t,r){if(t>r)throw new Pe("fromIndex("+t+") > toIndex("+r+")");if(t<0)throw new wA(t);if(r>e)throw new wA(r)},n.asList=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e},n.create=function(e,t,r){var i=Array.from({length:e});return i.map(function(a){return Array.from({length:t}).fill(r)})},n.createInt32Array=function(e,t,r){var i=Array.from({length:e});return i.map(function(a){return Int32Array.from({length:t}).fill(r)})},n.equals=function(e,t){if(!e||!t||!e.length||!t.length||e.length!==t.length)return!1;for(var r=0,i=e.length;r<i;r++)if(e[r]!==t[r])return!1;return!0},n.hashCode=function(e){var t,r;if(e===null)return 0;var i=1;try{for(var a=OP(e),o=a.next();!o.done;o=a.next()){var c=o.value;i=31*i+c}}catch(u){t={error:u}}finally{try{o&&!o.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}return i},n.fillUint8Array=function(e,t){for(var r=0;r!==e.length;r++)e[r]=t},n.copyOf=function(e,t){return e.slice(0,t)},n.copyOfUint8Array=function(e,t){if(e.length<=t){var r=new Uint8Array(t);return r.set(e),r}return e.slice(0,t)},n.copyOfRange=function(e,t,r){var i=r-t,a=new Int32Array(i);return Bt.arraycopy(e,t,a,0,i),a},n.binarySearch=function(e,t,r){r===void 0&&(r=n.numberComparator);for(var i=0,a=e.length-1;i<=a;){var o=a+i>>1,c=r(t,e[o]);if(c>0)i=o+1;else if(c<0)a=o-1;else return o}return-i-1},n.numberComparator=function(e,t){return e-t},n})(),Je=(function(){function n(){}return n.numberOfTrailingZeros=function(e){var t;if(e===0)return 32;var r=31;return t=e<<16,t!==0&&(r-=16,e=t),t=e<<8,t!==0&&(r-=8,e=t),t=e<<4,t!==0&&(r-=4,e=t),t=e<<2,t!==0&&(r-=2,e=t),r-(e<<1>>>31)},n.numberOfLeadingZeros=function(e){if(e===0)return 32;var t=1;return e>>>16||(t+=16,e<<=16),e>>>24||(t+=8,e<<=8),e>>>28||(t+=4,e<<=4),e>>>30||(t+=2,e<<=2),t-=e>>>31,t},n.toHexString=function(e){return e.toString(16)},n.toBinaryString=function(e){return String(parseInt(String(e),2))},n.bitCount=function(e){return e=e-(e>>>1&1431655765),e=(e&858993459)+(e>>>2&858993459),e=e+(e>>>4)&252645135,e=e+(e>>>8),e=e+(e>>>16),e&63},n.truncDivision=function(e,t){return Math.trunc(e/t)},n.parseInt=function(e,t){return t===void 0&&(t=void 0),parseInt(e,t)},n.MIN_VALUE_32_BITS=-2147483648,n.MAX_VALUE=Number.MAX_SAFE_INTEGER,n})(),qn=(function(){function n(e,t){e===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=e,t==null?this.bits=n.makeArray(e):this.bits=t)}return n.prototype.getSize=function(){return this.size},n.prototype.getSizeInBytes=function(){return Math.floor((this.size+7)/8)},n.prototype.ensureCapacity=function(e){if(e>this.bits.length*32){var t=n.makeArray(e);Bt.arraycopy(this.bits,0,t,0,this.bits.length),this.bits=t}},n.prototype.get=function(e){return(this.bits[Math.floor(e/32)]&1<<(e&31))!==0},n.prototype.set=function(e){this.bits[Math.floor(e/32)]|=1<<(e&31)},n.prototype.flip=function(e){this.bits[Math.floor(e/32)]^=1<<(e&31)},n.prototype.getNextSet=function(e){var t=this.size;if(e>=t)return t;var r=this.bits,i=Math.floor(e/32),a=r[i];a&=~((1<<(e&31))-1);for(var o=r.length;a===0;){if(++i===o)return t;a=r[i]}var c=i*32+Je.numberOfTrailingZeros(a);return c>t?t:c},n.prototype.getNextUnset=function(e){var t=this.size;if(e>=t)return t;var r=this.bits,i=Math.floor(e/32),a=~r[i];a&=~((1<<(e&31))-1);for(var o=r.length;a===0;){if(++i===o)return t;a=~r[i]}var c=i*32+Je.numberOfTrailingZeros(a);return c>t?t:c},n.prototype.setBulk=function(e,t){this.bits[Math.floor(e/32)]=t},n.prototype.setRange=function(e,t){if(t<e||e<0||t>this.size)throw new Pe;if(t!==e){t--;for(var r=Math.floor(e/32),i=Math.floor(t/32),a=this.bits,o=r;o<=i;o++){var c=o>r?0:e&31,u=o<i?31:t&31,h=(2<<u)-(1<<c);a[o]|=h}}},n.prototype.clear=function(){for(var e=this.bits.length,t=this.bits,r=0;r<e;r++)t[r]=0},n.prototype.isRange=function(e,t,r){if(t<e||e<0||t>this.size)throw new Pe;if(t===e)return!0;t--;for(var i=Math.floor(e/32),a=Math.floor(t/32),o=this.bits,c=i;c<=a;c++){var u=c>i?0:e&31,h=c<a?31:t&31,p=(2<<h)-(1<<u)&4294967295;if((o[c]&p)!==(r?p:0))return!1}return!0},n.prototype.appendBit=function(e){this.ensureCapacity(this.size+1),e&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++},n.prototype.appendBits=function(e,t){if(t<0||t>32)throw new Pe("Num bits must be between 0 and 32");this.ensureCapacity(this.size+t);for(var r=t;r>0;r--)this.appendBit((e>>r-1&1)===1)},n.prototype.appendBitArray=function(e){var t=e.size;this.ensureCapacity(this.size+t);for(var r=0;r<t;r++)this.appendBit(e.get(r))},n.prototype.xor=function(e){if(this.size!==e.size)throw new Pe("Sizes don't match");for(var t=this.bits,r=0,i=t.length;r<i;r++)t[r]^=e.bits[r]},n.prototype.toBytes=function(e,t,r,i){for(var a=0;a<i;a++){for(var o=0,c=0;c<8;c++)this.get(e)&&(o|=1<<7-c),e++;t[r+a]=o}},n.prototype.getBitArray=function(){return this.bits},n.prototype.reverse=function(){for(var e=new Int32Array(this.bits.length),t=Math.floor((this.size-1)/32),r=t+1,i=this.bits,a=0;a<r;a++){var o=i[a];o=o>>1&1431655765|(o&1431655765)<<1,o=o>>2&858993459|(o&858993459)<<2,o=o>>4&252645135|(o&252645135)<<4,o=o>>8&16711935|(o&16711935)<<8,o=o>>16&65535|(o&65535)<<16,e[t-a]=o}if(this.size!==r*32){for(var c=r*32-this.size,u=e[0]>>>c,a=1;a<r;a++){var h=e[a];u|=h<<32-c,e[a-1]=u,u=h>>>c}e[r-1]=u}this.bits=e},n.makeArray=function(e){return new Int32Array(Math.floor((e+31)/32))},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.size===t.size&&Dn.equals(this.bits,t.bits)},n.prototype.hashCode=function(){return 31*this.size+Dn.hashCode(this.bits)},n.prototype.toString=function(){for(var e="",t=0,r=this.size;t<r;t++)(t&7)===0&&(e+=" "),e+=this.get(t)?"X":".";return e},n.prototype.clone=function(){return new n(this.size,this.bits.slice())},n.prototype.toArray=function(){for(var e=[],t=0,r=this.size;t<r;t++)e.push(this.get(t));return e},n})(),rv;(function(n){n[n.OTHER=0]="OTHER",n[n.PURE_BARCODE=1]="PURE_BARCODE",n[n.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",n[n.TRY_HARDER=3]="TRY_HARDER",n[n.CHARACTER_SET=4]="CHARACTER_SET",n[n.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",n[n.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",n[n.ENABLE_CODE_39_EXTENDED_MODE=7]="ENABLE_CODE_39_EXTENDED_MODE",n[n.ASSUME_GS1=8]="ASSUME_GS1",n[n.RETURN_CODABAR_START_END=9]="RETURN_CODABAR_START_END",n[n.NEED_RESULT_POINT_CALLBACK=10]="NEED_RESULT_POINT_CALLBACK",n[n.ALLOWED_EAN_EXTENSIONS=11]="ALLOWED_EAN_EXTENSIONS"})(rv||(rv={}));const Vt=rv;var DP=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),ge=(function(n){DP(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.getFormatInstance=function(){return new e},e.kind="FormatException",e})(Dr),MP=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Ct;(function(n){n[n.Cp437=0]="Cp437",n[n.ISO8859_1=1]="ISO8859_1",n[n.ISO8859_2=2]="ISO8859_2",n[n.ISO8859_3=3]="ISO8859_3",n[n.ISO8859_4=4]="ISO8859_4",n[n.ISO8859_5=5]="ISO8859_5",n[n.ISO8859_6=6]="ISO8859_6",n[n.ISO8859_7=7]="ISO8859_7",n[n.ISO8859_8=8]="ISO8859_8",n[n.ISO8859_9=9]="ISO8859_9",n[n.ISO8859_10=10]="ISO8859_10",n[n.ISO8859_11=11]="ISO8859_11",n[n.ISO8859_13=12]="ISO8859_13",n[n.ISO8859_14=13]="ISO8859_14",n[n.ISO8859_15=14]="ISO8859_15",n[n.ISO8859_16=15]="ISO8859_16",n[n.SJIS=16]="SJIS",n[n.Cp1250=17]="Cp1250",n[n.Cp1251=18]="Cp1251",n[n.Cp1252=19]="Cp1252",n[n.Cp1256=20]="Cp1256",n[n.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",n[n.UTF8=22]="UTF8",n[n.ASCII=23]="ASCII",n[n.Big5=24]="Big5",n[n.GB18030=25]="GB18030",n[n.EUC_KR=26]="EUC_KR"})(Ct||(Ct={}));var On=(function(){function n(e,t,r){for(var i,a,o=[],c=3;c<arguments.length;c++)o[c-3]=arguments[c];this.valueIdentifier=e,this.name=r,typeof t=="number"?this.values=Int32Array.from([t]):this.values=t,this.otherEncodingNames=o,n.VALUE_IDENTIFIER_TO_ECI.set(e,this),n.NAME_TO_ECI.set(r,this);for(var u=this.values,h=0,p=u.length;h!==p;h++){var g=u[h];n.VALUES_TO_ECI.set(g,this)}try{for(var _=MP(o),E=_.next();!E.done;E=_.next()){var w=E.value;n.NAME_TO_ECI.set(w,this)}}catch(S){i={error:S}}finally{try{E&&!E.done&&(a=_.return)&&a.call(_)}finally{if(i)throw i.error}}}return n.prototype.getValueIdentifier=function(){return this.valueIdentifier},n.prototype.getName=function(){return this.name},n.prototype.getValue=function(){return this.values[0]},n.getCharacterSetECIByValue=function(e){if(e<0||e>=900)throw new ge("incorect value");var t=n.VALUES_TO_ECI.get(e);if(t===void 0)throw new ge("incorect value");return t},n.getCharacterSetECIByName=function(e){var t=n.NAME_TO_ECI.get(e);if(t===void 0)throw new ge("incorect value");return t},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.getName()===t.getName()},n.VALUE_IDENTIFIER_TO_ECI=new Map,n.VALUES_TO_ECI=new Map,n.NAME_TO_ECI=new Map,n.Cp437=new n(Ct.Cp437,Int32Array.from([0,2]),"Cp437"),n.ISO8859_1=new n(Ct.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),n.ISO8859_2=new n(Ct.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),n.ISO8859_3=new n(Ct.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),n.ISO8859_4=new n(Ct.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),n.ISO8859_5=new n(Ct.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),n.ISO8859_6=new n(Ct.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),n.ISO8859_7=new n(Ct.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),n.ISO8859_8=new n(Ct.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),n.ISO8859_9=new n(Ct.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),n.ISO8859_10=new n(Ct.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),n.ISO8859_11=new n(Ct.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),n.ISO8859_13=new n(Ct.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),n.ISO8859_14=new n(Ct.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),n.ISO8859_15=new n(Ct.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),n.ISO8859_16=new n(Ct.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),n.SJIS=new n(Ct.SJIS,20,"SJIS","Shift_JIS"),n.Cp1250=new n(Ct.Cp1250,21,"Cp1250","windows-1250"),n.Cp1251=new n(Ct.Cp1251,22,"Cp1251","windows-1251"),n.Cp1252=new n(Ct.Cp1252,23,"Cp1252","windows-1252"),n.Cp1256=new n(Ct.Cp1256,24,"Cp1256","windows-1256"),n.UnicodeBigUnmarked=new n(Ct.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),n.UTF8=new n(Ct.UTF8,26,"UTF8","UTF-8"),n.ASCII=new n(Ct.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),n.Big5=new n(Ct.Big5,28,"Big5"),n.GB18030=new n(Ct.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),n.EUC_KR=new n(Ct.EUC_KR,30,"EUC_KR","EUC-KR"),n})(),PP=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Kd=(function(n){PP(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="UnsupportedOperationException",e})(Dr),ui=(function(){function n(){}return n.decode=function(e,t){var r=this.encodingName(t);return this.customDecoder?this.customDecoder(e,r):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(r)?this.decodeFallback(e,r):new TextDecoder(r).decode(e)},n.shouldDecodeOnFallback=function(e){return!n.isBrowser()&&e==="ISO-8859-1"},n.encode=function(e,t){var r=this.encodingName(t);return this.customEncoder?this.customEncoder(e,r):typeof TextEncoder>"u"?this.encodeFallback(e):new TextEncoder().encode(e)},n.isBrowser=function(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"},n.encodingName=function(e){return typeof e=="string"?e:e.getName()},n.encodingCharacterSet=function(e){return e instanceof On?e:On.getCharacterSetECIByName(e)},n.decodeFallback=function(e,t){var r=this.encodingCharacterSet(t);if(n.isDecodeFallbackSupported(r)){for(var i="",a=0,o=e.length;a<o;a++){var c=e[a].toString(16);c.length<2&&(c="0"+c),i+="%"+c}return decodeURIComponent(i)}if(r.equals(On.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(e.buffer));throw new Kd("Encoding "+this.encodingName(t)+" not supported by fallback.")},n.isDecodeFallbackSupported=function(e){return e.equals(On.UTF8)||e.equals(On.ISO8859_1)||e.equals(On.ASCII)},n.encodeFallback=function(e){for(var t=btoa(unescape(encodeURIComponent(e))),r=t.split(""),i=[],a=0;a<r.length;a++)i.push(r[a].charCodeAt(0));return new Uint8Array(i)},n})(),ut=(function(){function n(){}return n.castAsNonUtf8Char=function(e,t){t===void 0&&(t=null);var r=t?t.getName():this.ISO88591;return ui.decode(new Uint8Array([e]),r)},n.guessEncoding=function(e,t){if(t!=null&&t.get(Vt.CHARACTER_SET)!==void 0)return t.get(Vt.CHARACTER_SET).toString();for(var r=e.length,i=!0,a=!0,o=!0,c=0,u=0,h=0,p=0,g=0,_=0,E=0,w=0,S=0,D=0,T=0,O=e.length>3&&e[0]===239&&e[1]===187&&e[2]===191,j=0;j<r&&(i||a||o);j++){var z=e[j]&255;o&&(c>0?(z&128)===0?o=!1:c--:(z&128)!==0&&((z&64)===0?o=!1:(c++,(z&32)===0?u++:(c++,(z&16)===0?h++:(c++,(z&8)===0?p++:o=!1))))),i&&(z>127&&z<160?i=!1:z>159&&(z<192||z===215||z===247)&&T++),a&&(g>0?z<64||z===127||z>252?a=!1:g--:z===128||z===160||z>239?a=!1:z>160&&z<224?(_++,w=0,E++,E>S&&(S=E)):z>127?(g++,E=0,w++,w>D&&(D=w)):(E=0,w=0))}return o&&c>0&&(o=!1),a&&g>0&&(a=!1),o&&(O||u+h+p>0)?n.UTF8:a&&(n.ASSUME_SHIFT_JIS||S>=3||D>=3)?n.SHIFT_JIS:i&&a?S===2&&_===2||T*10>=r?n.SHIFT_JIS:n.ISO88591:i?n.ISO88591:a?n.SHIFT_JIS:o?n.UTF8:n.PLATFORM_DEFAULT_ENCODING},n.format=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var i=-1;function a(c,u,h,p,g,_){if(c==="%%")return"%";if(t[++i]!==void 0){c=p?parseInt(p.substr(1)):void 0;var E=g?parseInt(g.substr(1)):void 0,w;switch(_){case"s":w=t[i];break;case"c":w=t[i][0];break;case"f":w=parseFloat(t[i]).toFixed(c);break;case"p":w=parseFloat(t[i]).toPrecision(c);break;case"e":w=parseFloat(t[i]).toExponential(c);break;case"x":w=parseInt(t[i]).toString(E||16);break;case"d":w=parseFloat(parseInt(t[i],E||10).toPrecision(c)).toFixed(0);break}w=typeof w=="object"?JSON.stringify(w):(+w).toString(E);for(var S=parseInt(h),D=h&&h[0]+""=="0"?"0":" ";w.length<S;)w=u!==void 0?w+D:D+w;return w}}var o=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(o,a)},n.getBytes=function(e,t){return ui.encode(e,t)},n.getCharCode=function(e,t){return t===void 0&&(t=0),e.charCodeAt(t)},n.getCharAt=function(e){return String.fromCharCode(e)},n.SHIFT_JIS=On.SJIS.getName(),n.GB2312="GB2312",n.ISO88591=On.ISO8859_1.getName(),n.EUC_JP="EUC_JP",n.UTF8=On.UTF8.getName(),n.PLATFORM_DEFAULT_ENCODING=n.UTF8,n.ASSUME_SHIFT_JIS=!1,n})(),We=(function(){function n(e){e===void 0&&(e=""),this.value=e}return n.prototype.enableDecoding=function(e){return this.encoding=e,this},n.prototype.append=function(e){return typeof e=="string"?this.value+=e.toString():this.encoding?this.value+=ut.castAsNonUtf8Char(e,this.encoding):this.value+=String.fromCharCode(e),this},n.prototype.appendChars=function(e,t,r){for(var i=t;t<t+r;i++)this.append(e[i]);return this},n.prototype.length=function(){return this.value.length},n.prototype.charAt=function(e){return this.value.charAt(e)},n.prototype.deleteCharAt=function(e){this.value=this.value.substr(0,e)+this.value.substring(e+1)},n.prototype.setCharAt=function(e,t){this.value=this.value.substr(0,e)+t+this.value.substr(e+1)},n.prototype.substring=function(e,t){return this.value.substring(e,t)},n.prototype.setLengthToZero=function(){this.value=""},n.prototype.toString=function(){return this.value},n.prototype.insert=function(e,t){this.value=this.value.substring(0,e)+t+this.value.substring(e)},n})(),ya=(function(){function n(e,t,r,i){if(this.width=e,this.height=t,this.rowSize=r,this.bits=i,t==null&&(t=e),this.height=t,e<1||t<1)throw new Pe("Both dimensions must be greater than 0");r==null&&(r=Math.floor((e+31)/32)),this.rowSize=r,i==null&&(this.bits=new Int32Array(this.rowSize*this.height))}return n.parseFromBooleanArray=function(e){for(var t=e.length,r=e[0].length,i=new n(r,t),a=0;a<t;a++)for(var o=e[a],c=0;c<r;c++)o[c]&&i.set(c,a);return i},n.parseFromString=function(e,t,r){if(e===null)throw new Pe("stringRepresentation cannot be null");for(var i=new Array(e.length),a=0,o=0,c=-1,u=0,h=0;h<e.length;)if(e.charAt(h)===`
`||e.charAt(h)==="\r"){if(a>o){if(c===-1)c=a-o;else if(a-o!==c)throw new Pe("row lengths do not match");o=a,u++}h++}else if(e.substring(h,h+t.length)===t)h+=t.length,i[a]=!0,a++;else if(e.substring(h,h+r.length)===r)h+=r.length,i[a]=!1,a++;else throw new Pe("illegal character encountered: "+e.substring(h));if(a>o){if(c===-1)c=a-o;else if(a-o!==c)throw new Pe("row lengths do not match");u++}for(var p=new n(c,u),g=0;g<a;g++)i[g]&&p.set(Math.floor(g%c),Math.floor(g/c));return p},n.prototype.get=function(e,t){var r=t*this.rowSize+Math.floor(e/32);return(this.bits[r]>>>(e&31)&1)!==0},n.prototype.set=function(e,t){var r=t*this.rowSize+Math.floor(e/32);this.bits[r]|=1<<(e&31)&4294967295},n.prototype.unset=function(e,t){var r=t*this.rowSize+Math.floor(e/32);this.bits[r]&=~(1<<(e&31)&4294967295)},n.prototype.flip=function(e,t){var r=t*this.rowSize+Math.floor(e/32);this.bits[r]^=1<<(e&31)&4294967295},n.prototype.xor=function(e){if(this.width!==e.getWidth()||this.height!==e.getHeight()||this.rowSize!==e.getRowSize())throw new Pe("input matrix dimensions do not match");for(var t=new qn(Math.floor(this.width/32)+1),r=this.rowSize,i=this.bits,a=0,o=this.height;a<o;a++)for(var c=a*r,u=e.getRow(a,t).getBitArray(),h=0;h<r;h++)i[c+h]^=u[h]},n.prototype.clear=function(){for(var e=this.bits,t=e.length,r=0;r<t;r++)e[r]=0},n.prototype.setRegion=function(e,t,r,i){if(t<0||e<0)throw new Pe("Left and top must be nonnegative");if(i<1||r<1)throw new Pe("Height and width must be at least 1");var a=e+r,o=t+i;if(o>this.height||a>this.width)throw new Pe("The region must fit inside the matrix");for(var c=this.rowSize,u=this.bits,h=t;h<o;h++)for(var p=h*c,g=e;g<a;g++)u[p+Math.floor(g/32)]|=1<<(g&31)&4294967295},n.prototype.getRow=function(e,t){t==null||t.getSize()<this.width?t=new qn(this.width):t.clear();for(var r=this.rowSize,i=this.bits,a=e*r,o=0;o<r;o++)t.setBulk(o*32,i[a+o]);return t},n.prototype.setRow=function(e,t){Bt.arraycopy(t.getBitArray(),0,this.bits,e*this.rowSize,this.rowSize)},n.prototype.rotate180=function(){for(var e=this.getWidth(),t=this.getHeight(),r=new qn(e),i=new qn(e),a=0,o=Math.floor((t+1)/2);a<o;a++)r=this.getRow(a,r),i=this.getRow(t-1-a,i),r.reverse(),i.reverse(),this.setRow(a,i),this.setRow(t-1-a,r)},n.prototype.getEnclosingRectangle=function(){for(var e=this.width,t=this.height,r=this.rowSize,i=this.bits,a=e,o=t,c=-1,u=-1,h=0;h<t;h++)for(var p=0;p<r;p++){var g=i[h*r+p];if(g!==0){if(h<o&&(o=h),h>u&&(u=h),p*32<a){for(var _=0;(g<<31-_&4294967295)===0;)_++;p*32+_<a&&(a=p*32+_)}if(p*32+31>c){for(var _=31;!(g>>>_);)_--;p*32+_>c&&(c=p*32+_)}}}return c<a||u<o?null:Int32Array.from([a,o,c-a+1,u-o+1])},n.prototype.getTopLeftOnBit=function(){for(var e=this.rowSize,t=this.bits,r=0;r<t.length&&t[r]===0;)r++;if(r===t.length)return null;for(var i=r/e,a=r%e*32,o=t[r],c=0;(o<<31-c&4294967295)===0;)c++;return a+=c,Int32Array.from([a,i])},n.prototype.getBottomRightOnBit=function(){for(var e=this.rowSize,t=this.bits,r=t.length-1;r>=0&&t[r]===0;)r--;if(r<0)return null;for(var i=Math.floor(r/e),a=Math.floor(r%e)*32,o=t[r],c=31;!(o>>>c);)c--;return a+=c,Int32Array.from([a,i])},n.prototype.getWidth=function(){return this.width},n.prototype.getHeight=function(){return this.height},n.prototype.getRowSize=function(){return this.rowSize},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.width===t.width&&this.height===t.height&&this.rowSize===t.rowSize&&Dn.equals(this.bits,t.bits)},n.prototype.hashCode=function(){var e=this.width;return e=31*e+this.width,e=31*e+this.height,e=31*e+this.rowSize,e=31*e+Dn.hashCode(this.bits),e},n.prototype.toString=function(e,t,r){return e===void 0&&(e="X "),t===void 0&&(t="  "),r===void 0&&(r=`
`),this.buildToString(e,t,r)},n.prototype.buildToString=function(e,t,r){for(var i=new We,a=0,o=this.height;a<o;a++){for(var c=0,u=this.width;c<u;c++)i.append(this.get(c,a)?e:t);i.append(r)}return i.toString()},n.prototype.clone=function(){return new n(this.width,this.height,this.rowSize,this.bits.slice())},n})(),kP=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),ae=(function(n){kP(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.getNotFoundInstance=function(){return new e},e.kind="NotFoundException",e})(Dr),LP=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),jP=(function(n){LP(e,n);function e(t){var r=n.call(this,t)||this;return r.luminances=e.EMPTY,r.buckets=new Int32Array(e.LUMINANCE_BUCKETS),r}return e.prototype.getBlackRow=function(t,r){var i=this.getLuminanceSource(),a=i.getWidth();r==null||r.getSize()<a?r=new qn(a):r.clear(),this.initArrays(a);for(var o=i.getRow(t,this.luminances),c=this.buckets,u=0;u<a;u++)c[(o[u]&255)>>e.LUMINANCE_SHIFT]++;var h=e.estimateBlackPoint(c);if(a<3)for(var u=0;u<a;u++)(o[u]&255)<h&&r.set(u);else for(var p=o[0]&255,g=o[1]&255,u=1;u<a-1;u++){var _=o[u+1]&255;(g*4-p-_)/2<h&&r.set(u),p=g,g=_}return r},e.prototype.getBlackMatrix=function(){var t=this.getLuminanceSource(),r=t.getWidth(),i=t.getHeight(),a=new ya(r,i);this.initArrays(r);for(var o=this.buckets,c=1;c<5;c++)for(var u=Math.floor(i*c/5),h=t.getRow(u,this.luminances),p=Math.floor(r*4/5),g=Math.floor(r/5);g<p;g++){var _=h[g]&255;o[_>>e.LUMINANCE_SHIFT]++}for(var E=e.estimateBlackPoint(o),w=t.getMatrix(),c=0;c<i;c++)for(var S=c*r,g=0;g<r;g++){var _=w[S+g]&255;_<E&&a.set(g,c)}return a},e.prototype.createBinarizer=function(t){return new e(t)},e.prototype.initArrays=function(t){this.luminances.length<t&&(this.luminances=new Uint8ClampedArray(t));for(var r=this.buckets,i=0;i<e.LUMINANCE_BUCKETS;i++)r[i]=0},e.estimateBlackPoint=function(t){for(var r=t.length,i=0,a=0,o=0,c=0;c<r;c++)t[c]>o&&(a=c,o=t[c]),t[c]>i&&(i=t[c]);for(var u=0,h=0,c=0;c<r;c++){var p=c-a,g=t[c]*p*p;g>h&&(u=c,h=g)}if(a>u){var _=a;a=u,u=_}if(u-a<=r/16)throw new ae;for(var E=u-1,w=-1,c=u-1;c>a;c--){var S=c-a,g=S*S*(u-c)*(i-t[c]);g>w&&(E=c,w=g)}return E<<e.LUMINANCE_SHIFT},e.LUMINANCE_BITS=5,e.LUMINANCE_SHIFT=8-e.LUMINANCE_BITS,e.LUMINANCE_BUCKETS=1<<e.LUMINANCE_BITS,e.EMPTY=Uint8ClampedArray.from([0]),e})(IP),BP=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),x3=(function(n){BP(e,n);function e(t){var r=n.call(this,t)||this;return r.matrix=null,r}return e.prototype.getBlackMatrix=function(){if(this.matrix!==null)return this.matrix;var t=this.getLuminanceSource(),r=t.getWidth(),i=t.getHeight();if(r>=e.MINIMUM_DIMENSION&&i>=e.MINIMUM_DIMENSION){var a=t.getMatrix(),o=r>>e.BLOCK_SIZE_POWER;(r&e.BLOCK_SIZE_MASK)!==0&&o++;var c=i>>e.BLOCK_SIZE_POWER;(i&e.BLOCK_SIZE_MASK)!==0&&c++;var u=e.calculateBlackPoints(a,o,c,r,i),h=new ya(r,i);e.calculateThresholdForBlock(a,o,c,r,i,u,h),this.matrix=h}else this.matrix=n.prototype.getBlackMatrix.call(this);return this.matrix},e.prototype.createBinarizer=function(t){return new e(t)},e.calculateThresholdForBlock=function(t,r,i,a,o,c,u){for(var h=o-e.BLOCK_SIZE,p=a-e.BLOCK_SIZE,g=0;g<i;g++){var _=g<<e.BLOCK_SIZE_POWER;_>h&&(_=h);for(var E=e.cap(g,2,i-3),w=0;w<r;w++){var S=w<<e.BLOCK_SIZE_POWER;S>p&&(S=p);for(var D=e.cap(w,2,r-3),T=0,O=-2;O<=2;O++){var j=c[E+O];T+=j[D-2]+j[D-1]+j[D]+j[D+1]+j[D+2]}var z=T/25;e.thresholdBlock(t,S,_,z,a,u)}}},e.cap=function(t,r,i){return t<r?r:t>i?i:t},e.thresholdBlock=function(t,r,i,a,o,c){for(var u=0,h=i*o+r;u<e.BLOCK_SIZE;u++,h+=o)for(var p=0;p<e.BLOCK_SIZE;p++)(t[h+p]&255)<=a&&c.set(r+p,i+u)},e.calculateBlackPoints=function(t,r,i,a,o){for(var c=o-e.BLOCK_SIZE,u=a-e.BLOCK_SIZE,h=new Array(i),p=0;p<i;p++){h[p]=new Int32Array(r);var g=p<<e.BLOCK_SIZE_POWER;g>c&&(g=c);for(var _=0;_<r;_++){var E=_<<e.BLOCK_SIZE_POWER;E>u&&(E=u);for(var w=0,S=255,D=0,T=0,O=g*a+E;T<e.BLOCK_SIZE;T++,O+=a){for(var j=0;j<e.BLOCK_SIZE;j++){var z=t[O+j]&255;w+=z,z<S&&(S=z),z>D&&(D=z)}if(D-S>e.MIN_DYNAMIC_RANGE)for(T++,O+=a;T<e.BLOCK_SIZE;T++,O+=a)for(var j=0;j<e.BLOCK_SIZE;j++)w+=t[O+j]&255}var H=w>>e.BLOCK_SIZE_POWER*2;if(D-S<=e.MIN_DYNAMIC_RANGE&&(H=S/2,p>0&&_>0)){var q=(h[p-1][_]+2*h[p][_-1]+h[p-1][_-1])/4;S<q&&(H=q)}h[p][_]=H}}return h},e.BLOCK_SIZE_POWER=3,e.BLOCK_SIZE=1<<e.BLOCK_SIZE_POWER,e.BLOCK_SIZE_MASK=e.BLOCK_SIZE-1,e.MINIMUM_DIMENSION=e.BLOCK_SIZE*5,e.MIN_DYNAMIC_RANGE=24,e})(jP),$f=(function(){function n(e,t){this.width=e,this.height=t}return n.prototype.getWidth=function(){return this.width},n.prototype.getHeight=function(){return this.height},n.prototype.isCropSupported=function(){return!1},n.prototype.crop=function(e,t,r,i){throw new Kd("This luminance source does not support cropping.")},n.prototype.isRotateSupported=function(){return!1},n.prototype.rotateCounterClockwise=function(){throw new Kd("This luminance source does not support rotation by 90 degrees.")},n.prototype.rotateCounterClockwise45=function(){throw new Kd("This luminance source does not support rotation by 45 degrees.")},n.prototype.toString=function(){for(var e=new Uint8ClampedArray(this.width),t=new We,r=0;r<this.height;r++){for(var i=this.getRow(r,e),a=0;a<this.width;a++){var o=i[a]&255,c=void 0;o<64?c="#":o<128?c="+":o<192?c=".":c=" ",t.append(c)}t.append(`
`)}return t.toString()},n})(),VP=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),pp=(function(n){VP(e,n);function e(t){var r=n.call(this,t.getWidth(),t.getHeight())||this;return r.delegate=t,r}return e.prototype.getRow=function(t,r){for(var i=this.delegate.getRow(t,r),a=this.getWidth(),o=0;o<a;o++)i[o]=255-(i[o]&255);return i},e.prototype.getMatrix=function(){for(var t=this.delegate.getMatrix(),r=this.getWidth()*this.getHeight(),i=new Uint8ClampedArray(r),a=0;a<r;a++)i[a]=255-(t[a]&255);return i},e.prototype.isCropSupported=function(){return this.delegate.isCropSupported()},e.prototype.crop=function(t,r,i,a){return new e(this.delegate.crop(t,r,i,a))},e.prototype.isRotateSupported=function(){return this.delegate.isRotateSupported()},e.prototype.invert=function(){return this.delegate},e.prototype.rotateCounterClockwise=function(){return new e(this.delegate.rotateCounterClockwise())},e.prototype.rotateCounterClockwise45=function(){return new e(this.delegate.rotateCounterClockwise45())},e})($f),FP=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),UP=(function(n){FP(e,n);function e(t,r){r===void 0&&(r=!1);var i=n.call(this,t.width,t.height)||this;return i.canvas=t,i.tempCanvasElement=null,i.buffer=e.makeBufferFromCanvasImageData(t,r),i}return e.makeBufferFromCanvasImageData=function(t,r){r===void 0&&(r=!1);var i=t.getContext("2d").getImageData(0,0,t.width,t.height);return e.toGrayscaleBuffer(i.data,t.width,t.height,r)},e.toGrayscaleBuffer=function(t,r,i,a){a===void 0&&(a=!1);var o=new Uint8ClampedArray(r*i);if(e.FRAME_INDEX=!e.FRAME_INDEX,e.FRAME_INDEX||!a)for(var c=0,u=0,h=t.length;c<h;c+=4,u++){var p=void 0,g=t[c+3];if(g===0)p=255;else{var _=t[c],E=t[c+1],w=t[c+2];p=306*_+601*E+117*w+512>>10}o[u]=p}else for(var c=0,u=0,S=t.length;c<S;c+=4,u++){var p=void 0,g=t[c+3];if(g===0)p=255;else{var _=t[c],E=t[c+1],w=t[c+2];p=306*_+601*E+117*w+512>>10}o[u]=255-p}return o},e.prototype.getRow=function(t,r){if(t<0||t>=this.getHeight())throw new Pe("Requested row is outside the image: "+t);var i=this.getWidth(),a=t*i;return r===null?r=this.buffer.slice(a,a+i):(r.length<i&&(r=new Uint8ClampedArray(i)),r.set(this.buffer.slice(a,a+i))),r},e.prototype.getMatrix=function(){return this.buffer},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(t,r,i,a){return n.prototype.crop.call(this,t,r,i,a),this},e.prototype.isRotateSupported=function(){return!0},e.prototype.rotateCounterClockwise=function(){return this.rotate(-90),this},e.prototype.rotateCounterClockwise45=function(){return this.rotate(-45),this},e.prototype.getTempCanvasElement=function(){if(this.tempCanvasElement===null){var t=this.canvas.ownerDocument.createElement("canvas");t.width=this.canvas.width,t.height=this.canvas.height,this.tempCanvasElement=t}return this.tempCanvasElement},e.prototype.rotate=function(t){var r=this.getTempCanvasElement(),i=r.getContext("2d"),a=t*e.DEGREE_TO_RADIANS,o=this.canvas.width,c=this.canvas.height,u=Math.ceil(Math.abs(Math.cos(a))*o+Math.abs(Math.sin(a))*c),h=Math.ceil(Math.abs(Math.sin(a))*o+Math.abs(Math.cos(a))*c);return r.width=u,r.height=h,i.translate(u/2,h/2),i.rotate(a),i.drawImage(this.canvas,o/-2,c/-2),this.buffer=e.makeBufferFromCanvasImageData(r),this},e.prototype.invert=function(){return new pp(this)},e.DEGREE_TO_RADIANS=Math.PI/180,e.FRAME_INDEX=!0,e})($f),zP=(function(){function n(e,t,r){this.deviceId=e,this.label=t,this.kind="videoinput",this.groupId=r||void 0}return n.prototype.toJSON=function(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}},n})(),gr=function(n,e,t,r){function i(a){return a instanceof t?a:new t(function(o){o(a)})}return new(t||(t=Promise))(function(a,o){function c(p){try{h(r.next(p))}catch(g){o(g)}}function u(p){try{h(r.throw(p))}catch(g){o(g)}}function h(p){p.done?a(p.value):i(p.value).then(c,u)}h((r=r.apply(n,e||[])).next())})},vr=function(n,e){var t={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,i,a,o;return o={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function c(h){return function(p){return u([h,p])}}function u(h){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,i&&(a=h[0]&2?i.return:h[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,h[1])).done)return a;switch(i=0,a&&(h=[h[0]&2,a.value]),h[0]){case 0:case 1:a=h;break;case 4:return t.label++,{value:h[1],done:!1};case 5:t.label++,i=h[1],h=[0];continue;case 7:h=t.ops.pop(),t.trys.pop();continue;default:if(a=t.trys,!(a=a.length>0&&a[a.length-1])&&(h[0]===6||h[0]===2)){t=0;continue}if(h[0]===3&&(!a||h[1]>a[0]&&h[1]<a[3])){t.label=h[1];break}if(h[0]===6&&t.label<a[1]){t.label=a[1],a=h;break}if(a&&t.label<a[2]){t.label=a[2],t.ops.push(h);break}a[2]&&t.ops.pop(),t.trys.pop();continue}h=e.call(n,t)}catch(p){h=[6,p],i=0}finally{r=a=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}},HP=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},zc=(function(){function n(e,t,r){t===void 0&&(t=500),this.reader=e,this.timeBetweenScansMillis=t,this._hints=r,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}return Object.defineProperty(n.prototype,"hasNavigator",{get:function(){return typeof navigator<"u"},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isMediaDevicesSuported",{get:function(){return this.hasNavigator&&!!navigator.mediaDevices},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"canEnumerateDevices",{get:function(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"timeBetweenDecodingAttempts",{get:function(){return this._timeBetweenDecodingAttempts},set:function(e){this._timeBetweenDecodingAttempts=e<0?0:e},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"hints",{get:function(){return this._hints},set:function(e){this._hints=e||null},enumerable:!1,configurable:!0}),n.prototype.listVideoInputDevices=function(){return gr(this,void 0,void 0,function(){var e,t,r,i,a,o,c,u,h,p,g,_;return vr(this,function(E){switch(E.label){case 0:if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");return[4,navigator.mediaDevices.enumerateDevices()];case 1:e=E.sent(),t=[];try{for(r=HP(e),i=r.next();!i.done;i=r.next())a=i.value,o=a.kind==="video"?"videoinput":a.kind,o==="videoinput"&&(c=a.deviceId||a.id,u=a.label||"Video device "+(t.length+1),h=a.groupId,p={deviceId:c,label:u,kind:o,groupId:h},t.push(p))}catch(w){g={error:w}}finally{try{i&&!i.done&&(_=r.return)&&_.call(r)}finally{if(g)throw g.error}}return[2,t]}})})},n.prototype.getVideoInputDevices=function(){return gr(this,void 0,void 0,function(){var e;return vr(this,function(t){switch(t.label){case 0:return[4,this.listVideoInputDevices()];case 1:return e=t.sent(),[2,e.map(function(r){return new zP(r.deviceId,r.label)})]}})})},n.prototype.findDeviceById=function(e){return gr(this,void 0,void 0,function(){var t;return vr(this,function(r){switch(r.label){case 0:return[4,this.listVideoInputDevices()];case 1:return t=r.sent(),t?[2,t.find(function(i){return i.deviceId===e})]:[2,null]}})})},n.prototype.decodeFromInputVideoDevice=function(e,t){return gr(this,void 0,void 0,function(){return vr(this,function(r){switch(r.label){case 0:return[4,this.decodeOnceFromVideoDevice(e,t)];case 1:return[2,r.sent()]}})})},n.prototype.decodeOnceFromVideoDevice=function(e,t){return gr(this,void 0,void 0,function(){var r,i;return vr(this,function(a){switch(a.label){case 0:return this.reset(),e?r={deviceId:{exact:e}}:r={facingMode:"environment"},i={video:r},[4,this.decodeOnceFromConstraints(i,t)];case 1:return[2,a.sent()]}})})},n.prototype.decodeOnceFromConstraints=function(e,t){return gr(this,void 0,void 0,function(){var r;return vr(this,function(i){switch(i.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return r=i.sent(),[4,this.decodeOnceFromStream(r,t)];case 2:return[2,i.sent()]}})})},n.prototype.decodeOnceFromStream=function(e,t){return gr(this,void 0,void 0,function(){var r,i;return vr(this,function(a){switch(a.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,t)];case 1:return r=a.sent(),[4,this.decodeOnce(r)];case 2:return i=a.sent(),[2,i]}})})},n.prototype.decodeFromInputVideoDeviceContinuously=function(e,t,r){return gr(this,void 0,void 0,function(){return vr(this,function(i){switch(i.label){case 0:return[4,this.decodeFromVideoDevice(e,t,r)];case 1:return[2,i.sent()]}})})},n.prototype.decodeFromVideoDevice=function(e,t,r){return gr(this,void 0,void 0,function(){var i,a;return vr(this,function(o){switch(o.label){case 0:return e?i={deviceId:{exact:e}}:i={facingMode:"environment"},a={video:i},[4,this.decodeFromConstraints(a,t,r)];case 1:return[2,o.sent()]}})})},n.prototype.decodeFromConstraints=function(e,t,r){return gr(this,void 0,void 0,function(){var i;return vr(this,function(a){switch(a.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return i=a.sent(),[4,this.decodeFromStream(i,t,r)];case 2:return[2,a.sent()]}})})},n.prototype.decodeFromStream=function(e,t,r){return gr(this,void 0,void 0,function(){var i;return vr(this,function(a){switch(a.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,t)];case 1:return i=a.sent(),[4,this.decodeContinuously(i,r)];case 2:return[2,a.sent()]}})})},n.prototype.stopAsyncDecode=function(){this._stopAsyncDecode=!0},n.prototype.stopContinuousDecode=function(){this._stopContinuousDecode=!0},n.prototype.attachStreamToVideo=function(e,t){return gr(this,void 0,void 0,function(){var r;return vr(this,function(i){switch(i.label){case 0:return r=this.prepareVideoElement(t),this.addVideoSource(r,e),this.videoElement=r,this.stream=e,[4,this.playVideoOnLoadAsync(r)];case 1:return i.sent(),[2,r]}})})},n.prototype.playVideoOnLoadAsync=function(e){var t=this;return new Promise(function(r,i){return t.playVideoOnLoad(e,function(){return r()})})},n.prototype.playVideoOnLoad=function(e,t){var r=this;this.videoEndedListener=function(){return r.stopStreams()},this.videoCanPlayListener=function(){return r.tryPlayVideo(e)},e.addEventListener("ended",this.videoEndedListener),e.addEventListener("canplay",this.videoCanPlayListener),e.addEventListener("playing",t),this.tryPlayVideo(e)},n.prototype.isVideoPlaying=function(e){return e.currentTime>0&&!e.paused&&!e.ended&&e.readyState>2},n.prototype.tryPlayVideo=function(e){return gr(this,void 0,void 0,function(){return vr(this,function(t){switch(t.label){case 0:if(this.isVideoPlaying(e))return console.warn("Trying to play video that is already playing."),[2];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,e.play()];case 2:return t.sent(),[3,4];case 3:return t.sent(),console.warn("It was not possible to play the video."),[3,4];case 4:return[2]}})})},n.prototype.getMediaElement=function(e,t){var r=document.getElementById(e);if(!r)throw new fn("element with id '"+e+"' not found");if(r.nodeName.toLowerCase()!==t.toLowerCase())throw new fn("element with id '"+e+"' must be an "+t+" element");return r},n.prototype.decodeFromImage=function(e,t){if(!e&&!t)throw new fn("either imageElement with a src set or an url must be provided");return t&&!e?this.decodeFromImageUrl(t):this.decodeFromImageElement(e)},n.prototype.decodeFromVideo=function(e,t){if(!e&&!t)throw new fn("Either an element with a src set or an URL must be provided");return t&&!e?this.decodeFromVideoUrl(t):this.decodeFromVideoElement(e)},n.prototype.decodeFromVideoContinuously=function(e,t,r){if(e===void 0&&t===void 0)throw new fn("Either an element with a src set or an URL must be provided");return t&&!e?this.decodeFromVideoUrlContinuously(t,r):this.decodeFromVideoElementContinuously(e,r)},n.prototype.decodeFromImageElement=function(e){if(!e)throw new fn("An image element must be provided.");this.reset();var t=this.prepareImageElement(e);this.imageElement=t;var r;return this.isImageLoaded(t)?r=this.decodeOnce(t,!1,!0):r=this._decodeOnLoadImage(t),r},n.prototype.decodeFromVideoElement=function(e){var t=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideo(t)},n.prototype.decodeFromVideoElementContinuously=function(e,t){var r=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideoContinuously(r,t)},n.prototype._decodeFromVideoElementSetup=function(e){if(!e)throw new fn("A video element must be provided.");this.reset();var t=this.prepareVideoElement(e);return this.videoElement=t,t},n.prototype.decodeFromImageUrl=function(e){if(!e)throw new fn("An URL must be provided.");this.reset();var t=this.prepareImageElement();this.imageElement=t;var r=this._decodeOnLoadImage(t);return t.src=e,r},n.prototype.decodeFromVideoUrl=function(e){if(!e)throw new fn("An URL must be provided.");this.reset();var t=this.prepareVideoElement(),r=this.decodeFromVideoElement(t);return t.src=e,r},n.prototype.decodeFromVideoUrlContinuously=function(e,t){if(!e)throw new fn("An URL must be provided.");this.reset();var r=this.prepareVideoElement(),i=this.decodeFromVideoElementContinuously(r,t);return r.src=e,i},n.prototype._decodeOnLoadImage=function(e){var t=this;return new Promise(function(r,i){t.imageLoadedListener=function(){return t.decodeOnce(e,!1,!0).then(r,i)},e.addEventListener("load",t.imageLoadedListener)})},n.prototype._decodeOnLoadVideo=function(e){return gr(this,void 0,void 0,function(){return vr(this,function(t){switch(t.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return t.sent(),[4,this.decodeOnce(e)];case 2:return[2,t.sent()]}})})},n.prototype._decodeOnLoadVideoContinuously=function(e,t){return gr(this,void 0,void 0,function(){return vr(this,function(r){switch(r.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return r.sent(),this.decodeContinuously(e,t),[2]}})})},n.prototype.isImageLoaded=function(e){return!(!e.complete||e.naturalWidth===0)},n.prototype.prepareImageElement=function(e){var t;return typeof e>"u"&&(t=document.createElement("img"),t.width=200,t.height=200),typeof e=="string"&&(t=this.getMediaElement(e,"img")),e instanceof HTMLImageElement&&(t=e),t},n.prototype.prepareVideoElement=function(e){var t;return!e&&typeof document<"u"&&(t=document.createElement("video"),t.width=200,t.height=200),typeof e=="string"&&(t=this.getMediaElement(e,"video")),e instanceof HTMLVideoElement&&(t=e),t.setAttribute("autoplay","true"),t.setAttribute("muted","true"),t.setAttribute("playsinline","true"),t},n.prototype.decodeOnce=function(e,t,r){var i=this;t===void 0&&(t=!0),r===void 0&&(r=!0),this._stopAsyncDecode=!1;var a=function(o,c){if(i._stopAsyncDecode){c(new ae("Video stream has ended before any code could be detected.")),i._stopAsyncDecode=void 0;return}try{var u=i.decode(e);o(u)}catch(_){var h=t&&_ instanceof ae,p=_ instanceof bn||_ instanceof ge,g=p&&r;if(h||g)return setTimeout(a,i._timeBetweenDecodingAttempts,o,c);c(_)}};return new Promise(function(o,c){return a(o,c)})},n.prototype.decodeContinuously=function(e,t){var r=this;this._stopContinuousDecode=!1;var i=function(){if(r._stopContinuousDecode){r._stopContinuousDecode=void 0;return}try{var a=r.decode(e);t(a,null),setTimeout(i,r.timeBetweenScansMillis)}catch(u){t(null,u);var o=u instanceof bn||u instanceof ge,c=u instanceof ae;(o||c)&&setTimeout(i,r._timeBetweenDecodingAttempts)}};i()},n.prototype.decode=function(e){var t=this.createBinaryBitmap(e);return this.decodeBitmap(t)},n.prototype.createBinaryBitmap=function(e){this.getCaptureCanvasContext(e);var t=!1;e instanceof HTMLVideoElement?(this.drawFrameOnCanvas(e),t=!0):this.drawImageOnCanvas(e);var r=this.getCaptureCanvas(e),i=new UP(r,t),a=new x3(i);return new _3(a)},n.prototype.getCaptureCanvasContext=function(e){if(!this.captureCanvasContext){var t=this.getCaptureCanvas(e),r=void 0;try{r=t.getContext("2d",{willReadFrequently:!0})}catch{r=t.getContext("2d")}this.captureCanvasContext=r}return this.captureCanvasContext},n.prototype.getCaptureCanvas=function(e){if(!this.captureCanvas){var t=this.createCaptureCanvas(e);this.captureCanvas=t}return this.captureCanvas},n.prototype.drawFrameOnCanvas=function(e,t,r){t===void 0&&(t={sx:0,sy:0,sWidth:e.videoWidth,sHeight:e.videoHeight,dx:0,dy:0,dWidth:e.videoWidth,dHeight:e.videoHeight}),r===void 0&&(r=this.captureCanvasContext),r.drawImage(e,t.sx,t.sy,t.sWidth,t.sHeight,t.dx,t.dy,t.dWidth,t.dHeight)},n.prototype.drawImageOnCanvas=function(e,t,r){t===void 0&&(t={sx:0,sy:0,sWidth:e.naturalWidth,sHeight:e.naturalHeight,dx:0,dy:0,dWidth:e.naturalWidth,dHeight:e.naturalHeight}),r===void 0&&(r=this.captureCanvasContext),r.drawImage(e,t.sx,t.sy,t.sWidth,t.sHeight,t.dx,t.dy,t.dWidth,t.dHeight)},n.prototype.decodeBitmap=function(e){return this.reader.decode(e,this._hints)},n.prototype.createCaptureCanvas=function(e){if(typeof document>"u")return this._destroyCaptureCanvas(),null;var t=document.createElement("canvas"),r,i;return typeof e<"u"&&(e instanceof HTMLVideoElement?(r=e.videoWidth,i=e.videoHeight):e instanceof HTMLImageElement&&(r=e.naturalWidth||e.width,i=e.naturalHeight||e.height)),t.style.width=r+"px",t.style.height=i+"px",t.width=r,t.height=i,t},n.prototype.stopStreams=function(){this.stream&&(this.stream.getVideoTracks().forEach(function(e){return e.stop()}),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()},n.prototype.reset=function(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()},n.prototype._destroyVideoElement=function(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)},n.prototype._destroyImageElement=function(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)},n.prototype._destroyCaptureCanvas=function(){this.captureCanvasContext=void 0,this.captureCanvas=void 0},n.prototype.addVideoSource=function(e,t){try{e.srcObject=t}catch{e.src=URL.createObjectURL(t)}},n.prototype.cleanVideoSource=function(e){try{e.srcObject=null}catch{e.src=""}this.videoElement.removeAttribute("src")},n})(),hr=(function(){function n(e,t,r,i,a,o){r===void 0&&(r=t==null?0:8*t.length),o===void 0&&(o=Bt.currentTimeMillis()),this.text=e,this.rawBytes=t,this.numBits=r,this.resultPoints=i,this.format=a,this.timestamp=o,this.text=e,this.rawBytes=t,r==null?this.numBits=t==null?0:8*t.length:this.numBits=r,this.resultPoints=i,this.format=a,this.resultMetadata=null,o==null?this.timestamp=Bt.currentTimeMillis():this.timestamp=o}return n.prototype.getText=function(){return this.text},n.prototype.getRawBytes=function(){return this.rawBytes},n.prototype.getNumBits=function(){return this.numBits},n.prototype.getResultPoints=function(){return this.resultPoints},n.prototype.getBarcodeFormat=function(){return this.format},n.prototype.getResultMetadata=function(){return this.resultMetadata},n.prototype.putMetadata=function(e,t){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(e,t)},n.prototype.putAllMetadata=function(e){e!==null&&(this.resultMetadata===null?this.resultMetadata=e:this.resultMetadata=new Map(e))},n.prototype.addResultPoints=function(e){var t=this.resultPoints;if(t===null)this.resultPoints=e;else if(e!==null&&e.length>0){var r=new Array(t.length+e.length);Bt.arraycopy(t,0,r,0,t.length),Bt.arraycopy(e,0,r,t.length,e.length),this.resultPoints=r}},n.prototype.getTimestamp=function(){return this.timestamp},n.prototype.toString=function(){return this.text},n})(),iv;(function(n){n[n.AZTEC=0]="AZTEC",n[n.CODABAR=1]="CODABAR",n[n.CODE_39=2]="CODE_39",n[n.CODE_93=3]="CODE_93",n[n.CODE_128=4]="CODE_128",n[n.DATA_MATRIX=5]="DATA_MATRIX",n[n.EAN_8=6]="EAN_8",n[n.EAN_13=7]="EAN_13",n[n.ITF=8]="ITF",n[n.MAXICODE=9]="MAXICODE",n[n.PDF_417=10]="PDF_417",n[n.QR_CODE=11]="QR_CODE",n[n.RSS_14=12]="RSS_14",n[n.RSS_EXPANDED=13]="RSS_EXPANDED",n[n.UPC_A=14]="UPC_A",n[n.UPC_E=15]="UPC_E",n[n.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(iv||(iv={}));const Me=iv;var av;(function(n){n[n.OTHER=0]="OTHER",n[n.ORIENTATION=1]="ORIENTATION",n[n.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",n[n.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",n[n.ISSUE_NUMBER=4]="ISSUE_NUMBER",n[n.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",n[n.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",n[n.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",n[n.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",n[n.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",n[n.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(av||(av={}));const ar=av;var mp=(function(){function n(e,t,r,i,a,o){a===void 0&&(a=-1),o===void 0&&(o=-1),this.rawBytes=e,this.text=t,this.byteSegments=r,this.ecLevel=i,this.structuredAppendSequenceNumber=a,this.structuredAppendParity=o,this.numBits=e==null?0:8*e.length}return n.prototype.getRawBytes=function(){return this.rawBytes},n.prototype.getNumBits=function(){return this.numBits},n.prototype.setNumBits=function(e){this.numBits=e},n.prototype.getText=function(){return this.text},n.prototype.getByteSegments=function(){return this.byteSegments},n.prototype.getECLevel=function(){return this.ecLevel},n.prototype.getErrorsCorrected=function(){return this.errorsCorrected},n.prototype.setErrorsCorrected=function(e){this.errorsCorrected=e},n.prototype.getErasures=function(){return this.erasures},n.prototype.setErasures=function(e){this.erasures=e},n.prototype.getOther=function(){return this.other},n.prototype.setOther=function(e){this.other=e},n.prototype.hasStructuredAppend=function(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0},n.prototype.getStructuredAppendParity=function(){return this.structuredAppendParity},n.prototype.getStructuredAppendSequenceNumber=function(){return this.structuredAppendSequenceNumber},n})(),rf=(function(){function n(){}return n.prototype.exp=function(e){return this.expTable[e]},n.prototype.log=function(e){if(e===0)throw new Pe;return this.logTable[e]},n.addOrSubtract=function(e,t){return e^t},n})(),Ys=(function(){function n(e,t){if(t.length===0)throw new Pe;this.field=e;var r=t.length;if(r>1&&t[0]===0){for(var i=1;i<r&&t[i]===0;)i++;i===r?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(r-i),Bt.arraycopy(t,i,this.coefficients,0,this.coefficients.length))}else this.coefficients=t}return n.prototype.getCoefficients=function(){return this.coefficients},n.prototype.getDegree=function(){return this.coefficients.length-1},n.prototype.isZero=function(){return this.coefficients[0]===0},n.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},n.prototype.evaluateAt=function(e){if(e===0)return this.getCoefficient(0);var t=this.coefficients,r;if(e===1){r=0;for(var i=0,a=t.length;i!==a;i++){var o=t[i];r=rf.addOrSubtract(r,o)}return r}r=t[0];for(var c=t.length,u=this.field,i=1;i<c;i++)r=rf.addOrSubtract(u.multiply(e,r),t[i]);return r},n.prototype.addOrSubtract=function(e){if(!this.field.equals(e.field))throw new Pe("GenericGFPolys do not have same GenericGF field");if(this.isZero())return e;if(e.isZero())return this;var t=this.coefficients,r=e.coefficients;if(t.length>r.length){var i=t;t=r,r=i}var a=new Int32Array(r.length),o=r.length-t.length;Bt.arraycopy(r,0,a,0,o);for(var c=o;c<r.length;c++)a[c]=rf.addOrSubtract(t[c-o],r[c]);return new n(this.field,a)},n.prototype.multiply=function(e){if(!this.field.equals(e.field))throw new Pe("GenericGFPolys do not have same GenericGF field");if(this.isZero()||e.isZero())return this.field.getZero();for(var t=this.coefficients,r=t.length,i=e.coefficients,a=i.length,o=new Int32Array(r+a-1),c=this.field,u=0;u<r;u++)for(var h=t[u],p=0;p<a;p++)o[u+p]=rf.addOrSubtract(o[u+p],c.multiply(h,i[p]));return new n(c,o)},n.prototype.multiplyScalar=function(e){if(e===0)return this.field.getZero();if(e===1)return this;for(var t=this.coefficients.length,r=this.field,i=new Int32Array(t),a=this.coefficients,o=0;o<t;o++)i[o]=r.multiply(a[o],e);return new n(r,i)},n.prototype.multiplyByMonomial=function(e,t){if(e<0)throw new Pe;if(t===0)return this.field.getZero();for(var r=this.coefficients,i=r.length,a=new Int32Array(i+e),o=this.field,c=0;c<i;c++)a[c]=o.multiply(r[c],t);return new n(o,a)},n.prototype.divide=function(e){if(!this.field.equals(e.field))throw new Pe("GenericGFPolys do not have same GenericGF field");if(e.isZero())throw new Pe("Divide by 0");for(var t=this.field,r=t.getZero(),i=this,a=e.getCoefficient(e.getDegree()),o=t.inverse(a);i.getDegree()>=e.getDegree()&&!i.isZero();){var c=i.getDegree()-e.getDegree(),u=t.multiply(i.getCoefficient(i.getDegree()),o),h=e.multiplyByMonomial(c,u),p=t.buildMonomial(c,u);r=r.addOrSubtract(p),i=i.addOrSubtract(h)}return[r,i]},n.prototype.toString=function(){for(var e="",t=this.getDegree();t>=0;t--){var r=this.getCoefficient(t);if(r!==0){if(r<0?(e+=" - ",r=-r):e.length>0&&(e+=" + "),t===0||r!==1){var i=this.field.log(r);i===0?e+="1":i===1?e+="a":(e+="a^",e+=i)}t!==0&&(t===1?e+="x":(e+="x^",e+=t))}}return e},n})(),GP=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),E3=(function(n){GP(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="ArithmeticException",e})(Dr),qP=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Nr=(function(n){qP(e,n);function e(t,r,i){var a=n.call(this)||this;a.primitive=t,a.size=r,a.generatorBase=i;for(var o=new Int32Array(r),c=1,u=0;u<r;u++)o[u]=c,c*=2,c>=r&&(c^=t,c&=r-1);a.expTable=o;for(var h=new Int32Array(r),u=0;u<r-1;u++)h[o[u]]=u;return a.logTable=h,a.zero=new Ys(a,Int32Array.from([0])),a.one=new Ys(a,Int32Array.from([1])),a}return e.prototype.getZero=function(){return this.zero},e.prototype.getOne=function(){return this.one},e.prototype.buildMonomial=function(t,r){if(t<0)throw new Pe;if(r===0)return this.zero;var i=new Int32Array(t+1);return i[0]=r,new Ys(this,i)},e.prototype.inverse=function(t){if(t===0)throw new E3;return this.expTable[this.size-this.logTable[t]-1]},e.prototype.multiply=function(t,r){return t===0||r===0?0:this.expTable[(this.logTable[t]+this.logTable[r])%(this.size-1)]},e.prototype.getSize=function(){return this.size},e.prototype.getGeneratorBase=function(){return this.generatorBase},e.prototype.toString=function(){return"GF(0x"+Je.toHexString(this.primitive)+","+this.size+")"},e.prototype.equals=function(t){return t===this},e.AZTEC_DATA_12=new e(4201,4096,1),e.AZTEC_DATA_10=new e(1033,1024,1),e.AZTEC_DATA_6=new e(67,64,1),e.AZTEC_PARAM=new e(19,16,1),e.QR_CODE_FIELD_256=new e(285,256,0),e.DATA_MATRIX_FIELD_256=new e(301,256,1),e.AZTEC_DATA_8=e.DATA_MATRIX_FIELD_256,e.MAXICODE_FIELD_64=e.AZTEC_DATA_6,e})(rf),$P=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Nd=(function(n){$P(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="ReedSolomonException",e})(Dr),XP=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Xf=(function(n){XP(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="IllegalStateException",e})(Dr),gp=(function(){function n(e){this.field=e}return n.prototype.decode=function(e,t){for(var r=this.field,i=new Ys(r,e),a=new Int32Array(t),o=!0,c=0;c<t;c++){var u=i.evaluateAt(r.exp(c+r.getGeneratorBase()));a[a.length-1-c]=u,u!==0&&(o=!1)}if(!o)for(var h=new Ys(r,a),p=this.runEuclideanAlgorithm(r.buildMonomial(t,1),h,t),g=p[0],_=p[1],E=this.findErrorLocations(g),w=this.findErrorMagnitudes(_,E),c=0;c<E.length;c++){var S=e.length-1-r.log(E[c]);if(S<0)throw new Nd("Bad error location");e[S]=Nr.addOrSubtract(e[S],w[c])}},n.prototype.runEuclideanAlgorithm=function(e,t,r){if(e.getDegree()<t.getDegree()){var i=e;e=t,t=i}for(var a=this.field,o=e,c=t,u=a.getZero(),h=a.getOne();c.getDegree()>=(r/2|0);){var p=o,g=u;if(o=c,u=h,o.isZero())throw new Nd("r_{i-1} was zero");c=p;for(var _=a.getZero(),E=o.getCoefficient(o.getDegree()),w=a.inverse(E);c.getDegree()>=o.getDegree()&&!c.isZero();){var S=c.getDegree()-o.getDegree(),D=a.multiply(c.getCoefficient(c.getDegree()),w);_=_.addOrSubtract(a.buildMonomial(S,D)),c=c.addOrSubtract(o.multiplyByMonomial(S,D))}if(h=_.multiply(u).addOrSubtract(g),c.getDegree()>=o.getDegree())throw new Xf("Division algorithm failed to reduce polynomial?")}var T=h.getCoefficient(0);if(T===0)throw new Nd("sigmaTilde(0) was zero");var O=a.inverse(T),j=h.multiplyScalar(O),z=c.multiplyScalar(O);return[j,z]},n.prototype.findErrorLocations=function(e){var t=e.getDegree();if(t===1)return Int32Array.from([e.getCoefficient(1)]);for(var r=new Int32Array(t),i=0,a=this.field,o=1;o<a.getSize()&&i<t;o++)e.evaluateAt(o)===0&&(r[i]=a.inverse(o),i++);if(i!==t)throw new Nd("Error locator degree does not match number of roots");return r},n.prototype.findErrorMagnitudes=function(e,t){for(var r=t.length,i=new Int32Array(r),a=this.field,o=0;o<r;o++){for(var c=a.inverse(t[o]),u=1,h=0;h<r;h++)if(o!==h){var p=a.multiply(t[h],c),g=(p&1)===0?p|1:p&-2;u=a.multiply(u,g)}i[o]=a.multiply(e.evaluateAt(c),a.inverse(u)),a.getGeneratorBase()!==0&&(i[o]=a.multiply(i[o],c))}return i},n})(),er;(function(n){n[n.UPPER=0]="UPPER",n[n.LOWER=1]="LOWER",n[n.MIXED=2]="MIXED",n[n.DIGIT=3]="DIGIT",n[n.PUNCT=4]="PUNCT",n[n.BINARY=5]="BINARY"})(er||(er={}));var AA=(function(){function n(){}return n.prototype.decode=function(e){this.ddata=e;var t=e.getBits(),r=this.extractBits(t),i=this.correctBits(r),a=n.convertBoolArrayToByteArray(i),o=n.getEncodedData(i),c=new mp(a,o,null,null);return c.setNumBits(i.length),c},n.highLevelDecode=function(e){return this.getEncodedData(e)},n.getEncodedData=function(e){for(var t=e.length,r=er.UPPER,i=er.UPPER,a="",o=0;o<t;)if(i===er.BINARY){if(t-o<5)break;var c=n.readCode(e,o,5);if(o+=5,c===0){if(t-o<11)break;c=n.readCode(e,o,11)+31,o+=11}for(var u=0;u<c;u++){if(t-o<8){o=t;break}var h=n.readCode(e,o,8);a+=ut.castAsNonUtf8Char(h),o+=8}i=r}else{var p=i===er.DIGIT?4:5;if(t-o<p)break;var h=n.readCode(e,o,p);o+=p;var g=n.getCharacter(i,h);g.startsWith("CTRL_")?(r=i,i=n.getTable(g.charAt(5)),g.charAt(6)==="L"&&(r=i)):(a+=g,i=r)}return a},n.getTable=function(e){switch(e){case"L":return er.LOWER;case"P":return er.PUNCT;case"M":return er.MIXED;case"D":return er.DIGIT;case"B":return er.BINARY;case"U":default:return er.UPPER}},n.getCharacter=function(e,t){switch(e){case er.UPPER:return n.UPPER_TABLE[t];case er.LOWER:return n.LOWER_TABLE[t];case er.MIXED:return n.MIXED_TABLE[t];case er.PUNCT:return n.PUNCT_TABLE[t];case er.DIGIT:return n.DIGIT_TABLE[t];default:throw new Xf("Bad table")}},n.prototype.correctBits=function(e){var t,r;this.ddata.getNbLayers()<=2?(r=6,t=Nr.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(r=8,t=Nr.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(r=10,t=Nr.AZTEC_DATA_10):(r=12,t=Nr.AZTEC_DATA_12);var i=this.ddata.getNbDatablocks(),a=e.length/r;if(a<i)throw new ge;for(var o=e.length%r,c=new Int32Array(a),u=0;u<a;u++,o+=r)c[u]=n.readCode(e,o,r);try{var h=new gp(t);h.decode(c,a-i)}catch(D){throw new ge(D)}for(var p=(1<<r)-1,g=0,u=0;u<i;u++){var _=c[u];if(_===0||_===p)throw new ge;(_===1||_===p-1)&&g++}for(var E=new Array(i*r-g),w=0,u=0;u<i;u++){var _=c[u];if(_===1||_===p-1)E.fill(_>1,w,w+r-1),w+=r-1;else for(var S=r-1;S>=0;--S)E[w++]=(_&1<<S)!==0}return E},n.prototype.extractBits=function(e){var t=this.ddata.isCompact(),r=this.ddata.getNbLayers(),i=(t?11:14)+r*4,a=new Int32Array(i),o=new Array(this.totalBitsInLayer(r,t));if(t)for(var c=0;c<a.length;c++)a[c]=c;else for(var u=i+1+2*Je.truncDivision(Je.truncDivision(i,2)-1,15),h=i/2,p=Je.truncDivision(u,2),c=0;c<h;c++){var g=c+Je.truncDivision(c,15);a[h-c-1]=p-g-1,a[h+c]=p+g+1}for(var c=0,_=0;c<r;c++){for(var E=(r-c)*4+(t?9:12),w=c*2,S=i-1-w,D=0;D<E;D++)for(var T=D*2,O=0;O<2;O++)o[_+T+O]=e.get(a[w+O],a[w+D]),o[_+2*E+T+O]=e.get(a[w+D],a[S-O]),o[_+4*E+T+O]=e.get(a[S-O],a[S-D]),o[_+6*E+T+O]=e.get(a[S-D],a[w+O]);_+=E*8}return o},n.readCode=function(e,t,r){for(var i=0,a=t;a<t+r;a++)i<<=1,e[a]&&(i|=1);return i},n.readByte=function(e,t){var r=e.length-t;return r>=8?n.readCode(e,t,8):n.readCode(e,t,r)<<8-r},n.convertBoolArrayToByteArray=function(e){for(var t=new Uint8Array((e.length+7)/8),r=0;r<t.length;r++)t[r]=n.readByte(e,8*r);return t},n.prototype.totalBitsInLayer=function(e,t){return((t?88:112)+16*e)*e},n.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],n.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],n.MIXED_TABLE=["CTRL_PS"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~","","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],n.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],n.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"],n})(),mt=(function(){function n(){}return n.round=function(e){return isNaN(e)?0:e<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:e>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:e+(e<0?-.5:.5)|0},n.distance=function(e,t,r,i){var a=e-r,o=t-i;return Math.sqrt(a*a+o*o)},n.sum=function(e){for(var t=0,r=0,i=e.length;r!==i;r++){var a=e[r];t+=a}return t},n})(),sv=(function(){function n(){}return n.floatToIntBits=function(e){return e},n.MAX_VALUE=Number.MAX_SAFE_INTEGER,n})(),Se=(function(){function n(e,t){this.x=e,this.y=t}return n.prototype.getX=function(){return this.x},n.prototype.getY=function(){return this.y},n.prototype.equals=function(e){if(e instanceof n){var t=e;return this.x===t.x&&this.y===t.y}return!1},n.prototype.hashCode=function(){return 31*sv.floatToIntBits(this.x)+sv.floatToIntBits(this.y)},n.prototype.toString=function(){return"("+this.x+","+this.y+")"},n.orderBestPatterns=function(e){var t=this.distance(e[0],e[1]),r=this.distance(e[1],e[2]),i=this.distance(e[0],e[2]),a,o,c;if(r>=t&&r>=i?(o=e[0],a=e[1],c=e[2]):i>=r&&i>=t?(o=e[1],a=e[0],c=e[2]):(o=e[2],a=e[0],c=e[1]),this.crossProductZ(a,o,c)<0){var u=a;a=c,c=u}e[0]=a,e[1]=o,e[2]=c},n.distance=function(e,t){return mt.distance(e.x,e.y,t.x,t.y)},n.crossProductZ=function(e,t,r){var i=t.x,a=t.y;return(r.x-i)*(e.y-a)-(r.y-a)*(e.x-i)},n})(),By=(function(){function n(e,t){this.bits=e,this.points=t}return n.prototype.getBits=function(){return this.bits},n.prototype.getPoints=function(){return this.points},n})(),KP=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),YP=(function(n){KP(e,n);function e(t,r,i,a,o){var c=n.call(this,t,r)||this;return c.compact=i,c.nbDatablocks=a,c.nbLayers=o,c}return e.prototype.getNbLayers=function(){return this.nbLayers},e.prototype.getNbDatablocks=function(){return this.nbDatablocks},e.prototype.isCompact=function(){return this.compact},e})(By),ov=(function(){function n(e,t,r,i){this.image=e,this.height=e.getHeight(),this.width=e.getWidth(),t==null&&(t=n.INIT_SIZE),r==null&&(r=e.getWidth()/2|0),i==null&&(i=e.getHeight()/2|0);var a=t/2|0;if(this.leftInit=r-a,this.rightInit=r+a,this.upInit=i-a,this.downInit=i+a,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new ae}return n.prototype.detect=function(){for(var e=this.leftInit,t=this.rightInit,r=this.upInit,i=this.downInit,a=!1,o=!0,c=!1,u=!1,h=!1,p=!1,g=!1,_=this.width,E=this.height;o;){o=!1;for(var w=!0;(w||!u)&&t<_;)w=this.containsBlackPoint(r,i,t,!1),w?(t++,o=!0,u=!0):u||t++;if(t>=_){a=!0;break}for(var S=!0;(S||!h)&&i<E;)S=this.containsBlackPoint(e,t,i,!0),S?(i++,o=!0,h=!0):h||i++;if(i>=E){a=!0;break}for(var D=!0;(D||!p)&&e>=0;)D=this.containsBlackPoint(r,i,e,!1),D?(e--,o=!0,p=!0):p||e--;if(e<0){a=!0;break}for(var T=!0;(T||!g)&&r>=0;)T=this.containsBlackPoint(e,t,r,!0),T?(r--,o=!0,g=!0):g||r--;if(r<0){a=!0;break}o&&(c=!0)}if(!a&&c){for(var O=t-e,j=null,z=1;j===null&&z<O;z++)j=this.getBlackPointOnSegment(e,i-z,e+z,i);if(j==null)throw new ae;for(var H=null,z=1;H===null&&z<O;z++)H=this.getBlackPointOnSegment(e,r+z,e+z,r);if(H==null)throw new ae;for(var q=null,z=1;q===null&&z<O;z++)q=this.getBlackPointOnSegment(t,r+z,t-z,r);if(q==null)throw new ae;for(var N=null,z=1;N===null&&z<O;z++)N=this.getBlackPointOnSegment(t,i-z,t-z,i);if(N==null)throw new ae;return this.centerEdges(N,j,q,H)}else throw new ae},n.prototype.getBlackPointOnSegment=function(e,t,r,i){for(var a=mt.round(mt.distance(e,t,r,i)),o=(r-e)/a,c=(i-t)/a,u=this.image,h=0;h<a;h++){var p=mt.round(e+h*o),g=mt.round(t+h*c);if(u.get(p,g))return new Se(p,g)}return null},n.prototype.centerEdges=function(e,t,r,i){var a=e.getX(),o=e.getY(),c=t.getX(),u=t.getY(),h=r.getX(),p=r.getY(),g=i.getX(),_=i.getY(),E=n.CORR;return a<this.width/2?[new Se(g-E,_+E),new Se(c+E,u+E),new Se(h-E,p-E),new Se(a+E,o-E)]:[new Se(g+E,_+E),new Se(c+E,u-E),new Se(h-E,p+E),new Se(a-E,o-E)]},n.prototype.containsBlackPoint=function(e,t,r,i){var a=this.image;if(i){for(var o=e;o<=t;o++)if(a.get(o,r))return!0}else for(var c=e;c<=t;c++)if(a.get(r,c))return!0;return!1},n.INIT_SIZE=10,n.CORR=1,n})(),bA=(function(){function n(){}return n.checkAndNudgePoints=function(e,t){for(var r=e.getWidth(),i=e.getHeight(),a=!0,o=0;o<t.length&&a;o+=2){var c=Math.floor(t[o]),u=Math.floor(t[o+1]);if(c<-1||c>r||u<-1||u>i)throw new ae;a=!1,c===-1?(t[o]=0,a=!0):c===r&&(t[o]=r-1,a=!0),u===-1?(t[o+1]=0,a=!0):u===i&&(t[o+1]=i-1,a=!0)}a=!0;for(var o=t.length-2;o>=0&&a;o-=2){var c=Math.floor(t[o]),u=Math.floor(t[o+1]);if(c<-1||c>r||u<-1||u>i)throw new ae;a=!1,c===-1?(t[o]=0,a=!0):c===r&&(t[o]=r-1,a=!0),u===-1?(t[o+1]=0,a=!0):u===i&&(t[o+1]=i-1,a=!0)}},n})(),w3=(function(){function n(e,t,r,i,a,o,c,u,h){this.a11=e,this.a21=t,this.a31=r,this.a12=i,this.a22=a,this.a32=o,this.a13=c,this.a23=u,this.a33=h}return n.quadrilateralToQuadrilateral=function(e,t,r,i,a,o,c,u,h,p,g,_,E,w,S,D){var T=n.quadrilateralToSquare(e,t,r,i,a,o,c,u),O=n.squareToQuadrilateral(h,p,g,_,E,w,S,D);return O.times(T)},n.prototype.transformPoints=function(e){for(var t=e.length,r=this.a11,i=this.a12,a=this.a13,o=this.a21,c=this.a22,u=this.a23,h=this.a31,p=this.a32,g=this.a33,_=0;_<t;_+=2){var E=e[_],w=e[_+1],S=a*E+u*w+g;e[_]=(r*E+o*w+h)/S,e[_+1]=(i*E+c*w+p)/S}},n.prototype.transformPointsWithValues=function(e,t){for(var r=this.a11,i=this.a12,a=this.a13,o=this.a21,c=this.a22,u=this.a23,h=this.a31,p=this.a32,g=this.a33,_=e.length,E=0;E<_;E++){var w=e[E],S=t[E],D=a*w+u*S+g;e[E]=(r*w+o*S+h)/D,t[E]=(i*w+c*S+p)/D}},n.squareToQuadrilateral=function(e,t,r,i,a,o,c,u){var h=e-r+a-c,p=t-i+o-u;if(h===0&&p===0)return new n(r-e,a-r,e,i-t,o-i,t,0,0,1);var g=r-a,_=c-a,E=i-o,w=u-o,S=g*w-_*E,D=(h*w-_*p)/S,T=(g*p-h*E)/S;return new n(r-e+D*r,c-e+T*c,e,i-t+D*i,u-t+T*u,t,D,T,1)},n.quadrilateralToSquare=function(e,t,r,i,a,o,c,u){return n.squareToQuadrilateral(e,t,r,i,a,o,c,u).buildAdjoint()},n.prototype.buildAdjoint=function(){return new n(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)},n.prototype.times=function(e){return new n(this.a11*e.a11+this.a21*e.a12+this.a31*e.a13,this.a11*e.a21+this.a21*e.a22+this.a31*e.a23,this.a11*e.a31+this.a21*e.a32+this.a31*e.a33,this.a12*e.a11+this.a22*e.a12+this.a32*e.a13,this.a12*e.a21+this.a22*e.a22+this.a32*e.a23,this.a12*e.a31+this.a22*e.a32+this.a32*e.a33,this.a13*e.a11+this.a23*e.a12+this.a33*e.a13,this.a13*e.a21+this.a23*e.a22+this.a33*e.a23,this.a13*e.a31+this.a23*e.a32+this.a33*e.a33)},n})(),WP=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),QP=(function(n){WP(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.sampleGrid=function(t,r,i,a,o,c,u,h,p,g,_,E,w,S,D,T,O,j,z){var H=w3.quadrilateralToQuadrilateral(a,o,c,u,h,p,g,_,E,w,S,D,T,O,j,z);return this.sampleGridWithTransform(t,r,i,H)},e.prototype.sampleGridWithTransform=function(t,r,i,a){if(r<=0||i<=0)throw new ae;for(var o=new ya(r,i),c=new Float32Array(2*r),u=0;u<i;u++){for(var h=c.length,p=u+.5,g=0;g<h;g+=2)c[g]=g/2+.5,c[g+1]=p;a.transformPoints(c),bA.checkAndNudgePoints(t,c);try{for(var g=0;g<h;g+=2)t.get(Math.floor(c[g]),Math.floor(c[g+1]))&&o.set(g/2,u)}catch{throw new ae}}return o},e})(bA),Vy=(function(){function n(){}return n.setGridSampler=function(e){n.gridSampler=e},n.getInstance=function(){return n.gridSampler},n.gridSampler=new QP,n})(),Tr=(function(){function n(e,t){this.x=e,this.y=t}return n.prototype.toResultPoint=function(){return new Se(this.getX(),this.getY())},n.prototype.getX=function(){return this.x},n.prototype.getY=function(){return this.y},n})(),ZP=(function(){function n(e){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=e}return n.prototype.detect=function(){return this.detectMirror(!1)},n.prototype.detectMirror=function(e){var t=this.getMatrixCenter(),r=this.getBullsEyeCorners(t);if(e){var i=r[0];r[0]=r[2],r[2]=i}this.extractParameters(r);var a=this.sampleGrid(this.image,r[this.shift%4],r[(this.shift+1)%4],r[(this.shift+2)%4],r[(this.shift+3)%4]),o=this.getMatrixCornerPoints(r);return new YP(a,o,this.compact,this.nbDataBlocks,this.nbLayers)},n.prototype.extractParameters=function(e){if(!this.isValidPoint(e[0])||!this.isValidPoint(e[1])||!this.isValidPoint(e[2])||!this.isValidPoint(e[3]))throw new ae;var t=2*this.nbCenterLayers,r=new Int32Array([this.sampleLine(e[0],e[1],t),this.sampleLine(e[1],e[2],t),this.sampleLine(e[2],e[3],t),this.sampleLine(e[3],e[0],t)]);this.shift=this.getRotation(r,t);for(var i=0,a=0;a<4;a++){var o=r[(this.shift+a)%4];this.compact?(i<<=7,i+=o>>1&127):(i<<=10,i+=(o>>2&992)+(o>>1&31))}var c=this.getCorrectedParameterData(i,this.compact);this.compact?(this.nbLayers=(c>>6)+1,this.nbDataBlocks=(c&63)+1):(this.nbLayers=(c>>11)+1,this.nbDataBlocks=(c&2047)+1)},n.prototype.getRotation=function(e,t){var r=0;e.forEach(function(a,o,c){var u=(a>>t-2<<1)+(a&1);r=(r<<3)+u}),r=((r&1)<<11)+(r>>1);for(var i=0;i<4;i++)if(Je.bitCount(r^this.EXPECTED_CORNER_BITS[i])<=2)return i;throw new ae},n.prototype.getCorrectedParameterData=function(e,t){var r,i;t?(r=7,i=2):(r=10,i=4);for(var a=r-i,o=new Int32Array(r),c=r-1;c>=0;--c)o[c]=e&15,e>>=4;try{var u=new gp(Nr.AZTEC_PARAM);u.decode(o,a)}catch{throw new ae}for(var h=0,c=0;c<i;c++)h=(h<<4)+o[c];return h},n.prototype.getBullsEyeCorners=function(e){var t=e,r=e,i=e,a=e,o=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){var c=this.getFirstDifferent(t,o,1,-1),u=this.getFirstDifferent(r,o,1,1),h=this.getFirstDifferent(i,o,-1,1),p=this.getFirstDifferent(a,o,-1,-1);if(this.nbCenterLayers>2){var g=this.distancePoint(p,c)*this.nbCenterLayers/(this.distancePoint(a,t)*(this.nbCenterLayers+2));if(g<.75||g>1.25||!this.isWhiteOrBlackRectangle(c,u,h,p))break}t=c,r=u,i=h,a=p,o=!o}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new ae;this.compact=this.nbCenterLayers===5;var _=new Se(t.getX()+.5,t.getY()-.5),E=new Se(r.getX()+.5,r.getY()+.5),w=new Se(i.getX()-.5,i.getY()+.5),S=new Se(a.getX()-.5,a.getY()-.5);return this.expandSquare([_,E,w,S],2*this.nbCenterLayers-3,2*this.nbCenterLayers)},n.prototype.getMatrixCenter=function(){var e,t,r,i;try{var a=new ov(this.image).detect();e=a[0],t=a[1],r=a[2],i=a[3]}catch{var o=this.image.getWidth()/2,c=this.image.getHeight()/2;e=this.getFirstDifferent(new Tr(o+7,c-7),!1,1,-1).toResultPoint(),t=this.getFirstDifferent(new Tr(o+7,c+7),!1,1,1).toResultPoint(),r=this.getFirstDifferent(new Tr(o-7,c+7),!1,-1,1).toResultPoint(),i=this.getFirstDifferent(new Tr(o-7,c-7),!1,-1,-1).toResultPoint()}var u=mt.round((e.getX()+i.getX()+t.getX()+r.getX())/4),h=mt.round((e.getY()+i.getY()+t.getY()+r.getY())/4);try{var a=new ov(this.image,15,u,h).detect();e=a[0],t=a[1],r=a[2],i=a[3]}catch{e=this.getFirstDifferent(new Tr(u+7,h-7),!1,1,-1).toResultPoint(),t=this.getFirstDifferent(new Tr(u+7,h+7),!1,1,1).toResultPoint(),r=this.getFirstDifferent(new Tr(u-7,h+7),!1,-1,1).toResultPoint(),i=this.getFirstDifferent(new Tr(u-7,h-7),!1,-1,-1).toResultPoint()}return u=mt.round((e.getX()+i.getX()+t.getX()+r.getX())/4),h=mt.round((e.getY()+i.getY()+t.getY()+r.getY())/4),new Tr(u,h)},n.prototype.getMatrixCornerPoints=function(e){return this.expandSquare(e,2*this.nbCenterLayers,this.getDimension())},n.prototype.sampleGrid=function(e,t,r,i,a){var o=Vy.getInstance(),c=this.getDimension(),u=c/2-this.nbCenterLayers,h=c/2+this.nbCenterLayers;return o.sampleGrid(e,c,c,u,u,h,u,h,h,u,h,t.getX(),t.getY(),r.getX(),r.getY(),i.getX(),i.getY(),a.getX(),a.getY())},n.prototype.sampleLine=function(e,t,r){for(var i=0,a=this.distanceResultPoint(e,t),o=a/r,c=e.getX(),u=e.getY(),h=o*(t.getX()-e.getX())/a,p=o*(t.getY()-e.getY())/a,g=0;g<r;g++)this.image.get(mt.round(c+g*h),mt.round(u+g*p))&&(i|=1<<r-g-1);return i},n.prototype.isWhiteOrBlackRectangle=function(e,t,r,i){var a=3;e=new Tr(e.getX()-a,e.getY()+a),t=new Tr(t.getX()-a,t.getY()-a),r=new Tr(r.getX()+a,r.getY()-a),i=new Tr(i.getX()+a,i.getY()+a);var o=this.getColor(i,e);if(o===0)return!1;var c=this.getColor(e,t);return c!==o||(c=this.getColor(t,r),c!==o)?!1:(c=this.getColor(r,i),c===o)},n.prototype.getColor=function(e,t){for(var r=this.distancePoint(e,t),i=(t.getX()-e.getX())/r,a=(t.getY()-e.getY())/r,o=0,c=e.getX(),u=e.getY(),h=this.image.get(e.getX(),e.getY()),p=Math.ceil(r),g=0;g<p;g++)c+=i,u+=a,this.image.get(mt.round(c),mt.round(u))!==h&&o++;var _=o/r;return _>.1&&_<.9?0:_<=.1===h?1:-1},n.prototype.getFirstDifferent=function(e,t,r,i){for(var a=e.getX()+r,o=e.getY()+i;this.isValid(a,o)&&this.image.get(a,o)===t;)a+=r,o+=i;for(a-=r,o-=i;this.isValid(a,o)&&this.image.get(a,o)===t;)a+=r;for(a-=r;this.isValid(a,o)&&this.image.get(a,o)===t;)o+=i;return o-=i,new Tr(a,o)},n.prototype.expandSquare=function(e,t,r){var i=r/(2*t),a=e[0].getX()-e[2].getX(),o=e[0].getY()-e[2].getY(),c=(e[0].getX()+e[2].getX())/2,u=(e[0].getY()+e[2].getY())/2,h=new Se(c+i*a,u+i*o),p=new Se(c-i*a,u-i*o);a=e[1].getX()-e[3].getX(),o=e[1].getY()-e[3].getY(),c=(e[1].getX()+e[3].getX())/2,u=(e[1].getY()+e[3].getY())/2;var g=new Se(c+i*a,u+i*o),_=new Se(c-i*a,u-i*o),E=[h,g,p,_];return E},n.prototype.isValid=function(e,t){return e>=0&&e<this.image.getWidth()&&t>0&&t<this.image.getHeight()},n.prototype.isValidPoint=function(e){var t=mt.round(e.getX()),r=mt.round(e.getY());return this.isValid(t,r)},n.prototype.distancePoint=function(e,t){return mt.distance(e.getX(),e.getY(),t.getX(),t.getY())},n.prototype.distanceResultPoint=function(e,t){return mt.distance(e.getX(),e.getY(),t.getX(),t.getY())},n.prototype.getDimension=function(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(Je.truncDivision(this.nbLayers-4,8)+1)+15},n})(),S0=(function(){function n(){}return n.prototype.decode=function(e,t){t===void 0&&(t=null);var r=null,i=new ZP(e.getBlackMatrix()),a=null,o=null;try{var c=i.detectMirror(!1);a=c.getPoints(),this.reportFoundResultPoints(t,a),o=new AA().decode(c)}catch(g){r=g}if(o==null)try{var c=i.detectMirror(!0);a=c.getPoints(),this.reportFoundResultPoints(t,a),o=new AA().decode(c)}catch(g){throw r??g}var u=new hr(o.getText(),o.getRawBytes(),o.getNumBits(),a,Me.AZTEC,Bt.currentTimeMillis()),h=o.getByteSegments();h!=null&&u.putMetadata(ar.BYTE_SEGMENTS,h);var p=o.getECLevel();return p!=null&&u.putMetadata(ar.ERROR_CORRECTION_LEVEL,p),u},n.prototype.reportFoundResultPoints=function(e,t){if(e!=null){var r=e.get(Vt.NEED_RESULT_POINT_CALLBACK);r!=null&&t.forEach(function(i,a,o){r.foundPossibleResultPoint(i)})}},n.prototype.reset=function(){},n})(),JP=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})();(function(n){JP(e,n);function e(t){return t===void 0&&(t=500),n.call(this,new S0,t)||this}return e})(zc);var Mn=(function(){function n(){}return n.prototype.decode=function(e,t){try{return this.doDecode(e,t)}catch{var r=t&&t.get(Vt.TRY_HARDER)===!0;if(r&&e.isRotateSupported()){var i=e.rotateCounterClockwise(),a=this.doDecode(i,t),o=a.getResultMetadata(),c=270;o!==null&&o.get(ar.ORIENTATION)===!0&&(c=c+o.get(ar.ORIENTATION)%360),a.putMetadata(ar.ORIENTATION,c);var u=a.getResultPoints();if(u!==null)for(var h=i.getHeight(),p=0;p<u.length;p++)u[p]=new Se(h-u[p].getY()-1,u[p].getX());return a}else throw new ae}},n.prototype.reset=function(){},n.prototype.doDecode=function(e,t){var r=e.getWidth(),i=e.getHeight(),a=new qn(r),o=t&&t.get(Vt.TRY_HARDER)===!0,c=Math.max(1,i>>(o?8:5)),u;o?u=i:u=15;for(var h=Math.trunc(i/2),p=0;p<u;p++){var g=Math.trunc((p+1)/2),_=(p&1)===0,E=h+c*(_?g:-g);if(E<0||E>=i)break;try{a=e.getBlackRow(E,a)}catch{continue}for(var w=function(O){if(O===1&&(a.reverse(),t&&t.get(Vt.NEED_RESULT_POINT_CALLBACK)===!0)){var j=new Map;t.forEach(function(q,N){return j.set(N,q)}),j.delete(Vt.NEED_RESULT_POINT_CALLBACK),t=j}try{var z=S.decodeRow(E,a,t);if(O===1){z.putMetadata(ar.ORIENTATION,180);var H=z.getResultPoints();H!==null&&(H[0]=new Se(r-H[0].getX()-1,H[0].getY()),H[1]=new Se(r-H[1].getX()-1,H[1].getY()))}return{value:z}}catch{}},S=this,D=0;D<2;D++){var T=w(D);if(typeof T=="object")return T.value}}throw new ae},n.recordPattern=function(e,t,r){for(var i=r.length,a=0;a<i;a++)r[a]=0;var o=e.getSize();if(t>=o)throw new ae;for(var c=!e.get(t),u=0,h=t;h<o;){if(e.get(h)!==c)r[u]++;else{if(++u===i)break;r[u]=1,c=!c}h++}if(!(u===i||u===i-1&&h===o))throw new ae},n.recordPatternInReverse=function(e,t,r){for(var i=r.length,a=e.get(t);t>0&&i>=0;)e.get(--t)!==a&&(i--,a=!a);if(i>=0)throw new ae;n.recordPattern(e,t+1,r)},n.patternMatchVariance=function(e,t,r){for(var i=e.length,a=0,o=0,c=0;c<i;c++)a+=e[c],o+=t[c];if(a<o)return Number.POSITIVE_INFINITY;var u=a/o;r*=u;for(var h=0,p=0;p<i;p++){var g=e[p],_=t[p]*u,E=g>_?g-_:_-g;if(E>r)return Number.POSITIVE_INFINITY;h+=E}return h/a},n})(),ek=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),SA=(function(n){ek(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.findStartPattern=function(t){for(var r=t.getSize(),i=t.getNextSet(0),a=0,o=Int32Array.from([0,0,0,0,0,0]),c=i,u=!1,h=6,p=i;p<r;p++)if(t.get(p)!==u)o[a]++;else{if(a===h-1){for(var g=e.MAX_AVG_VARIANCE,_=-1,E=e.CODE_START_A;E<=e.CODE_START_C;E++){var w=Mn.patternMatchVariance(o,e.CODE_PATTERNS[E],e.MAX_INDIVIDUAL_VARIANCE);w<g&&(g=w,_=E)}if(_>=0&&t.isRange(Math.max(0,c-(p-c)/2),c,!1))return Int32Array.from([c,p,_]);c+=o[0]+o[1],o=o.slice(2,o.length),o[a-1]=0,o[a]=0,a--}else a++;o[a]=1,u=!u}throw new ae},e.decodeCode=function(t,r,i){Mn.recordPattern(t,i,r);for(var a=e.MAX_AVG_VARIANCE,o=-1,c=0;c<e.CODE_PATTERNS.length;c++){var u=e.CODE_PATTERNS[c],h=this.patternMatchVariance(r,u,e.MAX_INDIVIDUAL_VARIANCE);h<a&&(a=h,o=c)}if(o>=0)return o;throw new ae},e.prototype.decodeRow=function(t,r,i){var a=i&&i.get(Vt.ASSUME_GS1)===!0,o=e.findStartPattern(r),c=o[2],u=0,h=new Uint8Array(20);h[u++]=c;var p;switch(c){case e.CODE_START_A:p=e.CODE_CODE_A;break;case e.CODE_START_B:p=e.CODE_CODE_B;break;case e.CODE_START_C:p=e.CODE_CODE_C;break;default:throw new ge}for(var g=!1,_=!1,E="",w=o[0],S=o[1],D=Int32Array.from([0,0,0,0,0,0]),T=0,O=0,j=c,z=0,H=!0,q=!1,N=!1;!g;){var b=_;switch(_=!1,T=O,O=e.decodeCode(r,D,S),h[u++]=O,O!==e.CODE_STOP&&(H=!0),O!==e.CODE_STOP&&(z++,j+=z*O),w=S,S+=D.reduce(function(se,he){return se+he},0),O){case e.CODE_START_A:case e.CODE_START_B:case e.CODE_START_C:throw new ge}switch(p){case e.CODE_CODE_A:if(O<64)N===q?E+=String.fromCharCode(32+O):E+=String.fromCharCode(32+O+128),N=!1;else if(O<96)N===q?E+=String.fromCharCode(O-64):E+=String.fromCharCode(O+64),N=!1;else switch(O!==e.CODE_STOP&&(H=!1),O){case e.CODE_FNC_1:a&&(E.length===0?E+="]C1":E+="");break;case e.CODE_FNC_2:case e.CODE_FNC_3:break;case e.CODE_FNC_4_A:!q&&N?(q=!0,N=!1):q&&N?(q=!1,N=!1):N=!0;break;case e.CODE_SHIFT:_=!0,p=e.CODE_CODE_B;break;case e.CODE_CODE_B:p=e.CODE_CODE_B;break;case e.CODE_CODE_C:p=e.CODE_CODE_C;break;case e.CODE_STOP:g=!0;break}break;case e.CODE_CODE_B:if(O<96)N===q?E+=String.fromCharCode(32+O):E+=String.fromCharCode(32+O+128),N=!1;else switch(O!==e.CODE_STOP&&(H=!1),O){case e.CODE_FNC_1:a&&(E.length===0?E+="]C1":E+="");break;case e.CODE_FNC_2:case e.CODE_FNC_3:break;case e.CODE_FNC_4_B:!q&&N?(q=!0,N=!1):q&&N?(q=!1,N=!1):N=!0;break;case e.CODE_SHIFT:_=!0,p=e.CODE_CODE_A;break;case e.CODE_CODE_A:p=e.CODE_CODE_A;break;case e.CODE_CODE_C:p=e.CODE_CODE_C;break;case e.CODE_STOP:g=!0;break}break;case e.CODE_CODE_C:if(O<100)O<10&&(E+="0"),E+=O;else switch(O!==e.CODE_STOP&&(H=!1),O){case e.CODE_FNC_1:a&&(E.length===0?E+="]C1":E+="");break;case e.CODE_CODE_A:p=e.CODE_CODE_A;break;case e.CODE_CODE_B:p=e.CODE_CODE_B;break;case e.CODE_STOP:g=!0;break}break}b&&(p=p===e.CODE_CODE_A?e.CODE_CODE_B:e.CODE_CODE_A)}var I=S-w;if(S=r.getNextUnset(S),!r.isRange(S,Math.min(r.getSize(),S+(S-w)/2),!1))throw new ae;if(j-=z*T,j%103!==T)throw new bn;var k=E.length;if(k===0)throw new ae;k>0&&H&&(p===e.CODE_CODE_C?E=E.substring(0,k-2):E=E.substring(0,k-1));for(var M=(o[1]+o[0])/2,V=w+I/2,L=h.length,ie=new Uint8Array(L),we=0;we<L;we++)ie[we]=h[we];var F=[new Se(M,t),new Se(V,t)];return new hr(E,ie,0,F,Me.CODE_128,new Date().getTime())},e.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],e.MAX_AVG_VARIANCE=.25,e.MAX_INDIVIDUAL_VARIANCE=.7,e.CODE_SHIFT=98,e.CODE_CODE_C=99,e.CODE_CODE_B=100,e.CODE_CODE_A=101,e.CODE_FNC_1=102,e.CODE_FNC_2=97,e.CODE_FNC_3=96,e.CODE_FNC_4_A=101,e.CODE_FNC_4_B=100,e.CODE_START_A=103,e.CODE_START_B=104,e.CODE_START_C=105,e.CODE_STOP=106,e})(Mn),tk=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Um=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},CA=(function(n){tk(e,n);function e(t,r){t===void 0&&(t=!1),r===void 0&&(r=!1);var i=n.call(this)||this;return i.usingCheckDigit=t,i.extendedMode=r,i.decodeRowResult="",i.counters=new Int32Array(9),i}return e.prototype.decodeRow=function(t,r,i){var a,o,c,u,h=this.counters;h.fill(0),this.decodeRowResult="";var p=e.findAsteriskPattern(r,h),g=r.getNextSet(p[1]),_=r.getSize(),E,w;do{e.recordPattern(r,g,h);var S=e.toNarrowWidePattern(h);if(S<0)throw new ae;E=e.patternToChar(S),this.decodeRowResult+=E,w=g;try{for(var D=(a=void 0,Um(h)),T=D.next();!T.done;T=D.next()){var O=T.value;g+=O}}catch(L){a={error:L}}finally{try{T&&!T.done&&(o=D.return)&&o.call(D)}finally{if(a)throw a.error}}g=r.getNextSet(g)}while(E!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var j=0;try{for(var z=Um(h),H=z.next();!H.done;H=z.next()){var O=H.value;j+=O}}catch(L){c={error:L}}finally{try{H&&!H.done&&(u=z.return)&&u.call(z)}finally{if(c)throw c.error}}var q=g-w-j;if(g!==_&&q*2<j)throw new ae;if(this.usingCheckDigit){for(var N=this.decodeRowResult.length-1,b=0,I=0;I<N;I++)b+=e.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(I));if(this.decodeRowResult.charAt(N)!==e.ALPHABET_STRING.charAt(b%43))throw new bn;this.decodeRowResult=this.decodeRowResult.substring(0,N)}if(this.decodeRowResult.length===0)throw new ae;var k;this.extendedMode?k=e.decodeExtended(this.decodeRowResult):k=this.decodeRowResult;var M=(p[1]+p[0])/2,V=w+j/2;return new hr(k,null,0,[new Se(M,t),new Se(V,t)],Me.CODE_39,new Date().getTime())},e.findAsteriskPattern=function(t,r){for(var i=t.getSize(),a=t.getNextSet(0),o=0,c=a,u=!1,h=r.length,p=a;p<i;p++)if(t.get(p)!==u)r[o]++;else{if(o===h-1){if(this.toNarrowWidePattern(r)===e.ASTERISK_ENCODING&&t.isRange(Math.max(0,c-Math.floor((p-c)/2)),c,!1))return[c,p];c+=r[0]+r[1],r.copyWithin(0,2,2+o-1),r[o-1]=0,r[o]=0,o--}else o++;r[o]=1,u=!u}throw new ae},e.toNarrowWidePattern=function(t){var r,i,a=t.length,o=0,c;do{var u=2147483647;try{for(var h=(r=void 0,Um(t)),p=h.next();!p.done;p=h.next()){var g=p.value;g<u&&g>o&&(u=g)}}catch(S){r={error:S}}finally{try{p&&!p.done&&(i=h.return)&&i.call(h)}finally{if(r)throw r.error}}o=u,c=0;for(var _=0,E=0,w=0;w<a;w++){var g=t[w];g>o&&(E|=1<<a-1-w,c++,_+=g)}if(c===3){for(var w=0;w<a&&c>0;w++){var g=t[w];if(g>o&&(c--,g*2>=_))return-1}return E}}while(c>3);return-1},e.patternToChar=function(t){for(var r=0;r<e.CHARACTER_ENCODINGS.length;r++)if(e.CHARACTER_ENCODINGS[r]===t)return e.ALPHABET_STRING.charAt(r);if(t===e.ASTERISK_ENCODING)return"*";throw new ae},e.decodeExtended=function(t){for(var r=t.length,i="",a=0;a<r;a++){var o=t.charAt(a);if(o==="+"||o==="$"||o==="%"||o==="/"){var c=t.charAt(a+1),u="\0";switch(o){case"+":if(c>="A"&&c<="Z")u=String.fromCharCode(c.charCodeAt(0)+32);else throw new ge;break;case"$":if(c>="A"&&c<="Z")u=String.fromCharCode(c.charCodeAt(0)-64);else throw new ge;break;case"%":if(c>="A"&&c<="E")u=String.fromCharCode(c.charCodeAt(0)-38);else if(c>="F"&&c<="J")u=String.fromCharCode(c.charCodeAt(0)-11);else if(c>="K"&&c<="O")u=String.fromCharCode(c.charCodeAt(0)+16);else if(c>="P"&&c<="T")u=String.fromCharCode(c.charCodeAt(0)+43);else if(c==="U")u="\0";else if(c==="V")u="@";else if(c==="W")u="`";else if(c==="X"||c==="Y"||c==="Z")u="";else throw new ge;break;case"/":if(c>="A"&&c<="O")u=String.fromCharCode(c.charCodeAt(0)-32);else if(c==="Z")u=":";else throw new ge;break}i+=u,a++}else i+=o}return i},e.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",e.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],e.ASTERISK_ENCODING=148,e})(Mn),nk=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),zm=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},TA=(function(n){nk(e,n);function e(){var t=n.call(this)||this;return t.decodeRowResult="",t.counters=new Int32Array(6),t}return e.prototype.decodeRow=function(t,r,i){var a,o,c,u,h=this.findAsteriskPattern(r),p=r.getNextSet(h[1]),g=r.getSize(),_=this.counters;_.fill(0),this.decodeRowResult="";var E,w;do{e.recordPattern(r,p,_);var S=this.toPattern(_);if(S<0)throw new ae;E=this.patternToChar(S),this.decodeRowResult+=E,w=p;try{for(var D=(a=void 0,zm(_)),T=D.next();!T.done;T=D.next()){var O=T.value;p+=O}}catch(I){a={error:I}}finally{try{T&&!T.done&&(o=D.return)&&o.call(D)}finally{if(a)throw a.error}}p=r.getNextSet(p)}while(E!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var j=0;try{for(var z=zm(_),H=z.next();!H.done;H=z.next()){var O=H.value;j+=O}}catch(I){c={error:I}}finally{try{H&&!H.done&&(u=z.return)&&u.call(z)}finally{if(c)throw c.error}}if(p===g||!r.get(p))throw new ae;if(this.decodeRowResult.length<2)throw new ae;this.checkChecksums(this.decodeRowResult),this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-2);var q=this.decodeExtended(this.decodeRowResult),N=(h[1]+h[0])/2,b=w+j/2;return new hr(q,null,0,[new Se(N,t),new Se(b,t)],Me.CODE_93,new Date().getTime())},e.prototype.findAsteriskPattern=function(t){var r=t.getSize(),i=t.getNextSet(0);this.counters.fill(0);for(var a=this.counters,o=i,c=!1,u=a.length,h=0,p=i;p<r;p++)if(t.get(p)!==c)a[h]++;else{if(h===u-1){if(this.toPattern(a)===e.ASTERISK_ENCODING)return new Int32Array([o,p]);o+=a[0]+a[1],a.copyWithin(0,2,2+h-1),a[h-1]=0,a[h]=0,h--}else h++;a[h]=1,c=!c}throw new ae},e.prototype.toPattern=function(t){var r,i,a=0;try{for(var o=zm(t),c=o.next();!c.done;c=o.next()){var u=c.value;a+=u}}catch(w){r={error:w}}finally{try{c&&!c.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}for(var h=0,p=t.length,g=0;g<p;g++){var _=Math.round(t[g]*9/a);if(_<1||_>4)return-1;if((g&1)===0)for(var E=0;E<_;E++)h=h<<1|1;else h<<=_}return h},e.prototype.patternToChar=function(t){for(var r=0;r<e.CHARACTER_ENCODINGS.length;r++)if(e.CHARACTER_ENCODINGS[r]===t)return e.ALPHABET_STRING.charAt(r);throw new ae},e.prototype.decodeExtended=function(t){for(var r=t.length,i="",a=0;a<r;a++){var o=t.charAt(a);if(o>="a"&&o<="d"){if(a>=r-1)throw new ge;var c=t.charAt(a+1),u="\0";switch(o){case"d":if(c>="A"&&c<="Z")u=String.fromCharCode(c.charCodeAt(0)+32);else throw new ge;break;case"a":if(c>="A"&&c<="Z")u=String.fromCharCode(c.charCodeAt(0)-64);else throw new ge;break;case"b":if(c>="A"&&c<="E")u=String.fromCharCode(c.charCodeAt(0)-38);else if(c>="F"&&c<="J")u=String.fromCharCode(c.charCodeAt(0)-11);else if(c>="K"&&c<="O")u=String.fromCharCode(c.charCodeAt(0)+16);else if(c>="P"&&c<="T")u=String.fromCharCode(c.charCodeAt(0)+43);else if(c==="U")u="\0";else if(c==="V")u="@";else if(c==="W")u="`";else if(c>="X"&&c<="Z")u="";else throw new ge;break;case"c":if(c>="A"&&c<="O")u=String.fromCharCode(c.charCodeAt(0)-32);else if(c==="Z")u=":";else throw new ge;break}i+=u,a++}else i+=o}return i},e.prototype.checkChecksums=function(t){var r=t.length;this.checkOneChecksum(t,r-2,20),this.checkOneChecksum(t,r-1,15)},e.prototype.checkOneChecksum=function(t,r,i){for(var a=1,o=0,c=r-1;c>=0;c--)o+=a*e.ALPHABET_STRING.indexOf(t.charAt(c)),++a>i&&(a=1);if(t.charAt(r)!==e.ALPHABET_STRING[o%47])throw new bn},e.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%abcd*",e.CHARACTER_ENCODINGS=[276,328,324,322,296,292,290,336,274,266,424,420,418,404,402,394,360,356,354,308,282,344,332,326,300,278,436,434,428,422,406,410,364,358,310,314,302,468,466,458,366,374,430,294,474,470,306,350],e.ASTERISK_ENCODING=e.CHARACTER_ENCODINGS[47],e})(Mn),rk=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),ik=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},IA=(function(n){rk(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.narrowLineWidth=-1,t}return e.prototype.decodeRow=function(t,r,i){var a,o,c=this.decodeStart(r),u=this.decodeEnd(r),h=new We;e.decodeMiddle(r,c[1],u[0],h);var p=h.toString(),g=null;i!=null&&(g=i.get(Vt.ALLOWED_LENGTHS)),g==null&&(g=e.DEFAULT_ALLOWED_LENGTHS);var _=p.length,E=!1,w=0;try{for(var S=ik(g),D=S.next();!D.done;D=S.next()){var T=D.value;if(_===T){E=!0;break}T>w&&(w=T)}}catch(z){a={error:z}}finally{try{D&&!D.done&&(o=S.return)&&o.call(S)}finally{if(a)throw a.error}}if(!E&&_>w&&(E=!0),!E)throw new ge;var O=[new Se(c[1],t),new Se(u[0],t)],j=new hr(p,null,0,O,Me.ITF,new Date().getTime());return j},e.decodeMiddle=function(t,r,i,a){var o=new Int32Array(10),c=new Int32Array(5),u=new Int32Array(5);for(o.fill(0),c.fill(0),u.fill(0);r<i;){Mn.recordPattern(t,r,o);for(var h=0;h<5;h++){var p=2*h;c[h]=o[p],u[h]=o[p+1]}var g=e.decodeDigit(c);a.append(g.toString()),g=this.decodeDigit(u),a.append(g.toString()),o.forEach(function(_){r+=_})}},e.prototype.decodeStart=function(t){var r=e.skipWhiteSpace(t),i=e.findGuardPattern(t,r,e.START_PATTERN);return this.narrowLineWidth=(i[1]-i[0])/4,this.validateQuietZone(t,i[0]),i},e.prototype.validateQuietZone=function(t,r){var i=this.narrowLineWidth*10;i=i<r?i:r;for(var a=r-1;i>0&&a>=0&&!t.get(a);a--)i--;if(i!==0)throw new ae},e.skipWhiteSpace=function(t){var r=t.getSize(),i=t.getNextSet(0);if(i===r)throw new ae;return i},e.prototype.decodeEnd=function(t){t.reverse();try{var r=e.skipWhiteSpace(t),i=void 0;try{i=e.findGuardPattern(t,r,e.END_PATTERN_REVERSED[0])}catch(o){o instanceof ae&&(i=e.findGuardPattern(t,r,e.END_PATTERN_REVERSED[1]))}this.validateQuietZone(t,i[0]);var a=i[0];return i[0]=t.getSize()-i[1],i[1]=t.getSize()-a,i}finally{t.reverse()}},e.findGuardPattern=function(t,r,i){var a=i.length,o=new Int32Array(a),c=t.getSize(),u=!1,h=0,p=r;o.fill(0);for(var g=r;g<c;g++)if(t.get(g)!==u)o[h]++;else{if(h===a-1){if(Mn.patternMatchVariance(o,i,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return[p,g];p+=o[0]+o[1],Bt.arraycopy(o,2,o,0,h-1),o[h-1]=0,o[h]=0,h--}else h++;o[h]=1,u=!u}throw new ae},e.decodeDigit=function(t){for(var r=e.MAX_AVG_VARIANCE,i=-1,a=e.PATTERNS.length,o=0;o<a;o++){var c=e.PATTERNS[o],u=Mn.patternMatchVariance(t,c,e.MAX_INDIVIDUAL_VARIANCE);u<r?(r=u,i=o):u===r&&(i=-1)}if(i>=0)return i%10;throw new ae},e.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],e.MAX_AVG_VARIANCE=.38,e.MAX_INDIVIDUAL_VARIANCE=.5,e.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],e.START_PATTERN=Int32Array.from([1,1,1,1]),e.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])],e})(Mn),ak=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Tc=(function(n){ak(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.decodeRowStringBuffer="",t}return e.findStartGuardPattern=function(t){for(var r=!1,i,a=0,o=Int32Array.from([0,0,0]);!r;){o=Int32Array.from([0,0,0]),i=e.findGuardPattern(t,a,!1,this.START_END_PATTERN,o);var c=i[0];a=i[1];var u=c-(a-c);u>=0&&(r=t.isRange(u,c,!1))}return i},e.checkChecksum=function(t){return e.checkStandardUPCEANChecksum(t)},e.checkStandardUPCEANChecksum=function(t){var r=t.length;if(r===0)return!1;var i=parseInt(t.charAt(r-1),10);return e.getStandardUPCEANChecksum(t.substring(0,r-1))===i},e.getStandardUPCEANChecksum=function(t){for(var r=t.length,i=0,a=r-1;a>=0;a-=2){var o=t.charAt(a).charCodeAt(0)-48;if(o<0||o>9)throw new ge;i+=o}i*=3;for(var a=r-2;a>=0;a-=2){var o=t.charAt(a).charCodeAt(0)-48;if(o<0||o>9)throw new ge;i+=o}return(1e3-i)%10},e.decodeEnd=function(t,r){return e.findGuardPattern(t,r,!1,e.START_END_PATTERN,new Int32Array(e.START_END_PATTERN.length).fill(0))},e.findGuardPatternWithoutCounters=function(t,r,i,a){return this.findGuardPattern(t,r,i,a,new Int32Array(a.length))},e.findGuardPattern=function(t,r,i,a,o){var c=t.getSize();r=i?t.getNextUnset(r):t.getNextSet(r);for(var u=0,h=r,p=a.length,g=i,_=r;_<c;_++)if(t.get(_)!==g)o[u]++;else{if(u===p-1){if(Mn.patternMatchVariance(o,a,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return Int32Array.from([h,_]);h+=o[0]+o[1];for(var E=o.slice(2,o.length),w=0;w<u-1;w++)o[w]=E[w];o[u-1]=0,o[u]=0,u--}else u++;o[u]=1,g=!g}throw new ae},e.decodeDigit=function(t,r,i,a){this.recordPattern(t,i,r);for(var o=this.MAX_AVG_VARIANCE,c=-1,u=a.length,h=0;h<u;h++){var p=a[h],g=Mn.patternMatchVariance(r,p,e.MAX_INDIVIDUAL_VARIANCE);g<o&&(o=g,c=h)}if(c>=0)return c;throw new ae},e.MAX_AVG_VARIANCE=.48,e.MAX_INDIVIDUAL_VARIANCE=.7,e.START_END_PATTERN=Int32Array.from([1,1,1]),e.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),e.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),e.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])],e})(Mn),sk=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ok=(function(){function n(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return n.prototype.decodeRow=function(e,t,r){var i=this.decodeRowStringBuffer,a=this.decodeMiddle(t,r,i),o=i.toString(),c=n.parseExtensionString(o),u=[new Se((r[0]+r[1])/2,e),new Se(a,e)],h=new hr(o,null,0,u,Me.UPC_EAN_EXTENSION,new Date().getTime());return c!=null&&h.putAllMetadata(c),h},n.prototype.decodeMiddle=function(e,t,r){var i,a,o=this.decodeMiddleCounters;o[0]=0,o[1]=0,o[2]=0,o[3]=0;for(var c=e.getSize(),u=t[1],h=0,p=0;p<5&&u<c;p++){var g=Tc.decodeDigit(e,o,u,Tc.L_AND_G_PATTERNS);r+=String.fromCharCode(48+g%10);try{for(var _=(i=void 0,sk(o)),E=_.next();!E.done;E=_.next()){var w=E.value;u+=w}}catch(D){i={error:D}}finally{try{E&&!E.done&&(a=_.return)&&a.call(_)}finally{if(i)throw i.error}}g>=10&&(h|=1<<4-p),p!==4&&(u=e.getNextSet(u),u=e.getNextUnset(u))}if(r.length!==5)throw new ae;var S=this.determineCheckDigit(h);if(n.extensionChecksum(r.toString())!==S)throw new ae;return u},n.extensionChecksum=function(e){for(var t=e.length,r=0,i=t-2;i>=0;i-=2)r+=e.charAt(i).charCodeAt(0)-48;r*=3;for(var i=t-1;i>=0;i-=2)r+=e.charAt(i).charCodeAt(0)-48;return r*=3,r%10},n.prototype.determineCheckDigit=function(e){for(var t=0;t<10;t++)if(e===this.CHECK_DIGIT_ENCODINGS[t])return t;throw new ae},n.parseExtensionString=function(e){if(e.length!==5)return null;var t=n.parseExtension5String(e);return t==null?null:new Map([[ar.SUGGESTED_PRICE,t]])},n.parseExtension5String=function(e){var t;switch(e.charAt(0)){case"0":t="£";break;case"5":t="$";break;case"9":switch(e){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}t="";break;default:t="";break}var r=parseInt(e.substring(1)),i=(r/100).toString(),a=r%100,o=a<10?"0"+a:a.toString();return t+i+"."+o},n})(),lk=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ck=(function(){function n(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return n.prototype.decodeRow=function(e,t,r){var i=this.decodeRowStringBuffer,a=this.decodeMiddle(t,r,i),o=i.toString(),c=n.parseExtensionString(o),u=[new Se((r[0]+r[1])/2,e),new Se(a,e)],h=new hr(o,null,0,u,Me.UPC_EAN_EXTENSION,new Date().getTime());return c!=null&&h.putAllMetadata(c),h},n.prototype.decodeMiddle=function(e,t,r){var i,a,o=this.decodeMiddleCounters;o[0]=0,o[1]=0,o[2]=0,o[3]=0;for(var c=e.getSize(),u=t[1],h=0,p=0;p<2&&u<c;p++){var g=Tc.decodeDigit(e,o,u,Tc.L_AND_G_PATTERNS);r+=String.fromCharCode(48+g%10);try{for(var _=(i=void 0,lk(o)),E=_.next();!E.done;E=_.next()){var w=E.value;u+=w}}catch(S){i={error:S}}finally{try{E&&!E.done&&(a=_.return)&&a.call(_)}finally{if(i)throw i.error}}g>=10&&(h|=1<<1-p),p!==1&&(u=e.getNextSet(u),u=e.getNextUnset(u))}if(r.length!==2)throw new ae;if(parseInt(r.toString())%4!==h)throw new ae;return u},n.parseExtensionString=function(e){return e.length!==2?null:new Map([[ar.ISSUE_NUMBER,parseInt(e)]])},n})(),uk=(function(){function n(){}return n.decodeRow=function(e,t,r){var i=Tc.findGuardPattern(t,r,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{var a=new ok;return a.decodeRow(e,t,i)}catch{var o=new ck;return o.decodeRow(e,t,i)}},n.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]),n})(),fk=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Rn=(function(n){fk(e,n);function e(){var t=n.call(this)||this;t.decodeRowStringBuffer="",e.L_AND_G_PATTERNS=e.L_PATTERNS.map(function(c){return Int32Array.from(c)});for(var r=10;r<20;r++){for(var i=e.L_PATTERNS[r-10],a=new Int32Array(i.length),o=0;o<i.length;o++)a[o]=i[i.length-o-1];e.L_AND_G_PATTERNS[r]=a}return t}return e.prototype.decodeRow=function(t,r,i){var a=e.findStartGuardPattern(r),o=i==null?null:i.get(Vt.NEED_RESULT_POINT_CALLBACK);if(o!=null){var c=new Se((a[0]+a[1])/2,t);o.foundPossibleResultPoint(c)}var u=this.decodeMiddle(r,a,this.decodeRowStringBuffer),h=u.rowOffset,p=u.resultString;if(o!=null){var g=new Se(h,t);o.foundPossibleResultPoint(g)}var _=e.decodeEnd(r,h);if(o!=null){var E=new Se((_[0]+_[1])/2,t);o.foundPossibleResultPoint(E)}var w=_[1],S=w+(w-_[0]);if(S>=r.getSize()||!r.isRange(w,S,!1))throw new ae;var D=p.toString();if(D.length<8)throw new ge;if(!e.checkChecksum(D))throw new bn;var T=(a[1]+a[0])/2,O=(_[1]+_[0])/2,j=this.getBarcodeFormat(),z=[new Se(T,t),new Se(O,t)],H=new hr(D,null,0,z,j,new Date().getTime()),q=0;try{var N=uk.decodeRow(t,r,_[1]);H.putMetadata(ar.UPC_EAN_EXTENSION,N.getText()),H.putAllMetadata(N.getResultMetadata()),H.addResultPoints(N.getResultPoints()),q=N.getText().length}catch{}var b=i==null?null:i.get(Vt.ALLOWED_EAN_EXTENSIONS);if(b!=null){var I=!1;for(var k in b)if(q.toString()===k){I=!0;break}if(!I)throw new ae}return j===Me.EAN_13||Me.UPC_A,H},e.checkChecksum=function(t){return e.checkStandardUPCEANChecksum(t)},e.checkStandardUPCEANChecksum=function(t){var r=t.length;if(r===0)return!1;var i=parseInt(t.charAt(r-1),10);return e.getStandardUPCEANChecksum(t.substring(0,r-1))===i},e.getStandardUPCEANChecksum=function(t){for(var r=t.length,i=0,a=r-1;a>=0;a-=2){var o=t.charAt(a).charCodeAt(0)-48;if(o<0||o>9)throw new ge;i+=o}i*=3;for(var a=r-2;a>=0;a-=2){var o=t.charAt(a).charCodeAt(0)-48;if(o<0||o>9)throw new ge;i+=o}return(1e3-i)%10},e.decodeEnd=function(t,r){return e.findGuardPattern(t,r,!1,e.START_END_PATTERN,new Int32Array(e.START_END_PATTERN.length).fill(0))},e})(Tc),hk=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),NA=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},lv=(function(n){hk(e,n);function e(){var t=n.call(this)||this;return t.decodeMiddleCounters=Int32Array.from([0,0,0,0]),t}return e.prototype.decodeMiddle=function(t,r,i){var a,o,c,u,h=this.decodeMiddleCounters;h[0]=0,h[1]=0,h[2]=0,h[3]=0;for(var p=t.getSize(),g=r[1],_=0,E=0;E<6&&g<p;E++){var w=Rn.decodeDigit(t,h,g,Rn.L_AND_G_PATTERNS);i+=String.fromCharCode(48+w%10);try{for(var S=(a=void 0,NA(h)),D=S.next();!D.done;D=S.next()){var T=D.value;g+=T}}catch(H){a={error:H}}finally{try{D&&!D.done&&(o=S.return)&&o.call(S)}finally{if(a)throw a.error}}w>=10&&(_|=1<<5-E)}i=e.determineFirstDigit(i,_);var O=Rn.findGuardPattern(t,g,!0,Rn.MIDDLE_PATTERN,new Int32Array(Rn.MIDDLE_PATTERN.length).fill(0));g=O[1];for(var E=0;E<6&&g<p;E++){var w=Rn.decodeDigit(t,h,g,Rn.L_PATTERNS);i+=String.fromCharCode(48+w);try{for(var j=(c=void 0,NA(h)),z=j.next();!z.done;z=j.next()){var T=z.value;g+=T}}catch(N){c={error:N}}finally{try{z&&!z.done&&(u=j.return)&&u.call(j)}finally{if(c)throw c.error}}}return{rowOffset:g,resultString:i}},e.prototype.getBarcodeFormat=function(){return Me.EAN_13},e.determineFirstDigit=function(t,r){for(var i=0;i<10;i++)if(r===this.FIRST_DIGIT_ENCODINGS[i])return t=String.fromCharCode(48+i)+t,t;throw new ae},e.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26],e})(Rn),dk=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),RA=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},OA=(function(n){dk(e,n);function e(){var t=n.call(this)||this;return t.decodeMiddleCounters=Int32Array.from([0,0,0,0]),t}return e.prototype.decodeMiddle=function(t,r,i){var a,o,c,u,h=this.decodeMiddleCounters;h[0]=0,h[1]=0,h[2]=0,h[3]=0;for(var p=t.getSize(),g=r[1],_=0;_<4&&g<p;_++){var E=Rn.decodeDigit(t,h,g,Rn.L_PATTERNS);i+=String.fromCharCode(48+E);try{for(var w=(a=void 0,RA(h)),S=w.next();!S.done;S=w.next()){var D=S.value;g+=D}}catch(z){a={error:z}}finally{try{S&&!S.done&&(o=w.return)&&o.call(w)}finally{if(a)throw a.error}}}var T=Rn.findGuardPattern(t,g,!0,Rn.MIDDLE_PATTERN,new Int32Array(Rn.MIDDLE_PATTERN.length).fill(0));g=T[1];for(var _=0;_<4&&g<p;_++){var E=Rn.decodeDigit(t,h,g,Rn.L_PATTERNS);i+=String.fromCharCode(48+E);try{for(var O=(c=void 0,RA(h)),j=O.next();!j.done;j=O.next()){var D=j.value;g+=D}}catch(q){c={error:q}}finally{try{j&&!j.done&&(u=O.return)&&u.call(O)}finally{if(c)throw c.error}}}return{rowOffset:g,resultString:i}},e.prototype.getBarcodeFormat=function(){return Me.EAN_8},e})(Rn),pk=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),DA=(function(n){pk(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.ean13Reader=new lv,t}return e.prototype.getBarcodeFormat=function(){return Me.UPC_A},e.prototype.decode=function(t,r){return this.maybeReturnResult(this.ean13Reader.decode(t))},e.prototype.decodeRow=function(t,r,i){return this.maybeReturnResult(this.ean13Reader.decodeRow(t,r,i))},e.prototype.decodeMiddle=function(t,r,i){return this.ean13Reader.decodeMiddle(t,r,i)},e.prototype.maybeReturnResult=function(t){var r=t.getText();if(r.charAt(0)==="0"){var i=new hr(r.substring(1),null,null,t.getResultPoints(),Me.UPC_A);return t.getResultMetadata()!=null&&i.putAllMetadata(t.getResultMetadata()),i}else throw new ae},e.prototype.reset=function(){this.ean13Reader.reset()},e})(Rn),mk=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),gk=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},MA=(function(n){mk(e,n);function e(){var t=n.call(this)||this;return t.decodeMiddleCounters=new Int32Array(4),t}return e.prototype.decodeMiddle=function(t,r,i){var a,o,c=this.decodeMiddleCounters.map(function(D){return D});c[0]=0,c[1]=0,c[2]=0,c[3]=0;for(var u=t.getSize(),h=r[1],p=0,g=0;g<6&&h<u;g++){var _=e.decodeDigit(t,c,h,e.L_AND_G_PATTERNS);i+=String.fromCharCode(48+_%10);try{for(var E=(a=void 0,gk(c)),w=E.next();!w.done;w=E.next()){var S=w.value;h+=S}}catch(D){a={error:D}}finally{try{w&&!w.done&&(o=E.return)&&o.call(E)}finally{if(a)throw a.error}}_>=10&&(p|=1<<5-g)}return e.determineNumSysAndCheckDigit(new We(i),p),h},e.prototype.decodeEnd=function(t,r){return e.findGuardPatternWithoutCounters(t,r,!0,e.MIDDLE_END_PATTERN)},e.prototype.checkChecksum=function(t){return Rn.checkChecksum(e.convertUPCEtoUPCA(t))},e.determineNumSysAndCheckDigit=function(t,r){for(var i=0;i<=1;i++)for(var a=0;a<10;a++)if(r===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[i][a]){t.insert(0,"0"+i),t.append("0"+a);return}throw ae.getNotFoundInstance()},e.prototype.getBarcodeFormat=function(){return Me.UPC_E},e.convertUPCEtoUPCA=function(t){var r=t.slice(1,7).split("").map(function(o){return o.charCodeAt(0)}),i=new We;i.append(t.charAt(0));var a=r[5];switch(a){case 0:case 1:case 2:i.appendChars(r,0,2),i.append(a),i.append("0000"),i.appendChars(r,2,3);break;case 3:i.appendChars(r,0,3),i.append("00000"),i.appendChars(r,3,2);break;case 4:i.appendChars(r,0,4),i.append("00000"),i.append(r[4]);break;default:i.appendChars(r,0,5),i.append("0000"),i.append(a);break}return t.length>=8&&i.append(t.charAt(7)),i.toString()},e.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),e.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,1])],e})(Rn),vk=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),PA=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Hm=(function(n){vk(e,n);function e(t){var r=n.call(this)||this,i=t==null?null:t.get(Vt.POSSIBLE_FORMATS),a=[];return i!=null&&(i.indexOf(Me.EAN_13)>-1&&a.push(new lv),i.indexOf(Me.UPC_A)>-1&&a.push(new DA),i.indexOf(Me.EAN_8)>-1&&a.push(new OA),i.indexOf(Me.UPC_E)>-1&&a.push(new MA)),a.length===0&&(a.push(new lv),a.push(new DA),a.push(new OA),a.push(new MA)),r.readers=a,r}return e.prototype.decodeRow=function(t,r,i){var a,o;try{for(var c=PA(this.readers),u=c.next();!u.done;u=c.next()){var h=u.value;try{var p=h.decodeRow(t,r,i),g=p.getBarcodeFormat()===Me.EAN_13&&p.getText().charAt(0)==="0",_=i==null?null:i.get(Vt.POSSIBLE_FORMATS),E=_==null||_.includes(Me.UPC_A);if(g&&E){var w=p.getRawBytes(),S=new hr(p.getText().substring(1),w,w?w.length:null,p.getResultPoints(),Me.UPC_A);return S.putAllMetadata(p.getResultMetadata()),S}return p}catch{}}}catch(D){a={error:D}}finally{try{u&&!u.done&&(o=c.return)&&o.call(c)}finally{if(a)throw a.error}}throw new ae},e.prototype.reset=function(){var t,r;try{for(var i=PA(this.readers),a=i.next();!a.done;a=i.next()){var o=a.value;o.reset()}}catch(c){t={error:c}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}},e})(Mn),yk=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),_k=(function(n){yk(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.CODA_BAR_CHAR_SET={nnnnnww:"0",nnnnwwn:"1",nnnwnnw:"2",wwnnnnn:"3",nnwnnwn:"4",wnnnnwn:"5",nwnnnnw:"6",nwnnwnn:"7",nwwnnnn:"8",wnnwnnn:"9",nnnwwnn:"-",nnwwnnn:"$",wnnnwnw:":",wnwnnnw:"/",wnwnwnn:".",nnwwwww:"+",nnwwnwn:"A",nwnwnnw:"B",nnnwnww:"C",nnnwwwn:"D"},t}return e.prototype.decodeRow=function(t,r,i){var a=this.getValidRowData(r);if(!a)throw new ae;var o=this.codaBarDecodeRow(a.row);if(!o)throw new ae;return new hr(o,null,0,[new Se(a.left,t),new Se(a.right,t)],Me.CODABAR,new Date().getTime())},e.prototype.getValidRowData=function(t){var r=t.toArray(),i=r.indexOf(!0);if(i===-1)return null;var a=r.lastIndexOf(!0);if(a<=i)return null;r=r.slice(i,a+1);for(var o=[],c=r[0],u=1,h=1;h<r.length;h++)r[h]===c?u++:(c=r[h],o.push(u),u=1);return o.push(u),o.length<23&&(o.length+1)%8!==0?null:{row:o,left:i,right:a}},e.prototype.codaBarDecodeRow=function(t){for(var r=[],i=Math.ceil(t.reduce(function(u,h){return(u+h)/2},0));t.length>0;){var a=t.splice(0,8).splice(0,7),o=a.map(function(u){return u<i?"n":"w"}).join("");if(this.CODA_BAR_CHAR_SET[o]===void 0)return null;r.push(this.CODA_BAR_CHAR_SET[o])}var c=r.join("");return this.validCodaBarString(c)?c:null},e.prototype.validCodaBarString=function(t){var r=/^[A-D].{1,}[A-D]$/;return r.test(t)},e})(Mn),xk=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Ek=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Go=(function(n){xk(e,n);function e(){var t=n.call(this)||this;return t.decodeFinderCounters=new Int32Array(4),t.dataCharacterCounters=new Int32Array(8),t.oddRoundingErrors=new Array(4),t.evenRoundingErrors=new Array(4),t.oddCounts=new Array(t.dataCharacterCounters.length/2),t.evenCounts=new Array(t.dataCharacterCounters.length/2),t}return e.prototype.getDecodeFinderCounters=function(){return this.decodeFinderCounters},e.prototype.getDataCharacterCounters=function(){return this.dataCharacterCounters},e.prototype.getOddRoundingErrors=function(){return this.oddRoundingErrors},e.prototype.getEvenRoundingErrors=function(){return this.evenRoundingErrors},e.prototype.getOddCounts=function(){return this.oddCounts},e.prototype.getEvenCounts=function(){return this.evenCounts},e.prototype.parseFinderValue=function(t,r){for(var i=0;i<r.length;i++)if(Mn.patternMatchVariance(t,r[i],e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return i;throw new ae},e.count=function(t){return mt.sum(new Int32Array(t))},e.increment=function(t,r){for(var i=0,a=r[0],o=1;o<t.length;o++)r[o]>a&&(a=r[o],i=o);t[i]++},e.decrement=function(t,r){for(var i=0,a=r[0],o=1;o<t.length;o++)r[o]<a&&(a=r[o],i=o);t[i]--},e.isFinderPattern=function(t){var r,i,a=t[0]+t[1],o=a+t[2]+t[3],c=a/o;if(c>=e.MIN_FINDER_PATTERN_RATIO&&c<=e.MAX_FINDER_PATTERN_RATIO){var u=Number.MAX_SAFE_INTEGER,h=Number.MIN_SAFE_INTEGER;try{for(var p=Ek(t),g=p.next();!g.done;g=p.next()){var _=g.value;_>h&&(h=_),_<u&&(u=_)}}catch(E){r={error:E}}finally{try{g&&!g.done&&(i=p.return)&&i.call(p)}finally{if(r)throw r.error}}return h<10*u}return!1},e.MAX_AVG_VARIANCE=.2,e.MAX_INDIVIDUAL_VARIANCE=.45,e.MIN_FINDER_PATTERN_RATIO=9.5/12,e.MAX_FINDER_PATTERN_RATIO=12.5/14,e})(Mn),C0=(function(){function n(e,t){this.value=e,this.checksumPortion=t}return n.prototype.getValue=function(){return this.value},n.prototype.getChecksumPortion=function(){return this.checksumPortion},n.prototype.toString=function(){return this.value+"("+this.checksumPortion+")"},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.value===t.value&&this.checksumPortion===t.checksumPortion},n.prototype.hashCode=function(){return this.value^this.checksumPortion},n})(),A3=(function(){function n(e,t,r,i,a){this.value=e,this.startEnd=t,this.value=e,this.startEnd=t,this.resultPoints=new Array,this.resultPoints.push(new Se(r,a)),this.resultPoints.push(new Se(i,a))}return n.prototype.getValue=function(){return this.value},n.prototype.getStartEnd=function(){return this.startEnd},n.prototype.getResultPoints=function(){return this.resultPoints},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.value===t.value},n.prototype.hashCode=function(){return this.value},n})(),wk=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},cc=(function(){function n(){}return n.getRSSvalue=function(e,t,r){var i,a,o=0;try{for(var c=wk(e),u=c.next();!u.done;u=c.next()){var h=u.value;o+=h}}catch(O){i={error:O}}finally{try{u&&!u.done&&(a=c.return)&&a.call(c)}finally{if(i)throw i.error}}for(var p=0,g=0,_=e.length,E=0;E<_-1;E++){var w=void 0;for(w=1,g|=1<<E;w<e[E];w++,g&=~(1<<E)){var S=n.combins(o-w-1,_-E-2);if(r&&g===0&&o-w-(_-E-1)>=_-E-1&&(S-=n.combins(o-w-(_-E),_-E-2)),_-E-1>1){for(var D=0,T=o-w-(_-E-2);T>t;T--)D+=n.combins(o-w-T-1,_-E-3);S-=D*(_-1-E)}else o-w>t&&S--;p+=S}o-=w}return p},n.combins=function(e,t){var r,i;e-t>t?(i=t,r=e-t):(i=e-t,r=t);for(var a=1,o=1,c=e;c>r;c--)a*=c,o<=i&&(a/=o,o++);for(;o<=i;)a/=o,o++;return a},n})(),Ak=(function(){function n(){}return n.buildBitArray=function(e){var t=e.length*2-1;e[e.length-1].getRightChar()==null&&(t-=1);for(var r=12*t,i=new qn(r),a=0,o=e[0],c=o.getRightChar().getValue(),u=11;u>=0;--u)(c&1<<u)!==0&&i.set(a),a++;for(var u=1;u<e.length;++u){for(var h=e[u],p=h.getLeftChar().getValue(),g=11;g>=0;--g)(p&1<<g)!==0&&i.set(a),a++;if(h.getRightChar()!==null)for(var _=h.getRightChar().getValue(),g=11;g>=0;--g)(_&1<<g)!==0&&i.set(a),a++}return i},n})(),Uo=(function(){function n(e,t){t?this.decodedInformation=null:(this.finished=e,this.decodedInformation=t)}return n.prototype.getDecodedInformation=function(){return this.decodedInformation},n.prototype.isFinished=function(){return this.finished},n})(),Fy=(function(){function n(e){this.newPosition=e}return n.prototype.getNewPosition=function(){return this.newPosition},n})(),bk=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Si=(function(n){bk(e,n);function e(t,r){var i=n.call(this,t)||this;return i.value=r,i}return e.prototype.getValue=function(){return this.value},e.prototype.isFNC1=function(){return this.value===e.FNC1},e.FNC1="$",e})(Fy),Sk=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),zo=(function(n){Sk(e,n);function e(t,r,i){var a=n.call(this,t)||this;return i?(a.remaining=!0,a.remainingValue=a.remainingValue):(a.remaining=!1,a.remainingValue=0),a.newString=r,a}return e.prototype.getNewString=function(){return this.newString},e.prototype.isRemaining=function(){return this.remaining},e.prototype.getRemainingValue=function(){return this.remainingValue},e})(Fy),Ck=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Ql=(function(n){Ck(e,n);function e(t,r,i){var a=n.call(this,t)||this;if(r<0||r>10||i<0||i>10)throw new ge;return a.firstDigit=r,a.secondDigit=i,a}return e.prototype.getFirstDigit=function(){return this.firstDigit},e.prototype.getSecondDigit=function(){return this.secondDigit},e.prototype.getValue=function(){return this.firstDigit*10+this.secondDigit},e.prototype.isFirstDigitFNC1=function(){return this.firstDigit===e.FNC1},e.prototype.isSecondDigitFNC1=function(){return this.secondDigit===e.FNC1},e.prototype.isAnyFNC1=function(){return this.firstDigit===e.FNC1||this.secondDigit===e.FNC1},e.FNC1=10,e})(Fy),Rd=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Tk=(function(){function n(){}return n.parseFieldsInGeneralPurpose=function(e){var t,r,i,a,o,c,u,h;if(!e)return null;if(e.length<2)throw new ae;var p=e.substring(0,2);try{for(var g=Rd(n.TWO_DIGIT_DATA_LENGTH),_=g.next();!_.done;_=g.next()){var E=_.value;if(E[0]===p)return E[1]===n.VARIABLE_LENGTH?n.processVariableAI(2,E[2],e):n.processFixedAI(2,E[1],e)}}catch(q){t={error:q}}finally{try{_&&!_.done&&(r=g.return)&&r.call(g)}finally{if(t)throw t.error}}if(e.length<3)throw new ae;var w=e.substring(0,3);try{for(var S=Rd(n.THREE_DIGIT_DATA_LENGTH),D=S.next();!D.done;D=S.next()){var E=D.value;if(E[0]===w)return E[1]===n.VARIABLE_LENGTH?n.processVariableAI(3,E[2],e):n.processFixedAI(3,E[1],e)}}catch(q){i={error:q}}finally{try{D&&!D.done&&(a=S.return)&&a.call(S)}finally{if(i)throw i.error}}try{for(var T=Rd(n.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH),O=T.next();!O.done;O=T.next()){var E=O.value;if(E[0]===w)return E[1]===n.VARIABLE_LENGTH?n.processVariableAI(4,E[2],e):n.processFixedAI(4,E[1],e)}}catch(q){o={error:q}}finally{try{O&&!O.done&&(c=T.return)&&c.call(T)}finally{if(o)throw o.error}}if(e.length<4)throw new ae;var j=e.substring(0,4);try{for(var z=Rd(n.FOUR_DIGIT_DATA_LENGTH),H=z.next();!H.done;H=z.next()){var E=H.value;if(E[0]===j)return E[1]===n.VARIABLE_LENGTH?n.processVariableAI(4,E[2],e):n.processFixedAI(4,E[1],e)}}catch(q){u={error:q}}finally{try{H&&!H.done&&(h=z.return)&&h.call(z)}finally{if(u)throw u.error}}throw new ae},n.processFixedAI=function(e,t,r){if(r.length<e)throw new ae;var i=r.substring(0,e);if(r.length<e+t)throw new ae;var a=r.substring(e,e+t),o=r.substring(e+t),c="("+i+")"+a,u=n.parseFieldsInGeneralPurpose(o);return u==null?c:c+u},n.processVariableAI=function(e,t,r){var i=r.substring(0,e),a;r.length<e+t?a=r.length:a=e+t;var o=r.substring(e,a),c=r.substring(a),u="("+i+")"+o,h=n.parseFieldsInGeneralPurpose(c);return h==null?u:u+h},n.VARIABLE_LENGTH=[],n.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",n.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",n.VARIABLE_LENGTH,20],["22",n.VARIABLE_LENGTH,29],["30",n.VARIABLE_LENGTH,8],["37",n.VARIABLE_LENGTH,8],["90",n.VARIABLE_LENGTH,30],["91",n.VARIABLE_LENGTH,30],["92",n.VARIABLE_LENGTH,30],["93",n.VARIABLE_LENGTH,30],["94",n.VARIABLE_LENGTH,30],["95",n.VARIABLE_LENGTH,30],["96",n.VARIABLE_LENGTH,30],["97",n.VARIABLE_LENGTH,3],["98",n.VARIABLE_LENGTH,30],["99",n.VARIABLE_LENGTH,30]],n.THREE_DIGIT_DATA_LENGTH=[["240",n.VARIABLE_LENGTH,30],["241",n.VARIABLE_LENGTH,30],["242",n.VARIABLE_LENGTH,6],["250",n.VARIABLE_LENGTH,30],["251",n.VARIABLE_LENGTH,30],["253",n.VARIABLE_LENGTH,17],["254",n.VARIABLE_LENGTH,20],["400",n.VARIABLE_LENGTH,30],["401",n.VARIABLE_LENGTH,30],["402",17],["403",n.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",n.VARIABLE_LENGTH,20],["421",n.VARIABLE_LENGTH,15],["422",3],["423",n.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],n.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",n.VARIABLE_LENGTH,15],["391",n.VARIABLE_LENGTH,18],["392",n.VARIABLE_LENGTH,15],["393",n.VARIABLE_LENGTH,18],["703",n.VARIABLE_LENGTH,30]],n.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",n.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",n.VARIABLE_LENGTH,20],["8003",n.VARIABLE_LENGTH,30],["8004",n.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",n.VARIABLE_LENGTH,30],["8008",n.VARIABLE_LENGTH,12],["8018",18],["8020",n.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",n.VARIABLE_LENGTH,70],["8200",n.VARIABLE_LENGTH,70]],n})(),Yd=(function(){function n(e){this.buffer=new We,this.information=e}return n.prototype.decodeAllCodes=function(e,t){var r=t,i=null;do{var a=this.decodeGeneralPurposeField(r,i),o=Tk.parseFieldsInGeneralPurpose(a.getNewString());if(o!=null&&e.append(o),a.isRemaining()?i=""+a.getRemainingValue():i=null,r===a.getNewPosition())break;r=a.getNewPosition()}while(!0);return e.toString()},n.prototype.isStillNumeric=function(e){if(e+7>this.information.getSize())return e+4<=this.information.getSize();for(var t=e;t<e+3;++t)if(this.information.get(t))return!0;return this.information.get(e+3)},n.prototype.decodeNumeric=function(e){if(e+7>this.information.getSize()){var t=this.extractNumericValueFromBitArray(e,4);return t===0?new Ql(this.information.getSize(),Ql.FNC1,Ql.FNC1):new Ql(this.information.getSize(),t-1,Ql.FNC1)}var r=this.extractNumericValueFromBitArray(e,7),i=(r-8)/11,a=(r-8)%11;return new Ql(e+7,i,a)},n.prototype.extractNumericValueFromBitArray=function(e,t){return n.extractNumericValueFromBitArray(this.information,e,t)},n.extractNumericValueFromBitArray=function(e,t,r){for(var i=0,a=0;a<r;++a)e.get(t+a)&&(i|=1<<r-a-1);return i},n.prototype.decodeGeneralPurposeField=function(e,t){this.buffer.setLengthToZero(),t!=null&&this.buffer.append(t),this.current.setPosition(e);var r=this.parseBlocks();return r!=null&&r.isRemaining()?new zo(this.current.getPosition(),this.buffer.toString(),r.getRemainingValue()):new zo(this.current.getPosition(),this.buffer.toString())},n.prototype.parseBlocks=function(){var e,t;do{var r=this.current.getPosition();this.current.isAlpha()?(t=this.parseAlphaBlock(),e=t.isFinished()):this.current.isIsoIec646()?(t=this.parseIsoIec646Block(),e=t.isFinished()):(t=this.parseNumericBlock(),e=t.isFinished());var i=r!==this.current.getPosition();if(!i&&!e)break}while(!e);return t.getDecodedInformation()},n.prototype.parseNumericBlock=function(){for(;this.isStillNumeric(this.current.getPosition());){var e=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFirstDigitFNC1()){var t=void 0;return e.isSecondDigitFNC1()?t=new zo(this.current.getPosition(),this.buffer.toString()):t=new zo(this.current.getPosition(),this.buffer.toString(),e.getSecondDigit()),new Uo(!0,t)}if(this.buffer.append(e.getFirstDigit()),e.isSecondDigitFNC1()){var t=new zo(this.current.getPosition(),this.buffer.toString());return new Uo(!0,t)}this.buffer.append(e.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new Uo(!1)},n.prototype.parseIsoIec646Block=function(){for(;this.isStillIsoIec646(this.current.getPosition());){var e=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var t=new zo(this.current.getPosition(),this.buffer.toString());return new Uo(!0,t)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new Uo(!1)},n.prototype.parseAlphaBlock=function(){for(;this.isStillAlpha(this.current.getPosition());){var e=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var t=new zo(this.current.getPosition(),this.buffer.toString());return new Uo(!0,t)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new Uo(!1)},n.prototype.isStillIsoIec646=function(e){if(e+5>this.information.getSize())return!1;var t=this.extractNumericValueFromBitArray(e,5);if(t>=5&&t<16)return!0;if(e+7>this.information.getSize())return!1;var r=this.extractNumericValueFromBitArray(e,7);if(r>=64&&r<116)return!0;if(e+8>this.information.getSize())return!1;var i=this.extractNumericValueFromBitArray(e,8);return i>=232&&i<253},n.prototype.decodeIsoIec646=function(e){var t=this.extractNumericValueFromBitArray(e,5);if(t===15)return new Si(e+5,Si.FNC1);if(t>=5&&t<15)return new Si(e+5,"0"+(t-5));var r=this.extractNumericValueFromBitArray(e,7);if(r>=64&&r<90)return new Si(e+7,""+(r+1));if(r>=90&&r<116)return new Si(e+7,""+(r+7));var i=this.extractNumericValueFromBitArray(e,8),a;switch(i){case 232:a="!";break;case 233:a='"';break;case 234:a="%";break;case 235:a="&";break;case 236:a="'";break;case 237:a="(";break;case 238:a=")";break;case 239:a="*";break;case 240:a="+";break;case 241:a=",";break;case 242:a="-";break;case 243:a=".";break;case 244:a="/";break;case 245:a=":";break;case 246:a=";";break;case 247:a="<";break;case 248:a="=";break;case 249:a=">";break;case 250:a="?";break;case 251:a="_";break;case 252:a=" ";break;default:throw new ge}return new Si(e+8,a)},n.prototype.isStillAlpha=function(e){if(e+5>this.information.getSize())return!1;var t=this.extractNumericValueFromBitArray(e,5);if(t>=5&&t<16)return!0;if(e+6>this.information.getSize())return!1;var r=this.extractNumericValueFromBitArray(e,6);return r>=16&&r<63},n.prototype.decodeAlphanumeric=function(e){var t=this.extractNumericValueFromBitArray(e,5);if(t===15)return new Si(e+5,Si.FNC1);if(t>=5&&t<15)return new Si(e+5,"0"+(t-5));var r=this.extractNumericValueFromBitArray(e,6);if(r>=32&&r<58)return new Si(e+6,""+(r+33));var i;switch(r){case 58:i="*";break;case 59:i=",";break;case 60:i="-";break;case 61:i=".";break;case 62:i="/";break;default:throw new Xf("Decoding invalid alphanumeric value: "+r)}return new Si(e+6,i)},n.prototype.isAlphaTo646ToAlphaLatch=function(e){if(e+1>this.information.getSize())return!1;for(var t=0;t<5&&t+e<this.information.getSize();++t)if(t===2){if(!this.information.get(e+2))return!1}else if(this.information.get(e+t))return!1;return!0},n.prototype.isAlphaOr646ToNumericLatch=function(e){if(e+3>this.information.getSize())return!1;for(var t=e;t<e+3;++t)if(this.information.get(t))return!1;return!0},n.prototype.isNumericToAlphaNumericLatch=function(e){if(e+1>this.information.getSize())return!1;for(var t=0;t<4&&t+e<this.information.getSize();++t)if(this.information.get(e+t))return!1;return!0},n})(),b3=(function(){function n(e){this.information=e,this.generalDecoder=new Yd(e)}return n.prototype.getInformation=function(){return this.information},n.prototype.getGeneralDecoder=function(){return this.generalDecoder},n})(),Ik=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Ti=(function(n){Ik(e,n);function e(t){return n.call(this,t)||this}return e.prototype.encodeCompressedGtin=function(t,r){t.append("(01)");var i=t.length();t.append("9"),this.encodeCompressedGtinWithoutAI(t,r,i)},e.prototype.encodeCompressedGtinWithoutAI=function(t,r,i){for(var a=0;a<4;++a){var o=this.getGeneralDecoder().extractNumericValueFromBitArray(r+10*a,10);o/100===0&&t.append("0"),o/10===0&&t.append("0"),t.append(o)}e.appendCheckDigit(t,i)},e.appendCheckDigit=function(t,r){for(var i=0,a=0;a<13;a++){var o=t.charAt(a+r).charCodeAt(0)-48;i+=(a&1)===0?3*o:o}i=10-i%10,i===10&&(i=0),t.append(i)},e.GTIN_SIZE=40,e})(b3),Nk=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Rk=(function(n){Nk(e,n);function e(t){return n.call(this,t)||this}return e.prototype.parseInformation=function(){var t=new We;t.append("(01)");var r=t.length(),i=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE,4);return t.append(i),this.encodeCompressedGtinWithoutAI(t,e.HEADER_SIZE+4,r),this.getGeneralDecoder().decodeAllCodes(t,e.HEADER_SIZE+44)},e.HEADER_SIZE=4,e})(Ti),Ok=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Dk=(function(n){Ok(e,n);function e(t){return n.call(this,t)||this}return e.prototype.parseInformation=function(){var t=new We;return this.getGeneralDecoder().decodeAllCodes(t,e.HEADER_SIZE)},e.HEADER_SIZE=5,e})(b3),Mk=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Wd=(function(n){Mk(e,n);function e(t){return n.call(this,t)||this}return e.prototype.encodeCompressedWeight=function(t,r,i){var a=this.getGeneralDecoder().extractNumericValueFromBitArray(r,i);this.addWeightCode(t,a);for(var o=this.checkWeight(a),c=1e5,u=0;u<5;++u)o/c===0&&t.append("0"),c/=10;t.append(o)},e})(Ti),Pk=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),S3=(function(n){Pk(e,n);function e(t){return n.call(this,t)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()!==e.HEADER_SIZE+Wd.GTIN_SIZE+e.WEIGHT_SIZE)throw new ae;var t=new We;return this.encodeCompressedGtin(t,e.HEADER_SIZE),this.encodeCompressedWeight(t,e.HEADER_SIZE+Wd.GTIN_SIZE,e.WEIGHT_SIZE),t.toString()},e.HEADER_SIZE=5,e.WEIGHT_SIZE=15,e})(Wd),kk=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Lk=(function(n){kk(e,n);function e(t){return n.call(this,t)||this}return e.prototype.addWeightCode=function(t,r){t.append("(3103)")},e.prototype.checkWeight=function(t){return t},e})(S3),jk=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Bk=(function(n){jk(e,n);function e(t){return n.call(this,t)||this}return e.prototype.addWeightCode=function(t,r){r<1e4?t.append("(3202)"):t.append("(3203)")},e.prototype.checkWeight=function(t){return t<1e4?t:t-1e4},e})(S3),Vk=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Fk=(function(n){Vk(e,n);function e(t){return n.call(this,t)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()<e.HEADER_SIZE+Ti.GTIN_SIZE)throw new ae;var t=new We;this.encodeCompressedGtin(t,e.HEADER_SIZE);var r=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+Ti.GTIN_SIZE,e.LAST_DIGIT_SIZE);t.append("(392"),t.append(r),t.append(")");var i=this.getGeneralDecoder().decodeGeneralPurposeField(e.HEADER_SIZE+Ti.GTIN_SIZE+e.LAST_DIGIT_SIZE,null);return t.append(i.getNewString()),t.toString()},e.HEADER_SIZE=8,e.LAST_DIGIT_SIZE=2,e})(Ti),Uk=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),zk=(function(n){Uk(e,n);function e(t){return n.call(this,t)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()<e.HEADER_SIZE+Ti.GTIN_SIZE)throw new ae;var t=new We;this.encodeCompressedGtin(t,e.HEADER_SIZE);var r=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+Ti.GTIN_SIZE,e.LAST_DIGIT_SIZE);t.append("(393"),t.append(r),t.append(")");var i=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+Ti.GTIN_SIZE+e.LAST_DIGIT_SIZE,e.FIRST_THREE_DIGITS_SIZE);i/100===0&&t.append("0"),i/10===0&&t.append("0"),t.append(i);var a=this.getGeneralDecoder().decodeGeneralPurposeField(e.HEADER_SIZE+Ti.GTIN_SIZE+e.LAST_DIGIT_SIZE+e.FIRST_THREE_DIGITS_SIZE,null);return t.append(a.getNewString()),t.toString()},e.HEADER_SIZE=8,e.LAST_DIGIT_SIZE=2,e.FIRST_THREE_DIGITS_SIZE=10,e})(Ti),Hk=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Ms=(function(n){Hk(e,n);function e(t,r,i){var a=n.call(this,t)||this;return a.dateCode=i,a.firstAIdigits=r,a}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()!==e.HEADER_SIZE+e.GTIN_SIZE+e.WEIGHT_SIZE+e.DATE_SIZE)throw new ae;var t=new We;return this.encodeCompressedGtin(t,e.HEADER_SIZE),this.encodeCompressedWeight(t,e.HEADER_SIZE+e.GTIN_SIZE,e.WEIGHT_SIZE),this.encodeCompressedDate(t,e.HEADER_SIZE+e.GTIN_SIZE+e.WEIGHT_SIZE),t.toString()},e.prototype.encodeCompressedDate=function(t,r){var i=this.getGeneralDecoder().extractNumericValueFromBitArray(r,e.DATE_SIZE);if(i!==38400){t.append("("),t.append(this.dateCode),t.append(")");var a=i%32;i/=32;var o=i%12+1;i/=12;var c=i;c/10===0&&t.append("0"),t.append(c),o/10===0&&t.append("0"),t.append(o),a/10===0&&t.append("0"),t.append(a)}},e.prototype.addWeightCode=function(t,r){t.append("("),t.append(this.firstAIdigits),t.append(r/1e5),t.append(")")},e.prototype.checkWeight=function(t){return t%1e5},e.HEADER_SIZE=8,e.WEIGHT_SIZE=20,e.DATE_SIZE=16,e})(Wd);function Gk(n){try{if(n.get(1))return new Rk(n);if(!n.get(2))return new Dk(n);var e=Yd.extractNumericValueFromBitArray(n,1,4);switch(e){case 4:return new Lk(n);case 5:return new Bk(n)}var t=Yd.extractNumericValueFromBitArray(n,1,5);switch(t){case 12:return new Fk(n);case 13:return new zk(n)}var r=Yd.extractNumericValueFromBitArray(n,1,7);switch(r){case 56:return new Ms(n,"310","11");case 57:return new Ms(n,"320","11");case 58:return new Ms(n,"310","13");case 59:return new Ms(n,"320","13");case 60:return new Ms(n,"310","15");case 61:return new Ms(n,"320","15");case 62:return new Ms(n,"310","17");case 63:return new Ms(n,"320","17")}}catch(i){throw console.log(i),new Xf("unknown decoder: "+n)}}var kA=(function(){function n(e,t,r,i){this.leftchar=e,this.rightchar=t,this.finderpattern=r,this.maybeLast=i}return n.prototype.mayBeLast=function(){return this.maybeLast},n.prototype.getLeftChar=function(){return this.leftchar},n.prototype.getRightChar=function(){return this.rightchar},n.prototype.getFinderPattern=function(){return this.finderpattern},n.prototype.mustBeLast=function(){return this.rightchar==null},n.prototype.toString=function(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"},n.equals=function(e,t){return e instanceof n?n.equalsOrNull(e.leftchar,t.leftchar)&&n.equalsOrNull(e.rightchar,t.rightchar)&&n.equalsOrNull(e.finderpattern,t.finderpattern):!1},n.equalsOrNull=function(e,t){return e===null?t===null:n.equals(e,t)},n.prototype.hashCode=function(){var e=this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue();return e},n})(),qk=(function(){function n(e,t,r){this.pairs=e,this.rowNumber=t,this.wasReversed=r}return n.prototype.getPairs=function(){return this.pairs},n.prototype.getRowNumber=function(){return this.rowNumber},n.prototype.isReversed=function(){return this.wasReversed},n.prototype.isEquivalent=function(e){return this.checkEqualitity(this,e)},n.prototype.toString=function(){return"{ "+this.pairs+" }"},n.prototype.equals=function(e,t){return e instanceof n?this.checkEqualitity(e,t)&&e.wasReversed===t.wasReversed:!1},n.prototype.checkEqualitity=function(e,t){if(!(!e||!t)){var r;return e.forEach(function(i,a){t.forEach(function(o){i.getLeftChar().getValue()===o.getLeftChar().getValue()&&i.getRightChar().getValue()===o.getRightChar().getValue()&&i.getFinderPatter().getValue()===o.getFinderPatter().getValue()&&(r=!0)})}),r}},n})(),$k=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Ps=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Xk=(function(n){$k(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.pairs=new Array(e.MAX_PAIRS),t.rows=new Array,t.startEnd=[2],t}return e.prototype.decodeRow=function(t,r,i){this.pairs.length=0,this.startFromEven=!1;try{return e.constructResult(this.decodeRow2pairs(t,r))}catch{}return this.pairs.length=0,this.startFromEven=!0,e.constructResult(this.decodeRow2pairs(t,r))},e.prototype.reset=function(){this.pairs.length=0,this.rows.length=0},e.prototype.decodeRow2pairs=function(t,r){for(var i=!1;!i;)try{this.pairs.push(this.retrieveNextPair(r,this.pairs,t))}catch(c){if(c instanceof ae){if(!this.pairs.length)throw new ae;i=!0}}if(this.checkChecksum())return this.pairs;var a;if(this.rows.length?a=!0:a=!1,this.storeRow(t,!1),a){var o=this.checkRowsBoolean(!1);if(o!=null||(o=this.checkRowsBoolean(!0),o!=null))return o}throw new ae},e.prototype.checkRowsBoolean=function(t){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,t&&(this.rows=this.rows.reverse());var r=null;try{r=this.checkRows(new Array,0)}catch(i){console.log(i)}return t&&(this.rows=this.rows.reverse()),r},e.prototype.checkRows=function(t,r){for(var i,a,o=r;o<this.rows.length;o++){var c=this.rows[o];this.pairs.length=0;try{for(var u=(i=void 0,Ps(t)),h=u.next();!h.done;h=u.next()){var p=h.value;this.pairs.push(p.getPairs())}}catch(_){i={error:_}}finally{try{h&&!h.done&&(a=u.return)&&a.call(u)}finally{if(i)throw i.error}}if(this.pairs.push(c.getPairs()),!!e.isValidSequence(this.pairs)){if(this.checkChecksum())return this.pairs;var g=new Array(t);g.push(c);try{return this.checkRows(g,o+1)}catch(_){console.log(_)}}}throw new ae},e.isValidSequence=function(t){var r,i;try{for(var a=Ps(e.FINDER_PATTERN_SEQUENCES),o=a.next();!o.done;o=a.next()){var c=o.value;if(!(t.length>c.length)){for(var u=!0,h=0;h<t.length;h++)if(t[h].getFinderPattern().getValue()!==c[h]){u=!1;break}if(u)return!0}}}catch(p){r={error:p}}finally{try{o&&!o.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}return!1},e.prototype.storeRow=function(t,r){for(var i=0,a=!1,o=!1;i<this.rows.length;){var c=this.rows[i];if(c.getRowNumber()>t){o=c.isEquivalent(this.pairs);break}a=c.isEquivalent(this.pairs),i++}o||a||e.isPartialRow(this.pairs,this.rows)||(this.rows.push(i,new qk(this.pairs,t,r)),this.removePartialRows(this.pairs,this.rows))},e.prototype.removePartialRows=function(t,r){var i,a,o,c,u,h;try{for(var p=Ps(r),g=p.next();!g.done;g=p.next()){var _=g.value;if(_.getPairs().length!==t.length){var E=!0;try{for(var w=(o=void 0,Ps(_.getPairs())),S=w.next();!S.done;S=w.next()){var D=S.value,T=!1;try{for(var O=(u=void 0,Ps(t)),j=O.next();!j.done;j=O.next()){var z=j.value;if(kA.equals(D,z)){T=!0;break}}}catch(H){u={error:H}}finally{try{j&&!j.done&&(h=O.return)&&h.call(O)}finally{if(u)throw u.error}}T||(E=!1)}}catch(H){o={error:H}}finally{try{S&&!S.done&&(c=w.return)&&c.call(w)}finally{if(o)throw o.error}}}}}catch(H){i={error:H}}finally{try{g&&!g.done&&(a=p.return)&&a.call(p)}finally{if(i)throw i.error}}},e.isPartialRow=function(t,r){var i,a,o,c,u,h;try{for(var p=Ps(r),g=p.next();!g.done;g=p.next()){var _=g.value,E=!0;try{for(var w=(o=void 0,Ps(t)),S=w.next();!S.done;S=w.next()){var D=S.value,T=!1;try{for(var O=(u=void 0,Ps(_.getPairs())),j=O.next();!j.done;j=O.next()){var z=j.value;if(D.equals(z)){T=!0;break}}}catch(H){u={error:H}}finally{try{j&&!j.done&&(h=O.return)&&h.call(O)}finally{if(u)throw u.error}}if(!T){E=!1;break}}}catch(H){o={error:H}}finally{try{S&&!S.done&&(c=w.return)&&c.call(w)}finally{if(o)throw o.error}}if(E)return!0}}catch(H){i={error:H}}finally{try{g&&!g.done&&(a=p.return)&&a.call(p)}finally{if(i)throw i.error}}return!1},e.prototype.getRows=function(){return this.rows},e.constructResult=function(t){var r=Ak.buildBitArray(t),i=Gk(r),a=i.parseInformation(),o=t[0].getFinderPattern().getResultPoints(),c=t[t.length-1].getFinderPattern().getResultPoints(),u=[o[0],o[1],c[0],c[1]];return new hr(a,null,null,u,Me.RSS_EXPANDED,null)},e.prototype.checkChecksum=function(){var t=this.pairs.get(0),r=t.getLeftChar(),i=t.getRightChar();if(i===null)return!1;for(var a=i.getChecksumPortion(),o=2,c=1;c<this.pairs.size();++c){var u=this.pairs.get(c);a+=u.getLeftChar().getChecksumPortion(),o++;var h=u.getRightChar();h!=null&&(a+=h.getChecksumPortion(),o++)}a%=211;var p=211*(o-4)+a;return p===r.getValue()},e.getNextSecondBar=function(t,r){var i;return t.get(r)?(i=t.getNextUnset(r),i=t.getNextSet(i)):(i=t.getNextSet(r),i=t.getNextUnset(i)),i},e.prototype.retrieveNextPair=function(t,r,i){var a=r.length%2===0;this.startFromEven&&(a=!a);var o,c=!0,u=-1;do this.findNextPair(t,r,u),o=this.parseFoundFinderPattern(t,i,a),o===null?u=e.getNextSecondBar(t,this.startEnd[0]):c=!1;while(c);var h=this.decodeDataCharacter(t,o,a,!0);if(!this.isEmptyPair(r)&&r[r.length-1].mustBeLast())throw new ae;var p;try{p=this.decodeDataCharacter(t,o,a,!1)}catch(g){p=null,console.log(g)}return new kA(h,p,o,!0)},e.prototype.isEmptyPair=function(t){return t.length===0},e.prototype.findNextPair=function(t,r,i){var a=this.getDecodeFinderCounters();a[0]=0,a[1]=0,a[2]=0,a[3]=0;var o=t.getSize(),c;if(i>=0)c=i;else if(this.isEmptyPair(r))c=0;else{var u=r[r.length-1];c=u.getFinderPattern().getStartEnd()[1]}var h=r.length%2!==0;this.startFromEven&&(h=!h);for(var p=!1;c<o&&(p=!t.get(c),!!p);)c++;for(var g=0,_=c,E=c;E<o;E++)if(t.get(E)!==p)a[g]++;else{if(g===3){if(h&&e.reverseCounters(a),e.isFinderPattern(a)){this.startEnd[0]=_,this.startEnd[1]=E;return}h&&e.reverseCounters(a),_+=a[0]+a[1],a[0]=a[2],a[1]=a[3],a[2]=0,a[3]=0,g--}else g++;a[g]=1,p=!p}throw new ae},e.reverseCounters=function(t){for(var r=t.length,i=0;i<r/2;++i){var a=t[i];t[i]=t[r-i-1],t[r-i-1]=a}},e.prototype.parseFoundFinderPattern=function(t,r,i){var a,o,c;if(i){for(var u=this.startEnd[0]-1;u>=0&&!t.get(u);)u--;u++,a=this.startEnd[0]-u,o=u,c=this.startEnd[1]}else o=this.startEnd[0],c=t.getNextUnset(this.startEnd[1]+1),a=c-this.startEnd[1];var h=this.getDecodeFinderCounters();Bt.arraycopy(h,0,h,1,h.length-1),h[0]=a;var p;try{p=this.parseFinderValue(h,e.FINDER_PATTERNS)}catch{return null}return new A3(p,[o,c],o,c,r)},e.prototype.decodeDataCharacter=function(t,r,i,a){for(var o=this.getDataCharacterCounters(),c=0;c<o.length;c++)o[c]=0;if(a)e.recordPatternInReverse(t,r.getStartEnd()[0],o);else{e.recordPattern(t,r.getStartEnd()[1],o);for(var u=0,h=o.length-1;u<h;u++,h--){var p=o[u];o[u]=o[h],o[h]=p}}var g=17,_=mt.sum(new Int32Array(o))/g,E=(r.getStartEnd()[1]-r.getStartEnd()[0])/15;if(Math.abs(_-E)/E>.3)throw new ae;for(var w=this.getOddCounts(),S=this.getEvenCounts(),D=this.getOddRoundingErrors(),T=this.getEvenRoundingErrors(),u=0;u<o.length;u++){var O=1*o[u]/_,j=O+.5;if(j<1){if(O<.3)throw new ae;j=1}else if(j>8){if(O>8.7)throw new ae;j=8}var z=u/2;(u&1)===0?(w[z]=j,D[z]=O-j):(S[z]=j,T[z]=O-j)}this.adjustOddEvenCounts(g);for(var H=4*r.getValue()+(i?0:2)+(a?0:1)-1,q=0,N=0,u=w.length-1;u>=0;u--){if(e.isNotA1left(r,i,a)){var b=e.WEIGHTS[H][2*u];N+=w[u]*b}q+=w[u]}for(var I=0,u=S.length-1;u>=0;u--)if(e.isNotA1left(r,i,a)){var b=e.WEIGHTS[H][2*u+1];I+=S[u]*b}var k=N+I;if((q&1)!==0||q>13||q<4)throw new ae;var M=(13-q)/2,V=e.SYMBOL_WIDEST[M],L=9-V,ie=cc.getRSSvalue(w,V,!0),we=cc.getRSSvalue(S,L,!1),F=e.EVEN_TOTAL_SUBSET[M],se=e.GSUM[M],he=ie*F+we+se;return new C0(he,k)},e.isNotA1left=function(t,r,i){return!(t.getValue()===0&&r&&i)},e.prototype.adjustOddEvenCounts=function(t){var r=mt.sum(new Int32Array(this.getOddCounts())),i=mt.sum(new Int32Array(this.getEvenCounts())),a=!1,o=!1;r>13?o=!0:r<4&&(a=!0);var c=!1,u=!1;i>13?u=!0:i<4&&(c=!0);var h=r+i-t,p=(r&1)===1,g=(i&1)===0;if(h===1)if(p){if(g)throw new ae;o=!0}else{if(!g)throw new ae;u=!0}else if(h===-1)if(p){if(g)throw new ae;a=!0}else{if(!g)throw new ae;c=!0}else if(h===0){if(p){if(!g)throw new ae;r<i?(a=!0,u=!0):(o=!0,c=!0)}else if(g)throw new ae}else throw new ae;if(a){if(o)throw new ae;e.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(o&&e.decrement(this.getOddCounts(),this.getOddRoundingErrors()),c){if(u)throw new ae;e.increment(this.getEvenCounts(),this.getOddRoundingErrors())}u&&e.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},e.SYMBOL_WIDEST=[7,5,4,3,1],e.EVEN_TOTAL_SUBSET=[4,20,52,104,204],e.GSUM=[0,348,1388,2948,3988],e.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],e.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],e.FINDER_PAT_A=0,e.FINDER_PAT_B=1,e.FINDER_PAT_C=2,e.FINDER_PAT_D=3,e.FINDER_PAT_E=4,e.FINDER_PAT_F=5,e.FINDER_PATTERN_SEQUENCES=[[e.FINDER_PAT_A,e.FINDER_PAT_A],[e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B],[e.FINDER_PAT_A,e.FINDER_PAT_C,e.FINDER_PAT_B,e.FINDER_PAT_D],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_C],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_D,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_D],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_E],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F]],e.MAX_PAIRS=11,e})(Go),Kk=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Yk=(function(n){Kk(e,n);function e(t,r,i){var a=n.call(this,t,r)||this;return a.count=0,a.finderPattern=i,a}return e.prototype.getFinderPattern=function(){return this.finderPattern},e.prototype.getCount=function(){return this.count},e.prototype.incrementCount=function(){this.count++},e})(C0),Wk=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Gm=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},LA=(function(n){Wk(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.possibleLeftPairs=[],t.possibleRightPairs=[],t}return e.prototype.decodeRow=function(t,r,i){var a,o,c,u,h=this.decodePair(r,!1,t,i);e.addOrTally(this.possibleLeftPairs,h),r.reverse();var p=this.decodePair(r,!0,t,i);e.addOrTally(this.possibleRightPairs,p),r.reverse();try{for(var g=Gm(this.possibleLeftPairs),_=g.next();!_.done;_=g.next()){var E=_.value;if(E.getCount()>1)try{for(var w=(c=void 0,Gm(this.possibleRightPairs)),S=w.next();!S.done;S=w.next()){var D=S.value;if(D.getCount()>1&&e.checkChecksum(E,D))return e.constructResult(E,D)}}catch(T){c={error:T}}finally{try{S&&!S.done&&(u=w.return)&&u.call(w)}finally{if(c)throw c.error}}}}catch(T){a={error:T}}finally{try{_&&!_.done&&(o=g.return)&&o.call(g)}finally{if(a)throw a.error}}throw new ae},e.addOrTally=function(t,r){var i,a;if(r!=null){var o=!1;try{for(var c=Gm(t),u=c.next();!u.done;u=c.next()){var h=u.value;if(h.getValue()===r.getValue()){h.incrementCount(),o=!0;break}}}catch(p){i={error:p}}finally{try{u&&!u.done&&(a=c.return)&&a.call(c)}finally{if(i)throw i.error}}o||t.push(r)}},e.prototype.reset=function(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0},e.constructResult=function(t,r){for(var i=4537077*t.getValue()+r.getValue(),a=new String(i).toString(),o=new We,c=13-a.length;c>0;c--)o.append("0");o.append(a);for(var u=0,c=0;c<13;c++){var h=o.charAt(c).charCodeAt(0)-48;u+=(c&1)===0?3*h:h}u=10-u%10,u===10&&(u=0),o.append(u.toString());var p=t.getFinderPattern().getResultPoints(),g=r.getFinderPattern().getResultPoints();return new hr(o.toString(),null,0,[p[0],p[1],g[0],g[1]],Me.RSS_14,new Date().getTime())},e.checkChecksum=function(t,r){var i=(t.getChecksumPortion()+16*r.getChecksumPortion())%79,a=9*t.getFinderPattern().getValue()+r.getFinderPattern().getValue();return a>72&&a--,a>8&&a--,i===a},e.prototype.decodePair=function(t,r,i,a){try{var o=this.findFinderPattern(t,r),c=this.parseFoundFinderPattern(t,i,r,o),u=a==null?null:a.get(Vt.NEED_RESULT_POINT_CALLBACK);if(u!=null){var h=(o[0]+o[1])/2;r&&(h=t.getSize()-1-h),u.foundPossibleResultPoint(new Se(h,i))}var p=this.decodeDataCharacter(t,c,!0),g=this.decodeDataCharacter(t,c,!1);return new Yk(1597*p.getValue()+g.getValue(),p.getChecksumPortion()+4*g.getChecksumPortion(),c)}catch{return null}},e.prototype.decodeDataCharacter=function(t,r,i){for(var a=this.getDataCharacterCounters(),o=0;o<a.length;o++)a[o]=0;if(i)Mn.recordPatternInReverse(t,r.getStartEnd()[0],a);else{Mn.recordPattern(t,r.getStartEnd()[1]+1,a);for(var c=0,u=a.length-1;c<u;c++,u--){var h=a[c];a[c]=a[u],a[u]=h}}for(var p=i?16:15,g=mt.sum(new Int32Array(a))/p,_=this.getOddCounts(),E=this.getEvenCounts(),w=this.getOddRoundingErrors(),S=this.getEvenRoundingErrors(),c=0;c<a.length;c++){var D=a[c]/g,T=Math.floor(D+.5);T<1?T=1:T>8&&(T=8);var O=Math.floor(c/2);(c&1)===0?(_[O]=T,w[O]=D-T):(E[O]=T,S[O]=D-T)}this.adjustOddEvenCounts(i,p);for(var j=0,z=0,c=_.length-1;c>=0;c--)z*=9,z+=_[c],j+=_[c];for(var H=0,q=0,c=E.length-1;c>=0;c--)H*=9,H+=E[c],q+=E[c];var N=z+3*H;if(i){if((j&1)!==0||j>12||j<4)throw new ae;var b=(12-j)/2,I=e.OUTSIDE_ODD_WIDEST[b],k=9-I,M=cc.getRSSvalue(_,I,!1),V=cc.getRSSvalue(E,k,!0),L=e.OUTSIDE_EVEN_TOTAL_SUBSET[b],ie=e.OUTSIDE_GSUM[b];return new C0(M*L+V+ie,N)}else{if((q&1)!==0||q>10||q<4)throw new ae;var b=(10-q)/2,I=e.INSIDE_ODD_WIDEST[b],k=9-I,M=cc.getRSSvalue(_,I,!0),V=cc.getRSSvalue(E,k,!1),we=e.INSIDE_ODD_TOTAL_SUBSET[b],ie=e.INSIDE_GSUM[b];return new C0(V*we+M+ie,N)}},e.prototype.findFinderPattern=function(t,r){var i=this.getDecodeFinderCounters();i[0]=0,i[1]=0,i[2]=0,i[3]=0;for(var a=t.getSize(),o=!1,c=0;c<a&&(o=!t.get(c),r!==o);)c++;for(var u=0,h=c,p=c;p<a;p++)if(t.get(p)!==o)i[u]++;else{if(u===3){if(Go.isFinderPattern(i))return[h,p];h+=i[0]+i[1],i[0]=i[2],i[1]=i[3],i[2]=0,i[3]=0,u--}else u++;i[u]=1,o=!o}throw new ae},e.prototype.parseFoundFinderPattern=function(t,r,i,a){for(var o=t.get(a[0]),c=a[0]-1;c>=0&&o!==t.get(c);)c--;c++;var u=a[0]-c,h=this.getDecodeFinderCounters(),p=new Int32Array(h.length);Bt.arraycopy(h,0,p,1,h.length-1),p[0]=u;var g=this.parseFinderValue(p,e.FINDER_PATTERNS),_=c,E=a[1];return i&&(_=t.getSize()-1-_,E=t.getSize()-1-E),new A3(g,[c,a[1]],_,E,r)},e.prototype.adjustOddEvenCounts=function(t,r){var i=mt.sum(new Int32Array(this.getOddCounts())),a=mt.sum(new Int32Array(this.getEvenCounts())),o=!1,c=!1,u=!1,h=!1;t?(i>12?c=!0:i<4&&(o=!0),a>12?h=!0:a<4&&(u=!0)):(i>11?c=!0:i<5&&(o=!0),a>10?h=!0:a<4&&(u=!0));var p=i+a-r,g=(i&1)===(t?1:0),_=(a&1)===1;if(p===1)if(g){if(_)throw new ae;c=!0}else{if(!_)throw new ae;h=!0}else if(p===-1)if(g){if(_)throw new ae;o=!0}else{if(!_)throw new ae;u=!0}else if(p===0){if(g){if(!_)throw new ae;i<a?(o=!0,h=!0):(c=!0,u=!0)}else if(_)throw new ae}else throw new ae;if(o){if(c)throw new ae;Go.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(c&&Go.decrement(this.getOddCounts(),this.getOddRoundingErrors()),u){if(h)throw new ae;Go.increment(this.getEvenCounts(),this.getOddRoundingErrors())}h&&Go.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},e.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],e.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],e.OUTSIDE_GSUM=[0,161,961,2015,2715],e.INSIDE_GSUM=[0,336,1036,1516],e.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],e.INSIDE_ODD_WIDEST=[2,4,6,8],e.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])],e})(Go),Qk=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),uc=(function(n){Qk(e,n);function e(t){var r=n.call(this)||this;r.readers=[];var i=t?t.get(Vt.POSSIBLE_FORMATS):null,a=t&&t.get(Vt.ASSUME_CODE_39_CHECK_DIGIT)!==void 0,o=t&&t.get(Vt.ENABLE_CODE_39_EXTENDED_MODE)!==void 0;return i&&((i.includes(Me.EAN_13)||i.includes(Me.UPC_A)||i.includes(Me.EAN_8)||i.includes(Me.UPC_E))&&r.readers.push(new Hm(t)),i.includes(Me.CODE_39)&&r.readers.push(new CA(a,o)),i.includes(Me.CODE_93)&&r.readers.push(new TA),i.includes(Me.CODE_128)&&r.readers.push(new SA),i.includes(Me.ITF)&&r.readers.push(new IA),i.includes(Me.CODABAR)&&r.readers.push(new _k),i.includes(Me.RSS_14)&&r.readers.push(new LA),i.includes(Me.RSS_EXPANDED)&&(console.warn("RSS Expanded reader IS NOT ready for production yet! use at your own risk."),r.readers.push(new Xk))),r.readers.length===0&&(r.readers.push(new Hm(t)),r.readers.push(new CA),r.readers.push(new TA),r.readers.push(new Hm(t)),r.readers.push(new SA),r.readers.push(new IA),r.readers.push(new LA)),r}return e.prototype.decodeRow=function(t,r,i){for(var a=0;a<this.readers.length;a++)try{return this.readers[a].decodeRow(t,r,i)}catch{}throw new ae},e.prototype.reset=function(){this.readers.forEach(function(t){return t.reset()})},e})(Mn),Zk=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})();(function(n){Zk(e,n);function e(t,r){return t===void 0&&(t=500),n.call(this,new uc(r),t,r)||this}return e})(zc);var jA=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},wt=(function(){function n(e,t,r){this.ecCodewords=e,this.ecBlocks=[t],r&&this.ecBlocks.push(r)}return n.prototype.getECCodewords=function(){return this.ecCodewords},n.prototype.getECBlocks=function(){return this.ecBlocks},n})(),_t=(function(){function n(e,t){this.count=e,this.dataCodewords=t}return n.prototype.getCount=function(){return this.count},n.prototype.getDataCodewords=function(){return this.dataCodewords},n})(),Jk=(function(){function n(e,t,r,i,a,o){var c,u;this.versionNumber=e,this.symbolSizeRows=t,this.symbolSizeColumns=r,this.dataRegionSizeRows=i,this.dataRegionSizeColumns=a,this.ecBlocks=o;var h=0,p=o.getECCodewords(),g=o.getECBlocks();try{for(var _=jA(g),E=_.next();!E.done;E=_.next()){var w=E.value;h+=w.getCount()*(w.getDataCodewords()+p)}}catch(S){c={error:S}}finally{try{E&&!E.done&&(u=_.return)&&u.call(_)}finally{if(c)throw c.error}}this.totalCodewords=h}return n.prototype.getVersionNumber=function(){return this.versionNumber},n.prototype.getSymbolSizeRows=function(){return this.symbolSizeRows},n.prototype.getSymbolSizeColumns=function(){return this.symbolSizeColumns},n.prototype.getDataRegionSizeRows=function(){return this.dataRegionSizeRows},n.prototype.getDataRegionSizeColumns=function(){return this.dataRegionSizeColumns},n.prototype.getTotalCodewords=function(){return this.totalCodewords},n.prototype.getECBlocks=function(){return this.ecBlocks},n.getVersionForDimensions=function(e,t){var r,i;if((e&1)!==0||(t&1)!==0)throw new ge;try{for(var a=jA(n.VERSIONS),o=a.next();!o.done;o=a.next()){var c=o.value;if(c.symbolSizeRows===e&&c.symbolSizeColumns===t)return c}}catch(u){r={error:u}}finally{try{o&&!o.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}throw new ge},n.prototype.toString=function(){return""+this.versionNumber},n.buildVersions=function(){return[new n(1,10,10,8,8,new wt(5,new _t(1,3))),new n(2,12,12,10,10,new wt(7,new _t(1,5))),new n(3,14,14,12,12,new wt(10,new _t(1,8))),new n(4,16,16,14,14,new wt(12,new _t(1,12))),new n(5,18,18,16,16,new wt(14,new _t(1,18))),new n(6,20,20,18,18,new wt(18,new _t(1,22))),new n(7,22,22,20,20,new wt(20,new _t(1,30))),new n(8,24,24,22,22,new wt(24,new _t(1,36))),new n(9,26,26,24,24,new wt(28,new _t(1,44))),new n(10,32,32,14,14,new wt(36,new _t(1,62))),new n(11,36,36,16,16,new wt(42,new _t(1,86))),new n(12,40,40,18,18,new wt(48,new _t(1,114))),new n(13,44,44,20,20,new wt(56,new _t(1,144))),new n(14,48,48,22,22,new wt(68,new _t(1,174))),new n(15,52,52,24,24,new wt(42,new _t(2,102))),new n(16,64,64,14,14,new wt(56,new _t(2,140))),new n(17,72,72,16,16,new wt(36,new _t(4,92))),new n(18,80,80,18,18,new wt(48,new _t(4,114))),new n(19,88,88,20,20,new wt(56,new _t(4,144))),new n(20,96,96,22,22,new wt(68,new _t(4,174))),new n(21,104,104,24,24,new wt(56,new _t(6,136))),new n(22,120,120,18,18,new wt(68,new _t(6,175))),new n(23,132,132,20,20,new wt(62,new _t(8,163))),new n(24,144,144,22,22,new wt(62,new _t(8,156),new _t(2,155))),new n(25,8,18,6,16,new wt(7,new _t(1,5))),new n(26,8,32,6,14,new wt(11,new _t(1,10))),new n(27,12,26,10,24,new wt(14,new _t(1,16))),new n(28,12,36,10,16,new wt(18,new _t(1,22))),new n(29,16,36,14,16,new wt(24,new _t(1,32))),new n(30,16,48,14,22,new wt(28,new _t(1,49)))]},n.VERSIONS=n.buildVersions(),n})(),eL=(function(){function n(e){var t=e.getHeight();if(t<8||t>144||(t&1)!==0)throw new ge;this.version=n.readVersion(e),this.mappingBitMatrix=this.extractDataRegion(e),this.readMappingMatrix=new ya(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}return n.prototype.getVersion=function(){return this.version},n.readVersion=function(e){var t=e.getHeight(),r=e.getWidth();return Jk.getVersionForDimensions(t,r)},n.prototype.readCodewords=function(){var e=new Int8Array(this.version.getTotalCodewords()),t=0,r=4,i=0,a=this.mappingBitMatrix.getHeight(),o=this.mappingBitMatrix.getWidth(),c=!1,u=!1,h=!1,p=!1;do if(r===a&&i===0&&!c)e[t++]=this.readCorner1(a,o)&255,r-=2,i+=2,c=!0;else if(r===a-2&&i===0&&(o&3)!==0&&!u)e[t++]=this.readCorner2(a,o)&255,r-=2,i+=2,u=!0;else if(r===a+4&&i===2&&(o&7)===0&&!h)e[t++]=this.readCorner3(a,o)&255,r-=2,i+=2,h=!0;else if(r===a-2&&i===0&&(o&7)===4&&!p)e[t++]=this.readCorner4(a,o)&255,r-=2,i+=2,p=!0;else{do r<a&&i>=0&&!this.readMappingMatrix.get(i,r)&&(e[t++]=this.readUtah(r,i,a,o)&255),r-=2,i+=2;while(r>=0&&i<o);r+=1,i+=3;do r>=0&&i<o&&!this.readMappingMatrix.get(i,r)&&(e[t++]=this.readUtah(r,i,a,o)&255),r+=2,i-=2;while(r<a&&i>=0);r+=3,i+=1}while(r<a||i<o);if(t!==this.version.getTotalCodewords())throw new ge;return e},n.prototype.readModule=function(e,t,r,i){return e<0&&(e+=r,t+=4-(r+4&7)),t<0&&(t+=i,e+=4-(i+4&7)),this.readMappingMatrix.set(t,e),this.mappingBitMatrix.get(t,e)},n.prototype.readUtah=function(e,t,r,i){var a=0;return this.readModule(e-2,t-2,r,i)&&(a|=1),a<<=1,this.readModule(e-2,t-1,r,i)&&(a|=1),a<<=1,this.readModule(e-1,t-2,r,i)&&(a|=1),a<<=1,this.readModule(e-1,t-1,r,i)&&(a|=1),a<<=1,this.readModule(e-1,t,r,i)&&(a|=1),a<<=1,this.readModule(e,t-2,r,i)&&(a|=1),a<<=1,this.readModule(e,t-1,r,i)&&(a|=1),a<<=1,this.readModule(e,t,r,i)&&(a|=1),a},n.prototype.readCorner1=function(e,t){var r=0;return this.readModule(e-1,0,e,t)&&(r|=1),r<<=1,this.readModule(e-1,1,e,t)&&(r|=1),r<<=1,this.readModule(e-1,2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-1,e,t)&&(r|=1),r<<=1,this.readModule(1,t-1,e,t)&&(r|=1),r<<=1,this.readModule(2,t-1,e,t)&&(r|=1),r<<=1,this.readModule(3,t-1,e,t)&&(r|=1),r},n.prototype.readCorner2=function(e,t){var r=0;return this.readModule(e-3,0,e,t)&&(r|=1),r<<=1,this.readModule(e-2,0,e,t)&&(r|=1),r<<=1,this.readModule(e-1,0,e,t)&&(r|=1),r<<=1,this.readModule(0,t-4,e,t)&&(r|=1),r<<=1,this.readModule(0,t-3,e,t)&&(r|=1),r<<=1,this.readModule(0,t-2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-1,e,t)&&(r|=1),r<<=1,this.readModule(1,t-1,e,t)&&(r|=1),r},n.prototype.readCorner3=function(e,t){var r=0;return this.readModule(e-1,0,e,t)&&(r|=1),r<<=1,this.readModule(e-1,t-1,e,t)&&(r|=1),r<<=1,this.readModule(0,t-3,e,t)&&(r|=1),r<<=1,this.readModule(0,t-2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-1,e,t)&&(r|=1),r<<=1,this.readModule(1,t-3,e,t)&&(r|=1),r<<=1,this.readModule(1,t-2,e,t)&&(r|=1),r<<=1,this.readModule(1,t-1,e,t)&&(r|=1),r},n.prototype.readCorner4=function(e,t){var r=0;return this.readModule(e-3,0,e,t)&&(r|=1),r<<=1,this.readModule(e-2,0,e,t)&&(r|=1),r<<=1,this.readModule(e-1,0,e,t)&&(r|=1),r<<=1,this.readModule(0,t-2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-1,e,t)&&(r|=1),r<<=1,this.readModule(1,t-1,e,t)&&(r|=1),r<<=1,this.readModule(2,t-1,e,t)&&(r|=1),r<<=1,this.readModule(3,t-1,e,t)&&(r|=1),r},n.prototype.extractDataRegion=function(e){var t=this.version.getSymbolSizeRows(),r=this.version.getSymbolSizeColumns();if(e.getHeight()!==t)throw new Pe("Dimension of bitMatrix must match the version size");for(var i=this.version.getDataRegionSizeRows(),a=this.version.getDataRegionSizeColumns(),o=t/i|0,c=r/a|0,u=o*i,h=c*a,p=new ya(h,u),g=0;g<o;++g)for(var _=g*i,E=0;E<c;++E)for(var w=E*a,S=0;S<i;++S)for(var D=g*(i+2)+1+S,T=_+S,O=0;O<a;++O){var j=E*(a+2)+1+O;if(e.get(j,D)){var z=w+O;p.set(z,T)}}return p},n})(),BA=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},tL=(function(){function n(e,t){this.numDataCodewords=e,this.codewords=t}return n.getDataBlocks=function(e,t){var r,i,a,o,c=t.getECBlocks(),u=0,h=c.getECBlocks();try{for(var p=BA(h),g=p.next();!g.done;g=p.next()){var _=g.value;u+=_.getCount()}}catch(ie){r={error:ie}}finally{try{g&&!g.done&&(i=p.return)&&i.call(p)}finally{if(r)throw r.error}}var E=new Array(u),w=0;try{for(var S=BA(h),D=S.next();!D.done;D=S.next())for(var _=D.value,T=0;T<_.getCount();T++){var O=_.getDataCodewords(),j=c.getECCodewords()+O;E[w++]=new n(O,new Uint8Array(j))}}catch(ie){a={error:ie}}finally{try{D&&!D.done&&(o=S.return)&&o.call(S)}finally{if(a)throw a.error}}for(var z=E[0].codewords.length,H=z-c.getECCodewords(),q=H-1,N=0,T=0;T<q;T++)for(var b=0;b<w;b++)E[b].codewords[T]=e[N++];for(var I=t.getVersionNumber()===24,k=I?8:w,b=0;b<k;b++)E[b].codewords[H-1]=e[N++];for(var M=E[0].codewords.length,T=H;T<M;T++)for(var b=0;b<w;b++){var V=I?(b+8)%w:b,L=I&&V>7?T-1:T;E[V].codewords[L]=e[N++]}if(N!==e.length)throw new Pe;return E},n.prototype.getNumDataCodewords=function(){return this.numDataCodewords},n.prototype.getCodewords=function(){return this.codewords},n})(),C3=(function(){function n(e){this.bytes=e,this.byteOffset=0,this.bitOffset=0}return n.prototype.getBitOffset=function(){return this.bitOffset},n.prototype.getByteOffset=function(){return this.byteOffset},n.prototype.readBits=function(e){if(e<1||e>32||e>this.available())throw new Pe(""+e);var t=0,r=this.bitOffset,i=this.byteOffset,a=this.bytes;if(r>0){var o=8-r,c=e<o?e:o,u=o-c,h=255>>8-c<<u;t=(a[i]&h)>>u,e-=c,r+=c,r===8&&(r=0,i++)}if(e>0){for(;e>=8;)t=t<<8|a[i]&255,i++,e-=8;if(e>0){var u=8-e,h=255>>u<<u;t=t<<e|(a[i]&h)>>u,r+=e}}return this.bitOffset=r,this.byteOffset=i,t},n.prototype.available=function(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset},n})(),Tn;(function(n){n[n.PAD_ENCODE=0]="PAD_ENCODE",n[n.ASCII_ENCODE=1]="ASCII_ENCODE",n[n.C40_ENCODE=2]="C40_ENCODE",n[n.TEXT_ENCODE=3]="TEXT_ENCODE",n[n.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",n[n.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",n[n.BASE256_ENCODE=6]="BASE256_ENCODE"})(Tn||(Tn={}));var nL=(function(){function n(){}return n.decode=function(e){var t=new C3(e),r=new We,i=new We,a=new Array,o=Tn.ASCII_ENCODE;do if(o===Tn.ASCII_ENCODE)o=this.decodeAsciiSegment(t,r,i);else{switch(o){case Tn.C40_ENCODE:this.decodeC40Segment(t,r);break;case Tn.TEXT_ENCODE:this.decodeTextSegment(t,r);break;case Tn.ANSIX12_ENCODE:this.decodeAnsiX12Segment(t,r);break;case Tn.EDIFACT_ENCODE:this.decodeEdifactSegment(t,r);break;case Tn.BASE256_ENCODE:this.decodeBase256Segment(t,r,a);break;default:throw new ge}o=Tn.ASCII_ENCODE}while(o!==Tn.PAD_ENCODE&&t.available()>0);return i.length()>0&&r.append(i.toString()),new mp(e,r.toString(),a.length===0?null:a,null)},n.decodeAsciiSegment=function(e,t,r){var i=!1;do{var a=e.readBits(8);if(a===0)throw new ge;if(a<=128)return i&&(a+=128),t.append(String.fromCharCode(a-1)),Tn.ASCII_ENCODE;if(a===129)return Tn.PAD_ENCODE;if(a<=229){var o=a-130;o<10&&t.append("0"),t.append(""+o)}else switch(a){case 230:return Tn.C40_ENCODE;case 231:return Tn.BASE256_ENCODE;case 232:t.append("");break;case 233:case 234:break;case 235:i=!0;break;case 236:t.append("[)>05"),r.insert(0,"");break;case 237:t.append("[)>06"),r.insert(0,"");break;case 238:return Tn.ANSIX12_ENCODE;case 239:return Tn.TEXT_ENCODE;case 240:return Tn.EDIFACT_ENCODE;case 241:break;default:if(a!==254||e.available()!==0)throw new ge;break}}while(e.available()>0);return Tn.ASCII_ENCODE},n.decodeC40Segment=function(e,t){var r=!1,i=[],a=0;do{if(e.available()===8)return;var o=e.readBits(8);if(o===254)return;this.parseTwoBytes(o,e.readBits(8),i);for(var c=0;c<3;c++){var u=i[c];switch(a){case 0:if(u<3)a=u+1;else if(u<this.C40_BASIC_SET_CHARS.length){var h=this.C40_BASIC_SET_CHARS[u];r?(t.append(String.fromCharCode(h.charCodeAt(0)+128)),r=!1):t.append(h)}else throw new ge;break;case 1:r?(t.append(String.fromCharCode(u+128)),r=!1):t.append(String.fromCharCode(u)),a=0;break;case 2:if(u<this.C40_SHIFT2_SET_CHARS.length){var h=this.C40_SHIFT2_SET_CHARS[u];r?(t.append(String.fromCharCode(h.charCodeAt(0)+128)),r=!1):t.append(h)}else switch(u){case 27:t.append("");break;case 30:r=!0;break;default:throw new ge}a=0;break;case 3:r?(t.append(String.fromCharCode(u+224)),r=!1):t.append(String.fromCharCode(u+96)),a=0;break;default:throw new ge}}}while(e.available()>0)},n.decodeTextSegment=function(e,t){var r=!1,i=[],a=0;do{if(e.available()===8)return;var o=e.readBits(8);if(o===254)return;this.parseTwoBytes(o,e.readBits(8),i);for(var c=0;c<3;c++){var u=i[c];switch(a){case 0:if(u<3)a=u+1;else if(u<this.TEXT_BASIC_SET_CHARS.length){var h=this.TEXT_BASIC_SET_CHARS[u];r?(t.append(String.fromCharCode(h.charCodeAt(0)+128)),r=!1):t.append(h)}else throw new ge;break;case 1:r?(t.append(String.fromCharCode(u+128)),r=!1):t.append(String.fromCharCode(u)),a=0;break;case 2:if(u<this.TEXT_SHIFT2_SET_CHARS.length){var h=this.TEXT_SHIFT2_SET_CHARS[u];r?(t.append(String.fromCharCode(h.charCodeAt(0)+128)),r=!1):t.append(h)}else switch(u){case 27:t.append("");break;case 30:r=!0;break;default:throw new ge}a=0;break;case 3:if(u<this.TEXT_SHIFT3_SET_CHARS.length){var h=this.TEXT_SHIFT3_SET_CHARS[u];r?(t.append(String.fromCharCode(h.charCodeAt(0)+128)),r=!1):t.append(h),a=0}else throw new ge;break;default:throw new ge}}}while(e.available()>0)},n.decodeAnsiX12Segment=function(e,t){var r=[];do{if(e.available()===8)return;var i=e.readBits(8);if(i===254)return;this.parseTwoBytes(i,e.readBits(8),r);for(var a=0;a<3;a++){var o=r[a];switch(o){case 0:t.append("\r");break;case 1:t.append("*");break;case 2:t.append(">");break;case 3:t.append(" ");break;default:if(o<14)t.append(String.fromCharCode(o+44));else if(o<40)t.append(String.fromCharCode(o+51));else throw new ge;break}}}while(e.available()>0)},n.parseTwoBytes=function(e,t,r){var i=(e<<8)+t-1,a=Math.floor(i/1600);r[0]=a,i-=a*1600,a=Math.floor(i/40),r[1]=a,r[2]=i-a*40},n.decodeEdifactSegment=function(e,t){do{if(e.available()<=16)return;for(var r=0;r<4;r++){var i=e.readBits(6);if(i===31){var a=8-e.getBitOffset();a!==8&&e.readBits(a);return}(i&32)===0&&(i|=64),t.append(String.fromCharCode(i))}}while(e.available()>0)},n.decodeBase256Segment=function(e,t,r){var i=1+e.getByteOffset(),a=this.unrandomize255State(e.readBits(8),i++),o;if(a===0?o=e.available()/8|0:a<250?o=a:o=250*(a-249)+this.unrandomize255State(e.readBits(8),i++),o<0)throw new ge;for(var c=new Uint8Array(o),u=0;u<o;u++){if(e.available()<8)throw new ge;c[u]=this.unrandomize255State(e.readBits(8),i++)}r.push(c);try{t.append(ui.decode(c,ut.ISO88591))}catch(h){throw new Xf("Platform does not support required encoding: "+h.message)}},n.unrandomize255State=function(e,t){var r=149*t%255+1,i=e-r;return i>=0?i:i+256},n.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],n.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],n.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],n.TEXT_SHIFT2_SET_CHARS=n.C40_SHIFT2_SET_CHARS,n.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""],n})(),rL=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},iL=(function(){function n(){this.rsDecoder=new gp(Nr.DATA_MATRIX_FIELD_256)}return n.prototype.decode=function(e){var t,r,i=new eL(e),a=i.getVersion(),o=i.readCodewords(),c=tL.getDataBlocks(o,a),u=0;try{for(var h=rL(c),p=h.next();!p.done;p=h.next()){var g=p.value;u+=g.getNumDataCodewords()}}catch(j){t={error:j}}finally{try{p&&!p.done&&(r=h.return)&&r.call(h)}finally{if(t)throw t.error}}for(var _=new Uint8Array(u),E=c.length,w=0;w<E;w++){var S=c[w],D=S.getCodewords(),T=S.getNumDataCodewords();this.correctErrors(D,T);for(var O=0;O<T;O++)_[O*E+w]=D[O]}return nL.decode(_)},n.prototype.correctErrors=function(e,t){var r=new Int32Array(e);try{this.rsDecoder.decode(r,e.length-t)}catch{throw new bn}for(var i=0;i<t;i++)e[i]=r[i]},n})(),aL=(function(){function n(e){this.image=e,this.rectangleDetector=new ov(this.image)}return n.prototype.detect=function(){var e=this.rectangleDetector.detect(),t=this.detectSolid1(e);if(t=this.detectSolid2(t),t[3]=this.correctTopRight(t),!t[3])throw new ae;t=this.shiftToModuleCenter(t);var r=t[0],i=t[1],a=t[2],o=t[3],c=this.transitionsBetween(r,o)+1,u=this.transitionsBetween(a,o)+1;(c&1)===1&&(c+=1),(u&1)===1&&(u+=1),4*c<7*u&&4*u<7*c&&(c=u=Math.max(c,u));var h=n.sampleGrid(this.image,r,i,a,o,c,u);return new By(h,[r,i,a,o])},n.shiftPoint=function(e,t,r){var i=(t.getX()-e.getX())/(r+1),a=(t.getY()-e.getY())/(r+1);return new Se(e.getX()+i,e.getY()+a)},n.moveAway=function(e,t,r){var i=e.getX(),a=e.getY();return i<t?i-=1:i+=1,a<r?a-=1:a+=1,new Se(i,a)},n.prototype.detectSolid1=function(e){var t=e[0],r=e[1],i=e[3],a=e[2],o=this.transitionsBetween(t,r),c=this.transitionsBetween(r,i),u=this.transitionsBetween(i,a),h=this.transitionsBetween(a,t),p=o,g=[a,t,r,i];return p>c&&(p=c,g[0]=t,g[1]=r,g[2]=i,g[3]=a),p>u&&(p=u,g[0]=r,g[1]=i,g[2]=a,g[3]=t),p>h&&(g[0]=i,g[1]=a,g[2]=t,g[3]=r),g},n.prototype.detectSolid2=function(e){var t=e[0],r=e[1],i=e[2],a=e[3],o=this.transitionsBetween(t,a),c=n.shiftPoint(r,i,(o+1)*4),u=n.shiftPoint(i,r,(o+1)*4),h=this.transitionsBetween(c,t),p=this.transitionsBetween(u,a);return h<p?(e[0]=t,e[1]=r,e[2]=i,e[3]=a):(e[0]=r,e[1]=i,e[2]=a,e[3]=t),e},n.prototype.correctTopRight=function(e){var t=e[0],r=e[1],i=e[2],a=e[3],o=this.transitionsBetween(t,a),c=this.transitionsBetween(r,a),u=n.shiftPoint(t,r,(c+1)*4),h=n.shiftPoint(i,r,(o+1)*4);o=this.transitionsBetween(u,a),c=this.transitionsBetween(h,a);var p=new Se(a.getX()+(i.getX()-r.getX())/(o+1),a.getY()+(i.getY()-r.getY())/(o+1)),g=new Se(a.getX()+(t.getX()-r.getX())/(c+1),a.getY()+(t.getY()-r.getY())/(c+1));if(!this.isValid(p))return this.isValid(g)?g:null;if(!this.isValid(g))return p;var _=this.transitionsBetween(u,p)+this.transitionsBetween(h,p),E=this.transitionsBetween(u,g)+this.transitionsBetween(h,g);return _>E?p:g},n.prototype.shiftToModuleCenter=function(e){var t=e[0],r=e[1],i=e[2],a=e[3],o=this.transitionsBetween(t,a)+1,c=this.transitionsBetween(i,a)+1,u=n.shiftPoint(t,r,c*4),h=n.shiftPoint(i,r,o*4);o=this.transitionsBetween(u,a)+1,c=this.transitionsBetween(h,a)+1,(o&1)===1&&(o+=1),(c&1)===1&&(c+=1);var p=(t.getX()+r.getX()+i.getX()+a.getX())/4,g=(t.getY()+r.getY()+i.getY()+a.getY())/4;t=n.moveAway(t,p,g),r=n.moveAway(r,p,g),i=n.moveAway(i,p,g),a=n.moveAway(a,p,g);var _,E;return u=n.shiftPoint(t,r,c*4),u=n.shiftPoint(u,a,o*4),_=n.shiftPoint(r,t,c*4),_=n.shiftPoint(_,i,o*4),h=n.shiftPoint(i,a,c*4),h=n.shiftPoint(h,r,o*4),E=n.shiftPoint(a,i,c*4),E=n.shiftPoint(E,t,o*4),[u,_,h,E]},n.prototype.isValid=function(e){return e.getX()>=0&&e.getX()<this.image.getWidth()&&e.getY()>0&&e.getY()<this.image.getHeight()},n.sampleGrid=function(e,t,r,i,a,o,c){var u=Vy.getInstance();return u.sampleGrid(e,o,c,.5,.5,o-.5,.5,o-.5,c-.5,.5,c-.5,t.getX(),t.getY(),a.getX(),a.getY(),i.getX(),i.getY(),r.getX(),r.getY())},n.prototype.transitionsBetween=function(e,t){var r=Math.trunc(e.getX()),i=Math.trunc(e.getY()),a=Math.trunc(t.getX()),o=Math.trunc(t.getY()),c=Math.abs(o-i)>Math.abs(a-r);if(c){var u=r;r=i,i=u,u=a,a=o,o=u}for(var h=Math.abs(a-r),p=Math.abs(o-i),g=-h/2,_=i<o?1:-1,E=r<a?1:-1,w=0,S=this.image.get(c?i:r,c?r:i),D=r,T=i;D!==a;D+=E){var O=this.image.get(c?T:D,c?D:T);if(O!==S&&(w++,S=O),g+=p,g>0){if(T===o)break;T+=_,g-=h}}return w},n})(),T0=(function(){function n(){this.decoder=new iL}return n.prototype.decode=function(e,t){t===void 0&&(t=null);var r,i;if(t!=null&&t.has(Vt.PURE_BARCODE)){var a=n.extractPureBits(e.getBlackMatrix());r=this.decoder.decode(a),i=n.NO_POINTS}else{var o=new aL(e.getBlackMatrix()).detect();r=this.decoder.decode(o.getBits()),i=o.getPoints()}var c=r.getRawBytes(),u=new hr(r.getText(),c,8*c.length,i,Me.DATA_MATRIX,Bt.currentTimeMillis()),h=r.getByteSegments();h!=null&&u.putMetadata(ar.BYTE_SEGMENTS,h);var p=r.getECLevel();return p!=null&&u.putMetadata(ar.ERROR_CORRECTION_LEVEL,p),u},n.prototype.reset=function(){},n.extractPureBits=function(e){var t=e.getTopLeftOnBit(),r=e.getBottomRightOnBit();if(t==null||r==null)throw new ae;var i=this.moduleSize(t,e),a=t[1],o=r[1],c=t[0],u=r[0],h=(u-c+1)/i,p=(o-a+1)/i;if(h<=0||p<=0)throw new ae;var g=i/2;a+=g,c+=g;for(var _=new ya(h,p),E=0;E<p;E++)for(var w=a+E*i,S=0;S<h;S++)e.get(c+S*i,w)&&_.set(S,E);return _},n.moduleSize=function(e,t){for(var r=t.getWidth(),i=e[0],a=e[1];i<r&&t.get(i,a);)i++;if(i===r)throw new ae;var o=i-e[0];if(o===0)throw new ae;return o},n.NO_POINTS=[],n})(),sL=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})();(function(n){sL(e,n);function e(t){return t===void 0&&(t=500),n.call(this,new T0,t)||this}return e})(zc);var fc;(function(n){n[n.L=0]="L",n[n.M=1]="M",n[n.Q=2]="Q",n[n.H=3]="H"})(fc||(fc={}));var oL=(function(){function n(e,t,r){this.value=e,this.stringValue=t,this.bits=r,n.FOR_BITS.set(r,this),n.FOR_VALUE.set(e,this)}return n.prototype.getValue=function(){return this.value},n.prototype.getBits=function(){return this.bits},n.fromString=function(e){switch(e){case"L":return n.L;case"M":return n.M;case"Q":return n.Q;case"H":return n.H;default:throw new fn(e+"not available")}},n.prototype.toString=function(){return this.stringValue},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.value===t.value},n.forBits=function(e){if(e<0||e>=n.FOR_BITS.size)throw new Pe;return n.FOR_BITS.get(e)},n.FOR_BITS=new Map,n.FOR_VALUE=new Map,n.L=new n(fc.L,"L",1),n.M=new n(fc.M,"M",0),n.Q=new n(fc.Q,"Q",3),n.H=new n(fc.H,"H",2),n})(),lL=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},T3=(function(){function n(e){this.errorCorrectionLevel=oL.forBits(e>>3&3),this.dataMask=e&7}return n.numBitsDiffering=function(e,t){return Je.bitCount(e^t)},n.decodeFormatInformation=function(e,t){var r=n.doDecodeFormatInformation(e,t);return r!==null?r:n.doDecodeFormatInformation(e^n.FORMAT_INFO_MASK_QR,t^n.FORMAT_INFO_MASK_QR)},n.doDecodeFormatInformation=function(e,t){var r,i,a=Number.MAX_SAFE_INTEGER,o=0;try{for(var c=lL(n.FORMAT_INFO_DECODE_LOOKUP),u=c.next();!u.done;u=c.next()){var h=u.value,p=h[0];if(p===e||p===t)return new n(h[1]);var g=n.numBitsDiffering(e,p);g<a&&(o=h[1],a=g),e!==t&&(g=n.numBitsDiffering(t,p),g<a&&(o=h[1],a=g))}}catch(_){r={error:_}}finally{try{u&&!u.done&&(i=c.return)&&i.call(c)}finally{if(r)throw r.error}}return a<=3?new n(o):null},n.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},n.prototype.getDataMask=function(){return this.dataMask},n.prototype.hashCode=function(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.errorCorrectionLevel===t.errorCorrectionLevel&&this.dataMask===t.dataMask},n.FORMAT_INFO_MASK_QR=21522,n.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])],n})(),cL=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Q=(function(){function n(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this.ecCodewordsPerBlock=e,this.ecBlocks=t}return n.prototype.getECCodewordsPerBlock=function(){return this.ecCodewordsPerBlock},n.prototype.getNumBlocks=function(){var e,t,r=0,i=this.ecBlocks;try{for(var a=cL(i),o=a.next();!o.done;o=a.next()){var c=o.value;r+=c.getCount()}}catch(u){e={error:u}}finally{try{o&&!o.done&&(t=a.return)&&t.call(a)}finally{if(e)throw e.error}}return r},n.prototype.getTotalECCodewords=function(){return this.ecCodewordsPerBlock*this.getNumBlocks()},n.prototype.getECBlocks=function(){return this.ecBlocks},n})(),G=(function(){function n(e,t){this.count=e,this.dataCodewords=t}return n.prototype.getCount=function(){return this.count},n.prototype.getDataCodewords=function(){return this.dataCodewords},n})(),uL=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Wo=(function(){function n(e,t){for(var r,i,a=[],o=2;o<arguments.length;o++)a[o-2]=arguments[o];this.versionNumber=e,this.alignmentPatternCenters=t,this.ecBlocks=a;var c=0,u=a[0].getECCodewordsPerBlock(),h=a[0].getECBlocks();try{for(var p=uL(h),g=p.next();!g.done;g=p.next()){var _=g.value;c+=_.getCount()*(_.getDataCodewords()+u)}}catch(E){r={error:E}}finally{try{g&&!g.done&&(i=p.return)&&i.call(p)}finally{if(r)throw r.error}}this.totalCodewords=c}return n.prototype.getVersionNumber=function(){return this.versionNumber},n.prototype.getAlignmentPatternCenters=function(){return this.alignmentPatternCenters},n.prototype.getTotalCodewords=function(){return this.totalCodewords},n.prototype.getDimensionForVersion=function(){return 17+4*this.versionNumber},n.prototype.getECBlocksForLevel=function(e){return this.ecBlocks[e.getValue()]},n.getProvisionalVersionForDimension=function(e){if(e%4!==1)throw new ge;try{return this.getVersionForNumber((e-17)/4)}catch{throw new ge}},n.getVersionForNumber=function(e){if(e<1||e>40)throw new Pe;return n.VERSIONS[e-1]},n.decodeVersionInformation=function(e){for(var t=Number.MAX_SAFE_INTEGER,r=0,i=0;i<n.VERSION_DECODE_INFO.length;i++){var a=n.VERSION_DECODE_INFO[i];if(a===e)return n.getVersionForNumber(i+7);var o=T3.numBitsDiffering(e,a);o<t&&(r=i+7,t=o)}return t<=3?n.getVersionForNumber(r):null},n.prototype.buildFunctionPattern=function(){var e=this.getDimensionForVersion(),t=new ya(e);t.setRegion(0,0,9,9),t.setRegion(e-8,0,8,9),t.setRegion(0,e-8,9,8);for(var r=this.alignmentPatternCenters.length,i=0;i<r;i++)for(var a=this.alignmentPatternCenters[i]-2,o=0;o<r;o++)i===0&&(o===0||o===r-1)||i===r-1&&o===0||t.setRegion(this.alignmentPatternCenters[o]-2,a,5,5);return t.setRegion(6,9,1,e-17),t.setRegion(9,6,e-17,1),this.versionNumber>6&&(t.setRegion(e-11,0,3,6),t.setRegion(0,e-11,6,3)),t},n.prototype.toString=function(){return""+this.versionNumber},n.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),n.VERSIONS=[new n(1,new Int32Array(0),new Q(7,new G(1,19)),new Q(10,new G(1,16)),new Q(13,new G(1,13)),new Q(17,new G(1,9))),new n(2,Int32Array.from([6,18]),new Q(10,new G(1,34)),new Q(16,new G(1,28)),new Q(22,new G(1,22)),new Q(28,new G(1,16))),new n(3,Int32Array.from([6,22]),new Q(15,new G(1,55)),new Q(26,new G(1,44)),new Q(18,new G(2,17)),new Q(22,new G(2,13))),new n(4,Int32Array.from([6,26]),new Q(20,new G(1,80)),new Q(18,new G(2,32)),new Q(26,new G(2,24)),new Q(16,new G(4,9))),new n(5,Int32Array.from([6,30]),new Q(26,new G(1,108)),new Q(24,new G(2,43)),new Q(18,new G(2,15),new G(2,16)),new Q(22,new G(2,11),new G(2,12))),new n(6,Int32Array.from([6,34]),new Q(18,new G(2,68)),new Q(16,new G(4,27)),new Q(24,new G(4,19)),new Q(28,new G(4,15))),new n(7,Int32Array.from([6,22,38]),new Q(20,new G(2,78)),new Q(18,new G(4,31)),new Q(18,new G(2,14),new G(4,15)),new Q(26,new G(4,13),new G(1,14))),new n(8,Int32Array.from([6,24,42]),new Q(24,new G(2,97)),new Q(22,new G(2,38),new G(2,39)),new Q(22,new G(4,18),new G(2,19)),new Q(26,new G(4,14),new G(2,15))),new n(9,Int32Array.from([6,26,46]),new Q(30,new G(2,116)),new Q(22,new G(3,36),new G(2,37)),new Q(20,new G(4,16),new G(4,17)),new Q(24,new G(4,12),new G(4,13))),new n(10,Int32Array.from([6,28,50]),new Q(18,new G(2,68),new G(2,69)),new Q(26,new G(4,43),new G(1,44)),new Q(24,new G(6,19),new G(2,20)),new Q(28,new G(6,15),new G(2,16))),new n(11,Int32Array.from([6,30,54]),new Q(20,new G(4,81)),new Q(30,new G(1,50),new G(4,51)),new Q(28,new G(4,22),new G(4,23)),new Q(24,new G(3,12),new G(8,13))),new n(12,Int32Array.from([6,32,58]),new Q(24,new G(2,92),new G(2,93)),new Q(22,new G(6,36),new G(2,37)),new Q(26,new G(4,20),new G(6,21)),new Q(28,new G(7,14),new G(4,15))),new n(13,Int32Array.from([6,34,62]),new Q(26,new G(4,107)),new Q(22,new G(8,37),new G(1,38)),new Q(24,new G(8,20),new G(4,21)),new Q(22,new G(12,11),new G(4,12))),new n(14,Int32Array.from([6,26,46,66]),new Q(30,new G(3,115),new G(1,116)),new Q(24,new G(4,40),new G(5,41)),new Q(20,new G(11,16),new G(5,17)),new Q(24,new G(11,12),new G(5,13))),new n(15,Int32Array.from([6,26,48,70]),new Q(22,new G(5,87),new G(1,88)),new Q(24,new G(5,41),new G(5,42)),new Q(30,new G(5,24),new G(7,25)),new Q(24,new G(11,12),new G(7,13))),new n(16,Int32Array.from([6,26,50,74]),new Q(24,new G(5,98),new G(1,99)),new Q(28,new G(7,45),new G(3,46)),new Q(24,new G(15,19),new G(2,20)),new Q(30,new G(3,15),new G(13,16))),new n(17,Int32Array.from([6,30,54,78]),new Q(28,new G(1,107),new G(5,108)),new Q(28,new G(10,46),new G(1,47)),new Q(28,new G(1,22),new G(15,23)),new Q(28,new G(2,14),new G(17,15))),new n(18,Int32Array.from([6,30,56,82]),new Q(30,new G(5,120),new G(1,121)),new Q(26,new G(9,43),new G(4,44)),new Q(28,new G(17,22),new G(1,23)),new Q(28,new G(2,14),new G(19,15))),new n(19,Int32Array.from([6,30,58,86]),new Q(28,new G(3,113),new G(4,114)),new Q(26,new G(3,44),new G(11,45)),new Q(26,new G(17,21),new G(4,22)),new Q(26,new G(9,13),new G(16,14))),new n(20,Int32Array.from([6,34,62,90]),new Q(28,new G(3,107),new G(5,108)),new Q(26,new G(3,41),new G(13,42)),new Q(30,new G(15,24),new G(5,25)),new Q(28,new G(15,15),new G(10,16))),new n(21,Int32Array.from([6,28,50,72,94]),new Q(28,new G(4,116),new G(4,117)),new Q(26,new G(17,42)),new Q(28,new G(17,22),new G(6,23)),new Q(30,new G(19,16),new G(6,17))),new n(22,Int32Array.from([6,26,50,74,98]),new Q(28,new G(2,111),new G(7,112)),new Q(28,new G(17,46)),new Q(30,new G(7,24),new G(16,25)),new Q(24,new G(34,13))),new n(23,Int32Array.from([6,30,54,78,102]),new Q(30,new G(4,121),new G(5,122)),new Q(28,new G(4,47),new G(14,48)),new Q(30,new G(11,24),new G(14,25)),new Q(30,new G(16,15),new G(14,16))),new n(24,Int32Array.from([6,28,54,80,106]),new Q(30,new G(6,117),new G(4,118)),new Q(28,new G(6,45),new G(14,46)),new Q(30,new G(11,24),new G(16,25)),new Q(30,new G(30,16),new G(2,17))),new n(25,Int32Array.from([6,32,58,84,110]),new Q(26,new G(8,106),new G(4,107)),new Q(28,new G(8,47),new G(13,48)),new Q(30,new G(7,24),new G(22,25)),new Q(30,new G(22,15),new G(13,16))),new n(26,Int32Array.from([6,30,58,86,114]),new Q(28,new G(10,114),new G(2,115)),new Q(28,new G(19,46),new G(4,47)),new Q(28,new G(28,22),new G(6,23)),new Q(30,new G(33,16),new G(4,17))),new n(27,Int32Array.from([6,34,62,90,118]),new Q(30,new G(8,122),new G(4,123)),new Q(28,new G(22,45),new G(3,46)),new Q(30,new G(8,23),new G(26,24)),new Q(30,new G(12,15),new G(28,16))),new n(28,Int32Array.from([6,26,50,74,98,122]),new Q(30,new G(3,117),new G(10,118)),new Q(28,new G(3,45),new G(23,46)),new Q(30,new G(4,24),new G(31,25)),new Q(30,new G(11,15),new G(31,16))),new n(29,Int32Array.from([6,30,54,78,102,126]),new Q(30,new G(7,116),new G(7,117)),new Q(28,new G(21,45),new G(7,46)),new Q(30,new G(1,23),new G(37,24)),new Q(30,new G(19,15),new G(26,16))),new n(30,Int32Array.from([6,26,52,78,104,130]),new Q(30,new G(5,115),new G(10,116)),new Q(28,new G(19,47),new G(10,48)),new Q(30,new G(15,24),new G(25,25)),new Q(30,new G(23,15),new G(25,16))),new n(31,Int32Array.from([6,30,56,82,108,134]),new Q(30,new G(13,115),new G(3,116)),new Q(28,new G(2,46),new G(29,47)),new Q(30,new G(42,24),new G(1,25)),new Q(30,new G(23,15),new G(28,16))),new n(32,Int32Array.from([6,34,60,86,112,138]),new Q(30,new G(17,115)),new Q(28,new G(10,46),new G(23,47)),new Q(30,new G(10,24),new G(35,25)),new Q(30,new G(19,15),new G(35,16))),new n(33,Int32Array.from([6,30,58,86,114,142]),new Q(30,new G(17,115),new G(1,116)),new Q(28,new G(14,46),new G(21,47)),new Q(30,new G(29,24),new G(19,25)),new Q(30,new G(11,15),new G(46,16))),new n(34,Int32Array.from([6,34,62,90,118,146]),new Q(30,new G(13,115),new G(6,116)),new Q(28,new G(14,46),new G(23,47)),new Q(30,new G(44,24),new G(7,25)),new Q(30,new G(59,16),new G(1,17))),new n(35,Int32Array.from([6,30,54,78,102,126,150]),new Q(30,new G(12,121),new G(7,122)),new Q(28,new G(12,47),new G(26,48)),new Q(30,new G(39,24),new G(14,25)),new Q(30,new G(22,15),new G(41,16))),new n(36,Int32Array.from([6,24,50,76,102,128,154]),new Q(30,new G(6,121),new G(14,122)),new Q(28,new G(6,47),new G(34,48)),new Q(30,new G(46,24),new G(10,25)),new Q(30,new G(2,15),new G(64,16))),new n(37,Int32Array.from([6,28,54,80,106,132,158]),new Q(30,new G(17,122),new G(4,123)),new Q(28,new G(29,46),new G(14,47)),new Q(30,new G(49,24),new G(10,25)),new Q(30,new G(24,15),new G(46,16))),new n(38,Int32Array.from([6,32,58,84,110,136,162]),new Q(30,new G(4,122),new G(18,123)),new Q(28,new G(13,46),new G(32,47)),new Q(30,new G(48,24),new G(14,25)),new Q(30,new G(42,15),new G(32,16))),new n(39,Int32Array.from([6,26,54,82,110,138,166]),new Q(30,new G(20,117),new G(4,118)),new Q(28,new G(40,47),new G(7,48)),new Q(30,new G(43,24),new G(22,25)),new Q(30,new G(10,15),new G(67,16))),new n(40,Int32Array.from([6,30,58,86,114,142,170]),new Q(30,new G(19,118),new G(6,119)),new Q(28,new G(18,47),new G(31,48)),new Q(30,new G(34,24),new G(34,25)),new Q(30,new G(20,15),new G(61,16)))],n})(),Vn;(function(n){n[n.DATA_MASK_000=0]="DATA_MASK_000",n[n.DATA_MASK_001=1]="DATA_MASK_001",n[n.DATA_MASK_010=2]="DATA_MASK_010",n[n.DATA_MASK_011=3]="DATA_MASK_011",n[n.DATA_MASK_100=4]="DATA_MASK_100",n[n.DATA_MASK_101=5]="DATA_MASK_101",n[n.DATA_MASK_110=6]="DATA_MASK_110",n[n.DATA_MASK_111=7]="DATA_MASK_111"})(Vn||(Vn={}));var VA=(function(){function n(e,t){this.value=e,this.isMasked=t}return n.prototype.unmaskBitMatrix=function(e,t){for(var r=0;r<t;r++)for(var i=0;i<t;i++)this.isMasked(r,i)&&e.flip(i,r)},n.values=new Map([[Vn.DATA_MASK_000,new n(Vn.DATA_MASK_000,function(e,t){return(e+t&1)===0})],[Vn.DATA_MASK_001,new n(Vn.DATA_MASK_001,function(e,t){return(e&1)===0})],[Vn.DATA_MASK_010,new n(Vn.DATA_MASK_010,function(e,t){return t%3===0})],[Vn.DATA_MASK_011,new n(Vn.DATA_MASK_011,function(e,t){return(e+t)%3===0})],[Vn.DATA_MASK_100,new n(Vn.DATA_MASK_100,function(e,t){return(Math.floor(e/2)+Math.floor(t/3)&1)===0})],[Vn.DATA_MASK_101,new n(Vn.DATA_MASK_101,function(e,t){return e*t%6===0})],[Vn.DATA_MASK_110,new n(Vn.DATA_MASK_110,function(e,t){return e*t%6<3})],[Vn.DATA_MASK_111,new n(Vn.DATA_MASK_111,function(e,t){return(e+t+e*t%3&1)===0})]]),n})(),fL=(function(){function n(e){var t=e.getHeight();if(t<21||(t&3)!==1)throw new ge;this.bitMatrix=e}return n.prototype.readFormatInformation=function(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;for(var e=0,t=0;t<6;t++)e=this.copyBit(t,8,e);e=this.copyBit(7,8,e),e=this.copyBit(8,8,e),e=this.copyBit(8,7,e);for(var r=5;r>=0;r--)e=this.copyBit(8,r,e);for(var i=this.bitMatrix.getHeight(),a=0,o=i-7,r=i-1;r>=o;r--)a=this.copyBit(8,r,a);for(var t=i-8;t<i;t++)a=this.copyBit(t,8,a);if(this.parsedFormatInfo=T3.decodeFormatInformation(e,a),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new ge},n.prototype.readVersion=function(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;var e=this.bitMatrix.getHeight(),t=Math.floor((e-17)/4);if(t<=6)return Wo.getVersionForNumber(t);for(var r=0,i=e-11,a=5;a>=0;a--)for(var o=e-9;o>=i;o--)r=this.copyBit(o,a,r);var c=Wo.decodeVersionInformation(r);if(c!==null&&c.getDimensionForVersion()===e)return this.parsedVersion=c,c;r=0;for(var o=5;o>=0;o--)for(var a=e-9;a>=i;a--)r=this.copyBit(o,a,r);if(c=Wo.decodeVersionInformation(r),c!==null&&c.getDimensionForVersion()===e)return this.parsedVersion=c,c;throw new ge},n.prototype.copyBit=function(e,t,r){var i=this.isMirror?this.bitMatrix.get(t,e):this.bitMatrix.get(e,t);return i?r<<1|1:r<<1},n.prototype.readCodewords=function(){var e=this.readFormatInformation(),t=this.readVersion(),r=VA.values.get(e.getDataMask()),i=this.bitMatrix.getHeight();r.unmaskBitMatrix(this.bitMatrix,i);for(var a=t.buildFunctionPattern(),o=!0,c=new Uint8Array(t.getTotalCodewords()),u=0,h=0,p=0,g=i-1;g>0;g-=2){g===6&&g--;for(var _=0;_<i;_++)for(var E=o?i-1-_:_,w=0;w<2;w++)a.get(g-w,E)||(p++,h<<=1,this.bitMatrix.get(g-w,E)&&(h|=1),p===8&&(c[u++]=h,p=0,h=0));o=!o}if(u!==t.getTotalCodewords())throw new ge;return c},n.prototype.remask=function(){if(this.parsedFormatInfo!==null){var e=VA.values.get(this.parsedFormatInfo.getDataMask()),t=this.bitMatrix.getHeight();e.unmaskBitMatrix(this.bitMatrix,t)}},n.prototype.setMirror=function(e){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=e},n.prototype.mirror=function(){for(var e=this.bitMatrix,t=0,r=e.getWidth();t<r;t++)for(var i=t+1,a=e.getHeight();i<a;i++)e.get(t,i)!==e.get(i,t)&&(e.flip(i,t),e.flip(t,i))},n})(),FA=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},hL=(function(){function n(e,t){this.numDataCodewords=e,this.codewords=t}return n.getDataBlocks=function(e,t,r){var i,a,o,c;if(e.length!==t.getTotalCodewords())throw new Pe;var u=t.getECBlocksForLevel(r),h=0,p=u.getECBlocks();try{for(var g=FA(p),_=g.next();!_.done;_=g.next()){var E=_.value;h+=E.getCount()}}catch(L){i={error:L}}finally{try{_&&!_.done&&(a=g.return)&&a.call(g)}finally{if(i)throw i.error}}var w=new Array(h),S=0;try{for(var D=FA(p),T=D.next();!T.done;T=D.next())for(var E=T.value,O=0;O<E.getCount();O++){var j=E.getDataCodewords(),z=u.getECCodewordsPerBlock()+j;w[S++]=new n(j,new Uint8Array(z))}}catch(L){o={error:L}}finally{try{T&&!T.done&&(c=D.return)&&c.call(D)}finally{if(o)throw o.error}}for(var H=w[0].codewords.length,q=w.length-1;q>=0;){var N=w[q].codewords.length;if(N===H)break;q--}q++;for(var b=H-u.getECCodewordsPerBlock(),I=0,O=0;O<b;O++)for(var k=0;k<S;k++)w[k].codewords[O]=e[I++];for(var k=q;k<S;k++)w[k].codewords[b]=e[I++];for(var M=w[0].codewords.length,O=b;O<M;O++)for(var k=0;k<S;k++){var V=k<q?O:O+1;w[k].codewords[V]=e[I++]}return w},n.prototype.getNumDataCodewords=function(){return this.numDataCodewords},n.prototype.getCodewords=function(){return this.codewords},n})(),si;(function(n){n[n.TERMINATOR=0]="TERMINATOR",n[n.NUMERIC=1]="NUMERIC",n[n.ALPHANUMERIC=2]="ALPHANUMERIC",n[n.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",n[n.BYTE=4]="BYTE",n[n.ECI=5]="ECI",n[n.KANJI=6]="KANJI",n[n.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",n[n.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",n[n.HANZI=9]="HANZI"})(si||(si={}));var Ht=(function(){function n(e,t,r,i){this.value=e,this.stringValue=t,this.characterCountBitsForVersions=r,this.bits=i,n.FOR_BITS.set(i,this),n.FOR_VALUE.set(e,this)}return n.forBits=function(e){var t=n.FOR_BITS.get(e);if(t===void 0)throw new Pe;return t},n.prototype.getCharacterCountBits=function(e){var t=e.getVersionNumber(),r;return t<=9?r=0:t<=26?r=1:r=2,this.characterCountBitsForVersions[r]},n.prototype.getValue=function(){return this.value},n.prototype.getBits=function(){return this.bits},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.value===t.value},n.prototype.toString=function(){return this.stringValue},n.FOR_BITS=new Map,n.FOR_VALUE=new Map,n.TERMINATOR=new n(si.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),n.NUMERIC=new n(si.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),n.ALPHANUMERIC=new n(si.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),n.STRUCTURED_APPEND=new n(si.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),n.BYTE=new n(si.BYTE,"BYTE",Int32Array.from([8,16,16]),4),n.ECI=new n(si.ECI,"ECI",Int32Array.from([0,0,0]),7),n.KANJI=new n(si.KANJI,"KANJI",Int32Array.from([8,10,12]),8),n.FNC1_FIRST_POSITION=new n(si.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),n.FNC1_SECOND_POSITION=new n(si.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),n.HANZI=new n(si.HANZI,"HANZI",Int32Array.from([8,10,12]),13),n})(),dL=(function(){function n(){}return n.decode=function(e,t,r,i){var a=new C3(e),o=new We,c=new Array,u=-1,h=-1;try{var p=null,g=!1,_=void 0;do{if(a.available()<4)_=Ht.TERMINATOR;else{var E=a.readBits(4);_=Ht.forBits(E)}switch(_){case Ht.TERMINATOR:break;case Ht.FNC1_FIRST_POSITION:case Ht.FNC1_SECOND_POSITION:g=!0;break;case Ht.STRUCTURED_APPEND:if(a.available()<16)throw new ge;u=a.readBits(8),h=a.readBits(8);break;case Ht.ECI:var w=n.parseECIValue(a);if(p=On.getCharacterSetECIByValue(w),p===null)throw new ge;break;case Ht.HANZI:var S=a.readBits(4),D=a.readBits(_.getCharacterCountBits(t));S===n.GB2312_SUBSET&&n.decodeHanziSegment(a,o,D);break;default:var T=a.readBits(_.getCharacterCountBits(t));switch(_){case Ht.NUMERIC:n.decodeNumericSegment(a,o,T);break;case Ht.ALPHANUMERIC:n.decodeAlphanumericSegment(a,o,T,g);break;case Ht.BYTE:n.decodeByteSegment(a,o,T,p,c,i);break;case Ht.KANJI:n.decodeKanjiSegment(a,o,T);break;default:throw new ge}break}}while(_!==Ht.TERMINATOR)}catch{throw new ge}return new mp(e,o.toString(),c.length===0?null:c,r===null?null:r.toString(),u,h)},n.decodeHanziSegment=function(e,t,r){if(r*13>e.available())throw new ge;for(var i=new Uint8Array(2*r),a=0;r>0;){var o=e.readBits(13),c=o/96<<8&4294967295|o%96;c<959?c+=41377:c+=42657,i[a]=c>>8&255,i[a+1]=c&255,a+=2,r--}try{t.append(ui.decode(i,ut.GB2312))}catch(u){throw new ge(u)}},n.decodeKanjiSegment=function(e,t,r){if(r*13>e.available())throw new ge;for(var i=new Uint8Array(2*r),a=0;r>0;){var o=e.readBits(13),c=o/192<<8&4294967295|o%192;c<7936?c+=33088:c+=49472,i[a]=c>>8,i[a+1]=c,a+=2,r--}try{t.append(ui.decode(i,ut.SHIFT_JIS))}catch(u){throw new ge(u)}},n.decodeByteSegment=function(e,t,r,i,a,o){if(8*r>e.available())throw new ge;for(var c=new Uint8Array(r),u=0;u<r;u++)c[u]=e.readBits(8);var h;i===null?h=ut.guessEncoding(c,o):h=i.getName();try{t.append(ui.decode(c,h))}catch(p){throw new ge(p)}a.push(c)},n.toAlphaNumericChar=function(e){if(e>=n.ALPHANUMERIC_CHARS.length)throw new ge;return n.ALPHANUMERIC_CHARS[e]},n.decodeAlphanumericSegment=function(e,t,r,i){for(var a=t.length();r>1;){if(e.available()<11)throw new ge;var o=e.readBits(11);t.append(n.toAlphaNumericChar(Math.floor(o/45))),t.append(n.toAlphaNumericChar(o%45)),r-=2}if(r===1){if(e.available()<6)throw new ge;t.append(n.toAlphaNumericChar(e.readBits(6)))}if(i)for(var c=a;c<t.length();c++)t.charAt(c)==="%"&&(c<t.length()-1&&t.charAt(c+1)==="%"?t.deleteCharAt(c+1):t.setCharAt(c,""))},n.decodeNumericSegment=function(e,t,r){for(;r>=3;){if(e.available()<10)throw new ge;var i=e.readBits(10);if(i>=1e3)throw new ge;t.append(n.toAlphaNumericChar(Math.floor(i/100))),t.append(n.toAlphaNumericChar(Math.floor(i/10)%10)),t.append(n.toAlphaNumericChar(i%10)),r-=3}if(r===2){if(e.available()<7)throw new ge;var a=e.readBits(7);if(a>=100)throw new ge;t.append(n.toAlphaNumericChar(Math.floor(a/10))),t.append(n.toAlphaNumericChar(a%10))}else if(r===1){if(e.available()<4)throw new ge;var o=e.readBits(4);if(o>=10)throw new ge;t.append(n.toAlphaNumericChar(o))}},n.parseECIValue=function(e){var t=e.readBits(8);if((t&128)===0)return t&127;if((t&192)===128){var r=e.readBits(8);return(t&63)<<8&4294967295|r}if((t&224)===192){var i=e.readBits(16);return(t&31)<<16&4294967295|i}throw new ge},n.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",n.GB2312_SUBSET=1,n})(),I3=(function(){function n(e){this.mirrored=e}return n.prototype.isMirrored=function(){return this.mirrored},n.prototype.applyMirroredCorrection=function(e){if(!(!this.mirrored||e===null||e.length<3)){var t=e[0];e[0]=e[2],e[2]=t}},n})(),UA=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},pL=(function(){function n(){this.rsDecoder=new gp(Nr.QR_CODE_FIELD_256)}return n.prototype.decodeBooleanArray=function(e,t){return this.decodeBitMatrix(ya.parseFromBooleanArray(e),t)},n.prototype.decodeBitMatrix=function(e,t){var r=new fL(e),i=null;try{return this.decodeBitMatrixParser(r,t)}catch(o){i=o}try{r.remask(),r.setMirror(!0),r.readVersion(),r.readFormatInformation(),r.mirror();var a=this.decodeBitMatrixParser(r,t);return a.setOther(new I3(!0)),a}catch(o){throw i!==null?i:o}},n.prototype.decodeBitMatrixParser=function(e,t){var r,i,a,o,c=e.readVersion(),u=e.readFormatInformation().getErrorCorrectionLevel(),h=e.readCodewords(),p=hL.getDataBlocks(h,c,u),g=0;try{for(var _=UA(p),E=_.next();!E.done;E=_.next()){var w=E.value;g+=w.getNumDataCodewords()}}catch(q){r={error:q}}finally{try{E&&!E.done&&(i=_.return)&&i.call(_)}finally{if(r)throw r.error}}var S=new Uint8Array(g),D=0;try{for(var T=UA(p),O=T.next();!O.done;O=T.next()){var w=O.value,j=w.getCodewords(),z=w.getNumDataCodewords();this.correctErrors(j,z);for(var H=0;H<z;H++)S[D++]=j[H]}}catch(q){a={error:q}}finally{try{O&&!O.done&&(o=T.return)&&o.call(T)}finally{if(a)throw a.error}}return dL.decode(S,c,u,t)},n.prototype.correctErrors=function(e,t){var r=new Int32Array(e);try{this.rsDecoder.decode(r,e.length-t)}catch{throw new bn}for(var i=0;i<t;i++)e[i]=r[i]},n})(),mL=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),gL=(function(n){mL(e,n);function e(t,r,i){var a=n.call(this,t,r)||this;return a.estimatedModuleSize=i,a}return e.prototype.aboutEquals=function(t,r,i){if(Math.abs(r-this.getY())<=t&&Math.abs(i-this.getX())<=t){var a=Math.abs(t-this.estimatedModuleSize);return a<=1||a<=this.estimatedModuleSize}return!1},e.prototype.combineEstimate=function(t,r,i){var a=(this.getX()+r)/2,o=(this.getY()+t)/2,c=(this.estimatedModuleSize+i)/2;return new e(a,o,c)},e})(Se),vL=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},yL=(function(){function n(e,t,r,i,a,o,c){this.image=e,this.startX=t,this.startY=r,this.width=i,this.height=a,this.moduleSize=o,this.resultPointCallback=c,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}return n.prototype.find=function(){for(var e=this.startX,t=this.height,r=this.width,i=e+r,a=this.startY+t/2,o=new Int32Array(3),c=this.image,u=0;u<t;u++){var h=a+((u&1)===0?Math.floor((u+1)/2):-Math.floor((u+1)/2));o[0]=0,o[1]=0,o[2]=0;for(var p=e;p<i&&!c.get(p,h);)p++;for(var g=0;p<i;){if(c.get(p,h))if(g===1)o[1]++;else if(g===2){if(this.foundPatternCross(o)){var _=this.handlePossibleCenter(o,h,p);if(_!==null)return _}o[0]=o[2],o[1]=1,o[2]=0,g=1}else o[++g]++;else g===1&&g++,o[g]++;p++}if(this.foundPatternCross(o)){var _=this.handlePossibleCenter(o,h,i);if(_!==null)return _}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new ae},n.centerFromEnd=function(e,t){return t-e[2]-e[1]/2},n.prototype.foundPatternCross=function(e){for(var t=this.moduleSize,r=t/2,i=0;i<3;i++)if(Math.abs(t-e[i])>=r)return!1;return!0},n.prototype.crossCheckVertical=function(e,t,r,i){var a=this.image,o=a.getHeight(),c=this.crossCheckStateCount;c[0]=0,c[1]=0,c[2]=0;for(var u=e;u>=0&&a.get(t,u)&&c[1]<=r;)c[1]++,u--;if(u<0||c[1]>r)return NaN;for(;u>=0&&!a.get(t,u)&&c[0]<=r;)c[0]++,u--;if(c[0]>r)return NaN;for(u=e+1;u<o&&a.get(t,u)&&c[1]<=r;)c[1]++,u++;if(u===o||c[1]>r)return NaN;for(;u<o&&!a.get(t,u)&&c[2]<=r;)c[2]++,u++;if(c[2]>r)return NaN;var h=c[0]+c[1]+c[2];return 5*Math.abs(h-i)>=2*i?NaN:this.foundPatternCross(c)?n.centerFromEnd(c,u):NaN},n.prototype.handlePossibleCenter=function(e,t,r){var i,a,o=e[0]+e[1]+e[2],c=n.centerFromEnd(e,r),u=this.crossCheckVertical(t,c,2*e[1],o);if(!isNaN(u)){var h=(e[0]+e[1]+e[2])/3;try{for(var p=vL(this.possibleCenters),g=p.next();!g.done;g=p.next()){var _=g.value;if(_.aboutEquals(h,u,c))return _.combineEstimate(u,c,h)}}catch(w){i={error:w}}finally{try{g&&!g.done&&(a=p.return)&&a.call(p)}finally{if(i)throw i.error}}var E=new gL(c,u,h);this.possibleCenters.push(E),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(E)}return null},n})(),_L=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),xL=(function(n){_L(e,n);function e(t,r,i,a){var o=n.call(this,t,r)||this;return o.estimatedModuleSize=i,o.count=a,a===void 0&&(o.count=1),o}return e.prototype.getEstimatedModuleSize=function(){return this.estimatedModuleSize},e.prototype.getCount=function(){return this.count},e.prototype.aboutEquals=function(t,r,i){if(Math.abs(r-this.getY())<=t&&Math.abs(i-this.getX())<=t){var a=Math.abs(t-this.estimatedModuleSize);return a<=1||a<=this.estimatedModuleSize}return!1},e.prototype.combineEstimate=function(t,r,i){var a=this.count+1,o=(this.count*this.getX()+r)/a,c=(this.count*this.getY()+t)/a,u=(this.count*this.estimatedModuleSize+i)/a;return new e(o,c,u,a)},e})(Se),EL=(function(){function n(e){this.bottomLeft=e[0],this.topLeft=e[1],this.topRight=e[2]}return n.prototype.getBottomLeft=function(){return this.bottomLeft},n.prototype.getTopLeft=function(){return this.topLeft},n.prototype.getTopRight=function(){return this.topRight},n})(),$u=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},wL=(function(){function n(e,t){this.image=e,this.resultPointCallback=t,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=t}return n.prototype.getImage=function(){return this.image},n.prototype.getPossibleCenters=function(){return this.possibleCenters},n.prototype.find=function(e){var t=e!=null&&e.get(Vt.TRY_HARDER)!==void 0,r=e!=null&&e.get(Vt.PURE_BARCODE)!==void 0,i=this.image,a=i.getHeight(),o=i.getWidth(),c=Math.floor(3*a/(4*n.MAX_MODULES));(c<n.MIN_SKIP||t)&&(c=n.MIN_SKIP);for(var u=!1,h=new Int32Array(5),p=c-1;p<a&&!u;p+=c){h[0]=0,h[1]=0,h[2]=0,h[3]=0,h[4]=0;for(var g=0,_=0;_<o;_++)if(i.get(_,p))(g&1)===1&&g++,h[g]++;else if((g&1)===0)if(g===4)if(n.foundPatternCross(h)){var E=this.handlePossibleCenter(h,p,_,r);if(E===!0)if(c=2,this.hasSkipped===!0)u=this.haveMultiplyConfirmedCenters();else{var w=this.findRowSkip();w>h[2]&&(p+=w-h[2]-c,_=o-1)}else{h[0]=h[2],h[1]=h[3],h[2]=h[4],h[3]=1,h[4]=0,g=3;continue}g=0,h[0]=0,h[1]=0,h[2]=0,h[3]=0,h[4]=0}else h[0]=h[2],h[1]=h[3],h[2]=h[4],h[3]=1,h[4]=0,g=3;else h[++g]++;else h[g]++;if(n.foundPatternCross(h)){var E=this.handlePossibleCenter(h,p,o,r);E===!0&&(c=h[0],this.hasSkipped&&(u=this.haveMultiplyConfirmedCenters()))}}var S=this.selectBestPatterns();return Se.orderBestPatterns(S),new EL(S)},n.centerFromEnd=function(e,t){return t-e[4]-e[3]-e[2]/2},n.foundPatternCross=function(e){for(var t=0,r=0;r<5;r++){var i=e[r];if(i===0)return!1;t+=i}if(t<7)return!1;var a=t/7,o=a/2;return Math.abs(a-e[0])<o&&Math.abs(a-e[1])<o&&Math.abs(3*a-e[2])<3*o&&Math.abs(a-e[3])<o&&Math.abs(a-e[4])<o},n.prototype.getCrossCheckStateCount=function(){var e=this.crossCheckStateCount;return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e},n.prototype.crossCheckDiagonal=function(e,t,r,i){for(var a=this.getCrossCheckStateCount(),o=0,c=this.image;e>=o&&t>=o&&c.get(t-o,e-o);)a[2]++,o++;if(e<o||t<o)return!1;for(;e>=o&&t>=o&&!c.get(t-o,e-o)&&a[1]<=r;)a[1]++,o++;if(e<o||t<o||a[1]>r)return!1;for(;e>=o&&t>=o&&c.get(t-o,e-o)&&a[0]<=r;)a[0]++,o++;if(a[0]>r)return!1;var u=c.getHeight(),h=c.getWidth();for(o=1;e+o<u&&t+o<h&&c.get(t+o,e+o);)a[2]++,o++;if(e+o>=u||t+o>=h)return!1;for(;e+o<u&&t+o<h&&!c.get(t+o,e+o)&&a[3]<r;)a[3]++,o++;if(e+o>=u||t+o>=h||a[3]>=r)return!1;for(;e+o<u&&t+o<h&&c.get(t+o,e+o)&&a[4]<r;)a[4]++,o++;if(a[4]>=r)return!1;var p=a[0]+a[1]+a[2]+a[3]+a[4];return Math.abs(p-i)<2*i&&n.foundPatternCross(a)},n.prototype.crossCheckVertical=function(e,t,r,i){for(var a=this.image,o=a.getHeight(),c=this.getCrossCheckStateCount(),u=e;u>=0&&a.get(t,u);)c[2]++,u--;if(u<0)return NaN;for(;u>=0&&!a.get(t,u)&&c[1]<=r;)c[1]++,u--;if(u<0||c[1]>r)return NaN;for(;u>=0&&a.get(t,u)&&c[0]<=r;)c[0]++,u--;if(c[0]>r)return NaN;for(u=e+1;u<o&&a.get(t,u);)c[2]++,u++;if(u===o)return NaN;for(;u<o&&!a.get(t,u)&&c[3]<r;)c[3]++,u++;if(u===o||c[3]>=r)return NaN;for(;u<o&&a.get(t,u)&&c[4]<r;)c[4]++,u++;if(c[4]>=r)return NaN;var h=c[0]+c[1]+c[2]+c[3]+c[4];return 5*Math.abs(h-i)>=2*i?NaN:n.foundPatternCross(c)?n.centerFromEnd(c,u):NaN},n.prototype.crossCheckHorizontal=function(e,t,r,i){for(var a=this.image,o=a.getWidth(),c=this.getCrossCheckStateCount(),u=e;u>=0&&a.get(u,t);)c[2]++,u--;if(u<0)return NaN;for(;u>=0&&!a.get(u,t)&&c[1]<=r;)c[1]++,u--;if(u<0||c[1]>r)return NaN;for(;u>=0&&a.get(u,t)&&c[0]<=r;)c[0]++,u--;if(c[0]>r)return NaN;for(u=e+1;u<o&&a.get(u,t);)c[2]++,u++;if(u===o)return NaN;for(;u<o&&!a.get(u,t)&&c[3]<r;)c[3]++,u++;if(u===o||c[3]>=r)return NaN;for(;u<o&&a.get(u,t)&&c[4]<r;)c[4]++,u++;if(c[4]>=r)return NaN;var h=c[0]+c[1]+c[2]+c[3]+c[4];return 5*Math.abs(h-i)>=i?NaN:n.foundPatternCross(c)?n.centerFromEnd(c,u):NaN},n.prototype.handlePossibleCenter=function(e,t,r,i){var a=e[0]+e[1]+e[2]+e[3]+e[4],o=n.centerFromEnd(e,r),c=this.crossCheckVertical(t,Math.floor(o),e[2],a);if(!isNaN(c)&&(o=this.crossCheckHorizontal(Math.floor(o),Math.floor(c),e[2],a),!isNaN(o)&&(!i||this.crossCheckDiagonal(Math.floor(c),Math.floor(o),e[2],a)))){for(var u=a/7,h=!1,p=this.possibleCenters,g=0,_=p.length;g<_;g++){var E=p[g];if(E.aboutEquals(u,c,o)){p[g]=E.combineEstimate(c,o,u),h=!0;break}}if(!h){var w=new xL(o,c,u);p.push(w),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(w)}return!0}return!1},n.prototype.findRowSkip=function(){var e,t,r=this.possibleCenters.length;if(r<=1)return 0;var i=null;try{for(var a=$u(this.possibleCenters),o=a.next();!o.done;o=a.next()){var c=o.value;if(c.getCount()>=n.CENTER_QUORUM)if(i==null)i=c;else return this.hasSkipped=!0,Math.floor((Math.abs(i.getX()-c.getX())-Math.abs(i.getY()-c.getY()))/2)}}catch(u){e={error:u}}finally{try{o&&!o.done&&(t=a.return)&&t.call(a)}finally{if(e)throw e.error}}return 0},n.prototype.haveMultiplyConfirmedCenters=function(){var e,t,r,i,a=0,o=0,c=this.possibleCenters.length;try{for(var u=$u(this.possibleCenters),h=u.next();!h.done;h=u.next()){var p=h.value;p.getCount()>=n.CENTER_QUORUM&&(a++,o+=p.getEstimatedModuleSize())}}catch(S){e={error:S}}finally{try{h&&!h.done&&(t=u.return)&&t.call(u)}finally{if(e)throw e.error}}if(a<3)return!1;var g=o/c,_=0;try{for(var E=$u(this.possibleCenters),w=E.next();!w.done;w=E.next()){var p=w.value;_+=Math.abs(p.getEstimatedModuleSize()-g)}}catch(S){r={error:S}}finally{try{w&&!w.done&&(i=E.return)&&i.call(E)}finally{if(r)throw r.error}}return _<=.05*o},n.prototype.selectBestPatterns=function(){var e,t,r,i,a=this.possibleCenters.length;if(a<3)throw new ae;var o=this.possibleCenters,c;if(a>3){var u=0,h=0;try{for(var p=$u(this.possibleCenters),g=p.next();!g.done;g=p.next()){var _=g.value,E=_.getEstimatedModuleSize();u+=E,h+=E*E}}catch(H){e={error:H}}finally{try{g&&!g.done&&(t=p.return)&&t.call(p)}finally{if(e)throw e.error}}c=u/a;var w=Math.sqrt(h/a-c*c);o.sort(function(H,q){var N=Math.abs(q.getEstimatedModuleSize()-c),b=Math.abs(H.getEstimatedModuleSize()-c);return N<b?-1:N>b?1:0});for(var S=Math.max(.2*c,w),D=0;D<o.length&&o.length>3;D++){var T=o[D];Math.abs(T.getEstimatedModuleSize()-c)>S&&(o.splice(D,1),D--)}}if(o.length>3){var u=0;try{for(var O=$u(o),j=O.next();!j.done;j=O.next()){var z=j.value;u+=z.getEstimatedModuleSize()}}catch(q){r={error:q}}finally{try{j&&!j.done&&(i=O.return)&&i.call(O)}finally{if(r)throw r.error}}c=u/o.length,o.sort(function(q,N){if(N.getCount()===q.getCount()){var b=Math.abs(N.getEstimatedModuleSize()-c),I=Math.abs(q.getEstimatedModuleSize()-c);return b<I?1:b>I?-1:0}else return N.getCount()-q.getCount()}),o.splice(3)}return[o[0],o[1],o[2]]},n.CENTER_QUORUM=2,n.MIN_SKIP=3,n.MAX_MODULES=57,n})(),AL=(function(){function n(e){this.image=e}return n.prototype.getImage=function(){return this.image},n.prototype.getResultPointCallback=function(){return this.resultPointCallback},n.prototype.detect=function(e){this.resultPointCallback=e==null?null:e.get(Vt.NEED_RESULT_POINT_CALLBACK);var t=new wL(this.image,this.resultPointCallback),r=t.find(e);return this.processFinderPatternInfo(r)},n.prototype.processFinderPatternInfo=function(e){var t=e.getTopLeft(),r=e.getTopRight(),i=e.getBottomLeft(),a=this.calculateModuleSize(t,r,i);if(a<1)throw new ae("No pattern found in proccess finder.");var o=n.computeDimension(t,r,i,a),c=Wo.getProvisionalVersionForDimension(o),u=c.getDimensionForVersion()-7,h=null;if(c.getAlignmentPatternCenters().length>0)for(var p=r.getX()-t.getX()+i.getX(),g=r.getY()-t.getY()+i.getY(),_=1-3/u,E=Math.floor(t.getX()+_*(p-t.getX())),w=Math.floor(t.getY()+_*(g-t.getY())),S=4;S<=16;S<<=1)try{h=this.findAlignmentInRegion(a,E,w,S);break}catch(j){if(!(j instanceof ae))throw j}var D=n.createTransform(t,r,i,h,o),T=n.sampleGrid(this.image,D,o),O;return h===null?O=[i,t,r]:O=[i,t,r,h],new By(T,O)},n.createTransform=function(e,t,r,i,a){var o=a-3.5,c,u,h,p;return i!==null?(c=i.getX(),u=i.getY(),h=o-3,p=h):(c=t.getX()-e.getX()+r.getX(),u=t.getY()-e.getY()+r.getY(),h=o,p=o),w3.quadrilateralToQuadrilateral(3.5,3.5,o,3.5,h,p,3.5,o,e.getX(),e.getY(),t.getX(),t.getY(),c,u,r.getX(),r.getY())},n.sampleGrid=function(e,t,r){var i=Vy.getInstance();return i.sampleGridWithTransform(e,r,r,t)},n.computeDimension=function(e,t,r,i){var a=mt.round(Se.distance(e,t)/i),o=mt.round(Se.distance(e,r)/i),c=Math.floor((a+o)/2)+7;switch(c&3){case 0:c++;break;case 2:c--;break;case 3:throw new ae("Dimensions could be not found.")}return c},n.prototype.calculateModuleSize=function(e,t,r){return(this.calculateModuleSizeOneWay(e,t)+this.calculateModuleSizeOneWay(e,r))/2},n.prototype.calculateModuleSizeOneWay=function(e,t){var r=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(e.getX()),Math.floor(e.getY()),Math.floor(t.getX()),Math.floor(t.getY())),i=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(t.getX()),Math.floor(t.getY()),Math.floor(e.getX()),Math.floor(e.getY()));return isNaN(r)?i/7:isNaN(i)?r/7:(r+i)/14},n.prototype.sizeOfBlackWhiteBlackRunBothWays=function(e,t,r,i){var a=this.sizeOfBlackWhiteBlackRun(e,t,r,i),o=1,c=e-(r-e);c<0?(o=e/(e-c),c=0):c>=this.image.getWidth()&&(o=(this.image.getWidth()-1-e)/(c-e),c=this.image.getWidth()-1);var u=Math.floor(t-(i-t)*o);return o=1,u<0?(o=t/(t-u),u=0):u>=this.image.getHeight()&&(o=(this.image.getHeight()-1-t)/(u-t),u=this.image.getHeight()-1),c=Math.floor(e+(c-e)*o),a+=this.sizeOfBlackWhiteBlackRun(e,t,c,u),a-1},n.prototype.sizeOfBlackWhiteBlackRun=function(e,t,r,i){var a=Math.abs(i-t)>Math.abs(r-e);if(a){var o=e;e=t,t=o,o=r,r=i,i=o}for(var c=Math.abs(r-e),u=Math.abs(i-t),h=-c/2,p=e<r?1:-1,g=t<i?1:-1,_=0,E=r+p,w=e,S=t;w!==E;w+=p){var D=a?S:w,T=a?w:S;if(_===1===this.image.get(D,T)){if(_===2)return mt.distance(w,S,e,t);_++}if(h+=u,h>0){if(S===i)break;S+=g,h-=c}}return _===2?mt.distance(r+p,i,e,t):NaN},n.prototype.findAlignmentInRegion=function(e,t,r,i){var a=Math.floor(i*e),o=Math.max(0,t-a),c=Math.min(this.image.getWidth()-1,t+a);if(c-o<e*3)throw new ae("Alignment top exceeds estimated module size.");var u=Math.max(0,r-a),h=Math.min(this.image.getHeight()-1,r+a);if(h-u<e*3)throw new ae("Alignment bottom exceeds estimated module size.");var p=new yL(this.image,o,u,c-o,h-u,e,this.resultPointCallback);return p.find()},n})(),I0=(function(){function n(){this.decoder=new pL}return n.prototype.getDecoder=function(){return this.decoder},n.prototype.decode=function(e,t){var r,i;if(t!=null&&t.get(Vt.PURE_BARCODE)!==void 0){var a=n.extractPureBits(e.getBlackMatrix());r=this.decoder.decodeBitMatrix(a,t),i=n.NO_POINTS}else{var o=new AL(e.getBlackMatrix()).detect(t);r=this.decoder.decodeBitMatrix(o.getBits(),t),i=o.getPoints()}r.getOther()instanceof I3&&r.getOther().applyMirroredCorrection(i);var c=new hr(r.getText(),r.getRawBytes(),void 0,i,Me.QR_CODE,void 0),u=r.getByteSegments();u!==null&&c.putMetadata(ar.BYTE_SEGMENTS,u);var h=r.getECLevel();return h!==null&&c.putMetadata(ar.ERROR_CORRECTION_LEVEL,h),r.hasStructuredAppend()&&(c.putMetadata(ar.STRUCTURED_APPEND_SEQUENCE,r.getStructuredAppendSequenceNumber()),c.putMetadata(ar.STRUCTURED_APPEND_PARITY,r.getStructuredAppendParity())),c},n.prototype.reset=function(){},n.extractPureBits=function(e){var t=e.getTopLeftOnBit(),r=e.getBottomRightOnBit();if(t===null||r===null)throw new ae;var i=this.moduleSize(t,e),a=t[1],o=r[1],c=t[0],u=r[0];if(c>=u||a>=o)throw new ae;if(o-a!==u-c&&(u=c+(o-a),u>=e.getWidth()))throw new ae;var h=Math.round((u-c+1)/i),p=Math.round((o-a+1)/i);if(h<=0||p<=0)throw new ae;if(p!==h)throw new ae;var g=Math.floor(i/2);a+=g,c+=g;var _=c+Math.floor((h-1)*i)-u;if(_>0){if(_>g)throw new ae;c-=_}var E=a+Math.floor((p-1)*i)-o;if(E>0){if(E>g)throw new ae;a-=E}for(var w=new ya(h,p),S=0;S<p;S++)for(var D=a+Math.floor(S*i),T=0;T<h;T++)e.get(c+Math.floor(T*i),D)&&w.set(T,S);return w},n.moduleSize=function(e,t){for(var r=t.getHeight(),i=t.getWidth(),a=e[0],o=e[1],c=!0,u=0;a<i&&o<r;){if(c!==t.get(a,o)){if(++u===5)break;c=!c}a++,o++}if(a===i||o===r)throw new ae;return(a-e[0])/7},n.NO_POINTS=new Array,n})(),bL=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ht=(function(){function n(){}return n.prototype.PDF417Common=function(){},n.getBitCountSum=function(e){return mt.sum(e)},n.toIntArray=function(e){var t,r;if(e==null||!e.length)return n.EMPTY_INT_ARRAY;var i=new Int32Array(e.length),a=0;try{for(var o=bL(e),c=o.next();!c.done;c=o.next()){var u=c.value;i[a++]=u}}catch(h){t={error:h}}finally{try{c&&!c.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}return i},n.getCodeword=function(e){var t=Dn.binarySearch(n.SYMBOL_TABLE,e&262143);return t<0?-1:(n.CODEWORD_TABLE[t]-1)%n.NUMBER_OF_CODEWORDS},n.NUMBER_OF_CODEWORDS=929,n.MAX_CODEWORDS_IN_BARCODE=n.NUMBER_OF_CODEWORDS-1,n.MIN_ROWS_IN_BARCODE=3,n.MAX_ROWS_IN_BARCODE=90,n.MODULES_IN_CODEWORD=17,n.MODULES_IN_STOP_PATTERN=18,n.BARS_IN_MODULE=8,n.EMPTY_INT_ARRAY=new Int32Array([]),n.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),n.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]),n})(),SL=(function(){function n(e,t){this.bits=e,this.points=t}return n.prototype.getBits=function(){return this.bits},n.prototype.getPoints=function(){return this.points},n})(),CL=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},TL=(function(){function n(){}return n.detectMultiple=function(e,t,r){var i=e.getBlackMatrix(),a=n.detect(r,i);return a.length||(i=i.clone(),i.rotate180(),a=n.detect(r,i)),new SL(i,a)},n.detect=function(e,t){for(var r,i,a=new Array,o=0,c=0,u=!1;o<t.getHeight();){var h=n.findVertices(t,o,c);if(h[0]==null&&h[3]==null){if(!u)break;u=!1,c=0;try{for(var p=(r=void 0,CL(a)),g=p.next();!g.done;g=p.next()){var _=g.value;_[1]!=null&&(o=Math.trunc(Math.max(o,_[1].getY()))),_[3]!=null&&(o=Math.max(o,Math.trunc(_[3].getY())))}}catch(E){r={error:E}}finally{try{g&&!g.done&&(i=p.return)&&i.call(p)}finally{if(r)throw r.error}}o+=n.ROW_STEP;continue}if(u=!0,a.push(h),!e)break;h[2]!=null?(c=Math.trunc(h[2].getX()),o=Math.trunc(h[2].getY())):(c=Math.trunc(h[4].getX()),o=Math.trunc(h[4].getY()))}return a},n.findVertices=function(e,t,r){var i=e.getHeight(),a=e.getWidth(),o=new Array(8);return n.copyToResult(o,n.findRowsWithPattern(e,i,a,t,r,n.START_PATTERN),n.INDEXES_START_PATTERN),o[4]!=null&&(r=Math.trunc(o[4].getX()),t=Math.trunc(o[4].getY())),n.copyToResult(o,n.findRowsWithPattern(e,i,a,t,r,n.STOP_PATTERN),n.INDEXES_STOP_PATTERN),o},n.copyToResult=function(e,t,r){for(var i=0;i<r.length;i++)e[r[i]]=t[i]},n.findRowsWithPattern=function(e,t,r,i,a,o){for(var c=new Array(4),u=!1,h=new Int32Array(o.length);i<t;i+=n.ROW_STEP){var p=n.findGuardPattern(e,a,i,r,!1,o,h);if(p!=null){for(;i>0;){var g=n.findGuardPattern(e,a,--i,r,!1,o,h);if(g!=null)p=g;else{i++;break}}c[0]=new Se(p[0],i),c[1]=new Se(p[1],i),u=!0;break}}var _=i+1;if(u){for(var E=0,g=Int32Array.from([Math.trunc(c[0].getX()),Math.trunc(c[1].getX())]);_<t;_++){var p=n.findGuardPattern(e,g[0],_,r,!1,o,h);if(p!=null&&Math.abs(g[0]-p[0])<n.MAX_PATTERN_DRIFT&&Math.abs(g[1]-p[1])<n.MAX_PATTERN_DRIFT)g=p,E=0;else{if(E>n.SKIPPED_ROW_COUNT_MAX)break;E++}}_-=E+1,c[2]=new Se(g[0],_),c[3]=new Se(g[1],_)}return _-i<n.BARCODE_MIN_HEIGHT&&Dn.fill(c,null),c},n.findGuardPattern=function(e,t,r,i,a,o,c){Dn.fillWithin(c,0,c.length,0);for(var u=t,h=0;e.get(u,r)&&u>0&&h++<n.MAX_PIXEL_DRIFT;)u--;for(var p=u,g=0,_=o.length,E=a;p<i;p++){var w=e.get(p,r);if(w!==E)c[g]++;else{if(g===_-1){if(n.patternMatchVariance(c,o,n.MAX_INDIVIDUAL_VARIANCE)<n.MAX_AVG_VARIANCE)return new Int32Array([u,p]);u+=c[0]+c[1],Bt.arraycopy(c,2,c,0,g-1),c[g-1]=0,c[g]=0,g--}else g++;c[g]=1,E=!E}}return g===_-1&&n.patternMatchVariance(c,o,n.MAX_INDIVIDUAL_VARIANCE)<n.MAX_AVG_VARIANCE?new Int32Array([u,p-1]):null},n.patternMatchVariance=function(e,t,r){for(var i=e.length,a=0,o=0,c=0;c<i;c++)a+=e[c],o+=t[c];if(a<o)return 1/0;var u=a/o;r*=u;for(var h=0,p=0;p<i;p++){var g=e[p],_=t[p]*u,E=g>_?g-_:_-g;if(E>r)return 1/0;h+=E}return h/a},n.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),n.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),n.MAX_AVG_VARIANCE=.42,n.MAX_INDIVIDUAL_VARIANCE=.8,n.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),n.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),n.MAX_PIXEL_DRIFT=3,n.MAX_PATTERN_DRIFT=5,n.SKIPPED_ROW_COUNT_MAX=25,n.ROW_STEP=5,n.BARCODE_MIN_HEIGHT=10,n})(),IL=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Xo=(function(){function n(e,t){if(t.length===0)throw new Pe;this.field=e;var r=t.length;if(r>1&&t[0]===0){for(var i=1;i<r&&t[i]===0;)i++;i===r?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(r-i),Bt.arraycopy(t,i,this.coefficients,0,this.coefficients.length))}else this.coefficients=t}return n.prototype.getCoefficients=function(){return this.coefficients},n.prototype.getDegree=function(){return this.coefficients.length-1},n.prototype.isZero=function(){return this.coefficients[0]===0},n.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},n.prototype.evaluateAt=function(e){var t,r;if(e===0)return this.getCoefficient(0);if(e===1){var i=0;try{for(var a=IL(this.coefficients),o=a.next();!o.done;o=a.next()){var c=o.value;i=this.field.add(i,c)}}catch(g){t={error:g}}finally{try{o&&!o.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}return i}for(var u=this.coefficients[0],h=this.coefficients.length,p=1;p<h;p++)u=this.field.add(this.field.multiply(e,u),this.coefficients[p]);return u},n.prototype.add=function(e){if(!this.field.equals(e.field))throw new Pe("ModulusPolys do not have same ModulusGF field");if(this.isZero())return e;if(e.isZero())return this;var t=this.coefficients,r=e.coefficients;if(t.length>r.length){var i=t;t=r,r=i}var a=new Int32Array(r.length),o=r.length-t.length;Bt.arraycopy(r,0,a,0,o);for(var c=o;c<r.length;c++)a[c]=this.field.add(t[c-o],r[c]);return new n(this.field,a)},n.prototype.subtract=function(e){if(!this.field.equals(e.field))throw new Pe("ModulusPolys do not have same ModulusGF field");return e.isZero()?this:this.add(e.negative())},n.prototype.multiply=function(e){return e instanceof n?this.multiplyOther(e):this.multiplyScalar(e)},n.prototype.multiplyOther=function(e){if(!this.field.equals(e.field))throw new Pe("ModulusPolys do not have same ModulusGF field");if(this.isZero()||e.isZero())return new n(this.field,new Int32Array([0]));for(var t=this.coefficients,r=t.length,i=e.coefficients,a=i.length,o=new Int32Array(r+a-1),c=0;c<r;c++)for(var u=t[c],h=0;h<a;h++)o[c+h]=this.field.add(o[c+h],this.field.multiply(u,i[h]));return new n(this.field,o)},n.prototype.negative=function(){for(var e=this.coefficients.length,t=new Int32Array(e),r=0;r<e;r++)t[r]=this.field.subtract(0,this.coefficients[r]);return new n(this.field,t)},n.prototype.multiplyScalar=function(e){if(e===0)return new n(this.field,new Int32Array([0]));if(e===1)return this;for(var t=this.coefficients.length,r=new Int32Array(t),i=0;i<t;i++)r[i]=this.field.multiply(this.coefficients[i],e);return new n(this.field,r)},n.prototype.multiplyByMonomial=function(e,t){if(e<0)throw new Pe;if(t===0)return new n(this.field,new Int32Array([0]));for(var r=this.coefficients.length,i=new Int32Array(r+e),a=0;a<r;a++)i[a]=this.field.multiply(this.coefficients[a],t);return new n(this.field,i)},n.prototype.toString=function(){for(var e=new We,t=this.getDegree();t>=0;t--){var r=this.getCoefficient(t);r!==0&&(r<0?(e.append(" - "),r=-r):e.length()>0&&e.append(" + "),(t===0||r!==1)&&e.append(r),t!==0&&(t===1?e.append("x"):(e.append("x^"),e.append(t))))}return e.toString()},n})(),NL=(function(){function n(){}return n.prototype.add=function(e,t){return(e+t)%this.modulus},n.prototype.subtract=function(e,t){return(this.modulus+e-t)%this.modulus},n.prototype.exp=function(e){return this.expTable[e]},n.prototype.log=function(e){if(e===0)throw new Pe;return this.logTable[e]},n.prototype.inverse=function(e){if(e===0)throw new E3;return this.expTable[this.modulus-this.logTable[e]-1]},n.prototype.multiply=function(e,t){return e===0||t===0?0:this.expTable[(this.logTable[e]+this.logTable[t])%(this.modulus-1)]},n.prototype.getSize=function(){return this.modulus},n.prototype.equals=function(e){return e===this},n})(),RL=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),OL=(function(n){RL(e,n);function e(t,r){var i=n.call(this)||this;i.modulus=t,i.expTable=new Int32Array(t),i.logTable=new Int32Array(t);for(var a=1,o=0;o<t;o++)i.expTable[o]=a,a=a*r%t;for(var o=0;o<t-1;o++)i.logTable[i.expTable[o]]=o;return i.zero=new Xo(i,new Int32Array([0])),i.one=new Xo(i,new Int32Array([1])),i}return e.prototype.getZero=function(){return this.zero},e.prototype.getOne=function(){return this.one},e.prototype.buildMonomial=function(t,r){if(t<0)throw new Pe;if(r===0)return this.zero;var i=new Int32Array(t+1);return i[0]=r,new Xo(this,i)},e.PDF417_GF=new e(ht.NUMBER_OF_CODEWORDS,3),e})(NL),DL=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ML=(function(){function n(){this.field=OL.PDF417_GF}return n.prototype.decode=function(e,t,r){for(var i,a,o=new Xo(this.field,e),c=new Int32Array(t),u=!1,h=t;h>0;h--){var p=o.evaluateAt(this.field.exp(h));c[t-h]=p,p!==0&&(u=!0)}if(!u)return 0;var g=this.field.getOne();if(r!=null)try{for(var _=DL(r),E=_.next();!E.done;E=_.next()){var w=E.value,S=this.field.exp(e.length-1-w),D=new Xo(this.field,new Int32Array([this.field.subtract(0,S),1]));g=g.multiply(D)}}catch(b){i={error:b}}finally{try{E&&!E.done&&(a=_.return)&&a.call(_)}finally{if(i)throw i.error}}for(var T=new Xo(this.field,c),O=this.runEuclideanAlgorithm(this.field.buildMonomial(t,1),T,t),j=O[0],z=O[1],H=this.findErrorLocations(j),q=this.findErrorMagnitudes(z,j,H),h=0;h<H.length;h++){var N=e.length-1-this.field.log(H[h]);if(N<0)throw bn.getChecksumInstance();e[N]=this.field.subtract(e[N],q[h])}return H.length},n.prototype.runEuclideanAlgorithm=function(e,t,r){if(e.getDegree()<t.getDegree()){var i=e;e=t,t=i}for(var a=e,o=t,c=this.field.getZero(),u=this.field.getOne();o.getDegree()>=Math.round(r/2);){var h=a,p=c;if(a=o,c=u,a.isZero())throw bn.getChecksumInstance();o=h;for(var g=this.field.getZero(),_=a.getCoefficient(a.getDegree()),E=this.field.inverse(_);o.getDegree()>=a.getDegree()&&!o.isZero();){var w=o.getDegree()-a.getDegree(),S=this.field.multiply(o.getCoefficient(o.getDegree()),E);g=g.add(this.field.buildMonomial(w,S)),o=o.subtract(a.multiplyByMonomial(w,S))}u=g.multiply(c).subtract(p).negative()}var D=u.getCoefficient(0);if(D===0)throw bn.getChecksumInstance();var T=this.field.inverse(D),O=u.multiply(T),j=o.multiply(T);return[O,j]},n.prototype.findErrorLocations=function(e){for(var t=e.getDegree(),r=new Int32Array(t),i=0,a=1;a<this.field.getSize()&&i<t;a++)e.evaluateAt(a)===0&&(r[i]=this.field.inverse(a),i++);if(i!==t)throw bn.getChecksumInstance();return r},n.prototype.findErrorMagnitudes=function(e,t,r){for(var i=t.getDegree(),a=new Int32Array(i),o=1;o<=i;o++)a[i-o]=this.field.multiply(o,t.getCoefficient(o));for(var c=new Xo(this.field,a),u=r.length,h=new Int32Array(u),o=0;o<u;o++){var p=this.field.inverse(r[o]),g=this.field.subtract(0,e.evaluateAt(p)),_=this.field.inverse(c.evaluateAt(p));h[o]=this.field.multiply(g,_)}return h},n})(),cv=(function(){function n(e,t,r,i,a){e instanceof n?this.constructor_2(e):this.constructor_1(e,t,r,i,a)}return n.prototype.constructor_1=function(e,t,r,i,a){var o=t==null||r==null,c=i==null||a==null;if(o&&c)throw new ae;o?(t=new Se(0,i.getY()),r=new Se(0,a.getY())):c&&(i=new Se(e.getWidth()-1,t.getY()),a=new Se(e.getWidth()-1,r.getY())),this.image=e,this.topLeft=t,this.bottomLeft=r,this.topRight=i,this.bottomRight=a,this.minX=Math.trunc(Math.min(t.getX(),r.getX())),this.maxX=Math.trunc(Math.max(i.getX(),a.getX())),this.minY=Math.trunc(Math.min(t.getY(),i.getY())),this.maxY=Math.trunc(Math.max(r.getY(),a.getY()))},n.prototype.constructor_2=function(e){this.image=e.image,this.topLeft=e.getTopLeft(),this.bottomLeft=e.getBottomLeft(),this.topRight=e.getTopRight(),this.bottomRight=e.getBottomRight(),this.minX=e.getMinX(),this.maxX=e.getMaxX(),this.minY=e.getMinY(),this.maxY=e.getMaxY()},n.merge=function(e,t){return e==null?t:t==null?e:new n(e.image,e.topLeft,e.bottomLeft,t.topRight,t.bottomRight)},n.prototype.addMissingRows=function(e,t,r){var i=this.topLeft,a=this.bottomLeft,o=this.topRight,c=this.bottomRight;if(e>0){var u=r?this.topLeft:this.topRight,h=Math.trunc(u.getY()-e);h<0&&(h=0);var p=new Se(u.getX(),h);r?i=p:o=p}if(t>0){var g=r?this.bottomLeft:this.bottomRight,_=Math.trunc(g.getY()+t);_>=this.image.getHeight()&&(_=this.image.getHeight()-1);var E=new Se(g.getX(),_);r?a=E:c=E}return new n(this.image,i,a,o,c)},n.prototype.getMinX=function(){return this.minX},n.prototype.getMaxX=function(){return this.maxX},n.prototype.getMinY=function(){return this.minY},n.prototype.getMaxY=function(){return this.maxY},n.prototype.getTopLeft=function(){return this.topLeft},n.prototype.getTopRight=function(){return this.topRight},n.prototype.getBottomLeft=function(){return this.bottomLeft},n.prototype.getBottomRight=function(){return this.bottomRight},n})(),PL=(function(){function n(e,t,r,i){this.columnCount=e,this.errorCorrectionLevel=i,this.rowCountUpperPart=t,this.rowCountLowerPart=r,this.rowCount=t+r}return n.prototype.getColumnCount=function(){return this.columnCount},n.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},n.prototype.getRowCount=function(){return this.rowCount},n.prototype.getRowCountUpperPart=function(){return this.rowCountUpperPart},n.prototype.getRowCountLowerPart=function(){return this.rowCountLowerPart},n})(),Uy=(function(){function n(){this.buffer=""}return n.form=function(e,t){var r=-1;function i(o,c,u,h,p,g){if(o==="%%")return"%";if(t[++r]!==void 0){o=h?parseInt(h.substr(1)):void 0;var _=p?parseInt(p.substr(1)):void 0,E;switch(g){case"s":E=t[r];break;case"c":E=t[r][0];break;case"f":E=parseFloat(t[r]).toFixed(o);break;case"p":E=parseFloat(t[r]).toPrecision(o);break;case"e":E=parseFloat(t[r]).toExponential(o);break;case"x":E=parseInt(t[r]).toString(_||16);break;case"d":E=parseFloat(parseInt(t[r],_||10).toPrecision(o)).toFixed(0);break}E=typeof E=="object"?JSON.stringify(E):(+E).toString(_);for(var w=parseInt(u),S=u&&u[0]+""=="0"?"0":" ";E.length<w;)E=c!==void 0?E+S:S+E;return E}}var a=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(a,i)},n.prototype.format=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this.buffer+=n.form(e,t)},n.prototype.toString=function(){return this.buffer},n})(),kL=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},N3=(function(){function n(e){this.boundingBox=new cv(e),this.codewords=new Array(e.getMaxY()-e.getMinY()+1)}return n.prototype.getCodewordNearby=function(e){var t=this.getCodeword(e);if(t!=null)return t;for(var r=1;r<n.MAX_NEARBY_DISTANCE;r++){var i=this.imageRowToCodewordIndex(e)-r;if(i>=0&&(t=this.codewords[i],t!=null)||(i=this.imageRowToCodewordIndex(e)+r,i<this.codewords.length&&(t=this.codewords[i],t!=null)))return t}return null},n.prototype.imageRowToCodewordIndex=function(e){return e-this.boundingBox.getMinY()},n.prototype.setCodeword=function(e,t){this.codewords[this.imageRowToCodewordIndex(e)]=t},n.prototype.getCodeword=function(e){return this.codewords[this.imageRowToCodewordIndex(e)]},n.prototype.getBoundingBox=function(){return this.boundingBox},n.prototype.getCodewords=function(){return this.codewords},n.prototype.toString=function(){var e,t,r=new Uy,i=0;try{for(var a=kL(this.codewords),o=a.next();!o.done;o=a.next()){var c=o.value;if(c==null){r.format("%3d:    |   %n",i++);continue}r.format("%3d: %3d|%3d%n",i++,c.getRowNumber(),c.getValue())}}catch(u){e={error:u}}finally{try{o&&!o.done&&(t=a.return)&&t.call(a)}finally{if(e)throw e.error}}return r.toString()},n.MAX_NEARBY_DISTANCE=5,n})(),LL=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},jL=function(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,a=[],o;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(c){o={error:c}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(o)throw o.error}}return a},af=(function(){function n(){this.values=new Map}return n.prototype.setValue=function(e){e=Math.trunc(e);var t=this.values.get(e);t==null&&(t=0),t++,this.values.set(e,t)},n.prototype.getValue=function(){var e,t,r=-1,i=new Array,a=function(g,_){var E={getKey:function(){return g},getValue:function(){return _}};E.getValue()>r?(r=E.getValue(),i=[],i.push(E.getKey())):E.getValue()===r&&i.push(E.getKey())};try{for(var o=LL(this.values.entries()),c=o.next();!c.done;c=o.next()){var u=jL(c.value,2),h=u[0],p=u[1];a(h,p)}}catch(g){e={error:g}}finally{try{c&&!c.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}return ht.toIntArray(i)},n.prototype.getConfidence=function(e){return this.values.get(e)},n})(),BL=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),qm=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},zA=(function(n){BL(e,n);function e(t,r){var i=n.call(this,t)||this;return i._isLeft=r,i}return e.prototype.setRowNumbers=function(){var t,r;try{for(var i=qm(this.getCodewords()),a=i.next();!a.done;a=i.next()){var o=a.value;o?.setRowNumberAsRowIndicatorColumn()}}catch(c){t={error:c}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}},e.prototype.adjustCompleteIndicatorColumnRowNumbers=function(t){var r=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(r,t);for(var i=this.getBoundingBox(),a=this._isLeft?i.getTopLeft():i.getTopRight(),o=this._isLeft?i.getBottomLeft():i.getBottomRight(),c=this.imageRowToCodewordIndex(Math.trunc(a.getY())),u=this.imageRowToCodewordIndex(Math.trunc(o.getY())),h=-1,p=1,g=0,_=c;_<u;_++)if(r[_]!=null){var E=r[_],w=E.getRowNumber()-h;if(w===0)g++;else if(w===1)p=Math.max(p,g),g=1,h=E.getRowNumber();else if(w<0||E.getRowNumber()>=t.getRowCount()||w>_)r[_]=null;else{var S=void 0;p>2?S=(p-2)*w:S=w;for(var D=S>=_,T=1;T<=S&&!D;T++)D=r[_-T]!=null;D?r[_]=null:(h=E.getRowNumber(),g=1)}}},e.prototype.getRowHeights=function(){var t,r,i=this.getBarcodeMetadata();if(i==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(i);var a=new Int32Array(i.getRowCount());try{for(var o=qm(this.getCodewords()),c=o.next();!c.done;c=o.next()){var u=c.value;if(u!=null){var h=u.getRowNumber();if(h>=a.length)continue;a[h]++}}}catch(p){t={error:p}}finally{try{c&&!c.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}return a},e.prototype.adjustIncompleteIndicatorColumnRowNumbers=function(t){for(var r=this.getBoundingBox(),i=this._isLeft?r.getTopLeft():r.getTopRight(),a=this._isLeft?r.getBottomLeft():r.getBottomRight(),o=this.imageRowToCodewordIndex(Math.trunc(i.getY())),c=this.imageRowToCodewordIndex(Math.trunc(a.getY())),u=this.getCodewords(),h=-1,p=o;p<c;p++)if(u[p]!=null){var g=u[p];g.setRowNumberAsRowIndicatorColumn();var _=g.getRowNumber()-h;_===0||(_===1?h=g.getRowNumber():g.getRowNumber()>=t.getRowCount()?u[p]=null:h=g.getRowNumber())}},e.prototype.getBarcodeMetadata=function(){var t,r,i=this.getCodewords(),a=new af,o=new af,c=new af,u=new af;try{for(var h=qm(i),p=h.next();!p.done;p=h.next()){var g=p.value;if(g!=null){g.setRowNumberAsRowIndicatorColumn();var _=g.getValue()%30,E=g.getRowNumber();switch(this._isLeft||(E+=2),E%3){case 0:o.setValue(_*3+1);break;case 1:u.setValue(_/3),c.setValue(_%3);break;case 2:a.setValue(_+1);break}}}}catch(S){t={error:S}}finally{try{p&&!p.done&&(r=h.return)&&r.call(h)}finally{if(t)throw t.error}}if(a.getValue().length===0||o.getValue().length===0||c.getValue().length===0||u.getValue().length===0||a.getValue()[0]<1||o.getValue()[0]+c.getValue()[0]<ht.MIN_ROWS_IN_BARCODE||o.getValue()[0]+c.getValue()[0]>ht.MAX_ROWS_IN_BARCODE)return null;var w=new PL(a.getValue()[0],o.getValue()[0],c.getValue()[0],u.getValue()[0]);return this.removeIncorrectCodewords(i,w),w},e.prototype.removeIncorrectCodewords=function(t,r){for(var i=0;i<t.length;i++){var a=t[i];if(t[i]!=null){var o=a.getValue()%30,c=a.getRowNumber();if(c>r.getRowCount()){t[i]=null;continue}switch(this._isLeft||(c+=2),c%3){case 0:o*3+1!==r.getRowCountUpperPart()&&(t[i]=null);break;case 1:(Math.trunc(o/3)!==r.getErrorCorrectionLevel()||o%3!==r.getRowCountLowerPart())&&(t[i]=null);break;case 2:o+1!==r.getColumnCount()&&(t[i]=null);break}}}},e.prototype.isLeft=function(){return this._isLeft},e.prototype.toString=function(){return"IsLeft: "+this._isLeft+`
`+n.prototype.toString.call(this)},e})(N3),VL=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},FL=(function(){function n(e,t){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=e,this.barcodeColumnCount=e.getColumnCount(),this.boundingBox=t,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}return n.prototype.getDetectionResultColumns=function(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);var e=ht.MAX_CODEWORDS_IN_BARCODE,t;do t=e,e=this.adjustRowNumbersAndGetCount();while(e>0&&e<t);return this.detectionResultColumns},n.prototype.adjustIndicatorColumnRowNumbers=function(e){e?.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)},n.prototype.adjustRowNumbersAndGetCount=function(){var e=this.adjustRowNumbersByRow();if(e===0)return 0;for(var t=1;t<this.barcodeColumnCount+1;t++)for(var r=this.detectionResultColumns[t].getCodewords(),i=0;i<r.length;i++)r[i]!=null&&(r[i].hasValidRowNumber()||this.adjustRowNumbers(t,i,r));return e},n.prototype.adjustRowNumbersByRow=function(){this.adjustRowNumbersFromBothRI();var e=this.adjustRowNumbersFromLRI();return e+this.adjustRowNumbersFromRRI()},n.prototype.adjustRowNumbersFromBothRI=function(){if(!(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)){for(var e=this.detectionResultColumns[0].getCodewords(),t=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),r=0;r<e.length;r++)if(e[r]!=null&&t[r]!=null&&e[r].getRowNumber()===t[r].getRowNumber())for(var i=1;i<=this.barcodeColumnCount;i++){var a=this.detectionResultColumns[i].getCodewords()[r];a!=null&&(a.setRowNumber(e[r].getRowNumber()),a.hasValidRowNumber()||(this.detectionResultColumns[i].getCodewords()[r]=null))}}},n.prototype.adjustRowNumbersFromRRI=function(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;for(var e=0,t=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),r=0;r<t.length;r++)if(t[r]!=null)for(var i=t[r].getRowNumber(),a=0,o=this.barcodeColumnCount+1;o>0&&a<this.ADJUST_ROW_NUMBER_SKIP;o--){var c=this.detectionResultColumns[o].getCodewords()[r];c!=null&&(a=n.adjustRowNumberIfValid(i,a,c),c.hasValidRowNumber()||e++)}return e},n.prototype.adjustRowNumbersFromLRI=function(){if(this.detectionResultColumns[0]==null)return 0;for(var e=0,t=this.detectionResultColumns[0].getCodewords(),r=0;r<t.length;r++)if(t[r]!=null)for(var i=t[r].getRowNumber(),a=0,o=1;o<this.barcodeColumnCount+1&&a<this.ADJUST_ROW_NUMBER_SKIP;o++){var c=this.detectionResultColumns[o].getCodewords()[r];c!=null&&(a=n.adjustRowNumberIfValid(i,a,c),c.hasValidRowNumber()||e++)}return e},n.adjustRowNumberIfValid=function(e,t,r){return r==null||r.hasValidRowNumber()||(r.isValidRowNumber(e)?(r.setRowNumber(e),t=0):++t),t},n.prototype.adjustRowNumbers=function(e,t,r){var i,a;if(this.detectionResultColumns[e-1]!=null){var o=r[t],c=this.detectionResultColumns[e-1].getCodewords(),u=c;this.detectionResultColumns[e+1]!=null&&(u=this.detectionResultColumns[e+1].getCodewords());var h=new Array(14);h[2]=c[t],h[3]=u[t],t>0&&(h[0]=r[t-1],h[4]=c[t-1],h[5]=u[t-1]),t>1&&(h[8]=r[t-2],h[10]=c[t-2],h[11]=u[t-2]),t<r.length-1&&(h[1]=r[t+1],h[6]=c[t+1],h[7]=u[t+1]),t<r.length-2&&(h[9]=r[t+2],h[12]=c[t+2],h[13]=u[t+2]);try{for(var p=VL(h),g=p.next();!g.done;g=p.next()){var _=g.value;if(n.adjustRowNumber(o,_))return}}catch(E){i={error:E}}finally{try{g&&!g.done&&(a=p.return)&&a.call(p)}finally{if(i)throw i.error}}}},n.adjustRowNumber=function(e,t){return t==null?!1:t.hasValidRowNumber()&&t.getBucket()===e.getBucket()?(e.setRowNumber(t.getRowNumber()),!0):!1},n.prototype.getBarcodeColumnCount=function(){return this.barcodeColumnCount},n.prototype.getBarcodeRowCount=function(){return this.barcodeMetadata.getRowCount()},n.prototype.getBarcodeECLevel=function(){return this.barcodeMetadata.getErrorCorrectionLevel()},n.prototype.setBoundingBox=function(e){this.boundingBox=e},n.prototype.getBoundingBox=function(){return this.boundingBox},n.prototype.setDetectionResultColumn=function(e,t){this.detectionResultColumns[e]=t},n.prototype.getDetectionResultColumn=function(e){return this.detectionResultColumns[e]},n.prototype.toString=function(){var e=this.detectionResultColumns[0];e==null&&(e=this.detectionResultColumns[this.barcodeColumnCount+1]);for(var t=new Uy,r=0;r<e.getCodewords().length;r++){t.format("CW %3d:",r);for(var i=0;i<this.barcodeColumnCount+2;i++){if(this.detectionResultColumns[i]==null){t.format("    |   ");continue}var a=this.detectionResultColumns[i].getCodewords()[r];if(a==null){t.format("    |   ");continue}t.format(" %3d|%3d",a.getRowNumber(),a.getValue())}t.format("%n")}return t.toString()},n})(),UL=(function(){function n(e,t,r,i){this.rowNumber=n.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(e),this.endX=Math.trunc(t),this.bucket=Math.trunc(r),this.value=Math.trunc(i)}return n.prototype.hasValidRowNumber=function(){return this.isValidRowNumber(this.rowNumber)},n.prototype.isValidRowNumber=function(e){return e!==n.BARCODE_ROW_UNKNOWN&&this.bucket===e%3*3},n.prototype.setRowNumberAsRowIndicatorColumn=function(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))},n.prototype.getWidth=function(){return this.endX-this.startX},n.prototype.getStartX=function(){return this.startX},n.prototype.getEndX=function(){return this.endX},n.prototype.getBucket=function(){return this.bucket},n.prototype.getValue=function(){return this.value},n.prototype.getRowNumber=function(){return this.rowNumber},n.prototype.setRowNumber=function(e){this.rowNumber=e},n.prototype.toString=function(){return this.rowNumber+"|"+this.value},n.BARCODE_ROW_UNKNOWN=-1,n})(),zL=(function(){function n(){}return n.initialize=function(){for(var e=0;e<ht.SYMBOL_TABLE.length;e++)for(var t=ht.SYMBOL_TABLE[e],r=t&1,i=0;i<ht.BARS_IN_MODULE;i++){for(var a=0;(t&1)===r;)a+=1,t>>=1;r=t&1,n.RATIOS_TABLE[e]||(n.RATIOS_TABLE[e]=new Array(ht.BARS_IN_MODULE)),n.RATIOS_TABLE[e][ht.BARS_IN_MODULE-i-1]=Math.fround(a/ht.MODULES_IN_CODEWORD)}this.bSymbolTableReady=!0},n.getDecodedValue=function(e){var t=n.getDecodedCodewordValue(n.sampleBitCounts(e));return t!==-1?t:n.getClosestDecodedValue(e)},n.sampleBitCounts=function(e){for(var t=mt.sum(e),r=new Int32Array(ht.BARS_IN_MODULE),i=0,a=0,o=0;o<ht.MODULES_IN_CODEWORD;o++){var c=t/(2*ht.MODULES_IN_CODEWORD)+o*t/ht.MODULES_IN_CODEWORD;a+e[i]<=c&&(a+=e[i],i++),r[i]++}return r},n.getDecodedCodewordValue=function(e){var t=n.getBitValue(e);return ht.getCodeword(t)===-1?-1:t},n.getBitValue=function(e){for(var t=0,r=0;r<e.length;r++)for(var i=0;i<e[r];i++)t=t<<1|(r%2===0?1:0);return Math.trunc(t)},n.getClosestDecodedValue=function(e){var t=mt.sum(e),r=new Array(ht.BARS_IN_MODULE);if(t>1)for(var i=0;i<r.length;i++)r[i]=Math.fround(e[i]/t);var a=sv.MAX_VALUE,o=-1;this.bSymbolTableReady||n.initialize();for(var c=0;c<n.RATIOS_TABLE.length;c++){for(var u=0,h=n.RATIOS_TABLE[c],p=0;p<ht.BARS_IN_MODULE;p++){var g=Math.fround(h[p]-r[p]);if(u+=Math.fround(g*g),u>=a)break}u<a&&(a=u,o=ht.SYMBOL_TABLE[c])}return o},n.bSymbolTableReady=!1,n.RATIOS_TABLE=new Array(ht.SYMBOL_TABLE.length).map(function(e){return new Array(ht.BARS_IN_MODULE)}),n})(),HL=(function(){function n(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}return n.prototype.getSegmentIndex=function(){return this.segmentIndex},n.prototype.setSegmentIndex=function(e){this.segmentIndex=e},n.prototype.getFileId=function(){return this.fileId},n.prototype.setFileId=function(e){this.fileId=e},n.prototype.getOptionalData=function(){return this.optionalData},n.prototype.setOptionalData=function(e){this.optionalData=e},n.prototype.isLastSegment=function(){return this.lastSegment},n.prototype.setLastSegment=function(e){this.lastSegment=e},n.prototype.getSegmentCount=function(){return this.segmentCount},n.prototype.setSegmentCount=function(e){this.segmentCount=e},n.prototype.getSender=function(){return this.sender||null},n.prototype.setSender=function(e){this.sender=e},n.prototype.getAddressee=function(){return this.addressee||null},n.prototype.setAddressee=function(e){this.addressee=e},n.prototype.getFileName=function(){return this.fileName},n.prototype.setFileName=function(e){this.fileName=e},n.prototype.getFileSize=function(){return this.fileSize},n.prototype.setFileSize=function(e){this.fileSize=e},n.prototype.getChecksum=function(){return this.checksum},n.prototype.setChecksum=function(e){this.checksum=e},n.prototype.getTimestamp=function(){return this.timestamp},n.prototype.setTimestamp=function(e){this.timestamp=e},n})(),HA=(function(){function n(){}return n.parseLong=function(e,t){return t===void 0&&(t=void 0),parseInt(e,t)},n})(),GL=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),qL=(function(n){GL(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="NullPointerException",e})(Dr),$L=(function(){function n(){}return n.prototype.writeBytes=function(e){this.writeBytesOffset(e,0,e.length)},n.prototype.writeBytesOffset=function(e,t,r){if(e==null)throw new qL;if(t<0||t>e.length||r<0||t+r>e.length||t+r<0)throw new jy;if(r===0)return;for(var i=0;i<r;i++)this.write(e[t+i])},n.prototype.flush=function(){},n.prototype.close=function(){},n})(),XL=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),KL=(function(n){XL(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e})(Dr),YL=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),WL=(function(n){YL(e,n);function e(t){t===void 0&&(t=32);var r=n.call(this)||this;if(r.count=0,t<0)throw new Pe("Negative initial size: "+t);return r.buf=new Uint8Array(t),r}return e.prototype.ensureCapacity=function(t){t-this.buf.length>0&&this.grow(t)},e.prototype.grow=function(t){var r=this.buf.length,i=r<<1;if(i-t<0&&(i=t),i<0){if(t<0)throw new KL;i=Je.MAX_VALUE}this.buf=Dn.copyOfUint8Array(this.buf,i)},e.prototype.write=function(t){this.ensureCapacity(this.count+1),this.buf[this.count]=t,this.count+=1},e.prototype.writeBytesOffset=function(t,r,i){if(r<0||r>t.length||i<0||r+i-t.length>0)throw new jy;this.ensureCapacity(this.count+i),Bt.arraycopy(t,r,this.buf,this.count,i),this.count+=i},e.prototype.writeTo=function(t){t.writeBytesOffset(this.buf,0,this.count)},e.prototype.reset=function(){this.count=0},e.prototype.toByteArray=function(){return Dn.copyOfUint8Array(this.buf,this.count)},e.prototype.size=function(){return this.count},e.prototype.toString=function(t){return t?typeof t=="string"?this.toString_string(t):this.toString_number(t):this.toString_void()},e.prototype.toString_void=function(){return new String(this.buf).toString()},e.prototype.toString_string=function(t){return new String(this.buf).toString()},e.prototype.toString_number=function(t){return new String(this.buf).toString()},e.prototype.close=function(){},e})($L),Pt;(function(n){n[n.ALPHA=0]="ALPHA",n[n.LOWER=1]="LOWER",n[n.MIXED=2]="MIXED",n[n.PUNCT=3]="PUNCT",n[n.ALPHA_SHIFT=4]="ALPHA_SHIFT",n[n.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(Pt||(Pt={}));function R3(){if(typeof window<"u")return window.BigInt||null;if(typeof global<"u")return global.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}var Od;function Ls(n){if(typeof Od>"u"&&(Od=R3()),Od===null)throw new Error("BigInt is not supported!");return Od(n)}function QL(){var n=[];n[0]=Ls(1);var e=Ls(900);n[1]=e;for(var t=2;t<16;t++)n[t]=n[t-1]*e;return n}var ZL=(function(){function n(){}return n.decode=function(e,t){var r=new We(""),i=On.ISO8859_1;r.enableDecoding(i);for(var a=1,o=e[a++],c=new HL;a<e[0];){switch(o){case n.TEXT_COMPACTION_MODE_LATCH:a=n.textCompaction(e,a,r);break;case n.BYTE_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:a=n.byteCompaction(o,e,i,a,r);break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(e[a++]);break;case n.NUMERIC_COMPACTION_MODE_LATCH:a=n.numericCompaction(e,a,r);break;case n.ECI_CHARSET:On.getCharacterSetECIByValue(e[a++]);break;case n.ECI_GENERAL_PURPOSE:a+=2;break;case n.ECI_USER_DEFINED:a++;break;case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:a=n.decodeMacroBlock(e,a,c);break;case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:throw new ge;default:a--,a=n.textCompaction(e,a,r);break}if(a<e.length)o=e[a++];else throw ge.getFormatInstance()}if(r.length()===0)throw ge.getFormatInstance();var u=new mp(null,r.toString(),null,t);return u.setOther(c),u},n.decodeMacroBlock=function(e,t,r){if(t+n.NUMBER_OF_SEQUENCE_CODEWORDS>e[0])throw ge.getFormatInstance();for(var i=new Int32Array(n.NUMBER_OF_SEQUENCE_CODEWORDS),a=0;a<n.NUMBER_OF_SEQUENCE_CODEWORDS;a++,t++)i[a]=e[t];r.setSegmentIndex(Je.parseInt(n.decodeBase900toBase10(i,n.NUMBER_OF_SEQUENCE_CODEWORDS)));var o=new We;t=n.textCompaction(e,t,o),r.setFileId(o.toString());var c=-1;for(e[t]===n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(c=t+1);t<e[0];)switch(e[t]){case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(t++,e[t]){case n.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:var u=new We;t=n.textCompaction(e,t+1,u),r.setFileName(u.toString());break;case n.MACRO_PDF417_OPTIONAL_FIELD_SENDER:var h=new We;t=n.textCompaction(e,t+1,h),r.setSender(h.toString());break;case n.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:var p=new We;t=n.textCompaction(e,t+1,p),r.setAddressee(p.toString());break;case n.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:var g=new We;t=n.numericCompaction(e,t+1,g),r.setSegmentCount(Je.parseInt(g.toString()));break;case n.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:var _=new We;t=n.numericCompaction(e,t+1,_),r.setTimestamp(HA.parseLong(_.toString()));break;case n.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:var E=new We;t=n.numericCompaction(e,t+1,E),r.setChecksum(Je.parseInt(E.toString()));break;case n.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:var w=new We;t=n.numericCompaction(e,t+1,w),r.setFileSize(HA.parseLong(w.toString()));break;default:throw ge.getFormatInstance()}break;case n.MACRO_PDF417_TERMINATOR:t++,r.setLastSegment(!0);break;default:throw ge.getFormatInstance()}if(c!==-1){var S=t-c;r.isLastSegment()&&S--,r.setOptionalData(Dn.copyOfRange(e,c,c+S))}return t},n.textCompaction=function(e,t,r){for(var i=new Int32Array((e[0]-t)*2),a=new Int32Array((e[0]-t)*2),o=0,c=!1;t<e[0]&&!c;){var u=e[t++];if(u<n.TEXT_COMPACTION_MODE_LATCH)i[o]=u/30,i[o+1]=u%30,o+=2;else switch(u){case n.TEXT_COMPACTION_MODE_LATCH:i[o++]=n.TEXT_COMPACTION_MODE_LATCH;break;case n.BYTE_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:case n.NUMERIC_COMPACTION_MODE_LATCH:case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:t--,c=!0;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i[o]=n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,u=e[t++],a[o]=u,o++;break}}return n.decodeTextCompaction(i,a,o,r),t},n.decodeTextCompaction=function(e,t,r,i){for(var a=Pt.ALPHA,o=Pt.ALPHA,c=0;c<r;){var u=e[c],h="";switch(a){case Pt.ALPHA:if(u<26)h=String.fromCharCode(65+u);else switch(u){case 26:h=" ";break;case n.LL:a=Pt.LOWER;break;case n.ML:a=Pt.MIXED;break;case n.PS:o=a,a=Pt.PUNCT_SHIFT;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[c]);break;case n.TEXT_COMPACTION_MODE_LATCH:a=Pt.ALPHA;break}break;case Pt.LOWER:if(u<26)h=String.fromCharCode(97+u);else switch(u){case 26:h=" ";break;case n.AS:o=a,a=Pt.ALPHA_SHIFT;break;case n.ML:a=Pt.MIXED;break;case n.PS:o=a,a=Pt.PUNCT_SHIFT;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[c]);break;case n.TEXT_COMPACTION_MODE_LATCH:a=Pt.ALPHA;break}break;case Pt.MIXED:if(u<n.PL)h=n.MIXED_CHARS[u];else switch(u){case n.PL:a=Pt.PUNCT;break;case 26:h=" ";break;case n.LL:a=Pt.LOWER;break;case n.AL:a=Pt.ALPHA;break;case n.PS:o=a,a=Pt.PUNCT_SHIFT;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[c]);break;case n.TEXT_COMPACTION_MODE_LATCH:a=Pt.ALPHA;break}break;case Pt.PUNCT:if(u<n.PAL)h=n.PUNCT_CHARS[u];else switch(u){case n.PAL:a=Pt.ALPHA;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[c]);break;case n.TEXT_COMPACTION_MODE_LATCH:a=Pt.ALPHA;break}break;case Pt.ALPHA_SHIFT:if(a=o,u<26)h=String.fromCharCode(65+u);else switch(u){case 26:h=" ";break;case n.TEXT_COMPACTION_MODE_LATCH:a=Pt.ALPHA;break}break;case Pt.PUNCT_SHIFT:if(a=o,u<n.PAL)h=n.PUNCT_CHARS[u];else switch(u){case n.PAL:a=Pt.ALPHA;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[c]);break;case n.TEXT_COMPACTION_MODE_LATCH:a=Pt.ALPHA;break}break}h!==""&&i.append(h),c++}},n.byteCompaction=function(e,t,r,i,a){var o=new WL,c=0,u=0,h=!1;switch(e){case n.BYTE_COMPACTION_MODE_LATCH:for(var p=new Int32Array(6),g=t[i++];i<t[0]&&!h;)switch(p[c++]=g,u=900*u+g,g=t[i++],g){case n.TEXT_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH:case n.NUMERIC_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:i--,h=!0;break;default:if(c%5===0&&c>0){for(var _=0;_<6;++_)o.write(Number(Ls(u)>>Ls(8*(5-_))));u=0,c=0}break}i===t[0]&&g<n.TEXT_COMPACTION_MODE_LATCH&&(p[c++]=g);for(var E=0;E<c;E++)o.write(p[E]);break;case n.BYTE_COMPACTION_MODE_LATCH_6:for(;i<t[0]&&!h;){var w=t[i++];if(w<n.TEXT_COMPACTION_MODE_LATCH)c++,u=900*u+w;else switch(w){case n.TEXT_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH:case n.NUMERIC_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:i--,h=!0;break}if(c%5===0&&c>0){for(var _=0;_<6;++_)o.write(Number(Ls(u)>>Ls(8*(5-_))));u=0,c=0}}break}return a.append(ui.decode(o.toByteArray(),r)),i},n.numericCompaction=function(e,t,r){for(var i=0,a=!1,o=new Int32Array(n.MAX_NUMERIC_CODEWORDS);t<e[0]&&!a;){var c=e[t++];if(t===e[0]&&(a=!0),c<n.TEXT_COMPACTION_MODE_LATCH)o[i]=c,i++;else switch(c){case n.TEXT_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:t--,a=!0;break}(i%n.MAX_NUMERIC_CODEWORDS===0||c===n.NUMERIC_COMPACTION_MODE_LATCH||a)&&i>0&&(r.append(n.decodeBase900toBase10(o,i)),i=0)}return t},n.decodeBase900toBase10=function(e,t){for(var r=Ls(0),i=0;i<t;i++)r+=n.EXP900[t-i-1]*Ls(e[i]);var a=r.toString();if(a.charAt(0)!=="1")throw new ge;return a.substring(1)},n.TEXT_COMPACTION_MODE_LATCH=900,n.BYTE_COMPACTION_MODE_LATCH=901,n.NUMERIC_COMPACTION_MODE_LATCH=902,n.BYTE_COMPACTION_MODE_LATCH_6=924,n.ECI_USER_DEFINED=925,n.ECI_GENERAL_PURPOSE=926,n.ECI_CHARSET=927,n.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,n.MACRO_PDF417_TERMINATOR=922,n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,n.MAX_NUMERIC_CODEWORDS=15,n.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,n.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,n.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,n.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,n.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,n.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,n.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,n.PL=25,n.LL=27,n.AS=27,n.ML=28,n.AL=28,n.PS=29,n.PAL=29,n.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,n.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",n.EXP900=R3()?QL():[],n.NUMBER_OF_SEQUENCE_CODEWORDS=2,n})(),Xu=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},JL=(function(){function n(){}return n.decode=function(e,t,r,i,a,o,c){for(var u=new cv(e,t,r,i,a),h=null,p=null,g,_=!0;;_=!1){if(t!=null&&(h=n.getRowIndicatorColumn(e,u,t,!0,o,c)),i!=null&&(p=n.getRowIndicatorColumn(e,u,i,!1,o,c)),g=n.merge(h,p),g==null)throw ae.getNotFoundInstance();var E=g.getBoundingBox();if(_&&E!=null&&(E.getMinY()<u.getMinY()||E.getMaxY()>u.getMaxY()))u=E;else break}g.setBoundingBox(u);var w=g.getBarcodeColumnCount()+1;g.setDetectionResultColumn(0,h),g.setDetectionResultColumn(w,p);for(var S=h!=null,D=1;D<=w;D++){var T=S?D:w-D;if(g.getDetectionResultColumn(T)===void 0){var O=void 0;T===0||T===w?O=new zA(u,T===0):O=new N3(u),g.setDetectionResultColumn(T,O);for(var j=-1,z=j,H=u.getMinY();H<=u.getMaxY();H++){if(j=n.getStartColumn(g,T,H,S),j<0||j>u.getMaxX()){if(z===-1)continue;j=z}var q=n.detectCodeword(e,u.getMinX(),u.getMaxX(),S,j,H,o,c);q!=null&&(O.setCodeword(H,q),z=j,o=Math.min(o,q.getWidth()),c=Math.max(c,q.getWidth()))}}}return n.createDecoderResult(g)},n.merge=function(e,t){if(e==null&&t==null)return null;var r=n.getBarcodeMetadata(e,t);if(r==null)return null;var i=cv.merge(n.adjustBoundingBox(e),n.adjustBoundingBox(t));return new FL(r,i)},n.adjustBoundingBox=function(e){var t,r;if(e==null)return null;var i=e.getRowHeights();if(i==null)return null;var a=n.getMax(i),o=0;try{for(var c=Xu(i),u=c.next();!u.done;u=c.next()){var h=u.value;if(o+=a-h,h>0)break}}catch(E){t={error:E}}finally{try{u&&!u.done&&(r=c.return)&&r.call(c)}finally{if(t)throw t.error}}for(var p=e.getCodewords(),g=0;o>0&&p[g]==null;g++)o--;for(var _=0,g=i.length-1;g>=0&&(_+=a-i[g],!(i[g]>0));g--);for(var g=p.length-1;_>0&&p[g]==null;g--)_--;return e.getBoundingBox().addMissingRows(o,_,e.isLeft())},n.getMax=function(e){var t,r,i=-1;try{for(var a=Xu(e),o=a.next();!o.done;o=a.next()){var c=o.value;i=Math.max(i,c)}}catch(u){t={error:u}}finally{try{o&&!o.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}return i},n.getBarcodeMetadata=function(e,t){var r;if(e==null||(r=e.getBarcodeMetadata())==null)return t==null?null:t.getBarcodeMetadata();var i;return t==null||(i=t.getBarcodeMetadata())==null?r:r.getColumnCount()!==i.getColumnCount()&&r.getErrorCorrectionLevel()!==i.getErrorCorrectionLevel()&&r.getRowCount()!==i.getRowCount()?null:r},n.getRowIndicatorColumn=function(e,t,r,i,a,o){for(var c=new zA(t,i),u=0;u<2;u++)for(var h=u===0?1:-1,p=Math.trunc(Math.trunc(r.getX())),g=Math.trunc(Math.trunc(r.getY()));g<=t.getMaxY()&&g>=t.getMinY();g+=h){var _=n.detectCodeword(e,0,e.getWidth(),i,p,g,a,o);_!=null&&(c.setCodeword(g,_),i?p=_.getStartX():p=_.getEndX())}return c},n.adjustCodewordCount=function(e,t){var r=t[0][1],i=r.getValue(),a=e.getBarcodeColumnCount()*e.getBarcodeRowCount()-n.getNumberOfECCodeWords(e.getBarcodeECLevel());if(i.length===0){if(a<1||a>ht.MAX_CODEWORDS_IN_BARCODE)throw ae.getNotFoundInstance();r.setValue(a)}else i[0]!==a&&r.setValue(a)},n.createDecoderResult=function(e){var t=n.createBarcodeMatrix(e);n.adjustCodewordCount(e,t);for(var r=new Array,i=new Int32Array(e.getBarcodeRowCount()*e.getBarcodeColumnCount()),a=[],o=new Array,c=0;c<e.getBarcodeRowCount();c++)for(var u=0;u<e.getBarcodeColumnCount();u++){var h=t[c][u+1].getValue(),p=c*e.getBarcodeColumnCount()+u;h.length===0?r.push(p):h.length===1?i[p]=h[0]:(o.push(p),a.push(h))}for(var g=new Array(a.length),_=0;_<g.length;_++)g[_]=a[_];return n.createDecoderResultFromAmbiguousValues(e.getBarcodeECLevel(),i,ht.toIntArray(r),ht.toIntArray(o),g)},n.createDecoderResultFromAmbiguousValues=function(e,t,r,i,a){for(var o=new Int32Array(i.length),c=100;c-- >0;){for(var u=0;u<o.length;u++)t[i[u]]=a[u][o[u]];try{return n.decodeCodewords(t,e,r)}catch(p){var h=p instanceof bn;if(!h)throw p}if(o.length===0)throw bn.getChecksumInstance();for(var u=0;u<o.length;u++)if(o[u]<a[u].length-1){o[u]++;break}else if(o[u]=0,u===o.length-1)throw bn.getChecksumInstance()}throw bn.getChecksumInstance()},n.createBarcodeMatrix=function(e){for(var t,r,i,a,o=Array.from({length:e.getBarcodeRowCount()},function(){return new Array(e.getBarcodeColumnCount()+2)}),c=0;c<o.length;c++)for(var u=0;u<o[c].length;u++)o[c][u]=new af;var h=0;try{for(var p=Xu(e.getDetectionResultColumns()),g=p.next();!g.done;g=p.next()){var _=g.value;if(_!=null)try{for(var E=(i=void 0,Xu(_.getCodewords())),w=E.next();!w.done;w=E.next()){var S=w.value;if(S!=null){var D=S.getRowNumber();if(D>=0){if(D>=o.length)continue;o[D][h].setValue(S.getValue())}}}}catch(T){i={error:T}}finally{try{w&&!w.done&&(a=E.return)&&a.call(E)}finally{if(i)throw i.error}}h++}}catch(T){t={error:T}}finally{try{g&&!g.done&&(r=p.return)&&r.call(p)}finally{if(t)throw t.error}}return o},n.isValidBarcodeColumn=function(e,t){return t>=0&&t<=e.getBarcodeColumnCount()+1},n.getStartColumn=function(e,t,r,i){var a,o,c=i?1:-1,u=null;if(n.isValidBarcodeColumn(e,t-c)&&(u=e.getDetectionResultColumn(t-c).getCodeword(r)),u!=null)return i?u.getEndX():u.getStartX();if(u=e.getDetectionResultColumn(t).getCodewordNearby(r),u!=null)return i?u.getStartX():u.getEndX();if(n.isValidBarcodeColumn(e,t-c)&&(u=e.getDetectionResultColumn(t-c).getCodewordNearby(r)),u!=null)return i?u.getEndX():u.getStartX();for(var h=0;n.isValidBarcodeColumn(e,t-c);){t-=c;try{for(var p=(a=void 0,Xu(e.getDetectionResultColumn(t).getCodewords())),g=p.next();!g.done;g=p.next()){var _=g.value;if(_!=null)return(i?_.getEndX():_.getStartX())+c*h*(_.getEndX()-_.getStartX())}}catch(E){a={error:E}}finally{try{g&&!g.done&&(o=p.return)&&o.call(p)}finally{if(a)throw a.error}}h++}return i?e.getBoundingBox().getMinX():e.getBoundingBox().getMaxX()},n.detectCodeword=function(e,t,r,i,a,o,c,u){a=n.adjustCodewordStartColumn(e,t,r,i,a,o);var h=n.getModuleBitCount(e,t,r,i,a,o);if(h==null)return null;var p,g=mt.sum(h);if(i)p=a+g;else{for(var _=0;_<h.length/2;_++){var E=h[_];h[_]=h[h.length-1-_],h[h.length-1-_]=E}p=a,a=p-g}if(!n.checkCodewordSkew(g,c,u))return null;var w=zL.getDecodedValue(h),S=ht.getCodeword(w);return S===-1?null:new UL(a,p,n.getCodewordBucketNumber(w),S)},n.getModuleBitCount=function(e,t,r,i,a,o){for(var c=a,u=new Int32Array(8),h=0,p=i?1:-1,g=i;(i?c<r:c>=t)&&h<u.length;)e.get(c,o)===g?(u[h]++,c+=p):(h++,g=!g);return h===u.length||c===(i?r:t)&&h===u.length-1?u:null},n.getNumberOfECCodeWords=function(e){return 2<<e},n.adjustCodewordStartColumn=function(e,t,r,i,a,o){for(var c=a,u=i?-1:1,h=0;h<2;h++){for(;(i?c>=t:c<r)&&i===e.get(c,o);){if(Math.abs(a-c)>n.CODEWORD_SKEW_SIZE)return a;c+=u}u=-u,i=!i}return c},n.checkCodewordSkew=function(e,t,r){return t-n.CODEWORD_SKEW_SIZE<=e&&e<=r+n.CODEWORD_SKEW_SIZE},n.decodeCodewords=function(e,t,r){if(e.length===0)throw ge.getFormatInstance();var i=1<<t+1,a=n.correctErrors(e,r,i);n.verifyCodewordCount(e,i);var o=ZL.decode(e,""+t);return o.setErrorsCorrected(a),o.setErasures(r.length),o},n.correctErrors=function(e,t,r){if(t!=null&&t.length>r/2+n.MAX_ERRORS||r<0||r>n.MAX_EC_CODEWORDS)throw bn.getChecksumInstance();return n.errorCorrection.decode(e,r,t)},n.verifyCodewordCount=function(e,t){if(e.length<4)throw ge.getFormatInstance();var r=e[0];if(r>e.length)throw ge.getFormatInstance();if(r===0)if(t<e.length)e[0]=e.length-t;else throw ge.getFormatInstance()},n.getBitCountForCodeword=function(e){for(var t=new Int32Array(8),r=0,i=t.length-1;!((e&1)!==r&&(r=e&1,i--,i<0));)t[i]++,e>>=1;return t},n.getCodewordBucketNumber=function(e){return e instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(e):this.getCodewordBucketNumber_number(e)},n.getCodewordBucketNumber_number=function(e){return n.getCodewordBucketNumber(n.getBitCountForCodeword(e))},n.getCodewordBucketNumber_Int32Array=function(e){return(e[0]-e[2]+e[4]-e[6]+9)%9},n.toString=function(e){for(var t=new Uy,r=0;r<e.length;r++){t.format("Row %2d: ",r);for(var i=0;i<e[r].length;i++){var a=e[r][i];a.getValue().length===0?t.format("        ",null):t.format("%4d(%2d)",a.getValue()[0],a.getConfidence(a.getValue()[0]))}t.format("%n")}return t.toString()},n.CODEWORD_SKEW_SIZE=2,n.MAX_ERRORS=3,n.MAX_EC_CODEWORDS=512,n.errorCorrection=new ML,n})(),ej=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},N0=(function(){function n(){}return n.prototype.decode=function(e,t){t===void 0&&(t=null);var r=n.decode(e,t,!1);if(r==null||r.length===0||r[0]==null)throw ae.getNotFoundInstance();return r[0]},n.prototype.decodeMultiple=function(e,t){t===void 0&&(t=null);try{return n.decode(e,t,!0)}catch(r){throw r instanceof ge||r instanceof bn?ae.getNotFoundInstance():r}},n.decode=function(e,t,r){var i,a,o=new Array,c=TL.detectMultiple(e,t,r);try{for(var u=ej(c.getPoints()),h=u.next();!h.done;h=u.next()){var p=h.value,g=JL.decode(c.getBits(),p[4],p[5],p[6],p[7],n.getMinCodewordWidth(p),n.getMaxCodewordWidth(p)),_=new hr(g.getText(),g.getRawBytes(),void 0,p,Me.PDF_417);_.putMetadata(ar.ERROR_CORRECTION_LEVEL,g.getECLevel());var E=g.getOther();E!=null&&_.putMetadata(ar.PDF417_EXTRA_METADATA,E),o.push(_)}}catch(w){i={error:w}}finally{try{h&&!h.done&&(a=u.return)&&a.call(u)}finally{if(i)throw i.error}}return o.map(function(w){return w})},n.getMaxWidth=function(e,t){return e==null||t==null?0:Math.trunc(Math.abs(e.getX()-t.getX()))},n.getMinWidth=function(e,t){return e==null||t==null?Je.MAX_VALUE:Math.trunc(Math.abs(e.getX()-t.getX()))},n.getMaxCodewordWidth=function(e){return Math.floor(Math.max(Math.max(n.getMaxWidth(e[0],e[4]),n.getMaxWidth(e[6],e[2])*ht.MODULES_IN_CODEWORD/ht.MODULES_IN_STOP_PATTERN),Math.max(n.getMaxWidth(e[1],e[5]),n.getMaxWidth(e[7],e[3])*ht.MODULES_IN_CODEWORD/ht.MODULES_IN_STOP_PATTERN)))},n.getMinCodewordWidth=function(e){return Math.floor(Math.min(Math.min(n.getMinWidth(e[0],e[4]),n.getMinWidth(e[6],e[2])*ht.MODULES_IN_CODEWORD/ht.MODULES_IN_STOP_PATTERN),Math.min(n.getMinWidth(e[1],e[5]),n.getMinWidth(e[7],e[3])*ht.MODULES_IN_CODEWORD/ht.MODULES_IN_STOP_PATTERN)))},n.prototype.reset=function(){},n})(),tj=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),GA=(function(n){tj(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="ReaderException",e})(Dr),qA=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},O3=(function(){function n(){}return n.prototype.decode=function(e,t){return this.setHints(t),this.decodeInternal(e)},n.prototype.decodeWithState=function(e){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(e)},n.prototype.setHints=function(e){this.hints=e;var t=e!=null&&e.get(Vt.TRY_HARDER)!==void 0,r=e==null?null:e.get(Vt.POSSIBLE_FORMATS),i=new Array;if(r!=null){var a=r.some(function(o){return o===Me.UPC_A||o===Me.UPC_E||o===Me.EAN_13||o===Me.EAN_8||o===Me.CODABAR||o===Me.CODE_39||o===Me.CODE_93||o===Me.CODE_128||o===Me.ITF||o===Me.RSS_14||o===Me.RSS_EXPANDED});a&&!t&&i.push(new uc(e)),r.includes(Me.QR_CODE)&&i.push(new I0),r.includes(Me.DATA_MATRIX)&&i.push(new T0),r.includes(Me.AZTEC)&&i.push(new S0),r.includes(Me.PDF_417)&&i.push(new N0),a&&t&&i.push(new uc(e))}i.length===0&&(t||i.push(new uc(e)),i.push(new I0),i.push(new T0),i.push(new S0),i.push(new N0),t&&i.push(new uc(e))),this.readers=i},n.prototype.reset=function(){var e,t;if(this.readers!==null)try{for(var r=qA(this.readers),i=r.next();!i.done;i=r.next()){var a=i.value;a.reset()}}catch(o){e={error:o}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}},n.prototype.decodeInternal=function(e){var t,r;if(this.readers===null)throw new GA("No readers where selected, nothing can be read.");try{for(var i=qA(this.readers),a=i.next();!a.done;a=i.next()){var o=a.value;try{return o.decode(e,this.hints)}catch(c){if(c instanceof GA)continue}}}catch(c){t={error:c}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}throw new ae("No MultiFormat Readers were able to detect the code.")},n})(),nj=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})();(function(n){nj(e,n);function e(t,r){t===void 0&&(t=null),r===void 0&&(r=500);var i=this,a=new O3;return a.setHints(t),i=n.call(this,a,r)||this,i}return e.prototype.decodeBitmap=function(t){return this.reader.decodeWithState(t)},e})(zc);var rj=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})();(function(n){rj(e,n);function e(t){return t===void 0&&(t=500),n.call(this,new N0,t)||this}return e})(zc);var ij=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})();(function(n){ij(e,n);function e(t){return t===void 0&&(t=500),n.call(this,new I0,t)||this}return e})(zc);var uv;(function(n){n[n.ERROR_CORRECTION=0]="ERROR_CORRECTION",n[n.CHARACTER_SET=1]="CHARACTER_SET",n[n.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",n[n.DATA_MATRIX_COMPACT=3]="DATA_MATRIX_COMPACT",n[n.MIN_SIZE=4]="MIN_SIZE",n[n.MAX_SIZE=5]="MAX_SIZE",n[n.MARGIN=6]="MARGIN",n[n.PDF417_COMPACT=7]="PDF417_COMPACT",n[n.PDF417_COMPACTION=8]="PDF417_COMPACTION",n[n.PDF417_DIMENSIONS=9]="PDF417_DIMENSIONS",n[n.AZTEC_LAYERS=10]="AZTEC_LAYERS",n[n.QR_VERSION=11]="QR_VERSION",n[n.GS1_FORMAT=12]="GS1_FORMAT",n[n.FORCE_C40=13]="FORCE_C40"})(uv||(uv={}));const Dd=uv;var D3=(function(){function n(e){this.field=e,this.cachedGenerators=[],this.cachedGenerators.push(new Ys(e,Int32Array.from([1])))}return n.prototype.buildGenerator=function(e){var t=this.cachedGenerators;if(e>=t.length)for(var r=t[t.length-1],i=this.field,a=t.length;a<=e;a++){var o=r.multiply(new Ys(i,Int32Array.from([1,i.exp(a-1+i.getGeneratorBase())])));t.push(o),r=o}return t[e]},n.prototype.encode=function(e,t){if(t===0)throw new Pe("No error correction bytes");var r=e.length-t;if(r<=0)throw new Pe("No data bytes provided");var i=this.buildGenerator(t),a=new Int32Array(r);Bt.arraycopy(e,0,a,0,r);var o=new Ys(this.field,a);o=o.multiplyByMonomial(t,1);for(var c=o.divide(i)[1],u=c.getCoefficients(),h=t-u.length,p=0;p<h;p++)e[r+p]=0;Bt.arraycopy(u,0,e,r+h,u.length)},n})(),sf=(function(){function n(){}return n.applyMaskPenaltyRule1=function(e){return n.applyMaskPenaltyRule1Internal(e,!0)+n.applyMaskPenaltyRule1Internal(e,!1)},n.applyMaskPenaltyRule2=function(e){for(var t=0,r=e.getArray(),i=e.getWidth(),a=e.getHeight(),o=0;o<a-1;o++)for(var c=r[o],u=0;u<i-1;u++){var h=c[u];h===c[u+1]&&h===r[o+1][u]&&h===r[o+1][u+1]&&t++}return n.N2*t},n.applyMaskPenaltyRule3=function(e){for(var t=0,r=e.getArray(),i=e.getWidth(),a=e.getHeight(),o=0;o<a;o++)for(var c=0;c<i;c++){var u=r[o];c+6<i&&u[c]===1&&u[c+1]===0&&u[c+2]===1&&u[c+3]===1&&u[c+4]===1&&u[c+5]===0&&u[c+6]===1&&(n.isWhiteHorizontal(u,c-4,c)||n.isWhiteHorizontal(u,c+7,c+11))&&t++,o+6<a&&r[o][c]===1&&r[o+1][c]===0&&r[o+2][c]===1&&r[o+3][c]===1&&r[o+4][c]===1&&r[o+5][c]===0&&r[o+6][c]===1&&(n.isWhiteVertical(r,c,o-4,o)||n.isWhiteVertical(r,c,o+7,o+11))&&t++}return t*n.N3},n.isWhiteHorizontal=function(e,t,r){t=Math.max(t,0),r=Math.min(r,e.length);for(var i=t;i<r;i++)if(e[i]===1)return!1;return!0},n.isWhiteVertical=function(e,t,r,i){r=Math.max(r,0),i=Math.min(i,e.length);for(var a=r;a<i;a++)if(e[a][t]===1)return!1;return!0},n.applyMaskPenaltyRule4=function(e){for(var t=0,r=e.getArray(),i=e.getWidth(),a=e.getHeight(),o=0;o<a;o++)for(var c=r[o],u=0;u<i;u++)c[u]===1&&t++;var h=e.getHeight()*e.getWidth(),p=Math.floor(Math.abs(t*2-h)*10/h);return p*n.N4},n.getDataMaskBit=function(e,t,r){var i,a;switch(e){case 0:i=r+t&1;break;case 1:i=r&1;break;case 2:i=t%3;break;case 3:i=(r+t)%3;break;case 4:i=Math.floor(r/2)+Math.floor(t/3)&1;break;case 5:a=r*t,i=(a&1)+a%3;break;case 6:a=r*t,i=(a&1)+a%3&1;break;case 7:a=r*t,i=a%3+(r+t&1)&1;break;default:throw new Pe("Invalid mask pattern: "+e)}return i===0},n.applyMaskPenaltyRule1Internal=function(e,t){for(var r=0,i=t?e.getHeight():e.getWidth(),a=t?e.getWidth():e.getHeight(),o=e.getArray(),c=0;c<i;c++){for(var u=0,h=-1,p=0;p<a;p++){var g=t?o[c][p]:o[p][c];g===h?u++:(u>=5&&(r+=n.N1+(u-5)),u=1,h=g)}u>=5&&(r+=n.N1+(u-5))}return r},n.N1=3,n.N2=3,n.N3=40,n.N4=10,n})(),aj=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},sj=(function(){function n(e,t){this.width=e,this.height=t;for(var r=new Array(t),i=0;i!==t;i++)r[i]=new Uint8Array(e);this.bytes=r}return n.prototype.getHeight=function(){return this.height},n.prototype.getWidth=function(){return this.width},n.prototype.get=function(e,t){return this.bytes[t][e]},n.prototype.getArray=function(){return this.bytes},n.prototype.setNumber=function(e,t,r){this.bytes[t][e]=r},n.prototype.setBoolean=function(e,t,r){this.bytes[t][e]=r?1:0},n.prototype.clear=function(e){var t,r;try{for(var i=aj(this.bytes),a=i.next();!a.done;a=i.next()){var o=a.value;Dn.fill(o,e)}}catch(c){t={error:c}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;if(this.width!==t.width||this.height!==t.height)return!1;for(var r=0,i=this.height;r<i;++r)for(var a=this.bytes[r],o=t.bytes[r],c=0,u=this.width;c<u;++c)if(a[c]!==o[c])return!1;return!0},n.prototype.toString=function(){for(var e=new We,t=0,r=this.height;t<r;++t){for(var i=this.bytes[t],a=0,o=this.width;a<o;++a)switch(i[a]){case 0:e.append(" 0");break;case 1:e.append(" 1");break;default:e.append("  ");break}e.append(`
`)}return e.toString()},n})(),fv=(function(){function n(){this.maskPattern=-1}return n.prototype.getMode=function(){return this.mode},n.prototype.getECLevel=function(){return this.ecLevel},n.prototype.getVersion=function(){return this.version},n.prototype.getMaskPattern=function(){return this.maskPattern},n.prototype.getMatrix=function(){return this.matrix},n.prototype.toString=function(){var e=new We;return e.append(`<<
`),e.append(" mode: "),e.append(this.mode?this.mode.toString():"null"),e.append(`
 ecLevel: `),e.append(this.ecLevel?this.ecLevel.toString():"null"),e.append(`
 version: `),e.append(this.version?this.version.toString():"null"),e.append(`
 maskPattern: `),e.append(this.maskPattern.toString()),this.matrix?(e.append(`
 matrix:
`),e.append(this.matrix.toString())):e.append(`
 matrix: null
`),e.append(`>>
`),e.toString()},n.prototype.setMode=function(e){this.mode=e},n.prototype.setECLevel=function(e){this.ecLevel=e},n.prototype.setVersion=function(e){this.version=e},n.prototype.setMaskPattern=function(e){this.maskPattern=e},n.prototype.setMatrix=function(e){this.matrix=e},n.isValidMaskPattern=function(e){return e>=0&&e<n.NUM_MASK_PATTERNS},n.NUM_MASK_PATTERNS=8,n})(),oj=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),zt=(function(n){oj(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="WriterException",e})(Dr),$A=(function(){function n(){}return n.clearMatrix=function(e){e.clear(255)},n.buildMatrix=function(e,t,r,i,a){n.clearMatrix(a),n.embedBasicPatterns(r,a),n.embedTypeInfo(t,i,a),n.maybeEmbedVersionInfo(r,a),n.embedDataBits(e,i,a)},n.embedBasicPatterns=function(e,t){n.embedPositionDetectionPatternsAndSeparators(t),n.embedDarkDotAtLeftBottomCorner(t),n.maybeEmbedPositionAdjustmentPatterns(e,t),n.embedTimingPatterns(t)},n.embedTypeInfo=function(e,t,r){var i=new qn;n.makeTypeInfoBits(e,t,i);for(var a=0,o=i.getSize();a<o;++a){var c=i.get(i.getSize()-1-a),u=n.TYPE_INFO_COORDINATES[a],h=u[0],p=u[1];if(r.setBoolean(h,p,c),a<8){var g=r.getWidth()-a-1,_=8;r.setBoolean(g,_,c)}else{var g=8,_=r.getHeight()-7+(a-8);r.setBoolean(g,_,c)}}},n.maybeEmbedVersionInfo=function(e,t){if(!(e.getVersionNumber()<7)){var r=new qn;n.makeVersionInfoBits(e,r);for(var i=17,a=0;a<6;++a)for(var o=0;o<3;++o){var c=r.get(i);i--,t.setBoolean(a,t.getHeight()-11+o,c),t.setBoolean(t.getHeight()-11+o,a,c)}}},n.embedDataBits=function(e,t,r){for(var i=0,a=-1,o=r.getWidth()-1,c=r.getHeight()-1;o>0;){for(o===6&&(o-=1);c>=0&&c<r.getHeight();){for(var u=0;u<2;++u){var h=o-u;if(n.isEmpty(r.get(h,c))){var p=void 0;i<e.getSize()?(p=e.get(i),++i):p=!1,t!==255&&sf.getDataMaskBit(t,h,c)&&(p=!p),r.setBoolean(h,c,p)}}c+=a}a=-a,c+=a,o-=2}if(i!==e.getSize())throw new zt("Not all bits consumed: "+i+"/"+e.getSize())},n.findMSBSet=function(e){return 32-Je.numberOfLeadingZeros(e)},n.calculateBCHCode=function(e,t){if(t===0)throw new Pe("0 polynomial");var r=n.findMSBSet(t);for(e<<=r-1;n.findMSBSet(e)>=r;)e^=t<<n.findMSBSet(e)-r;return e},n.makeTypeInfoBits=function(e,t,r){if(!fv.isValidMaskPattern(t))throw new zt("Invalid mask pattern");var i=e.getBits()<<3|t;r.appendBits(i,5);var a=n.calculateBCHCode(i,n.TYPE_INFO_POLY);r.appendBits(a,10);var o=new qn;if(o.appendBits(n.TYPE_INFO_MASK_PATTERN,15),r.xor(o),r.getSize()!==15)throw new zt("should not happen but we got: "+r.getSize())},n.makeVersionInfoBits=function(e,t){t.appendBits(e.getVersionNumber(),6);var r=n.calculateBCHCode(e.getVersionNumber(),n.VERSION_INFO_POLY);if(t.appendBits(r,12),t.getSize()!==18)throw new zt("should not happen but we got: "+t.getSize())},n.isEmpty=function(e){return e===255},n.embedTimingPatterns=function(e){for(var t=8;t<e.getWidth()-8;++t){var r=(t+1)%2;n.isEmpty(e.get(t,6))&&e.setNumber(t,6,r),n.isEmpty(e.get(6,t))&&e.setNumber(6,t,r)}},n.embedDarkDotAtLeftBottomCorner=function(e){if(e.get(8,e.getHeight()-8)===0)throw new zt;e.setNumber(8,e.getHeight()-8,1)},n.embedHorizontalSeparationPattern=function(e,t,r){for(var i=0;i<8;++i){if(!n.isEmpty(r.get(e+i,t)))throw new zt;r.setNumber(e+i,t,0)}},n.embedVerticalSeparationPattern=function(e,t,r){for(var i=0;i<7;++i){if(!n.isEmpty(r.get(e,t+i)))throw new zt;r.setNumber(e,t+i,0)}},n.embedPositionAdjustmentPattern=function(e,t,r){for(var i=0;i<5;++i)for(var a=n.POSITION_ADJUSTMENT_PATTERN[i],o=0;o<5;++o)r.setNumber(e+o,t+i,a[o])},n.embedPositionDetectionPattern=function(e,t,r){for(var i=0;i<7;++i)for(var a=n.POSITION_DETECTION_PATTERN[i],o=0;o<7;++o)r.setNumber(e+o,t+i,a[o])},n.embedPositionDetectionPatternsAndSeparators=function(e){var t=n.POSITION_DETECTION_PATTERN[0].length;n.embedPositionDetectionPattern(0,0,e),n.embedPositionDetectionPattern(e.getWidth()-t,0,e),n.embedPositionDetectionPattern(0,e.getWidth()-t,e);var r=8;n.embedHorizontalSeparationPattern(0,r-1,e),n.embedHorizontalSeparationPattern(e.getWidth()-r,r-1,e),n.embedHorizontalSeparationPattern(0,e.getWidth()-r,e);var i=7;n.embedVerticalSeparationPattern(i,0,e),n.embedVerticalSeparationPattern(e.getHeight()-i-1,0,e),n.embedVerticalSeparationPattern(i,e.getHeight()-i,e)},n.maybeEmbedPositionAdjustmentPatterns=function(e,t){if(!(e.getVersionNumber()<2))for(var r=e.getVersionNumber()-1,i=n.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[r],a=0,o=i.length;a!==o;a++){var c=i[a];if(c>=0)for(var u=0;u!==o;u++){var h=i[u];h>=0&&n.isEmpty(t.get(h,c))&&n.embedPositionAdjustmentPattern(h-2,c-2,t)}}},n.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),n.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),n.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),n.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),n.VERSION_INFO_POLY=7973,n.TYPE_INFO_POLY=1335,n.TYPE_INFO_MASK_PATTERN=21522,n})(),lj=(function(){function n(e,t){this.dataBytes=e,this.errorCorrectionBytes=t}return n.prototype.getDataBytes=function(){return this.dataBytes},n.prototype.getErrorCorrectionBytes=function(){return this.errorCorrectionBytes},n})(),XA=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};(function(){function n(){}return n.calculateMaskPenalty=function(e){return sf.applyMaskPenaltyRule1(e)+sf.applyMaskPenaltyRule2(e)+sf.applyMaskPenaltyRule3(e)+sf.applyMaskPenaltyRule4(e)},n.encode=function(e,t,r){r===void 0&&(r=null);var i=n.DEFAULT_BYTE_MODE_ENCODING,a=r!==null&&r.get(Dd.CHARACTER_SET)!==void 0;a&&(i=r.get(Dd.CHARACTER_SET).toString());var o=this.chooseMode(e,i),c=new qn;if(o===Ht.BYTE&&(a||n.DEFAULT_BYTE_MODE_ENCODING!==i)){var u=On.getCharacterSetECIByName(i);u!==void 0&&this.appendECI(u,c)}this.appendModeInfo(o,c);var h=new qn;this.appendBytes(e,o,h,i);var p;if(r!==null&&r.get(Dd.QR_VERSION)!==void 0){var g=Number.parseInt(r.get(Dd.QR_VERSION).toString(),10);p=Wo.getVersionForNumber(g);var _=this.calculateBitsNeeded(o,c,h,p);if(!this.willFit(_,p,t))throw new zt("Data too big for requested version")}else p=this.recommendVersion(t,o,c,h);var E=new qn;E.appendBitArray(c);var w=o===Ht.BYTE?h.getSizeInBytes():e.length;this.appendLengthInfo(w,p,o,E),E.appendBitArray(h);var S=p.getECBlocksForLevel(t),D=p.getTotalCodewords()-S.getTotalECCodewords();this.terminateBits(D,E);var T=this.interleaveWithECBytes(E,p.getTotalCodewords(),D,S.getNumBlocks()),O=new fv;O.setECLevel(t),O.setMode(o),O.setVersion(p);var j=p.getDimensionForVersion(),z=new sj(j,j),H=this.chooseMaskPattern(T,t,p,z);return O.setMaskPattern(H),$A.buildMatrix(T,t,p,H,z),O.setMatrix(z),O},n.recommendVersion=function(e,t,r,i){var a=this.calculateBitsNeeded(t,r,i,Wo.getVersionForNumber(1)),o=this.chooseVersion(a,e),c=this.calculateBitsNeeded(t,r,i,o);return this.chooseVersion(c,e)},n.calculateBitsNeeded=function(e,t,r,i){return t.getSize()+e.getCharacterCountBits(i)+r.getSize()},n.getAlphanumericCode=function(e){return e<n.ALPHANUMERIC_TABLE.length?n.ALPHANUMERIC_TABLE[e]:-1},n.chooseMode=function(e,t){if(t===void 0&&(t=null),On.SJIS.getName()===t&&this.isOnlyDoubleByteKanji(e))return Ht.KANJI;for(var r=!1,i=!1,a=0,o=e.length;a<o;++a){var c=e.charAt(a);if(n.isDigit(c))r=!0;else if(this.getAlphanumericCode(c.charCodeAt(0))!==-1)i=!0;else return Ht.BYTE}return i?Ht.ALPHANUMERIC:r?Ht.NUMERIC:Ht.BYTE},n.isOnlyDoubleByteKanji=function(e){var t;try{t=ui.encode(e,On.SJIS)}catch{return!1}var r=t.length;if(r%2!==0)return!1;for(var i=0;i<r;i+=2){var a=t[i]&255;if((a<129||a>159)&&(a<224||a>235))return!1}return!0},n.chooseMaskPattern=function(e,t,r,i){for(var a=Number.MAX_SAFE_INTEGER,o=-1,c=0;c<fv.NUM_MASK_PATTERNS;c++){$A.buildMatrix(e,t,r,c,i);var u=this.calculateMaskPenalty(i);u<a&&(a=u,o=c)}return o},n.chooseVersion=function(e,t){for(var r=1;r<=40;r++){var i=Wo.getVersionForNumber(r);if(n.willFit(e,i,t))return i}throw new zt("Data too big")},n.willFit=function(e,t,r){var i=t.getTotalCodewords(),a=t.getECBlocksForLevel(r),o=a.getTotalECCodewords(),c=i-o,u=(e+7)/8;return c>=u},n.terminateBits=function(e,t){var r=e*8;if(t.getSize()>r)throw new zt("data bits cannot fit in the QR Code"+t.getSize()+" > "+r);for(var i=0;i<4&&t.getSize()<r;++i)t.appendBit(!1);var a=t.getSize()&7;if(a>0)for(var i=a;i<8;i++)t.appendBit(!1);for(var o=e-t.getSizeInBytes(),i=0;i<o;++i)t.appendBits((i&1)===0?236:17,8);if(t.getSize()!==r)throw new zt("Bits size does not equal capacity")},n.getNumDataBytesAndNumECBytesForBlockID=function(e,t,r,i,a,o){if(i>=r)throw new zt("Block ID too large");var c=e%r,u=r-c,h=Math.floor(e/r),p=h+1,g=Math.floor(t/r),_=g+1,E=h-g,w=p-_;if(E!==w)throw new zt("EC bytes mismatch");if(r!==u+c)throw new zt("RS blocks mismatch");if(e!==(g+E)*u+(_+w)*c)throw new zt("Total bytes mismatch");i<u?(a[0]=g,o[0]=E):(a[0]=_,o[0]=w)},n.interleaveWithECBytes=function(e,t,r,i){var a,o,c,u;if(e.getSizeInBytes()!==r)throw new zt("Number of bits and data bytes does not match");for(var h=0,p=0,g=0,_=new Array,E=0;E<i;++E){var w=new Int32Array(1),S=new Int32Array(1);n.getNumDataBytesAndNumECBytesForBlockID(t,r,i,E,w,S);var D=w[0],T=new Uint8Array(D);e.toBytes(8*h,T,0,D);var O=n.generateECBytes(T,S[0]);_.push(new lj(T,O)),p=Math.max(p,D),g=Math.max(g,O.length),h+=w[0]}if(r!==h)throw new zt("Data bytes does not match offset");for(var j=new qn,E=0;E<p;++E)try{for(var z=(a=void 0,XA(_)),H=z.next();!H.done;H=z.next()){var q=H.value,T=q.getDataBytes();E<T.length&&j.appendBits(T[E],8)}}catch(k){a={error:k}}finally{try{H&&!H.done&&(o=z.return)&&o.call(z)}finally{if(a)throw a.error}}for(var E=0;E<g;++E)try{for(var N=(c=void 0,XA(_)),b=N.next();!b.done;b=N.next()){var q=b.value,O=q.getErrorCorrectionBytes();E<O.length&&j.appendBits(O[E],8)}}catch(k){c={error:k}}finally{try{b&&!b.done&&(u=N.return)&&u.call(N)}finally{if(c)throw c.error}}if(t!==j.getSizeInBytes())throw new zt("Interleaving error: "+t+" and "+j.getSizeInBytes()+" differ.");return j},n.generateECBytes=function(e,t){for(var r=e.length,i=new Int32Array(r+t),a=0;a<r;a++)i[a]=e[a]&255;new D3(Nr.QR_CODE_FIELD_256).encode(i,t);for(var o=new Uint8Array(t),a=0;a<t;a++)o[a]=i[r+a];return o},n.appendModeInfo=function(e,t){t.appendBits(e.getBits(),4)},n.appendLengthInfo=function(e,t,r,i){var a=r.getCharacterCountBits(t);if(e>=1<<a)throw new zt(e+" is bigger than "+((1<<a)-1));i.appendBits(e,a)},n.appendBytes=function(e,t,r,i){switch(t){case Ht.NUMERIC:n.appendNumericBytes(e,r);break;case Ht.ALPHANUMERIC:n.appendAlphanumericBytes(e,r);break;case Ht.BYTE:n.append8BitBytes(e,r,i);break;case Ht.KANJI:n.appendKanjiBytes(e,r);break;default:throw new zt("Invalid mode: "+t)}},n.getDigit=function(e){return e.charCodeAt(0)-48},n.isDigit=function(e){var t=n.getDigit(e);return t>=0&&t<=9},n.appendNumericBytes=function(e,t){for(var r=e.length,i=0;i<r;){var a=n.getDigit(e.charAt(i));if(i+2<r){var o=n.getDigit(e.charAt(i+1)),c=n.getDigit(e.charAt(i+2));t.appendBits(a*100+o*10+c,10),i+=3}else if(i+1<r){var o=n.getDigit(e.charAt(i+1));t.appendBits(a*10+o,7),i+=2}else t.appendBits(a,4),i++}},n.appendAlphanumericBytes=function(e,t){for(var r=e.length,i=0;i<r;){var a=n.getAlphanumericCode(e.charCodeAt(i));if(a===-1)throw new zt;if(i+1<r){var o=n.getAlphanumericCode(e.charCodeAt(i+1));if(o===-1)throw new zt;t.appendBits(a*45+o,11),i+=2}else t.appendBits(a,6),i++}},n.append8BitBytes=function(e,t,r){var i;try{i=ui.encode(e,r)}catch(u){throw new zt(u)}for(var a=0,o=i.length;a!==o;a++){var c=i[a];t.appendBits(c,8)}},n.appendKanjiBytes=function(e,t){var r;try{r=ui.encode(e,On.SJIS)}catch(g){throw new zt(g)}for(var i=r.length,a=0;a<i;a+=2){var o=r[a]&255,c=r[a+1]&255,u=o<<8&4294967295|c,h=-1;if(u>=33088&&u<=40956?h=u-33088:u>=57408&&u<=60351&&(h=u-49472),h===-1)throw new zt("Invalid byte sequence");var p=(h>>8)*192+(h&255);t.appendBits(p,13)}},n.appendECI=function(e,t){t.appendBits(Ht.ECI.getBits(),4),t.appendBits(e.getValue(),8)},n.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),n.DEFAULT_BYTE_MODE_ENCODING=On.UTF8.getName(),n})();var cj=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})();(function(n){cj(e,n);function e(t,r,i,a,o,c,u,h){var p=n.call(this,c,u)||this;if(p.yuvData=t,p.dataWidth=r,p.dataHeight=i,p.left=a,p.top=o,a+c>r||o+u>i)throw new Pe("Crop rectangle does not fit within image data.");return h&&p.reverseHorizontal(c,u),p}return e.prototype.getRow=function(t,r){if(t<0||t>=this.getHeight())throw new Pe("Requested row is outside the image: "+t);var i=this.getWidth();(r==null||r.length<i)&&(r=new Uint8ClampedArray(i));var a=(t+this.top)*this.dataWidth+this.left;return Bt.arraycopy(this.yuvData,a,r,0,i),r},e.prototype.getMatrix=function(){var t=this.getWidth(),r=this.getHeight();if(t===this.dataWidth&&r===this.dataHeight)return this.yuvData;var i=t*r,a=new Uint8ClampedArray(i),o=this.top*this.dataWidth+this.left;if(t===this.dataWidth)return Bt.arraycopy(this.yuvData,o,a,0,i),a;for(var c=0;c<r;c++){var u=c*t;Bt.arraycopy(this.yuvData,o,a,u,t),o+=this.dataWidth}return a},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(t,r,i,a){return new e(this.yuvData,this.dataWidth,this.dataHeight,this.left+t,this.top+r,i,a,!1)},e.prototype.renderThumbnail=function(){for(var t=this.getWidth()/e.THUMBNAIL_SCALE_FACTOR,r=this.getHeight()/e.THUMBNAIL_SCALE_FACTOR,i=new Int32Array(t*r),a=this.yuvData,o=this.top*this.dataWidth+this.left,c=0;c<r;c++){for(var u=c*t,h=0;h<t;h++){var p=a[o+h*e.THUMBNAIL_SCALE_FACTOR]&255;i[u+h]=4278190080|p*65793}o+=this.dataWidth*e.THUMBNAIL_SCALE_FACTOR}return i},e.prototype.getThumbnailWidth=function(){return this.getWidth()/e.THUMBNAIL_SCALE_FACTOR},e.prototype.getThumbnailHeight=function(){return this.getHeight()/e.THUMBNAIL_SCALE_FACTOR},e.prototype.reverseHorizontal=function(t,r){for(var i=this.yuvData,a=0,o=this.top*this.dataWidth+this.left;a<r;a++,o+=this.dataWidth)for(var c=o+t/2,u=o,h=o+t-1;u<c;u++,h--){var p=i[u];i[u]=i[h],i[h]=p}},e.prototype.invert=function(){return new pp(this)},e.THUMBNAIL_SCALE_FACTOR=2,e})($f);var uj=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})();(function(n){uj(e,n);function e(t,r,i,a,o,c,u){var h=n.call(this,r,i)||this;if(h.dataWidth=a,h.dataHeight=o,h.left=c,h.top=u,t.BYTES_PER_ELEMENT===4){for(var p=r*i,g=new Uint8ClampedArray(p),_=0;_<p;_++){var E=t[_],w=E>>16&255,S=E>>7&510,D=E&255;g[_]=(w+S+D)/4&255}h.luminances=g}else h.luminances=t;if(a===void 0&&(h.dataWidth=r),o===void 0&&(h.dataHeight=i),c===void 0&&(h.left=0),u===void 0&&(h.top=0),h.left+r>h.dataWidth||h.top+i>h.dataHeight)throw new Pe("Crop rectangle does not fit within image data.");return h}return e.prototype.getRow=function(t,r){if(t<0||t>=this.getHeight())throw new Pe("Requested row is outside the image: "+t);var i=this.getWidth();(r==null||r.length<i)&&(r=new Uint8ClampedArray(i));var a=(t+this.top)*this.dataWidth+this.left;return Bt.arraycopy(this.luminances,a,r,0,i),r},e.prototype.getMatrix=function(){var t=this.getWidth(),r=this.getHeight();if(t===this.dataWidth&&r===this.dataHeight)return this.luminances;var i=t*r,a=new Uint8ClampedArray(i),o=this.top*this.dataWidth+this.left;if(t===this.dataWidth)return Bt.arraycopy(this.luminances,o,a,0,i),a;for(var c=0;c<r;c++){var u=c*t;Bt.arraycopy(this.luminances,o,a,u,t),o+=this.dataWidth}return a},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(t,r,i,a){return new e(this.luminances,i,a,this.dataWidth,this.dataHeight,this.left+t,this.top+r)},e.prototype.invert=function(){return new pp(this)},e})($f);var fj=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),hj=(function(n){fj(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.forName=function(t){return this.getCharacterSetECIByName(t)},e})(On),dj=(function(){function n(){}return n.ISO_8859_1=On.ISO8859_1,n})(),hv,pj=301,mj=function(n,e){for(var t=1,r=0;r<255;r++)e[r]=t,n[t]=r,t*=2,t>=256&&(t^=pj);return{LOG:n,ALOG:e}};hv=mj([],[]),hv.LOG;hv.ALOG;var KA;(function(n){n[n.FORCE_NONE=0]="FORCE_NONE",n[n.FORCE_SQUARE=1]="FORCE_SQUARE",n[n.FORCE_RECTANGLE=2]="FORCE_RECTANGLE"})(KA||(KA={}));var YA=129,M3=230,gj=231,vj=235,yj=236,_j=237,xj=238,Ej=239,wj=240,$m=254,Aj=254,WA="[)>05",QA="[)>06",ZA="",Tt=0,tr=1,yr=2,In=3,Fn=4,cr=5,bj=(function(){function n(){}return n.prototype.getEncodingMode=function(){return Tt},n.prototype.encode=function(e){var t=Ii.determineConsecutiveDigitCount(e.getMessage(),e.pos);if(t>=2)e.writeCodeword(this.encodeASCIIDigits(e.getMessage().charCodeAt(e.pos),e.getMessage().charCodeAt(e.pos+1))),e.pos+=2;else{var r=e.getCurrentChar(),i=Ii.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(i!==this.getEncodingMode())switch(i){case cr:e.writeCodeword(gj),e.signalEncoderChange(cr);return;case tr:e.writeCodeword(M3),e.signalEncoderChange(tr);return;case In:e.writeCodeword(xj),e.signalEncoderChange(In);break;case yr:e.writeCodeword(Ej),e.signalEncoderChange(yr);break;case Fn:e.writeCodeword(wj),e.signalEncoderChange(Fn);break;default:throw new Error("Illegal mode: "+i)}else Ii.isExtendedASCII(r)?(e.writeCodeword(vj),e.writeCodeword(r-128+1),e.pos++):(e.writeCodeword(r+1),e.pos++)}},n.prototype.encodeASCIIDigits=function(e,t){if(Ii.isDigit(e)&&Ii.isDigit(t)){var r=(e-48)*10+(t-48);return r+130}throw new Error("not digits: "+e+t)},n})(),Sj=(function(){function n(){}return n.prototype.getEncodingMode=function(){return cr},n.prototype.encode=function(e){var t=new We;for(t.append(0);e.hasMoreCharacters();){var r=e.getCurrentChar();t.append(r),e.pos++;var i=Ii.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(i!==this.getEncodingMode()){e.signalEncoderChange(Tt);break}}var a=t.length()-1,o=1,c=e.getCodewordCount()+a+o;e.updateSymbolInfo(c);var u=e.getSymbolInfo().getDataCapacity()-c>0;if(e.hasMoreCharacters()||u)if(a<=249)t.setCharAt(0,ut.getCharAt(a));else if(a<=1555)t.setCharAt(0,ut.getCharAt(Math.floor(a/250)+249)),t.insert(1,ut.getCharAt(a%250));else throw new Error("Message length not in valid ranges: "+a);for(var h=0,r=t.length();h<r;h++)e.writeCodeword(this.randomize255State(t.charAt(h).charCodeAt(0),e.getCodewordCount()+1))},n.prototype.randomize255State=function(e,t){var r=149*t%255+1,i=e+r;return i<=255?i:i-256},n})(),zy=(function(){function n(){}return n.prototype.getEncodingMode=function(){return tr},n.prototype.encodeMaximal=function(e){for(var t=new We,r=0,i=e.pos,a=0;e.hasMoreCharacters();){var o=e.getCurrentChar();e.pos++,r=this.encodeChar(o,t),t.length()%3===0&&(i=e.pos,a=t.length())}if(a!==t.length()){var c=Math.floor(t.length()/3*2),u=Math.floor(e.getCodewordCount()+c+1);e.updateSymbolInfo(u);var h=e.getSymbolInfo().getDataCapacity()-u,p=Math.floor(t.length()%3);(p===2&&h!==2||p===1&&(r>3||h!==1))&&(e.pos=i)}t.length()>0&&e.writeCodeword(M3),this.handleEOD(e,t)},n.prototype.encode=function(e){for(var t=new We;e.hasMoreCharacters();){var r=e.getCurrentChar();e.pos++;var i=this.encodeChar(r,t),a=Math.floor(t.length()/3)*2,o=e.getCodewordCount()+a;e.updateSymbolInfo(o);var c=e.getSymbolInfo().getDataCapacity()-o;if(!e.hasMoreCharacters()){var u=new We;for(t.length()%3===2&&c!==2&&(i=this.backtrackOneCharacter(e,t,u,i));t.length()%3===1&&(i>3||c!==1);)i=this.backtrackOneCharacter(e,t,u,i);break}var h=t.length();if(h%3===0){var p=Ii.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(p!==this.getEncodingMode()){e.signalEncoderChange(Tt);break}}}this.handleEOD(e,t)},n.prototype.backtrackOneCharacter=function(e,t,r,i){var a=t.length(),o=t.toString().substring(0,a-i);t.setLengthToZero(),t.append(o),e.pos--;var c=e.getCurrentChar();return i=this.encodeChar(c,r),e.resetSymbolInfo(),i},n.prototype.writeNextTriplet=function(e,t){e.writeCodewords(this.encodeToCodewords(t.toString()));var r=t.toString().substring(3);t.setLengthToZero(),t.append(r)},n.prototype.handleEOD=function(e,t){var r=Math.floor(t.length()/3*2),i=t.length()%3,a=e.getCodewordCount()+r;e.updateSymbolInfo(a);var o=e.getSymbolInfo().getDataCapacity()-a;if(i===2){for(t.append("\0");t.length()>=3;)this.writeNextTriplet(e,t);e.hasMoreCharacters()&&e.writeCodeword($m)}else if(o===1&&i===1){for(;t.length()>=3;)this.writeNextTriplet(e,t);e.hasMoreCharacters()&&e.writeCodeword($m),e.pos--}else if(i===0){for(;t.length()>=3;)this.writeNextTriplet(e,t);(o>0||e.hasMoreCharacters())&&e.writeCodeword($m)}else throw new Error("Unexpected case. Please report!");e.signalEncoderChange(Tt)},n.prototype.encodeChar=function(e,t){if(e===32)return t.append(3),1;if(e>=48&&e<=57)return t.append(e-48+4),1;if(e>=65&&e<=90)return t.append(e-65+14),1;if(e<32)return t.append(0),t.append(e),2;if(e<=47)return t.append(1),t.append(e-33),2;if(e<=64)return t.append(1),t.append(e-58+15),2;if(e<=95)return t.append(1),t.append(e-91+22),2;if(e<=127)return t.append(2),t.append(e-96),2;t.append("1");var r=2;return r+=this.encodeChar(e-128,t),r},n.prototype.encodeToCodewords=function(e){var t=1600*e.charCodeAt(0)+40*e.charCodeAt(1)+e.charCodeAt(2)+1,r=t/256,i=t%256,a=new We;return a.append(r),a.append(i),a.toString()},n})(),Cj=(function(){function n(){}return n.prototype.getEncodingMode=function(){return Fn},n.prototype.encode=function(e){for(var t=new We;e.hasMoreCharacters();){var r=e.getCurrentChar();this.encodeChar(r,t),e.pos++;var i=t.length();if(i>=4){e.writeCodewords(this.encodeToCodewords(t.toString()));var a=t.toString().substring(4);t.setLengthToZero(),t.append(a);var o=Ii.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(o!==this.getEncodingMode()){e.signalEncoderChange(Tt);break}}}t.append(ut.getCharAt(31)),this.handleEOD(e,t)},n.prototype.handleEOD=function(e,t){try{var r=t.length();if(r===0)return;if(r===1){e.updateSymbolInfo();var i=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount(),a=e.getRemainingCharacters();if(a>i&&(e.updateSymbolInfo(e.getCodewordCount()+1),i=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount()),a<=i&&i<=2)return}if(r>4)throw new Error("Count must not exceed 4");var o=r-1,c=this.encodeToCodewords(t.toString()),u=!e.hasMoreCharacters(),h=u&&o<=2;if(o<=2){e.updateSymbolInfo(e.getCodewordCount()+o);var i=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount();i>=3&&(h=!1,e.updateSymbolInfo(e.getCodewordCount()+c.length))}h?(e.resetSymbolInfo(),e.pos-=o):e.writeCodewords(c)}finally{e.signalEncoderChange(Tt)}},n.prototype.encodeChar=function(e,t){e>=32&&e<=63?t.append(e):e>=64&&e<=94?t.append(ut.getCharAt(e-64)):Ii.illegalCharacter(ut.getCharAt(e))},n.prototype.encodeToCodewords=function(e){var t=e.length;if(t===0)throw new Error("StringBuilder must not be empty");var r=e.charAt(0).charCodeAt(0),i=t>=2?e.charAt(1).charCodeAt(0):0,a=t>=3?e.charAt(2).charCodeAt(0):0,o=t>=4?e.charAt(3).charCodeAt(0):0,c=(r<<18)+(i<<12)+(a<<6)+o,u=c>>16&255,h=c>>8&255,p=c&255,g=new We;return g.append(u),t>=2&&g.append(h),t>=3&&g.append(p),g.toString()},n})(),Tj=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Ij=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},xt=(function(){function n(e,t,r,i,a,o,c,u){c===void 0&&(c=0),u===void 0&&(u=0),this.rectangular=e,this.dataCapacity=t,this.errorCodewords=r,this.matrixWidth=i,this.matrixHeight=a,this.dataRegions=o,this.rsBlockData=c,this.rsBlockError=u}return n.lookup=function(e,t,r,i,a){var o,c;t===void 0&&(t=0),r===void 0&&(r=null),i===void 0&&(i=null),a===void 0&&(a=!0);try{for(var u=Ij(Rj),h=u.next();!h.done;h=u.next()){var p=h.value;if(!(t===1&&p.rectangular)&&!(t===2&&!p.rectangular)&&!(r!=null&&(p.getSymbolWidth()<r.getWidth()||p.getSymbolHeight()<r.getHeight()))&&!(i!=null&&(p.getSymbolWidth()>i.getWidth()||p.getSymbolHeight()>i.getHeight()))&&e<=p.dataCapacity)return p}}catch(g){o={error:g}}finally{try{h&&!h.done&&(c=u.return)&&c.call(u)}finally{if(o)throw o.error}}if(a)throw new Error("Can't find a symbol arrangement that matches the message. Data codewords: "+e);return null},n.prototype.getHorizontalDataRegions=function(){switch(this.dataRegions){case 1:return 1;case 2:case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},n.prototype.getVerticalDataRegions=function(){switch(this.dataRegions){case 1:case 2:return 1;case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},n.prototype.getSymbolDataWidth=function(){return this.getHorizontalDataRegions()*this.matrixWidth},n.prototype.getSymbolDataHeight=function(){return this.getVerticalDataRegions()*this.matrixHeight},n.prototype.getSymbolWidth=function(){return this.getSymbolDataWidth()+this.getHorizontalDataRegions()*2},n.prototype.getSymbolHeight=function(){return this.getSymbolDataHeight()+this.getVerticalDataRegions()*2},n.prototype.getCodewordCount=function(){return this.dataCapacity+this.errorCodewords},n.prototype.getInterleavedBlockCount=function(){return this.rsBlockData?this.dataCapacity/this.rsBlockData:1},n.prototype.getDataCapacity=function(){return this.dataCapacity},n.prototype.getErrorCodewords=function(){return this.errorCodewords},n.prototype.getDataLengthForInterleavedBlock=function(e){return this.rsBlockData},n.prototype.getErrorLengthForInterleavedBlock=function(e){return this.rsBlockError},n})(),Nj=(function(n){Tj(e,n);function e(){return n.call(this,!1,1558,620,22,22,36,-1,62)||this}return e.prototype.getInterleavedBlockCount=function(){return 10},e.prototype.getDataLengthForInterleavedBlock=function(t){return t<=8?156:155},e})(xt),Rj=[new xt(!1,3,5,8,8,1),new xt(!1,5,7,10,10,1),new xt(!0,5,7,16,6,1),new xt(!1,8,10,12,12,1),new xt(!0,10,11,14,6,2),new xt(!1,12,12,14,14,1),new xt(!0,16,14,24,10,1),new xt(!1,18,14,16,16,1),new xt(!1,22,18,18,18,1),new xt(!0,22,18,16,10,2),new xt(!1,30,20,20,20,1),new xt(!0,32,24,16,14,2),new xt(!1,36,24,22,22,1),new xt(!1,44,28,24,24,1),new xt(!0,49,28,22,14,2),new xt(!1,62,36,14,14,4),new xt(!1,86,42,16,16,4),new xt(!1,114,48,18,18,4),new xt(!1,144,56,20,20,4),new xt(!1,174,68,22,22,4),new xt(!1,204,84,24,24,4,102,42),new xt(!1,280,112,14,14,16,140,56),new xt(!1,368,144,16,16,16,92,36),new xt(!1,456,192,18,18,16,114,48),new xt(!1,576,224,20,20,16,144,56),new xt(!1,696,272,22,22,16,174,68),new xt(!1,816,336,24,24,16,136,56),new xt(!1,1050,408,18,18,36,175,68),new xt(!1,1304,496,20,20,36,163,62),new Nj],Oj=(function(){function n(e){this.msg=e,this.pos=0,this.skipAtEnd=0;for(var t=e.split("").map(function(c){return c.charCodeAt(0)}),r=new We,i=0,a=t.length;i<a;i++){var o=String.fromCharCode(t[i]&255);if(o==="?"&&e.charAt(i)!=="?")throw new Error("Message contains characters outside ISO-8859-1 encoding.");r.append(o)}this.msg=r.toString(),this.shape=0,this.codewords=new We,this.newEncoding=-1}return n.prototype.setSymbolShape=function(e){this.shape=e},n.prototype.setSizeConstraints=function(e,t){this.minSize=e,this.maxSize=t},n.prototype.getMessage=function(){return this.msg},n.prototype.setSkipAtEnd=function(e){this.skipAtEnd=e},n.prototype.getCurrentChar=function(){return this.msg.charCodeAt(this.pos)},n.prototype.getCurrent=function(){return this.msg.charCodeAt(this.pos)},n.prototype.getCodewords=function(){return this.codewords},n.prototype.writeCodewords=function(e){this.codewords.append(e)},n.prototype.writeCodeword=function(e){this.codewords.append(e)},n.prototype.getCodewordCount=function(){return this.codewords.length()},n.prototype.getNewEncoding=function(){return this.newEncoding},n.prototype.signalEncoderChange=function(e){this.newEncoding=e},n.prototype.resetEncoderSignal=function(){this.newEncoding=-1},n.prototype.hasMoreCharacters=function(){return this.pos<this.getTotalMessageCharCount()},n.prototype.getTotalMessageCharCount=function(){return this.msg.length-this.skipAtEnd},n.prototype.getRemainingCharacters=function(){return this.getTotalMessageCharCount()-this.pos},n.prototype.getSymbolInfo=function(){return this.symbolInfo},n.prototype.updateSymbolInfo=function(e){e===void 0&&(e=this.getCodewordCount()),(this.symbolInfo==null||e>this.symbolInfo.getDataCapacity())&&(this.symbolInfo=xt.lookup(e,this.shape,this.minSize,this.maxSize,!0))},n.prototype.resetSymbolInfo=function(){this.symbolInfo=null},n})(),Dj=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Mj=(function(n){Dj(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getEncodingMode=function(){return In},e.prototype.encode=function(t){for(var r=new We;t.hasMoreCharacters();){var i=t.getCurrentChar();t.pos++,this.encodeChar(i,r);var a=r.length();if(a%3===0){this.writeNextTriplet(t,r);var o=Ii.lookAheadTest(t.getMessage(),t.pos,this.getEncodingMode());if(o!==this.getEncodingMode()){t.signalEncoderChange(Tt);break}}}this.handleEOD(t,r)},e.prototype.encodeChar=function(t,r){switch(t){case 13:r.append(0);break;case 42:r.append(1);break;case 62:r.append(2);break;case 32:r.append(3);break;default:t>=48&&t<=57?r.append(t-48+4):t>=65&&t<=90?r.append(t-65+14):Ii.illegalCharacter(ut.getCharAt(t));break}return 1},e.prototype.handleEOD=function(t,r){t.updateSymbolInfo();var i=t.getSymbolInfo().getDataCapacity()-t.getCodewordCount(),a=r.length();t.pos-=a,(t.getRemainingCharacters()>1||i>1||t.getRemainingCharacters()!==i)&&t.writeCodeword(Aj),t.getNewEncoding()<0&&t.signalEncoderChange(Tt)},e})(zy),Pj=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),kj=(function(n){Pj(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getEncodingMode=function(){return yr},e.prototype.encodeChar=function(t,r){if(t===32)return r.append(3),1;if(t>=48&&t<=57)return r.append(t-48+4),1;if(t>=97&&t<=122)return r.append(t-97+14),1;if(t<32)return r.append(0),r.append(t),2;if(t<=47)return r.append(1),r.append(t-33),2;if(t<=64)return r.append(1),r.append(t-58+15),2;if(t>=91&&t<=95)return r.append(1),r.append(t-91+22),2;if(t===96)return r.append(2),r.append(0),2;if(t<=90)return r.append(2),r.append(t-65+1),2;if(t<=127)return r.append(2),r.append(t-123+27),2;r.append("1");var i=2;return i+=this.encodeChar(t-128,r),i},e})(zy),Ii=(function(){function n(){}return n.randomize253State=function(e){var t=149*e%253+1,r=YA+t;return r<=254?r:r-254},n.encodeHighLevel=function(e,t,r,i,a){t===void 0&&(t=0),r===void 0&&(r=null),i===void 0&&(i=null),a===void 0&&(a=!1);var o=new zy,c=[new bj,o,new kj,new Mj,new Cj,new Sj],u=new Oj(e);u.setSymbolShape(t),u.setSizeConstraints(r,i),e.startsWith(WA)&&e.endsWith(ZA)?(u.writeCodeword(yj),u.setSkipAtEnd(2),u.pos+=WA.length):e.startsWith(QA)&&e.endsWith(ZA)&&(u.writeCodeword(_j),u.setSkipAtEnd(2),u.pos+=QA.length);var h=Tt;for(a&&(o.encodeMaximal(u),h=u.getNewEncoding(),u.resetEncoderSignal());u.hasMoreCharacters();)c[h].encode(u),u.getNewEncoding()>=0&&(h=u.getNewEncoding(),u.resetEncoderSignal());var p=u.getCodewordCount();u.updateSymbolInfo();var g=u.getSymbolInfo().getDataCapacity();p<g&&h!==Tt&&h!==cr&&h!==Fn&&u.writeCodeword("þ");var _=u.getCodewords();for(_.length()<g&&_.append(YA);_.length()<g;)_.append(this.randomize253State(_.length()+1));return u.getCodewords().toString()},n.lookAheadTest=function(e,t,r){var i=this.lookAheadTestIntern(e,t,r);if(r===In&&i===In){for(var a=Math.min(t+3,e.length),o=t;o<a;o++)if(!this.isNativeX12(e.charCodeAt(o)))return Tt}else if(r===Fn&&i===Fn){for(var a=Math.min(t+4,e.length),o=t;o<a;o++)if(!this.isNativeEDIFACT(e.charCodeAt(o)))return Tt}return i},n.lookAheadTestIntern=function(e,t,r){if(t>=e.length)return r;var i;r===Tt?i=[0,1,1,1,1,1.25]:(i=[1,2,2,2,2,2.25],i[r]=0);for(var a=0,o=new Uint8Array(6),c=[];;){if(t+a===e.length){Dn.fill(o,0),Dn.fill(c,0);var u=this.findMinimums(i,c,Je.MAX_VALUE,o),h=this.getMinimumCount(o);if(c[Tt]===u)return Tt;if(h===1){if(o[cr]>0)return cr;if(o[Fn]>0)return Fn;if(o[yr]>0)return yr;if(o[In]>0)return In}return tr}var p=e.charCodeAt(t+a);if(a++,this.isDigit(p)?i[Tt]+=.5:this.isExtendedASCII(p)?(i[Tt]=Math.ceil(i[Tt]),i[Tt]+=2):(i[Tt]=Math.ceil(i[Tt]),i[Tt]++),this.isNativeC40(p)?i[tr]+=2/3:this.isExtendedASCII(p)?i[tr]+=8/3:i[tr]+=4/3,this.isNativeText(p)?i[yr]+=2/3:this.isExtendedASCII(p)?i[yr]+=8/3:i[yr]+=4/3,this.isNativeX12(p)?i[In]+=2/3:this.isExtendedASCII(p)?i[In]+=13/3:i[In]+=10/3,this.isNativeEDIFACT(p)?i[Fn]+=3/4:this.isExtendedASCII(p)?i[Fn]+=17/4:i[Fn]+=13/4,this.isSpecialB256(p)?i[cr]+=4:i[cr]++,a>=4){if(Dn.fill(o,0),Dn.fill(c,0),this.findMinimums(i,c,Je.MAX_VALUE,o),c[Tt]<this.min(c[cr],c[tr],c[yr],c[In],c[Fn]))return Tt;if(c[cr]<c[Tt]||c[cr]+1<this.min(c[tr],c[yr],c[In],c[Fn]))return cr;if(c[Fn]+1<this.min(c[cr],c[tr],c[yr],c[In],c[Tt]))return Fn;if(c[yr]+1<this.min(c[cr],c[tr],c[Fn],c[In],c[Tt]))return yr;if(c[In]+1<this.min(c[cr],c[tr],c[Fn],c[yr],c[Tt]))return In;if(c[tr]+1<this.min(c[Tt],c[cr],c[Fn],c[yr])){if(c[tr]<c[In])return tr;if(c[tr]===c[In]){for(var g=t+a+1;g<e.length;){var _=e.charCodeAt(g);if(this.isX12TermSep(_))return In;if(!this.isNativeX12(_))break;g++}return tr}}}}},n.min=function(e,t,r,i,a){var o=Math.min(e,Math.min(t,Math.min(r,i)));return a===void 0?o:Math.min(o,a)},n.findMinimums=function(e,t,r,i){for(var a=0;a<6;a++){var o=t[a]=Math.ceil(e[a]);r>o&&(r=o,Dn.fill(i,0)),r===o&&(i[a]=i[a]+1)}return r},n.getMinimumCount=function(e){for(var t=0,r=0;r<6;r++)t+=e[r];return t||0},n.isDigit=function(e){return e>=48&&e<=57},n.isExtendedASCII=function(e){return e>=128&&e<=255},n.isNativeC40=function(e){return e===32||e>=48&&e<=57||e>=65&&e<=90},n.isNativeText=function(e){return e===32||e>=48&&e<=57||e>=97&&e<=122},n.isNativeX12=function(e){return this.isX12TermSep(e)||e===32||e>=48&&e<=57||e>=65&&e<=90},n.isX12TermSep=function(e){return e===13||e===42||e===62},n.isNativeEDIFACT=function(e){return e>=32&&e<=94},n.isSpecialB256=function(e){return!1},n.determineConsecutiveDigitCount=function(e,t){t===void 0&&(t=0);for(var r=e.length,i=t;i<r&&this.isDigit(e.charCodeAt(i));)i++;return i-t},n.illegalCharacter=function(e){var t=Je.toHexString(e.charCodeAt(0));throw t="0000".substring(0,4-t.length)+t,new Error("Illegal character: "+e+" (0x"+t+")")},n})(),Xm=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},JA=(function(){function n(e){this.charset=e,this.name=e.name}return n.prototype.canEncode=function(e){try{return ui.encode(e,this.charset)!=null}catch{return!1}},n})(),Lj=(function(){function n(e,t,r){var i,a,o,c,u,h;this.ENCODERS=["IBM437","ISO-8859-2","ISO-8859-3","ISO-8859-4","ISO-8859-5","ISO-8859-6","ISO-8859-7","ISO-8859-8","ISO-8859-9","ISO-8859-10","ISO-8859-11","ISO-8859-13","ISO-8859-14","ISO-8859-15","ISO-8859-16","windows-1250","windows-1251","windows-1252","windows-1256","Shift_JIS"].map(function(I){return new JA(hj.forName(I))}),this.encoders=[];var p=[];p.push(new JA(dj.ISO_8859_1));for(var g=t!=null&&t.name.startsWith("UTF"),_=0;_<e.length;_++){var E=!1;try{for(var w=(i=void 0,Xm(p)),S=w.next();!S.done;S=w.next()){var D=S.value,T=e.charAt(_),O=T.charCodeAt(0);if(O===r||D.canEncode(T)){E=!0;break}}}catch(I){i={error:I}}finally{try{S&&!S.done&&(a=w.return)&&a.call(w)}finally{if(i)throw i.error}}if(!E)try{for(var j=(o=void 0,Xm(this.ENCODERS)),z=j.next();!z.done;z=j.next()){var D=z.value;if(D.canEncode(e.charAt(_))){p.push(D),E=!0;break}}}catch(I){o={error:I}}finally{try{z&&!z.done&&(c=j.return)&&c.call(j)}finally{if(o)throw o.error}}E||(g=!0)}if(p.length===1&&!g)this.encoders=[p[0]];else{this.encoders=[];var H=0;try{for(var q=Xm(p),N=q.next();!N.done;N=q.next()){var D=N.value;this.encoders[H++]=D}}catch(I){u={error:I}}finally{try{N&&!N.done&&(h=q.return)&&h.call(q)}finally{if(u)throw u.error}}}var b=-1;if(t!=null){for(var _=0;_<this.encoders.length;_++)if(this.encoders[_]!=null&&t.name===this.encoders[_].name){b=_;break}}this.priorityEncoderIndex=b}return n.prototype.length=function(){return this.encoders.length},n.prototype.getCharsetName=function(e){if(!(e<this.length()))throw new Error("index must be less than length");return this.encoders[e].name},n.prototype.getCharset=function(e){if(!(e<this.length()))throw new Error("index must be less than length");return this.encoders[e].charset},n.prototype.getECIValue=function(e){return this.encoders[e].charset.getValueIdentifier()},n.prototype.getPriorityEncoderIndex=function(){return this.priorityEncoderIndex},n.prototype.canEncode=function(e,t){if(!(t<this.length()))throw new Error("index must be less than length");return!0},n.prototype.encode=function(e,t){if(!(t<this.length()))throw new Error("index must be less than length");return ui.encode(ut.getCharAt(e),this.encoders[t].name)},n})(),jj=3,Bj=(function(){function n(e,t,r){this.fnc1=r;var i=new Lj(e,t,r);if(i.length()===1)for(var a=0;a<this.bytes.length;a++){var o=e.charAt(a).charCodeAt(0);this.bytes[a]=o===r?1e3:o}else this.bytes=this.encodeMinimally(e,i,r)}return n.prototype.getFNC1Character=function(){return this.fnc1},n.prototype.length=function(){return this.bytes.length},n.prototype.haveNCharacters=function(e,t){if(e+t-1>=this.bytes.length)return!1;for(var r=0;r<t;r++)if(this.isECI(e+r))return!1;return!0},n.prototype.charAt=function(e){if(e<0||e>=this.length())throw new Error(""+e);if(this.isECI(e))throw new Error("value at "+e+" is not a character but an ECI");return this.isFNC1(e)?this.fnc1:this.bytes[e]},n.prototype.subSequence=function(e,t){if(e<0||e>t||t>this.length())throw new Error(""+e);for(var r=new We,i=e;i<t;i++){if(this.isECI(i))throw new Error("value at "+i+" is not a character but an ECI");r.append(this.charAt(i))}return r.toString()},n.prototype.isECI=function(e){if(e<0||e>=this.length())throw new Error(""+e);return this.bytes[e]>255&&this.bytes[e]<=999},n.prototype.isFNC1=function(e){if(e<0||e>=this.length())throw new Error(""+e);return this.bytes[e]===1e3},n.prototype.getECIValue=function(e){if(e<0||e>=this.length())throw new Error(""+e);if(!this.isECI(e))throw new Error("value at "+e+" is not an ECI but a character");return this.bytes[e]-256},n.prototype.addEdge=function(e,t,r){(e[t][r.encoderIndex]==null||e[t][r.encoderIndex].cachedTotalSize>r.cachedTotalSize)&&(e[t][r.encoderIndex]=r)},n.prototype.addEdges=function(e,t,r,i,a,o){var c=e.charAt(i).charCodeAt(0),u=0,h=t.length();t.getPriorityEncoderIndex()>=0&&(c===o||t.canEncode(c,t.getPriorityEncoderIndex()))&&(u=t.getPriorityEncoderIndex(),h=u+1);for(var p=u;p<h;p++)(c===o||t.canEncode(c,p))&&this.addEdge(r,i+1,new eb(c,t,p,a,o))},n.prototype.encodeMinimally=function(e,t,r){var i=e.length,a=new eb[i+1][t.length()];this.addEdges(e,t,a,0,null,r);for(var o=1;o<=i;o++){for(var c=0;c<t.length();c++)a[o][c]!=null&&o<i&&this.addEdges(e,t,a,o,a[o][c],r);for(var c=0;c<t.length();c++)a[o-1][c]=null}for(var u=-1,h=Je.MAX_VALUE,c=0;c<t.length();c++)if(a[i][c]!=null){var p=a[i][c];p.cachedTotalSize<h&&(h=p.cachedTotalSize,u=c)}if(u<0)throw new Error('Failed to encode "'+e+'"');for(var g=[],_=a[i][u];_!=null;){if(_.isFNC1())g.unshift(1e3);else for(var E=t.encode(_.c,_.encoderIndex),o=E.length-1;o>=0;o--)g.unshift(E[o]&255);var w=_.previous===null?0:_.previous.encoderIndex;w!==_.encoderIndex&&g.unshift(256+t.getECIValue(_.encoderIndex)),_=_.previous}for(var S=[],o=0;o<S.length;o++)S[o]=g[o];return S},n})(),eb=(function(){function n(e,t,r,i,a){this.c=e,this.encoderSet=t,this.encoderIndex=r,this.previous=i,this.fnc1=a,this.c=e===a?1e3:e;var o=this.isFNC1()?1:t.encode(e,r).length,c=i===null?0:i.encoderIndex;c!==r&&(o+=jj),i!=null&&(o+=i.cachedTotalSize),this.cachedTotalSize=o}return n.prototype.isFNC1=function(){return this.c===1e3},n})(),Vj=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})();var tb;(function(n){n[n.ASCII=0]="ASCII",n[n.C40=1]="C40",n[n.TEXT=2]="TEXT",n[n.X12=3]="X12",n[n.EDF=4]="EDF",n[n.B256=5]="B256"})(tb||(tb={}));(function(n){Vj(e,n);function e(t,r,i,a,o){var c=n.call(this,t,r,i)||this;return c.shape=a,c.macroId=o,c}return e.prototype.getMacroId=function(){return this.macroId},e.prototype.getShapeHint=function(){return this.shape},e})(Bj);var Fj=(function(){function n(){}return n.prototype.isCompact=function(){return this.compact},n.prototype.setCompact=function(e){this.compact=e},n.prototype.getSize=function(){return this.size},n.prototype.setSize=function(e){this.size=e},n.prototype.getLayers=function(){return this.layers},n.prototype.setLayers=function(e){this.layers=e},n.prototype.getCodeWords=function(){return this.codeWords},n.prototype.setCodeWords=function(e){this.codeWords=e},n.prototype.getMatrix=function(){return this.matrix},n.prototype.setMatrix=function(e){this.matrix=e},n})(),nb=(function(){function n(){}return n.singletonList=function(e){return[e]},n.min=function(e,t){return e.sort(t)[0]},n})(),Uj=(function(){function n(e){this.previous=e}return n.prototype.getPrevious=function(){return this.previous},n})(),zj=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Hy=(function(n){zj(e,n);function e(t,r,i){var a=n.call(this,t)||this;return a.value=r,a.bitCount=i,a}return e.prototype.appendTo=function(t,r){t.appendBits(this.value,this.bitCount)},e.prototype.add=function(t,r){return new e(this,t,r)},e.prototype.addBinaryShift=function(t,r){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new e(this,t,r)},e.prototype.toString=function(){var t=this.value&(1<<this.bitCount)-1;return t|=1<<this.bitCount,"<"+Je.toBinaryString(t|1<<this.bitCount).substring(1)+">"},e})(Uj),Hj=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Gj=(function(n){Hj(e,n);function e(t,r,i){var a=n.call(this,t,0,0)||this;return a.binaryShiftStart=r,a.binaryShiftByteCount=i,a}return e.prototype.appendTo=function(t,r){for(var i=0;i<this.binaryShiftByteCount;i++)(i===0||i===31&&this.binaryShiftByteCount<=62)&&(t.appendBits(31,5),this.binaryShiftByteCount>62?t.appendBits(this.binaryShiftByteCount-31,16):i===0?t.appendBits(Math.min(this.binaryShiftByteCount,31),5):t.appendBits(this.binaryShiftByteCount-31,5)),t.appendBits(r[this.binaryShiftStart+i],8)},e.prototype.addBinaryShift=function(t,r){return new e(this,t,r)},e.prototype.toString=function(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"},e})(Hy);function qj(n,e,t){return new Gj(n,e,t)}function Ku(n,e,t){return new Hy(n,e,t)}var $j=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],Ws=0,R0=1,li=2,P3=3,ua=4,Xj=new Hy(null,0,0),Km=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])],Kj=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};function Yj(n){var e,t;try{for(var r=Kj(n),i=r.next();!i.done;i=r.next()){var a=i.value;Dn.fill(a,-1)}}catch(o){e={error:o}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}return n[Ws][ua]=0,n[R0][ua]=0,n[R0][Ws]=28,n[P3][ua]=0,n[li][ua]=0,n[li][Ws]=15,n}var k3=Yj(Dn.createInt32Array(6,6)),Wj=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Qj=(function(){function n(e,t,r,i){this.token=e,this.mode=t,this.binaryShiftByteCount=r,this.bitCount=i}return n.prototype.getMode=function(){return this.mode},n.prototype.getToken=function(){return this.token},n.prototype.getBinaryShiftByteCount=function(){return this.binaryShiftByteCount},n.prototype.getBitCount=function(){return this.bitCount},n.prototype.latchAndAppend=function(e,t){var r=this.bitCount,i=this.token;if(e!==this.mode){var a=Km[this.mode][e];i=Ku(i,a&65535,a>>16),r+=a>>16}var o=e===li?4:5;return i=Ku(i,t,o),new n(i,e,0,r+o)},n.prototype.shiftAndAppend=function(e,t){var r=this.token,i=this.mode===li?4:5;return r=Ku(r,k3[this.mode][e],i),r=Ku(r,t,5),new n(r,this.mode,0,this.bitCount+i+5)},n.prototype.addBinaryShiftChar=function(e){var t=this.token,r=this.mode,i=this.bitCount;if(this.mode===ua||this.mode===li){var a=Km[r][Ws];t=Ku(t,a&65535,a>>16),i+=a>>16,r=Ws}var o=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,c=new n(t,r,this.binaryShiftByteCount+1,i+o);return c.binaryShiftByteCount===2078&&(c=c.endBinaryShift(e+1)),c},n.prototype.endBinaryShift=function(e){if(this.binaryShiftByteCount===0)return this;var t=this.token;return t=qj(t,e-this.binaryShiftByteCount,this.binaryShiftByteCount),new n(t,this.mode,0,this.bitCount)},n.prototype.isBetterThanOrEqualTo=function(e){var t=this.bitCount+(Km[this.mode][e.mode]>>16);return this.binaryShiftByteCount<e.binaryShiftByteCount?t+=n.calculateBinaryShiftCost(e)-n.calculateBinaryShiftCost(this):this.binaryShiftByteCount>e.binaryShiftByteCount&&e.binaryShiftByteCount>0&&(t+=10),t<=e.bitCount},n.prototype.toBitArray=function(e){for(var t,r,i=[],a=this.endBinaryShift(e.length).token;a!==null;a=a.getPrevious())i.unshift(a);var o=new qn;try{for(var c=Wj(i),u=c.next();!u.done;u=c.next()){var h=u.value;h.appendTo(o,e)}}catch(p){t={error:p}}finally{try{u&&!u.done&&(r=c.return)&&r.call(c)}finally{if(t)throw t.error}}return o},n.prototype.toString=function(){return ut.format("%s bits=%d bytes=%d",$j[this.mode],this.bitCount,this.binaryShiftByteCount)},n.calculateBinaryShiftCost=function(e){return e.binaryShiftByteCount>62?21:e.binaryShiftByteCount>31?20:e.binaryShiftByteCount>0?10:0},n.INITIAL_STATE=new n(Xj,Ws,0,0),n})();function Zj(n){var e=ut.getCharCode(" "),t=ut.getCharCode("."),r=ut.getCharCode(",");n[Ws][e]=1;for(var i=ut.getCharCode("Z"),a=ut.getCharCode("A"),o=a;o<=i;o++)n[Ws][o]=o-a+2;n[R0][e]=1;for(var c=ut.getCharCode("z"),u=ut.getCharCode("a"),o=u;o<=c;o++)n[R0][o]=o-u+2;n[li][e]=1;for(var h=ut.getCharCode("9"),p=ut.getCharCode("0"),o=p;o<=h;o++)n[li][o]=o-p+2;n[li][r]=12,n[li][t]=13;for(var g=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""],_=0;_<g.length;_++)n[P3][ut.getCharCode(g[_])]=_;for(var E=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"],_=0;_<E.length;_++)ut.getCharCode(E[_])>0&&(n[ua][ut.getCharCode(E[_])]=_);return n}var Ym=Zj(Dn.createInt32Array(5,256)),Md=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Jj=(function(){function n(e){this.text=e}return n.prototype.encode=function(){for(var e=ut.getCharCode(" "),t=ut.getCharCode(`
`),r=nb.singletonList(Qj.INITIAL_STATE),i=0;i<this.text.length;i++){var a=void 0,o=i+1<this.text.length?this.text[i+1]:0;switch(this.text[i]){case ut.getCharCode("\r"):a=o===t?2:0;break;case ut.getCharCode("."):a=o===e?3:0;break;case ut.getCharCode(","):a=o===e?4:0;break;case ut.getCharCode(":"):a=o===e?5:0;break;default:a=0}a>0?(r=n.updateStateListForPair(r,i,a),i++):r=this.updateStateListForChar(r,i)}var c=nb.min(r,function(u,h){return u.getBitCount()-h.getBitCount()});return c.toBitArray(this.text)},n.prototype.updateStateListForChar=function(e,t){var r,i,a=[];try{for(var o=Md(e),c=o.next();!c.done;c=o.next()){var u=c.value;this.updateStateForChar(u,t,a)}}catch(h){r={error:h}}finally{try{c&&!c.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}return n.simplifyStates(a)},n.prototype.updateStateForChar=function(e,t,r){for(var i=this.text[t]&255,a=Ym[e.getMode()][i]>0,o=null,c=0;c<=ua;c++){var u=Ym[c][i];if(u>0){if(o==null&&(o=e.endBinaryShift(t)),!a||c===e.getMode()||c===li){var h=o.latchAndAppend(c,u);r.push(h)}if(!a&&k3[e.getMode()][c]>=0){var p=o.shiftAndAppend(c,u);r.push(p)}}}if(e.getBinaryShiftByteCount()>0||Ym[e.getMode()][i]===0){var g=e.addBinaryShiftChar(t);r.push(g)}},n.updateStateListForPair=function(e,t,r){var i,a,o=[];try{for(var c=Md(e),u=c.next();!u.done;u=c.next()){var h=u.value;this.updateStateForPair(h,t,r,o)}}catch(p){i={error:p}}finally{try{u&&!u.done&&(a=c.return)&&a.call(c)}finally{if(i)throw i.error}}return this.simplifyStates(o)},n.updateStateForPair=function(e,t,r,i){var a=e.endBinaryShift(t);if(i.push(a.latchAndAppend(ua,r)),e.getMode()!==ua&&i.push(a.shiftAndAppend(ua,r)),r===3||r===4){var o=a.latchAndAppend(li,16-r).latchAndAppend(li,1);i.push(o)}if(e.getBinaryShiftByteCount()>0){var c=e.addBinaryShiftChar(t).addBinaryShiftChar(t+1);i.push(c)}},n.simplifyStates=function(e){var t,r,i,a,o=[];try{for(var c=Md(e),u=c.next();!u.done;u=c.next()){var h=u.value,p=!0,g=function(D){if(D.isBetterThanOrEqualTo(h))return p=!1,"break";h.isBetterThanOrEqualTo(D)&&(o=o.filter(function(T){return T!==D}))};try{for(var _=(i=void 0,Md(o)),E=_.next();!E.done;E=_.next()){var w=E.value,S=g(w);if(S==="break")break}}catch(D){i={error:D}}finally{try{E&&!E.done&&(a=_.return)&&a.call(_)}finally{if(i)throw i.error}}p&&o.push(h)}}catch(D){t={error:D}}finally{try{u&&!u.done&&(r=c.return)&&r.call(c)}finally{if(t)throw t.error}}return o},n})(),eB=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};(function(){function n(){}return n.encodeBytes=function(e){return n.encode(e,n.DEFAULT_EC_PERCENT,n.DEFAULT_AZTEC_LAYERS)},n.encode=function(e,t,r){var i=new Jj(e).encode(),a=Je.truncDivision(i.getSize()*t,100)+11,o=i.getSize()+a,c,u,h,p,g;if(r!==n.DEFAULT_AZTEC_LAYERS){if(c=r<0,u=Math.abs(r),u>(c?n.MAX_NB_BITS_COMPACT:n.MAX_NB_BITS))throw new Pe(ut.format("Illegal value %s for layers",r));h=n.totalBitsInLayer(u,c),p=n.WORD_SIZE[u];var _=h-h%p;if(g=n.stuffBits(i,p),g.getSize()+a>_)throw new Pe("Data to large for user specified layer");if(c&&g.getSize()>p*64)throw new Pe("Data to large for user specified layer")}else{p=0,g=null;for(var E=0;;E++){if(E>n.MAX_NB_BITS)throw new Pe("Data too large for an Aztec code");if(c=E<=3,u=c?E+1:E,h=n.totalBitsInLayer(u,c),!(o>h)){(g==null||p!==n.WORD_SIZE[u])&&(p=n.WORD_SIZE[u],g=n.stuffBits(i,p));var _=h-h%p;if(!(c&&g.getSize()>p*64)&&g.getSize()+a<=_)break}}}var w=n.generateCheckWords(g,h,p),S=g.getSize()/p,D=n.generateModeMessage(c,u,S),T=(c?11:14)+u*4,O=new Int32Array(T),j;if(c){j=T;for(var E=0;E<O.length;E++)O[E]=E}else{j=T+1+2*Je.truncDivision(Je.truncDivision(T,2)-1,15);for(var z=Je.truncDivision(T,2),H=Je.truncDivision(j,2),E=0;E<z;E++){var q=E+Je.truncDivision(E,15);O[z-E-1]=H-q-1,O[z+E]=H+q+1}}for(var N=new ya(j),E=0,b=0;E<u;E++){for(var I=(u-E)*4+(c?9:12),k=0;k<I;k++)for(var M=k*2,V=0;V<2;V++)w.get(b+M+V)&&N.set(O[E*2+V],O[E*2+k]),w.get(b+I*2+M+V)&&N.set(O[E*2+k],O[T-1-E*2-V]),w.get(b+I*4+M+V)&&N.set(O[T-1-E*2-V],O[T-1-E*2-k]),w.get(b+I*6+M+V)&&N.set(O[T-1-E*2-k],O[E*2+V]);b+=I*8}if(n.drawModeMessage(N,c,j,D),c)n.drawBullsEye(N,Je.truncDivision(j,2),5);else{n.drawBullsEye(N,Je.truncDivision(j,2),7);for(var E=0,k=0;E<Je.truncDivision(T,2)-1;E+=15,k+=16)for(var V=Je.truncDivision(j,2)&1;V<j;V+=2)N.set(Je.truncDivision(j,2)-k,V),N.set(Je.truncDivision(j,2)+k,V),N.set(V,Je.truncDivision(j,2)-k),N.set(V,Je.truncDivision(j,2)+k)}var L=new Fj;return L.setCompact(c),L.setSize(j),L.setLayers(u),L.setCodeWords(S),L.setMatrix(N),L},n.drawBullsEye=function(e,t,r){for(var i=0;i<r;i+=2)for(var a=t-i;a<=t+i;a++)e.set(a,t-i),e.set(a,t+i),e.set(t-i,a),e.set(t+i,a);e.set(t-r,t-r),e.set(t-r+1,t-r),e.set(t-r,t-r+1),e.set(t+r,t-r),e.set(t+r,t-r+1),e.set(t+r,t+r-1)},n.generateModeMessage=function(e,t,r){var i=new qn;return e?(i.appendBits(t-1,2),i.appendBits(r-1,6),i=n.generateCheckWords(i,28,4)):(i.appendBits(t-1,5),i.appendBits(r-1,11),i=n.generateCheckWords(i,40,4)),i},n.drawModeMessage=function(e,t,r,i){var a=Je.truncDivision(r,2);if(t)for(var o=0;o<7;o++){var c=a-3+o;i.get(o)&&e.set(c,a-5),i.get(o+7)&&e.set(a+5,c),i.get(20-o)&&e.set(c,a+5),i.get(27-o)&&e.set(a-5,c)}else for(var o=0;o<10;o++){var c=a-5+o+Je.truncDivision(o,5);i.get(o)&&e.set(c,a-7),i.get(o+10)&&e.set(a+7,c),i.get(29-o)&&e.set(c,a+7),i.get(39-o)&&e.set(a-7,c)}},n.generateCheckWords=function(e,t,r){var i,a,o=e.getSize()/r,c=new D3(n.getGF(r)),u=Je.truncDivision(t,r),h=n.bitsToWords(e,r,u);c.encode(h,u-o);var p=t%r,g=new qn;g.appendBits(0,p);try{for(var _=eB(Array.from(h)),E=_.next();!E.done;E=_.next()){var w=E.value;g.appendBits(w,r)}}catch(S){i={error:S}}finally{try{E&&!E.done&&(a=_.return)&&a.call(_)}finally{if(i)throw i.error}}return g},n.bitsToWords=function(e,t,r){var i=new Int32Array(r),a,o;for(a=0,o=e.getSize()/t;a<o;a++){for(var c=0,u=0;u<t;u++)c|=e.get(a*t+u)?1<<t-u-1:0;i[a]=c}return i},n.getGF=function(e){switch(e){case 4:return Nr.AZTEC_PARAM;case 6:return Nr.AZTEC_DATA_6;case 8:return Nr.AZTEC_DATA_8;case 10:return Nr.AZTEC_DATA_10;case 12:return Nr.AZTEC_DATA_12;default:throw new Pe("Unsupported word size "+e)}},n.stuffBits=function(e,t){for(var r=new qn,i=e.getSize(),a=(1<<t)-2,o=0;o<i;o+=t){for(var c=0,u=0;u<t;u++)(o+u>=i||e.get(o+u))&&(c|=1<<t-1-u);(c&a)===a?(r.appendBits(c&a,t),o--):(c&a)===0?(r.appendBits(c|1,t),o--):r.appendBits(c,t)}return r},n.totalBitsInLayer=function(e,t){return((t?88:112)+16*e)*e},n.DEFAULT_EC_PERCENT=33,n.DEFAULT_AZTEC_LAYERS=0,n.MAX_NB_BITS=32,n.MAX_NB_BITS_COMPACT=4,n.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]),n})();var tB=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),nB=(function(n){tB(e,n);function e(t){var r=n.call(this,t.width,t.height)||this;return r.canvas=t,r.tempCanvasElement=null,r.buffer=e.makeBufferFromCanvasImageData(t),r}return e.makeBufferFromCanvasImageData=function(t){var r;try{r=t.getContext("2d",{willReadFrequently:!0})}catch{r=t.getContext("2d")}if(!r)throw new Error("Couldn't get canvas context.");var i=r.getImageData(0,0,t.width,t.height);return e.toGrayscaleBuffer(i.data,t.width,t.height)},e.toGrayscaleBuffer=function(t,r,i){for(var a=new Uint8ClampedArray(r*i),o=0,c=0,u=t.length;o<u;o+=4,c++){var h=void 0,p=t[o+3];if(p===0)h=255;else{var g=t[o],_=t[o+1],E=t[o+2];h=306*g+601*_+117*E+512>>10}a[c]=h}return a},e.prototype.getRow=function(t,r){if(t<0||t>=this.getHeight())throw new Pe("Requested row is outside the image: "+t);var i=this.getWidth(),a=t*i;return r===null?r=this.buffer.slice(a,a+i):(r.length<i&&(r=new Uint8ClampedArray(i)),r.set(this.buffer.slice(a,a+i))),r},e.prototype.getMatrix=function(){return this.buffer},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(t,r,i,a){return n.prototype.crop.call(this,t,r,i,a),this},e.prototype.isRotateSupported=function(){return!0},e.prototype.rotateCounterClockwise=function(){return this.rotate(-90),this},e.prototype.rotateCounterClockwise45=function(){return this.rotate(-45),this},e.prototype.invert=function(){return new pp(this)},e.prototype.getTempCanvasElement=function(){if(this.tempCanvasElement===null){var t=this.canvas.ownerDocument.createElement("canvas");t.width=this.canvas.width,t.height=this.canvas.height,this.tempCanvasElement=t}return this.tempCanvasElement},e.prototype.rotate=function(t){var r=this.getTempCanvasElement();if(!r)throw new Error("Could not create a Canvas element.");var i=t*e.DEGREE_TO_RADIANS,a=this.canvas.width,o=this.canvas.height,c=Math.ceil(Math.abs(Math.cos(i))*a+Math.abs(Math.sin(i))*o),u=Math.ceil(Math.abs(Math.sin(i))*a+Math.abs(Math.cos(i))*o);r.width=c,r.height=u;var h=r.getContext("2d");if(!h)throw new Error("Could not create a Canvas Context element.");return h.translate(c/2,u/2),h.rotate(i),h.drawImage(this.canvas,a/-2,o/-2),this.buffer=e.makeBufferFromCanvasImageData(r),this},e.DEGREE_TO_RADIANS=Math.PI/180,e})($f);function L3(){return typeof navigator<"u"}function rB(){return L3()&&!!navigator.mediaDevices}function iB(){return!!(rB()&&navigator.mediaDevices.enumerateDevices)}var hc=function(){return hc=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},hc.apply(this,arguments)},Zt=function(n,e,t,r){function i(a){return a instanceof t?a:new t(function(o){o(a)})}return new(t||(t=Promise))(function(a,o){function c(p){try{h(r.next(p))}catch(g){o(g)}}function u(p){try{h(r.throw(p))}catch(g){o(g)}}function h(p){p.done?a(p.value):i(p.value).then(c,u)}h((r=r.apply(n,e||[])).next())})},Jt=function(n,e){var t={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,i,a,o;return o={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function c(h){return function(p){return u([h,p])}}function u(h){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,i&&(a=h[0]&2?i.return:h[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,h[1])).done)return a;switch(i=0,a&&(h=[h[0]&2,a.value]),h[0]){case 0:case 1:a=h;break;case 4:return t.label++,{value:h[1],done:!1};case 5:t.label++,i=h[1],h=[0];continue;case 7:h=t.ops.pop(),t.trys.pop();continue;default:if(a=t.trys,!(a=a.length>0&&a[a.length-1])&&(h[0]===6||h[0]===2)){t=0;continue}if(h[0]===3&&(!a||h[1]>a[0]&&h[1]<a[3])){t.label=h[1];break}if(h[0]===6&&t.label<a[1]){t.label=a[1],a=h;break}if(a&&t.label<a[2]){t.label=a[2],t.ops.push(h);break}a[2]&&t.ops.pop(),t.trys.pop();continue}h=e.call(n,t)}catch(p){h=[6,p],i=0}finally{r=a=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}},Wm=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},aB={delayBetweenScanAttempts:500,delayBetweenScanSuccess:500,tryPlayVideoTimeout:5e3},Hc=(function(){function n(e,t,r){t===void 0&&(t=new Map),r===void 0&&(r={}),this.reader=e,this.hints=t,this.options=hc(hc({},aB),r)}return Object.defineProperty(n.prototype,"possibleFormats",{set:function(e){this.hints.set(Vt.POSSIBLE_FORMATS,e)},enumerable:!1,configurable:!0}),n.addVideoSource=function(e,t){try{e.srcObject=t}catch{console.error("got interrupted by new loading request")}},n.mediaStreamSetTorch=function(e,t){return Zt(this,void 0,void 0,function(){return Jt(this,function(r){switch(r.label){case 0:return[4,e.applyConstraints({advanced:[{fillLightMode:t?"flash":"off",torch:!!t}]})];case 1:return r.sent(),[2]}})})},n.mediaStreamIsTorchCompatible=function(e){var t,r,i=e.getVideoTracks();try{for(var a=Wm(i),o=a.next();!o.done;o=a.next()){var c=o.value;if(n.mediaStreamIsTorchCompatibleTrack(c))return!0}}catch(u){t={error:u}}finally{try{o&&!o.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}return!1},n.mediaStreamIsTorchCompatibleTrack=function(e){try{var t=e.getCapabilities();return"torch"in t}catch(r){return console.error(r),console.warn("Your browser may be not fully compatible with WebRTC and/or ImageCapture specs. Torch will not be available."),!1}},n.isVideoPlaying=function(e){return e.currentTime>0&&!e.paused&&e.readyState>2},n.getMediaElement=function(e,t){var r=document.getElementById(e);if(!r)throw new fn("element with id '".concat(e,"' not found"));if(r.nodeName.toLowerCase()!==t.toLowerCase())throw new fn("element with id '".concat(e,"' must be an ").concat(t," element"));return r},n.createVideoElement=function(e){if(e instanceof HTMLVideoElement)return e;if(typeof e=="string")return n.getMediaElement(e,"video");if(!e&&typeof document<"u"){var t=document.createElement("video");return t.width=200,t.height=200,t}throw new Error("Couldn't get videoElement from videoSource!")},n.prepareImageElement=function(e){if(e instanceof HTMLImageElement)return e;if(typeof e=="string")return n.getMediaElement(e,"img");if(typeof e>"u"){var t=document.createElement("img");return t.width=200,t.height=200,t}throw new Error("Couldn't get imageElement from imageSource!")},n.prepareVideoElement=function(e){var t=n.createVideoElement(e);return t.setAttribute("autoplay","true"),t.setAttribute("muted","true"),t.setAttribute("playsinline","true"),t},n.isImageLoaded=function(e){return!(!e.complete||e.naturalWidth===0)},n.createBinaryBitmapFromCanvas=function(e){var t=new nB(e),r=new x3(t);return new _3(r)},n.drawImageOnCanvas=function(e,t){e.drawImage(t,0,0)},n.getMediaElementDimensions=function(e){if(e instanceof HTMLVideoElement)return{height:e.videoHeight,width:e.videoWidth};if(e instanceof HTMLImageElement)return{height:e.naturalHeight||e.height,width:e.naturalWidth||e.width};throw new Error("Couldn't find the Source's dimensions!")},n.createCaptureCanvas=function(e){if(!e)throw new fn("Cannot create a capture canvas without a media element.");if(typeof document>"u")throw new Error(`The page "Document" is undefined, make sure you're running in a browser.`);var t=document.createElement("canvas"),r=n.getMediaElementDimensions(e),i=r.width,a=r.height;return t.style.width=i+"px",t.style.height=a+"px",t.width=i,t.height=a,t},n.tryPlayVideo=function(e){return Zt(this,void 0,void 0,function(){var t;return Jt(this,function(r){switch(r.label){case 0:if(e?.ended)return console.error("Trying to play video that has ended."),[2,!1];if(n.isVideoPlaying(e))return console.warn("Trying to play video that is already playing."),[2,!0];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,e.play()];case 2:return r.sent(),[2,!0];case 3:return t=r.sent(),console.warn("It was not possible to play the video.",t),[2,!1];case 4:return[2]}})})},n.createCanvasFromMediaElement=function(e){var t=n.createCaptureCanvas(e),r=t.getContext("2d");if(!r)throw new Error("Couldn't find Canvas 2D Context.");return n.drawImageOnCanvas(r,e),t},n.createBinaryBitmapFromMediaElem=function(e){var t=n.createCanvasFromMediaElement(e);return n.createBinaryBitmapFromCanvas(t)},n.destroyImageElement=function(e){e.src="",e.removeAttribute("src"),e=void 0},n.listVideoInputDevices=function(){return Zt(this,void 0,void 0,function(){var e,t,r,i,a,o,c,u,h,p,g,_;return Jt(this,function(E){switch(E.label){case 0:if(!L3())throw new Error("Can't enumerate devices, navigator is not present.");if(!iB())throw new Error("Can't enumerate devices, method not supported.");return[4,navigator.mediaDevices.enumerateDevices()];case 1:e=E.sent(),t=[];try{for(r=Wm(e),i=r.next();!i.done;i=r.next())a=i.value,o=a.kind==="video"?"videoinput":a.kind,o==="videoinput"&&(c=a.deviceId||a.id,u=a.label||"Video device ".concat(t.length+1),h=a.groupId,p={deviceId:c,label:u,kind:o,groupId:h},t.push(p))}catch(w){g={error:w}}finally{try{i&&!i.done&&(_=r.return)&&_.call(r)}finally{if(g)throw g.error}}return[2,t]}})})},n.findDeviceById=function(e){return Zt(this,void 0,void 0,function(){var t;return Jt(this,function(r){switch(r.label){case 0:return[4,n.listVideoInputDevices()];case 1:return t=r.sent(),t?[2,t.find(function(i){return i.deviceId===e})]:[2]}})})},n.cleanVideoSource=function(e){if(e){try{e.srcObject=null}catch{e.src=""}e&&e.removeAttribute("src")}},n.releaseAllStreams=function(){n.streamTracker.length!==0&&n.streamTracker.forEach(function(e){e.getTracks().forEach(function(t){return t.stop()})}),n.streamTracker=[]},n.playVideoOnLoadAsync=function(e,t){return Zt(this,void 0,void 0,function(){var r;return Jt(this,function(i){switch(i.label){case 0:return[4,n.tryPlayVideo(e)];case 1:return r=i.sent(),r?[2,!0]:[2,new Promise(function(a,o){var c=setTimeout(function(){n.isVideoPlaying(e)||(o(!1),e.removeEventListener("canplay",u))},t),u=function(){n.tryPlayVideo(e).then(function(h){clearTimeout(c),e.removeEventListener("canplay",u),a(h)})};e.addEventListener("canplay",u)})]}})})},n.attachStreamToVideo=function(e,t,r){return r===void 0&&(r=5e3),Zt(this,void 0,void 0,function(){var i;return Jt(this,function(a){switch(a.label){case 0:return i=n.prepareVideoElement(t),n.addVideoSource(i,e),[4,n.playVideoOnLoadAsync(i,r)];case 1:return a.sent(),[2,i]}})})},n._waitImageLoad=function(e){return new Promise(function(t,r){var i=1e4,a=setTimeout(function(){n.isImageLoaded(e)||(e.removeEventListener("load",o),r())},i),o=function(){clearTimeout(a),e.removeEventListener("load",o),t()};e.addEventListener("load",o)})},n.checkCallbackFnOrThrow=function(e){if(!e)throw new fn("`callbackFn` is a required parameter, you cannot capture results without it.")},n.disposeMediaStream=function(e){e.getVideoTracks().forEach(function(t){return t.stop()}),e=void 0},n.prototype.decode=function(e){var t=n.createCanvasFromMediaElement(e);return this.decodeFromCanvas(t)},n.prototype.decodeBitmap=function(e){return this.reader.decode(e,this.hints)},n.prototype.decodeFromCanvas=function(e){var t=n.createBinaryBitmapFromCanvas(e);return this.decodeBitmap(t)},n.prototype.decodeFromImageElement=function(e){return Zt(this,void 0,void 0,function(){var t;return Jt(this,function(r){switch(r.label){case 0:if(!e)throw new fn("An image element must be provided.");return t=n.prepareImageElement(e),[4,this._decodeOnLoadImage(t)];case 1:return[2,r.sent()]}})})},n.prototype.decodeFromImageUrl=function(e){return Zt(this,void 0,void 0,function(){var t;return Jt(this,function(r){switch(r.label){case 0:if(!e)throw new fn("An URL must be provided.");t=n.prepareImageElement(),t.src=e,r.label=1;case 1:return r.trys.push([1,,3,4]),[4,this.decodeFromImageElement(t)];case 2:return[2,r.sent()];case 3:return n.destroyImageElement(t),[7];case 4:return[2]}})})},n.prototype.decodeFromConstraints=function(e,t,r){return Zt(this,void 0,void 0,function(){var i,a;return Jt(this,function(o){switch(o.label){case 0:return n.checkCallbackFnOrThrow(r),[4,this.getUserMedia(e)];case 1:i=o.sent(),o.label=2;case 2:return o.trys.push([2,4,,5]),[4,this.decodeFromStream(i,t,r)];case 3:return[2,o.sent()];case 4:throw a=o.sent(),n.disposeMediaStream(i),a;case 5:return[2]}})})},n.prototype.decodeFromStream=function(e,t,r){return Zt(this,void 0,void 0,function(){var i,a,o,c,u,h,p,g,_,E=this;return Jt(this,function(w){switch(w.label){case 0:return n.checkCallbackFnOrThrow(r),i=this.options.tryPlayVideoTimeout,[4,n.attachStreamToVideo(e,t,i)];case 1:return a=w.sent(),o=function(){n.disposeMediaStream(e),n.cleanVideoSource(a)},c=this.scan(a,r,o),u=e.getVideoTracks(),h=hc(hc({},c),{stop:function(){c.stop()},streamVideoConstraintsApply:function(S,D){return Zt(this,void 0,void 0,function(){var T,O,j,z,H,q,N;return Jt(this,function(b){switch(b.label){case 0:T=D?u.filter(D):u,b.label=1;case 1:b.trys.push([1,6,7,8]),O=Wm(T),j=O.next(),b.label=2;case 2:return j.done?[3,5]:(z=j.value,[4,z.applyConstraints(S)]);case 3:b.sent(),b.label=4;case 4:return j=O.next(),[3,2];case 5:return[3,8];case 6:return H=b.sent(),q={error:H},[3,8];case 7:try{j&&!j.done&&(N=O.return)&&N.call(O)}finally{if(q)throw q.error}return[7];case 8:return[2]}})})},streamVideoConstraintsGet:function(S){return u.find(S).getConstraints()},streamVideoSettingsGet:function(S){return u.find(S).getSettings()},streamVideoCapabilitiesGet:function(S){return u.find(S).getCapabilities()}}),p=n.mediaStreamIsTorchCompatible(e),p&&(g=u?.find(function(S){return n.mediaStreamIsTorchCompatibleTrack(S)}),_=function(S){return Zt(E,void 0,void 0,function(){return Jt(this,function(D){switch(D.label){case 0:return[4,n.mediaStreamSetTorch(g,S)];case 1:return D.sent(),[2]}})})},h.switchTorch=_,h.stop=function(){return Zt(E,void 0,void 0,function(){return Jt(this,function(S){switch(S.label){case 0:return c.stop(),[4,_(!1)];case 1:return S.sent(),[2]}})})}),[2,h]}})})},n.prototype.decodeFromVideoDevice=function(e,t,r){return Zt(this,void 0,void 0,function(){var i,a;return Jt(this,function(o){switch(o.label){case 0:return n.checkCallbackFnOrThrow(r),e?i={deviceId:{exact:e}}:i={facingMode:"environment"},a={video:i},[4,this.decodeFromConstraints(a,t,r)];case 1:return[2,o.sent()]}})})},n.prototype.decodeFromVideoElement=function(e,t){return Zt(this,void 0,void 0,function(){var r,i;return Jt(this,function(a){switch(a.label){case 0:if(n.checkCallbackFnOrThrow(t),!e)throw new fn("A video element must be provided.");return r=n.prepareVideoElement(e),i=this.options.tryPlayVideoTimeout,[4,n.playVideoOnLoadAsync(r,i)];case 1:return a.sent(),[2,this.scan(r,t)]}})})},n.prototype.decodeFromVideoUrl=function(e,t){return Zt(this,void 0,void 0,function(){var r,i,a,o;return Jt(this,function(c){switch(c.label){case 0:if(n.checkCallbackFnOrThrow(t),!e)throw new fn("An URL must be provided.");return r=n.prepareVideoElement(),r.src=e,i=function(){n.cleanVideoSource(r)},a=this.options.tryPlayVideoTimeout,[4,n.playVideoOnLoadAsync(r,a)];case 1:return c.sent(),o=this.scan(r,t,i),[2,o]}})})},n.prototype.decodeOnceFromConstraints=function(e,t){return Zt(this,void 0,void 0,function(){var r;return Jt(this,function(i){switch(i.label){case 0:return[4,this.getUserMedia(e)];case 1:return r=i.sent(),[4,this.decodeOnceFromStream(r,t)];case 2:return[2,i.sent()]}})})},n.prototype.decodeOnceFromStream=function(e,t){return Zt(this,void 0,void 0,function(){var r,i,a;return Jt(this,function(o){switch(o.label){case 0:return r=!!t,[4,n.attachStreamToVideo(e,t)];case 1:i=o.sent(),o.label=2;case 2:return o.trys.push([2,,4,5]),[4,this.scanOneResult(i)];case 3:return a=o.sent(),[2,a];case 4:return r||n.cleanVideoSource(i),[7];case 5:return[2]}})})},n.prototype.decodeOnceFromVideoDevice=function(e,t){return Zt(this,void 0,void 0,function(){var r,i;return Jt(this,function(a){switch(a.label){case 0:return e?r={deviceId:{exact:e}}:r={facingMode:"environment"},i={video:r},[4,this.decodeOnceFromConstraints(i,t)];case 1:return[2,a.sent()]}})})},n.prototype.decodeOnceFromVideoElement=function(e){return Zt(this,void 0,void 0,function(){var t,r;return Jt(this,function(i){switch(i.label){case 0:if(!e)throw new fn("A video element must be provided.");return t=n.prepareVideoElement(e),r=this.options.tryPlayVideoTimeout,[4,n.playVideoOnLoadAsync(t,r)];case 1:return i.sent(),[4,this.scanOneResult(t)];case 2:return[2,i.sent()]}})})},n.prototype.decodeOnceFromVideoUrl=function(e){return Zt(this,void 0,void 0,function(){var t,r;return Jt(this,function(i){switch(i.label){case 0:if(!e)throw new fn("An URL must be provided.");t=n.prepareVideoElement(),t.src=e,r=this.decodeOnceFromVideoElement(t),i.label=1;case 1:return i.trys.push([1,,3,4]),[4,r];case 2:return[2,i.sent()];case 3:return n.cleanVideoSource(t),[7];case 4:return[2]}})})},n.prototype.scanOneResult=function(e,t,r,i){var a=this;return t===void 0&&(t=!0),r===void 0&&(r=!0),i===void 0&&(i=!0),new Promise(function(o,c){a.scan(e,function(u,h,p){if(u){o(u),p.stop();return}if(h){if(h instanceof ae&&t||h instanceof bn&&r||h instanceof ge&&i)return;p.stop(),c(h)}})})},n.prototype.scan=function(e,t,r){var i=this;n.checkCallbackFnOrThrow(t);var a=n.createCaptureCanvas(e),o;try{o=a.getContext("2d",{willReadFrequently:!0})}catch{o=a.getContext("2d")}if(!o)throw new Error("Couldn't create canvas for visual element scan.");var c=function(){o=void 0,a=void 0},u=!1,h,p=function(){u=!0,clearTimeout(h),c(),r&&r()},g={stop:p},_=function(){if(!u)try{n.drawImageOnCanvas(o,e);var E=i.decodeFromCanvas(a);t(E,void 0,g),h=setTimeout(_,i.options.delayBetweenScanSuccess)}catch(T){t(void 0,T,g);var w=T instanceof bn,S=T instanceof ge,D=T instanceof ae;if(w||S||D){h=setTimeout(_,i.options.delayBetweenScanAttempts);return}c(),r&&r(T)}};return _(),g},n.prototype._decodeOnLoadImage=function(e){return Zt(this,void 0,void 0,function(){var t;return Jt(this,function(r){switch(r.label){case 0:return t=n.isImageLoaded(e),t?[3,2]:[4,n._waitImageLoad(e)];case 1:r.sent(),r.label=2;case 2:return[2,this.decode(e)]}})})},n.prototype.getUserMedia=function(e){return Zt(this,void 0,void 0,function(){var t;return Jt(this,function(r){switch(r.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return t=r.sent(),n.streamTracker.push(t),[2,t]}})})},n.streamTracker=[],n})(),sB=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})();(function(n){sB(e,n);function e(t,r){return n.call(this,new S0,t,r)||this}return e})(Hc);var oB=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})();(function(n){oB(e,n);function e(t,r){return n.call(this,new uc(t),t,r)||this}return e})(Hc);var lB=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})();(function(n){lB(e,n);function e(t,r){return n.call(this,new T0,t,r)||this}return e})(Hc);var cB=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),uB=(function(n){cB(e,n);function e(t,r){var i=this,a=new O3;return a.setHints(t),i=n.call(this,a,t,r)||this,i.reader=a,i}return Object.defineProperty(e.prototype,"possibleFormats",{set:function(t){this.hints.set(Vt.POSSIBLE_FORMATS,t),this.reader.setHints(this.hints)},enumerable:!1,configurable:!0}),e.prototype.decodeBitmap=function(t){return this.reader.decodeWithState(t)},e.prototype.setHints=function(t){this.hints=t,this.reader.setHints(this.hints)},e})(Hc),fB=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})();(function(n){fB(e,n);function e(t,r){return n.call(this,new N0,t,r)||this}return e})(Hc);var hB=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),dB=(function(n){hB(e,n);function e(t,r){return n.call(this,new I0,t,r)||this}return e})(Hc);const vp=[{value:"open",label:"開店時"},{value:"middle",label:"中間点検"},{value:"close",label:"閉店時"}],pB=vp.reduce((n,e)=>(n[e.value]=e.label,n),{}),Ko=100,ca=50,mB="admin-cash-audit-vouchers-",gB="admin-cash-audit-voucher-usage-",vB="admin-cash-audit-janken-adjustment-",dv="admin-cash-audit:voucher-usage-updated",pv="admin-cash-audit:janken-adjustment-updated",Qd={open:0,middle:0,close:0},O0={plus:ca,minus:-ca};function Gy(n){return n==="plus"||n==="minus"}function qy(n){const e=n.getFullYear(),t=String(n.getMonth()+1).padStart(2,"0"),r=String(n.getDate()).padStart(2,"0");return`${e}-${t}-${r}`}function Kf(n){const e=Number(n);return!Number.isFinite(e)||e<=0?0:Math.floor(e)}function j3(n){return`${mB}${qy(n??new Date)}`}function D0(n){return`${gB}${qy(n??new Date)}`}function M0(n){return`${vB}${qy(n??new Date)}`}function $y(n){if(typeof window>"u")return null;try{return window.localStorage.getItem(n)}catch(e){return console.warn("ローカルストレージの読み込みに失敗しました",e),null}}function Nf(n,e){if(!(typeof window>"u"))try{e===null?window.localStorage.removeItem(n):window.localStorage.setItem(n,e)}catch(t){console.warn("ローカルストレージへの書き込みに失敗しました",t)}}function yB(n){const e=$y(j3(n));if(!e)return{...Qd};try{const t=JSON.parse(e);return vp.reduce((r,i)=>(r[i.value]=Kf(t?.[i.value]),r),{...Qd})}catch(t){return console.warn("点検プリセットを復元できませんでした",t),{...Qd}}}function rb(n,e){const t=vp.reduce((r,i)=>(r[i.value]=Kf(n?.[i.value]),r),{...Qd});Nf(j3(e),JSON.stringify(t))}function yp(n){const e=$y(D0(n));if(!e)return{};try{const r=JSON.parse(e)?.entries??{};return Object.entries(r).reduce((i,[a,o])=>{const c=Kf(o);return c>0&&(i[a]=c),i},{})}catch(t){return console.warn("金券使用履歴を復元できませんでした",t),{}}}function mv(n,e){const t=Object.entries(n).reduce((r,[i,a])=>{const o=Kf(a);return o>0&&(r[i]=o),r},{});if(Object.keys(t).length===0)Nf(D0(e),null);else{const r={entries:t};Nf(D0(e),JSON.stringify(r))}}function _p(n){const e=$y(M0(n));if(!e)return{};try{const r=JSON.parse(e)?.entries??{};return Object.entries(r).reduce((i,[a,o])=>(Gy(o)&&(i[a]=o),i),{})}catch(t){return console.warn("じゃんけん調整履歴を復元できませんでした",t),{}}}function gv(n,e){const t=Object.entries(n).reduce((r,[i,a])=>(Gy(a)&&(r[i]=a),r),{});if(Object.keys(t).length===0)Nf(M0(e),null);else{const r={entries:t};Nf(M0(e),JSON.stringify(r))}}function vv(){typeof window>"u"||window.dispatchEvent(new CustomEvent(dv))}function yv(){typeof window>"u"||window.dispatchEvent(new CustomEvent(pv))}function ib(n){const e=yp(n);return Object.values(e).reduce((t,r)=>t+r,0)}function ab(n,e){return n?yp(e)[n]??0:0}function _B(n,e,t){if(!n)return;const r=Kf(e),i=yp(t);if(r===0){n in i&&(delete i[n],mv(i,t),vv());return}i[n]!==r&&(i[n]=r,mv(i,t),vv())}function sb(n,e){if(!n)return;const t=yp(e);n in t&&(delete t[n],mv(t,e),vv())}function xB(n){return n==="plus"?O0.plus:n==="minus"?O0.minus:0}function ob(n,e){return n?_p(e)[n]??"none":"none"}function EB(n,e,t){if(!n)return;const r=_p(t);if(!Gy(e)){n in r&&(delete r[n],gv(r,t),yv());return}r[n]!==e&&(r[n]=e,gv(r,t),yv())}function lb(n,e){if(!n)return;const t=_p(e);n in t&&(delete t[n],gv(t,e),yv())}function cb(n){const e=_p(n);return Object.values(e).reduce((t,r)=>(r==="plus"?(t.totalAmount+=O0.plus,t.plusCount+=1):r==="minus"&&(t.totalAmount+=O0.minus,t.minusCount+=1),t),{totalAmount:0,plusCount:0,minusCount:0})}function wB(n){return M0(n)}function AB(n){return D0(n)}function la(n){return`¥${n.toLocaleString()}`}function ub(n){const e=la(Math.abs(n));return n>0?`+${e}`:n<0?`-${e}`:e}const fb=["drink_hojicha","drink_cocoa","drink_coffee","drink_milkcoffee"],bB=[{value:"none",label:"じゃんけんなし（±¥0）",description:"定価で会計"},{value:"plus",label:`スタッフ勝ち（+${la(ca)}）`,description:"50円を追加で会計"},{value:"minus",label:`お客様勝ち（-${la(ca)}）`,description:"50円を割引して会計"}],SB={未払い:"未払いに戻しました",支払い済み:"支払い済みに更新",キャンセル:"注文をキャンセルしました"},CB={未払い:"warning",支払い済み:"success",キャンセル:"neutral"};function TB(){const n=P.useMemo(()=>{const le=new Date;le.setHours(0,0,0,0);const Ee=new Date(le);return Ee.setDate(Ee.getDate()+1),{start:le,end:Ee}},[]),{orders:e,loading:t,error:r}=Uc(n),i=P.useMemo(()=>e.map(dp),[e]),[a,o]=P.useState(""),[c,u]=P.useState(null),[h,p]=P.useState(!1),[g,_]=P.useState(!1),[E,w]=P.useState(null),[S,D]=P.useState(null),[T,O]=P.useState({}),[j,z]=P.useState(null),[H,q]=P.useState(null),[N,b]=P.useState(0),[I,k]=P.useState("none"),M=P.useRef(null),V=P.useRef(null),L=P.useRef({}),ie=P.useMemo(()=>i.filter(le=>le.payment==="未払い").sort((le,Ee)=>{const Ke=le.createdAtDate?.getTime()??0,Wt=Ee.createdAtDate?.getTime()??0;return Ke-Wt}),[i]),we=P.useMemo(()=>{if(!a.trim())return ie;const le=a.trim().toLowerCase();return ie.filter(Ee=>`${Ee.ticket} ${Ee.id} ${Ee.callNumber} ${Ee.items} ${Ci(Ee.id)}`.toLowerCase().includes(le))},[a,ie]),F=P.useMemo(()=>we.find(le=>le.id===c)??we[0]??null,[we,c]),se=P.useMemo(()=>c?[...T[c]??[]].reverse():[],[T,c]),he=P.useMemo(()=>F?If(F):[],[F]),Ie=P.useMemo(()=>F?Ci(F.id):"----",[F]);P.useEffect(()=>{!F&&we.length>0&&u(we[0].id)},[we,F]),P.useEffect(()=>{if(!F)return;const le=L.current[F.id];le&&le.scrollIntoView({block:"nearest",behavior:"smooth"})},[F]);const De=P.useMemo(()=>F?Math.floor(F.total/Ko):0,[F]);P.useEffect(()=>{if(!F){b(0);return}const le=ab(F.id),Ee=Math.min(Math.max(0,le),De);b(Ee)},[F,De]),P.useEffect(()=>{if(!F){k("none");return}const le=F.raw.items??{};if(!fb.some(Wt=>(le[Wt]??0)>0)){k("none");return}const Ke=ob(F.id);k(Ke)},[F]);const X=P.useMemo(()=>N*Ko,[N]),te=P.useMemo(()=>{if(!F)return!1;const le=F.raw.items??{};return fb.some(Ee=>(le[Ee]??0)>0)},[F]),pe=P.useMemo(()=>te?xB(I):0,[I,te]),ye=P.useMemo(()=>{if(!F)return 0;const le=F.total,Ee=te?le+pe:le;return Ee<0?0:Ee},[F,te,pe]),Te=P.useMemo(()=>Math.max(ye-X,0),[ye,X]),Ne=te?"調整後合計":"合計",xe=F?.payment!=="未払い",Qe=P.useCallback(le=>{b(Ee=>{const Ke=Ee+le;return Math.min(Math.max(0,Ke),De)})},[De]),Ze=P.useCallback(le=>{const Ee=le.currentTarget.value;k(Ee)},[]),sn=P.useMemo(()=>i.filter(le=>le.payment==="支払い済み").sort((le,Ee)=>{const Ke=le.createdAtDate?.getTime()??0;return(Ee.createdAtDate?.getTime()??0)-Ke}).slice(0,6),[i]),me=P.useMemo(()=>({waiting:ie.length,totalDue:ie.reduce((le,Ee)=>le+Ee.total,0),settledToday:sn.length}),[ie,sn]),Fe=P.useCallback(le=>le?(u(le.id),o(""),!0):!1,[o,u]),He=P.useCallback((le,Ee)=>{O(Ke=>{const Wt=[...Ke[le]??[],{status:Ee,time:new Date().toISOString()}];return{...Ke,[le]:Wt}})},[]),Ue=P.useCallback(async(le,Ee)=>{z(le.id),q(null);try{await Ga(le.id,le.ticket,{payment:Ee,progress:le.progress}),He(le.id,Ee)}catch(Ke){throw console.error("支払いステータスを更新できませんでした",Ke),q("支払いステータスの更新に失敗しました。通信環境をご確認ください。"),Ke}finally{z(null)}},[He]),Gt=P.useCallback(async le=>{try{await Ue(le,"支払い済み");const Ee=F?.id===le.id?N:ab(le.id),Ke=Math.max(0,Math.floor(le.total/Ko)),Wt=Math.min(Math.max(0,Ee),Ke);_B(le.id,Wt);const dr=F?.id===le.id?te?I:"none":ob(le.id);EB(le.id,dr),c===le.id&&(w("支払い済みにしました。"),k("none"),u(null))}catch{}},[I,Ue,c,F?.id,te,N]),gt=P.useCallback(async le=>{const Ee=`呼出番号 ${le.callNumber}`;if(window.confirm(`${Ee} をキャンセルしますか？
キャンセルすると未払い一覧から除外されます。（あとで未払いに戻せます）`))try{await Ue(le,"キャンセル"),sb(le.id),lb(le.id),c===le.id&&(b(0),w("注文をキャンセルしました。"),k("none"),u(null))}catch{}},[Ue,c]),kn=P.useCallback(async le=>{try{await Ue(le,"未払い"),sb(le.id),lb(le.id),c===le.id&&(b(0),k("none")),u(le.id),w("支払いステータスを未払いに戻しました。")}catch{}},[Ue,c]),lt=P.useCallback(()=>{if(V.current?.stop(),V.current=null,M.current){const le=M.current.srcObject;le instanceof MediaStream&&le.getTracks().forEach(Ee=>Ee.stop()),M.current.srcObject=null}_(!1)},[V,_,M]);P.useEffect(()=>()=>lt(),[lt]);const Ge=P.useCallback(le=>{const Ee=le.trim();if(!Ee)return null;const Ke=Ee.toLowerCase(),Wt=Ke.match(/t[-_ ]?(\w{3,})/),dr=Ke.match(/#(\d{3,})/),Xn=Ke.match(/(?:no\.?|call|呼出|#)?\s*(\d{1,4})$/),di=i.find(Nt=>Ci(Nt.id).toLowerCase()===Ke);if(di)return di;const qe=Wt?`T-${Wt[1]}`:null,jt=dr?`#${dr[1]}`:null,Kn=Xn?Number.parseInt(Xn[1],10):null;if(qe){const Nt=i.find(Qt=>Qt.ticket.toLowerCase()===qe.toLowerCase());if(Nt)return Nt}if(jt){const Nt=i.find(Qt=>Qt.id.toLowerCase()===jt.toLowerCase());if(Nt)return Nt}if(Kn){const Nt=i.find(Qt=>Qt.callNumber===Kn);if(Nt)return Nt}return i.find(Nt=>Nt.ticket.toLowerCase()===Ke)??i.find(Nt=>Nt.id.toLowerCase()===Ke)??i.find(Nt=>Nt.callNumber.toString()===Ke)??null},[i]),Et=P.useCallback(le=>{const Ee=Ge(le);Ee?(Fe(Ee),w(`進捗確認コード ${Ee.ticket} を読み取り、呼出番号 ${Ee.callNumber}（確認コード ${Ci(Ee.id)}）を選択しました。`),D(null),p(!1)):(w(`QR内の「${le}」に対応する注文は見つかりませんでした。`),D("別のコードを読み取るか手入力を試してください。"))},[Ge,Fe]);P.useEffect(()=>{if(!h){lt();return}let le=!1;return(async()=>{if(M.current){_(!0),D(null),w("カメラを準備しています…");try{const Wt=await new dB(void 0,{delayBetweenScanAttempts:200}).decodeFromVideoDevice(void 0,M.current,(dr,Xn,di)=>{if(le){di.stop();return}dr?(Et(dr.getText()),di.stop()):Xn&&!(Xn instanceof ae)&&D(Xn.message)});if(le){Wt.stop();return}V.current=Wt,w("QRコードにカメラを向けてください。")}catch(Ke){if(le)return;console.error(Ke),D(Ke instanceof Error?Ke.message:"カメラを開始できませんでした。"),p(!1)}}})(),()=>{le=!0,lt()}},[Et,h,lt]);const $n=P.useCallback(()=>{D(null),w(null),p(!0)},[]),es=P.useCallback(()=>{p(!1),lt()},[lt]);return t?m.jsx("p",{children:"注文データを読み込み中です…"}):m.jsxs("div",{className:"admin-payment-page",children:[h&&m.jsx("div",{className:"admin-payment-scanner-overlay",role:"dialog","aria-modal":"true",children:m.jsxs("div",{className:"admin-payment-scanner-dialog",children:[m.jsxs("header",{className:"admin-payment-scanner-header",children:[m.jsx("h2",{children:"QRコードを読み取る"}),m.jsx("button",{type:"button",className:"admin-payment-scanner-close",onClick:es,children:"閉じる"})]}),m.jsx("video",{ref:M,className:"admin-payment-scanner-video",autoPlay:!0,muted:!0,playsInline:!0}),m.jsxs("footer",{className:"admin-payment-scanner-footer",children:[m.jsx("span",{className:"admin-payment-scan-status",children:g?E??"読み取り中…":E??"停止しました。"}),m.jsxs("div",{className:"admin-payment-scanner-actions",children:[S&&m.jsx("p",{className:"admin-payment-scan-error",role:"alert",children:S}),m.jsx("button",{type:"button",className:"admin-payment-stop",onClick:es,children:"停止する"})]})]})]})}),m.jsxs("section",{className:"admin-payment-summary","aria-label":"支払い状況サマリー",children:[m.jsxs("div",{className:"admin-payment-summary-card",children:[m.jsx("p",{className:"admin-payment-summary-title",children:"未決済"}),m.jsxs("p",{className:"admin-payment-summary-value",children:[me.waiting,"件"]})]}),m.jsxs("div",{className:"admin-payment-summary-card",children:[m.jsx("p",{className:"admin-payment-summary-title",children:"未回収金額"}),m.jsx("p",{className:"admin-payment-summary-value",children:la(me.totalDue)})]}),m.jsxs("div",{className:"admin-payment-summary-card",children:[m.jsx("p",{className:"admin-payment-summary-title",children:"本日決済"}),m.jsxs("p",{className:"admin-payment-summary-value",children:[me.settledToday,"件"]})]})]}),r&&m.jsx("p",{className:"admin-error",role:"alert",children:"注文データの取得に失敗しました。ページを再読み込みしてください。"}),H&&m.jsx("p",{className:"admin-error",role:"alert",children:H}),m.jsxs("div",{className:"admin-payment-shell",children:[m.jsxs("aside",{className:"admin-payment-sidebar","aria-label":"呼出番号一覧",children:[m.jsxs("div",{className:"admin-payment-sidebar-header",children:[m.jsx("h2",{children:"呼出番号一覧"}),m.jsxs("div",{className:"field",children:[m.jsx("label",{htmlFor:"payment-search",children:"検索"}),m.jsx("input",{id:"payment-search",type:"search",placeholder:"呼出番号・確認コード（注文番号末尾）・注文番号",value:a,onChange:le=>o(le.target.value)})]}),m.jsx("button",{type:"button",className:"admin-payment-qr-button",onClick:$n,children:"QRコードを読み取る"})]}),E&&!h&&m.jsx("p",{className:"admin-payment-scan-message",children:E}),S&&!h&&m.jsx("p",{className:"admin-payment-scan-error",role:"alert",children:S}),m.jsxs("div",{className:"admin-payment-list",children:[we.map(le=>m.jsx("button",{type:"button",className:`admin-payment-list-item${F?.id===le.id?" active":""}`,onClick:()=>u(le.id),ref:Ee=>{L.current[le.id]=Ee},"aria-pressed":F?.id===le.id,children:m.jsx("p",{className:"admin-payment-ticket","aria-label":`呼出番号 ${le.callNumber}`,children:le.callNumber})},le.id)),we.length===0&&m.jsx("p",{className:"admin-payment-empty",children:"未払いの注文はありません。"})]})]}),m.jsxs("section",{className:"admin-payment-main","aria-live":"polite",children:[F?m.jsxs("article",{className:"admin-payment-detail-card",children:[m.jsxs("div",{className:"admin-payment-detail-header",children:[m.jsxs("div",{className:"admin-payment-identifiers",children:[m.jsx("p",{className:"admin-payment-ticket large","aria-label":`呼出番号 ${F.callNumber}`,children:F.callNumber}),m.jsxs("p",{className:"admin-payment-order",children:["確認コード ",Ie]}),m.jsxs("p",{className:"admin-payment-order subtle",children:["注文番号 ",F.id]}),m.jsxs("p",{className:"admin-payment-order subtle",children:["進捗コード ",F.ticket]})]}),m.jsxs("div",{className:"admin-payment-total-box",children:[m.jsxs("section",{className:"admin-payment-breakdown-panel","aria-label":"支払い内訳",children:[m.jsxs("div",{className:"admin-payment-breakdown-row prominent",children:[m.jsx("p",{className:"admin-payment-breakdown-label",children:"現金"}),m.jsx("p",{className:"admin-payment-cash-due","aria-live":"polite",children:la(Te)})]}),m.jsxs("div",{className:"admin-payment-breakdown-row",children:[m.jsx("p",{className:"admin-payment-breakdown-label",children:"金券"}),m.jsxs("div",{className:"admin-payment-voucher-control","aria-label":"金券の枚数",children:[m.jsx("button",{type:"button",className:"admin-payment-adjust",onClick:()=>Qe(-1),disabled:N===0,"aria-label":"金券を1枚減らす",children:"-"}),m.jsxs("span",{className:"admin-payment-voucher-count","aria-live":"polite",children:[N," 枚（",la(X),"）"]}),m.jsx("button",{type:"button",className:"admin-payment-adjust",onClick:()=>Qe(1),disabled:N>=De,"aria-label":"金券を1枚増やす",children:"+"})]})]}),te&&m.jsxs("div",{className:"admin-payment-breakdown-row",children:[m.jsx("p",{className:"admin-payment-breakdown-label",children:"じゃんけん"}),m.jsx("p",{className:`admin-payment-janken-value${pe>0?" is-plus":pe<0?" is-minus":""}`,children:ub(pe)})]}),m.jsx("hr",{className:"admin-payment-breakdown-divider"}),m.jsxs("p",{className:"admin-payment-breakdown-total","aria-live":"polite",children:[Ne," ",la(ye)]}),te&&m.jsxs("p",{className:"admin-payment-breakdown-note",children:["通常合計 ",la(F.total)]})]}),te&&m.jsxs("section",{className:"admin-payment-janken-panel","aria-label":"ドリンクじゃんけん調整",children:[m.jsx("p",{className:"admin-payment-janken-title",children:"ドリンクじゃんけん"}),m.jsxs("fieldset",{className:"admin-payment-janken-fieldset","aria-disabled":xe,children:[m.jsx("legend",{className:"sr-only",children:"じゃんけん結果を選択"}),m.jsx("div",{className:"admin-payment-janken-options",children:bB.map(le=>m.jsxs("label",{className:`admin-payment-janken-option${I===le.value?" is-active":""}`,children:[m.jsx("input",{type:"radio",name:"admin-payment-janken",value:le.value,checked:I===le.value,onChange:Ze,disabled:xe}),m.jsx("span",{className:"admin-payment-janken-label",children:le.label}),m.jsx("span",{className:"admin-payment-janken-description",children:le.description})]},le.value))})]}),m.jsxs("p",{className:"admin-payment-janken-summary","aria-live":"polite",children:["調整額"," ",m.jsx("span",{className:`admin-payment-janken-value${pe>0?" is-plus":pe<0?" is-minus":""}`,children:ub(pe)})]})]}),m.jsxs("div",{className:"admin-payment-voucher-summary","aria-live":"polite",children:[m.jsx("p",{className:"admin-payment-voucher-summary-label",children:"金券枚数"}),m.jsxs("p",{className:"admin-payment-voucher-summary-value",children:[N," 枚",m.jsxs("span",{className:"admin-payment-voucher-summary-amount",children:["（",la(X),"）"]})]})]}),m.jsxs("div",{className:"admin-payment-actions",children:[F.payment==="未払い"&&m.jsxs(m.Fragment,{children:[m.jsx("button",{type:"button",className:"admin-payment-action",onClick:()=>Gt(F),disabled:j===F.id,children:"支払い済みにする"}),m.jsx("button",{type:"button",className:"admin-payment-inline-button",onClick:()=>gt(F),disabled:j===F.id,children:"キャンセルにする"})]}),(F.payment==="支払い済み"||F.payment==="キャンセル")&&m.jsx("button",{type:"button",className:"admin-payment-action admin-payment-action--ghost",onClick:()=>kn(F),disabled:j===F.id,children:"未払いに戻す"})]})]})]}),m.jsxs("div",{className:"admin-payment-detail-body",children:[m.jsxs("section",{className:"admin-payment-detail-items",children:[m.jsx("h3",{children:"注文内容"}),he.length>0?m.jsx(nv,{entries:he,totalAriaLabel:"商品点数",variant:"compact",className:"admin-payment-items-inline"}):m.jsx("p",{className:"admin-payment-detail-placeholder",children:"商品情報を取得できませんでした。"})]}),m.jsxs("section",{className:"admin-payment-detail-meta",children:[m.jsxs("dl",{children:[m.jsxs("div",{children:[m.jsx("dt",{children:"ステータス"}),m.jsx("dd",{children:m.jsx("span",{className:`admin-payment-chip ${CB[F.payment]}`,children:F.payment})})]}),m.jsxs("div",{children:[m.jsx("dt",{children:"注文受付"}),m.jsx("dd",{children:F.createdAt})]}),m.jsxs("div",{children:[m.jsx("dt",{children:"確認コード"}),m.jsx("dd",{children:Ie})]}),m.jsxs("div",{children:[m.jsx("dt",{children:"進捗コード"}),m.jsx("dd",{children:F.ticket})]})]}),m.jsx("p",{className:"admin-payment-hint",children:"レジで内容と金額を確認してから決済操作を行ってください。"})]})]})]}):m.jsx("div",{className:"admin-payment-detail-placeholder",children:m.jsx("p",{className:"admin-payment-empty",children:"左の一覧から注文を選択すると詳細が表示されます。"})}),m.jsxs("section",{className:"admin-payment-history","aria-label":"ステータス履歴",children:[m.jsx("header",{children:m.jsx("h3",{children:"ステータス履歴"})}),F?se.length>0?m.jsx("ul",{children:se.map((le,Ee)=>m.jsxs("li",{children:[m.jsx("span",{children:new Date(le.time).toLocaleString()}),m.jsx("span",{children:SB[le.status]})]},`${le.time}-${Ee}`))}):m.jsx("p",{className:"admin-payment-history-empty",children:"操作履歴はまだありません。"}):m.jsx("p",{className:"admin-payment-history-empty",children:"注文を選択すると履歴が表示されます。"})]}),m.jsxs("section",{className:"admin-payment-recent","aria-label":"最近決済した注文",children:[m.jsxs("header",{className:"admin-payment-recent-header",children:[m.jsx("h3",{children:"最近の決済"}),m.jsx("p",{className:"admin-payment-recent-sub",children:"直近で決済した注文の概要です。"})]}),m.jsxs("ul",{children:[sn.map(le=>{const Ee=Ci(le.id),Ke=le.items.replace(/／/g,"・");return m.jsx("li",{children:m.jsxs("article",{className:"admin-payment-recent-card",children:[m.jsxs("div",{className:"admin-payment-recent-top",children:[m.jsxs("span",{className:"admin-payment-recent-ticket","aria-label":`呼出番号 ${le.callNumber}`,children:["呼出 ",le.callNumber]}),m.jsxs("div",{className:"admin-payment-recent-meta",children:[m.jsx("span",{className:"admin-payment-recent-total",children:la(le.total)}),m.jsx("time",{dateTime:le.createdAt,className:"admin-payment-time",children:le.createdAt})]})]}),m.jsx("p",{className:"admin-payment-recent-items","aria-label":"注文内容の要約",children:Ke}),m.jsxs("dl",{className:"admin-payment-recent-identifiers",children:[m.jsxs("div",{children:[m.jsx("dt",{children:"確認コード"}),m.jsx("dd",{children:Ee})]}),m.jsxs("div",{children:[m.jsx("dt",{children:"注文番号"}),m.jsx("dd",{children:le.id})]}),m.jsxs("div",{children:[m.jsx("dt",{children:"進捗コード"}),m.jsx("dd",{children:le.ticket})]})]}),m.jsx("div",{className:"admin-payment-recent-actions",children:m.jsx("button",{type:"button",className:"admin-payment-revert",onClick:()=>kn(le),disabled:j===le.id,children:"未払いに戻す"})})]})},le.id)}),sn.length===0&&m.jsx("li",{className:"admin-payment-recent-empty",children:"決済済みの注文はまだありません。"})]})]})]})]})]})}function IB(){const[n,e]=P.useState(!0),[t,r]=P.useState(""),[i,a]=P.useState(new Date),o=()=>{e(u=>{const h=!u;return a(new Date),h})},c=()=>{a(new Date)};return m.jsxs("div",{className:"admin-grid",style:{gap:"24px",maxWidth:720},children:[m.jsxs("section",{className:"admin-card",children:[m.jsx("h3",{children:"注文受付の制御"}),m.jsx("p",{children:"混雑状況や材料状況に応じて受付の可否を切り替えられます。トグル変更後は、訪問者側の注文画面に即時反映されます。"}),m.jsxs("div",{className:"admin-toggle",role:"switch","aria-checked":n,children:[m.jsx("input",{type:"checkbox",checked:n,onChange:o}),m.jsx("span",{children:n?"受け付け中":"一時停止中"})]}),m.jsx("p",{style:{color:"#64748b"},children:n?"お客様は引き続き注文を行えます。":"受付停止中：注文ページでは理由が表示され、新規注文は行えません。"}),m.jsx("div",{className:"admin-divider"}),m.jsxs("div",{className:"admin-list",children:[m.jsx("label",{htmlFor:"reception-memo",children:"停止理由メモ"}),m.jsx("textarea",{id:"reception-memo",rows:4,style:{borderRadius:12,border:"1px solid #cbd5f5",padding:"12px 16px",fontSize:"1rem",resize:"vertical"},placeholder:"例: 材料補充のため 30 分ほど停止します。",value:t,onChange:u=>r(u.target.value)}),m.jsx("button",{type:"button",className:"admin-primary-button",onClick:c,children:"受付状態を保存"}),i&&m.jsxs("small",{style:{color:"#64748b"},children:["最終更新: ",i.toLocaleString("ja-JP")]})]})]}),m.jsxs("section",{className:"admin-card",children:[m.jsx("h3",{children:"通知設定"}),m.jsx("p",{children:"受付が停止された際に Slack / LINE WORKS へ自動投稿することができます。Webhook URL を設定すると連携が有効になります。"}),m.jsxs("div",{className:"admin-list",children:[m.jsx("label",{htmlFor:"reception-webhook",children:"Webhook URL"}),m.jsx("input",{id:"reception-webhook",placeholder:"https://hooks.slack.com/...",style:{borderRadius:12,border:"1px solid #cbd5f5",padding:"10px 14px",fontSize:"1rem"}}),m.jsx("button",{type:"button",className:"admin-secondary-button",children:"テスト送信"})]})]})]})}const NB=()=>typeof window<"u"&&window.location?.origin?window.location.origin:"https://example.com",RB=n=>`${NB().replace(/\/$/,"")}/order/complete/${encodeURIComponent(n)}`,yc=n=>{if(!n)return"";const e=n.trim();if(!e)return"";try{const t=new URL(e),r=t.pathname.match(/\/order\/complete\/(.+)$/);if(r&&r[1])return decodeURIComponent(r[1]).replace(/[^0-9a-z]/gi,"").toUpperCase();const i=t.searchParams.get("ticket");if(i)return i.replace(/[^0-9a-z]/gi,"").toUpperCase()}catch{}return e.replace(/[^0-9a-z]/gi,"").toUpperCase()};function OB(n,e){const t=n.match(/^(\d{1,2}):(\d{2})$/);if(!t)return null;const[,r,i]=t,a=Number.parseInt(r,10),o=Number.parseInt(i,10);if(Number.isNaN(a)||Number.isNaN(o))return null;const c=new Date(e);return c.setHours(a,o,0,0),c.getTime()>e.getTime()&&c.setDate(c.getDate()-1),c}function DB(n,e){const t=OB(n,e);if(!t)return null;const r=e.getTime()-t.getTime();if(r<0)return null;const i=Math.floor(r/6e4);if(i<1)return"1分未満";const a=Math.floor(i/60),o=i%60;return a===0?`${i}分経過`:o===0?`${a}時間経過`:`${a}時間${o}分経過`}function MB(){const n=P.useMemo(()=>{const F=new Date;F.setHours(0,0,0,0);const se=new Date(F);return se.setDate(se.getDate()+1),{start:F,end:se}},[]),e=P.useCallback(F=>F.length>0&&F.every(se=>se.progress==="クローズ"),[]),{orders:t,loading:r,error:i}=Uc({...n,autoStopWhen:e}),a=P.useMemo(()=>t.filter(F=>F.payment!=="キャンセル").map(dp),[t]),[o,c]=P.useState(""),[u,h]=P.useState(!1),[p,g]=P.useState(null),[_,E]=P.useState(null),[w,S]=P.useState(()=>new Date),[D,T]=P.useState(null),[O,j]=P.useState(null),z=o.trim().toLowerCase(),H=P.useMemo(()=>z?a.filter(F=>[F.callNumber.toString(),F.ticket,F.id,F.items,F.progress,F.payment,Ci(F.id)].filter(he=>typeof he=="string").some(he=>he.toLowerCase().includes(z))):a,[a,z]),q=P.useMemo(()=>H.filter(F=>F.progress==="調理済み").sort((F,se)=>{const he=F.createdAtDate?.getTime()??0,Ie=se.createdAtDate?.getTime()??0;return he-Ie}),[H]),N=P.useMemo(()=>H.filter(F=>F.progress==="クローズ").sort((F,se)=>{const he=F.createdAtDate?.getTime()??0;return(se.createdAtDate?.getTime()??0)-he}),[H]),b=P.useMemo(()=>H.filter(F=>F.progress==="受注済み").sort((F,se)=>{const he=F.createdAtDate?.getTime()??0,Ie=se.createdAtDate?.getTime()??0;return he-Ie}),[H]),I=P.useMemo(()=>({ready:q.length,delivered:N.length,upcoming:b.length}),[q,N,b]),k=P.useCallback(async F=>{T(F.id),j(null);try{await Ga(F.id,F.ticket,{progress:"クローズ",payment:F.payment})}catch(se){console.error("注文を受け渡し済みに更新できませんでした",se),j("受け渡し状況の更新に失敗しました。通信環境をご確認ください。")}finally{T(null)}},[]),M=P.useCallback(async F=>{T(F.id),j(null);try{await Ga(F.id,F.ticket,{progress:"調理済み",payment:F.payment})}catch(se){console.error("受け渡し済みから戻せませんでした",se),j("注文を調理済みに戻せませんでした。もう一度お試しください。")}finally{T(null)}},[]);P.useEffect(()=>{const F=window.setInterval(()=>{S(new Date)},6e4);return()=>{window.clearInterval(F)}},[]),P.useEffect(()=>{if(!z){E(null);return}const F=H[0];E(F?.id??null)},[H,z]),P.useEffect(()=>{if(!_||typeof document>"u")return;const F=document.querySelector(`[data-order-id="${_}"]`);F&&F.scrollIntoView({behavior:"smooth",block:"center"})},[_,q.length,N.length,b.length]);const V=F=>{c(F.target.value),g(null)},L=()=>{c(""),E(null),g(null)},ie=P.useCallback(F=>DB(F,w),[w]),we=F=>{const se=F.trim();if(!se)return;const he=yc(se),Ie=new Set,De=te=>{const pe=te?.trim();pe&&(Ie.add(pe.toLowerCase()),Ie.add(pe.replace(/[^0-9a-z]/gi,"").toLowerCase()))};De(se),se.split(/[\s,;]+/).forEach(te=>De(te)),De(he),he.split(/[\s,;]+/).forEach(te=>De(te));const X=a.find(te=>{const pe=Ci(te.id);return[te.ticket,te.id,pe,te.callNumber.toString()].some(Te=>Ie.has(Te.toLowerCase()))});c(he||se),E(X?.id??null),g(X?null:`読み取ったコード「${se}」に一致する注文が見つかりませんでした。`),h(!1)};return r?m.jsx("p",{children:"注文データを読み込み中です…"}):m.jsxs("div",{className:"admin-serving-page",children:[m.jsxs("section",{className:"admin-serving-controls","aria-label":"注文検索",children:[m.jsxs("div",{className:"admin-serving-search",children:[m.jsx("label",{htmlFor:"serving-search-input",children:"検索"}),m.jsxs("div",{className:"admin-serving-search-input",children:[m.jsx("input",{id:"serving-search-input",type:"search",value:o,onChange:V,placeholder:"呼出番号・確認コード（注文番号末尾）・メニューなどで検索","aria-describedby":"serving-search-hint"}),o&&m.jsx("button",{type:"button",className:"admin-serving-search-clear",onClick:L,children:"クリア"})]}),m.jsx("p",{id:"serving-search-hint",className:"admin-serving-search-hint",children:"複数列にまたがる注文を横断的に絞り込めます。"})]}),m.jsxs("div",{className:"admin-serving-controls-actions",children:[m.jsx("button",{type:"button",className:"admin-serving-button ghost",onClick:()=>{g(null),h(!0)},children:"QR読み取り"}),p&&m.jsx("p",{className:"admin-serving-scanner-error",children:p})]})]}),m.jsxs("section",{className:"admin-serving-summary","aria-label":"提供状況サマリー",children:[m.jsxs("div",{className:"admin-serving-summary-card",children:[m.jsx("p",{className:"admin-serving-summary-title",children:"お渡し待ち"}),m.jsxs("p",{className:"admin-serving-summary-value",children:[I.ready,"件"]})]}),m.jsxs("div",{className:"admin-serving-summary-card",children:[m.jsx("p",{className:"admin-serving-summary-title",children:"準備中"}),m.jsxs("p",{className:"admin-serving-summary-value",children:[I.upcoming,"件"]})]}),m.jsxs("div",{className:"admin-serving-summary-card",children:[m.jsx("p",{className:"admin-serving-summary-title",children:"受け渡し済み"}),m.jsxs("p",{className:"admin-serving-summary-value",children:[I.delivered,"件"]})]})]}),i&&m.jsx("p",{className:"admin-error",role:"alert",children:"注文データの取得に失敗しました。ページを再読み込みしてください。"}),O&&m.jsx("p",{className:"admin-error",role:"alert",children:O}),o&&H.length===0&&m.jsxs("p",{className:"admin-serving-search-empty",role:"status",children:["「",o,"」に一致する注文は見つかりませんでした。"]}),m.jsxs("div",{className:"admin-serving-columns",children:[m.jsxs("section",{className:"admin-serving-section","aria-label":"お渡し待ち",children:[m.jsxs("header",{className:"admin-serving-section-header",children:[m.jsx("h2",{children:"お渡し待ち"}),m.jsx("p",{children:"調理済みの注文です。呼び出して番号札と照合してください。"})]}),m.jsxs("div",{className:"admin-serving-list",children:[q.map(F=>{const se=Ci(F.id),he=ie(F.createdAt),Ie=If(F);return m.jsxs("article",{className:`admin-serving-card${F.id===_?" highlight":""}`,"data-order-id":F.id,children:[m.jsxs("header",{className:"admin-serving-card-header-inline",children:[m.jsxs("div",{className:"admin-serving-header-primary",children:[m.jsx("span",{className:"admin-serving-ticket","aria-label":`呼出番号 ${F.callNumber}`,children:m.jsx("span",{className:"admin-payment-ticket badge",children:F.callNumber})}),m.jsxs("span",{className:"admin-serving-code",children:["確認コード ",se]}),m.jsxs("span",{className:"admin-serving-progress-code",children:["進捗コード ",F.ticket]})]}),m.jsxs("div",{className:"admin-serving-header-meta",children:[m.jsx("time",{dateTime:F.createdAt,className:"admin-serving-time",children:F.createdAt}),he&&m.jsx("span",{className:"admin-serving-elapsed",children:he})]})]}),Ie.length>0&&m.jsx(nv,{entries:Ie,totalAriaLabel:"商品点数",variant:"compact",className:"admin-serving-items-inline"}),m.jsxs("footer",{children:[m.jsxs("div",{className:"admin-serving-meta",children:[m.jsx("span",{className:`admin-serving-payment ${F.payment==="支払い済み"?"paid":"unpaid"}`,children:F.payment}),m.jsxs("span",{className:"admin-serving-total",children:["¥",F.total.toLocaleString()]})]}),m.jsx("div",{className:"admin-serving-actions",children:m.jsx("button",{type:"button",className:"admin-serving-button primary",onClick:()=>k(F),disabled:D===F.id,children:"受け渡し完了"})})]})]},F.id)}),q.length===0&&m.jsx("p",{className:"admin-serving-empty",children:"お渡し待ちの注文はありません。"})]})]}),m.jsxs("aside",{className:"admin-serving-side",children:[m.jsxs("section",{className:"admin-serving-section","aria-label":"準備中",children:[m.jsxs("header",{className:"admin-serving-section-header",children:[m.jsx("h2",{children:"準備中"}),m.jsx("p",{children:"受注済みの注文です。進捗に合わせて盛り付けラインへ共有しましょう。"})]}),m.jsxs("div",{className:"admin-serving-list compact",children:[b.map(F=>{const se=Ci(F.id),he=ie(F.createdAt),Ie=If(F);return m.jsxs("article",{className:`admin-serving-mini-card${F.id===_?" highlight":""}`,"data-order-id":F.id,children:[m.jsxs("div",{className:"admin-serving-mini-header",children:[m.jsx("span",{className:"admin-serving-ticket","aria-label":`呼出番号 ${F.callNumber}`,children:m.jsx("span",{className:"admin-payment-ticket badge small",children:F.callNumber})}),m.jsxs("span",{className:"admin-serving-code",children:["確認コード ",se]}),m.jsxs("span",{className:"admin-serving-progress-code",children:["進捗コード ",F.ticket]})]}),Ie.length>0&&m.jsx(nv,{entries:Ie,showTotal:!1,variant:"compact",className:"admin-serving-items-inline"}),m.jsxs("div",{className:"admin-serving-time-group",children:[m.jsx("time",{dateTime:F.createdAt,className:"admin-serving-time",children:F.createdAt}),he&&m.jsx("span",{className:"admin-serving-elapsed",children:he})]}),m.jsx("div",{className:"admin-serving-mini-actions",children:m.jsx("button",{type:"button",className:"admin-serving-button primary small",onClick:()=>k(F),disabled:D===F.id,children:"受け渡し完了"})})]},F.id)}),b.length===0&&m.jsx("p",{className:"admin-serving-empty",children:"受注済みの注文はありません。"})]})]}),m.jsxs("section",{className:"admin-serving-section","aria-label":"受け渡し済み",children:[m.jsxs("header",{className:"admin-serving-section-header",children:[m.jsx("h2",{children:"受け渡し済み"}),m.jsx("p",{children:"最近の受け渡し履歴です。"})]}),m.jsxs("div",{className:"admin-serving-list compact",children:[N.map(F=>{const se=Ci(F.id),he=ie(F.createdAt);return m.jsxs("article",{className:`admin-serving-mini-card${F.id===_?" highlight":""}`,"data-order-id":F.id,children:[m.jsxs("div",{children:[m.jsx("p",{className:"admin-serving-ticket","aria-label":`呼出番号 ${F.callNumber}`,children:m.jsx("span",{className:"admin-payment-ticket badge small",children:F.callNumber})}),m.jsxs("p",{className:"admin-serving-code",children:["確認コード ",se]}),m.jsxs("p",{className:"admin-serving-progress-code",children:["進捗コード ",F.ticket]})]}),m.jsxs("div",{className:"admin-serving-time-group",children:[m.jsx("time",{dateTime:F.createdAt,className:"admin-serving-time",children:F.createdAt}),he&&m.jsx("span",{className:"admin-serving-elapsed",children:he})]}),m.jsx("button",{type:"button",className:"admin-serving-button ghost",onClick:()=>M(F),disabled:D===F.id,children:"戻す"})]},F.id)}),N.length===0&&m.jsx("p",{className:"admin-serving-empty",children:"受け渡し済みの記録はありません。"})]})]})]})]}),u&&m.jsx(PB,{onDetected:we,onCancel:()=>{h(!1),g(null)},onCameraError:F=>g(F)})]})}function PB({onDetected:n,onCancel:e,onCameraError:t}){const r=P.useRef(null),[i,a]=P.useState(!0),[o,c]=P.useState(null),u=P.useRef(!1);return P.useEffect(()=>{const h=new uB;let p;return u.current=!1,(async()=>{const _=r.current??void 0;if(!_){const E="カメラビューの初期化に失敗しました。ページを再読み込みしてください。";c(E),t(E);return}try{p=await h.decodeFromVideoDevice(void 0,_,(E,w,S)=>{if(E&&!u.current&&(u.current=!0,S.stop(),n(E.getText())),w&&!(w instanceof Error&&w.name==="NotFoundException")){const D=w instanceof Error?w.message:String(w);c(D)}}),a(!1)}catch(E){const w=E instanceof Error?E.message:"カメラの初期化に失敗しました。設定を確認してください。";c(w),t(w)}})(),()=>{p?.stop()}},[n,t]),P.useEffect(()=>{o&&t(o)},[o,t]),m.jsx("div",{className:"admin-serving-scanner-overlay",role:"dialog","aria-modal":"true","aria-label":"QRコード読み取り",children:m.jsxs("div",{className:"admin-serving-scanner-dialog",children:[m.jsxs("header",{className:"admin-serving-scanner-header",children:[m.jsx("h2",{children:"QRコード読み取り"}),m.jsx("button",{type:"button",className:"admin-serving-button ghost",onClick:e,children:"閉じる"})]}),m.jsx("p",{className:"admin-serving-scanner-hint",children:"QRコードをカメラにかざして注文を特定します。"}),m.jsxs("div",{className:"admin-serving-scanner-video-wrap",children:[m.jsx("video",{ref:r,className:"admin-serving-scanner-video",autoPlay:!0,muted:!0,playsInline:!0}),i&&m.jsx("span",{className:"admin-serving-scanner-status",children:"カメラを初期化しています…"})]}),o&&m.jsx("p",{className:"admin-serving-scanner-error",children:o})]})})}const _v="app:kitchen-toast-test";function kB(n={}){if(typeof window>"u")return;const e={orderId:n.orderId??"TEST-ORDER",callNumber:n.callNumber??Math.floor(Math.random()*900+100),total:n.total??1500,itemSummary:n.itemSummary??"テスト注文: プレーンチュロス ×1 / ガーリックソルトポテト ×1",createdAt:n.createdAt??new Date().toISOString()},t=new CustomEvent(_v,{detail:e});window.dispatchEvent(t)}function LB(n){if(typeof window>"u")return()=>{};const e=t=>{n(t.detail)};return window.addEventListener(_v,e),()=>{window.removeEventListener(_v,e)}}const jB=[{id:"system",label:"システム設定に追従"},{id:"light",label:"ライトモード"},{id:"dark",label:"ダークモード"}],BB=[{id:"admin",label:"管理者",enabled:!0},{id:"kitchen",label:"キッチン",enabled:!0},{id:"staff",label:"スタッフ",enabled:!1}];function VB(){const[n,e]=P.useState("system"),[t,r]=P.useState(!0),[i,a]=P.useState(!0),{menuItems:o,baseMenuItemMap:c,overrides:u,updateMenuItem:h,resetMenuItem:p,resetAllMenuItems:g}=sl(),_=()=>Object.entries(c).reduce((M,[V,L])=>(M[V]={label:L.label,price:String(L.price)},M),{}),E=()=>Object.keys(c).reduce((M,V)=>(M[V]=null,M),{}),[w,S]=P.useState(()=>_()),[D,T]=P.useState(()=>E()),[O,j]=P.useState(null),[z,H]=P.useState({});P.useEffect(()=>{S(_()),T(E())},[o,c]);const q=(M,V,L)=>{S(ie=>({...ie,[M]:{...ie[M],[V]:L}})),T(ie=>({...ie,[M]:null})),j(null)},N=async M=>{const V=w[M];if(!V)return;const L=V.label.trim();if(!L){T(F=>({...F,[M]:{type:"error",message:"商品名を入力してください。"}}));return}if(L.length>40){T(F=>({...F,[M]:{type:"error",message:"商品名は40文字以内で入力してください。"}}));return}const ie=Number(V.price);if(!Number.isFinite(ie)||ie<0){T(F=>({...F,[M]:{type:"error",message:"価格には0以上の数値を入力してください。"}}));return}const we=Math.round(ie);try{await h(M,{label:L,price:we}),S(F=>({...F,[M]:{label:L,price:String(we)}})),T(F=>({...F,[M]:{type:"success",message:"保存しました。"}})),j(null)}catch(F){console.error("メニュー設定の保存に失敗しました",F),T(se=>({...se,[M]:{type:"error",message:"保存に失敗しました。もう一度お試しください。"}}))}},b=async(M,V)=>{j(null),T(L=>({...L,[M]:null})),H(L=>({...L,[M]:!0}));try{await h(M,{soldOut:V}),T(L=>({...L,[M]:{type:"success",message:V?"売り切れに設定しました。":"販売を再開しました。"}}))}catch(L){console.error("在庫状態の更新に失敗しました",L),T(ie=>({...ie,[M]:{type:"error",message:"状態を更新できませんでした。もう一度お試しください。"}}))}finally{H(L=>{const ie={...L};return delete ie[M],ie})}},I=async M=>{if(j(null),!!!u[M]){const L=o.find(ie=>ie.key===M);if(!L)return;S(ie=>({...ie,[M]:{label:L.label,price:String(L.price)}})),T(ie=>({...ie,[M]:{type:"success",message:"変更を取り消しました。"}}));return}try{await p(M);const L=c[M];S(ie=>({...ie,[M]:{label:L.label,price:String(L.price)}})),T(ie=>({...ie,[M]:{type:"success",message:"初期設定に戻しました。"}}))}catch(L){console.error("メニュー設定のリセットに失敗しました",L),T(ie=>({...ie,[M]:{type:"error",message:"初期設定に戻せませんでした。"}}))}},k=async()=>{if(j(null),!(Object.keys(u).length>0)){j({type:"success",message:"現在、変更はありません。"});return}try{await g(),S(_()),T(E()),j({type:"success",message:"全てのメニューを初期設定に戻しました。"})}catch(V){console.error("メニュー設定の全リセットに失敗しました",V),j({type:"error",message:"リセットに失敗しました。もう一度お試しください。"})}};return m.jsxs("div",{className:"admin-grid",style:{gap:"24px",maxWidth:720},children:[m.jsxs("section",{className:"admin-card",children:[m.jsxs("header",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:"1rem",flexWrap:"wrap"},children:[m.jsxs("div",{children:[m.jsx("h3",{style:{margin:0},children:"メニュー設定"}),m.jsx("p",{style:{margin:"4px 0 0",color:"#475569"},children:"商品名と価格を編集すると、注文画面やダッシュボードに即時反映されます。"})]}),m.jsx("button",{type:"button",className:"admin-secondary-button",onClick:()=>{k()},children:"すべて初期設定に戻す"})]}),O&&m.jsx("p",{role:"status",style:{marginTop:"12px",padding:"8px 12px",borderRadius:8,backgroundColor:O.type==="success"?"#ecfdf5":"#fee2e2",color:O.type==="success"?"#047857":"#b91c1c"},children:O.message}),m.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"16px",marginTop:"16px"},children:o.map(M=>{const V=w[M.key],L=c[M.key],ie=D[M.key],we=String(M.price),F=V?V.label!==M.label||V.price!==we:!1,se=!!u[M.key];return m.jsxs("article",{style:{border:"1px solid #e2e8f0",borderRadius:12,padding:"16px",backgroundColor:"#f8fafc",display:"flex",flexDirection:"column",gap:"12px"},children:[m.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:"0.75rem",flexWrap:"wrap"},children:[m.jsxs("div",{children:[m.jsx("h4",{style:{margin:0},children:M.label}),m.jsxs("p",{style:{margin:"4px 0 0",color:"#64748b"},children:["ID: ",M.key]})]}),se&&m.jsx("span",{style:{display:"inline-flex",alignItems:"center",gap:"0.25rem",padding:"4px 10px",borderRadius:999,backgroundColor:"#1e40af",color:"#eff6ff",fontSize:"0.85rem"},children:"カスタム適用中"})]}),m.jsxs("div",{style:{display:"grid",gap:"12px",gridTemplateColumns:"repeat(auto-fit, minmax(180px, 1fr))"},children:[m.jsxs("label",{style:{display:"flex",flexDirection:"column",gap:"6px"},children:[m.jsx("span",{style:{fontWeight:600},children:"商品名"}),m.jsx("input",{type:"text",value:V?.label??"",onChange:he=>q(M.key,"label",he.target.value),placeholder:L.label,style:{borderRadius:8,border:"1px solid #cbd5f5",padding:"10px 12px",fontSize:"1rem"}})]}),m.jsxs("label",{style:{display:"flex",flexDirection:"column",gap:"6px"},children:[m.jsx("span",{style:{fontWeight:600},children:"税込価格 (円)"}),m.jsx("input",{type:"number",min:0,inputMode:"numeric",value:V?.price??"",onChange:he=>q(M.key,"price",he.target.value),style:{borderRadius:8,border:"1px solid #cbd5f5",padding:"10px 12px",fontSize:"1rem"}})]})]}),m.jsxs("div",{className:"admin-menu-soldout-control",children:[m.jsxs("label",{className:"admin-menu-soldout-toggle",children:[m.jsx("input",{type:"checkbox",checked:M.soldOut,onChange:he=>{b(M.key,he.target.checked)},disabled:!!z[M.key]}),m.jsx("span",{children:M.soldOut?"売り切れ中":"販売中"})]}),m.jsx("p",{className:"admin-menu-soldout-helper",children:"売り切れにすると購入画面ではグレーアウト表示され、数量を選べなくなります。"})]}),m.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"8px"},children:[m.jsx("button",{type:"button",className:"admin-primary-button",onClick:()=>{N(M.key)},disabled:!F,children:"保存"}),m.jsx("button",{type:"button",className:"admin-secondary-button",onClick:()=>{I(M.key)},children:se?"初期設定に戻す":"変更を取り消す"}),m.jsxs("span",{style:{color:"#64748b",alignSelf:"center",fontSize:"0.9rem"},children:["初期設定: ",L.label,"（¥",L.price.toLocaleString(),"）"]})]}),ie&&m.jsx("p",{role:"status",style:{margin:0,padding:"8px 12px",borderRadius:8,backgroundColor:ie.type==="success"?"#ecfdf5":"#fee2e2",color:ie.type==="success"?"#047857":"#b91c1c"},children:ie.message})]},M.key)})})]}),m.jsxs("section",{className:"admin-card",children:[m.jsx("h3",{children:"表示設定"}),m.jsx("p",{children:"夜間の屋外運用でも見やすいテーマを選択できます。"}),m.jsx("div",{className:"admin-list",children:jB.map(M=>m.jsxs("label",{style:{display:"flex",gap:12,alignItems:"center"},children:[m.jsx("input",{type:"radio",name:"theme",value:M.id,checked:n===M.id,onChange:()=>e(M.id)}),M.label]},M.id))})]}),m.jsxs("section",{className:"admin-card",children:[m.jsx("h3",{children:"通知"}),m.jsxs("div",{className:"admin-list",children:[m.jsxs("label",{style:{display:"flex",alignItems:"center",gap:12},children:[m.jsx("input",{type:"checkbox",checked:t,onChange:M=>r(M.target.checked)}),"新規注文をブラウザ通知で受け取る"]}),m.jsxs("label",{style:{display:"flex",alignItems:"center",gap:12},children:[m.jsx("input",{type:"checkbox",checked:i,onChange:M=>a(M.target.checked)}),"新規注文時にサウンドを鳴らす"]}),m.jsx("button",{type:"button",className:"admin-secondary-button",onClick:()=>kB(),children:"トースト通知をテスト表示"})]})]}),m.jsxs("section",{className:"admin-card",children:[m.jsx("h3",{children:"ロールと権限"}),m.jsx("p",{children:"サイドバーに表示するロールの可視化設定です。Firestore のカスタムクレームと同期されます。"}),m.jsx("ul",{className:"admin-list",style:{margin:0},children:BB.map(M=>m.jsxs("li",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[m.jsxs("div",{children:[m.jsx("p",{style:{margin:0},children:M.label}),m.jsxs("small",{style:{color:"#64748b"},children:["ID: ",M.id]})]}),m.jsxs("label",{style:{display:"flex",alignItems:"center",gap:10},children:[m.jsx("input",{type:"checkbox",defaultChecked:M.enabled})," 表示"]})]},M.id))})]})]})}function FB(n,e){if(n.match(/^[a-z]+:\/\//i))return n;if(n.match(/^\/\//))return window.location.protocol+n;if(n.match(/^[a-z]+:/i))return n;const t=document.implementation.createHTMLDocument(),r=t.createElement("base"),i=t.createElement("a");return t.head.appendChild(r),t.body.appendChild(i),e&&(r.href=e),i.href=n,i.href}const UB=(()=>{let n=0;const e=()=>`0000${(Math.random()*36**4<<0).toString(36)}`.slice(-4);return()=>(n+=1,`u${e()}${n}`)})();function Qs(n){const e=[];for(let t=0,r=n.length;t<r;t++)e.push(n[t]);return e}let Zl=null;function B3(n={}){return Zl||(n.includeStyleProperties?(Zl=n.includeStyleProperties,Zl):(Zl=Qs(window.getComputedStyle(document.documentElement)),Zl))}function P0(n,e){const r=(n.ownerDocument.defaultView||window).getComputedStyle(n).getPropertyValue(e);return r?parseFloat(r.replace("px","")):0}function zB(n){const e=P0(n,"border-left-width"),t=P0(n,"border-right-width");return n.clientWidth+e+t}function HB(n){const e=P0(n,"border-top-width"),t=P0(n,"border-bottom-width");return n.clientHeight+e+t}function V3(n,e={}){const t=e.width||zB(n),r=e.height||HB(n);return{width:t,height:r}}function GB(){let n,e;try{e=process}catch{}const t=e&&e.env?e.env.devicePixelRatio:null;return t&&(n=parseInt(t,10),Number.isNaN(n)&&(n=1)),n||window.devicePixelRatio||1}const zr=16384;function qB(n){(n.width>zr||n.height>zr)&&(n.width>zr&&n.height>zr?n.width>n.height?(n.height*=zr/n.width,n.width=zr):(n.width*=zr/n.height,n.height=zr):n.width>zr?(n.height*=zr/n.width,n.width=zr):(n.width*=zr/n.height,n.height=zr))}function k0(n){return new Promise((e,t)=>{const r=new Image;r.onload=()=>{r.decode().then(()=>{requestAnimationFrame(()=>e(r))})},r.onerror=t,r.crossOrigin="anonymous",r.decoding="async",r.src=n})}async function $B(n){return Promise.resolve().then(()=>new XMLSerializer().serializeToString(n)).then(encodeURIComponent).then(e=>`data:image/svg+xml;charset=utf-8,${e}`)}async function XB(n,e,t){const r="http://www.w3.org/2000/svg",i=document.createElementNS(r,"svg"),a=document.createElementNS(r,"foreignObject");return i.setAttribute("width",`${e}`),i.setAttribute("height",`${t}`),i.setAttribute("viewBox",`0 0 ${e} ${t}`),a.setAttribute("width","100%"),a.setAttribute("height","100%"),a.setAttribute("x","0"),a.setAttribute("y","0"),a.setAttribute("externalResourcesRequired","true"),i.appendChild(a),a.appendChild(n),$B(i)}const Rr=(n,e)=>{if(n instanceof e)return!0;const t=Object.getPrototypeOf(n);return t===null?!1:t.constructor.name===e.name||Rr(t,e)};function KB(n){const e=n.getPropertyValue("content");return`${n.cssText} content: '${e.replace(/'|"/g,"")}';`}function YB(n,e){return B3(e).map(t=>{const r=n.getPropertyValue(t),i=n.getPropertyPriority(t);return`${t}: ${r}${i?" !important":""};`}).join(" ")}function WB(n,e,t,r){const i=`.${n}:${e}`,a=t.cssText?KB(t):YB(t,r);return document.createTextNode(`${i}{${a}}`)}function hb(n,e,t,r){const i=window.getComputedStyle(n,t),a=i.getPropertyValue("content");if(a===""||a==="none")return;const o=UB();try{e.className=`${e.className} ${o}`}catch{return}const c=document.createElement("style");c.appendChild(WB(o,t,i,r)),e.appendChild(c)}function QB(n,e,t){hb(n,e,":before",t),hb(n,e,":after",t)}const db="application/font-woff",pb="image/jpeg",ZB={woff:db,woff2:db,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:pb,jpeg:pb,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml",webp:"image/webp"};function JB(n){const e=/\.([^./]*?)$/g.exec(n);return e?e[1]:""}function Xy(n){const e=JB(n).toLowerCase();return ZB[e]||""}function eV(n){return n.split(/,/)[1]}function xv(n){return n.search(/^(data:)/)!==-1}function tV(n,e){return`data:${e};base64,${n}`}async function F3(n,e,t){const r=await fetch(n,e);if(r.status===404)throw new Error(`Resource "${r.url}" not found`);const i=await r.blob();return new Promise((a,o)=>{const c=new FileReader;c.onerror=o,c.onloadend=()=>{try{a(t({res:r,result:c.result}))}catch(u){o(u)}},c.readAsDataURL(i)})}const Qm={};function nV(n,e,t){let r=n.replace(/\?.*/,"");return t&&(r=n),/ttf|otf|eot|woff2?/i.test(r)&&(r=r.replace(/.*\//,"")),e?`[${e}]${r}`:r}async function Ky(n,e,t){const r=nV(n,e,t.includeQueryParams);if(Qm[r]!=null)return Qm[r];t.cacheBust&&(n+=(/\?/.test(n)?"&":"?")+new Date().getTime());let i;try{const a=await F3(n,t.fetchRequestInit,({res:o,result:c})=>(e||(e=o.headers.get("Content-Type")||""),eV(c)));i=tV(a,e)}catch(a){i=t.imagePlaceholder||"";let o=`Failed to fetch resource: ${n}`;a&&(o=typeof a=="string"?a:a.message),o&&console.warn(o)}return Qm[r]=i,i}async function rV(n){const e=n.toDataURL();return e==="data:,"?n.cloneNode(!1):k0(e)}async function iV(n,e){if(n.currentSrc){const a=document.createElement("canvas"),o=a.getContext("2d");a.width=n.clientWidth,a.height=n.clientHeight,o?.drawImage(n,0,0,a.width,a.height);const c=a.toDataURL();return k0(c)}const t=n.poster,r=Xy(t),i=await Ky(t,r,e);return k0(i)}async function aV(n,e){var t;try{if(!((t=n?.contentDocument)===null||t===void 0)&&t.body)return await xp(n.contentDocument.body,e,!0)}catch{}return n.cloneNode(!1)}async function sV(n,e){return Rr(n,HTMLCanvasElement)?rV(n):Rr(n,HTMLVideoElement)?iV(n,e):Rr(n,HTMLIFrameElement)?aV(n,e):n.cloneNode(U3(n))}const oV=n=>n.tagName!=null&&n.tagName.toUpperCase()==="SLOT",U3=n=>n.tagName!=null&&n.tagName.toUpperCase()==="SVG";async function lV(n,e,t){var r,i;if(U3(e))return e;let a=[];return oV(n)&&n.assignedNodes?a=Qs(n.assignedNodes()):Rr(n,HTMLIFrameElement)&&(!((r=n.contentDocument)===null||r===void 0)&&r.body)?a=Qs(n.contentDocument.body.childNodes):a=Qs(((i=n.shadowRoot)!==null&&i!==void 0?i:n).childNodes),a.length===0||Rr(n,HTMLVideoElement)||await a.reduce((o,c)=>o.then(()=>xp(c,t)).then(u=>{u&&e.appendChild(u)}),Promise.resolve()),e}function cV(n,e,t){const r=e.style;if(!r)return;const i=window.getComputedStyle(n);i.cssText?(r.cssText=i.cssText,r.transformOrigin=i.transformOrigin):B3(t).forEach(a=>{let o=i.getPropertyValue(a);a==="font-size"&&o.endsWith("px")&&(o=`${Math.floor(parseFloat(o.substring(0,o.length-2)))-.1}px`),Rr(n,HTMLIFrameElement)&&a==="display"&&o==="inline"&&(o="block"),a==="d"&&e.getAttribute("d")&&(o=`path(${e.getAttribute("d")})`),r.setProperty(a,o,i.getPropertyPriority(a))})}function uV(n,e){Rr(n,HTMLTextAreaElement)&&(e.innerHTML=n.value),Rr(n,HTMLInputElement)&&e.setAttribute("value",n.value)}function fV(n,e){if(Rr(n,HTMLSelectElement)){const t=e,r=Array.from(t.children).find(i=>n.value===i.getAttribute("value"));r&&r.setAttribute("selected","")}}function hV(n,e,t){return Rr(e,Element)&&(cV(n,e,t),QB(n,e,t),uV(n,e),fV(n,e)),e}async function dV(n,e){const t=n.querySelectorAll?n.querySelectorAll("use"):[];if(t.length===0)return n;const r={};for(let a=0;a<t.length;a++){const c=t[a].getAttribute("xlink:href");if(c){const u=n.querySelector(c),h=document.querySelector(c);!u&&h&&!r[c]&&(r[c]=await xp(h,e,!0))}}const i=Object.values(r);if(i.length){const a="http://www.w3.org/1999/xhtml",o=document.createElementNS(a,"svg");o.setAttribute("xmlns",a),o.style.position="absolute",o.style.width="0",o.style.height="0",o.style.overflow="hidden",o.style.display="none";const c=document.createElementNS(a,"defs");o.appendChild(c);for(let u=0;u<i.length;u++)c.appendChild(i[u]);n.appendChild(o)}return n}async function xp(n,e,t){return!t&&e.filter&&!e.filter(n)?null:Promise.resolve(n).then(r=>sV(r,e)).then(r=>lV(n,r,e)).then(r=>hV(n,r,e)).then(r=>dV(r,e))}const z3=/url\((['"]?)([^'"]+?)\1\)/g,pV=/url\([^)]+\)\s*format\((["']?)([^"']+)\1\)/g,mV=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;function gV(n){const e=n.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1");return new RegExp(`(url\\(['"]?)(${e})(['"]?\\))`,"g")}function vV(n){const e=[];return n.replace(z3,(t,r,i)=>(e.push(i),t)),e.filter(t=>!xv(t))}async function yV(n,e,t,r,i){try{const a=t?FB(e,t):e,o=Xy(e);let c;return i||(c=await Ky(a,o,r)),n.replace(gV(e),`$1${c}$3`)}catch{}return n}function _V(n,{preferredFontFormat:e}){return e?n.replace(mV,t=>{for(;;){const[r,,i]=pV.exec(t)||[];if(!i)return"";if(i===e)return`src: ${r};`}}):n}function H3(n){return n.search(z3)!==-1}async function G3(n,e,t){if(!H3(n))return n;const r=_V(n,t);return vV(r).reduce((a,o)=>a.then(c=>yV(c,o,e,t)),Promise.resolve(r))}async function Jl(n,e,t){var r;const i=(r=e.style)===null||r===void 0?void 0:r.getPropertyValue(n);if(i){const a=await G3(i,null,t);return e.style.setProperty(n,a,e.style.getPropertyPriority(n)),!0}return!1}async function xV(n,e){await Jl("background",n,e)||await Jl("background-image",n,e),await Jl("mask",n,e)||await Jl("-webkit-mask",n,e)||await Jl("mask-image",n,e)||await Jl("-webkit-mask-image",n,e)}async function EV(n,e){const t=Rr(n,HTMLImageElement);if(!(t&&!xv(n.src))&&!(Rr(n,SVGImageElement)&&!xv(n.href.baseVal)))return;const r=t?n.src:n.href.baseVal,i=await Ky(r,Xy(r),e);await new Promise((a,o)=>{n.onload=a,n.onerror=e.onImageErrorHandler?(...u)=>{try{a(e.onImageErrorHandler(...u))}catch(h){o(h)}}:o;const c=n;c.decode&&(c.decode=a),c.loading==="lazy"&&(c.loading="eager"),t?(n.srcset="",n.src=i):n.href.baseVal=i})}async function wV(n,e){const r=Qs(n.childNodes).map(i=>q3(i,e));await Promise.all(r).then(()=>n)}async function q3(n,e){Rr(n,Element)&&(await xV(n,e),await EV(n,e),await wV(n,e))}function AV(n,e){const{style:t}=n;e.backgroundColor&&(t.backgroundColor=e.backgroundColor),e.width&&(t.width=`${e.width}px`),e.height&&(t.height=`${e.height}px`);const r=e.style;return r!=null&&Object.keys(r).forEach(i=>{t[i]=r[i]}),n}const mb={};async function gb(n){let e=mb[n];if(e!=null)return e;const r=await(await fetch(n)).text();return e={url:n,cssText:r},mb[n]=e,e}async function vb(n,e){let t=n.cssText;const r=/url\(["']?([^"')]+)["']?\)/g,a=(t.match(/url\([^)]+\)/g)||[]).map(async o=>{let c=o.replace(r,"$1");return c.startsWith("https://")||(c=new URL(c,n.url).href),F3(c,e.fetchRequestInit,({result:u})=>(t=t.replace(o,`url(${u})`),[o,u]))});return Promise.all(a).then(()=>t)}function yb(n){if(n==null)return[];const e=[],t=/(\/\*[\s\S]*?\*\/)/gi;let r=n.replace(t,"");const i=new RegExp("((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})","gi");for(;;){const u=i.exec(r);if(u===null)break;e.push(u[0])}r=r.replace(i,"");const a=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi,o="((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})",c=new RegExp(o,"gi");for(;;){let u=a.exec(r);if(u===null){if(u=c.exec(r),u===null)break;a.lastIndex=c.lastIndex}else c.lastIndex=a.lastIndex;e.push(u[0])}return e}async function bV(n,e){const t=[],r=[];return n.forEach(i=>{if("cssRules"in i)try{Qs(i.cssRules||[]).forEach((a,o)=>{if(a.type===CSSRule.IMPORT_RULE){let c=o+1;const u=a.href,h=gb(u).then(p=>vb(p,e)).then(p=>yb(p).forEach(g=>{try{i.insertRule(g,g.startsWith("@import")?c+=1:i.cssRules.length)}catch(_){console.error("Error inserting rule from remote css",{rule:g,error:_})}})).catch(p=>{console.error("Error loading remote css",p.toString())});r.push(h)}})}catch(a){const o=n.find(c=>c.href==null)||document.styleSheets[0];i.href!=null&&r.push(gb(i.href).then(c=>vb(c,e)).then(c=>yb(c).forEach(u=>{o.insertRule(u,o.cssRules.length)})).catch(c=>{console.error("Error loading remote stylesheet",c)})),console.error("Error inlining remote css file",a)}}),Promise.all(r).then(()=>(n.forEach(i=>{if("cssRules"in i)try{Qs(i.cssRules||[]).forEach(a=>{t.push(a)})}catch(a){console.error(`Error while reading CSS rules from ${i.href}`,a)}}),t))}function SV(n){return n.filter(e=>e.type===CSSRule.FONT_FACE_RULE).filter(e=>H3(e.style.getPropertyValue("src")))}async function CV(n,e){if(n.ownerDocument==null)throw new Error("Provided element is not within a Document");const t=Qs(n.ownerDocument.styleSheets),r=await bV(t,e);return SV(r)}function $3(n){return n.trim().replace(/["']/g,"")}function TV(n){const e=new Set;function t(r){(r.style.fontFamily||getComputedStyle(r).fontFamily).split(",").forEach(a=>{e.add($3(a))}),Array.from(r.children).forEach(a=>{a instanceof HTMLElement&&t(a)})}return t(n),e}async function IV(n,e){const t=await CV(n,e),r=TV(n);return(await Promise.all(t.filter(a=>r.has($3(a.style.fontFamily))).map(a=>{const o=a.parentStyleSheet?a.parentStyleSheet.href:null;return G3(a.cssText,o,e)}))).join(`
`)}async function NV(n,e){const t=e.fontEmbedCSS!=null?e.fontEmbedCSS:e.skipFonts?null:await IV(n,e);if(t){const r=document.createElement("style"),i=document.createTextNode(t);r.appendChild(i),n.firstChild?n.insertBefore(r,n.firstChild):n.appendChild(r)}}async function RV(n,e={}){const{width:t,height:r}=V3(n,e),i=await xp(n,e,!0);return await NV(i,e),await q3(i,e),AV(i,e),await XB(i,t,r)}async function OV(n,e={}){const{width:t,height:r}=V3(n,e),i=await RV(n,e),a=await k0(i),o=document.createElement("canvas"),c=o.getContext("2d"),u=e.pixelRatio||GB(),h=e.canvasWidth||t,p=e.canvasHeight||r;return o.width=h*u,o.height=p*u,e.skipAutoScale||qB(o),o.style.width=`${h}`,o.style.height=`${p}`,e.backgroundColor&&(c.fillStyle=e.backgroundColor,c.fillRect(0,0,o.width,o.height)),c.drawImage(a,0,0,o.width,o.height),o}async function DV(n,e={}){return(await OV(n,e)).toDataURL()}const MV=[{value:1e4,label:"10,000円札",kind:"bill"},{value:5e3,label:"5,000円札",kind:"bill"},{value:2e3,label:"2,000円札",kind:"bill"},{value:1e3,label:"1,000円札",kind:"bill"}],PV=[{value:500,label:"500円玉",kind:"coin"},{value:100,label:"100円玉",kind:"coin"},{value:50,label:"50円玉",kind:"coin"},{value:10,label:"10円玉",kind:"coin"},{value:5,label:"5円玉",kind:"coin"},{value:1,label:"1円玉",kind:"coin"}],X3=[...MV,...PV],_b=["middle","close"],en=new Intl.NumberFormat("ja-JP",{style:"currency",currency:"JPY",maximumFractionDigits:0}),Xt=new Intl.NumberFormat("ja-JP",{maximumFractionDigits:0}),xb=new Intl.DateTimeFormat("ja-JP",{dateStyle:"medium",timeStyle:"short"});function ec(n){const e=en.format(Math.abs(n));return n>0?`+${e}`:n<0?`-${e}`:e}function Eb(){return X3.reduce((n,e)=>(n[e.value]=0,n),{})}function kV(){const[n]=P.useState(()=>new Date),e=P.useCallback(()=>{const me=yB(n),Fe=ib(n),He={...me},Ue={open:"manual",middle:"manual",close:"manual"};let Gt=!1;return Fe>0&&_b.forEach(gt=>{He[gt]<=0&&(He[gt]=Fe,Ue[gt]="auto",Gt=!0)}),{presets:He,source:Ue,shouldPersist:Gt,usageTotal:Fe}},[n]),t=P.useMemo(()=>e(),[e]),[r,i]=P.useState(()=>Eb()),[a,o]=P.useState(""),[c,u]=P.useState(!1),[h,p]=P.useState(null),[g,_]=P.useState(null),[E,w]=P.useState("open"),[S,D]=P.useState(()=>t.presets),[T,O]=P.useState(()=>t.source),[j,z]=P.useState(()=>t.presets.open),[H,q]=P.useState(()=>t.usageTotal),[N,b]=P.useState(()=>cb(n)),I=P.useRef(null),k=P.useRef(T),M=P.useMemo(()=>{const me=new Date(n);return me.setHours(0,0,0,0),me},[n]),V=P.useMemo(()=>{const me=new Date(M);return me.setDate(me.getDate()+1),me},[M]),L=P.useMemo(()=>({start:M,end:V}),[M,V]),{orders:ie}=Uc(L),we=P.useMemo(()=>{const me=M.getTime(),Fe=V.getTime();return ie.reduce((He,Ue)=>{const Gt=Ue.createdAt??Ue.updatedAt;if(!Gt)return He;const gt=Gt.getTime();return gt<me||gt>=Fe||(Ue.payment==="支払い済み"?(He.paidTotal+=Ue.total,He.paidCount+=1):Ue.payment==="未払い"&&(He.unpaidTotal+=Ue.total,He.unpaidCount+=1)),He},{paidTotal:0,unpaidTotal:0,paidCount:0,unpaidCount:0})},[ie,M,V]);P.useEffect(()=>{k.current=T},[T]),P.useEffect(()=>{t.shouldPersist&&(rb(t.presets,n),q(t.usageTotal))},[n,t]);const F=P.useCallback(me=>{rb(me,n)},[n]),se=P.useCallback((me,Fe,He="manual")=>{D(Ue=>{if(Ue[me]===Fe)return Ue;const Gt={...Ue,[me]:Fe};return F(Gt),Gt}),O(Ue=>Ue[me]===He?Ue:{...Ue,[me]:He})},[F]);P.useEffect(()=>{z(S[E])},[E,S]),P.useEffect(()=>{if(typeof window>"u")return;const me=()=>{const gt=ib(n);q(gt),D(kn=>{const lt=k.current;let Ge=kn,Et=!1;return _b.forEach($n=>{lt[$n]==="auto"&&kn[$n]!==gt&&(Et||(Ge={...kn},Et=!0),Ge[$n]=gt)}),Et?(F(Ge),Ge):kn})},Fe=()=>{const gt=cb(n);b(gt)},He=AB(n),Ue=wB(n),Gt=gt=>{gt.key===He?me():gt.key===Ue&&Fe()};return window.addEventListener(dv,me),window.addEventListener(pv,Fe),window.addEventListener("storage",Gt),()=>{window.removeEventListener(dv,me),window.removeEventListener(pv,Fe),window.removeEventListener("storage",Gt)}},[n,F]);const he=P.useMemo(()=>{const me=X3.map(lt=>{const Ge=r[lt.value]??0,Et=lt.value*Ge;return{...lt,count:Ge,subtotal:Et}}),Fe=me.filter(lt=>lt.kind==="bill"),He=me.filter(lt=>lt.kind==="coin"),Ue=Fe.reduce((lt,Ge)=>lt+Ge.subtotal,0),Gt=He.reduce((lt,Ge)=>lt+Ge.subtotal,0),gt=Fe.reduce((lt,Ge)=>lt+Ge.count,0),kn=He.reduce((lt,Ge)=>lt+Ge.count,0);return{billItems:Fe,coinItems:He,billTotal:Ue,coinTotal:Gt,grandTotal:Ue+Gt,totalBills:gt,totalCoins:kn,totalPieces:gt+kn}},[r]),Ie=pB[E],De=P.useMemo(()=>j*Ko,[j]),X=P.useMemo(()=>N.plusCount*ca,[N.plusCount]),te=P.useMemo(()=>-N.minusCount*ca,[N.minusCount]),pe=P.useMemo(()=>N.plusCount+N.minusCount,[N.plusCount,N.minusCount]),ye=P.useMemo(()=>ec(N.totalAmount),[N.totalAmount]),Te=P.useMemo(()=>new Date,[r,a,E,j,N]),Ne=me=>Fe=>{const He=Fe.currentTarget.valueAsNumber;i(Ue=>({...Ue,[me]:Number.isNaN(He)||He<0?0:Math.floor(He)}))},xe=me=>{const Fe=me.currentTarget.value;w(Fe),z(S[Fe]??0)},Qe=me=>{const Fe=me.currentTarget.valueAsNumber,He=Number.isNaN(Fe)||Fe<0?0:Math.floor(Fe);z(He),se(E,He,"manual")},Ze=()=>{i(Eb()),p(null);const me=e();D(me.presets),O(me.source);const Fe=me.presets[E];z(Fe),q(me.usageTotal),F(me.presets)},sn=async()=>{if(I.current){u(!0),p(null);try{const me=await DV(I.current,{cacheBust:!0,pixelRatio:2,backgroundColor:"#ffffff"}),Fe=document.createElement("a"),He=new Date().toISOString().replace(/[:.]/g,"-");Fe.download=`cash-audit-${He}.png`,Fe.href=me,Fe.click(),_(new Date)}catch(me){console.error("Failed to save cash audit as image",me),p("画像の書き出しに失敗しました。もう一度お試しください。")}finally{u(!1)}}};return m.jsxs("div",{className:"admin-grid admin-cash-audit-layout",children:[m.jsxs("div",{className:"admin-cash-audit-input-column",children:[m.jsxs("section",{className:"admin-card admin-cash-audit-config",children:[m.jsx("header",{className:"admin-card-header",children:m.jsxs("div",{children:[m.jsx("h3",{children:"点検設定"}),m.jsx("p",{children:"点検タイミングと使用済み金券を確認できます。"})]})}),m.jsxs("fieldset",{className:"admin-cash-audit-shift-group",children:[m.jsx("legend",{children:"点検タイミング"}),m.jsx("div",{className:"admin-cash-audit-shift-options",children:vp.map(me=>m.jsxs("label",{className:`admin-cash-audit-shift-option${E===me.value?" is-active":""}`,children:[m.jsx("input",{type:"radio",name:"cash-audit-shift",value:me.value,checked:E===me.value,onChange:xe}),m.jsx("span",{children:me.label})]},me.value))})]}),m.jsxs("div",{className:"admin-cash-audit-voucher-field",children:[m.jsx("label",{htmlFor:"cash-audit-voucher-count",children:"使用された金券"}),m.jsxs("div",{className:"admin-cash-audit-count-input",children:[m.jsx("input",{id:"cash-audit-voucher-count",className:"admin-input admin-input--compact",type:"number",min:0,step:1,inputMode:"numeric",pattern:"[0-9]*",value:j,onChange:Qe}),m.jsx("span",{className:"admin-cash-audit-count-suffix",children:"枚"})]}),m.jsx("p",{className:"admin-cash-audit-helper",children:"支払いフローで使用した金券枚数が記録され、中間点検と閉店時に自動入力されます。"}),m.jsxs("div",{className:"admin-cash-audit-voucher-total",children:[m.jsxs("span",{children:["金券金額（1枚あたり",Xt.format(Ko),"円）"]}),m.jsx("strong",{children:en.format(De)})]}),m.jsxs("div",{className:"admin-cash-audit-voucher-usage",children:[m.jsx("span",{children:"本日の金券使用枚数"}),m.jsxs("strong",{children:[Xt.format(H)," 枚"]}),m.jsxs("span",{className:"admin-cash-audit-voucher-usage-amount",children:["合計 ",en.format(H*Ko)]})]}),m.jsxs("div",{className:"admin-cash-audit-janken-summary","aria-live":"polite",children:[m.jsx("span",{children:"じゃんけん調整"}),m.jsx("strong",{children:ye}),m.jsxs("span",{className:"admin-cash-audit-janken-breakdown",children:[ec(ca)," ",Xt.format(N.plusCount)," 件 /",ec(-ca)," ",Xt.format(N.minusCount)," 件"]})]})]}),(E==="middle"||E==="close")&&m.jsxs("div",{className:"admin-cash-audit-shift-summary",children:[m.jsxs("div",{children:[m.jsx("span",{className:"admin-cash-audit-summary-label",children:"会計済み合計"}),m.jsx("strong",{children:en.format(we.paidTotal)}),m.jsxs("span",{className:"admin-cash-audit-summary-meta",children:[Xt.format(we.paidCount)," 件"]})]}),m.jsxs("div",{children:[m.jsx("span",{className:"admin-cash-audit-summary-label",children:"未会計合計"}),m.jsx("strong",{children:en.format(we.unpaidTotal)}),m.jsxs("span",{className:"admin-cash-audit-summary-meta",children:[Xt.format(we.unpaidCount)," 件"]})]})]})]}),m.jsxs("section",{className:"admin-card",children:[m.jsxs("header",{className:"admin-card-header",children:[m.jsxs("div",{children:[m.jsx("h3",{children:"紙幣"}),m.jsx("p",{children:"手元の紙幣枚数を入力してください。"})]}),m.jsxs("dl",{className:"admin-cash-audit-group-summary",children:[m.jsxs("div",{children:[m.jsx("dt",{children:"枚数"}),m.jsxs("dd",{children:[Xt.format(he.totalBills)," 枚"]})]}),m.jsxs("div",{children:[m.jsx("dt",{children:"小計"}),m.jsx("dd",{children:en.format(he.billTotal)})]})]})]}),m.jsxs("table",{className:"admin-table admin-cash-audit-table",children:[m.jsx("thead",{children:m.jsxs("tr",{children:[m.jsx("th",{scope:"col",children:"金種"}),m.jsx("th",{scope:"col",children:"枚数"}),m.jsx("th",{scope:"col",children:"小計"})]})}),m.jsx("tbody",{children:he.billItems.map(me=>m.jsxs("tr",{children:[m.jsx("th",{scope:"row",children:me.label}),m.jsxs("td",{children:[m.jsxs("label",{className:"sr-only",htmlFor:`denomination-${me.value}`,children:[me.label,"の枚数"]}),m.jsxs("div",{className:"admin-cash-audit-count-input",children:[m.jsx("input",{id:`denomination-${me.value}`,className:"admin-input admin-input--compact",type:"number",min:0,step:1,inputMode:"numeric",pattern:"[0-9]*",value:me.count,onChange:Ne(me.value)}),m.jsx("span",{className:"admin-cash-audit-count-suffix",children:"枚"})]})]}),m.jsx("td",{className:"admin-text-right admin-cash-audit-value",children:en.format(me.subtotal)})]},`bill-${me.value}`))}),m.jsx("tfoot",{children:m.jsxs("tr",{children:[m.jsx("th",{scope:"row",children:"紙幣小計"}),m.jsx("td",{children:m.jsxs("span",{className:"admin-cash-audit-total-chip",children:[Xt.format(he.totalBills)," 枚"]})}),m.jsx("td",{className:"admin-text-right admin-cash-audit-value",children:en.format(he.billTotal)})]})})]})]}),m.jsxs("section",{className:"admin-card",children:[m.jsxs("header",{className:"admin-card-header",children:[m.jsxs("div",{children:[m.jsx("h3",{children:"硬貨"}),m.jsx("p",{children:"硬貨の枚数も同じように入力できます。"})]}),m.jsxs("dl",{className:"admin-cash-audit-group-summary",children:[m.jsxs("div",{children:[m.jsx("dt",{children:"枚数"}),m.jsxs("dd",{children:[Xt.format(he.totalCoins)," 枚"]})]}),m.jsxs("div",{children:[m.jsx("dt",{children:"小計"}),m.jsx("dd",{children:en.format(he.coinTotal)})]})]})]}),m.jsxs("table",{className:"admin-table admin-cash-audit-table",children:[m.jsx("thead",{children:m.jsxs("tr",{children:[m.jsx("th",{scope:"col",children:"金種"}),m.jsx("th",{scope:"col",children:"枚数"}),m.jsx("th",{scope:"col",children:"小計"})]})}),m.jsx("tbody",{children:he.coinItems.map(me=>m.jsxs("tr",{children:[m.jsx("th",{scope:"row",children:me.label}),m.jsxs("td",{children:[m.jsxs("label",{className:"sr-only",htmlFor:`denomination-${me.value}`,children:[me.label,"の枚数"]}),m.jsxs("div",{className:"admin-cash-audit-count-input",children:[m.jsx("input",{id:`denomination-${me.value}`,className:"admin-input admin-input--compact",type:"number",min:0,step:1,inputMode:"numeric",pattern:"[0-9]*",value:me.count,onChange:Ne(me.value)}),m.jsx("span",{className:"admin-cash-audit-count-suffix",children:"枚"})]})]}),m.jsx("td",{className:"admin-text-right admin-cash-audit-value",children:en.format(me.subtotal)})]},`coin-${me.value}`))}),m.jsx("tfoot",{children:m.jsxs("tr",{children:[m.jsx("th",{scope:"row",children:"硬貨小計"}),m.jsx("td",{children:m.jsxs("span",{className:"admin-cash-audit-total-chip",children:[Xt.format(he.totalCoins)," 枚"]})}),m.jsx("td",{className:"admin-text-right admin-cash-audit-value",children:en.format(he.coinTotal)})]})})]})]}),m.jsxs("section",{className:"admin-card admin-cash-audit-actions",children:[m.jsx("header",{className:"admin-card-header",children:m.jsxs("div",{children:[m.jsx("h3",{children:"記録メモ"}),m.jsx("p",{children:"確定時刻や担当者、釣銭調整のメモを残せます。"})]})}),m.jsxs("div",{className:"admin-cash-audit-note-field",children:[m.jsx("label",{htmlFor:"cash-audit-note",children:"メモ"}),m.jsx("textarea",{id:"cash-audit-note",className:"admin-textarea",value:a,maxLength:400,placeholder:"例: 15:30 時点。担当: 佐藤。釣銭 100円玉を追加予定。",onChange:me=>o(me.target.value)})]}),m.jsxs("div",{className:"admin-cash-audit-buttons",children:[m.jsx("button",{type:"button",className:"admin-secondary-button",onClick:Ze,children:"すべてリセット"}),m.jsx("button",{type:"button",className:"admin-primary-button",onClick:sn,disabled:c,children:c?"画像を生成中…":"画像として保存"})]}),m.jsxs("div",{className:"admin-cash-audit-feedback",children:[m.jsxs("span",{children:["合計 ",en.format(he.grandTotal)," / ",he.totalPieces," 枚"]}),m.jsxs("span",{className:"admin-cash-audit-feedback-muted",children:["金券 ",Xt.format(j)," 枚（",en.format(De),"）"]}),m.jsxs("span",{className:"admin-cash-audit-feedback-muted",children:["じゃんけん ",ye,"（+",Xt.format(N.plusCount)," / -",Xt.format(N.minusCount)," 件）"]}),m.jsxs("span",{className:"admin-cash-audit-feedback-muted",children:["点検区分 ",Ie]}),g&&m.jsxs("span",{className:"admin-cash-audit-feedback-muted",children:["最終保存: ",xb.format(g)]})]}),h&&m.jsx("p",{className:"admin-cash-audit-error",children:h})]})]}),m.jsxs("section",{className:"admin-card admin-cash-audit-report",ref:I,children:[m.jsxs("header",{className:"admin-cash-audit-report-header",children:[m.jsx("p",{className:"admin-content-overline",children:"会計点検レポート"}),m.jsx("h3",{children:en.format(he.grandTotal)}),m.jsxs("div",{className:"admin-cash-audit-report-meta",children:[m.jsxs("span",{children:["紙幣 ",en.format(he.billTotal)]}),m.jsxs("span",{children:["硬貨 ",en.format(he.coinTotal)]}),m.jsxs("span",{children:["金券 ",Xt.format(j)," 枚（",en.format(De),"）"]}),m.jsxs("span",{children:["じゃんけん ",ye,"（+",Xt.format(N.plusCount)," / -",Xt.format(N.minusCount)," 件）"]}),m.jsxs("span",{children:["総枚数 ",Xt.format(he.totalPieces)," 枚"]}),m.jsxs("span",{children:["本日の金券使用 ",Xt.format(H)," 枚（",en.format(H*Ko),"）"]})]}),m.jsxs("p",{className:"admin-cash-audit-timestamp",children:["作成日時: ",xb.format(Te)]}),m.jsxs("p",{className:"admin-cash-audit-shift-label",children:["点検区分: ",Ie]})]}),m.jsxs("div",{className:"admin-cash-audit-report-grid",children:[m.jsxs("article",{children:[m.jsx("h4",{children:"紙幣内訳"}),m.jsxs("table",{children:[m.jsx("thead",{children:m.jsxs("tr",{children:[m.jsx("th",{scope:"col",children:"金種"}),m.jsx("th",{scope:"col",children:"枚数"}),m.jsx("th",{scope:"col",children:"小計"})]})}),m.jsx("tbody",{children:he.billItems.map(me=>m.jsxs("tr",{children:[m.jsx("td",{children:me.label}),m.jsxs("td",{children:[Xt.format(me.count)," 枚"]}),m.jsx("td",{children:en.format(me.subtotal)})]},`report-bill-${me.value}`))})]})]}),m.jsxs("article",{children:[m.jsx("h4",{children:"硬貨内訳"}),m.jsxs("table",{children:[m.jsx("thead",{children:m.jsxs("tr",{children:[m.jsx("th",{scope:"col",children:"金種"}),m.jsx("th",{scope:"col",children:"枚数"}),m.jsx("th",{scope:"col",children:"小計"})]})}),m.jsx("tbody",{children:he.coinItems.map(me=>m.jsxs("tr",{children:[m.jsx("td",{children:me.label}),m.jsxs("td",{children:[Xt.format(me.count)," 枚"]}),m.jsx("td",{children:en.format(me.subtotal)})]},`report-coin-${me.value}`))})]})]}),m.jsxs("article",{children:[m.jsx("h4",{children:"金券内訳"}),m.jsxs("table",{children:[m.jsx("thead",{children:m.jsxs("tr",{children:[m.jsx("th",{scope:"col",children:"項目"}),m.jsx("th",{scope:"col",children:"枚数"}),m.jsx("th",{scope:"col",children:"小計"})]})}),m.jsx("tbody",{children:m.jsxs("tr",{children:[m.jsx("td",{children:"金券"}),m.jsxs("td",{children:[Xt.format(j)," 枚"]}),m.jsx("td",{children:en.format(De)})]})})]})]}),m.jsxs("article",{children:[m.jsx("h4",{children:"じゃんけん調整"}),m.jsxs("table",{children:[m.jsx("thead",{children:m.jsxs("tr",{children:[m.jsx("th",{scope:"col",children:"項目"}),m.jsx("th",{scope:"col",children:"件数"}),m.jsx("th",{scope:"col",children:"金額"})]})}),m.jsxs("tbody",{children:[m.jsxs("tr",{children:[m.jsxs("td",{children:["+",en.format(ca)]}),m.jsxs("td",{children:[Xt.format(N.plusCount)," 件"]}),m.jsx("td",{children:ec(X)})]}),m.jsxs("tr",{children:[m.jsxs("td",{children:["-",en.format(ca)]}),m.jsxs("td",{children:[Xt.format(N.minusCount)," 件"]}),m.jsx("td",{children:ec(te)})]}),m.jsxs("tr",{children:[m.jsx("td",{children:"合計"}),m.jsxs("td",{children:[Xt.format(pe)," 件"]}),m.jsx("td",{children:ec(N.totalAmount)})]})]})]})]})]}),m.jsxs("div",{className:"admin-cash-audit-note-preview",children:[m.jsx("h4",{children:"メモ"}),m.jsx("p",{children:a||"記録されたメモはありません。"})]})]})]})}const wb=[{id:"dashboard",label:"ダッシュボード",path:"/admin/dashboard",icon:"📊",allowedRoles:["admin"]},{id:"orders",label:"注文一覧",path:"/admin/orders",icon:"🗂️",allowedRoles:["admin"]},{id:"production",label:"盛り付け",path:"/admin/production",icon:"🥞",allowedRoles:["admin","staff"]},{id:"serving",label:"提供フロー",path:"/admin/serving",icon:"🍽️",allowedRoles:["admin","staff"]},{id:"payments",label:"支払いフロー",path:"/admin/payments",icon:"💳",allowedRoles:["admin","staff"]},{id:"cash-audit",label:"会計点検",path:"/admin/cash-audit",icon:"💴",allowedRoles:["admin"]},{id:"reception",label:"受付設定",path:"/admin/reception",icon:"🎫",allowedRoles:["admin"]},{id:"export",label:"エクスポート",path:"/admin/export",icon:"📤",allowedRoles:["admin"]},{id:"settings",label:"設定",path:"/admin/settings",icon:"⚙️",allowedRoles:["admin"]}];function LV(){const[n,e]=P.useState(!1),[t,r]=P.useState(!0),i=Bi(),a=nl(),{roles:o,signOut:c}=hp(),u=P.useCallback(T=>T.some(O=>o.includes(O)),[o]),h=P.useMemo(()=>wb.filter(T=>u(T.allowedRoles)),[u]),p=h[0]?.path??"/admin";P.useEffect(()=>{e(!1)},[i.pathname]);const g=P.useMemo(()=>{const T=h.find(O=>i.pathname.startsWith(O.path));return T||(wb.find(O=>i.pathname.startsWith(O.path))??null)},[h,i.pathname]);P.useEffect(()=>{g&&!u(g.allowedRoles)&&h.length>0&&a(h[0].path,{replace:!0})},[g,h,u,a]);const _=t||n,E=()=>{r(T=>!T),e(!1)},w=()=>{c()},S=["admin","kitchen","staff"],D=["admin-shell",t?"sidebar-pinned":"",n?"sidebar-open":""].filter(Boolean).join(" ");return m.jsxs("div",{className:D,children:[m.jsxs("button",{type:"button",className:"admin-hamburger","aria-controls":"admin-sidebar","aria-expanded":n,onClick:()=>e(T=>!T),children:[m.jsx("span",{className:"admin-hamburger-bar"}),m.jsx("span",{className:"admin-hamburger-bar"}),m.jsx("span",{className:"admin-hamburger-bar"}),m.jsx("span",{className:"sr-only",children:"メニューを開閉"})]}),m.jsxs("aside",{id:"admin-sidebar",className:`admin-sidebar${_?" open":""}${t?" pinned":""}`,children:[m.jsx("div",{className:"admin-sidebar-header",children:m.jsxs("div",{children:[m.jsx("p",{className:"admin-sidebar-title",children:"管理メニュー"}),m.jsx("p",{className:"admin-sidebar-subtitle",children:"本番運用向けの監視・更新ツールです。"})]})}),m.jsx("nav",{"aria-label":"管理メニュー",className:"admin-sidebar-nav",children:m.jsx("ul",{children:h.map(T=>{const O=g?.id===T.id;return m.jsx("li",{children:m.jsxs("button",{type:"button",className:`admin-nav-button${O?" active":""}`,onClick:()=>a(T.path),children:[m.jsx("span",{"aria-hidden":!0,className:"admin-nav-icon",children:T.icon}),m.jsx("span",{children:T.label})]})},T.id)})})}),m.jsxs("div",{className:"admin-sidebar-footer",children:[m.jsxs("button",{type:"button",className:"admin-logout-button",onClick:w,children:[m.jsx("span",{"aria-hidden":!0,className:"admin-nav-icon",children:"🚪"}),m.jsx("span",{children:"ログアウト"})]}),m.jsxs("p",{className:"admin-roles",children:["ロール:"," ",S.map(T=>{const O=o.includes(T);return m.jsx("span",{className:`admin-badge${O?"":" muted"}`,children:T},T)})]})]})]}),m.jsxs("div",{className:"admin-content",children:[m.jsxs("header",{className:"admin-content-header",children:[m.jsxs("div",{children:[m.jsxs("p",{className:"admin-content-overline",children:[g?.label??"管理","モード"]}),m.jsx("h1",{children:g?.label??"管理画面"})]}),m.jsx("div",{className:"admin-header-actions",children:m.jsxs("button",{type:"button",className:`admin-sidebar-toggle${t?"":" is-collapsed"}`,onClick:E,children:[m.jsx("span",{className:"dot","aria-hidden":!0}),t?"メニューを隠す":"メニューを固定"]})})]}),m.jsx("section",{className:"admin-content-main",children:m.jsxs(pS,{children:[m.jsx(Kt,{index:!0,element:m.jsx(ai,{to:p,replace:!0})}),m.jsx(Kt,{path:"dashboard",element:u(["admin"])?m.jsx(vA,{}):m.jsx(ai,{to:p,replace:!0})}),m.jsx(Kt,{path:"orders",element:u(["admin"])?m.jsx(hP,{}):m.jsx(ai,{to:p,replace:!0})}),m.jsx(Kt,{path:"production",element:u(["admin","staff"])?m.jsx(vP,{}):m.jsx(ai,{to:p,replace:!0})}),m.jsx(Kt,{path:"serving",element:u(["admin","staff"])?m.jsx(MB,{}):m.jsx(ai,{to:p,replace:!0})}),m.jsx(Kt,{path:"payments",element:u(["admin","staff"])?m.jsx(TB,{}):m.jsx(ai,{to:p,replace:!0})}),m.jsx(Kt,{path:"cash-audit",element:u(["admin"])?m.jsx(kV,{}):m.jsx(ai,{to:p,replace:!0})}),m.jsx(Kt,{path:"reception",element:u(["admin"])?m.jsx(IB,{}):m.jsx(ai,{to:p,replace:!0})}),m.jsx(Kt,{path:"export",element:u(["admin"])?m.jsx(vA,{mode:"export"}):m.jsx(ai,{to:p,replace:!0})}),m.jsx(Kt,{path:"settings",element:u(["admin"])?m.jsx(VB,{}):m.jsx(ai,{to:p,replace:!0})}),m.jsx(Kt,{path:"*",element:m.jsx(ai,{to:p,replace:!0})})]})})]})]})}const Yy="order-history.v1",jV=20,Ev=new Set,Wy=()=>typeof window<"u"&&typeof window.localStorage<"u",K3=()=>{if(!Wy())return[];try{const n=window.localStorage.getItem(Yy);if(!n)return[];const e=JSON.parse(n);return Array.isArray(e)?e.filter(t=>t&&typeof t=="object"&&"orderId"in t&&"ticket"in t).map(t=>{const r=typeof t.createdAt=="string"||t.createdAt instanceof Date?new Date(t.createdAt):void 0,i=r&&!Number.isNaN(r.getTime())?r:void 0;return{...t,callNumber:typeof t.callNumber=="number"&&Number.isFinite(t.callNumber)?t.callNumber:0,createdAt:i}}):[]}catch(n){return console.warn("Failed to parse order history from storage",n),[]}},Y3=n=>{if(Wy())try{window.localStorage.setItem(Yy,JSON.stringify(n))}catch(e){console.warn("Failed to write order history to storage",e)}},Qy=()=>{Ev.forEach(n=>n())},BV=()=>K3(),VV=n=>{const e=K3(),r=[{...n,callNumber:typeof n.callNumber=="number"&&Number.isFinite(n.callNumber)?n.callNumber:0,savedAt:new Date().toISOString()},...e.filter(i=>i.orderId!==n.orderId&&i.ticket!==n.ticket)].slice(0,jV);return Y3(r),Qy(),r},FV=()=>{Y3([]),Qy()},UV=n=>(Ev.add(n),()=>{Ev.delete(n)});Wy()&&window.addEventListener("storage",n=>{n.key===Yy&&Qy()});const Ab=()=>BV();function zV(){return P.useSyncExternalStore(UV,Ab,Ab)}const W3=P.createContext(void 0);function HV({children:n}){const[e,t]=P.useState(()=>typeof window>"u"?"ja":window.localStorage.getItem("app.language")==="en"?"en":"ja"),r=P.useCallback(o=>{t(o),typeof window<"u"&&window.localStorage.setItem("app.language",o)},[]),i=P.useCallback(()=>{r(e==="ja"?"en":"ja")},[e,r]),a=P.useMemo(()=>({language:e,setLanguage:r,toggleLanguage:i}),[e,r,i]);return m.jsx(W3.Provider,{value:a,children:n})}function fo(){const n=P.useContext(W3);if(!n)throw new Error("useLanguage must be used within a LanguageProvider");return n}const Q3={potaufeu:{label:"Pot-au-feu",description:"Packed with fresh ginger to warm you from the inside out. Take a sip and let this hearty soup comfort you."},plain:{label:"Fried Bread (Plain)",description:"The timeless classic. Get ready to fall into the world of fried bread—simple, irresistible, and unforgettable."},cocoa:{label:"Fried Bread (Cocoa)",description:"Fried bread meets cocoa—there’s no way this could go wrong. One bite and you’ll be hooked."},kinako:{label:"Fried Bread (Kinako)",description:"A nostalgic taste straight from Japanese school lunches. The beloved kinako fried bread is back."},garlic:{label:"Fried Bread (Garlic)",description:"Who said fried bread has to be sweet? This savory twist will change the way you think about it."},drink_hojicha:{label:"Roasted Green Tea (Hot)",description:"Fragrant hojicha to warm you up."},drink_cocoa:{label:"Hot Cocoa",description:"Sweet and velvety cocoa."},drink_coffee:{label:"Hot Coffee",description:"Aromatic freshly brewed coffee."},drink_milkcoffee:{label:"Iced Coffee Milk",description:"Creamy coffee with plenty of milk, served cold."},minestrone:{label:"Minestrone",description:"A hearty Italian classic, brimming with vegetables and warmth. Enjoy the full goodness of tomatoes—nature’s own beauty elixir."},strawberry:{label:"S'more (Strawberry Jam)",description:"Love probably tastes like this—sweet, slightly tart, and a little bit nostalgic."},blueberry:{label:"S'more (Blueberry Jam)",description:"A refreshing mix of sweetness and tanginess to wake you up—perfect for beating that post-lunch slump."},chocolate:{label:"S'more (Chocolate)",description:"When in doubt, go with chocolate. In life and in s’mores, chocolate never fails."},honey:{label:"S'more (Honey)",description:"A sweet little rescue for your tired self. Even the bees would be jealous."}},GV={ja:{wheat:"小麦",egg:"卵",soy:"大豆"},en:{wheat:"Wheat",egg:"Egg",soy:"Soy"}},qV={ja:{未払い:"未払い",支払い済み:"お支払い済み",キャンセル:"キャンセル"},en:{未払い:"Unpaid",支払い済み:"Paid",キャンセル:"Cancelled"}},$V={ja:{受注済み:"受注済み",調理済み:`調理済み
（お受け取りOK）`,クローズ:"受け渡し済み"},en:{受注済み:"Order received",調理済み:"Ready for pickup",クローズ:"Picked up"}},wv={ja:{received:"受注済み",ready:`調理済み
（お受け取りOK）`,completed:"受け渡し済み"},en:{received:"Order received",ready:"Ready for pickup",completed:"Picked up"}},Za={ja:{languageToggle:{label:"言語切替",japanese:"日本語",english:"English",buttonText:"日本語 / English",buttonAria:n=>`言語を${n==="ja"?"日本語":"English"}に切り替える`},header:{orderAction:"注文する",orderActionAria:"注文操作",characterAlt:"キャラクターのイラスト",titleAlt:"ヘッダーのタイトルイラスト"},auth:{signingIn:"匿名ログイン中です…",error:"匿名認証に失敗しました。時間をおいて再度お試しください。"},errors:{EMPTY_CART:"商品を1点以上ご注文ください。",ORDER_FAILED:"注文処理に失敗しました。通信環境をご確認ください。"},orderInput:{title:"注文する",descriptionLead:"各商品の数量はボタンで調整し、「注文内容を確認する」を押すとカート画面へ進みます。",descriptionFollow:"内容を確かめてから注文を確定しましょう。",totalLabel:"合計金額",totalNote:"税込・当日お支払いです。",reviewButton:"注文内容を確認する",resetButton:"入力をリセット"},quantityStepper:{decrease:"数量を1減らす",increase:"数量を1増やす"},menu:{imageAlt:n=>`${n}のイメージ`,allergensLabel:n=>`${n}に含まれる特定原材料表示`,quantityLabel:n=>`${n}の数量`,soldOutBadge:"売り切れ",soldOutMessage:"ただいま売り切れです。"},orderReview:{title:"注文内容を確認",descriptionLead:"数量と合計金額を確認し、問題なければ注文を確定してください。",descriptionFollow:"変更が必要な場合は戻って数量を調整できます。",tableHeaders:{item:"商品",quantity:"数量",subtotal:"小計"},totalLabel:"合計",confirmButton:"この内容で注文する",changeButton:"数量を変更する",confirming:"確定中…"},wasteGuide:{title:"【ごみの分別回収ご協力のお願い】",description:"ごみは教育学部棟玄関近くにあるごみ箱に紙皿と割り箸を分けて捨ててください！！ご協力お願いいたします",placeholder:"分別案内の画像をここに配置してください",confirm:"分別ルールを確認した"},orderComplete:{title:"注文が完了しました！",description:{default:"受け取り時は呼出番号と下のQRコードを提示してください。受け取りまで保管をお願いします。",progressOnly:"受け取り時は呼出番号または下のQRコードを提示してください。受け取りまで保管をお願いします。"},readyTitle:"お渡しの準備が整いました",readyPreviewTag:"テスト表示中（後で削除）",readyInstructionWithCallNumber:n=>`呼出番号 ${n} を確認のうえ、スタッフの案内にしたがってお受け取りください。`,readyInstructionWait:"スタッフから呼び出しがあるまでその場でお待ちください。",statusHeading:"現在の状況",metaHeading:"注文情報",meta:{total:"合計金額",payment:"お支払い",progress:"準備状況",orderedAt:"注文日時"},qrAlt:"進捗確認用QRコード",qrCaption:"このQRコードを読み取ると進捗確認ページが開きます。レジまたは状況確認時に提示してください。",identifiers:{orderId:"注文番号",ticket:"進捗確認コード"},itemsHeading:"注文内容",itemsTable:{item:"商品",quantity:"数量",price:"単価",subtotal:"小計",total:"合計"},actions:{copyLink:"進捗確認リンクをコピー",copyCode:"進捗確認コードをコピー",startNew:"新しく注文する"},ticketSearch:{regionLabel:"進捗確認コード検索",title:"進捗確認コードで表示",description:"お客様用の進捗確認コードを入力するとこの画面で進捗を確認できます。",label:"進捗確認コード",placeholder:"例: AB12CD34EF56GH78",button:"進捗を表示",error:"チケット番号を入力してください。"},loadingTitle:"注文情報を読み込んでいます…",loadingDescription:"少々お待ちください。",loadErrorTitle:"注文情報を取得できませんでした",loadErrorDescription:"注文情報を取得できませんでした。時間をおいて再度お試しください。",loadErrorAction:"チケット番号を再入力する",inviteTitle:"進捗確認コードを入力してください",inviteDescription:"進捗確認コードを入力するとすぐに進捗を確認できます。",paymentState:{complete:"受取済み",paid:"お支払い済み",unpaid:"未払い"},progressSteps:wv.ja,refresh:{refreshing:"更新中…",cooldown:n=>`再取得まで ${n} 秒`,action:"最新情報に更新",error:"最新の注文情報を取得できませんでした。"},callNumberLabel:"呼出番号",callNumberPending:"準備中"},orderProgress:{title:"注文の進捗を表示しています",description:"進捗確認コードでアクセスした注文の状況と受け取りまでの流れをここで確認できます。"},status:{title:"注文状況の確認について",descriptionLead:"お客様には呼出番号のみをお伝えしています。スタッフからの案内があるまで、注文完了画面に表示された呼出番号をお控えください。",descriptionFollow:"進捗の詳細確認や調整はスタッフが内部ツールで対応します。状況に変化があった場合は店頭でお知らせいたします。",historyTitle:"この端末の注文履歴",historyClear:"履歴をクリア",historyDescription:"直近にこの端末から確定した注文を表示しています。呼出番号と注文番号を控えておくと店頭での確認がスムーズです。",historyCallNumberLabel:"呼出番号",historyOrderIdLabel:"注文番号",historyTotalLabel:"合計",historyPendingCallNumber:"準備中 / 未設定",historyClearConfirm:"この端末に保存されている注文履歴をすべて削除しますか？"},ticketNotFound:{title:"注文が見つかりません",descriptionKnown:n=>`進捗確認コード「${n}」の注文は登録されていないようです。コードを再度ご確認のうえ、もう一度お試しください。`,descriptionUnknown:"指定された進捗確認コードの注文は確認できませんでした。コードを再度ご確認のうえ、もう一度お試しください。",retry:"進捗確認コードを入力し直す",newOrder:"新しく注文する"},notFound:{title:"ページが見つかりません",description:"URLをご確認のうえ、ナビゲーションから移動してください。"},copy:{progressCodeSuccess:"進捗確認コードをコピーしました。",progressCodeFailure:"コピーに失敗しました。手動で控えてください。",progressLinkSuccess:"進捗確認用リンクをコピーしました。",progressLinkFailure:"コピーに失敗しました。手動で控えてください。"}},en:{languageToggle:{label:"Language",japanese:"日本語",english:"English",buttonText:"日本語 / English",buttonAria:n=>`Change language to ${n==="ja"?"Japanese":"English"}`},header:{orderAction:"Order now",orderActionAria:"Order actions",characterAlt:"Character illustration",titleAlt:"Header title illustration"},auth:{signingIn:"Signing in anonymously...",error:"Anonymous sign-in failed. Please try again later."},errors:{EMPTY_CART:"Please add at least one item to your order.",ORDER_FAILED:"We could not process your order. Please check your connection and try again."},orderInput:{title:"Place your order",descriptionLead:'Use the buttons to adjust each quantity, then press "Review order" to continue.',descriptionFollow:"Make sure everything looks right before you confirm.",totalLabel:"Total",totalNote:"Tax included. Please pay at pickup.",reviewButton:"Review order",resetButton:"Reset selections"},quantityStepper:{decrease:"Decrease quantity by 1",increase:"Increase quantity by 1"},menu:{imageAlt:n=>`Image of ${n}`,allergensLabel:n=>`Allergen information for ${n}`,quantityLabel:n=>`Quantity for ${n}`,soldOutBadge:"Sold out",soldOutMessage:"Currently unavailable."},orderReview:{title:"Review your order",descriptionLead:"Check the quantities and total. When ready, place your order.",descriptionFollow:"Need changes? Go back to adjust the items.",tableHeaders:{item:"Item",quantity:"Qty",subtotal:"Subtotal"},totalLabel:"Total",confirmButton:"Place order",changeButton:"Modify quantities",confirming:"Submitting..."},wasteGuide:{title:"Waste sorting reminder",description:"Replace this placeholder with the final sorting rules and drop-off locations when they are ready.",placeholder:"Place the waste sorting guide image here.",confirm:"I have read the sorting rules"},orderComplete:{title:"Order confirmed!",description:{default:"Show the call number and QR code at pickup. Keep this screen until you receive your order.",progressOnly:"Show the call number or the QR code at pickup. Keep this screen handy until completion."},readyTitle:"Your order is ready",readyPreviewTag:"Preview (remove later)",readyInstructionWithCallNumber:n=>`Please check call number ${n} and follow staff instructions to receive your order.`,readyInstructionWait:"Please wait nearby until staff call your number.",statusHeading:"Current status",metaHeading:"Order details",meta:{total:"Total",payment:"Payment",progress:"Status",orderedAt:"Order time"},qrAlt:"QR code for progress tracking",qrCaption:"Scan this code to open the progress page. Show it at the register or when staff ask.",identifiers:{orderId:"Order ID",ticket:"Progress code"},itemsHeading:"Items",itemsTable:{item:"Item",quantity:"Qty",price:"Unit price",subtotal:"Subtotal",total:"Total"},actions:{copyLink:"Copy progress link",copyCode:"Copy progress code",startNew:"Start a new order"},ticketSearch:{regionLabel:"Search by progress code",title:"Show by progress code",description:"Enter the customer progress code to view the status here.",label:"Progress code",placeholder:"e.g., AB12CD34EF56GH78",button:"Show status",error:"Enter a progress code."},loadingTitle:"Loading your order...",loadingDescription:"Please wait a moment.",loadErrorTitle:"We could not load the order",loadErrorDescription:"We could not retrieve your order. Please try again later.",loadErrorAction:"Enter the code again",inviteTitle:"Enter a progress code",inviteDescription:"Enter the progress code to check the latest status.",paymentState:{complete:"Picked up",paid:"Paid",unpaid:"Unpaid"},progressSteps:wv.en,refresh:{refreshing:"Refreshing...",cooldown:n=>`Try again in ${n} sec`,action:"Refresh status",error:"Failed to refresh the order. Please try again."},callNumberLabel:"Call number",callNumberPending:"Pending"},orderProgress:{title:"Tracking your order",description:"Check the current status and pickup steps for the code you entered."},status:{title:"How to check your order status",descriptionLead:"We only share the call number with customers. Please keep the number shown on the completion screen until staff call you.",descriptionFollow:"Our staff track progress internally. If the situation changes, we will inform you at the booth.",historyTitle:"Order history on this device",historyClear:"Clear history",historyDescription:"Recent confirmed orders from this device appear here. Keeping the call number and order ID handy speeds up pickup.",historyCallNumberLabel:"Call number",historyOrderIdLabel:"Order ID",historyTotalLabel:"Total",historyPendingCallNumber:"Pending / Not assigned",historyClearConfirm:"Remove all saved orders from this device?"},ticketNotFound:{title:"Order not found",descriptionKnown:n=>`We could not find an order for progress code "${n}". Please check the code and try again.`,descriptionUnknown:"We could not confirm an order for the provided progress code. Please check the code and try again.",retry:"Re-enter progress code",newOrder:"Start a new order"},notFound:{title:"Page not found",description:"Please check the URL and use the navigation links."},copy:{progressCodeSuccess:"Progress code copied to clipboard.",progressCodeFailure:"Copy failed. Please note it manually.",progressLinkSuccess:"Progress link copied to clipboard.",progressLinkFailure:"Copy failed. Please note it manually."}}};function Zy(n,e){return e==="en"?Q3[n.key]?.label??n.label:n.label}function XV(n,e){return e==="en"?Q3[n.key]?.description??n.description:n.description}function KV(n,e){return GV[e][n]}function YV(n,e){return qV[e][n]}function WV(n,e){return $V[e][n]}function QV(n,e){return wv[e][n]}function ZV(){const n=zV(),{language:e}=fo(),t=Za[e].status,r=()=>{(typeof window>"u"||window.confirm(t.historyClearConfirm))&&FV()};return m.jsxs("div",{className:"content-container",children:[m.jsxs("section",{className:"content-card",children:[m.jsx("h1",{className:"section-title",children:t.title}),m.jsx("p",{className:"section-description",children:t.descriptionLead}),m.jsx("p",{className:"section-description",children:t.descriptionFollow})]}),n.length>0&&m.jsxs("section",{className:"content-card history-card","aria-live":"polite",children:[m.jsxs("div",{className:"history-header",children:[m.jsx("h2",{className:"section-title",children:t.historyTitle}),m.jsx("button",{type:"button",className:"history-clear",onClick:r,children:t.historyClear})]}),m.jsx("p",{className:"history-description",children:t.historyDescription}),m.jsx("ul",{className:"order-history-list",children:n.map(i=>m.jsxs("li",{className:"order-history-item","aria-live":"polite",children:[m.jsx("div",{className:"order-history-row",children:m.jsx("span",{className:"order-history-date",children:new Date(i.savedAt).toLocaleString()})}),m.jsxs("div",{className:"order-history-row meta",children:[m.jsxs("span",{children:[t.historyCallNumberLabel,":"," ",i.callNumber>0?i.callNumber:t.historyPendingCallNumber]}),m.jsxs("span",{children:[t.historyOrderIdLabel,": ",i.orderId]})]}),m.jsx("div",{className:"order-history-row meta",children:m.jsxs("span",{children:[t.historyTotalLabel,": ¥",i.total.toLocaleString()]})})]},i.orderId))})]})]})}var tc={},Zm,bb;function JV(){return bb||(bb=1,Zm=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then}),Zm}var Jm={},ks={},Sb;function ol(){if(Sb)return ks;Sb=1;let n;const e=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];return ks.getSymbolSize=function(r){if(!r)throw new Error('"version" cannot be null or undefined');if(r<1||r>40)throw new Error('"version" should be in range from 1 to 40');return r*4+17},ks.getSymbolTotalCodewords=function(r){return e[r]},ks.getBCHDigit=function(t){let r=0;for(;t!==0;)r++,t>>>=1;return r},ks.setToSJISFunction=function(r){if(typeof r!="function")throw new Error('"toSJISFunc" is not a valid function.');n=r},ks.isKanjiModeEnabled=function(){return typeof n<"u"},ks.toSJIS=function(r){return n(r)},ks}var eg={},Cb;function Jy(){return Cb||(Cb=1,(function(n){n.L={bit:1},n.M={bit:0},n.Q={bit:3},n.H={bit:2};function e(t){if(typeof t!="string")throw new Error("Param is not a string");switch(t.toLowerCase()){case"l":case"low":return n.L;case"m":case"medium":return n.M;case"q":case"quartile":return n.Q;case"h":case"high":return n.H;default:throw new Error("Unknown EC Level: "+t)}}n.isValid=function(r){return r&&typeof r.bit<"u"&&r.bit>=0&&r.bit<4},n.from=function(r,i){if(n.isValid(r))return r;try{return e(r)}catch{return i}}})(eg)),eg}var tg,Tb;function eF(){if(Tb)return tg;Tb=1;function n(){this.buffer=[],this.length=0}return n.prototype={get:function(e){const t=Math.floor(e/8);return(this.buffer[t]>>>7-e%8&1)===1},put:function(e,t){for(let r=0;r<t;r++)this.putBit((e>>>t-r-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(e){const t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}},tg=n,tg}var ng,Ib;function tF(){if(Ib)return ng;Ib=1;function n(e){if(!e||e<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=e,this.data=new Uint8Array(e*e),this.reservedBit=new Uint8Array(e*e)}return n.prototype.set=function(e,t,r,i){const a=e*this.size+t;this.data[a]=r,i&&(this.reservedBit[a]=!0)},n.prototype.get=function(e,t){return this.data[e*this.size+t]},n.prototype.xor=function(e,t,r){this.data[e*this.size+t]^=r},n.prototype.isReserved=function(e,t){return this.reservedBit[e*this.size+t]},ng=n,ng}var rg={},Nb;function nF(){return Nb||(Nb=1,(function(n){const e=ol().getSymbolSize;n.getRowColCoords=function(r){if(r===1)return[];const i=Math.floor(r/7)+2,a=e(r),o=a===145?26:Math.ceil((a-13)/(2*i-2))*2,c=[a-7];for(let u=1;u<i-1;u++)c[u]=c[u-1]-o;return c.push(6),c.reverse()},n.getPositions=function(r){const i=[],a=n.getRowColCoords(r),o=a.length;for(let c=0;c<o;c++)for(let u=0;u<o;u++)c===0&&u===0||c===0&&u===o-1||c===o-1&&u===0||i.push([a[c],a[u]]);return i}})(rg)),rg}var ig={},Rb;function rF(){if(Rb)return ig;Rb=1;const n=ol().getSymbolSize,e=7;return ig.getPositions=function(r){const i=n(r);return[[0,0],[i-e,0],[0,i-e]]},ig}var ag={},Ob;function iF(){return Ob||(Ob=1,(function(n){n.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const e={N1:3,N2:3,N3:40,N4:10};n.isValid=function(i){return i!=null&&i!==""&&!isNaN(i)&&i>=0&&i<=7},n.from=function(i){return n.isValid(i)?parseInt(i,10):void 0},n.getPenaltyN1=function(i){const a=i.size;let o=0,c=0,u=0,h=null,p=null;for(let g=0;g<a;g++){c=u=0,h=p=null;for(let _=0;_<a;_++){let E=i.get(g,_);E===h?c++:(c>=5&&(o+=e.N1+(c-5)),h=E,c=1),E=i.get(_,g),E===p?u++:(u>=5&&(o+=e.N1+(u-5)),p=E,u=1)}c>=5&&(o+=e.N1+(c-5)),u>=5&&(o+=e.N1+(u-5))}return o},n.getPenaltyN2=function(i){const a=i.size;let o=0;for(let c=0;c<a-1;c++)for(let u=0;u<a-1;u++){const h=i.get(c,u)+i.get(c,u+1)+i.get(c+1,u)+i.get(c+1,u+1);(h===4||h===0)&&o++}return o*e.N2},n.getPenaltyN3=function(i){const a=i.size;let o=0,c=0,u=0;for(let h=0;h<a;h++){c=u=0;for(let p=0;p<a;p++)c=c<<1&2047|i.get(h,p),p>=10&&(c===1488||c===93)&&o++,u=u<<1&2047|i.get(p,h),p>=10&&(u===1488||u===93)&&o++}return o*e.N3},n.getPenaltyN4=function(i){let a=0;const o=i.data.length;for(let u=0;u<o;u++)a+=i.data[u];return Math.abs(Math.ceil(a*100/o/5)-10)*e.N4};function t(r,i,a){switch(r){case n.Patterns.PATTERN000:return(i+a)%2===0;case n.Patterns.PATTERN001:return i%2===0;case n.Patterns.PATTERN010:return a%3===0;case n.Patterns.PATTERN011:return(i+a)%3===0;case n.Patterns.PATTERN100:return(Math.floor(i/2)+Math.floor(a/3))%2===0;case n.Patterns.PATTERN101:return i*a%2+i*a%3===0;case n.Patterns.PATTERN110:return(i*a%2+i*a%3)%2===0;case n.Patterns.PATTERN111:return(i*a%3+(i+a)%2)%2===0;default:throw new Error("bad maskPattern:"+r)}}n.applyMask=function(i,a){const o=a.size;for(let c=0;c<o;c++)for(let u=0;u<o;u++)a.isReserved(u,c)||a.xor(u,c,t(i,u,c))},n.getBestMask=function(i,a){const o=Object.keys(n.Patterns).length;let c=0,u=1/0;for(let h=0;h<o;h++){a(h),n.applyMask(h,i);const p=n.getPenaltyN1(i)+n.getPenaltyN2(i)+n.getPenaltyN3(i)+n.getPenaltyN4(i);n.applyMask(h,i),p<u&&(u=p,c=h)}return c}})(ag)),ag}var Pd={},Db;function Z3(){if(Db)return Pd;Db=1;const n=Jy(),e=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],t=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];return Pd.getBlocksCount=function(i,a){switch(a){case n.L:return e[(i-1)*4+0];case n.M:return e[(i-1)*4+1];case n.Q:return e[(i-1)*4+2];case n.H:return e[(i-1)*4+3];default:return}},Pd.getTotalCodewordsCount=function(i,a){switch(a){case n.L:return t[(i-1)*4+0];case n.M:return t[(i-1)*4+1];case n.Q:return t[(i-1)*4+2];case n.H:return t[(i-1)*4+3];default:return}},Pd}var sg={},Yu={},Mb;function aF(){if(Mb)return Yu;Mb=1;const n=new Uint8Array(512),e=new Uint8Array(256);return(function(){let r=1;for(let i=0;i<255;i++)n[i]=r,e[r]=i,r<<=1,r&256&&(r^=285);for(let i=255;i<512;i++)n[i]=n[i-255]})(),Yu.log=function(r){if(r<1)throw new Error("log("+r+")");return e[r]},Yu.exp=function(r){return n[r]},Yu.mul=function(r,i){return r===0||i===0?0:n[e[r]+e[i]]},Yu}var Pb;function sF(){return Pb||(Pb=1,(function(n){const e=aF();n.mul=function(r,i){const a=new Uint8Array(r.length+i.length-1);for(let o=0;o<r.length;o++)for(let c=0;c<i.length;c++)a[o+c]^=e.mul(r[o],i[c]);return a},n.mod=function(r,i){let a=new Uint8Array(r);for(;a.length-i.length>=0;){const o=a[0];for(let u=0;u<i.length;u++)a[u]^=e.mul(i[u],o);let c=0;for(;c<a.length&&a[c]===0;)c++;a=a.slice(c)}return a},n.generateECPolynomial=function(r){let i=new Uint8Array([1]);for(let a=0;a<r;a++)i=n.mul(i,new Uint8Array([1,e.exp(a)]));return i}})(sg)),sg}var og,kb;function oF(){if(kb)return og;kb=1;const n=sF();function e(t){this.genPoly=void 0,this.degree=t,this.degree&&this.initialize(this.degree)}return e.prototype.initialize=function(r){this.degree=r,this.genPoly=n.generateECPolynomial(this.degree)},e.prototype.encode=function(r){if(!this.genPoly)throw new Error("Encoder not initialized");const i=new Uint8Array(r.length+this.degree);i.set(r);const a=n.mod(i,this.genPoly),o=this.degree-a.length;if(o>0){const c=new Uint8Array(this.degree);return c.set(a,o),c}return a},og=e,og}var lg={},cg={},ug={},Lb;function J3(){return Lb||(Lb=1,ug.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40}),ug}var sa={},jb;function eI(){if(jb)return sa;jb=1;const n="[0-9]+",e="[A-Z $%*+\\-./:]+";let t="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";t=t.replace(/u/g,"\\u");const r="(?:(?![A-Z0-9 $%*+\\-./:]|"+t+`)(?:.|[\r
]))+`;sa.KANJI=new RegExp(t,"g"),sa.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),sa.BYTE=new RegExp(r,"g"),sa.NUMERIC=new RegExp(n,"g"),sa.ALPHANUMERIC=new RegExp(e,"g");const i=new RegExp("^"+t+"$"),a=new RegExp("^"+n+"$"),o=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");return sa.testKanji=function(u){return i.test(u)},sa.testNumeric=function(u){return a.test(u)},sa.testAlphanumeric=function(u){return o.test(u)},sa}var Bb;function ll(){return Bb||(Bb=1,(function(n){const e=J3(),t=eI();n.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},n.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},n.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},n.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},n.MIXED={bit:-1},n.getCharCountIndicator=function(a,o){if(!a.ccBits)throw new Error("Invalid mode: "+a);if(!e.isValid(o))throw new Error("Invalid version: "+o);return o>=1&&o<10?a.ccBits[0]:o<27?a.ccBits[1]:a.ccBits[2]},n.getBestModeForData=function(a){return t.testNumeric(a)?n.NUMERIC:t.testAlphanumeric(a)?n.ALPHANUMERIC:t.testKanji(a)?n.KANJI:n.BYTE},n.toString=function(a){if(a&&a.id)return a.id;throw new Error("Invalid mode")},n.isValid=function(a){return a&&a.bit&&a.ccBits};function r(i){if(typeof i!="string")throw new Error("Param is not a string");switch(i.toLowerCase()){case"numeric":return n.NUMERIC;case"alphanumeric":return n.ALPHANUMERIC;case"kanji":return n.KANJI;case"byte":return n.BYTE;default:throw new Error("Unknown mode: "+i)}}n.from=function(a,o){if(n.isValid(a))return a;try{return r(a)}catch{return o}}})(cg)),cg}var Vb;function lF(){return Vb||(Vb=1,(function(n){const e=ol(),t=Z3(),r=Jy(),i=ll(),a=J3(),o=7973,c=e.getBCHDigit(o);function u(_,E,w){for(let S=1;S<=40;S++)if(E<=n.getCapacity(S,w,_))return S}function h(_,E){return i.getCharCountIndicator(_,E)+4}function p(_,E){let w=0;return _.forEach(function(S){const D=h(S.mode,E);w+=D+S.getBitsLength()}),w}function g(_,E){for(let w=1;w<=40;w++)if(p(_,w)<=n.getCapacity(w,E,i.MIXED))return w}n.from=function(E,w){return a.isValid(E)?parseInt(E,10):w},n.getCapacity=function(E,w,S){if(!a.isValid(E))throw new Error("Invalid QR Code version");typeof S>"u"&&(S=i.BYTE);const D=e.getSymbolTotalCodewords(E),T=t.getTotalCodewordsCount(E,w),O=(D-T)*8;if(S===i.MIXED)return O;const j=O-h(S,E);switch(S){case i.NUMERIC:return Math.floor(j/10*3);case i.ALPHANUMERIC:return Math.floor(j/11*2);case i.KANJI:return Math.floor(j/13);case i.BYTE:default:return Math.floor(j/8)}},n.getBestVersionForData=function(E,w){let S;const D=r.from(w,r.M);if(Array.isArray(E)){if(E.length>1)return g(E,D);if(E.length===0)return 1;S=E[0]}else S=E;return u(S.mode,S.getLength(),D)},n.getEncodedBits=function(E){if(!a.isValid(E)||E<7)throw new Error("Invalid QR Code version");let w=E<<12;for(;e.getBCHDigit(w)-c>=0;)w^=o<<e.getBCHDigit(w)-c;return E<<12|w}})(lg)),lg}var fg={},Fb;function cF(){if(Fb)return fg;Fb=1;const n=ol(),e=1335,t=21522,r=n.getBCHDigit(e);return fg.getEncodedBits=function(a,o){const c=a.bit<<3|o;let u=c<<10;for(;n.getBCHDigit(u)-r>=0;)u^=e<<n.getBCHDigit(u)-r;return(c<<10|u)^t},fg}var hg={},dg,Ub;function uF(){if(Ub)return dg;Ub=1;const n=ll();function e(t){this.mode=n.NUMERIC,this.data=t.toString()}return e.getBitsLength=function(r){return 10*Math.floor(r/3)+(r%3?r%3*3+1:0)},e.prototype.getLength=function(){return this.data.length},e.prototype.getBitsLength=function(){return e.getBitsLength(this.data.length)},e.prototype.write=function(r){let i,a,o;for(i=0;i+3<=this.data.length;i+=3)a=this.data.substr(i,3),o=parseInt(a,10),r.put(o,10);const c=this.data.length-i;c>0&&(a=this.data.substr(i),o=parseInt(a,10),r.put(o,c*3+1))},dg=e,dg}var pg,zb;function fF(){if(zb)return pg;zb=1;const n=ll(),e=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function t(r){this.mode=n.ALPHANUMERIC,this.data=r}return t.getBitsLength=function(i){return 11*Math.floor(i/2)+6*(i%2)},t.prototype.getLength=function(){return this.data.length},t.prototype.getBitsLength=function(){return t.getBitsLength(this.data.length)},t.prototype.write=function(i){let a;for(a=0;a+2<=this.data.length;a+=2){let o=e.indexOf(this.data[a])*45;o+=e.indexOf(this.data[a+1]),i.put(o,11)}this.data.length%2&&i.put(e.indexOf(this.data[a]),6)},pg=t,pg}var mg,Hb;function hF(){if(Hb)return mg;Hb=1;const n=ll();function e(t){this.mode=n.BYTE,typeof t=="string"?this.data=new TextEncoder().encode(t):this.data=new Uint8Array(t)}return e.getBitsLength=function(r){return r*8},e.prototype.getLength=function(){return this.data.length},e.prototype.getBitsLength=function(){return e.getBitsLength(this.data.length)},e.prototype.write=function(t){for(let r=0,i=this.data.length;r<i;r++)t.put(this.data[r],8)},mg=e,mg}var gg,Gb;function dF(){if(Gb)return gg;Gb=1;const n=ll(),e=ol();function t(r){this.mode=n.KANJI,this.data=r}return t.getBitsLength=function(i){return i*13},t.prototype.getLength=function(){return this.data.length},t.prototype.getBitsLength=function(){return t.getBitsLength(this.data.length)},t.prototype.write=function(r){let i;for(i=0;i<this.data.length;i++){let a=e.toSJIS(this.data[i]);if(a>=33088&&a<=40956)a-=33088;else if(a>=57408&&a<=60351)a-=49472;else throw new Error("Invalid SJIS character: "+this.data[i]+`
Make sure your charset is UTF-8`);a=(a>>>8&255)*192+(a&255),r.put(a,13)}},gg=t,gg}var vg={exports:{}},qb;function pF(){return qb||(qb=1,(function(n){var e={single_source_shortest_paths:function(t,r,i){var a={},o={};o[r]=0;var c=e.PriorityQueue.make();c.push(r,0);for(var u,h,p,g,_,E,w,S,D;!c.empty();){u=c.pop(),h=u.value,g=u.cost,_=t[h]||{};for(p in _)_.hasOwnProperty(p)&&(E=_[p],w=g+E,S=o[p],D=typeof o[p]>"u",(D||S>w)&&(o[p]=w,c.push(p,w),a[p]=h))}if(typeof i<"u"&&typeof o[i]>"u"){var T=["Could not find a path from ",r," to ",i,"."].join("");throw new Error(T)}return a},extract_shortest_path_from_predecessor_list:function(t,r){for(var i=[],a=r;a;)i.push(a),t[a],a=t[a];return i.reverse(),i},find_path:function(t,r,i){var a=e.single_source_shortest_paths(t,r,i);return e.extract_shortest_path_from_predecessor_list(a,i)},PriorityQueue:{make:function(t){var r=e.PriorityQueue,i={},a;t=t||{};for(a in r)r.hasOwnProperty(a)&&(i[a]=r[a]);return i.queue=[],i.sorter=t.sorter||r.default_sorter,i},default_sorter:function(t,r){return t.cost-r.cost},push:function(t,r){var i={value:t,cost:r};this.queue.push(i),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};n.exports=e})(vg)),vg.exports}var $b;function mF(){return $b||($b=1,(function(n){const e=ll(),t=uF(),r=fF(),i=hF(),a=dF(),o=eI(),c=ol(),u=pF();function h(T){return unescape(encodeURIComponent(T)).length}function p(T,O,j){const z=[];let H;for(;(H=T.exec(j))!==null;)z.push({data:H[0],index:H.index,mode:O,length:H[0].length});return z}function g(T){const O=p(o.NUMERIC,e.NUMERIC,T),j=p(o.ALPHANUMERIC,e.ALPHANUMERIC,T);let z,H;return c.isKanjiModeEnabled()?(z=p(o.BYTE,e.BYTE,T),H=p(o.KANJI,e.KANJI,T)):(z=p(o.BYTE_KANJI,e.BYTE,T),H=[]),O.concat(j,z,H).sort(function(N,b){return N.index-b.index}).map(function(N){return{data:N.data,mode:N.mode,length:N.length}})}function _(T,O){switch(O){case e.NUMERIC:return t.getBitsLength(T);case e.ALPHANUMERIC:return r.getBitsLength(T);case e.KANJI:return a.getBitsLength(T);case e.BYTE:return i.getBitsLength(T)}}function E(T){return T.reduce(function(O,j){const z=O.length-1>=0?O[O.length-1]:null;return z&&z.mode===j.mode?(O[O.length-1].data+=j.data,O):(O.push(j),O)},[])}function w(T){const O=[];for(let j=0;j<T.length;j++){const z=T[j];switch(z.mode){case e.NUMERIC:O.push([z,{data:z.data,mode:e.ALPHANUMERIC,length:z.length},{data:z.data,mode:e.BYTE,length:z.length}]);break;case e.ALPHANUMERIC:O.push([z,{data:z.data,mode:e.BYTE,length:z.length}]);break;case e.KANJI:O.push([z,{data:z.data,mode:e.BYTE,length:h(z.data)}]);break;case e.BYTE:O.push([{data:z.data,mode:e.BYTE,length:h(z.data)}])}}return O}function S(T,O){const j={},z={start:{}};let H=["start"];for(let q=0;q<T.length;q++){const N=T[q],b=[];for(let I=0;I<N.length;I++){const k=N[I],M=""+q+I;b.push(M),j[M]={node:k,lastCount:0},z[M]={};for(let V=0;V<H.length;V++){const L=H[V];j[L]&&j[L].node.mode===k.mode?(z[L][M]=_(j[L].lastCount+k.length,k.mode)-_(j[L].lastCount,k.mode),j[L].lastCount+=k.length):(j[L]&&(j[L].lastCount=k.length),z[L][M]=_(k.length,k.mode)+4+e.getCharCountIndicator(k.mode,O))}}H=b}for(let q=0;q<H.length;q++)z[H[q]].end=0;return{map:z,table:j}}function D(T,O){let j;const z=e.getBestModeForData(T);if(j=e.from(O,z),j!==e.BYTE&&j.bit<z.bit)throw new Error('"'+T+'" cannot be encoded with mode '+e.toString(j)+`.
 Suggested mode is: `+e.toString(z));switch(j===e.KANJI&&!c.isKanjiModeEnabled()&&(j=e.BYTE),j){case e.NUMERIC:return new t(T);case e.ALPHANUMERIC:return new r(T);case e.KANJI:return new a(T);case e.BYTE:return new i(T)}}n.fromArray=function(O){return O.reduce(function(j,z){return typeof z=="string"?j.push(D(z,null)):z.data&&j.push(D(z.data,z.mode)),j},[])},n.fromString=function(O,j){const z=g(O,c.isKanjiModeEnabled()),H=w(z),q=S(H,j),N=u.find_path(q.map,"start","end"),b=[];for(let I=1;I<N.length-1;I++)b.push(q.table[N[I]].node);return n.fromArray(E(b))},n.rawSplit=function(O){return n.fromArray(g(O,c.isKanjiModeEnabled()))}})(hg)),hg}var Xb;function gF(){if(Xb)return Jm;Xb=1;const n=ol(),e=Jy(),t=eF(),r=tF(),i=nF(),a=rF(),o=iF(),c=Z3(),u=oF(),h=lF(),p=cF(),g=ll(),_=mF();function E(q,N){const b=q.size,I=a.getPositions(N);for(let k=0;k<I.length;k++){const M=I[k][0],V=I[k][1];for(let L=-1;L<=7;L++)if(!(M+L<=-1||b<=M+L))for(let ie=-1;ie<=7;ie++)V+ie<=-1||b<=V+ie||(L>=0&&L<=6&&(ie===0||ie===6)||ie>=0&&ie<=6&&(L===0||L===6)||L>=2&&L<=4&&ie>=2&&ie<=4?q.set(M+L,V+ie,!0,!0):q.set(M+L,V+ie,!1,!0))}}function w(q){const N=q.size;for(let b=8;b<N-8;b++){const I=b%2===0;q.set(b,6,I,!0),q.set(6,b,I,!0)}}function S(q,N){const b=i.getPositions(N);for(let I=0;I<b.length;I++){const k=b[I][0],M=b[I][1];for(let V=-2;V<=2;V++)for(let L=-2;L<=2;L++)V===-2||V===2||L===-2||L===2||V===0&&L===0?q.set(k+V,M+L,!0,!0):q.set(k+V,M+L,!1,!0)}}function D(q,N){const b=q.size,I=h.getEncodedBits(N);let k,M,V;for(let L=0;L<18;L++)k=Math.floor(L/3),M=L%3+b-8-3,V=(I>>L&1)===1,q.set(k,M,V,!0),q.set(M,k,V,!0)}function T(q,N,b){const I=q.size,k=p.getEncodedBits(N,b);let M,V;for(M=0;M<15;M++)V=(k>>M&1)===1,M<6?q.set(M,8,V,!0):M<8?q.set(M+1,8,V,!0):q.set(I-15+M,8,V,!0),M<8?q.set(8,I-M-1,V,!0):M<9?q.set(8,15-M-1+1,V,!0):q.set(8,15-M-1,V,!0);q.set(I-8,8,1,!0)}function O(q,N){const b=q.size;let I=-1,k=b-1,M=7,V=0;for(let L=b-1;L>0;L-=2)for(L===6&&L--;;){for(let ie=0;ie<2;ie++)if(!q.isReserved(k,L-ie)){let we=!1;V<N.length&&(we=(N[V]>>>M&1)===1),q.set(k,L-ie,we),M--,M===-1&&(V++,M=7)}if(k+=I,k<0||b<=k){k-=I,I=-I;break}}}function j(q,N,b){const I=new t;b.forEach(function(ie){I.put(ie.mode.bit,4),I.put(ie.getLength(),g.getCharCountIndicator(ie.mode,q)),ie.write(I)});const k=n.getSymbolTotalCodewords(q),M=c.getTotalCodewordsCount(q,N),V=(k-M)*8;for(I.getLengthInBits()+4<=V&&I.put(0,4);I.getLengthInBits()%8!==0;)I.putBit(0);const L=(V-I.getLengthInBits())/8;for(let ie=0;ie<L;ie++)I.put(ie%2?17:236,8);return z(I,q,N)}function z(q,N,b){const I=n.getSymbolTotalCodewords(N),k=c.getTotalCodewordsCount(N,b),M=I-k,V=c.getBlocksCount(N,b),L=I%V,ie=V-L,we=Math.floor(I/V),F=Math.floor(M/V),se=F+1,he=we-F,Ie=new u(he);let De=0;const X=new Array(V),te=new Array(V);let pe=0;const ye=new Uint8Array(q.buffer);for(let Ze=0;Ze<V;Ze++){const sn=Ze<ie?F:se;X[Ze]=ye.slice(De,De+sn),te[Ze]=Ie.encode(X[Ze]),De+=sn,pe=Math.max(pe,sn)}const Te=new Uint8Array(I);let Ne=0,xe,Qe;for(xe=0;xe<pe;xe++)for(Qe=0;Qe<V;Qe++)xe<X[Qe].length&&(Te[Ne++]=X[Qe][xe]);for(xe=0;xe<he;xe++)for(Qe=0;Qe<V;Qe++)Te[Ne++]=te[Qe][xe];return Te}function H(q,N,b,I){let k;if(Array.isArray(q))k=_.fromArray(q);else if(typeof q=="string"){let we=N;if(!we){const F=_.rawSplit(q);we=h.getBestVersionForData(F,b)}k=_.fromString(q,we||40)}else throw new Error("Invalid data");const M=h.getBestVersionForData(k,b);if(!M)throw new Error("The amount of data is too big to be stored in a QR Code");if(!N)N=M;else if(N<M)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+M+`.
`);const V=j(N,b,k),L=n.getSymbolSize(N),ie=new r(L);return E(ie,N),w(ie),S(ie,N),T(ie,b,0),N>=7&&D(ie,N),O(ie,V),isNaN(I)&&(I=o.getBestMask(ie,T.bind(null,ie,b))),o.applyMask(I,ie),T(ie,b,I),{modules:ie,version:N,errorCorrectionLevel:b,maskPattern:I,segments:k}}return Jm.create=function(N,b){if(typeof N>"u"||N==="")throw new Error("No input text");let I=e.M,k,M;return typeof b<"u"&&(I=e.from(b.errorCorrectionLevel,e.M),k=h.from(b.version),M=o.from(b.maskPattern),b.toSJISFunc&&n.setToSJISFunction(b.toSJISFunc)),H(N,k,I,M)},Jm}var yg={},_g={},Kb;function tI(){return Kb||(Kb=1,(function(n){function e(t){if(typeof t=="number"&&(t=t.toString()),typeof t!="string")throw new Error("Color should be defined as hex string");let r=t.slice().replace("#","").split("");if(r.length<3||r.length===5||r.length>8)throw new Error("Invalid hex color: "+t);(r.length===3||r.length===4)&&(r=Array.prototype.concat.apply([],r.map(function(a){return[a,a]}))),r.length===6&&r.push("F","F");const i=parseInt(r.join(""),16);return{r:i>>24&255,g:i>>16&255,b:i>>8&255,a:i&255,hex:"#"+r.slice(0,6).join("")}}n.getOptions=function(r){r||(r={}),r.color||(r.color={});const i=typeof r.margin>"u"||r.margin===null||r.margin<0?4:r.margin,a=r.width&&r.width>=21?r.width:void 0,o=r.scale||4;return{width:a,scale:a?4:o,margin:i,color:{dark:e(r.color.dark||"#000000ff"),light:e(r.color.light||"#ffffffff")},type:r.type,rendererOpts:r.rendererOpts||{}}},n.getScale=function(r,i){return i.width&&i.width>=r+i.margin*2?i.width/(r+i.margin*2):i.scale},n.getImageWidth=function(r,i){const a=n.getScale(r,i);return Math.floor((r+i.margin*2)*a)},n.qrToImageData=function(r,i,a){const o=i.modules.size,c=i.modules.data,u=n.getScale(o,a),h=Math.floor((o+a.margin*2)*u),p=a.margin*u,g=[a.color.light,a.color.dark];for(let _=0;_<h;_++)for(let E=0;E<h;E++){let w=(_*h+E)*4,S=a.color.light;if(_>=p&&E>=p&&_<h-p&&E<h-p){const D=Math.floor((_-p)/u),T=Math.floor((E-p)/u);S=g[c[D*o+T]?1:0]}r[w++]=S.r,r[w++]=S.g,r[w++]=S.b,r[w]=S.a}}})(_g)),_g}var Yb;function vF(){return Yb||(Yb=1,(function(n){const e=tI();function t(i,a,o){i.clearRect(0,0,a.width,a.height),a.style||(a.style={}),a.height=o,a.width=o,a.style.height=o+"px",a.style.width=o+"px"}function r(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}n.render=function(a,o,c){let u=c,h=o;typeof u>"u"&&(!o||!o.getContext)&&(u=o,o=void 0),o||(h=r()),u=e.getOptions(u);const p=e.getImageWidth(a.modules.size,u),g=h.getContext("2d"),_=g.createImageData(p,p);return e.qrToImageData(_.data,a,u),t(g,h,p),g.putImageData(_,0,0),h},n.renderToDataURL=function(a,o,c){let u=c;typeof u>"u"&&(!o||!o.getContext)&&(u=o,o=void 0),u||(u={});const h=n.render(a,o,u),p=u.type||"image/png",g=u.rendererOpts||{};return h.toDataURL(p,g.quality)}})(yg)),yg}var xg={},Wb;function yF(){if(Wb)return xg;Wb=1;const n=tI();function e(i,a){const o=i.a/255,c=a+'="'+i.hex+'"';return o<1?c+" "+a+'-opacity="'+o.toFixed(2).slice(1)+'"':c}function t(i,a,o){let c=i+a;return typeof o<"u"&&(c+=" "+o),c}function r(i,a,o){let c="",u=0,h=!1,p=0;for(let g=0;g<i.length;g++){const _=Math.floor(g%a),E=Math.floor(g/a);!_&&!h&&(h=!0),i[g]?(p++,g>0&&_>0&&i[g-1]||(c+=h?t("M",_+o,.5+E+o):t("m",u,0),u=0,h=!1),_+1<a&&i[g+1]||(c+=t("h",p),p=0)):u++}return c}return xg.render=function(a,o,c){const u=n.getOptions(o),h=a.modules.size,p=a.modules.data,g=h+u.margin*2,_=u.color.light.a?"<path "+e(u.color.light,"fill")+' d="M0 0h'+g+"v"+g+'H0z"/>':"",E="<path "+e(u.color.dark,"stroke")+' d="'+r(p,h,u.margin)+'"/>',w='viewBox="0 0 '+g+" "+g+'"',D='<svg xmlns="http://www.w3.org/2000/svg" '+(u.width?'width="'+u.width+'" height="'+u.width+'" ':"")+w+' shape-rendering="crispEdges">'+_+E+`</svg>
`;return typeof c=="function"&&c(null,D),D},xg}var Qb;function _F(){if(Qb)return tc;Qb=1;const n=JV(),e=gF(),t=vF(),r=yF();function i(a,o,c,u,h){const p=[].slice.call(arguments,1),g=p.length,_=typeof p[g-1]=="function";if(!_&&!n())throw new Error("Callback required as last argument");if(_){if(g<2)throw new Error("Too few arguments provided");g===2?(h=c,c=o,o=u=void 0):g===3&&(o.getContext&&typeof h>"u"?(h=u,u=void 0):(h=u,u=c,c=o,o=void 0))}else{if(g<1)throw new Error("Too few arguments provided");return g===1?(c=o,o=u=void 0):g===2&&!o.getContext&&(u=c,c=o,o=void 0),new Promise(function(E,w){try{const S=e.create(c,u);E(a(S,o,u))}catch(S){w(S)}})}try{const E=e.create(c,u);h(null,a(E,o,u))}catch(E){h(E)}}return tc.create=e.create,tc.toCanvas=i.bind(null,t.render),tc.toDataURL=i.bind(null,t.renderToDataURL),tc.toString=i.bind(null,function(a,o,c){return r.render(a,c)}),tc}var xF=_F();const EF=j4(xF),wF=n=>Number.isInteger(n)&&n!==null&&n!==void 0&&n>0?n:0,kd=n=>{const e=n.items??{};return{orderId:n.orderId,ticket:n.ticket,callNumber:wF(n.callNumber),total:n.total,items:e,payment:n.payment,progress:n.progress,plating:Or(e,n.plating),createdAt:n.createdAt?new Date(n.createdAt):void 0}},Zb=n=>n instanceof _a&&n.code==="permission-denied",nI=P.createContext(void 0),Jb=()=>Object.keys(Fc).reduce((n,e)=>(n[e]=0,n),{});function AF({children:n}){const{menuItems:e}=sl(),[t,r]=P.useState(Jb),[i,a]=P.useState(!1),[o,c]=P.useState(null),[u,h]=P.useState(null),p=P.useCallback((N,b)=>{r(I=>({...I,[N]:Math.max(0,Number.isFinite(b)?Math.floor(b):0)}))},[]),g=P.useCallback(()=>{r(Jb())},[]),_=P.useMemo(()=>e.map(N=>({item:N,quantity:t[N.key],subtotal:t[N.key]*N.price})).filter(({quantity:N})=>N>0),[t,e]),E=P.useMemo(()=>_.reduce((N,b)=>N+b.subtotal,0),[_]),w=_.length>0;P.useEffect(()=>{r(N=>{let b=!1;const I={...N};return e.forEach(k=>{k.soldOut&&I[k.key]>0&&(I[k.key]=0,b=!0)}),b?I:N})},[e]);const S=P.useCallback(async N=>{const b=RB(N.ticket),I=await EF.toDataURL(b,{width:256,margin:1});return{summary:N,qrCode:I,progressUrl:b}},[]),D=P.useCallback(async()=>{if(i)return null;if(!w)return c("EMPTY_CART"),null;a(!0),c(null),h(null);try{const N=await Q7(t),b=kd(N),I=await S(b);h(I);try{VV(b)}catch(k){console.warn("注文履歴の保存に失敗しました",k)}return b}catch(N){return console.error(N),c("ORDER_FAILED"),null}finally{a(!1)}},[S,w,t,i]),T=P.useCallback(()=>{h(null)},[]),O=P.useCallback(()=>{g(),T(),c(null)},[T,g]),j=P.useCallback(async()=>{if(!u)return null;try{const N=await mA(u.summary.ticket);if(!N)return h(null),null;let b=null;try{b=await gA(N.orderId)}catch(k){if(!Zb(k))throw k;console.info("orders コレクションの参照権限がないため orderLookup の情報を利用します。",k)}const I=kd(b??N);return h(k=>k&&{...k,summary:I}),I}catch(N){throw console.error("最新の注文情報の取得に失敗しました",N),N}},[u]),z=P.useCallback(async N=>{const b=yc(N);if(!b)return null;try{const I=await mA(b);if(!I)return h(null),null;let k=null;try{k=await gA(I.orderId)}catch(L){if(!Zb(L))throw L;console.info("orders コレクションの参照権限がないため orderLookup の情報を利用します。",L)}const M=kd(k??I),V=await S(M);return h(V),M}catch(I){throw console.error("チケット番号から注文を取得できませんでした",I),I}},[S]),H=u?.summary.ticket??"";P.useEffect(()=>{if(!H)return;let N=!1;const b=tP(H,I=>{if(!I){h(null);return}const k=kd(I);h(M=>{if(!M)return M;const V=M.summary;return V.progress!==k.progress||V.payment!==k.payment||V.callNumber!==k.callNumber||V.total!==k.total||V.orderId!==k.orderId?(k.progress==="クローズ"&&!N&&(N=!0,b()),{...M,summary:k}):M})});return()=>{N||b()}},[H]);const q=P.useMemo(()=>({items:t,updateQuantity:p,resetItems:g,cartItems:_,total:E,hasItems:w,loading:i,error:o,setError:c,confirmOrder:D,orderResult:u,clearOrderResult:T,startNewOrder:O,refreshOrderResult:j,loadOrderByTicket:z}),[t,p,g,_,E,w,i,o,D,u,T,O,j,z]);return m.jsx(nI.Provider,{value:q,children:n})}function e2(){const n=P.useContext(nI);if(!n)throw new Error("useOrderFlow must be used within an OrderFlowProvider");return n}const rI=P.createContext(void 0),bF=6e3;function SF(n,e){const t=Object.entries(e.items).filter(([,r])=>r>0).map(([r,i])=>`${n[r]?.label??r} ×${i}`).join(" / ");return{id:`${e.orderId}-${Date.now()}`,orderId:e.orderId,callNumber:e.callNumber??0,total:e.total,itemSummary:t||"新しい注文を受け付けました。",createdAt:e.createdAt??e.updatedAt??new Date,source:"new-order"}}function CF(n){return{id:`test-${Date.now()}`,orderId:n.orderId??"TEST-ORDER",callNumber:n.callNumber??0,total:n.total??0,itemSummary:n.itemSummary??"テスト通知: 注文内容がここに表示されます。",createdAt:n.createdAt?new Date(n.createdAt):new Date,source:"test"}}function TF({children:n}){const[e,t]=P.useState([]),r=P.useRef(new Map),i=P.useRef(new Set),{status:a,hasRole:o}=hp(),{menuItemMap:c}=sl(),u=a==="signed-in"&&o(["admin","staff","kitchen"]),h=P.useCallback(D=>{i.current.forEach(T=>{try{T(D)}catch(O){console.error("OrderToast listener failed",O)}})},[]),p=P.useCallback(D=>{t(O=>O.filter(j=>j.id!==D));const T=r.current.get(D);T&&(window.clearTimeout(T),r.current.delete(D))},[]),g=P.useCallback(D=>{const T=r.current.get(D);T&&window.clearTimeout(T);const O=window.setTimeout(()=>p(D),bF);r.current.set(D,O)},[p]),_=P.useCallback((D,T)=>{t(j=>[...j,D]),g(D.id);const O=T?{...T,toast:D}:{type:D.source,toast:D};return h(O),D},[h,g]),E=P.useCallback((D,T)=>{const O=D.id??`${D.orderId}-${Date.now()}`,j={...D,id:O,source:D.source??"custom"};return _(j,T)},[_]);P.useEffect(()=>{const D=r.current;return()=>{D.forEach(T=>window.clearTimeout(T)),D.clear()}},[]),P.useEffect(()=>{if(!u)return;const D=J7(T=>{const O=SF(c,T);_(O,{type:"new-order",order:T})});return()=>{D?.()}},[u,_,c]),P.useEffect(()=>{const D=LB(T=>{const O=CF(T);_(O,{type:"test"})});return()=>{D?.()}},[_]);const w=P.useCallback(D=>(i.current.add(D),()=>{i.current.delete(D)}),[]),S=P.useMemo(()=>({toasts:e,removeToast:p,addToast:E,registerListener:w}),[E,w,p,e]);return m.jsx(rI.Provider,{value:S,children:n})}function iI(){const n=P.useContext(rI);if(!n)throw new Error("useOrderToasts must be used within an OrderToastProvider");return n}function t2(){const[n,e]=P.useState(!1),[t,r]=P.useState(null);return P.useEffect(()=>{if(Ua){e(!0),r(null);return}const i=iC(Ri,async a=>{try{a||await tC(Ri),e(!0)}catch(o){console.error("匿名認証に失敗しました",o),r("ANON_SIGNIN_FAILED")}});return()=>i()},[]),{ready:n,error:t}}const IF=P.memo(function({value:e,min:t=0,max:r,onChange:i,ariaLabel:a,decreaseLabel:o,increaseLabel:c,disabled:u=!1}){const h=()=>{if(u)return;const _=e-1;_<t||i(_)},p=()=>{if(u)return;const _=e+1;typeof r=="number"&&_>r||i(_)},g=`quantity-stepper${u?" disabled":""}`;return m.jsxs("div",{className:g,role:"group","aria-label":a,"aria-disabled":u,children:[m.jsx("button",{type:"button",className:"quantity-button decrease",onClick:h,"aria-label":o??"数量を1減らす",disabled:u||e<=t,children:"−"}),m.jsx("div",{className:"quantity-value","aria-live":"polite",children:e}),m.jsx("button",{type:"button",className:"quantity-button increase",onClick:p,"aria-label":c??"数量を1増やす",disabled:u||typeof r=="number"&&e>=r,children:"＋"})]})});function NF(){const n=nl(),{ready:e,error:t}=t2(),{menuItems:r}=sl(),{items:i,updateQuantity:a,resetItems:o,total:c,hasItems:u,clearOrderResult:h,setError:p}=e2(),{language:g}=fo(),_=Za[g],[E,w]=P.useState(null);P.useEffect(()=>{h(),p(null)},[h,p]);const S=T=>{if(T.preventDefault(),w(null),!!e){if(!u){w("EMPTY_CART");return}n("/order/review")}},D=()=>{o(),w(null)};return m.jsx("div",{className:"content-container",children:m.jsxs("section",{className:"content-card",children:[m.jsx("h1",{className:"section-title",children:_.orderInput.title}),m.jsxs("p",{className:"section-description",children:[_.orderInput.descriptionLead,m.jsx("br",{}),_.orderInput.descriptionFollow]}),!e&&!t&&m.jsx("p",{children:_.auth.signingIn}),t&&m.jsx("p",{className:"error-message",children:_.auth.error}),m.jsxs("form",{className:"form-grid",onSubmit:S,children:[r.map(T=>{const O=Zy(T,g),j=XV(T,g),z=T.soldOut,H=`menu-card${z?" sold-out":""}`,q=i[T.key]??0;return m.jsxs("article",{className:H,"aria-disabled":z,children:[m.jsx("div",{className:"menu-card-media",children:m.jsx("img",{src:T.image,alt:_.menu.imageAlt(O),loading:"lazy",decoding:"async",width:320,height:220})}),m.jsxs("div",{className:"menu-card-body",children:[m.jsxs("header",{className:"menu-card-header",children:[m.jsx("h2",{className:"menu-card-title",children:O}),m.jsxs("div",{className:"menu-card-status",children:[m.jsxs("span",{className:"menu-card-price",children:["¥",T.price.toLocaleString()]}),z&&m.jsx("span",{className:"menu-card-badge",role:"status",children:_.menu.soldOutBadge})]})]}),m.jsx("p",{className:"menu-card-description",children:j}),z&&m.jsx("p",{className:"menu-card-soldout-note",children:_.menu.soldOutMessage}),T.allergens.length>0&&m.jsx("ul",{className:"menu-card-allergens","aria-label":_.menu.allergensLabel(O),children:T.allergens.map(N=>{const b=P9[N],I=KV(b.key,g);return m.jsx("li",{className:"menu-card-allergen",title:I,"aria-label":I,children:m.jsx("span",{className:"menu-card-allergen-icon","aria-hidden":"true",children:m.jsx("img",{src:b.icon,alt:I,loading:"lazy",decoding:"async",width:48,height:48})})},b.key)})}),m.jsx("div",{className:"menu-card-footer",children:m.jsx(IF,{value:q,disabled:z,onChange:N=>{z||(a(T.key,N),E&&w(null))},ariaLabel:_.menu.quantityLabel(O),decreaseLabel:_.quantityStepper.decrease,increaseLabel:_.quantityStepper.increase})})]})]},T.key)}),m.jsx("div",{className:"summary-card",style:{marginTop:"0.5rem"},children:m.jsx("div",{className:"content-card",style:{boxShadow:"none"},children:m.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:"0.75rem"},children:[m.jsxs("div",{children:[m.jsx("h2",{style:{margin:0,fontSize:"1.4rem"},children:_.orderInput.totalLabel}),m.jsx("p",{style:{margin:0,color:"#475569"},children:_.orderInput.totalNote})]}),m.jsxs("strong",{style:{fontSize:"1.8rem",color:"var(--color-primary)"},children:["¥",c.toLocaleString()]})]})})}),E&&m.jsx("p",{style:{color:"#dc2626",margin:0},children:_.errors[E]}),m.jsxs("div",{className:"button-row",children:[m.jsx("button",{type:"submit",className:"button primary",disabled:!e,children:_.orderInput.reviewButton}),m.jsx("button",{type:"button",className:"button secondary",onClick:D,children:_.orderInput.resetButton})]})]})]})})}function RF(){const n=nl(),{ready:e,error:t}=t2(),{cartItems:r,total:i,hasItems:a,loading:o,error:c,setError:u,confirmOrder:h}=e2(),[p,g]=P.useState(null),[_,E]=P.useState(!1),{language:w}=fo(),S=Za[w];P.useEffect(()=>{a||n("/order",{replace:!0})},[a,n]),P.useEffect(()=>{u(null)},[u]);const D=async()=>{const O=await h();O&&(g(O.ticket),E(!0))},T=()=>{if(!p){E(!1);return}n(`/order/complete/${p}`,{replace:!0})};return m.jsx("div",{className:"content-container",children:m.jsxs("section",{className:"content-card",children:[m.jsx("h1",{className:"section-title",children:S.orderReview.title}),m.jsxs("p",{className:"section-description",children:[S.orderReview.descriptionLead,m.jsx("br",{}),S.orderReview.descriptionFollow]}),!e&&!t&&m.jsx("p",{children:S.auth.signingIn}),t&&m.jsx("p",{className:"error-message",children:S.auth.error}),m.jsxs("div",{className:"receipt-card",children:[m.jsxs("div",{className:"receipt-header",children:[m.jsx("span",{children:S.orderReview.tableHeaders.item}),m.jsx("span",{children:S.orderReview.tableHeaders.quantity}),m.jsx("span",{children:S.orderReview.tableHeaders.subtotal})]}),m.jsx("div",{className:"receipt-divider","aria-hidden":"true"}),m.jsx("div",{className:"receipt-items",children:r.map(({item:O,quantity:j,subtotal:z})=>m.jsxs("div",{className:"receipt-row",children:[m.jsx("div",{className:"receipt-item-info",children:m.jsx("span",{className:"receipt-item-name",children:Zy(O,w)})}),m.jsxs("span",{className:"receipt-item-qty",children:["×",j]}),m.jsxs("span",{className:"receipt-item-subtotal",children:["¥",z.toLocaleString()]})]},O.key))}),m.jsx("div",{className:"receipt-divider","aria-hidden":"true"}),m.jsxs("div",{className:"receipt-total",children:[m.jsx("span",{children:S.orderReview.totalLabel}),m.jsxs("span",{children:["¥",i.toLocaleString()]})]}),_&&m.jsx("div",{className:"waste-guide-modal-backdrop",role:"presentation",children:m.jsxs("div",{className:"waste-guide-modal",role:"dialog","aria-modal":"true","aria-labelledby":"waste-guide-title","aria-describedby":"waste-guide-description",children:[m.jsx("h2",{id:"waste-guide-title",children:S.wasteGuide.title}),m.jsx("p",{id:"waste-guide-description",children:S.wasteGuide.description}),m.jsx("div",{className:"waste-guide-visual","aria-hidden":"true",children:S.wasteGuide.placeholder}),m.jsx("div",{className:"waste-guide-actions",children:m.jsx("button",{type:"button",className:"button primary",onClick:T,children:S.wasteGuide.confirm})})]})})]}),c&&m.jsx("p",{style:{color:"#dc2626",marginTop:0},children:S.errors[c]}),m.jsxs("div",{className:"button-row",children:[m.jsx("button",{type:"button",className:"button primary",onClick:D,disabled:!e||o,children:o?S.orderReview.confirming:S.orderReview.confirmButton}),m.jsx("button",{type:"button",className:"button secondary",onClick:()=>n("/order"),disabled:o,children:S.orderReview.changeButton})]})]})})}const eS=[{key:"received",matches:["受注済み"]},{key:"ready",matches:["調理済み"]},{key:"completed",matches:["クローズ"]}];function Av(n={}){const{enableTicketSearch:e=!1,ticketNavigationBase:t="/order/complete",fallbackPath:r="/status",titleOverride:i,descriptionOverride:a}=n,o=nl(),{ticket:c}=AN(),[u]=Dv(),h=u.get("ticket"),p=u.get("previewReady"),g=P.useMemo(()=>c?yc(c):h?yc(h):"",[h,c]),_=P.useMemo(()=>{const qe=t||"/order/complete";return qe.endsWith("/")?qe.slice(0,-1):qe},[t]),{ready:E,error:w}=t2(),{language:S}=fo(),D=Za[S],T=D.orderComplete,O=D.auth,j=D.copy,{orderResult:z,startNewOrder:H,refreshOrderResult:q,loadOrderByTicket:N}=e2(),[b,I]=P.useState(!1),[k,M]=P.useState(null),[V,L]=P.useState(0),[ie,we]=P.useState(0),F=5e3,[se,he]=P.useState(!1),[Ie,De]=P.useState(null),[X,te]=P.useState(""),[pe,ye]=P.useState(null);P.useEffect(()=>{e&&(te(g),ye(null))},[e,g]);const Te=z?.summary.ticket.toUpperCase(),Ne=z&&(!g||Te===g)?z:null,xe=Ne?.summary,Qe=e,Ze=Ne?.qrCode??"",sn=Ne?.progressUrl??"",me=xe?.progress??"受注済み",Fe=P.useMemo(()=>p==="1"||p==="true",[p]),He=me==="調理済み",Ue=!!(xe&&(He||Fe)),{menuItemMap:Gt}=sl(),gt=xe?.callNumber&&xe.callNumber>0?xe.callNumber:null,kn=gt?T.readyInstructionWithCallNumber(gt):T.readyInstructionWait,lt=P.useMemo(()=>xe?xe.progress==="クローズ"?{label:T.paymentState.complete,tone:"complete"}:xe.payment==="支払い済み"?{label:T.paymentState.paid,tone:"paid"}:{label:T.paymentState.unpaid,tone:"unpaid"}:{label:"",tone:"unpaid"},[T,xe]),Ge=P.useMemo(()=>{if(!xe?.createdAt)return{display:"",iso:""};const qe=new Date(xe.createdAt);return Number.isNaN(qe.getTime())?{display:"",iso:""}:{display:new Intl.DateTimeFormat(S==="ja"?"ja-JP":"en-US",{dateStyle:"medium",timeStyle:"short"}).format(qe),iso:qe.toISOString()}},[S,xe?.createdAt]),Et=P.useMemo(()=>WV(me,S),[me,S]),$n=P.useMemo(()=>{const qe=eS.findIndex(jt=>jt.matches.includes(me));return qe>=0?qe:0},[me]);P.useEffect(()=>{Ne&&De(null)},[Ne]),P.useEffect(()=>{if(!g){!z&&!e&&o(r,{replace:!0});return}if(z&&Te===g)return;let qe=!0;return he(!0),De(null),N(g).then(jt=>{qe&&(jt||o(`/order/not-found?ticket=${encodeURIComponent(g)}`,{replace:!0}))}).catch(jt=>{console.error(jt),qe&&De("loadFailed")}).finally(()=>{qe&&he(!1)}),()=>{qe=!1}},[Te,e,r,N,o,g,z]),P.useEffect(()=>{!Ne&&!se&&!g&&z&&o(`${_}/${z.summary.ticket}`,{replace:!0})},[se,o,g,z,Ne,_]),P.useEffect(()=>{if(!V){we(0);return}const qe=()=>{const Kn=V-Date.now();we(Kn>0?Math.ceil(Kn/1e3):0)};qe();const jt=window.setInterval(qe,500);return()=>window.clearInterval(jt)},[V]);const es=qe=>{qe.preventDefault();const jt=yc(X);if(!jt){ye("required");return}ye(null),te(jt),o(`${_}/${jt}`)},le=e?m.jsxs("section",{className:"content-card","aria-label":T.ticketSearch.regionLabel,children:[m.jsx("h2",{className:"section-title",children:T.ticketSearch.title}),m.jsx("p",{className:"section-description",children:T.ticketSearch.description}),m.jsxs("form",{className:"form-grid",onSubmit:es,children:[m.jsxs("div",{className:"field",children:[m.jsx("label",{htmlFor:"progress-ticket",children:T.ticketSearch.label}),m.jsx("input",{id:"progress-ticket",type:"text",inputMode:"text",value:X,onChange:qe=>te(qe.target.value.toUpperCase()),placeholder:T.ticketSearch.placeholder,maxLength:24})]}),m.jsx("div",{className:"button-row",children:m.jsx("button",{type:"submit",className:"button primary",children:T.ticketSearch.button})})]}),pe&&m.jsx("p",{className:"error-message",children:T.ticketSearch.error})]}):null;if(!xe)return se?m.jsxs("div",{className:"content-container",children:[le,m.jsxs("section",{className:"content-card order-complete-card","aria-live":"polite",children:[m.jsx("h1",{className:"section-title",children:T.loadingTitle}),m.jsx("p",{className:"section-description",children:T.loadingDescription})]})]}):Ie?m.jsxs("div",{className:"content-container",children:[le,m.jsxs("section",{className:"content-card order-complete-card","aria-live":"polite",children:[m.jsx("h1",{className:"section-title",children:T.loadErrorTitle}),m.jsx("p",{className:"section-description",children:T.loadErrorDescription}),m.jsx("div",{className:"button-row",children:m.jsx("button",{type:"button",className:"button secondary",onClick:()=>o(r),children:T.loadErrorAction})})]})]}):e?m.jsxs("div",{className:"content-container",children:[le,m.jsxs("section",{className:"content-card order-complete-card","aria-live":"polite",children:[m.jsx("h1",{className:"section-title",children:T.inviteTitle}),m.jsx("p",{className:"section-description",children:T.inviteDescription})]})]}):null;const Ee=i??T.title,Ke=a??(Qe?T.description.progressOnly:T.description.default),Wt=async()=>{if(!(b||Date.now()<V||ie>0)){I(!0),M(null);try{await q()||M("refreshFailed")}catch(qe){console.error(qe),M("refreshFailed")}finally{I(!1),L(Date.now()+F)}}},dr=async()=>{try{await navigator.clipboard.writeText(xe.ticket),alert(j.progressCodeSuccess)}catch(qe){console.error(qe),alert(j.progressCodeFailure)}},Xn=async()=>{try{await navigator.clipboard.writeText(sn),alert(j.progressLinkSuccess)}catch(qe){console.error(qe),alert(j.progressLinkFailure)}},di=()=>{H(),o("/order")};return m.jsxs("div",{className:"content-container",children:[le,m.jsxs("section",{className:"content-card order-complete-card","aria-live":"polite",children:[m.jsx("h1",{className:"section-title",children:Ee}),m.jsx("p",{className:"section-description",children:Ke}),!E&&!w&&m.jsx("p",{children:O.signingIn}),w&&m.jsx("p",{className:"error-message",children:O.error}),m.jsxs("div",{className:"completion-order-info",children:[m.jsxs("div",{className:"completion-status-card",children:[m.jsxs("div",{className:"completion-call-number-block","aria-live":"polite",children:[m.jsx("span",{className:"completion-label",children:T.callNumberLabel}),m.jsx("span",{className:"completion-call-number",children:xe.callNumber>0?xe.callNumber:T.callNumberPending})]}),m.jsx("div",{className:"payment-state",children:m.jsx("span",{className:`payment-state-badge ${lt.tone}`,children:lt.label})}),m.jsxs("div",{className:"completion-status-header",children:[m.jsx("span",{className:"completion-label",children:T.statusHeading}),m.jsx("button",{type:"button",className:"button secondary completion-refresh-button",onClick:Wt,disabled:b||ie>0,children:b?T.refresh.refreshing:ie>0?T.refresh.cooldown(ie):T.refresh.action})]}),k&&m.jsx("p",{className:"completion-refresh-error",children:T.refresh.error}),m.jsx("div",{className:"completion-progress",role:"list",children:eS.map((qe,jt)=>{const Kn=["completion-progress-step",jt<$n?"done":"",jt===$n?"current":""].filter(Boolean).join(" ");return m.jsxs("div",{className:Kn,role:"listitem",children:[m.jsx("div",{className:"completion-progress-node","aria-hidden":"true"}),m.jsx("span",{className:"completion-progress-label",children:QV(qe.key,S)})]},qe.key)})}),Ue&&xe&&m.jsxs("div",{className:`completion-ready-notice${Fe&&!He?" preview":""}`,role:"status","aria-live":"assertive",children:[m.jsx("div",{className:"completion-ready-icon","aria-hidden":"true",children:m.jsx("svg",{viewBox:"0 0 24 24",focusable:"false","aria-hidden":"true",children:m.jsx("path",{d:"M9.5 16.25 5.75 12.5l1.5-1.5 2.25 2.25 6-6 1.5 1.5-7.5 7.5Z",fill:"currentColor"})})}),m.jsxs("div",{className:"completion-ready-copy",children:[m.jsx("p",{className:"completion-ready-title",children:T.readyTitle}),m.jsx("p",{className:"completion-ready-message",children:kn}),Fe&&!He&&m.jsx("span",{className:"completion-ready-preview-tag",children:T.readyPreviewTag})]})]})]}),m.jsxs("div",{className:"completion-meta",children:[m.jsx("h2",{className:"completion-subheading",children:T.metaHeading}),m.jsxs("dl",{className:"completion-meta-list",children:[m.jsxs("div",{children:[m.jsx("dt",{children:T.meta.total}),m.jsxs("dd",{children:["¥",xe.total.toLocaleString()]})]}),m.jsxs("div",{children:[m.jsx("dt",{children:T.meta.payment}),m.jsx("dd",{children:YV(xe.payment,S)})]}),m.jsxs("div",{children:[m.jsx("dt",{children:T.meta.progress}),m.jsx("dd",{children:Et})]}),m.jsxs("div",{children:[m.jsx("dt",{children:T.meta.orderedAt}),m.jsx("dd",{children:Ge.display?m.jsx("time",{dateTime:Ge.iso,children:Ge.display}):"—"})]})]})]})]}),Ze&&m.jsxs("div",{className:"completion-qr-block",children:[m.jsx("img",{src:Ze,alt:T.qrAlt}),m.jsx("span",{className:"completion-qr-caption",children:T.qrCaption})]}),m.jsxs("div",{className:"completion-identifiers",children:[m.jsxs("div",{className:"completion-order-id completion-identifier-card",children:[m.jsx("span",{className:"completion-label",children:T.identifiers.orderId}),m.jsx("span",{className:"completion-order-id-value",children:xe.orderId})]}),Qe&&m.jsxs("div",{className:"completion-order-id completion-identifier-card",children:[m.jsx("span",{className:"completion-label",children:T.identifiers.ticket}),m.jsx("span",{className:"completion-order-id-value",style:{wordBreak:"break-all"},children:xe.ticket})]})]}),m.jsxs("div",{className:"completion-items",children:[m.jsx("h2",{className:"completion-subheading",children:T.itemsHeading}),m.jsxs("table",{className:"completion-items-table",children:[m.jsx("thead",{children:m.jsxs("tr",{children:[m.jsx("th",{scope:"col",children:T.itemsTable.item}),m.jsx("th",{scope:"col",children:T.itemsTable.quantity}),m.jsx("th",{scope:"col",children:T.itemsTable.price}),m.jsx("th",{scope:"col",children:T.itemsTable.subtotal})]})}),m.jsxs("tbody",{children:[Object.entries(xe.items).map(([qe,jt])=>{const Kn=Gt[qe];return Kn?m.jsxs("tr",{children:[m.jsx("td",{children:Zy(Kn,S)}),m.jsx("td",{className:"numeric",children:jt}),m.jsxs("td",{className:"numeric",children:["¥",Kn.price.toLocaleString()]}),m.jsxs("td",{className:"numeric",children:["¥",(Kn.price*jt).toLocaleString()]})]},qe):null}),m.jsxs("tr",{className:"completion-items-total",children:[m.jsx("td",{colSpan:3,children:T.itemsTable.total}),m.jsxs("td",{className:"numeric",children:["¥",xe.total.toLocaleString()]})]})]})]})]}),m.jsxs("div",{className:"button-row completion-actions",children:[m.jsx("button",{type:"button",className:"button primary",onClick:Xn,children:T.actions.copyLink}),Qe&&sn&&m.jsx("button",{type:"button",className:"button secondary",onClick:dr,children:T.actions.copyCode}),m.jsx("button",{type:"button",className:"button secondary",onClick:di,children:T.actions.startNew})]})]})]})}function tS(){const{language:n}=fo(),t=Za[n].orderProgress;return m.jsx(Av,{enableTicketSearch:!0,ticketNavigationBase:"/progress",fallbackPath:"/progress",titleOverride:t.title,descriptionOverride:t.description})}function OF(){const[n]=Dv(),e=n.get("ticket")??"",t=yc(e),{language:r}=fo(),i=Za[r].ticketNotFound;return m.jsx("div",{className:"content-container",children:m.jsxs("section",{className:"content-card order-complete-card","aria-live":"polite",children:[m.jsx("h1",{className:"section-title",children:i.title}),m.jsx("p",{className:"section-description",children:t?i.descriptionKnown(t):i.descriptionUnknown}),m.jsxs("div",{className:"button-row",children:[m.jsx(Jd,{className:"button primary",to:"/status",children:i.retry}),m.jsx(Jd,{className:"button secondary",to:"/order",children:i.newOrder})]})]})})}const Eg=3600*1e3,aI=()=>{const{list:n}=uo();return n.reduce((e,t)=>(e[t.key]=0,e),{})},nS=n=>`${n.getHours().toString().padStart(2,"0")}:00`,DF=n=>n.createdAt??n.updatedAt;function MF(n,e,t=24){const r=e.getTime(),i=Array.from({length:t},(a,o)=>{const c=new Date(r+o*Eg),u=new Date(c.getTime()+Eg);return{slotStart:c,slotEnd:u,label:`${nS(c)} - ${nS(u)}`,totals:aI(),orderCount:0,totalItems:0}});return n.forEach(a=>{const o=DF(a);if(!o)return;const c=o.getTime()-r;if(c<0)return;const u=Math.floor(c/Eg);if(u<0||u>=t)return;const h=i[u];let p=!1;Object.entries(a.items).forEach(([g,_])=>{const E=Number(_);if(!Number.isFinite(E)||E<=0)return;const w=g;h.totals[w]=(h.totals[w]??0)+E,h.totalItems+=E,p=!0}),p&&(h.orderCount+=1)}),i}function PF(n){const e=aI(),t={受注済み:0,調理済み:0,クローズ:0};let r=0;return n.forEach(i=>{t[i.progress]=(t[i.progress]??0)+1,i.progress!=="クローズ"&&(r+=1,Object.entries(i.items).forEach(([a,o])=>{const c=Number(o);if(!Number.isFinite(c)||c<=0)return;const u=a;e[u]=(e[u]??0)+c}))}),{orderCount:r,totals:e,statusCounts:t}}const kF=6e4,rS=n=>n.toISOString().slice(0,10),LF=n=>{const e=n.getHours().toString().padStart(2,"0"),t=n.getMinutes().toString().padStart(2,"0"),r=n.getSeconds().toString().padStart(2,"0");return`${e}:${t}:${r}`},jF=n=>{const e=new Date(n);return e.setDate(e.getDate()+1),e};function BF(){const[n,e]=P.useState(()=>rS(new Date)),[t,r]=P.useState([]),[i,a]=P.useState(!1),[o,c]=P.useState(null),[u,h]=P.useState(null),{registerListener:p}=iI(),{signOut:g}=hp(),{menuItems:_}=sl(),E=P.useMemo(()=>{const b=new Date(`${n}T00:00:00`);return b.setHours(0,0,0,0),b},[n]),w=P.useMemo(()=>jF(E),[E]),S=P.useCallback(async b=>{if(!b?.aborted){a(!0),c(null);try{const I=await Z7({start:E,end:w});if(b?.aborted)return;r(I),h(new Date)}catch(I){if(b?.aborted)return;console.error(I);const k=I instanceof Error?I.message:"データの取得に失敗しました。";c(k)}finally{b?.aborted||a(!1)}}},[E,w]),D=P.useRef(S);P.useEffect(()=>{D.current=S},[S]),P.useEffect(()=>{const b=new AbortController;return S(b.signal),()=>b.abort()},[S]),P.useEffect(()=>{const b=new AbortController,I=window.setInterval(()=>{S(b.signal)},kF);return()=>{b.abort(),window.clearInterval(I)}},[S]),P.useEffect(()=>{const b=p(I=>{I.type==="new-order"&&D.current()});return()=>{b()}},[p]);const T=P.useMemo(()=>MF(t,E,24),[t,E]),O=P.useMemo(()=>PF(t),[t]),j=P.useMemo(()=>T.filter(b=>b.totalItems>0),[T]),z=P.useMemo(()=>{const b=_.reduce((M,V)=>(M[V.key]=T.reduce((L,ie)=>L+(ie.totals[V.key]??0),0),M),{}),I=Object.values(b).reduce((M,V)=>M+V,0),k=T.reduce((M,V)=>M+V.orderCount,0);return{totals:b,totalItems:I,totalOrders:k}},[T,_]),H=b=>{e(b.target.value)},q=()=>{h(null),S()},N=()=>{g()};return m.jsxs("div",{className:"kitchen-page",children:[m.jsxs("header",{className:"kitchen-header",children:[m.jsxs("div",{children:[m.jsx("p",{className:"kitchen-overline",children:"キッチン向けビュー"}),m.jsx("h1",{children:"調理チームダッシュボード"}),m.jsx("p",{className:"kitchen-description",children:"仕込みの目安となる販売数と、現在オーダー中のメニュー数をまとめています。"})]}),m.jsxs("div",{className:"kitchen-controls",role:"group","aria-label":"表示期間の設定",children:[m.jsxs("label",{className:"kitchen-date-control",children:[m.jsx("span",{children:"表示日"}),m.jsx("input",{type:"date",value:n,onChange:H,max:rS(new Date)})]}),m.jsx("button",{type:"button",className:"button secondary",onClick:q,disabled:i,children:"今すぐ再読み込み"}),m.jsx("button",{type:"button",className:"button secondary",onClick:N,children:"サインアウト"}),m.jsxs("p",{className:"kitchen-last-updated",children:["最終更新: ",u?LF(u):"更新待ち"]})]})]}),o&&m.jsx("div",{className:"kitchen-alert error",children:o}),i&&m.jsx("p",{className:"kitchen-loading",children:"集計中です…"}),m.jsxs("section",{className:"kitchen-section","aria-labelledby":"kitchen-current-orders",children:[m.jsxs("div",{className:"kitchen-section-header",children:[m.jsx("h2",{id:"kitchen-current-orders",children:"現在のオーダー数"}),m.jsx("p",{children:"受注済み〜調理済みまでの進行中オーダーを合計しています。"})]}),m.jsx("div",{className:"kitchen-summary-grid",children:_.map(b=>m.jsxs("article",{className:"kitchen-summary-card",children:[m.jsx("h3",{children:b.label}),m.jsxs("p",{className:"kitchen-summary-count",children:[O.totals[b.key],"個"]})]},b.key))}),m.jsxs("div",{className:"kitchen-status-chips",role:"list",children:[m.jsxs("span",{role:"listitem",className:"kitchen-status-chip",children:["受注済み ",O.statusCounts.受注済み,"件"]}),m.jsxs("span",{role:"listitem",className:"kitchen-status-chip highlight",children:["調理済み ",O.statusCounts.調理済み,"件"]}),m.jsxs("span",{role:"listitem",className:"kitchen-status-chip muted",children:["受け渡し済み ",O.statusCounts.クローズ,"件"]}),m.jsxs("span",{role:"listitem",className:"kitchen-status-chip total",children:["進行中合計 ",O.orderCount,"件"]})]})]}),m.jsxs("section",{className:"kitchen-section","aria-labelledby":"kitchen-hourly-sales",children:[m.jsxs("div",{className:"kitchen-section-header",children:[m.jsx("h2",{id:"kitchen-hourly-sales",children:"1時間ごとの販売数"}),m.jsx("p",{children:"選択日の注文データを時間帯別に集計しています（自動更新: 60秒ごと）。"})]}),j.length===0?m.jsx("p",{className:"kitchen-empty",children:"該当データがありません。"}):m.jsx("div",{className:"kitchen-table-wrapper",children:m.jsxs("table",{className:"kitchen-table",children:[m.jsx("thead",{children:m.jsxs("tr",{children:[m.jsx("th",{scope:"col",children:"時間帯"}),_.map(b=>m.jsx("th",{scope:"col",children:b.label},b.key)),m.jsx("th",{scope:"col",children:"合計個数"}),m.jsx("th",{scope:"col",children:"注文数"})]})}),m.jsx("tbody",{children:j.map(b=>m.jsxs("tr",{children:[m.jsx("th",{scope:"row",children:b.label}),_.map(I=>m.jsx("td",{children:b.totals[I.key]>0?b.totals[I.key]:"—"},I.key)),m.jsx("td",{children:b.totalItems>0?b.totalItems:"—"}),m.jsx("td",{children:b.orderCount>0?b.orderCount:"—"})]},b.label))}),m.jsx("tfoot",{children:m.jsxs("tr",{children:[m.jsx("th",{scope:"row",children:"合計"}),_.map(b=>m.jsx("td",{children:z.totals[b.key]||"—"},b.key)),m.jsx("td",{children:z.totalItems||"—"}),m.jsx("td",{children:z.totalOrders||"—"})]})})]})})]})]})}const VF={"new-order":"新しい注文が入りました",test:"テスト通知",custom:"お知らせ"},FF={hour:"2-digit",minute:"2-digit"};function UF(n){return n?n.toLocaleTimeString([],FF):""}function zF(n){if(!n)return;if(n instanceof Date)return n;const e=new Date(n);return Number.isNaN(e.getTime())?void 0:e}function HF(n){return n&&n>0?`呼出番号 ${n}`:"呼出番号は準備中です"}const sI=P.memo(({ariaLabel:n="新規注文通知",className:e,hideWhenEmpty:t=!0,titleBySource:r,variant:i="dark"})=>{const{toasts:a,removeToast:o}=iI();if(t&&a.length===0)return null;const c=["order-toast-container",e].filter(Boolean).join(" ");return m.jsx("div",{className:c,role:"status","aria-live":"polite","aria-label":n,children:a.map(u=>{const h=r?.[u.source]??VF[u.source],p=zF(u.createdAt),g=UF(p),_=HF(u.callNumber),E=i==="light"?"order-toast--light":"";return m.jsxs("div",{className:`order-toast ${E}`,children:[m.jsx("button",{type:"button",className:"order-toast-close",onClick:()=>o(u.id),"aria-label":"通知を閉じる",children:"×"}),m.jsxs("div",{className:"order-toast-content",children:[m.jsx("p",{className:"order-toast-title",children:h}),m.jsxs("p",{className:"order-toast-meta",children:[_," ・ 合計 ¥",u.total.toLocaleString()]}),m.jsx("p",{className:"order-toast-message",children:u.itemSummary}),g&&m.jsxs("p",{className:"order-toast-meta",children:["受注 ",g]})]})]},u.id)})})});sI.displayName="OrderToastViewport";function iS({children:n,required:e,title:t,description:r}){const{status:i,error:a,signIn:o,signOut:c,hasRole:u}=hp(),h=P.useMemo(()=>Array.isArray(e)?e:[e],[e]),[p,g]=P.useState(""),[_,E]=P.useState(""),[w,S]=P.useState(!1),[D,T]=P.useState(null),O=P.useMemo(()=>({admin:"管理者",kitchen:"キッチン",staff:"スタッフ"}),[]),j=P.useMemo(()=>h.map(q=>O[q]).join(", "),[h,O]);P.useEffect(()=>{i==="signed-out"&&(g(""),E(""),S(!1),T(null))},[i]);const z=async q=>{if(q.preventDefault(),!p||!_){T("メールアドレスとパスワードを入力してください");return}T(null),S(!0);try{await o({email:p,password:_})}catch(N){const b=N instanceof Error?N.message:"サインインに失敗しました。もう一度お試しください。";T(b)}finally{S(!1)}},H=P.useMemo(()=>u(h),[u,h]);return i==="loading"?m.jsx("div",{className:"role-guard",children:m.jsx("div",{className:"role-guard-card",children:m.jsx("p",{className:"role-guard-status",children:"認証情報を確認しています…"})})}):i==="signed-out"?m.jsx("div",{className:"role-guard",children:m.jsxs("div",{className:"role-guard-card",children:[m.jsx("h1",{children:t??"ログインが必要です"}),m.jsx("p",{className:"role-guard-description",children:r??`このページにアクセスするには ${j} 権限が必要です。`}),m.jsxs("form",{className:"role-guard-form",onSubmit:z,children:[m.jsxs("label",{className:"role-guard-field",children:[m.jsx("span",{children:"メールアドレス"}),m.jsx("input",{type:"email",autoComplete:"email",value:p,onChange:q=>g(q.target.value),required:!0,placeholder:"admin@example.com"})]}),m.jsxs("label",{className:"role-guard-field",children:[m.jsx("span",{children:"パスワード"}),m.jsx("input",{type:"password",autoComplete:"current-password",value:_,onChange:q=>E(q.target.value),required:!0,placeholder:"パスワード"})]}),(D||a)&&m.jsx("p",{className:"role-guard-error",children:D??a}),m.jsx("button",{type:"submit",className:"button primary",disabled:w,children:w?"サインイン中…":"サインイン"})]})]})}):H?m.jsx(m.Fragment,{children:n}):m.jsx("div",{className:"role-guard",children:m.jsxs("div",{className:"role-guard-card",children:[m.jsx("h1",{children:"アクセス権限がありません"}),m.jsxs("p",{className:"role-guard-description",children:[j," 権限を持つアカウントでサインインしてください。"]}),(D||a)&&m.jsx("p",{className:"role-guard-error",children:D??a}),m.jsx("button",{type:"button",className:"button secondary",onClick:()=>c(),children:"サインアウトして別のアカウントでログイン"})]})})}const GF=Nn("header/character_illust.png"),qF=Nn("header/header_title.png");function $F(){const{language:n}=fo(),e=Za[n];return m.jsxs("div",{className:"not-found",children:[m.jsx("h1",{children:e.notFound.title}),m.jsx("p",{children:e.notFound.description})]})}function XF(){const n=Bi(),{language:e,setLanguage:t}=fo(),r=n.pathname.startsWith("/admin"),i=n.pathname.startsWith("/kitchen"),a=r||i,o=r||i?"ja":e,c=Za[o],u=Za[e].languageToggle,h=["app-shell",r?"app-shell--wide":""].filter(Boolean).join(" "),p=r?"light":"dark",g=!r&&!i,_=g,E=o==="en"?"Mobile ordering system":"モバイル注文システム",w=e==="ja"?"en":"ja",S=()=>{t(w)};return m.jsx(TF,{children:m.jsxs(AF,{children:[m.jsxs("div",{className:h,children:[m.jsx("header",{className:["app-header",_?"app-header--public":"app-header--internal"].filter(Boolean).join(" "),children:_?m.jsx("div",{className:"header-row",children:m.jsxs("div",{className:"header-brand-group",children:[m.jsx("img",{className:"header-brand-character",src:GF,alt:c.header.characterAlt}),m.jsxs("div",{className:"header-title-block",children:[m.jsx("img",{className:"header-title-image",src:qF,alt:c.header.titleAlt}),g&&m.jsx("button",{type:"button",className:"language-switch",onClick:S,"aria-label":u.buttonAria(w),children:u.buttonText})]})]})}):m.jsx("div",{className:"header-internal",children:m.jsxs("div",{className:"brand",children:[m.jsx("span",{"aria-hidden":"true",className:"brand-icon",children:"🧇"}),m.jsxs("div",{className:"brand-text",children:[m.jsx("span",{className:"brand-title",children:"学園祭キッチンカー"}),m.jsx("span",{className:"brand-subtitle",children:E})]})]})})}),m.jsx("main",{className:"app-main",children:m.jsxs(pS,{children:[m.jsx(Kt,{path:"/",element:m.jsx(ai,{to:"/order",replace:!0})}),m.jsx(Kt,{path:"/order",element:m.jsx(NF,{})}),m.jsx(Kt,{path:"/order/review",element:m.jsx(RF,{})}),m.jsx(Kt,{path:"/order/complete",element:m.jsx(Av,{})}),m.jsx(Kt,{path:"/order/complete/:ticket",element:m.jsx(Av,{})}),m.jsx(Kt,{path:"/order/not-found",element:m.jsx(OF,{})}),m.jsx(Kt,{path:"/status",element:m.jsx(ZV,{})}),m.jsx(Kt,{path:"/progress",element:m.jsx(tS,{})}),m.jsx(Kt,{path:"/progress/:ticket",element:m.jsx(tS,{})}),m.jsx(Kt,{path:"/kitchen",element:m.jsx(iS,{required:"kitchen",title:"キッチン専用ページ",description:"調理チームメンバーのアカウントでサインインしてください。",children:m.jsx(BF,{})})}),m.jsx(Kt,{path:"/admin/*",element:m.jsx(iS,{required:["admin","staff"],title:"管理画面へのアクセス",description:"管理者またはスタッフ権限を持つアカウントでサインインしてください。",children:m.jsx(LV,{})})}),m.jsx(Kt,{path:"*",element:m.jsx($F,{})})]})}),m.jsx("footer",{className:"app-footer",children:m.jsxs("p",{children:["© ",new Date().getFullYear()," Hakuto Tanaka and Haruto Otsuka. All rights reserved."]})})]}),a&&m.jsx(sI,{variant:p,ariaLabel:"新着通知"})]})})}const KF="/Ichinikai/";X4.createRoot(document.getElementById("root")).render(m.jsx(P.StrictMode,{children:m.jsx(oR,{basename:KF,children:m.jsx(M9,{children:m.jsx(HV,{children:m.jsx(XF,{})})})})}));
