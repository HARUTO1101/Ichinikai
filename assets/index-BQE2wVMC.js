(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=t(i);fetch(i.href,a)}})();function B4(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var ym={exports:{}},Hu={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bw;function V4(){if(bw)return Hu;bw=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(r,i,a){var o=null;if(a!==void 0&&(o=""+a),i.key!==void 0&&(o=""+i.key),"key"in i){a={};for(var c in i)c!=="key"&&(a[c]=i[c])}else a=i;return i=a.ref,{$$typeof:n,type:r,key:o,ref:i!==void 0?i:null,props:a}}return Hu.Fragment=e,Hu.jsx=t,Hu.jsxs=t,Hu}var Sw;function F4(){return Sw||(Sw=1,ym.exports=V4()),ym.exports}var m=F4(),_m={exports:{}},He={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cw;function U4(){if(Cw)return He;Cw=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),o=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),g=Symbol.for("react.activity"),_=Symbol.iterator;function w($){return $===null||typeof $!="object"?null:($=_&&$[_]||$["@@iterator"],typeof $=="function"?$:null)}var A={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,D={};function C($,oe,pe){this.props=$,this.context=oe,this.refs=D,this.updater=pe||A}C.prototype.isReactComponent={},C.prototype.setState=function($,oe){if(typeof $!="object"&&typeof $!="function"&&$!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,$,oe,"setState")},C.prototype.forceUpdate=function($){this.updater.enqueueForceUpdate(this,$,"forceUpdate")};function P(){}P.prototype=C.prototype;function V($,oe,pe){this.props=$,this.context=oe,this.refs=D,this.updater=pe||A}var H=V.prototype=new P;H.constructor=V,S(H,C.prototype),H.isPureReactComponent=!0;var X=Array.isArray;function F(){}var I={H:null,A:null,T:null,S:null},b=Object.prototype.hasOwnProperty;function N($,oe,pe){var ve=pe.ref;return{$$typeof:n,type:$,key:oe,ref:ve!==void 0?ve:null,props:pe}}function R($,oe){return N($.type,oe,$.props)}function M($){return typeof $=="object"&&$!==null&&$.$$typeof===n}function B($){var oe={"=":"=0",":":"=2"};return"$"+$.replace(/[=:]/g,function(pe){return oe[pe]})}var L=/\/+/g;function ie($,oe){return typeof $=="object"&&$!==null&&$.key!=null?B(""+$.key):oe.toString(36)}function ge($){switch($.status){case"fulfilled":return $.value;case"rejected":throw $.reason;default:switch(typeof $.status=="string"?$.then(F,F):($.status="pending",$.then(function(oe){$.status==="pending"&&($.status="fulfilled",$.value=oe)},function(oe){$.status==="pending"&&($.status="rejected",$.reason=oe)})),$.status){case"fulfilled":return $.value;case"rejected":throw $.reason}}throw $}function K($,oe,pe,ve,Ne){var Re=typeof $;(Re==="undefined"||Re==="boolean")&&($=null);var Ee=!1;if($===null)Ee=!0;else switch(Re){case"bigint":case"string":case"number":Ee=!0;break;case"object":switch($.$$typeof){case n:case e:Ee=!0;break;case p:return Ee=$._init,K(Ee($._payload),oe,pe,ve,Ne)}}if(Ee)return Ne=Ne($),Ee=ve===""?"."+ie($,0):ve,X(Ne)?(pe="",Ee!=null&&(pe=Ee.replace(L,"$&/")+"/"),K(Ne,oe,pe,"",function(Pn){return Pn})):Ne!=null&&(M(Ne)&&(Ne=R(Ne,pe+(Ne.key==null||$&&$.key===Ne.key?"":(""+Ne.key).replace(L,"$&/")+"/")+Ee)),oe.push(Ne)),1;Ee=0;var Qe=ve===""?".":ve+":";if(X($))for(var Ze=0;Ze<$.length;Ze++)ve=$[Ze],Re=Qe+ie(ve,Ze),Ee+=K(ve,oe,pe,Re,Ne);else if(Ze=w($),typeof Ze=="function")for($=Ze.call($),Ze=0;!(ve=$.next()).done;)ve=ve.value,Re=Qe+ie(ve,Ze++),Ee+=K(ve,oe,pe,Re,Ne);else if(Re==="object"){if(typeof $.then=="function")return K(ge($),oe,pe,ve,Ne);throw oe=String($),Error("Objects are not valid as a React child (found: "+(oe==="[object Object]"?"object with keys {"+Object.keys($).join(", ")+"}":oe)+"). If you meant to render a collection of children, use an array instead.")}return Ee}function G($,oe,pe){if($==null)return $;var ve=[],Ne=0;return K($,ve,"","",function(Re){return oe.call(pe,Re,Ne++)}),ve}function le($){if($._status===-1){var oe=$._result;oe=oe(),oe.then(function(pe){($._status===0||$._status===-1)&&($._status=1,$._result=pe)},function(pe){($._status===0||$._status===-1)&&($._status=2,$._result=pe)}),$._status===-1&&($._status=0,$._result=oe)}if($._status===1)return $._result.default;throw $._result}var we=typeof reportError=="function"?reportError:function($){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var oe=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof $=="object"&&$!==null&&typeof $.message=="string"?String($.message):String($),error:$});if(!window.dispatchEvent(oe))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",$);return}console.error($)},Ae={map:G,forEach:function($,oe,pe){G($,function(){oe.apply(this,arguments)},pe)},count:function($){var oe=0;return G($,function(){oe++}),oe},toArray:function($){return G($,function(oe){return oe})||[]},only:function($){if(!M($))throw Error("React.Children.only expected to receive a single React element child.");return $}};return He.Activity=g,He.Children=Ae,He.Component=C,He.Fragment=t,He.Profiler=i,He.PureComponent=V,He.StrictMode=r,He.Suspense=u,He.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=I,He.__COMPILER_RUNTIME={__proto__:null,c:function($){return I.H.useMemoCache($)}},He.cache=function($){return function(){return $.apply(null,arguments)}},He.cacheSignal=function(){return null},He.cloneElement=function($,oe,pe){if($==null)throw Error("The argument must be a React element, but you passed "+$+".");var ve=S({},$.props),Ne=$.key;if(oe!=null)for(Re in oe.key!==void 0&&(Ne=""+oe.key),oe)!b.call(oe,Re)||Re==="key"||Re==="__self"||Re==="__source"||Re==="ref"&&oe.ref===void 0||(ve[Re]=oe[Re]);var Re=arguments.length-2;if(Re===1)ve.children=pe;else if(1<Re){for(var Ee=Array(Re),Qe=0;Qe<Re;Qe++)Ee[Qe]=arguments[Qe+2];ve.children=Ee}return N($.type,Ne,ve)},He.createContext=function($){return $={$$typeof:o,_currentValue:$,_currentValue2:$,_threadCount:0,Provider:null,Consumer:null},$.Provider=$,$.Consumer={$$typeof:a,_context:$},$},He.createElement=function($,oe,pe){var ve,Ne={},Re=null;if(oe!=null)for(ve in oe.key!==void 0&&(Re=""+oe.key),oe)b.call(oe,ve)&&ve!=="key"&&ve!=="__self"&&ve!=="__source"&&(Ne[ve]=oe[ve]);var Ee=arguments.length-2;if(Ee===1)Ne.children=pe;else if(1<Ee){for(var Qe=Array(Ee),Ze=0;Ze<Ee;Ze++)Qe[Ze]=arguments[Ze+2];Ne.children=Qe}if($&&$.defaultProps)for(ve in Ee=$.defaultProps,Ee)Ne[ve]===void 0&&(Ne[ve]=Ee[ve]);return N($,Re,Ne)},He.createRef=function(){return{current:null}},He.forwardRef=function($){return{$$typeof:c,render:$}},He.isValidElement=M,He.lazy=function($){return{$$typeof:p,_payload:{_status:-1,_result:$},_init:le}},He.memo=function($,oe){return{$$typeof:h,type:$,compare:oe===void 0?null:oe}},He.startTransition=function($){var oe=I.T,pe={};I.T=pe;try{var ve=$(),Ne=I.S;Ne!==null&&Ne(pe,ve),typeof ve=="object"&&ve!==null&&typeof ve.then=="function"&&ve.then(F,we)}catch(Re){we(Re)}finally{oe!==null&&pe.types!==null&&(oe.types=pe.types),I.T=oe}},He.unstable_useCacheRefresh=function(){return I.H.useCacheRefresh()},He.use=function($){return I.H.use($)},He.useActionState=function($,oe,pe){return I.H.useActionState($,oe,pe)},He.useCallback=function($,oe){return I.H.useCallback($,oe)},He.useContext=function($){return I.H.useContext($)},He.useDebugValue=function(){},He.useDeferredValue=function($,oe){return I.H.useDeferredValue($,oe)},He.useEffect=function($,oe){return I.H.useEffect($,oe)},He.useEffectEvent=function($){return I.H.useEffectEvent($)},He.useId=function(){return I.H.useId()},He.useImperativeHandle=function($,oe,pe){return I.H.useImperativeHandle($,oe,pe)},He.useInsertionEffect=function($,oe){return I.H.useInsertionEffect($,oe)},He.useLayoutEffect=function($,oe){return I.H.useLayoutEffect($,oe)},He.useMemo=function($,oe){return I.H.useMemo($,oe)},He.useOptimistic=function($,oe){return I.H.useOptimistic($,oe)},He.useReducer=function($,oe,pe){return I.H.useReducer($,oe,pe)},He.useRef=function($){return I.H.useRef($)},He.useState=function($){return I.H.useState($)},He.useSyncExternalStore=function($,oe,pe){return I.H.useSyncExternalStore($,oe,pe)},He.useTransition=function(){return I.H.useTransition()},He.version="19.2.0",He}var Tw;function Cv(){return Tw||(Tw=1,_m.exports=U4()),_m.exports}var k=Cv(),xm={exports:{}},Gu={},wm={exports:{}},Em={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Iw;function z4(){return Iw||(Iw=1,(function(n){function e(K,G){var le=K.length;K.push(G);e:for(;0<le;){var we=le-1>>>1,Ae=K[we];if(0<i(Ae,G))K[we]=G,K[le]=Ae,le=we;else break e}}function t(K){return K.length===0?null:K[0]}function r(K){if(K.length===0)return null;var G=K[0],le=K.pop();if(le!==G){K[0]=le;e:for(var we=0,Ae=K.length,$=Ae>>>1;we<$;){var oe=2*(we+1)-1,pe=K[oe],ve=oe+1,Ne=K[ve];if(0>i(pe,le))ve<Ae&&0>i(Ne,pe)?(K[we]=Ne,K[ve]=le,we=ve):(K[we]=pe,K[oe]=le,we=oe);else if(ve<Ae&&0>i(Ne,le))K[we]=Ne,K[ve]=le,we=ve;else break e}}return G}function i(K,G){var le=K.sortIndex-G.sortIndex;return le!==0?le:K.id-G.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var o=Date,c=o.now();n.unstable_now=function(){return o.now()-c}}var u=[],h=[],p=1,g=null,_=3,w=!1,A=!1,S=!1,D=!1,C=typeof setTimeout=="function"?setTimeout:null,P=typeof clearTimeout=="function"?clearTimeout:null,V=typeof setImmediate<"u"?setImmediate:null;function H(K){for(var G=t(h);G!==null;){if(G.callback===null)r(h);else if(G.startTime<=K)r(h),G.sortIndex=G.expirationTime,e(u,G);else break;G=t(h)}}function X(K){if(S=!1,H(K),!A)if(t(u)!==null)A=!0,F||(F=!0,B());else{var G=t(h);G!==null&&ge(X,G.startTime-K)}}var F=!1,I=-1,b=5,N=-1;function R(){return D?!0:!(n.unstable_now()-N<b)}function M(){if(D=!1,F){var K=n.unstable_now();N=K;var G=!0;try{e:{A=!1,S&&(S=!1,P(I),I=-1),w=!0;var le=_;try{t:{for(H(K),g=t(u);g!==null&&!(g.expirationTime>K&&R());){var we=g.callback;if(typeof we=="function"){g.callback=null,_=g.priorityLevel;var Ae=we(g.expirationTime<=K);if(K=n.unstable_now(),typeof Ae=="function"){g.callback=Ae,H(K),G=!0;break t}g===t(u)&&r(u),H(K)}else r(u);g=t(u)}if(g!==null)G=!0;else{var $=t(h);$!==null&&ge(X,$.startTime-K),G=!1}}break e}finally{g=null,_=le,w=!1}G=void 0}}finally{G?B():F=!1}}}var B;if(typeof V=="function")B=function(){V(M)};else if(typeof MessageChannel<"u"){var L=new MessageChannel,ie=L.port2;L.port1.onmessage=M,B=function(){ie.postMessage(null)}}else B=function(){C(M,0)};function ge(K,G){I=C(function(){K(n.unstable_now())},G)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(K){K.callback=null},n.unstable_forceFrameRate=function(K){0>K||125<K?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):b=0<K?Math.floor(1e3/K):5},n.unstable_getCurrentPriorityLevel=function(){return _},n.unstable_next=function(K){switch(_){case 1:case 2:case 3:var G=3;break;default:G=_}var le=_;_=G;try{return K()}finally{_=le}},n.unstable_requestPaint=function(){D=!0},n.unstable_runWithPriority=function(K,G){switch(K){case 1:case 2:case 3:case 4:case 5:break;default:K=3}var le=_;_=K;try{return G()}finally{_=le}},n.unstable_scheduleCallback=function(K,G,le){var we=n.unstable_now();switch(typeof le=="object"&&le!==null?(le=le.delay,le=typeof le=="number"&&0<le?we+le:we):le=we,K){case 1:var Ae=-1;break;case 2:Ae=250;break;case 5:Ae=1073741823;break;case 4:Ae=1e4;break;default:Ae=5e3}return Ae=le+Ae,K={id:p++,callback:G,priorityLevel:K,startTime:le,expirationTime:Ae,sortIndex:-1},le>we?(K.sortIndex=le,e(h,K),t(u)===null&&K===t(h)&&(S?(P(I),I=-1):S=!0,ge(X,le-we))):(K.sortIndex=Ae,e(u,K),A||w||(A=!0,F||(F=!0,B()))),K},n.unstable_shouldYield=R,n.unstable_wrapCallback=function(K){var G=_;return function(){var le=_;_=G;try{return K.apply(this,arguments)}finally{_=le}}}})(Em)),Em}var Nw;function H4(){return Nw||(Nw=1,wm.exports=z4()),wm.exports}var Am={exports:{}},sr={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rw;function G4(){if(Rw)return sr;Rw=1;var n=Cv();function e(u){var h="https://react.dev/errors/"+u;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)h+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+u+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var r={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},i=Symbol.for("react.portal");function a(u,h,p){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:g==null?null:""+g,children:u,containerInfo:h,implementation:p}}var o=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(u,h){if(u==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return sr.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,sr.createPortal=function(u,h){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(e(299));return a(u,h,null,p)},sr.flushSync=function(u){var h=o.T,p=r.p;try{if(o.T=null,r.p=2,u)return u()}finally{o.T=h,r.p=p,r.d.f()}},sr.preconnect=function(u,h){typeof u=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,r.d.C(u,h))},sr.prefetchDNS=function(u){typeof u=="string"&&r.d.D(u)},sr.preinit=function(u,h){if(typeof u=="string"&&h&&typeof h.as=="string"){var p=h.as,g=c(p,h.crossOrigin),_=typeof h.integrity=="string"?h.integrity:void 0,w=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;p==="style"?r.d.S(u,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:g,integrity:_,fetchPriority:w}):p==="script"&&r.d.X(u,{crossOrigin:g,integrity:_,fetchPriority:w,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},sr.preinitModule=function(u,h){if(typeof u=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var p=c(h.as,h.crossOrigin);r.d.M(u,{crossOrigin:p,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&r.d.M(u)},sr.preload=function(u,h){if(typeof u=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var p=h.as,g=c(p,h.crossOrigin);r.d.L(u,p,{crossOrigin:g,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},sr.preloadModule=function(u,h){if(typeof u=="string")if(h){var p=c(h.as,h.crossOrigin);r.d.m(u,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:p,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else r.d.m(u)},sr.requestFormReset=function(u){r.d.r(u)},sr.unstable_batchedUpdates=function(u,h){return u(h)},sr.useFormState=function(u,h,p){return o.H.useFormState(u,h,p)},sr.useFormStatus=function(){return o.H.useHostTransitionStatus()},sr.version="19.2.0",sr}var Ow;function q4(){if(Ow)return Am.exports;Ow=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Am.exports=G4(),Am.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dw;function $4(){if(Dw)return Gu;Dw=1;var n=H4(),e=Cv(),t=q4();function r(s){var l="https://react.dev/errors/"+s;if(1<arguments.length){l+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)l+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+s+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function a(s){var l=s,f=s;if(s.alternate)for(;l.return;)l=l.return;else{s=l;do l=s,(l.flags&4098)!==0&&(f=l.return),s=l.return;while(s)}return l.tag===3?f:null}function o(s){if(s.tag===13){var l=s.memoizedState;if(l===null&&(s=s.alternate,s!==null&&(l=s.memoizedState)),l!==null)return l.dehydrated}return null}function c(s){if(s.tag===31){var l=s.memoizedState;if(l===null&&(s=s.alternate,s!==null&&(l=s.memoizedState)),l!==null)return l.dehydrated}return null}function u(s){if(a(s)!==s)throw Error(r(188))}function h(s){var l=s.alternate;if(!l){if(l=a(s),l===null)throw Error(r(188));return l!==s?null:s}for(var f=s,d=l;;){var y=f.return;if(y===null)break;var x=y.alternate;if(x===null){if(d=y.return,d!==null){f=d;continue}break}if(y.child===x.child){for(x=y.child;x;){if(x===f)return u(y),s;if(x===d)return u(y),l;x=x.sibling}throw Error(r(188))}if(f.return!==d.return)f=y,d=x;else{for(var T=!1,j=y.child;j;){if(j===f){T=!0,f=y,d=x;break}if(j===d){T=!0,d=y,f=x;break}j=j.sibling}if(!T){for(j=x.child;j;){if(j===f){T=!0,f=x,d=y;break}if(j===d){T=!0,d=x,f=y;break}j=j.sibling}if(!T)throw Error(r(189))}}if(f.alternate!==d)throw Error(r(190))}if(f.tag!==3)throw Error(r(188));return f.stateNode.current===f?s:l}function p(s){var l=s.tag;if(l===5||l===26||l===27||l===6)return s;for(s=s.child;s!==null;){if(l=p(s),l!==null)return l;s=s.sibling}return null}var g=Object.assign,_=Symbol.for("react.element"),w=Symbol.for("react.transitional.element"),A=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),D=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),P=Symbol.for("react.consumer"),V=Symbol.for("react.context"),H=Symbol.for("react.forward_ref"),X=Symbol.for("react.suspense"),F=Symbol.for("react.suspense_list"),I=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),N=Symbol.for("react.activity"),R=Symbol.for("react.memo_cache_sentinel"),M=Symbol.iterator;function B(s){return s===null||typeof s!="object"?null:(s=M&&s[M]||s["@@iterator"],typeof s=="function"?s:null)}var L=Symbol.for("react.client.reference");function ie(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===L?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case S:return"Fragment";case C:return"Profiler";case D:return"StrictMode";case X:return"Suspense";case F:return"SuspenseList";case N:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case A:return"Portal";case V:return s.displayName||"Context";case P:return(s._context.displayName||"Context")+".Consumer";case H:var l=s.render;return s=s.displayName,s||(s=l.displayName||l.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case I:return l=s.displayName||null,l!==null?l:ie(s.type)||"Memo";case b:l=s._payload,s=s._init;try{return ie(s(l))}catch{}}return null}var ge=Array.isArray,K=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,G=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,le={pending:!1,data:null,method:null,action:null},we=[],Ae=-1;function $(s){return{current:s}}function oe(s){0>Ae||(s.current=we[Ae],we[Ae]=null,Ae--)}function pe(s,l){Ae++,we[Ae]=s.current,s.current=l}var ve=$(null),Ne=$(null),Re=$(null),Ee=$(null);function Qe(s,l){switch(pe(Re,l),pe(Ne,s),pe(ve,null),l.nodeType){case 9:case 11:s=(s=l.documentElement)&&(s=s.namespaceURI)?Xx(s):0;break;default:if(s=l.tagName,l=l.namespaceURI)l=Xx(l),s=Yx(l,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}oe(ve),pe(ve,s)}function Ze(){oe(ve),oe(Ne),oe(Re)}function Pn(s){s.memoizedState!==null&&pe(Ee,s);var l=ve.current,f=Yx(l,s.type);l!==f&&(pe(Ne,s),pe(ve,f))}function me(s){Ne.current===s&&(oe(ve),oe(Ne)),Ee.current===s&&(oe(Ee),Vu._currentValue=le)}var Ve,Ye;function qe(s){if(Ve===void 0)try{throw Error()}catch(f){var l=f.stack.trim().match(/\n( *(at )?)/);Ve=l&&l[1]||"",Ye=-1<f.stack.indexOf(`
    at`)?" (<anonymous>)":-1<f.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ve+s+Ye}var bt=!1;function Et(s,l){if(!s||bt)return"";bt=!0;var f=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var d={DetermineComponentFrameRoot:function(){try{if(l){var he=function(){throw Error()};if(Object.defineProperty(he.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(he,[])}catch(re){var te=re}Reflect.construct(s,[],he)}else{try{he.call()}catch(re){te=re}s.call(he.prototype)}}else{try{throw Error()}catch(re){te=re}(he=s())&&typeof he.catch=="function"&&he.catch(function(){})}}catch(re){if(re&&te&&typeof re.stack=="string")return[re.stack,te.stack]}return[null,null]}};d.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var y=Object.getOwnPropertyDescriptor(d.DetermineComponentFrameRoot,"name");y&&y.configurable&&Object.defineProperty(d.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var x=d.DetermineComponentFrameRoot(),T=x[0],j=x[1];if(T&&j){var q=T.split(`
`),ee=j.split(`
`);for(y=d=0;d<q.length&&!q[d].includes("DetermineComponentFrameRoot");)d++;for(;y<ee.length&&!ee[y].includes("DetermineComponentFrameRoot");)y++;if(d===q.length||y===ee.length)for(d=q.length-1,y=ee.length-1;1<=d&&0<=y&&q[d]!==ee[y];)y--;for(;1<=d&&0<=y;d--,y--)if(q[d]!==ee[y]){if(d!==1||y!==1)do if(d--,y--,0>y||q[d]!==ee[y]){var ce=`
`+q[d].replace(" at new "," at ");return s.displayName&&ce.includes("<anonymous>")&&(ce=ce.replace("<anonymous>",s.displayName)),ce}while(1<=d&&0<=y);break}}}finally{bt=!1,Error.prepareStackTrace=f}return(f=s?s.displayName||s.name:"")?qe(f):""}function Xn(s,l){switch(s.tag){case 26:case 27:case 5:return qe(s.type);case 16:return qe("Lazy");case 13:return s.child!==l&&l!==null?qe("Suspense Fallback"):qe("Suspense");case 19:return qe("SuspenseList");case 0:case 15:return Et(s.type,!1);case 11:return Et(s.type.render,!1);case 1:return Et(s.type,!0);case 31:return qe("Activity");default:return""}}function St(s){try{var l="",f=null;do l+=Xn(s,f),f=s,s=s.return;while(s);return l}catch(d){return`
Error generating stack: `+d.message+`
`+d.stack}}var Fe=Object.prototype.hasOwnProperty,vt=n.unstable_scheduleCallback,Sn=n.unstable_cancelCallback,fo=n.unstable_shouldYield,Fi=n.unstable_requestPaint,ae=n.unstable_now,be=n.unstable_getCurrentPriorityLevel,Ke=n.unstable_ImmediatePriority,Wt=n.unstable_UserBlockingPriority,kn=n.unstable_NormalPriority,Gr=n.unstable_LowPriority,qr=n.unstable_IdlePriority,Ea=n.log,Ge=n.unstable_setDisableYieldValue,ht=null,ze=null;function Ln(s){if(typeof Ea=="function"&&Ge(s),ze&&typeof ze.setStrictMode=="function")try{ze.setStrictMode(ht,s)}catch{}}var an=Math.clz32?Math.clz32:Qf,Wf=Math.log,ul=Math.LN2;function Qf(s){return s>>>=0,s===0?32:31-(Wf(s)/ul|0)|0}var Ui=256,ho=262144,hn=4194304;function zi(s){var l=s&42;if(l!==0)return l;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return s&261888;case 262144:case 524288:case 1048576:case 2097152:return s&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function Hi(s,l,f){var d=s.pendingLanes;if(d===0)return 0;var y=0,x=s.suspendedLanes,T=s.pingedLanes;s=s.warmLanes;var j=d&134217727;return j!==0?(d=j&~x,d!==0?y=zi(d):(T&=j,T!==0?y=zi(T):f||(f=j&~s,f!==0&&(y=zi(f))))):(j=d&~x,j!==0?y=zi(j):T!==0?y=zi(T):f||(f=d&~s,f!==0&&(y=zi(f)))),y===0?0:l!==0&&l!==y&&(l&x)===0&&(x=y&-y,f=l&-l,x>=f||x===32&&(f&4194048)!==0)?l:y}function di(s,l){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&l)===0}function Ep(s,l){switch(s){case 1:case 2:case 4:case 8:case 64:return l+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Zf(){var s=hn;return hn<<=1,(hn&62914560)===0&&(hn=4194304),s}function Gi(s){for(var l=[],f=0;31>f;f++)l.push(s);return l}function po(s,l){s.pendingLanes|=l,l!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function Ap(s,l,f,d,y,x){var T=s.pendingLanes;s.pendingLanes=f,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=f,s.entangledLanes&=f,s.errorRecoveryDisabledLanes&=f,s.shellSuspendCounter=0;var j=s.entanglements,q=s.expirationTimes,ee=s.hiddenUpdates;for(f=T&~f;0<f;){var ce=31-an(f),he=1<<ce;j[ce]=0,q[ce]=-1;var te=ee[ce];if(te!==null)for(ee[ce]=null,ce=0;ce<te.length;ce++){var re=te[ce];re!==null&&(re.lane&=-536870913)}f&=~he}d!==0&&mo(s,d,0),x!==0&&y===0&&s.tag!==0&&(s.suspendedLanes|=x&~(T&~l))}function mo(s,l,f){s.pendingLanes|=l,s.suspendedLanes&=~l;var d=31-an(l);s.entangledLanes|=l,s.entanglements[d]=s.entanglements[d]|1073741824|f&261930}function Gc(s,l){var f=s.entangledLanes|=l;for(s=s.entanglements;f;){var d=31-an(f),y=1<<d;y&l|s[d]&l&&(s[d]|=l),f&=~y}}function qc(s,l){var f=l&-l;return f=(f&42)!==0?1:go(f),(f&(s.suspendedLanes|l))!==0?0:f}function go(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function Aa(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function Jf(){var s=G.p;return s!==0?s:(s=window.event,s===void 0?32:vw(s.type))}function pi(s,l){var f=G.p;try{return G.p=s,l()}finally{G.p=f}}var mi=Math.random().toString(36).slice(2),dn="__reactFiber$"+mi,jn="__reactProps$"+mi,qi="__reactContainer$"+mi,fl="__reactEvents$"+mi,bp="__reactListeners$"+mi,eh="__reactHandles$"+mi,th="__reactResources$"+mi,$i="__reactMarker$"+mi;function hl(s){delete s[dn],delete s[jn],delete s[fl],delete s[bp],delete s[eh]}function Xi(s){var l=s[dn];if(l)return l;for(var f=s.parentNode;f;){if(l=f[qi]||f[dn]){if(f=l.alternate,l.child!==null||f!==null&&f.child!==null)for(s=tw(s);s!==null;){if(f=s[dn])return f;s=tw(s)}return l}s=f,f=s.parentNode}return null}function $r(s){if(s=s[dn]||s[qi]){var l=s.tag;if(l===5||l===6||l===13||l===31||l===26||l===27||l===3)return s}return null}function Or(s){var l=s.tag;if(l===5||l===26||l===27||l===6)return s.stateNode;throw Error(r(33))}function Yi(s){var l=s[th];return l||(l=s[th]={hoistableStyles:new Map,hoistableScripts:new Map}),l}function pn(s){s[$i]=!0}var $c=new Set,Xc={};function Ki(s,l){Wi(s,l),Wi(s+"Capture",l)}function Wi(s,l){for(Xc[s]=l,s=0;s<l.length;s++)$c.add(l[s])}var Yc=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Kc={},Wc={};function nh(s){return Fe.call(Wc,s)?!0:Fe.call(Kc,s)?!1:Yc.test(s)?Wc[s]=!0:(Kc[s]=!0,!1)}function dl(s,l,f){if(nh(l))if(f===null)s.removeAttribute(l);else{switch(typeof f){case"undefined":case"function":case"symbol":s.removeAttribute(l);return;case"boolean":var d=l.toLowerCase().slice(0,5);if(d!=="data-"&&d!=="aria-"){s.removeAttribute(l);return}}s.setAttribute(l,""+f)}}function Dr(s,l,f){if(f===null)s.removeAttribute(l);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(l);return}s.setAttribute(l,""+f)}}function mn(s,l,f,d){if(d===null)s.removeAttribute(f);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(f);return}s.setAttributeNS(l,f,""+d)}}function Bn(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function ts(s){var l=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function Qc(s,l,f){var d=Object.getOwnPropertyDescriptor(s.constructor.prototype,l);if(!s.hasOwnProperty(l)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var y=d.get,x=d.set;return Object.defineProperty(s,l,{configurable:!0,get:function(){return y.call(this)},set:function(T){f=""+T,x.call(this,T)}}),Object.defineProperty(s,l,{enumerable:d.enumerable}),{getValue:function(){return f},setValue:function(T){f=""+T},stopTracking:function(){s._valueTracker=null,delete s[l]}}}}function Ct(s){if(!s._valueTracker){var l=ts(s)?"checked":"value";s._valueTracker=Qc(s,l,""+s[l])}}function vo(s){if(!s)return!1;var l=s._valueTracker;if(!l)return!0;var f=l.getValue(),d="";return s&&(d=ts(s)?s.checked?"true":"false":s.value),s=d,s!==f?(l.setValue(s),!0):!1}function Qi(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var yo=/[\n"\\]/g;function yr(s){return s.replace(yo,function(l){return"\\"+l.charCodeAt(0).toString(16)+" "})}function pl(s,l,f,d,y,x,T,j){s.name="",T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?s.type=T:s.removeAttribute("type"),l!=null?T==="number"?(l===0&&s.value===""||s.value!=l)&&(s.value=""+Bn(l)):s.value!==""+Bn(l)&&(s.value=""+Bn(l)):T!=="submit"&&T!=="reset"||s.removeAttribute("value"),l!=null?Zc(s,T,Bn(l)):f!=null?Zc(s,T,Bn(f)):d!=null&&s.removeAttribute("value"),y==null&&x!=null&&(s.defaultChecked=!!x),y!=null&&(s.checked=y&&typeof y!="function"&&typeof y!="symbol"),j!=null&&typeof j!="function"&&typeof j!="symbol"&&typeof j!="boolean"?s.name=""+Bn(j):s.removeAttribute("name")}function rh(s,l,f,d,y,x,T,j){if(x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"&&(s.type=x),l!=null||f!=null){if(!(x!=="submit"&&x!=="reset"||l!=null)){Ct(s);return}f=f!=null?""+Bn(f):"",l=l!=null?""+Bn(l):f,j||l===s.value||(s.value=l),s.defaultValue=l}d=d??y,d=typeof d!="function"&&typeof d!="symbol"&&!!d,s.checked=j?s.checked:!!d,s.defaultChecked=!!d,T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(s.name=T),Ct(s)}function Zc(s,l,f){l==="number"&&Qi(s.ownerDocument)===s||s.defaultValue===""+f||(s.defaultValue=""+f)}function ns(s,l,f,d){if(s=s.options,l){l={};for(var y=0;y<f.length;y++)l["$"+f[y]]=!0;for(f=0;f<s.length;f++)y=l.hasOwnProperty("$"+s[f].value),s[f].selected!==y&&(s[f].selected=y),y&&d&&(s[f].defaultSelected=!0)}else{for(f=""+Bn(f),l=null,y=0;y<s.length;y++){if(s[y].value===f){s[y].selected=!0,d&&(s[y].defaultSelected=!0);return}l!==null||s[y].disabled||(l=s[y])}l!==null&&(l.selected=!0)}}function ih(s,l,f){if(l!=null&&(l=""+Bn(l),l!==s.value&&(s.value=l),f==null)){s.defaultValue!==l&&(s.defaultValue=l);return}s.defaultValue=f!=null?""+Bn(f):""}function rs(s,l,f,d){if(l==null){if(d!=null){if(f!=null)throw Error(r(92));if(ge(d)){if(1<d.length)throw Error(r(93));d=d[0]}f=d}f==null&&(f=""),l=f}f=Bn(l),s.defaultValue=f,d=s.textContent,d===f&&d!==""&&d!==null&&(s.value=d),Ct(s)}function _r(s,l){if(l){var f=s.firstChild;if(f&&f===s.lastChild&&f.nodeType===3){f.nodeValue=l;return}}s.textContent=l}var ah=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Jc(s,l,f){var d=l.indexOf("--")===0;f==null||typeof f=="boolean"||f===""?d?s.setProperty(l,""):l==="float"?s.cssFloat="":s[l]="":d?s.setProperty(l,f):typeof f!="number"||f===0||ah.has(l)?l==="float"?s.cssFloat=f:s[l]=(""+f).trim():s[l]=f+"px"}function eu(s,l,f){if(l!=null&&typeof l!="object")throw Error(r(62));if(s=s.style,f!=null){for(var d in f)!f.hasOwnProperty(d)||l!=null&&l.hasOwnProperty(d)||(d.indexOf("--")===0?s.setProperty(d,""):d==="float"?s.cssFloat="":s[d]="");for(var y in l)d=l[y],l.hasOwnProperty(y)&&f[y]!==d&&Jc(s,y,d)}else for(var x in l)l.hasOwnProperty(x)&&Jc(s,x,l[x])}function ml(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var sh=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),is=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function gl(s){return is.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}function gi(){}var tu=null;function Xr(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var as=null,Zi=null;function _o(s){var l=$r(s);if(l&&(s=l.stateNode)){var f=s[jn]||null;e:switch(s=l.stateNode,l.type){case"input":if(pl(s,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name),l=f.name,f.type==="radio"&&l!=null){for(f=s;f.parentNode;)f=f.parentNode;for(f=f.querySelectorAll('input[name="'+yr(""+l)+'"][type="radio"]'),l=0;l<f.length;l++){var d=f[l];if(d!==s&&d.form===s.form){var y=d[jn]||null;if(!y)throw Error(r(90));pl(d,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name)}}for(l=0;l<f.length;l++)d=f[l],d.form===s.form&&vo(d)}break e;case"textarea":ih(s,f.value,f.defaultValue);break e;case"select":l=f.value,l!=null&&ns(s,!!f.multiple,l,!1)}}}var vl=!1;function ss(s,l,f){if(vl)return s(l,f);vl=!0;try{var d=s(l);return d}finally{if(vl=!1,(as!==null||Zi!==null)&&(Jh(),as&&(l=as,s=Zi,Zi=as=null,_o(l),s)))for(l=0;l<s.length;l++)_o(s[l])}}function vi(s,l){var f=s.stateNode;if(f===null)return null;var d=f[jn]||null;if(d===null)return null;f=d[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(s=s.type,d=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!d;break e;default:s=!1}if(s)return null;if(f&&typeof f!="function")throw Error(r(231,l,typeof f));return f}var Yr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),xo=!1;if(Yr)try{var Dt={};Object.defineProperty(Dt,"passive",{get:function(){xo=!0}}),window.addEventListener("test",Dt,Dt),window.removeEventListener("test",Dt,Dt)}catch{xo=!1}var Ji=null,nu=null,wo=null;function ru(){if(wo)return wo;var s,l=nu,f=l.length,d,y="value"in Ji?Ji.value:Ji.textContent,x=y.length;for(s=0;s<f&&l[s]===y[s];s++);var T=f-s;for(d=1;d<=T&&l[f-d]===y[x-d];d++);return wo=y.slice(s,1<d?1-d:void 0)}function Eo(s){var l=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&l===13&&(s=13)):s=l,s===10&&(s=13),32<=s||s===13?s:0}function ba(){return!0}function yi(){return!1}function Yn(s){function l(f,d,y,x,T){this._reactName=f,this._targetInst=y,this.type=d,this.nativeEvent=x,this.target=T,this.currentTarget=null;for(var j in s)s.hasOwnProperty(j)&&(f=s[j],this[j]=f?f(x):x[j]);return this.isDefaultPrevented=(x.defaultPrevented!=null?x.defaultPrevented:x.returnValue===!1)?ba:yi,this.isPropagationStopped=yi,this}return g(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var f=this.nativeEvent;f&&(f.preventDefault?f.preventDefault():typeof f.returnValue!="unknown"&&(f.returnValue=!1),this.isDefaultPrevented=ba)},stopPropagation:function(){var f=this.nativeEvent;f&&(f.stopPropagation?f.stopPropagation():typeof f.cancelBubble!="unknown"&&(f.cancelBubble=!0),this.isPropagationStopped=ba)},persist:function(){},isPersistent:ba}),l}var Sa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ea=Yn(Sa),os=g({},Sa,{view:0,detail:0}),iu=Yn(os),ls,yl,ta,_l=g({},os,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:cs,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==ta&&(ta&&s.type==="mousemove"?(ls=s.screenX-ta.screenX,yl=s.screenY-ta.screenY):yl=ls=0,ta=s),ls)},movementY:function(s){return"movementY"in s?s.movementY:yl}}),au=Yn(_l),Ao=g({},_l,{dataTransfer:0}),oh=Yn(Ao),lh=g({},os,{relatedTarget:0}),bo=Yn(lh),su=g({},Sa,{animationName:0,elapsedTime:0,pseudoElement:0}),ch=Yn(su),xl=g({},Sa,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),uh=Yn(xl),fh=g({},Sa,{data:0}),na=Yn(fh),hh={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},dh={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ph={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function mh(s){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(s):(s=ph[s])?!!l[s]:!1}function cs(){return mh}var hr=g({},os,{key:function(s){if(s.key){var l=hh[s.key]||s.key;if(l!=="Unidentified")return l}return s.type==="keypress"?(s=Eo(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?dh[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:cs,charCode:function(s){return s.type==="keypress"?Eo(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?Eo(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),gh=Yn(hr),vh=g({},_l,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ca=Yn(vh),v=g({},os,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:cs}),E=Yn(v),O=g({},Sa,{propertyName:0,elapsedTime:0,pseudoElement:0}),U=Yn(O),Q=g({},_l,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),ne=Yn(Q),_e=g({},Sa,{newState:0,oldState:0}),$e=Yn(_e),sn=[9,13,27,32],yt=Yr&&"CompositionEvent"in window,$t=null;Yr&&"documentMode"in document&&($t=document.documentMode);var Kr=Yr&&"TextEvent"in window&&!$t,ra=Yr&&(!yt||$t&&8<$t&&11>=$t),_i=" ",xi=!1;function So(s,l){switch(s){case"keyup":return sn.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function wl(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var El=!1;function lI(s,l){switch(s){case"compositionend":return wl(l);case"keypress":return l.which!==32?null:(xi=!0,_i);case"textInput":return s=l.data,s===_i&&xi?null:s;default:return null}}function cI(s,l){if(El)return s==="compositionend"||!yt&&So(s,l)?(s=ru(),wo=nu=Ji=null,El=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return ra&&l.locale!=="ko"?null:l.data;default:return null}}var uI={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function i2(s){var l=s&&s.nodeName&&s.nodeName.toLowerCase();return l==="input"?!!uI[s.type]:l==="textarea"}function a2(s,l,f,d){as?Zi?Zi.push(d):Zi=[d]:as=d,l=sd(l,"onChange"),0<l.length&&(f=new ea("onChange","change",null,f,d),s.push({event:f,listeners:l}))}var ou=null,lu=null;function fI(s){Ux(s,0)}function yh(s){var l=Or(s);if(vo(l))return s}function s2(s,l){if(s==="change")return l}var o2=!1;if(Yr){var Sp;if(Yr){var Cp="oninput"in document;if(!Cp){var l2=document.createElement("div");l2.setAttribute("oninput","return;"),Cp=typeof l2.oninput=="function"}Sp=Cp}else Sp=!1;o2=Sp&&(!document.documentMode||9<document.documentMode)}function c2(){ou&&(ou.detachEvent("onpropertychange",u2),lu=ou=null)}function u2(s){if(s.propertyName==="value"&&yh(lu)){var l=[];a2(l,lu,s,Xr(s)),ss(fI,l)}}function hI(s,l,f){s==="focusin"?(c2(),ou=l,lu=f,ou.attachEvent("onpropertychange",u2)):s==="focusout"&&c2()}function dI(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return yh(lu)}function pI(s,l){if(s==="click")return yh(l)}function mI(s,l){if(s==="input"||s==="change")return yh(l)}function gI(s,l){return s===l&&(s!==0||1/s===1/l)||s!==s&&l!==l}var Mr=typeof Object.is=="function"?Object.is:gI;function cu(s,l){if(Mr(s,l))return!0;if(typeof s!="object"||s===null||typeof l!="object"||l===null)return!1;var f=Object.keys(s),d=Object.keys(l);if(f.length!==d.length)return!1;for(d=0;d<f.length;d++){var y=f[d];if(!Fe.call(l,y)||!Mr(s[y],l[y]))return!1}return!0}function f2(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function h2(s,l){var f=f2(s);s=0;for(var d;f;){if(f.nodeType===3){if(d=s+f.textContent.length,s<=l&&d>=l)return{node:f,offset:l-s};s=d}e:{for(;f;){if(f.nextSibling){f=f.nextSibling;break e}f=f.parentNode}f=void 0}f=f2(f)}}function d2(s,l){return s&&l?s===l?!0:s&&s.nodeType===3?!1:l&&l.nodeType===3?d2(s,l.parentNode):"contains"in s?s.contains(l):s.compareDocumentPosition?!!(s.compareDocumentPosition(l)&16):!1:!1}function p2(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var l=Qi(s.document);l instanceof s.HTMLIFrameElement;){try{var f=typeof l.contentWindow.location.href=="string"}catch{f=!1}if(f)s=l.contentWindow;else break;l=Qi(s.document)}return l}function Tp(s){var l=s&&s.nodeName&&s.nodeName.toLowerCase();return l&&(l==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||l==="textarea"||s.contentEditable==="true")}var vI=Yr&&"documentMode"in document&&11>=document.documentMode,Al=null,Ip=null,uu=null,Np=!1;function m2(s,l,f){var d=f.window===f?f.document:f.nodeType===9?f:f.ownerDocument;Np||Al==null||Al!==Qi(d)||(d=Al,"selectionStart"in d&&Tp(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),uu&&cu(uu,d)||(uu=d,d=sd(Ip,"onSelect"),0<d.length&&(l=new ea("onSelect","select",null,l,f),s.push({event:l,listeners:d}),l.target=Al)))}function Co(s,l){var f={};return f[s.toLowerCase()]=l.toLowerCase(),f["Webkit"+s]="webkit"+l,f["Moz"+s]="moz"+l,f}var bl={animationend:Co("Animation","AnimationEnd"),animationiteration:Co("Animation","AnimationIteration"),animationstart:Co("Animation","AnimationStart"),transitionrun:Co("Transition","TransitionRun"),transitionstart:Co("Transition","TransitionStart"),transitioncancel:Co("Transition","TransitionCancel"),transitionend:Co("Transition","TransitionEnd")},Rp={},g2={};Yr&&(g2=document.createElement("div").style,"AnimationEvent"in window||(delete bl.animationend.animation,delete bl.animationiteration.animation,delete bl.animationstart.animation),"TransitionEvent"in window||delete bl.transitionend.transition);function To(s){if(Rp[s])return Rp[s];if(!bl[s])return s;var l=bl[s],f;for(f in l)if(l.hasOwnProperty(f)&&f in g2)return Rp[s]=l[f];return s}var v2=To("animationend"),y2=To("animationiteration"),_2=To("animationstart"),yI=To("transitionrun"),_I=To("transitionstart"),xI=To("transitioncancel"),x2=To("transitionend"),w2=new Map,Op="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Op.push("scrollEnd");function wi(s,l){w2.set(s,l),Ki(l,[s])}var _h=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var l=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(l))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)},Wr=[],Sl=0,Dp=0;function xh(){for(var s=Sl,l=Dp=Sl=0;l<s;){var f=Wr[l];Wr[l++]=null;var d=Wr[l];Wr[l++]=null;var y=Wr[l];Wr[l++]=null;var x=Wr[l];if(Wr[l++]=null,d!==null&&y!==null){var T=d.pending;T===null?y.next=y:(y.next=T.next,T.next=y),d.pending=y}x!==0&&E2(f,y,x)}}function wh(s,l,f,d){Wr[Sl++]=s,Wr[Sl++]=l,Wr[Sl++]=f,Wr[Sl++]=d,Dp|=d,s.lanes|=d,s=s.alternate,s!==null&&(s.lanes|=d)}function Mp(s,l,f,d){return wh(s,l,f,d),Eh(s)}function Io(s,l){return wh(s,null,null,l),Eh(s)}function E2(s,l,f){s.lanes|=f;var d=s.alternate;d!==null&&(d.lanes|=f);for(var y=!1,x=s.return;x!==null;)x.childLanes|=f,d=x.alternate,d!==null&&(d.childLanes|=f),x.tag===22&&(s=x.stateNode,s===null||s._visibility&1||(y=!0)),s=x,x=x.return;return s.tag===3?(x=s.stateNode,y&&l!==null&&(y=31-an(f),s=x.hiddenUpdates,d=s[y],d===null?s[y]=[l]:d.push(l),l.lane=f|536870912),x):null}function Eh(s){if(50<Du)throw Du=0,z1=null,Error(r(185));for(var l=s.return;l!==null;)s=l,l=s.return;return s.tag===3?s.stateNode:null}var Cl={};function wI(s,l,f,d){this.tag=s,this.key=f,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pr(s,l,f,d){return new wI(s,l,f,d)}function Pp(s){return s=s.prototype,!(!s||!s.isReactComponent)}function Ta(s,l){var f=s.alternate;return f===null?(f=Pr(s.tag,l,s.key,s.mode),f.elementType=s.elementType,f.type=s.type,f.stateNode=s.stateNode,f.alternate=s,s.alternate=f):(f.pendingProps=l,f.type=s.type,f.flags=0,f.subtreeFlags=0,f.deletions=null),f.flags=s.flags&65011712,f.childLanes=s.childLanes,f.lanes=s.lanes,f.child=s.child,f.memoizedProps=s.memoizedProps,f.memoizedState=s.memoizedState,f.updateQueue=s.updateQueue,l=s.dependencies,f.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},f.sibling=s.sibling,f.index=s.index,f.ref=s.ref,f.refCleanup=s.refCleanup,f}function A2(s,l){s.flags&=65011714;var f=s.alternate;return f===null?(s.childLanes=0,s.lanes=l,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=f.childLanes,s.lanes=f.lanes,s.child=f.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=f.memoizedProps,s.memoizedState=f.memoizedState,s.updateQueue=f.updateQueue,s.type=f.type,l=f.dependencies,s.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext}),s}function Ah(s,l,f,d,y,x){var T=0;if(d=s,typeof s=="function")Pp(s)&&(T=1);else if(typeof s=="string")T=C4(s,f,ve.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case N:return s=Pr(31,f,l,y),s.elementType=N,s.lanes=x,s;case S:return No(f.children,y,x,l);case D:T=8,y|=24;break;case C:return s=Pr(12,f,l,y|2),s.elementType=C,s.lanes=x,s;case X:return s=Pr(13,f,l,y),s.elementType=X,s.lanes=x,s;case F:return s=Pr(19,f,l,y),s.elementType=F,s.lanes=x,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case V:T=10;break e;case P:T=9;break e;case H:T=11;break e;case I:T=14;break e;case b:T=16,d=null;break e}T=29,f=Error(r(130,s===null?"null":typeof s,"")),d=null}return l=Pr(T,f,l,y),l.elementType=s,l.type=d,l.lanes=x,l}function No(s,l,f,d){return s=Pr(7,s,d,l),s.lanes=f,s}function kp(s,l,f){return s=Pr(6,s,null,l),s.lanes=f,s}function b2(s){var l=Pr(18,null,null,0);return l.stateNode=s,l}function Lp(s,l,f){return l=Pr(4,s.children!==null?s.children:[],s.key,l),l.lanes=f,l.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},l}var S2=new WeakMap;function Qr(s,l){if(typeof s=="object"&&s!==null){var f=S2.get(s);return f!==void 0?f:(l={value:s,source:l,stack:St(l)},S2.set(s,l),l)}return{value:s,source:l,stack:St(l)}}var Tl=[],Il=0,bh=null,fu=0,Zr=[],Jr=0,us=null,ia=1,aa="";function Ia(s,l){Tl[Il++]=fu,Tl[Il++]=bh,bh=s,fu=l}function C2(s,l,f){Zr[Jr++]=ia,Zr[Jr++]=aa,Zr[Jr++]=us,us=s;var d=ia;s=aa;var y=32-an(d)-1;d&=~(1<<y),f+=1;var x=32-an(l)+y;if(30<x){var T=y-y%5;x=(d&(1<<T)-1).toString(32),d>>=T,y-=T,ia=1<<32-an(l)+y|f<<y|d,aa=x+s}else ia=1<<x|f<<y|d,aa=s}function jp(s){s.return!==null&&(Ia(s,1),C2(s,1,0))}function Bp(s){for(;s===bh;)bh=Tl[--Il],Tl[Il]=null,fu=Tl[--Il],Tl[Il]=null;for(;s===us;)us=Zr[--Jr],Zr[Jr]=null,aa=Zr[--Jr],Zr[Jr]=null,ia=Zr[--Jr],Zr[Jr]=null}function T2(s,l){Zr[Jr++]=ia,Zr[Jr++]=aa,Zr[Jr++]=us,ia=l.id,aa=l.overflow,us=s}var Kn=null,Ut=null,lt=!1,fs=null,ei=!1,Vp=Error(r(519));function hs(s){var l=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw hu(Qr(l,s)),Vp}function I2(s){var l=s.stateNode,f=s.type,d=s.memoizedProps;switch(l[dn]=s,l[jn]=d,f){case"dialog":nt("cancel",l),nt("close",l);break;case"iframe":case"object":case"embed":nt("load",l);break;case"video":case"audio":for(f=0;f<Pu.length;f++)nt(Pu[f],l);break;case"source":nt("error",l);break;case"img":case"image":case"link":nt("error",l),nt("load",l);break;case"details":nt("toggle",l);break;case"input":nt("invalid",l),rh(l,d.value,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name,!0);break;case"select":nt("invalid",l);break;case"textarea":nt("invalid",l),rs(l,d.value,d.defaultValue,d.children)}f=d.children,typeof f!="string"&&typeof f!="number"&&typeof f!="bigint"||l.textContent===""+f||d.suppressHydrationWarning===!0||qx(l.textContent,f)?(d.popover!=null&&(nt("beforetoggle",l),nt("toggle",l)),d.onScroll!=null&&nt("scroll",l),d.onScrollEnd!=null&&nt("scrollend",l),d.onClick!=null&&(l.onclick=gi),l=!0):l=!1,l||hs(s,!0)}function N2(s){for(Kn=s.return;Kn;)switch(Kn.tag){case 5:case 31:case 13:ei=!1;return;case 27:case 3:ei=!0;return;default:Kn=Kn.return}}function Nl(s){if(s!==Kn)return!1;if(!lt)return N2(s),lt=!0,!1;var l=s.tag,f;if((f=l!==3&&l!==27)&&((f=l===5)&&(f=s.type,f=!(f!=="form"&&f!=="button")||rm(s.type,s.memoizedProps)),f=!f),f&&Ut&&hs(s),N2(s),l===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(317));Ut=ew(s)}else if(l===31){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(317));Ut=ew(s)}else l===27?(l=Ut,Cs(s.type)?(s=lm,lm=null,Ut=s):Ut=l):Ut=Kn?ni(s.stateNode.nextSibling):null;return!0}function Ro(){Ut=Kn=null,lt=!1}function Fp(){var s=fs;return s!==null&&(Ar===null?Ar=s:Ar.push.apply(Ar,s),fs=null),s}function hu(s){fs===null?fs=[s]:fs.push(s)}var Up=$(null),Oo=null,Na=null;function ds(s,l,f){pe(Up,l._currentValue),l._currentValue=f}function Ra(s){s._currentValue=Up.current,oe(Up)}function zp(s,l,f){for(;s!==null;){var d=s.alternate;if((s.childLanes&l)!==l?(s.childLanes|=l,d!==null&&(d.childLanes|=l)):d!==null&&(d.childLanes&l)!==l&&(d.childLanes|=l),s===f)break;s=s.return}}function Hp(s,l,f,d){var y=s.child;for(y!==null&&(y.return=s);y!==null;){var x=y.dependencies;if(x!==null){var T=y.child;x=x.firstContext;e:for(;x!==null;){var j=x;x=y;for(var q=0;q<l.length;q++)if(j.context===l[q]){x.lanes|=f,j=x.alternate,j!==null&&(j.lanes|=f),zp(x.return,f,s),d||(T=null);break e}x=j.next}}else if(y.tag===18){if(T=y.return,T===null)throw Error(r(341));T.lanes|=f,x=T.alternate,x!==null&&(x.lanes|=f),zp(T,f,s),T=null}else T=y.child;if(T!==null)T.return=y;else for(T=y;T!==null;){if(T===s){T=null;break}if(y=T.sibling,y!==null){y.return=T.return,T=y;break}T=T.return}y=T}}function Rl(s,l,f,d){s=null;for(var y=l,x=!1;y!==null;){if(!x){if((y.flags&524288)!==0)x=!0;else if((y.flags&262144)!==0)break}if(y.tag===10){var T=y.alternate;if(T===null)throw Error(r(387));if(T=T.memoizedProps,T!==null){var j=y.type;Mr(y.pendingProps.value,T.value)||(s!==null?s.push(j):s=[j])}}else if(y===Ee.current){if(T=y.alternate,T===null)throw Error(r(387));T.memoizedState.memoizedState!==y.memoizedState.memoizedState&&(s!==null?s.push(Vu):s=[Vu])}y=y.return}s!==null&&Hp(l,s,f,d),l.flags|=262144}function Sh(s){for(s=s.firstContext;s!==null;){if(!Mr(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function Do(s){Oo=s,Na=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function Wn(s){return R2(Oo,s)}function Ch(s,l){return Oo===null&&Do(s),R2(s,l)}function R2(s,l){var f=l._currentValue;if(l={context:l,memoizedValue:f,next:null},Na===null){if(s===null)throw Error(r(308));Na=l,s.dependencies={lanes:0,firstContext:l},s.flags|=524288}else Na=Na.next=l;return f}var EI=typeof AbortController<"u"?AbortController:function(){var s=[],l=this.signal={aborted:!1,addEventListener:function(f,d){s.push(d)}};this.abort=function(){l.aborted=!0,s.forEach(function(f){return f()})}},AI=n.unstable_scheduleCallback,bI=n.unstable_NormalPriority,gn={$$typeof:V,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Gp(){return{controller:new EI,data:new Map,refCount:0}}function du(s){s.refCount--,s.refCount===0&&AI(bI,function(){s.controller.abort()})}var pu=null,qp=0,Ol=0,Dl=null;function SI(s,l){if(pu===null){var f=pu=[];qp=0,Ol=Y1(),Dl={status:"pending",value:void 0,then:function(d){f.push(d)}}}return qp++,l.then(O2,O2),l}function O2(){if(--qp===0&&pu!==null){Dl!==null&&(Dl.status="fulfilled");var s=pu;pu=null,Ol=0,Dl=null;for(var l=0;l<s.length;l++)(0,s[l])()}}function CI(s,l){var f=[],d={status:"pending",value:null,reason:null,then:function(y){f.push(y)}};return s.then(function(){d.status="fulfilled",d.value=l;for(var y=0;y<f.length;y++)(0,f[y])(l)},function(y){for(d.status="rejected",d.reason=y,y=0;y<f.length;y++)(0,f[y])(void 0)}),d}var D2=K.S;K.S=function(s,l){mx=ae(),typeof l=="object"&&l!==null&&typeof l.then=="function"&&SI(s,l),D2!==null&&D2(s,l)};var Mo=$(null);function $p(){var s=Mo.current;return s!==null?s:Bt.pooledCache}function Th(s,l){l===null?pe(Mo,Mo.current):pe(Mo,l.pool)}function M2(){var s=$p();return s===null?null:{parent:gn._currentValue,pool:s}}var Ml=Error(r(460)),Xp=Error(r(474)),Ih=Error(r(542)),Nh={then:function(){}};function P2(s){return s=s.status,s==="fulfilled"||s==="rejected"}function k2(s,l,f){switch(f=s[f],f===void 0?s.push(l):f!==l&&(l.then(gi,gi),l=f),l.status){case"fulfilled":return l.value;case"rejected":throw s=l.reason,j2(s),s;default:if(typeof l.status=="string")l.then(gi,gi);else{if(s=Bt,s!==null&&100<s.shellSuspendCounter)throw Error(r(482));s=l,s.status="pending",s.then(function(d){if(l.status==="pending"){var y=l;y.status="fulfilled",y.value=d}},function(d){if(l.status==="pending"){var y=l;y.status="rejected",y.reason=d}})}switch(l.status){case"fulfilled":return l.value;case"rejected":throw s=l.reason,j2(s),s}throw ko=l,Ml}}function Po(s){try{var l=s._init;return l(s._payload)}catch(f){throw f!==null&&typeof f=="object"&&typeof f.then=="function"?(ko=f,Ml):f}}var ko=null;function L2(){if(ko===null)throw Error(r(459));var s=ko;return ko=null,s}function j2(s){if(s===Ml||s===Ih)throw Error(r(483))}var Pl=null,mu=0;function Rh(s){var l=mu;return mu+=1,Pl===null&&(Pl=[]),k2(Pl,s,l)}function gu(s,l){l=l.props.ref,s.ref=l!==void 0?l:null}function Oh(s,l){throw l.$$typeof===_?Error(r(525)):(s=Object.prototype.toString.call(l),Error(r(31,s==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":s)))}function B2(s){function l(W,Y){if(s){var J=W.deletions;J===null?(W.deletions=[Y],W.flags|=16):J.push(Y)}}function f(W,Y){if(!s)return null;for(;Y!==null;)l(W,Y),Y=Y.sibling;return null}function d(W){for(var Y=new Map;W!==null;)W.key!==null?Y.set(W.key,W):Y.set(W.index,W),W=W.sibling;return Y}function y(W,Y){return W=Ta(W,Y),W.index=0,W.sibling=null,W}function x(W,Y,J){return W.index=J,s?(J=W.alternate,J!==null?(J=J.index,J<Y?(W.flags|=67108866,Y):J):(W.flags|=67108866,Y)):(W.flags|=1048576,Y)}function T(W){return s&&W.alternate===null&&(W.flags|=67108866),W}function j(W,Y,J,fe){return Y===null||Y.tag!==6?(Y=kp(J,W.mode,fe),Y.return=W,Y):(Y=y(Y,J),Y.return=W,Y)}function q(W,Y,J,fe){var De=J.type;return De===S?ce(W,Y,J.props.children,fe,J.key):Y!==null&&(Y.elementType===De||typeof De=="object"&&De!==null&&De.$$typeof===b&&Po(De)===Y.type)?(Y=y(Y,J.props),gu(Y,J),Y.return=W,Y):(Y=Ah(J.type,J.key,J.props,null,W.mode,fe),gu(Y,J),Y.return=W,Y)}function ee(W,Y,J,fe){return Y===null||Y.tag!==4||Y.stateNode.containerInfo!==J.containerInfo||Y.stateNode.implementation!==J.implementation?(Y=Lp(J,W.mode,fe),Y.return=W,Y):(Y=y(Y,J.children||[]),Y.return=W,Y)}function ce(W,Y,J,fe,De){return Y===null||Y.tag!==7?(Y=No(J,W.mode,fe,De),Y.return=W,Y):(Y=y(Y,J),Y.return=W,Y)}function he(W,Y,J){if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return Y=kp(""+Y,W.mode,J),Y.return=W,Y;if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case w:return J=Ah(Y.type,Y.key,Y.props,null,W.mode,J),gu(J,Y),J.return=W,J;case A:return Y=Lp(Y,W.mode,J),Y.return=W,Y;case b:return Y=Po(Y),he(W,Y,J)}if(ge(Y)||B(Y))return Y=No(Y,W.mode,J,null),Y.return=W,Y;if(typeof Y.then=="function")return he(W,Rh(Y),J);if(Y.$$typeof===V)return he(W,Ch(W,Y),J);Oh(W,Y)}return null}function te(W,Y,J,fe){var De=Y!==null?Y.key:null;if(typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint")return De!==null?null:j(W,Y,""+J,fe);if(typeof J=="object"&&J!==null){switch(J.$$typeof){case w:return J.key===De?q(W,Y,J,fe):null;case A:return J.key===De?ee(W,Y,J,fe):null;case b:return J=Po(J),te(W,Y,J,fe)}if(ge(J)||B(J))return De!==null?null:ce(W,Y,J,fe,null);if(typeof J.then=="function")return te(W,Y,Rh(J),fe);if(J.$$typeof===V)return te(W,Y,Ch(W,J),fe);Oh(W,J)}return null}function re(W,Y,J,fe,De){if(typeof fe=="string"&&fe!==""||typeof fe=="number"||typeof fe=="bigint")return W=W.get(J)||null,j(Y,W,""+fe,De);if(typeof fe=="object"&&fe!==null){switch(fe.$$typeof){case w:return W=W.get(fe.key===null?J:fe.key)||null,q(Y,W,fe,De);case A:return W=W.get(fe.key===null?J:fe.key)||null,ee(Y,W,fe,De);case b:return fe=Po(fe),re(W,Y,J,fe,De)}if(ge(fe)||B(fe))return W=W.get(J)||null,ce(Y,W,fe,De,null);if(typeof fe.then=="function")return re(W,Y,J,Rh(fe),De);if(fe.$$typeof===V)return re(W,Y,J,Ch(Y,fe),De);Oh(Y,fe)}return null}function Ce(W,Y,J,fe){for(var De=null,pt=null,Ie=Y,We=Y=0,it=null;Ie!==null&&We<J.length;We++){Ie.index>We?(it=Ie,Ie=null):it=Ie.sibling;var mt=te(W,Ie,J[We],fe);if(mt===null){Ie===null&&(Ie=it);break}s&&Ie&&mt.alternate===null&&l(W,Ie),Y=x(mt,Y,We),pt===null?De=mt:pt.sibling=mt,pt=mt,Ie=it}if(We===J.length)return f(W,Ie),lt&&Ia(W,We),De;if(Ie===null){for(;We<J.length;We++)Ie=he(W,J[We],fe),Ie!==null&&(Y=x(Ie,Y,We),pt===null?De=Ie:pt.sibling=Ie,pt=Ie);return lt&&Ia(W,We),De}for(Ie=d(Ie);We<J.length;We++)it=re(Ie,W,We,J[We],fe),it!==null&&(s&&it.alternate!==null&&Ie.delete(it.key===null?We:it.key),Y=x(it,Y,We),pt===null?De=it:pt.sibling=it,pt=it);return s&&Ie.forEach(function(Os){return l(W,Os)}),lt&&Ia(W,We),De}function Le(W,Y,J,fe){if(J==null)throw Error(r(151));for(var De=null,pt=null,Ie=Y,We=Y=0,it=null,mt=J.next();Ie!==null&&!mt.done;We++,mt=J.next()){Ie.index>We?(it=Ie,Ie=null):it=Ie.sibling;var Os=te(W,Ie,mt.value,fe);if(Os===null){Ie===null&&(Ie=it);break}s&&Ie&&Os.alternate===null&&l(W,Ie),Y=x(Os,Y,We),pt===null?De=Os:pt.sibling=Os,pt=Os,Ie=it}if(mt.done)return f(W,Ie),lt&&Ia(W,We),De;if(Ie===null){for(;!mt.done;We++,mt=J.next())mt=he(W,mt.value,fe),mt!==null&&(Y=x(mt,Y,We),pt===null?De=mt:pt.sibling=mt,pt=mt);return lt&&Ia(W,We),De}for(Ie=d(Ie);!mt.done;We++,mt=J.next())mt=re(Ie,W,We,mt.value,fe),mt!==null&&(s&&mt.alternate!==null&&Ie.delete(mt.key===null?We:mt.key),Y=x(mt,Y,We),pt===null?De=mt:pt.sibling=mt,pt=mt);return s&&Ie.forEach(function(j4){return l(W,j4)}),lt&&Ia(W,We),De}function kt(W,Y,J,fe){if(typeof J=="object"&&J!==null&&J.type===S&&J.key===null&&(J=J.props.children),typeof J=="object"&&J!==null){switch(J.$$typeof){case w:e:{for(var De=J.key;Y!==null;){if(Y.key===De){if(De=J.type,De===S){if(Y.tag===7){f(W,Y.sibling),fe=y(Y,J.props.children),fe.return=W,W=fe;break e}}else if(Y.elementType===De||typeof De=="object"&&De!==null&&De.$$typeof===b&&Po(De)===Y.type){f(W,Y.sibling),fe=y(Y,J.props),gu(fe,J),fe.return=W,W=fe;break e}f(W,Y);break}else l(W,Y);Y=Y.sibling}J.type===S?(fe=No(J.props.children,W.mode,fe,J.key),fe.return=W,W=fe):(fe=Ah(J.type,J.key,J.props,null,W.mode,fe),gu(fe,J),fe.return=W,W=fe)}return T(W);case A:e:{for(De=J.key;Y!==null;){if(Y.key===De)if(Y.tag===4&&Y.stateNode.containerInfo===J.containerInfo&&Y.stateNode.implementation===J.implementation){f(W,Y.sibling),fe=y(Y,J.children||[]),fe.return=W,W=fe;break e}else{f(W,Y);break}else l(W,Y);Y=Y.sibling}fe=Lp(J,W.mode,fe),fe.return=W,W=fe}return T(W);case b:return J=Po(J),kt(W,Y,J,fe)}if(ge(J))return Ce(W,Y,J,fe);if(B(J)){if(De=B(J),typeof De!="function")throw Error(r(150));return J=De.call(J),Le(W,Y,J,fe)}if(typeof J.then=="function")return kt(W,Y,Rh(J),fe);if(J.$$typeof===V)return kt(W,Y,Ch(W,J),fe);Oh(W,J)}return typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint"?(J=""+J,Y!==null&&Y.tag===6?(f(W,Y.sibling),fe=y(Y,J),fe.return=W,W=fe):(f(W,Y),fe=kp(J,W.mode,fe),fe.return=W,W=fe),T(W)):f(W,Y)}return function(W,Y,J,fe){try{mu=0;var De=kt(W,Y,J,fe);return Pl=null,De}catch(Ie){if(Ie===Ml||Ie===Ih)throw Ie;var pt=Pr(29,Ie,null,W.mode);return pt.lanes=fe,pt.return=W,pt}finally{}}}var Lo=B2(!0),V2=B2(!1),ps=!1;function Yp(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Kp(s,l){s=s.updateQueue,l.updateQueue===s&&(l.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function ms(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function gs(s,l,f){var d=s.updateQueue;if(d===null)return null;if(d=d.shared,(_t&2)!==0){var y=d.pending;return y===null?l.next=l:(l.next=y.next,y.next=l),d.pending=l,l=Eh(s),E2(s,null,f),l}return wh(s,d,l,f),Eh(s)}function vu(s,l,f){if(l=l.updateQueue,l!==null&&(l=l.shared,(f&4194048)!==0)){var d=l.lanes;d&=s.pendingLanes,f|=d,l.lanes=f,Gc(s,f)}}function Wp(s,l){var f=s.updateQueue,d=s.alternate;if(d!==null&&(d=d.updateQueue,f===d)){var y=null,x=null;if(f=f.firstBaseUpdate,f!==null){do{var T={lane:f.lane,tag:f.tag,payload:f.payload,callback:null,next:null};x===null?y=x=T:x=x.next=T,f=f.next}while(f!==null);x===null?y=x=l:x=x.next=l}else y=x=l;f={baseState:d.baseState,firstBaseUpdate:y,lastBaseUpdate:x,shared:d.shared,callbacks:d.callbacks},s.updateQueue=f;return}s=f.lastBaseUpdate,s===null?f.firstBaseUpdate=l:s.next=l,f.lastBaseUpdate=l}var Qp=!1;function yu(){if(Qp){var s=Dl;if(s!==null)throw s}}function _u(s,l,f,d){Qp=!1;var y=s.updateQueue;ps=!1;var x=y.firstBaseUpdate,T=y.lastBaseUpdate,j=y.shared.pending;if(j!==null){y.shared.pending=null;var q=j,ee=q.next;q.next=null,T===null?x=ee:T.next=ee,T=q;var ce=s.alternate;ce!==null&&(ce=ce.updateQueue,j=ce.lastBaseUpdate,j!==T&&(j===null?ce.firstBaseUpdate=ee:j.next=ee,ce.lastBaseUpdate=q))}if(x!==null){var he=y.baseState;T=0,ce=ee=q=null,j=x;do{var te=j.lane&-536870913,re=te!==j.lane;if(re?(rt&te)===te:(d&te)===te){te!==0&&te===Ol&&(Qp=!0),ce!==null&&(ce=ce.next={lane:0,tag:j.tag,payload:j.payload,callback:null,next:null});e:{var Ce=s,Le=j;te=l;var kt=f;switch(Le.tag){case 1:if(Ce=Le.payload,typeof Ce=="function"){he=Ce.call(kt,he,te);break e}he=Ce;break e;case 3:Ce.flags=Ce.flags&-65537|128;case 0:if(Ce=Le.payload,te=typeof Ce=="function"?Ce.call(kt,he,te):Ce,te==null)break e;he=g({},he,te);break e;case 2:ps=!0}}te=j.callback,te!==null&&(s.flags|=64,re&&(s.flags|=8192),re=y.callbacks,re===null?y.callbacks=[te]:re.push(te))}else re={lane:te,tag:j.tag,payload:j.payload,callback:j.callback,next:null},ce===null?(ee=ce=re,q=he):ce=ce.next=re,T|=te;if(j=j.next,j===null){if(j=y.shared.pending,j===null)break;re=j,j=re.next,re.next=null,y.lastBaseUpdate=re,y.shared.pending=null}}while(!0);ce===null&&(q=he),y.baseState=q,y.firstBaseUpdate=ee,y.lastBaseUpdate=ce,x===null&&(y.shared.lanes=0),ws|=T,s.lanes=T,s.memoizedState=he}}function F2(s,l){if(typeof s!="function")throw Error(r(191,s));s.call(l)}function U2(s,l){var f=s.callbacks;if(f!==null)for(s.callbacks=null,s=0;s<f.length;s++)F2(f[s],l)}var kl=$(null),Dh=$(0);function z2(s,l){s=Va,pe(Dh,s),pe(kl,l),Va=s|l.baseLanes}function Zp(){pe(Dh,Va),pe(kl,kl.current)}function Jp(){Va=Dh.current,oe(kl),oe(Dh)}var kr=$(null),ti=null;function vs(s){var l=s.alternate;pe(on,on.current&1),pe(kr,s),ti===null&&(l===null||kl.current!==null||l.memoizedState!==null)&&(ti=s)}function e1(s){pe(on,on.current),pe(kr,s),ti===null&&(ti=s)}function H2(s){s.tag===22?(pe(on,on.current),pe(kr,s),ti===null&&(ti=s)):ys()}function ys(){pe(on,on.current),pe(kr,kr.current)}function Lr(s){oe(kr),ti===s&&(ti=null),oe(on)}var on=$(0);function Mh(s){for(var l=s;l!==null;){if(l.tag===13){var f=l.memoizedState;if(f!==null&&(f=f.dehydrated,f===null||sm(f)||om(f)))return l}else if(l.tag===19&&(l.memoizedProps.revealOrder==="forwards"||l.memoizedProps.revealOrder==="backwards"||l.memoizedProps.revealOrder==="unstable_legacy-backwards"||l.memoizedProps.revealOrder==="together")){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===s)break;for(;l.sibling===null;){if(l.return===null||l.return===s)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}var Oa=0,Xe=null,Mt=null,vn=null,Ph=!1,Ll=!1,jo=!1,kh=0,xu=0,jl=null,TI=0;function tn(){throw Error(r(321))}function t1(s,l){if(l===null)return!1;for(var f=0;f<l.length&&f<s.length;f++)if(!Mr(s[f],l[f]))return!1;return!0}function n1(s,l,f,d,y,x){return Oa=x,Xe=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,K.H=s===null||s.memoizedState===null?C_:v1,jo=!1,x=f(d,y),jo=!1,Ll&&(x=q2(l,f,d,y)),G2(s),x}function G2(s){K.H=Au;var l=Mt!==null&&Mt.next!==null;if(Oa=0,vn=Mt=Xe=null,Ph=!1,xu=0,jl=null,l)throw Error(r(300));s===null||yn||(s=s.dependencies,s!==null&&Sh(s)&&(yn=!0))}function q2(s,l,f,d){Xe=s;var y=0;do{if(Ll&&(jl=null),xu=0,Ll=!1,25<=y)throw Error(r(301));if(y+=1,vn=Mt=null,s.updateQueue!=null){var x=s.updateQueue;x.lastEffect=null,x.events=null,x.stores=null,x.memoCache!=null&&(x.memoCache.index=0)}K.H=T_,x=l(f,d)}while(Ll);return x}function II(){var s=K.H,l=s.useState()[0];return l=typeof l.then=="function"?wu(l):l,s=s.useState()[0],(Mt!==null?Mt.memoizedState:null)!==s&&(Xe.flags|=1024),l}function r1(){var s=kh!==0;return kh=0,s}function i1(s,l,f){l.updateQueue=s.updateQueue,l.flags&=-2053,s.lanes&=~f}function a1(s){if(Ph){for(s=s.memoizedState;s!==null;){var l=s.queue;l!==null&&(l.pending=null),s=s.next}Ph=!1}Oa=0,vn=Mt=Xe=null,Ll=!1,xu=kh=0,jl=null}function dr(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return vn===null?Xe.memoizedState=vn=s:vn=vn.next=s,vn}function ln(){if(Mt===null){var s=Xe.alternate;s=s!==null?s.memoizedState:null}else s=Mt.next;var l=vn===null?Xe.memoizedState:vn.next;if(l!==null)vn=l,Mt=s;else{if(s===null)throw Xe.alternate===null?Error(r(467)):Error(r(310));Mt=s,s={memoizedState:Mt.memoizedState,baseState:Mt.baseState,baseQueue:Mt.baseQueue,queue:Mt.queue,next:null},vn===null?Xe.memoizedState=vn=s:vn=vn.next=s}return vn}function Lh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function wu(s){var l=xu;return xu+=1,jl===null&&(jl=[]),s=k2(jl,s,l),l=Xe,(vn===null?l.memoizedState:vn.next)===null&&(l=l.alternate,K.H=l===null||l.memoizedState===null?C_:v1),s}function jh(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return wu(s);if(s.$$typeof===V)return Wn(s)}throw Error(r(438,String(s)))}function s1(s){var l=null,f=Xe.updateQueue;if(f!==null&&(l=f.memoCache),l==null){var d=Xe.alternate;d!==null&&(d=d.updateQueue,d!==null&&(d=d.memoCache,d!=null&&(l={data:d.data.map(function(y){return y.slice()}),index:0})))}if(l==null&&(l={data:[],index:0}),f===null&&(f=Lh(),Xe.updateQueue=f),f.memoCache=l,f=l.data[l.index],f===void 0)for(f=l.data[l.index]=Array(s),d=0;d<s;d++)f[d]=R;return l.index++,f}function Da(s,l){return typeof l=="function"?l(s):l}function Bh(s){var l=ln();return o1(l,Mt,s)}function o1(s,l,f){var d=s.queue;if(d===null)throw Error(r(311));d.lastRenderedReducer=f;var y=s.baseQueue,x=d.pending;if(x!==null){if(y!==null){var T=y.next;y.next=x.next,x.next=T}l.baseQueue=y=x,d.pending=null}if(x=s.baseState,y===null)s.memoizedState=x;else{l=y.next;var j=T=null,q=null,ee=l,ce=!1;do{var he=ee.lane&-536870913;if(he!==ee.lane?(rt&he)===he:(Oa&he)===he){var te=ee.revertLane;if(te===0)q!==null&&(q=q.next={lane:0,revertLane:0,gesture:null,action:ee.action,hasEagerState:ee.hasEagerState,eagerState:ee.eagerState,next:null}),he===Ol&&(ce=!0);else if((Oa&te)===te){ee=ee.next,te===Ol&&(ce=!0);continue}else he={lane:0,revertLane:ee.revertLane,gesture:null,action:ee.action,hasEagerState:ee.hasEagerState,eagerState:ee.eagerState,next:null},q===null?(j=q=he,T=x):q=q.next=he,Xe.lanes|=te,ws|=te;he=ee.action,jo&&f(x,he),x=ee.hasEagerState?ee.eagerState:f(x,he)}else te={lane:he,revertLane:ee.revertLane,gesture:ee.gesture,action:ee.action,hasEagerState:ee.hasEagerState,eagerState:ee.eagerState,next:null},q===null?(j=q=te,T=x):q=q.next=te,Xe.lanes|=he,ws|=he;ee=ee.next}while(ee!==null&&ee!==l);if(q===null?T=x:q.next=j,!Mr(x,s.memoizedState)&&(yn=!0,ce&&(f=Dl,f!==null)))throw f;s.memoizedState=x,s.baseState=T,s.baseQueue=q,d.lastRenderedState=x}return y===null&&(d.lanes=0),[s.memoizedState,d.dispatch]}function l1(s){var l=ln(),f=l.queue;if(f===null)throw Error(r(311));f.lastRenderedReducer=s;var d=f.dispatch,y=f.pending,x=l.memoizedState;if(y!==null){f.pending=null;var T=y=y.next;do x=s(x,T.action),T=T.next;while(T!==y);Mr(x,l.memoizedState)||(yn=!0),l.memoizedState=x,l.baseQueue===null&&(l.baseState=x),f.lastRenderedState=x}return[x,d]}function $2(s,l,f){var d=Xe,y=ln(),x=lt;if(x){if(f===void 0)throw Error(r(407));f=f()}else f=l();var T=!Mr((Mt||y).memoizedState,f);if(T&&(y.memoizedState=f,yn=!0),y=y.queue,f1(K2.bind(null,d,y,s),[s]),y.getSnapshot!==l||T||vn!==null&&vn.memoizedState.tag&1){if(d.flags|=2048,Bl(9,{destroy:void 0},Y2.bind(null,d,y,f,l),null),Bt===null)throw Error(r(349));x||(Oa&127)!==0||X2(d,l,f)}return f}function X2(s,l,f){s.flags|=16384,s={getSnapshot:l,value:f},l=Xe.updateQueue,l===null?(l=Lh(),Xe.updateQueue=l,l.stores=[s]):(f=l.stores,f===null?l.stores=[s]:f.push(s))}function Y2(s,l,f,d){l.value=f,l.getSnapshot=d,W2(l)&&Q2(s)}function K2(s,l,f){return f(function(){W2(l)&&Q2(s)})}function W2(s){var l=s.getSnapshot;s=s.value;try{var f=l();return!Mr(s,f)}catch{return!0}}function Q2(s){var l=Io(s,2);l!==null&&br(l,s,2)}function c1(s){var l=dr();if(typeof s=="function"){var f=s;if(s=f(),jo){Ln(!0);try{f()}finally{Ln(!1)}}}return l.memoizedState=l.baseState=s,l.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Da,lastRenderedState:s},l}function Z2(s,l,f,d){return s.baseState=f,o1(s,Mt,typeof d=="function"?d:Da)}function NI(s,l,f,d,y){if(Uh(s))throw Error(r(485));if(s=l.action,s!==null){var x={payload:y,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(T){x.listeners.push(T)}};K.T!==null?f(!0):x.isTransition=!1,d(x),f=l.pending,f===null?(x.next=l.pending=x,J2(l,x)):(x.next=f.next,l.pending=f.next=x)}}function J2(s,l){var f=l.action,d=l.payload,y=s.state;if(l.isTransition){var x=K.T,T={};K.T=T;try{var j=f(y,d),q=K.S;q!==null&&q(T,j),e_(s,l,j)}catch(ee){u1(s,l,ee)}finally{x!==null&&T.types!==null&&(x.types=T.types),K.T=x}}else try{x=f(y,d),e_(s,l,x)}catch(ee){u1(s,l,ee)}}function e_(s,l,f){f!==null&&typeof f=="object"&&typeof f.then=="function"?f.then(function(d){t_(s,l,d)},function(d){return u1(s,l,d)}):t_(s,l,f)}function t_(s,l,f){l.status="fulfilled",l.value=f,n_(l),s.state=f,l=s.pending,l!==null&&(f=l.next,f===l?s.pending=null:(f=f.next,l.next=f,J2(s,f)))}function u1(s,l,f){var d=s.pending;if(s.pending=null,d!==null){d=d.next;do l.status="rejected",l.reason=f,n_(l),l=l.next;while(l!==d)}s.action=null}function n_(s){s=s.listeners;for(var l=0;l<s.length;l++)(0,s[l])()}function r_(s,l){return l}function i_(s,l){if(lt){var f=Bt.formState;if(f!==null){e:{var d=Xe;if(lt){if(Ut){t:{for(var y=Ut,x=ei;y.nodeType!==8;){if(!x){y=null;break t}if(y=ni(y.nextSibling),y===null){y=null;break t}}x=y.data,y=x==="F!"||x==="F"?y:null}if(y){Ut=ni(y.nextSibling),d=y.data==="F!";break e}}hs(d)}d=!1}d&&(l=f[0])}}return f=dr(),f.memoizedState=f.baseState=l,d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r_,lastRenderedState:l},f.queue=d,f=A_.bind(null,Xe,d),d.dispatch=f,d=c1(!1),x=g1.bind(null,Xe,!1,d.queue),d=dr(),y={state:l,dispatch:null,action:s,pending:null},d.queue=y,f=NI.bind(null,Xe,y,x,f),y.dispatch=f,d.memoizedState=s,[l,f,!1]}function a_(s){var l=ln();return s_(l,Mt,s)}function s_(s,l,f){if(l=o1(s,l,r_)[0],s=Bh(Da)[0],typeof l=="object"&&l!==null&&typeof l.then=="function")try{var d=wu(l)}catch(T){throw T===Ml?Ih:T}else d=l;l=ln();var y=l.queue,x=y.dispatch;return f!==l.memoizedState&&(Xe.flags|=2048,Bl(9,{destroy:void 0},RI.bind(null,y,f),null)),[d,x,s]}function RI(s,l){s.action=l}function o_(s){var l=ln(),f=Mt;if(f!==null)return s_(l,f,s);ln(),l=l.memoizedState,f=ln();var d=f.queue.dispatch;return f.memoizedState=s,[l,d,!1]}function Bl(s,l,f,d){return s={tag:s,create:f,deps:d,inst:l,next:null},l=Xe.updateQueue,l===null&&(l=Lh(),Xe.updateQueue=l),f=l.lastEffect,f===null?l.lastEffect=s.next=s:(d=f.next,f.next=s,s.next=d,l.lastEffect=s),s}function l_(){return ln().memoizedState}function Vh(s,l,f,d){var y=dr();Xe.flags|=s,y.memoizedState=Bl(1|l,{destroy:void 0},f,d===void 0?null:d)}function Fh(s,l,f,d){var y=ln();d=d===void 0?null:d;var x=y.memoizedState.inst;Mt!==null&&d!==null&&t1(d,Mt.memoizedState.deps)?y.memoizedState=Bl(l,x,f,d):(Xe.flags|=s,y.memoizedState=Bl(1|l,x,f,d))}function c_(s,l){Vh(8390656,8,s,l)}function f1(s,l){Fh(2048,8,s,l)}function OI(s){Xe.flags|=4;var l=Xe.updateQueue;if(l===null)l=Lh(),Xe.updateQueue=l,l.events=[s];else{var f=l.events;f===null?l.events=[s]:f.push(s)}}function u_(s){var l=ln().memoizedState;return OI({ref:l,nextImpl:s}),function(){if((_t&2)!==0)throw Error(r(440));return l.impl.apply(void 0,arguments)}}function f_(s,l){return Fh(4,2,s,l)}function h_(s,l){return Fh(4,4,s,l)}function d_(s,l){if(typeof l=="function"){s=s();var f=l(s);return function(){typeof f=="function"?f():l(null)}}if(l!=null)return s=s(),l.current=s,function(){l.current=null}}function p_(s,l,f){f=f!=null?f.concat([s]):null,Fh(4,4,d_.bind(null,l,s),f)}function h1(){}function m_(s,l){var f=ln();l=l===void 0?null:l;var d=f.memoizedState;return l!==null&&t1(l,d[1])?d[0]:(f.memoizedState=[s,l],s)}function g_(s,l){var f=ln();l=l===void 0?null:l;var d=f.memoizedState;if(l!==null&&t1(l,d[1]))return d[0];if(d=s(),jo){Ln(!0);try{s()}finally{Ln(!1)}}return f.memoizedState=[d,l],d}function d1(s,l,f){return f===void 0||(Oa&1073741824)!==0&&(rt&261930)===0?s.memoizedState=l:(s.memoizedState=f,s=vx(),Xe.lanes|=s,ws|=s,f)}function v_(s,l,f,d){return Mr(f,l)?f:kl.current!==null?(s=d1(s,f,d),Mr(s,l)||(yn=!0),s):(Oa&42)===0||(Oa&1073741824)!==0&&(rt&261930)===0?(yn=!0,s.memoizedState=f):(s=vx(),Xe.lanes|=s,ws|=s,l)}function y_(s,l,f,d,y){var x=G.p;G.p=x!==0&&8>x?x:8;var T=K.T,j={};K.T=j,g1(s,!1,l,f);try{var q=y(),ee=K.S;if(ee!==null&&ee(j,q),q!==null&&typeof q=="object"&&typeof q.then=="function"){var ce=CI(q,d);Eu(s,l,ce,Vr(s))}else Eu(s,l,d,Vr(s))}catch(he){Eu(s,l,{then:function(){},status:"rejected",reason:he},Vr())}finally{G.p=x,T!==null&&j.types!==null&&(T.types=j.types),K.T=T}}function DI(){}function p1(s,l,f,d){if(s.tag!==5)throw Error(r(476));var y=__(s).queue;y_(s,y,l,le,f===null?DI:function(){return x_(s),f(d)})}function __(s){var l=s.memoizedState;if(l!==null)return l;l={memoizedState:le,baseState:le,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Da,lastRenderedState:le},next:null};var f={};return l.next={memoizedState:f,baseState:f,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Da,lastRenderedState:f},next:null},s.memoizedState=l,s=s.alternate,s!==null&&(s.memoizedState=l),l}function x_(s){var l=__(s);l.next===null&&(l=s.alternate.memoizedState),Eu(s,l.next.queue,{},Vr())}function m1(){return Wn(Vu)}function w_(){return ln().memoizedState}function E_(){return ln().memoizedState}function MI(s){for(var l=s.return;l!==null;){switch(l.tag){case 24:case 3:var f=Vr();s=ms(f);var d=gs(l,s,f);d!==null&&(br(d,l,f),vu(d,l,f)),l={cache:Gp()},s.payload=l;return}l=l.return}}function PI(s,l,f){var d=Vr();f={lane:d,revertLane:0,gesture:null,action:f,hasEagerState:!1,eagerState:null,next:null},Uh(s)?b_(l,f):(f=Mp(s,l,f,d),f!==null&&(br(f,s,d),S_(f,l,d)))}function A_(s,l,f){var d=Vr();Eu(s,l,f,d)}function Eu(s,l,f,d){var y={lane:d,revertLane:0,gesture:null,action:f,hasEagerState:!1,eagerState:null,next:null};if(Uh(s))b_(l,y);else{var x=s.alternate;if(s.lanes===0&&(x===null||x.lanes===0)&&(x=l.lastRenderedReducer,x!==null))try{var T=l.lastRenderedState,j=x(T,f);if(y.hasEagerState=!0,y.eagerState=j,Mr(j,T))return wh(s,l,y,0),Bt===null&&xh(),!1}catch{}finally{}if(f=Mp(s,l,y,d),f!==null)return br(f,s,d),S_(f,l,d),!0}return!1}function g1(s,l,f,d){if(d={lane:2,revertLane:Y1(),gesture:null,action:d,hasEagerState:!1,eagerState:null,next:null},Uh(s)){if(l)throw Error(r(479))}else l=Mp(s,f,d,2),l!==null&&br(l,s,2)}function Uh(s){var l=s.alternate;return s===Xe||l!==null&&l===Xe}function b_(s,l){Ll=Ph=!0;var f=s.pending;f===null?l.next=l:(l.next=f.next,f.next=l),s.pending=l}function S_(s,l,f){if((f&4194048)!==0){var d=l.lanes;d&=s.pendingLanes,f|=d,l.lanes=f,Gc(s,f)}}var Au={readContext:Wn,use:jh,useCallback:tn,useContext:tn,useEffect:tn,useImperativeHandle:tn,useLayoutEffect:tn,useInsertionEffect:tn,useMemo:tn,useReducer:tn,useRef:tn,useState:tn,useDebugValue:tn,useDeferredValue:tn,useTransition:tn,useSyncExternalStore:tn,useId:tn,useHostTransitionStatus:tn,useFormState:tn,useActionState:tn,useOptimistic:tn,useMemoCache:tn,useCacheRefresh:tn};Au.useEffectEvent=tn;var C_={readContext:Wn,use:jh,useCallback:function(s,l){return dr().memoizedState=[s,l===void 0?null:l],s},useContext:Wn,useEffect:c_,useImperativeHandle:function(s,l,f){f=f!=null?f.concat([s]):null,Vh(4194308,4,d_.bind(null,l,s),f)},useLayoutEffect:function(s,l){return Vh(4194308,4,s,l)},useInsertionEffect:function(s,l){Vh(4,2,s,l)},useMemo:function(s,l){var f=dr();l=l===void 0?null:l;var d=s();if(jo){Ln(!0);try{s()}finally{Ln(!1)}}return f.memoizedState=[d,l],d},useReducer:function(s,l,f){var d=dr();if(f!==void 0){var y=f(l);if(jo){Ln(!0);try{f(l)}finally{Ln(!1)}}}else y=l;return d.memoizedState=d.baseState=y,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:y},d.queue=s,s=s.dispatch=PI.bind(null,Xe,s),[d.memoizedState,s]},useRef:function(s){var l=dr();return s={current:s},l.memoizedState=s},useState:function(s){s=c1(s);var l=s.queue,f=A_.bind(null,Xe,l);return l.dispatch=f,[s.memoizedState,f]},useDebugValue:h1,useDeferredValue:function(s,l){var f=dr();return d1(f,s,l)},useTransition:function(){var s=c1(!1);return s=y_.bind(null,Xe,s.queue,!0,!1),dr().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,l,f){var d=Xe,y=dr();if(lt){if(f===void 0)throw Error(r(407));f=f()}else{if(f=l(),Bt===null)throw Error(r(349));(rt&127)!==0||X2(d,l,f)}y.memoizedState=f;var x={value:f,getSnapshot:l};return y.queue=x,c_(K2.bind(null,d,x,s),[s]),d.flags|=2048,Bl(9,{destroy:void 0},Y2.bind(null,d,x,f,l),null),f},useId:function(){var s=dr(),l=Bt.identifierPrefix;if(lt){var f=aa,d=ia;f=(d&~(1<<32-an(d)-1)).toString(32)+f,l="_"+l+"R_"+f,f=kh++,0<f&&(l+="H"+f.toString(32)),l+="_"}else f=TI++,l="_"+l+"r_"+f.toString(32)+"_";return s.memoizedState=l},useHostTransitionStatus:m1,useFormState:i_,useActionState:i_,useOptimistic:function(s){var l=dr();l.memoizedState=l.baseState=s;var f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return l.queue=f,l=g1.bind(null,Xe,!0,f),f.dispatch=l,[s,l]},useMemoCache:s1,useCacheRefresh:function(){return dr().memoizedState=MI.bind(null,Xe)},useEffectEvent:function(s){var l=dr(),f={impl:s};return l.memoizedState=f,function(){if((_t&2)!==0)throw Error(r(440));return f.impl.apply(void 0,arguments)}}},v1={readContext:Wn,use:jh,useCallback:m_,useContext:Wn,useEffect:f1,useImperativeHandle:p_,useInsertionEffect:f_,useLayoutEffect:h_,useMemo:g_,useReducer:Bh,useRef:l_,useState:function(){return Bh(Da)},useDebugValue:h1,useDeferredValue:function(s,l){var f=ln();return v_(f,Mt.memoizedState,s,l)},useTransition:function(){var s=Bh(Da)[0],l=ln().memoizedState;return[typeof s=="boolean"?s:wu(s),l]},useSyncExternalStore:$2,useId:w_,useHostTransitionStatus:m1,useFormState:a_,useActionState:a_,useOptimistic:function(s,l){var f=ln();return Z2(f,Mt,s,l)},useMemoCache:s1,useCacheRefresh:E_};v1.useEffectEvent=u_;var T_={readContext:Wn,use:jh,useCallback:m_,useContext:Wn,useEffect:f1,useImperativeHandle:p_,useInsertionEffect:f_,useLayoutEffect:h_,useMemo:g_,useReducer:l1,useRef:l_,useState:function(){return l1(Da)},useDebugValue:h1,useDeferredValue:function(s,l){var f=ln();return Mt===null?d1(f,s,l):v_(f,Mt.memoizedState,s,l)},useTransition:function(){var s=l1(Da)[0],l=ln().memoizedState;return[typeof s=="boolean"?s:wu(s),l]},useSyncExternalStore:$2,useId:w_,useHostTransitionStatus:m1,useFormState:o_,useActionState:o_,useOptimistic:function(s,l){var f=ln();return Mt!==null?Z2(f,Mt,s,l):(f.baseState=s,[s,f.queue.dispatch])},useMemoCache:s1,useCacheRefresh:E_};T_.useEffectEvent=u_;function y1(s,l,f,d){l=s.memoizedState,f=f(d,l),f=f==null?l:g({},l,f),s.memoizedState=f,s.lanes===0&&(s.updateQueue.baseState=f)}var _1={enqueueSetState:function(s,l,f){s=s._reactInternals;var d=Vr(),y=ms(d);y.payload=l,f!=null&&(y.callback=f),l=gs(s,y,d),l!==null&&(br(l,s,d),vu(l,s,d))},enqueueReplaceState:function(s,l,f){s=s._reactInternals;var d=Vr(),y=ms(d);y.tag=1,y.payload=l,f!=null&&(y.callback=f),l=gs(s,y,d),l!==null&&(br(l,s,d),vu(l,s,d))},enqueueForceUpdate:function(s,l){s=s._reactInternals;var f=Vr(),d=ms(f);d.tag=2,l!=null&&(d.callback=l),l=gs(s,d,f),l!==null&&(br(l,s,f),vu(l,s,f))}};function I_(s,l,f,d,y,x,T){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(d,x,T):l.prototype&&l.prototype.isPureReactComponent?!cu(f,d)||!cu(y,x):!0}function N_(s,l,f,d){s=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(f,d),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(f,d),l.state!==s&&_1.enqueueReplaceState(l,l.state,null)}function Bo(s,l){var f=l;if("ref"in l){f={};for(var d in l)d!=="ref"&&(f[d]=l[d])}if(s=s.defaultProps){f===l&&(f=g({},f));for(var y in s)f[y]===void 0&&(f[y]=s[y])}return f}function R_(s){_h(s)}function O_(s){console.error(s)}function D_(s){_h(s)}function zh(s,l){try{var f=s.onUncaughtError;f(l.value,{componentStack:l.stack})}catch(d){setTimeout(function(){throw d})}}function M_(s,l,f){try{var d=s.onCaughtError;d(f.value,{componentStack:f.stack,errorBoundary:l.tag===1?l.stateNode:null})}catch(y){setTimeout(function(){throw y})}}function x1(s,l,f){return f=ms(f),f.tag=3,f.payload={element:null},f.callback=function(){zh(s,l)},f}function P_(s){return s=ms(s),s.tag=3,s}function k_(s,l,f,d){var y=f.type.getDerivedStateFromError;if(typeof y=="function"){var x=d.value;s.payload=function(){return y(x)},s.callback=function(){M_(l,f,d)}}var T=f.stateNode;T!==null&&typeof T.componentDidCatch=="function"&&(s.callback=function(){M_(l,f,d),typeof y!="function"&&(Es===null?Es=new Set([this]):Es.add(this));var j=d.stack;this.componentDidCatch(d.value,{componentStack:j!==null?j:""})})}function kI(s,l,f,d,y){if(f.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){if(l=f.alternate,l!==null&&Rl(l,f,y,!0),f=kr.current,f!==null){switch(f.tag){case 31:case 13:return ti===null?ed():f.alternate===null&&nn===0&&(nn=3),f.flags&=-257,f.flags|=65536,f.lanes=y,d===Nh?f.flags|=16384:(l=f.updateQueue,l===null?f.updateQueue=new Set([d]):l.add(d),q1(s,d,y)),!1;case 22:return f.flags|=65536,d===Nh?f.flags|=16384:(l=f.updateQueue,l===null?(l={transitions:null,markerInstances:null,retryQueue:new Set([d])},f.updateQueue=l):(f=l.retryQueue,f===null?l.retryQueue=new Set([d]):f.add(d)),q1(s,d,y)),!1}throw Error(r(435,f.tag))}return q1(s,d,y),ed(),!1}if(lt)return l=kr.current,l!==null?((l.flags&65536)===0&&(l.flags|=256),l.flags|=65536,l.lanes=y,d!==Vp&&(s=Error(r(422),{cause:d}),hu(Qr(s,f)))):(d!==Vp&&(l=Error(r(423),{cause:d}),hu(Qr(l,f))),s=s.current.alternate,s.flags|=65536,y&=-y,s.lanes|=y,d=Qr(d,f),y=x1(s.stateNode,d,y),Wp(s,y),nn!==4&&(nn=2)),!1;var x=Error(r(520),{cause:d});if(x=Qr(x,f),Ou===null?Ou=[x]:Ou.push(x),nn!==4&&(nn=2),l===null)return!0;d=Qr(d,f),f=l;do{switch(f.tag){case 3:return f.flags|=65536,s=y&-y,f.lanes|=s,s=x1(f.stateNode,d,s),Wp(f,s),!1;case 1:if(l=f.type,x=f.stateNode,(f.flags&128)===0&&(typeof l.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(Es===null||!Es.has(x))))return f.flags|=65536,y&=-y,f.lanes|=y,y=P_(y),k_(y,s,f,d),Wp(f,y),!1}f=f.return}while(f!==null);return!1}var w1=Error(r(461)),yn=!1;function Qn(s,l,f,d){l.child=s===null?V2(l,null,f,d):Lo(l,s.child,f,d)}function L_(s,l,f,d,y){f=f.render;var x=l.ref;if("ref"in d){var T={};for(var j in d)j!=="ref"&&(T[j]=d[j])}else T=d;return Do(l),d=n1(s,l,f,T,x,y),j=r1(),s!==null&&!yn?(i1(s,l,y),Ma(s,l,y)):(lt&&j&&jp(l),l.flags|=1,Qn(s,l,d,y),l.child)}function j_(s,l,f,d,y){if(s===null){var x=f.type;return typeof x=="function"&&!Pp(x)&&x.defaultProps===void 0&&f.compare===null?(l.tag=15,l.type=x,B_(s,l,x,d,y)):(s=Ah(f.type,null,d,l,l.mode,y),s.ref=l.ref,s.return=l,l.child=s)}if(x=s.child,!N1(s,y)){var T=x.memoizedProps;if(f=f.compare,f=f!==null?f:cu,f(T,d)&&s.ref===l.ref)return Ma(s,l,y)}return l.flags|=1,s=Ta(x,d),s.ref=l.ref,s.return=l,l.child=s}function B_(s,l,f,d,y){if(s!==null){var x=s.memoizedProps;if(cu(x,d)&&s.ref===l.ref)if(yn=!1,l.pendingProps=d=x,N1(s,y))(s.flags&131072)!==0&&(yn=!0);else return l.lanes=s.lanes,Ma(s,l,y)}return E1(s,l,f,d,y)}function V_(s,l,f,d){var y=d.children,x=s!==null?s.memoizedState:null;if(s===null&&l.stateNode===null&&(l.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),d.mode==="hidden"){if((l.flags&128)!==0){if(x=x!==null?x.baseLanes|f:f,s!==null){for(d=l.child=s.child,y=0;d!==null;)y=y|d.lanes|d.childLanes,d=d.sibling;d=y&~x}else d=0,l.child=null;return F_(s,l,x,f,d)}if((f&536870912)!==0)l.memoizedState={baseLanes:0,cachePool:null},s!==null&&Th(l,x!==null?x.cachePool:null),x!==null?z2(l,x):Zp(),H2(l);else return d=l.lanes=536870912,F_(s,l,x!==null?x.baseLanes|f:f,f,d)}else x!==null?(Th(l,x.cachePool),z2(l,x),ys(),l.memoizedState=null):(s!==null&&Th(l,null),Zp(),ys());return Qn(s,l,y,f),l.child}function bu(s,l){return s!==null&&s.tag===22||l.stateNode!==null||(l.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.sibling}function F_(s,l,f,d,y){var x=$p();return x=x===null?null:{parent:gn._currentValue,pool:x},l.memoizedState={baseLanes:f,cachePool:x},s!==null&&Th(l,null),Zp(),H2(l),s!==null&&Rl(s,l,d,!0),l.childLanes=y,null}function Hh(s,l){return l=qh({mode:l.mode,children:l.children},s.mode),l.ref=s.ref,s.child=l,l.return=s,l}function U_(s,l,f){return Lo(l,s.child,null,f),s=Hh(l,l.pendingProps),s.flags|=2,Lr(l),l.memoizedState=null,s}function LI(s,l,f){var d=l.pendingProps,y=(l.flags&128)!==0;if(l.flags&=-129,s===null){if(lt){if(d.mode==="hidden")return s=Hh(l,d),l.lanes=536870912,bu(null,s);if(e1(l),(s=Ut)?(s=Jx(s,ei),s=s!==null&&s.data==="&"?s:null,s!==null&&(l.memoizedState={dehydrated:s,treeContext:us!==null?{id:ia,overflow:aa}:null,retryLane:536870912,hydrationErrors:null},f=b2(s),f.return=l,l.child=f,Kn=l,Ut=null)):s=null,s===null)throw hs(l);return l.lanes=536870912,null}return Hh(l,d)}var x=s.memoizedState;if(x!==null){var T=x.dehydrated;if(e1(l),y)if(l.flags&256)l.flags&=-257,l=U_(s,l,f);else if(l.memoizedState!==null)l.child=s.child,l.flags|=128,l=null;else throw Error(r(558));else if(yn||Rl(s,l,f,!1),y=(f&s.childLanes)!==0,yn||y){if(d=Bt,d!==null&&(T=qc(d,f),T!==0&&T!==x.retryLane))throw x.retryLane=T,Io(s,T),br(d,s,T),w1;ed(),l=U_(s,l,f)}else s=x.treeContext,Ut=ni(T.nextSibling),Kn=l,lt=!0,fs=null,ei=!1,s!==null&&T2(l,s),l=Hh(l,d),l.flags|=4096;return l}return s=Ta(s.child,{mode:d.mode,children:d.children}),s.ref=l.ref,l.child=s,s.return=l,s}function Gh(s,l){var f=l.ref;if(f===null)s!==null&&s.ref!==null&&(l.flags|=4194816);else{if(typeof f!="function"&&typeof f!="object")throw Error(r(284));(s===null||s.ref!==f)&&(l.flags|=4194816)}}function E1(s,l,f,d,y){return Do(l),f=n1(s,l,f,d,void 0,y),d=r1(),s!==null&&!yn?(i1(s,l,y),Ma(s,l,y)):(lt&&d&&jp(l),l.flags|=1,Qn(s,l,f,y),l.child)}function z_(s,l,f,d,y,x){return Do(l),l.updateQueue=null,f=q2(l,d,f,y),G2(s),d=r1(),s!==null&&!yn?(i1(s,l,x),Ma(s,l,x)):(lt&&d&&jp(l),l.flags|=1,Qn(s,l,f,x),l.child)}function H_(s,l,f,d,y){if(Do(l),l.stateNode===null){var x=Cl,T=f.contextType;typeof T=="object"&&T!==null&&(x=Wn(T)),x=new f(d,x),l.memoizedState=x.state!==null&&x.state!==void 0?x.state:null,x.updater=_1,l.stateNode=x,x._reactInternals=l,x=l.stateNode,x.props=d,x.state=l.memoizedState,x.refs={},Yp(l),T=f.contextType,x.context=typeof T=="object"&&T!==null?Wn(T):Cl,x.state=l.memoizedState,T=f.getDerivedStateFromProps,typeof T=="function"&&(y1(l,f,T,d),x.state=l.memoizedState),typeof f.getDerivedStateFromProps=="function"||typeof x.getSnapshotBeforeUpdate=="function"||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(T=x.state,typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount(),T!==x.state&&_1.enqueueReplaceState(x,x.state,null),_u(l,d,x,y),yu(),x.state=l.memoizedState),typeof x.componentDidMount=="function"&&(l.flags|=4194308),d=!0}else if(s===null){x=l.stateNode;var j=l.memoizedProps,q=Bo(f,j);x.props=q;var ee=x.context,ce=f.contextType;T=Cl,typeof ce=="object"&&ce!==null&&(T=Wn(ce));var he=f.getDerivedStateFromProps;ce=typeof he=="function"||typeof x.getSnapshotBeforeUpdate=="function",j=l.pendingProps!==j,ce||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(j||ee!==T)&&N_(l,x,d,T),ps=!1;var te=l.memoizedState;x.state=te,_u(l,d,x,y),yu(),ee=l.memoizedState,j||te!==ee||ps?(typeof he=="function"&&(y1(l,f,he,d),ee=l.memoizedState),(q=ps||I_(l,f,q,d,te,ee,T))?(ce||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount()),typeof x.componentDidMount=="function"&&(l.flags|=4194308)):(typeof x.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=d,l.memoizedState=ee),x.props=d,x.state=ee,x.context=T,d=q):(typeof x.componentDidMount=="function"&&(l.flags|=4194308),d=!1)}else{x=l.stateNode,Kp(s,l),T=l.memoizedProps,ce=Bo(f,T),x.props=ce,he=l.pendingProps,te=x.context,ee=f.contextType,q=Cl,typeof ee=="object"&&ee!==null&&(q=Wn(ee)),j=f.getDerivedStateFromProps,(ee=typeof j=="function"||typeof x.getSnapshotBeforeUpdate=="function")||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(T!==he||te!==q)&&N_(l,x,d,q),ps=!1,te=l.memoizedState,x.state=te,_u(l,d,x,y),yu();var re=l.memoizedState;T!==he||te!==re||ps||s!==null&&s.dependencies!==null&&Sh(s.dependencies)?(typeof j=="function"&&(y1(l,f,j,d),re=l.memoizedState),(ce=ps||I_(l,f,ce,d,te,re,q)||s!==null&&s.dependencies!==null&&Sh(s.dependencies))?(ee||typeof x.UNSAFE_componentWillUpdate!="function"&&typeof x.componentWillUpdate!="function"||(typeof x.componentWillUpdate=="function"&&x.componentWillUpdate(d,re,q),typeof x.UNSAFE_componentWillUpdate=="function"&&x.UNSAFE_componentWillUpdate(d,re,q)),typeof x.componentDidUpdate=="function"&&(l.flags|=4),typeof x.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof x.componentDidUpdate!="function"||T===s.memoizedProps&&te===s.memoizedState||(l.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||T===s.memoizedProps&&te===s.memoizedState||(l.flags|=1024),l.memoizedProps=d,l.memoizedState=re),x.props=d,x.state=re,x.context=q,d=ce):(typeof x.componentDidUpdate!="function"||T===s.memoizedProps&&te===s.memoizedState||(l.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||T===s.memoizedProps&&te===s.memoizedState||(l.flags|=1024),d=!1)}return x=d,Gh(s,l),d=(l.flags&128)!==0,x||d?(x=l.stateNode,f=d&&typeof f.getDerivedStateFromError!="function"?null:x.render(),l.flags|=1,s!==null&&d?(l.child=Lo(l,s.child,null,y),l.child=Lo(l,null,f,y)):Qn(s,l,f,y),l.memoizedState=x.state,s=l.child):s=Ma(s,l,y),s}function G_(s,l,f,d){return Ro(),l.flags|=256,Qn(s,l,f,d),l.child}var A1={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function b1(s){return{baseLanes:s,cachePool:M2()}}function S1(s,l,f){return s=s!==null?s.childLanes&~f:0,l&&(s|=Br),s}function q_(s,l,f){var d=l.pendingProps,y=!1,x=(l.flags&128)!==0,T;if((T=x)||(T=s!==null&&s.memoizedState===null?!1:(on.current&2)!==0),T&&(y=!0,l.flags&=-129),T=(l.flags&32)!==0,l.flags&=-33,s===null){if(lt){if(y?vs(l):ys(),(s=Ut)?(s=Jx(s,ei),s=s!==null&&s.data!=="&"?s:null,s!==null&&(l.memoizedState={dehydrated:s,treeContext:us!==null?{id:ia,overflow:aa}:null,retryLane:536870912,hydrationErrors:null},f=b2(s),f.return=l,l.child=f,Kn=l,Ut=null)):s=null,s===null)throw hs(l);return om(s)?l.lanes=32:l.lanes=536870912,null}var j=d.children;return d=d.fallback,y?(ys(),y=l.mode,j=qh({mode:"hidden",children:j},y),d=No(d,y,f,null),j.return=l,d.return=l,j.sibling=d,l.child=j,d=l.child,d.memoizedState=b1(f),d.childLanes=S1(s,T,f),l.memoizedState=A1,bu(null,d)):(vs(l),C1(l,j))}var q=s.memoizedState;if(q!==null&&(j=q.dehydrated,j!==null)){if(x)l.flags&256?(vs(l),l.flags&=-257,l=T1(s,l,f)):l.memoizedState!==null?(ys(),l.child=s.child,l.flags|=128,l=null):(ys(),j=d.fallback,y=l.mode,d=qh({mode:"visible",children:d.children},y),j=No(j,y,f,null),j.flags|=2,d.return=l,j.return=l,d.sibling=j,l.child=d,Lo(l,s.child,null,f),d=l.child,d.memoizedState=b1(f),d.childLanes=S1(s,T,f),l.memoizedState=A1,l=bu(null,d));else if(vs(l),om(j)){if(T=j.nextSibling&&j.nextSibling.dataset,T)var ee=T.dgst;T=ee,d=Error(r(419)),d.stack="",d.digest=T,hu({value:d,source:null,stack:null}),l=T1(s,l,f)}else if(yn||Rl(s,l,f,!1),T=(f&s.childLanes)!==0,yn||T){if(T=Bt,T!==null&&(d=qc(T,f),d!==0&&d!==q.retryLane))throw q.retryLane=d,Io(s,d),br(T,s,d),w1;sm(j)||ed(),l=T1(s,l,f)}else sm(j)?(l.flags|=192,l.child=s.child,l=null):(s=q.treeContext,Ut=ni(j.nextSibling),Kn=l,lt=!0,fs=null,ei=!1,s!==null&&T2(l,s),l=C1(l,d.children),l.flags|=4096);return l}return y?(ys(),j=d.fallback,y=l.mode,q=s.child,ee=q.sibling,d=Ta(q,{mode:"hidden",children:d.children}),d.subtreeFlags=q.subtreeFlags&65011712,ee!==null?j=Ta(ee,j):(j=No(j,y,f,null),j.flags|=2),j.return=l,d.return=l,d.sibling=j,l.child=d,bu(null,d),d=l.child,j=s.child.memoizedState,j===null?j=b1(f):(y=j.cachePool,y!==null?(q=gn._currentValue,y=y.parent!==q?{parent:q,pool:q}:y):y=M2(),j={baseLanes:j.baseLanes|f,cachePool:y}),d.memoizedState=j,d.childLanes=S1(s,T,f),l.memoizedState=A1,bu(s.child,d)):(vs(l),f=s.child,s=f.sibling,f=Ta(f,{mode:"visible",children:d.children}),f.return=l,f.sibling=null,s!==null&&(T=l.deletions,T===null?(l.deletions=[s],l.flags|=16):T.push(s)),l.child=f,l.memoizedState=null,f)}function C1(s,l){return l=qh({mode:"visible",children:l},s.mode),l.return=s,s.child=l}function qh(s,l){return s=Pr(22,s,null,l),s.lanes=0,s}function T1(s,l,f){return Lo(l,s.child,null,f),s=C1(l,l.pendingProps.children),s.flags|=2,l.memoizedState=null,s}function $_(s,l,f){s.lanes|=l;var d=s.alternate;d!==null&&(d.lanes|=l),zp(s.return,l,f)}function I1(s,l,f,d,y,x){var T=s.memoizedState;T===null?s.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:d,tail:f,tailMode:y,treeForkCount:x}:(T.isBackwards=l,T.rendering=null,T.renderingStartTime=0,T.last=d,T.tail=f,T.tailMode=y,T.treeForkCount=x)}function X_(s,l,f){var d=l.pendingProps,y=d.revealOrder,x=d.tail;d=d.children;var T=on.current,j=(T&2)!==0;if(j?(T=T&1|2,l.flags|=128):T&=1,pe(on,T),Qn(s,l,d,f),d=lt?fu:0,!j&&s!==null&&(s.flags&128)!==0)e:for(s=l.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&$_(s,f,l);else if(s.tag===19)$_(s,f,l);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===l)break e;for(;s.sibling===null;){if(s.return===null||s.return===l)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}switch(y){case"forwards":for(f=l.child,y=null;f!==null;)s=f.alternate,s!==null&&Mh(s)===null&&(y=f),f=f.sibling;f=y,f===null?(y=l.child,l.child=null):(y=f.sibling,f.sibling=null),I1(l,!1,y,f,x,d);break;case"backwards":case"unstable_legacy-backwards":for(f=null,y=l.child,l.child=null;y!==null;){if(s=y.alternate,s!==null&&Mh(s)===null){l.child=y;break}s=y.sibling,y.sibling=f,f=y,y=s}I1(l,!0,f,null,x,d);break;case"together":I1(l,!1,null,null,void 0,d);break;default:l.memoizedState=null}return l.child}function Ma(s,l,f){if(s!==null&&(l.dependencies=s.dependencies),ws|=l.lanes,(f&l.childLanes)===0)if(s!==null){if(Rl(s,l,f,!1),(f&l.childLanes)===0)return null}else return null;if(s!==null&&l.child!==s.child)throw Error(r(153));if(l.child!==null){for(s=l.child,f=Ta(s,s.pendingProps),l.child=f,f.return=l;s.sibling!==null;)s=s.sibling,f=f.sibling=Ta(s,s.pendingProps),f.return=l;f.sibling=null}return l.child}function N1(s,l){return(s.lanes&l)!==0?!0:(s=s.dependencies,!!(s!==null&&Sh(s)))}function jI(s,l,f){switch(l.tag){case 3:Qe(l,l.stateNode.containerInfo),ds(l,gn,s.memoizedState.cache),Ro();break;case 27:case 5:Pn(l);break;case 4:Qe(l,l.stateNode.containerInfo);break;case 10:ds(l,l.type,l.memoizedProps.value);break;case 31:if(l.memoizedState!==null)return l.flags|=128,e1(l),null;break;case 13:var d=l.memoizedState;if(d!==null)return d.dehydrated!==null?(vs(l),l.flags|=128,null):(f&l.child.childLanes)!==0?q_(s,l,f):(vs(l),s=Ma(s,l,f),s!==null?s.sibling:null);vs(l);break;case 19:var y=(s.flags&128)!==0;if(d=(f&l.childLanes)!==0,d||(Rl(s,l,f,!1),d=(f&l.childLanes)!==0),y){if(d)return X_(s,l,f);l.flags|=128}if(y=l.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),pe(on,on.current),d)break;return null;case 22:return l.lanes=0,V_(s,l,f,l.pendingProps);case 24:ds(l,gn,s.memoizedState.cache)}return Ma(s,l,f)}function Y_(s,l,f){if(s!==null)if(s.memoizedProps!==l.pendingProps)yn=!0;else{if(!N1(s,f)&&(l.flags&128)===0)return yn=!1,jI(s,l,f);yn=(s.flags&131072)!==0}else yn=!1,lt&&(l.flags&1048576)!==0&&C2(l,fu,l.index);switch(l.lanes=0,l.tag){case 16:e:{var d=l.pendingProps;if(s=Po(l.elementType),l.type=s,typeof s=="function")Pp(s)?(d=Bo(s,d),l.tag=1,l=H_(null,l,s,d,f)):(l.tag=0,l=E1(null,l,s,d,f));else{if(s!=null){var y=s.$$typeof;if(y===H){l.tag=11,l=L_(null,l,s,d,f);break e}else if(y===I){l.tag=14,l=j_(null,l,s,d,f);break e}}throw l=ie(s)||s,Error(r(306,l,""))}}return l;case 0:return E1(s,l,l.type,l.pendingProps,f);case 1:return d=l.type,y=Bo(d,l.pendingProps),H_(s,l,d,y,f);case 3:e:{if(Qe(l,l.stateNode.containerInfo),s===null)throw Error(r(387));d=l.pendingProps;var x=l.memoizedState;y=x.element,Kp(s,l),_u(l,d,null,f);var T=l.memoizedState;if(d=T.cache,ds(l,gn,d),d!==x.cache&&Hp(l,[gn],f,!0),yu(),d=T.element,x.isDehydrated)if(x={element:d,isDehydrated:!1,cache:T.cache},l.updateQueue.baseState=x,l.memoizedState=x,l.flags&256){l=G_(s,l,d,f);break e}else if(d!==y){y=Qr(Error(r(424)),l),hu(y),l=G_(s,l,d,f);break e}else{switch(s=l.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(Ut=ni(s.firstChild),Kn=l,lt=!0,fs=null,ei=!0,f=V2(l,null,d,f),l.child=f;f;)f.flags=f.flags&-3|4096,f=f.sibling}else{if(Ro(),d===y){l=Ma(s,l,f);break e}Qn(s,l,d,f)}l=l.child}return l;case 26:return Gh(s,l),s===null?(f=aw(l.type,null,l.pendingProps,null))?l.memoizedState=f:lt||(f=l.type,s=l.pendingProps,d=od(Re.current).createElement(f),d[dn]=l,d[jn]=s,Zn(d,f,s),pn(d),l.stateNode=d):l.memoizedState=aw(l.type,s.memoizedProps,l.pendingProps,s.memoizedState),null;case 27:return Pn(l),s===null&&lt&&(d=l.stateNode=nw(l.type,l.pendingProps,Re.current),Kn=l,ei=!0,y=Ut,Cs(l.type)?(lm=y,Ut=ni(d.firstChild)):Ut=y),Qn(s,l,l.pendingProps.children,f),Gh(s,l),s===null&&(l.flags|=4194304),l.child;case 5:return s===null&&lt&&((y=d=Ut)&&(d=d4(d,l.type,l.pendingProps,ei),d!==null?(l.stateNode=d,Kn=l,Ut=ni(d.firstChild),ei=!1,y=!0):y=!1),y||hs(l)),Pn(l),y=l.type,x=l.pendingProps,T=s!==null?s.memoizedProps:null,d=x.children,rm(y,x)?d=null:T!==null&&rm(y,T)&&(l.flags|=32),l.memoizedState!==null&&(y=n1(s,l,II,null,null,f),Vu._currentValue=y),Gh(s,l),Qn(s,l,d,f),l.child;case 6:return s===null&&lt&&((s=f=Ut)&&(f=p4(f,l.pendingProps,ei),f!==null?(l.stateNode=f,Kn=l,Ut=null,s=!0):s=!1),s||hs(l)),null;case 13:return q_(s,l,f);case 4:return Qe(l,l.stateNode.containerInfo),d=l.pendingProps,s===null?l.child=Lo(l,null,d,f):Qn(s,l,d,f),l.child;case 11:return L_(s,l,l.type,l.pendingProps,f);case 7:return Qn(s,l,l.pendingProps,f),l.child;case 8:return Qn(s,l,l.pendingProps.children,f),l.child;case 12:return Qn(s,l,l.pendingProps.children,f),l.child;case 10:return d=l.pendingProps,ds(l,l.type,d.value),Qn(s,l,d.children,f),l.child;case 9:return y=l.type._context,d=l.pendingProps.children,Do(l),y=Wn(y),d=d(y),l.flags|=1,Qn(s,l,d,f),l.child;case 14:return j_(s,l,l.type,l.pendingProps,f);case 15:return B_(s,l,l.type,l.pendingProps,f);case 19:return X_(s,l,f);case 31:return LI(s,l,f);case 22:return V_(s,l,f,l.pendingProps);case 24:return Do(l),d=Wn(gn),s===null?(y=$p(),y===null&&(y=Bt,x=Gp(),y.pooledCache=x,x.refCount++,x!==null&&(y.pooledCacheLanes|=f),y=x),l.memoizedState={parent:d,cache:y},Yp(l),ds(l,gn,y)):((s.lanes&f)!==0&&(Kp(s,l),_u(l,null,null,f),yu()),y=s.memoizedState,x=l.memoizedState,y.parent!==d?(y={parent:d,cache:d},l.memoizedState=y,l.lanes===0&&(l.memoizedState=l.updateQueue.baseState=y),ds(l,gn,d)):(d=x.cache,ds(l,gn,d),d!==y.cache&&Hp(l,[gn],f,!0))),Qn(s,l,l.pendingProps.children,f),l.child;case 29:throw l.pendingProps}throw Error(r(156,l.tag))}function Pa(s){s.flags|=4}function R1(s,l,f,d,y){if((l=(s.mode&32)!==0)&&(l=!1),l){if(s.flags|=16777216,(y&335544128)===y)if(s.stateNode.complete)s.flags|=8192;else if(wx())s.flags|=8192;else throw ko=Nh,Xp}else s.flags&=-16777217}function K_(s,l){if(l.type!=="stylesheet"||(l.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!uw(l))if(wx())s.flags|=8192;else throw ko=Nh,Xp}function $h(s,l){l!==null&&(s.flags|=4),s.flags&16384&&(l=s.tag!==22?Zf():536870912,s.lanes|=l,zl|=l)}function Su(s,l){if(!lt)switch(s.tailMode){case"hidden":l=s.tail;for(var f=null;l!==null;)l.alternate!==null&&(f=l),l=l.sibling;f===null?s.tail=null:f.sibling=null;break;case"collapsed":f=s.tail;for(var d=null;f!==null;)f.alternate!==null&&(d=f),f=f.sibling;d===null?l||s.tail===null?s.tail=null:s.tail.sibling=null:d.sibling=null}}function zt(s){var l=s.alternate!==null&&s.alternate.child===s.child,f=0,d=0;if(l)for(var y=s.child;y!==null;)f|=y.lanes|y.childLanes,d|=y.subtreeFlags&65011712,d|=y.flags&65011712,y.return=s,y=y.sibling;else for(y=s.child;y!==null;)f|=y.lanes|y.childLanes,d|=y.subtreeFlags,d|=y.flags,y.return=s,y=y.sibling;return s.subtreeFlags|=d,s.childLanes=f,l}function BI(s,l,f){var d=l.pendingProps;switch(Bp(l),l.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return zt(l),null;case 1:return zt(l),null;case 3:return f=l.stateNode,d=null,s!==null&&(d=s.memoizedState.cache),l.memoizedState.cache!==d&&(l.flags|=2048),Ra(gn),Ze(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(s===null||s.child===null)&&(Nl(l)?Pa(l):s===null||s.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,Fp())),zt(l),null;case 26:var y=l.type,x=l.memoizedState;return s===null?(Pa(l),x!==null?(zt(l),K_(l,x)):(zt(l),R1(l,y,null,d,f))):x?x!==s.memoizedState?(Pa(l),zt(l),K_(l,x)):(zt(l),l.flags&=-16777217):(s=s.memoizedProps,s!==d&&Pa(l),zt(l),R1(l,y,s,d,f)),null;case 27:if(me(l),f=Re.current,y=l.type,s!==null&&l.stateNode!=null)s.memoizedProps!==d&&Pa(l);else{if(!d){if(l.stateNode===null)throw Error(r(166));return zt(l),null}s=ve.current,Nl(l)?I2(l):(s=nw(y,d,f),l.stateNode=s,Pa(l))}return zt(l),null;case 5:if(me(l),y=l.type,s!==null&&l.stateNode!=null)s.memoizedProps!==d&&Pa(l);else{if(!d){if(l.stateNode===null)throw Error(r(166));return zt(l),null}if(x=ve.current,Nl(l))I2(l);else{var T=od(Re.current);switch(x){case 1:x=T.createElementNS("http://www.w3.org/2000/svg",y);break;case 2:x=T.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;default:switch(y){case"svg":x=T.createElementNS("http://www.w3.org/2000/svg",y);break;case"math":x=T.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;case"script":x=T.createElement("div"),x.innerHTML="<script><\/script>",x=x.removeChild(x.firstChild);break;case"select":x=typeof d.is=="string"?T.createElement("select",{is:d.is}):T.createElement("select"),d.multiple?x.multiple=!0:d.size&&(x.size=d.size);break;default:x=typeof d.is=="string"?T.createElement(y,{is:d.is}):T.createElement(y)}}x[dn]=l,x[jn]=d;e:for(T=l.child;T!==null;){if(T.tag===5||T.tag===6)x.appendChild(T.stateNode);else if(T.tag!==4&&T.tag!==27&&T.child!==null){T.child.return=T,T=T.child;continue}if(T===l)break e;for(;T.sibling===null;){if(T.return===null||T.return===l)break e;T=T.return}T.sibling.return=T.return,T=T.sibling}l.stateNode=x;e:switch(Zn(x,y,d),y){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break e;case"img":d=!0;break e;default:d=!1}d&&Pa(l)}}return zt(l),R1(l,l.type,s===null?null:s.memoizedProps,l.pendingProps,f),null;case 6:if(s&&l.stateNode!=null)s.memoizedProps!==d&&Pa(l);else{if(typeof d!="string"&&l.stateNode===null)throw Error(r(166));if(s=Re.current,Nl(l)){if(s=l.stateNode,f=l.memoizedProps,d=null,y=Kn,y!==null)switch(y.tag){case 27:case 5:d=y.memoizedProps}s[dn]=l,s=!!(s.nodeValue===f||d!==null&&d.suppressHydrationWarning===!0||qx(s.nodeValue,f)),s||hs(l,!0)}else s=od(s).createTextNode(d),s[dn]=l,l.stateNode=s}return zt(l),null;case 31:if(f=l.memoizedState,s===null||s.memoizedState!==null){if(d=Nl(l),f!==null){if(s===null){if(!d)throw Error(r(318));if(s=l.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(557));s[dn]=l}else Ro(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;zt(l),s=!1}else f=Fp(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=f),s=!0;if(!s)return l.flags&256?(Lr(l),l):(Lr(l),null);if((l.flags&128)!==0)throw Error(r(558))}return zt(l),null;case 13:if(d=l.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(y=Nl(l),d!==null&&d.dehydrated!==null){if(s===null){if(!y)throw Error(r(318));if(y=l.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(r(317));y[dn]=l}else Ro(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;zt(l),y=!1}else y=Fp(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=y),y=!0;if(!y)return l.flags&256?(Lr(l),l):(Lr(l),null)}return Lr(l),(l.flags&128)!==0?(l.lanes=f,l):(f=d!==null,s=s!==null&&s.memoizedState!==null,f&&(d=l.child,y=null,d.alternate!==null&&d.alternate.memoizedState!==null&&d.alternate.memoizedState.cachePool!==null&&(y=d.alternate.memoizedState.cachePool.pool),x=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(x=d.memoizedState.cachePool.pool),x!==y&&(d.flags|=2048)),f!==s&&f&&(l.child.flags|=8192),$h(l,l.updateQueue),zt(l),null);case 4:return Ze(),s===null&&Z1(l.stateNode.containerInfo),zt(l),null;case 10:return Ra(l.type),zt(l),null;case 19:if(oe(on),d=l.memoizedState,d===null)return zt(l),null;if(y=(l.flags&128)!==0,x=d.rendering,x===null)if(y)Su(d,!1);else{if(nn!==0||s!==null&&(s.flags&128)!==0)for(s=l.child;s!==null;){if(x=Mh(s),x!==null){for(l.flags|=128,Su(d,!1),s=x.updateQueue,l.updateQueue=s,$h(l,s),l.subtreeFlags=0,s=f,f=l.child;f!==null;)A2(f,s),f=f.sibling;return pe(on,on.current&1|2),lt&&Ia(l,d.treeForkCount),l.child}s=s.sibling}d.tail!==null&&ae()>Qh&&(l.flags|=128,y=!0,Su(d,!1),l.lanes=4194304)}else{if(!y)if(s=Mh(x),s!==null){if(l.flags|=128,y=!0,s=s.updateQueue,l.updateQueue=s,$h(l,s),Su(d,!0),d.tail===null&&d.tailMode==="hidden"&&!x.alternate&&!lt)return zt(l),null}else 2*ae()-d.renderingStartTime>Qh&&f!==536870912&&(l.flags|=128,y=!0,Su(d,!1),l.lanes=4194304);d.isBackwards?(x.sibling=l.child,l.child=x):(s=d.last,s!==null?s.sibling=x:l.child=x,d.last=x)}return d.tail!==null?(s=d.tail,d.rendering=s,d.tail=s.sibling,d.renderingStartTime=ae(),s.sibling=null,f=on.current,pe(on,y?f&1|2:f&1),lt&&Ia(l,d.treeForkCount),s):(zt(l),null);case 22:case 23:return Lr(l),Jp(),d=l.memoizedState!==null,s!==null?s.memoizedState!==null!==d&&(l.flags|=8192):d&&(l.flags|=8192),d?(f&536870912)!==0&&(l.flags&128)===0&&(zt(l),l.subtreeFlags&6&&(l.flags|=8192)):zt(l),f=l.updateQueue,f!==null&&$h(l,f.retryQueue),f=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(f=s.memoizedState.cachePool.pool),d=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(d=l.memoizedState.cachePool.pool),d!==f&&(l.flags|=2048),s!==null&&oe(Mo),null;case 24:return f=null,s!==null&&(f=s.memoizedState.cache),l.memoizedState.cache!==f&&(l.flags|=2048),Ra(gn),zt(l),null;case 25:return null;case 30:return null}throw Error(r(156,l.tag))}function VI(s,l){switch(Bp(l),l.tag){case 1:return s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 3:return Ra(gn),Ze(),s=l.flags,(s&65536)!==0&&(s&128)===0?(l.flags=s&-65537|128,l):null;case 26:case 27:case 5:return me(l),null;case 31:if(l.memoizedState!==null){if(Lr(l),l.alternate===null)throw Error(r(340));Ro()}return s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 13:if(Lr(l),s=l.memoizedState,s!==null&&s.dehydrated!==null){if(l.alternate===null)throw Error(r(340));Ro()}return s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 19:return oe(on),null;case 4:return Ze(),null;case 10:return Ra(l.type),null;case 22:case 23:return Lr(l),Jp(),s!==null&&oe(Mo),s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 24:return Ra(gn),null;case 25:return null;default:return null}}function W_(s,l){switch(Bp(l),l.tag){case 3:Ra(gn),Ze();break;case 26:case 27:case 5:me(l);break;case 4:Ze();break;case 31:l.memoizedState!==null&&Lr(l);break;case 13:Lr(l);break;case 19:oe(on);break;case 10:Ra(l.type);break;case 22:case 23:Lr(l),Jp(),s!==null&&oe(Mo);break;case 24:Ra(gn)}}function Cu(s,l){try{var f=l.updateQueue,d=f!==null?f.lastEffect:null;if(d!==null){var y=d.next;f=y;do{if((f.tag&s)===s){d=void 0;var x=f.create,T=f.inst;d=x(),T.destroy=d}f=f.next}while(f!==y)}}catch(j){It(l,l.return,j)}}function _s(s,l,f){try{var d=l.updateQueue,y=d!==null?d.lastEffect:null;if(y!==null){var x=y.next;d=x;do{if((d.tag&s)===s){var T=d.inst,j=T.destroy;if(j!==void 0){T.destroy=void 0,y=l;var q=f,ee=j;try{ee()}catch(ce){It(y,q,ce)}}}d=d.next}while(d!==x)}}catch(ce){It(l,l.return,ce)}}function Q_(s){var l=s.updateQueue;if(l!==null){var f=s.stateNode;try{U2(l,f)}catch(d){It(s,s.return,d)}}}function Z_(s,l,f){f.props=Bo(s.type,s.memoizedProps),f.state=s.memoizedState;try{f.componentWillUnmount()}catch(d){It(s,l,d)}}function Tu(s,l){try{var f=s.ref;if(f!==null){switch(s.tag){case 26:case 27:case 5:var d=s.stateNode;break;case 30:d=s.stateNode;break;default:d=s.stateNode}typeof f=="function"?s.refCleanup=f(d):f.current=d}}catch(y){It(s,l,y)}}function sa(s,l){var f=s.ref,d=s.refCleanup;if(f!==null)if(typeof d=="function")try{d()}catch(y){It(s,l,y)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof f=="function")try{f(null)}catch(y){It(s,l,y)}else f.current=null}function J_(s){var l=s.type,f=s.memoizedProps,d=s.stateNode;try{e:switch(l){case"button":case"input":case"select":case"textarea":f.autoFocus&&d.focus();break e;case"img":f.src?d.src=f.src:f.srcSet&&(d.srcset=f.srcSet)}}catch(y){It(s,s.return,y)}}function O1(s,l,f){try{var d=s.stateNode;o4(d,s.type,f,l),d[jn]=l}catch(y){It(s,s.return,y)}}function ex(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&Cs(s.type)||s.tag===4}function D1(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||ex(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&Cs(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function M1(s,l,f){var d=s.tag;if(d===5||d===6)s=s.stateNode,l?(f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f).insertBefore(s,l):(l=f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f,l.appendChild(s),f=f._reactRootContainer,f!=null||l.onclick!==null||(l.onclick=gi));else if(d!==4&&(d===27&&Cs(s.type)&&(f=s.stateNode,l=null),s=s.child,s!==null))for(M1(s,l,f),s=s.sibling;s!==null;)M1(s,l,f),s=s.sibling}function Xh(s,l,f){var d=s.tag;if(d===5||d===6)s=s.stateNode,l?f.insertBefore(s,l):f.appendChild(s);else if(d!==4&&(d===27&&Cs(s.type)&&(f=s.stateNode),s=s.child,s!==null))for(Xh(s,l,f),s=s.sibling;s!==null;)Xh(s,l,f),s=s.sibling}function tx(s){var l=s.stateNode,f=s.memoizedProps;try{for(var d=s.type,y=l.attributes;y.length;)l.removeAttributeNode(y[0]);Zn(l,d,f),l[dn]=s,l[jn]=f}catch(x){It(s,s.return,x)}}var ka=!1,_n=!1,P1=!1,nx=typeof WeakSet=="function"?WeakSet:Set,Vn=null;function FI(s,l){if(s=s.containerInfo,tm=pd,s=p2(s),Tp(s)){if("selectionStart"in s)var f={start:s.selectionStart,end:s.selectionEnd};else e:{f=(f=s.ownerDocument)&&f.defaultView||window;var d=f.getSelection&&f.getSelection();if(d&&d.rangeCount!==0){f=d.anchorNode;var y=d.anchorOffset,x=d.focusNode;d=d.focusOffset;try{f.nodeType,x.nodeType}catch{f=null;break e}var T=0,j=-1,q=-1,ee=0,ce=0,he=s,te=null;t:for(;;){for(var re;he!==f||y!==0&&he.nodeType!==3||(j=T+y),he!==x||d!==0&&he.nodeType!==3||(q=T+d),he.nodeType===3&&(T+=he.nodeValue.length),(re=he.firstChild)!==null;)te=he,he=re;for(;;){if(he===s)break t;if(te===f&&++ee===y&&(j=T),te===x&&++ce===d&&(q=T),(re=he.nextSibling)!==null)break;he=te,te=he.parentNode}he=re}f=j===-1||q===-1?null:{start:j,end:q}}else f=null}f=f||{start:0,end:0}}else f=null;for(nm={focusedElem:s,selectionRange:f},pd=!1,Vn=l;Vn!==null;)if(l=Vn,s=l.child,(l.subtreeFlags&1028)!==0&&s!==null)s.return=l,Vn=s;else for(;Vn!==null;){switch(l=Vn,x=l.alternate,s=l.flags,l.tag){case 0:if((s&4)!==0&&(s=l.updateQueue,s=s!==null?s.events:null,s!==null))for(f=0;f<s.length;f++)y=s[f],y.ref.impl=y.nextImpl;break;case 11:case 15:break;case 1:if((s&1024)!==0&&x!==null){s=void 0,f=l,y=x.memoizedProps,x=x.memoizedState,d=f.stateNode;try{var Ce=Bo(f.type,y);s=d.getSnapshotBeforeUpdate(Ce,x),d.__reactInternalSnapshotBeforeUpdate=s}catch(Le){It(f,f.return,Le)}}break;case 3:if((s&1024)!==0){if(s=l.stateNode.containerInfo,f=s.nodeType,f===9)am(s);else if(f===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":am(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(r(163))}if(s=l.sibling,s!==null){s.return=l.return,Vn=s;break}Vn=l.return}}function rx(s,l,f){var d=f.flags;switch(f.tag){case 0:case 11:case 15:ja(s,f),d&4&&Cu(5,f);break;case 1:if(ja(s,f),d&4)if(s=f.stateNode,l===null)try{s.componentDidMount()}catch(T){It(f,f.return,T)}else{var y=Bo(f.type,l.memoizedProps);l=l.memoizedState;try{s.componentDidUpdate(y,l,s.__reactInternalSnapshotBeforeUpdate)}catch(T){It(f,f.return,T)}}d&64&&Q_(f),d&512&&Tu(f,f.return);break;case 3:if(ja(s,f),d&64&&(s=f.updateQueue,s!==null)){if(l=null,f.child!==null)switch(f.child.tag){case 27:case 5:l=f.child.stateNode;break;case 1:l=f.child.stateNode}try{U2(s,l)}catch(T){It(f,f.return,T)}}break;case 27:l===null&&d&4&&tx(f);case 26:case 5:ja(s,f),l===null&&d&4&&J_(f),d&512&&Tu(f,f.return);break;case 12:ja(s,f);break;case 31:ja(s,f),d&4&&sx(s,f);break;case 13:ja(s,f),d&4&&ox(s,f),d&64&&(s=f.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(f=KI.bind(null,f),m4(s,f))));break;case 22:if(d=f.memoizedState!==null||ka,!d){l=l!==null&&l.memoizedState!==null||_n,y=ka;var x=_n;ka=d,(_n=l)&&!x?Ba(s,f,(f.subtreeFlags&8772)!==0):ja(s,f),ka=y,_n=x}break;case 30:break;default:ja(s,f)}}function ix(s){var l=s.alternate;l!==null&&(s.alternate=null,ix(l)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(l=s.stateNode,l!==null&&hl(l)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var Xt=null,xr=!1;function La(s,l,f){for(f=f.child;f!==null;)ax(s,l,f),f=f.sibling}function ax(s,l,f){if(ze&&typeof ze.onCommitFiberUnmount=="function")try{ze.onCommitFiberUnmount(ht,f)}catch{}switch(f.tag){case 26:_n||sa(f,l),La(s,l,f),f.memoizedState?f.memoizedState.count--:f.stateNode&&(f=f.stateNode,f.parentNode.removeChild(f));break;case 27:_n||sa(f,l);var d=Xt,y=xr;Cs(f.type)&&(Xt=f.stateNode,xr=!1),La(s,l,f),Lu(f.stateNode),Xt=d,xr=y;break;case 5:_n||sa(f,l);case 6:if(d=Xt,y=xr,Xt=null,La(s,l,f),Xt=d,xr=y,Xt!==null)if(xr)try{(Xt.nodeType===9?Xt.body:Xt.nodeName==="HTML"?Xt.ownerDocument.body:Xt).removeChild(f.stateNode)}catch(x){It(f,l,x)}else try{Xt.removeChild(f.stateNode)}catch(x){It(f,l,x)}break;case 18:Xt!==null&&(xr?(s=Xt,Qx(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,f.stateNode),Wl(s)):Qx(Xt,f.stateNode));break;case 4:d=Xt,y=xr,Xt=f.stateNode.containerInfo,xr=!0,La(s,l,f),Xt=d,xr=y;break;case 0:case 11:case 14:case 15:_s(2,f,l),_n||_s(4,f,l),La(s,l,f);break;case 1:_n||(sa(f,l),d=f.stateNode,typeof d.componentWillUnmount=="function"&&Z_(f,l,d)),La(s,l,f);break;case 21:La(s,l,f);break;case 22:_n=(d=_n)||f.memoizedState!==null,La(s,l,f),_n=d;break;default:La(s,l,f)}}function sx(s,l){if(l.memoizedState===null&&(s=l.alternate,s!==null&&(s=s.memoizedState,s!==null))){s=s.dehydrated;try{Wl(s)}catch(f){It(l,l.return,f)}}}function ox(s,l){if(l.memoizedState===null&&(s=l.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{Wl(s)}catch(f){It(l,l.return,f)}}function UI(s){switch(s.tag){case 31:case 13:case 19:var l=s.stateNode;return l===null&&(l=s.stateNode=new nx),l;case 22:return s=s.stateNode,l=s._retryCache,l===null&&(l=s._retryCache=new nx),l;default:throw Error(r(435,s.tag))}}function Yh(s,l){var f=UI(s);l.forEach(function(d){if(!f.has(d)){f.add(d);var y=WI.bind(null,s,d);d.then(y,y)}})}function wr(s,l){var f=l.deletions;if(f!==null)for(var d=0;d<f.length;d++){var y=f[d],x=s,T=l,j=T;e:for(;j!==null;){switch(j.tag){case 27:if(Cs(j.type)){Xt=j.stateNode,xr=!1;break e}break;case 5:Xt=j.stateNode,xr=!1;break e;case 3:case 4:Xt=j.stateNode.containerInfo,xr=!0;break e}j=j.return}if(Xt===null)throw Error(r(160));ax(x,T,y),Xt=null,xr=!1,x=y.alternate,x!==null&&(x.return=null),y.return=null}if(l.subtreeFlags&13886)for(l=l.child;l!==null;)lx(l,s),l=l.sibling}var Ei=null;function lx(s,l){var f=s.alternate,d=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:wr(l,s),Er(s),d&4&&(_s(3,s,s.return),Cu(3,s),_s(5,s,s.return));break;case 1:wr(l,s),Er(s),d&512&&(_n||f===null||sa(f,f.return)),d&64&&ka&&(s=s.updateQueue,s!==null&&(d=s.callbacks,d!==null&&(f=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=f===null?d:f.concat(d))));break;case 26:var y=Ei;if(wr(l,s),Er(s),d&512&&(_n||f===null||sa(f,f.return)),d&4){var x=f!==null?f.memoizedState:null;if(d=s.memoizedState,f===null)if(d===null)if(s.stateNode===null){e:{d=s.type,f=s.memoizedProps,y=y.ownerDocument||y;t:switch(d){case"title":x=y.getElementsByTagName("title")[0],(!x||x[$i]||x[dn]||x.namespaceURI==="http://www.w3.org/2000/svg"||x.hasAttribute("itemprop"))&&(x=y.createElement(d),y.head.insertBefore(x,y.querySelector("head > title"))),Zn(x,d,f),x[dn]=s,pn(x),d=x;break e;case"link":var T=lw("link","href",y).get(d+(f.href||""));if(T){for(var j=0;j<T.length;j++)if(x=T[j],x.getAttribute("href")===(f.href==null||f.href===""?null:f.href)&&x.getAttribute("rel")===(f.rel==null?null:f.rel)&&x.getAttribute("title")===(f.title==null?null:f.title)&&x.getAttribute("crossorigin")===(f.crossOrigin==null?null:f.crossOrigin)){T.splice(j,1);break t}}x=y.createElement(d),Zn(x,d,f),y.head.appendChild(x);break;case"meta":if(T=lw("meta","content",y).get(d+(f.content||""))){for(j=0;j<T.length;j++)if(x=T[j],x.getAttribute("content")===(f.content==null?null:""+f.content)&&x.getAttribute("name")===(f.name==null?null:f.name)&&x.getAttribute("property")===(f.property==null?null:f.property)&&x.getAttribute("http-equiv")===(f.httpEquiv==null?null:f.httpEquiv)&&x.getAttribute("charset")===(f.charSet==null?null:f.charSet)){T.splice(j,1);break t}}x=y.createElement(d),Zn(x,d,f),y.head.appendChild(x);break;default:throw Error(r(468,d))}x[dn]=s,pn(x),d=x}s.stateNode=d}else cw(y,s.type,s.stateNode);else s.stateNode=ow(y,d,s.memoizedProps);else x!==d?(x===null?f.stateNode!==null&&(f=f.stateNode,f.parentNode.removeChild(f)):x.count--,d===null?cw(y,s.type,s.stateNode):ow(y,d,s.memoizedProps)):d===null&&s.stateNode!==null&&O1(s,s.memoizedProps,f.memoizedProps)}break;case 27:wr(l,s),Er(s),d&512&&(_n||f===null||sa(f,f.return)),f!==null&&d&4&&O1(s,s.memoizedProps,f.memoizedProps);break;case 5:if(wr(l,s),Er(s),d&512&&(_n||f===null||sa(f,f.return)),s.flags&32){y=s.stateNode;try{_r(y,"")}catch(Ce){It(s,s.return,Ce)}}d&4&&s.stateNode!=null&&(y=s.memoizedProps,O1(s,y,f!==null?f.memoizedProps:y)),d&1024&&(P1=!0);break;case 6:if(wr(l,s),Er(s),d&4){if(s.stateNode===null)throw Error(r(162));d=s.memoizedProps,f=s.stateNode;try{f.nodeValue=d}catch(Ce){It(s,s.return,Ce)}}break;case 3:if(ud=null,y=Ei,Ei=ld(l.containerInfo),wr(l,s),Ei=y,Er(s),d&4&&f!==null&&f.memoizedState.isDehydrated)try{Wl(l.containerInfo)}catch(Ce){It(s,s.return,Ce)}P1&&(P1=!1,cx(s));break;case 4:d=Ei,Ei=ld(s.stateNode.containerInfo),wr(l,s),Er(s),Ei=d;break;case 12:wr(l,s),Er(s);break;case 31:wr(l,s),Er(s),d&4&&(d=s.updateQueue,d!==null&&(s.updateQueue=null,Yh(s,d)));break;case 13:wr(l,s),Er(s),s.child.flags&8192&&s.memoizedState!==null!=(f!==null&&f.memoizedState!==null)&&(Wh=ae()),d&4&&(d=s.updateQueue,d!==null&&(s.updateQueue=null,Yh(s,d)));break;case 22:y=s.memoizedState!==null;var q=f!==null&&f.memoizedState!==null,ee=ka,ce=_n;if(ka=ee||y,_n=ce||q,wr(l,s),_n=ce,ka=ee,Er(s),d&8192)e:for(l=s.stateNode,l._visibility=y?l._visibility&-2:l._visibility|1,y&&(f===null||q||ka||_n||Vo(s)),f=null,l=s;;){if(l.tag===5||l.tag===26){if(f===null){q=f=l;try{if(x=q.stateNode,y)T=x.style,typeof T.setProperty=="function"?T.setProperty("display","none","important"):T.display="none";else{j=q.stateNode;var he=q.memoizedProps.style,te=he!=null&&he.hasOwnProperty("display")?he.display:null;j.style.display=te==null||typeof te=="boolean"?"":(""+te).trim()}}catch(Ce){It(q,q.return,Ce)}}}else if(l.tag===6){if(f===null){q=l;try{q.stateNode.nodeValue=y?"":q.memoizedProps}catch(Ce){It(q,q.return,Ce)}}}else if(l.tag===18){if(f===null){q=l;try{var re=q.stateNode;y?Zx(re,!0):Zx(q.stateNode,!1)}catch(Ce){It(q,q.return,Ce)}}}else if((l.tag!==22&&l.tag!==23||l.memoizedState===null||l===s)&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===s)break e;for(;l.sibling===null;){if(l.return===null||l.return===s)break e;f===l&&(f=null),l=l.return}f===l&&(f=null),l.sibling.return=l.return,l=l.sibling}d&4&&(d=s.updateQueue,d!==null&&(f=d.retryQueue,f!==null&&(d.retryQueue=null,Yh(s,f))));break;case 19:wr(l,s),Er(s),d&4&&(d=s.updateQueue,d!==null&&(s.updateQueue=null,Yh(s,d)));break;case 30:break;case 21:break;default:wr(l,s),Er(s)}}function Er(s){var l=s.flags;if(l&2){try{for(var f,d=s.return;d!==null;){if(ex(d)){f=d;break}d=d.return}if(f==null)throw Error(r(160));switch(f.tag){case 27:var y=f.stateNode,x=D1(s);Xh(s,x,y);break;case 5:var T=f.stateNode;f.flags&32&&(_r(T,""),f.flags&=-33);var j=D1(s);Xh(s,j,T);break;case 3:case 4:var q=f.stateNode.containerInfo,ee=D1(s);M1(s,ee,q);break;default:throw Error(r(161))}}catch(ce){It(s,s.return,ce)}s.flags&=-3}l&4096&&(s.flags&=-4097)}function cx(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var l=s;cx(l),l.tag===5&&l.flags&1024&&l.stateNode.reset(),s=s.sibling}}function ja(s,l){if(l.subtreeFlags&8772)for(l=l.child;l!==null;)rx(s,l.alternate,l),l=l.sibling}function Vo(s){for(s=s.child;s!==null;){var l=s;switch(l.tag){case 0:case 11:case 14:case 15:_s(4,l,l.return),Vo(l);break;case 1:sa(l,l.return);var f=l.stateNode;typeof f.componentWillUnmount=="function"&&Z_(l,l.return,f),Vo(l);break;case 27:Lu(l.stateNode);case 26:case 5:sa(l,l.return),Vo(l);break;case 22:l.memoizedState===null&&Vo(l);break;case 30:Vo(l);break;default:Vo(l)}s=s.sibling}}function Ba(s,l,f){for(f=f&&(l.subtreeFlags&8772)!==0,l=l.child;l!==null;){var d=l.alternate,y=s,x=l,T=x.flags;switch(x.tag){case 0:case 11:case 15:Ba(y,x,f),Cu(4,x);break;case 1:if(Ba(y,x,f),d=x,y=d.stateNode,typeof y.componentDidMount=="function")try{y.componentDidMount()}catch(ee){It(d,d.return,ee)}if(d=x,y=d.updateQueue,y!==null){var j=d.stateNode;try{var q=y.shared.hiddenCallbacks;if(q!==null)for(y.shared.hiddenCallbacks=null,y=0;y<q.length;y++)F2(q[y],j)}catch(ee){It(d,d.return,ee)}}f&&T&64&&Q_(x),Tu(x,x.return);break;case 27:tx(x);case 26:case 5:Ba(y,x,f),f&&d===null&&T&4&&J_(x),Tu(x,x.return);break;case 12:Ba(y,x,f);break;case 31:Ba(y,x,f),f&&T&4&&sx(y,x);break;case 13:Ba(y,x,f),f&&T&4&&ox(y,x);break;case 22:x.memoizedState===null&&Ba(y,x,f),Tu(x,x.return);break;case 30:break;default:Ba(y,x,f)}l=l.sibling}}function k1(s,l){var f=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(f=s.memoizedState.cachePool.pool),s=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(s=l.memoizedState.cachePool.pool),s!==f&&(s!=null&&s.refCount++,f!=null&&du(f))}function L1(s,l){s=null,l.alternate!==null&&(s=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==s&&(l.refCount++,s!=null&&du(s))}function Ai(s,l,f,d){if(l.subtreeFlags&10256)for(l=l.child;l!==null;)ux(s,l,f,d),l=l.sibling}function ux(s,l,f,d){var y=l.flags;switch(l.tag){case 0:case 11:case 15:Ai(s,l,f,d),y&2048&&Cu(9,l);break;case 1:Ai(s,l,f,d);break;case 3:Ai(s,l,f,d),y&2048&&(s=null,l.alternate!==null&&(s=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==s&&(l.refCount++,s!=null&&du(s)));break;case 12:if(y&2048){Ai(s,l,f,d),s=l.stateNode;try{var x=l.memoizedProps,T=x.id,j=x.onPostCommit;typeof j=="function"&&j(T,l.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(q){It(l,l.return,q)}}else Ai(s,l,f,d);break;case 31:Ai(s,l,f,d);break;case 13:Ai(s,l,f,d);break;case 23:break;case 22:x=l.stateNode,T=l.alternate,l.memoizedState!==null?x._visibility&2?Ai(s,l,f,d):Iu(s,l):x._visibility&2?Ai(s,l,f,d):(x._visibility|=2,Vl(s,l,f,d,(l.subtreeFlags&10256)!==0||!1)),y&2048&&k1(T,l);break;case 24:Ai(s,l,f,d),y&2048&&L1(l.alternate,l);break;default:Ai(s,l,f,d)}}function Vl(s,l,f,d,y){for(y=y&&((l.subtreeFlags&10256)!==0||!1),l=l.child;l!==null;){var x=s,T=l,j=f,q=d,ee=T.flags;switch(T.tag){case 0:case 11:case 15:Vl(x,T,j,q,y),Cu(8,T);break;case 23:break;case 22:var ce=T.stateNode;T.memoizedState!==null?ce._visibility&2?Vl(x,T,j,q,y):Iu(x,T):(ce._visibility|=2,Vl(x,T,j,q,y)),y&&ee&2048&&k1(T.alternate,T);break;case 24:Vl(x,T,j,q,y),y&&ee&2048&&L1(T.alternate,T);break;default:Vl(x,T,j,q,y)}l=l.sibling}}function Iu(s,l){if(l.subtreeFlags&10256)for(l=l.child;l!==null;){var f=s,d=l,y=d.flags;switch(d.tag){case 22:Iu(f,d),y&2048&&k1(d.alternate,d);break;case 24:Iu(f,d),y&2048&&L1(d.alternate,d);break;default:Iu(f,d)}l=l.sibling}}var Nu=8192;function Fl(s,l,f){if(s.subtreeFlags&Nu)for(s=s.child;s!==null;)fx(s,l,f),s=s.sibling}function fx(s,l,f){switch(s.tag){case 26:Fl(s,l,f),s.flags&Nu&&s.memoizedState!==null&&T4(f,Ei,s.memoizedState,s.memoizedProps);break;case 5:Fl(s,l,f);break;case 3:case 4:var d=Ei;Ei=ld(s.stateNode.containerInfo),Fl(s,l,f),Ei=d;break;case 22:s.memoizedState===null&&(d=s.alternate,d!==null&&d.memoizedState!==null?(d=Nu,Nu=16777216,Fl(s,l,f),Nu=d):Fl(s,l,f));break;default:Fl(s,l,f)}}function hx(s){var l=s.alternate;if(l!==null&&(s=l.child,s!==null)){l.child=null;do l=s.sibling,s.sibling=null,s=l;while(s!==null)}}function Ru(s){var l=s.deletions;if((s.flags&16)!==0){if(l!==null)for(var f=0;f<l.length;f++){var d=l[f];Vn=d,px(d,s)}hx(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)dx(s),s=s.sibling}function dx(s){switch(s.tag){case 0:case 11:case 15:Ru(s),s.flags&2048&&_s(9,s,s.return);break;case 3:Ru(s);break;case 12:Ru(s);break;case 22:var l=s.stateNode;s.memoizedState!==null&&l._visibility&2&&(s.return===null||s.return.tag!==13)?(l._visibility&=-3,Kh(s)):Ru(s);break;default:Ru(s)}}function Kh(s){var l=s.deletions;if((s.flags&16)!==0){if(l!==null)for(var f=0;f<l.length;f++){var d=l[f];Vn=d,px(d,s)}hx(s)}for(s=s.child;s!==null;){switch(l=s,l.tag){case 0:case 11:case 15:_s(8,l,l.return),Kh(l);break;case 22:f=l.stateNode,f._visibility&2&&(f._visibility&=-3,Kh(l));break;default:Kh(l)}s=s.sibling}}function px(s,l){for(;Vn!==null;){var f=Vn;switch(f.tag){case 0:case 11:case 15:_s(8,f,l);break;case 23:case 22:if(f.memoizedState!==null&&f.memoizedState.cachePool!==null){var d=f.memoizedState.cachePool.pool;d!=null&&d.refCount++}break;case 24:du(f.memoizedState.cache)}if(d=f.child,d!==null)d.return=f,Vn=d;else e:for(f=s;Vn!==null;){d=Vn;var y=d.sibling,x=d.return;if(ix(d),d===f){Vn=null;break e}if(y!==null){y.return=x,Vn=y;break e}Vn=x}}}var zI={getCacheForType:function(s){var l=Wn(gn),f=l.data.get(s);return f===void 0&&(f=s(),l.data.set(s,f)),f},cacheSignal:function(){return Wn(gn).controller.signal}},HI=typeof WeakMap=="function"?WeakMap:Map,_t=0,Bt=null,tt=null,rt=0,Tt=0,jr=null,xs=!1,Ul=!1,j1=!1,Va=0,nn=0,ws=0,Fo=0,B1=0,Br=0,zl=0,Ou=null,Ar=null,V1=!1,Wh=0,mx=0,Qh=1/0,Zh=null,Es=null,Cn=0,As=null,Hl=null,Fa=0,F1=0,U1=null,gx=null,Du=0,z1=null;function Vr(){return(_t&2)!==0&&rt!==0?rt&-rt:K.T!==null?Y1():Jf()}function vx(){if(Br===0)if((rt&536870912)===0||lt){var s=ho;ho<<=1,(ho&3932160)===0&&(ho=262144),Br=s}else Br=536870912;return s=kr.current,s!==null&&(s.flags|=32),Br}function br(s,l,f){(s===Bt&&(Tt===2||Tt===9)||s.cancelPendingCommit!==null)&&(Gl(s,0),bs(s,rt,Br,!1)),po(s,f),((_t&2)===0||s!==Bt)&&(s===Bt&&((_t&2)===0&&(Fo|=f),nn===4&&bs(s,rt,Br,!1)),oa(s))}function yx(s,l,f){if((_t&6)!==0)throw Error(r(327));var d=!f&&(l&127)===0&&(l&s.expiredLanes)===0||di(s,l),y=d?$I(s,l):G1(s,l,!0),x=d;do{if(y===0){Ul&&!d&&bs(s,l,0,!1);break}else{if(f=s.current.alternate,x&&!GI(f)){y=G1(s,l,!1),x=!1;continue}if(y===2){if(x=l,s.errorRecoveryDisabledLanes&x)var T=0;else T=s.pendingLanes&-536870913,T=T!==0?T:T&536870912?536870912:0;if(T!==0){l=T;e:{var j=s;y=Ou;var q=j.current.memoizedState.isDehydrated;if(q&&(Gl(j,T).flags|=256),T=G1(j,T,!1),T!==2){if(j1&&!q){j.errorRecoveryDisabledLanes|=x,Fo|=x,y=4;break e}x=Ar,Ar=y,x!==null&&(Ar===null?Ar=x:Ar.push.apply(Ar,x))}y=T}if(x=!1,y!==2)continue}}if(y===1){Gl(s,0),bs(s,l,0,!0);break}e:{switch(d=s,x=y,x){case 0:case 1:throw Error(r(345));case 4:if((l&4194048)!==l)break;case 6:bs(d,l,Br,!xs);break e;case 2:Ar=null;break;case 3:case 5:break;default:throw Error(r(329))}if((l&62914560)===l&&(y=Wh+300-ae(),10<y)){if(bs(d,l,Br,!xs),Hi(d,0,!0)!==0)break e;Fa=l,d.timeoutHandle=Kx(_x.bind(null,d,f,Ar,Zh,V1,l,Br,Fo,zl,xs,x,"Throttled",-0,0),y);break e}_x(d,f,Ar,Zh,V1,l,Br,Fo,zl,xs,x,null,-0,0)}}break}while(!0);oa(s)}function _x(s,l,f,d,y,x,T,j,q,ee,ce,he,te,re){if(s.timeoutHandle=-1,he=l.subtreeFlags,he&8192||(he&16785408)===16785408){he={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:gi},fx(l,x,he);var Ce=(x&62914560)===x?Wh-ae():(x&4194048)===x?mx-ae():0;if(Ce=I4(he,Ce),Ce!==null){Fa=x,s.cancelPendingCommit=Ce(Tx.bind(null,s,l,x,f,d,y,T,j,q,ce,he,null,te,re)),bs(s,x,T,!ee);return}}Tx(s,l,x,f,d,y,T,j,q)}function GI(s){for(var l=s;;){var f=l.tag;if((f===0||f===11||f===15)&&l.flags&16384&&(f=l.updateQueue,f!==null&&(f=f.stores,f!==null)))for(var d=0;d<f.length;d++){var y=f[d],x=y.getSnapshot;y=y.value;try{if(!Mr(x(),y))return!1}catch{return!1}}if(f=l.child,l.subtreeFlags&16384&&f!==null)f.return=l,l=f;else{if(l===s)break;for(;l.sibling===null;){if(l.return===null||l.return===s)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function bs(s,l,f,d){l&=~B1,l&=~Fo,s.suspendedLanes|=l,s.pingedLanes&=~l,d&&(s.warmLanes|=l),d=s.expirationTimes;for(var y=l;0<y;){var x=31-an(y),T=1<<x;d[x]=-1,y&=~T}f!==0&&mo(s,f,l)}function Jh(){return(_t&6)===0?(Mu(0),!1):!0}function H1(){if(tt!==null){if(Tt===0)var s=tt.return;else s=tt,Na=Oo=null,a1(s),Pl=null,mu=0,s=tt;for(;s!==null;)W_(s.alternate,s),s=s.return;tt=null}}function Gl(s,l){var f=s.timeoutHandle;f!==-1&&(s.timeoutHandle=-1,u4(f)),f=s.cancelPendingCommit,f!==null&&(s.cancelPendingCommit=null,f()),Fa=0,H1(),Bt=s,tt=f=Ta(s.current,null),rt=l,Tt=0,jr=null,xs=!1,Ul=di(s,l),j1=!1,zl=Br=B1=Fo=ws=nn=0,Ar=Ou=null,V1=!1,(l&8)!==0&&(l|=l&32);var d=s.entangledLanes;if(d!==0)for(s=s.entanglements,d&=l;0<d;){var y=31-an(d),x=1<<y;l|=s[y],d&=~x}return Va=l,xh(),f}function xx(s,l){Xe=null,K.H=Au,l===Ml||l===Ih?(l=L2(),Tt=3):l===Xp?(l=L2(),Tt=4):Tt=l===w1?8:l!==null&&typeof l=="object"&&typeof l.then=="function"?6:1,jr=l,tt===null&&(nn=1,zh(s,Qr(l,s.current)))}function wx(){var s=kr.current;return s===null?!0:(rt&4194048)===rt?ti===null:(rt&62914560)===rt||(rt&536870912)!==0?s===ti:!1}function Ex(){var s=K.H;return K.H=Au,s===null?Au:s}function Ax(){var s=K.A;return K.A=zI,s}function ed(){nn=4,xs||(rt&4194048)!==rt&&kr.current!==null||(Ul=!0),(ws&134217727)===0&&(Fo&134217727)===0||Bt===null||bs(Bt,rt,Br,!1)}function G1(s,l,f){var d=_t;_t|=2;var y=Ex(),x=Ax();(Bt!==s||rt!==l)&&(Zh=null,Gl(s,l)),l=!1;var T=nn;e:do try{if(Tt!==0&&tt!==null){var j=tt,q=jr;switch(Tt){case 8:H1(),T=6;break e;case 3:case 2:case 9:case 6:kr.current===null&&(l=!0);var ee=Tt;if(Tt=0,jr=null,ql(s,j,q,ee),f&&Ul){T=0;break e}break;default:ee=Tt,Tt=0,jr=null,ql(s,j,q,ee)}}qI(),T=nn;break}catch(ce){xx(s,ce)}while(!0);return l&&s.shellSuspendCounter++,Na=Oo=null,_t=d,K.H=y,K.A=x,tt===null&&(Bt=null,rt=0,xh()),T}function qI(){for(;tt!==null;)bx(tt)}function $I(s,l){var f=_t;_t|=2;var d=Ex(),y=Ax();Bt!==s||rt!==l?(Zh=null,Qh=ae()+500,Gl(s,l)):Ul=di(s,l);e:do try{if(Tt!==0&&tt!==null){l=tt;var x=jr;t:switch(Tt){case 1:Tt=0,jr=null,ql(s,l,x,1);break;case 2:case 9:if(P2(x)){Tt=0,jr=null,Sx(l);break}l=function(){Tt!==2&&Tt!==9||Bt!==s||(Tt=7),oa(s)},x.then(l,l);break e;case 3:Tt=7;break e;case 4:Tt=5;break e;case 7:P2(x)?(Tt=0,jr=null,Sx(l)):(Tt=0,jr=null,ql(s,l,x,7));break;case 5:var T=null;switch(tt.tag){case 26:T=tt.memoizedState;case 5:case 27:var j=tt;if(T?uw(T):j.stateNode.complete){Tt=0,jr=null;var q=j.sibling;if(q!==null)tt=q;else{var ee=j.return;ee!==null?(tt=ee,td(ee)):tt=null}break t}}Tt=0,jr=null,ql(s,l,x,5);break;case 6:Tt=0,jr=null,ql(s,l,x,6);break;case 8:H1(),nn=6;break e;default:throw Error(r(462))}}XI();break}catch(ce){xx(s,ce)}while(!0);return Na=Oo=null,K.H=d,K.A=y,_t=f,tt!==null?0:(Bt=null,rt=0,xh(),nn)}function XI(){for(;tt!==null&&!fo();)bx(tt)}function bx(s){var l=Y_(s.alternate,s,Va);s.memoizedProps=s.pendingProps,l===null?td(s):tt=l}function Sx(s){var l=s,f=l.alternate;switch(l.tag){case 15:case 0:l=z_(f,l,l.pendingProps,l.type,void 0,rt);break;case 11:l=z_(f,l,l.pendingProps,l.type.render,l.ref,rt);break;case 5:a1(l);default:W_(f,l),l=tt=A2(l,Va),l=Y_(f,l,Va)}s.memoizedProps=s.pendingProps,l===null?td(s):tt=l}function ql(s,l,f,d){Na=Oo=null,a1(l),Pl=null,mu=0;var y=l.return;try{if(kI(s,y,l,f,rt)){nn=1,zh(s,Qr(f,s.current)),tt=null;return}}catch(x){if(y!==null)throw tt=y,x;nn=1,zh(s,Qr(f,s.current)),tt=null;return}l.flags&32768?(lt||d===1?s=!0:Ul||(rt&536870912)!==0?s=!1:(xs=s=!0,(d===2||d===9||d===3||d===6)&&(d=kr.current,d!==null&&d.tag===13&&(d.flags|=16384))),Cx(l,s)):td(l)}function td(s){var l=s;do{if((l.flags&32768)!==0){Cx(l,xs);return}s=l.return;var f=BI(l.alternate,l,Va);if(f!==null){tt=f;return}if(l=l.sibling,l!==null){tt=l;return}tt=l=s}while(l!==null);nn===0&&(nn=5)}function Cx(s,l){do{var f=VI(s.alternate,s);if(f!==null){f.flags&=32767,tt=f;return}if(f=s.return,f!==null&&(f.flags|=32768,f.subtreeFlags=0,f.deletions=null),!l&&(s=s.sibling,s!==null)){tt=s;return}tt=s=f}while(s!==null);nn=6,tt=null}function Tx(s,l,f,d,y,x,T,j,q){s.cancelPendingCommit=null;do nd();while(Cn!==0);if((_t&6)!==0)throw Error(r(327));if(l!==null){if(l===s.current)throw Error(r(177));if(x=l.lanes|l.childLanes,x|=Dp,Ap(s,f,x,T,j,q),s===Bt&&(tt=Bt=null,rt=0),Hl=l,As=s,Fa=f,F1=x,U1=y,gx=d,(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,QI(kn,function(){return Dx(),null})):(s.callbackNode=null,s.callbackPriority=0),d=(l.flags&13878)!==0,(l.subtreeFlags&13878)!==0||d){d=K.T,K.T=null,y=G.p,G.p=2,T=_t,_t|=4;try{FI(s,l,f)}finally{_t=T,G.p=y,K.T=d}}Cn=1,Ix(),Nx(),Rx()}}function Ix(){if(Cn===1){Cn=0;var s=As,l=Hl,f=(l.flags&13878)!==0;if((l.subtreeFlags&13878)!==0||f){f=K.T,K.T=null;var d=G.p;G.p=2;var y=_t;_t|=4;try{lx(l,s);var x=nm,T=p2(s.containerInfo),j=x.focusedElem,q=x.selectionRange;if(T!==j&&j&&j.ownerDocument&&d2(j.ownerDocument.documentElement,j)){if(q!==null&&Tp(j)){var ee=q.start,ce=q.end;if(ce===void 0&&(ce=ee),"selectionStart"in j)j.selectionStart=ee,j.selectionEnd=Math.min(ce,j.value.length);else{var he=j.ownerDocument||document,te=he&&he.defaultView||window;if(te.getSelection){var re=te.getSelection(),Ce=j.textContent.length,Le=Math.min(q.start,Ce),kt=q.end===void 0?Le:Math.min(q.end,Ce);!re.extend&&Le>kt&&(T=kt,kt=Le,Le=T);var W=h2(j,Le),Y=h2(j,kt);if(W&&Y&&(re.rangeCount!==1||re.anchorNode!==W.node||re.anchorOffset!==W.offset||re.focusNode!==Y.node||re.focusOffset!==Y.offset)){var J=he.createRange();J.setStart(W.node,W.offset),re.removeAllRanges(),Le>kt?(re.addRange(J),re.extend(Y.node,Y.offset)):(J.setEnd(Y.node,Y.offset),re.addRange(J))}}}}for(he=[],re=j;re=re.parentNode;)re.nodeType===1&&he.push({element:re,left:re.scrollLeft,top:re.scrollTop});for(typeof j.focus=="function"&&j.focus(),j=0;j<he.length;j++){var fe=he[j];fe.element.scrollLeft=fe.left,fe.element.scrollTop=fe.top}}pd=!!tm,nm=tm=null}finally{_t=y,G.p=d,K.T=f}}s.current=l,Cn=2}}function Nx(){if(Cn===2){Cn=0;var s=As,l=Hl,f=(l.flags&8772)!==0;if((l.subtreeFlags&8772)!==0||f){f=K.T,K.T=null;var d=G.p;G.p=2;var y=_t;_t|=4;try{rx(s,l.alternate,l)}finally{_t=y,G.p=d,K.T=f}}Cn=3}}function Rx(){if(Cn===4||Cn===3){Cn=0,Fi();var s=As,l=Hl,f=Fa,d=gx;(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?Cn=5:(Cn=0,Hl=As=null,Ox(s,s.pendingLanes));var y=s.pendingLanes;if(y===0&&(Es=null),Aa(f),l=l.stateNode,ze&&typeof ze.onCommitFiberRoot=="function")try{ze.onCommitFiberRoot(ht,l,void 0,(l.current.flags&128)===128)}catch{}if(d!==null){l=K.T,y=G.p,G.p=2,K.T=null;try{for(var x=s.onRecoverableError,T=0;T<d.length;T++){var j=d[T];x(j.value,{componentStack:j.stack})}}finally{K.T=l,G.p=y}}(Fa&3)!==0&&nd(),oa(s),y=s.pendingLanes,(f&261930)!==0&&(y&42)!==0?s===z1?Du++:(Du=0,z1=s):Du=0,Mu(0)}}function Ox(s,l){(s.pooledCacheLanes&=l)===0&&(l=s.pooledCache,l!=null&&(s.pooledCache=null,du(l)))}function nd(){return Ix(),Nx(),Rx(),Dx()}function Dx(){if(Cn!==5)return!1;var s=As,l=F1;F1=0;var f=Aa(Fa),d=K.T,y=G.p;try{G.p=32>f?32:f,K.T=null,f=U1,U1=null;var x=As,T=Fa;if(Cn=0,Hl=As=null,Fa=0,(_t&6)!==0)throw Error(r(331));var j=_t;if(_t|=4,dx(x.current),ux(x,x.current,T,f),_t=j,Mu(0,!1),ze&&typeof ze.onPostCommitFiberRoot=="function")try{ze.onPostCommitFiberRoot(ht,x)}catch{}return!0}finally{G.p=y,K.T=d,Ox(s,l)}}function Mx(s,l,f){l=Qr(f,l),l=x1(s.stateNode,l,2),s=gs(s,l,2),s!==null&&(po(s,2),oa(s))}function It(s,l,f){if(s.tag===3)Mx(s,s,f);else for(;l!==null;){if(l.tag===3){Mx(l,s,f);break}else if(l.tag===1){var d=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(Es===null||!Es.has(d))){s=Qr(f,s),f=P_(2),d=gs(l,f,2),d!==null&&(k_(f,d,l,s),po(d,2),oa(d));break}}l=l.return}}function q1(s,l,f){var d=s.pingCache;if(d===null){d=s.pingCache=new HI;var y=new Set;d.set(l,y)}else y=d.get(l),y===void 0&&(y=new Set,d.set(l,y));y.has(f)||(j1=!0,y.add(f),s=YI.bind(null,s,l,f),l.then(s,s))}function YI(s,l,f){var d=s.pingCache;d!==null&&d.delete(l),s.pingedLanes|=s.suspendedLanes&f,s.warmLanes&=~f,Bt===s&&(rt&f)===f&&(nn===4||nn===3&&(rt&62914560)===rt&&300>ae()-Wh?(_t&2)===0&&Gl(s,0):B1|=f,zl===rt&&(zl=0)),oa(s)}function Px(s,l){l===0&&(l=Zf()),s=Io(s,l),s!==null&&(po(s,l),oa(s))}function KI(s){var l=s.memoizedState,f=0;l!==null&&(f=l.retryLane),Px(s,f)}function WI(s,l){var f=0;switch(s.tag){case 31:case 13:var d=s.stateNode,y=s.memoizedState;y!==null&&(f=y.retryLane);break;case 19:d=s.stateNode;break;case 22:d=s.stateNode._retryCache;break;default:throw Error(r(314))}d!==null&&d.delete(l),Px(s,f)}function QI(s,l){return vt(s,l)}var rd=null,$l=null,$1=!1,id=!1,X1=!1,Ss=0;function oa(s){s!==$l&&s.next===null&&($l===null?rd=$l=s:$l=$l.next=s),id=!0,$1||($1=!0,JI())}function Mu(s,l){if(!X1&&id){X1=!0;do for(var f=!1,d=rd;d!==null;){if(s!==0){var y=d.pendingLanes;if(y===0)var x=0;else{var T=d.suspendedLanes,j=d.pingedLanes;x=(1<<31-an(42|s)+1)-1,x&=y&~(T&~j),x=x&201326741?x&201326741|1:x?x|2:0}x!==0&&(f=!0,Bx(d,x))}else x=rt,x=Hi(d,d===Bt?x:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),(x&3)===0||di(d,x)||(f=!0,Bx(d,x));d=d.next}while(f);X1=!1}}function ZI(){kx()}function kx(){id=$1=!1;var s=0;Ss!==0&&c4()&&(s=Ss);for(var l=ae(),f=null,d=rd;d!==null;){var y=d.next,x=Lx(d,l);x===0?(d.next=null,f===null?rd=y:f.next=y,y===null&&($l=f)):(f=d,(s!==0||(x&3)!==0)&&(id=!0)),d=y}Cn!==0&&Cn!==5||Mu(s),Ss!==0&&(Ss=0)}function Lx(s,l){for(var f=s.suspendedLanes,d=s.pingedLanes,y=s.expirationTimes,x=s.pendingLanes&-62914561;0<x;){var T=31-an(x),j=1<<T,q=y[T];q===-1?((j&f)===0||(j&d)!==0)&&(y[T]=Ep(j,l)):q<=l&&(s.expiredLanes|=j),x&=~j}if(l=Bt,f=rt,f=Hi(s,s===l?f:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),d=s.callbackNode,f===0||s===l&&(Tt===2||Tt===9)||s.cancelPendingCommit!==null)return d!==null&&d!==null&&Sn(d),s.callbackNode=null,s.callbackPriority=0;if((f&3)===0||di(s,f)){if(l=f&-f,l===s.callbackPriority)return l;switch(d!==null&&Sn(d),Aa(f)){case 2:case 8:f=Wt;break;case 32:f=kn;break;case 268435456:f=qr;break;default:f=kn}return d=jx.bind(null,s),f=vt(f,d),s.callbackPriority=l,s.callbackNode=f,l}return d!==null&&d!==null&&Sn(d),s.callbackPriority=2,s.callbackNode=null,2}function jx(s,l){if(Cn!==0&&Cn!==5)return s.callbackNode=null,s.callbackPriority=0,null;var f=s.callbackNode;if(nd()&&s.callbackNode!==f)return null;var d=rt;return d=Hi(s,s===Bt?d:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),d===0?null:(yx(s,d,l),Lx(s,ae()),s.callbackNode!=null&&s.callbackNode===f?jx.bind(null,s):null)}function Bx(s,l){if(nd())return null;yx(s,l,!0)}function JI(){f4(function(){(_t&6)!==0?vt(Ke,ZI):kx()})}function Y1(){if(Ss===0){var s=Ol;s===0&&(s=Ui,Ui<<=1,(Ui&261888)===0&&(Ui=256)),Ss=s}return Ss}function Vx(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:gl(""+s)}function Fx(s,l){var f=l.ownerDocument.createElement("input");return f.name=l.name,f.value=l.value,s.id&&f.setAttribute("form",s.id),l.parentNode.insertBefore(f,l),s=new FormData(s),f.parentNode.removeChild(f),s}function e4(s,l,f,d,y){if(l==="submit"&&f&&f.stateNode===y){var x=Vx((y[jn]||null).action),T=d.submitter;T&&(l=(l=T[jn]||null)?Vx(l.formAction):T.getAttribute("formAction"),l!==null&&(x=l,T=null));var j=new ea("action","action",null,d,y);s.push({event:j,listeners:[{instance:null,listener:function(){if(d.defaultPrevented){if(Ss!==0){var q=T?Fx(y,T):new FormData(y);p1(f,{pending:!0,data:q,method:y.method,action:x},null,q)}}else typeof x=="function"&&(j.preventDefault(),q=T?Fx(y,T):new FormData(y),p1(f,{pending:!0,data:q,method:y.method,action:x},x,q))},currentTarget:y}]})}}for(var K1=0;K1<Op.length;K1++){var W1=Op[K1],t4=W1.toLowerCase(),n4=W1[0].toUpperCase()+W1.slice(1);wi(t4,"on"+n4)}wi(v2,"onAnimationEnd"),wi(y2,"onAnimationIteration"),wi(_2,"onAnimationStart"),wi("dblclick","onDoubleClick"),wi("focusin","onFocus"),wi("focusout","onBlur"),wi(yI,"onTransitionRun"),wi(_I,"onTransitionStart"),wi(xI,"onTransitionCancel"),wi(x2,"onTransitionEnd"),Wi("onMouseEnter",["mouseout","mouseover"]),Wi("onMouseLeave",["mouseout","mouseover"]),Wi("onPointerEnter",["pointerout","pointerover"]),Wi("onPointerLeave",["pointerout","pointerover"]),Ki("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ki("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ki("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ki("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ki("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ki("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Pu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),r4=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Pu));function Ux(s,l){l=(l&4)!==0;for(var f=0;f<s.length;f++){var d=s[f],y=d.event;d=d.listeners;e:{var x=void 0;if(l)for(var T=d.length-1;0<=T;T--){var j=d[T],q=j.instance,ee=j.currentTarget;if(j=j.listener,q!==x&&y.isPropagationStopped())break e;x=j,y.currentTarget=ee;try{x(y)}catch(ce){_h(ce)}y.currentTarget=null,x=q}else for(T=0;T<d.length;T++){if(j=d[T],q=j.instance,ee=j.currentTarget,j=j.listener,q!==x&&y.isPropagationStopped())break e;x=j,y.currentTarget=ee;try{x(y)}catch(ce){_h(ce)}y.currentTarget=null,x=q}}}}function nt(s,l){var f=l[fl];f===void 0&&(f=l[fl]=new Set);var d=s+"__bubble";f.has(d)||(zx(l,s,2,!1),f.add(d))}function Q1(s,l,f){var d=0;l&&(d|=4),zx(f,s,d,l)}var ad="_reactListening"+Math.random().toString(36).slice(2);function Z1(s){if(!s[ad]){s[ad]=!0,$c.forEach(function(f){f!=="selectionchange"&&(r4.has(f)||Q1(f,!1,s),Q1(f,!0,s))});var l=s.nodeType===9?s:s.ownerDocument;l===null||l[ad]||(l[ad]=!0,Q1("selectionchange",!1,l))}}function zx(s,l,f,d){switch(vw(l)){case 2:var y=O4;break;case 8:y=D4;break;default:y=dm}f=y.bind(null,l,f,s),y=void 0,!xo||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(y=!0),d?y!==void 0?s.addEventListener(l,f,{capture:!0,passive:y}):s.addEventListener(l,f,!0):y!==void 0?s.addEventListener(l,f,{passive:y}):s.addEventListener(l,f,!1)}function J1(s,l,f,d,y){var x=d;if((l&1)===0&&(l&2)===0&&d!==null)e:for(;;){if(d===null)return;var T=d.tag;if(T===3||T===4){var j=d.stateNode.containerInfo;if(j===y)break;if(T===4)for(T=d.return;T!==null;){var q=T.tag;if((q===3||q===4)&&T.stateNode.containerInfo===y)return;T=T.return}for(;j!==null;){if(T=Xi(j),T===null)return;if(q=T.tag,q===5||q===6||q===26||q===27){d=x=T;continue e}j=j.parentNode}}d=d.return}ss(function(){var ee=x,ce=Xr(f),he=[];e:{var te=w2.get(s);if(te!==void 0){var re=ea,Ce=s;switch(s){case"keypress":if(Eo(f)===0)break e;case"keydown":case"keyup":re=gh;break;case"focusin":Ce="focus",re=bo;break;case"focusout":Ce="blur",re=bo;break;case"beforeblur":case"afterblur":re=bo;break;case"click":if(f.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":re=au;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":re=oh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":re=E;break;case v2:case y2:case _2:re=ch;break;case x2:re=U;break;case"scroll":case"scrollend":re=iu;break;case"wheel":re=ne;break;case"copy":case"cut":case"paste":re=uh;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":re=Ca;break;case"toggle":case"beforetoggle":re=$e}var Le=(l&4)!==0,kt=!Le&&(s==="scroll"||s==="scrollend"),W=Le?te!==null?te+"Capture":null:te;Le=[];for(var Y=ee,J;Y!==null;){var fe=Y;if(J=fe.stateNode,fe=fe.tag,fe!==5&&fe!==26&&fe!==27||J===null||W===null||(fe=vi(Y,W),fe!=null&&Le.push(ku(Y,fe,J))),kt)break;Y=Y.return}0<Le.length&&(te=new re(te,Ce,null,f,ce),he.push({event:te,listeners:Le}))}}if((l&7)===0){e:{if(te=s==="mouseover"||s==="pointerover",re=s==="mouseout"||s==="pointerout",te&&f!==tu&&(Ce=f.relatedTarget||f.fromElement)&&(Xi(Ce)||Ce[qi]))break e;if((re||te)&&(te=ce.window===ce?ce:(te=ce.ownerDocument)?te.defaultView||te.parentWindow:window,re?(Ce=f.relatedTarget||f.toElement,re=ee,Ce=Ce?Xi(Ce):null,Ce!==null&&(kt=a(Ce),Le=Ce.tag,Ce!==kt||Le!==5&&Le!==27&&Le!==6)&&(Ce=null)):(re=null,Ce=ee),re!==Ce)){if(Le=au,fe="onMouseLeave",W="onMouseEnter",Y="mouse",(s==="pointerout"||s==="pointerover")&&(Le=Ca,fe="onPointerLeave",W="onPointerEnter",Y="pointer"),kt=re==null?te:Or(re),J=Ce==null?te:Or(Ce),te=new Le(fe,Y+"leave",re,f,ce),te.target=kt,te.relatedTarget=J,fe=null,Xi(ce)===ee&&(Le=new Le(W,Y+"enter",Ce,f,ce),Le.target=J,Le.relatedTarget=kt,fe=Le),kt=fe,re&&Ce)t:{for(Le=i4,W=re,Y=Ce,J=0,fe=W;fe;fe=Le(fe))J++;fe=0;for(var De=Y;De;De=Le(De))fe++;for(;0<J-fe;)W=Le(W),J--;for(;0<fe-J;)Y=Le(Y),fe--;for(;J--;){if(W===Y||Y!==null&&W===Y.alternate){Le=W;break t}W=Le(W),Y=Le(Y)}Le=null}else Le=null;re!==null&&Hx(he,te,re,Le,!1),Ce!==null&&kt!==null&&Hx(he,kt,Ce,Le,!0)}}e:{if(te=ee?Or(ee):window,re=te.nodeName&&te.nodeName.toLowerCase(),re==="select"||re==="input"&&te.type==="file")var pt=s2;else if(i2(te))if(o2)pt=mI;else{pt=dI;var Ie=hI}else re=te.nodeName,!re||re.toLowerCase()!=="input"||te.type!=="checkbox"&&te.type!=="radio"?ee&&ml(ee.elementType)&&(pt=s2):pt=pI;if(pt&&(pt=pt(s,ee))){a2(he,pt,f,ce);break e}Ie&&Ie(s,te,ee),s==="focusout"&&ee&&te.type==="number"&&ee.memoizedProps.value!=null&&Zc(te,"number",te.value)}switch(Ie=ee?Or(ee):window,s){case"focusin":(i2(Ie)||Ie.contentEditable==="true")&&(Al=Ie,Ip=ee,uu=null);break;case"focusout":uu=Ip=Al=null;break;case"mousedown":Np=!0;break;case"contextmenu":case"mouseup":case"dragend":Np=!1,m2(he,f,ce);break;case"selectionchange":if(vI)break;case"keydown":case"keyup":m2(he,f,ce)}var We;if(yt)e:{switch(s){case"compositionstart":var it="onCompositionStart";break e;case"compositionend":it="onCompositionEnd";break e;case"compositionupdate":it="onCompositionUpdate";break e}it=void 0}else El?So(s,f)&&(it="onCompositionEnd"):s==="keydown"&&f.keyCode===229&&(it="onCompositionStart");it&&(ra&&f.locale!=="ko"&&(El||it!=="onCompositionStart"?it==="onCompositionEnd"&&El&&(We=ru()):(Ji=ce,nu="value"in Ji?Ji.value:Ji.textContent,El=!0)),Ie=sd(ee,it),0<Ie.length&&(it=new na(it,s,null,f,ce),he.push({event:it,listeners:Ie}),We?it.data=We:(We=wl(f),We!==null&&(it.data=We)))),(We=Kr?lI(s,f):cI(s,f))&&(it=sd(ee,"onBeforeInput"),0<it.length&&(Ie=new na("onBeforeInput","beforeinput",null,f,ce),he.push({event:Ie,listeners:it}),Ie.data=We)),e4(he,s,ee,f,ce)}Ux(he,l)})}function ku(s,l,f){return{instance:s,listener:l,currentTarget:f}}function sd(s,l){for(var f=l+"Capture",d=[];s!==null;){var y=s,x=y.stateNode;if(y=y.tag,y!==5&&y!==26&&y!==27||x===null||(y=vi(s,f),y!=null&&d.unshift(ku(s,y,x)),y=vi(s,l),y!=null&&d.push(ku(s,y,x))),s.tag===3)return d;s=s.return}return[]}function i4(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function Hx(s,l,f,d,y){for(var x=l._reactName,T=[];f!==null&&f!==d;){var j=f,q=j.alternate,ee=j.stateNode;if(j=j.tag,q!==null&&q===d)break;j!==5&&j!==26&&j!==27||ee===null||(q=ee,y?(ee=vi(f,x),ee!=null&&T.unshift(ku(f,ee,q))):y||(ee=vi(f,x),ee!=null&&T.push(ku(f,ee,q)))),f=f.return}T.length!==0&&s.push({event:l,listeners:T})}var a4=/\r\n?/g,s4=/\u0000|\uFFFD/g;function Gx(s){return(typeof s=="string"?s:""+s).replace(a4,`
`).replace(s4,"")}function qx(s,l){return l=Gx(l),Gx(s)===l}function Pt(s,l,f,d,y,x){switch(f){case"children":typeof d=="string"?l==="body"||l==="textarea"&&d===""||_r(s,d):(typeof d=="number"||typeof d=="bigint")&&l!=="body"&&_r(s,""+d);break;case"className":Dr(s,"class",d);break;case"tabIndex":Dr(s,"tabindex",d);break;case"dir":case"role":case"viewBox":case"width":case"height":Dr(s,f,d);break;case"style":eu(s,d,x);break;case"data":if(l!=="object"){Dr(s,"data",d);break}case"src":case"href":if(d===""&&(l!=="a"||f!=="href")){s.removeAttribute(f);break}if(d==null||typeof d=="function"||typeof d=="symbol"||typeof d=="boolean"){s.removeAttribute(f);break}d=gl(""+d),s.setAttribute(f,d);break;case"action":case"formAction":if(typeof d=="function"){s.setAttribute(f,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof x=="function"&&(f==="formAction"?(l!=="input"&&Pt(s,l,"name",y.name,y,null),Pt(s,l,"formEncType",y.formEncType,y,null),Pt(s,l,"formMethod",y.formMethod,y,null),Pt(s,l,"formTarget",y.formTarget,y,null)):(Pt(s,l,"encType",y.encType,y,null),Pt(s,l,"method",y.method,y,null),Pt(s,l,"target",y.target,y,null)));if(d==null||typeof d=="symbol"||typeof d=="boolean"){s.removeAttribute(f);break}d=gl(""+d),s.setAttribute(f,d);break;case"onClick":d!=null&&(s.onclick=gi);break;case"onScroll":d!=null&&nt("scroll",s);break;case"onScrollEnd":d!=null&&nt("scrollend",s);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(r(61));if(f=d.__html,f!=null){if(y.children!=null)throw Error(r(60));s.innerHTML=f}}break;case"multiple":s.multiple=d&&typeof d!="function"&&typeof d!="symbol";break;case"muted":s.muted=d&&typeof d!="function"&&typeof d!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(d==null||typeof d=="function"||typeof d=="boolean"||typeof d=="symbol"){s.removeAttribute("xlink:href");break}f=gl(""+d),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",f);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":d!=null&&typeof d!="function"&&typeof d!="symbol"?s.setAttribute(f,""+d):s.removeAttribute(f);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":d&&typeof d!="function"&&typeof d!="symbol"?s.setAttribute(f,""):s.removeAttribute(f);break;case"capture":case"download":d===!0?s.setAttribute(f,""):d!==!1&&d!=null&&typeof d!="function"&&typeof d!="symbol"?s.setAttribute(f,d):s.removeAttribute(f);break;case"cols":case"rows":case"size":case"span":d!=null&&typeof d!="function"&&typeof d!="symbol"&&!isNaN(d)&&1<=d?s.setAttribute(f,d):s.removeAttribute(f);break;case"rowSpan":case"start":d==null||typeof d=="function"||typeof d=="symbol"||isNaN(d)?s.removeAttribute(f):s.setAttribute(f,d);break;case"popover":nt("beforetoggle",s),nt("toggle",s),dl(s,"popover",d);break;case"xlinkActuate":mn(s,"http://www.w3.org/1999/xlink","xlink:actuate",d);break;case"xlinkArcrole":mn(s,"http://www.w3.org/1999/xlink","xlink:arcrole",d);break;case"xlinkRole":mn(s,"http://www.w3.org/1999/xlink","xlink:role",d);break;case"xlinkShow":mn(s,"http://www.w3.org/1999/xlink","xlink:show",d);break;case"xlinkTitle":mn(s,"http://www.w3.org/1999/xlink","xlink:title",d);break;case"xlinkType":mn(s,"http://www.w3.org/1999/xlink","xlink:type",d);break;case"xmlBase":mn(s,"http://www.w3.org/XML/1998/namespace","xml:base",d);break;case"xmlLang":mn(s,"http://www.w3.org/XML/1998/namespace","xml:lang",d);break;case"xmlSpace":mn(s,"http://www.w3.org/XML/1998/namespace","xml:space",d);break;case"is":dl(s,"is",d);break;case"innerText":case"textContent":break;default:(!(2<f.length)||f[0]!=="o"&&f[0]!=="O"||f[1]!=="n"&&f[1]!=="N")&&(f=sh.get(f)||f,dl(s,f,d))}}function em(s,l,f,d,y,x){switch(f){case"style":eu(s,d,x);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(r(61));if(f=d.__html,f!=null){if(y.children!=null)throw Error(r(60));s.innerHTML=f}}break;case"children":typeof d=="string"?_r(s,d):(typeof d=="number"||typeof d=="bigint")&&_r(s,""+d);break;case"onScroll":d!=null&&nt("scroll",s);break;case"onScrollEnd":d!=null&&nt("scrollend",s);break;case"onClick":d!=null&&(s.onclick=gi);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Xc.hasOwnProperty(f))e:{if(f[0]==="o"&&f[1]==="n"&&(y=f.endsWith("Capture"),l=f.slice(2,y?f.length-7:void 0),x=s[jn]||null,x=x!=null?x[f]:null,typeof x=="function"&&s.removeEventListener(l,x,y),typeof d=="function")){typeof x!="function"&&x!==null&&(f in s?s[f]=null:s.hasAttribute(f)&&s.removeAttribute(f)),s.addEventListener(l,d,y);break e}f in s?s[f]=d:d===!0?s.setAttribute(f,""):dl(s,f,d)}}}function Zn(s,l,f){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":nt("error",s),nt("load",s);var d=!1,y=!1,x;for(x in f)if(f.hasOwnProperty(x)){var T=f[x];if(T!=null)switch(x){case"src":d=!0;break;case"srcSet":y=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,l));default:Pt(s,l,x,T,f,null)}}y&&Pt(s,l,"srcSet",f.srcSet,f,null),d&&Pt(s,l,"src",f.src,f,null);return;case"input":nt("invalid",s);var j=x=T=y=null,q=null,ee=null;for(d in f)if(f.hasOwnProperty(d)){var ce=f[d];if(ce!=null)switch(d){case"name":y=ce;break;case"type":T=ce;break;case"checked":q=ce;break;case"defaultChecked":ee=ce;break;case"value":x=ce;break;case"defaultValue":j=ce;break;case"children":case"dangerouslySetInnerHTML":if(ce!=null)throw Error(r(137,l));break;default:Pt(s,l,d,ce,f,null)}}rh(s,x,j,q,ee,T,y,!1);return;case"select":nt("invalid",s),d=T=x=null;for(y in f)if(f.hasOwnProperty(y)&&(j=f[y],j!=null))switch(y){case"value":x=j;break;case"defaultValue":T=j;break;case"multiple":d=j;default:Pt(s,l,y,j,f,null)}l=x,f=T,s.multiple=!!d,l!=null?ns(s,!!d,l,!1):f!=null&&ns(s,!!d,f,!0);return;case"textarea":nt("invalid",s),x=y=d=null;for(T in f)if(f.hasOwnProperty(T)&&(j=f[T],j!=null))switch(T){case"value":d=j;break;case"defaultValue":y=j;break;case"children":x=j;break;case"dangerouslySetInnerHTML":if(j!=null)throw Error(r(91));break;default:Pt(s,l,T,j,f,null)}rs(s,d,y,x);return;case"option":for(q in f)if(f.hasOwnProperty(q)&&(d=f[q],d!=null))switch(q){case"selected":s.selected=d&&typeof d!="function"&&typeof d!="symbol";break;default:Pt(s,l,q,d,f,null)}return;case"dialog":nt("beforetoggle",s),nt("toggle",s),nt("cancel",s),nt("close",s);break;case"iframe":case"object":nt("load",s);break;case"video":case"audio":for(d=0;d<Pu.length;d++)nt(Pu[d],s);break;case"image":nt("error",s),nt("load",s);break;case"details":nt("toggle",s);break;case"embed":case"source":case"link":nt("error",s),nt("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ee in f)if(f.hasOwnProperty(ee)&&(d=f[ee],d!=null))switch(ee){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,l));default:Pt(s,l,ee,d,f,null)}return;default:if(ml(l)){for(ce in f)f.hasOwnProperty(ce)&&(d=f[ce],d!==void 0&&em(s,l,ce,d,f,void 0));return}}for(j in f)f.hasOwnProperty(j)&&(d=f[j],d!=null&&Pt(s,l,j,d,f,null))}function o4(s,l,f,d){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var y=null,x=null,T=null,j=null,q=null,ee=null,ce=null;for(re in f){var he=f[re];if(f.hasOwnProperty(re)&&he!=null)switch(re){case"checked":break;case"value":break;case"defaultValue":q=he;default:d.hasOwnProperty(re)||Pt(s,l,re,null,d,he)}}for(var te in d){var re=d[te];if(he=f[te],d.hasOwnProperty(te)&&(re!=null||he!=null))switch(te){case"type":x=re;break;case"name":y=re;break;case"checked":ee=re;break;case"defaultChecked":ce=re;break;case"value":T=re;break;case"defaultValue":j=re;break;case"children":case"dangerouslySetInnerHTML":if(re!=null)throw Error(r(137,l));break;default:re!==he&&Pt(s,l,te,re,d,he)}}pl(s,T,j,q,ee,ce,x,y);return;case"select":re=T=j=te=null;for(x in f)if(q=f[x],f.hasOwnProperty(x)&&q!=null)switch(x){case"value":break;case"multiple":re=q;default:d.hasOwnProperty(x)||Pt(s,l,x,null,d,q)}for(y in d)if(x=d[y],q=f[y],d.hasOwnProperty(y)&&(x!=null||q!=null))switch(y){case"value":te=x;break;case"defaultValue":j=x;break;case"multiple":T=x;default:x!==q&&Pt(s,l,y,x,d,q)}l=j,f=T,d=re,te!=null?ns(s,!!f,te,!1):!!d!=!!f&&(l!=null?ns(s,!!f,l,!0):ns(s,!!f,f?[]:"",!1));return;case"textarea":re=te=null;for(j in f)if(y=f[j],f.hasOwnProperty(j)&&y!=null&&!d.hasOwnProperty(j))switch(j){case"value":break;case"children":break;default:Pt(s,l,j,null,d,y)}for(T in d)if(y=d[T],x=f[T],d.hasOwnProperty(T)&&(y!=null||x!=null))switch(T){case"value":te=y;break;case"defaultValue":re=y;break;case"children":break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(r(91));break;default:y!==x&&Pt(s,l,T,y,d,x)}ih(s,te,re);return;case"option":for(var Ce in f)if(te=f[Ce],f.hasOwnProperty(Ce)&&te!=null&&!d.hasOwnProperty(Ce))switch(Ce){case"selected":s.selected=!1;break;default:Pt(s,l,Ce,null,d,te)}for(q in d)if(te=d[q],re=f[q],d.hasOwnProperty(q)&&te!==re&&(te!=null||re!=null))switch(q){case"selected":s.selected=te&&typeof te!="function"&&typeof te!="symbol";break;default:Pt(s,l,q,te,d,re)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Le in f)te=f[Le],f.hasOwnProperty(Le)&&te!=null&&!d.hasOwnProperty(Le)&&Pt(s,l,Le,null,d,te);for(ee in d)if(te=d[ee],re=f[ee],d.hasOwnProperty(ee)&&te!==re&&(te!=null||re!=null))switch(ee){case"children":case"dangerouslySetInnerHTML":if(te!=null)throw Error(r(137,l));break;default:Pt(s,l,ee,te,d,re)}return;default:if(ml(l)){for(var kt in f)te=f[kt],f.hasOwnProperty(kt)&&te!==void 0&&!d.hasOwnProperty(kt)&&em(s,l,kt,void 0,d,te);for(ce in d)te=d[ce],re=f[ce],!d.hasOwnProperty(ce)||te===re||te===void 0&&re===void 0||em(s,l,ce,te,d,re);return}}for(var W in f)te=f[W],f.hasOwnProperty(W)&&te!=null&&!d.hasOwnProperty(W)&&Pt(s,l,W,null,d,te);for(he in d)te=d[he],re=f[he],!d.hasOwnProperty(he)||te===re||te==null&&re==null||Pt(s,l,he,te,d,re)}function $x(s){switch(s){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function l4(){if(typeof performance.getEntriesByType=="function"){for(var s=0,l=0,f=performance.getEntriesByType("resource"),d=0;d<f.length;d++){var y=f[d],x=y.transferSize,T=y.initiatorType,j=y.duration;if(x&&j&&$x(T)){for(T=0,j=y.responseEnd,d+=1;d<f.length;d++){var q=f[d],ee=q.startTime;if(ee>j)break;var ce=q.transferSize,he=q.initiatorType;ce&&$x(he)&&(q=q.responseEnd,T+=ce*(q<j?1:(j-ee)/(q-ee)))}if(--d,l+=8*(x+T)/(y.duration/1e3),s++,10<s)break}}if(0<s)return l/s/1e6}return navigator.connection&&(s=navigator.connection.downlink,typeof s=="number")?s:5}var tm=null,nm=null;function od(s){return s.nodeType===9?s:s.ownerDocument}function Xx(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Yx(s,l){if(s===0)switch(l){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&l==="foreignObject"?0:s}function rm(s,l){return s==="textarea"||s==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.children=="bigint"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var im=null;function c4(){var s=window.event;return s&&s.type==="popstate"?s===im?!1:(im=s,!0):(im=null,!1)}var Kx=typeof setTimeout=="function"?setTimeout:void 0,u4=typeof clearTimeout=="function"?clearTimeout:void 0,Wx=typeof Promise=="function"?Promise:void 0,f4=typeof queueMicrotask=="function"?queueMicrotask:typeof Wx<"u"?function(s){return Wx.resolve(null).then(s).catch(h4)}:Kx;function h4(s){setTimeout(function(){throw s})}function Cs(s){return s==="head"}function Qx(s,l){var f=l,d=0;do{var y=f.nextSibling;if(s.removeChild(f),y&&y.nodeType===8)if(f=y.data,f==="/$"||f==="/&"){if(d===0){s.removeChild(y),Wl(l);return}d--}else if(f==="$"||f==="$?"||f==="$~"||f==="$!"||f==="&")d++;else if(f==="html")Lu(s.ownerDocument.documentElement);else if(f==="head"){f=s.ownerDocument.head,Lu(f);for(var x=f.firstChild;x;){var T=x.nextSibling,j=x.nodeName;x[$i]||j==="SCRIPT"||j==="STYLE"||j==="LINK"&&x.rel.toLowerCase()==="stylesheet"||f.removeChild(x),x=T}}else f==="body"&&Lu(s.ownerDocument.body);f=y}while(f);Wl(l)}function Zx(s,l){var f=s;s=0;do{var d=f.nextSibling;if(f.nodeType===1?l?(f._stashedDisplay=f.style.display,f.style.display="none"):(f.style.display=f._stashedDisplay||"",f.getAttribute("style")===""&&f.removeAttribute("style")):f.nodeType===3&&(l?(f._stashedText=f.nodeValue,f.nodeValue=""):f.nodeValue=f._stashedText||""),d&&d.nodeType===8)if(f=d.data,f==="/$"){if(s===0)break;s--}else f!=="$"&&f!=="$?"&&f!=="$~"&&f!=="$!"||s++;f=d}while(f)}function am(s){var l=s.firstChild;for(l&&l.nodeType===10&&(l=l.nextSibling);l;){var f=l;switch(l=l.nextSibling,f.nodeName){case"HTML":case"HEAD":case"BODY":am(f),hl(f);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(f.rel.toLowerCase()==="stylesheet")continue}s.removeChild(f)}}function d4(s,l,f,d){for(;s.nodeType===1;){var y=f;if(s.nodeName.toLowerCase()!==l.toLowerCase()){if(!d&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(d){if(!s[$i])switch(l){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(x=s.getAttribute("rel"),x==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(x!==y.rel||s.getAttribute("href")!==(y.href==null||y.href===""?null:y.href)||s.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin)||s.getAttribute("title")!==(y.title==null?null:y.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(x=s.getAttribute("src"),(x!==(y.src==null?null:y.src)||s.getAttribute("type")!==(y.type==null?null:y.type)||s.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin))&&x&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(l==="input"&&s.type==="hidden"){var x=y.name==null?null:""+y.name;if(y.type==="hidden"&&s.getAttribute("name")===x)return s}else return s;if(s=ni(s.nextSibling),s===null)break}return null}function p4(s,l,f){if(l==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!f||(s=ni(s.nextSibling),s===null))return null;return s}function Jx(s,l){for(;s.nodeType!==8;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!l||(s=ni(s.nextSibling),s===null))return null;return s}function sm(s){return s.data==="$?"||s.data==="$~"}function om(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState!=="loading"}function m4(s,l){var f=s.ownerDocument;if(s.data==="$~")s._reactRetry=l;else if(s.data!=="$?"||f.readyState!=="loading")l();else{var d=function(){l(),f.removeEventListener("DOMContentLoaded",d)};f.addEventListener("DOMContentLoaded",d),s._reactRetry=d}}function ni(s){for(;s!=null;s=s.nextSibling){var l=s.nodeType;if(l===1||l===3)break;if(l===8){if(l=s.data,l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"||l==="F!"||l==="F")break;if(l==="/$"||l==="/&")return null}}return s}var lm=null;function ew(s){s=s.nextSibling;for(var l=0;s;){if(s.nodeType===8){var f=s.data;if(f==="/$"||f==="/&"){if(l===0)return ni(s.nextSibling);l--}else f!=="$"&&f!=="$!"&&f!=="$?"&&f!=="$~"&&f!=="&"||l++}s=s.nextSibling}return null}function tw(s){s=s.previousSibling;for(var l=0;s;){if(s.nodeType===8){var f=s.data;if(f==="$"||f==="$!"||f==="$?"||f==="$~"||f==="&"){if(l===0)return s;l--}else f!=="/$"&&f!=="/&"||l++}s=s.previousSibling}return null}function nw(s,l,f){switch(l=od(f),s){case"html":if(s=l.documentElement,!s)throw Error(r(452));return s;case"head":if(s=l.head,!s)throw Error(r(453));return s;case"body":if(s=l.body,!s)throw Error(r(454));return s;default:throw Error(r(451))}}function Lu(s){for(var l=s.attributes;l.length;)s.removeAttributeNode(l[0]);hl(s)}var ri=new Map,rw=new Set;function ld(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var Ua=G.d;G.d={f:g4,r:v4,D:y4,C:_4,L:x4,m:w4,X:A4,S:E4,M:b4};function g4(){var s=Ua.f(),l=Jh();return s||l}function v4(s){var l=$r(s);l!==null&&l.tag===5&&l.type==="form"?x_(l):Ua.r(s)}var Xl=typeof document>"u"?null:document;function iw(s,l,f){var d=Xl;if(d&&typeof l=="string"&&l){var y=yr(l);y='link[rel="'+s+'"][href="'+y+'"]',typeof f=="string"&&(y+='[crossorigin="'+f+'"]'),rw.has(y)||(rw.add(y),s={rel:s,crossOrigin:f,href:l},d.querySelector(y)===null&&(l=d.createElement("link"),Zn(l,"link",s),pn(l),d.head.appendChild(l)))}}function y4(s){Ua.D(s),iw("dns-prefetch",s,null)}function _4(s,l){Ua.C(s,l),iw("preconnect",s,l)}function x4(s,l,f){Ua.L(s,l,f);var d=Xl;if(d&&s&&l){var y='link[rel="preload"][as="'+yr(l)+'"]';l==="image"&&f&&f.imageSrcSet?(y+='[imagesrcset="'+yr(f.imageSrcSet)+'"]',typeof f.imageSizes=="string"&&(y+='[imagesizes="'+yr(f.imageSizes)+'"]')):y+='[href="'+yr(s)+'"]';var x=y;switch(l){case"style":x=Yl(s);break;case"script":x=Kl(s)}ri.has(x)||(s=g({rel:"preload",href:l==="image"&&f&&f.imageSrcSet?void 0:s,as:l},f),ri.set(x,s),d.querySelector(y)!==null||l==="style"&&d.querySelector(ju(x))||l==="script"&&d.querySelector(Bu(x))||(l=d.createElement("link"),Zn(l,"link",s),pn(l),d.head.appendChild(l)))}}function w4(s,l){Ua.m(s,l);var f=Xl;if(f&&s){var d=l&&typeof l.as=="string"?l.as:"script",y='link[rel="modulepreload"][as="'+yr(d)+'"][href="'+yr(s)+'"]',x=y;switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":x=Kl(s)}if(!ri.has(x)&&(s=g({rel:"modulepreload",href:s},l),ri.set(x,s),f.querySelector(y)===null)){switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(f.querySelector(Bu(x)))return}d=f.createElement("link"),Zn(d,"link",s),pn(d),f.head.appendChild(d)}}}function E4(s,l,f){Ua.S(s,l,f);var d=Xl;if(d&&s){var y=Yi(d).hoistableStyles,x=Yl(s);l=l||"default";var T=y.get(x);if(!T){var j={loading:0,preload:null};if(T=d.querySelector(ju(x)))j.loading=5;else{s=g({rel:"stylesheet",href:s,"data-precedence":l},f),(f=ri.get(x))&&cm(s,f);var q=T=d.createElement("link");pn(q),Zn(q,"link",s),q._p=new Promise(function(ee,ce){q.onload=ee,q.onerror=ce}),q.addEventListener("load",function(){j.loading|=1}),q.addEventListener("error",function(){j.loading|=2}),j.loading|=4,cd(T,l,d)}T={type:"stylesheet",instance:T,count:1,state:j},y.set(x,T)}}}function A4(s,l){Ua.X(s,l);var f=Xl;if(f&&s){var d=Yi(f).hoistableScripts,y=Kl(s),x=d.get(y);x||(x=f.querySelector(Bu(y)),x||(s=g({src:s,async:!0},l),(l=ri.get(y))&&um(s,l),x=f.createElement("script"),pn(x),Zn(x,"link",s),f.head.appendChild(x)),x={type:"script",instance:x,count:1,state:null},d.set(y,x))}}function b4(s,l){Ua.M(s,l);var f=Xl;if(f&&s){var d=Yi(f).hoistableScripts,y=Kl(s),x=d.get(y);x||(x=f.querySelector(Bu(y)),x||(s=g({src:s,async:!0,type:"module"},l),(l=ri.get(y))&&um(s,l),x=f.createElement("script"),pn(x),Zn(x,"link",s),f.head.appendChild(x)),x={type:"script",instance:x,count:1,state:null},d.set(y,x))}}function aw(s,l,f,d){var y=(y=Re.current)?ld(y):null;if(!y)throw Error(r(446));switch(s){case"meta":case"title":return null;case"style":return typeof f.precedence=="string"&&typeof f.href=="string"?(l=Yl(f.href),f=Yi(y).hoistableStyles,d=f.get(l),d||(d={type:"style",instance:null,count:0,state:null},f.set(l,d)),d):{type:"void",instance:null,count:0,state:null};case"link":if(f.rel==="stylesheet"&&typeof f.href=="string"&&typeof f.precedence=="string"){s=Yl(f.href);var x=Yi(y).hoistableStyles,T=x.get(s);if(T||(y=y.ownerDocument||y,T={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},x.set(s,T),(x=y.querySelector(ju(s)))&&!x._p&&(T.instance=x,T.state.loading=5),ri.has(s)||(f={rel:"preload",as:"style",href:f.href,crossOrigin:f.crossOrigin,integrity:f.integrity,media:f.media,hrefLang:f.hrefLang,referrerPolicy:f.referrerPolicy},ri.set(s,f),x||S4(y,s,f,T.state))),l&&d===null)throw Error(r(528,""));return T}if(l&&d!==null)throw Error(r(529,""));return null;case"script":return l=f.async,f=f.src,typeof f=="string"&&l&&typeof l!="function"&&typeof l!="symbol"?(l=Kl(f),f=Yi(y).hoistableScripts,d=f.get(l),d||(d={type:"script",instance:null,count:0,state:null},f.set(l,d)),d):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,s))}}function Yl(s){return'href="'+yr(s)+'"'}function ju(s){return'link[rel="stylesheet"]['+s+"]"}function sw(s){return g({},s,{"data-precedence":s.precedence,precedence:null})}function S4(s,l,f,d){s.querySelector('link[rel="preload"][as="style"]['+l+"]")?d.loading=1:(l=s.createElement("link"),d.preload=l,l.addEventListener("load",function(){return d.loading|=1}),l.addEventListener("error",function(){return d.loading|=2}),Zn(l,"link",f),pn(l),s.head.appendChild(l))}function Kl(s){return'[src="'+yr(s)+'"]'}function Bu(s){return"script[async]"+s}function ow(s,l,f){if(l.count++,l.instance===null)switch(l.type){case"style":var d=s.querySelector('style[data-href~="'+yr(f.href)+'"]');if(d)return l.instance=d,pn(d),d;var y=g({},f,{"data-href":f.href,"data-precedence":f.precedence,href:null,precedence:null});return d=(s.ownerDocument||s).createElement("style"),pn(d),Zn(d,"style",y),cd(d,f.precedence,s),l.instance=d;case"stylesheet":y=Yl(f.href);var x=s.querySelector(ju(y));if(x)return l.state.loading|=4,l.instance=x,pn(x),x;d=sw(f),(y=ri.get(y))&&cm(d,y),x=(s.ownerDocument||s).createElement("link"),pn(x);var T=x;return T._p=new Promise(function(j,q){T.onload=j,T.onerror=q}),Zn(x,"link",d),l.state.loading|=4,cd(x,f.precedence,s),l.instance=x;case"script":return x=Kl(f.src),(y=s.querySelector(Bu(x)))?(l.instance=y,pn(y),y):(d=f,(y=ri.get(x))&&(d=g({},f),um(d,y)),s=s.ownerDocument||s,y=s.createElement("script"),pn(y),Zn(y,"link",d),s.head.appendChild(y),l.instance=y);case"void":return null;default:throw Error(r(443,l.type))}else l.type==="stylesheet"&&(l.state.loading&4)===0&&(d=l.instance,l.state.loading|=4,cd(d,f.precedence,s));return l.instance}function cd(s,l,f){for(var d=f.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),y=d.length?d[d.length-1]:null,x=y,T=0;T<d.length;T++){var j=d[T];if(j.dataset.precedence===l)x=j;else if(x!==y)break}x?x.parentNode.insertBefore(s,x.nextSibling):(l=f.nodeType===9?f.head:f,l.insertBefore(s,l.firstChild))}function cm(s,l){s.crossOrigin==null&&(s.crossOrigin=l.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=l.referrerPolicy),s.title==null&&(s.title=l.title)}function um(s,l){s.crossOrigin==null&&(s.crossOrigin=l.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=l.referrerPolicy),s.integrity==null&&(s.integrity=l.integrity)}var ud=null;function lw(s,l,f){if(ud===null){var d=new Map,y=ud=new Map;y.set(f,d)}else y=ud,d=y.get(f),d||(d=new Map,y.set(f,d));if(d.has(s))return d;for(d.set(s,null),f=f.getElementsByTagName(s),y=0;y<f.length;y++){var x=f[y];if(!(x[$i]||x[dn]||s==="link"&&x.getAttribute("rel")==="stylesheet")&&x.namespaceURI!=="http://www.w3.org/2000/svg"){var T=x.getAttribute(l)||"";T=s+T;var j=d.get(T);j?j.push(x):d.set(T,[x])}}return d}function cw(s,l,f){s=s.ownerDocument||s,s.head.insertBefore(f,l==="title"?s.querySelector("head > title"):null)}function C4(s,l,f){if(f===1||l.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof l.precedence!="string"||typeof l.href!="string"||l.href==="")break;return!0;case"link":if(typeof l.rel!="string"||typeof l.href!="string"||l.href===""||l.onLoad||l.onError)break;switch(l.rel){case"stylesheet":return s=l.disabled,typeof l.precedence=="string"&&s==null;default:return!0}case"script":if(l.async&&typeof l.async!="function"&&typeof l.async!="symbol"&&!l.onLoad&&!l.onError&&l.src&&typeof l.src=="string")return!0}return!1}function uw(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}function T4(s,l,f,d){if(f.type==="stylesheet"&&(typeof d.media!="string"||matchMedia(d.media).matches!==!1)&&(f.state.loading&4)===0){if(f.instance===null){var y=Yl(d.href),x=l.querySelector(ju(y));if(x){l=x._p,l!==null&&typeof l=="object"&&typeof l.then=="function"&&(s.count++,s=fd.bind(s),l.then(s,s)),f.state.loading|=4,f.instance=x,pn(x);return}x=l.ownerDocument||l,d=sw(d),(y=ri.get(y))&&cm(d,y),x=x.createElement("link"),pn(x);var T=x;T._p=new Promise(function(j,q){T.onload=j,T.onerror=q}),Zn(x,"link",d),f.instance=x}s.stylesheets===null&&(s.stylesheets=new Map),s.stylesheets.set(f,l),(l=f.state.preload)&&(f.state.loading&3)===0&&(s.count++,f=fd.bind(s),l.addEventListener("load",f),l.addEventListener("error",f))}}var fm=0;function I4(s,l){return s.stylesheets&&s.count===0&&dd(s,s.stylesheets),0<s.count||0<s.imgCount?function(f){var d=setTimeout(function(){if(s.stylesheets&&dd(s,s.stylesheets),s.unsuspend){var x=s.unsuspend;s.unsuspend=null,x()}},6e4+l);0<s.imgBytes&&fm===0&&(fm=62500*l4());var y=setTimeout(function(){if(s.waitingForImages=!1,s.count===0&&(s.stylesheets&&dd(s,s.stylesheets),s.unsuspend)){var x=s.unsuspend;s.unsuspend=null,x()}},(s.imgBytes>fm?50:800)+l);return s.unsuspend=f,function(){s.unsuspend=null,clearTimeout(d),clearTimeout(y)}}:null}function fd(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)dd(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var hd=null;function dd(s,l){s.stylesheets=null,s.unsuspend!==null&&(s.count++,hd=new Map,l.forEach(N4,s),hd=null,fd.call(s))}function N4(s,l){if(!(l.state.loading&4)){var f=hd.get(s);if(f)var d=f.get(null);else{f=new Map,hd.set(s,f);for(var y=s.querySelectorAll("link[data-precedence],style[data-precedence]"),x=0;x<y.length;x++){var T=y[x];(T.nodeName==="LINK"||T.getAttribute("media")!=="not all")&&(f.set(T.dataset.precedence,T),d=T)}d&&f.set(null,d)}y=l.instance,T=y.getAttribute("data-precedence"),x=f.get(T)||d,x===d&&f.set(null,y),f.set(T,y),this.count++,d=fd.bind(this),y.addEventListener("load",d),y.addEventListener("error",d),x?x.parentNode.insertBefore(y,x.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(y,s.firstChild)),l.state.loading|=4}}var Vu={$$typeof:V,Provider:null,Consumer:null,_currentValue:le,_currentValue2:le,_threadCount:0};function R4(s,l,f,d,y,x,T,j,q){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Gi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Gi(0),this.hiddenUpdates=Gi(null),this.identifierPrefix=d,this.onUncaughtError=y,this.onCaughtError=x,this.onRecoverableError=T,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=q,this.incompleteTransitions=new Map}function fw(s,l,f,d,y,x,T,j,q,ee,ce,he){return s=new R4(s,l,f,T,q,ee,ce,he,j),l=1,x===!0&&(l|=24),x=Pr(3,null,null,l),s.current=x,x.stateNode=s,l=Gp(),l.refCount++,s.pooledCache=l,l.refCount++,x.memoizedState={element:d,isDehydrated:f,cache:l},Yp(x),s}function hw(s){return s?(s=Cl,s):Cl}function dw(s,l,f,d,y,x){y=hw(y),d.context===null?d.context=y:d.pendingContext=y,d=ms(l),d.payload={element:f},x=x===void 0?null:x,x!==null&&(d.callback=x),f=gs(s,d,l),f!==null&&(br(f,s,l),vu(f,s,l))}function pw(s,l){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var f=s.retryLane;s.retryLane=f!==0&&f<l?f:l}}function hm(s,l){pw(s,l),(s=s.alternate)&&pw(s,l)}function mw(s){if(s.tag===13||s.tag===31){var l=Io(s,67108864);l!==null&&br(l,s,67108864),hm(s,67108864)}}function gw(s){if(s.tag===13||s.tag===31){var l=Vr();l=go(l);var f=Io(s,l);f!==null&&br(f,s,l),hm(s,l)}}var pd=!0;function O4(s,l,f,d){var y=K.T;K.T=null;var x=G.p;try{G.p=2,dm(s,l,f,d)}finally{G.p=x,K.T=y}}function D4(s,l,f,d){var y=K.T;K.T=null;var x=G.p;try{G.p=8,dm(s,l,f,d)}finally{G.p=x,K.T=y}}function dm(s,l,f,d){if(pd){var y=pm(d);if(y===null)J1(s,l,d,md,f),yw(s,d);else if(P4(y,s,l,f,d))d.stopPropagation();else if(yw(s,d),l&4&&-1<M4.indexOf(s)){for(;y!==null;){var x=$r(y);if(x!==null)switch(x.tag){case 3:if(x=x.stateNode,x.current.memoizedState.isDehydrated){var T=zi(x.pendingLanes);if(T!==0){var j=x;for(j.pendingLanes|=2,j.entangledLanes|=2;T;){var q=1<<31-an(T);j.entanglements[1]|=q,T&=~q}oa(x),(_t&6)===0&&(Qh=ae()+500,Mu(0))}}break;case 31:case 13:j=Io(x,2),j!==null&&br(j,x,2),Jh(),hm(x,2)}if(x=pm(d),x===null&&J1(s,l,d,md,f),x===y)break;y=x}y!==null&&d.stopPropagation()}else J1(s,l,d,null,f)}}function pm(s){return s=Xr(s),mm(s)}var md=null;function mm(s){if(md=null,s=Xi(s),s!==null){var l=a(s);if(l===null)s=null;else{var f=l.tag;if(f===13){if(s=o(l),s!==null)return s;s=null}else if(f===31){if(s=c(l),s!==null)return s;s=null}else if(f===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;s=null}else l!==s&&(s=null)}}return md=s,null}function vw(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(be()){case Ke:return 2;case Wt:return 8;case kn:case Gr:return 32;case qr:return 268435456;default:return 32}default:return 32}}var gm=!1,Ts=null,Is=null,Ns=null,Fu=new Map,Uu=new Map,Rs=[],M4="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function yw(s,l){switch(s){case"focusin":case"focusout":Ts=null;break;case"dragenter":case"dragleave":Is=null;break;case"mouseover":case"mouseout":Ns=null;break;case"pointerover":case"pointerout":Fu.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":Uu.delete(l.pointerId)}}function zu(s,l,f,d,y,x){return s===null||s.nativeEvent!==x?(s={blockedOn:l,domEventName:f,eventSystemFlags:d,nativeEvent:x,targetContainers:[y]},l!==null&&(l=$r(l),l!==null&&mw(l)),s):(s.eventSystemFlags|=d,l=s.targetContainers,y!==null&&l.indexOf(y)===-1&&l.push(y),s)}function P4(s,l,f,d,y){switch(l){case"focusin":return Ts=zu(Ts,s,l,f,d,y),!0;case"dragenter":return Is=zu(Is,s,l,f,d,y),!0;case"mouseover":return Ns=zu(Ns,s,l,f,d,y),!0;case"pointerover":var x=y.pointerId;return Fu.set(x,zu(Fu.get(x)||null,s,l,f,d,y)),!0;case"gotpointercapture":return x=y.pointerId,Uu.set(x,zu(Uu.get(x)||null,s,l,f,d,y)),!0}return!1}function _w(s){var l=Xi(s.target);if(l!==null){var f=a(l);if(f!==null){if(l=f.tag,l===13){if(l=o(f),l!==null){s.blockedOn=l,pi(s.priority,function(){gw(f)});return}}else if(l===31){if(l=c(f),l!==null){s.blockedOn=l,pi(s.priority,function(){gw(f)});return}}else if(l===3&&f.stateNode.current.memoizedState.isDehydrated){s.blockedOn=f.tag===3?f.stateNode.containerInfo:null;return}}}s.blockedOn=null}function gd(s){if(s.blockedOn!==null)return!1;for(var l=s.targetContainers;0<l.length;){var f=pm(s.nativeEvent);if(f===null){f=s.nativeEvent;var d=new f.constructor(f.type,f);tu=d,f.target.dispatchEvent(d),tu=null}else return l=$r(f),l!==null&&mw(l),s.blockedOn=f,!1;l.shift()}return!0}function xw(s,l,f){gd(s)&&f.delete(l)}function k4(){gm=!1,Ts!==null&&gd(Ts)&&(Ts=null),Is!==null&&gd(Is)&&(Is=null),Ns!==null&&gd(Ns)&&(Ns=null),Fu.forEach(xw),Uu.forEach(xw)}function vd(s,l){s.blockedOn===l&&(s.blockedOn=null,gm||(gm=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,k4)))}var yd=null;function ww(s){yd!==s&&(yd=s,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){yd===s&&(yd=null);for(var l=0;l<s.length;l+=3){var f=s[l],d=s[l+1],y=s[l+2];if(typeof d!="function"){if(mm(d||f)===null)continue;break}var x=$r(f);x!==null&&(s.splice(l,3),l-=3,p1(x,{pending:!0,data:y,method:f.method,action:d},d,y))}}))}function Wl(s){function l(q){return vd(q,s)}Ts!==null&&vd(Ts,s),Is!==null&&vd(Is,s),Ns!==null&&vd(Ns,s),Fu.forEach(l),Uu.forEach(l);for(var f=0;f<Rs.length;f++){var d=Rs[f];d.blockedOn===s&&(d.blockedOn=null)}for(;0<Rs.length&&(f=Rs[0],f.blockedOn===null);)_w(f),f.blockedOn===null&&Rs.shift();if(f=(s.ownerDocument||s).$$reactFormReplay,f!=null)for(d=0;d<f.length;d+=3){var y=f[d],x=f[d+1],T=y[jn]||null;if(typeof x=="function")T||ww(f);else if(T){var j=null;if(x&&x.hasAttribute("formAction")){if(y=x,T=x[jn]||null)j=T.formAction;else if(mm(y)!==null)continue}else j=T.action;typeof j=="function"?f[d+1]=j:(f.splice(d,3),d-=3),ww(f)}}}function Ew(){function s(x){x.canIntercept&&x.info==="react-transition"&&x.intercept({handler:function(){return new Promise(function(T){return y=T})},focusReset:"manual",scroll:"manual"})}function l(){y!==null&&(y(),y=null),d||setTimeout(f,20)}function f(){if(!d&&!navigation.transition){var x=navigation.currentEntry;x&&x.url!=null&&navigation.navigate(x.url,{state:x.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var d=!1,y=null;return navigation.addEventListener("navigate",s),navigation.addEventListener("navigatesuccess",l),navigation.addEventListener("navigateerror",l),setTimeout(f,100),function(){d=!0,navigation.removeEventListener("navigate",s),navigation.removeEventListener("navigatesuccess",l),navigation.removeEventListener("navigateerror",l),y!==null&&(y(),y=null)}}}function vm(s){this._internalRoot=s}_d.prototype.render=vm.prototype.render=function(s){var l=this._internalRoot;if(l===null)throw Error(r(409));var f=l.current,d=Vr();dw(f,d,s,l,null,null)},_d.prototype.unmount=vm.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var l=s.containerInfo;dw(s.current,2,null,s,null,null),Jh(),l[qi]=null}};function _d(s){this._internalRoot=s}_d.prototype.unstable_scheduleHydration=function(s){if(s){var l=Jf();s={blockedOn:null,target:s,priority:l};for(var f=0;f<Rs.length&&l!==0&&l<Rs[f].priority;f++);Rs.splice(f,0,s),f===0&&_w(s)}};var Aw=e.version;if(Aw!=="19.2.0")throw Error(r(527,Aw,"19.2.0"));G.findDOMNode=function(s){var l=s._reactInternals;if(l===void 0)throw typeof s.render=="function"?Error(r(188)):(s=Object.keys(s).join(","),Error(r(268,s)));return s=h(l),s=s!==null?p(s):null,s=s===null?null:s.stateNode,s};var L4={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:K,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var xd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!xd.isDisabled&&xd.supportsFiber)try{ht=xd.inject(L4),ze=xd}catch{}}return Gu.createRoot=function(s,l){if(!i(s))throw Error(r(299));var f=!1,d="",y=R_,x=O_,T=D_;return l!=null&&(l.unstable_strictMode===!0&&(f=!0),l.identifierPrefix!==void 0&&(d=l.identifierPrefix),l.onUncaughtError!==void 0&&(y=l.onUncaughtError),l.onCaughtError!==void 0&&(x=l.onCaughtError),l.onRecoverableError!==void 0&&(T=l.onRecoverableError)),l=fw(s,1,!1,null,null,f,d,null,y,x,T,Ew),s[qi]=l.current,Z1(s),new vm(l)},Gu.hydrateRoot=function(s,l,f){if(!i(s))throw Error(r(299));var d=!1,y="",x=R_,T=O_,j=D_,q=null;return f!=null&&(f.unstable_strictMode===!0&&(d=!0),f.identifierPrefix!==void 0&&(y=f.identifierPrefix),f.onUncaughtError!==void 0&&(x=f.onUncaughtError),f.onCaughtError!==void 0&&(T=f.onCaughtError),f.onRecoverableError!==void 0&&(j=f.onRecoverableError),f.formState!==void 0&&(q=f.formState)),l=fw(s,1,!0,l,f??null,d,y,q,x,T,j,Ew),l.context=hw(null),f=l.current,d=Vr(),d=go(d),y=ms(d),y.callback=null,gs(f,y,d),f=d,l.current.lanes=f,po(l,f),oa(l),s[qi]=l.current,Z1(s),new _d(l)},Gu.version="19.2.0",Gu}var Mw;function X4(){if(Mw)return xm.exports;Mw=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),xm.exports=$4(),xm.exports}var Y4=X4();/**
 * react-router v7.9.4
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Pw="popstate";function K4(n={}){function e(r,i){let{pathname:a,search:o,hash:c}=r.location;return bg("",{pathname:a,search:o,hash:c},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function t(r,i){return typeof i=="string"?i:gf(i)}return Q4(e,t,null,n)}function Kt(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function fi(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function W4(){return Math.random().toString(36).substring(2,10)}function kw(n,e){return{usr:n.state,key:n.key,idx:e}}function bg(n,e,t=null,r){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?Ic(e):e,state:t,key:e&&e.key||r||W4()}}function gf({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function Ic(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substring(r),n=n.substring(0,r)),n&&(e.pathname=n)}return e}function Q4(n,e,t,r={}){let{window:i=document.defaultView,v5Compat:a=!1}=r,o=i.history,c="POP",u=null,h=p();h==null&&(h=0,o.replaceState({...o.state,idx:h},""));function p(){return(o.state||{idx:null}).idx}function g(){c="POP";let D=p(),C=D==null?null:D-h;h=D,u&&u({action:c,location:S.location,delta:C})}function _(D,C){c="PUSH";let P=bg(S.location,D,C);h=p()+1;let V=kw(P,h),H=S.createHref(P);try{o.pushState(V,"",H)}catch(X){if(X instanceof DOMException&&X.name==="DataCloneError")throw X;i.location.assign(H)}a&&u&&u({action:c,location:S.location,delta:1})}function w(D,C){c="REPLACE";let P=bg(S.location,D,C);h=p();let V=kw(P,h),H=S.createHref(P);o.replaceState(V,"",H),a&&u&&u({action:c,location:S.location,delta:0})}function A(D){return Z4(D)}let S={get action(){return c},get location(){return n(i,o)},listen(D){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(Pw,g),u=D,()=>{i.removeEventListener(Pw,g),u=null}},createHref(D){return e(i,D)},createURL:A,encodeLocation(D){let C=A(D);return{pathname:C.pathname,search:C.search,hash:C.hash}},push:_,replace:w,go(D){return o.go(D)}};return S}function Z4(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),Kt(t,"No window.location.(origin|href) available to create URL");let r=typeof n=="string"?n:gf(n);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=t+r),new URL(r,t)}function sS(n,e,t="/"){return J4(n,e,t,!1)}function J4(n,e,t,r){let i=typeof e=="string"?Ic(e):e,a=Ya(i.pathname||"/",t);if(a==null)return null;let o=oS(n);eN(o);let c=null;for(let u=0;c==null&&u<o.length;++u){let h=fN(a);c=cN(o[u],h,r)}return c}function oS(n,e=[],t=[],r="",i=!1){let a=(o,c,u=i,h)=>{let p={relativePath:h===void 0?o.path||"":h,caseSensitive:o.caseSensitive===!0,childrenIndex:c,route:o};if(p.relativePath.startsWith("/")){if(!p.relativePath.startsWith(r)&&u)return;Kt(p.relativePath.startsWith(r),`Absolute route path "${p.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),p.relativePath=p.relativePath.slice(r.length)}let g=$a([r,p.relativePath]),_=t.concat(p);o.children&&o.children.length>0&&(Kt(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${g}".`),oS(o.children,e,_,g,u)),!(o.path==null&&!o.index)&&e.push({path:g,score:oN(g,o.index),routesMeta:_})};return n.forEach((o,c)=>{if(o.path===""||!o.path?.includes("?"))a(o,c);else for(let u of lS(o.path))a(o,c,!0,u)}),e}function lS(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,i=t.endsWith("?"),a=t.replace(/\?$/,"");if(r.length===0)return i?[a,""]:[a];let o=lS(r.join("/")),c=[];return c.push(...o.map(u=>u===""?a:[a,u].join("/"))),i&&c.push(...o),c.map(u=>n.startsWith("/")&&u===""?"/":u)}function eN(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:lN(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}var tN=/^:[\w-]+$/,nN=3,rN=2,iN=1,aN=10,sN=-2,Lw=n=>n==="*";function oN(n,e){let t=n.split("/"),r=t.length;return t.some(Lw)&&(r+=sN),e&&(r+=rN),t.filter(i=>!Lw(i)).reduce((i,a)=>i+(tN.test(a)?nN:a===""?iN:aN),r)}function lN(n,e){return n.length===e.length&&n.slice(0,-1).every((r,i)=>r===e[i])?n[n.length-1]-e[e.length-1]:0}function cN(n,e,t=!1){let{routesMeta:r}=n,i={},a="/",o=[];for(let c=0;c<r.length;++c){let u=r[c],h=c===r.length-1,p=a==="/"?e:e.slice(a.length)||"/",g=Jd({path:u.relativePath,caseSensitive:u.caseSensitive,end:h},p),_=u.route;if(!g&&h&&t&&!r[r.length-1].route.index&&(g=Jd({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},p)),!g)return null;Object.assign(i,g.params),o.push({params:i,pathname:$a([a,g.pathname]),pathnameBase:mN($a([a,g.pathnameBase])),route:_}),g.pathnameBase!=="/"&&(a=$a([a,g.pathnameBase]))}return o}function Jd(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=uN(n.path,n.caseSensitive,n.end),i=e.match(t);if(!i)return null;let a=i[0],o=a.replace(/(.)\/+$/,"$1"),c=i.slice(1);return{params:r.reduce((h,{paramName:p,isOptional:g},_)=>{if(p==="*"){let A=c[_]||"";o=a.slice(0,a.length-A.length).replace(/(.)\/+$/,"$1")}const w=c[_];return g&&!w?h[p]=void 0:h[p]=(w||"").replace(/%2F/g,"/"),h},{}),pathname:a,pathnameBase:o,pattern:n}}function uN(n,e=!1,t=!0){fi(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let r=[],i="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,c,u)=>(r.push({paramName:c,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return n.endsWith("*")?(r.push({paramName:"*"}),i+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?i+="\\/*$":n!==""&&n!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function fN(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return fi(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function Ya(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}function hN(n,e="/"){let{pathname:t,search:r="",hash:i=""}=typeof n=="string"?Ic(n):n;return{pathname:t?t.startsWith("/")?t:dN(t,e):e,search:gN(r),hash:vN(i)}}function dN(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(i=>{i===".."?t.length>1&&t.pop():i!=="."&&t.push(i)}),t.length>1?t.join("/"):"/"}function bm(n,e,t,r){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function pN(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function Tv(n){let e=pN(n);return e.map((t,r)=>r===e.length-1?t.pathname:t.pathnameBase)}function Iv(n,e,t,r=!1){let i;typeof n=="string"?i=Ic(n):(i={...n},Kt(!i.pathname||!i.pathname.includes("?"),bm("?","pathname","search",i)),Kt(!i.pathname||!i.pathname.includes("#"),bm("#","pathname","hash",i)),Kt(!i.search||!i.search.includes("#"),bm("#","search","hash",i)));let a=n===""||i.pathname==="",o=a?"/":i.pathname,c;if(o==null)c=t;else{let g=e.length-1;if(!r&&o.startsWith("..")){let _=o.split("/");for(;_[0]==="..";)_.shift(),g-=1;i.pathname=_.join("/")}c=g>=0?e[g]:"/"}let u=hN(i,c),h=o&&o!=="/"&&o.endsWith("/"),p=(a||o===".")&&t.endsWith("/");return!u.pathname.endsWith("/")&&(h||p)&&(u.pathname+="/"),u}var $a=n=>n.join("/").replace(/\/\/+/g,"/"),mN=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),gN=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,vN=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function yN(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}var cS=["POST","PUT","PATCH","DELETE"];new Set(cS);var _N=["GET",...cS];new Set(_N);var Nc=k.createContext(null);Nc.displayName="DataRouter";var j0=k.createContext(null);j0.displayName="DataRouterState";k.createContext(!1);var uS=k.createContext({isTransitioning:!1});uS.displayName="ViewTransition";var xN=k.createContext(new Map);xN.displayName="Fetchers";var wN=k.createContext(null);wN.displayName="Await";var Li=k.createContext(null);Li.displayName="Navigation";var Of=k.createContext(null);Of.displayName="Location";var ji=k.createContext({outlet:null,matches:[],isDataRoute:!1});ji.displayName="Route";var Nv=k.createContext(null);Nv.displayName="RouteError";function EN(n,{relative:e}={}){Kt(Rc(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:r}=k.useContext(Li),{hash:i,pathname:a,search:o}=Df(n,{relative:e}),c=a;return t!=="/"&&(c=a==="/"?t:$a([t,a])),r.createHref({pathname:c,search:o,hash:i})}function Rc(){return k.useContext(Of)!=null}function Bi(){return Kt(Rc(),"useLocation() may be used only in the context of a <Router> component."),k.useContext(Of).location}var fS="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function hS(n){k.useContext(Li).static||k.useLayoutEffect(n)}function rl(){let{isDataRoute:n}=k.useContext(ji);return n?LN():AN()}function AN(){Kt(Rc(),"useNavigate() may be used only in the context of a <Router> component.");let n=k.useContext(Nc),{basename:e,navigator:t}=k.useContext(Li),{matches:r}=k.useContext(ji),{pathname:i}=Bi(),a=JSON.stringify(Tv(r)),o=k.useRef(!1);return hS(()=>{o.current=!0}),k.useCallback((u,h={})=>{if(fi(o.current,fS),!o.current)return;if(typeof u=="number"){t.go(u);return}let p=Iv(u,JSON.parse(a),i,h.relative==="path");n==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:$a([e,p.pathname])),(h.replace?t.replace:t.push)(p,h.state,h)},[e,t,a,i,n])}k.createContext(null);function bN(){let{matches:n}=k.useContext(ji),e=n[n.length-1];return e?e.params:{}}function Df(n,{relative:e}={}){let{matches:t}=k.useContext(ji),{pathname:r}=Bi(),i=JSON.stringify(Tv(t));return k.useMemo(()=>Iv(n,JSON.parse(i),r,e==="path"),[n,i,r,e])}function SN(n,e){return dS(n,e)}function dS(n,e,t,r,i){Kt(Rc(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=k.useContext(Li),{matches:o}=k.useContext(ji),c=o[o.length-1],u=c?c.params:{},h=c?c.pathname:"/",p=c?c.pathnameBase:"/",g=c&&c.route;{let P=g&&g.path||"";pS(h,!g||P.endsWith("*")||P.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${h}" (under <Route path="${P}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${P}"> to <Route path="${P==="/"?"*":`${P}/*`}">.`)}let _=Bi(),w;if(e){let P=typeof e=="string"?Ic(e):e;Kt(p==="/"||P.pathname?.startsWith(p),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${p}" but pathname "${P.pathname}" was given in the \`location\` prop.`),w=P}else w=_;let A=w.pathname||"/",S=A;if(p!=="/"){let P=p.replace(/^\//,"").split("/");S="/"+A.replace(/^\//,"").split("/").slice(P.length).join("/")}let D=sS(n,{pathname:S});fi(g||D!=null,`No routes matched location "${w.pathname}${w.search}${w.hash}" `),fi(D==null||D[D.length-1].route.element!==void 0||D[D.length-1].route.Component!==void 0||D[D.length-1].route.lazy!==void 0,`Matched leaf route at location "${w.pathname}${w.search}${w.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let C=RN(D&&D.map(P=>Object.assign({},P,{params:Object.assign({},u,P.params),pathname:$a([p,a.encodeLocation?a.encodeLocation(P.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:P.pathname]),pathnameBase:P.pathnameBase==="/"?p:$a([p,a.encodeLocation?a.encodeLocation(P.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:P.pathnameBase])})),o,t,r,i);return e&&C?k.createElement(Of.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...w},navigationType:"POP"}},C):C}function CN(){let n=kN(),e=yN(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},a={padding:"2px 4px",backgroundColor:r},o=null;return console.error("Error handled by React Router default ErrorBoundary:",n),o=k.createElement(k.Fragment,null,k.createElement("p",null," Hey developer "),k.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",k.createElement("code",{style:a},"ErrorBoundary")," or"," ",k.createElement("code",{style:a},"errorElement")," prop on your route.")),k.createElement(k.Fragment,null,k.createElement("h2",null,"Unexpected Application Error!"),k.createElement("h3",{style:{fontStyle:"italic"}},e),t?k.createElement("pre",{style:i},t):null,o)}var TN=k.createElement(CN,null),IN=class extends k.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){this.props.unstable_onError?this.props.unstable_onError(n,e):console.error("React Router caught the following error during render",n)}render(){return this.state.error!==void 0?k.createElement(ji.Provider,{value:this.props.routeContext},k.createElement(Nv.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function NN({routeContext:n,match:e,children:t}){let r=k.useContext(Nc);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),k.createElement(ji.Provider,{value:n},t)}function RN(n,e=[],t=null,r=null,i=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let a=n,o=t?.errors;if(o!=null){let h=a.findIndex(p=>p.route.id&&o?.[p.route.id]!==void 0);Kt(h>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),a=a.slice(0,Math.min(a.length,h+1))}let c=!1,u=-1;if(t)for(let h=0;h<a.length;h++){let p=a[h];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(u=h),p.route.id){let{loaderData:g,errors:_}=t,w=p.route.loader&&!g.hasOwnProperty(p.route.id)&&(!_||_[p.route.id]===void 0);if(p.route.lazy||w){c=!0,u>=0?a=a.slice(0,u+1):a=[a[0]];break}}}return a.reduceRight((h,p,g)=>{let _,w=!1,A=null,S=null;t&&(_=o&&p.route.id?o[p.route.id]:void 0,A=p.route.errorElement||TN,c&&(u<0&&g===0?(pS("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),w=!0,S=null):u===g&&(w=!0,S=p.route.hydrateFallbackElement||null)));let D=e.concat(a.slice(0,g+1)),C=()=>{let P;return _?P=A:w?P=S:p.route.Component?P=k.createElement(p.route.Component,null):p.route.element?P=p.route.element:P=h,k.createElement(NN,{match:p,routeContext:{outlet:h,matches:D,isDataRoute:t!=null},children:P})};return t&&(p.route.ErrorBoundary||p.route.errorElement||g===0)?k.createElement(IN,{location:t.location,revalidation:t.revalidation,component:A,error:_,children:C(),routeContext:{outlet:null,matches:D,isDataRoute:!0},unstable_onError:r}):C()},null)}function Rv(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function ON(n){let e=k.useContext(Nc);return Kt(e,Rv(n)),e}function DN(n){let e=k.useContext(j0);return Kt(e,Rv(n)),e}function MN(n){let e=k.useContext(ji);return Kt(e,Rv(n)),e}function Ov(n){let e=MN(n),t=e.matches[e.matches.length-1];return Kt(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function PN(){return Ov("useRouteId")}function kN(){let n=k.useContext(Nv),e=DN("useRouteError"),t=Ov("useRouteError");return n!==void 0?n:e.errors?.[t]}function LN(){let{router:n}=ON("useNavigate"),e=Ov("useNavigate"),t=k.useRef(!1);return hS(()=>{t.current=!0}),k.useCallback(async(i,a={})=>{fi(t.current,fS),t.current&&(typeof i=="number"?n.navigate(i):await n.navigate(i,{fromRouteId:e,...a}))},[n,e])}var jw={};function pS(n,e,t){!e&&!jw[n]&&(jw[n]=!0,fi(!1,t))}k.memo(jN);function jN({routes:n,future:e,state:t,unstable_onError:r}){return dS(n,void 0,t,r,e)}function ii({to:n,replace:e,state:t,relative:r}){Kt(Rc(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=k.useContext(Li);fi(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:a}=k.useContext(ji),{pathname:o}=Bi(),c=rl(),u=Iv(n,Tv(a),o,r==="path"),h=JSON.stringify(u);return k.useEffect(()=>{c(JSON.parse(h),{replace:e,state:t,relative:r})},[c,h,r,e,t]),null}function Yt(n){Kt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function BN({basename:n="/",children:e=null,location:t,navigationType:r="POP",navigator:i,static:a=!1}){Kt(!Rc(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=n.replace(/^\/*/,"/"),c=k.useMemo(()=>({basename:o,navigator:i,static:a,future:{}}),[o,i,a]);typeof t=="string"&&(t=Ic(t));let{pathname:u="/",search:h="",hash:p="",state:g=null,key:_="default"}=t,w=k.useMemo(()=>{let A=Ya(u,o);return A==null?null:{location:{pathname:A,search:h,hash:p,state:g,key:_},navigationType:r}},[o,u,h,p,g,_,r]);return fi(w!=null,`<Router basename="${o}"> is not able to match the URL "${u}${h}${p}" because it does not start with the basename, so the <Router> won't render anything.`),w==null?null:k.createElement(Li.Provider,{value:c},k.createElement(Of.Provider,{children:e,value:w}))}function mS({children:n,location:e}){return SN(Sg(n),e)}function Sg(n,e=[]){let t=[];return k.Children.forEach(n,(r,i)=>{if(!k.isValidElement(r))return;let a=[...e,i];if(r.type===k.Fragment){t.push.apply(t,Sg(r.props.children,a));return}Kt(r.type===Yt,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Kt(!r.props.index||!r.props.children,"An index route cannot have child routes.");let o={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Sg(r.props.children,a)),t.push(o)}),t}var jd="get",Bd="application/x-www-form-urlencoded";function B0(n){return n!=null&&typeof n.tagName=="string"}function VN(n){return B0(n)&&n.tagName.toLowerCase()==="button"}function FN(n){return B0(n)&&n.tagName.toLowerCase()==="form"}function UN(n){return B0(n)&&n.tagName.toLowerCase()==="input"}function zN(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function HN(n,e){return n.button===0&&(!e||e==="_self")&&!zN(n)}function Cg(n=""){return new URLSearchParams(typeof n=="string"||Array.isArray(n)||n instanceof URLSearchParams?n:Object.keys(n).reduce((e,t)=>{let r=n[t];return e.concat(Array.isArray(r)?r.map(i=>[t,i]):[[t,r]])},[]))}function GN(n,e){let t=Cg(n);return e&&e.forEach((r,i)=>{t.has(i)||e.getAll(i).forEach(a=>{t.append(i,a)})}),t}var wd=null;function qN(){if(wd===null)try{new FormData(document.createElement("form"),0),wd=!1}catch{wd=!0}return wd}var $N=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Sm(n){return n!=null&&!$N.has(n)?(fi(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Bd}"`),null):n}function XN(n,e){let t,r,i,a,o;if(FN(n)){let c=n.getAttribute("action");r=c?Ya(c,e):null,t=n.getAttribute("method")||jd,i=Sm(n.getAttribute("enctype"))||Bd,a=new FormData(n)}else if(VN(n)||UN(n)&&(n.type==="submit"||n.type==="image")){let c=n.form;if(c==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let u=n.getAttribute("formaction")||c.getAttribute("action");if(r=u?Ya(u,e):null,t=n.getAttribute("formmethod")||c.getAttribute("method")||jd,i=Sm(n.getAttribute("formenctype"))||Sm(c.getAttribute("enctype"))||Bd,a=new FormData(c,n),!qN()){let{name:h,type:p,value:g}=n;if(p==="image"){let _=h?`${h}.`:"";a.append(`${_}x`,"0"),a.append(`${_}y`,"0")}else h&&a.append(h,g)}}else{if(B0(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=jd,r=null,i=Bd,o=n}return a&&i==="text/plain"&&(o=a,a=void 0),{action:r,method:t.toLowerCase(),encType:i,formData:a,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Dv(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function YN(n,e,t){let r=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return r.pathname==="/"?r.pathname=`_root.${t}`:e&&Ya(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.${t}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${t}`,r}async function KN(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function WN(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function QN(n,e,t){let r=await Promise.all(n.map(async i=>{let a=e.routes[i.route.id];if(a){let o=await KN(a,t);return o.links?o.links():[]}return[]}));return tR(r.flat(1).filter(WN).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function Bw(n,e,t,r,i,a){let o=(u,h)=>t[h]?u.route.id!==t[h].route.id:!0,c=(u,h)=>t[h].pathname!==u.pathname||t[h].route.path?.endsWith("*")&&t[h].params["*"]!==u.params["*"];return a==="assets"?e.filter((u,h)=>o(u,h)||c(u,h)):a==="data"?e.filter((u,h)=>{let p=r.routes[u.route.id];if(!p||!p.hasLoader)return!1;if(o(u,h)||c(u,h))return!0;if(u.route.shouldRevalidate){let g=u.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:t[0]?.params||{},nextUrl:new URL(n,window.origin),nextParams:u.params,defaultShouldRevalidate:!0});if(typeof g=="boolean")return g}return!0}):[]}function ZN(n,e,{includeHydrateFallback:t}={}){return JN(n.map(r=>{let i=e.routes[r.route.id];if(!i)return[];let a=[i.module];return i.clientActionModule&&(a=a.concat(i.clientActionModule)),i.clientLoaderModule&&(a=a.concat(i.clientLoaderModule)),t&&i.hydrateFallbackModule&&(a=a.concat(i.hydrateFallbackModule)),i.imports&&(a=a.concat(i.imports)),a}).flat(1))}function JN(n){return[...new Set(n)]}function eR(n){let e={},t=Object.keys(n).sort();for(let r of t)e[r]=n[r];return e}function tR(n,e){let t=new Set;return new Set(e),n.reduce((r,i)=>{let a=JSON.stringify(eR(i));return t.has(a)||(t.add(a),r.push({key:a,link:i})),r},[])}function gS(){let n=k.useContext(Nc);return Dv(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function nR(){let n=k.useContext(j0);return Dv(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var Mv=k.createContext(void 0);Mv.displayName="FrameworkContext";function vS(){let n=k.useContext(Mv);return Dv(n,"You must render this element inside a <HydratedRouter> element"),n}function rR(n,e){let t=k.useContext(Mv),[r,i]=k.useState(!1),[a,o]=k.useState(!1),{onFocus:c,onBlur:u,onMouseEnter:h,onMouseLeave:p,onTouchStart:g}=e,_=k.useRef(null);k.useEffect(()=>{if(n==="render"&&o(!0),n==="viewport"){let S=C=>{C.forEach(P=>{o(P.isIntersecting)})},D=new IntersectionObserver(S,{threshold:.5});return _.current&&D.observe(_.current),()=>{D.disconnect()}}},[n]),k.useEffect(()=>{if(r){let S=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(S)}}},[r]);let w=()=>{i(!0)},A=()=>{i(!1),o(!1)};return t?n!=="intent"?[a,_,{}]:[a,_,{onFocus:qu(c,w),onBlur:qu(u,A),onMouseEnter:qu(h,w),onMouseLeave:qu(p,A),onTouchStart:qu(g,w)}]:[!1,_,{}]}function qu(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function iR({page:n,...e}){let{router:t}=gS(),r=k.useMemo(()=>sS(t.routes,n,t.basename),[t.routes,n,t.basename]);return r?k.createElement(sR,{page:n,matches:r,...e}):null}function aR(n){let{manifest:e,routeModules:t}=vS(),[r,i]=k.useState([]);return k.useEffect(()=>{let a=!1;return QN(n,e,t).then(o=>{a||i(o)}),()=>{a=!0}},[n,e,t]),r}function sR({page:n,matches:e,...t}){let r=Bi(),{manifest:i,routeModules:a}=vS(),{basename:o}=gS(),{loaderData:c,matches:u}=nR(),h=k.useMemo(()=>Bw(n,e,u,i,r,"data"),[n,e,u,i,r]),p=k.useMemo(()=>Bw(n,e,u,i,r,"assets"),[n,e,u,i,r]),g=k.useMemo(()=>{if(n===r.pathname+r.search+r.hash)return[];let A=new Set,S=!1;if(e.forEach(C=>{let P=i.routes[C.route.id];!P||!P.hasLoader||(!h.some(V=>V.route.id===C.route.id)&&C.route.id in c&&a[C.route.id]?.shouldRevalidate||P.hasClientLoader?S=!0:A.add(C.route.id))}),A.size===0)return[];let D=YN(n,o,"data");return S&&A.size>0&&D.searchParams.set("_routes",e.filter(C=>A.has(C.route.id)).map(C=>C.route.id).join(",")),[D.pathname+D.search]},[o,c,r,i,h,e,n,a]),_=k.useMemo(()=>ZN(p,i),[p,i]),w=aR(p);return k.createElement(k.Fragment,null,g.map(A=>k.createElement("link",{key:A,rel:"prefetch",as:"fetch",href:A,...t})),_.map(A=>k.createElement("link",{key:A,rel:"modulepreload",href:A,...t})),w.map(({key:A,link:S})=>k.createElement("link",{key:A,nonce:t.nonce,...S})))}function oR(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var yS=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{yS&&(window.__reactRouterVersion="7.9.4")}catch{}function lR({basename:n,children:e,window:t}){let r=k.useRef();r.current==null&&(r.current=K4({window:t,v5Compat:!0}));let i=r.current,[a,o]=k.useState({action:i.action,location:i.location}),c=k.useCallback(u=>{k.startTransition(()=>o(u))},[o]);return k.useLayoutEffect(()=>i.listen(c),[i,c]),k.createElement(BN,{basename:n,children:e,location:a.location,navigationType:a.action,navigator:i})}var _S=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,e0=k.forwardRef(function({onClick:e,discover:t="render",prefetch:r="none",relative:i,reloadDocument:a,replace:o,state:c,target:u,to:h,preventScrollReset:p,viewTransition:g,..._},w){let{basename:A}=k.useContext(Li),S=typeof h=="string"&&_S.test(h),D,C=!1;if(typeof h=="string"&&S&&(D=h,yS))try{let N=new URL(window.location.href),R=h.startsWith("//")?new URL(N.protocol+h):new URL(h),M=Ya(R.pathname,A);R.origin===N.origin&&M!=null?h=M+R.search+R.hash:C=!0}catch{fi(!1,`<Link to="${h}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let P=EN(h,{relative:i}),[V,H,X]=rR(r,_),F=hR(h,{replace:o,state:c,target:u,preventScrollReset:p,relative:i,viewTransition:g});function I(N){e&&e(N),N.defaultPrevented||F(N)}let b=k.createElement("a",{..._,...X,href:D||P,onClick:C||a?e:I,ref:oR(w,H),target:u,"data-discover":!S&&t==="render"?"true":void 0});return V&&!S?k.createElement(k.Fragment,null,b,k.createElement(iR,{page:P})):b});e0.displayName="Link";var cR=k.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:i=!1,style:a,to:o,viewTransition:c,children:u,...h},p){let g=Df(o,{relative:h.relative}),_=Bi(),w=k.useContext(j0),{navigator:A,basename:S}=k.useContext(Li),D=w!=null&&vR(g)&&c===!0,C=A.encodeLocation?A.encodeLocation(g).pathname:g.pathname,P=_.pathname,V=w&&w.navigation&&w.navigation.location?w.navigation.location.pathname:null;t||(P=P.toLowerCase(),V=V?V.toLowerCase():null,C=C.toLowerCase()),V&&S&&(V=Ya(V,S)||V);const H=C!=="/"&&C.endsWith("/")?C.length-1:C.length;let X=P===C||!i&&P.startsWith(C)&&P.charAt(H)==="/",F=V!=null&&(V===C||!i&&V.startsWith(C)&&V.charAt(C.length)==="/"),I={isActive:X,isPending:F,isTransitioning:D},b=X?e:void 0,N;typeof r=="function"?N=r(I):N=[r,X?"active":null,F?"pending":null,D?"transitioning":null].filter(Boolean).join(" ");let R=typeof a=="function"?a(I):a;return k.createElement(e0,{...h,"aria-current":b,className:N,ref:p,style:R,to:o,viewTransition:c},typeof u=="function"?u(I):u)});cR.displayName="NavLink";var uR=k.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:r,replace:i,state:a,method:o=jd,action:c,onSubmit:u,relative:h,preventScrollReset:p,viewTransition:g,..._},w)=>{let A=mR(),S=gR(c,{relative:h}),D=o.toLowerCase()==="get"?"get":"post",C=typeof c=="string"&&_S.test(c),P=V=>{if(u&&u(V),V.defaultPrevented)return;V.preventDefault();let H=V.nativeEvent.submitter,X=H?.getAttribute("formmethod")||o;A(H||V.currentTarget,{fetcherKey:e,method:X,navigate:t,replace:i,state:a,relative:h,preventScrollReset:p,viewTransition:g})};return k.createElement("form",{ref:w,method:D,action:S,onSubmit:r?u:P,..._,"data-discover":!C&&n==="render"?"true":void 0})});uR.displayName="Form";function fR(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function xS(n){let e=k.useContext(Nc);return Kt(e,fR(n)),e}function hR(n,{target:e,replace:t,state:r,preventScrollReset:i,relative:a,viewTransition:o}={}){let c=rl(),u=Bi(),h=Df(n,{relative:a});return k.useCallback(p=>{if(HN(p,e)){p.preventDefault();let g=t!==void 0?t:gf(u)===gf(h);c(n,{replace:g,state:r,preventScrollReset:i,relative:a,viewTransition:o})}},[u,c,h,t,r,e,n,i,a,o])}function Pv(n){fi(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=k.useRef(Cg(n)),t=k.useRef(!1),r=Bi(),i=k.useMemo(()=>GN(r.search,t.current?null:e.current),[r.search]),a=rl(),o=k.useCallback((c,u)=>{const h=Cg(typeof c=="function"?c(new URLSearchParams(i)):c);t.current=!0,a("?"+h,u)},[a,i]);return[i,o]}var dR=0,pR=()=>`__${String(++dR)}__`;function mR(){let{router:n}=xS("useSubmit"),{basename:e}=k.useContext(Li),t=PN();return k.useCallback(async(r,i={})=>{let{action:a,method:o,encType:c,formData:u,body:h}=XN(r,e);if(i.navigate===!1){let p=i.fetcherKey||pR();await n.fetch(p,t,i.action||a,{preventScrollReset:i.preventScrollReset,formData:u,body:h,formMethod:i.method||o,formEncType:i.encType||c,flushSync:i.flushSync})}else await n.navigate(i.action||a,{preventScrollReset:i.preventScrollReset,formData:u,body:h,formMethod:i.method||o,formEncType:i.encType||c,replace:i.replace,state:i.state,fromRouteId:t,flushSync:i.flushSync,viewTransition:i.viewTransition})},[n,e,t])}function gR(n,{relative:e}={}){let{basename:t}=k.useContext(Li),r=k.useContext(ji);Kt(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),a={...Df(n||".",{relative:e})},o=Bi();if(n==null){a.search=o.search;let c=new URLSearchParams(a.search),u=c.getAll("index");if(u.some(p=>p==="")){c.delete("index"),u.filter(g=>g).forEach(g=>c.append("index",g));let p=c.toString();a.search=p?`?${p}`:""}}return(!n||n===".")&&i.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(a.pathname=a.pathname==="/"?t:$a([t,a.pathname])),gf(a)}function vR(n,{relative:e}={}){let t=k.useContext(uS);Kt(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=xS("useViewTransitionState"),i=Df(n,{relative:e});if(!t.isTransitioning)return!1;let a=Ya(t.currentLocation.pathname,r)||t.currentLocation.pathname,o=Ya(t.nextLocation.pathname,r)||t.nextLocation.pathname;return Jd(i.pathname,o)!=null||Jd(i.pathname,a)!=null}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yR=()=>{};var Vw={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wS=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},_R=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const a=n[t++];e[r++]=String.fromCharCode((i&31)<<6|a&63)}else if(i>239&&i<365){const a=n[t++],o=n[t++],c=n[t++],u=((i&7)<<18|(a&63)<<12|(o&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const a=n[t++],o=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(a&63)<<6|o&63)}}return e.join("")},ES={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const a=n[i],o=i+1<n.length,c=o?n[i+1]:0,u=i+2<n.length,h=u?n[i+2]:0,p=a>>2,g=(a&3)<<4|c>>4;let _=(c&15)<<2|h>>6,w=h&63;u||(w=64,o||(_=64)),r.push(t[p],t[g],t[_],t[w])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(wS(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):_R(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const a=t[n.charAt(i++)],c=i<n.length?t[n.charAt(i)]:0;++i;const h=i<n.length?t[n.charAt(i)]:64;++i;const g=i<n.length?t[n.charAt(i)]:64;if(++i,a==null||c==null||h==null||g==null)throw new xR;const _=a<<2|c>>4;if(r.push(_),h!==64){const w=c<<4&240|h>>2;if(r.push(w),g!==64){const A=h<<6&192|g;r.push(A)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class xR extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const wR=function(n){const e=wS(n);return ES.encodeByteArray(e,!0)},t0=function(n){return wR(n).replace(/\./g,"")},AS=function(n){try{return ES.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ER(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AR=()=>ER().__FIREBASE_DEFAULTS__,bR=()=>{if(typeof process>"u"||typeof Vw>"u")return;const n=Vw.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},SR=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&AS(n[1]);return e&&JSON.parse(e)},V0=()=>{try{return yR()||AR()||bR()||SR()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},bS=n=>V0()?.emulatorHosts?.[n],CR=n=>{const e=bS(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},SS=()=>V0()?.config,CS=n=>V0()?.[`_${n}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TR{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oc(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function TS(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IR(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,a=n.sub||n.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}},...n};return[t0(JSON.stringify(t)),t0(JSON.stringify(o)),""].join(".")}const of={};function NR(){const n={prod:[],emulator:[]};for(const e of Object.keys(of))of[e]?n.emulator.push(e):n.prod.push(e);return n}function RR(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let Fw=!1;function IS(n,e){if(typeof window>"u"||typeof document>"u"||!Oc(window.location.host)||of[n]===e||of[n]||Fw)return;of[n]=e;function t(_){return`__firebase__banner__${_}`}const r="__firebase__banner",a=NR().prod.length>0;function o(){const _=document.getElementById(r);_&&_.remove()}function c(_){_.style.display="flex",_.style.background="#7faaf0",_.style.position="fixed",_.style.bottom="5px",_.style.left="5px",_.style.padding=".5em",_.style.borderRadius="5px",_.style.alignItems="center"}function u(_,w){_.setAttribute("width","24"),_.setAttribute("id",w),_.setAttribute("height","24"),_.setAttribute("viewBox","0 0 24 24"),_.setAttribute("fill","none"),_.style.marginLeft="-6px"}function h(){const _=document.createElement("span");return _.style.cursor="pointer",_.style.marginLeft="16px",_.style.fontSize="24px",_.innerHTML=" &times;",_.onclick=()=>{Fw=!0,o()},_}function p(_,w){_.setAttribute("id",w),_.innerText="Learn more",_.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",_.setAttribute("target","__blank"),_.style.paddingLeft="5px",_.style.textDecoration="underline"}function g(){const _=RR(r),w=t("text"),A=document.getElementById(w)||document.createElement("span"),S=t("learnmore"),D=document.getElementById(S)||document.createElement("a"),C=t("preprendIcon"),P=document.getElementById(C)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(_.created){const V=_.element;c(V),p(D,S);const H=h();u(P,C),V.append(P,A,D,H),document.body.appendChild(V)}a?(A.innerText="Preview backend disconnected.",P.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(P.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,A.innerText="Preview backend running in this workspace."),A.setAttribute("id",w)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",g):g()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ur(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function OR(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ur())}function DR(){const n=V0()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function MR(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function PR(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function kR(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function LR(){const n=ur();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function jR(){return!DR()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function BR(){try{return typeof indexedDB=="object"}catch{return!1}}function VR(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FR="FirebaseError";class xa extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=FR,Object.setPrototypeOf(this,xa.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Mf.prototype.create)}}class Mf{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},i=`${this.service}/${e}`,a=this.errors[e],o=a?UR(a,r):"Error",c=`${this.serviceName}: ${o} (${i}).`;return new xa(i,c,r)}}function UR(n,e){return n.replace(zR,(t,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const zR=/\{\$([^}]+)}/g;function HR(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Zo(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const i of t){if(!r.includes(i))return!1;const a=n[i],o=e[i];if(Uw(a)&&Uw(o)){if(!Zo(a,o))return!1}else if(a!==o)return!1}for(const i of r)if(!t.includes(i))return!1;return!0}function Uw(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pf(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Wu(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,a]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(a)}}),e}function Qu(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function GR(n,e){const t=new qR(n,e);return t.subscribe.bind(t)}class qR{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");$R(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=Cm),i.error===void 0&&(i.error=Cm),i.complete===void 0&&(i.complete=Cm);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function $R(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Cm(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fn(n){return n&&n._delegate?n._delegate:n}class Jo{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Go="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XR{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new TR;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(KR(e))try{this.getOrInitializeService({instanceIdentifier:Go})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const a=this.getOrInitializeService({instanceIdentifier:i});r.resolve(a)}catch{}}}}clearInstance(e=Go){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Go){return this.instances.has(e)}getOptions(e=Go){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[a,o]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(a);r===c&&o.resolve(i)}return i}onInit(e,t){const r=this.normalizeInstanceIdentifier(t),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const a=this.instances.get(r);return a&&e(a,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:YR(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Go){return this.component?this.component.multipleInstances?e:Go:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function YR(n){return n===Go?void 0:n}function KR(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WR{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new XR(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var at;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(at||(at={}));const QR={debug:at.DEBUG,verbose:at.VERBOSE,info:at.INFO,warn:at.WARN,error:at.ERROR,silent:at.SILENT},ZR=at.INFO,JR={[at.DEBUG]:"log",[at.VERBOSE]:"log",[at.INFO]:"info",[at.WARN]:"warn",[at.ERROR]:"error"},e8=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),i=JR[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class kv{constructor(e){this.name=e,this._logLevel=ZR,this._logHandler=e8,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in at))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?QR[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,at.DEBUG,...e),this._logHandler(this,at.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,at.VERBOSE,...e),this._logHandler(this,at.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,at.INFO,...e),this._logHandler(this,at.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,at.WARN,...e),this._logHandler(this,at.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,at.ERROR,...e),this._logHandler(this,at.ERROR,...e)}}const t8=(n,e)=>e.some(t=>n instanceof t);let zw,Hw;function n8(){return zw||(zw=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function r8(){return Hw||(Hw=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const NS=new WeakMap,Tg=new WeakMap,RS=new WeakMap,Tm=new WeakMap,Lv=new WeakMap;function i8(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",a),n.removeEventListener("error",o)},a=()=>{t(Hs(n.result)),i()},o=()=>{r(n.error),i()};n.addEventListener("success",a),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&NS.set(t,n)}).catch(()=>{}),Lv.set(e,n),e}function a8(n){if(Tg.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",a),n.removeEventListener("error",o),n.removeEventListener("abort",o)},a=()=>{t(),i()},o=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",a),n.addEventListener("error",o),n.addEventListener("abort",o)});Tg.set(n,e)}let Ig={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Tg.get(n);if(e==="objectStoreNames")return n.objectStoreNames||RS.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Hs(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function s8(n){Ig=n(Ig)}function o8(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(Im(this),e,...t);return RS.set(r,e.sort?e.sort():[e]),Hs(r)}:r8().includes(n)?function(...e){return n.apply(Im(this),e),Hs(NS.get(this))}:function(...e){return Hs(n.apply(Im(this),e))}}function l8(n){return typeof n=="function"?o8(n):(n instanceof IDBTransaction&&a8(n),t8(n,n8())?new Proxy(n,Ig):n)}function Hs(n){if(n instanceof IDBRequest)return i8(n);if(Tm.has(n))return Tm.get(n);const e=l8(n);return e!==n&&(Tm.set(n,e),Lv.set(e,n)),e}const Im=n=>Lv.get(n);function c8(n,e,{blocked:t,upgrade:r,blocking:i,terminated:a}={}){const o=indexedDB.open(n,e),c=Hs(o);return r&&o.addEventListener("upgradeneeded",u=>{r(Hs(o.result),u.oldVersion,u.newVersion,Hs(o.transaction),u)}),t&&o.addEventListener("blocked",u=>t(u.oldVersion,u.newVersion,u)),c.then(u=>{a&&u.addEventListener("close",()=>a()),i&&u.addEventListener("versionchange",h=>i(h.oldVersion,h.newVersion,h))}).catch(()=>{}),c}const u8=["get","getKey","getAll","getAllKeys","count"],f8=["put","add","delete","clear"],Nm=new Map;function Gw(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Nm.get(e))return Nm.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=f8.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||u8.includes(t)))return;const a=async function(o,...c){const u=this.transaction(o,i?"readwrite":"readonly");let h=u.store;return r&&(h=h.index(c.shift())),(await Promise.all([h[t](...c),i&&u.done]))[0]};return Nm.set(e,a),a}s8(n=>({...n,get:(e,t,r)=>Gw(e,t)||n.get(e,t,r),has:(e,t)=>!!Gw(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h8{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(d8(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function d8(n){return n.getComponent()?.type==="VERSION"}const Ng="@firebase/app",qw="0.14.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ka=new kv("@firebase/app"),p8="@firebase/app-compat",m8="@firebase/analytics-compat",g8="@firebase/analytics",v8="@firebase/app-check-compat",y8="@firebase/app-check",_8="@firebase/auth",x8="@firebase/auth-compat",w8="@firebase/database",E8="@firebase/data-connect",A8="@firebase/database-compat",b8="@firebase/functions",S8="@firebase/functions-compat",C8="@firebase/installations",T8="@firebase/installations-compat",I8="@firebase/messaging",N8="@firebase/messaging-compat",R8="@firebase/performance",O8="@firebase/performance-compat",D8="@firebase/remote-config",M8="@firebase/remote-config-compat",P8="@firebase/storage",k8="@firebase/storage-compat",L8="@firebase/firestore",j8="@firebase/ai",B8="@firebase/firestore-compat",V8="firebase",F8="12.3.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rg="[DEFAULT]",U8={[Ng]:"fire-core",[p8]:"fire-core-compat",[g8]:"fire-analytics",[m8]:"fire-analytics-compat",[y8]:"fire-app-check",[v8]:"fire-app-check-compat",[_8]:"fire-auth",[x8]:"fire-auth-compat",[w8]:"fire-rtdb",[E8]:"fire-data-connect",[A8]:"fire-rtdb-compat",[b8]:"fire-fn",[S8]:"fire-fn-compat",[C8]:"fire-iid",[T8]:"fire-iid-compat",[I8]:"fire-fcm",[N8]:"fire-fcm-compat",[R8]:"fire-perf",[O8]:"fire-perf-compat",[D8]:"fire-rc",[M8]:"fire-rc-compat",[P8]:"fire-gcs",[k8]:"fire-gcs-compat",[L8]:"fire-fst",[B8]:"fire-fst-compat",[j8]:"fire-vertex","fire-js":"fire-js",[V8]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vf=new Map,z8=new Map,Og=new Map;function $w(n,e){try{n.container.addComponent(e)}catch(t){Ka.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function yc(n){const e=n.name;if(Og.has(e))return Ka.debug(`There were multiple attempts to register component ${e}.`),!1;Og.set(e,n);for(const t of vf.values())$w(t,n);for(const t of z8.values())$w(t,n);return!0}function jv(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function oi(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H8={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Gs=new Mf("app","Firebase",H8);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G8{constructor(e,t,r){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Jo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Gs.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dc=F8;function OS(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r={name:Rg,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw Gs.create("bad-app-name",{appName:String(i)});if(t||(t=SS()),!t)throw Gs.create("no-options");const a=vf.get(i);if(a){if(Zo(t,a.options)&&Zo(r,a.config))return a;throw Gs.create("duplicate-app",{appName:i})}const o=new WR(i);for(const u of Og.values())o.addComponent(u);const c=new G8(t,r,o);return vf.set(i,c),c}function DS(n=Rg){const e=vf.get(n);if(!e&&n===Rg&&SS())return OS();if(!e)throw Gs.create("no-app",{appName:n});return e}function Xw(){return Array.from(vf.values())}function qs(n,e,t){let r=U8[n]??n;t&&(r+=`-${t}`);const i=r.match(/\s|\//),a=e.match(/\s|\//);if(i||a){const o=[`Unable to register library "${r}" with version "${e}":`];i&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&a&&o.push("and"),a&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ka.warn(o.join(" "));return}yc(new Jo(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q8="firebase-heartbeat-database",$8=1,yf="firebase-heartbeat-store";let Rm=null;function MS(){return Rm||(Rm=c8(q8,$8,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(yf)}catch(t){console.warn(t)}}}}).catch(n=>{throw Gs.create("idb-open",{originalErrorMessage:n.message})})),Rm}async function X8(n){try{const t=(await MS()).transaction(yf),r=await t.objectStore(yf).get(PS(n));return await t.done,r}catch(e){if(e instanceof xa)Ka.warn(e.message);else{const t=Gs.create("idb-get",{originalErrorMessage:e?.message});Ka.warn(t.message)}}}async function Yw(n,e){try{const r=(await MS()).transaction(yf,"readwrite");await r.objectStore(yf).put(e,PS(n)),await r.done}catch(t){if(t instanceof xa)Ka.warn(t.message);else{const r=Gs.create("idb-set",{originalErrorMessage:t?.message});Ka.warn(r.message)}}}function PS(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y8=1024,K8=30;class W8{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Z8(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Kw();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:t}),this._heartbeatsCache.heartbeats.length>K8){const i=J8(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Ka.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Kw(),{heartbeatsToSend:t,unsentEntries:r}=Q8(this._heartbeatsCache.heartbeats),i=t0(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return Ka.warn(e),""}}}function Kw(){return new Date().toISOString().substring(0,10)}function Q8(n,e=Y8){const t=[];let r=n.slice();for(const i of n){const a=t.find(o=>o.agent===i.agent);if(a){if(a.dates.push(i.date),Ww(t)>e){a.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),Ww(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class Z8{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return BR()?VR().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await X8(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Yw(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Yw(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function Ww(n){return t0(JSON.stringify({version:2,heartbeats:n})).length}function J8(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e6(n){yc(new Jo("platform-logger",e=>new h8(e),"PRIVATE")),yc(new Jo("heartbeat",e=>new W8(e),"PRIVATE")),qs(Ng,qw,n),qs(Ng,qw,"esm2020"),qs("fire-js","")}e6("");function kS(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const t6=kS,LS=new Mf("auth","Firebase",kS());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n0=new kv("@firebase/auth");function n6(n,...e){n0.logLevel<=at.WARN&&n0.warn(`Auth (${Dc}): ${n}`,...e)}function Vd(n,...e){n0.logLevel<=at.ERROR&&n0.error(`Auth (${Dc}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pi(n,...e){throw Bv(n,...e)}function ha(n,...e){return Bv(n,...e)}function jS(n,e,t){const r={...t6(),[e]:t};return new Mf("auth","Firebase",r).create(e,{appName:n.name})}function Xa(n){return jS(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Bv(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return LS.create(n,...e)}function Be(n,e,...t){if(!n)throw Bv(e,...t)}function Ha(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Vd(e),new Error(e)}function Wa(n,e){n||Ha(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dg(){return typeof self<"u"&&self.location?.href||""}function r6(){return Qw()==="http:"||Qw()==="https:"}function Qw(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i6(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(r6()||PR()||"connection"in navigator)?navigator.onLine:!0}function a6(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kf{constructor(e,t){this.shortDelay=e,this.longDelay=t,Wa(t>e,"Short delay should be less than long delay!"),this.isMobile=OR()||kR()}get(){return i6()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vv(n,e){Wa(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BS{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ha("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ha("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ha("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s6={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o6=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],l6=new kf(3e4,6e4);function so(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function oo(n,e,t,r,i={}){return VS(n,i,async()=>{let a={},o={};r&&(e==="GET"?o=r:a={body:JSON.stringify(r)});const c=Pf({key:n.config.apiKey,...o}).slice(1),u=await n._getAdditionalHeaders();u["Content-Type"]="application/json",n.languageCode&&(u["X-Firebase-Locale"]=n.languageCode);const h={method:e,headers:u,...a};return MR()||(h.referrerPolicy="no-referrer"),n.emulatorConfig&&Oc(n.emulatorConfig.host)&&(h.credentials="include"),BS.fetch()(await FS(n,n.config.apiHost,t,c),h)})}async function VS(n,e,t){n._canInitEmulator=!1;const r={...s6,...e};try{const i=new u6(n),a=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();const o=await a.json();if("needConfirmation"in o)throw Ed(n,"account-exists-with-different-credential",o);if(a.ok&&!("errorMessage"in o))return o;{const c=a.ok?o.errorMessage:o.error.message,[u,h]=c.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ed(n,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw Ed(n,"email-already-in-use",o);if(u==="USER_DISABLED")throw Ed(n,"user-disabled",o);const p=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw jS(n,p,h);Pi(n,p)}}catch(i){if(i instanceof xa)throw i;Pi(n,"network-request-failed",{message:String(i)})}}async function Lf(n,e,t,r,i={}){const a=await oo(n,e,t,r,i);return"mfaPendingCredential"in a&&Pi(n,"multi-factor-auth-required",{_serverResponse:a}),a}async function FS(n,e,t,r){const i=`${e}${t}?${r}`,a=n,o=a.config.emulator?Vv(n.config,i):`${n.config.apiScheme}://${i}`;return o6.includes(t)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(o).toString():o}function c6(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class u6{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(ha(this.auth,"network-request-failed")),l6.get())})}}function Ed(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=ha(n,e,r);return i.customData._tokenResponse=t,i}function Zw(n){return n!==void 0&&n.enterprise!==void 0}class f6{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return c6(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function h6(n,e){return oo(n,"GET","/v2/recaptchaConfig",so(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function d6(n,e){return oo(n,"POST","/v1/accounts:delete",e)}async function r0(n,e){return oo(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lf(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function p6(n,e=!1){const t=fn(n),r=await t.getIdToken(e),i=Fv(r);Be(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const a=typeof i.firebase=="object"?i.firebase:void 0,o=a?.sign_in_provider;return{claims:i,token:r,authTime:lf(Om(i.auth_time)),issuedAtTime:lf(Om(i.iat)),expirationTime:lf(Om(i.exp)),signInProvider:o||null,signInSecondFactor:a?.sign_in_second_factor||null}}function Om(n){return Number(n)*1e3}function Fv(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Vd("JWT malformed, contained fewer than 3 sections"),null;try{const i=AS(t);return i?JSON.parse(i):(Vd("Failed to decode base64 JWT payload"),null)}catch(i){return Vd("Caught error parsing JWT payload as JSON",i?.toString()),null}}function Jw(n){const e=Fv(n);return Be(e,"internal-error"),Be(typeof e.exp<"u","internal-error"),Be(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _f(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof xa&&m6(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function m6({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g6{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mg{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=lf(this.lastLoginAt),this.creationTime=lf(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function i0(n){const e=n.auth,t=await n.getIdToken(),r=await _f(n,r0(e,{idToken:t}));Be(r?.users.length,e,"internal-error");const i=r.users[0];n._notifyReloadListener(i);const a=i.providerUserInfo?.length?US(i.providerUserInfo):[],o=y6(n.providerData,a),c=n.isAnonymous,u=!(n.email&&i.passwordHash)&&!o?.length,h=c?u:!1,p={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Mg(i.createdAt,i.lastLoginAt),isAnonymous:h};Object.assign(n,p)}async function v6(n){const e=fn(n);await i0(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function y6(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function US(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _6(n,e){const t=await VS(n,{},async()=>{const r=Pf({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:a}=n.config,o=await FS(n,i,"/v1/token",`key=${a}`),c=await n._getAdditionalHeaders();c["Content-Type"]="application/x-www-form-urlencoded";const u={method:"POST",headers:c,body:r};return n.emulatorConfig&&Oc(n.emulatorConfig.host)&&(u.credentials="include"),BS.fetch()(o,u)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function x6(n,e){return oo(n,"POST","/v2/accounts:revokeToken",so(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dc{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Be(e.idToken,"internal-error"),Be(typeof e.idToken<"u","internal-error"),Be(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Jw(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Be(e.length!==0,"internal-error");const t=Jw(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Be(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:i,expiresIn:a}=await _6(e,t);this.updateTokensAndExpiration(r,i,Number(a))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:a}=t,o=new dc;return r&&(Be(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(Be(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),a&&(Be(typeof a=="number","internal-error",{appName:e}),o.expirationTime=a),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new dc,this.toJSON())}_performRefresh(){return Ha("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ds(n,e){Be(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Ni{constructor({uid:e,auth:t,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new g6(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Mg(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await _f(this,this.stsTokenManager.getToken(this.auth,e));return Be(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return p6(this,e)}reload(){return v6(this)}_assign(e){this!==e&&(Be(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Ni({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Be(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await i0(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(oi(this.auth.app))return Promise.reject(Xa(this.auth));const e=await this.getIdToken();return await _f(this,d6(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const r=t.displayName??void 0,i=t.email??void 0,a=t.phoneNumber??void 0,o=t.photoURL??void 0,c=t.tenantId??void 0,u=t._redirectEventId??void 0,h=t.createdAt??void 0,p=t.lastLoginAt??void 0,{uid:g,emailVerified:_,isAnonymous:w,providerData:A,stsTokenManager:S}=t;Be(g&&S,e,"internal-error");const D=dc.fromJSON(this.name,S);Be(typeof g=="string",e,"internal-error"),Ds(r,e.name),Ds(i,e.name),Be(typeof _=="boolean",e,"internal-error"),Be(typeof w=="boolean",e,"internal-error"),Ds(a,e.name),Ds(o,e.name),Ds(c,e.name),Ds(u,e.name),Ds(h,e.name),Ds(p,e.name);const C=new Ni({uid:g,auth:e,email:i,emailVerified:_,displayName:r,isAnonymous:w,photoURL:o,phoneNumber:a,tenantId:c,stsTokenManager:D,createdAt:h,lastLoginAt:p});return A&&Array.isArray(A)&&(C.providerData=A.map(P=>({...P}))),u&&(C._redirectEventId=u),C}static async _fromIdTokenResponse(e,t,r=!1){const i=new dc;i.updateFromServerResponse(t);const a=new Ni({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await i0(a),a}static async _fromGetAccountInfoResponse(e,t,r){const i=t.users[0];Be(i.localId!==void 0,"internal-error");const a=i.providerUserInfo!==void 0?US(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!a?.length,c=new dc;c.updateFromIdToken(r);const u=new Ni({uid:i.localId,auth:e,stsTokenManager:c,isAnonymous:o}),h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new Mg(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!a?.length};return Object.assign(u,h),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eE=new Map;function Ga(n){Wa(n instanceof Function,"Expected a class definition");let e=eE.get(n);return e?(Wa(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,eE.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zS{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}zS.type="NONE";const tE=zS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fd(n,e,t){return`firebase:${n}:${e}:${t}`}class pc{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:a}=this.auth;this.fullUserKey=Fd(this.userKey,i.apiKey,a),this.fullPersistenceKey=Fd("persistence",i.apiKey,a),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await r0(this.auth,{idToken:e}).catch(()=>{});return t?Ni._fromGetAccountInfoResponse(this.auth,t,e):null}return Ni._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new pc(Ga(tE),e,r);const i=(await Promise.all(t.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let a=i[0]||Ga(tE);const o=Fd(r,e.config.apiKey,e.name);let c=null;for(const h of t)try{const p=await h._get(o);if(p){let g;if(typeof p=="string"){const _=await r0(e,{idToken:p}).catch(()=>{});if(!_)break;g=await Ni._fromGetAccountInfoResponse(e,_,p)}else g=Ni._fromJSON(e,p);h!==a&&(c=g),a=h;break}}catch{}const u=i.filter(h=>h._shouldAllowMigration);return!a._shouldAllowMigration||!u.length?new pc(a,e,r):(a=u[0],c&&await a._set(o,c.toJSON()),await Promise.all(t.map(async h=>{if(h!==a)try{await h._remove(o)}catch{}})),new pc(a,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nE(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if($S(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(HS(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(YS(e))return"Blackberry";if(KS(e))return"Webos";if(GS(e))return"Safari";if((e.includes("chrome/")||qS(e))&&!e.includes("edge/"))return"Chrome";if(XS(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function HS(n=ur()){return/firefox\//i.test(n)}function GS(n=ur()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function qS(n=ur()){return/crios\//i.test(n)}function $S(n=ur()){return/iemobile/i.test(n)}function XS(n=ur()){return/android/i.test(n)}function YS(n=ur()){return/blackberry/i.test(n)}function KS(n=ur()){return/webos/i.test(n)}function Uv(n=ur()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function w6(n=ur()){return Uv(n)&&!!window.navigator?.standalone}function E6(){return LR()&&document.documentMode===10}function WS(n=ur()){return Uv(n)||XS(n)||KS(n)||YS(n)||/windows phone/i.test(n)||$S(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QS(n,e=[]){let t;switch(n){case"Browser":t=nE(ur());break;case"Worker":t=`${nE(ur())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Dc}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A6{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=a=>new Promise((o,c)=>{try{const u=e(a);o(u)}catch(u){c(u)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function b6(n,e={}){return oo(n,"GET","/v2/passwordPolicy",so(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S6=6;class C6{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??S6,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T6{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new rE(this),this.idTokenSubscription=new rE(this),this.beforeStateQueue=new A6(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=LS,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Ga(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await pc.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await r0(this,{idToken:e}),r=await Ni._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(oi(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(o,o))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let r=t,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=this.redirectUser?._redirectEventId,o=r?._redirectEventId,c=await this.tryRedirectSignIn(e);(!a||a===o)&&c?.user&&(r=c.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(a){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Be(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await i0(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=a6()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(oi(this.app))return Promise.reject(Xa(this));const t=e?fn(e):null;return t&&Be(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Be(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return oi(this.app)?Promise.reject(Xa(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return oi(this.app)?Promise.reject(Xa(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ga(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await b6(this),t=new C6(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Mf("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await x6(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Ga(e)||this._popupRedirectResolver;Be(t,this,"argument-error"),this.redirectPersistenceManager=await pc.create(this,[Ga(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const a=typeof t=="function"?t:t.next.bind(t);let o=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(Be(c,this,"internal-error"),c.then(()=>{o||a(this.currentUser)}),typeof t=="function"){const u=e.addObserver(t,r,i);return()=>{o=!0,u()}}else{const u=e.addObserver(t);return()=>{o=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Be(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=QS(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(oi(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&n6(`Error while retrieving App Check token: ${e.error}`),e?.token}}function il(n){return fn(n)}class rE{constructor(e){this.auth=e,this.observer=null,this.addObserver=GR(t=>this.observer=t)}get next(){return Be(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let F0={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function I6(n){F0=n}function ZS(n){return F0.loadJS(n)}function N6(){return F0.recaptchaEnterpriseScript}function R6(){return F0.gapiScript}function O6(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class D6{constructor(){this.enterprise=new M6}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class M6{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const P6="recaptcha-enterprise",JS="NO_RECAPTCHA";class k6{constructor(e){this.type=P6,this.auth=il(e)}async verify(e="verify",t=!1){async function r(a){if(!t){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(o,c)=>{h6(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{const h=new f6(u);return a.tenantId==null?a._agentRecaptchaConfig=h:a._tenantRecaptchaConfigs[a.tenantId]=h,o(h.siteKey)}}).catch(u=>{c(u)})})}function i(a,o,c){const u=window.grecaptcha;Zw(u)?u.enterprise.ready(()=>{u.enterprise.execute(a,{action:e}).then(h=>{o(h)}).catch(()=>{o(JS)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new D6().execute("siteKey",{action:"verify"}):new Promise((a,o)=>{r(this.auth).then(c=>{if(!t&&Zw(window.grecaptcha))i(c,a,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let u=N6();u.length!==0&&(u+=c),ZS(u).then(()=>{i(c,a,o)}).catch(h=>{o(h)})}}).catch(c=>{o(c)})})}}async function iE(n,e,t,r=!1,i=!1){const a=new k6(n);let o;if(i)o=JS;else try{o=await a.verify(t)}catch{o=await a.verify(t,!0)}const c={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in c){const u=c.phoneEnrollmentInfo.phoneNumber,h=c.phoneEnrollmentInfo.recaptchaToken;Object.assign(c,{phoneEnrollmentInfo:{phoneNumber:u,recaptchaToken:h,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in c){const u=c.phoneSignInInfo.recaptchaToken;Object.assign(c,{phoneSignInInfo:{recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return c}return r?Object.assign(c,{captchaResp:o}):Object.assign(c,{captchaResponse:o}),Object.assign(c,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(c,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),c}async function aE(n,e,t,r,i){if(n._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await iE(n,e,t,t==="getOobCode");return r(n,a)}else return r(n,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await iE(n,e,t,t==="getOobCode");return r(n,o)}else return Promise.reject(a)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L6(n,e){const t=jv(n,"auth");if(t.isInitialized()){const i=t.getImmediate(),a=t.getOptions();if(Zo(a,e??{}))return i;Pi(i,"already-initialized")}return t.initialize({options:e})}function j6(n,e){const t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(Ga);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function B6(n,e,t){const r=il(n);Be(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,a=eC(e),{host:o,port:c}=V6(e),u=c===null?"":`:${c}`,h={url:`${a}//${o}${u}/`},p=Object.freeze({host:o,port:c,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){Be(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Be(Zo(h,r.config.emulator)&&Zo(p,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=h,r.emulatorConfig=p,r.settings.appVerificationDisabledForTesting=!0,Oc(o)?(TS(`${a}//${o}${u}`),IS("Auth",!0)):F6()}function eC(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function V6(n){const e=eC(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const a=i[1];return{host:a,port:sE(r.substr(a.length+1))}}else{const[a,o]=r.split(":");return{host:a,port:sE(o)}}}function sE(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function F6(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zv{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Ha("not implemented")}_getIdTokenResponse(e){return Ha("not implemented")}_linkToIdToken(e,t){return Ha("not implemented")}_getReauthenticationResolver(e){return Ha("not implemented")}}async function U6(n,e){return oo(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function z6(n,e){return Lf(n,"POST","/v1/accounts:signInWithPassword",so(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function H6(n,e){return Lf(n,"POST","/v1/accounts:signInWithEmailLink",so(n,e))}async function G6(n,e){return Lf(n,"POST","/v1/accounts:signInWithEmailLink",so(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xf extends zv{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new xf(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new xf(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return aE(e,t,"signInWithPassword",z6);case"emailLink":return H6(e,{email:this._email,oobCode:this._password});default:Pi(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return aE(e,r,"signUpPassword",U6);case"emailLink":return G6(e,{idToken:t,email:this._email,oobCode:this._password});default:Pi(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mc(n,e){return Lf(n,"POST","/v1/accounts:signInWithIdp",so(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q6="http://localhost";class el extends zv{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new el(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Pi("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,...a}=t;if(!r||!i)return null;const o=new el(r,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}_getIdTokenResponse(e){const t=this.buildRequest();return mc(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,mc(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,mc(e,t)}buildRequest(){const e={requestUri:q6,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Pf(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $6(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function X6(n){const e=Wu(Qu(n)).link,t=e?Wu(Qu(e)).deep_link_id:null,r=Wu(Qu(n)).deep_link_id;return(r?Wu(Qu(r)).link:null)||r||t||e||n}class Hv{constructor(e){const t=Wu(Qu(e)),r=t.apiKey??null,i=t.oobCode??null,a=$6(t.mode??null);Be(r&&i&&a,"argument-error"),this.apiKey=r,this.operation=a,this.code=i,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=X6(e);try{return new Hv(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mc{constructor(){this.providerId=Mc.PROVIDER_ID}static credential(e,t){return xf._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=Hv.parseLink(t);return Be(r,"argument-error"),xf._fromEmailAndCode(e,r.code,r.tenantId)}}Mc.PROVIDER_ID="password";Mc.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Mc.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tC{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jf extends tC{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class js extends jf{constructor(){super("facebook.com")}static credential(e){return el._fromParams({providerId:js.PROVIDER_ID,signInMethod:js.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return js.credentialFromTaggedObject(e)}static credentialFromError(e){return js.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return js.credential(e.oauthAccessToken)}catch{return null}}}js.FACEBOOK_SIGN_IN_METHOD="facebook.com";js.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bs extends jf{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return el._fromParams({providerId:Bs.PROVIDER_ID,signInMethod:Bs.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Bs.credentialFromTaggedObject(e)}static credentialFromError(e){return Bs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return Bs.credential(t,r)}catch{return null}}}Bs.GOOGLE_SIGN_IN_METHOD="google.com";Bs.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vs extends jf{constructor(){super("github.com")}static credential(e){return el._fromParams({providerId:Vs.PROVIDER_ID,signInMethod:Vs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Vs.credentialFromTaggedObject(e)}static credentialFromError(e){return Vs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Vs.credential(e.oauthAccessToken)}catch{return null}}}Vs.GITHUB_SIGN_IN_METHOD="github.com";Vs.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fs extends jf{constructor(){super("twitter.com")}static credential(e,t){return el._fromParams({providerId:Fs.PROVIDER_ID,signInMethod:Fs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Fs.credentialFromTaggedObject(e)}static credentialFromError(e){return Fs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return Fs.credential(t,r)}catch{return null}}}Fs.TWITTER_SIGN_IN_METHOD="twitter.com";Fs.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Y6(n,e){return Lf(n,"POST","/v1/accounts:signUp",so(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zs{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,i=!1){const a=await Ni._fromIdTokenResponse(e,r,i),o=oE(r);return new Zs({user:a,providerId:o,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const i=oE(r);return new Zs({user:e,providerId:i,_tokenResponse:r,operationType:t})}}function oE(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nC(n){if(oi(n.app))return Promise.reject(Xa(n));const e=il(n);if(await e._initializationPromise,e.currentUser?.isAnonymous)return new Zs({user:e.currentUser,providerId:null,operationType:"signIn"});const t=await Y6(e,{returnSecureToken:!0}),r=await Zs._fromIdTokenResponse(e,"signIn",t,!0);return await e._updateCurrentUser(r.user),r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a0 extends xa{constructor(e,t,r,i){super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,a0.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new a0(e,t,r,i)}}function rC(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?a0._fromErrorAndOperation(n,a,e,r):a})}async function K6(n,e,t=!1){const r=await _f(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Zs._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function W6(n,e,t=!1){const{auth:r}=n;if(oi(r.app))return Promise.reject(Xa(r));const i="reauthenticate";try{const a=await _f(n,rC(r,i,e,n),t);Be(a.idToken,r,"internal-error");const o=Fv(a.idToken);Be(o,r,"internal-error");const{sub:c}=o;return Be(n.uid===c,r,"user-mismatch"),Zs._forOperation(n,i,a)}catch(a){throw a?.code==="auth/user-not-found"&&Pi(r,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iC(n,e,t=!1){if(oi(n.app))return Promise.reject(Xa(n));const r="signIn",i=await rC(n,r,e),a=await Zs._fromIdTokenResponse(n,r,i);return t||await n._updateCurrentUser(a.user),a}async function Q6(n,e){return iC(il(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Z6(n){const e=il(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function J6(n,e,t){return oi(n.app)?Promise.reject(Xa(n)):Q6(fn(n),Mc.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&Z6(n),r})}function eO(n,e,t,r){return fn(n).onIdTokenChanged(e,t,r)}function tO(n,e,t){return fn(n).beforeAuthStateChanged(e,t)}function aC(n,e,t,r){return fn(n).onAuthStateChanged(e,t,r)}function nO(n){return fn(n).signOut()}const s0="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sC{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(s0,"1"),this.storage.removeItem(s0),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rO=1e3,iO=10;class oC extends sC{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=WS(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),i=this.localCache[t];r!==i&&e(t,i,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((o,c,u)=>{this.notifyListeners(o,u)});return}const r=e.key;t?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!t&&this.localCache[r]===o||this.notifyListeners(r,o)},a=this.storage.getItem(r);E6()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,iO):i()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},rO)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}oC.type="LOCAL";const aO=oC;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lC extends sC{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}lC.type="SESSION";const cC=lC;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sO(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U0{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(i=>i.isListeningto(e));if(t)return t;const r=new U0(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:i,data:a}=t.data,o=this.handlersMap[i];if(!o?.size)return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const c=Array.from(o).map(async h=>h(t.origin,a)),u=await sO(c);t.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:u})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}U0.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gv(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oO{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let a,o;return new Promise((c,u)=>{const h=Gv("",20);i.port1.start();const p=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(g){const _=g;if(_.data.eventId===h)switch(_.data.status){case"ack":clearTimeout(p),a=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),c(_.data.response);break;default:clearTimeout(p),clearTimeout(a),u(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:h,data:t},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function da(){return window}function lO(n){da().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uC(){return typeof da().WorkerGlobalScope<"u"&&typeof da().importScripts=="function"}async function cO(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function uO(){return navigator?.serviceWorker?.controller||null}function fO(){return uC()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fC="firebaseLocalStorageDb",hO=1,o0="firebaseLocalStorage",hC="fbase_key";class Bf{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function z0(n,e){return n.transaction([o0],e?"readwrite":"readonly").objectStore(o0)}function dO(){const n=indexedDB.deleteDatabase(fC);return new Bf(n).toPromise()}function Pg(){const n=indexedDB.open(fC,hO);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(o0,{keyPath:hC})}catch(i){t(i)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(o0)?e(r):(r.close(),await dO(),e(await Pg()))})})}async function lE(n,e,t){const r=z0(n,!0).put({[hC]:e,value:t});return new Bf(r).toPromise()}async function pO(n,e){const t=z0(n,!1).get(e),r=await new Bf(t).toPromise();return r===void 0?null:r.value}function cE(n,e){const t=z0(n,!0).delete(e);return new Bf(t).toPromise()}const mO=800,gO=3;class dC{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Pg(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>gO)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return uC()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=U0._getInstance(fO()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await cO(),!this.activeServiceWorker)return;this.sender=new oO(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||uO()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Pg();return await lE(e,s0,"1"),await cE(e,s0),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>lE(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>pO(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>cE(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const a=z0(i,!1).getAll();return new Bf(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:a}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(a)&&(this.notifyListeners(i,a),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),mO)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}dC.type="LOCAL";const vO=dC;new kf(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yO(n,e){return e?Ga(e):(Be(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qv extends zv{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return mc(e,this._buildIdpRequest())}_linkToIdToken(e,t){return mc(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return mc(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function _O(n){return iC(n.auth,new qv(n),n.bypassAuthState)}function xO(n){const{auth:e,user:t}=n;return Be(t,e,"internal-error"),W6(t,new qv(n),n.bypassAuthState)}async function wO(n){const{auth:e,user:t}=n;return Be(t,e,"internal-error"),K6(t,new qv(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pC{constructor(e,t,r,i,a=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:i,tenantId:a,error:o,type:c}=e;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:t,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(u))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return _O;case"linkViaPopup":case"linkViaRedirect":return wO;case"reauthViaPopup":case"reauthViaRedirect":return xO;default:Pi(this.auth,"internal-error")}}resolve(e){Wa(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Wa(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EO=new kf(2e3,1e4);class sc extends pC{constructor(e,t,r,i,a){super(e,t,i,a),this.provider=r,this.authWindow=null,this.pollId=null,sc.currentPopupAction&&sc.currentPopupAction.cancel(),sc.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Be(e,this.auth,"internal-error"),e}async onExecution(){Wa(this.filter.length===1,"Popup operations only handle one event");const e=Gv();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(ha(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(ha(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,sc.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ha(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,EO.get())};e()}}sc.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AO="pendingRedirect",Ud=new Map;class bO extends pC{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=Ud.get(this.auth._key());if(!e){try{const r=await SO(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Ud.set(this.auth._key(),e)}return this.bypassAuthState||Ud.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function SO(n,e){const t=IO(e),r=TO(n);if(!await r._isAvailable())return!1;const i=await r._get(t)==="true";return await r._remove(t),i}function CO(n,e){Ud.set(n._key(),e)}function TO(n){return Ga(n._redirectPersistence)}function IO(n){return Fd(AO,n.config.apiKey,n.name)}async function NO(n,e,t=!1){if(oi(n.app))return Promise.reject(Xa(n));const r=il(n),i=yO(r,e),o=await new bO(r,i,t).execute();return o&&!t&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RO=600*1e3;class OO{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!DO(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!mC(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";t.onError(ha(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=RO&&this.cachedEventUids.clear(),this.cachedEventUids.has(uE(e))}saveEventToCache(e){this.cachedEventUids.add(uE(e)),this.lastProcessedEventTime=Date.now()}}function uE(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function mC({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function DO(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return mC(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MO(n,e={}){return oo(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PO=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,kO=/^https?/;async function LO(n){if(n.config.emulator)return;const{authorizedDomains:e}=await MO(n);for(const t of e)try{if(jO(t))return}catch{}Pi(n,"unauthorized-domain")}function jO(n){const e=Dg(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const o=new URL(n);return o.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&o.hostname===r}if(!kO.test(t))return!1;if(PO.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BO=new kf(3e4,6e4);function fE(){const n=da().___jsl;if(n?.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function VO(n){return new Promise((e,t)=>{function r(){fE(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{fE(),t(ha(n,"network-request-failed"))},timeout:BO.get()})}if(da().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(da().gapi?.load)r();else{const i=O6("iframefcb");return da()[i]=()=>{gapi.load?r():t(ha(n,"network-request-failed"))},ZS(`${R6()}?onload=${i}`).catch(a=>t(a))}}).catch(e=>{throw zd=null,e})}let zd=null;function FO(n){return zd=zd||VO(n),zd}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UO=new kf(5e3,15e3),zO="__/auth/iframe",HO="emulator/auth/iframe",GO={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},qO=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function $O(n){const e=n.config;Be(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Vv(e,HO):`https://${n.config.authDomain}/${zO}`,r={apiKey:e.apiKey,appName:n.name,v:Dc},i=qO.get(n.config.apiHost);i&&(r.eid=i);const a=n._getFrameworks();return a.length&&(r.fw=a.join(",")),`${t}?${Pf(r).slice(1)}`}async function XO(n){const e=await FO(n),t=da().gapi;return Be(t,n,"internal-error"),e.open({where:document.body,url:$O(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:GO,dontclear:!0},r=>new Promise(async(i,a)=>{await r.restyle({setHideOnLeave:!1});const o=ha(n,"network-request-failed"),c=da().setTimeout(()=>{a(o)},UO.get());function u(){da().clearTimeout(c),i(r)}r.ping(u).then(u,()=>{a(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YO={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},KO=500,WO=600,QO="_blank",ZO="http://localhost";class hE{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function JO(n,e,t,r=KO,i=WO){const a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let c="";const u={...YO,width:r.toString(),height:i.toString(),top:a,left:o},h=ur().toLowerCase();t&&(c=qS(h)?QO:t),HS(h)&&(e=e||ZO,u.scrollbars="yes");const p=Object.entries(u).reduce((_,[w,A])=>`${_}${w}=${A},`,"");if(w6(h)&&c!=="_self")return eD(e||"",c),new hE(null);const g=window.open(e||"",c,p);Be(g,n,"popup-blocked");try{g.focus()}catch{}return new hE(g)}function eD(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tD="__/auth/handler",nD="emulator/auth/handler",rD=encodeURIComponent("fac");async function dE(n,e,t,r,i,a){Be(n.config.authDomain,n,"auth-domain-config-required"),Be(n.config.apiKey,n,"invalid-api-key");const o={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Dc,eventId:i};if(e instanceof tC){e.setDefaultLanguage(n.languageCode),o.providerId=e.providerId||"",HR(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[p,g]of Object.entries({}))o[p]=g}if(e instanceof jf){const p=e.getScopes().filter(g=>g!=="");p.length>0&&(o.scopes=p.join(","))}n.tenantId&&(o.tid=n.tenantId);const c=o;for(const p of Object.keys(c))c[p]===void 0&&delete c[p];const u=await n._getAppCheckToken(),h=u?`#${rD}=${encodeURIComponent(u)}`:"";return`${iD(n)}?${Pf(c).slice(1)}${h}`}function iD({config:n}){return n.emulator?Vv(n,nD):`https://${n.authDomain}/${tD}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dm="webStorageSupport";class aD{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=cC,this._completeRedirectFn=NO,this._overrideRedirectResult=CO}async _openPopup(e,t,r,i){Wa(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const a=await dE(e,t,r,Dg(),i);return JO(e,a,Gv())}async _openRedirect(e,t,r,i){await this._originValidation(e);const a=await dE(e,t,r,Dg(),i);return lO(a),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:a}=this.eventManagers[t];return i?Promise.resolve(i):(Wa(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await XO(e),r=new OO(e);return t.register("authEvent",i=>(Be(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Dm,{type:Dm},i=>{const a=i?.[0]?.[Dm];a!==void 0&&t(!!a),Pi(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=LO(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return WS()||GS()||Uv()}}const sD=aD;var pE="@firebase/auth",mE="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oD{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Be(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lD(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function cD(n){yc(new Jo("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:o,authDomain:c}=r.options;Be(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:c,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:QS(n)},h=new T6(r,i,a,u);return j6(h,t),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),yc(new Jo("auth-internal",e=>{const t=il(e.getProvider("auth").getImmediate());return(r=>new oD(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),qs(pE,mE,lD(n)),qs(pE,mE,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uD=300,fD=CS("authIdTokenMaxAge")||uD;let gE=null;const hD=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>fD)return;const i=t?.token;gE!==i&&(gE=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function dD(n=DS()){const e=jv(n,"auth");if(e.isInitialized())return e.getImmediate();const t=L6(n,{popupRedirectResolver:sD,persistence:[vO,aO,cC]}),r=CS("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(r,location.origin);if(location.origin===a.origin){const o=hD(a.toString());tO(t,o,()=>o(t.currentUser)),eO(t,c=>o(c))}}const i=bS("auth");return i&&B6(t,`http://${i}`),t}function pD(){return document.getElementsByTagName("head")?.[0]??document}I6({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{const a=ha("internal-error");a.customData=i,t(a)},r.type="text/javascript",r.charset="UTF-8",pD().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});cD("Browser");var mD="firebase",gD="12.3.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */qs(mD,gD,"app");var vE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var $s,gC;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(I,b){function N(){}N.prototype=b.prototype,I.F=b.prototype,I.prototype=new N,I.prototype.constructor=I,I.D=function(R,M,B){for(var L=Array(arguments.length-2),ie=2;ie<arguments.length;ie++)L[ie-2]=arguments[ie];return b.prototype[M].apply(R,L)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(I,b,N){N||(N=0);const R=Array(16);if(typeof b=="string")for(var M=0;M<16;++M)R[M]=b.charCodeAt(N++)|b.charCodeAt(N++)<<8|b.charCodeAt(N++)<<16|b.charCodeAt(N++)<<24;else for(M=0;M<16;++M)R[M]=b[N++]|b[N++]<<8|b[N++]<<16|b[N++]<<24;b=I.g[0],N=I.g[1],M=I.g[2];let B=I.g[3],L;L=b+(B^N&(M^B))+R[0]+3614090360&4294967295,b=N+(L<<7&4294967295|L>>>25),L=B+(M^b&(N^M))+R[1]+3905402710&4294967295,B=b+(L<<12&4294967295|L>>>20),L=M+(N^B&(b^N))+R[2]+606105819&4294967295,M=B+(L<<17&4294967295|L>>>15),L=N+(b^M&(B^b))+R[3]+3250441966&4294967295,N=M+(L<<22&4294967295|L>>>10),L=b+(B^N&(M^B))+R[4]+4118548399&4294967295,b=N+(L<<7&4294967295|L>>>25),L=B+(M^b&(N^M))+R[5]+1200080426&4294967295,B=b+(L<<12&4294967295|L>>>20),L=M+(N^B&(b^N))+R[6]+2821735955&4294967295,M=B+(L<<17&4294967295|L>>>15),L=N+(b^M&(B^b))+R[7]+4249261313&4294967295,N=M+(L<<22&4294967295|L>>>10),L=b+(B^N&(M^B))+R[8]+1770035416&4294967295,b=N+(L<<7&4294967295|L>>>25),L=B+(M^b&(N^M))+R[9]+2336552879&4294967295,B=b+(L<<12&4294967295|L>>>20),L=M+(N^B&(b^N))+R[10]+4294925233&4294967295,M=B+(L<<17&4294967295|L>>>15),L=N+(b^M&(B^b))+R[11]+2304563134&4294967295,N=M+(L<<22&4294967295|L>>>10),L=b+(B^N&(M^B))+R[12]+1804603682&4294967295,b=N+(L<<7&4294967295|L>>>25),L=B+(M^b&(N^M))+R[13]+4254626195&4294967295,B=b+(L<<12&4294967295|L>>>20),L=M+(N^B&(b^N))+R[14]+2792965006&4294967295,M=B+(L<<17&4294967295|L>>>15),L=N+(b^M&(B^b))+R[15]+1236535329&4294967295,N=M+(L<<22&4294967295|L>>>10),L=b+(M^B&(N^M))+R[1]+4129170786&4294967295,b=N+(L<<5&4294967295|L>>>27),L=B+(N^M&(b^N))+R[6]+3225465664&4294967295,B=b+(L<<9&4294967295|L>>>23),L=M+(b^N&(B^b))+R[11]+643717713&4294967295,M=B+(L<<14&4294967295|L>>>18),L=N+(B^b&(M^B))+R[0]+3921069994&4294967295,N=M+(L<<20&4294967295|L>>>12),L=b+(M^B&(N^M))+R[5]+3593408605&4294967295,b=N+(L<<5&4294967295|L>>>27),L=B+(N^M&(b^N))+R[10]+38016083&4294967295,B=b+(L<<9&4294967295|L>>>23),L=M+(b^N&(B^b))+R[15]+3634488961&4294967295,M=B+(L<<14&4294967295|L>>>18),L=N+(B^b&(M^B))+R[4]+3889429448&4294967295,N=M+(L<<20&4294967295|L>>>12),L=b+(M^B&(N^M))+R[9]+568446438&4294967295,b=N+(L<<5&4294967295|L>>>27),L=B+(N^M&(b^N))+R[14]+3275163606&4294967295,B=b+(L<<9&4294967295|L>>>23),L=M+(b^N&(B^b))+R[3]+4107603335&4294967295,M=B+(L<<14&4294967295|L>>>18),L=N+(B^b&(M^B))+R[8]+1163531501&4294967295,N=M+(L<<20&4294967295|L>>>12),L=b+(M^B&(N^M))+R[13]+2850285829&4294967295,b=N+(L<<5&4294967295|L>>>27),L=B+(N^M&(b^N))+R[2]+4243563512&4294967295,B=b+(L<<9&4294967295|L>>>23),L=M+(b^N&(B^b))+R[7]+1735328473&4294967295,M=B+(L<<14&4294967295|L>>>18),L=N+(B^b&(M^B))+R[12]+2368359562&4294967295,N=M+(L<<20&4294967295|L>>>12),L=b+(N^M^B)+R[5]+4294588738&4294967295,b=N+(L<<4&4294967295|L>>>28),L=B+(b^N^M)+R[8]+2272392833&4294967295,B=b+(L<<11&4294967295|L>>>21),L=M+(B^b^N)+R[11]+1839030562&4294967295,M=B+(L<<16&4294967295|L>>>16),L=N+(M^B^b)+R[14]+4259657740&4294967295,N=M+(L<<23&4294967295|L>>>9),L=b+(N^M^B)+R[1]+2763975236&4294967295,b=N+(L<<4&4294967295|L>>>28),L=B+(b^N^M)+R[4]+1272893353&4294967295,B=b+(L<<11&4294967295|L>>>21),L=M+(B^b^N)+R[7]+4139469664&4294967295,M=B+(L<<16&4294967295|L>>>16),L=N+(M^B^b)+R[10]+3200236656&4294967295,N=M+(L<<23&4294967295|L>>>9),L=b+(N^M^B)+R[13]+681279174&4294967295,b=N+(L<<4&4294967295|L>>>28),L=B+(b^N^M)+R[0]+3936430074&4294967295,B=b+(L<<11&4294967295|L>>>21),L=M+(B^b^N)+R[3]+3572445317&4294967295,M=B+(L<<16&4294967295|L>>>16),L=N+(M^B^b)+R[6]+76029189&4294967295,N=M+(L<<23&4294967295|L>>>9),L=b+(N^M^B)+R[9]+3654602809&4294967295,b=N+(L<<4&4294967295|L>>>28),L=B+(b^N^M)+R[12]+3873151461&4294967295,B=b+(L<<11&4294967295|L>>>21),L=M+(B^b^N)+R[15]+530742520&4294967295,M=B+(L<<16&4294967295|L>>>16),L=N+(M^B^b)+R[2]+3299628645&4294967295,N=M+(L<<23&4294967295|L>>>9),L=b+(M^(N|~B))+R[0]+4096336452&4294967295,b=N+(L<<6&4294967295|L>>>26),L=B+(N^(b|~M))+R[7]+1126891415&4294967295,B=b+(L<<10&4294967295|L>>>22),L=M+(b^(B|~N))+R[14]+2878612391&4294967295,M=B+(L<<15&4294967295|L>>>17),L=N+(B^(M|~b))+R[5]+4237533241&4294967295,N=M+(L<<21&4294967295|L>>>11),L=b+(M^(N|~B))+R[12]+1700485571&4294967295,b=N+(L<<6&4294967295|L>>>26),L=B+(N^(b|~M))+R[3]+2399980690&4294967295,B=b+(L<<10&4294967295|L>>>22),L=M+(b^(B|~N))+R[10]+4293915773&4294967295,M=B+(L<<15&4294967295|L>>>17),L=N+(B^(M|~b))+R[1]+2240044497&4294967295,N=M+(L<<21&4294967295|L>>>11),L=b+(M^(N|~B))+R[8]+1873313359&4294967295,b=N+(L<<6&4294967295|L>>>26),L=B+(N^(b|~M))+R[15]+4264355552&4294967295,B=b+(L<<10&4294967295|L>>>22),L=M+(b^(B|~N))+R[6]+2734768916&4294967295,M=B+(L<<15&4294967295|L>>>17),L=N+(B^(M|~b))+R[13]+1309151649&4294967295,N=M+(L<<21&4294967295|L>>>11),L=b+(M^(N|~B))+R[4]+4149444226&4294967295,b=N+(L<<6&4294967295|L>>>26),L=B+(N^(b|~M))+R[11]+3174756917&4294967295,B=b+(L<<10&4294967295|L>>>22),L=M+(b^(B|~N))+R[2]+718787259&4294967295,M=B+(L<<15&4294967295|L>>>17),L=N+(B^(M|~b))+R[9]+3951481745&4294967295,I.g[0]=I.g[0]+b&4294967295,I.g[1]=I.g[1]+(M+(L<<21&4294967295|L>>>11))&4294967295,I.g[2]=I.g[2]+M&4294967295,I.g[3]=I.g[3]+B&4294967295}r.prototype.v=function(I,b){b===void 0&&(b=I.length);const N=b-this.blockSize,R=this.C;let M=this.h,B=0;for(;B<b;){if(M==0)for(;B<=N;)i(this,I,B),B+=this.blockSize;if(typeof I=="string"){for(;B<b;)if(R[M++]=I.charCodeAt(B++),M==this.blockSize){i(this,R),M=0;break}}else for(;B<b;)if(R[M++]=I[B++],M==this.blockSize){i(this,R),M=0;break}}this.h=M,this.o+=b},r.prototype.A=function(){var I=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);I[0]=128;for(var b=1;b<I.length-8;++b)I[b]=0;b=this.o*8;for(var N=I.length-8;N<I.length;++N)I[N]=b&255,b/=256;for(this.v(I),I=Array(16),b=0,N=0;N<4;++N)for(let R=0;R<32;R+=8)I[b++]=this.g[N]>>>R&255;return I};function a(I,b){var N=c;return Object.prototype.hasOwnProperty.call(N,I)?N[I]:N[I]=b(I)}function o(I,b){this.h=b;const N=[];let R=!0;for(let M=I.length-1;M>=0;M--){const B=I[M]|0;R&&B==b||(N[M]=B,R=!1)}this.g=N}var c={};function u(I){return-128<=I&&I<128?a(I,function(b){return new o([b|0],b<0?-1:0)}):new o([I|0],I<0?-1:0)}function h(I){if(isNaN(I)||!isFinite(I))return g;if(I<0)return D(h(-I));const b=[];let N=1;for(let R=0;I>=N;R++)b[R]=I/N|0,N*=4294967296;return new o(b,0)}function p(I,b){if(I.length==0)throw Error("number format error: empty string");if(b=b||10,b<2||36<b)throw Error("radix out of range: "+b);if(I.charAt(0)=="-")return D(p(I.substring(1),b));if(I.indexOf("-")>=0)throw Error('number format error: interior "-" character');const N=h(Math.pow(b,8));let R=g;for(let B=0;B<I.length;B+=8){var M=Math.min(8,I.length-B);const L=parseInt(I.substring(B,B+M),b);M<8?(M=h(Math.pow(b,M)),R=R.j(M).add(h(L))):(R=R.j(N),R=R.add(h(L)))}return R}var g=u(0),_=u(1),w=u(16777216);n=o.prototype,n.m=function(){if(S(this))return-D(this).m();let I=0,b=1;for(let N=0;N<this.g.length;N++){const R=this.i(N);I+=(R>=0?R:4294967296+R)*b,b*=4294967296}return I},n.toString=function(I){if(I=I||10,I<2||36<I)throw Error("radix out of range: "+I);if(A(this))return"0";if(S(this))return"-"+D(this).toString(I);const b=h(Math.pow(I,6));var N=this;let R="";for(;;){const M=H(N,b).g;N=C(N,M.j(b));let B=((N.g.length>0?N.g[0]:N.h)>>>0).toString(I);if(N=M,A(N))return B+R;for(;B.length<6;)B="0"+B;R=B+R}},n.i=function(I){return I<0?0:I<this.g.length?this.g[I]:this.h};function A(I){if(I.h!=0)return!1;for(let b=0;b<I.g.length;b++)if(I.g[b]!=0)return!1;return!0}function S(I){return I.h==-1}n.l=function(I){return I=C(this,I),S(I)?-1:A(I)?0:1};function D(I){const b=I.g.length,N=[];for(let R=0;R<b;R++)N[R]=~I.g[R];return new o(N,~I.h).add(_)}n.abs=function(){return S(this)?D(this):this},n.add=function(I){const b=Math.max(this.g.length,I.g.length),N=[];let R=0;for(let M=0;M<=b;M++){let B=R+(this.i(M)&65535)+(I.i(M)&65535),L=(B>>>16)+(this.i(M)>>>16)+(I.i(M)>>>16);R=L>>>16,B&=65535,L&=65535,N[M]=L<<16|B}return new o(N,N[N.length-1]&-2147483648?-1:0)};function C(I,b){return I.add(D(b))}n.j=function(I){if(A(this)||A(I))return g;if(S(this))return S(I)?D(this).j(D(I)):D(D(this).j(I));if(S(I))return D(this.j(D(I)));if(this.l(w)<0&&I.l(w)<0)return h(this.m()*I.m());const b=this.g.length+I.g.length,N=[];for(var R=0;R<2*b;R++)N[R]=0;for(R=0;R<this.g.length;R++)for(let M=0;M<I.g.length;M++){const B=this.i(R)>>>16,L=this.i(R)&65535,ie=I.i(M)>>>16,ge=I.i(M)&65535;N[2*R+2*M]+=L*ge,P(N,2*R+2*M),N[2*R+2*M+1]+=B*ge,P(N,2*R+2*M+1),N[2*R+2*M+1]+=L*ie,P(N,2*R+2*M+1),N[2*R+2*M+2]+=B*ie,P(N,2*R+2*M+2)}for(I=0;I<b;I++)N[I]=N[2*I+1]<<16|N[2*I];for(I=b;I<2*b;I++)N[I]=0;return new o(N,0)};function P(I,b){for(;(I[b]&65535)!=I[b];)I[b+1]+=I[b]>>>16,I[b]&=65535,b++}function V(I,b){this.g=I,this.h=b}function H(I,b){if(A(b))throw Error("division by zero");if(A(I))return new V(g,g);if(S(I))return b=H(D(I),b),new V(D(b.g),D(b.h));if(S(b))return b=H(I,D(b)),new V(D(b.g),b.h);if(I.g.length>30){if(S(I)||S(b))throw Error("slowDivide_ only works with positive integers.");for(var N=_,R=b;R.l(I)<=0;)N=X(N),R=X(R);var M=F(N,1),B=F(R,1);for(R=F(R,2),N=F(N,2);!A(R);){var L=B.add(R);L.l(I)<=0&&(M=M.add(N),B=L),R=F(R,1),N=F(N,1)}return b=C(I,M.j(b)),new V(M,b)}for(M=g;I.l(b)>=0;){for(N=Math.max(1,Math.floor(I.m()/b.m())),R=Math.ceil(Math.log(N)/Math.LN2),R=R<=48?1:Math.pow(2,R-48),B=h(N),L=B.j(b);S(L)||L.l(I)>0;)N-=R,B=h(N),L=B.j(b);A(B)&&(B=_),M=M.add(B),I=C(I,L)}return new V(M,I)}n.B=function(I){return H(this,I).h},n.and=function(I){const b=Math.max(this.g.length,I.g.length),N=[];for(let R=0;R<b;R++)N[R]=this.i(R)&I.i(R);return new o(N,this.h&I.h)},n.or=function(I){const b=Math.max(this.g.length,I.g.length),N=[];for(let R=0;R<b;R++)N[R]=this.i(R)|I.i(R);return new o(N,this.h|I.h)},n.xor=function(I){const b=Math.max(this.g.length,I.g.length),N=[];for(let R=0;R<b;R++)N[R]=this.i(R)^I.i(R);return new o(N,this.h^I.h)};function X(I){const b=I.g.length+1,N=[];for(let R=0;R<b;R++)N[R]=I.i(R)<<1|I.i(R-1)>>>31;return new o(N,I.h)}function F(I,b){const N=b>>5;b%=32;const R=I.g.length-N,M=[];for(let B=0;B<R;B++)M[B]=b>0?I.i(B+N)>>>b|I.i(B+N+1)<<32-b:I.i(B+N);return new o(M,I.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,gC=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=h,o.fromString=p,$s=o}).apply(typeof vE<"u"?vE:typeof self<"u"?self:typeof window<"u"?window:{});var Ad=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var vC,Zu,yC,Hd,kg,_C,xC,wC;(function(){var n,e=Object.defineProperty;function t(v){v=[typeof globalThis=="object"&&globalThis,v,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ad=="object"&&Ad];for(var E=0;E<v.length;++E){var O=v[E];if(O&&O.Math==Math)return O}throw Error("Cannot find global object")}var r=t(this);function i(v,E){if(E)e:{var O=r;v=v.split(".");for(var U=0;U<v.length-1;U++){var Q=v[U];if(!(Q in O))break e;O=O[Q]}v=v[v.length-1],U=O[v],E=E(U),E!=U&&E!=null&&e(O,v,{configurable:!0,writable:!0,value:E})}}i("Symbol.dispose",function(v){return v||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(v){return v||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(v){return v||function(E){var O=[],U;for(U in E)Object.prototype.hasOwnProperty.call(E,U)&&O.push([U,E[U]]);return O}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},o=this||self;function c(v){var E=typeof v;return E=="object"&&v!=null||E=="function"}function u(v,E,O){return v.call.apply(v.bind,arguments)}function h(v,E,O){return h=u,h.apply(null,arguments)}function p(v,E){var O=Array.prototype.slice.call(arguments,1);return function(){var U=O.slice();return U.push.apply(U,arguments),v.apply(this,U)}}function g(v,E){function O(){}O.prototype=E.prototype,v.Z=E.prototype,v.prototype=new O,v.prototype.constructor=v,v.Ob=function(U,Q,ne){for(var _e=Array(arguments.length-2),$e=2;$e<arguments.length;$e++)_e[$e-2]=arguments[$e];return E.prototype[Q].apply(U,_e)}}var _=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?v=>v&&AsyncContext.Snapshot.wrap(v):v=>v;function w(v){const E=v.length;if(E>0){const O=Array(E);for(let U=0;U<E;U++)O[U]=v[U];return O}return[]}function A(v,E){for(let U=1;U<arguments.length;U++){const Q=arguments[U];var O=typeof Q;if(O=O!="object"?O:Q?Array.isArray(Q)?"array":O:"null",O=="array"||O=="object"&&typeof Q.length=="number"){O=v.length||0;const ne=Q.length||0;v.length=O+ne;for(let _e=0;_e<ne;_e++)v[O+_e]=Q[_e]}else v.push(Q)}}class S{constructor(E,O){this.i=E,this.j=O,this.h=0,this.g=null}get(){let E;return this.h>0?(this.h--,E=this.g,this.g=E.next,E.next=null):E=this.i(),E}}function D(v){o.setTimeout(()=>{throw v},0)}function C(){var v=I;let E=null;return v.g&&(E=v.g,v.g=v.g.next,v.g||(v.h=null),E.next=null),E}class P{constructor(){this.h=this.g=null}add(E,O){const U=V.get();U.set(E,O),this.h?this.h.next=U:this.g=U,this.h=U}}var V=new S(()=>new H,v=>v.reset());class H{constructor(){this.next=this.g=this.h=null}set(E,O){this.h=E,this.g=O,this.next=null}reset(){this.next=this.g=this.h=null}}let X,F=!1,I=new P,b=()=>{const v=Promise.resolve(void 0);X=()=>{v.then(N)}};function N(){for(var v;v=C();){try{v.h.call(v.g)}catch(O){D(O)}var E=V;E.j(v),E.h<100&&(E.h++,v.next=E.g,E.g=v)}F=!1}function R(){this.u=this.u,this.C=this.C}R.prototype.u=!1,R.prototype.dispose=function(){this.u||(this.u=!0,this.N())},R.prototype[Symbol.dispose]=function(){this.dispose()},R.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function M(v,E){this.type=v,this.g=this.target=E,this.defaultPrevented=!1}M.prototype.h=function(){this.defaultPrevented=!0};var B=(function(){if(!o.addEventListener||!Object.defineProperty)return!1;var v=!1,E=Object.defineProperty({},"passive",{get:function(){v=!0}});try{const O=()=>{};o.addEventListener("test",O,E),o.removeEventListener("test",O,E)}catch{}return v})();function L(v){return/^[\s\xa0]*$/.test(v)}function ie(v,E){M.call(this,v?v.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,v&&this.init(v,E)}g(ie,M),ie.prototype.init=function(v,E){const O=this.type=v.type,U=v.changedTouches&&v.changedTouches.length?v.changedTouches[0]:null;this.target=v.target||v.srcElement,this.g=E,E=v.relatedTarget,E||(O=="mouseover"?E=v.fromElement:O=="mouseout"&&(E=v.toElement)),this.relatedTarget=E,U?(this.clientX=U.clientX!==void 0?U.clientX:U.pageX,this.clientY=U.clientY!==void 0?U.clientY:U.pageY,this.screenX=U.screenX||0,this.screenY=U.screenY||0):(this.clientX=v.clientX!==void 0?v.clientX:v.pageX,this.clientY=v.clientY!==void 0?v.clientY:v.pageY,this.screenX=v.screenX||0,this.screenY=v.screenY||0),this.button=v.button,this.key=v.key||"",this.ctrlKey=v.ctrlKey,this.altKey=v.altKey,this.shiftKey=v.shiftKey,this.metaKey=v.metaKey,this.pointerId=v.pointerId||0,this.pointerType=v.pointerType,this.state=v.state,this.i=v,v.defaultPrevented&&ie.Z.h.call(this)},ie.prototype.h=function(){ie.Z.h.call(this);const v=this.i;v.preventDefault?v.preventDefault():v.returnValue=!1};var ge="closure_listenable_"+(Math.random()*1e6|0),K=0;function G(v,E,O,U,Q){this.listener=v,this.proxy=null,this.src=E,this.type=O,this.capture=!!U,this.ha=Q,this.key=++K,this.da=this.fa=!1}function le(v){v.da=!0,v.listener=null,v.proxy=null,v.src=null,v.ha=null}function we(v,E,O){for(const U in v)E.call(O,v[U],U,v)}function Ae(v,E){for(const O in v)E.call(void 0,v[O],O,v)}function $(v){const E={};for(const O in v)E[O]=v[O];return E}const oe="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function pe(v,E){let O,U;for(let Q=1;Q<arguments.length;Q++){U=arguments[Q];for(O in U)v[O]=U[O];for(let ne=0;ne<oe.length;ne++)O=oe[ne],Object.prototype.hasOwnProperty.call(U,O)&&(v[O]=U[O])}}function ve(v){this.src=v,this.g={},this.h=0}ve.prototype.add=function(v,E,O,U,Q){const ne=v.toString();v=this.g[ne],v||(v=this.g[ne]=[],this.h++);const _e=Re(v,E,U,Q);return _e>-1?(E=v[_e],O||(E.fa=!1)):(E=new G(E,this.src,ne,!!U,Q),E.fa=O,v.push(E)),E};function Ne(v,E){const O=E.type;if(O in v.g){var U=v.g[O],Q=Array.prototype.indexOf.call(U,E,void 0),ne;(ne=Q>=0)&&Array.prototype.splice.call(U,Q,1),ne&&(le(E),v.g[O].length==0&&(delete v.g[O],v.h--))}}function Re(v,E,O,U){for(let Q=0;Q<v.length;++Q){const ne=v[Q];if(!ne.da&&ne.listener==E&&ne.capture==!!O&&ne.ha==U)return Q}return-1}var Ee="closure_lm_"+(Math.random()*1e6|0),Qe={};function Ze(v,E,O,U,Q){if(Array.isArray(E)){for(let ne=0;ne<E.length;ne++)Ze(v,E[ne],O,U,Q);return null}return O=St(O),v&&v[ge]?v.J(E,O,c(U)?!!U.capture:!1,Q):Pn(v,E,O,!1,U,Q)}function Pn(v,E,O,U,Q,ne){if(!E)throw Error("Invalid event type");const _e=c(Q)?!!Q.capture:!!Q;let $e=Et(v);if($e||(v[Ee]=$e=new ve(v)),O=$e.add(E,O,U,_e,ne),O.proxy)return O;if(U=me(),O.proxy=U,U.src=v,U.listener=O,v.addEventListener)B||(Q=_e),Q===void 0&&(Q=!1),v.addEventListener(E.toString(),U,Q);else if(v.attachEvent)v.attachEvent(qe(E.toString()),U);else if(v.addListener&&v.removeListener)v.addListener(U);else throw Error("addEventListener and attachEvent are unavailable.");return O}function me(){function v(O){return E.call(v.src,v.listener,O)}const E=bt;return v}function Ve(v,E,O,U,Q){if(Array.isArray(E))for(var ne=0;ne<E.length;ne++)Ve(v,E[ne],O,U,Q);else U=c(U)?!!U.capture:!!U,O=St(O),v&&v[ge]?(v=v.i,ne=String(E).toString(),ne in v.g&&(E=v.g[ne],O=Re(E,O,U,Q),O>-1&&(le(E[O]),Array.prototype.splice.call(E,O,1),E.length==0&&(delete v.g[ne],v.h--)))):v&&(v=Et(v))&&(E=v.g[E.toString()],v=-1,E&&(v=Re(E,O,U,Q)),(O=v>-1?E[v]:null)&&Ye(O))}function Ye(v){if(typeof v!="number"&&v&&!v.da){var E=v.src;if(E&&E[ge])Ne(E.i,v);else{var O=v.type,U=v.proxy;E.removeEventListener?E.removeEventListener(O,U,v.capture):E.detachEvent?E.detachEvent(qe(O),U):E.addListener&&E.removeListener&&E.removeListener(U),(O=Et(E))?(Ne(O,v),O.h==0&&(O.src=null,E[Ee]=null)):le(v)}}}function qe(v){return v in Qe?Qe[v]:Qe[v]="on"+v}function bt(v,E){if(v.da)v=!0;else{E=new ie(E,this);const O=v.listener,U=v.ha||v.src;v.fa&&Ye(v),v=O.call(U,E)}return v}function Et(v){return v=v[Ee],v instanceof ve?v:null}var Xn="__closure_events_fn_"+(Math.random()*1e9>>>0);function St(v){return typeof v=="function"?v:(v[Xn]||(v[Xn]=function(E){return v.handleEvent(E)}),v[Xn])}function Fe(){R.call(this),this.i=new ve(this),this.M=this,this.G=null}g(Fe,R),Fe.prototype[ge]=!0,Fe.prototype.removeEventListener=function(v,E,O,U){Ve(this,v,E,O,U)};function vt(v,E){var O,U=v.G;if(U)for(O=[];U;U=U.G)O.push(U);if(v=v.M,U=E.type||E,typeof E=="string")E=new M(E,v);else if(E instanceof M)E.target=E.target||v;else{var Q=E;E=new M(U,v),pe(E,Q)}Q=!0;let ne,_e;if(O)for(_e=O.length-1;_e>=0;_e--)ne=E.g=O[_e],Q=Sn(ne,U,!0,E)&&Q;if(ne=E.g=v,Q=Sn(ne,U,!0,E)&&Q,Q=Sn(ne,U,!1,E)&&Q,O)for(_e=0;_e<O.length;_e++)ne=E.g=O[_e],Q=Sn(ne,U,!1,E)&&Q}Fe.prototype.N=function(){if(Fe.Z.N.call(this),this.i){var v=this.i;for(const E in v.g){const O=v.g[E];for(let U=0;U<O.length;U++)le(O[U]);delete v.g[E],v.h--}}this.G=null},Fe.prototype.J=function(v,E,O,U){return this.i.add(String(v),E,!1,O,U)},Fe.prototype.K=function(v,E,O,U){return this.i.add(String(v),E,!0,O,U)};function Sn(v,E,O,U){if(E=v.i.g[String(E)],!E)return!0;E=E.concat();let Q=!0;for(let ne=0;ne<E.length;++ne){const _e=E[ne];if(_e&&!_e.da&&_e.capture==O){const $e=_e.listener,sn=_e.ha||_e.src;_e.fa&&Ne(v.i,_e),Q=$e.call(sn,U)!==!1&&Q}}return Q&&!U.defaultPrevented}function fo(v,E){if(typeof v!="function")if(v&&typeof v.handleEvent=="function")v=h(v.handleEvent,v);else throw Error("Invalid listener argument");return Number(E)>2147483647?-1:o.setTimeout(v,E||0)}function Fi(v){v.g=fo(()=>{v.g=null,v.i&&(v.i=!1,Fi(v))},v.l);const E=v.h;v.h=null,v.m.apply(null,E)}class ae extends R{constructor(E,O){super(),this.m=E,this.l=O,this.h=null,this.i=!1,this.g=null}j(E){this.h=arguments,this.g?this.i=!0:Fi(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function be(v){R.call(this),this.h=v,this.g={}}g(be,R);var Ke=[];function Wt(v){we(v.g,function(E,O){this.g.hasOwnProperty(O)&&Ye(E)},v),v.g={}}be.prototype.N=function(){be.Z.N.call(this),Wt(this)},be.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var kn=o.JSON.stringify,Gr=o.JSON.parse,qr=class{stringify(v){return o.JSON.stringify(v,void 0)}parse(v){return o.JSON.parse(v,void 0)}};function Ea(){}function Ge(){}var ht={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function ze(){M.call(this,"d")}g(ze,M);function Ln(){M.call(this,"c")}g(Ln,M);var an={},Wf=null;function ul(){return Wf=Wf||new Fe}an.Ia="serverreachability";function Qf(v){M.call(this,an.Ia,v)}g(Qf,M);function Ui(v){const E=ul();vt(E,new Qf(E))}an.STAT_EVENT="statevent";function ho(v,E){M.call(this,an.STAT_EVENT,v),this.stat=E}g(ho,M);function hn(v){const E=ul();vt(E,new ho(E,v))}an.Ja="timingevent";function zi(v,E){M.call(this,an.Ja,v),this.size=E}g(zi,M);function Hi(v,E){if(typeof v!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){v()},E)}function di(){this.g=!0}di.prototype.ua=function(){this.g=!1};function Ep(v,E,O,U,Q,ne){v.info(function(){if(v.g)if(ne){var _e="",$e=ne.split("&");for(let yt=0;yt<$e.length;yt++){var sn=$e[yt].split("=");if(sn.length>1){const $t=sn[0];sn=sn[1];const Kr=$t.split("_");_e=Kr.length>=2&&Kr[1]=="type"?_e+($t+"="+sn+"&"):_e+($t+"=redacted&")}}}else _e=null;else _e=ne;return"XMLHTTP REQ ("+U+") [attempt "+Q+"]: "+E+`
`+O+`
`+_e})}function Zf(v,E,O,U,Q,ne,_e){v.info(function(){return"XMLHTTP RESP ("+U+") [ attempt "+Q+"]: "+E+`
`+O+`
`+ne+" "+_e})}function Gi(v,E,O,U){v.info(function(){return"XMLHTTP TEXT ("+E+"): "+Ap(v,O)+(U?" "+U:"")})}function po(v,E){v.info(function(){return"TIMEOUT: "+E})}di.prototype.info=function(){};function Ap(v,E){if(!v.g)return E;if(!E)return null;try{const ne=JSON.parse(E);if(ne){for(v=0;v<ne.length;v++)if(Array.isArray(ne[v])){var O=ne[v];if(!(O.length<2)){var U=O[1];if(Array.isArray(U)&&!(U.length<1)){var Q=U[0];if(Q!="noop"&&Q!="stop"&&Q!="close")for(let _e=1;_e<U.length;_e++)U[_e]=""}}}}return kn(ne)}catch{return E}}var mo={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Gc={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},qc;function go(){}g(go,Ea),go.prototype.g=function(){return new XMLHttpRequest},qc=new go;function Aa(v){return encodeURIComponent(String(v))}function Jf(v){var E=1;v=v.split(":");const O=[];for(;E>0&&v.length;)O.push(v.shift()),E--;return v.length&&O.push(v.join(":")),O}function pi(v,E,O,U){this.j=v,this.i=E,this.l=O,this.S=U||1,this.V=new be(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new mi}function mi(){this.i=null,this.g="",this.h=!1}var dn={},jn={};function qi(v,E,O){v.M=1,v.A=vo(mn(E)),v.u=O,v.R=!0,fl(v,null)}function fl(v,E){v.F=Date.now(),$i(v),v.B=mn(v.A);var O=v.B,U=v.S;Array.isArray(U)||(U=[String(U)]),ml(O.i,"t",U),v.C=0,O=v.j.L,v.h=new mi,v.g=ph(v.j,O?E:null,!v.u),v.P>0&&(v.O=new ae(h(v.Y,v,v.g),v.P)),E=v.V,O=v.g,U=v.ba;var Q="readystatechange";Array.isArray(Q)||(Q&&(Ke[0]=Q.toString()),Q=Ke);for(let ne=0;ne<Q.length;ne++){const _e=Ze(O,Q[ne],U||E.handleEvent,!1,E.h||E);if(!_e)break;E.g[_e.key]=_e}E=v.J?$(v.J):{},v.u?(v.v||(v.v="POST"),E["Content-Type"]="application/x-www-form-urlencoded",v.g.ea(v.B,v.v,v.u,E)):(v.v="GET",v.g.ea(v.B,v.v,null,E)),Ui(),Ep(v.i,v.v,v.B,v.l,v.S,v.u)}pi.prototype.ba=function(v){v=v.target;const E=this.O;E&&yi(v)==3?E.j():this.Y(v)},pi.prototype.Y=function(v){try{if(v==this.g)e:{const $e=yi(this.g),sn=this.g.ya(),yt=this.g.ca();if(!($e<3)&&($e!=3||this.g&&(this.h.h||this.g.la()||Yn(this.g)))){this.K||$e!=4||sn==7||(sn==8||yt<=0?Ui(3):Ui(2)),Xi(this);var E=this.g.ca();this.X=E;var O=bp(this);if(this.o=E==200,Zf(this.i,this.v,this.B,this.l,this.S,$e,E),this.o){if(this.U&&!this.L){t:{if(this.g){var U,Q=this.g;if((U=Q.g?Q.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!L(U)){var ne=U;break t}}ne=null}if(v=ne)Gi(this.i,this.l,v,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Yi(this,v);else{this.o=!1,this.m=3,hn(12),Or(this),$r(this);break e}}if(this.R){v=!0;let $t;for(;!this.K&&this.C<O.length;)if($t=th(this,O),$t==jn){$e==4&&(this.m=4,hn(14),v=!1),Gi(this.i,this.l,null,"[Incomplete Response]");break}else if($t==dn){this.m=4,hn(15),Gi(this.i,this.l,O,"[Invalid Chunk]"),v=!1;break}else Gi(this.i,this.l,$t,null),Yi(this,$t);if(eh(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),$e!=4||O.length!=0||this.h.h||(this.m=1,hn(16),v=!1),this.o=this.o&&v,!v)Gi(this.i,this.l,O,"[Invalid Chunked Response]"),Or(this),$r(this);else if(O.length>0&&!this.W){this.W=!0;var _e=this.j;_e.g==this&&_e.aa&&!_e.P&&(_e.j.info("Great, no buffering proxy detected. Bytes received: "+O.length),su(_e),_e.P=!0,hn(11))}}else Gi(this.i,this.l,O,null),Yi(this,O);$e==4&&Or(this),this.o&&!this.K&&($e==4?uh(this.j,this):(this.o=!1,$i(this)))}else Sa(this.g),E==400&&O.indexOf("Unknown SID")>0?(this.m=3,hn(12)):(this.m=0,hn(13)),Or(this),$r(this)}}}catch{}finally{}};function bp(v){if(!eh(v))return v.g.la();const E=Yn(v.g);if(E==="")return"";let O="";const U=E.length,Q=yi(v.g)==4;if(!v.h.i){if(typeof TextDecoder>"u")return Or(v),$r(v),"";v.h.i=new o.TextDecoder}for(let ne=0;ne<U;ne++)v.h.h=!0,O+=v.h.i.decode(E[ne],{stream:!(Q&&ne==U-1)});return E.length=0,v.h.g+=O,v.C=0,v.h.g}function eh(v){return v.g?v.v=="GET"&&v.M!=2&&v.j.Aa:!1}function th(v,E){var O=v.C,U=E.indexOf(`
`,O);return U==-1?jn:(O=Number(E.substring(O,U)),isNaN(O)?dn:(U+=1,U+O>E.length?jn:(E=E.slice(U,U+O),v.C=U+O,E)))}pi.prototype.cancel=function(){this.K=!0,Or(this)};function $i(v){v.T=Date.now()+v.H,hl(v,v.H)}function hl(v,E){if(v.D!=null)throw Error("WatchDog timer not null");v.D=Hi(h(v.aa,v),E)}function Xi(v){v.D&&(o.clearTimeout(v.D),v.D=null)}pi.prototype.aa=function(){this.D=null;const v=Date.now();v-this.T>=0?(po(this.i,this.B),this.M!=2&&(Ui(),hn(17)),Or(this),this.m=2,$r(this)):hl(this,this.T-v)};function $r(v){v.j.I==0||v.K||uh(v.j,v)}function Or(v){Xi(v);var E=v.O;E&&typeof E.dispose=="function"&&E.dispose(),v.O=null,Wt(v.V),v.g&&(E=v.g,v.g=null,E.abort(),E.dispose())}function Yi(v,E){try{var O=v.j;if(O.I!=0&&(O.g==v||Wi(O.h,v))){if(!v.L&&Wi(O.h,v)&&O.I==3){try{var U=O.Ba.g.parse(E)}catch{U=null}if(Array.isArray(U)&&U.length==3){var Q=U;if(Q[0]==0){e:if(!O.v){if(O.g)if(O.g.F+3e3<v.F)xl(O),ls(O);else break e;bo(O),hn(18)}}else O.xa=Q[1],0<O.xa-O.K&&Q[2]<37500&&O.F&&O.A==0&&!O.C&&(O.C=Hi(h(O.Va,O),6e3));Ki(O.h)<=1&&O.ta&&(O.ta=void 0)}else na(O,11)}else if((v.L||O.g==v)&&xl(O),!L(E))for(Q=O.Ba.g.parse(E),E=0;E<Q.length;E++){let yt=Q[E];const $t=yt[0];if(!($t<=O.K))if(O.K=$t,yt=yt[1],O.I==2)if(yt[0]=="c"){O.M=yt[1],O.ba=yt[2];const Kr=yt[3];Kr!=null&&(O.ka=Kr,O.j.info("VER="+O.ka));const ra=yt[4];ra!=null&&(O.za=ra,O.j.info("SVER="+O.za));const _i=yt[5];_i!=null&&typeof _i=="number"&&_i>0&&(U=1.5*_i,O.O=U,O.j.info("backChannelRequestTimeoutMs_="+U)),U=O;const xi=v.g;if(xi){const So=xi.g?xi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(So){var ne=U.h;ne.g||So.indexOf("spdy")==-1&&So.indexOf("quic")==-1&&So.indexOf("h2")==-1||(ne.j=ne.l,ne.g=new Set,ne.h&&(Yc(ne,ne.h),ne.h=null))}if(U.G){const wl=xi.g?xi.g.getResponseHeader("X-HTTP-Session-Id"):null;wl&&(U.wa=wl,Ct(U.J,U.G,wl))}}O.I=3,O.l&&O.l.ra(),O.aa&&(O.T=Date.now()-v.F,O.j.info("Handshake RTT: "+O.T+"ms")),U=O;var _e=v;if(U.na=dh(U,U.L?U.ba:null,U.W),_e.L){Kc(U.h,_e);var $e=_e,sn=U.O;sn&&($e.H=sn),$e.D&&(Xi($e),$i($e)),U.g=_e}else lh(U);O.i.length>0&&ta(O)}else yt[0]!="stop"&&yt[0]!="close"||na(O,7);else O.I==3&&(yt[0]=="stop"||yt[0]=="close"?yt[0]=="stop"?na(O,7):iu(O):yt[0]!="noop"&&O.l&&O.l.qa(yt),O.A=0)}}Ui(4)}catch{}}var pn=class{constructor(v,E){this.g=v,this.map=E}};function $c(v){this.l=v||10,o.PerformanceNavigationTiming?(v=o.performance.getEntriesByType("navigation"),v=v.length>0&&(v[0].nextHopProtocol=="hq"||v[0].nextHopProtocol=="h2")):v=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=v?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Xc(v){return v.h?!0:v.g?v.g.size>=v.j:!1}function Ki(v){return v.h?1:v.g?v.g.size:0}function Wi(v,E){return v.h?v.h==E:v.g?v.g.has(E):!1}function Yc(v,E){v.g?v.g.add(E):v.h=E}function Kc(v,E){v.h&&v.h==E?v.h=null:v.g&&v.g.has(E)&&v.g.delete(E)}$c.prototype.cancel=function(){if(this.i=Wc(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const v of this.g.values())v.cancel();this.g.clear()}};function Wc(v){if(v.h!=null)return v.i.concat(v.h.G);if(v.g!=null&&v.g.size!==0){let E=v.i;for(const O of v.g.values())E=E.concat(O.G);return E}return w(v.i)}var nh=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function dl(v,E){if(v){v=v.split("&");for(let O=0;O<v.length;O++){const U=v[O].indexOf("=");let Q,ne=null;U>=0?(Q=v[O].substring(0,U),ne=v[O].substring(U+1)):Q=v[O],E(Q,ne?decodeURIComponent(ne.replace(/\+/g," ")):"")}}}function Dr(v){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let E;v instanceof Dr?(this.l=v.l,Bn(this,v.j),this.o=v.o,this.g=v.g,ts(this,v.u),this.h=v.h,Qc(this,sh(v.i)),this.m=v.m):v&&(E=String(v).match(nh))?(this.l=!1,Bn(this,E[1]||"",!0),this.o=Qi(E[2]||""),this.g=Qi(E[3]||"",!0),ts(this,E[4]),this.h=Qi(E[5]||"",!0),Qc(this,E[6]||"",!0),this.m=Qi(E[7]||"")):(this.l=!1,this.i=new rs(null,this.l))}Dr.prototype.toString=function(){const v=[];var E=this.j;E&&v.push(yo(E,pl,!0),":");var O=this.g;return(O||E=="file")&&(v.push("//"),(E=this.o)&&v.push(yo(E,pl,!0),"@"),v.push(Aa(O).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),O=this.u,O!=null&&v.push(":",String(O))),(O=this.h)&&(this.g&&O.charAt(0)!="/"&&v.push("/"),v.push(yo(O,O.charAt(0)=="/"?Zc:rh,!0))),(O=this.i.toString())&&v.push("?",O),(O=this.m)&&v.push("#",yo(O,ih)),v.join("")},Dr.prototype.resolve=function(v){const E=mn(this);let O=!!v.j;O?Bn(E,v.j):O=!!v.o,O?E.o=v.o:O=!!v.g,O?E.g=v.g:O=v.u!=null;var U=v.h;if(O)ts(E,v.u);else if(O=!!v.h){if(U.charAt(0)!="/")if(this.g&&!this.h)U="/"+U;else{var Q=E.h.lastIndexOf("/");Q!=-1&&(U=E.h.slice(0,Q+1)+U)}if(Q=U,Q==".."||Q==".")U="";else if(Q.indexOf("./")!=-1||Q.indexOf("/.")!=-1){U=Q.lastIndexOf("/",0)==0,Q=Q.split("/");const ne=[];for(let _e=0;_e<Q.length;){const $e=Q[_e++];$e=="."?U&&_e==Q.length&&ne.push(""):$e==".."?((ne.length>1||ne.length==1&&ne[0]!="")&&ne.pop(),U&&_e==Q.length&&ne.push("")):(ne.push($e),U=!0)}U=ne.join("/")}else U=Q}return O?E.h=U:O=v.i.toString()!=="",O?Qc(E,sh(v.i)):O=!!v.m,O&&(E.m=v.m),E};function mn(v){return new Dr(v)}function Bn(v,E,O){v.j=O?Qi(E,!0):E,v.j&&(v.j=v.j.replace(/:$/,""))}function ts(v,E){if(E){if(E=Number(E),isNaN(E)||E<0)throw Error("Bad port number "+E);v.u=E}else v.u=null}function Qc(v,E,O){E instanceof rs?(v.i=E,gl(v.i,v.l)):(O||(E=yo(E,ns)),v.i=new rs(E,v.l))}function Ct(v,E,O){v.i.set(E,O)}function vo(v){return Ct(v,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),v}function Qi(v,E){return v?E?decodeURI(v.replace(/%25/g,"%2525")):decodeURIComponent(v):""}function yo(v,E,O){return typeof v=="string"?(v=encodeURI(v).replace(E,yr),O&&(v=v.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v):null}function yr(v){return v=v.charCodeAt(0),"%"+(v>>4&15).toString(16)+(v&15).toString(16)}var pl=/[#\/\?@]/g,rh=/[#\?:]/g,Zc=/[#\?]/g,ns=/[#\?@]/g,ih=/#/g;function rs(v,E){this.h=this.g=null,this.i=v||null,this.j=!!E}function _r(v){v.g||(v.g=new Map,v.h=0,v.i&&dl(v.i,function(E,O){v.add(decodeURIComponent(E.replace(/\+/g," ")),O)}))}n=rs.prototype,n.add=function(v,E){_r(this),this.i=null,v=is(this,v);let O=this.g.get(v);return O||this.g.set(v,O=[]),O.push(E),this.h+=1,this};function ah(v,E){_r(v),E=is(v,E),v.g.has(E)&&(v.i=null,v.h-=v.g.get(E).length,v.g.delete(E))}function Jc(v,E){return _r(v),E=is(v,E),v.g.has(E)}n.forEach=function(v,E){_r(this),this.g.forEach(function(O,U){O.forEach(function(Q){v.call(E,Q,U,this)},this)},this)};function eu(v,E){_r(v);let O=[];if(typeof E=="string")Jc(v,E)&&(O=O.concat(v.g.get(is(v,E))));else for(v=Array.from(v.g.values()),E=0;E<v.length;E++)O=O.concat(v[E]);return O}n.set=function(v,E){return _r(this),this.i=null,v=is(this,v),Jc(this,v)&&(this.h-=this.g.get(v).length),this.g.set(v,[E]),this.h+=1,this},n.get=function(v,E){return v?(v=eu(this,v),v.length>0?String(v[0]):E):E};function ml(v,E,O){ah(v,E),O.length>0&&(v.i=null,v.g.set(is(v,E),w(O)),v.h+=O.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const v=[],E=Array.from(this.g.keys());for(let U=0;U<E.length;U++){var O=E[U];const Q=Aa(O);O=eu(this,O);for(let ne=0;ne<O.length;ne++){let _e=Q;O[ne]!==""&&(_e+="="+Aa(O[ne])),v.push(_e)}}return this.i=v.join("&")};function sh(v){const E=new rs;return E.i=v.i,v.g&&(E.g=new Map(v.g),E.h=v.h),E}function is(v,E){return E=String(E),v.j&&(E=E.toLowerCase()),E}function gl(v,E){E&&!v.j&&(_r(v),v.i=null,v.g.forEach(function(O,U){const Q=U.toLowerCase();U!=Q&&(ah(this,U),ml(this,Q,O))},v)),v.j=E}function gi(v,E){const O=new di;if(o.Image){const U=new Image;U.onload=p(Xr,O,"TestLoadImage: loaded",!0,E,U),U.onerror=p(Xr,O,"TestLoadImage: error",!1,E,U),U.onabort=p(Xr,O,"TestLoadImage: abort",!1,E,U),U.ontimeout=p(Xr,O,"TestLoadImage: timeout",!1,E,U),o.setTimeout(function(){U.ontimeout&&U.ontimeout()},1e4),U.src=v}else E(!1)}function tu(v,E){const O=new di,U=new AbortController,Q=setTimeout(()=>{U.abort(),Xr(O,"TestPingServer: timeout",!1,E)},1e4);fetch(v,{signal:U.signal}).then(ne=>{clearTimeout(Q),ne.ok?Xr(O,"TestPingServer: ok",!0,E):Xr(O,"TestPingServer: server error",!1,E)}).catch(()=>{clearTimeout(Q),Xr(O,"TestPingServer: error",!1,E)})}function Xr(v,E,O,U,Q){try{Q&&(Q.onload=null,Q.onerror=null,Q.onabort=null,Q.ontimeout=null),U(O)}catch{}}function as(){this.g=new qr}function Zi(v){this.i=v.Sb||null,this.h=v.ab||!1}g(Zi,Ea),Zi.prototype.g=function(){return new _o(this.i,this.h)};function _o(v,E){Fe.call(this),this.H=v,this.o=E,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}g(_o,Fe),n=_o.prototype,n.open=function(v,E){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=v,this.D=E,this.readyState=1,vi(this)},n.send=function(v){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const E={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};v&&(E.body=v),(this.H||o).fetch(new Request(this.D,E)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,ss(this)),this.readyState=0},n.Pa=function(v){if(this.g&&(this.l=v,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=v.headers,this.readyState=2,vi(this)),this.g&&(this.readyState=3,vi(this),this.g)))if(this.responseType==="arraybuffer")v.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in v){if(this.j=v.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;vl(this)}else v.text().then(this.Oa.bind(this),this.ga.bind(this))};function vl(v){v.j.read().then(v.Ma.bind(v)).catch(v.ga.bind(v))}n.Ma=function(v){if(this.g){if(this.o&&v.value)this.response.push(v.value);else if(!this.o){var E=v.value?v.value:new Uint8Array(0);(E=this.B.decode(E,{stream:!v.done}))&&(this.response=this.responseText+=E)}v.done?ss(this):vi(this),this.readyState==3&&vl(this)}},n.Oa=function(v){this.g&&(this.response=this.responseText=v,ss(this))},n.Na=function(v){this.g&&(this.response=v,ss(this))},n.ga=function(){this.g&&ss(this)};function ss(v){v.readyState=4,v.l=null,v.j=null,v.B=null,vi(v)}n.setRequestHeader=function(v,E){this.A.append(v,E)},n.getResponseHeader=function(v){return this.h&&this.h.get(v.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const v=[],E=this.h.entries();for(var O=E.next();!O.done;)O=O.value,v.push(O[0]+": "+O[1]),O=E.next();return v.join(`\r
`)};function vi(v){v.onreadystatechange&&v.onreadystatechange.call(v)}Object.defineProperty(_o.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(v){this.m=v?"include":"same-origin"}});function Yr(v){let E="";return we(v,function(O,U){E+=U,E+=":",E+=O,E+=`\r
`}),E}function xo(v,E,O){e:{for(U in O){var U=!1;break e}U=!0}U||(O=Yr(O),typeof v=="string"?O!=null&&Aa(O):Ct(v,E,O))}function Dt(v){Fe.call(this),this.headers=new Map,this.L=v||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}g(Dt,Fe);var Ji=/^https?$/i,nu=["POST","PUT"];n=Dt.prototype,n.Fa=function(v){this.H=v},n.ea=function(v,E,O,U){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+v);E=E?E.toUpperCase():"GET",this.D=v,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():qc.g(),this.g.onreadystatechange=_(h(this.Ca,this));try{this.B=!0,this.g.open(E,String(v),!0),this.B=!1}catch(ne){wo(this,ne);return}if(v=O||"",O=new Map(this.headers),U)if(Object.getPrototypeOf(U)===Object.prototype)for(var Q in U)O.set(Q,U[Q]);else if(typeof U.keys=="function"&&typeof U.get=="function")for(const ne of U.keys())O.set(ne,U.get(ne));else throw Error("Unknown input type for opt_headers: "+String(U));U=Array.from(O.keys()).find(ne=>ne.toLowerCase()=="content-type"),Q=o.FormData&&v instanceof o.FormData,!(Array.prototype.indexOf.call(nu,E,void 0)>=0)||U||Q||O.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ne,_e]of O)this.g.setRequestHeader(ne,_e);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(v),this.v=!1}catch(ne){wo(this,ne)}};function wo(v,E){v.h=!1,v.g&&(v.j=!0,v.g.abort(),v.j=!1),v.l=E,v.o=5,ru(v),ba(v)}function ru(v){v.A||(v.A=!0,vt(v,"complete"),vt(v,"error"))}n.abort=function(v){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=v||7,vt(this,"complete"),vt(this,"abort"),ba(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ba(this,!0)),Dt.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?Eo(this):this.Xa())},n.Xa=function(){Eo(this)};function Eo(v){if(v.h&&typeof a<"u"){if(v.v&&yi(v)==4)setTimeout(v.Ca.bind(v),0);else if(vt(v,"readystatechange"),yi(v)==4){v.h=!1;try{const ne=v.ca();e:switch(ne){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var E=!0;break e;default:E=!1}var O;if(!(O=E)){var U;if(U=ne===0){let _e=String(v.D).match(nh)[1]||null;!_e&&o.self&&o.self.location&&(_e=o.self.location.protocol.slice(0,-1)),U=!Ji.test(_e?_e.toLowerCase():"")}O=U}if(O)vt(v,"complete"),vt(v,"success");else{v.o=6;try{var Q=yi(v)>2?v.g.statusText:""}catch{Q=""}v.l=Q+" ["+v.ca()+"]",ru(v)}}finally{ba(v)}}}}function ba(v,E){if(v.g){v.m&&(clearTimeout(v.m),v.m=null);const O=v.g;v.g=null,E||vt(v,"ready");try{O.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function yi(v){return v.g?v.g.readyState:0}n.ca=function(){try{return yi(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(v){if(this.g){var E=this.g.responseText;return v&&E.indexOf(v)==0&&(E=E.substring(v.length)),Gr(E)}};function Yn(v){try{if(!v.g)return null;if("response"in v.g)return v.g.response;switch(v.F){case"":case"text":return v.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in v.g)return v.g.mozResponseArrayBuffer}return null}catch{return null}}function Sa(v){const E={};v=(v.g&&yi(v)>=2&&v.g.getAllResponseHeaders()||"").split(`\r
`);for(let U=0;U<v.length;U++){if(L(v[U]))continue;var O=Jf(v[U]);const Q=O[0];if(O=O[1],typeof O!="string")continue;O=O.trim();const ne=E[Q]||[];E[Q]=ne,ne.push(O)}Ae(E,function(U){return U.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function ea(v,E,O){return O&&O.internalChannelParams&&O.internalChannelParams[v]||E}function os(v){this.za=0,this.i=[],this.j=new di,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=ea("failFast",!1,v),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=ea("baseRetryDelayMs",5e3,v),this.Za=ea("retryDelaySeedMs",1e4,v),this.Ta=ea("forwardChannelMaxRetries",2,v),this.va=ea("forwardChannelRequestTimeoutMs",2e4,v),this.ma=v&&v.xmlHttpFactory||void 0,this.Ua=v&&v.Rb||void 0,this.Aa=v&&v.useFetchStreams||!1,this.O=void 0,this.L=v&&v.supportsCrossDomainXhr||!1,this.M="",this.h=new $c(v&&v.concurrentRequestLimit),this.Ba=new as,this.S=v&&v.fastHandshake||!1,this.R=v&&v.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=v&&v.Pb||!1,v&&v.ua&&this.j.ua(),v&&v.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&v&&v.detectBufferingProxy||!1,this.ia=void 0,v&&v.longPollingTimeout&&v.longPollingTimeout>0&&(this.ia=v.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=os.prototype,n.ka=8,n.I=1,n.connect=function(v,E,O,U){hn(0),this.W=v,this.H=E||{},O&&U!==void 0&&(this.H.OSID=O,this.H.OAID=U),this.F=this.X,this.J=dh(this,null,this.W),ta(this)};function iu(v){if(yl(v),v.I==3){var E=v.V++,O=mn(v.J);if(Ct(O,"SID",v.M),Ct(O,"RID",E),Ct(O,"TYPE","terminate"),Ao(v,O),E=new pi(v,v.j,E),E.M=2,E.A=vo(mn(O)),O=!1,o.navigator&&o.navigator.sendBeacon)try{O=o.navigator.sendBeacon(E.A.toString(),"")}catch{}!O&&o.Image&&(new Image().src=E.A,O=!0),O||(E.g=ph(E.j,null),E.g.ea(E.A)),E.F=Date.now(),$i(E)}hh(v)}function ls(v){v.g&&(su(v),v.g.cancel(),v.g=null)}function yl(v){ls(v),v.v&&(o.clearTimeout(v.v),v.v=null),xl(v),v.h.cancel(),v.m&&(typeof v.m=="number"&&o.clearTimeout(v.m),v.m=null)}function ta(v){if(!Xc(v.h)&&!v.m){v.m=!0;var E=v.Ea;X||b(),F||(X(),F=!0),I.add(E,v),v.D=0}}function _l(v,E){return Ki(v.h)>=v.h.j-(v.m?1:0)?!1:v.m?(v.i=E.G.concat(v.i),!0):v.I==1||v.I==2||v.D>=(v.Sa?0:v.Ta)?!1:(v.m=Hi(h(v.Ea,v,E),fh(v,v.D)),v.D++,!0)}n.Ea=function(v){if(this.m)if(this.m=null,this.I==1){if(!v){this.V=Math.floor(Math.random()*1e5),v=this.V++;const Q=new pi(this,this.j,v);let ne=this.o;if(this.U&&(ne?(ne=$(ne),pe(ne,this.U)):ne=this.U),this.u!==null||this.R||(Q.J=ne,ne=null),this.S)e:{for(var E=0,O=0;O<this.i.length;O++){t:{var U=this.i[O];if("__data__"in U.map&&(U=U.map.__data__,typeof U=="string")){U=U.length;break t}U=void 0}if(U===void 0)break;if(E+=U,E>4096){E=O;break e}if(E===4096||O===this.i.length-1){E=O+1;break e}}E=1e3}else E=1e3;E=oh(this,Q,E),O=mn(this.J),Ct(O,"RID",v),Ct(O,"CVER",22),this.G&&Ct(O,"X-HTTP-Session-Id",this.G),Ao(this,O),ne&&(this.R?E="headers="+Aa(Yr(ne))+"&"+E:this.u&&xo(O,this.u,ne)),Yc(this.h,Q),this.Ra&&Ct(O,"TYPE","init"),this.S?(Ct(O,"$req",E),Ct(O,"SID","null"),Q.U=!0,qi(Q,O,null)):qi(Q,O,E),this.I=2}}else this.I==3&&(v?au(this,v):this.i.length==0||Xc(this.h)||au(this))};function au(v,E){var O;E?O=E.l:O=v.V++;const U=mn(v.J);Ct(U,"SID",v.M),Ct(U,"RID",O),Ct(U,"AID",v.K),Ao(v,U),v.u&&v.o&&xo(U,v.u,v.o),O=new pi(v,v.j,O,v.D+1),v.u===null&&(O.J=v.o),E&&(v.i=E.G.concat(v.i)),E=oh(v,O,1e3),O.H=Math.round(v.va*.5)+Math.round(v.va*.5*Math.random()),Yc(v.h,O),qi(O,U,E)}function Ao(v,E){v.H&&we(v.H,function(O,U){Ct(E,U,O)}),v.l&&we({},function(O,U){Ct(E,U,O)})}function oh(v,E,O){O=Math.min(v.i.length,O);const U=v.l?h(v.l.Ka,v.l,v):null;e:{var Q=v.i;let $e=-1;for(;;){const sn=["count="+O];$e==-1?O>0?($e=Q[0].g,sn.push("ofs="+$e)):$e=0:sn.push("ofs="+$e);let yt=!0;for(let $t=0;$t<O;$t++){var ne=Q[$t].g;const Kr=Q[$t].map;if(ne-=$e,ne<0)$e=Math.max(0,Q[$t].g-100),yt=!1;else try{ne="req"+ne+"_"||"";try{var _e=Kr instanceof Map?Kr:Object.entries(Kr);for(const[ra,_i]of _e){let xi=_i;c(_i)&&(xi=kn(_i)),sn.push(ne+ra+"="+encodeURIComponent(xi))}}catch(ra){throw sn.push(ne+"type="+encodeURIComponent("_badmap")),ra}}catch{U&&U(Kr)}}if(yt){_e=sn.join("&");break e}}_e=void 0}return v=v.i.splice(0,O),E.G=v,_e}function lh(v){if(!v.g&&!v.v){v.Y=1;var E=v.Da;X||b(),F||(X(),F=!0),I.add(E,v),v.A=0}}function bo(v){return v.g||v.v||v.A>=3?!1:(v.Y++,v.v=Hi(h(v.Da,v),fh(v,v.A)),v.A++,!0)}n.Da=function(){if(this.v=null,ch(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var v=4*this.T;this.j.info("BP detection timer enabled: "+v),this.B=Hi(h(this.Wa,this),v)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,hn(10),ls(this),ch(this))};function su(v){v.B!=null&&(o.clearTimeout(v.B),v.B=null)}function ch(v){v.g=new pi(v,v.j,"rpc",v.Y),v.u===null&&(v.g.J=v.o),v.g.P=0;var E=mn(v.na);Ct(E,"RID","rpc"),Ct(E,"SID",v.M),Ct(E,"AID",v.K),Ct(E,"CI",v.F?"0":"1"),!v.F&&v.ia&&Ct(E,"TO",v.ia),Ct(E,"TYPE","xmlhttp"),Ao(v,E),v.u&&v.o&&xo(E,v.u,v.o),v.O&&(v.g.H=v.O);var O=v.g;v=v.ba,O.M=1,O.A=vo(mn(E)),O.u=null,O.R=!0,fl(O,v)}n.Va=function(){this.C!=null&&(this.C=null,ls(this),bo(this),hn(19))};function xl(v){v.C!=null&&(o.clearTimeout(v.C),v.C=null)}function uh(v,E){var O=null;if(v.g==E){xl(v),su(v),v.g=null;var U=2}else if(Wi(v.h,E))O=E.G,Kc(v.h,E),U=1;else return;if(v.I!=0){if(E.o)if(U==1){O=E.u?E.u.length:0,E=Date.now()-E.F;var Q=v.D;U=ul(),vt(U,new zi(U,O)),ta(v)}else lh(v);else if(Q=E.m,Q==3||Q==0&&E.X>0||!(U==1&&_l(v,E)||U==2&&bo(v)))switch(O&&O.length>0&&(E=v.h,E.i=E.i.concat(O)),Q){case 1:na(v,5);break;case 4:na(v,10);break;case 3:na(v,6);break;default:na(v,2)}}}function fh(v,E){let O=v.Qa+Math.floor(Math.random()*v.Za);return v.isActive()||(O*=2),O*E}function na(v,E){if(v.j.info("Error code "+E),E==2){var O=h(v.bb,v),U=v.Ua;const Q=!U;U=new Dr(U||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||Bn(U,"https"),vo(U),Q?gi(U.toString(),O):tu(U.toString(),O)}else hn(2);v.I=0,v.l&&v.l.pa(E),hh(v),yl(v)}n.bb=function(v){v?(this.j.info("Successfully pinged google.com"),hn(2)):(this.j.info("Failed to ping google.com"),hn(1))};function hh(v){if(v.I=0,v.ja=[],v.l){const E=Wc(v.h);(E.length!=0||v.i.length!=0)&&(A(v.ja,E),A(v.ja,v.i),v.h.i.length=0,w(v.i),v.i.length=0),v.l.oa()}}function dh(v,E,O){var U=O instanceof Dr?mn(O):new Dr(O);if(U.g!="")E&&(U.g=E+"."+U.g),ts(U,U.u);else{var Q=o.location;U=Q.protocol,E=E?E+"."+Q.hostname:Q.hostname,Q=+Q.port;const ne=new Dr(null);U&&Bn(ne,U),E&&(ne.g=E),Q&&ts(ne,Q),O&&(ne.h=O),U=ne}return O=v.G,E=v.wa,O&&E&&Ct(U,O,E),Ct(U,"VER",v.ka),Ao(v,U),U}function ph(v,E,O){if(E&&!v.L)throw Error("Can't create secondary domain capable XhrIo object.");return E=v.Aa&&!v.ma?new Dt(new Zi({ab:O})):new Dt(v.ma),E.Fa(v.L),E}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function mh(){}n=mh.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function cs(){}cs.prototype.g=function(v,E){return new hr(v,E)};function hr(v,E){Fe.call(this),this.g=new os(E),this.l=v,this.h=E&&E.messageUrlParams||null,v=E&&E.messageHeaders||null,E&&E.clientProtocolHeaderRequired&&(v?v["X-Client-Protocol"]="webchannel":v={"X-Client-Protocol":"webchannel"}),this.g.o=v,v=E&&E.initMessageHeaders||null,E&&E.messageContentType&&(v?v["X-WebChannel-Content-Type"]=E.messageContentType:v={"X-WebChannel-Content-Type":E.messageContentType}),E&&E.sa&&(v?v["X-WebChannel-Client-Profile"]=E.sa:v={"X-WebChannel-Client-Profile":E.sa}),this.g.U=v,(v=E&&E.Qb)&&!L(v)&&(this.g.u=v),this.A=E&&E.supportsCrossDomainXhr||!1,this.v=E&&E.sendRawJson||!1,(E=E&&E.httpSessionIdParam)&&!L(E)&&(this.g.G=E,v=this.h,v!==null&&E in v&&(v=this.h,E in v&&delete v[E])),this.j=new Ca(this)}g(hr,Fe),hr.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},hr.prototype.close=function(){iu(this.g)},hr.prototype.o=function(v){var E=this.g;if(typeof v=="string"){var O={};O.__data__=v,v=O}else this.v&&(O={},O.__data__=kn(v),v=O);E.i.push(new pn(E.Ya++,v)),E.I==3&&ta(E)},hr.prototype.N=function(){this.g.l=null,delete this.j,iu(this.g),delete this.g,hr.Z.N.call(this)};function gh(v){ze.call(this),v.__headers__&&(this.headers=v.__headers__,this.statusCode=v.__status__,delete v.__headers__,delete v.__status__);var E=v.__sm__;if(E){e:{for(const O in E){v=O;break e}v=void 0}(this.i=v)&&(v=this.i,E=E!==null&&v in E?E[v]:void 0),this.data=E}else this.data=v}g(gh,ze);function vh(){Ln.call(this),this.status=1}g(vh,Ln);function Ca(v){this.g=v}g(Ca,mh),Ca.prototype.ra=function(){vt(this.g,"a")},Ca.prototype.qa=function(v){vt(this.g,new gh(v))},Ca.prototype.pa=function(v){vt(this.g,new vh)},Ca.prototype.oa=function(){vt(this.g,"b")},cs.prototype.createWebChannel=cs.prototype.g,hr.prototype.send=hr.prototype.o,hr.prototype.open=hr.prototype.m,hr.prototype.close=hr.prototype.close,wC=function(){return new cs},xC=function(){return ul()},_C=an,kg={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},mo.NO_ERROR=0,mo.TIMEOUT=8,mo.HTTP_ERROR=6,Hd=mo,Gc.COMPLETE="complete",yC=Gc,Ge.EventType=ht,ht.OPEN="a",ht.CLOSE="b",ht.ERROR="c",ht.MESSAGE="d",Fe.prototype.listen=Fe.prototype.J,Zu=Ge,Dt.prototype.listenOnce=Dt.prototype.K,Dt.prototype.getLastError=Dt.prototype.Ha,Dt.prototype.getLastErrorCode=Dt.prototype.ya,Dt.prototype.getStatus=Dt.prototype.ca,Dt.prototype.getResponseJson=Dt.prototype.La,Dt.prototype.getResponseText=Dt.prototype.la,Dt.prototype.send=Dt.prototype.ea,Dt.prototype.setWithCredentials=Dt.prototype.Fa,vC=Dt}).apply(typeof Ad<"u"?Ad:typeof self<"u"?self:typeof window<"u"?window:{});const yE="@firebase/firestore",_E="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cr{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}cr.UNAUTHENTICATED=new cr(null),cr.GOOGLE_CREDENTIALS=new cr("google-credentials-uid"),cr.FIRST_PARTY=new cr("first-party-uid"),cr.MOCK_USER=new cr("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Pc="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tl=new kv("@firebase/firestore");function nc(){return tl.logLevel}function Se(n,...e){if(tl.logLevel<=at.DEBUG){const t=e.map($v);tl.debug(`Firestore (${Pc}): ${n}`,...t)}}function Qa(n,...e){if(tl.logLevel<=at.ERROR){const t=e.map($v);tl.error(`Firestore (${Pc}): ${n}`,...t)}}function _c(n,...e){if(tl.logLevel<=at.WARN){const t=e.map($v);tl.warn(`Firestore (${Pc}): ${n}`,...t)}}function $v(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ke(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,EC(n,r,t)}function EC(n,e,t){let r=`FIRESTORE (${Pc}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw Qa(r),new Error(r)}function ft(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||EC(e,i,r)}function Ue(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ue={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class xe extends xa{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pa{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AC{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class vD{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(cr.UNAUTHENTICATED)))}shutdown(){}}class yD{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class _D{constructor(e){this.t=e,this.currentUser=cr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){ft(this.o===void 0,42304);let r=this.i;const i=u=>this.i!==r?(r=this.i,t(u)):Promise.resolve();let a=new pa;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new pa,e.enqueueRetryable((()=>i(this.currentUser)))};const o=()=>{const u=a;e.enqueueRetryable((async()=>{await u.promise,await i(this.currentUser)}))},c=u=>{Se("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit((u=>c(u))),setTimeout((()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?c(u):(Se("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new pa)}}),0),o()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((r=>this.i!==e?(Se("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ft(typeof r.accessToken=="string",31837,{l:r}),new AC(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ft(e===null||typeof e=="string",2055,{h:e}),new cr(e)}}class xD{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=cr.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class wD{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new xD(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(cr.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class xE{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class ED{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,oi(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){ft(this.o===void 0,3512);const r=a=>{a.error!=null&&Se("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const o=a.token!==this.m;return this.m=a.token,Se("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable((()=>r(a)))};const i=a=>{Se("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((a=>i(a))),setTimeout((()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?i(a):Se("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new xE(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(ft(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new xE(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AD(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xv{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=AD(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<t&&(r+=e.charAt(i[a]%62))}return r}}function st(n,e){return n<e?-1:n>e?1:0}function Lg(n,e){const t=Math.min(n.length,e.length);for(let r=0;r<t;r++){const i=n.charAt(r),a=e.charAt(r);if(i!==a)return Mm(i)===Mm(a)?st(i,a):Mm(i)?1:-1}return st(n.length,e.length)}const bD=55296,SD=57343;function Mm(n){const e=n.charCodeAt(0);return e>=bD&&e<=SD}function xc(n,e,t){return n.length===e.length&&n.every(((r,i)=>t(r,e[i])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wE="__name__";class ua{constructor(e,t,r){t===void 0?t=0:t>e.length&&ke(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&ke(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return ua.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ua?e.forEach((r=>{t.push(r)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const a=ua.compareSegments(e.get(i),t.get(i));if(a!==0)return a}return st(e.length,t.length)}static compareSegments(e,t){const r=ua.isNumericId(e),i=ua.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?ua.extractNumericId(e).compare(ua.extractNumericId(t)):Lg(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return $s.fromString(e.substring(4,e.length-2))}}class jt extends ua{construct(e,t,r){return new jt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new xe(ue.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter((i=>i.length>0)))}return new jt(t)}static emptyPath(){return new jt([])}}const CD=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class nr extends ua{construct(e,t,r){return new nr(e,t,r)}static isValidIdentifier(e){return CD.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),nr.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===wE}static keyField(){return new nr([wE])}static fromServerFormat(e){const t=[];let r="",i=0;const a=()=>{if(r.length===0)throw new xe(ue.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let o=!1;for(;i<e.length;){const c=e[i];if(c==="\\"){if(i+1===e.length)throw new xe(ue.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new xe(ue.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else c==="`"?(o=!o,i++):c!=="."||o?(r+=c,i++):(a(),i++)}if(a(),o)throw new xe(ue.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new nr(t)}static emptyPath(){return new nr([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oe{constructor(e){this.path=e}static fromPath(e){return new Oe(jt.fromString(e))}static fromName(e){return new Oe(jt.fromString(e).popFirst(5))}static empty(){return new Oe(jt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&jt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return jt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Oe(new jt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bC(n,e,t){if(!t)throw new xe(ue.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function TD(n,e,t,r){if(e===!0&&r===!0)throw new xe(ue.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function EE(n){if(!Oe.isDocumentKey(n))throw new xe(ue.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function AE(n){if(Oe.isDocumentKey(n))throw new xe(ue.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function SC(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function H0(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":ke(12329,{type:typeof n})}function ci(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new xe(ue.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=H0(n);throw new xe(ue.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function ID(n,e){if(e<=0)throw new xe(ue.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bn(n,e){const t={typeString:n};return e&&(t.value=e),t}function Vf(n,e){if(!SC(n))throw new xe(ue.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const i=e[r].typeString,a="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}const o=n[r];if(i&&typeof o!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(a!==void 0&&o!==a.value){t=`Expected '${r}' field to equal '${a.value}'`;break}}if(t)throw new xe(ue.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bE=-62135596800,SE=1e6;class Ot{static now(){return Ot.fromMillis(Date.now())}static fromDate(e){return Ot.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*SE);return new Ot(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new xe(ue.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new xe(ue.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<bE)throw new xe(ue.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new xe(ue.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/SE}_compareTo(e){return this.seconds===e.seconds?st(this.nanoseconds,e.nanoseconds):st(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ot._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Vf(e,Ot._jsonSchema))return new Ot(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-bE;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ot._jsonSchemaVersion="firestore/timestamp/1.0",Ot._jsonSchema={type:bn("string",Ot._jsonSchemaVersion),seconds:bn("number"),nanoseconds:bn("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class je{static fromTimestamp(e){return new je(e)}static min(){return new je(new Ot(0,0))}static max(){return new je(new Ot(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wf=-1;function ND(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=je.fromTimestamp(r===1e9?new Ot(t+1,0):new Ot(t,r));return new Js(i,Oe.empty(),e)}function RD(n){return new Js(n.readTime,n.key,wf)}class Js{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Js(je.min(),Oe.empty(),wf)}static max(){return new Js(je.max(),Oe.empty(),wf)}}function OD(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Oe.comparator(n.documentKey,e.documentKey),t!==0?t:st(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DD="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class MD{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kc(n){if(n.code!==ue.FAILED_PRECONDITION||n.message!==DD)throw n;Se("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class de{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ke(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new de(((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,i)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof de?t:de.resolve(t)}catch(t){return de.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):de.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):de.reject(t)}static resolve(e){return new de(((t,r)=>{t(e)}))}static reject(e){return new de(((t,r)=>{r(e)}))}static waitFor(e){return new de(((t,r)=>{let i=0,a=0,o=!1;e.forEach((c=>{++i,c.next((()=>{++a,o&&a===i&&t()}),(u=>r(u)))})),o=!0,a===i&&t()}))}static or(e){let t=de.resolve(!1);for(const r of e)t=t.next((i=>i?de.resolve(i):r()));return t}static forEach(e,t){const r=[];return e.forEach(((i,a)=>{r.push(t.call(this,i,a))})),this.waitFor(r)}static mapArray(e,t){return new de(((r,i)=>{const a=e.length,o=new Array(a);let c=0;for(let u=0;u<a;u++){const h=u;t(e[h]).next((p=>{o[h]=p,++c,c===a&&r(o)}),(p=>i(p)))}}))}static doWhile(e,t){return new de(((r,i)=>{const a=()=>{e()===!0?t().next((()=>{a()}),i):r()};a()}))}}function PD(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Lc(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G0{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>t.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}G0.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yv=-1;function Ff(n){return n==null}function l0(n){return n===0&&1/n==-1/0}function kD(n){return typeof n=="number"&&Number.isInteger(n)&&!l0(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CC="";function LD(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=CE(e)),e=jD(n.get(t),e);return CE(e)}function jD(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const a=n.charAt(i);switch(a){case"\0":t+="";break;case CC:t+="";break;default:t+=a}}return t}function CE(n){return n+CC+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TE(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function lo(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function TC(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en{constructor(e,t){this.comparator=e,this.root=t||tr.EMPTY}insert(e,t){return new en(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,tr.BLACK,null,null))}remove(e){return new en(this.comparator,this.root.remove(e,this.comparator).copy(null,null,tr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,r)=>(e(t,r),!1)))}toString(){const e=[];return this.inorderTraversal(((t,r)=>(e.push(`${t}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new bd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new bd(this.root,e,this.comparator,!1)}getReverseIterator(){return new bd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new bd(this.root,e,this.comparator,!0)}}class bd{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,t&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class tr{constructor(e,t,r,i,a){this.key=e,this.value=t,this.color=r??tr.RED,this.left=i??tr.EMPTY,this.right=a??tr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,a){return new tr(e??this.key,t??this.value,r??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,t,r),null):a===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return tr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return tr.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,tr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,tr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ke(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ke(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ke(27949);return e+(this.isRed()?0:1)}}tr.EMPTY=null,tr.RED=!0,tr.BLACK=!1;tr.EMPTY=new class{constructor(){this.size=0}get key(){throw ke(57766)}get value(){throw ke(16141)}get color(){throw ke(16727)}get left(){throw ke(29726)}get right(){throw ke(36894)}copy(e,t,r,i,a){return this}insert(e,t,r){return new tr(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mn{constructor(e){this.comparator=e,this.data=new en(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,r)=>(e(t),!1)))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new IE(this.data.getIterator())}getIteratorFrom(e){return new IE(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((r=>{t=t.add(r)})),t}isEqual(e){if(!(e instanceof Mn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(this.comparator(i,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Mn(this.comparator);return t.data=e,t}}class IE{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zr{constructor(e){this.fields=e,e.sort(nr.comparator)}static empty(){return new zr([])}unionWith(e){let t=new Mn(nr.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new zr(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return xc(this.fields,e.fields,((t,r)=>t.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IC extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ar{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(i){try{return atob(i)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new IC("Invalid base64 string: "+a):a}})(e);return new ar(t)}static fromUint8Array(e){const t=(function(i){let a="";for(let o=0;o<i.length;++o)a+=String.fromCharCode(i[o]);return a})(e);return new ar(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return st(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ar.EMPTY_BYTE_STRING=new ar("");const BD=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function eo(n){if(ft(!!n,39018),typeof n=="string"){let e=0;const t=BD.exec(n);if(ft(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:un(n.seconds),nanos:un(n.nanos)}}function un(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function to(n){return typeof n=="string"?ar.fromBase64String(n):ar.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NC="server_timestamp",RC="__type__",OC="__previous_value__",DC="__local_write_time__";function Kv(n){return(n?.mapValue?.fields||{})[RC]?.stringValue===NC}function q0(n){const e=n.mapValue.fields[OC];return Kv(e)?q0(e):e}function Ef(n){const e=eo(n.mapValue.fields[DC].timestampValue);return new Ot(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VD{constructor(e,t,r,i,a,o,c,u,h,p){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=c,this.longPollingOptions=u,this.useFetchStreams=h,this.isUsingEmulator=p}}const c0="(default)";class Af{constructor(e,t){this.projectId=e,this.database=t||c0}static empty(){return new Af("","")}get isDefaultDatabase(){return this.database===c0}isEqual(e){return e instanceof Af&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MC="__type__",FD="__max__",Sd={mapValue:{}},PC="__vector__",u0="value";function no(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Kv(n)?4:zD(n)?9007199254740991:UD(n)?10:11:ke(28295,{value:n})}function ya(n,e){if(n===e)return!0;const t=no(n);if(t!==no(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Ef(n).isEqual(Ef(e));case 3:return(function(i,a){if(typeof i.timestampValue=="string"&&typeof a.timestampValue=="string"&&i.timestampValue.length===a.timestampValue.length)return i.timestampValue===a.timestampValue;const o=eo(i.timestampValue),c=eo(a.timestampValue);return o.seconds===c.seconds&&o.nanos===c.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(i,a){return to(i.bytesValue).isEqual(to(a.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(i,a){return un(i.geoPointValue.latitude)===un(a.geoPointValue.latitude)&&un(i.geoPointValue.longitude)===un(a.geoPointValue.longitude)})(n,e);case 2:return(function(i,a){if("integerValue"in i&&"integerValue"in a)return un(i.integerValue)===un(a.integerValue);if("doubleValue"in i&&"doubleValue"in a){const o=un(i.doubleValue),c=un(a.doubleValue);return o===c?l0(o)===l0(c):isNaN(o)&&isNaN(c)}return!1})(n,e);case 9:return xc(n.arrayValue.values||[],e.arrayValue.values||[],ya);case 10:case 11:return(function(i,a){const o=i.mapValue.fields||{},c=a.mapValue.fields||{};if(TE(o)!==TE(c))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(c[u]===void 0||!ya(o[u],c[u])))return!1;return!0})(n,e);default:return ke(52216,{left:n})}}function bf(n,e){return(n.values||[]).find((t=>ya(t,e)))!==void 0}function wc(n,e){if(n===e)return 0;const t=no(n),r=no(e);if(t!==r)return st(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return st(n.booleanValue,e.booleanValue);case 2:return(function(a,o){const c=un(a.integerValue||a.doubleValue),u=un(o.integerValue||o.doubleValue);return c<u?-1:c>u?1:c===u?0:isNaN(c)?isNaN(u)?0:-1:1})(n,e);case 3:return NE(n.timestampValue,e.timestampValue);case 4:return NE(Ef(n),Ef(e));case 5:return Lg(n.stringValue,e.stringValue);case 6:return(function(a,o){const c=to(a),u=to(o);return c.compareTo(u)})(n.bytesValue,e.bytesValue);case 7:return(function(a,o){const c=a.split("/"),u=o.split("/");for(let h=0;h<c.length&&h<u.length;h++){const p=st(c[h],u[h]);if(p!==0)return p}return st(c.length,u.length)})(n.referenceValue,e.referenceValue);case 8:return(function(a,o){const c=st(un(a.latitude),un(o.latitude));return c!==0?c:st(un(a.longitude),un(o.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return RE(n.arrayValue,e.arrayValue);case 10:return(function(a,o){const c=a.fields||{},u=o.fields||{},h=c[u0]?.arrayValue,p=u[u0]?.arrayValue,g=st(h?.values?.length||0,p?.values?.length||0);return g!==0?g:RE(h,p)})(n.mapValue,e.mapValue);case 11:return(function(a,o){if(a===Sd.mapValue&&o===Sd.mapValue)return 0;if(a===Sd.mapValue)return 1;if(o===Sd.mapValue)return-1;const c=a.fields||{},u=Object.keys(c),h=o.fields||{},p=Object.keys(h);u.sort(),p.sort();for(let g=0;g<u.length&&g<p.length;++g){const _=Lg(u[g],p[g]);if(_!==0)return _;const w=wc(c[u[g]],h[p[g]]);if(w!==0)return w}return st(u.length,p.length)})(n.mapValue,e.mapValue);default:throw ke(23264,{he:t})}}function NE(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return st(n,e);const t=eo(n),r=eo(e),i=st(t.seconds,r.seconds);return i!==0?i:st(t.nanos,r.nanos)}function RE(n,e){const t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){const a=wc(t[i],r[i]);if(a)return a}return st(t.length,r.length)}function Ec(n){return jg(n)}function jg(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const r=eo(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return to(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return Oe.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",i=!0;for(const a of t.values||[])i?i=!1:r+=",",r+=jg(a);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){const r=Object.keys(t.fields||{}).sort();let i="{",a=!0;for(const o of r)a?a=!1:i+=",",i+=`${o}:${jg(t.fields[o])}`;return i+"}"})(n.mapValue):ke(61005,{value:n})}function Gd(n){switch(no(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=q0(n);return e?16+Gd(e):16;case 5:return 2*n.stringValue.length;case 6:return to(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((i,a)=>i+Gd(a)),0)})(n.arrayValue);case 10:case 11:return(function(r){let i=0;return lo(r.fields,((a,o)=>{i+=a.length+Gd(o)})),i})(n.mapValue);default:throw ke(13486,{value:n})}}function OE(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Bg(n){return!!n&&"integerValue"in n}function Wv(n){return!!n&&"arrayValue"in n}function DE(n){return!!n&&"nullValue"in n}function ME(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function qd(n){return!!n&&"mapValue"in n}function UD(n){return(n?.mapValue?.fields||{})[MC]?.stringValue===PC}function cf(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return lo(n.mapValue.fields,((t,r)=>e.mapValue.fields[t]=cf(r))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=cf(n.arrayValue.values[t]);return e}return{...n}}function zD(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===FD}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vr{constructor(e){this.value=e}static empty(){return new vr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!qd(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=cf(t)}setAll(e){let t=nr.emptyPath(),r={},i=[];e.forEach(((o,c)=>{if(!t.isImmediateParentOf(c)){const u=this.getFieldsMap(t);this.applyChanges(u,r,i),r={},i=[],t=c.popLast()}o?r[c.lastSegment()]=cf(o):i.push(c.lastSegment())}));const a=this.getFieldsMap(t);this.applyChanges(a,r,i)}delete(e){const t=this.field(e.popLast());qd(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ya(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];qd(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){lo(t,((i,a)=>e[i]=a));for(const i of r)delete e[i]}clone(){return new vr(cf(this.value))}}function kC(n){const e=[];return lo(n.fields,((t,r)=>{const i=new nr([t]);if(qd(r)){const a=kC(r.mapValue).fields;if(a.length===0)e.push(i);else for(const o of a)e.push(i.child(o))}else e.push(i)})),new zr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hn{constructor(e,t,r,i,a,o,c){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=a,this.data=o,this.documentState=c}static newInvalidDocument(e){return new Hn(e,0,je.min(),je.min(),je.min(),vr.empty(),0)}static newFoundDocument(e,t,r,i){return new Hn(e,1,t,je.min(),r,i,0)}static newNoDocument(e,t){return new Hn(e,2,t,je.min(),je.min(),vr.empty(),0)}static newUnknownDocument(e,t){return new Hn(e,3,t,je.min(),je.min(),vr.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(je.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=vr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=vr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=je.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Hn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Hn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f0{constructor(e,t){this.position=e,this.inclusive=t}}function PE(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const a=e[i],o=n.position[i];if(a.field.isKeyField()?r=Oe.comparator(Oe.fromName(o.referenceValue),t.key):r=wc(o,t.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function kE(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!ya(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sf{constructor(e,t="asc"){this.field=e,this.dir=t}}function HD(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LC{}class En extends LC{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new qD(e,t,r):t==="array-contains"?new YD(e,r):t==="in"?new KD(e,r):t==="not-in"?new WD(e,r):t==="array-contains-any"?new QD(e,r):new En(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new $D(e,r):new XD(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(wc(t,this.value)):t!==null&&no(this.value)===no(t)&&this.matchesComparison(wc(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ke(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ki extends LC{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new ki(e,t)}matches(e){return jC(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function jC(n){return n.op==="and"}function BC(n){return GD(n)&&jC(n)}function GD(n){for(const e of n.filters)if(e instanceof ki)return!1;return!0}function Vg(n){if(n instanceof En)return n.field.canonicalString()+n.op.toString()+Ec(n.value);if(BC(n))return n.filters.map((e=>Vg(e))).join(",");{const e=n.filters.map((t=>Vg(t))).join(",");return`${n.op}(${e})`}}function VC(n,e){return n instanceof En?(function(r,i){return i instanceof En&&r.op===i.op&&r.field.isEqual(i.field)&&ya(r.value,i.value)})(n,e):n instanceof ki?(function(r,i){return i instanceof ki&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce(((a,o,c)=>a&&VC(o,i.filters[c])),!0):!1})(n,e):void ke(19439)}function FC(n){return n instanceof En?(function(t){return`${t.field.canonicalString()} ${t.op} ${Ec(t.value)}`})(n):n instanceof ki?(function(t){return t.op.toString()+" {"+t.getFilters().map(FC).join(" ,")+"}"})(n):"Filter"}class qD extends En{constructor(e,t,r){super(e,t,r),this.key=Oe.fromName(r.referenceValue)}matches(e){const t=Oe.comparator(e.key,this.key);return this.matchesComparison(t)}}class $D extends En{constructor(e,t){super(e,"in",t),this.keys=UC("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class XD extends En{constructor(e,t){super(e,"not-in",t),this.keys=UC("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function UC(n,e){return(e.arrayValue?.values||[]).map((t=>Oe.fromName(t.referenceValue)))}class YD extends En{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Wv(t)&&bf(t.arrayValue,this.value)}}class KD extends En{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&bf(this.value.arrayValue,t)}}class WD extends En{constructor(e,t){super(e,"not-in",t)}matches(e){if(bf(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!bf(this.value.arrayValue,t)}}class QD extends En{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Wv(t)||!t.arrayValue.values)&&t.arrayValue.values.some((r=>bf(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZD{constructor(e,t=null,r=[],i=[],a=null,o=null,c=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=c,this.Te=null}}function LE(n,e=null,t=[],r=[],i=null,a=null,o=null){return new ZD(n,e,t,r,i,a,o)}function Qv(n){const e=Ue(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((r=>Vg(r))).join(","),t+="|ob:",t+=e.orderBy.map((r=>(function(a){return a.field.canonicalString()+a.dir})(r))).join(","),Ff(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((r=>Ec(r))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((r=>Ec(r))).join(",")),e.Te=t}return e.Te}function Zv(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!HD(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!VC(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!kE(n.startAt,e.startAt)&&kE(n.endAt,e.endAt)}function Fg(n){return Oe.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jc{constructor(e,t=null,r=[],i=[],a=null,o="F",c=null,u=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=c,this.endAt=u,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function JD(n,e,t,r,i,a,o,c){return new jc(n,e,t,r,i,a,o,c)}function $0(n){return new jc(n)}function jE(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function zC(n){return n.collectionGroup!==null}function uf(n){const e=Ue(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const a of e.explicitOrderBy)e.Ie.push(a),t.add(a.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let c=new Mn(nr.comparator);return o.filters.forEach((u=>{u.getFlattenedFilters().forEach((h=>{h.isInequality()&&(c=c.add(h.field))}))})),c})(e).forEach((a=>{t.has(a.canonicalString())||a.isKeyField()||e.Ie.push(new Sf(a,r))})),t.has(nr.keyField().canonicalString())||e.Ie.push(new Sf(nr.keyField(),r))}return e.Ie}function ma(n){const e=Ue(n);return e.Ee||(e.Ee=e5(e,uf(n))),e.Ee}function e5(n,e){if(n.limitType==="F")return LE(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((i=>{const a=i.dir==="desc"?"asc":"desc";return new Sf(i.field,a)}));const t=n.endAt?new f0(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new f0(n.startAt.position,n.startAt.inclusive):null;return LE(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function Ug(n,e){const t=n.filters.concat([e]);return new jc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function h0(n,e,t){return new jc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function X0(n,e){return Zv(ma(n),ma(e))&&n.limitType===e.limitType}function HC(n){return`${Qv(ma(n))}|lt:${n.limitType}`}function rc(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map((i=>FC(i))).join(", ")}]`),Ff(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map((i=>(function(o){return`${o.field.canonicalString()} (${o.dir})`})(i))).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map((i=>Ec(i))).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map((i=>Ec(i))).join(",")),`Target(${r})`})(ma(n))}; limitType=${n.limitType})`}function Y0(n,e){return e.isFoundDocument()&&(function(r,i){const a=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):Oe.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)})(n,e)&&(function(r,i){for(const a of uf(r))if(!a.field.isKeyField()&&i.data.field(a.field)===null)return!1;return!0})(n,e)&&(function(r,i){for(const a of r.filters)if(!a.matches(i))return!1;return!0})(n,e)&&(function(r,i){return!(r.startAt&&!(function(o,c,u){const h=PE(o,c,u);return o.inclusive?h<=0:h<0})(r.startAt,uf(r),i)||r.endAt&&!(function(o,c,u){const h=PE(o,c,u);return o.inclusive?h>=0:h>0})(r.endAt,uf(r),i))})(n,e)}function t5(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function GC(n){return(e,t)=>{let r=!1;for(const i of uf(n)){const a=n5(i,e,t);if(a!==0)return a;r=r||i.field.isKeyField()}return 0}}function n5(n,e,t){const r=n.field.isKeyField()?Oe.comparator(e.key,t.key):(function(a,o,c){const u=o.data.field(a),h=c.data.field(a);return u!==null&&h!==null?wc(u,h):ke(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return ke(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class al{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[i,a]of r)if(this.equalsFn(i,e))return a}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){lo(this.inner,((t,r)=>{for(const[i,a]of r)e(i,a)}))}isEmpty(){return TC(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r5=new en(Oe.comparator);function Za(){return r5}const qC=new en(Oe.comparator);function Ju(...n){let e=qC;for(const t of n)e=e.insert(t.key,t);return e}function $C(n){let e=qC;return n.forEach(((t,r)=>e=e.insert(t,r.overlayedDocument))),e}function Xo(){return ff()}function XC(){return ff()}function ff(){return new al((n=>n.toString()),((n,e)=>n.isEqual(e)))}const i5=new en(Oe.comparator),a5=new Mn(Oe.comparator);function ot(...n){let e=a5;for(const t of n)e=e.add(t);return e}const s5=new Mn(st);function o5(){return s5}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jv(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:l0(e)?"-0":e}}function YC(n){return{integerValue:""+n}}function l5(n,e){return kD(e)?YC(e):Jv(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K0{constructor(){this._=void 0}}function c5(n,e,t){return n instanceof Cf?(function(i,a){const o={fields:{[RC]:{stringValue:NC},[DC]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return a&&Kv(a)&&(a=q0(a)),a&&(o.fields[OC]=a),{mapValue:o}})(t,e):n instanceof Tf?WC(n,e):n instanceof If?QC(n,e):(function(i,a){const o=KC(i,a),c=BE(o)+BE(i.Ae);return Bg(o)&&Bg(i.Ae)?YC(c):Jv(i.serializer,c)})(n,e)}function u5(n,e,t){return n instanceof Tf?WC(n,e):n instanceof If?QC(n,e):t}function KC(n,e){return n instanceof d0?(function(r){return Bg(r)||(function(a){return!!a&&"doubleValue"in a})(r)})(e)?e:{integerValue:0}:null}class Cf extends K0{}class Tf extends K0{constructor(e){super(),this.elements=e}}function WC(n,e){const t=ZC(e);for(const r of n.elements)t.some((i=>ya(i,r)))||t.push(r);return{arrayValue:{values:t}}}class If extends K0{constructor(e){super(),this.elements=e}}function QC(n,e){let t=ZC(e);for(const r of n.elements)t=t.filter((i=>!ya(i,r)));return{arrayValue:{values:t}}}class d0 extends K0{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function BE(n){return un(n.integerValue||n.doubleValue)}function ZC(n){return Wv(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f5{constructor(e,t){this.field=e,this.transform=t}}function h5(n,e){return n.field.isEqual(e.field)&&(function(r,i){return r instanceof Tf&&i instanceof Tf||r instanceof If&&i instanceof If?xc(r.elements,i.elements,ya):r instanceof d0&&i instanceof d0?ya(r.Ae,i.Ae):r instanceof Cf&&i instanceof Cf})(n.transform,e.transform)}class d5{constructor(e,t){this.version=e,this.transformResults=t}}class rr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new rr}static exists(e){return new rr(void 0,e)}static updateTime(e){return new rr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function $d(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class W0{}function JC(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Q0(n.key,rr.none()):new Uf(n.key,n.data,rr.none());{const t=n.data,r=vr.empty();let i=new Mn(nr.comparator);for(let a of e.fields)if(!i.has(a)){let o=t.field(a);o===null&&a.length>1&&(a=a.popLast(),o=t.field(a)),o===null?r.delete(a):r.set(a,o),i=i.add(a)}return new co(n.key,r,new zr(i.toArray()),rr.none())}}function p5(n,e,t){n instanceof Uf?(function(i,a,o){const c=i.value.clone(),u=FE(i.fieldTransforms,a,o.transformResults);c.setAll(u),a.convertToFoundDocument(o.version,c).setHasCommittedMutations()})(n,e,t):n instanceof co?(function(i,a,o){if(!$d(i.precondition,a))return void a.convertToUnknownDocument(o.version);const c=FE(i.fieldTransforms,a,o.transformResults),u=a.data;u.setAll(eT(i)),u.setAll(c),a.convertToFoundDocument(o.version,u).setHasCommittedMutations()})(n,e,t):(function(i,a,o){a.convertToNoDocument(o.version).setHasCommittedMutations()})(0,e,t)}function hf(n,e,t,r){return n instanceof Uf?(function(a,o,c,u){if(!$d(a.precondition,o))return c;const h=a.value.clone(),p=UE(a.fieldTransforms,u,o);return h.setAll(p),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),null})(n,e,t,r):n instanceof co?(function(a,o,c,u){if(!$d(a.precondition,o))return c;const h=UE(a.fieldTransforms,u,o),p=o.data;return p.setAll(eT(a)),p.setAll(h),o.convertToFoundDocument(o.version,p).setHasLocalMutations(),c===null?null:c.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map((g=>g.field)))})(n,e,t,r):(function(a,o,c){return $d(a.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):c})(n,e,t)}function m5(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),a=KC(r.transform,i||null);a!=null&&(t===null&&(t=vr.empty()),t.set(r.field,a))}return t||null}function VE(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&xc(r,i,((a,o)=>h5(a,o)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Uf extends W0{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class co extends W0{constructor(e,t,r,i,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function eT(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}})),e}function FE(n,e,t){const r=new Map;ft(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let i=0;i<t.length;i++){const a=n[i],o=a.transform,c=e.data.field(a.field);r.set(a.field,u5(o,c,t[i]))}return r}function UE(n,e,t){const r=new Map;for(const i of n){const a=i.transform,o=t.data.field(i.field);r.set(i.field,c5(a,o,e))}return r}class Q0 extends W0{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class tT extends W0{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g5{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&p5(a,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=hf(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=hf(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=XC();return this.mutations.forEach((i=>{const a=e.get(i.key),o=a.overlayedDocument;let c=this.applyToLocalView(o,a.mutatedFields);c=t.has(i.key)?null:c;const u=JC(o,c);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(je.min())})),r}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),ot())}isEqual(e){return this.batchId===e.batchId&&xc(this.mutations,e.mutations,((t,r)=>VE(t,r)))&&xc(this.baseMutations,e.baseMutations,((t,r)=>VE(t,r)))}}class ey{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){ft(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=(function(){return i5})();const a=e.mutations;for(let o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new ey(e,t,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v5{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y5{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xn,ct;function nT(n){switch(n){case ue.OK:return ke(64938);case ue.CANCELLED:case ue.UNKNOWN:case ue.DEADLINE_EXCEEDED:case ue.RESOURCE_EXHAUSTED:case ue.INTERNAL:case ue.UNAVAILABLE:case ue.UNAUTHENTICATED:return!1;case ue.INVALID_ARGUMENT:case ue.NOT_FOUND:case ue.ALREADY_EXISTS:case ue.PERMISSION_DENIED:case ue.FAILED_PRECONDITION:case ue.ABORTED:case ue.OUT_OF_RANGE:case ue.UNIMPLEMENTED:case ue.DATA_LOSS:return!0;default:return ke(15467,{code:n})}}function rT(n){if(n===void 0)return Qa("GRPC error has no .code"),ue.UNKNOWN;switch(n){case xn.OK:return ue.OK;case xn.CANCELLED:return ue.CANCELLED;case xn.UNKNOWN:return ue.UNKNOWN;case xn.DEADLINE_EXCEEDED:return ue.DEADLINE_EXCEEDED;case xn.RESOURCE_EXHAUSTED:return ue.RESOURCE_EXHAUSTED;case xn.INTERNAL:return ue.INTERNAL;case xn.UNAVAILABLE:return ue.UNAVAILABLE;case xn.UNAUTHENTICATED:return ue.UNAUTHENTICATED;case xn.INVALID_ARGUMENT:return ue.INVALID_ARGUMENT;case xn.NOT_FOUND:return ue.NOT_FOUND;case xn.ALREADY_EXISTS:return ue.ALREADY_EXISTS;case xn.PERMISSION_DENIED:return ue.PERMISSION_DENIED;case xn.FAILED_PRECONDITION:return ue.FAILED_PRECONDITION;case xn.ABORTED:return ue.ABORTED;case xn.OUT_OF_RANGE:return ue.OUT_OF_RANGE;case xn.UNIMPLEMENTED:return ue.UNIMPLEMENTED;case xn.DATA_LOSS:return ue.DATA_LOSS;default:return ke(39323,{code:n})}}(ct=xn||(xn={}))[ct.OK=0]="OK",ct[ct.CANCELLED=1]="CANCELLED",ct[ct.UNKNOWN=2]="UNKNOWN",ct[ct.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ct[ct.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ct[ct.NOT_FOUND=5]="NOT_FOUND",ct[ct.ALREADY_EXISTS=6]="ALREADY_EXISTS",ct[ct.PERMISSION_DENIED=7]="PERMISSION_DENIED",ct[ct.UNAUTHENTICATED=16]="UNAUTHENTICATED",ct[ct.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ct[ct.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ct[ct.ABORTED=10]="ABORTED",ct[ct.OUT_OF_RANGE=11]="OUT_OF_RANGE",ct[ct.UNIMPLEMENTED=12]="UNIMPLEMENTED",ct[ct.INTERNAL=13]="INTERNAL",ct[ct.UNAVAILABLE=14]="UNAVAILABLE",ct[ct.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _5(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x5=new $s([4294967295,4294967295],0);function zE(n){const e=_5().encode(n),t=new gC;return t.update(e),new Uint8Array(t.digest())}function HE(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new $s([t,r],0),new $s([i,a],0)]}class ty{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new ef(`Invalid padding: ${t}`);if(r<0)throw new ef(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new ef(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new ef(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=$s.fromNumber(this.ge)}ye(e,t,r){let i=e.add(t.multiply($s.fromNumber(r)));return i.compare(x5)===1&&(i=new $s([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=zE(e),[r,i]=HE(t);for(let a=0;a<this.hashCount;a++){const o=this.ye(r,i,a);if(!this.we(o))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),o=new ty(a,i,t);return r.forEach((c=>o.insert(c))),o}insert(e){if(this.ge===0)return;const t=zE(e),[r,i]=HE(t);for(let a=0;a<this.hashCount;a++){const o=this.ye(r,i,a);this.Se(o)}}Se(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class ef extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z0{constructor(e,t,r,i,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,zf.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Z0(je.min(),i,new en(st),Za(),ot())}}class zf{constructor(e,t,r,i,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new zf(r,t,ot(),ot(),ot())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xd{constructor(e,t,r,i){this.be=e,this.removedTargetIds=t,this.key=r,this.De=i}}class iT{constructor(e,t){this.targetId=e,this.Ce=t}}class aT{constructor(e,t,r=ar.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class GE{constructor(){this.ve=0,this.Fe=qE(),this.Me=ar.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ot(),t=ot(),r=ot();return this.Fe.forEach(((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:ke(38017,{changeType:a})}})),new zf(this.Me,this.xe,e,t,r)}qe(){this.Oe=!1,this.Fe=qE()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,ft(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class w5{constructor(e){this.Ge=e,this.ze=new Map,this.je=Za(),this.Je=Cd(),this.He=Cd(),this.Ye=new en(st)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:ke(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((r,i)=>{this.rt(i)&&t(i)}))}st(e){const t=e.targetId,r=e.Ce.count,i=this.ot(t);if(i){const a=i.target;if(Fg(a))if(r===0){const o=new Oe(a.path);this.et(t,o,Hn.newNoDocument(o,je.min()))}else ft(r===1,20013,{expectedCount:r});else{const o=this._t(t);if(o!==r){const c=this.ut(e),u=c?this.ct(c,e,o):1;if(u!==0){this.it(t);const h=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,h)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:a=0}=t;let o,c;try{o=to(r).toUint8Array()}catch(u){if(u instanceof IC)return _c("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{c=new ty(o,i,a)}catch(u){return _c(u instanceof ef?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return c.ge===0?null:c}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){const r=this.Ge.getRemoteKeysForTarget(t);let i=0;return r.forEach((a=>{const o=this.Ge.ht(),c=`projects/${o.projectId}/databases/${o.database}/documents/${a.path.canonicalString()}`;e.mightContain(c)||(this.et(t,a,null),i++)})),i}Tt(e){const t=new Map;this.ze.forEach(((a,o)=>{const c=this.ot(o);if(c){if(a.current&&Fg(c.target)){const u=new Oe(c.target.path);this.It(u).has(o)||this.Et(o,u)||this.et(o,u,Hn.newNoDocument(u,e))}a.Be&&(t.set(o,a.ke()),a.qe())}}));let r=ot();this.He.forEach(((a,o)=>{let c=!0;o.forEachWhile((u=>{const h=this.ot(u);return!h||h.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)})),c&&(r=r.add(a))})),this.je.forEach(((a,o)=>o.setReadTime(e)));const i=new Z0(e,t,this.Ye,this.je,r);return this.je=Za(),this.Je=Cd(),this.He=Cd(),this.Ye=new en(st),i}Xe(e,t){if(!this.rt(e))return;const r=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,r),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,t)?i.Qe(t,1):i.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new GE,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Mn(st),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Mn(st),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||Se("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new GE),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Cd(){return new en(Oe.comparator)}function qE(){return new en(Oe.comparator)}const E5={asc:"ASCENDING",desc:"DESCENDING"},A5={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},b5={and:"AND",or:"OR"};class S5{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function zg(n,e){return n.useProto3Json||Ff(e)?e:{value:e}}function p0(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function sT(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function C5(n,e){return p0(n,e.toTimestamp())}function Hr(n){return ft(!!n,49232),je.fromTimestamp((function(t){const r=eo(t);return new Ot(r.seconds,r.nanos)})(n))}function ny(n,e){return Hg(n,e).canonicalString()}function Hg(n,e){const t=(function(i){return new jt(["projects",i.projectId,"databases",i.database])})(n).child("documents");return e===void 0?t:t.child(e)}function oT(n){const e=jt.fromString(n);return ft(dT(e),10190,{key:e.toString()}),e}function m0(n,e){return ny(n.databaseId,e.path)}function df(n,e){const t=oT(e);if(t.get(1)!==n.databaseId.projectId)throw new xe(ue.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new xe(ue.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Oe(cT(t))}function lT(n,e){return ny(n.databaseId,e)}function T5(n){const e=oT(n);return e.length===4?jt.emptyPath():cT(e)}function Gg(n){return new jt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function cT(n){return ft(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function $E(n,e,t){return{name:m0(n,e),fields:t.value.mapValue.fields}}function I5(n,e){return"found"in e?(function(r,i){ft(!!i.found,43571),i.found.name,i.found.updateTime;const a=df(r,i.found.name),o=Hr(i.found.updateTime),c=i.found.createTime?Hr(i.found.createTime):je.min(),u=new vr({mapValue:{fields:i.found.fields}});return Hn.newFoundDocument(a,o,c,u)})(n,e):"missing"in e?(function(r,i){ft(!!i.missing,3894),ft(!!i.readTime,22933);const a=df(r,i.missing),o=Hr(i.readTime);return Hn.newNoDocument(a,o)})(n,e):ke(7234,{result:e})}function N5(n,e){let t;if("targetChange"in e){e.targetChange;const r=(function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:ke(39313,{state:h})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],a=(function(h,p){return h.useProto3Json?(ft(p===void 0||typeof p=="string",58123),ar.fromBase64String(p||"")):(ft(p===void 0||p instanceof Buffer||p instanceof Uint8Array,16193),ar.fromUint8Array(p||new Uint8Array))})(n,e.targetChange.resumeToken),o=e.targetChange.cause,c=o&&(function(h){const p=h.code===void 0?ue.UNKNOWN:rT(h.code);return new xe(p,h.message||"")})(o);t=new aT(r,i,a,c||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=df(n,r.document.name),a=Hr(r.document.updateTime),o=r.document.createTime?Hr(r.document.createTime):je.min(),c=new vr({mapValue:{fields:r.document.fields}}),u=Hn.newFoundDocument(i,a,o,c),h=r.targetIds||[],p=r.removedTargetIds||[];t=new Xd(h,p,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=df(n,r.document),a=r.readTime?Hr(r.readTime):je.min(),o=Hn.newNoDocument(i,a),c=r.removedTargetIds||[];t=new Xd([],c,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=df(n,r.document),a=r.removedTargetIds||[];t=new Xd([],a,i,null)}else{if(!("filter"in e))return ke(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:a}=r,o=new y5(i,a),c=r.targetId;t=new iT(c,o)}}return t}function uT(n,e){let t;if(e instanceof Uf)t={update:$E(n,e.key,e.value)};else if(e instanceof Q0)t={delete:m0(n,e.key)};else if(e instanceof co)t={update:$E(n,e.key,e.data),updateMask:B5(e.fieldMask)};else{if(!(e instanceof tT))return ke(16599,{Vt:e.type});t={verify:m0(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((r=>(function(a,o){const c=o.transform;if(c instanceof Cf)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Tf)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof If)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof d0)return{fieldPath:o.field.canonicalString(),increment:c.Ae};throw ke(20930,{transform:o.transform})})(0,r)))),e.precondition.isNone||(t.currentDocument=(function(i,a){return a.updateTime!==void 0?{updateTime:C5(i,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:ke(27497)})(n,e.precondition)),t}function R5(n,e){return n&&n.length>0?(ft(e!==void 0,14353),n.map((t=>(function(i,a){let o=i.updateTime?Hr(i.updateTime):Hr(a);return o.isEqual(je.min())&&(o=Hr(a)),new d5(o,i.transformResults||[])})(t,e)))):[]}function O5(n,e){return{documents:[lT(n,e.path)]}}function D5(n,e){const t={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=lT(n,i);const a=(function(h){if(h.length!==0)return hT(ki.create(h,"and"))})(e.filters);a&&(t.structuredQuery.where=a);const o=(function(h){if(h.length!==0)return h.map((p=>(function(_){return{field:ic(_.field),direction:k5(_.dir)}})(p)))})(e.orderBy);o&&(t.structuredQuery.orderBy=o);const c=zg(n,e.limit);return c!==null&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt=(function(h){return{before:h.inclusive,values:h.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(h){return{before:!h.inclusive,values:h.position}})(e.endAt)),{ft:t,parent:i}}function M5(n){let e=T5(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){ft(r===1,65062);const p=t.from[0];p.allDescendants?i=p.collectionId:e=e.child(p.collectionId)}let a=[];t.where&&(a=(function(g){const _=fT(g);return _ instanceof ki&&BC(_)?_.getFilters():[_]})(t.where));let o=[];t.orderBy&&(o=(function(g){return g.map((_=>(function(A){return new Sf(ac(A.field),(function(D){switch(D){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(A.direction))})(_)))})(t.orderBy));let c=null;t.limit&&(c=(function(g){let _;return _=typeof g=="object"?g.value:g,Ff(_)?null:_})(t.limit));let u=null;t.startAt&&(u=(function(g){const _=!!g.before,w=g.values||[];return new f0(w,_)})(t.startAt));let h=null;return t.endAt&&(h=(function(g){const _=!g.before,w=g.values||[];return new f0(w,_)})(t.endAt)),JD(e,i,o,a,c,"F",u,h)}function P5(n,e){const t=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ke(28987,{purpose:i})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function fT(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=ac(t.unaryFilter.field);return En.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=ac(t.unaryFilter.field);return En.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=ac(t.unaryFilter.field);return En.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=ac(t.unaryFilter.field);return En.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ke(61313);default:return ke(60726)}})(n):n.fieldFilter!==void 0?(function(t){return En.create(ac(t.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ke(58110);default:return ke(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return ki.create(t.compositeFilter.filters.map((r=>fT(r))),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ke(1026)}})(t.compositeFilter.op))})(n):ke(30097,{filter:n})}function k5(n){return E5[n]}function L5(n){return A5[n]}function j5(n){return b5[n]}function ic(n){return{fieldPath:n.canonicalString()}}function ac(n){return nr.fromServerFormat(n.fieldPath)}function hT(n){return n instanceof En?(function(t){if(t.op==="=="){if(ME(t.value))return{unaryFilter:{field:ic(t.field),op:"IS_NAN"}};if(DE(t.value))return{unaryFilter:{field:ic(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(ME(t.value))return{unaryFilter:{field:ic(t.field),op:"IS_NOT_NAN"}};if(DE(t.value))return{unaryFilter:{field:ic(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ic(t.field),op:L5(t.op),value:t.value}}})(n):n instanceof ki?(function(t){const r=t.getFilters().map((i=>hT(i)));return r.length===1?r[0]:{compositeFilter:{op:j5(t.op),filters:r}}})(n):ke(54877,{filter:n})}function B5(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function dT(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Us{constructor(e,t,r,i,a=je.min(),o=je.min(),c=ar.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=c,this.expectedCount=u}withSequenceNumber(e){return new Us(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Us(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Us(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Us(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V5{constructor(e){this.yt=e}}function F5(n){const e=M5({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?h0(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U5{constructor(){this.Cn=new z5}addToCollectionParentIndex(e,t){return this.Cn.add(t),de.resolve()}getCollectionParents(e,t){return de.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return de.resolve()}deleteFieldIndex(e,t){return de.resolve()}deleteAllFieldIndexes(e){return de.resolve()}createTargetIndexes(e,t){return de.resolve()}getDocumentsMatchingTarget(e,t){return de.resolve(null)}getIndexType(e,t){return de.resolve(0)}getFieldIndexes(e,t){return de.resolve([])}getNextCollectionGroupToUpdate(e){return de.resolve(null)}getMinOffset(e,t){return de.resolve(Js.min())}getMinOffsetFromCollectionGroup(e,t){return de.resolve(Js.min())}updateCollectionGroup(e,t,r){return de.resolve()}updateIndexEntries(e,t){return de.resolve()}}class z5{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Mn(jt.comparator),a=!i.has(r);return this.index[t]=i.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Mn(jt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},pT=41943040;class Cr{static withCacheSize(e){return new Cr(e,Cr.DEFAULT_COLLECTION_PERCENTILE,Cr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Cr.DEFAULT_COLLECTION_PERCENTILE=10,Cr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Cr.DEFAULT=new Cr(pT,Cr.DEFAULT_COLLECTION_PERCENTILE,Cr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Cr.DISABLED=new Cr(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ac{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Ac(0)}static cr(){return new Ac(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YE="LruGarbageCollector",H5=1048576;function KE([n,e],[t,r]){const i=st(n,t);return i===0?st(e,r):i}class G5{constructor(e){this.Ir=e,this.buffer=new Mn(KE),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();KE(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class q5{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Se(YE,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Lc(t)?Se(YE,"Ignoring IndexedDB error during garbage collection: ",t):await kc(t)}await this.Vr(3e5)}))}}class $5{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((r=>Math.floor(t/100*r)))}nthSequenceNumber(e,t){if(t===0)return de.resolve(G0.ce);const r=new G5(t);return this.mr.forEachTarget(e,(i=>r.Ar(i.sequenceNumber))).next((()=>this.mr.pr(e,(i=>r.Ar(i))))).next((()=>r.maxValue))}removeTargets(e,t,r){return this.mr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(Se("LruGarbageCollector","Garbage collection skipped; disabled"),de.resolve(XE)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(Se("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),XE):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let r,i,a,o,c,u,h;const p=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((g=>(g>this.params.maximumSequenceNumbersToCollect?(Se("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${g}`),i=this.params.maximumSequenceNumbersToCollect):i=g,o=Date.now(),this.nthSequenceNumber(e,i)))).next((g=>(r=g,c=Date.now(),this.removeTargets(e,r,t)))).next((g=>(a=g,u=Date.now(),this.removeOrphanedDocuments(e,r)))).next((g=>(h=Date.now(),nc()<=at.DEBUG&&Se("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-p}ms
	Determined least recently used ${i} in `+(c-o)+`ms
	Removed ${a} targets in `+(u-c)+`ms
	Removed ${g} documents in `+(h-u)+`ms
Total Duration: ${h-p}ms`),de.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:g}))))}}function X5(n,e){return new $5(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y5{constructor(){this.changes=new al((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Hn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?de.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K5{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W5{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next((i=>(r=i,this.remoteDocumentCache.getEntry(e,t)))).next((i=>(r!==null&&hf(r.mutation,i,zr.empty(),Ot.now()),i)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.getLocalViewOfDocuments(e,r,ot()).next((()=>r))))}getLocalViewOfDocuments(e,t,r=ot()){const i=Xo();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,r).next((a=>{let o=Ju();return a.forEach(((c,u)=>{o=o.insert(c,u.overlayedDocument)})),o}))))}getOverlayedDocuments(e,t){const r=Xo();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,ot())))}populateOverlays(e,t,r){const i=[];return r.forEach((a=>{t.has(a)||i.push(a)})),this.documentOverlayCache.getOverlays(e,i).next((a=>{a.forEach(((o,c)=>{t.set(o,c)}))}))}computeViews(e,t,r,i){let a=Za();const o=ff(),c=(function(){return ff()})();return t.forEach(((u,h)=>{const p=r.get(h.key);i.has(h.key)&&(p===void 0||p.mutation instanceof co)?a=a.insert(h.key,h):p!==void 0?(o.set(h.key,p.mutation.getFieldMask()),hf(p.mutation,h,p.mutation.getFieldMask(),Ot.now())):o.set(h.key,zr.empty())})),this.recalculateAndSaveOverlays(e,a).next((u=>(u.forEach(((h,p)=>o.set(h,p))),t.forEach(((h,p)=>c.set(h,new K5(p,o.get(h)??null)))),c)))}recalculateAndSaveOverlays(e,t){const r=ff();let i=new en(((o,c)=>o-c)),a=ot();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((o=>{for(const c of o)c.keys().forEach((u=>{const h=t.get(u);if(h===null)return;let p=r.get(u)||zr.empty();p=c.applyToLocalView(h,p),r.set(u,p);const g=(i.get(c.batchId)||ot()).add(u);i=i.insert(c.batchId,g)}))})).next((()=>{const o=[],c=i.getReverseIterator();for(;c.hasNext();){const u=c.getNext(),h=u.key,p=u.value,g=XC();p.forEach((_=>{if(!a.has(_)){const w=JC(t.get(_),r.get(_));w!==null&&g.set(_,w),a=a.add(_)}})),o.push(this.documentOverlayCache.saveOverlays(e,h,g))}return de.waitFor(o)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,t,r,i){return(function(o){return Oe.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):zC(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next((a=>{const o=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-a.size):de.resolve(Xo());let c=wf,u=a;return o.next((h=>de.forEach(h,((p,g)=>(c<g.largestBatchId&&(c=g.largestBatchId),a.get(p)?de.resolve():this.remoteDocumentCache.getEntry(e,p).next((_=>{u=u.insert(p,_)}))))).next((()=>this.populateOverlays(e,h,a))).next((()=>this.computeViews(e,u,h,ot()))).next((p=>({batchId:c,changes:$C(p)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Oe(t)).next((r=>{let i=Ju();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i}))}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const a=t.collectionGroup;let o=Ju();return this.indexManager.getCollectionParents(e,a).next((c=>de.forEach(c,(u=>{const h=(function(g,_){return new jc(_,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)})(t,u.child(a));return this.getDocumentsMatchingCollectionQuery(e,h,r,i).next((p=>{p.forEach(((g,_)=>{o=o.insert(g,_)}))}))})).next((()=>o))))}getDocumentsMatchingCollectionQuery(e,t,r,i){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next((o=>(a=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,a,i)))).next((o=>{a.forEach(((u,h)=>{const p=h.getKey();o.get(p)===null&&(o=o.insert(p,Hn.newInvalidDocument(p)))}));let c=Ju();return o.forEach(((u,h)=>{const p=a.get(u);p!==void 0&&hf(p.mutation,h,zr.empty(),Ot.now()),Y0(t,h)&&(c=c.insert(u,h))})),c}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q5{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return de.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(i){return{id:i.id,version:i.version,createTime:Hr(i.createTime)}})(t)),de.resolve()}getNamedQuery(e,t){return de.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(i){return{name:i.name,query:F5(i.bundledQuery),readTime:Hr(i.readTime)}})(t)),de.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z5{constructor(){this.overlays=new en(Oe.comparator),this.qr=new Map}getOverlay(e,t){return de.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Xo();return de.forEach(t,(i=>this.getOverlay(e,i).next((a=>{a!==null&&r.set(i,a)})))).next((()=>r))}saveOverlays(e,t,r){return r.forEach(((i,a)=>{this.St(e,t,a)})),de.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.qr.get(r);return i!==void 0&&(i.forEach((a=>this.overlays=this.overlays.remove(a))),this.qr.delete(r)),de.resolve()}getOverlaysForCollection(e,t,r){const i=Xo(),a=t.length+1,o=new Oe(t.child("")),c=this.overlays.getIteratorFrom(o);for(;c.hasNext();){const u=c.getNext().value,h=u.getKey();if(!t.isPrefixOf(h.path))break;h.path.length===a&&u.largestBatchId>r&&i.set(u.getKey(),u)}return de.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let a=new en(((h,p)=>h-p));const o=this.overlays.getIterator();for(;o.hasNext();){const h=o.getNext().value;if(h.getKey().getCollectionGroup()===t&&h.largestBatchId>r){let p=a.get(h.largestBatchId);p===null&&(p=Xo(),a=a.insert(h.largestBatchId,p)),p.set(h.getKey(),h)}}const c=Xo(),u=a.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach(((h,p)=>c.set(h,p))),!(c.size()>=i)););return de.resolve(c)}St(e,t,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new v5(t,r));let a=this.qr.get(t);a===void 0&&(a=ot(),this.qr.set(t,a)),this.qr.set(t,a.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J5{constructor(){this.sessionToken=ar.EMPTY_BYTE_STRING}getSessionToken(e){return de.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,de.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ry{constructor(){this.Qr=new Mn(zn.$r),this.Ur=new Mn(zn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const r=new zn(e,t);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,t){e.forEach((r=>this.addReference(r,t)))}removeReference(e,t){this.Gr(new zn(e,t))}zr(e,t){e.forEach((r=>this.removeReference(r,t)))}jr(e){const t=new Oe(new jt([])),r=new zn(t,e),i=new zn(t,e+1),a=[];return this.Ur.forEachInRange([r,i],(o=>{this.Gr(o),a.push(o.key)})),a}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new Oe(new jt([])),r=new zn(t,e),i=new zn(t,e+1);let a=ot();return this.Ur.forEachInRange([r,i],(o=>{a=a.add(o.key)})),a}containsKey(e){const t=new zn(e,0),r=this.Qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class zn{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return Oe.comparator(e.key,t.key)||st(e.Yr,t.Yr)}static Kr(e,t){return st(e.Yr,t.Yr)||Oe.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eM{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Mn(zn.$r)}checkEmpty(e){return de.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){const a=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new g5(a,t,r,i);this.mutationQueue.push(o);for(const c of i)this.Zr=this.Zr.add(new zn(c.key,a)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return de.resolve(o)}lookupMutationBatch(e,t){return de.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=this.ei(r),a=i<0?0:i;return de.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return de.resolve(this.mutationQueue.length===0?Yv:this.tr-1)}getAllMutationBatches(e){return de.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new zn(t,0),i=new zn(t,Number.POSITIVE_INFINITY),a=[];return this.Zr.forEachInRange([r,i],(o=>{const c=this.Xr(o.Yr);a.push(c)})),de.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Mn(st);return t.forEach((i=>{const a=new zn(i,0),o=new zn(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([a,o],(c=>{r=r.add(c.Yr)}))})),de.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let a=r;Oe.isDocumentKey(a)||(a=a.child(""));const o=new zn(new Oe(a),0);let c=new Mn(st);return this.Zr.forEachWhile((u=>{const h=u.key.path;return!!r.isPrefixOf(h)&&(h.length===i&&(c=c.add(u.Yr)),!0)}),o),de.resolve(this.ti(c))}ti(e){const t=[];return e.forEach((r=>{const i=this.Xr(r);i!==null&&t.push(i)})),t}removeMutationBatch(e,t){ft(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return de.forEach(t.mutations,(i=>{const a=new zn(i.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,t){const r=new zn(t,0),i=this.Zr.firstAfterOrEqual(r);return de.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,de.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tM{constructor(e){this.ri=e,this.docs=(function(){return new en(Oe.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),a=i?i.size:0,o=this.ri(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return de.resolve(r?r.document.mutableCopy():Hn.newInvalidDocument(t))}getEntries(e,t){let r=Za();return t.forEach((i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():Hn.newInvalidDocument(i))})),de.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let a=Za();const o=t.path,c=new Oe(o.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(c);for(;u.hasNext();){const{key:h,value:{document:p}}=u.getNext();if(!o.isPrefixOf(h.path))break;h.path.length>o.length+1||OD(RD(p),r)<=0||(i.has(p.key)||Y0(t,p))&&(a=a.insert(p.key,p.mutableCopy()))}return de.resolve(a)}getAllFromCollectionGroup(e,t,r,i){ke(9500)}ii(e,t){return de.forEach(this.docs,(r=>t(r)))}newChangeBuffer(e){return new nM(this)}getSize(e){return de.resolve(this.size)}}class nM extends Y5{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((r,i)=>{i.isValidDocument()?t.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)})),de.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rM{constructor(e){this.persistence=e,this.si=new al((t=>Qv(t)),Zv),this.lastRemoteSnapshotVersion=je.min(),this.highestTargetId=0,this.oi=0,this._i=new ry,this.targetCount=0,this.ai=Ac.ur()}forEachTarget(e,t){return this.si.forEach(((r,i)=>t(i))),de.resolve()}getLastRemoteSnapshotVersion(e){return de.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return de.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),de.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.oi&&(this.oi=t),de.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Ac(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,de.resolve()}updateTargetData(e,t){return this.Pr(t),de.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,de.resolve()}removeTargets(e,t,r){let i=0;const a=[];return this.si.forEach(((o,c)=>{c.sequenceNumber<=t&&r.get(c.targetId)===null&&(this.si.delete(o),a.push(this.removeMatchingKeysForTargetId(e,c.targetId)),i++)})),de.waitFor(a).next((()=>i))}getTargetCount(e){return de.resolve(this.targetCount)}getTargetData(e,t){const r=this.si.get(t)||null;return de.resolve(r)}addMatchingKeys(e,t,r){return this._i.Wr(t,r),de.resolve()}removeMatchingKeys(e,t,r){this._i.zr(t,r);const i=this.persistence.referenceDelegate,a=[];return i&&t.forEach((o=>{a.push(i.markPotentiallyOrphaned(e,o))})),de.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),de.resolve()}getMatchingKeysForTargetId(e,t){const r=this._i.Hr(t);return de.resolve(r)}containsKey(e,t){return de.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mT{constructor(e,t){this.ui={},this.overlays={},this.ci=new G0(0),this.li=!1,this.li=!0,this.hi=new J5,this.referenceDelegate=e(this),this.Pi=new rM(this),this.indexManager=new U5,this.remoteDocumentCache=(function(i){return new tM(i)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new V5(t),this.Ii=new Q5(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Z5,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ui[e.toKey()];return r||(r=new eM(t,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,r){Se("MemoryPersistence","Starting transaction:",e);const i=new iM(this.ci.next());return this.referenceDelegate.Ei(),r(i).next((a=>this.referenceDelegate.di(i).next((()=>a)))).toPromise().then((a=>(i.raiseOnCommittedEvent(),a)))}Ai(e,t){return de.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,t))))}}class iM extends MD{constructor(e){super(),this.currentSequenceNumber=e}}class iy{constructor(e){this.persistence=e,this.Ri=new ry,this.Vi=null}static mi(e){return new iy(e)}get fi(){if(this.Vi)return this.Vi;throw ke(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.fi.delete(r.toString()),de.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.fi.add(r.toString()),de.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),de.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((i=>this.fi.add(i.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((i=>{i.forEach((a=>this.fi.add(a.toString())))})).next((()=>r.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return de.forEach(this.fi,(r=>{const i=Oe.fromPath(r);return this.gi(e,i).next((a=>{a||t.removeEntry(i,je.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((r=>{r?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return de.or([()=>de.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class g0{constructor(e,t){this.persistence=e,this.pi=new al((r=>LD(r.path)),((r,i)=>r.isEqual(i))),this.garbageCollector=X5(this,t)}static mi(e,t){return new g0(e,t)}Ei(){}di(e){return de.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>t.next((i=>r+i))))}wr(e){let t=0;return this.pr(e,(r=>{t++})).next((()=>t))}pr(e,t){return de.forEach(this.pi,((r,i)=>this.br(e,r,i).next((a=>a?de.resolve():t(i)))))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const i=this.persistence.getRemoteDocumentCache(),a=i.newChangeBuffer();return i.ii(e,(o=>this.br(e,o,t).next((c=>{c||(r++,a.removeEntry(o,je.min()))})))).next((()=>a.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),de.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),de.resolve()}removeReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),de.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),de.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Gd(e.data.value)),t}br(e,t,r){return de.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const i=this.pi.get(t);return de.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ay{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Es=r,this.ds=i}static As(e,t){let r=ot(),i=ot();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new ay(e,t.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aM{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sM{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return jR()?8:PD(ur())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,i){const a={result:null};return this.ys(e,t).next((o=>{a.result=o})).next((()=>{if(!a.result)return this.ws(e,t,i,r).next((o=>{a.result=o}))})).next((()=>{if(a.result)return;const o=new aM;return this.Ss(e,t,o).next((c=>{if(a.result=c,this.Vs)return this.bs(e,t,o,c.size)}))})).next((()=>a.result))}bs(e,t,r,i){return r.documentReadCount<this.fs?(nc()<=at.DEBUG&&Se("QueryEngine","SDK will not create cache indexes for query:",rc(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),de.resolve()):(nc()<=at.DEBUG&&Se("QueryEngine","Query:",rc(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(nc()<=at.DEBUG&&Se("QueryEngine","The SDK decides to create cache indexes for query:",rc(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ma(t))):de.resolve())}ys(e,t){if(jE(t))return de.resolve(null);let r=ma(t);return this.indexManager.getIndexType(e,r).next((i=>i===0?null:(t.limit!==null&&i===1&&(t=h0(t,null,"F"),r=ma(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next((a=>{const o=ot(...a);return this.ps.getDocuments(e,o).next((c=>this.indexManager.getMinOffset(e,r).next((u=>{const h=this.Ds(t,c);return this.Cs(t,h,o,u.readTime)?this.ys(e,h0(t,null,"F")):this.vs(e,h,t,u)}))))})))))}ws(e,t,r,i){return jE(t)||i.isEqual(je.min())?de.resolve(null):this.ps.getDocuments(e,r).next((a=>{const o=this.Ds(t,a);return this.Cs(t,o,r,i)?de.resolve(null):(nc()<=at.DEBUG&&Se("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),rc(t)),this.vs(e,o,t,ND(i,wf)).next((c=>c)))}))}Ds(e,t){let r=new Mn(GC(e));return t.forEach(((i,a)=>{Y0(e,a)&&(r=r.add(a))})),r}Cs(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const a=e.limitType==="F"?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Ss(e,t,r){return nc()<=at.DEBUG&&Se("QueryEngine","Using full collection scan to execute query:",rc(t)),this.ps.getDocumentsMatchingQuery(e,t,Js.min(),r)}vs(e,t,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next((a=>(t.forEach((o=>{a=a.insert(o.key,o)})),a)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sy="LocalStore",oM=3e8;class lM{constructor(e,t,r,i){this.persistence=e,this.Fs=t,this.serializer=i,this.Ms=new en(st),this.xs=new al((a=>Qv(a)),Zv),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new W5(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function cM(n,e,t,r){return new lM(n,e,t,r)}async function gT(n,e){const t=Ue(n);return await t.persistence.runTransaction("Handle user change","readonly",(r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next((a=>(i=a,t.Bs(e),t.mutationQueue.getAllMutationBatches(r)))).next((a=>{const o=[],c=[];let u=ot();for(const h of i){o.push(h.batchId);for(const p of h.mutations)u=u.add(p.key)}for(const h of a){c.push(h.batchId);for(const p of h.mutations)u=u.add(p.key)}return t.localDocuments.getDocuments(r,u).next((h=>({Ls:h,removedBatchIds:o,addedBatchIds:c})))}))}))}function uM(n,e){const t=Ue(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const i=e.batch.keys(),a=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(c,u,h,p){const g=h.batch,_=g.keys();let w=de.resolve();return _.forEach((A=>{w=w.next((()=>p.getEntry(u,A))).next((S=>{const D=h.docVersions.get(A);ft(D!==null,48541),S.version.compareTo(D)<0&&(g.applyToRemoteDocument(S,h),S.isValidDocument()&&(S.setReadTime(h.commitVersion),p.addEntry(S)))}))})),w.next((()=>c.mutationQueue.removeMutationBatch(u,g)))})(t,r,e,a).next((()=>a.apply(r))).next((()=>t.mutationQueue.performConsistencyCheck(r))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(c){let u=ot();for(let h=0;h<c.mutationResults.length;++h)c.mutationResults[h].transformResults.length>0&&(u=u.add(c.batch.mutations[h].key));return u})(e)))).next((()=>t.localDocuments.getDocuments(r,i)))}))}function vT(n){const e=Ue(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function fM(n,e){const t=Ue(n),r=e.snapshotVersion;let i=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(a=>{const o=t.Ns.newChangeBuffer({trackRemovals:!0});i=t.Ms;const c=[];e.targetChanges.forEach(((p,g)=>{const _=i.get(g);if(!_)return;c.push(t.Pi.removeMatchingKeys(a,p.removedDocuments,g).next((()=>t.Pi.addMatchingKeys(a,p.addedDocuments,g))));let w=_.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(g)!==null?w=w.withResumeToken(ar.EMPTY_BYTE_STRING,je.min()).withLastLimboFreeSnapshotVersion(je.min()):p.resumeToken.approximateByteSize()>0&&(w=w.withResumeToken(p.resumeToken,r)),i=i.insert(g,w),(function(S,D,C){return S.resumeToken.approximateByteSize()===0||D.snapshotVersion.toMicroseconds()-S.snapshotVersion.toMicroseconds()>=oM?!0:C.addedDocuments.size+C.modifiedDocuments.size+C.removedDocuments.size>0})(_,w,p)&&c.push(t.Pi.updateTargetData(a,w))}));let u=Za(),h=ot();if(e.documentUpdates.forEach((p=>{e.resolvedLimboDocuments.has(p)&&c.push(t.persistence.referenceDelegate.updateLimboDocument(a,p))})),c.push(hM(a,o,e.documentUpdates).next((p=>{u=p.ks,h=p.qs}))),!r.isEqual(je.min())){const p=t.Pi.getLastRemoteSnapshotVersion(a).next((g=>t.Pi.setTargetsMetadata(a,a.currentSequenceNumber,r)));c.push(p)}return de.waitFor(c).next((()=>o.apply(a))).next((()=>t.localDocuments.getLocalViewOfDocuments(a,u,h))).next((()=>u))})).then((a=>(t.Ms=i,a)))}function hM(n,e,t){let r=ot(),i=ot();return t.forEach((a=>r=r.add(a))),e.getEntries(n,r).next((a=>{let o=Za();return t.forEach(((c,u)=>{const h=a.get(c);u.isFoundDocument()!==h.isFoundDocument()&&(i=i.add(c)),u.isNoDocument()&&u.version.isEqual(je.min())?(e.removeEntry(c,u.readTime),o=o.insert(c,u)):!h.isValidDocument()||u.version.compareTo(h.version)>0||u.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(u),o=o.insert(c,u)):Se(sy,"Ignoring outdated watch update for ",c,". Current version:",h.version," Watch version:",u.version)})),{ks:o,qs:i}}))}function dM(n,e){const t=Ue(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=Yv),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function pM(n,e){const t=Ue(n);return t.persistence.runTransaction("Allocate target","readwrite",(r=>{let i;return t.Pi.getTargetData(r,e).next((a=>a?(i=a,de.resolve(i)):t.Pi.allocateTargetId(r).next((o=>(i=new Us(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.Pi.addTargetData(r,i).next((()=>i)))))))})).then((r=>{const i=t.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(r.targetId,r),t.xs.set(e,r.targetId)),r}))}async function qg(n,e,t){const r=Ue(n),i=r.Ms.get(e),a=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",a,(o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!Lc(o))throw o;Se(sy,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)}function WE(n,e,t){const r=Ue(n);let i=je.min(),a=ot();return r.persistence.runTransaction("Execute query","readwrite",(o=>(function(u,h,p){const g=Ue(u),_=g.xs.get(p);return _!==void 0?de.resolve(g.Ms.get(_)):g.Pi.getTargetData(h,p)})(r,o,ma(e)).next((c=>{if(c)return i=c.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(o,c.targetId).next((u=>{a=u}))})).next((()=>r.Fs.getDocumentsMatchingQuery(o,e,t?i:je.min(),t?a:ot()))).next((c=>(mM(r,t5(e),c),{documents:c,Qs:a})))))}function mM(n,e,t){let r=n.Os.get(e)||je.min();t.forEach(((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)})),n.Os.set(e,r)}class QE{constructor(){this.activeTargetIds=o5()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class gM{constructor(){this.Mo=new QE,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,r){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new QE,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vM{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZE="ConnectivityMonitor";class JE{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Se(ZE,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Se(ZE,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Td=null;function $g(){return Td===null?Td=(function(){return 268435456+Math.round(2147483648*Math.random())})():Td++,"0x"+Td.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pm="RestConnection",yM={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class _M{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===c0?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,t,r,i,a){const o=$g(),c=this.zo(e,t.toUriEncodedString());Se(Pm,`Sending RPC '${e}' ${o}:`,c,r);const u={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(u,i,a);const{host:h}=new URL(c),p=Oc(h);return this.Jo(e,c,u,r,p).then((g=>(Se(Pm,`Received RPC '${e}' ${o}: `,g),g)),(g=>{throw _c(Pm,`RPC '${e}' ${o} failed with error: `,g,"url: ",c,"request:",r),g}))}Ho(e,t,r,i,a,o){return this.Go(e,t,r,i,a)}jo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Pc})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((i,a)=>e[a]=i)),r&&r.headers.forEach(((i,a)=>e[a]=i))}zo(e,t){const r=yM[e];return`${this.Uo}/v1/${t}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xM{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const or="WebChannelConnection";class wM extends _M{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,i,a){const o=$g();return new Promise(((c,u)=>{const h=new vC;h.setWithCredentials(!0),h.listenOnce(yC.COMPLETE,(()=>{try{switch(h.getLastErrorCode()){case Hd.NO_ERROR:const g=h.getResponseJson();Se(or,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(g)),c(g);break;case Hd.TIMEOUT:Se(or,`RPC '${e}' ${o} timed out`),u(new xe(ue.DEADLINE_EXCEEDED,"Request time out"));break;case Hd.HTTP_ERROR:const _=h.getStatus();if(Se(or,`RPC '${e}' ${o} failed with status:`,_,"response text:",h.getResponseText()),_>0){let w=h.getResponseJson();Array.isArray(w)&&(w=w[0]);const A=w?.error;if(A&&A.status&&A.message){const S=(function(C){const P=C.toLowerCase().replace(/_/g,"-");return Object.values(ue).indexOf(P)>=0?P:ue.UNKNOWN})(A.status);u(new xe(S,A.message))}else u(new xe(ue.UNKNOWN,"Server responded with status "+h.getStatus()))}else u(new xe(ue.UNAVAILABLE,"Connection failed."));break;default:ke(9055,{l_:e,streamId:o,h_:h.getLastErrorCode(),P_:h.getLastError()})}}finally{Se(or,`RPC '${e}' ${o} completed.`)}}));const p=JSON.stringify(i);Se(or,`RPC '${e}' ${o} sending request:`,i),h.send(t,"POST",p,r,15)}))}T_(e,t,r){const i=$g(),a=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=wC(),c=xC(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(u.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(u.useFetchStreams=!0),this.jo(u.initMessageHeaders,t,r),u.encodeInitMessageHeaders=!0;const p=a.join("");Se(or,`Creating RPC '${e}' stream ${i}: ${p}`,u);const g=o.createWebChannel(p,u);this.I_(g);let _=!1,w=!1;const A=new xM({Yo:D=>{w?Se(or,`Not sending because RPC '${e}' stream ${i} is closed:`,D):(_||(Se(or,`Opening RPC '${e}' stream ${i} transport.`),g.open(),_=!0),Se(or,`RPC '${e}' stream ${i} sending:`,D),g.send(D))},Zo:()=>g.close()}),S=(D,C,P)=>{D.listen(C,(V=>{try{P(V)}catch(H){setTimeout((()=>{throw H}),0)}}))};return S(g,Zu.EventType.OPEN,(()=>{w||(Se(or,`RPC '${e}' stream ${i} transport opened.`),A.o_())})),S(g,Zu.EventType.CLOSE,(()=>{w||(w=!0,Se(or,`RPC '${e}' stream ${i} transport closed`),A.a_(),this.E_(g))})),S(g,Zu.EventType.ERROR,(D=>{w||(w=!0,_c(or,`RPC '${e}' stream ${i} transport errored. Name:`,D.name,"Message:",D.message),A.a_(new xe(ue.UNAVAILABLE,"The operation could not be completed")))})),S(g,Zu.EventType.MESSAGE,(D=>{if(!w){const C=D.data[0];ft(!!C,16349);const P=C,V=P?.error||P[0]?.error;if(V){Se(or,`RPC '${e}' stream ${i} received error:`,V);const H=V.status;let X=(function(b){const N=xn[b];if(N!==void 0)return rT(N)})(H),F=V.message;X===void 0&&(X=ue.INTERNAL,F="Unknown error status: "+H+" with message "+V.message),w=!0,A.a_(new xe(X,F)),g.close()}else Se(or,`RPC '${e}' stream ${i} received:`,C),A.u_(C)}})),S(c,_C.STAT_EVENT,(D=>{D.stat===kg.PROXY?Se(or,`RPC '${e}' stream ${i} detected buffering proxy`):D.stat===kg.NOPROXY&&Se(or,`RPC '${e}' stream ${i} detected no buffering proxy`)})),setTimeout((()=>{A.__()}),0),A}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function km(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J0(n){return new S5(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oy{constructor(e,t,r=1e3,i=1.5,a=6e4){this.Mi=e,this.timerId=t,this.d_=r,this.A_=i,this.R_=a,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,t-r);i>0&&Se("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eA="PersistentStream";class yT{constructor(e,t,r,i,a,o,c,u){this.Mi=e,this.S_=r,this.b_=i,this.connection=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=c,this.listener=u,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new oy(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===ue.RESOURCE_EXHAUSTED?(Qa(t.toString()),Qa("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===ue.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,i])=>{this.D_===t&&this.G_(r,i)}),(r=>{e((()=>{const i=new xe(ue.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)}))}))}G_(e,t){const r=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((i=>{r((()=>this.z_(i)))})),this.stream.onMessage((i=>{r((()=>++this.F_==1?this.J_(i):this.onNext(i)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Se(eA,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(Se(eA,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class EM extends yT{constructor(e,t,r,i,a,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,o),this.serializer=a}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=N5(this.serializer,e),r=(function(a){if(!("targetChange"in a))return je.min();const o=a.targetChange;return o.targetIds&&o.targetIds.length?je.min():o.readTime?Hr(o.readTime):je.min()})(e);return this.listener.H_(t,r)}Y_(e){const t={};t.database=Gg(this.serializer),t.addTarget=(function(a,o){let c;const u=o.target;if(c=Fg(u)?{documents:O5(a,u)}:{query:D5(a,u).ft},c.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){c.resumeToken=sT(a,o.resumeToken);const h=zg(a,o.expectedCount);h!==null&&(c.expectedCount=h)}else if(o.snapshotVersion.compareTo(je.min())>0){c.readTime=p0(a,o.snapshotVersion.toTimestamp());const h=zg(a,o.expectedCount);h!==null&&(c.expectedCount=h)}return c})(this.serializer,e);const r=P5(this.serializer,e);r&&(t.labels=r),this.q_(t)}Z_(e){const t={};t.database=Gg(this.serializer),t.removeTarget=e,this.q_(t)}}class AM extends yT{constructor(e,t,r,i,a,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,o),this.serializer=a}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return ft(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ft(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){ft(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=R5(e.writeResults,e.commitTime),r=Hr(e.commitTime);return this.listener.na(r,t)}ra(){const e={};e.database=Gg(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((r=>uT(this.serializer,r)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bM{}class SM extends bM{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new xe(ue.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,o])=>this.connection.Go(e,Hg(t,r),i,a,o))).catch((a=>{throw a.name==="FirebaseError"?(a.code===ue.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new xe(ue.UNKNOWN,a.toString())}))}Ho(e,t,r,i,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,c])=>this.connection.Ho(e,Hg(t,r),i,o,c,a))).catch((o=>{throw o.name==="FirebaseError"?(o.code===ue.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new xe(ue.UNKNOWN,o.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class CM{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Qa(t),this.aa=!1):Se("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nl="RemoteStore";class TM{constructor(e,t,r,i,a){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=a,this.Aa.Oo((o=>{r.enqueueAndForget((async()=>{sl(this)&&(Se(nl,"Restarting streams for network reachability change."),await(async function(u){const h=Ue(u);h.Ea.add(4),await Hf(h),h.Ra.set("Unknown"),h.Ea.delete(4),await ep(h)})(this))}))})),this.Ra=new CM(r,i)}}async function ep(n){if(sl(n))for(const e of n.da)await e(!0)}async function Hf(n){for(const e of n.da)await e(!1)}function _T(n,e){const t=Ue(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),fy(t)?uy(t):Bc(t).O_()&&cy(t,e))}function ly(n,e){const t=Ue(n),r=Bc(t);t.Ia.delete(e),r.O_()&&xT(t,e),t.Ia.size===0&&(r.O_()?r.L_():sl(t)&&t.Ra.set("Unknown"))}function cy(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(je.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Bc(n).Y_(e)}function xT(n,e){n.Va.Ue(e),Bc(n).Z_(e)}function uy(n){n.Va=new w5({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),Bc(n).start(),n.Ra.ua()}function fy(n){return sl(n)&&!Bc(n).x_()&&n.Ia.size>0}function sl(n){return Ue(n).Ea.size===0}function wT(n){n.Va=void 0}async function IM(n){n.Ra.set("Online")}async function NM(n){n.Ia.forEach(((e,t)=>{cy(n,e)}))}async function RM(n,e){wT(n),fy(n)?(n.Ra.ha(e),uy(n)):n.Ra.set("Unknown")}async function OM(n,e,t){if(n.Ra.set("Online"),e instanceof aT&&e.state===2&&e.cause)try{await(async function(i,a){const o=a.cause;for(const c of a.targetIds)i.Ia.has(c)&&(await i.remoteSyncer.rejectListen(c,o),i.Ia.delete(c),i.Va.removeTarget(c))})(n,e)}catch(r){Se(nl,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await v0(n,r)}else if(e instanceof Xd?n.Va.Ze(e):e instanceof iT?n.Va.st(e):n.Va.tt(e),!t.isEqual(je.min()))try{const r=await vT(n.localStore);t.compareTo(r)>=0&&await(function(a,o){const c=a.Va.Tt(o);return c.targetChanges.forEach(((u,h)=>{if(u.resumeToken.approximateByteSize()>0){const p=a.Ia.get(h);p&&a.Ia.set(h,p.withResumeToken(u.resumeToken,o))}})),c.targetMismatches.forEach(((u,h)=>{const p=a.Ia.get(u);if(!p)return;a.Ia.set(u,p.withResumeToken(ar.EMPTY_BYTE_STRING,p.snapshotVersion)),xT(a,u);const g=new Us(p.target,u,h,p.sequenceNumber);cy(a,g)})),a.remoteSyncer.applyRemoteEvent(c)})(n,t)}catch(r){Se(nl,"Failed to raise snapshot:",r),await v0(n,r)}}async function v0(n,e,t){if(!Lc(e))throw e;n.Ea.add(1),await Hf(n),n.Ra.set("Offline"),t||(t=()=>vT(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{Se(nl,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await ep(n)}))}function ET(n,e){return e().catch((t=>v0(n,t,e)))}async function tp(n){const e=Ue(n),t=ro(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Yv;for(;DM(e);)try{const i=await dM(e.localStore,r);if(i===null){e.Ta.length===0&&t.L_();break}r=i.batchId,MM(e,i)}catch(i){await v0(e,i)}AT(e)&&bT(e)}function DM(n){return sl(n)&&n.Ta.length<10}function MM(n,e){n.Ta.push(e);const t=ro(n);t.O_()&&t.X_&&t.ea(e.mutations)}function AT(n){return sl(n)&&!ro(n).x_()&&n.Ta.length>0}function bT(n){ro(n).start()}async function PM(n){ro(n).ra()}async function kM(n){const e=ro(n);for(const t of n.Ta)e.ea(t.mutations)}async function LM(n,e,t){const r=n.Ta.shift(),i=ey.from(r,e,t);await ET(n,(()=>n.remoteSyncer.applySuccessfulWrite(i))),await tp(n)}async function jM(n,e){e&&ro(n).X_&&await(async function(r,i){if((function(o){return nT(o)&&o!==ue.ABORTED})(i.code)){const a=r.Ta.shift();ro(r).B_(),await ET(r,(()=>r.remoteSyncer.rejectFailedWrite(a.batchId,i))),await tp(r)}})(n,e),AT(n)&&bT(n)}async function tA(n,e){const t=Ue(n);t.asyncQueue.verifyOperationInProgress(),Se(nl,"RemoteStore received new credentials");const r=sl(t);t.Ea.add(3),await Hf(t),r&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await ep(t)}async function BM(n,e){const t=Ue(n);e?(t.Ea.delete(2),await ep(t)):e||(t.Ea.add(2),await Hf(t),t.Ra.set("Unknown"))}function Bc(n){return n.ma||(n.ma=(function(t,r,i){const a=Ue(t);return a.sa(),new EM(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)})(n.datastore,n.asyncQueue,{Xo:IM.bind(null,n),t_:NM.bind(null,n),r_:RM.bind(null,n),H_:OM.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),fy(n)?uy(n):n.Ra.set("Unknown")):(await n.ma.stop(),wT(n))}))),n.ma}function ro(n){return n.fa||(n.fa=(function(t,r,i){const a=Ue(t);return a.sa(),new AM(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:PM.bind(null,n),r_:jM.bind(null,n),ta:kM.bind(null,n),na:LM.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await tp(n)):(await n.fa.stop(),n.Ta.length>0&&(Se(nl,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hy{constructor(e,t,r,i,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new pa,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((o=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,a){const o=Date.now()+r,c=new hy(e,t,o,i,a);return c.start(r),c}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new xe(ue.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function dy(n,e){if(Qa("AsyncQueue",`${e}: ${n}`),Lc(n))return new xe(ue.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gc{static emptySet(e){return new gc(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||Oe.comparator(t.key,r.key):(t,r)=>Oe.comparator(t.key,r.key),this.keyedMap=Ju(),this.sortedSet=new en(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,r)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof gc)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new gc;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nA{constructor(){this.ga=new en(Oe.comparator)}track(e){const t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):ke(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,r)=>{e.push(r)})),e}}class bc{constructor(e,t,r,i,a,o,c,u,h){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=c,this.excludesMetadataChanges=u,this.hasCachedResults=h}static fromInitialDocuments(e,t,r,i,a){const o=[];return t.forEach((c=>{o.push({type:0,doc:c})})),new bc(e,t,gc.emptySet(t),o,r,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&X0(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VM{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class FM{constructor(){this.queries=rA(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){const i=Ue(t),a=i.queries;i.queries=rA(),a.forEach(((o,c)=>{for(const u of c.Sa)u.onError(r)}))})(this,new xe(ue.ABORTED,"Firestore shutting down"))}}function rA(){return new al((n=>HC(n)),X0)}async function py(n,e){const t=Ue(n);let r=3;const i=e.query;let a=t.queries.get(i);a?!a.ba()&&e.Da()&&(r=2):(a=new VM,r=e.Da()?0:1);try{switch(r){case 0:a.wa=await t.onListen(i,!0);break;case 1:a.wa=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(o){const c=dy(o,`Initialization of query '${rc(e.query)}' failed`);return void e.onError(c)}t.queries.set(i,a),a.Sa.push(e),e.va(t.onlineState),a.wa&&e.Fa(a.wa)&&gy(t)}async function my(n,e){const t=Ue(n),r=e.query;let i=3;const a=t.queries.get(r);if(a){const o=a.Sa.indexOf(e);o>=0&&(a.Sa.splice(o,1),a.Sa.length===0?i=e.Da()?0:1:!a.ba()&&e.Da()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function UM(n,e){const t=Ue(n);let r=!1;for(const i of e){const a=i.query,o=t.queries.get(a);if(o){for(const c of o.Sa)c.Fa(i)&&(r=!0);o.wa=i}}r&&gy(t)}function zM(n,e,t){const r=Ue(n),i=r.queries.get(e);if(i)for(const a of i.Sa)a.onError(t);r.queries.delete(e)}function gy(n){n.Ca.forEach((e=>{e.next()}))}var Xg,iA;(iA=Xg||(Xg={})).Ma="default",iA.Cache="cache";class vy{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new bc(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const r=t!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=bc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Xg.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ST{constructor(e){this.key=e}}class CT{constructor(e){this.key=e}}class HM{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=ot(),this.mutatedKeys=ot(),this.eu=GC(e),this.tu=new gc(this.eu)}get nu(){return this.Ya}ru(e,t){const r=t?t.iu:new nA,i=t?t.tu:this.tu;let a=t?t.mutatedKeys:this.mutatedKeys,o=i,c=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,h=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal(((p,g)=>{const _=i.get(p),w=Y0(this.query,g)?g:null,A=!!_&&this.mutatedKeys.has(_.key),S=!!w&&(w.hasLocalMutations||this.mutatedKeys.has(w.key)&&w.hasCommittedMutations);let D=!1;_&&w?_.data.isEqual(w.data)?A!==S&&(r.track({type:3,doc:w}),D=!0):this.su(_,w)||(r.track({type:2,doc:w}),D=!0,(u&&this.eu(w,u)>0||h&&this.eu(w,h)<0)&&(c=!0)):!_&&w?(r.track({type:0,doc:w}),D=!0):_&&!w&&(r.track({type:1,doc:_}),D=!0,(u||h)&&(c=!0)),D&&(w?(o=o.add(w),a=S?a.add(p):a.delete(p)):(o=o.delete(p),a=a.delete(p)))})),this.query.limit!==null)for(;o.size>this.query.limit;){const p=this.query.limitType==="F"?o.last():o.first();o=o.delete(p.key),a=a.delete(p.key),r.track({type:1,doc:p})}return{tu:o,iu:r,Cs:c,mutatedKeys:a}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const a=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort(((p,g)=>(function(w,A){const S=D=>{switch(D){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ke(20277,{Rt:D})}};return S(w)-S(A)})(p.type,g.type)||this.eu(p.doc,g.doc))),this.ou(r),i=i??!1;const c=t&&!i?this._u():[],u=this.Xa.size===0&&this.current&&!i?1:0,h=u!==this.Za;return this.Za=u,o.length!==0||h?{snapshot:new bc(this.query,e.tu,a,o,e.mutatedKeys,u===0,h,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:c}:{au:c}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new nA,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=ot(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const t=[];return e.forEach((r=>{this.Xa.has(r)||t.push(new CT(r))})),this.Xa.forEach((r=>{e.has(r)||t.push(new ST(r))})),t}cu(e){this.Ya=e.Qs,this.Xa=ot();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return bc.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const yy="SyncEngine";class GM{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class qM{constructor(e){this.key=e,this.hu=!1}}class $M{constructor(e,t,r,i,a,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new al((c=>HC(c)),X0),this.Iu=new Map,this.Eu=new Set,this.du=new en(Oe.comparator),this.Au=new Map,this.Ru=new ry,this.Vu={},this.mu=new Map,this.fu=Ac.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function XM(n,e,t=!0){const r=DT(n);let i;const a=r.Tu.get(e);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),i=a.view.lu()):i=await TT(r,e,t,!0),i}async function YM(n,e){const t=DT(n);await TT(t,e,!0,!1)}async function TT(n,e,t,r){const i=await pM(n.localStore,ma(e)),a=i.targetId,o=n.sharedClientState.addLocalQueryTarget(a,t);let c;return r&&(c=await KM(n,e,a,o==="current",i.resumeToken)),n.isPrimaryClient&&t&&_T(n.remoteStore,i),c}async function KM(n,e,t,r,i){n.pu=(g,_,w)=>(async function(S,D,C,P){let V=D.view.ru(C);V.Cs&&(V=await WE(S.localStore,D.query,!1).then((({documents:I})=>D.view.ru(I,V))));const H=P&&P.targetChanges.get(D.targetId),X=P&&P.targetMismatches.get(D.targetId)!=null,F=D.view.applyChanges(V,S.isPrimaryClient,H,X);return sA(S,D.targetId,F.au),F.snapshot})(n,g,_,w);const a=await WE(n.localStore,e,!0),o=new HM(e,a.Qs),c=o.ru(a.documents),u=zf.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),h=o.applyChanges(c,n.isPrimaryClient,u);sA(n,t,h.au);const p=new GM(e,t,o);return n.Tu.set(e,p),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),h.snapshot}async function WM(n,e,t){const r=Ue(n),i=r.Tu.get(e),a=r.Iu.get(i.targetId);if(a.length>1)return r.Iu.set(i.targetId,a.filter((o=>!X0(o,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await qg(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),t&&ly(r.remoteStore,i.targetId),Yg(r,i.targetId)})).catch(kc)):(Yg(r,i.targetId),await qg(r.localStore,i.targetId,!0))}async function QM(n,e){const t=Ue(n),r=t.Tu.get(e),i=t.Iu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),ly(t.remoteStore,r.targetId))}async function ZM(n,e,t){const r=a9(n);try{const i=await(function(o,c){const u=Ue(o),h=Ot.now(),p=c.reduce(((w,A)=>w.add(A.key)),ot());let g,_;return u.persistence.runTransaction("Locally write mutations","readwrite",(w=>{let A=Za(),S=ot();return u.Ns.getEntries(w,p).next((D=>{A=D,A.forEach(((C,P)=>{P.isValidDocument()||(S=S.add(C))}))})).next((()=>u.localDocuments.getOverlayedDocuments(w,A))).next((D=>{g=D;const C=[];for(const P of c){const V=m5(P,g.get(P.key).overlayedDocument);V!=null&&C.push(new co(P.key,V,kC(V.value.mapValue),rr.exists(!0)))}return u.mutationQueue.addMutationBatch(w,h,C,c)})).next((D=>{_=D;const C=D.applyToLocalDocumentSet(g,S);return u.documentOverlayCache.saveOverlays(w,D.batchId,C)}))})).then((()=>({batchId:_.batchId,changes:$C(g)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(o,c,u){let h=o.Vu[o.currentUser.toKey()];h||(h=new en(st)),h=h.insert(c,u),o.Vu[o.currentUser.toKey()]=h})(r,i.batchId,t),await Gf(r,i.changes),await tp(r.remoteStore)}catch(i){const a=dy(i,"Failed to persist write");t.reject(a)}}async function IT(n,e){const t=Ue(n);try{const r=await fM(t.localStore,e);e.targetChanges.forEach(((i,a)=>{const o=t.Au.get(a);o&&(ft(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?o.hu=!0:i.modifiedDocuments.size>0?ft(o.hu,14607):i.removedDocuments.size>0&&(ft(o.hu,42227),o.hu=!1))})),await Gf(t,r,e)}catch(r){await kc(r)}}function aA(n,e,t){const r=Ue(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const i=[];r.Tu.forEach(((a,o)=>{const c=o.view.va(e);c.snapshot&&i.push(c.snapshot)})),(function(o,c){const u=Ue(o);u.onlineState=c;let h=!1;u.queries.forEach(((p,g)=>{for(const _ of g.Sa)_.va(c)&&(h=!0)})),h&&gy(u)})(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function JM(n,e,t){const r=Ue(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Au.get(e),a=i&&i.key;if(a){let o=new en(Oe.comparator);o=o.insert(a,Hn.newNoDocument(a,je.min()));const c=ot().add(a),u=new Z0(je.min(),new Map,new en(st),o,c);await IT(r,u),r.du=r.du.remove(a),r.Au.delete(e),_y(r)}else await qg(r.localStore,e,!1).then((()=>Yg(r,e,t))).catch(kc)}async function e9(n,e){const t=Ue(n),r=e.batch.batchId;try{const i=await uM(t.localStore,e);RT(t,r,null),NT(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await Gf(t,i)}catch(i){await kc(i)}}async function t9(n,e,t){const r=Ue(n);try{const i=await(function(o,c){const u=Ue(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",(h=>{let p;return u.mutationQueue.lookupMutationBatch(h,c).next((g=>(ft(g!==null,37113),p=g.keys(),u.mutationQueue.removeMutationBatch(h,g)))).next((()=>u.mutationQueue.performConsistencyCheck(h))).next((()=>u.documentOverlayCache.removeOverlaysForBatchId(h,p,c))).next((()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,p))).next((()=>u.localDocuments.getDocuments(h,p)))}))})(r.localStore,e);RT(r,e,t),NT(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await Gf(r,i)}catch(i){await kc(i)}}function NT(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function RT(n,e,t){const r=Ue(n);let i=r.Vu[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(t?a.reject(t):a.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function Yg(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Iu.get(e))n.Tu.delete(r),t&&n.Pu.yu(r,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((r=>{n.Ru.containsKey(r)||OT(n,r)}))}function OT(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(ly(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),_y(n))}function sA(n,e,t){for(const r of t)r instanceof ST?(n.Ru.addReference(r.key,e),n9(n,r)):r instanceof CT?(Se(yy,"Document no longer in limbo: "+r.key),n.Ru.removeReference(r.key,e),n.Ru.containsKey(r.key)||OT(n,r.key)):ke(19791,{wu:r})}function n9(n,e){const t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Eu.has(r)||(Se(yy,"New document in limbo: "+t),n.Eu.add(r),_y(n))}function _y(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new Oe(jt.fromString(e)),r=n.fu.next();n.Au.set(r,new qM(t)),n.du=n.du.insert(t,r),_T(n.remoteStore,new Us(ma($0(t.path)),r,"TargetPurposeLimboResolution",G0.ce))}}async function Gf(n,e,t){const r=Ue(n),i=[],a=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach(((c,u)=>{o.push(r.pu(u,e,t).then((h=>{if((h||t)&&r.isPrimaryClient){const p=h?!h.fromCache:t?.targetChanges.get(u.targetId)?.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(h){i.push(h);const p=ay.As(u.targetId,h);a.push(p)}})))})),await Promise.all(o),r.Pu.H_(i),await(async function(u,h){const p=Ue(u);try{await p.persistence.runTransaction("notifyLocalViewChanges","readwrite",(g=>de.forEach(h,(_=>de.forEach(_.Es,(w=>p.persistence.referenceDelegate.addReference(g,_.targetId,w))).next((()=>de.forEach(_.ds,(w=>p.persistence.referenceDelegate.removeReference(g,_.targetId,w)))))))))}catch(g){if(!Lc(g))throw g;Se(sy,"Failed to update sequence numbers: "+g)}for(const g of h){const _=g.targetId;if(!g.fromCache){const w=p.Ms.get(_),A=w.snapshotVersion,S=w.withLastLimboFreeSnapshotVersion(A);p.Ms=p.Ms.insert(_,S)}}})(r.localStore,a))}async function r9(n,e){const t=Ue(n);if(!t.currentUser.isEqual(e)){Se(yy,"User change. New user:",e.toKey());const r=await gT(t.localStore,e);t.currentUser=e,(function(a,o){a.mu.forEach((c=>{c.forEach((u=>{u.reject(new xe(ue.CANCELLED,o))}))})),a.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Gf(t,r.Ls)}}function i9(n,e){const t=Ue(n),r=t.Au.get(e);if(r&&r.hu)return ot().add(r.key);{let i=ot();const a=t.Iu.get(e);if(!a)return i;for(const o of a){const c=t.Tu.get(o);i=i.unionWith(c.view.nu)}return i}}function DT(n){const e=Ue(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=IT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=i9.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=JM.bind(null,e),e.Pu.H_=UM.bind(null,e.eventManager),e.Pu.yu=zM.bind(null,e.eventManager),e}function a9(n){const e=Ue(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=e9.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=t9.bind(null,e),e}class y0{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=J0(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return cM(this.persistence,new sM,e.initialUser,this.serializer)}Cu(e){return new mT(iy.mi,this.serializer)}Du(e){return new gM}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}y0.provider={build:()=>new y0};class s9 extends y0{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){ft(this.persistence.referenceDelegate instanceof g0,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new q5(r,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Cr.withCacheSize(this.cacheSizeBytes):Cr.DEFAULT;return new mT((r=>g0.mi(r,t)),this.serializer)}}class Kg{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>aA(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=r9.bind(null,this.syncEngine),await BM(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new FM})()}createDatastore(e){const t=J0(e.databaseInfo.databaseId),r=(function(a){return new wM(a)})(e.databaseInfo);return(function(a,o,c,u){return new SM(a,o,c,u)})(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return(function(r,i,a,o,c){return new TM(r,i,a,o,c)})(this.localStore,this.datastore,e.asyncQueue,(t=>aA(this.syncEngine,t,0)),(function(){return JE.v()?new JE:new vM})())}createSyncEngine(e,t){return(function(i,a,o,c,u,h,p){const g=new $M(i,a,o,c,u,h);return p&&(g.gu=!0),g})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const r=Ue(t);Se(nl,"RemoteStore shutting down."),r.Ea.add(5),await Hf(r),r.Aa.shutdown(),r.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Kg.provider={build:()=>new Kg};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xy{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Qa("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o9{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new xe(ue.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await(async function(i,a){const o=Ue(i),c={documents:a.map((g=>m0(o.serializer,g)))},u=await o.Ho("BatchGetDocuments",o.serializer.databaseId,jt.emptyPath(),c,a.length),h=new Map;u.forEach((g=>{const _=I5(o.serializer,g);h.set(_.key.toString(),_)}));const p=[];return a.forEach((g=>{const _=h.get(g.toString());ft(!!_,55234,{key:g}),p.push(_)})),p})(this.datastore,e);return t.forEach((r=>this.recordVersion(r))),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Q0(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((t=>{e.delete(t.key.toString())})),e.forEach(((t,r)=>{const i=Oe.fromPath(r);this.mutations.push(new tT(i,this.precondition(i)))})),await(async function(r,i){const a=Ue(r),o={writes:i.map((c=>uT(a.serializer,c)))};await a.Go("Commit",a.serializer.databaseId,jt.emptyPath(),o)})(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw ke(50498,{Gu:e.constructor.name});t=je.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new xe(ue.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(je.min())?rr.exists(!1):rr.updateTime(t):rr.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(je.min()))throw new xe(ue.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return rr.updateTime(t)}return rr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l9{constructor(e,t,r,i,a){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=a,this.zu=r.maxAttempts,this.M_=new oy(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Ju()}Ju(){this.M_.p_((async()=>{const e=new o9(this.datastore),t=this.Hu(e);t&&t.then((r=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(r)})).catch((i=>{this.Yu(i)}))))})).catch((r=>{this.Yu(r)}))}))}Hu(e){try{const t=this.updateFunction(e);return!Ff(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Yu(e){this.zu>0&&this.Zu(e)?(this.zu-=1,this.asyncQueue.enqueueAndForget((()=>(this.Ju(),Promise.resolve())))):this.deferred.reject(e)}Zu(e){if(e?.name==="FirebaseError"){const t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!nT(t)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const io="FirestoreClient";class c9{constructor(e,t,r,i,a){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=cr.UNAUTHENTICATED,this.clientId=Xv.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,(async o=>{Se(io,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(r,(o=>(Se(io,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new pa;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=dy(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function Lm(n,e){n.asyncQueue.verifyOperationInProgress(),Se(io,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener((async i=>{r.isEqual(i)||(await gT(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function oA(n,e){n.asyncQueue.verifyOperationInProgress();const t=await u9(n);Se(io,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((r=>tA(e.remoteStore,r))),n.setAppCheckTokenChangeListener(((r,i)=>tA(e.remoteStore,i))),n._onlineComponents=e}async function u9(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Se(io,"Using user provided OfflineComponentProvider");try{await Lm(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(i){return i.name==="FirebaseError"?i.code===ue.FAILED_PRECONDITION||i.code===ue.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(t))throw t;_c("Error using user provided cache. Falling back to memory cache: "+t),await Lm(n,new y0)}}else Se(io,"Using default OfflineComponentProvider"),await Lm(n,new s9(void 0));return n._offlineComponents}async function wy(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Se(io,"Using user provided OnlineComponentProvider"),await oA(n,n._uninitializedComponentsProvider._online)):(Se(io,"Using default OnlineComponentProvider"),await oA(n,new Kg))),n._onlineComponents}function f9(n){return wy(n).then((e=>e.syncEngine))}function h9(n){return wy(n).then((e=>e.datastore))}async function _0(n){const e=await wy(n),t=e.eventManager;return t.onListen=XM.bind(null,e.syncEngine),t.onUnlisten=WM.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=YM.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=QM.bind(null,e.syncEngine),t}function d9(n,e,t={}){const r=new pa;return n.asyncQueue.enqueueAndForget((async()=>(function(a,o,c,u,h){const p=new xy({next:_=>{p.Nu(),o.enqueueAndForget((()=>my(a,g)));const w=_.docs.has(c);!w&&_.fromCache?h.reject(new xe(ue.UNAVAILABLE,"Failed to get document because the client is offline.")):w&&_.fromCache&&u&&u.source==="server"?h.reject(new xe(ue.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(_)},error:_=>h.reject(_)}),g=new vy($0(c.path),p,{includeMetadataChanges:!0,qa:!0});return py(a,g)})(await _0(n),n.asyncQueue,e,t,r))),r.promise}function p9(n,e,t={}){const r=new pa;return n.asyncQueue.enqueueAndForget((async()=>(function(a,o,c,u,h){const p=new xy({next:_=>{p.Nu(),o.enqueueAndForget((()=>my(a,g))),_.fromCache&&u.source==="server"?h.reject(new xe(ue.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(_)},error:_=>h.reject(_)}),g=new vy(c,p,{includeMetadataChanges:!0,qa:!0});return py(a,g)})(await _0(n),n.asyncQueue,e,t,r))),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MT(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lA=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PT="firestore.googleapis.com",cA=!0;class uA{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new xe(ue.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=PT,this.ssl=cA}else this.host=e.host,this.ssl=e.ssl??cA;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=pT;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<H5)throw new xe(ue.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}TD("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=MT(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new xe(ue.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new xe(ue.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new xe(ue.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class np{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new uA({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new xe(ue.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new xe(ue.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new uA(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new vD;switch(r.type){case"firstParty":return new wD(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new xe(ue.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const r=lA.get(t);r&&(Se("ComponentProvider","Removing Datastore"),lA.delete(t),r.terminate())})(this),Promise.resolve()}}function m9(n,e,t,r={}){n=ci(n,np);const i=Oc(e),a=n._getSettings(),o={...a,emulatorOptions:n._getEmulatorOptions()},c=`${e}:${t}`;i&&(TS(`https://${c}`),IS("Firestore",!0)),a.host!==PT&&a.host!==c&&_c("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u={...a,host:c,ssl:i,emulatorOptions:r};if(!Zo(u,o)&&(n._setSettings(u),r.mockUserToken)){let h,p;if(typeof r.mockUserToken=="string")h=r.mockUserToken,p=cr.MOCK_USER;else{h=IR(r.mockUserToken,n._app?.options.projectId);const g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new xe(ue.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new cr(g)}n._authCredentials=new yD(new AC(h,p))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class es{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new es(this.firestore,e,this._query)}}class rn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Xs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new rn(this.firestore,e,this._key)}toJSON(){return{type:rn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(Vf(t,rn._jsonSchema))return new rn(e,r||null,new Oe(jt.fromString(t.referencePath)))}}rn._jsonSchemaVersion="firestore/documentReference/1.0",rn._jsonSchema={type:bn("string",rn._jsonSchemaVersion),referencePath:bn("string")};class Xs extends es{constructor(e,t,r){super(e,t,$0(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new rn(this.firestore,null,new Oe(e))}withConverter(e){return new Xs(this.firestore,e,this._path)}}function rp(n,e,...t){if(n=fn(n),bC("collection","path",e),n instanceof np){const r=jt.fromString(e,...t);return AE(r),new Xs(n,null,r)}{if(!(n instanceof rn||n instanceof Xs))throw new xe(ue.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(jt.fromString(e,...t));return AE(r),new Xs(n.firestore,null,r)}}function Di(n,e,...t){if(n=fn(n),arguments.length===1&&(e=Xv.newId()),bC("doc","path",e),n instanceof np){const r=jt.fromString(e,...t);return EE(r),new rn(n,null,new Oe(r))}{if(!(n instanceof rn||n instanceof Xs))throw new xe(ue.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(jt.fromString(e,...t));return EE(r),new rn(n.firestore,n instanceof Xs?n.converter:null,new Oe(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fA="AsyncQueue";class hA{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new oy(this,"async_queue_retry"),this._c=()=>{const r=km();r&&Se(fA,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const t=km();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=km();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new pa;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Lc(e))throw e;Se(fA,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,Qa("INTERNAL UNHANDLED ERROR: ",dA(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const i=hy.createAndSchedule(this,e,t,r,(a=>this.hc(a)));return this.tc.push(i),i}uc(){this.nc&&ke(47125,{Pc:dA(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,r)=>t.targetTimeMs-r.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function dA(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pA(n){return(function(t,r){if(typeof t!="object"||t===null)return!1;const i=t;for(const a of r)if(a in i&&typeof i[a]=="function")return!0;return!1})(n,["next","error","complete"])}class ao extends np{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new hA,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new hA(e),this._firestoreClient=void 0,await e}}}function g9(n,e){const t=typeof n=="object"?n:DS(),r=typeof n=="string"?n:c0,i=jv(t,"firestore").getImmediate({identifier:r});if(!i._initialized){const a=CR("firestore");a&&m9(i,...a)}return i}function Vc(n){if(n._terminated)throw new xe(ue.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||v9(n),n._firestoreClient}function v9(n){const e=n._freezeSettings(),t=(function(i,a,o,c){return new VD(i,a,o,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,MT(c.experimentalLongPollingOptions),c.useFetchStreams,c.isUsingEmulator)})(n._databaseId,n._app?.options.appId||"",n._persistenceKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new c9(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(i){const a=i?._online.build();return{_offline:i?._offline.build(a),_online:a}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ur{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ur(ar.fromBase64String(e))}catch(t){throw new xe(ue.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Ur(ar.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Ur._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Vf(e,Ur._jsonSchema))return Ur.fromBase64String(e.bytes)}}Ur._jsonSchemaVersion="firestore/bytes/1.0",Ur._jsonSchema={type:bn("string",Ur._jsonSchemaVersion),bytes:bn("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qf{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new xe(ue.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new nr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ip{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ga{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new xe(ue.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new xe(ue.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return st(this._lat,e._lat)||st(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:ga._jsonSchemaVersion}}static fromJSON(e){if(Vf(e,ga._jsonSchema))return new ga(e.latitude,e.longitude)}}ga._jsonSchemaVersion="firestore/geoPoint/1.0",ga._jsonSchema={type:bn("string",ga._jsonSchemaVersion),latitude:bn("number"),longitude:bn("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class va{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==i[a])return!1;return!0})(this._values,e._values)}toJSON(){return{type:va._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Vf(e,va._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new va(e.vectorValues);throw new xe(ue.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}va._jsonSchemaVersion="firestore/vectorValue/1.0",va._jsonSchema={type:bn("string",va._jsonSchemaVersion),vectorValues:bn("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y9=/^__.*__$/;class _9{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new co(e,this.data,this.fieldMask,t,this.fieldTransforms):new Uf(e,this.data,t,this.fieldTransforms)}}class kT{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new co(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function LT(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ke(40011,{Ac:n})}}class Ey{constructor(e,t,r,i,a,o){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,a===void 0&&this.Rc(),this.fieldTransforms=a||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Ey({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.gc(e),r}yc(e){const t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return x0(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(LT(this.Ac)&&y9.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class x9{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||J0(e)}Cc(e,t,r,i=!1){return new Ey({Ac:e,methodName:t,Dc:r,path:nr.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ap(n){const e=n._freezeSettings(),t=J0(n._databaseId);return new x9(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Ay(n,e,t,r,i,a={}){const o=n.Cc(a.merge||a.mergeFields?2:0,e,t,i);Sy("Data must be an object, but it was:",o,r);const c=VT(r,o);let u,h;if(a.merge)u=new zr(o.fieldMask),h=o.fieldTransforms;else if(a.mergeFields){const p=[];for(const g of a.mergeFields){const _=Wg(e,g,t);if(!o.contains(_))throw new xe(ue.INVALID_ARGUMENT,`Field '${_}' is specified in your field mask but missing from your input data.`);UT(p,_)||p.push(_)}u=new zr(p),h=o.fieldTransforms.filter((g=>u.covers(g.field)))}else u=null,h=o.fieldTransforms;return new _9(new vr(c),u,h)}class sp extends ip{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof sp}}class by extends ip{_toFieldTransform(e){return new f5(e.path,new Cf)}isEqual(e){return e instanceof by}}function jT(n,e,t,r){const i=n.Cc(1,e,t);Sy("Data must be an object, but it was:",i,r);const a=[],o=vr.empty();lo(r,((u,h)=>{const p=Cy(e,u,t);h=fn(h);const g=i.yc(p);if(h instanceof sp)a.push(p);else{const _=$f(h,g);_!=null&&(a.push(p),o.set(p,_))}}));const c=new zr(a);return new kT(o,c,i.fieldTransforms)}function BT(n,e,t,r,i,a){const o=n.Cc(1,e,t),c=[Wg(e,r,t)],u=[i];if(a.length%2!=0)throw new xe(ue.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let _=0;_<a.length;_+=2)c.push(Wg(e,a[_])),u.push(a[_+1]);const h=[],p=vr.empty();for(let _=c.length-1;_>=0;--_)if(!UT(h,c[_])){const w=c[_];let A=u[_];A=fn(A);const S=o.yc(w);if(A instanceof sp)h.push(w);else{const D=$f(A,S);D!=null&&(h.push(w),p.set(w,D))}}const g=new zr(h);return new kT(p,g,o.fieldTransforms)}function w9(n,e,t,r=!1){return $f(t,n.Cc(r?4:3,e))}function $f(n,e){if(FT(n=fn(n)))return Sy("Unsupported field value:",e,n),VT(n,e);if(n instanceof ip)return(function(r,i){if(!LT(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(i);a&&i.fieldTransforms.push(a)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,i){const a=[];let o=0;for(const c of r){let u=$f(c,i.wc(o));u==null&&(u={nullValue:"NULL_VALUE"}),a.push(u),o++}return{arrayValue:{values:a}}})(n,e)}return(function(r,i){if((r=fn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return l5(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=Ot.fromDate(r);return{timestampValue:p0(i.serializer,a)}}if(r instanceof Ot){const a=new Ot(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:p0(i.serializer,a)}}if(r instanceof ga)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ur)return{bytesValue:sT(i.serializer,r._byteString)};if(r instanceof rn){const a=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(a))throw i.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:ny(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof va)return(function(o,c){return{mapValue:{fields:{[MC]:{stringValue:PC},[u0]:{arrayValue:{values:o.toArray().map((h=>{if(typeof h!="number")throw c.Sc("VectorValues must only contain numeric values.");return Jv(c.serializer,h)}))}}}}}})(r,i);throw i.Sc(`Unsupported field value: ${H0(r)}`)})(n,e)}function VT(n,e){const t={};return TC(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):lo(n,((r,i)=>{const a=$f(i,e.mc(r));a!=null&&(t[r]=a)})),{mapValue:{fields:t}}}function FT(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Ot||n instanceof ga||n instanceof Ur||n instanceof rn||n instanceof ip||n instanceof va)}function Sy(n,e,t){if(!FT(t)||!SC(t)){const r=H0(t);throw r==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+r)}}function Wg(n,e,t){if((e=fn(e))instanceof qf)return e._internalPath;if(typeof e=="string")return Cy(n,e);throw x0("Field path arguments must be of type string or ",n,!1,void 0,t)}const E9=new RegExp("[~\\*/\\[\\]]");function Cy(n,e,t){if(e.search(E9)>=0)throw x0(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new qf(...e.split("."))._internalPath}catch{throw x0(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function x0(n,e,t,r,i){const a=r&&!r.isEmpty(),o=i!==void 0;let c=`Function ${e}() called with invalid data`;t&&(c+=" (via `toFirestore()`)"),c+=". ";let u="";return(a||o)&&(u+=" (found",a&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new xe(ue.INVALID_ARGUMENT,c+n+u)}function UT(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w0{constructor(e,t,r,i,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new rn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new A9(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(op("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class A9 extends w0{data(){return super.data()}}function op(n,e){return typeof e=="string"?Cy(n,e):e instanceof qf?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zT(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new xe(ue.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Ty{}class Iy extends Ty{}function lp(n,e,...t){let r=[];e instanceof Ty&&r.push(e),r=r.concat(t),(function(a){const o=a.filter((u=>u instanceof Ny)).length,c=a.filter((u=>u instanceof cp)).length;if(o>1||o>0&&c>0)throw new xe(ue.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const i of r)n=i._apply(n);return n}class cp extends Iy{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new cp(e,t,r)}_apply(e){const t=this._parse(e);return GT(e._query,t),new es(e.firestore,e.converter,Ug(e._query,t))}_parse(e){const t=ap(e.firestore);return(function(a,o,c,u,h,p,g){let _;if(h.isKeyField()){if(p==="array-contains"||p==="array-contains-any")throw new xe(ue.INVALID_ARGUMENT,`Invalid Query. You can't perform '${p}' queries on documentId().`);if(p==="in"||p==="not-in"){gA(g,p);const A=[];for(const S of g)A.push(mA(u,a,S));_={arrayValue:{values:A}}}else _=mA(u,a,g)}else p!=="in"&&p!=="not-in"&&p!=="array-contains-any"||gA(g,p),_=w9(c,o,g,p==="in"||p==="not-in");return En.create(h,p,_)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function E0(n,e,t){const r=e,i=op("where",n);return cp._create(i,r,t)}class Ny extends Ty{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Ny(e,t)}_parse(e){const t=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return t.length===1?t[0]:ki.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(i,a){let o=i;const c=a.getFlattenedFilters();for(const u of c)GT(o,u),o=Ug(o,u)})(e._query,t),new es(e.firestore,e.converter,Ug(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Ry extends Iy{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Ry(e,t)}_apply(e){const t=(function(i,a,o){if(i.startAt!==null)throw new xe(ue.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new xe(ue.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Sf(a,o)})(e._query,this._field,this._direction);return new es(e.firestore,e.converter,(function(i,a){const o=i.explicitOrderBy.concat([a]);return new jc(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)})(e._query,t))}}function up(n,e="asc"){const t=e,r=op("orderBy",n);return Ry._create(r,t)}class Oy extends Iy{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new Oy(e,t,r)}_apply(e){return new es(e.firestore,e.converter,h0(e._query,this._limit,this._limitType))}}function HT(n){return ID("limit",n),Oy._create("limit",n,"F")}function mA(n,e,t){if(typeof(t=fn(t))=="string"){if(t==="")throw new xe(ue.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!zC(e)&&t.indexOf("/")!==-1)throw new xe(ue.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(jt.fromString(t));if(!Oe.isDocumentKey(r))throw new xe(ue.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return OE(n,new Oe(r))}if(t instanceof rn)return OE(n,t._key);throw new xe(ue.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${H0(t)}.`)}function gA(n,e){if(!Array.isArray(n)||n.length===0)throw new xe(ue.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function GT(n,e){const t=(function(i,a){for(const o of i)for(const c of o.getFlattenedFilters())if(a.indexOf(c.op)>=0)return c.op;return null})(n.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new xe(ue.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new xe(ue.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class qT{convertValue(e,t="none"){switch(no(e)){case 0:return null;case 1:return e.booleanValue;case 2:return un(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(to(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw ke(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return lo(e,((i,a)=>{r[i]=this.convertValue(a,t)})),r}convertVectorValue(e){const t=e.fields?.[u0].arrayValue?.values?.map((r=>un(r.doubleValue)));return new va(t)}convertGeoPoint(e){return new ga(un(e.latitude),un(e.longitude))}convertArray(e,t){return(e.values||[]).map((r=>this.convertValue(r,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const r=q0(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Ef(e));default:return null}}convertTimestamp(e){const t=eo(e);return new Ot(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=jt.fromString(e);ft(dT(r),9688,{name:e});const i=new Af(r.get(1),r.get(3)),a=new Oe(r.popFirst(5));return i.isEqual(t)||Qa(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dy(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class b9 extends qT{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ur(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new rn(this.firestore,null,t)}}class oc{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ys extends w0{constructor(e,t,r,i,a,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Yd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(op("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new xe(ue.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Ys._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Ys._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ys._jsonSchema={type:bn("string",Ys._jsonSchemaVersion),bundleSource:bn("string","DocumentSnapshot"),bundleName:bn("string"),bundle:bn("string")};class Yd extends Ys{data(e={}){return super.data(e)}}class Wo{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new oc(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((r=>{e.call(t,new Yd(this._firestore,this._userDataWriter,r.key,r,new oc(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new xe(ue.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(i,a){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map((c=>{const u=new Yd(i._firestore,i._userDataWriter,c.doc.key,c.doc,new oc(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);return c.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}}))}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter((c=>a||c.type!==3)).map((c=>{const u=new Yd(i._firestore,i._userDataWriter,c.doc.key,c.doc,new oc(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);let h=-1,p=-1;return c.type!==0&&(h=o.indexOf(c.doc.key),o=o.delete(c.doc.key)),c.type!==1&&(o=o.add(c.doc),p=o.indexOf(c.doc.key)),{type:S9(c.type),doc:u,oldIndex:h,newIndex:p}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new xe(ue.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Wo._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Xv.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],i=[];return this.docs.forEach((a=>{a._document!==null&&(t.push(a._document),r.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),i.push(a.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function S9(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ke(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function My(n){n=ci(n,rn);const e=ci(n.firestore,ao);return d9(Vc(e),n._key).then((t=>YT(e,n,t)))}Wo._jsonSchemaVersion="firestore/querySnapshot/1.0",Wo._jsonSchema={type:bn("string",Wo._jsonSchemaVersion),bundleSource:bn("string","QuerySnapshot"),bundleName:bn("string"),bundle:bn("string")};class fp extends qT{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ur(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new rn(this.firestore,null,t)}}function $T(n){n=ci(n,es);const e=ci(n.firestore,ao),t=Vc(e),r=new fp(e);return zT(n._query),p9(t,n._query).then((i=>new Wo(e,r,n,i)))}function C9(n,e,t){n=ci(n,rn);const r=ci(n.firestore,ao),i=Dy(n.converter,e,t);return XT(r,[Ay(ap(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,rr.none())])}function hp(n,...e){n=fn(n);let t={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||pA(e[r])||(t=e[r++]);const i={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(pA(e[r])){const u=e[r];e[r]=u.next?.bind(u),e[r+1]=u.error?.bind(u),e[r+2]=u.complete?.bind(u)}let a,o,c;if(n instanceof rn)o=ci(n.firestore,ao),c=$0(n._key.path),a={next:u=>{e[r]&&e[r](YT(o,n,u))},error:e[r+1],complete:e[r+2]};else{const u=ci(n,es);o=ci(u.firestore,ao),c=u._query;const h=new fp(o);a={next:p=>{e[r]&&e[r](new Wo(o,h,u,p))},error:e[r+1],complete:e[r+2]},zT(n._query)}return(function(h,p,g,_){const w=new xy(_),A=new vy(p,w,g);return h.asyncQueue.enqueueAndForget((async()=>py(await _0(h),A))),()=>{w.Nu(),h.asyncQueue.enqueueAndForget((async()=>my(await _0(h),A)))}})(Vc(o),c,i,a)}function XT(n,e){return(function(r,i){const a=new pa;return r.asyncQueue.enqueueAndForget((async()=>ZM(await f9(r),i,a))),a.promise})(Vc(n),e)}function YT(n,e,t){const r=t.docs.get(e._key),i=new fp(n);return new Ys(n,i,e._key,r,new oc(t.hasPendingWrites,t.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T9={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I9{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=ap(e)}set(e,t,r){this._verifyNotCommitted();const i=zs(e,this._firestore),a=Dy(i.converter,t,r),o=Ay(this._dataReader,"WriteBatch.set",i._key,a,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,rr.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const a=zs(e,this._firestore);let o;return o=typeof(t=fn(t))=="string"||t instanceof qf?BT(this._dataReader,"WriteBatch.update",a._key,t,r,i):jT(this._dataReader,"WriteBatch.update",a._key,t),this._mutations.push(o.toMutation(a._key,rr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=zs(e,this._firestore);return this._mutations=this._mutations.concat(new Q0(t._key,rr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new xe(ue.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function zs(n,e){if((n=fn(n)).firestore!==e)throw new xe(ue.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N9{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=ap(e)}get(e){const t=zs(e,this._firestore),r=new b9(this._firestore);return this._transaction.lookup([t._key]).then((i=>{if(!i||i.length!==1)return ke(24041);const a=i[0];if(a.isFoundDocument())return new w0(this._firestore,r,a.key,a,t.converter);if(a.isNoDocument())return new w0(this._firestore,r,t._key,null,t.converter);throw ke(18433,{doc:a})}))}set(e,t,r){const i=zs(e,this._firestore),a=Dy(i.converter,t,r),o=Ay(this._dataReader,"Transaction.set",i._key,a,i.converter!==null,r);return this._transaction.set(i._key,o),this}update(e,t,r,...i){const a=zs(e,this._firestore);let o;return o=typeof(t=fn(t))=="string"||t instanceof qf?BT(this._dataReader,"Transaction.update",a._key,t,r,i):jT(this._dataReader,"Transaction.update",a._key,t),this._transaction.update(a._key,o),this}delete(e){const t=zs(e,this._firestore);return this._transaction.delete(t._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R9 extends N9{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=zs(e,this._firestore),r=new fp(this._firestore);return super.get(e).then((i=>new Ys(this._firestore,r,t._key,i._document,new oc(!1,!1),t.converter)))}}function O9(n,e,t){n=ci(n,ao);const r={...T9,...t};return(function(a){if(a.maxAttempts<1)throw new xe(ue.INVALID_ARGUMENT,"Max attempts must be at least 1")})(r),(function(a,o,c){const u=new pa;return a.asyncQueue.enqueueAndForget((async()=>{const h=await h9(a);new l9(a.asyncQueue,h,c,o,u).ju()})),u.promise})(Vc(n),(i=>e(new R9(n,i))),r)}function Sc(){return new by("serverTimestamp")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KT(n){return Vc(n=ci(n,ao)),new I9(n,(e=>XT(n,e)))}(function(e,t=!0){(function(i){Pc=i})(Dc),yc(new Jo("firestore",((r,{instanceIdentifier:i,options:a})=>{const o=r.getProvider("app").getImmediate(),c=new ao(new _D(r.getProvider("auth-internal")),new ED(o,r.getProvider("app-check-internal")),(function(h,p){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new xe(ue.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Af(h.options.projectId,p)})(o,i),o);return a={useFetchStreams:t,...a},c._setSettings(a),c}),"PUBLIC").setMultipleInstances(!0)),qs(yE,_E,e),qs(yE,_E,"esm2020")})();const Qg={apiKey:"AIzaSyBxVSYgc9mqtDeczSZjOcPn0D-sB0PBUKM",authDomain:"ichinikai-order.firebaseapp.com",projectId:"ichinikai-order",storageBucket:"ichinikai-order.appspot.com",messagingSenderId:"829152459225",appId:"1:829152459225:web:a8966a583e54d7553ac1c8"};function D9(n){const e=Object.entries(n).filter(([,t])=>typeof t>"u").map(([t])=>t);if(e.length>0)throw new Error(`Firebase: ${e.join(", ")}. Vite.env`)}const WT=Object.entries(Qg).filter(([,n])=>!n||n==="undefined").map(([n])=>n),QT=WT.length>0,Py=QT,za=Py;let jm=null,Zg,Jg;if(!Py)D9(Qg),jm=Xw().length?Xw()[0]:OS(Qg),Zg=dD(jm),Jg=g9(jm);else{const n=QT?`Firebase: ${WT.join(", ")}`:"";console.info(`Firebase initialization skipped: ${n}`),Zg={currentUser:null},Jg={}}const Ri=Zg,Gn=Jg;async function ZT(){if(!Py){if(!Ri.currentUser){await(await nC(Ri)).user.getIdToken(!0);return}Ri.currentUser.isAnonymous&&await Ri.currentUser.getIdToken(!0)}}const JT=k.createContext(void 0),Bm=["admin","kitchen","staff"];function M9(n){const e=[];return n.admin&&e.push("admin"),n.kitchen&&e.push("kitchen"),n.staff&&e.push("staff"),e}function P9({children:n}){const[e,t]=k.useState(()=>za?"signed-in":"loading"),[r,i]=k.useState(null),[a,o]=k.useState(()=>za?Bm:[]),[c,u]=k.useState(null);k.useEffect(()=>{if(za){t("signed-in"),i(null),o(Bm),u(null);return}const w=aC(Ri,async A=>{if(!A){i(null),o([]),t("signed-out");return}try{const S=await A.getIdTokenResult(!0),D=M9(S.claims);i(A),o(D),t("signed-in"),u(null)}catch(S){console.error("Failed to refresh token claims",S),i(A),o([]),t("signed-in"),u("")}});return()=>w()},[]);const h=k.useCallback(async({email:w,password:A})=>{if(u(null),za){t("signed-in"),i(null),o(Bm);return}try{await J6(Ri,w,A)}catch(S){console.error("Failed to sign in",S);const D=S instanceof Error?S.message:"";throw u(D),S}},[]),p=k.useCallback(async()=>{if(u(null),za){t("signed-out"),i(null),o([]);return}await nO(Ri)},[]),g=k.useCallback(w=>{const A=Array.isArray(w)?w:[w];return A.length===0||za?!0:A.some(S=>a.includes(S))},[a]),_=k.useMemo(()=>({status:e,user:r,roles:a,error:c,signIn:h,signOut:p,hasRole:g}),[c,g,a,h,p,e,r]);return m.jsx(JT.Provider,{value:_,children:n})}function dp(){const n=k.useContext(JT);if(!n)throw new Error("useAuth must be used within an AuthProvider");return n}const wn=n=>{const e="/Ichinikai/",t=e.endsWith("/")?e:`${e}/`,r=n.replace(/^\/+/u,"");return`${t}${r}`},k9={wheat:{key:"wheat",label:"",icon:wn("allergy_icon/Wheat.png")},egg:{key:"egg",label:"",icon:wn("allergy_icon/Egg.png")},soy:{key:"soy",label:"",icon:wn("allergy_icon/Soy.png")}},e3={potaufeu:{key:"potaufeu",label:"",description:"",price:250,image:wn("menu_photo/5.png"),allergens:["soy"],soldOut:!1},plain:{key:"plain",label:"()",description:"",price:250,image:wn("menu_photo/1.png"),allergens:["wheat","egg"],soldOut:!1},cocoa:{key:"cocoa",label:"()",description:"",price:250,image:wn("menu_photo/2.png"),allergens:["wheat","egg","soy"],soldOut:!1},kinako:{key:"kinako",label:"()",description:"",price:250,image:wn("menu_photo/3.png"),allergens:["wheat","soy"],soldOut:!1},garlic:{key:"garlic",label:"()",description:"",price:250,image:wn("menu_photo/4.png"),allergens:["wheat"],soldOut:!1},drink_hojicha:{key:"drink_hojicha",label:"()",description:"",price:150,image:wn("menu_photo/6.png"),allergens:[],soldOut:!1},drink_cocoa:{key:"drink_cocoa",label:"()",description:"",price:150,image:wn("menu_photo/7.png"),allergens:[],soldOut:!1},drink_coffee:{key:"drink_coffee",label:"()",description:"",price:150,image:wn("menu_photo/8.png"),allergens:[],soldOut:!1},drink_milkcoffee:{key:"drink_milkcoffee",label:"()",description:"",price:150,image:wn("menu_photo/9.png"),allergens:[],soldOut:!1},minestrone:{key:"minestrone",label:"",description:" ",price:250,image:wn("menu_photo/5.png"),allergens:["soy"],soldOut:!1},strawberry:{key:"strawberry",label:"()",description:" ",price:250,image:wn("menu_photo/1.png"),allergens:["wheat","egg"],soldOut:!1},blueberry:{key:"blueberry",label:"()",description:" ",price:250,image:wn("menu_photo/2.png"),allergens:["wheat","egg","soy"],soldOut:!1},chocolate:{key:"chocolate",label:"()",description:"",price:250,image:wn("menu_photo/3.png"),allergens:["wheat","soy"],soldOut:!1},honey:{key:"honey",label:"()",description:" ",price:250,image:wn("menu_photo/4.png"),allergens:["wheat"],soldOut:!1}},L9={potaufeu:"",minestrone:"",plain:"",cocoa:"",kinako:"",garlic:"",strawberry:"",blueberry:"",chocolate:"",honey:"",drink_hojicha:"",drink_cocoa:"()",drink_coffee:"",drink_milkcoffee:""},tf=(n,e)=>L9[n]??e,j9={day12:["potaufeu","plain","cocoa","kinako","garlic","drink_hojicha","drink_cocoa","drink_coffee","drink_milkcoffee"],day34:["minestrone","strawberry","blueberry","chocolate","honey","drink_hojicha","drink_cocoa","drink_coffee","drink_milkcoffee"]},B9="day12",V9=n=>n==="day12"||n==="day34",Vm="day12".toLowerCase(),t3=Vm&&V9(Vm)?Vm:B9,F9=t3,n3=j9[t3],Fc=n3.reduce((n,e)=>(n[e]=e3[e],n),{});n3.map(n=>e3[n]);const U9=["","",""],r3="order-app.menu-overrides.v1",z9="config",H9="menuOverrides",i3=za;let qn={};const ev=new Set;let ky;const a3=typeof window<"u",vc=za?null:Di(Gn,z9,H9),s3=(n,e)=>{if(typeof n!="string")return;const t=n.trim();if(!(!t||t===e))return t},o3=(n,e)=>{if(!Number.isFinite(n))return;const t=Math.max(0,Math.round(n));if(t!==e)return t},l3=(n,e)=>{if(typeof n=="boolean")return n===e?void 0:n},tv=n=>!n||typeof n!="object"?{}:Object.entries(n).reduce((e,[t,r])=>{if(!c3(t)||!r||typeof r!="object")return e;const i=Fc[t],a=s3(r.label,i.label),o=o3(r.price,i.price),c=l3(r.soldOut,i.soldOut);if(!a&&!Number.isFinite(o)&&typeof c!="boolean")return e;const u={};return a&&(u.label=a),Number.isFinite(o)&&(u.price=o),typeof c=="boolean"&&(u.soldOut=c),e[t]=u,e},{}),G9=()=>{if(!a3)return{};try{const n=window.localStorage.getItem(r3);if(!n)return{};const e=JSON.parse(n);return tv(e)}catch(n){return console.warn("[menuConfigStore] Failed to load overrides",n),{}}},q9=n=>{if(a3)try{const e=JSON.stringify(n);window.localStorage.setItem(r3,e)}catch(e){console.warn("[menuConfigStore] Failed to persist overrides",e)}},c3=n=>n in Fc,u3=()=>{const n=Object.entries(Fc).reduce((e,[t,r])=>{const i=t,a=qn[i]??{},o=a.label??r.label,c=a.price??r.price,u=a.soldOut??r.soldOut;return e[i]={...r,label:o,price:c,soldOut:u},e},{});return{map:n,list:Object.values(n)}},nf=(n,e)=>{const t=Object.keys(n),r=Object.keys(e);return t.length!==r.length?!1:t.every(i=>{if(!c3(i))return!1;const a=n[i],o=e[i];return!a&&!o?!0:!a||!o?!1:a.label===o.label&&a.price===o.price&&a.soldOut===o.soldOut})},lc=(n,e={})=>{const{persist:t=!0}=e;qn=n,ky=u3(),i3&&t&&q9(n),ev.forEach(r=>r())},$9=async n=>{vc&&await C9(vc,{overrides:n,updatedAt:Sc(),updatedBy:Ri.currentUser?.uid??null},{merge:!0})},A0=async n=>{if(nf(n,qn))return;const e=qn;if(lc(n),vc)try{await $9(n)}catch(t){throw console.error("[menuConfigStore] Failed to sync overrides to Firestore",t),lc(e,{persist:!1}),t}},X9=()=>{vc&&((async()=>{try{await ZT();const n=await My(vc);if(!n.exists()){nf(qn,{})||lc({},{persist:!1});return}const e=n.data(),t=tv(e?.overrides);nf(t,qn)||lc(t,{persist:!1})}catch(n){console.error("[menuConfigStore] Failed to load menu overrides from Firestore",n)}})(),hp(vc,n=>{if(n.metadata.hasPendingWrites)return;if(!n.exists()){nf(qn,{})||lc({},{persist:!1});return}const e=n.data(),t=tv(e?.overrides);nf(t,qn)||lc(t,{persist:!1})},n=>{console.error("[menuConfigStore] Failed to subscribe to menu overrides",n)}))},uo=()=>ky,Y9=n=>(ev.add(n),()=>{ev.delete(n)}),K9=async(n,e)=>{const t=Fc[n];if(!t)throw new Error(`Unknown menu item key: ${n}`);const i={...qn[n]??{}};let a=!1;if(Object.prototype.hasOwnProperty.call(e,"label")){const p=s3(e.label,t.label);typeof p=="string"?i.label!==p&&(i.label=p,a=!0):i.label!==void 0&&(delete i.label,a=!0)}if(Object.prototype.hasOwnProperty.call(e,"price")){const p=o3(e.price,t.price);typeof p=="number"?i.price!==p&&(i.price=p,a=!0):i.price!==void 0&&(delete i.price,a=!0)}if(Object.prototype.hasOwnProperty.call(e,"soldOut")){const p=l3(e.soldOut,t.soldOut);typeof p=="boolean"?i.soldOut!==p&&(i.soldOut=p,a=!0):i.soldOut!==void 0&&(delete i.soldOut,a=!0)}if(!a)return;if(Object.keys(i).length===0){if(!qn[n])return;const p={...qn};delete p[n],await A0(p);return}const h={...qn,[n]:i};await A0(h)},W9=async n=>{if(!qn[n])return;const e={...qn};delete e[n],await A0(e)},Q9=async()=>{Object.keys(qn).length!==0&&await A0({})},Z9=()=>Fc,J9=()=>qn;i3?qn=G9():(qn={},X9());ky=u3();const e7={day12:[{key:"potaufeu",label:"",icon:"",itemKeys:["potaufeu"]},{key:"friedBread",label:"",icon:"",itemKeys:["plain","cocoa","kinako","garlic"]}],day34:[{key:"potaufeu",label:"",icon:"",itemKeys:["minestrone"]},{key:"friedBread",label:"",icon:"",itemKeys:["strawberry","blueberry","chocolate","honey"]}]},Mi=e7[F9],t7=new Map(Mi.flatMap(n=>n.itemKeys.map(e=>[e,n.key])));function n7(n){return t7.get(n)??null}function r7(n){const e=Mi.reduce((t,r)=>(t[r.key]=0,t),{potaufeu:0,friedBread:0});return Mi.reduce((t,r)=>(t[r.key]=r.itemKeys.reduce((i,a)=>i+(n[a]??0),0),t),e)}function Nr(n,e){const t=r7(n);return{potaufeu:e?.potaufeu??t.potaufeu===0,friedBread:e?.friedBread??t.friedBread===0}}function Ly(n){return Nr(n,null)}function i7(n,e){const t=Nr(n,e);return{potaufeu:t.potaufeu?"ready":"pending",friedBread:t.friedBread?"ready":"pending"}}function f3(n,e){const t=Mi.find(r=>r.key===e);return t?t.itemKeys.reduce((r,i)=>r+(n[i]??0),0):0}function a7(n,e){return Mi.every(t=>t.itemKeys.reduce((i,a)=>i+(n[a]??0),0)===0?!0:e[t.key]==="ready")}function s7(n){const e=h=>h.toString().padStart(2,"0"),t=n.getFullYear(),r=e(n.getMonth()+1),i=e(n.getDate()),a=e(n.getHours()),o=e(n.getMinutes()),c=e(n.getSeconds()),u=Array.from({length:4},()=>String.fromCharCode(65+Math.floor(Math.random()*26))).join("");return`ORD-${t}${r}${i}${a}${o}${c}-${u}`}function o7(){const n="ABCDEFGHJKLMNPQRSTUVWXYZ23456789";return Array.from({length:16},()=>n.charAt(Math.floor(Math.random()*n.length))).join("")}function l7(n){return Object.entries(n).reduce((e,[t,r])=>{const i=Number.isFinite(r)?Math.max(0,Math.floor(r)):0;return i>0&&(e[t]=i),e},{})}function c7(n){const{map:e}=uo();return Object.entries(n).reduce((t,[r,i])=>{const o=e[r]?.price??0;return t+o*i},0)}function hi(n){return n?n.toDate():void 0}const u7=20;async function f7(n){await ZT();const e=l7(n);if(!Object.values(e).some(A=>A>0))throw new Error("1");const r=new Date,i=s7(r),a=o7(),o=c7(e),c="",u="",h=Ly(e),p=Di(Gn,"orders",i),g=Di(Gn,"orderLookup",a),_=Di(Gn,"metadata","counters"),w=await O9(Gn,async A=>{const C=((await A.get(_)).data()?.lastCallNumber??0)+1;A.set(_,{lastCallNumber:C,updatedAt:Sc()},{merge:!0});const P=Sc();return A.set(p,{orderId:i,ticket:a,callNumber:C,createdBy:Ri.currentUser?.uid??null,items:e,total:o,payment:c,progress:u,plating:h,createdAt:P,updatedAt:P}),A.set(g,{orderId:i,ticket:a,callNumber:C,items:e,total:o,payment:c,progress:u,plating:h,createdAt:P,updatedAt:P}),C});return{orderId:i,ticket:a,callNumber:w,total:o,items:e,payment:c,progress:u,plating:h,createdAt:r}}async function h7(n){const e=n.trim().toUpperCase();if(!e)return null;const t=Di(Gn,"orderLookup",e),r=await My(t);if(!r.exists())return null;const i=r.data(),a=i.items??{},o=Nr(a,i.plating);return{orderId:i.orderId,ticket:e,callNumber:i.callNumber??0,total:i.total,items:a,payment:i.payment,progress:i.progress,plating:o,updatedAt:hi(i.updatedAt),createdAt:hi(i.createdAt)}}async function d7(n){const e=Di(Gn,"orders",n),t=await My(e);if(!t.exists())return null;const r=t.data(),i=r.items??{};return{orderId:r.orderId,ticket:r.ticket,callNumber:r.callNumber??0,items:i,total:r.total,payment:r.payment,progress:r.progress,plating:Nr(i,r.plating),createdAt:hi(r.createdAt),updatedAt:hi(r.updatedAt),createdBy:r.createdBy??null}}async function p7(n,e,t){const r=KT(Gn),i=Di(Gn,"orders",n),a=Di(Gn,"orderLookup",e);r.update(i,{payment:t.payment,progress:t.progress,updatedAt:Sc()}),r.update(a,{payment:t.payment,progress:t.progress,updatedAt:Sc()}),await r.commit()}async function m7(n,e,t){const r=Object.entries(t).filter(([,u])=>typeof u=="boolean");if(r.length===0)return;const i=KT(Gn),a=Di(Gn,"orders",n),o=Di(Gn,"orderLookup",e),c={updatedAt:Sc()};r.forEach(([u,h])=>{c[`plating.${u}`]=h}),i.update(a,c),i.update(o,c),await i.commit()}async function g7(n={}){const{start:e,end:t}=n,r=rp(Gn,"orders"),i=[up("createdAt","asc")];return e&&i.push(E0("createdAt",">=",Ot.fromDate(e))),t&&i.push(E0("createdAt","<",Ot.fromDate(t))),(await $T(lp(r,...i))).docs.map(o=>{const c=o.data(),u=c.items??{};return{orderId:c.orderId,ticket:c.ticket,callNumber:c.callNumber??0,items:u,total:c.total,payment:c.payment,progress:c.progress,plating:Nr(u,c.plating),createdAt:hi(c.createdAt),updatedAt:hi(c.updatedAt),createdBy:c.createdBy??null}})}function v7(n,e={}){const t=rp(Gn,"orders"),r=lp(t,up("createdAt","desc"),HT(u7)),i=new Set;let a=!1;return hp(r,c=>{if(!a){c.docs.forEach(u=>i.add(u.id)),a=!0;return}c.docChanges().filter(u=>u.type==="added").forEach(u=>{const h=u.doc.id;if(i.has(h))return;i.add(h);const p=u.doc.data(),g=p.items??{};n({orderId:p.orderId,ticket:p.ticket,callNumber:p.callNumber??0,items:g,total:p.total,payment:p.payment,progress:p.progress,plating:Nr(g,p.plating),createdAt:hi(p.createdAt),updatedAt:hi(p.updatedAt),createdBy:p.createdBy??null})})},c=>{console.error("Failed to subscribe new orders",c),e.onError?.(c)})}function y7(n,e={}){const t=rp(Gn,"orders"),r=[up("createdAt","desc")],i=e.start;i&&!Number.isNaN(i.getTime())&&r.push(E0("createdAt",">=",Ot.fromDate(i)));const a=e.end;a&&!Number.isNaN(a.getTime())&&r.push(E0("createdAt","<",Ot.fromDate(a)));const o=e.limit;typeof o=="number"&&Number.isFinite(o)&&o>0&&r.push(HT(Math.floor(o)));const c=lp(t,...r);return hp(c,h=>{const p=h.docs.map(g=>{const _=g.data(),w=_.items??{};return{orderId:_.orderId??g.id,ticket:_.ticket,callNumber:_.callNumber??0,items:w,total:_.total,payment:_.payment,progress:_.progress,plating:Nr(w,_.plating),createdAt:hi(_.createdAt),updatedAt:hi(_.updatedAt),createdBy:_.createdBy??null}});n(p)},h=>{console.error("Failed to subscribe orders collection",h),e.onError?.(h)})}function _7(n,e,t={}){const r=n.trim().toUpperCase();if(!r)return e(null),()=>{};const i=Di(Gn,"orderLookup",r);return hp(i,o=>{if(!o.exists()){e(null);return}const c=o.data(),u=c.items??{};e({orderId:c.orderId??r,ticket:r,callNumber:c.callNumber??0,total:c.total,items:u,payment:c.payment,progress:c.progress,plating:Nr(u,c.plating),updatedAt:hi(c.updatedAt),createdAt:hi(c.createdAt)})},o=>{console.error("Failed to subscribe order lookup",o),t.onError?.(o)})}function x7(n){if(n===null||typeof n>"u")return"";const e=String(n);return e.includes(",")||e.includes('"')||e.includes(`
`)?`"${e.replace(/"/g,'""')}"`:e}async function w7(){const n=rp(Gn,"orders"),e=await $T(lp(n,up("createdAt","asc"))),t=["orderId","callNumber","ticket","total","payment","progress","items","createdAt","updatedAt"],{map:r}=uo(),i=e.docs.map(h=>{const p=h.data(),g=p.items,_=Object.entries(g).map(([w,A])=>`${r[w]?.label??w}:${A}`).join(" | ");return[p.orderId,p.callNumber??"",p.ticket,p.total,p.payment,p.progress,_,p.createdAt?.toDate()?.toISOString()??"",p.updatedAt?.toDate()?.toISOString()??""].map(x7).join(",")}),a=[t.join(","),...i].join(`
`),o=new Blob([a],{type:"text/csv"}),c=URL.createObjectURL(o),u=document.createElement("a");u.href=c,u.download=`orders-${new Date().toISOString().slice(0,10)}.csv`,u.click(),URL.revokeObjectURL(c)}const h3="mock-orders-state-v1",nv=new Set,rv=new Set,$o=new Map;function E7(n){nv.forEach(e=>{try{e({...n})}catch(t){console.error("",t)}})}function A7(){const n=Oi.orders.map(e=>d3(e));rv.forEach(e=>{try{e(n)}catch(t){console.error("",t)}})}function d3(n){return{...n,items:{...n.items},plating:Nr(n.items,n.plating),createdAt:n.createdAt?new Date(n.createdAt):void 0,updatedAt:n.updatedAt?new Date(n.updatedAt):void 0}}function p3(n){return{orderId:n.orderId,ticket:n.ticket,callNumber:n.callNumber??0,items:{...n.items},total:n.total,payment:n.payment,progress:n.progress,plating:Nr(n.items,n.plating),createdAt:n.createdAt,updatedAt:n.updatedAt}}function m3(n){const e=n.trim().toUpperCase();if(!e)return;const t=$o.get(e);if(!t||t.size===0)return;const r=By(e),i=r?p3(r):null;t.forEach(a=>{try{a(i)}catch(o){console.error("",o)}})}function b7(){Array.from($o.keys()).forEach(n=>m3(n))}function S7(n){if(!n||typeof n!="object")return pf;const e=n,t=(e.orders??[]).map(i=>{const a=i.createdAt?new Date(i.createdAt):void 0,o=i.updatedAt?new Date(i.updatedAt):void 0;return{...i,createdAt:a,updatedAt:o}});if(t.length===0)return pf;const r=Number.isFinite(e.lastCallNumber)?Number(e.lastCallNumber):Math.max(0,...t.map(i=>i.callNumber??0));return{orders:t,lastCallNumber:r}}function C7(){if(typeof window>"u")return pf;try{const n=window.localStorage.getItem(h3);return n?S7(JSON.parse(n)):pf}catch(n){return console.warn("",n),pf}}function T7(n){if(!(typeof window>"u"))try{const e={orders:n.orders.map(t=>({...t,createdAt:t.createdAt?.toISOString()??null,updatedAt:t.updatedAt?.toISOString()??null})),lastCallNumber:n.lastCallNumber};window.localStorage.setItem(h3,JSON.stringify(e))}catch(e){console.warn("",e)}}function g3(n){return Object.entries(n).reduce((e,[t,r])=>{const i=Number.isFinite(r)?Math.max(0,Math.floor(r)):0;return i>0&&(e[t]=i),e},{})}function v3(n){const{map:e}=uo();return Object.entries(n).reduce((t,[r,i])=>{const o=e[r]?.price??0;return t+o*i},0)}function I7(n){const e=h=>h.toString().padStart(2,"0"),t=n.getFullYear(),r=e(n.getMonth()+1),i=e(n.getDate()),a=e(n.getHours()),o=e(n.getMinutes()),c=e(n.getSeconds()),u=Array.from({length:4},()=>String.fromCharCode(65+Math.floor(Math.random()*26))).join("");return`ORD-${t}${r}${i}${a}${o}${c}-${u}`}function N7(){const n="ABCDEFGHJKLMNPQRSTUVWXYZ23456789";return Array.from({length:16},()=>n.charAt(Math.floor(Math.random()*n.length))).join("")}const Fm=g3({plain:2,cocoa:1}),pf={orders:[{orderId:"ORD-20251009090000-DEMO",ticket:"MOCKTICKET123456",callNumber:1,items:Fm,total:v3(Fm),payment:"",progress:"",plating:Ly(Fm),createdAt:new Date,updatedAt:new Date,createdBy:"mock-user"}],lastCallNumber:1};let Oi=C7();function jy(n){const e={orders:Oi.orders.map(t=>({...t})),lastCallNumber:Oi.lastCallNumber};n(e),Oi=e,T7(Oi),A7(),b7()}function By(n){const e=n.trim().toUpperCase();return e?Oi.orders.find(t=>t.ticket===e)??null:null}async function R7(n){const e=g3(n);if(!Object.values(e).some(g=>g>0))throw new Error("1");const r=new Date,i=I7(r),a=N7(),o=v3(e),c="",u="",h=Oi.lastCallNumber+1,p={orderId:i,ticket:a,callNumber:h,items:e,total:o,payment:c,progress:u,plating:Ly(e),createdAt:r,updatedAt:r,createdBy:"mock-user"};return jy(g=>{g.orders.push(p),g.lastCallNumber=h}),E7(p),m3(p.ticket),{orderId:i,ticket:a,callNumber:h,total:o,items:e,payment:c,progress:u,plating:p.plating,createdAt:r}}async function O7(n){const e=By(n);return e?{orderId:e.orderId,ticket:e.ticket,callNumber:e.callNumber,items:e.items,total:e.total,payment:e.payment,progress:e.progress,plating:Nr(e.items,e.plating),updatedAt:e.updatedAt,createdAt:e.createdAt}:null}async function D7(n){const e=n.trim().toUpperCase();if(!e)return null;const t=Oi.orders.find(r=>r.orderId===e);return t?{...t}:null}async function M7(n,e,t){jy(r=>{r.orders=r.orders.map(i=>i.orderId!==n&&i.ticket!==e?i:{...i,payment:t.payment,progress:t.progress,updatedAt:new Date})})}async function P7(n,e,t){const r=Object.entries(t).filter(([,i])=>typeof i=="boolean");r.length!==0&&jy(i=>{i.orders=i.orders.map(a=>{if(a.orderId!==n&&a.ticket!==e)return a;const o=Nr(a.items,{...a.plating,...Object.fromEntries(r)});return{...a,plating:o,updatedAt:new Date}})})}async function k7(n={}){const{start:e,end:t}=n,r=e?.getTime(),i=t?.getTime();return Oi.orders.filter(a=>{const o=a.createdAt??a.updatedAt;if(!o)return!r&&!i;const c=o.getTime();return!(typeof r=="number"&&c<r||typeof i=="number"&&c>=i)}).sort((a,o)=>{const c=(a.createdAt??a.updatedAt??new Date(0)).getTime(),u=(o.createdAt??o.updatedAt??new Date(0)).getTime();return c-u}).map(a=>({...a}))}async function L7(){const n=["orderId","callNumber","ticket","total","payment","progress","items","createdAt","updatedAt"],{map:e}=uo(),t=Oi.orders.map(o=>{const c=Object.entries(o.items).map(([u,h])=>`${e[u]?.label??u}:${h}`).join(" | ");return[o.orderId,o.callNumber??"",o.ticket,o.total,o.payment,o.progress,c,o.createdAt?.toISOString()??"",o.updatedAt?.toISOString()??""].map(u=>{const h=String(u);return h.includes(",")||h.includes('"')||h.includes(`
`)?`"${h.replace(/"/g,'""')}"`:h}).join(",")}),r=new Blob([[n.join(","),...t].join(`
`)],{type:"text/csv"}),i=URL.createObjectURL(r),a=document.createElement("a");a.href=i,a.download=`orders-mock-${new Date().toISOString().slice(0,10)}.csv`,a.click(),URL.revokeObjectURL(i)}function j7(n){return nv.add(n),()=>{nv.delete(n)}}function B7(n,e={}){const t=e.start?.getTime(),r=e.end?.getTime(),i=e.limit&&Number.isFinite(e.limit)&&e.limit>0?Math.floor(e.limit):null,a=c=>{const h=c.filter(g=>{const _=g.createdAt??g.updatedAt;if(!_)return!(t!=null||r!=null);const w=_.getTime();return!(Number.isNaN(w)||t!=null&&w<t||r!=null&&w>=r)}).sort((g,_)=>{const w=g.createdAt?.getTime()??0;return(_.createdAt?.getTime()??0)-w});return(i?h.slice(0,i):h).map(g=>({...g,items:{...g.items},plating:Nr(g.items,g.plating),createdAt:g.createdAt?new Date(g.createdAt):void 0,updatedAt:g.updatedAt?new Date(g.updatedAt):void 0}))},o=c=>{try{n(a(c))}catch(u){console.error("",u)}};return rv.add(o),o(Oi.orders.map(c=>d3(c))),()=>{rv.delete(o)}}function V7(n,e){const t=n.trim().toUpperCase();if(!t)return e(null),()=>{};const r=$o.get(t)??new Set;$o.has(t)||$o.set(t,r),r.add(e);const i=By(t);return e(i?p3(i):null),()=>{const a=$o.get(t);a&&(a.delete(e),a.size===0&&$o.delete(t))}}const F7=["AIzaSyBxVSYgc9mqtDeczSZjOcPn0D-sB0PBUKM","ichinikai-order.firebaseapp.com","ichinikai-order","ichinikai-order.appspot.com","829152459225","1:829152459225:web:a8966a583e54d7553ac1c8"],U7=F7.some(n=>!n||n==="undefined"),wa=U7,z7=wa?R7:f7,H7=wa?O7:h7,G7=wa?D7:d7,q7=wa?M7:p7,$7=wa?P7:m7,X7=wa?L7:w7,Y7=wa?k7:g7,K7=wa?j7:v7,W7=wa?B7:y7,Q7=wa?V7:_7,Z7=z7,vA=H7,yA=G7,qa=q7,Um=$7,y3=X7,J7=Y7,eP=K7,tP=W7,nP=Q7;function Uc(n={}){const[e,t]=k.useState([]),[r,i]=k.useState(!0),[a,o]=k.useState(null),{autoStopWhen:c,...u}=n,h=u.start?.getTime(),p=typeof h=="number"&&!Number.isNaN(h)?h:null,g=u.end?.getTime(),_=typeof g=="number"&&!Number.isNaN(g)?g:null,w=typeof u.limit=="number"&&Number.isFinite(u.limit)&&u.limit>0?Math.floor(u.limit):null;return k.useEffect(()=>{let A=!0,S=!1,D=null;const C=()=>{D&&(D(),D=null)};i(!0),o(null);const P={...p!=null&&u.start?{start:u.start}:{},..._!=null&&u.end?{end:u.end}:{},...w!=null?{limit:w}:{},onError:V=>{A&&(console.error("",V),o(V instanceof Error?V:new Error("")),i(!1))}};return D=tP(V=>{A&&(t(V),i(!1),!S&&c?.(V)&&(S=!0,A=!1,C()))},P),()=>{A=!1,C()}},[c,_,w,p]),{orders:e,loading:r,error:a}}function ol(){const n=k.useSyncExternalStore(Y9,uo);return k.useMemo(()=>({menuItems:n.list,menuItemMap:n.map,baseMenuItemMap:Z9(),overrides:J9(),updateMenuItem:K9,resetMenuItem:W9,resetAllMenuItems:Q9}),[n])}const rP={soup:"",friedBread:"",smore:"",drink:""},iP=["soup","friedBread","smore","drink"],aP={potaufeu:"soup",minestrone:"soup",plain:"friedBread",cocoa:"friedBread",kinako:"friedBread",garlic:"friedBread",strawberry:"smore",blueberry:"smore",chocolate:"smore",honey:"smore",drink_hojicha:"drink",drink_cocoa:"drink",drink_coffee:"drink",drink_milkcoffee:"drink"},sP=[{value:"today",label:""},{value:"yesterday",label:""},{value:"7days",label:"7"}],oP=[" 24  CSV ","Google "," 10 "],Uo=new Intl.NumberFormat("ja-JP",{style:"currency",currency:"JPY",maximumFractionDigits:0}),la=new Intl.NumberFormat("ja-JP",{maximumFractionDigits:0});function _A({mode:n="default"}){const[e,t]=k.useState("today"),{menuItems:r}=ol(),{start:i,end:a}=k.useMemo(()=>lP(e),[e]),o=k.useMemo(()=>({start:i,end:a,autoStopWhen:e==="today"?void 0:I=>I.length>0}),[a,i,e]),{orders:c,loading:u,error:h}=Uc(o),p=k.useMemo(()=>{const F=Array.from({length:24},(N,R)=>({hour:R,orderCount:0,revenue:0,cumulativeRevenue:0}));if(c.length===0)return F;c.map(N=>({order:N,timestamp:xA(N)})).filter(N=>N.timestamp!=null).sort((N,R)=>N.timestamp.getTime()-R.timestamp.getTime()).forEach(({order:N,timestamp:R})=>{if(N.payment==="")return;const M=R.getHours();if(M<0||M>=F.length)return;const B=Number.isFinite(N.total)?N.total:0;F[M].orderCount+=1,F[M].revenue+=B});let b=0;return F.forEach(N=>{b+=N.revenue,N.cumulativeRevenue=b}),F},[c]),g=k.useMemo(()=>{if(c.length===0)return{totalOrders:0,paidOrders:0,totalRevenue:0,averageOrderValue:0};let F=0,I=0,b=0;c.forEach(R=>{if(R.payment==="")return;F+=1,R.payment===""&&(I+=1);const M=Number.isFinite(R.total)?R.total:0;b+=M});const N=F>0?b/F:0;return{totalOrders:F,paidOrders:I,totalRevenue:b,averageOrderValue:N}},[c]),_=k.useMemo(()=>p.reduce((F,I)=>Math.max(F,I.revenue),0),[p]),w=k.useMemo(()=>r.map(F=>{const I=tf(F.key,F.label),b=Array.from({length:24},()=>({count:0,revenue:0}));let N=0,R=0;c.forEach(L=>{if(L.payment==="")return;const ie=xA(L);if(!ie)return;const ge=L.items[F.key]??0;if(ge<=0)return;const K=ie.getHours();if(K<0||K>=b.length)return;const G=ge*F.price;b[K].count+=ge,b[K].revenue+=G,N+=ge,R+=G});const M=b.reduce((L,ie,ge)=>ie.count>L.count?{count:ie.count,hour:ge}:L,{count:0,hour:-1}),B=b.map((L,ie)=>({hour:ie,count:L.count,revenue:L.revenue})).filter(L=>L.count>0);return{key:F.key,label:I,totalCount:N,totalRevenue:R,peakHour:M.count>0?M.hour:null,hourlyBreakdown:B}}),[c,r]),A=k.useMemo(()=>w.filter(F=>F.totalCount>0),[w]),S=k.useMemo(()=>new Map(r.map(F=>[F.key,F])),[r]),D=k.useMemo(()=>Array.from({length:24},(F,I)=>{const b=r.map(({key:R})=>{const B=w.find(L=>L.key===R)?.hourlyBreakdown.find(L=>L.hour===I);return{key:R,count:B?.count??0}}),N=b.reduce((R,M)=>R+M.count,0);return{hour:I,total:N,segments:b}}),[r,w]),C=k.useMemo(()=>D.filter(F=>F.total>0),[D]),P=k.useMemo(()=>new Map(D.map(F=>[F.hour,F])),[D]),V=k.useMemo(()=>D.reduce((F,I)=>Math.max(F,I.total),0),[D]),H=c.length>0,X=k.useMemo(()=>cP(i,a),[i,a]);return n==="export"?m.jsxs("div",{className:"admin-grid",style:{gap:"28px"},children:[m.jsxs("section",{className:"admin-card",children:[m.jsx("h3",{children:""}),m.jsx("p",{children:" CSV "}),m.jsxs("div",{className:"admin-toolbar",children:[m.jsxs("div",{className:"field",children:[m.jsx("label",{htmlFor:"export-range",children:""}),m.jsxs("select",{id:"export-range",defaultValue:"today",children:[m.jsx("option",{value:"today",children:""}),m.jsx("option",{value:"yesterday",children:""}),m.jsx("option",{value:"week",children:" 7 "}),m.jsx("option",{value:"custom",children:""})]})]}),m.jsxs("div",{className:"field",children:[m.jsx("label",{htmlFor:"export-status",children:""}),m.jsxs("select",{id:"export-status",defaultValue:"all",children:[m.jsx("option",{value:"all",children:""}),m.jsx("option",{value:"open",children:""}),m.jsx("option",{value:"ready",children:""}),m.jsx("option",{value:"closed",children:""})]})]})]}),m.jsx("button",{type:"button",className:"admin-primary-button",style:{width:"fit-content"},children:""})]}),m.jsxs("section",{className:"admin-card",children:[m.jsx("h3",{children:""}),m.jsx("ul",{className:"admin-list",children:oP.map(F=>m.jsx("li",{children:F},F))})]})]}):m.jsxs("div",{className:"admin-grid",style:{gap:"28px"},children:[m.jsxs("section",{className:"admin-card admin-dashboard-controls",children:[m.jsxs("div",{children:[m.jsx("p",{className:"admin-content-overline",children:""}),m.jsx("h3",{children:X})]}),m.jsx("div",{className:"admin-toolbar",style:{marginBottom:0},children:m.jsxs("div",{className:"field",children:[m.jsx("label",{htmlFor:"dashboard-range",children:""}),m.jsx("select",{id:"dashboard-range",value:e,onChange:F=>t(F.target.value),children:sP.map(F=>m.jsx("option",{value:F.value,children:F.label},F.value))})]})})]}),u?m.jsx("section",{className:"admin-card admin-empty-state",children:m.jsx("p",{children:""})}):h?m.jsxs("section",{className:"admin-card admin-empty-state",children:[m.jsx("p",{children:""}),m.jsx("small",{children:h.message})]}):m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"admin-grid admin-metric-cards",children:[m.jsxs("article",{className:"admin-card admin-metric-card",children:[m.jsx("p",{className:"admin-content-overline",children:""}),m.jsx("h3",{className:"admin-metric-card-value",children:Uo.format(g.totalRevenue)}),m.jsx("p",{className:"admin-metric-card-helper",children:""})]}),m.jsxs("article",{className:"admin-card admin-metric-card",children:[m.jsx("p",{className:"admin-content-overline",children:""}),m.jsxs("h3",{className:"admin-metric-card-value",children:[la.format(g.totalOrders)," "]}),m.jsxs("p",{className:"admin-metric-card-helper",children:[" ",la.format(g.paidOrders)," "]})]}),m.jsxs("article",{className:"admin-card admin-metric-card",children:[m.jsx("p",{className:"admin-content-overline",children:""}),m.jsx("h3",{className:"admin-metric-card-value",children:Uo.format(g.averageOrderValue||0)}),m.jsx("p",{className:"admin-metric-card-helper",children:""})]})]}),H&&m.jsxs("section",{className:"admin-card admin-product-total-card",children:[m.jsx("header",{className:"admin-card-header",children:m.jsxs("div",{children:[m.jsx("h3",{children:""}),m.jsx("p",{children:""})]})}),A.length>0?m.jsx("div",{className:"admin-product-total-grid",children:A.map(F=>m.jsxs("article",{className:`admin-product-total-item menu-item-${F.key}`,children:[m.jsx("span",{className:"admin-product-total-label",children:F.label}),m.jsxs("span",{className:"admin-product-total-count",children:[la.format(F.totalCount)," "]}),m.jsx("span",{className:"admin-product-total-revenue",children:Uo.format(F.totalRevenue)})]},F.key))}):m.jsx("p",{className:"admin-empty-inline",children:""})]}),m.jsxs("section",{className:"admin-card",children:[m.jsx("header",{className:"admin-card-header",children:m.jsxs("div",{children:[m.jsx("h3",{children:""}),m.jsx("p",{children:" 1 "})]})}),H?m.jsxs("table",{className:"admin-table admin-hourly-table",children:[m.jsx("thead",{children:m.jsxs("tr",{children:[m.jsx("th",{scope:"col",children:""}),m.jsx("th",{scope:"col",children:""}),m.jsx("th",{scope:"col",children:""}),m.jsx("th",{scope:"col",children:""})]})}),m.jsx("tbody",{children:p.map(F=>{const b=P.get(F.hour)?.segments??[],N={soup:0,friedBread:0,smore:0,drink:0};return b.forEach(R=>{if(!R||R.count===0)return;const M=aP[R.key];N[M]+=R.count}),m.jsxs("tr",{children:[m.jsx("td",{children:Nd(F.hour)}),m.jsx("td",{children:m.jsxs("div",{className:"admin-hourly-volume",children:[m.jsxs("span",{className:"admin-hourly-volume-count",children:[la.format(F.orderCount)," "]}),m.jsx("div",{className:"admin-hourly-volume-bar","aria-hidden":F.orderCount===0,children:b.map(R=>{if(!R||R.count===0)return null;const M=V>0?R.count/V*100:0;if(M<=0)return null;const B=M<4?"6px":void 0,L=M<8,ie=S.get(R.key);return m.jsx("span",{className:`admin-product-sales-segment menu-item-${R.key}`,style:{width:`${M}%`,flexBasis:`${M}%`,minWidth:B},"data-compact":L?"true":void 0,title:`${tf(R.key,ie?.label??R.key)}: ${la.format(R.count)}`,children:m.jsx("span",{className:"admin-product-sales-count",children:R.count})},R.key)})}),m.jsx("div",{className:"admin-hourly-volume-category","aria-hidden":F.orderCount===0,children:iP.map(R=>{const M=N[R];return m.jsxs("span",{"data-muted":M===0?"true":void 0,children:[rP[R]," ",la.format(M)," "]},R)})})]})}),m.jsxs("td",{children:[Uo.format(F.revenue),m.jsx("div",{className:"admin-trend-bar revenue",children:m.jsx("span",{style:{width:`${_>0?F.revenue/_*100:0}%`}})})]}),m.jsx("td",{children:Uo.format(F.cumulativeRevenue)})]},F.hour)})})]}):m.jsx("p",{className:"admin-empty-inline",children:""})]}),m.jsxs("section",{className:"admin-card",children:[m.jsx("header",{className:"admin-card-header",children:m.jsxs("div",{children:[m.jsx("h3",{children:""}),m.jsx("p",{children:""})]})}),H?m.jsxs(m.Fragment,{children:[m.jsxs("table",{className:"admin-table admin-product-table",children:[m.jsx("thead",{children:m.jsxs("tr",{children:[m.jsx("th",{scope:"col",children:""}),m.jsx("th",{scope:"col",children:""}),m.jsx("th",{scope:"col",children:""}),m.jsx("th",{scope:"col",children:""})]})}),m.jsx("tbody",{children:w.map(F=>m.jsxs("tr",{className:`menu-item-${F.key}`,children:[m.jsx("td",{className:"admin-product-name",children:F.label}),m.jsxs("td",{children:[la.format(F.totalCount)," "]}),m.jsx("td",{children:Uo.format(F.totalRevenue)}),m.jsx("td",{children:F.peakHour!=null?Nd(F.peakHour):""})]},F.key))})]}),C.length>0&&m.jsxs("div",{className:"admin-product-sales-chart",role:"img","aria-label":"",children:[m.jsxs("div",{className:"admin-product-sales-header",children:[m.jsx("h4",{children:" "}),m.jsx("div",{className:"admin-product-sales-legend","aria-hidden":"true",children:r.map(F=>m.jsxs("span",{className:`admin-product-sales-legend-item menu-item-${F.key}`,children:[m.jsx("span",{className:"admin-product-sales-legend-swatch"}),tf(F.key,F.label)]},F.key))})]}),m.jsx("div",{className:"admin-product-sales-rows",children:C.map(F=>m.jsxs("div",{className:"admin-product-sales-row",children:[m.jsx("div",{className:"admin-product-sales-hour",children:Nd(F.hour)}),m.jsx("div",{className:"admin-product-sales-bar","aria-hidden":F.total===0,children:F.segments.map(I=>{if(I.count===0)return null;const b=I.count/F.total*100,N=b<6?"6px":void 0,R=S.get(I.key);return m.jsx("span",{className:`admin-product-sales-segment menu-item-${I.key}`,style:{width:`${b}%`,flexBasis:`${b}%`,minWidth:N},title:`${tf(I.key,R?.label??I.key)}: ${la.format(I.count)}`,children:m.jsx("span",{className:"admin-product-sales-count",children:I.count})},I.key)})}),m.jsxs("div",{className:"admin-product-sales-total",children:[la.format(F.total)," "]})]},F.hour))})]}),m.jsx("div",{className:"admin-product-breakdown",children:w.every(F=>F.hourlyBreakdown.length===0)?m.jsx("p",{className:"admin-empty-inline",children:""}):w.filter(F=>F.hourlyBreakdown.length>0).map(F=>m.jsxs("details",{className:`admin-product-breakdown-item menu-item-${F.key}`,children:[m.jsxs("summary",{children:[F.label," "]}),m.jsxs("table",{children:[m.jsx("thead",{children:m.jsxs("tr",{children:[m.jsx("th",{scope:"col",children:""}),m.jsx("th",{scope:"col",children:""}),m.jsx("th",{scope:"col",children:""})]})}),m.jsx("tbody",{children:F.hourlyBreakdown.map(I=>m.jsxs("tr",{children:[m.jsx("td",{children:Nd(I.hour)}),m.jsxs("td",{children:[la.format(I.count)," "]}),m.jsx("td",{children:Uo.format(I.revenue)})]},`${F.key}-${I.hour}`))})]})]},F.key))})]}):m.jsx("p",{className:"admin-empty-inline",children:""})]})]})]})}function lP(n){const e=new Date,t=new Date(e.getFullYear(),e.getMonth(),e.getDate());return n==="today"?{start:t,end:Id(t,1)}:n==="yesterday"?{start:Id(t,-1),end:t}:{start:Id(t,-6),end:Id(t,1)}}function Id(n,e){const t=new Date(n);return t.setDate(t.getDate()+e),t}function xA(n){const e=n.createdAt,t=n.updatedAt;return e instanceof Date?e:typeof e=="string"?new Date(e):t instanceof Date?t:typeof t=="string"?new Date(t):null}function Nd(n){const e=`${n.toString().padStart(2,"0")}:00`,t=n===23?"23:59":`${(n+1).toString().padStart(2,"0")}:00`;return`${e} - ${t}`}function cP(n,e){const t=new Intl.DateTimeFormat("ja-JP",{month:"numeric",day:"numeric",hour:"2-digit",minute:"2-digit"}),r=t.format(n),i=new Date(e.getTime()-1),a=t.format(i);return`${r}  ${a}`}const _3=k.createContext(void 0);function uP({children:n}){const[e,t]=k.useState(()=>typeof window>"u"?"ja":window.localStorage.getItem("app.language")==="en"?"en":"ja"),r=k.useCallback(o=>{t(o),typeof window<"u"&&window.localStorage.setItem("app.language",o)},[]),i=k.useCallback(()=>{r(e==="ja"?"en":"ja")},[e,r]),a=k.useMemo(()=>({language:e,setLanguage:r,toggleLanguage:i}),[e,r,i]);return m.jsx(_3.Provider,{value:a,children:n})}function Vi(){const n=k.useContext(_3);if(!n)throw new Error("useLanguage must be used within a LanguageProvider");return n}const x3={potaufeu:{label:"Pot-au-feu",description:"Packed with fresh ginger to warm you from the inside out. Take a sip and let this hearty soup comfort you."},plain:{label:"Fried Bread (Plain)",description:"The timeless classic. Get ready to fall into the world of fried breadsimple, irresistible, and unforgettable."},cocoa:{label:"Fried Bread (Cocoa)",description:"Fried bread meets cocoatheres no way this could go wrong. One bite and youll be hooked."},kinako:{label:"Fried Bread (Kinako)",description:"A nostalgic taste straight from Japanese school lunches. The beloved kinako fried bread is back."},garlic:{label:"Fried Bread (Garlic)",description:"Who said fried bread has to be sweet? This savory twist will change the way you think about it."},drink_hojicha:{label:"Roasted Green Tea (Hot)",description:"Fragrant hojicha to warm you up."},drink_cocoa:{label:"Hot Cocoa",description:"Sweet and velvety cocoa."},drink_coffee:{label:"Hot Coffee",description:"Aromatic freshly brewed coffee."},drink_milkcoffee:{label:"Iced Coffee Milk",description:"Creamy coffee with plenty of milk, served cold."},minestrone:{label:"Minestrone",description:"A hearty Italian classic, brimming with vegetables and warmth. Enjoy the full goodness of tomatoesnatures own beauty elixir."},strawberry:{label:"S'more (Strawberry Jam)",description:"Love probably tastes like thissweet, slightly tart, and a little bit nostalgic."},blueberry:{label:"S'more (Blueberry Jam)",description:"A refreshing mix of sweetness and tanginess to wake you upperfect for beating that post-lunch slump."},chocolate:{label:"S'more (Chocolate)",description:"When in doubt, go with chocolate. In life and in smores, chocolate never fails."},honey:{label:"S'more (Honey)",description:"A sweet little rescue for your tired self. Even the bees would be jealous."}},fP={ja:{wheat:"",egg:"",soy:""},en:{wheat:"Wheat",egg:"Egg",soy:"Soy"}},hP={ja:{:"",:"",:""},en:{:"Unpaid",:"Paid",:"Cancelled"}},dP={ja:{:"",:`
OK`,:""},en:{:"Order received",:"Ready for pickup",:"Picked up"}},iv={ja:{received:"",ready:`
OK`,completed:""},en:{received:"Order received",ready:"Ready for pickup",completed:"Picked up"}},Ja={ja:{languageToggle:{label:"",japanese:"",english:"English",buttonText:" / English",buttonAria:n=>`${n==="ja"?"":"English"}`},header:{orderAction:"",orderActionAria:"",characterAlt:"",titleAlt:""},auth:{signingIn:"",error:""},errors:{EMPTY_CART:"1",ORDER_FAILED:""},orderInput:{title:"",descriptionLead:"",descriptionFollow:"",totalLabel:"",totalNote:"",reviewButton:"",resetButton:""},quantityStepper:{decrease:"1",increase:"1"},menu:{imageAlt:n=>`${n}`,allergensLabel:n=>`${n}`,quantityLabel:n=>`${n}`,soldOutBadge:"",soldOutMessage:""},orderReview:{title:"",descriptionLead:"",descriptionFollow:"",tableHeaders:{item:"",quantity:"",subtotal:""},totalLabel:"",confirmButton:"",changeButton:"",confirming:""},wasteGuide:{title:"",description:"",placeholder:"",confirm:""},orderComplete:{title:"",description:{default:"QR",progressOnly:"QR"},readyTitle:"",readyPreviewTag:"",readyInstructionWithCallNumber:n=>` ${n} `,readyInstructionWait:"",statusHeading:"",metaHeading:"",meta:{total:"",payment:"",progress:"",orderedAt:""},qrAlt:"QR",qrCaption:"QR",identifiers:{orderId:"",ticket:""},itemsHeading:"",itemsTable:{item:"",quantity:"",price:"",subtotal:"",total:""},actions:{copyLink:"",copyCode:"",startNew:""},ticketSearch:{regionLabel:"",title:"",description:"",label:"",placeholder:": AB12CD34EF56GH78",button:"",error:""},loadingTitle:"",loadingDescription:"",loadErrorTitle:"",loadErrorDescription:"",loadErrorAction:"",inviteTitle:"",inviteDescription:"",paymentState:{complete:"",paid:"",ready:"",unpaid:""},thankYouTitle:"",thankYouMessage:"",thankYouImageAlt:"Thank you ",progressSteps:iv.ja,refresh:{refreshing:"",cooldown:n=>` ${n} `,action:"",error:""},callNumberLabel:"",callNumberPending:""},orderProgress:{title:"",description:""},status:{title:"",descriptionLead:"",descriptionFollow:"",historyTitle:"",historyClear:"",historyDescription:"",historyCallNumberLabel:"",historyOrderIdLabel:"",historyTotalLabel:"",historyPendingCallNumber:" / ",historyClearConfirm:""},ticketNotFound:{title:"",descriptionKnown:n=>`${n}`,descriptionUnknown:"",retry:"",newOrder:""},notFound:{title:"",description:"URL"},copy:{progressCodeSuccess:"",progressCodeFailure:"",progressLinkSuccess:"",progressLinkFailure:""}},en:{languageToggle:{label:"Language",japanese:"",english:"English",buttonText:" / English",buttonAria:n=>`Change language to ${n==="ja"?"Japanese":"English"}`},header:{orderAction:"Order now",orderActionAria:"Order actions",characterAlt:"Character illustration",titleAlt:"Header title illustration"},auth:{signingIn:"Signing in anonymously...",error:"Anonymous sign-in failed. Please try again later."},errors:{EMPTY_CART:"Please add at least one item to your order.",ORDER_FAILED:"We could not process your order. Please check your connection and try again."},orderInput:{title:"Place your order",descriptionLead:'Use the buttons to adjust each quantity, then press "Review order" to continue.',descriptionFollow:"Make sure everything looks right before you confirm.",totalLabel:"Total",totalNote:"Tax included. Please pay at pickup.",reviewButton:"Review order",resetButton:"Reset selections"},quantityStepper:{decrease:"Decrease quantity by 1",increase:"Increase quantity by 1"},menu:{imageAlt:n=>`Image of ${n}`,allergensLabel:n=>`Allergen information for ${n}`,quantityLabel:n=>`Quantity for ${n}`,soldOutBadge:"Sold out",soldOutMessage:"Currently unavailable."},orderReview:{title:"Review your order",descriptionLead:"Check the quantities and total. When ready, place your order.",descriptionFollow:"Need changes? Go back to adjust the items.",tableHeaders:{item:"Item",quantity:"Qty",subtotal:"Subtotal"},totalLabel:"Total",confirmButton:"Place order",changeButton:"Modify quantities",confirming:"Submitting..."},wasteGuide:{title:"Waste sorting reminder",description:"Replace this placeholder with the final sorting rules and drop-off locations when they are ready.",placeholder:"Place the waste sorting guide image here.",confirm:"I have read the sorting rules"},orderComplete:{title:"Order confirmed!",description:{default:"Show the call number and QR code at pickup. Keep this screen until you receive your order.",progressOnly:"Show the call number or the QR code at pickup. Keep this screen handy until completion."},readyTitle:"Your order is ready",readyPreviewTag:"Preview (remove later)",readyInstructionWithCallNumber:n=>`Please check call number ${n} and follow staff instructions to receive your order.`,readyInstructionWait:"Please wait nearby until staff call your number.",statusHeading:"Current status",metaHeading:"Order details",meta:{total:"Total",payment:"Payment",progress:"Status",orderedAt:"Order time"},qrAlt:"QR code for progress tracking",qrCaption:"Scan this code to open the progress page. Show it at the register or when staff ask.",identifiers:{orderId:"Order ID",ticket:"Progress code"},itemsHeading:"Items",itemsTable:{item:"Item",quantity:"Qty",price:"Unit price",subtotal:"Subtotal",total:"Total"},actions:{copyLink:"Copy progress link",copyCode:"Copy progress code",startNew:"Start a new order"},ticketSearch:{regionLabel:"Search by progress code",title:"Show by progress code",description:"Enter the customer progress code to view the status here.",label:"Progress code",placeholder:"e.g., AB12CD34EF56GH78",button:"Show status",error:"Enter a progress code."},loadingTitle:"Loading your order...",loadingDescription:"Please wait a moment.",loadErrorTitle:"We could not load the order",loadErrorDescription:"We could not retrieve your order. Please try again later.",loadErrorAction:"Enter the code again",inviteTitle:"Enter a progress code",inviteDescription:"Enter the progress code to check the latest status.",paymentState:{complete:"Picked up",paid:"Paid",ready:"Awaiting pickup",unpaid:"Unpaid"},thankYouTitle:"Thank you so much!",thankYouMessage:"Your pickup is complete. Enjoy the rest of your time at the event!",thankYouImageAlt:"Decorative thank-you banner",progressSteps:iv.en,refresh:{refreshing:"Refreshing...",cooldown:n=>`Try again in ${n} sec`,action:"Refresh status",error:"Failed to refresh the order. Please try again."},callNumberLabel:"Call number",callNumberPending:"Pending"},orderProgress:{title:"Tracking your order",description:"Check the current status and pickup steps for the code you entered."},status:{title:"How to check your order status",descriptionLead:"We only share the call number with customers. Please keep the number shown on the completion screen until staff call you.",descriptionFollow:"Our staff track progress internally. If the situation changes, we will inform you at the booth.",historyTitle:"Order history on this device",historyClear:"Clear history",historyDescription:"Recent confirmed orders from this device appear here. Keeping the call number and order ID handy speeds up pickup.",historyCallNumberLabel:"Call number",historyOrderIdLabel:"Order ID",historyTotalLabel:"Total",historyPendingCallNumber:"Pending / Not assigned",historyClearConfirm:"Remove all saved orders from this device?"},ticketNotFound:{title:"Order not found",descriptionKnown:n=>`We could not find an order for progress code "${n}". Please check the code and try again.`,descriptionUnknown:"We could not confirm an order for the provided progress code. Please check the code and try again.",retry:"Re-enter progress code",newOrder:"Start a new order"},notFound:{title:"Page not found",description:"Please check the URL and use the navigation links."},copy:{progressCodeSuccess:"Progress code copied to clipboard.",progressCodeFailure:"Copy failed. Please note it manually.",progressLinkSuccess:"Progress link copied to clipboard.",progressLinkFailure:"Copy failed. Please note it manually."}}};function Vy(n,e){return e==="en"?x3[n.key]?.label??n.label:n.label}function pP(n,e){return e==="en"?x3[n.key]?.description??n.description:n.description}function mP(n,e){return fP[e][n]}function Cc(n,e){return hP[e][n]}function gP(n,e){return dP[e][n]}function vP(n,e){return iv[e][n]}const yP=new Intl.DateTimeFormat("ja-JP",{hour:"2-digit",minute:"2-digit"}),wA=["","",""];function _P(n){const{map:e}=uo();return Object.entries(n).filter(([,r])=>r>0).map(([r,i])=>`${e[r]?.label??r}${i}`).join("")||""}function xP(n){return n?yP.format(n):"--:--"}function pp(n){const e=n.createdAt??n.updatedAt??null,t=n.updatedAt??null;return{id:n.orderId,callNumber:n.callNumber??0,ticket:n.ticket,items:_P(n.items??{}),total:n.total,payment:n.payment,progress:n.progress,createdAt:xP(e),createdAtDate:e,updatedAtDate:t,confirmationCode:Ci(n.orderId),raw:n,platingStatus:i7(n.items??{},n.plating)}}function Ci(n){if(!n)return"----";const e=(n.match(/[A-Za-z]/g)??[]).map(r=>r.toUpperCase());return e.length===0?"----":e.length>=4?e.slice(-4).join(""):e.join("").repeat(Math.ceil(4/e.length)).slice(-4)}function b0(n){return n===""?"":n===""?"":null}function S0(n){return n===""?"":n===""?"":null}function wP(){const{orders:n,loading:e,error:t}=Uc(),r=k.useMemo(()=>n.map(pp),[n]),{language:i}=Vi(),[a,o]=k.useState(""),[c,u]=k.useState(""),[h,p]=k.useState(""),[g,_]=k.useState("createdAt"),[w,A]=k.useState("desc"),[S,D]=k.useState(null),[C,P]=k.useState(null),V=k.useMemo(()=>{const R=h.trim().toLowerCase(),M=new Map(wA.map((ge,K)=>[ge,K])),B=new Map([["",0],["",1],["",2]]),L=new Intl.Collator("ja",{numeric:!0,sensitivity:"base"});return r.filter(ge=>a===""?!0:ge.progress===a).filter(ge=>c===""?!0:ge.payment===c).filter(ge=>R?`${ge.id} ${ge.ticket} ${ge.callNumber} ${ge.items}`.toLowerCase().includes(R):!0).sort((ge,K)=>{const G=(Ae,$)=>Ae-$,le=(Ae,$)=>L.compare(Ae,$);let we=0;switch(g){case"createdAt":{const Ae=ge.createdAtDate?.getTime()??0,$=K.createdAtDate?.getTime()??0;we=G(Ae,$);break}case"id":we=le(ge.id,K.id);break;case"callNumber":we=G(ge.callNumber??0,K.callNumber??0);break;case"ticket":we=le(ge.ticket,K.ticket);break;case"items":we=le(ge.items,K.items);break;case"total":we=G(ge.total,K.total);break;case"payment":we=G(B.get(ge.payment)??0,B.get(K.payment)??0);break;case"progress":we=G(M.get(ge.progress)??0,M.get(K.progress)??0);break;default:we=0}if(we===0){const Ae=ge.createdAtDate?.getTime()??0,$=K.createdAtDate?.getTime()??0;we=G(Ae,$)}return w==="asc"?we:-we})},[h,c,a,r,w,g]),H=[{key:"createdAt",label:""},{key:"id",label:""},{key:"callNumber",label:""},{key:"ticket",label:""},{key:"items",label:""},{key:"total",label:""},{key:"payment",label:""},{key:"progress",label:""}],X=R=>{A(M=>g===R?M==="asc"?"desc":"asc":"desc"),_(R)},F=(R,M)=>{const B=g===M,L=B?w==="asc"?"":"":"",ie=B?w==="asc"?"ascending":"descending":"none",ge=B?w==="asc"?"":"":"";return m.jsx("th",{scope:"col","aria-sort":ie,className:`admin-sortable${B?" is-active":""}`,children:m.jsxs("button",{type:"button",className:`admin-sort-button${B?" is-active":""}`,onClick:()=>X(M),children:[m.jsx("span",{className:"admin-sort-label",children:R}),m.jsx("span",{"aria-hidden":"true",className:`admin-sort-indicator${B?` is-${w}`:""}`,children:L}),m.jsx("span",{className:"sr-only",children:ge})]})},M)},I=k.useCallback(async R=>{const M=b0(R.progress);if(M){D(R.id),P(null);try{await qa(R.id,R.ticket,{payment:R.payment,progress:M})}catch(B){console.error("",B),P("")}finally{D(null)}}},[]),b=k.useCallback(async R=>{const M=S0(R.progress);if(M){D(R.id),P(null);try{await qa(R.id,R.ticket,{payment:R.payment,progress:M})}catch(B){console.error("",B),P("")}finally{D(null)}}},[]),N=k.useCallback(async()=>{P(null);try{await y3()}catch(R){console.error("CSV ",R),P("CSV ")}},[]);return e?m.jsx("p",{children:""}):m.jsxs("div",{children:[m.jsxs("div",{className:"admin-toolbar",role:"region","aria-label":"",children:[m.jsxs("div",{className:"field",children:[m.jsx("label",{htmlFor:"order-progress",children:""}),m.jsxs("select",{id:"order-progress",value:a,onChange:R=>o(R.target.value),children:[m.jsx("option",{value:"",children:""}),wA.map(R=>m.jsx("option",{value:R,children:R},R))]})]}),m.jsxs("div",{className:"field",children:[m.jsx("label",{htmlFor:"order-payment",children:""}),m.jsxs("select",{id:"order-payment",value:c,onChange:R=>u(R.target.value),children:[m.jsx("option",{value:"",children:""}),U9.map(R=>m.jsx("option",{value:R,children:Cc(R,i)},R))]})]}),m.jsxs("div",{className:"field",style:{flex:"1 1 240px"},children:[m.jsx("label",{htmlFor:"order-search",children:""}),m.jsx("input",{id:"order-search",type:"search",placeholder:"",value:h,onChange:R=>p(R.target.value)})]}),m.jsx("button",{type:"button",className:"admin-secondary-button",disabled:V.length===0,onClick:()=>{const R=V[0];R&&I(R).catch(()=>{})},children:""}),m.jsx("button",{type:"button",className:"admin-primary-button",onClick:()=>void N(),disabled:r.length===0,children:"CSV "})]}),t&&m.jsx("p",{className:"admin-error",role:"alert",children:""}),C&&m.jsx("p",{className:"admin-error",role:"alert",children:C}),m.jsx("div",{style:{overflowX:"auto"},children:m.jsxs("table",{className:"admin-table",children:[m.jsx("thead",{children:m.jsxs("tr",{children:[H.map(({label:R,key:M})=>F(R,M)),m.jsx("th",{scope:"col",children:""})]})}),m.jsx("tbody",{children:V.map(R=>m.jsxs("tr",{children:[m.jsx("td",{children:R.createdAt}),m.jsx("td",{children:R.id}),m.jsx("td",{children:R.callNumber}),m.jsx("td",{children:R.ticket}),m.jsx("td",{children:R.items}),m.jsxs("td",{children:[R.total.toLocaleString()," "]}),m.jsx("td",{children:m.jsx("span",{className:R.payment===""?"admin-status-badge success":R.payment===""?"admin-status-badge warning":"admin-status-badge neutral",children:Cc(R.payment,i)})}),m.jsx("td",{children:m.jsx("span",{className:"admin-status-badge",children:R.progress})}),m.jsx("td",{children:m.jsxs("div",{style:{display:"flex",gap:8},children:[m.jsx("button",{type:"button",className:"admin-secondary-button",onClick:()=>I(R),disabled:S===R.id||b0(R.progress)===null,children:""}),m.jsx("button",{type:"button",className:"admin-secondary-button",onClick:()=>b(R),disabled:S===R.id||S0(R.progress)===null,children:""})]})})]},R.id))})]})}),V.length===0&&m.jsx("p",{style:{marginTop:18,color:"#64748b"},children:""}),m.jsx("p",{style:{marginTop:18,color:"#64748b"},children:"Firestore "})]})}function EP(n,e){return n===0?"is-zero":e==="ready"?"is-complete":"is-pending"}function Nf(n){const e=n.raw.items??{},{list:t,map:r}=uo();return t.map(i=>{const a=e[i.key]??0,o=n7(i.key),c=o?n.platingStatus[o]??"ready":"ready",u=EP(a,c);return{key:i.key,label:tf(i.key,r[i.key].label),quantity:a,stateClass:u}})}function av({entries:n,showTotal:e=!0,totalAriaLabel:t="",variant:r="default",className:i}){const a=n.reduce((c,u)=>c+u.quantity,0),o=["admin-order-items-inline",r==="compact"?"compact":null,i].filter(Boolean).join(" ");return m.jsxs("div",{className:o,children:[m.jsx("div",{className:"admin-production-items-card",role:"presentation",children:m.jsx("div",{className:"admin-production-items-grid",children:n.map(c=>m.jsxs("div",{className:"admin-production-item-cell",children:[m.jsx("span",{className:`admin-production-item-label menu-item-${c.key}`,children:c.label}),m.jsx("span",{className:`admin-production-quantity ${c.stateClass} menu-item-${c.key}`,"data-menu-item":c.key,children:c.quantity})]},c.key))})}),e&&m.jsx("div",{className:"admin-production-total-quantity","aria-label":t,children:a})]})}const AP=[{key:"ordered",label:"",hint:"",statuses:[""]},{key:"plating",label:"",hint:"",statuses:[""]}],bP=[{key:"summary",label:"",icon:""},...Mi.map(n=>({key:n.key,label:n.label,icon:n.icon}))];function SP(n){return n?Mi.some(e=>e.key===n):!1}const w3=(n,e)=>`${n}:${e}`;function CP(){const n=k.useMemo(()=>{const b=new Date;b.setHours(0,0,0,0);const N=new Date(b);return N.setDate(N.getDate()+1),{start:b,end:N}},[]),{orders:e,loading:t,error:r}=Uc(n),i=k.useMemo(()=>e.map(pp),[e]),[a,o]=k.useState(null),[c,u]=k.useState(null),[h,p]=k.useState(null),[g,_]=Pv(),w=g.get("view"),A=w==="summary"?"summary":SP(w)?w:"summary",S=A==="summary"?null:Mi.find(b=>b.key===A)??null,D=k.useCallback(b=>{p(null),_(N=>{const R=new URLSearchParams(N);return b==="summary"?R.delete("view"):R.set("view",b),R})},[p,_]),C=k.useMemo(()=>AP.map(b=>({...b,orders:i.filter(N=>b.statuses.includes(N.progress)).sort((N,R)=>{const M=N.createdAtDate?.getTime()??0,B=R.createdAtDate?.getTime()??0;return M-B})})),[i]),P=k.useMemo(()=>({ordered:C.find(b=>b.key==="ordered")?.orders.length??0,plating:C.find(b=>b.key==="plating")?.orders.length??0}),[C]),V=k.useMemo(()=>{const b={potaufeu:{pending:[],ready:[]},friedBread:{pending:[],ready:[]}};i.forEach(R=>{if(R.progress==="")return;const M=R.raw.items??{};Mi.forEach(B=>{if(f3(M,B.key)===0)return;const ge=(R.platingStatus[B.key]??"ready")==="ready"?"ready":"pending";b[B.key][ge].push(R)})});const N=(R,M)=>(R.createdAtDate?.getTime()??0)-(M.createdAtDate?.getTime()??0);return Mi.forEach(R=>{b[R.key].pending.sort(N),b[R.key].ready.sort(N)}),b},[i]),H=k.useCallback(async b=>{const N=b0(b.progress);if(N){o(b.id),p(null);try{if(b.progress===""){const R=AA(b,!0);Object.keys(R).length>0&&await Um(b.id,b.ticket,R)}await qa(b.id,b.ticket,{progress:N,payment:b.payment})}catch(R){console.error("",R),p("")}finally{o(null)}}},[]),X=k.useCallback(async b=>{const N=S0(b.progress);if(N){o(b.id),p(null);try{if(b.progress===""&&N===""){const R=AA(b,!1);Object.keys(R).length>0&&await Um(b.id,b.ticket,R)}await qa(b.id,b.ticket,{progress:N,payment:b.payment})}catch(R){console.error("",R),p("")}finally{o(null)}}},[]),F=k.useCallback(async(b,N,R)=>{const M=w3(b.id,N);u(M),p(null);try{await Um(b.id,b.ticket,{[N]:R});const B=b.raw.items??{},L={...b.platingStatus,[N]:R?"ready":"pending"};a7(B,L)&&b.progress===""?await qa(b.id,b.ticket,{progress:"",payment:b.payment}):!R&&b.progress===""&&await qa(b.id,b.ticket,{progress:"",payment:b.payment})}catch(B){console.error("",B),p("")}finally{u(null)}},[p]),I=k.useCallback(async()=>{p(null);try{await y3()}catch(b){console.error("CSV ",b),p("CSV ")}},[]);return t?m.jsx("p",{children:""}):m.jsxs("div",{className:"admin-production-page",children:[m.jsxs("div",{className:"admin-production-toolbar",role:"region","aria-label":"",children:[m.jsxs("div",{className:"admin-production-summary",children:[m.jsx("p",{className:"admin-production-summary-title",children:""}),m.jsxs("p",{className:"admin-production-summary-count",children:[P.ordered,""]}),m.jsx("p",{className:"admin-production-summary-hint",children:""})]}),m.jsxs("div",{className:"admin-production-summary",children:[m.jsx("p",{className:"admin-production-summary-title",children:""}),m.jsxs("p",{className:"admin-production-summary-count",children:[P.plating,""]}),m.jsx("p",{className:"admin-production-summary-hint",children:""})]})]}),m.jsx("nav",{className:"admin-production-view-tabs",role:"tablist","aria-label":"",children:bP.map(b=>{const N=b.key===A,R=b.key!=="summary",M=R?V[b.key].pending.length:0;return m.jsxs("button",{type:"button",role:"tab",className:`admin-production-view-tab${N?" is-active":""}`,"aria-selected":N,onClick:()=>D(b.key),children:[m.jsxs("span",{className:"admin-production-view-tab-label",children:[m.jsx("span",{className:"admin-production-view-tab-icon","aria-hidden":"true",children:b.icon}),m.jsx("span",{className:"admin-production-view-tab-text",children:b.label})]}),R&&M>0&&m.jsx("span",{className:"admin-production-view-tab-count",children:m.jsx("span",{className:"admin-production-badge",children:M})})]},b.key)})}),A==="summary"?m.jsxs("div",{className:"admin-production-table",role:"table","aria-label":"",children:[m.jsx("div",{className:"admin-production-table-header",role:"row",children:C.map(b=>m.jsxs("div",{className:"admin-production-table-header-cell",role:"columnheader",children:[m.jsxs("div",{children:[m.jsx("h2",{children:b.label}),m.jsx("p",{children:b.hint})]}),m.jsx("span",{className:"admin-production-badge",children:b.orders.length})]},b.key))}),m.jsx("div",{className:"admin-production-table-body",children:C.map(b=>m.jsx("section",{className:"admin-production-table-column","aria-label":b.label,role:"rowgroup",children:m.jsxs("div",{className:"admin-production-table-list",children:[b.orders.map(N=>{const R=!!b0(N.progress),M=!!S0(N.progress);return m.jsx(TP,{order:N,onForward:()=>{H(N)},onBack:()=>{X(N)},allowForward:R,allowBack:M,busy:a===N.id},N.id)}),b.orders.length===0&&m.jsx("p",{className:"admin-production-empty",children:""})]})},b.key))})]}):S&&m.jsx(IP,{category:S,orders:V[S.key],busyKey:c,onUpdate:(b,N)=>F(b,S.key,N)}),r&&m.jsx("p",{className:"admin-error",role:"alert",children:""}),h&&m.jsx("p",{className:"admin-error",role:"alert",children:h}),m.jsx("div",{style:{marginTop:16},children:m.jsx("button",{type:"button",className:"admin-secondary-button",onClick:()=>void I(),disabled:i.length===0,children:"CSV "})})]})}function TP({order:n,onForward:e,onBack:t,allowForward:r,allowBack:i,busy:a}){if(n.progress===""||n.progress==="")return m.jsx("article",{className:"admin-production-row admin-production-row--compact",children:m.jsx("div",{className:"admin-production-row-main",children:m.jsxs("div",{className:"admin-production-row-compact",children:[m.jsx("span",{className:"admin-payment-ticket badge admin-production-ticket-compact","aria-label":` ${n.callNumber}`,children:n.callNumber}),m.jsxs("div",{className:"admin-production-row-actions admin-production-row-actions--compact",children:[m.jsx("button",{type:"button",className:"admin-production-button ghost",onClick:t,disabled:!i||a,children:" "}),m.jsx("button",{type:"button",className:"admin-production-button primary",onClick:e,disabled:!r||a,children:" "})]})]})})});const c=Nf(n),u=c.reduce((h,p)=>h+p.quantity,0);return m.jsx("article",{className:"admin-production-row",children:m.jsx("div",{className:"admin-production-row-main",children:m.jsxs("div",{className:"admin-production-row-inline",children:[m.jsx("div",{className:"admin-production-ticket-block","aria-label":` ${n.callNumber}`,children:m.jsx("span",{className:"admin-payment-ticket badge",children:n.callNumber})}),m.jsx("div",{className:"admin-production-items-card",role:"presentation",children:m.jsx("div",{className:"admin-production-items-grid",children:c.map(h=>m.jsxs("div",{className:"admin-production-item-cell",children:[m.jsx("span",{className:"admin-production-item-label",children:h.label}),m.jsx("span",{className:`admin-production-quantity ${h.stateClass}`,children:h.quantity})]},h.key))})}),m.jsx("div",{className:"admin-production-total-quantity","aria-label":"",children:u}),m.jsxs("div",{className:"admin-production-row-actions",children:[m.jsx("button",{type:"button",className:"admin-production-button ghost",onClick:t,disabled:!i||a,children:" "}),m.jsx("button",{type:"button",className:"admin-production-button primary",onClick:e,disabled:!r||a,children:" "})]})]})})})}function IP({category:n,orders:e,busyKey:t,onUpdate:r}){const i=`${n.label}`,a=`${n.label}`;return m.jsxs("div",{className:"admin-production-table",role:"table","aria-label":`${n.label}`,children:[m.jsxs("div",{className:"admin-production-table-header",role:"row",children:[m.jsxs("div",{className:"admin-production-table-header-cell",role:"columnheader",children:[m.jsxs("div",{children:[m.jsx("h2",{children:i}),m.jsx("p",{children:""})]}),m.jsx("span",{className:"admin-production-badge",children:e.pending.length})]}),m.jsxs("div",{className:"admin-production-table-header-cell",role:"columnheader",children:[m.jsxs("div",{children:[m.jsx("h2",{children:a}),m.jsx("p",{children:""})]}),m.jsx("span",{className:"admin-production-badge",children:e.ready.length})]})]}),m.jsxs("div",{className:"admin-production-table-body",children:[m.jsx("section",{className:"admin-production-table-column","aria-label":i,role:"rowgroup",children:m.jsxs("div",{className:"admin-production-table-list",children:[e.pending.map(o=>m.jsx(EA,{order:o,category:n,status:"pending",busyKey:t,onUpdate:c=>r(o,c)},o.id)),e.pending.length===0&&m.jsx("p",{className:"admin-production-empty",children:""})]})}),m.jsx("section",{className:"admin-production-table-column","aria-label":a,role:"rowgroup",children:m.jsxs("div",{className:"admin-production-table-list",children:[e.ready.map(o=>m.jsx(EA,{order:o,category:n,status:"ready",busyKey:t,onUpdate:c=>r(o,c)},o.id)),e.ready.length===0&&m.jsx("p",{className:"admin-production-empty",children:""})]})})]})]})}function EA({order:n,category:e,status:t,busyKey:r,onUpdate:i}){const a=r===w3(n.id,e.key);if(t==="ready")return m.jsx("article",{className:"admin-production-row admin-production-row--compact",children:m.jsx("div",{className:"admin-production-row-main",children:m.jsxs("div",{className:"admin-production-row-compact",children:[m.jsx("span",{className:"admin-payment-ticket badge admin-production-ticket-compact","aria-label":` ${n.callNumber}`,children:n.callNumber}),m.jsx("div",{className:"admin-production-row-actions admin-production-row-actions--compact",children:m.jsx("button",{type:"button",className:"admin-production-button ghost",onClick:()=>{i(!1)},disabled:a,children:" "})})]})})});const o=Nf(n).filter(u=>e.itemKeys.includes(u.key)),c=o.reduce((u,h)=>u+h.quantity,0);return m.jsx("article",{className:"admin-production-row",children:m.jsx("div",{className:"admin-production-row-main",children:m.jsxs("div",{className:"admin-production-row-inline",children:[m.jsx("div",{className:"admin-production-ticket-block","aria-label":` ${n.callNumber}`,children:m.jsx("span",{className:"admin-payment-ticket badge",children:n.callNumber})}),m.jsx("div",{className:"admin-production-items-card",role:"presentation",children:m.jsx("div",{className:"admin-production-items-grid",children:o.map(u=>m.jsxs("div",{className:"admin-production-item-cell",children:[m.jsx("span",{className:"admin-production-item-label",children:u.label}),m.jsx("span",{className:`admin-production-quantity ${u.stateClass}`,children:u.quantity})]},u.key))})}),m.jsx("div",{className:"admin-production-total-quantity","aria-label":"",children:c}),m.jsx("div",{className:"admin-production-row-actions",children:m.jsx("button",{type:"button",className:"admin-production-button primary",onClick:()=>{i(!0)},disabled:a,children:" "})})]})})})}function AA(n,e){const t=n.raw.items??{},r={};return Mi.forEach(i=>{f3(t,i.key)>0&&(r[i.key]=e)}),r}function NP(n,e){var t=Object.setPrototypeOf;t?t(n,e):n.__proto__=e}function RP(n,e){e===void 0&&(e=n.constructor);var t=Error.captureStackTrace;t&&t(n,e)}var OP=(function(){var n=function(t,r){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(i[o]=a[o])},n(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),DP=(function(n){OP(e,n);function e(t,r){var i=this.constructor,a=n.call(this,t,r)||this;return Object.defineProperty(a,"name",{value:i.name,enumerable:!1,configurable:!0}),NP(a,i.prototype),RP(a),a}return e})(Error),MP=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Rr=(function(n){MP(e,n);function e(t){t===void 0&&(t=void 0);var r=n.call(this,t)||this;return r.message=t,r}return e.prototype.getKind=function(){var t=this.constructor;return t.kind},e.kind="Exception",e})(DP),PP=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),cn=(function(n){PP(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="ArgumentException",e})(Rr),kP=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Pe=(function(n){kP(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="IllegalArgumentException",e})(Rr),E3=(function(){function n(e){if(this.binarizer=e,e===null)throw new Pe("Binarizer must be non-null.")}return n.prototype.getWidth=function(){return this.binarizer.getWidth()},n.prototype.getHeight=function(){return this.binarizer.getHeight()},n.prototype.getBlackRow=function(e,t){return this.binarizer.getBlackRow(e,t)},n.prototype.getBlackMatrix=function(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix},n.prototype.isCropSupported=function(){return this.binarizer.getLuminanceSource().isCropSupported()},n.prototype.crop=function(e,t,r,i){var a=this.binarizer.getLuminanceSource().crop(e,t,r,i);return new n(this.binarizer.createBinarizer(a))},n.prototype.isRotateSupported=function(){return this.binarizer.getLuminanceSource().isRotateSupported()},n.prototype.rotateCounterClockwise=function(){var e=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new n(this.binarizer.createBinarizer(e))},n.prototype.rotateCounterClockwise45=function(){var e=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new n(this.binarizer.createBinarizer(e))},n.prototype.toString=function(){try{return this.getBlackMatrix().toString()}catch{return""}},n})(),LP=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),An=(function(n){LP(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.getChecksumInstance=function(){return new e},e.kind="ChecksumException",e})(Rr),jP=(function(){function n(e){this.source=e}return n.prototype.getLuminanceSource=function(){return this.source},n.prototype.getWidth=function(){return this.source.getWidth()},n.prototype.getHeight=function(){return this.source.getHeight()},n})(),Vt=(function(){function n(){}return n.arraycopy=function(e,t,r,i,a){for(;a--;)r[i++]=e[t++]},n.currentTimeMillis=function(){return Date.now()},n})(),BP=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Fy=(function(n){BP(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="IndexOutOfBoundsException",e})(Rr),VP=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),bA=(function(n){VP(e,n);function e(t,r){t===void 0&&(t=void 0),r===void 0&&(r=void 0);var i=n.call(this,r)||this;return i.index=t,i.message=r,i}return e.kind="ArrayIndexOutOfBoundsException",e})(Fy),FP=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},On=(function(){function n(){}return n.fill=function(e,t){for(var r=0,i=e.length;r<i;r++)e[r]=t},n.fillWithin=function(e,t,r,i){n.rangeCheck(e.length,t,r);for(var a=t;a<r;a++)e[a]=i},n.rangeCheck=function(e,t,r){if(t>r)throw new Pe("fromIndex("+t+") > toIndex("+r+")");if(t<0)throw new bA(t);if(r>e)throw new bA(r)},n.asList=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e},n.create=function(e,t,r){var i=Array.from({length:e});return i.map(function(a){return Array.from({length:t}).fill(r)})},n.createInt32Array=function(e,t,r){var i=Array.from({length:e});return i.map(function(a){return Int32Array.from({length:t}).fill(r)})},n.equals=function(e,t){if(!e||!t||!e.length||!t.length||e.length!==t.length)return!1;for(var r=0,i=e.length;r<i;r++)if(e[r]!==t[r])return!1;return!0},n.hashCode=function(e){var t,r;if(e===null)return 0;var i=1;try{for(var a=FP(e),o=a.next();!o.done;o=a.next()){var c=o.value;i=31*i+c}}catch(u){t={error:u}}finally{try{o&&!o.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}return i},n.fillUint8Array=function(e,t){for(var r=0;r!==e.length;r++)e[r]=t},n.copyOf=function(e,t){return e.slice(0,t)},n.copyOfUint8Array=function(e,t){if(e.length<=t){var r=new Uint8Array(t);return r.set(e),r}return e.slice(0,t)},n.copyOfRange=function(e,t,r){var i=r-t,a=new Int32Array(i);return Vt.arraycopy(e,t,a,0,i),a},n.binarySearch=function(e,t,r){r===void 0&&(r=n.numberComparator);for(var i=0,a=e.length-1;i<=a;){var o=a+i>>1,c=r(t,e[o]);if(c>0)i=o+1;else if(c<0)a=o-1;else return o}return-i-1},n.numberComparator=function(e,t){return e-t},n})(),et=(function(){function n(){}return n.numberOfTrailingZeros=function(e){var t;if(e===0)return 32;var r=31;return t=e<<16,t!==0&&(r-=16,e=t),t=e<<8,t!==0&&(r-=8,e=t),t=e<<4,t!==0&&(r-=4,e=t),t=e<<2,t!==0&&(r-=2,e=t),r-(e<<1>>>31)},n.numberOfLeadingZeros=function(e){if(e===0)return 32;var t=1;return e>>>16||(t+=16,e<<=16),e>>>24||(t+=8,e<<=8),e>>>28||(t+=4,e<<=4),e>>>30||(t+=2,e<<=2),t-=e>>>31,t},n.toHexString=function(e){return e.toString(16)},n.toBinaryString=function(e){return String(parseInt(String(e),2))},n.bitCount=function(e){return e=e-(e>>>1&1431655765),e=(e&858993459)+(e>>>2&858993459),e=e+(e>>>4)&252645135,e=e+(e>>>8),e=e+(e>>>16),e&63},n.truncDivision=function(e,t){return Math.trunc(e/t)},n.parseInt=function(e,t){return t===void 0&&(t=void 0),parseInt(e,t)},n.MIN_VALUE_32_BITS=-2147483648,n.MAX_VALUE=Number.MAX_SAFE_INTEGER,n})(),$n=(function(){function n(e,t){e===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=e,t==null?this.bits=n.makeArray(e):this.bits=t)}return n.prototype.getSize=function(){return this.size},n.prototype.getSizeInBytes=function(){return Math.floor((this.size+7)/8)},n.prototype.ensureCapacity=function(e){if(e>this.bits.length*32){var t=n.makeArray(e);Vt.arraycopy(this.bits,0,t,0,this.bits.length),this.bits=t}},n.prototype.get=function(e){return(this.bits[Math.floor(e/32)]&1<<(e&31))!==0},n.prototype.set=function(e){this.bits[Math.floor(e/32)]|=1<<(e&31)},n.prototype.flip=function(e){this.bits[Math.floor(e/32)]^=1<<(e&31)},n.prototype.getNextSet=function(e){var t=this.size;if(e>=t)return t;var r=this.bits,i=Math.floor(e/32),a=r[i];a&=~((1<<(e&31))-1);for(var o=r.length;a===0;){if(++i===o)return t;a=r[i]}var c=i*32+et.numberOfTrailingZeros(a);return c>t?t:c},n.prototype.getNextUnset=function(e){var t=this.size;if(e>=t)return t;var r=this.bits,i=Math.floor(e/32),a=~r[i];a&=~((1<<(e&31))-1);for(var o=r.length;a===0;){if(++i===o)return t;a=~r[i]}var c=i*32+et.numberOfTrailingZeros(a);return c>t?t:c},n.prototype.setBulk=function(e,t){this.bits[Math.floor(e/32)]=t},n.prototype.setRange=function(e,t){if(t<e||e<0||t>this.size)throw new Pe;if(t!==e){t--;for(var r=Math.floor(e/32),i=Math.floor(t/32),a=this.bits,o=r;o<=i;o++){var c=o>r?0:e&31,u=o<i?31:t&31,h=(2<<u)-(1<<c);a[o]|=h}}},n.prototype.clear=function(){for(var e=this.bits.length,t=this.bits,r=0;r<e;r++)t[r]=0},n.prototype.isRange=function(e,t,r){if(t<e||e<0||t>this.size)throw new Pe;if(t===e)return!0;t--;for(var i=Math.floor(e/32),a=Math.floor(t/32),o=this.bits,c=i;c<=a;c++){var u=c>i?0:e&31,h=c<a?31:t&31,p=(2<<h)-(1<<u)&4294967295;if((o[c]&p)!==(r?p:0))return!1}return!0},n.prototype.appendBit=function(e){this.ensureCapacity(this.size+1),e&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++},n.prototype.appendBits=function(e,t){if(t<0||t>32)throw new Pe("Num bits must be between 0 and 32");this.ensureCapacity(this.size+t);for(var r=t;r>0;r--)this.appendBit((e>>r-1&1)===1)},n.prototype.appendBitArray=function(e){var t=e.size;this.ensureCapacity(this.size+t);for(var r=0;r<t;r++)this.appendBit(e.get(r))},n.prototype.xor=function(e){if(this.size!==e.size)throw new Pe("Sizes don't match");for(var t=this.bits,r=0,i=t.length;r<i;r++)t[r]^=e.bits[r]},n.prototype.toBytes=function(e,t,r,i){for(var a=0;a<i;a++){for(var o=0,c=0;c<8;c++)this.get(e)&&(o|=1<<7-c),e++;t[r+a]=o}},n.prototype.getBitArray=function(){return this.bits},n.prototype.reverse=function(){for(var e=new Int32Array(this.bits.length),t=Math.floor((this.size-1)/32),r=t+1,i=this.bits,a=0;a<r;a++){var o=i[a];o=o>>1&1431655765|(o&1431655765)<<1,o=o>>2&858993459|(o&858993459)<<2,o=o>>4&252645135|(o&252645135)<<4,o=o>>8&16711935|(o&16711935)<<8,o=o>>16&65535|(o&65535)<<16,e[t-a]=o}if(this.size!==r*32){for(var c=r*32-this.size,u=e[0]>>>c,a=1;a<r;a++){var h=e[a];u|=h<<32-c,e[a-1]=u,u=h>>>c}e[r-1]=u}this.bits=e},n.makeArray=function(e){return new Int32Array(Math.floor((e+31)/32))},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.size===t.size&&On.equals(this.bits,t.bits)},n.prototype.hashCode=function(){return 31*this.size+On.hashCode(this.bits)},n.prototype.toString=function(){for(var e="",t=0,r=this.size;t<r;t++)(t&7)===0&&(e+=" "),e+=this.get(t)?"X":".";return e},n.prototype.clone=function(){return new n(this.size,this.bits.slice())},n.prototype.toArray=function(){for(var e=[],t=0,r=this.size;t<r;t++)e.push(this.get(t));return e},n})(),sv;(function(n){n[n.OTHER=0]="OTHER",n[n.PURE_BARCODE=1]="PURE_BARCODE",n[n.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",n[n.TRY_HARDER=3]="TRY_HARDER",n[n.CHARACTER_SET=4]="CHARACTER_SET",n[n.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",n[n.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",n[n.ENABLE_CODE_39_EXTENDED_MODE=7]="ENABLE_CODE_39_EXTENDED_MODE",n[n.ASSUME_GS1=8]="ASSUME_GS1",n[n.RETURN_CODABAR_START_END=9]="RETURN_CODABAR_START_END",n[n.NEED_RESULT_POINT_CALLBACK=10]="NEED_RESULT_POINT_CALLBACK",n[n.ALLOWED_EAN_EXTENSIONS=11]="ALLOWED_EAN_EXTENSIONS"})(sv||(sv={}));const Ft=sv;var UP=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),ye=(function(n){UP(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.getFormatInstance=function(){return new e},e.kind="FormatException",e})(Rr),zP=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Nt;(function(n){n[n.Cp437=0]="Cp437",n[n.ISO8859_1=1]="ISO8859_1",n[n.ISO8859_2=2]="ISO8859_2",n[n.ISO8859_3=3]="ISO8859_3",n[n.ISO8859_4=4]="ISO8859_4",n[n.ISO8859_5=5]="ISO8859_5",n[n.ISO8859_6=6]="ISO8859_6",n[n.ISO8859_7=7]="ISO8859_7",n[n.ISO8859_8=8]="ISO8859_8",n[n.ISO8859_9=9]="ISO8859_9",n[n.ISO8859_10=10]="ISO8859_10",n[n.ISO8859_11=11]="ISO8859_11",n[n.ISO8859_13=12]="ISO8859_13",n[n.ISO8859_14=13]="ISO8859_14",n[n.ISO8859_15=14]="ISO8859_15",n[n.ISO8859_16=15]="ISO8859_16",n[n.SJIS=16]="SJIS",n[n.Cp1250=17]="Cp1250",n[n.Cp1251=18]="Cp1251",n[n.Cp1252=19]="Cp1252",n[n.Cp1256=20]="Cp1256",n[n.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",n[n.UTF8=22]="UTF8",n[n.ASCII=23]="ASCII",n[n.Big5=24]="Big5",n[n.GB18030=25]="GB18030",n[n.EUC_KR=26]="EUC_KR"})(Nt||(Nt={}));var Rn=(function(){function n(e,t,r){for(var i,a,o=[],c=3;c<arguments.length;c++)o[c-3]=arguments[c];this.valueIdentifier=e,this.name=r,typeof t=="number"?this.values=Int32Array.from([t]):this.values=t,this.otherEncodingNames=o,n.VALUE_IDENTIFIER_TO_ECI.set(e,this),n.NAME_TO_ECI.set(r,this);for(var u=this.values,h=0,p=u.length;h!==p;h++){var g=u[h];n.VALUES_TO_ECI.set(g,this)}try{for(var _=zP(o),w=_.next();!w.done;w=_.next()){var A=w.value;n.NAME_TO_ECI.set(A,this)}}catch(S){i={error:S}}finally{try{w&&!w.done&&(a=_.return)&&a.call(_)}finally{if(i)throw i.error}}}return n.prototype.getValueIdentifier=function(){return this.valueIdentifier},n.prototype.getName=function(){return this.name},n.prototype.getValue=function(){return this.values[0]},n.getCharacterSetECIByValue=function(e){if(e<0||e>=900)throw new ye("incorect value");var t=n.VALUES_TO_ECI.get(e);if(t===void 0)throw new ye("incorect value");return t},n.getCharacterSetECIByName=function(e){var t=n.NAME_TO_ECI.get(e);if(t===void 0)throw new ye("incorect value");return t},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.getName()===t.getName()},n.VALUE_IDENTIFIER_TO_ECI=new Map,n.VALUES_TO_ECI=new Map,n.NAME_TO_ECI=new Map,n.Cp437=new n(Nt.Cp437,Int32Array.from([0,2]),"Cp437"),n.ISO8859_1=new n(Nt.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),n.ISO8859_2=new n(Nt.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),n.ISO8859_3=new n(Nt.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),n.ISO8859_4=new n(Nt.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),n.ISO8859_5=new n(Nt.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),n.ISO8859_6=new n(Nt.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),n.ISO8859_7=new n(Nt.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),n.ISO8859_8=new n(Nt.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),n.ISO8859_9=new n(Nt.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),n.ISO8859_10=new n(Nt.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),n.ISO8859_11=new n(Nt.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),n.ISO8859_13=new n(Nt.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),n.ISO8859_14=new n(Nt.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),n.ISO8859_15=new n(Nt.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),n.ISO8859_16=new n(Nt.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),n.SJIS=new n(Nt.SJIS,20,"SJIS","Shift_JIS"),n.Cp1250=new n(Nt.Cp1250,21,"Cp1250","windows-1250"),n.Cp1251=new n(Nt.Cp1251,22,"Cp1251","windows-1251"),n.Cp1252=new n(Nt.Cp1252,23,"Cp1252","windows-1252"),n.Cp1256=new n(Nt.Cp1256,24,"Cp1256","windows-1256"),n.UnicodeBigUnmarked=new n(Nt.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),n.UTF8=new n(Nt.UTF8,26,"UTF8","UTF-8"),n.ASCII=new n(Nt.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),n.Big5=new n(Nt.Big5,28,"Big5"),n.GB18030=new n(Nt.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),n.EUC_KR=new n(Nt.EUC_KR,30,"EUC_KR","EUC-KR"),n})(),HP=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Kd=(function(n){HP(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="UnsupportedOperationException",e})(Rr),ui=(function(){function n(){}return n.decode=function(e,t){var r=this.encodingName(t);return this.customDecoder?this.customDecoder(e,r):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(r)?this.decodeFallback(e,r):new TextDecoder(r).decode(e)},n.shouldDecodeOnFallback=function(e){return!n.isBrowser()&&e==="ISO-8859-1"},n.encode=function(e,t){var r=this.encodingName(t);return this.customEncoder?this.customEncoder(e,r):typeof TextEncoder>"u"?this.encodeFallback(e):new TextEncoder().encode(e)},n.isBrowser=function(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"},n.encodingName=function(e){return typeof e=="string"?e:e.getName()},n.encodingCharacterSet=function(e){return e instanceof Rn?e:Rn.getCharacterSetECIByName(e)},n.decodeFallback=function(e,t){var r=this.encodingCharacterSet(t);if(n.isDecodeFallbackSupported(r)){for(var i="",a=0,o=e.length;a<o;a++){var c=e[a].toString(16);c.length<2&&(c="0"+c),i+="%"+c}return decodeURIComponent(i)}if(r.equals(Rn.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(e.buffer));throw new Kd("Encoding "+this.encodingName(t)+" not supported by fallback.")},n.isDecodeFallbackSupported=function(e){return e.equals(Rn.UTF8)||e.equals(Rn.ISO8859_1)||e.equals(Rn.ASCII)},n.encodeFallback=function(e){for(var t=btoa(unescape(encodeURIComponent(e))),r=t.split(""),i=[],a=0;a<r.length;a++)i.push(r[a].charCodeAt(0));return new Uint8Array(i)},n})(),ut=(function(){function n(){}return n.castAsNonUtf8Char=function(e,t){t===void 0&&(t=null);var r=t?t.getName():this.ISO88591;return ui.decode(new Uint8Array([e]),r)},n.guessEncoding=function(e,t){if(t!=null&&t.get(Ft.CHARACTER_SET)!==void 0)return t.get(Ft.CHARACTER_SET).toString();for(var r=e.length,i=!0,a=!0,o=!0,c=0,u=0,h=0,p=0,g=0,_=0,w=0,A=0,S=0,D=0,C=0,P=e.length>3&&e[0]===239&&e[1]===187&&e[2]===191,V=0;V<r&&(i||a||o);V++){var H=e[V]&255;o&&(c>0?(H&128)===0?o=!1:c--:(H&128)!==0&&((H&64)===0?o=!1:(c++,(H&32)===0?u++:(c++,(H&16)===0?h++:(c++,(H&8)===0?p++:o=!1))))),i&&(H>127&&H<160?i=!1:H>159&&(H<192||H===215||H===247)&&C++),a&&(g>0?H<64||H===127||H>252?a=!1:g--:H===128||H===160||H>239?a=!1:H>160&&H<224?(_++,A=0,w++,w>S&&(S=w)):H>127?(g++,w=0,A++,A>D&&(D=A)):(w=0,A=0))}return o&&c>0&&(o=!1),a&&g>0&&(a=!1),o&&(P||u+h+p>0)?n.UTF8:a&&(n.ASSUME_SHIFT_JIS||S>=3||D>=3)?n.SHIFT_JIS:i&&a?S===2&&_===2||C*10>=r?n.SHIFT_JIS:n.ISO88591:i?n.ISO88591:a?n.SHIFT_JIS:o?n.UTF8:n.PLATFORM_DEFAULT_ENCODING},n.format=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var i=-1;function a(c,u,h,p,g,_){if(c==="%%")return"%";if(t[++i]!==void 0){c=p?parseInt(p.substr(1)):void 0;var w=g?parseInt(g.substr(1)):void 0,A;switch(_){case"s":A=t[i];break;case"c":A=t[i][0];break;case"f":A=parseFloat(t[i]).toFixed(c);break;case"p":A=parseFloat(t[i]).toPrecision(c);break;case"e":A=parseFloat(t[i]).toExponential(c);break;case"x":A=parseInt(t[i]).toString(w||16);break;case"d":A=parseFloat(parseInt(t[i],w||10).toPrecision(c)).toFixed(0);break}A=typeof A=="object"?JSON.stringify(A):(+A).toString(w);for(var S=parseInt(h),D=h&&h[0]+""=="0"?"0":" ";A.length<S;)A=u!==void 0?A+D:D+A;return A}}var o=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(o,a)},n.getBytes=function(e,t){return ui.encode(e,t)},n.getCharCode=function(e,t){return t===void 0&&(t=0),e.charCodeAt(t)},n.getCharAt=function(e){return String.fromCharCode(e)},n.SHIFT_JIS=Rn.SJIS.getName(),n.GB2312="GB2312",n.ISO88591=Rn.ISO8859_1.getName(),n.EUC_JP="EUC_JP",n.UTF8=Rn.UTF8.getName(),n.PLATFORM_DEFAULT_ENCODING=n.UTF8,n.ASSUME_SHIFT_JIS=!1,n})(),Je=(function(){function n(e){e===void 0&&(e=""),this.value=e}return n.prototype.enableDecoding=function(e){return this.encoding=e,this},n.prototype.append=function(e){return typeof e=="string"?this.value+=e.toString():this.encoding?this.value+=ut.castAsNonUtf8Char(e,this.encoding):this.value+=String.fromCharCode(e),this},n.prototype.appendChars=function(e,t,r){for(var i=t;t<t+r;i++)this.append(e[i]);return this},n.prototype.length=function(){return this.value.length},n.prototype.charAt=function(e){return this.value.charAt(e)},n.prototype.deleteCharAt=function(e){this.value=this.value.substr(0,e)+this.value.substring(e+1)},n.prototype.setCharAt=function(e,t){this.value=this.value.substr(0,e)+t+this.value.substr(e+1)},n.prototype.substring=function(e,t){return this.value.substring(e,t)},n.prototype.setLengthToZero=function(){this.value=""},n.prototype.toString=function(){return this.value},n.prototype.insert=function(e,t){this.value=this.value.substring(0,e)+t+this.value.substring(e)},n})(),_a=(function(){function n(e,t,r,i){if(this.width=e,this.height=t,this.rowSize=r,this.bits=i,t==null&&(t=e),this.height=t,e<1||t<1)throw new Pe("Both dimensions must be greater than 0");r==null&&(r=Math.floor((e+31)/32)),this.rowSize=r,i==null&&(this.bits=new Int32Array(this.rowSize*this.height))}return n.parseFromBooleanArray=function(e){for(var t=e.length,r=e[0].length,i=new n(r,t),a=0;a<t;a++)for(var o=e[a],c=0;c<r;c++)o[c]&&i.set(c,a);return i},n.parseFromString=function(e,t,r){if(e===null)throw new Pe("stringRepresentation cannot be null");for(var i=new Array(e.length),a=0,o=0,c=-1,u=0,h=0;h<e.length;)if(e.charAt(h)===`
`||e.charAt(h)==="\r"){if(a>o){if(c===-1)c=a-o;else if(a-o!==c)throw new Pe("row lengths do not match");o=a,u++}h++}else if(e.substring(h,h+t.length)===t)h+=t.length,i[a]=!0,a++;else if(e.substring(h,h+r.length)===r)h+=r.length,i[a]=!1,a++;else throw new Pe("illegal character encountered: "+e.substring(h));if(a>o){if(c===-1)c=a-o;else if(a-o!==c)throw new Pe("row lengths do not match");u++}for(var p=new n(c,u),g=0;g<a;g++)i[g]&&p.set(Math.floor(g%c),Math.floor(g/c));return p},n.prototype.get=function(e,t){var r=t*this.rowSize+Math.floor(e/32);return(this.bits[r]>>>(e&31)&1)!==0},n.prototype.set=function(e,t){var r=t*this.rowSize+Math.floor(e/32);this.bits[r]|=1<<(e&31)&4294967295},n.prototype.unset=function(e,t){var r=t*this.rowSize+Math.floor(e/32);this.bits[r]&=~(1<<(e&31)&4294967295)},n.prototype.flip=function(e,t){var r=t*this.rowSize+Math.floor(e/32);this.bits[r]^=1<<(e&31)&4294967295},n.prototype.xor=function(e){if(this.width!==e.getWidth()||this.height!==e.getHeight()||this.rowSize!==e.getRowSize())throw new Pe("input matrix dimensions do not match");for(var t=new $n(Math.floor(this.width/32)+1),r=this.rowSize,i=this.bits,a=0,o=this.height;a<o;a++)for(var c=a*r,u=e.getRow(a,t).getBitArray(),h=0;h<r;h++)i[c+h]^=u[h]},n.prototype.clear=function(){for(var e=this.bits,t=e.length,r=0;r<t;r++)e[r]=0},n.prototype.setRegion=function(e,t,r,i){if(t<0||e<0)throw new Pe("Left and top must be nonnegative");if(i<1||r<1)throw new Pe("Height and width must be at least 1");var a=e+r,o=t+i;if(o>this.height||a>this.width)throw new Pe("The region must fit inside the matrix");for(var c=this.rowSize,u=this.bits,h=t;h<o;h++)for(var p=h*c,g=e;g<a;g++)u[p+Math.floor(g/32)]|=1<<(g&31)&4294967295},n.prototype.getRow=function(e,t){t==null||t.getSize()<this.width?t=new $n(this.width):t.clear();for(var r=this.rowSize,i=this.bits,a=e*r,o=0;o<r;o++)t.setBulk(o*32,i[a+o]);return t},n.prototype.setRow=function(e,t){Vt.arraycopy(t.getBitArray(),0,this.bits,e*this.rowSize,this.rowSize)},n.prototype.rotate180=function(){for(var e=this.getWidth(),t=this.getHeight(),r=new $n(e),i=new $n(e),a=0,o=Math.floor((t+1)/2);a<o;a++)r=this.getRow(a,r),i=this.getRow(t-1-a,i),r.reverse(),i.reverse(),this.setRow(a,i),this.setRow(t-1-a,r)},n.prototype.getEnclosingRectangle=function(){for(var e=this.width,t=this.height,r=this.rowSize,i=this.bits,a=e,o=t,c=-1,u=-1,h=0;h<t;h++)for(var p=0;p<r;p++){var g=i[h*r+p];if(g!==0){if(h<o&&(o=h),h>u&&(u=h),p*32<a){for(var _=0;(g<<31-_&4294967295)===0;)_++;p*32+_<a&&(a=p*32+_)}if(p*32+31>c){for(var _=31;!(g>>>_);)_--;p*32+_>c&&(c=p*32+_)}}}return c<a||u<o?null:Int32Array.from([a,o,c-a+1,u-o+1])},n.prototype.getTopLeftOnBit=function(){for(var e=this.rowSize,t=this.bits,r=0;r<t.length&&t[r]===0;)r++;if(r===t.length)return null;for(var i=r/e,a=r%e*32,o=t[r],c=0;(o<<31-c&4294967295)===0;)c++;return a+=c,Int32Array.from([a,i])},n.prototype.getBottomRightOnBit=function(){for(var e=this.rowSize,t=this.bits,r=t.length-1;r>=0&&t[r]===0;)r--;if(r<0)return null;for(var i=Math.floor(r/e),a=Math.floor(r%e)*32,o=t[r],c=31;!(o>>>c);)c--;return a+=c,Int32Array.from([a,i])},n.prototype.getWidth=function(){return this.width},n.prototype.getHeight=function(){return this.height},n.prototype.getRowSize=function(){return this.rowSize},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.width===t.width&&this.height===t.height&&this.rowSize===t.rowSize&&On.equals(this.bits,t.bits)},n.prototype.hashCode=function(){var e=this.width;return e=31*e+this.width,e=31*e+this.height,e=31*e+this.rowSize,e=31*e+On.hashCode(this.bits),e},n.prototype.toString=function(e,t,r){return e===void 0&&(e="X "),t===void 0&&(t="  "),r===void 0&&(r=`
`),this.buildToString(e,t,r)},n.prototype.buildToString=function(e,t,r){for(var i=new Je,a=0,o=this.height;a<o;a++){for(var c=0,u=this.width;c<u;c++)i.append(this.get(c,a)?e:t);i.append(r)}return i.toString()},n.prototype.clone=function(){return new n(this.width,this.height,this.rowSize,this.bits.slice())},n})(),GP=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),se=(function(n){GP(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.getNotFoundInstance=function(){return new e},e.kind="NotFoundException",e})(Rr),qP=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),$P=(function(n){qP(e,n);function e(t){var r=n.call(this,t)||this;return r.luminances=e.EMPTY,r.buckets=new Int32Array(e.LUMINANCE_BUCKETS),r}return e.prototype.getBlackRow=function(t,r){var i=this.getLuminanceSource(),a=i.getWidth();r==null||r.getSize()<a?r=new $n(a):r.clear(),this.initArrays(a);for(var o=i.getRow(t,this.luminances),c=this.buckets,u=0;u<a;u++)c[(o[u]&255)>>e.LUMINANCE_SHIFT]++;var h=e.estimateBlackPoint(c);if(a<3)for(var u=0;u<a;u++)(o[u]&255)<h&&r.set(u);else for(var p=o[0]&255,g=o[1]&255,u=1;u<a-1;u++){var _=o[u+1]&255;(g*4-p-_)/2<h&&r.set(u),p=g,g=_}return r},e.prototype.getBlackMatrix=function(){var t=this.getLuminanceSource(),r=t.getWidth(),i=t.getHeight(),a=new _a(r,i);this.initArrays(r);for(var o=this.buckets,c=1;c<5;c++)for(var u=Math.floor(i*c/5),h=t.getRow(u,this.luminances),p=Math.floor(r*4/5),g=Math.floor(r/5);g<p;g++){var _=h[g]&255;o[_>>e.LUMINANCE_SHIFT]++}for(var w=e.estimateBlackPoint(o),A=t.getMatrix(),c=0;c<i;c++)for(var S=c*r,g=0;g<r;g++){var _=A[S+g]&255;_<w&&a.set(g,c)}return a},e.prototype.createBinarizer=function(t){return new e(t)},e.prototype.initArrays=function(t){this.luminances.length<t&&(this.luminances=new Uint8ClampedArray(t));for(var r=this.buckets,i=0;i<e.LUMINANCE_BUCKETS;i++)r[i]=0},e.estimateBlackPoint=function(t){for(var r=t.length,i=0,a=0,o=0,c=0;c<r;c++)t[c]>o&&(a=c,o=t[c]),t[c]>i&&(i=t[c]);for(var u=0,h=0,c=0;c<r;c++){var p=c-a,g=t[c]*p*p;g>h&&(u=c,h=g)}if(a>u){var _=a;a=u,u=_}if(u-a<=r/16)throw new se;for(var w=u-1,A=-1,c=u-1;c>a;c--){var S=c-a,g=S*S*(u-c)*(i-t[c]);g>A&&(w=c,A=g)}return w<<e.LUMINANCE_SHIFT},e.LUMINANCE_BITS=5,e.LUMINANCE_SHIFT=8-e.LUMINANCE_BITS,e.LUMINANCE_BUCKETS=1<<e.LUMINANCE_BITS,e.EMPTY=Uint8ClampedArray.from([0]),e})(jP),XP=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),A3=(function(n){XP(e,n);function e(t){var r=n.call(this,t)||this;return r.matrix=null,r}return e.prototype.getBlackMatrix=function(){if(this.matrix!==null)return this.matrix;var t=this.getLuminanceSource(),r=t.getWidth(),i=t.getHeight();if(r>=e.MINIMUM_DIMENSION&&i>=e.MINIMUM_DIMENSION){var a=t.getMatrix(),o=r>>e.BLOCK_SIZE_POWER;(r&e.BLOCK_SIZE_MASK)!==0&&o++;var c=i>>e.BLOCK_SIZE_POWER;(i&e.BLOCK_SIZE_MASK)!==0&&c++;var u=e.calculateBlackPoints(a,o,c,r,i),h=new _a(r,i);e.calculateThresholdForBlock(a,o,c,r,i,u,h),this.matrix=h}else this.matrix=n.prototype.getBlackMatrix.call(this);return this.matrix},e.prototype.createBinarizer=function(t){return new e(t)},e.calculateThresholdForBlock=function(t,r,i,a,o,c,u){for(var h=o-e.BLOCK_SIZE,p=a-e.BLOCK_SIZE,g=0;g<i;g++){var _=g<<e.BLOCK_SIZE_POWER;_>h&&(_=h);for(var w=e.cap(g,2,i-3),A=0;A<r;A++){var S=A<<e.BLOCK_SIZE_POWER;S>p&&(S=p);for(var D=e.cap(A,2,r-3),C=0,P=-2;P<=2;P++){var V=c[w+P];C+=V[D-2]+V[D-1]+V[D]+V[D+1]+V[D+2]}var H=C/25;e.thresholdBlock(t,S,_,H,a,u)}}},e.cap=function(t,r,i){return t<r?r:t>i?i:t},e.thresholdBlock=function(t,r,i,a,o,c){for(var u=0,h=i*o+r;u<e.BLOCK_SIZE;u++,h+=o)for(var p=0;p<e.BLOCK_SIZE;p++)(t[h+p]&255)<=a&&c.set(r+p,i+u)},e.calculateBlackPoints=function(t,r,i,a,o){for(var c=o-e.BLOCK_SIZE,u=a-e.BLOCK_SIZE,h=new Array(i),p=0;p<i;p++){h[p]=new Int32Array(r);var g=p<<e.BLOCK_SIZE_POWER;g>c&&(g=c);for(var _=0;_<r;_++){var w=_<<e.BLOCK_SIZE_POWER;w>u&&(w=u);for(var A=0,S=255,D=0,C=0,P=g*a+w;C<e.BLOCK_SIZE;C++,P+=a){for(var V=0;V<e.BLOCK_SIZE;V++){var H=t[P+V]&255;A+=H,H<S&&(S=H),H>D&&(D=H)}if(D-S>e.MIN_DYNAMIC_RANGE)for(C++,P+=a;C<e.BLOCK_SIZE;C++,P+=a)for(var V=0;V<e.BLOCK_SIZE;V++)A+=t[P+V]&255}var X=A>>e.BLOCK_SIZE_POWER*2;if(D-S<=e.MIN_DYNAMIC_RANGE&&(X=S/2,p>0&&_>0)){var F=(h[p-1][_]+2*h[p][_-1]+h[p-1][_-1])/4;S<F&&(X=F)}h[p][_]=X}}return h},e.BLOCK_SIZE_POWER=3,e.BLOCK_SIZE=1<<e.BLOCK_SIZE_POWER,e.BLOCK_SIZE_MASK=e.BLOCK_SIZE-1,e.MINIMUM_DIMENSION=e.BLOCK_SIZE*5,e.MIN_DYNAMIC_RANGE=24,e})($P),Xf=(function(){function n(e,t){this.width=e,this.height=t}return n.prototype.getWidth=function(){return this.width},n.prototype.getHeight=function(){return this.height},n.prototype.isCropSupported=function(){return!1},n.prototype.crop=function(e,t,r,i){throw new Kd("This luminance source does not support cropping.")},n.prototype.isRotateSupported=function(){return!1},n.prototype.rotateCounterClockwise=function(){throw new Kd("This luminance source does not support rotation by 90 degrees.")},n.prototype.rotateCounterClockwise45=function(){throw new Kd("This luminance source does not support rotation by 45 degrees.")},n.prototype.toString=function(){for(var e=new Uint8ClampedArray(this.width),t=new Je,r=0;r<this.height;r++){for(var i=this.getRow(r,e),a=0;a<this.width;a++){var o=i[a]&255,c=void 0;o<64?c="#":o<128?c="+":o<192?c=".":c=" ",t.append(c)}t.append(`
`)}return t.toString()},n})(),YP=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),mp=(function(n){YP(e,n);function e(t){var r=n.call(this,t.getWidth(),t.getHeight())||this;return r.delegate=t,r}return e.prototype.getRow=function(t,r){for(var i=this.delegate.getRow(t,r),a=this.getWidth(),o=0;o<a;o++)i[o]=255-(i[o]&255);return i},e.prototype.getMatrix=function(){for(var t=this.delegate.getMatrix(),r=this.getWidth()*this.getHeight(),i=new Uint8ClampedArray(r),a=0;a<r;a++)i[a]=255-(t[a]&255);return i},e.prototype.isCropSupported=function(){return this.delegate.isCropSupported()},e.prototype.crop=function(t,r,i,a){return new e(this.delegate.crop(t,r,i,a))},e.prototype.isRotateSupported=function(){return this.delegate.isRotateSupported()},e.prototype.invert=function(){return this.delegate},e.prototype.rotateCounterClockwise=function(){return new e(this.delegate.rotateCounterClockwise())},e.prototype.rotateCounterClockwise45=function(){return new e(this.delegate.rotateCounterClockwise45())},e})(Xf),KP=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),WP=(function(n){KP(e,n);function e(t,r){r===void 0&&(r=!1);var i=n.call(this,t.width,t.height)||this;return i.canvas=t,i.tempCanvasElement=null,i.buffer=e.makeBufferFromCanvasImageData(t,r),i}return e.makeBufferFromCanvasImageData=function(t,r){r===void 0&&(r=!1);var i=t.getContext("2d").getImageData(0,0,t.width,t.height);return e.toGrayscaleBuffer(i.data,t.width,t.height,r)},e.toGrayscaleBuffer=function(t,r,i,a){a===void 0&&(a=!1);var o=new Uint8ClampedArray(r*i);if(e.FRAME_INDEX=!e.FRAME_INDEX,e.FRAME_INDEX||!a)for(var c=0,u=0,h=t.length;c<h;c+=4,u++){var p=void 0,g=t[c+3];if(g===0)p=255;else{var _=t[c],w=t[c+1],A=t[c+2];p=306*_+601*w+117*A+512>>10}o[u]=p}else for(var c=0,u=0,S=t.length;c<S;c+=4,u++){var p=void 0,g=t[c+3];if(g===0)p=255;else{var _=t[c],w=t[c+1],A=t[c+2];p=306*_+601*w+117*A+512>>10}o[u]=255-p}return o},e.prototype.getRow=function(t,r){if(t<0||t>=this.getHeight())throw new Pe("Requested row is outside the image: "+t);var i=this.getWidth(),a=t*i;return r===null?r=this.buffer.slice(a,a+i):(r.length<i&&(r=new Uint8ClampedArray(i)),r.set(this.buffer.slice(a,a+i))),r},e.prototype.getMatrix=function(){return this.buffer},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(t,r,i,a){return n.prototype.crop.call(this,t,r,i,a),this},e.prototype.isRotateSupported=function(){return!0},e.prototype.rotateCounterClockwise=function(){return this.rotate(-90),this},e.prototype.rotateCounterClockwise45=function(){return this.rotate(-45),this},e.prototype.getTempCanvasElement=function(){if(this.tempCanvasElement===null){var t=this.canvas.ownerDocument.createElement("canvas");t.width=this.canvas.width,t.height=this.canvas.height,this.tempCanvasElement=t}return this.tempCanvasElement},e.prototype.rotate=function(t){var r=this.getTempCanvasElement(),i=r.getContext("2d"),a=t*e.DEGREE_TO_RADIANS,o=this.canvas.width,c=this.canvas.height,u=Math.ceil(Math.abs(Math.cos(a))*o+Math.abs(Math.sin(a))*c),h=Math.ceil(Math.abs(Math.sin(a))*o+Math.abs(Math.cos(a))*c);return r.width=u,r.height=h,i.translate(u/2,h/2),i.rotate(a),i.drawImage(this.canvas,o/-2,c/-2),this.buffer=e.makeBufferFromCanvasImageData(r),this},e.prototype.invert=function(){return new mp(this)},e.DEGREE_TO_RADIANS=Math.PI/180,e.FRAME_INDEX=!0,e})(Xf),QP=(function(){function n(e,t,r){this.deviceId=e,this.label=t,this.kind="videoinput",this.groupId=r||void 0}return n.prototype.toJSON=function(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}},n})(),pr=function(n,e,t,r){function i(a){return a instanceof t?a:new t(function(o){o(a)})}return new(t||(t=Promise))(function(a,o){function c(p){try{h(r.next(p))}catch(g){o(g)}}function u(p){try{h(r.throw(p))}catch(g){o(g)}}function h(p){p.done?a(p.value):i(p.value).then(c,u)}h((r=r.apply(n,e||[])).next())})},mr=function(n,e){var t={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,i,a,o;return o={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function c(h){return function(p){return u([h,p])}}function u(h){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,i&&(a=h[0]&2?i.return:h[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,h[1])).done)return a;switch(i=0,a&&(h=[h[0]&2,a.value]),h[0]){case 0:case 1:a=h;break;case 4:return t.label++,{value:h[1],done:!1};case 5:t.label++,i=h[1],h=[0];continue;case 7:h=t.ops.pop(),t.trys.pop();continue;default:if(a=t.trys,!(a=a.length>0&&a[a.length-1])&&(h[0]===6||h[0]===2)){t=0;continue}if(h[0]===3&&(!a||h[1]>a[0]&&h[1]<a[3])){t.label=h[1];break}if(h[0]===6&&t.label<a[1]){t.label=a[1],a=h;break}if(a&&t.label<a[2]){t.label=a[2],t.ops.push(h);break}a[2]&&t.ops.pop(),t.trys.pop();continue}h=e.call(n,t)}catch(p){h=[6,p],i=0}finally{r=a=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}},ZP=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},zc=(function(){function n(e,t,r){t===void 0&&(t=500),this.reader=e,this.timeBetweenScansMillis=t,this._hints=r,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}return Object.defineProperty(n.prototype,"hasNavigator",{get:function(){return typeof navigator<"u"},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isMediaDevicesSuported",{get:function(){return this.hasNavigator&&!!navigator.mediaDevices},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"canEnumerateDevices",{get:function(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"timeBetweenDecodingAttempts",{get:function(){return this._timeBetweenDecodingAttempts},set:function(e){this._timeBetweenDecodingAttempts=e<0?0:e},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"hints",{get:function(){return this._hints},set:function(e){this._hints=e||null},enumerable:!1,configurable:!0}),n.prototype.listVideoInputDevices=function(){return pr(this,void 0,void 0,function(){var e,t,r,i,a,o,c,u,h,p,g,_;return mr(this,function(w){switch(w.label){case 0:if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");return[4,navigator.mediaDevices.enumerateDevices()];case 1:e=w.sent(),t=[];try{for(r=ZP(e),i=r.next();!i.done;i=r.next())a=i.value,o=a.kind==="video"?"videoinput":a.kind,o==="videoinput"&&(c=a.deviceId||a.id,u=a.label||"Video device "+(t.length+1),h=a.groupId,p={deviceId:c,label:u,kind:o,groupId:h},t.push(p))}catch(A){g={error:A}}finally{try{i&&!i.done&&(_=r.return)&&_.call(r)}finally{if(g)throw g.error}}return[2,t]}})})},n.prototype.getVideoInputDevices=function(){return pr(this,void 0,void 0,function(){var e;return mr(this,function(t){switch(t.label){case 0:return[4,this.listVideoInputDevices()];case 1:return e=t.sent(),[2,e.map(function(r){return new QP(r.deviceId,r.label)})]}})})},n.prototype.findDeviceById=function(e){return pr(this,void 0,void 0,function(){var t;return mr(this,function(r){switch(r.label){case 0:return[4,this.listVideoInputDevices()];case 1:return t=r.sent(),t?[2,t.find(function(i){return i.deviceId===e})]:[2,null]}})})},n.prototype.decodeFromInputVideoDevice=function(e,t){return pr(this,void 0,void 0,function(){return mr(this,function(r){switch(r.label){case 0:return[4,this.decodeOnceFromVideoDevice(e,t)];case 1:return[2,r.sent()]}})})},n.prototype.decodeOnceFromVideoDevice=function(e,t){return pr(this,void 0,void 0,function(){var r,i;return mr(this,function(a){switch(a.label){case 0:return this.reset(),e?r={deviceId:{exact:e}}:r={facingMode:"environment"},i={video:r},[4,this.decodeOnceFromConstraints(i,t)];case 1:return[2,a.sent()]}})})},n.prototype.decodeOnceFromConstraints=function(e,t){return pr(this,void 0,void 0,function(){var r;return mr(this,function(i){switch(i.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return r=i.sent(),[4,this.decodeOnceFromStream(r,t)];case 2:return[2,i.sent()]}})})},n.prototype.decodeOnceFromStream=function(e,t){return pr(this,void 0,void 0,function(){var r,i;return mr(this,function(a){switch(a.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,t)];case 1:return r=a.sent(),[4,this.decodeOnce(r)];case 2:return i=a.sent(),[2,i]}})})},n.prototype.decodeFromInputVideoDeviceContinuously=function(e,t,r){return pr(this,void 0,void 0,function(){return mr(this,function(i){switch(i.label){case 0:return[4,this.decodeFromVideoDevice(e,t,r)];case 1:return[2,i.sent()]}})})},n.prototype.decodeFromVideoDevice=function(e,t,r){return pr(this,void 0,void 0,function(){var i,a;return mr(this,function(o){switch(o.label){case 0:return e?i={deviceId:{exact:e}}:i={facingMode:"environment"},a={video:i},[4,this.decodeFromConstraints(a,t,r)];case 1:return[2,o.sent()]}})})},n.prototype.decodeFromConstraints=function(e,t,r){return pr(this,void 0,void 0,function(){var i;return mr(this,function(a){switch(a.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return i=a.sent(),[4,this.decodeFromStream(i,t,r)];case 2:return[2,a.sent()]}})})},n.prototype.decodeFromStream=function(e,t,r){return pr(this,void 0,void 0,function(){var i;return mr(this,function(a){switch(a.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,t)];case 1:return i=a.sent(),[4,this.decodeContinuously(i,r)];case 2:return[2,a.sent()]}})})},n.prototype.stopAsyncDecode=function(){this._stopAsyncDecode=!0},n.prototype.stopContinuousDecode=function(){this._stopContinuousDecode=!0},n.prototype.attachStreamToVideo=function(e,t){return pr(this,void 0,void 0,function(){var r;return mr(this,function(i){switch(i.label){case 0:return r=this.prepareVideoElement(t),this.addVideoSource(r,e),this.videoElement=r,this.stream=e,[4,this.playVideoOnLoadAsync(r)];case 1:return i.sent(),[2,r]}})})},n.prototype.playVideoOnLoadAsync=function(e){var t=this;return new Promise(function(r,i){return t.playVideoOnLoad(e,function(){return r()})})},n.prototype.playVideoOnLoad=function(e,t){var r=this;this.videoEndedListener=function(){return r.stopStreams()},this.videoCanPlayListener=function(){return r.tryPlayVideo(e)},e.addEventListener("ended",this.videoEndedListener),e.addEventListener("canplay",this.videoCanPlayListener),e.addEventListener("playing",t),this.tryPlayVideo(e)},n.prototype.isVideoPlaying=function(e){return e.currentTime>0&&!e.paused&&!e.ended&&e.readyState>2},n.prototype.tryPlayVideo=function(e){return pr(this,void 0,void 0,function(){return mr(this,function(t){switch(t.label){case 0:if(this.isVideoPlaying(e))return console.warn("Trying to play video that is already playing."),[2];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,e.play()];case 2:return t.sent(),[3,4];case 3:return t.sent(),console.warn("It was not possible to play the video."),[3,4];case 4:return[2]}})})},n.prototype.getMediaElement=function(e,t){var r=document.getElementById(e);if(!r)throw new cn("element with id '"+e+"' not found");if(r.nodeName.toLowerCase()!==t.toLowerCase())throw new cn("element with id '"+e+"' must be an "+t+" element");return r},n.prototype.decodeFromImage=function(e,t){if(!e&&!t)throw new cn("either imageElement with a src set or an url must be provided");return t&&!e?this.decodeFromImageUrl(t):this.decodeFromImageElement(e)},n.prototype.decodeFromVideo=function(e,t){if(!e&&!t)throw new cn("Either an element with a src set or an URL must be provided");return t&&!e?this.decodeFromVideoUrl(t):this.decodeFromVideoElement(e)},n.prototype.decodeFromVideoContinuously=function(e,t,r){if(e===void 0&&t===void 0)throw new cn("Either an element with a src set or an URL must be provided");return t&&!e?this.decodeFromVideoUrlContinuously(t,r):this.decodeFromVideoElementContinuously(e,r)},n.prototype.decodeFromImageElement=function(e){if(!e)throw new cn("An image element must be provided.");this.reset();var t=this.prepareImageElement(e);this.imageElement=t;var r;return this.isImageLoaded(t)?r=this.decodeOnce(t,!1,!0):r=this._decodeOnLoadImage(t),r},n.prototype.decodeFromVideoElement=function(e){var t=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideo(t)},n.prototype.decodeFromVideoElementContinuously=function(e,t){var r=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideoContinuously(r,t)},n.prototype._decodeFromVideoElementSetup=function(e){if(!e)throw new cn("A video element must be provided.");this.reset();var t=this.prepareVideoElement(e);return this.videoElement=t,t},n.prototype.decodeFromImageUrl=function(e){if(!e)throw new cn("An URL must be provided.");this.reset();var t=this.prepareImageElement();this.imageElement=t;var r=this._decodeOnLoadImage(t);return t.src=e,r},n.prototype.decodeFromVideoUrl=function(e){if(!e)throw new cn("An URL must be provided.");this.reset();var t=this.prepareVideoElement(),r=this.decodeFromVideoElement(t);return t.src=e,r},n.prototype.decodeFromVideoUrlContinuously=function(e,t){if(!e)throw new cn("An URL must be provided.");this.reset();var r=this.prepareVideoElement(),i=this.decodeFromVideoElementContinuously(r,t);return r.src=e,i},n.prototype._decodeOnLoadImage=function(e){var t=this;return new Promise(function(r,i){t.imageLoadedListener=function(){return t.decodeOnce(e,!1,!0).then(r,i)},e.addEventListener("load",t.imageLoadedListener)})},n.prototype._decodeOnLoadVideo=function(e){return pr(this,void 0,void 0,function(){return mr(this,function(t){switch(t.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return t.sent(),[4,this.decodeOnce(e)];case 2:return[2,t.sent()]}})})},n.prototype._decodeOnLoadVideoContinuously=function(e,t){return pr(this,void 0,void 0,function(){return mr(this,function(r){switch(r.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return r.sent(),this.decodeContinuously(e,t),[2]}})})},n.prototype.isImageLoaded=function(e){return!(!e.complete||e.naturalWidth===0)},n.prototype.prepareImageElement=function(e){var t;return typeof e>"u"&&(t=document.createElement("img"),t.width=200,t.height=200),typeof e=="string"&&(t=this.getMediaElement(e,"img")),e instanceof HTMLImageElement&&(t=e),t},n.prototype.prepareVideoElement=function(e){var t;return!e&&typeof document<"u"&&(t=document.createElement("video"),t.width=200,t.height=200),typeof e=="string"&&(t=this.getMediaElement(e,"video")),e instanceof HTMLVideoElement&&(t=e),t.setAttribute("autoplay","true"),t.setAttribute("muted","true"),t.setAttribute("playsinline","true"),t},n.prototype.decodeOnce=function(e,t,r){var i=this;t===void 0&&(t=!0),r===void 0&&(r=!0),this._stopAsyncDecode=!1;var a=function(o,c){if(i._stopAsyncDecode){c(new se("Video stream has ended before any code could be detected.")),i._stopAsyncDecode=void 0;return}try{var u=i.decode(e);o(u)}catch(_){var h=t&&_ instanceof se,p=_ instanceof An||_ instanceof ye,g=p&&r;if(h||g)return setTimeout(a,i._timeBetweenDecodingAttempts,o,c);c(_)}};return new Promise(function(o,c){return a(o,c)})},n.prototype.decodeContinuously=function(e,t){var r=this;this._stopContinuousDecode=!1;var i=function(){if(r._stopContinuousDecode){r._stopContinuousDecode=void 0;return}try{var a=r.decode(e);t(a,null),setTimeout(i,r.timeBetweenScansMillis)}catch(u){t(null,u);var o=u instanceof An||u instanceof ye,c=u instanceof se;(o||c)&&setTimeout(i,r._timeBetweenDecodingAttempts)}};i()},n.prototype.decode=function(e){var t=this.createBinaryBitmap(e);return this.decodeBitmap(t)},n.prototype.createBinaryBitmap=function(e){this.getCaptureCanvasContext(e);var t=!1;e instanceof HTMLVideoElement?(this.drawFrameOnCanvas(e),t=!0):this.drawImageOnCanvas(e);var r=this.getCaptureCanvas(e),i=new WP(r,t),a=new A3(i);return new E3(a)},n.prototype.getCaptureCanvasContext=function(e){if(!this.captureCanvasContext){var t=this.getCaptureCanvas(e),r=void 0;try{r=t.getContext("2d",{willReadFrequently:!0})}catch{r=t.getContext("2d")}this.captureCanvasContext=r}return this.captureCanvasContext},n.prototype.getCaptureCanvas=function(e){if(!this.captureCanvas){var t=this.createCaptureCanvas(e);this.captureCanvas=t}return this.captureCanvas},n.prototype.drawFrameOnCanvas=function(e,t,r){t===void 0&&(t={sx:0,sy:0,sWidth:e.videoWidth,sHeight:e.videoHeight,dx:0,dy:0,dWidth:e.videoWidth,dHeight:e.videoHeight}),r===void 0&&(r=this.captureCanvasContext),r.drawImage(e,t.sx,t.sy,t.sWidth,t.sHeight,t.dx,t.dy,t.dWidth,t.dHeight)},n.prototype.drawImageOnCanvas=function(e,t,r){t===void 0&&(t={sx:0,sy:0,sWidth:e.naturalWidth,sHeight:e.naturalHeight,dx:0,dy:0,dWidth:e.naturalWidth,dHeight:e.naturalHeight}),r===void 0&&(r=this.captureCanvasContext),r.drawImage(e,t.sx,t.sy,t.sWidth,t.sHeight,t.dx,t.dy,t.dWidth,t.dHeight)},n.prototype.decodeBitmap=function(e){return this.reader.decode(e,this._hints)},n.prototype.createCaptureCanvas=function(e){if(typeof document>"u")return this._destroyCaptureCanvas(),null;var t=document.createElement("canvas"),r,i;return typeof e<"u"&&(e instanceof HTMLVideoElement?(r=e.videoWidth,i=e.videoHeight):e instanceof HTMLImageElement&&(r=e.naturalWidth||e.width,i=e.naturalHeight||e.height)),t.style.width=r+"px",t.style.height=i+"px",t.width=r,t.height=i,t},n.prototype.stopStreams=function(){this.stream&&(this.stream.getVideoTracks().forEach(function(e){return e.stop()}),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()},n.prototype.reset=function(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()},n.prototype._destroyVideoElement=function(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)},n.prototype._destroyImageElement=function(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)},n.prototype._destroyCaptureCanvas=function(){this.captureCanvasContext=void 0,this.captureCanvas=void 0},n.prototype.addVideoSource=function(e,t){try{e.srcObject=t}catch{e.src=URL.createObjectURL(t)}},n.prototype.cleanVideoSource=function(e){try{e.srcObject=null}catch{e.src=""}this.videoElement.removeAttribute("src")},n})(),fr=(function(){function n(e,t,r,i,a,o){r===void 0&&(r=t==null?0:8*t.length),o===void 0&&(o=Vt.currentTimeMillis()),this.text=e,this.rawBytes=t,this.numBits=r,this.resultPoints=i,this.format=a,this.timestamp=o,this.text=e,this.rawBytes=t,r==null?this.numBits=t==null?0:8*t.length:this.numBits=r,this.resultPoints=i,this.format=a,this.resultMetadata=null,o==null?this.timestamp=Vt.currentTimeMillis():this.timestamp=o}return n.prototype.getText=function(){return this.text},n.prototype.getRawBytes=function(){return this.rawBytes},n.prototype.getNumBits=function(){return this.numBits},n.prototype.getResultPoints=function(){return this.resultPoints},n.prototype.getBarcodeFormat=function(){return this.format},n.prototype.getResultMetadata=function(){return this.resultMetadata},n.prototype.putMetadata=function(e,t){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(e,t)},n.prototype.putAllMetadata=function(e){e!==null&&(this.resultMetadata===null?this.resultMetadata=e:this.resultMetadata=new Map(e))},n.prototype.addResultPoints=function(e){var t=this.resultPoints;if(t===null)this.resultPoints=e;else if(e!==null&&e.length>0){var r=new Array(t.length+e.length);Vt.arraycopy(t,0,r,0,t.length),Vt.arraycopy(e,0,r,t.length,e.length),this.resultPoints=r}},n.prototype.getTimestamp=function(){return this.timestamp},n.prototype.toString=function(){return this.text},n})(),ov;(function(n){n[n.AZTEC=0]="AZTEC",n[n.CODABAR=1]="CODABAR",n[n.CODE_39=2]="CODE_39",n[n.CODE_93=3]="CODE_93",n[n.CODE_128=4]="CODE_128",n[n.DATA_MATRIX=5]="DATA_MATRIX",n[n.EAN_8=6]="EAN_8",n[n.EAN_13=7]="EAN_13",n[n.ITF=8]="ITF",n[n.MAXICODE=9]="MAXICODE",n[n.PDF_417=10]="PDF_417",n[n.QR_CODE=11]="QR_CODE",n[n.RSS_14=12]="RSS_14",n[n.RSS_EXPANDED=13]="RSS_EXPANDED",n[n.UPC_A=14]="UPC_A",n[n.UPC_E=15]="UPC_E",n[n.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(ov||(ov={}));const Me=ov;var lv;(function(n){n[n.OTHER=0]="OTHER",n[n.ORIENTATION=1]="ORIENTATION",n[n.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",n[n.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",n[n.ISSUE_NUMBER=4]="ISSUE_NUMBER",n[n.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",n[n.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",n[n.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",n[n.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",n[n.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",n[n.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(lv||(lv={}));const ir=lv;var gp=(function(){function n(e,t,r,i,a,o){a===void 0&&(a=-1),o===void 0&&(o=-1),this.rawBytes=e,this.text=t,this.byteSegments=r,this.ecLevel=i,this.structuredAppendSequenceNumber=a,this.structuredAppendParity=o,this.numBits=e==null?0:8*e.length}return n.prototype.getRawBytes=function(){return this.rawBytes},n.prototype.getNumBits=function(){return this.numBits},n.prototype.setNumBits=function(e){this.numBits=e},n.prototype.getText=function(){return this.text},n.prototype.getByteSegments=function(){return this.byteSegments},n.prototype.getECLevel=function(){return this.ecLevel},n.prototype.getErrorsCorrected=function(){return this.errorsCorrected},n.prototype.setErrorsCorrected=function(e){this.errorsCorrected=e},n.prototype.getErasures=function(){return this.erasures},n.prototype.setErasures=function(e){this.erasures=e},n.prototype.getOther=function(){return this.other},n.prototype.setOther=function(e){this.other=e},n.prototype.hasStructuredAppend=function(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0},n.prototype.getStructuredAppendParity=function(){return this.structuredAppendParity},n.prototype.getStructuredAppendSequenceNumber=function(){return this.structuredAppendSequenceNumber},n})(),rf=(function(){function n(){}return n.prototype.exp=function(e){return this.expTable[e]},n.prototype.log=function(e){if(e===0)throw new Pe;return this.logTable[e]},n.addOrSubtract=function(e,t){return e^t},n})(),Ks=(function(){function n(e,t){if(t.length===0)throw new Pe;this.field=e;var r=t.length;if(r>1&&t[0]===0){for(var i=1;i<r&&t[i]===0;)i++;i===r?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(r-i),Vt.arraycopy(t,i,this.coefficients,0,this.coefficients.length))}else this.coefficients=t}return n.prototype.getCoefficients=function(){return this.coefficients},n.prototype.getDegree=function(){return this.coefficients.length-1},n.prototype.isZero=function(){return this.coefficients[0]===0},n.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},n.prototype.evaluateAt=function(e){if(e===0)return this.getCoefficient(0);var t=this.coefficients,r;if(e===1){r=0;for(var i=0,a=t.length;i!==a;i++){var o=t[i];r=rf.addOrSubtract(r,o)}return r}r=t[0];for(var c=t.length,u=this.field,i=1;i<c;i++)r=rf.addOrSubtract(u.multiply(e,r),t[i]);return r},n.prototype.addOrSubtract=function(e){if(!this.field.equals(e.field))throw new Pe("GenericGFPolys do not have same GenericGF field");if(this.isZero())return e;if(e.isZero())return this;var t=this.coefficients,r=e.coefficients;if(t.length>r.length){var i=t;t=r,r=i}var a=new Int32Array(r.length),o=r.length-t.length;Vt.arraycopy(r,0,a,0,o);for(var c=o;c<r.length;c++)a[c]=rf.addOrSubtract(t[c-o],r[c]);return new n(this.field,a)},n.prototype.multiply=function(e){if(!this.field.equals(e.field))throw new Pe("GenericGFPolys do not have same GenericGF field");if(this.isZero()||e.isZero())return this.field.getZero();for(var t=this.coefficients,r=t.length,i=e.coefficients,a=i.length,o=new Int32Array(r+a-1),c=this.field,u=0;u<r;u++)for(var h=t[u],p=0;p<a;p++)o[u+p]=rf.addOrSubtract(o[u+p],c.multiply(h,i[p]));return new n(c,o)},n.prototype.multiplyScalar=function(e){if(e===0)return this.field.getZero();if(e===1)return this;for(var t=this.coefficients.length,r=this.field,i=new Int32Array(t),a=this.coefficients,o=0;o<t;o++)i[o]=r.multiply(a[o],e);return new n(r,i)},n.prototype.multiplyByMonomial=function(e,t){if(e<0)throw new Pe;if(t===0)return this.field.getZero();for(var r=this.coefficients,i=r.length,a=new Int32Array(i+e),o=this.field,c=0;c<i;c++)a[c]=o.multiply(r[c],t);return new n(o,a)},n.prototype.divide=function(e){if(!this.field.equals(e.field))throw new Pe("GenericGFPolys do not have same GenericGF field");if(e.isZero())throw new Pe("Divide by 0");for(var t=this.field,r=t.getZero(),i=this,a=e.getCoefficient(e.getDegree()),o=t.inverse(a);i.getDegree()>=e.getDegree()&&!i.isZero();){var c=i.getDegree()-e.getDegree(),u=t.multiply(i.getCoefficient(i.getDegree()),o),h=e.multiplyByMonomial(c,u),p=t.buildMonomial(c,u);r=r.addOrSubtract(p),i=i.addOrSubtract(h)}return[r,i]},n.prototype.toString=function(){for(var e="",t=this.getDegree();t>=0;t--){var r=this.getCoefficient(t);if(r!==0){if(r<0?(e+=" - ",r=-r):e.length>0&&(e+=" + "),t===0||r!==1){var i=this.field.log(r);i===0?e+="1":i===1?e+="a":(e+="a^",e+=i)}t!==0&&(t===1?e+="x":(e+="x^",e+=t))}}return e},n})(),JP=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),b3=(function(n){JP(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="ArithmeticException",e})(Rr),ek=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Tr=(function(n){ek(e,n);function e(t,r,i){var a=n.call(this)||this;a.primitive=t,a.size=r,a.generatorBase=i;for(var o=new Int32Array(r),c=1,u=0;u<r;u++)o[u]=c,c*=2,c>=r&&(c^=t,c&=r-1);a.expTable=o;for(var h=new Int32Array(r),u=0;u<r-1;u++)h[o[u]]=u;return a.logTable=h,a.zero=new Ks(a,Int32Array.from([0])),a.one=new Ks(a,Int32Array.from([1])),a}return e.prototype.getZero=function(){return this.zero},e.prototype.getOne=function(){return this.one},e.prototype.buildMonomial=function(t,r){if(t<0)throw new Pe;if(r===0)return this.zero;var i=new Int32Array(t+1);return i[0]=r,new Ks(this,i)},e.prototype.inverse=function(t){if(t===0)throw new b3;return this.expTable[this.size-this.logTable[t]-1]},e.prototype.multiply=function(t,r){return t===0||r===0?0:this.expTable[(this.logTable[t]+this.logTable[r])%(this.size-1)]},e.prototype.getSize=function(){return this.size},e.prototype.getGeneratorBase=function(){return this.generatorBase},e.prototype.toString=function(){return"GF(0x"+et.toHexString(this.primitive)+","+this.size+")"},e.prototype.equals=function(t){return t===this},e.AZTEC_DATA_12=new e(4201,4096,1),e.AZTEC_DATA_10=new e(1033,1024,1),e.AZTEC_DATA_6=new e(67,64,1),e.AZTEC_PARAM=new e(19,16,1),e.QR_CODE_FIELD_256=new e(285,256,0),e.DATA_MATRIX_FIELD_256=new e(301,256,1),e.AZTEC_DATA_8=e.DATA_MATRIX_FIELD_256,e.MAXICODE_FIELD_64=e.AZTEC_DATA_6,e})(rf),tk=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Rd=(function(n){tk(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="ReedSolomonException",e})(Rr),nk=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Yf=(function(n){nk(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="IllegalStateException",e})(Rr),vp=(function(){function n(e){this.field=e}return n.prototype.decode=function(e,t){for(var r=this.field,i=new Ks(r,e),a=new Int32Array(t),o=!0,c=0;c<t;c++){var u=i.evaluateAt(r.exp(c+r.getGeneratorBase()));a[a.length-1-c]=u,u!==0&&(o=!1)}if(!o)for(var h=new Ks(r,a),p=this.runEuclideanAlgorithm(r.buildMonomial(t,1),h,t),g=p[0],_=p[1],w=this.findErrorLocations(g),A=this.findErrorMagnitudes(_,w),c=0;c<w.length;c++){var S=e.length-1-r.log(w[c]);if(S<0)throw new Rd("Bad error location");e[S]=Tr.addOrSubtract(e[S],A[c])}},n.prototype.runEuclideanAlgorithm=function(e,t,r){if(e.getDegree()<t.getDegree()){var i=e;e=t,t=i}for(var a=this.field,o=e,c=t,u=a.getZero(),h=a.getOne();c.getDegree()>=(r/2|0);){var p=o,g=u;if(o=c,u=h,o.isZero())throw new Rd("r_{i-1} was zero");c=p;for(var _=a.getZero(),w=o.getCoefficient(o.getDegree()),A=a.inverse(w);c.getDegree()>=o.getDegree()&&!c.isZero();){var S=c.getDegree()-o.getDegree(),D=a.multiply(c.getCoefficient(c.getDegree()),A);_=_.addOrSubtract(a.buildMonomial(S,D)),c=c.addOrSubtract(o.multiplyByMonomial(S,D))}if(h=_.multiply(u).addOrSubtract(g),c.getDegree()>=o.getDegree())throw new Yf("Division algorithm failed to reduce polynomial?")}var C=h.getCoefficient(0);if(C===0)throw new Rd("sigmaTilde(0) was zero");var P=a.inverse(C),V=h.multiplyScalar(P),H=c.multiplyScalar(P);return[V,H]},n.prototype.findErrorLocations=function(e){var t=e.getDegree();if(t===1)return Int32Array.from([e.getCoefficient(1)]);for(var r=new Int32Array(t),i=0,a=this.field,o=1;o<a.getSize()&&i<t;o++)e.evaluateAt(o)===0&&(r[i]=a.inverse(o),i++);if(i!==t)throw new Rd("Error locator degree does not match number of roots");return r},n.prototype.findErrorMagnitudes=function(e,t){for(var r=t.length,i=new Int32Array(r),a=this.field,o=0;o<r;o++){for(var c=a.inverse(t[o]),u=1,h=0;h<r;h++)if(o!==h){var p=a.multiply(t[h],c),g=(p&1)===0?p|1:p&-2;u=a.multiply(u,g)}i[o]=a.multiply(e.evaluateAt(c),a.inverse(u)),a.getGeneratorBase()!==0&&(i[o]=a.multiply(i[o],c))}return i},n})(),Jn;(function(n){n[n.UPPER=0]="UPPER",n[n.LOWER=1]="LOWER",n[n.MIXED=2]="MIXED",n[n.DIGIT=3]="DIGIT",n[n.PUNCT=4]="PUNCT",n[n.BINARY=5]="BINARY"})(Jn||(Jn={}));var SA=(function(){function n(){}return n.prototype.decode=function(e){this.ddata=e;var t=e.getBits(),r=this.extractBits(t),i=this.correctBits(r),a=n.convertBoolArrayToByteArray(i),o=n.getEncodedData(i),c=new gp(a,o,null,null);return c.setNumBits(i.length),c},n.highLevelDecode=function(e){return this.getEncodedData(e)},n.getEncodedData=function(e){for(var t=e.length,r=Jn.UPPER,i=Jn.UPPER,a="",o=0;o<t;)if(i===Jn.BINARY){if(t-o<5)break;var c=n.readCode(e,o,5);if(o+=5,c===0){if(t-o<11)break;c=n.readCode(e,o,11)+31,o+=11}for(var u=0;u<c;u++){if(t-o<8){o=t;break}var h=n.readCode(e,o,8);a+=ut.castAsNonUtf8Char(h),o+=8}i=r}else{var p=i===Jn.DIGIT?4:5;if(t-o<p)break;var h=n.readCode(e,o,p);o+=p;var g=n.getCharacter(i,h);g.startsWith("CTRL_")?(r=i,i=n.getTable(g.charAt(5)),g.charAt(6)==="L"&&(r=i)):(a+=g,i=r)}return a},n.getTable=function(e){switch(e){case"L":return Jn.LOWER;case"P":return Jn.PUNCT;case"M":return Jn.MIXED;case"D":return Jn.DIGIT;case"B":return Jn.BINARY;case"U":default:return Jn.UPPER}},n.getCharacter=function(e,t){switch(e){case Jn.UPPER:return n.UPPER_TABLE[t];case Jn.LOWER:return n.LOWER_TABLE[t];case Jn.MIXED:return n.MIXED_TABLE[t];case Jn.PUNCT:return n.PUNCT_TABLE[t];case Jn.DIGIT:return n.DIGIT_TABLE[t];default:throw new Yf("Bad table")}},n.prototype.correctBits=function(e){var t,r;this.ddata.getNbLayers()<=2?(r=6,t=Tr.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(r=8,t=Tr.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(r=10,t=Tr.AZTEC_DATA_10):(r=12,t=Tr.AZTEC_DATA_12);var i=this.ddata.getNbDatablocks(),a=e.length/r;if(a<i)throw new ye;for(var o=e.length%r,c=new Int32Array(a),u=0;u<a;u++,o+=r)c[u]=n.readCode(e,o,r);try{var h=new vp(t);h.decode(c,a-i)}catch(D){throw new ye(D)}for(var p=(1<<r)-1,g=0,u=0;u<i;u++){var _=c[u];if(_===0||_===p)throw new ye;(_===1||_===p-1)&&g++}for(var w=new Array(i*r-g),A=0,u=0;u<i;u++){var _=c[u];if(_===1||_===p-1)w.fill(_>1,A,A+r-1),A+=r-1;else for(var S=r-1;S>=0;--S)w[A++]=(_&1<<S)!==0}return w},n.prototype.extractBits=function(e){var t=this.ddata.isCompact(),r=this.ddata.getNbLayers(),i=(t?11:14)+r*4,a=new Int32Array(i),o=new Array(this.totalBitsInLayer(r,t));if(t)for(var c=0;c<a.length;c++)a[c]=c;else for(var u=i+1+2*et.truncDivision(et.truncDivision(i,2)-1,15),h=i/2,p=et.truncDivision(u,2),c=0;c<h;c++){var g=c+et.truncDivision(c,15);a[h-c-1]=p-g-1,a[h+c]=p+g+1}for(var c=0,_=0;c<r;c++){for(var w=(r-c)*4+(t?9:12),A=c*2,S=i-1-A,D=0;D<w;D++)for(var C=D*2,P=0;P<2;P++)o[_+C+P]=e.get(a[A+P],a[A+D]),o[_+2*w+C+P]=e.get(a[A+D],a[S-P]),o[_+4*w+C+P]=e.get(a[S-P],a[S-D]),o[_+6*w+C+P]=e.get(a[S-D],a[A+P]);_+=w*8}return o},n.readCode=function(e,t,r){for(var i=0,a=t;a<t+r;a++)i<<=1,e[a]&&(i|=1);return i},n.readByte=function(e,t){var r=e.length-t;return r>=8?n.readCode(e,t,8):n.readCode(e,t,r)<<8-r},n.convertBoolArrayToByteArray=function(e){for(var t=new Uint8Array((e.length+7)/8),r=0;r<t.length;r++)t[r]=n.readByte(e,8*r);return t},n.prototype.totalBitsInLayer=function(e,t){return((t?88:112)+16*e)*e},n.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],n.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],n.MIXED_TABLE=["CTRL_PS"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~","","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],n.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],n.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"],n})(),gt=(function(){function n(){}return n.round=function(e){return isNaN(e)?0:e<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:e>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:e+(e<0?-.5:.5)|0},n.distance=function(e,t,r,i){var a=e-r,o=t-i;return Math.sqrt(a*a+o*o)},n.sum=function(e){for(var t=0,r=0,i=e.length;r!==i;r++){var a=e[r];t+=a}return t},n})(),cv=(function(){function n(){}return n.floatToIntBits=function(e){return e},n.MAX_VALUE=Number.MAX_SAFE_INTEGER,n})(),Te=(function(){function n(e,t){this.x=e,this.y=t}return n.prototype.getX=function(){return this.x},n.prototype.getY=function(){return this.y},n.prototype.equals=function(e){if(e instanceof n){var t=e;return this.x===t.x&&this.y===t.y}return!1},n.prototype.hashCode=function(){return 31*cv.floatToIntBits(this.x)+cv.floatToIntBits(this.y)},n.prototype.toString=function(){return"("+this.x+","+this.y+")"},n.orderBestPatterns=function(e){var t=this.distance(e[0],e[1]),r=this.distance(e[1],e[2]),i=this.distance(e[0],e[2]),a,o,c;if(r>=t&&r>=i?(o=e[0],a=e[1],c=e[2]):i>=r&&i>=t?(o=e[1],a=e[0],c=e[2]):(o=e[2],a=e[0],c=e[1]),this.crossProductZ(a,o,c)<0){var u=a;a=c,c=u}e[0]=a,e[1]=o,e[2]=c},n.distance=function(e,t){return gt.distance(e.x,e.y,t.x,t.y)},n.crossProductZ=function(e,t,r){var i=t.x,a=t.y;return(r.x-i)*(e.y-a)-(r.y-a)*(e.x-i)},n})(),Uy=(function(){function n(e,t){this.bits=e,this.points=t}return n.prototype.getBits=function(){return this.bits},n.prototype.getPoints=function(){return this.points},n})(),rk=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),ik=(function(n){rk(e,n);function e(t,r,i,a,o){var c=n.call(this,t,r)||this;return c.compact=i,c.nbDatablocks=a,c.nbLayers=o,c}return e.prototype.getNbLayers=function(){return this.nbLayers},e.prototype.getNbDatablocks=function(){return this.nbDatablocks},e.prototype.isCompact=function(){return this.compact},e})(Uy),uv=(function(){function n(e,t,r,i){this.image=e,this.height=e.getHeight(),this.width=e.getWidth(),t==null&&(t=n.INIT_SIZE),r==null&&(r=e.getWidth()/2|0),i==null&&(i=e.getHeight()/2|0);var a=t/2|0;if(this.leftInit=r-a,this.rightInit=r+a,this.upInit=i-a,this.downInit=i+a,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new se}return n.prototype.detect=function(){for(var e=this.leftInit,t=this.rightInit,r=this.upInit,i=this.downInit,a=!1,o=!0,c=!1,u=!1,h=!1,p=!1,g=!1,_=this.width,w=this.height;o;){o=!1;for(var A=!0;(A||!u)&&t<_;)A=this.containsBlackPoint(r,i,t,!1),A?(t++,o=!0,u=!0):u||t++;if(t>=_){a=!0;break}for(var S=!0;(S||!h)&&i<w;)S=this.containsBlackPoint(e,t,i,!0),S?(i++,o=!0,h=!0):h||i++;if(i>=w){a=!0;break}for(var D=!0;(D||!p)&&e>=0;)D=this.containsBlackPoint(r,i,e,!1),D?(e--,o=!0,p=!0):p||e--;if(e<0){a=!0;break}for(var C=!0;(C||!g)&&r>=0;)C=this.containsBlackPoint(e,t,r,!0),C?(r--,o=!0,g=!0):g||r--;if(r<0){a=!0;break}o&&(c=!0)}if(!a&&c){for(var P=t-e,V=null,H=1;V===null&&H<P;H++)V=this.getBlackPointOnSegment(e,i-H,e+H,i);if(V==null)throw new se;for(var X=null,H=1;X===null&&H<P;H++)X=this.getBlackPointOnSegment(e,r+H,e+H,r);if(X==null)throw new se;for(var F=null,H=1;F===null&&H<P;H++)F=this.getBlackPointOnSegment(t,r+H,t-H,r);if(F==null)throw new se;for(var I=null,H=1;I===null&&H<P;H++)I=this.getBlackPointOnSegment(t,i-H,t-H,i);if(I==null)throw new se;return this.centerEdges(I,V,F,X)}else throw new se},n.prototype.getBlackPointOnSegment=function(e,t,r,i){for(var a=gt.round(gt.distance(e,t,r,i)),o=(r-e)/a,c=(i-t)/a,u=this.image,h=0;h<a;h++){var p=gt.round(e+h*o),g=gt.round(t+h*c);if(u.get(p,g))return new Te(p,g)}return null},n.prototype.centerEdges=function(e,t,r,i){var a=e.getX(),o=e.getY(),c=t.getX(),u=t.getY(),h=r.getX(),p=r.getY(),g=i.getX(),_=i.getY(),w=n.CORR;return a<this.width/2?[new Te(g-w,_+w),new Te(c+w,u+w),new Te(h-w,p-w),new Te(a+w,o-w)]:[new Te(g+w,_+w),new Te(c+w,u-w),new Te(h-w,p+w),new Te(a-w,o-w)]},n.prototype.containsBlackPoint=function(e,t,r,i){var a=this.image;if(i){for(var o=e;o<=t;o++)if(a.get(o,r))return!0}else for(var c=e;c<=t;c++)if(a.get(r,c))return!0;return!1},n.INIT_SIZE=10,n.CORR=1,n})(),CA=(function(){function n(){}return n.checkAndNudgePoints=function(e,t){for(var r=e.getWidth(),i=e.getHeight(),a=!0,o=0;o<t.length&&a;o+=2){var c=Math.floor(t[o]),u=Math.floor(t[o+1]);if(c<-1||c>r||u<-1||u>i)throw new se;a=!1,c===-1?(t[o]=0,a=!0):c===r&&(t[o]=r-1,a=!0),u===-1?(t[o+1]=0,a=!0):u===i&&(t[o+1]=i-1,a=!0)}a=!0;for(var o=t.length-2;o>=0&&a;o-=2){var c=Math.floor(t[o]),u=Math.floor(t[o+1]);if(c<-1||c>r||u<-1||u>i)throw new se;a=!1,c===-1?(t[o]=0,a=!0):c===r&&(t[o]=r-1,a=!0),u===-1?(t[o+1]=0,a=!0):u===i&&(t[o+1]=i-1,a=!0)}},n})(),S3=(function(){function n(e,t,r,i,a,o,c,u,h){this.a11=e,this.a21=t,this.a31=r,this.a12=i,this.a22=a,this.a32=o,this.a13=c,this.a23=u,this.a33=h}return n.quadrilateralToQuadrilateral=function(e,t,r,i,a,o,c,u,h,p,g,_,w,A,S,D){var C=n.quadrilateralToSquare(e,t,r,i,a,o,c,u),P=n.squareToQuadrilateral(h,p,g,_,w,A,S,D);return P.times(C)},n.prototype.transformPoints=function(e){for(var t=e.length,r=this.a11,i=this.a12,a=this.a13,o=this.a21,c=this.a22,u=this.a23,h=this.a31,p=this.a32,g=this.a33,_=0;_<t;_+=2){var w=e[_],A=e[_+1],S=a*w+u*A+g;e[_]=(r*w+o*A+h)/S,e[_+1]=(i*w+c*A+p)/S}},n.prototype.transformPointsWithValues=function(e,t){for(var r=this.a11,i=this.a12,a=this.a13,o=this.a21,c=this.a22,u=this.a23,h=this.a31,p=this.a32,g=this.a33,_=e.length,w=0;w<_;w++){var A=e[w],S=t[w],D=a*A+u*S+g;e[w]=(r*A+o*S+h)/D,t[w]=(i*A+c*S+p)/D}},n.squareToQuadrilateral=function(e,t,r,i,a,o,c,u){var h=e-r+a-c,p=t-i+o-u;if(h===0&&p===0)return new n(r-e,a-r,e,i-t,o-i,t,0,0,1);var g=r-a,_=c-a,w=i-o,A=u-o,S=g*A-_*w,D=(h*A-_*p)/S,C=(g*p-h*w)/S;return new n(r-e+D*r,c-e+C*c,e,i-t+D*i,u-t+C*u,t,D,C,1)},n.quadrilateralToSquare=function(e,t,r,i,a,o,c,u){return n.squareToQuadrilateral(e,t,r,i,a,o,c,u).buildAdjoint()},n.prototype.buildAdjoint=function(){return new n(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)},n.prototype.times=function(e){return new n(this.a11*e.a11+this.a21*e.a12+this.a31*e.a13,this.a11*e.a21+this.a21*e.a22+this.a31*e.a23,this.a11*e.a31+this.a21*e.a32+this.a31*e.a33,this.a12*e.a11+this.a22*e.a12+this.a32*e.a13,this.a12*e.a21+this.a22*e.a22+this.a32*e.a23,this.a12*e.a31+this.a22*e.a32+this.a32*e.a33,this.a13*e.a11+this.a23*e.a12+this.a33*e.a13,this.a13*e.a21+this.a23*e.a22+this.a33*e.a23,this.a13*e.a31+this.a23*e.a32+this.a33*e.a33)},n})(),ak=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),sk=(function(n){ak(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.sampleGrid=function(t,r,i,a,o,c,u,h,p,g,_,w,A,S,D,C,P,V,H){var X=S3.quadrilateralToQuadrilateral(a,o,c,u,h,p,g,_,w,A,S,D,C,P,V,H);return this.sampleGridWithTransform(t,r,i,X)},e.prototype.sampleGridWithTransform=function(t,r,i,a){if(r<=0||i<=0)throw new se;for(var o=new _a(r,i),c=new Float32Array(2*r),u=0;u<i;u++){for(var h=c.length,p=u+.5,g=0;g<h;g+=2)c[g]=g/2+.5,c[g+1]=p;a.transformPoints(c),CA.checkAndNudgePoints(t,c);try{for(var g=0;g<h;g+=2)t.get(Math.floor(c[g]),Math.floor(c[g+1]))&&o.set(g/2,u)}catch{throw new se}}return o},e})(CA),zy=(function(){function n(){}return n.setGridSampler=function(e){n.gridSampler=e},n.getInstance=function(){return n.gridSampler},n.gridSampler=new sk,n})(),Sr=(function(){function n(e,t){this.x=e,this.y=t}return n.prototype.toResultPoint=function(){return new Te(this.getX(),this.getY())},n.prototype.getX=function(){return this.x},n.prototype.getY=function(){return this.y},n})(),ok=(function(){function n(e){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=e}return n.prototype.detect=function(){return this.detectMirror(!1)},n.prototype.detectMirror=function(e){var t=this.getMatrixCenter(),r=this.getBullsEyeCorners(t);if(e){var i=r[0];r[0]=r[2],r[2]=i}this.extractParameters(r);var a=this.sampleGrid(this.image,r[this.shift%4],r[(this.shift+1)%4],r[(this.shift+2)%4],r[(this.shift+3)%4]),o=this.getMatrixCornerPoints(r);return new ik(a,o,this.compact,this.nbDataBlocks,this.nbLayers)},n.prototype.extractParameters=function(e){if(!this.isValidPoint(e[0])||!this.isValidPoint(e[1])||!this.isValidPoint(e[2])||!this.isValidPoint(e[3]))throw new se;var t=2*this.nbCenterLayers,r=new Int32Array([this.sampleLine(e[0],e[1],t),this.sampleLine(e[1],e[2],t),this.sampleLine(e[2],e[3],t),this.sampleLine(e[3],e[0],t)]);this.shift=this.getRotation(r,t);for(var i=0,a=0;a<4;a++){var o=r[(this.shift+a)%4];this.compact?(i<<=7,i+=o>>1&127):(i<<=10,i+=(o>>2&992)+(o>>1&31))}var c=this.getCorrectedParameterData(i,this.compact);this.compact?(this.nbLayers=(c>>6)+1,this.nbDataBlocks=(c&63)+1):(this.nbLayers=(c>>11)+1,this.nbDataBlocks=(c&2047)+1)},n.prototype.getRotation=function(e,t){var r=0;e.forEach(function(a,o,c){var u=(a>>t-2<<1)+(a&1);r=(r<<3)+u}),r=((r&1)<<11)+(r>>1);for(var i=0;i<4;i++)if(et.bitCount(r^this.EXPECTED_CORNER_BITS[i])<=2)return i;throw new se},n.prototype.getCorrectedParameterData=function(e,t){var r,i;t?(r=7,i=2):(r=10,i=4);for(var a=r-i,o=new Int32Array(r),c=r-1;c>=0;--c)o[c]=e&15,e>>=4;try{var u=new vp(Tr.AZTEC_PARAM);u.decode(o,a)}catch{throw new se}for(var h=0,c=0;c<i;c++)h=(h<<4)+o[c];return h},n.prototype.getBullsEyeCorners=function(e){var t=e,r=e,i=e,a=e,o=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){var c=this.getFirstDifferent(t,o,1,-1),u=this.getFirstDifferent(r,o,1,1),h=this.getFirstDifferent(i,o,-1,1),p=this.getFirstDifferent(a,o,-1,-1);if(this.nbCenterLayers>2){var g=this.distancePoint(p,c)*this.nbCenterLayers/(this.distancePoint(a,t)*(this.nbCenterLayers+2));if(g<.75||g>1.25||!this.isWhiteOrBlackRectangle(c,u,h,p))break}t=c,r=u,i=h,a=p,o=!o}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new se;this.compact=this.nbCenterLayers===5;var _=new Te(t.getX()+.5,t.getY()-.5),w=new Te(r.getX()+.5,r.getY()+.5),A=new Te(i.getX()-.5,i.getY()+.5),S=new Te(a.getX()-.5,a.getY()-.5);return this.expandSquare([_,w,A,S],2*this.nbCenterLayers-3,2*this.nbCenterLayers)},n.prototype.getMatrixCenter=function(){var e,t,r,i;try{var a=new uv(this.image).detect();e=a[0],t=a[1],r=a[2],i=a[3]}catch{var o=this.image.getWidth()/2,c=this.image.getHeight()/2;e=this.getFirstDifferent(new Sr(o+7,c-7),!1,1,-1).toResultPoint(),t=this.getFirstDifferent(new Sr(o+7,c+7),!1,1,1).toResultPoint(),r=this.getFirstDifferent(new Sr(o-7,c+7),!1,-1,1).toResultPoint(),i=this.getFirstDifferent(new Sr(o-7,c-7),!1,-1,-1).toResultPoint()}var u=gt.round((e.getX()+i.getX()+t.getX()+r.getX())/4),h=gt.round((e.getY()+i.getY()+t.getY()+r.getY())/4);try{var a=new uv(this.image,15,u,h).detect();e=a[0],t=a[1],r=a[2],i=a[3]}catch{e=this.getFirstDifferent(new Sr(u+7,h-7),!1,1,-1).toResultPoint(),t=this.getFirstDifferent(new Sr(u+7,h+7),!1,1,1).toResultPoint(),r=this.getFirstDifferent(new Sr(u-7,h+7),!1,-1,1).toResultPoint(),i=this.getFirstDifferent(new Sr(u-7,h-7),!1,-1,-1).toResultPoint()}return u=gt.round((e.getX()+i.getX()+t.getX()+r.getX())/4),h=gt.round((e.getY()+i.getY()+t.getY()+r.getY())/4),new Sr(u,h)},n.prototype.getMatrixCornerPoints=function(e){return this.expandSquare(e,2*this.nbCenterLayers,this.getDimension())},n.prototype.sampleGrid=function(e,t,r,i,a){var o=zy.getInstance(),c=this.getDimension(),u=c/2-this.nbCenterLayers,h=c/2+this.nbCenterLayers;return o.sampleGrid(e,c,c,u,u,h,u,h,h,u,h,t.getX(),t.getY(),r.getX(),r.getY(),i.getX(),i.getY(),a.getX(),a.getY())},n.prototype.sampleLine=function(e,t,r){for(var i=0,a=this.distanceResultPoint(e,t),o=a/r,c=e.getX(),u=e.getY(),h=o*(t.getX()-e.getX())/a,p=o*(t.getY()-e.getY())/a,g=0;g<r;g++)this.image.get(gt.round(c+g*h),gt.round(u+g*p))&&(i|=1<<r-g-1);return i},n.prototype.isWhiteOrBlackRectangle=function(e,t,r,i){var a=3;e=new Sr(e.getX()-a,e.getY()+a),t=new Sr(t.getX()-a,t.getY()-a),r=new Sr(r.getX()+a,r.getY()-a),i=new Sr(i.getX()+a,i.getY()+a);var o=this.getColor(i,e);if(o===0)return!1;var c=this.getColor(e,t);return c!==o||(c=this.getColor(t,r),c!==o)?!1:(c=this.getColor(r,i),c===o)},n.prototype.getColor=function(e,t){for(var r=this.distancePoint(e,t),i=(t.getX()-e.getX())/r,a=(t.getY()-e.getY())/r,o=0,c=e.getX(),u=e.getY(),h=this.image.get(e.getX(),e.getY()),p=Math.ceil(r),g=0;g<p;g++)c+=i,u+=a,this.image.get(gt.round(c),gt.round(u))!==h&&o++;var _=o/r;return _>.1&&_<.9?0:_<=.1===h?1:-1},n.prototype.getFirstDifferent=function(e,t,r,i){for(var a=e.getX()+r,o=e.getY()+i;this.isValid(a,o)&&this.image.get(a,o)===t;)a+=r,o+=i;for(a-=r,o-=i;this.isValid(a,o)&&this.image.get(a,o)===t;)a+=r;for(a-=r;this.isValid(a,o)&&this.image.get(a,o)===t;)o+=i;return o-=i,new Sr(a,o)},n.prototype.expandSquare=function(e,t,r){var i=r/(2*t),a=e[0].getX()-e[2].getX(),o=e[0].getY()-e[2].getY(),c=(e[0].getX()+e[2].getX())/2,u=(e[0].getY()+e[2].getY())/2,h=new Te(c+i*a,u+i*o),p=new Te(c-i*a,u-i*o);a=e[1].getX()-e[3].getX(),o=e[1].getY()-e[3].getY(),c=(e[1].getX()+e[3].getX())/2,u=(e[1].getY()+e[3].getY())/2;var g=new Te(c+i*a,u+i*o),_=new Te(c-i*a,u-i*o),w=[h,g,p,_];return w},n.prototype.isValid=function(e,t){return e>=0&&e<this.image.getWidth()&&t>0&&t<this.image.getHeight()},n.prototype.isValidPoint=function(e){var t=gt.round(e.getX()),r=gt.round(e.getY());return this.isValid(t,r)},n.prototype.distancePoint=function(e,t){return gt.distance(e.getX(),e.getY(),t.getX(),t.getY())},n.prototype.distanceResultPoint=function(e,t){return gt.distance(e.getX(),e.getY(),t.getX(),t.getY())},n.prototype.getDimension=function(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(et.truncDivision(this.nbLayers-4,8)+1)+15},n})(),C0=(function(){function n(){}return n.prototype.decode=function(e,t){t===void 0&&(t=null);var r=null,i=new ok(e.getBlackMatrix()),a=null,o=null;try{var c=i.detectMirror(!1);a=c.getPoints(),this.reportFoundResultPoints(t,a),o=new SA().decode(c)}catch(g){r=g}if(o==null)try{var c=i.detectMirror(!0);a=c.getPoints(),this.reportFoundResultPoints(t,a),o=new SA().decode(c)}catch(g){throw r??g}var u=new fr(o.getText(),o.getRawBytes(),o.getNumBits(),a,Me.AZTEC,Vt.currentTimeMillis()),h=o.getByteSegments();h!=null&&u.putMetadata(ir.BYTE_SEGMENTS,h);var p=o.getECLevel();return p!=null&&u.putMetadata(ir.ERROR_CORRECTION_LEVEL,p),u},n.prototype.reportFoundResultPoints=function(e,t){if(e!=null){var r=e.get(Ft.NEED_RESULT_POINT_CALLBACK);r!=null&&t.forEach(function(i,a,o){r.foundPossibleResultPoint(i)})}},n.prototype.reset=function(){},n})(),lk=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})();(function(n){lk(e,n);function e(t){return t===void 0&&(t=500),n.call(this,new C0,t)||this}return e})(zc);var Dn=(function(){function n(){}return n.prototype.decode=function(e,t){try{return this.doDecode(e,t)}catch{var r=t&&t.get(Ft.TRY_HARDER)===!0;if(r&&e.isRotateSupported()){var i=e.rotateCounterClockwise(),a=this.doDecode(i,t),o=a.getResultMetadata(),c=270;o!==null&&o.get(ir.ORIENTATION)===!0&&(c=c+o.get(ir.ORIENTATION)%360),a.putMetadata(ir.ORIENTATION,c);var u=a.getResultPoints();if(u!==null)for(var h=i.getHeight(),p=0;p<u.length;p++)u[p]=new Te(h-u[p].getY()-1,u[p].getX());return a}else throw new se}},n.prototype.reset=function(){},n.prototype.doDecode=function(e,t){var r=e.getWidth(),i=e.getHeight(),a=new $n(r),o=t&&t.get(Ft.TRY_HARDER)===!0,c=Math.max(1,i>>(o?8:5)),u;o?u=i:u=15;for(var h=Math.trunc(i/2),p=0;p<u;p++){var g=Math.trunc((p+1)/2),_=(p&1)===0,w=h+c*(_?g:-g);if(w<0||w>=i)break;try{a=e.getBlackRow(w,a)}catch{continue}for(var A=function(P){if(P===1&&(a.reverse(),t&&t.get(Ft.NEED_RESULT_POINT_CALLBACK)===!0)){var V=new Map;t.forEach(function(F,I){return V.set(I,F)}),V.delete(Ft.NEED_RESULT_POINT_CALLBACK),t=V}try{var H=S.decodeRow(w,a,t);if(P===1){H.putMetadata(ir.ORIENTATION,180);var X=H.getResultPoints();X!==null&&(X[0]=new Te(r-X[0].getX()-1,X[0].getY()),X[1]=new Te(r-X[1].getX()-1,X[1].getY()))}return{value:H}}catch{}},S=this,D=0;D<2;D++){var C=A(D);if(typeof C=="object")return C.value}}throw new se},n.recordPattern=function(e,t,r){for(var i=r.length,a=0;a<i;a++)r[a]=0;var o=e.getSize();if(t>=o)throw new se;for(var c=!e.get(t),u=0,h=t;h<o;){if(e.get(h)!==c)r[u]++;else{if(++u===i)break;r[u]=1,c=!c}h++}if(!(u===i||u===i-1&&h===o))throw new se},n.recordPatternInReverse=function(e,t,r){for(var i=r.length,a=e.get(t);t>0&&i>=0;)e.get(--t)!==a&&(i--,a=!a);if(i>=0)throw new se;n.recordPattern(e,t+1,r)},n.patternMatchVariance=function(e,t,r){for(var i=e.length,a=0,o=0,c=0;c<i;c++)a+=e[c],o+=t[c];if(a<o)return Number.POSITIVE_INFINITY;var u=a/o;r*=u;for(var h=0,p=0;p<i;p++){var g=e[p],_=t[p]*u,w=g>_?g-_:_-g;if(w>r)return Number.POSITIVE_INFINITY;h+=w}return h/a},n})(),ck=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),TA=(function(n){ck(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.findStartPattern=function(t){for(var r=t.getSize(),i=t.getNextSet(0),a=0,o=Int32Array.from([0,0,0,0,0,0]),c=i,u=!1,h=6,p=i;p<r;p++)if(t.get(p)!==u)o[a]++;else{if(a===h-1){for(var g=e.MAX_AVG_VARIANCE,_=-1,w=e.CODE_START_A;w<=e.CODE_START_C;w++){var A=Dn.patternMatchVariance(o,e.CODE_PATTERNS[w],e.MAX_INDIVIDUAL_VARIANCE);A<g&&(g=A,_=w)}if(_>=0&&t.isRange(Math.max(0,c-(p-c)/2),c,!1))return Int32Array.from([c,p,_]);c+=o[0]+o[1],o=o.slice(2,o.length),o[a-1]=0,o[a]=0,a--}else a++;o[a]=1,u=!u}throw new se},e.decodeCode=function(t,r,i){Dn.recordPattern(t,i,r);for(var a=e.MAX_AVG_VARIANCE,o=-1,c=0;c<e.CODE_PATTERNS.length;c++){var u=e.CODE_PATTERNS[c],h=this.patternMatchVariance(r,u,e.MAX_INDIVIDUAL_VARIANCE);h<a&&(a=h,o=c)}if(o>=0)return o;throw new se},e.prototype.decodeRow=function(t,r,i){var a=i&&i.get(Ft.ASSUME_GS1)===!0,o=e.findStartPattern(r),c=o[2],u=0,h=new Uint8Array(20);h[u++]=c;var p;switch(c){case e.CODE_START_A:p=e.CODE_CODE_A;break;case e.CODE_START_B:p=e.CODE_CODE_B;break;case e.CODE_START_C:p=e.CODE_CODE_C;break;default:throw new ye}for(var g=!1,_=!1,w="",A=o[0],S=o[1],D=Int32Array.from([0,0,0,0,0,0]),C=0,P=0,V=c,H=0,X=!0,F=!1,I=!1;!g;){var b=_;switch(_=!1,C=P,P=e.decodeCode(r,D,S),h[u++]=P,P!==e.CODE_STOP&&(X=!0),P!==e.CODE_STOP&&(H++,V+=H*P),A=S,S+=D.reduce(function(G,le){return G+le},0),P){case e.CODE_START_A:case e.CODE_START_B:case e.CODE_START_C:throw new ye}switch(p){case e.CODE_CODE_A:if(P<64)I===F?w+=String.fromCharCode(32+P):w+=String.fromCharCode(32+P+128),I=!1;else if(P<96)I===F?w+=String.fromCharCode(P-64):w+=String.fromCharCode(P+64),I=!1;else switch(P!==e.CODE_STOP&&(X=!1),P){case e.CODE_FNC_1:a&&(w.length===0?w+="]C1":w+="");break;case e.CODE_FNC_2:case e.CODE_FNC_3:break;case e.CODE_FNC_4_A:!F&&I?(F=!0,I=!1):F&&I?(F=!1,I=!1):I=!0;break;case e.CODE_SHIFT:_=!0,p=e.CODE_CODE_B;break;case e.CODE_CODE_B:p=e.CODE_CODE_B;break;case e.CODE_CODE_C:p=e.CODE_CODE_C;break;case e.CODE_STOP:g=!0;break}break;case e.CODE_CODE_B:if(P<96)I===F?w+=String.fromCharCode(32+P):w+=String.fromCharCode(32+P+128),I=!1;else switch(P!==e.CODE_STOP&&(X=!1),P){case e.CODE_FNC_1:a&&(w.length===0?w+="]C1":w+="");break;case e.CODE_FNC_2:case e.CODE_FNC_3:break;case e.CODE_FNC_4_B:!F&&I?(F=!0,I=!1):F&&I?(F=!1,I=!1):I=!0;break;case e.CODE_SHIFT:_=!0,p=e.CODE_CODE_A;break;case e.CODE_CODE_A:p=e.CODE_CODE_A;break;case e.CODE_CODE_C:p=e.CODE_CODE_C;break;case e.CODE_STOP:g=!0;break}break;case e.CODE_CODE_C:if(P<100)P<10&&(w+="0"),w+=P;else switch(P!==e.CODE_STOP&&(X=!1),P){case e.CODE_FNC_1:a&&(w.length===0?w+="]C1":w+="");break;case e.CODE_CODE_A:p=e.CODE_CODE_A;break;case e.CODE_CODE_B:p=e.CODE_CODE_B;break;case e.CODE_STOP:g=!0;break}break}b&&(p=p===e.CODE_CODE_A?e.CODE_CODE_B:e.CODE_CODE_A)}var N=S-A;if(S=r.getNextUnset(S),!r.isRange(S,Math.min(r.getSize(),S+(S-A)/2),!1))throw new se;if(V-=H*C,V%103!==C)throw new An;var R=w.length;if(R===0)throw new se;R>0&&X&&(p===e.CODE_CODE_C?w=w.substring(0,R-2):w=w.substring(0,R-1));for(var M=(o[1]+o[0])/2,B=A+N/2,L=h.length,ie=new Uint8Array(L),ge=0;ge<L;ge++)ie[ge]=h[ge];var K=[new Te(M,t),new Te(B,t)];return new fr(w,ie,0,K,Me.CODE_128,new Date().getTime())},e.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],e.MAX_AVG_VARIANCE=.25,e.MAX_INDIVIDUAL_VARIANCE=.7,e.CODE_SHIFT=98,e.CODE_CODE_C=99,e.CODE_CODE_B=100,e.CODE_CODE_A=101,e.CODE_FNC_1=102,e.CODE_FNC_2=97,e.CODE_FNC_3=96,e.CODE_FNC_4_A=101,e.CODE_FNC_4_B=100,e.CODE_START_A=103,e.CODE_START_B=104,e.CODE_START_C=105,e.CODE_STOP=106,e})(Dn),uk=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),zm=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},IA=(function(n){uk(e,n);function e(t,r){t===void 0&&(t=!1),r===void 0&&(r=!1);var i=n.call(this)||this;return i.usingCheckDigit=t,i.extendedMode=r,i.decodeRowResult="",i.counters=new Int32Array(9),i}return e.prototype.decodeRow=function(t,r,i){var a,o,c,u,h=this.counters;h.fill(0),this.decodeRowResult="";var p=e.findAsteriskPattern(r,h),g=r.getNextSet(p[1]),_=r.getSize(),w,A;do{e.recordPattern(r,g,h);var S=e.toNarrowWidePattern(h);if(S<0)throw new se;w=e.patternToChar(S),this.decodeRowResult+=w,A=g;try{for(var D=(a=void 0,zm(h)),C=D.next();!C.done;C=D.next()){var P=C.value;g+=P}}catch(L){a={error:L}}finally{try{C&&!C.done&&(o=D.return)&&o.call(D)}finally{if(a)throw a.error}}g=r.getNextSet(g)}while(w!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var V=0;try{for(var H=zm(h),X=H.next();!X.done;X=H.next()){var P=X.value;V+=P}}catch(L){c={error:L}}finally{try{X&&!X.done&&(u=H.return)&&u.call(H)}finally{if(c)throw c.error}}var F=g-A-V;if(g!==_&&F*2<V)throw new se;if(this.usingCheckDigit){for(var I=this.decodeRowResult.length-1,b=0,N=0;N<I;N++)b+=e.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(N));if(this.decodeRowResult.charAt(I)!==e.ALPHABET_STRING.charAt(b%43))throw new An;this.decodeRowResult=this.decodeRowResult.substring(0,I)}if(this.decodeRowResult.length===0)throw new se;var R;this.extendedMode?R=e.decodeExtended(this.decodeRowResult):R=this.decodeRowResult;var M=(p[1]+p[0])/2,B=A+V/2;return new fr(R,null,0,[new Te(M,t),new Te(B,t)],Me.CODE_39,new Date().getTime())},e.findAsteriskPattern=function(t,r){for(var i=t.getSize(),a=t.getNextSet(0),o=0,c=a,u=!1,h=r.length,p=a;p<i;p++)if(t.get(p)!==u)r[o]++;else{if(o===h-1){if(this.toNarrowWidePattern(r)===e.ASTERISK_ENCODING&&t.isRange(Math.max(0,c-Math.floor((p-c)/2)),c,!1))return[c,p];c+=r[0]+r[1],r.copyWithin(0,2,2+o-1),r[o-1]=0,r[o]=0,o--}else o++;r[o]=1,u=!u}throw new se},e.toNarrowWidePattern=function(t){var r,i,a=t.length,o=0,c;do{var u=2147483647;try{for(var h=(r=void 0,zm(t)),p=h.next();!p.done;p=h.next()){var g=p.value;g<u&&g>o&&(u=g)}}catch(S){r={error:S}}finally{try{p&&!p.done&&(i=h.return)&&i.call(h)}finally{if(r)throw r.error}}o=u,c=0;for(var _=0,w=0,A=0;A<a;A++){var g=t[A];g>o&&(w|=1<<a-1-A,c++,_+=g)}if(c===3){for(var A=0;A<a&&c>0;A++){var g=t[A];if(g>o&&(c--,g*2>=_))return-1}return w}}while(c>3);return-1},e.patternToChar=function(t){for(var r=0;r<e.CHARACTER_ENCODINGS.length;r++)if(e.CHARACTER_ENCODINGS[r]===t)return e.ALPHABET_STRING.charAt(r);if(t===e.ASTERISK_ENCODING)return"*";throw new se},e.decodeExtended=function(t){for(var r=t.length,i="",a=0;a<r;a++){var o=t.charAt(a);if(o==="+"||o==="$"||o==="%"||o==="/"){var c=t.charAt(a+1),u="\0";switch(o){case"+":if(c>="A"&&c<="Z")u=String.fromCharCode(c.charCodeAt(0)+32);else throw new ye;break;case"$":if(c>="A"&&c<="Z")u=String.fromCharCode(c.charCodeAt(0)-64);else throw new ye;break;case"%":if(c>="A"&&c<="E")u=String.fromCharCode(c.charCodeAt(0)-38);else if(c>="F"&&c<="J")u=String.fromCharCode(c.charCodeAt(0)-11);else if(c>="K"&&c<="O")u=String.fromCharCode(c.charCodeAt(0)+16);else if(c>="P"&&c<="T")u=String.fromCharCode(c.charCodeAt(0)+43);else if(c==="U")u="\0";else if(c==="V")u="@";else if(c==="W")u="`";else if(c==="X"||c==="Y"||c==="Z")u="";else throw new ye;break;case"/":if(c>="A"&&c<="O")u=String.fromCharCode(c.charCodeAt(0)-32);else if(c==="Z")u=":";else throw new ye;break}i+=u,a++}else i+=o}return i},e.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",e.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],e.ASTERISK_ENCODING=148,e})(Dn),fk=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Hm=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},NA=(function(n){fk(e,n);function e(){var t=n.call(this)||this;return t.decodeRowResult="",t.counters=new Int32Array(6),t}return e.prototype.decodeRow=function(t,r,i){var a,o,c,u,h=this.findAsteriskPattern(r),p=r.getNextSet(h[1]),g=r.getSize(),_=this.counters;_.fill(0),this.decodeRowResult="";var w,A;do{e.recordPattern(r,p,_);var S=this.toPattern(_);if(S<0)throw new se;w=this.patternToChar(S),this.decodeRowResult+=w,A=p;try{for(var D=(a=void 0,Hm(_)),C=D.next();!C.done;C=D.next()){var P=C.value;p+=P}}catch(N){a={error:N}}finally{try{C&&!C.done&&(o=D.return)&&o.call(D)}finally{if(a)throw a.error}}p=r.getNextSet(p)}while(w!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var V=0;try{for(var H=Hm(_),X=H.next();!X.done;X=H.next()){var P=X.value;V+=P}}catch(N){c={error:N}}finally{try{X&&!X.done&&(u=H.return)&&u.call(H)}finally{if(c)throw c.error}}if(p===g||!r.get(p))throw new se;if(this.decodeRowResult.length<2)throw new se;this.checkChecksums(this.decodeRowResult),this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-2);var F=this.decodeExtended(this.decodeRowResult),I=(h[1]+h[0])/2,b=A+V/2;return new fr(F,null,0,[new Te(I,t),new Te(b,t)],Me.CODE_93,new Date().getTime())},e.prototype.findAsteriskPattern=function(t){var r=t.getSize(),i=t.getNextSet(0);this.counters.fill(0);for(var a=this.counters,o=i,c=!1,u=a.length,h=0,p=i;p<r;p++)if(t.get(p)!==c)a[h]++;else{if(h===u-1){if(this.toPattern(a)===e.ASTERISK_ENCODING)return new Int32Array([o,p]);o+=a[0]+a[1],a.copyWithin(0,2,2+h-1),a[h-1]=0,a[h]=0,h--}else h++;a[h]=1,c=!c}throw new se},e.prototype.toPattern=function(t){var r,i,a=0;try{for(var o=Hm(t),c=o.next();!c.done;c=o.next()){var u=c.value;a+=u}}catch(A){r={error:A}}finally{try{c&&!c.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}for(var h=0,p=t.length,g=0;g<p;g++){var _=Math.round(t[g]*9/a);if(_<1||_>4)return-1;if((g&1)===0)for(var w=0;w<_;w++)h=h<<1|1;else h<<=_}return h},e.prototype.patternToChar=function(t){for(var r=0;r<e.CHARACTER_ENCODINGS.length;r++)if(e.CHARACTER_ENCODINGS[r]===t)return e.ALPHABET_STRING.charAt(r);throw new se},e.prototype.decodeExtended=function(t){for(var r=t.length,i="",a=0;a<r;a++){var o=t.charAt(a);if(o>="a"&&o<="d"){if(a>=r-1)throw new ye;var c=t.charAt(a+1),u="\0";switch(o){case"d":if(c>="A"&&c<="Z")u=String.fromCharCode(c.charCodeAt(0)+32);else throw new ye;break;case"a":if(c>="A"&&c<="Z")u=String.fromCharCode(c.charCodeAt(0)-64);else throw new ye;break;case"b":if(c>="A"&&c<="E")u=String.fromCharCode(c.charCodeAt(0)-38);else if(c>="F"&&c<="J")u=String.fromCharCode(c.charCodeAt(0)-11);else if(c>="K"&&c<="O")u=String.fromCharCode(c.charCodeAt(0)+16);else if(c>="P"&&c<="T")u=String.fromCharCode(c.charCodeAt(0)+43);else if(c==="U")u="\0";else if(c==="V")u="@";else if(c==="W")u="`";else if(c>="X"&&c<="Z")u="";else throw new ye;break;case"c":if(c>="A"&&c<="O")u=String.fromCharCode(c.charCodeAt(0)-32);else if(c==="Z")u=":";else throw new ye;break}i+=u,a++}else i+=o}return i},e.prototype.checkChecksums=function(t){var r=t.length;this.checkOneChecksum(t,r-2,20),this.checkOneChecksum(t,r-1,15)},e.prototype.checkOneChecksum=function(t,r,i){for(var a=1,o=0,c=r-1;c>=0;c--)o+=a*e.ALPHABET_STRING.indexOf(t.charAt(c)),++a>i&&(a=1);if(t.charAt(r)!==e.ALPHABET_STRING[o%47])throw new An},e.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%abcd*",e.CHARACTER_ENCODINGS=[276,328,324,322,296,292,290,336,274,266,424,420,418,404,402,394,360,356,354,308,282,344,332,326,300,278,436,434,428,422,406,410,364,358,310,314,302,468,466,458,366,374,430,294,474,470,306,350],e.ASTERISK_ENCODING=e.CHARACTER_ENCODINGS[47],e})(Dn),hk=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),dk=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},RA=(function(n){hk(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.narrowLineWidth=-1,t}return e.prototype.decodeRow=function(t,r,i){var a,o,c=this.decodeStart(r),u=this.decodeEnd(r),h=new Je;e.decodeMiddle(r,c[1],u[0],h);var p=h.toString(),g=null;i!=null&&(g=i.get(Ft.ALLOWED_LENGTHS)),g==null&&(g=e.DEFAULT_ALLOWED_LENGTHS);var _=p.length,w=!1,A=0;try{for(var S=dk(g),D=S.next();!D.done;D=S.next()){var C=D.value;if(_===C){w=!0;break}C>A&&(A=C)}}catch(H){a={error:H}}finally{try{D&&!D.done&&(o=S.return)&&o.call(S)}finally{if(a)throw a.error}}if(!w&&_>A&&(w=!0),!w)throw new ye;var P=[new Te(c[1],t),new Te(u[0],t)],V=new fr(p,null,0,P,Me.ITF,new Date().getTime());return V},e.decodeMiddle=function(t,r,i,a){var o=new Int32Array(10),c=new Int32Array(5),u=new Int32Array(5);for(o.fill(0),c.fill(0),u.fill(0);r<i;){Dn.recordPattern(t,r,o);for(var h=0;h<5;h++){var p=2*h;c[h]=o[p],u[h]=o[p+1]}var g=e.decodeDigit(c);a.append(g.toString()),g=this.decodeDigit(u),a.append(g.toString()),o.forEach(function(_){r+=_})}},e.prototype.decodeStart=function(t){var r=e.skipWhiteSpace(t),i=e.findGuardPattern(t,r,e.START_PATTERN);return this.narrowLineWidth=(i[1]-i[0])/4,this.validateQuietZone(t,i[0]),i},e.prototype.validateQuietZone=function(t,r){var i=this.narrowLineWidth*10;i=i<r?i:r;for(var a=r-1;i>0&&a>=0&&!t.get(a);a--)i--;if(i!==0)throw new se},e.skipWhiteSpace=function(t){var r=t.getSize(),i=t.getNextSet(0);if(i===r)throw new se;return i},e.prototype.decodeEnd=function(t){t.reverse();try{var r=e.skipWhiteSpace(t),i=void 0;try{i=e.findGuardPattern(t,r,e.END_PATTERN_REVERSED[0])}catch(o){o instanceof se&&(i=e.findGuardPattern(t,r,e.END_PATTERN_REVERSED[1]))}this.validateQuietZone(t,i[0]);var a=i[0];return i[0]=t.getSize()-i[1],i[1]=t.getSize()-a,i}finally{t.reverse()}},e.findGuardPattern=function(t,r,i){var a=i.length,o=new Int32Array(a),c=t.getSize(),u=!1,h=0,p=r;o.fill(0);for(var g=r;g<c;g++)if(t.get(g)!==u)o[h]++;else{if(h===a-1){if(Dn.patternMatchVariance(o,i,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return[p,g];p+=o[0]+o[1],Vt.arraycopy(o,2,o,0,h-1),o[h-1]=0,o[h]=0,h--}else h++;o[h]=1,u=!u}throw new se},e.decodeDigit=function(t){for(var r=e.MAX_AVG_VARIANCE,i=-1,a=e.PATTERNS.length,o=0;o<a;o++){var c=e.PATTERNS[o],u=Dn.patternMatchVariance(t,c,e.MAX_INDIVIDUAL_VARIANCE);u<r?(r=u,i=o):u===r&&(i=-1)}if(i>=0)return i%10;throw new se},e.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],e.MAX_AVG_VARIANCE=.38,e.MAX_INDIVIDUAL_VARIANCE=.5,e.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],e.START_PATTERN=Int32Array.from([1,1,1,1]),e.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])],e})(Dn),pk=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Tc=(function(n){pk(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.decodeRowStringBuffer="",t}return e.findStartGuardPattern=function(t){for(var r=!1,i,a=0,o=Int32Array.from([0,0,0]);!r;){o=Int32Array.from([0,0,0]),i=e.findGuardPattern(t,a,!1,this.START_END_PATTERN,o);var c=i[0];a=i[1];var u=c-(a-c);u>=0&&(r=t.isRange(u,c,!1))}return i},e.checkChecksum=function(t){return e.checkStandardUPCEANChecksum(t)},e.checkStandardUPCEANChecksum=function(t){var r=t.length;if(r===0)return!1;var i=parseInt(t.charAt(r-1),10);return e.getStandardUPCEANChecksum(t.substring(0,r-1))===i},e.getStandardUPCEANChecksum=function(t){for(var r=t.length,i=0,a=r-1;a>=0;a-=2){var o=t.charAt(a).charCodeAt(0)-48;if(o<0||o>9)throw new ye;i+=o}i*=3;for(var a=r-2;a>=0;a-=2){var o=t.charAt(a).charCodeAt(0)-48;if(o<0||o>9)throw new ye;i+=o}return(1e3-i)%10},e.decodeEnd=function(t,r){return e.findGuardPattern(t,r,!1,e.START_END_PATTERN,new Int32Array(e.START_END_PATTERN.length).fill(0))},e.findGuardPatternWithoutCounters=function(t,r,i,a){return this.findGuardPattern(t,r,i,a,new Int32Array(a.length))},e.findGuardPattern=function(t,r,i,a,o){var c=t.getSize();r=i?t.getNextUnset(r):t.getNextSet(r);for(var u=0,h=r,p=a.length,g=i,_=r;_<c;_++)if(t.get(_)!==g)o[u]++;else{if(u===p-1){if(Dn.patternMatchVariance(o,a,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return Int32Array.from([h,_]);h+=o[0]+o[1];for(var w=o.slice(2,o.length),A=0;A<u-1;A++)o[A]=w[A];o[u-1]=0,o[u]=0,u--}else u++;o[u]=1,g=!g}throw new se},e.decodeDigit=function(t,r,i,a){this.recordPattern(t,i,r);for(var o=this.MAX_AVG_VARIANCE,c=-1,u=a.length,h=0;h<u;h++){var p=a[h],g=Dn.patternMatchVariance(r,p,e.MAX_INDIVIDUAL_VARIANCE);g<o&&(o=g,c=h)}if(c>=0)return c;throw new se},e.MAX_AVG_VARIANCE=.48,e.MAX_INDIVIDUAL_VARIANCE=.7,e.START_END_PATTERN=Int32Array.from([1,1,1]),e.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),e.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),e.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])],e})(Dn),mk=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},gk=(function(){function n(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return n.prototype.decodeRow=function(e,t,r){var i=this.decodeRowStringBuffer,a=this.decodeMiddle(t,r,i),o=i.toString(),c=n.parseExtensionString(o),u=[new Te((r[0]+r[1])/2,e),new Te(a,e)],h=new fr(o,null,0,u,Me.UPC_EAN_EXTENSION,new Date().getTime());return c!=null&&h.putAllMetadata(c),h},n.prototype.decodeMiddle=function(e,t,r){var i,a,o=this.decodeMiddleCounters;o[0]=0,o[1]=0,o[2]=0,o[3]=0;for(var c=e.getSize(),u=t[1],h=0,p=0;p<5&&u<c;p++){var g=Tc.decodeDigit(e,o,u,Tc.L_AND_G_PATTERNS);r+=String.fromCharCode(48+g%10);try{for(var _=(i=void 0,mk(o)),w=_.next();!w.done;w=_.next()){var A=w.value;u+=A}}catch(D){i={error:D}}finally{try{w&&!w.done&&(a=_.return)&&a.call(_)}finally{if(i)throw i.error}}g>=10&&(h|=1<<4-p),p!==4&&(u=e.getNextSet(u),u=e.getNextUnset(u))}if(r.length!==5)throw new se;var S=this.determineCheckDigit(h);if(n.extensionChecksum(r.toString())!==S)throw new se;return u},n.extensionChecksum=function(e){for(var t=e.length,r=0,i=t-2;i>=0;i-=2)r+=e.charAt(i).charCodeAt(0)-48;r*=3;for(var i=t-1;i>=0;i-=2)r+=e.charAt(i).charCodeAt(0)-48;return r*=3,r%10},n.prototype.determineCheckDigit=function(e){for(var t=0;t<10;t++)if(e===this.CHECK_DIGIT_ENCODINGS[t])return t;throw new se},n.parseExtensionString=function(e){if(e.length!==5)return null;var t=n.parseExtension5String(e);return t==null?null:new Map([[ir.SUGGESTED_PRICE,t]])},n.parseExtension5String=function(e){var t;switch(e.charAt(0)){case"0":t="";break;case"5":t="$";break;case"9":switch(e){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}t="";break;default:t="";break}var r=parseInt(e.substring(1)),i=(r/100).toString(),a=r%100,o=a<10?"0"+a:a.toString();return t+i+"."+o},n})(),vk=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},yk=(function(){function n(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return n.prototype.decodeRow=function(e,t,r){var i=this.decodeRowStringBuffer,a=this.decodeMiddle(t,r,i),o=i.toString(),c=n.parseExtensionString(o),u=[new Te((r[0]+r[1])/2,e),new Te(a,e)],h=new fr(o,null,0,u,Me.UPC_EAN_EXTENSION,new Date().getTime());return c!=null&&h.putAllMetadata(c),h},n.prototype.decodeMiddle=function(e,t,r){var i,a,o=this.decodeMiddleCounters;o[0]=0,o[1]=0,o[2]=0,o[3]=0;for(var c=e.getSize(),u=t[1],h=0,p=0;p<2&&u<c;p++){var g=Tc.decodeDigit(e,o,u,Tc.L_AND_G_PATTERNS);r+=String.fromCharCode(48+g%10);try{for(var _=(i=void 0,vk(o)),w=_.next();!w.done;w=_.next()){var A=w.value;u+=A}}catch(S){i={error:S}}finally{try{w&&!w.done&&(a=_.return)&&a.call(_)}finally{if(i)throw i.error}}g>=10&&(h|=1<<1-p),p!==1&&(u=e.getNextSet(u),u=e.getNextUnset(u))}if(r.length!==2)throw new se;if(parseInt(r.toString())%4!==h)throw new se;return u},n.parseExtensionString=function(e){return e.length!==2?null:new Map([[ir.ISSUE_NUMBER,parseInt(e)]])},n})(),_k=(function(){function n(){}return n.decodeRow=function(e,t,r){var i=Tc.findGuardPattern(t,r,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{var a=new gk;return a.decodeRow(e,t,i)}catch{var o=new yk;return o.decodeRow(e,t,i)}},n.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]),n})(),xk=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Nn=(function(n){xk(e,n);function e(){var t=n.call(this)||this;t.decodeRowStringBuffer="",e.L_AND_G_PATTERNS=e.L_PATTERNS.map(function(c){return Int32Array.from(c)});for(var r=10;r<20;r++){for(var i=e.L_PATTERNS[r-10],a=new Int32Array(i.length),o=0;o<i.length;o++)a[o]=i[i.length-o-1];e.L_AND_G_PATTERNS[r]=a}return t}return e.prototype.decodeRow=function(t,r,i){var a=e.findStartGuardPattern(r),o=i==null?null:i.get(Ft.NEED_RESULT_POINT_CALLBACK);if(o!=null){var c=new Te((a[0]+a[1])/2,t);o.foundPossibleResultPoint(c)}var u=this.decodeMiddle(r,a,this.decodeRowStringBuffer),h=u.rowOffset,p=u.resultString;if(o!=null){var g=new Te(h,t);o.foundPossibleResultPoint(g)}var _=e.decodeEnd(r,h);if(o!=null){var w=new Te((_[0]+_[1])/2,t);o.foundPossibleResultPoint(w)}var A=_[1],S=A+(A-_[0]);if(S>=r.getSize()||!r.isRange(A,S,!1))throw new se;var D=p.toString();if(D.length<8)throw new ye;if(!e.checkChecksum(D))throw new An;var C=(a[1]+a[0])/2,P=(_[1]+_[0])/2,V=this.getBarcodeFormat(),H=[new Te(C,t),new Te(P,t)],X=new fr(D,null,0,H,V,new Date().getTime()),F=0;try{var I=_k.decodeRow(t,r,_[1]);X.putMetadata(ir.UPC_EAN_EXTENSION,I.getText()),X.putAllMetadata(I.getResultMetadata()),X.addResultPoints(I.getResultPoints()),F=I.getText().length}catch{}var b=i==null?null:i.get(Ft.ALLOWED_EAN_EXTENSIONS);if(b!=null){var N=!1;for(var R in b)if(F.toString()===R){N=!0;break}if(!N)throw new se}return V===Me.EAN_13||Me.UPC_A,X},e.checkChecksum=function(t){return e.checkStandardUPCEANChecksum(t)},e.checkStandardUPCEANChecksum=function(t){var r=t.length;if(r===0)return!1;var i=parseInt(t.charAt(r-1),10);return e.getStandardUPCEANChecksum(t.substring(0,r-1))===i},e.getStandardUPCEANChecksum=function(t){for(var r=t.length,i=0,a=r-1;a>=0;a-=2){var o=t.charAt(a).charCodeAt(0)-48;if(o<0||o>9)throw new ye;i+=o}i*=3;for(var a=r-2;a>=0;a-=2){var o=t.charAt(a).charCodeAt(0)-48;if(o<0||o>9)throw new ye;i+=o}return(1e3-i)%10},e.decodeEnd=function(t,r){return e.findGuardPattern(t,r,!1,e.START_END_PATTERN,new Int32Array(e.START_END_PATTERN.length).fill(0))},e})(Tc),wk=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),OA=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},fv=(function(n){wk(e,n);function e(){var t=n.call(this)||this;return t.decodeMiddleCounters=Int32Array.from([0,0,0,0]),t}return e.prototype.decodeMiddle=function(t,r,i){var a,o,c,u,h=this.decodeMiddleCounters;h[0]=0,h[1]=0,h[2]=0,h[3]=0;for(var p=t.getSize(),g=r[1],_=0,w=0;w<6&&g<p;w++){var A=Nn.decodeDigit(t,h,g,Nn.L_AND_G_PATTERNS);i+=String.fromCharCode(48+A%10);try{for(var S=(a=void 0,OA(h)),D=S.next();!D.done;D=S.next()){var C=D.value;g+=C}}catch(X){a={error:X}}finally{try{D&&!D.done&&(o=S.return)&&o.call(S)}finally{if(a)throw a.error}}A>=10&&(_|=1<<5-w)}i=e.determineFirstDigit(i,_);var P=Nn.findGuardPattern(t,g,!0,Nn.MIDDLE_PATTERN,new Int32Array(Nn.MIDDLE_PATTERN.length).fill(0));g=P[1];for(var w=0;w<6&&g<p;w++){var A=Nn.decodeDigit(t,h,g,Nn.L_PATTERNS);i+=String.fromCharCode(48+A);try{for(var V=(c=void 0,OA(h)),H=V.next();!H.done;H=V.next()){var C=H.value;g+=C}}catch(I){c={error:I}}finally{try{H&&!H.done&&(u=V.return)&&u.call(V)}finally{if(c)throw c.error}}}return{rowOffset:g,resultString:i}},e.prototype.getBarcodeFormat=function(){return Me.EAN_13},e.determineFirstDigit=function(t,r){for(var i=0;i<10;i++)if(r===this.FIRST_DIGIT_ENCODINGS[i])return t=String.fromCharCode(48+i)+t,t;throw new se},e.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26],e})(Nn),Ek=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),DA=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},MA=(function(n){Ek(e,n);function e(){var t=n.call(this)||this;return t.decodeMiddleCounters=Int32Array.from([0,0,0,0]),t}return e.prototype.decodeMiddle=function(t,r,i){var a,o,c,u,h=this.decodeMiddleCounters;h[0]=0,h[1]=0,h[2]=0,h[3]=0;for(var p=t.getSize(),g=r[1],_=0;_<4&&g<p;_++){var w=Nn.decodeDigit(t,h,g,Nn.L_PATTERNS);i+=String.fromCharCode(48+w);try{for(var A=(a=void 0,DA(h)),S=A.next();!S.done;S=A.next()){var D=S.value;g+=D}}catch(H){a={error:H}}finally{try{S&&!S.done&&(o=A.return)&&o.call(A)}finally{if(a)throw a.error}}}var C=Nn.findGuardPattern(t,g,!0,Nn.MIDDLE_PATTERN,new Int32Array(Nn.MIDDLE_PATTERN.length).fill(0));g=C[1];for(var _=0;_<4&&g<p;_++){var w=Nn.decodeDigit(t,h,g,Nn.L_PATTERNS);i+=String.fromCharCode(48+w);try{for(var P=(c=void 0,DA(h)),V=P.next();!V.done;V=P.next()){var D=V.value;g+=D}}catch(F){c={error:F}}finally{try{V&&!V.done&&(u=P.return)&&u.call(P)}finally{if(c)throw c.error}}}return{rowOffset:g,resultString:i}},e.prototype.getBarcodeFormat=function(){return Me.EAN_8},e})(Nn),Ak=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),PA=(function(n){Ak(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.ean13Reader=new fv,t}return e.prototype.getBarcodeFormat=function(){return Me.UPC_A},e.prototype.decode=function(t,r){return this.maybeReturnResult(this.ean13Reader.decode(t))},e.prototype.decodeRow=function(t,r,i){return this.maybeReturnResult(this.ean13Reader.decodeRow(t,r,i))},e.prototype.decodeMiddle=function(t,r,i){return this.ean13Reader.decodeMiddle(t,r,i)},e.prototype.maybeReturnResult=function(t){var r=t.getText();if(r.charAt(0)==="0"){var i=new fr(r.substring(1),null,null,t.getResultPoints(),Me.UPC_A);return t.getResultMetadata()!=null&&i.putAllMetadata(t.getResultMetadata()),i}else throw new se},e.prototype.reset=function(){this.ean13Reader.reset()},e})(Nn),bk=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Sk=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},kA=(function(n){bk(e,n);function e(){var t=n.call(this)||this;return t.decodeMiddleCounters=new Int32Array(4),t}return e.prototype.decodeMiddle=function(t,r,i){var a,o,c=this.decodeMiddleCounters.map(function(D){return D});c[0]=0,c[1]=0,c[2]=0,c[3]=0;for(var u=t.getSize(),h=r[1],p=0,g=0;g<6&&h<u;g++){var _=e.decodeDigit(t,c,h,e.L_AND_G_PATTERNS);i+=String.fromCharCode(48+_%10);try{for(var w=(a=void 0,Sk(c)),A=w.next();!A.done;A=w.next()){var S=A.value;h+=S}}catch(D){a={error:D}}finally{try{A&&!A.done&&(o=w.return)&&o.call(w)}finally{if(a)throw a.error}}_>=10&&(p|=1<<5-g)}return e.determineNumSysAndCheckDigit(new Je(i),p),h},e.prototype.decodeEnd=function(t,r){return e.findGuardPatternWithoutCounters(t,r,!0,e.MIDDLE_END_PATTERN)},e.prototype.checkChecksum=function(t){return Nn.checkChecksum(e.convertUPCEtoUPCA(t))},e.determineNumSysAndCheckDigit=function(t,r){for(var i=0;i<=1;i++)for(var a=0;a<10;a++)if(r===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[i][a]){t.insert(0,"0"+i),t.append("0"+a);return}throw se.getNotFoundInstance()},e.prototype.getBarcodeFormat=function(){return Me.UPC_E},e.convertUPCEtoUPCA=function(t){var r=t.slice(1,7).split("").map(function(o){return o.charCodeAt(0)}),i=new Je;i.append(t.charAt(0));var a=r[5];switch(a){case 0:case 1:case 2:i.appendChars(r,0,2),i.append(a),i.append("0000"),i.appendChars(r,2,3);break;case 3:i.appendChars(r,0,3),i.append("00000"),i.appendChars(r,3,2);break;case 4:i.appendChars(r,0,4),i.append("00000"),i.append(r[4]);break;default:i.appendChars(r,0,5),i.append("0000"),i.append(a);break}return t.length>=8&&i.append(t.charAt(7)),i.toString()},e.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),e.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,1])],e})(Nn),Ck=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),LA=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Gm=(function(n){Ck(e,n);function e(t){var r=n.call(this)||this,i=t==null?null:t.get(Ft.POSSIBLE_FORMATS),a=[];return i!=null&&(i.indexOf(Me.EAN_13)>-1&&a.push(new fv),i.indexOf(Me.UPC_A)>-1&&a.push(new PA),i.indexOf(Me.EAN_8)>-1&&a.push(new MA),i.indexOf(Me.UPC_E)>-1&&a.push(new kA)),a.length===0&&(a.push(new fv),a.push(new PA),a.push(new MA),a.push(new kA)),r.readers=a,r}return e.prototype.decodeRow=function(t,r,i){var a,o;try{for(var c=LA(this.readers),u=c.next();!u.done;u=c.next()){var h=u.value;try{var p=h.decodeRow(t,r,i),g=p.getBarcodeFormat()===Me.EAN_13&&p.getText().charAt(0)==="0",_=i==null?null:i.get(Ft.POSSIBLE_FORMATS),w=_==null||_.includes(Me.UPC_A);if(g&&w){var A=p.getRawBytes(),S=new fr(p.getText().substring(1),A,A?A.length:null,p.getResultPoints(),Me.UPC_A);return S.putAllMetadata(p.getResultMetadata()),S}return p}catch{}}}catch(D){a={error:D}}finally{try{u&&!u.done&&(o=c.return)&&o.call(c)}finally{if(a)throw a.error}}throw new se},e.prototype.reset=function(){var t,r;try{for(var i=LA(this.readers),a=i.next();!a.done;a=i.next()){var o=a.value;o.reset()}}catch(c){t={error:c}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}},e})(Dn),Tk=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Ik=(function(n){Tk(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.CODA_BAR_CHAR_SET={nnnnnww:"0",nnnnwwn:"1",nnnwnnw:"2",wwnnnnn:"3",nnwnnwn:"4",wnnnnwn:"5",nwnnnnw:"6",nwnnwnn:"7",nwwnnnn:"8",wnnwnnn:"9",nnnwwnn:"-",nnwwnnn:"$",wnnnwnw:":",wnwnnnw:"/",wnwnwnn:".",nnwwwww:"+",nnwwnwn:"A",nwnwnnw:"B",nnnwnww:"C",nnnwwwn:"D"},t}return e.prototype.decodeRow=function(t,r,i){var a=this.getValidRowData(r);if(!a)throw new se;var o=this.codaBarDecodeRow(a.row);if(!o)throw new se;return new fr(o,null,0,[new Te(a.left,t),new Te(a.right,t)],Me.CODABAR,new Date().getTime())},e.prototype.getValidRowData=function(t){var r=t.toArray(),i=r.indexOf(!0);if(i===-1)return null;var a=r.lastIndexOf(!0);if(a<=i)return null;r=r.slice(i,a+1);for(var o=[],c=r[0],u=1,h=1;h<r.length;h++)r[h]===c?u++:(c=r[h],o.push(u),u=1);return o.push(u),o.length<23&&(o.length+1)%8!==0?null:{row:o,left:i,right:a}},e.prototype.codaBarDecodeRow=function(t){for(var r=[],i=Math.ceil(t.reduce(function(u,h){return(u+h)/2},0));t.length>0;){var a=t.splice(0,8).splice(0,7),o=a.map(function(u){return u<i?"n":"w"}).join("");if(this.CODA_BAR_CHAR_SET[o]===void 0)return null;r.push(this.CODA_BAR_CHAR_SET[o])}var c=r.join("");return this.validCodaBarString(c)?c:null},e.prototype.validCodaBarString=function(t){var r=/^[A-D].{1,}[A-D]$/;return r.test(t)},e})(Dn),Nk=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Rk=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},qo=(function(n){Nk(e,n);function e(){var t=n.call(this)||this;return t.decodeFinderCounters=new Int32Array(4),t.dataCharacterCounters=new Int32Array(8),t.oddRoundingErrors=new Array(4),t.evenRoundingErrors=new Array(4),t.oddCounts=new Array(t.dataCharacterCounters.length/2),t.evenCounts=new Array(t.dataCharacterCounters.length/2),t}return e.prototype.getDecodeFinderCounters=function(){return this.decodeFinderCounters},e.prototype.getDataCharacterCounters=function(){return this.dataCharacterCounters},e.prototype.getOddRoundingErrors=function(){return this.oddRoundingErrors},e.prototype.getEvenRoundingErrors=function(){return this.evenRoundingErrors},e.prototype.getOddCounts=function(){return this.oddCounts},e.prototype.getEvenCounts=function(){return this.evenCounts},e.prototype.parseFinderValue=function(t,r){for(var i=0;i<r.length;i++)if(Dn.patternMatchVariance(t,r[i],e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return i;throw new se},e.count=function(t){return gt.sum(new Int32Array(t))},e.increment=function(t,r){for(var i=0,a=r[0],o=1;o<t.length;o++)r[o]>a&&(a=r[o],i=o);t[i]++},e.decrement=function(t,r){for(var i=0,a=r[0],o=1;o<t.length;o++)r[o]<a&&(a=r[o],i=o);t[i]--},e.isFinderPattern=function(t){var r,i,a=t[0]+t[1],o=a+t[2]+t[3],c=a/o;if(c>=e.MIN_FINDER_PATTERN_RATIO&&c<=e.MAX_FINDER_PATTERN_RATIO){var u=Number.MAX_SAFE_INTEGER,h=Number.MIN_SAFE_INTEGER;try{for(var p=Rk(t),g=p.next();!g.done;g=p.next()){var _=g.value;_>h&&(h=_),_<u&&(u=_)}}catch(w){r={error:w}}finally{try{g&&!g.done&&(i=p.return)&&i.call(p)}finally{if(r)throw r.error}}return h<10*u}return!1},e.MAX_AVG_VARIANCE=.2,e.MAX_INDIVIDUAL_VARIANCE=.45,e.MIN_FINDER_PATTERN_RATIO=9.5/12,e.MAX_FINDER_PATTERN_RATIO=12.5/14,e})(Dn),T0=(function(){function n(e,t){this.value=e,this.checksumPortion=t}return n.prototype.getValue=function(){return this.value},n.prototype.getChecksumPortion=function(){return this.checksumPortion},n.prototype.toString=function(){return this.value+"("+this.checksumPortion+")"},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.value===t.value&&this.checksumPortion===t.checksumPortion},n.prototype.hashCode=function(){return this.value^this.checksumPortion},n})(),C3=(function(){function n(e,t,r,i,a){this.value=e,this.startEnd=t,this.value=e,this.startEnd=t,this.resultPoints=new Array,this.resultPoints.push(new Te(r,a)),this.resultPoints.push(new Te(i,a))}return n.prototype.getValue=function(){return this.value},n.prototype.getStartEnd=function(){return this.startEnd},n.prototype.getResultPoints=function(){return this.resultPoints},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.value===t.value},n.prototype.hashCode=function(){return this.value},n})(),Ok=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},cc=(function(){function n(){}return n.getRSSvalue=function(e,t,r){var i,a,o=0;try{for(var c=Ok(e),u=c.next();!u.done;u=c.next()){var h=u.value;o+=h}}catch(P){i={error:P}}finally{try{u&&!u.done&&(a=c.return)&&a.call(c)}finally{if(i)throw i.error}}for(var p=0,g=0,_=e.length,w=0;w<_-1;w++){var A=void 0;for(A=1,g|=1<<w;A<e[w];A++,g&=~(1<<w)){var S=n.combins(o-A-1,_-w-2);if(r&&g===0&&o-A-(_-w-1)>=_-w-1&&(S-=n.combins(o-A-(_-w),_-w-2)),_-w-1>1){for(var D=0,C=o-A-(_-w-2);C>t;C--)D+=n.combins(o-A-C-1,_-w-3);S-=D*(_-1-w)}else o-A>t&&S--;p+=S}o-=A}return p},n.combins=function(e,t){var r,i;e-t>t?(i=t,r=e-t):(i=e-t,r=t);for(var a=1,o=1,c=e;c>r;c--)a*=c,o<=i&&(a/=o,o++);for(;o<=i;)a/=o,o++;return a},n})(),Dk=(function(){function n(){}return n.buildBitArray=function(e){var t=e.length*2-1;e[e.length-1].getRightChar()==null&&(t-=1);for(var r=12*t,i=new $n(r),a=0,o=e[0],c=o.getRightChar().getValue(),u=11;u>=0;--u)(c&1<<u)!==0&&i.set(a),a++;for(var u=1;u<e.length;++u){for(var h=e[u],p=h.getLeftChar().getValue(),g=11;g>=0;--g)(p&1<<g)!==0&&i.set(a),a++;if(h.getRightChar()!==null)for(var _=h.getRightChar().getValue(),g=11;g>=0;--g)(_&1<<g)!==0&&i.set(a),a++}return i},n})(),zo=(function(){function n(e,t){t?this.decodedInformation=null:(this.finished=e,this.decodedInformation=t)}return n.prototype.getDecodedInformation=function(){return this.decodedInformation},n.prototype.isFinished=function(){return this.finished},n})(),Hy=(function(){function n(e){this.newPosition=e}return n.prototype.getNewPosition=function(){return this.newPosition},n})(),Mk=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),bi=(function(n){Mk(e,n);function e(t,r){var i=n.call(this,t)||this;return i.value=r,i}return e.prototype.getValue=function(){return this.value},e.prototype.isFNC1=function(){return this.value===e.FNC1},e.FNC1="$",e})(Hy),Pk=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Ho=(function(n){Pk(e,n);function e(t,r,i){var a=n.call(this,t)||this;return i?(a.remaining=!0,a.remainingValue=a.remainingValue):(a.remaining=!1,a.remainingValue=0),a.newString=r,a}return e.prototype.getNewString=function(){return this.newString},e.prototype.isRemaining=function(){return this.remaining},e.prototype.getRemainingValue=function(){return this.remainingValue},e})(Hy),kk=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Ql=(function(n){kk(e,n);function e(t,r,i){var a=n.call(this,t)||this;if(r<0||r>10||i<0||i>10)throw new ye;return a.firstDigit=r,a.secondDigit=i,a}return e.prototype.getFirstDigit=function(){return this.firstDigit},e.prototype.getSecondDigit=function(){return this.secondDigit},e.prototype.getValue=function(){return this.firstDigit*10+this.secondDigit},e.prototype.isFirstDigitFNC1=function(){return this.firstDigit===e.FNC1},e.prototype.isSecondDigitFNC1=function(){return this.secondDigit===e.FNC1},e.prototype.isAnyFNC1=function(){return this.firstDigit===e.FNC1||this.secondDigit===e.FNC1},e.FNC1=10,e})(Hy),Od=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Lk=(function(){function n(){}return n.parseFieldsInGeneralPurpose=function(e){var t,r,i,a,o,c,u,h;if(!e)return null;if(e.length<2)throw new se;var p=e.substring(0,2);try{for(var g=Od(n.TWO_DIGIT_DATA_LENGTH),_=g.next();!_.done;_=g.next()){var w=_.value;if(w[0]===p)return w[1]===n.VARIABLE_LENGTH?n.processVariableAI(2,w[2],e):n.processFixedAI(2,w[1],e)}}catch(F){t={error:F}}finally{try{_&&!_.done&&(r=g.return)&&r.call(g)}finally{if(t)throw t.error}}if(e.length<3)throw new se;var A=e.substring(0,3);try{for(var S=Od(n.THREE_DIGIT_DATA_LENGTH),D=S.next();!D.done;D=S.next()){var w=D.value;if(w[0]===A)return w[1]===n.VARIABLE_LENGTH?n.processVariableAI(3,w[2],e):n.processFixedAI(3,w[1],e)}}catch(F){i={error:F}}finally{try{D&&!D.done&&(a=S.return)&&a.call(S)}finally{if(i)throw i.error}}try{for(var C=Od(n.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH),P=C.next();!P.done;P=C.next()){var w=P.value;if(w[0]===A)return w[1]===n.VARIABLE_LENGTH?n.processVariableAI(4,w[2],e):n.processFixedAI(4,w[1],e)}}catch(F){o={error:F}}finally{try{P&&!P.done&&(c=C.return)&&c.call(C)}finally{if(o)throw o.error}}if(e.length<4)throw new se;var V=e.substring(0,4);try{for(var H=Od(n.FOUR_DIGIT_DATA_LENGTH),X=H.next();!X.done;X=H.next()){var w=X.value;if(w[0]===V)return w[1]===n.VARIABLE_LENGTH?n.processVariableAI(4,w[2],e):n.processFixedAI(4,w[1],e)}}catch(F){u={error:F}}finally{try{X&&!X.done&&(h=H.return)&&h.call(H)}finally{if(u)throw u.error}}throw new se},n.processFixedAI=function(e,t,r){if(r.length<e)throw new se;var i=r.substring(0,e);if(r.length<e+t)throw new se;var a=r.substring(e,e+t),o=r.substring(e+t),c="("+i+")"+a,u=n.parseFieldsInGeneralPurpose(o);return u==null?c:c+u},n.processVariableAI=function(e,t,r){var i=r.substring(0,e),a;r.length<e+t?a=r.length:a=e+t;var o=r.substring(e,a),c=r.substring(a),u="("+i+")"+o,h=n.parseFieldsInGeneralPurpose(c);return h==null?u:u+h},n.VARIABLE_LENGTH=[],n.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",n.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",n.VARIABLE_LENGTH,20],["22",n.VARIABLE_LENGTH,29],["30",n.VARIABLE_LENGTH,8],["37",n.VARIABLE_LENGTH,8],["90",n.VARIABLE_LENGTH,30],["91",n.VARIABLE_LENGTH,30],["92",n.VARIABLE_LENGTH,30],["93",n.VARIABLE_LENGTH,30],["94",n.VARIABLE_LENGTH,30],["95",n.VARIABLE_LENGTH,30],["96",n.VARIABLE_LENGTH,30],["97",n.VARIABLE_LENGTH,3],["98",n.VARIABLE_LENGTH,30],["99",n.VARIABLE_LENGTH,30]],n.THREE_DIGIT_DATA_LENGTH=[["240",n.VARIABLE_LENGTH,30],["241",n.VARIABLE_LENGTH,30],["242",n.VARIABLE_LENGTH,6],["250",n.VARIABLE_LENGTH,30],["251",n.VARIABLE_LENGTH,30],["253",n.VARIABLE_LENGTH,17],["254",n.VARIABLE_LENGTH,20],["400",n.VARIABLE_LENGTH,30],["401",n.VARIABLE_LENGTH,30],["402",17],["403",n.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",n.VARIABLE_LENGTH,20],["421",n.VARIABLE_LENGTH,15],["422",3],["423",n.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],n.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",n.VARIABLE_LENGTH,15],["391",n.VARIABLE_LENGTH,18],["392",n.VARIABLE_LENGTH,15],["393",n.VARIABLE_LENGTH,18],["703",n.VARIABLE_LENGTH,30]],n.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",n.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",n.VARIABLE_LENGTH,20],["8003",n.VARIABLE_LENGTH,30],["8004",n.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",n.VARIABLE_LENGTH,30],["8008",n.VARIABLE_LENGTH,12],["8018",18],["8020",n.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",n.VARIABLE_LENGTH,70],["8200",n.VARIABLE_LENGTH,70]],n})(),Wd=(function(){function n(e){this.buffer=new Je,this.information=e}return n.prototype.decodeAllCodes=function(e,t){var r=t,i=null;do{var a=this.decodeGeneralPurposeField(r,i),o=Lk.parseFieldsInGeneralPurpose(a.getNewString());if(o!=null&&e.append(o),a.isRemaining()?i=""+a.getRemainingValue():i=null,r===a.getNewPosition())break;r=a.getNewPosition()}while(!0);return e.toString()},n.prototype.isStillNumeric=function(e){if(e+7>this.information.getSize())return e+4<=this.information.getSize();for(var t=e;t<e+3;++t)if(this.information.get(t))return!0;return this.information.get(e+3)},n.prototype.decodeNumeric=function(e){if(e+7>this.information.getSize()){var t=this.extractNumericValueFromBitArray(e,4);return t===0?new Ql(this.information.getSize(),Ql.FNC1,Ql.FNC1):new Ql(this.information.getSize(),t-1,Ql.FNC1)}var r=this.extractNumericValueFromBitArray(e,7),i=(r-8)/11,a=(r-8)%11;return new Ql(e+7,i,a)},n.prototype.extractNumericValueFromBitArray=function(e,t){return n.extractNumericValueFromBitArray(this.information,e,t)},n.extractNumericValueFromBitArray=function(e,t,r){for(var i=0,a=0;a<r;++a)e.get(t+a)&&(i|=1<<r-a-1);return i},n.prototype.decodeGeneralPurposeField=function(e,t){this.buffer.setLengthToZero(),t!=null&&this.buffer.append(t),this.current.setPosition(e);var r=this.parseBlocks();return r!=null&&r.isRemaining()?new Ho(this.current.getPosition(),this.buffer.toString(),r.getRemainingValue()):new Ho(this.current.getPosition(),this.buffer.toString())},n.prototype.parseBlocks=function(){var e,t;do{var r=this.current.getPosition();this.current.isAlpha()?(t=this.parseAlphaBlock(),e=t.isFinished()):this.current.isIsoIec646()?(t=this.parseIsoIec646Block(),e=t.isFinished()):(t=this.parseNumericBlock(),e=t.isFinished());var i=r!==this.current.getPosition();if(!i&&!e)break}while(!e);return t.getDecodedInformation()},n.prototype.parseNumericBlock=function(){for(;this.isStillNumeric(this.current.getPosition());){var e=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFirstDigitFNC1()){var t=void 0;return e.isSecondDigitFNC1()?t=new Ho(this.current.getPosition(),this.buffer.toString()):t=new Ho(this.current.getPosition(),this.buffer.toString(),e.getSecondDigit()),new zo(!0,t)}if(this.buffer.append(e.getFirstDigit()),e.isSecondDigitFNC1()){var t=new Ho(this.current.getPosition(),this.buffer.toString());return new zo(!0,t)}this.buffer.append(e.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new zo(!1)},n.prototype.parseIsoIec646Block=function(){for(;this.isStillIsoIec646(this.current.getPosition());){var e=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var t=new Ho(this.current.getPosition(),this.buffer.toString());return new zo(!0,t)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new zo(!1)},n.prototype.parseAlphaBlock=function(){for(;this.isStillAlpha(this.current.getPosition());){var e=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var t=new Ho(this.current.getPosition(),this.buffer.toString());return new zo(!0,t)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new zo(!1)},n.prototype.isStillIsoIec646=function(e){if(e+5>this.information.getSize())return!1;var t=this.extractNumericValueFromBitArray(e,5);if(t>=5&&t<16)return!0;if(e+7>this.information.getSize())return!1;var r=this.extractNumericValueFromBitArray(e,7);if(r>=64&&r<116)return!0;if(e+8>this.information.getSize())return!1;var i=this.extractNumericValueFromBitArray(e,8);return i>=232&&i<253},n.prototype.decodeIsoIec646=function(e){var t=this.extractNumericValueFromBitArray(e,5);if(t===15)return new bi(e+5,bi.FNC1);if(t>=5&&t<15)return new bi(e+5,"0"+(t-5));var r=this.extractNumericValueFromBitArray(e,7);if(r>=64&&r<90)return new bi(e+7,""+(r+1));if(r>=90&&r<116)return new bi(e+7,""+(r+7));var i=this.extractNumericValueFromBitArray(e,8),a;switch(i){case 232:a="!";break;case 233:a='"';break;case 234:a="%";break;case 235:a="&";break;case 236:a="'";break;case 237:a="(";break;case 238:a=")";break;case 239:a="*";break;case 240:a="+";break;case 241:a=",";break;case 242:a="-";break;case 243:a=".";break;case 244:a="/";break;case 245:a=":";break;case 246:a=";";break;case 247:a="<";break;case 248:a="=";break;case 249:a=">";break;case 250:a="?";break;case 251:a="_";break;case 252:a=" ";break;default:throw new ye}return new bi(e+8,a)},n.prototype.isStillAlpha=function(e){if(e+5>this.information.getSize())return!1;var t=this.extractNumericValueFromBitArray(e,5);if(t>=5&&t<16)return!0;if(e+6>this.information.getSize())return!1;var r=this.extractNumericValueFromBitArray(e,6);return r>=16&&r<63},n.prototype.decodeAlphanumeric=function(e){var t=this.extractNumericValueFromBitArray(e,5);if(t===15)return new bi(e+5,bi.FNC1);if(t>=5&&t<15)return new bi(e+5,"0"+(t-5));var r=this.extractNumericValueFromBitArray(e,6);if(r>=32&&r<58)return new bi(e+6,""+(r+33));var i;switch(r){case 58:i="*";break;case 59:i=",";break;case 60:i="-";break;case 61:i=".";break;case 62:i="/";break;default:throw new Yf("Decoding invalid alphanumeric value: "+r)}return new bi(e+6,i)},n.prototype.isAlphaTo646ToAlphaLatch=function(e){if(e+1>this.information.getSize())return!1;for(var t=0;t<5&&t+e<this.information.getSize();++t)if(t===2){if(!this.information.get(e+2))return!1}else if(this.information.get(e+t))return!1;return!0},n.prototype.isAlphaOr646ToNumericLatch=function(e){if(e+3>this.information.getSize())return!1;for(var t=e;t<e+3;++t)if(this.information.get(t))return!1;return!0},n.prototype.isNumericToAlphaNumericLatch=function(e){if(e+1>this.information.getSize())return!1;for(var t=0;t<4&&t+e<this.information.getSize();++t)if(this.information.get(e+t))return!1;return!0},n})(),T3=(function(){function n(e){this.information=e,this.generalDecoder=new Wd(e)}return n.prototype.getInformation=function(){return this.information},n.prototype.getGeneralDecoder=function(){return this.generalDecoder},n})(),jk=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Ti=(function(n){jk(e,n);function e(t){return n.call(this,t)||this}return e.prototype.encodeCompressedGtin=function(t,r){t.append("(01)");var i=t.length();t.append("9"),this.encodeCompressedGtinWithoutAI(t,r,i)},e.prototype.encodeCompressedGtinWithoutAI=function(t,r,i){for(var a=0;a<4;++a){var o=this.getGeneralDecoder().extractNumericValueFromBitArray(r+10*a,10);o/100===0&&t.append("0"),o/10===0&&t.append("0"),t.append(o)}e.appendCheckDigit(t,i)},e.appendCheckDigit=function(t,r){for(var i=0,a=0;a<13;a++){var o=t.charAt(a+r).charCodeAt(0)-48;i+=(a&1)===0?3*o:o}i=10-i%10,i===10&&(i=0),t.append(i)},e.GTIN_SIZE=40,e})(T3),Bk=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Vk=(function(n){Bk(e,n);function e(t){return n.call(this,t)||this}return e.prototype.parseInformation=function(){var t=new Je;t.append("(01)");var r=t.length(),i=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE,4);return t.append(i),this.encodeCompressedGtinWithoutAI(t,e.HEADER_SIZE+4,r),this.getGeneralDecoder().decodeAllCodes(t,e.HEADER_SIZE+44)},e.HEADER_SIZE=4,e})(Ti),Fk=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Uk=(function(n){Fk(e,n);function e(t){return n.call(this,t)||this}return e.prototype.parseInformation=function(){var t=new Je;return this.getGeneralDecoder().decodeAllCodes(t,e.HEADER_SIZE)},e.HEADER_SIZE=5,e})(T3),zk=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Qd=(function(n){zk(e,n);function e(t){return n.call(this,t)||this}return e.prototype.encodeCompressedWeight=function(t,r,i){var a=this.getGeneralDecoder().extractNumericValueFromBitArray(r,i);this.addWeightCode(t,a);for(var o=this.checkWeight(a),c=1e5,u=0;u<5;++u)o/c===0&&t.append("0"),c/=10;t.append(o)},e})(Ti),Hk=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),I3=(function(n){Hk(e,n);function e(t){return n.call(this,t)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()!==e.HEADER_SIZE+Qd.GTIN_SIZE+e.WEIGHT_SIZE)throw new se;var t=new Je;return this.encodeCompressedGtin(t,e.HEADER_SIZE),this.encodeCompressedWeight(t,e.HEADER_SIZE+Qd.GTIN_SIZE,e.WEIGHT_SIZE),t.toString()},e.HEADER_SIZE=5,e.WEIGHT_SIZE=15,e})(Qd),Gk=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),qk=(function(n){Gk(e,n);function e(t){return n.call(this,t)||this}return e.prototype.addWeightCode=function(t,r){t.append("(3103)")},e.prototype.checkWeight=function(t){return t},e})(I3),$k=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Xk=(function(n){$k(e,n);function e(t){return n.call(this,t)||this}return e.prototype.addWeightCode=function(t,r){r<1e4?t.append("(3202)"):t.append("(3203)")},e.prototype.checkWeight=function(t){return t<1e4?t:t-1e4},e})(I3),Yk=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Kk=(function(n){Yk(e,n);function e(t){return n.call(this,t)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()<e.HEADER_SIZE+Ti.GTIN_SIZE)throw new se;var t=new Je;this.encodeCompressedGtin(t,e.HEADER_SIZE);var r=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+Ti.GTIN_SIZE,e.LAST_DIGIT_SIZE);t.append("(392"),t.append(r),t.append(")");var i=this.getGeneralDecoder().decodeGeneralPurposeField(e.HEADER_SIZE+Ti.GTIN_SIZE+e.LAST_DIGIT_SIZE,null);return t.append(i.getNewString()),t.toString()},e.HEADER_SIZE=8,e.LAST_DIGIT_SIZE=2,e})(Ti),Wk=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Qk=(function(n){Wk(e,n);function e(t){return n.call(this,t)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()<e.HEADER_SIZE+Ti.GTIN_SIZE)throw new se;var t=new Je;this.encodeCompressedGtin(t,e.HEADER_SIZE);var r=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+Ti.GTIN_SIZE,e.LAST_DIGIT_SIZE);t.append("(393"),t.append(r),t.append(")");var i=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+Ti.GTIN_SIZE+e.LAST_DIGIT_SIZE,e.FIRST_THREE_DIGITS_SIZE);i/100===0&&t.append("0"),i/10===0&&t.append("0"),t.append(i);var a=this.getGeneralDecoder().decodeGeneralPurposeField(e.HEADER_SIZE+Ti.GTIN_SIZE+e.LAST_DIGIT_SIZE+e.FIRST_THREE_DIGITS_SIZE,null);return t.append(a.getNewString()),t.toString()},e.HEADER_SIZE=8,e.LAST_DIGIT_SIZE=2,e.FIRST_THREE_DIGITS_SIZE=10,e})(Ti),Zk=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Ms=(function(n){Zk(e,n);function e(t,r,i){var a=n.call(this,t)||this;return a.dateCode=i,a.firstAIdigits=r,a}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()!==e.HEADER_SIZE+e.GTIN_SIZE+e.WEIGHT_SIZE+e.DATE_SIZE)throw new se;var t=new Je;return this.encodeCompressedGtin(t,e.HEADER_SIZE),this.encodeCompressedWeight(t,e.HEADER_SIZE+e.GTIN_SIZE,e.WEIGHT_SIZE),this.encodeCompressedDate(t,e.HEADER_SIZE+e.GTIN_SIZE+e.WEIGHT_SIZE),t.toString()},e.prototype.encodeCompressedDate=function(t,r){var i=this.getGeneralDecoder().extractNumericValueFromBitArray(r,e.DATE_SIZE);if(i!==38400){t.append("("),t.append(this.dateCode),t.append(")");var a=i%32;i/=32;var o=i%12+1;i/=12;var c=i;c/10===0&&t.append("0"),t.append(c),o/10===0&&t.append("0"),t.append(o),a/10===0&&t.append("0"),t.append(a)}},e.prototype.addWeightCode=function(t,r){t.append("("),t.append(this.firstAIdigits),t.append(r/1e5),t.append(")")},e.prototype.checkWeight=function(t){return t%1e5},e.HEADER_SIZE=8,e.WEIGHT_SIZE=20,e.DATE_SIZE=16,e})(Qd);function Jk(n){try{if(n.get(1))return new Vk(n);if(!n.get(2))return new Uk(n);var e=Wd.extractNumericValueFromBitArray(n,1,4);switch(e){case 4:return new qk(n);case 5:return new Xk(n)}var t=Wd.extractNumericValueFromBitArray(n,1,5);switch(t){case 12:return new Kk(n);case 13:return new Qk(n)}var r=Wd.extractNumericValueFromBitArray(n,1,7);switch(r){case 56:return new Ms(n,"310","11");case 57:return new Ms(n,"320","11");case 58:return new Ms(n,"310","13");case 59:return new Ms(n,"320","13");case 60:return new Ms(n,"310","15");case 61:return new Ms(n,"320","15");case 62:return new Ms(n,"310","17");case 63:return new Ms(n,"320","17")}}catch(i){throw console.log(i),new Yf("unknown decoder: "+n)}}var jA=(function(){function n(e,t,r,i){this.leftchar=e,this.rightchar=t,this.finderpattern=r,this.maybeLast=i}return n.prototype.mayBeLast=function(){return this.maybeLast},n.prototype.getLeftChar=function(){return this.leftchar},n.prototype.getRightChar=function(){return this.rightchar},n.prototype.getFinderPattern=function(){return this.finderpattern},n.prototype.mustBeLast=function(){return this.rightchar==null},n.prototype.toString=function(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"},n.equals=function(e,t){return e instanceof n?n.equalsOrNull(e.leftchar,t.leftchar)&&n.equalsOrNull(e.rightchar,t.rightchar)&&n.equalsOrNull(e.finderpattern,t.finderpattern):!1},n.equalsOrNull=function(e,t){return e===null?t===null:n.equals(e,t)},n.prototype.hashCode=function(){var e=this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue();return e},n})(),eL=(function(){function n(e,t,r){this.pairs=e,this.rowNumber=t,this.wasReversed=r}return n.prototype.getPairs=function(){return this.pairs},n.prototype.getRowNumber=function(){return this.rowNumber},n.prototype.isReversed=function(){return this.wasReversed},n.prototype.isEquivalent=function(e){return this.checkEqualitity(this,e)},n.prototype.toString=function(){return"{ "+this.pairs+" }"},n.prototype.equals=function(e,t){return e instanceof n?this.checkEqualitity(e,t)&&e.wasReversed===t.wasReversed:!1},n.prototype.checkEqualitity=function(e,t){if(!(!e||!t)){var r;return e.forEach(function(i,a){t.forEach(function(o){i.getLeftChar().getValue()===o.getLeftChar().getValue()&&i.getRightChar().getValue()===o.getRightChar().getValue()&&i.getFinderPatter().getValue()===o.getFinderPatter().getValue()&&(r=!0)})}),r}},n})(),tL=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Ps=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},nL=(function(n){tL(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.pairs=new Array(e.MAX_PAIRS),t.rows=new Array,t.startEnd=[2],t}return e.prototype.decodeRow=function(t,r,i){this.pairs.length=0,this.startFromEven=!1;try{return e.constructResult(this.decodeRow2pairs(t,r))}catch{}return this.pairs.length=0,this.startFromEven=!0,e.constructResult(this.decodeRow2pairs(t,r))},e.prototype.reset=function(){this.pairs.length=0,this.rows.length=0},e.prototype.decodeRow2pairs=function(t,r){for(var i=!1;!i;)try{this.pairs.push(this.retrieveNextPair(r,this.pairs,t))}catch(c){if(c instanceof se){if(!this.pairs.length)throw new se;i=!0}}if(this.checkChecksum())return this.pairs;var a;if(this.rows.length?a=!0:a=!1,this.storeRow(t,!1),a){var o=this.checkRowsBoolean(!1);if(o!=null||(o=this.checkRowsBoolean(!0),o!=null))return o}throw new se},e.prototype.checkRowsBoolean=function(t){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,t&&(this.rows=this.rows.reverse());var r=null;try{r=this.checkRows(new Array,0)}catch(i){console.log(i)}return t&&(this.rows=this.rows.reverse()),r},e.prototype.checkRows=function(t,r){for(var i,a,o=r;o<this.rows.length;o++){var c=this.rows[o];this.pairs.length=0;try{for(var u=(i=void 0,Ps(t)),h=u.next();!h.done;h=u.next()){var p=h.value;this.pairs.push(p.getPairs())}}catch(_){i={error:_}}finally{try{h&&!h.done&&(a=u.return)&&a.call(u)}finally{if(i)throw i.error}}if(this.pairs.push(c.getPairs()),!!e.isValidSequence(this.pairs)){if(this.checkChecksum())return this.pairs;var g=new Array(t);g.push(c);try{return this.checkRows(g,o+1)}catch(_){console.log(_)}}}throw new se},e.isValidSequence=function(t){var r,i;try{for(var a=Ps(e.FINDER_PATTERN_SEQUENCES),o=a.next();!o.done;o=a.next()){var c=o.value;if(!(t.length>c.length)){for(var u=!0,h=0;h<t.length;h++)if(t[h].getFinderPattern().getValue()!==c[h]){u=!1;break}if(u)return!0}}}catch(p){r={error:p}}finally{try{o&&!o.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}return!1},e.prototype.storeRow=function(t,r){for(var i=0,a=!1,o=!1;i<this.rows.length;){var c=this.rows[i];if(c.getRowNumber()>t){o=c.isEquivalent(this.pairs);break}a=c.isEquivalent(this.pairs),i++}o||a||e.isPartialRow(this.pairs,this.rows)||(this.rows.push(i,new eL(this.pairs,t,r)),this.removePartialRows(this.pairs,this.rows))},e.prototype.removePartialRows=function(t,r){var i,a,o,c,u,h;try{for(var p=Ps(r),g=p.next();!g.done;g=p.next()){var _=g.value;if(_.getPairs().length!==t.length){var w=!0;try{for(var A=(o=void 0,Ps(_.getPairs())),S=A.next();!S.done;S=A.next()){var D=S.value,C=!1;try{for(var P=(u=void 0,Ps(t)),V=P.next();!V.done;V=P.next()){var H=V.value;if(jA.equals(D,H)){C=!0;break}}}catch(X){u={error:X}}finally{try{V&&!V.done&&(h=P.return)&&h.call(P)}finally{if(u)throw u.error}}C||(w=!1)}}catch(X){o={error:X}}finally{try{S&&!S.done&&(c=A.return)&&c.call(A)}finally{if(o)throw o.error}}}}}catch(X){i={error:X}}finally{try{g&&!g.done&&(a=p.return)&&a.call(p)}finally{if(i)throw i.error}}},e.isPartialRow=function(t,r){var i,a,o,c,u,h;try{for(var p=Ps(r),g=p.next();!g.done;g=p.next()){var _=g.value,w=!0;try{for(var A=(o=void 0,Ps(t)),S=A.next();!S.done;S=A.next()){var D=S.value,C=!1;try{for(var P=(u=void 0,Ps(_.getPairs())),V=P.next();!V.done;V=P.next()){var H=V.value;if(D.equals(H)){C=!0;break}}}catch(X){u={error:X}}finally{try{V&&!V.done&&(h=P.return)&&h.call(P)}finally{if(u)throw u.error}}if(!C){w=!1;break}}}catch(X){o={error:X}}finally{try{S&&!S.done&&(c=A.return)&&c.call(A)}finally{if(o)throw o.error}}if(w)return!0}}catch(X){i={error:X}}finally{try{g&&!g.done&&(a=p.return)&&a.call(p)}finally{if(i)throw i.error}}return!1},e.prototype.getRows=function(){return this.rows},e.constructResult=function(t){var r=Dk.buildBitArray(t),i=Jk(r),a=i.parseInformation(),o=t[0].getFinderPattern().getResultPoints(),c=t[t.length-1].getFinderPattern().getResultPoints(),u=[o[0],o[1],c[0],c[1]];return new fr(a,null,null,u,Me.RSS_EXPANDED,null)},e.prototype.checkChecksum=function(){var t=this.pairs.get(0),r=t.getLeftChar(),i=t.getRightChar();if(i===null)return!1;for(var a=i.getChecksumPortion(),o=2,c=1;c<this.pairs.size();++c){var u=this.pairs.get(c);a+=u.getLeftChar().getChecksumPortion(),o++;var h=u.getRightChar();h!=null&&(a+=h.getChecksumPortion(),o++)}a%=211;var p=211*(o-4)+a;return p===r.getValue()},e.getNextSecondBar=function(t,r){var i;return t.get(r)?(i=t.getNextUnset(r),i=t.getNextSet(i)):(i=t.getNextSet(r),i=t.getNextUnset(i)),i},e.prototype.retrieveNextPair=function(t,r,i){var a=r.length%2===0;this.startFromEven&&(a=!a);var o,c=!0,u=-1;do this.findNextPair(t,r,u),o=this.parseFoundFinderPattern(t,i,a),o===null?u=e.getNextSecondBar(t,this.startEnd[0]):c=!1;while(c);var h=this.decodeDataCharacter(t,o,a,!0);if(!this.isEmptyPair(r)&&r[r.length-1].mustBeLast())throw new se;var p;try{p=this.decodeDataCharacter(t,o,a,!1)}catch(g){p=null,console.log(g)}return new jA(h,p,o,!0)},e.prototype.isEmptyPair=function(t){return t.length===0},e.prototype.findNextPair=function(t,r,i){var a=this.getDecodeFinderCounters();a[0]=0,a[1]=0,a[2]=0,a[3]=0;var o=t.getSize(),c;if(i>=0)c=i;else if(this.isEmptyPair(r))c=0;else{var u=r[r.length-1];c=u.getFinderPattern().getStartEnd()[1]}var h=r.length%2!==0;this.startFromEven&&(h=!h);for(var p=!1;c<o&&(p=!t.get(c),!!p);)c++;for(var g=0,_=c,w=c;w<o;w++)if(t.get(w)!==p)a[g]++;else{if(g===3){if(h&&e.reverseCounters(a),e.isFinderPattern(a)){this.startEnd[0]=_,this.startEnd[1]=w;return}h&&e.reverseCounters(a),_+=a[0]+a[1],a[0]=a[2],a[1]=a[3],a[2]=0,a[3]=0,g--}else g++;a[g]=1,p=!p}throw new se},e.reverseCounters=function(t){for(var r=t.length,i=0;i<r/2;++i){var a=t[i];t[i]=t[r-i-1],t[r-i-1]=a}},e.prototype.parseFoundFinderPattern=function(t,r,i){var a,o,c;if(i){for(var u=this.startEnd[0]-1;u>=0&&!t.get(u);)u--;u++,a=this.startEnd[0]-u,o=u,c=this.startEnd[1]}else o=this.startEnd[0],c=t.getNextUnset(this.startEnd[1]+1),a=c-this.startEnd[1];var h=this.getDecodeFinderCounters();Vt.arraycopy(h,0,h,1,h.length-1),h[0]=a;var p;try{p=this.parseFinderValue(h,e.FINDER_PATTERNS)}catch{return null}return new C3(p,[o,c],o,c,r)},e.prototype.decodeDataCharacter=function(t,r,i,a){for(var o=this.getDataCharacterCounters(),c=0;c<o.length;c++)o[c]=0;if(a)e.recordPatternInReverse(t,r.getStartEnd()[0],o);else{e.recordPattern(t,r.getStartEnd()[1],o);for(var u=0,h=o.length-1;u<h;u++,h--){var p=o[u];o[u]=o[h],o[h]=p}}var g=17,_=gt.sum(new Int32Array(o))/g,w=(r.getStartEnd()[1]-r.getStartEnd()[0])/15;if(Math.abs(_-w)/w>.3)throw new se;for(var A=this.getOddCounts(),S=this.getEvenCounts(),D=this.getOddRoundingErrors(),C=this.getEvenRoundingErrors(),u=0;u<o.length;u++){var P=1*o[u]/_,V=P+.5;if(V<1){if(P<.3)throw new se;V=1}else if(V>8){if(P>8.7)throw new se;V=8}var H=u/2;(u&1)===0?(A[H]=V,D[H]=P-V):(S[H]=V,C[H]=P-V)}this.adjustOddEvenCounts(g);for(var X=4*r.getValue()+(i?0:2)+(a?0:1)-1,F=0,I=0,u=A.length-1;u>=0;u--){if(e.isNotA1left(r,i,a)){var b=e.WEIGHTS[X][2*u];I+=A[u]*b}F+=A[u]}for(var N=0,u=S.length-1;u>=0;u--)if(e.isNotA1left(r,i,a)){var b=e.WEIGHTS[X][2*u+1];N+=S[u]*b}var R=I+N;if((F&1)!==0||F>13||F<4)throw new se;var M=(13-F)/2,B=e.SYMBOL_WIDEST[M],L=9-B,ie=cc.getRSSvalue(A,B,!0),ge=cc.getRSSvalue(S,L,!1),K=e.EVEN_TOTAL_SUBSET[M],G=e.GSUM[M],le=ie*K+ge+G;return new T0(le,R)},e.isNotA1left=function(t,r,i){return!(t.getValue()===0&&r&&i)},e.prototype.adjustOddEvenCounts=function(t){var r=gt.sum(new Int32Array(this.getOddCounts())),i=gt.sum(new Int32Array(this.getEvenCounts())),a=!1,o=!1;r>13?o=!0:r<4&&(a=!0);var c=!1,u=!1;i>13?u=!0:i<4&&(c=!0);var h=r+i-t,p=(r&1)===1,g=(i&1)===0;if(h===1)if(p){if(g)throw new se;o=!0}else{if(!g)throw new se;u=!0}else if(h===-1)if(p){if(g)throw new se;a=!0}else{if(!g)throw new se;c=!0}else if(h===0){if(p){if(!g)throw new se;r<i?(a=!0,u=!0):(o=!0,c=!0)}else if(g)throw new se}else throw new se;if(a){if(o)throw new se;e.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(o&&e.decrement(this.getOddCounts(),this.getOddRoundingErrors()),c){if(u)throw new se;e.increment(this.getEvenCounts(),this.getOddRoundingErrors())}u&&e.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},e.SYMBOL_WIDEST=[7,5,4,3,1],e.EVEN_TOTAL_SUBSET=[4,20,52,104,204],e.GSUM=[0,348,1388,2948,3988],e.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],e.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],e.FINDER_PAT_A=0,e.FINDER_PAT_B=1,e.FINDER_PAT_C=2,e.FINDER_PAT_D=3,e.FINDER_PAT_E=4,e.FINDER_PAT_F=5,e.FINDER_PATTERN_SEQUENCES=[[e.FINDER_PAT_A,e.FINDER_PAT_A],[e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B],[e.FINDER_PAT_A,e.FINDER_PAT_C,e.FINDER_PAT_B,e.FINDER_PAT_D],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_C],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_D,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_D],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_E],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F]],e.MAX_PAIRS=11,e})(qo),rL=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),iL=(function(n){rL(e,n);function e(t,r,i){var a=n.call(this,t,r)||this;return a.count=0,a.finderPattern=i,a}return e.prototype.getFinderPattern=function(){return this.finderPattern},e.prototype.getCount=function(){return this.count},e.prototype.incrementCount=function(){this.count++},e})(T0),aL=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),qm=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},BA=(function(n){aL(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.possibleLeftPairs=[],t.possibleRightPairs=[],t}return e.prototype.decodeRow=function(t,r,i){var a,o,c,u,h=this.decodePair(r,!1,t,i);e.addOrTally(this.possibleLeftPairs,h),r.reverse();var p=this.decodePair(r,!0,t,i);e.addOrTally(this.possibleRightPairs,p),r.reverse();try{for(var g=qm(this.possibleLeftPairs),_=g.next();!_.done;_=g.next()){var w=_.value;if(w.getCount()>1)try{for(var A=(c=void 0,qm(this.possibleRightPairs)),S=A.next();!S.done;S=A.next()){var D=S.value;if(D.getCount()>1&&e.checkChecksum(w,D))return e.constructResult(w,D)}}catch(C){c={error:C}}finally{try{S&&!S.done&&(u=A.return)&&u.call(A)}finally{if(c)throw c.error}}}}catch(C){a={error:C}}finally{try{_&&!_.done&&(o=g.return)&&o.call(g)}finally{if(a)throw a.error}}throw new se},e.addOrTally=function(t,r){var i,a;if(r!=null){var o=!1;try{for(var c=qm(t),u=c.next();!u.done;u=c.next()){var h=u.value;if(h.getValue()===r.getValue()){h.incrementCount(),o=!0;break}}}catch(p){i={error:p}}finally{try{u&&!u.done&&(a=c.return)&&a.call(c)}finally{if(i)throw i.error}}o||t.push(r)}},e.prototype.reset=function(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0},e.constructResult=function(t,r){for(var i=4537077*t.getValue()+r.getValue(),a=new String(i).toString(),o=new Je,c=13-a.length;c>0;c--)o.append("0");o.append(a);for(var u=0,c=0;c<13;c++){var h=o.charAt(c).charCodeAt(0)-48;u+=(c&1)===0?3*h:h}u=10-u%10,u===10&&(u=0),o.append(u.toString());var p=t.getFinderPattern().getResultPoints(),g=r.getFinderPattern().getResultPoints();return new fr(o.toString(),null,0,[p[0],p[1],g[0],g[1]],Me.RSS_14,new Date().getTime())},e.checkChecksum=function(t,r){var i=(t.getChecksumPortion()+16*r.getChecksumPortion())%79,a=9*t.getFinderPattern().getValue()+r.getFinderPattern().getValue();return a>72&&a--,a>8&&a--,i===a},e.prototype.decodePair=function(t,r,i,a){try{var o=this.findFinderPattern(t,r),c=this.parseFoundFinderPattern(t,i,r,o),u=a==null?null:a.get(Ft.NEED_RESULT_POINT_CALLBACK);if(u!=null){var h=(o[0]+o[1])/2;r&&(h=t.getSize()-1-h),u.foundPossibleResultPoint(new Te(h,i))}var p=this.decodeDataCharacter(t,c,!0),g=this.decodeDataCharacter(t,c,!1);return new iL(1597*p.getValue()+g.getValue(),p.getChecksumPortion()+4*g.getChecksumPortion(),c)}catch{return null}},e.prototype.decodeDataCharacter=function(t,r,i){for(var a=this.getDataCharacterCounters(),o=0;o<a.length;o++)a[o]=0;if(i)Dn.recordPatternInReverse(t,r.getStartEnd()[0],a);else{Dn.recordPattern(t,r.getStartEnd()[1]+1,a);for(var c=0,u=a.length-1;c<u;c++,u--){var h=a[c];a[c]=a[u],a[u]=h}}for(var p=i?16:15,g=gt.sum(new Int32Array(a))/p,_=this.getOddCounts(),w=this.getEvenCounts(),A=this.getOddRoundingErrors(),S=this.getEvenRoundingErrors(),c=0;c<a.length;c++){var D=a[c]/g,C=Math.floor(D+.5);C<1?C=1:C>8&&(C=8);var P=Math.floor(c/2);(c&1)===0?(_[P]=C,A[P]=D-C):(w[P]=C,S[P]=D-C)}this.adjustOddEvenCounts(i,p);for(var V=0,H=0,c=_.length-1;c>=0;c--)H*=9,H+=_[c],V+=_[c];for(var X=0,F=0,c=w.length-1;c>=0;c--)X*=9,X+=w[c],F+=w[c];var I=H+3*X;if(i){if((V&1)!==0||V>12||V<4)throw new se;var b=(12-V)/2,N=e.OUTSIDE_ODD_WIDEST[b],R=9-N,M=cc.getRSSvalue(_,N,!1),B=cc.getRSSvalue(w,R,!0),L=e.OUTSIDE_EVEN_TOTAL_SUBSET[b],ie=e.OUTSIDE_GSUM[b];return new T0(M*L+B+ie,I)}else{if((F&1)!==0||F>10||F<4)throw new se;var b=(10-F)/2,N=e.INSIDE_ODD_WIDEST[b],R=9-N,M=cc.getRSSvalue(_,N,!0),B=cc.getRSSvalue(w,R,!1),ge=e.INSIDE_ODD_TOTAL_SUBSET[b],ie=e.INSIDE_GSUM[b];return new T0(B*ge+M+ie,I)}},e.prototype.findFinderPattern=function(t,r){var i=this.getDecodeFinderCounters();i[0]=0,i[1]=0,i[2]=0,i[3]=0;for(var a=t.getSize(),o=!1,c=0;c<a&&(o=!t.get(c),r!==o);)c++;for(var u=0,h=c,p=c;p<a;p++)if(t.get(p)!==o)i[u]++;else{if(u===3){if(qo.isFinderPattern(i))return[h,p];h+=i[0]+i[1],i[0]=i[2],i[1]=i[3],i[2]=0,i[3]=0,u--}else u++;i[u]=1,o=!o}throw new se},e.prototype.parseFoundFinderPattern=function(t,r,i,a){for(var o=t.get(a[0]),c=a[0]-1;c>=0&&o!==t.get(c);)c--;c++;var u=a[0]-c,h=this.getDecodeFinderCounters(),p=new Int32Array(h.length);Vt.arraycopy(h,0,p,1,h.length-1),p[0]=u;var g=this.parseFinderValue(p,e.FINDER_PATTERNS),_=c,w=a[1];return i&&(_=t.getSize()-1-_,w=t.getSize()-1-w),new C3(g,[c,a[1]],_,w,r)},e.prototype.adjustOddEvenCounts=function(t,r){var i=gt.sum(new Int32Array(this.getOddCounts())),a=gt.sum(new Int32Array(this.getEvenCounts())),o=!1,c=!1,u=!1,h=!1;t?(i>12?c=!0:i<4&&(o=!0),a>12?h=!0:a<4&&(u=!0)):(i>11?c=!0:i<5&&(o=!0),a>10?h=!0:a<4&&(u=!0));var p=i+a-r,g=(i&1)===(t?1:0),_=(a&1)===1;if(p===1)if(g){if(_)throw new se;c=!0}else{if(!_)throw new se;h=!0}else if(p===-1)if(g){if(_)throw new se;o=!0}else{if(!_)throw new se;u=!0}else if(p===0){if(g){if(!_)throw new se;i<a?(o=!0,h=!0):(c=!0,u=!0)}else if(_)throw new se}else throw new se;if(o){if(c)throw new se;qo.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(c&&qo.decrement(this.getOddCounts(),this.getOddRoundingErrors()),u){if(h)throw new se;qo.increment(this.getEvenCounts(),this.getOddRoundingErrors())}h&&qo.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},e.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],e.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],e.OUTSIDE_GSUM=[0,161,961,2015,2715],e.INSIDE_GSUM=[0,336,1036,1516],e.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],e.INSIDE_ODD_WIDEST=[2,4,6,8],e.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])],e})(qo),sL=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),uc=(function(n){sL(e,n);function e(t){var r=n.call(this)||this;r.readers=[];var i=t?t.get(Ft.POSSIBLE_FORMATS):null,a=t&&t.get(Ft.ASSUME_CODE_39_CHECK_DIGIT)!==void 0,o=t&&t.get(Ft.ENABLE_CODE_39_EXTENDED_MODE)!==void 0;return i&&((i.includes(Me.EAN_13)||i.includes(Me.UPC_A)||i.includes(Me.EAN_8)||i.includes(Me.UPC_E))&&r.readers.push(new Gm(t)),i.includes(Me.CODE_39)&&r.readers.push(new IA(a,o)),i.includes(Me.CODE_93)&&r.readers.push(new NA),i.includes(Me.CODE_128)&&r.readers.push(new TA),i.includes(Me.ITF)&&r.readers.push(new RA),i.includes(Me.CODABAR)&&r.readers.push(new Ik),i.includes(Me.RSS_14)&&r.readers.push(new BA),i.includes(Me.RSS_EXPANDED)&&(console.warn("RSS Expanded reader IS NOT ready for production yet! use at your own risk."),r.readers.push(new nL))),r.readers.length===0&&(r.readers.push(new Gm(t)),r.readers.push(new IA),r.readers.push(new NA),r.readers.push(new Gm(t)),r.readers.push(new TA),r.readers.push(new RA),r.readers.push(new BA)),r}return e.prototype.decodeRow=function(t,r,i){for(var a=0;a<this.readers.length;a++)try{return this.readers[a].decodeRow(t,r,i)}catch{}throw new se},e.prototype.reset=function(){this.readers.forEach(function(t){return t.reset()})},e})(Dn),oL=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})();(function(n){oL(e,n);function e(t,r){return t===void 0&&(t=500),n.call(this,new uc(r),t,r)||this}return e})(zc);var VA=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},At=(function(){function n(e,t,r){this.ecCodewords=e,this.ecBlocks=[t],r&&this.ecBlocks.push(r)}return n.prototype.getECCodewords=function(){return this.ecCodewords},n.prototype.getECBlocks=function(){return this.ecBlocks},n})(),xt=(function(){function n(e,t){this.count=e,this.dataCodewords=t}return n.prototype.getCount=function(){return this.count},n.prototype.getDataCodewords=function(){return this.dataCodewords},n})(),lL=(function(){function n(e,t,r,i,a,o){var c,u;this.versionNumber=e,this.symbolSizeRows=t,this.symbolSizeColumns=r,this.dataRegionSizeRows=i,this.dataRegionSizeColumns=a,this.ecBlocks=o;var h=0,p=o.getECCodewords(),g=o.getECBlocks();try{for(var _=VA(g),w=_.next();!w.done;w=_.next()){var A=w.value;h+=A.getCount()*(A.getDataCodewords()+p)}}catch(S){c={error:S}}finally{try{w&&!w.done&&(u=_.return)&&u.call(_)}finally{if(c)throw c.error}}this.totalCodewords=h}return n.prototype.getVersionNumber=function(){return this.versionNumber},n.prototype.getSymbolSizeRows=function(){return this.symbolSizeRows},n.prototype.getSymbolSizeColumns=function(){return this.symbolSizeColumns},n.prototype.getDataRegionSizeRows=function(){return this.dataRegionSizeRows},n.prototype.getDataRegionSizeColumns=function(){return this.dataRegionSizeColumns},n.prototype.getTotalCodewords=function(){return this.totalCodewords},n.prototype.getECBlocks=function(){return this.ecBlocks},n.getVersionForDimensions=function(e,t){var r,i;if((e&1)!==0||(t&1)!==0)throw new ye;try{for(var a=VA(n.VERSIONS),o=a.next();!o.done;o=a.next()){var c=o.value;if(c.symbolSizeRows===e&&c.symbolSizeColumns===t)return c}}catch(u){r={error:u}}finally{try{o&&!o.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}throw new ye},n.prototype.toString=function(){return""+this.versionNumber},n.buildVersions=function(){return[new n(1,10,10,8,8,new At(5,new xt(1,3))),new n(2,12,12,10,10,new At(7,new xt(1,5))),new n(3,14,14,12,12,new At(10,new xt(1,8))),new n(4,16,16,14,14,new At(12,new xt(1,12))),new n(5,18,18,16,16,new At(14,new xt(1,18))),new n(6,20,20,18,18,new At(18,new xt(1,22))),new n(7,22,22,20,20,new At(20,new xt(1,30))),new n(8,24,24,22,22,new At(24,new xt(1,36))),new n(9,26,26,24,24,new At(28,new xt(1,44))),new n(10,32,32,14,14,new At(36,new xt(1,62))),new n(11,36,36,16,16,new At(42,new xt(1,86))),new n(12,40,40,18,18,new At(48,new xt(1,114))),new n(13,44,44,20,20,new At(56,new xt(1,144))),new n(14,48,48,22,22,new At(68,new xt(1,174))),new n(15,52,52,24,24,new At(42,new xt(2,102))),new n(16,64,64,14,14,new At(56,new xt(2,140))),new n(17,72,72,16,16,new At(36,new xt(4,92))),new n(18,80,80,18,18,new At(48,new xt(4,114))),new n(19,88,88,20,20,new At(56,new xt(4,144))),new n(20,96,96,22,22,new At(68,new xt(4,174))),new n(21,104,104,24,24,new At(56,new xt(6,136))),new n(22,120,120,18,18,new At(68,new xt(6,175))),new n(23,132,132,20,20,new At(62,new xt(8,163))),new n(24,144,144,22,22,new At(62,new xt(8,156),new xt(2,155))),new n(25,8,18,6,16,new At(7,new xt(1,5))),new n(26,8,32,6,14,new At(11,new xt(1,10))),new n(27,12,26,10,24,new At(14,new xt(1,16))),new n(28,12,36,10,16,new At(18,new xt(1,22))),new n(29,16,36,14,16,new At(24,new xt(1,32))),new n(30,16,48,14,22,new At(28,new xt(1,49)))]},n.VERSIONS=n.buildVersions(),n})(),cL=(function(){function n(e){var t=e.getHeight();if(t<8||t>144||(t&1)!==0)throw new ye;this.version=n.readVersion(e),this.mappingBitMatrix=this.extractDataRegion(e),this.readMappingMatrix=new _a(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}return n.prototype.getVersion=function(){return this.version},n.readVersion=function(e){var t=e.getHeight(),r=e.getWidth();return lL.getVersionForDimensions(t,r)},n.prototype.readCodewords=function(){var e=new Int8Array(this.version.getTotalCodewords()),t=0,r=4,i=0,a=this.mappingBitMatrix.getHeight(),o=this.mappingBitMatrix.getWidth(),c=!1,u=!1,h=!1,p=!1;do if(r===a&&i===0&&!c)e[t++]=this.readCorner1(a,o)&255,r-=2,i+=2,c=!0;else if(r===a-2&&i===0&&(o&3)!==0&&!u)e[t++]=this.readCorner2(a,o)&255,r-=2,i+=2,u=!0;else if(r===a+4&&i===2&&(o&7)===0&&!h)e[t++]=this.readCorner3(a,o)&255,r-=2,i+=2,h=!0;else if(r===a-2&&i===0&&(o&7)===4&&!p)e[t++]=this.readCorner4(a,o)&255,r-=2,i+=2,p=!0;else{do r<a&&i>=0&&!this.readMappingMatrix.get(i,r)&&(e[t++]=this.readUtah(r,i,a,o)&255),r-=2,i+=2;while(r>=0&&i<o);r+=1,i+=3;do r>=0&&i<o&&!this.readMappingMatrix.get(i,r)&&(e[t++]=this.readUtah(r,i,a,o)&255),r+=2,i-=2;while(r<a&&i>=0);r+=3,i+=1}while(r<a||i<o);if(t!==this.version.getTotalCodewords())throw new ye;return e},n.prototype.readModule=function(e,t,r,i){return e<0&&(e+=r,t+=4-(r+4&7)),t<0&&(t+=i,e+=4-(i+4&7)),this.readMappingMatrix.set(t,e),this.mappingBitMatrix.get(t,e)},n.prototype.readUtah=function(e,t,r,i){var a=0;return this.readModule(e-2,t-2,r,i)&&(a|=1),a<<=1,this.readModule(e-2,t-1,r,i)&&(a|=1),a<<=1,this.readModule(e-1,t-2,r,i)&&(a|=1),a<<=1,this.readModule(e-1,t-1,r,i)&&(a|=1),a<<=1,this.readModule(e-1,t,r,i)&&(a|=1),a<<=1,this.readModule(e,t-2,r,i)&&(a|=1),a<<=1,this.readModule(e,t-1,r,i)&&(a|=1),a<<=1,this.readModule(e,t,r,i)&&(a|=1),a},n.prototype.readCorner1=function(e,t){var r=0;return this.readModule(e-1,0,e,t)&&(r|=1),r<<=1,this.readModule(e-1,1,e,t)&&(r|=1),r<<=1,this.readModule(e-1,2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-1,e,t)&&(r|=1),r<<=1,this.readModule(1,t-1,e,t)&&(r|=1),r<<=1,this.readModule(2,t-1,e,t)&&(r|=1),r<<=1,this.readModule(3,t-1,e,t)&&(r|=1),r},n.prototype.readCorner2=function(e,t){var r=0;return this.readModule(e-3,0,e,t)&&(r|=1),r<<=1,this.readModule(e-2,0,e,t)&&(r|=1),r<<=1,this.readModule(e-1,0,e,t)&&(r|=1),r<<=1,this.readModule(0,t-4,e,t)&&(r|=1),r<<=1,this.readModule(0,t-3,e,t)&&(r|=1),r<<=1,this.readModule(0,t-2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-1,e,t)&&(r|=1),r<<=1,this.readModule(1,t-1,e,t)&&(r|=1),r},n.prototype.readCorner3=function(e,t){var r=0;return this.readModule(e-1,0,e,t)&&(r|=1),r<<=1,this.readModule(e-1,t-1,e,t)&&(r|=1),r<<=1,this.readModule(0,t-3,e,t)&&(r|=1),r<<=1,this.readModule(0,t-2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-1,e,t)&&(r|=1),r<<=1,this.readModule(1,t-3,e,t)&&(r|=1),r<<=1,this.readModule(1,t-2,e,t)&&(r|=1),r<<=1,this.readModule(1,t-1,e,t)&&(r|=1),r},n.prototype.readCorner4=function(e,t){var r=0;return this.readModule(e-3,0,e,t)&&(r|=1),r<<=1,this.readModule(e-2,0,e,t)&&(r|=1),r<<=1,this.readModule(e-1,0,e,t)&&(r|=1),r<<=1,this.readModule(0,t-2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-1,e,t)&&(r|=1),r<<=1,this.readModule(1,t-1,e,t)&&(r|=1),r<<=1,this.readModule(2,t-1,e,t)&&(r|=1),r<<=1,this.readModule(3,t-1,e,t)&&(r|=1),r},n.prototype.extractDataRegion=function(e){var t=this.version.getSymbolSizeRows(),r=this.version.getSymbolSizeColumns();if(e.getHeight()!==t)throw new Pe("Dimension of bitMatrix must match the version size");for(var i=this.version.getDataRegionSizeRows(),a=this.version.getDataRegionSizeColumns(),o=t/i|0,c=r/a|0,u=o*i,h=c*a,p=new _a(h,u),g=0;g<o;++g)for(var _=g*i,w=0;w<c;++w)for(var A=w*a,S=0;S<i;++S)for(var D=g*(i+2)+1+S,C=_+S,P=0;P<a;++P){var V=w*(a+2)+1+P;if(e.get(V,D)){var H=A+P;p.set(H,C)}}return p},n})(),FA=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},uL=(function(){function n(e,t){this.numDataCodewords=e,this.codewords=t}return n.getDataBlocks=function(e,t){var r,i,a,o,c=t.getECBlocks(),u=0,h=c.getECBlocks();try{for(var p=FA(h),g=p.next();!g.done;g=p.next()){var _=g.value;u+=_.getCount()}}catch(ie){r={error:ie}}finally{try{g&&!g.done&&(i=p.return)&&i.call(p)}finally{if(r)throw r.error}}var w=new Array(u),A=0;try{for(var S=FA(h),D=S.next();!D.done;D=S.next())for(var _=D.value,C=0;C<_.getCount();C++){var P=_.getDataCodewords(),V=c.getECCodewords()+P;w[A++]=new n(P,new Uint8Array(V))}}catch(ie){a={error:ie}}finally{try{D&&!D.done&&(o=S.return)&&o.call(S)}finally{if(a)throw a.error}}for(var H=w[0].codewords.length,X=H-c.getECCodewords(),F=X-1,I=0,C=0;C<F;C++)for(var b=0;b<A;b++)w[b].codewords[C]=e[I++];for(var N=t.getVersionNumber()===24,R=N?8:A,b=0;b<R;b++)w[b].codewords[X-1]=e[I++];for(var M=w[0].codewords.length,C=X;C<M;C++)for(var b=0;b<A;b++){var B=N?(b+8)%A:b,L=N&&B>7?C-1:C;w[B].codewords[L]=e[I++]}if(I!==e.length)throw new Pe;return w},n.prototype.getNumDataCodewords=function(){return this.numDataCodewords},n.prototype.getCodewords=function(){return this.codewords},n})(),N3=(function(){function n(e){this.bytes=e,this.byteOffset=0,this.bitOffset=0}return n.prototype.getBitOffset=function(){return this.bitOffset},n.prototype.getByteOffset=function(){return this.byteOffset},n.prototype.readBits=function(e){if(e<1||e>32||e>this.available())throw new Pe(""+e);var t=0,r=this.bitOffset,i=this.byteOffset,a=this.bytes;if(r>0){var o=8-r,c=e<o?e:o,u=o-c,h=255>>8-c<<u;t=(a[i]&h)>>u,e-=c,r+=c,r===8&&(r=0,i++)}if(e>0){for(;e>=8;)t=t<<8|a[i]&255,i++,e-=8;if(e>0){var u=8-e,h=255>>u<<u;t=t<<e|(a[i]&h)>>u,r+=e}}return this.bitOffset=r,this.byteOffset=i,t},n.prototype.available=function(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset},n})(),Tn;(function(n){n[n.PAD_ENCODE=0]="PAD_ENCODE",n[n.ASCII_ENCODE=1]="ASCII_ENCODE",n[n.C40_ENCODE=2]="C40_ENCODE",n[n.TEXT_ENCODE=3]="TEXT_ENCODE",n[n.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",n[n.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",n[n.BASE256_ENCODE=6]="BASE256_ENCODE"})(Tn||(Tn={}));var fL=(function(){function n(){}return n.decode=function(e){var t=new N3(e),r=new Je,i=new Je,a=new Array,o=Tn.ASCII_ENCODE;do if(o===Tn.ASCII_ENCODE)o=this.decodeAsciiSegment(t,r,i);else{switch(o){case Tn.C40_ENCODE:this.decodeC40Segment(t,r);break;case Tn.TEXT_ENCODE:this.decodeTextSegment(t,r);break;case Tn.ANSIX12_ENCODE:this.decodeAnsiX12Segment(t,r);break;case Tn.EDIFACT_ENCODE:this.decodeEdifactSegment(t,r);break;case Tn.BASE256_ENCODE:this.decodeBase256Segment(t,r,a);break;default:throw new ye}o=Tn.ASCII_ENCODE}while(o!==Tn.PAD_ENCODE&&t.available()>0);return i.length()>0&&r.append(i.toString()),new gp(e,r.toString(),a.length===0?null:a,null)},n.decodeAsciiSegment=function(e,t,r){var i=!1;do{var a=e.readBits(8);if(a===0)throw new ye;if(a<=128)return i&&(a+=128),t.append(String.fromCharCode(a-1)),Tn.ASCII_ENCODE;if(a===129)return Tn.PAD_ENCODE;if(a<=229){var o=a-130;o<10&&t.append("0"),t.append(""+o)}else switch(a){case 230:return Tn.C40_ENCODE;case 231:return Tn.BASE256_ENCODE;case 232:t.append("");break;case 233:case 234:break;case 235:i=!0;break;case 236:t.append("[)>05"),r.insert(0,"");break;case 237:t.append("[)>06"),r.insert(0,"");break;case 238:return Tn.ANSIX12_ENCODE;case 239:return Tn.TEXT_ENCODE;case 240:return Tn.EDIFACT_ENCODE;case 241:break;default:if(a!==254||e.available()!==0)throw new ye;break}}while(e.available()>0);return Tn.ASCII_ENCODE},n.decodeC40Segment=function(e,t){var r=!1,i=[],a=0;do{if(e.available()===8)return;var o=e.readBits(8);if(o===254)return;this.parseTwoBytes(o,e.readBits(8),i);for(var c=0;c<3;c++){var u=i[c];switch(a){case 0:if(u<3)a=u+1;else if(u<this.C40_BASIC_SET_CHARS.length){var h=this.C40_BASIC_SET_CHARS[u];r?(t.append(String.fromCharCode(h.charCodeAt(0)+128)),r=!1):t.append(h)}else throw new ye;break;case 1:r?(t.append(String.fromCharCode(u+128)),r=!1):t.append(String.fromCharCode(u)),a=0;break;case 2:if(u<this.C40_SHIFT2_SET_CHARS.length){var h=this.C40_SHIFT2_SET_CHARS[u];r?(t.append(String.fromCharCode(h.charCodeAt(0)+128)),r=!1):t.append(h)}else switch(u){case 27:t.append("");break;case 30:r=!0;break;default:throw new ye}a=0;break;case 3:r?(t.append(String.fromCharCode(u+224)),r=!1):t.append(String.fromCharCode(u+96)),a=0;break;default:throw new ye}}}while(e.available()>0)},n.decodeTextSegment=function(e,t){var r=!1,i=[],a=0;do{if(e.available()===8)return;var o=e.readBits(8);if(o===254)return;this.parseTwoBytes(o,e.readBits(8),i);for(var c=0;c<3;c++){var u=i[c];switch(a){case 0:if(u<3)a=u+1;else if(u<this.TEXT_BASIC_SET_CHARS.length){var h=this.TEXT_BASIC_SET_CHARS[u];r?(t.append(String.fromCharCode(h.charCodeAt(0)+128)),r=!1):t.append(h)}else throw new ye;break;case 1:r?(t.append(String.fromCharCode(u+128)),r=!1):t.append(String.fromCharCode(u)),a=0;break;case 2:if(u<this.TEXT_SHIFT2_SET_CHARS.length){var h=this.TEXT_SHIFT2_SET_CHARS[u];r?(t.append(String.fromCharCode(h.charCodeAt(0)+128)),r=!1):t.append(h)}else switch(u){case 27:t.append("");break;case 30:r=!0;break;default:throw new ye}a=0;break;case 3:if(u<this.TEXT_SHIFT3_SET_CHARS.length){var h=this.TEXT_SHIFT3_SET_CHARS[u];r?(t.append(String.fromCharCode(h.charCodeAt(0)+128)),r=!1):t.append(h),a=0}else throw new ye;break;default:throw new ye}}}while(e.available()>0)},n.decodeAnsiX12Segment=function(e,t){var r=[];do{if(e.available()===8)return;var i=e.readBits(8);if(i===254)return;this.parseTwoBytes(i,e.readBits(8),r);for(var a=0;a<3;a++){var o=r[a];switch(o){case 0:t.append("\r");break;case 1:t.append("*");break;case 2:t.append(">");break;case 3:t.append(" ");break;default:if(o<14)t.append(String.fromCharCode(o+44));else if(o<40)t.append(String.fromCharCode(o+51));else throw new ye;break}}}while(e.available()>0)},n.parseTwoBytes=function(e,t,r){var i=(e<<8)+t-1,a=Math.floor(i/1600);r[0]=a,i-=a*1600,a=Math.floor(i/40),r[1]=a,r[2]=i-a*40},n.decodeEdifactSegment=function(e,t){do{if(e.available()<=16)return;for(var r=0;r<4;r++){var i=e.readBits(6);if(i===31){var a=8-e.getBitOffset();a!==8&&e.readBits(a);return}(i&32)===0&&(i|=64),t.append(String.fromCharCode(i))}}while(e.available()>0)},n.decodeBase256Segment=function(e,t,r){var i=1+e.getByteOffset(),a=this.unrandomize255State(e.readBits(8),i++),o;if(a===0?o=e.available()/8|0:a<250?o=a:o=250*(a-249)+this.unrandomize255State(e.readBits(8),i++),o<0)throw new ye;for(var c=new Uint8Array(o),u=0;u<o;u++){if(e.available()<8)throw new ye;c[u]=this.unrandomize255State(e.readBits(8),i++)}r.push(c);try{t.append(ui.decode(c,ut.ISO88591))}catch(h){throw new Yf("Platform does not support required encoding: "+h.message)}},n.unrandomize255State=function(e,t){var r=149*t%255+1,i=e-r;return i>=0?i:i+256},n.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],n.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],n.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],n.TEXT_SHIFT2_SET_CHARS=n.C40_SHIFT2_SET_CHARS,n.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""],n})(),hL=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},dL=(function(){function n(){this.rsDecoder=new vp(Tr.DATA_MATRIX_FIELD_256)}return n.prototype.decode=function(e){var t,r,i=new cL(e),a=i.getVersion(),o=i.readCodewords(),c=uL.getDataBlocks(o,a),u=0;try{for(var h=hL(c),p=h.next();!p.done;p=h.next()){var g=p.value;u+=g.getNumDataCodewords()}}catch(V){t={error:V}}finally{try{p&&!p.done&&(r=h.return)&&r.call(h)}finally{if(t)throw t.error}}for(var _=new Uint8Array(u),w=c.length,A=0;A<w;A++){var S=c[A],D=S.getCodewords(),C=S.getNumDataCodewords();this.correctErrors(D,C);for(var P=0;P<C;P++)_[P*w+A]=D[P]}return fL.decode(_)},n.prototype.correctErrors=function(e,t){var r=new Int32Array(e);try{this.rsDecoder.decode(r,e.length-t)}catch{throw new An}for(var i=0;i<t;i++)e[i]=r[i]},n})(),pL=(function(){function n(e){this.image=e,this.rectangleDetector=new uv(this.image)}return n.prototype.detect=function(){var e=this.rectangleDetector.detect(),t=this.detectSolid1(e);if(t=this.detectSolid2(t),t[3]=this.correctTopRight(t),!t[3])throw new se;t=this.shiftToModuleCenter(t);var r=t[0],i=t[1],a=t[2],o=t[3],c=this.transitionsBetween(r,o)+1,u=this.transitionsBetween(a,o)+1;(c&1)===1&&(c+=1),(u&1)===1&&(u+=1),4*c<7*u&&4*u<7*c&&(c=u=Math.max(c,u));var h=n.sampleGrid(this.image,r,i,a,o,c,u);return new Uy(h,[r,i,a,o])},n.shiftPoint=function(e,t,r){var i=(t.getX()-e.getX())/(r+1),a=(t.getY()-e.getY())/(r+1);return new Te(e.getX()+i,e.getY()+a)},n.moveAway=function(e,t,r){var i=e.getX(),a=e.getY();return i<t?i-=1:i+=1,a<r?a-=1:a+=1,new Te(i,a)},n.prototype.detectSolid1=function(e){var t=e[0],r=e[1],i=e[3],a=e[2],o=this.transitionsBetween(t,r),c=this.transitionsBetween(r,i),u=this.transitionsBetween(i,a),h=this.transitionsBetween(a,t),p=o,g=[a,t,r,i];return p>c&&(p=c,g[0]=t,g[1]=r,g[2]=i,g[3]=a),p>u&&(p=u,g[0]=r,g[1]=i,g[2]=a,g[3]=t),p>h&&(g[0]=i,g[1]=a,g[2]=t,g[3]=r),g},n.prototype.detectSolid2=function(e){var t=e[0],r=e[1],i=e[2],a=e[3],o=this.transitionsBetween(t,a),c=n.shiftPoint(r,i,(o+1)*4),u=n.shiftPoint(i,r,(o+1)*4),h=this.transitionsBetween(c,t),p=this.transitionsBetween(u,a);return h<p?(e[0]=t,e[1]=r,e[2]=i,e[3]=a):(e[0]=r,e[1]=i,e[2]=a,e[3]=t),e},n.prototype.correctTopRight=function(e){var t=e[0],r=e[1],i=e[2],a=e[3],o=this.transitionsBetween(t,a),c=this.transitionsBetween(r,a),u=n.shiftPoint(t,r,(c+1)*4),h=n.shiftPoint(i,r,(o+1)*4);o=this.transitionsBetween(u,a),c=this.transitionsBetween(h,a);var p=new Te(a.getX()+(i.getX()-r.getX())/(o+1),a.getY()+(i.getY()-r.getY())/(o+1)),g=new Te(a.getX()+(t.getX()-r.getX())/(c+1),a.getY()+(t.getY()-r.getY())/(c+1));if(!this.isValid(p))return this.isValid(g)?g:null;if(!this.isValid(g))return p;var _=this.transitionsBetween(u,p)+this.transitionsBetween(h,p),w=this.transitionsBetween(u,g)+this.transitionsBetween(h,g);return _>w?p:g},n.prototype.shiftToModuleCenter=function(e){var t=e[0],r=e[1],i=e[2],a=e[3],o=this.transitionsBetween(t,a)+1,c=this.transitionsBetween(i,a)+1,u=n.shiftPoint(t,r,c*4),h=n.shiftPoint(i,r,o*4);o=this.transitionsBetween(u,a)+1,c=this.transitionsBetween(h,a)+1,(o&1)===1&&(o+=1),(c&1)===1&&(c+=1);var p=(t.getX()+r.getX()+i.getX()+a.getX())/4,g=(t.getY()+r.getY()+i.getY()+a.getY())/4;t=n.moveAway(t,p,g),r=n.moveAway(r,p,g),i=n.moveAway(i,p,g),a=n.moveAway(a,p,g);var _,w;return u=n.shiftPoint(t,r,c*4),u=n.shiftPoint(u,a,o*4),_=n.shiftPoint(r,t,c*4),_=n.shiftPoint(_,i,o*4),h=n.shiftPoint(i,a,c*4),h=n.shiftPoint(h,r,o*4),w=n.shiftPoint(a,i,c*4),w=n.shiftPoint(w,t,o*4),[u,_,h,w]},n.prototype.isValid=function(e){return e.getX()>=0&&e.getX()<this.image.getWidth()&&e.getY()>0&&e.getY()<this.image.getHeight()},n.sampleGrid=function(e,t,r,i,a,o,c){var u=zy.getInstance();return u.sampleGrid(e,o,c,.5,.5,o-.5,.5,o-.5,c-.5,.5,c-.5,t.getX(),t.getY(),a.getX(),a.getY(),i.getX(),i.getY(),r.getX(),r.getY())},n.prototype.transitionsBetween=function(e,t){var r=Math.trunc(e.getX()),i=Math.trunc(e.getY()),a=Math.trunc(t.getX()),o=Math.trunc(t.getY()),c=Math.abs(o-i)>Math.abs(a-r);if(c){var u=r;r=i,i=u,u=a,a=o,o=u}for(var h=Math.abs(a-r),p=Math.abs(o-i),g=-h/2,_=i<o?1:-1,w=r<a?1:-1,A=0,S=this.image.get(c?i:r,c?r:i),D=r,C=i;D!==a;D+=w){var P=this.image.get(c?C:D,c?D:C);if(P!==S&&(A++,S=P),g+=p,g>0){if(C===o)break;C+=_,g-=h}}return A},n})(),I0=(function(){function n(){this.decoder=new dL}return n.prototype.decode=function(e,t){t===void 0&&(t=null);var r,i;if(t!=null&&t.has(Ft.PURE_BARCODE)){var a=n.extractPureBits(e.getBlackMatrix());r=this.decoder.decode(a),i=n.NO_POINTS}else{var o=new pL(e.getBlackMatrix()).detect();r=this.decoder.decode(o.getBits()),i=o.getPoints()}var c=r.getRawBytes(),u=new fr(r.getText(),c,8*c.length,i,Me.DATA_MATRIX,Vt.currentTimeMillis()),h=r.getByteSegments();h!=null&&u.putMetadata(ir.BYTE_SEGMENTS,h);var p=r.getECLevel();return p!=null&&u.putMetadata(ir.ERROR_CORRECTION_LEVEL,p),u},n.prototype.reset=function(){},n.extractPureBits=function(e){var t=e.getTopLeftOnBit(),r=e.getBottomRightOnBit();if(t==null||r==null)throw new se;var i=this.moduleSize(t,e),a=t[1],o=r[1],c=t[0],u=r[0],h=(u-c+1)/i,p=(o-a+1)/i;if(h<=0||p<=0)throw new se;var g=i/2;a+=g,c+=g;for(var _=new _a(h,p),w=0;w<p;w++)for(var A=a+w*i,S=0;S<h;S++)e.get(c+S*i,A)&&_.set(S,w);return _},n.moduleSize=function(e,t){for(var r=t.getWidth(),i=e[0],a=e[1];i<r&&t.get(i,a);)i++;if(i===r)throw new se;var o=i-e[0];if(o===0)throw new se;return o},n.NO_POINTS=[],n})(),mL=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})();(function(n){mL(e,n);function e(t){return t===void 0&&(t=500),n.call(this,new I0,t)||this}return e})(zc);var fc;(function(n){n[n.L=0]="L",n[n.M=1]="M",n[n.Q=2]="Q",n[n.H=3]="H"})(fc||(fc={}));var gL=(function(){function n(e,t,r){this.value=e,this.stringValue=t,this.bits=r,n.FOR_BITS.set(r,this),n.FOR_VALUE.set(e,this)}return n.prototype.getValue=function(){return this.value},n.prototype.getBits=function(){return this.bits},n.fromString=function(e){switch(e){case"L":return n.L;case"M":return n.M;case"Q":return n.Q;case"H":return n.H;default:throw new cn(e+"not available")}},n.prototype.toString=function(){return this.stringValue},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.value===t.value},n.forBits=function(e){if(e<0||e>=n.FOR_BITS.size)throw new Pe;return n.FOR_BITS.get(e)},n.FOR_BITS=new Map,n.FOR_VALUE=new Map,n.L=new n(fc.L,"L",1),n.M=new n(fc.M,"M",0),n.Q=new n(fc.Q,"Q",3),n.H=new n(fc.H,"H",2),n})(),vL=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},R3=(function(){function n(e){this.errorCorrectionLevel=gL.forBits(e>>3&3),this.dataMask=e&7}return n.numBitsDiffering=function(e,t){return et.bitCount(e^t)},n.decodeFormatInformation=function(e,t){var r=n.doDecodeFormatInformation(e,t);return r!==null?r:n.doDecodeFormatInformation(e^n.FORMAT_INFO_MASK_QR,t^n.FORMAT_INFO_MASK_QR)},n.doDecodeFormatInformation=function(e,t){var r,i,a=Number.MAX_SAFE_INTEGER,o=0;try{for(var c=vL(n.FORMAT_INFO_DECODE_LOOKUP),u=c.next();!u.done;u=c.next()){var h=u.value,p=h[0];if(p===e||p===t)return new n(h[1]);var g=n.numBitsDiffering(e,p);g<a&&(o=h[1],a=g),e!==t&&(g=n.numBitsDiffering(t,p),g<a&&(o=h[1],a=g))}}catch(_){r={error:_}}finally{try{u&&!u.done&&(i=c.return)&&i.call(c)}finally{if(r)throw r.error}}return a<=3?new n(o):null},n.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},n.prototype.getDataMask=function(){return this.dataMask},n.prototype.hashCode=function(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.errorCorrectionLevel===t.errorCorrectionLevel&&this.dataMask===t.dataMask},n.FORMAT_INFO_MASK_QR=21522,n.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])],n})(),yL=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Z=(function(){function n(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this.ecCodewordsPerBlock=e,this.ecBlocks=t}return n.prototype.getECCodewordsPerBlock=function(){return this.ecCodewordsPerBlock},n.prototype.getNumBlocks=function(){var e,t,r=0,i=this.ecBlocks;try{for(var a=yL(i),o=a.next();!o.done;o=a.next()){var c=o.value;r+=c.getCount()}}catch(u){e={error:u}}finally{try{o&&!o.done&&(t=a.return)&&t.call(a)}finally{if(e)throw e.error}}return r},n.prototype.getTotalECCodewords=function(){return this.ecCodewordsPerBlock*this.getNumBlocks()},n.prototype.getECBlocks=function(){return this.ecBlocks},n})(),z=(function(){function n(e,t){this.count=e,this.dataCodewords=t}return n.prototype.getCount=function(){return this.count},n.prototype.getDataCodewords=function(){return this.dataCodewords},n})(),_L=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Qo=(function(){function n(e,t){for(var r,i,a=[],o=2;o<arguments.length;o++)a[o-2]=arguments[o];this.versionNumber=e,this.alignmentPatternCenters=t,this.ecBlocks=a;var c=0,u=a[0].getECCodewordsPerBlock(),h=a[0].getECBlocks();try{for(var p=_L(h),g=p.next();!g.done;g=p.next()){var _=g.value;c+=_.getCount()*(_.getDataCodewords()+u)}}catch(w){r={error:w}}finally{try{g&&!g.done&&(i=p.return)&&i.call(p)}finally{if(r)throw r.error}}this.totalCodewords=c}return n.prototype.getVersionNumber=function(){return this.versionNumber},n.prototype.getAlignmentPatternCenters=function(){return this.alignmentPatternCenters},n.prototype.getTotalCodewords=function(){return this.totalCodewords},n.prototype.getDimensionForVersion=function(){return 17+4*this.versionNumber},n.prototype.getECBlocksForLevel=function(e){return this.ecBlocks[e.getValue()]},n.getProvisionalVersionForDimension=function(e){if(e%4!==1)throw new ye;try{return this.getVersionForNumber((e-17)/4)}catch{throw new ye}},n.getVersionForNumber=function(e){if(e<1||e>40)throw new Pe;return n.VERSIONS[e-1]},n.decodeVersionInformation=function(e){for(var t=Number.MAX_SAFE_INTEGER,r=0,i=0;i<n.VERSION_DECODE_INFO.length;i++){var a=n.VERSION_DECODE_INFO[i];if(a===e)return n.getVersionForNumber(i+7);var o=R3.numBitsDiffering(e,a);o<t&&(r=i+7,t=o)}return t<=3?n.getVersionForNumber(r):null},n.prototype.buildFunctionPattern=function(){var e=this.getDimensionForVersion(),t=new _a(e);t.setRegion(0,0,9,9),t.setRegion(e-8,0,8,9),t.setRegion(0,e-8,9,8);for(var r=this.alignmentPatternCenters.length,i=0;i<r;i++)for(var a=this.alignmentPatternCenters[i]-2,o=0;o<r;o++)i===0&&(o===0||o===r-1)||i===r-1&&o===0||t.setRegion(this.alignmentPatternCenters[o]-2,a,5,5);return t.setRegion(6,9,1,e-17),t.setRegion(9,6,e-17,1),this.versionNumber>6&&(t.setRegion(e-11,0,3,6),t.setRegion(0,e-11,6,3)),t},n.prototype.toString=function(){return""+this.versionNumber},n.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),n.VERSIONS=[new n(1,new Int32Array(0),new Z(7,new z(1,19)),new Z(10,new z(1,16)),new Z(13,new z(1,13)),new Z(17,new z(1,9))),new n(2,Int32Array.from([6,18]),new Z(10,new z(1,34)),new Z(16,new z(1,28)),new Z(22,new z(1,22)),new Z(28,new z(1,16))),new n(3,Int32Array.from([6,22]),new Z(15,new z(1,55)),new Z(26,new z(1,44)),new Z(18,new z(2,17)),new Z(22,new z(2,13))),new n(4,Int32Array.from([6,26]),new Z(20,new z(1,80)),new Z(18,new z(2,32)),new Z(26,new z(2,24)),new Z(16,new z(4,9))),new n(5,Int32Array.from([6,30]),new Z(26,new z(1,108)),new Z(24,new z(2,43)),new Z(18,new z(2,15),new z(2,16)),new Z(22,new z(2,11),new z(2,12))),new n(6,Int32Array.from([6,34]),new Z(18,new z(2,68)),new Z(16,new z(4,27)),new Z(24,new z(4,19)),new Z(28,new z(4,15))),new n(7,Int32Array.from([6,22,38]),new Z(20,new z(2,78)),new Z(18,new z(4,31)),new Z(18,new z(2,14),new z(4,15)),new Z(26,new z(4,13),new z(1,14))),new n(8,Int32Array.from([6,24,42]),new Z(24,new z(2,97)),new Z(22,new z(2,38),new z(2,39)),new Z(22,new z(4,18),new z(2,19)),new Z(26,new z(4,14),new z(2,15))),new n(9,Int32Array.from([6,26,46]),new Z(30,new z(2,116)),new Z(22,new z(3,36),new z(2,37)),new Z(20,new z(4,16),new z(4,17)),new Z(24,new z(4,12),new z(4,13))),new n(10,Int32Array.from([6,28,50]),new Z(18,new z(2,68),new z(2,69)),new Z(26,new z(4,43),new z(1,44)),new Z(24,new z(6,19),new z(2,20)),new Z(28,new z(6,15),new z(2,16))),new n(11,Int32Array.from([6,30,54]),new Z(20,new z(4,81)),new Z(30,new z(1,50),new z(4,51)),new Z(28,new z(4,22),new z(4,23)),new Z(24,new z(3,12),new z(8,13))),new n(12,Int32Array.from([6,32,58]),new Z(24,new z(2,92),new z(2,93)),new Z(22,new z(6,36),new z(2,37)),new Z(26,new z(4,20),new z(6,21)),new Z(28,new z(7,14),new z(4,15))),new n(13,Int32Array.from([6,34,62]),new Z(26,new z(4,107)),new Z(22,new z(8,37),new z(1,38)),new Z(24,new z(8,20),new z(4,21)),new Z(22,new z(12,11),new z(4,12))),new n(14,Int32Array.from([6,26,46,66]),new Z(30,new z(3,115),new z(1,116)),new Z(24,new z(4,40),new z(5,41)),new Z(20,new z(11,16),new z(5,17)),new Z(24,new z(11,12),new z(5,13))),new n(15,Int32Array.from([6,26,48,70]),new Z(22,new z(5,87),new z(1,88)),new Z(24,new z(5,41),new z(5,42)),new Z(30,new z(5,24),new z(7,25)),new Z(24,new z(11,12),new z(7,13))),new n(16,Int32Array.from([6,26,50,74]),new Z(24,new z(5,98),new z(1,99)),new Z(28,new z(7,45),new z(3,46)),new Z(24,new z(15,19),new z(2,20)),new Z(30,new z(3,15),new z(13,16))),new n(17,Int32Array.from([6,30,54,78]),new Z(28,new z(1,107),new z(5,108)),new Z(28,new z(10,46),new z(1,47)),new Z(28,new z(1,22),new z(15,23)),new Z(28,new z(2,14),new z(17,15))),new n(18,Int32Array.from([6,30,56,82]),new Z(30,new z(5,120),new z(1,121)),new Z(26,new z(9,43),new z(4,44)),new Z(28,new z(17,22),new z(1,23)),new Z(28,new z(2,14),new z(19,15))),new n(19,Int32Array.from([6,30,58,86]),new Z(28,new z(3,113),new z(4,114)),new Z(26,new z(3,44),new z(11,45)),new Z(26,new z(17,21),new z(4,22)),new Z(26,new z(9,13),new z(16,14))),new n(20,Int32Array.from([6,34,62,90]),new Z(28,new z(3,107),new z(5,108)),new Z(26,new z(3,41),new z(13,42)),new Z(30,new z(15,24),new z(5,25)),new Z(28,new z(15,15),new z(10,16))),new n(21,Int32Array.from([6,28,50,72,94]),new Z(28,new z(4,116),new z(4,117)),new Z(26,new z(17,42)),new Z(28,new z(17,22),new z(6,23)),new Z(30,new z(19,16),new z(6,17))),new n(22,Int32Array.from([6,26,50,74,98]),new Z(28,new z(2,111),new z(7,112)),new Z(28,new z(17,46)),new Z(30,new z(7,24),new z(16,25)),new Z(24,new z(34,13))),new n(23,Int32Array.from([6,30,54,78,102]),new Z(30,new z(4,121),new z(5,122)),new Z(28,new z(4,47),new z(14,48)),new Z(30,new z(11,24),new z(14,25)),new Z(30,new z(16,15),new z(14,16))),new n(24,Int32Array.from([6,28,54,80,106]),new Z(30,new z(6,117),new z(4,118)),new Z(28,new z(6,45),new z(14,46)),new Z(30,new z(11,24),new z(16,25)),new Z(30,new z(30,16),new z(2,17))),new n(25,Int32Array.from([6,32,58,84,110]),new Z(26,new z(8,106),new z(4,107)),new Z(28,new z(8,47),new z(13,48)),new Z(30,new z(7,24),new z(22,25)),new Z(30,new z(22,15),new z(13,16))),new n(26,Int32Array.from([6,30,58,86,114]),new Z(28,new z(10,114),new z(2,115)),new Z(28,new z(19,46),new z(4,47)),new Z(28,new z(28,22),new z(6,23)),new Z(30,new z(33,16),new z(4,17))),new n(27,Int32Array.from([6,34,62,90,118]),new Z(30,new z(8,122),new z(4,123)),new Z(28,new z(22,45),new z(3,46)),new Z(30,new z(8,23),new z(26,24)),new Z(30,new z(12,15),new z(28,16))),new n(28,Int32Array.from([6,26,50,74,98,122]),new Z(30,new z(3,117),new z(10,118)),new Z(28,new z(3,45),new z(23,46)),new Z(30,new z(4,24),new z(31,25)),new Z(30,new z(11,15),new z(31,16))),new n(29,Int32Array.from([6,30,54,78,102,126]),new Z(30,new z(7,116),new z(7,117)),new Z(28,new z(21,45),new z(7,46)),new Z(30,new z(1,23),new z(37,24)),new Z(30,new z(19,15),new z(26,16))),new n(30,Int32Array.from([6,26,52,78,104,130]),new Z(30,new z(5,115),new z(10,116)),new Z(28,new z(19,47),new z(10,48)),new Z(30,new z(15,24),new z(25,25)),new Z(30,new z(23,15),new z(25,16))),new n(31,Int32Array.from([6,30,56,82,108,134]),new Z(30,new z(13,115),new z(3,116)),new Z(28,new z(2,46),new z(29,47)),new Z(30,new z(42,24),new z(1,25)),new Z(30,new z(23,15),new z(28,16))),new n(32,Int32Array.from([6,34,60,86,112,138]),new Z(30,new z(17,115)),new Z(28,new z(10,46),new z(23,47)),new Z(30,new z(10,24),new z(35,25)),new Z(30,new z(19,15),new z(35,16))),new n(33,Int32Array.from([6,30,58,86,114,142]),new Z(30,new z(17,115),new z(1,116)),new Z(28,new z(14,46),new z(21,47)),new Z(30,new z(29,24),new z(19,25)),new Z(30,new z(11,15),new z(46,16))),new n(34,Int32Array.from([6,34,62,90,118,146]),new Z(30,new z(13,115),new z(6,116)),new Z(28,new z(14,46),new z(23,47)),new Z(30,new z(44,24),new z(7,25)),new Z(30,new z(59,16),new z(1,17))),new n(35,Int32Array.from([6,30,54,78,102,126,150]),new Z(30,new z(12,121),new z(7,122)),new Z(28,new z(12,47),new z(26,48)),new Z(30,new z(39,24),new z(14,25)),new Z(30,new z(22,15),new z(41,16))),new n(36,Int32Array.from([6,24,50,76,102,128,154]),new Z(30,new z(6,121),new z(14,122)),new Z(28,new z(6,47),new z(34,48)),new Z(30,new z(46,24),new z(10,25)),new Z(30,new z(2,15),new z(64,16))),new n(37,Int32Array.from([6,28,54,80,106,132,158]),new Z(30,new z(17,122),new z(4,123)),new Z(28,new z(29,46),new z(14,47)),new Z(30,new z(49,24),new z(10,25)),new Z(30,new z(24,15),new z(46,16))),new n(38,Int32Array.from([6,32,58,84,110,136,162]),new Z(30,new z(4,122),new z(18,123)),new Z(28,new z(13,46),new z(32,47)),new Z(30,new z(48,24),new z(14,25)),new Z(30,new z(42,15),new z(32,16))),new n(39,Int32Array.from([6,26,54,82,110,138,166]),new Z(30,new z(20,117),new z(4,118)),new Z(28,new z(40,47),new z(7,48)),new Z(30,new z(43,24),new z(22,25)),new Z(30,new z(10,15),new z(67,16))),new n(40,Int32Array.from([6,30,58,86,114,142,170]),new Z(30,new z(19,118),new z(6,119)),new Z(28,new z(18,47),new z(31,48)),new Z(30,new z(34,24),new z(34,25)),new Z(30,new z(20,15),new z(61,16)))],n})(),Fn;(function(n){n[n.DATA_MASK_000=0]="DATA_MASK_000",n[n.DATA_MASK_001=1]="DATA_MASK_001",n[n.DATA_MASK_010=2]="DATA_MASK_010",n[n.DATA_MASK_011=3]="DATA_MASK_011",n[n.DATA_MASK_100=4]="DATA_MASK_100",n[n.DATA_MASK_101=5]="DATA_MASK_101",n[n.DATA_MASK_110=6]="DATA_MASK_110",n[n.DATA_MASK_111=7]="DATA_MASK_111"})(Fn||(Fn={}));var UA=(function(){function n(e,t){this.value=e,this.isMasked=t}return n.prototype.unmaskBitMatrix=function(e,t){for(var r=0;r<t;r++)for(var i=0;i<t;i++)this.isMasked(r,i)&&e.flip(i,r)},n.values=new Map([[Fn.DATA_MASK_000,new n(Fn.DATA_MASK_000,function(e,t){return(e+t&1)===0})],[Fn.DATA_MASK_001,new n(Fn.DATA_MASK_001,function(e,t){return(e&1)===0})],[Fn.DATA_MASK_010,new n(Fn.DATA_MASK_010,function(e,t){return t%3===0})],[Fn.DATA_MASK_011,new n(Fn.DATA_MASK_011,function(e,t){return(e+t)%3===0})],[Fn.DATA_MASK_100,new n(Fn.DATA_MASK_100,function(e,t){return(Math.floor(e/2)+Math.floor(t/3)&1)===0})],[Fn.DATA_MASK_101,new n(Fn.DATA_MASK_101,function(e,t){return e*t%6===0})],[Fn.DATA_MASK_110,new n(Fn.DATA_MASK_110,function(e,t){return e*t%6<3})],[Fn.DATA_MASK_111,new n(Fn.DATA_MASK_111,function(e,t){return(e+t+e*t%3&1)===0})]]),n})(),xL=(function(){function n(e){var t=e.getHeight();if(t<21||(t&3)!==1)throw new ye;this.bitMatrix=e}return n.prototype.readFormatInformation=function(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;for(var e=0,t=0;t<6;t++)e=this.copyBit(t,8,e);e=this.copyBit(7,8,e),e=this.copyBit(8,8,e),e=this.copyBit(8,7,e);for(var r=5;r>=0;r--)e=this.copyBit(8,r,e);for(var i=this.bitMatrix.getHeight(),a=0,o=i-7,r=i-1;r>=o;r--)a=this.copyBit(8,r,a);for(var t=i-8;t<i;t++)a=this.copyBit(t,8,a);if(this.parsedFormatInfo=R3.decodeFormatInformation(e,a),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new ye},n.prototype.readVersion=function(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;var e=this.bitMatrix.getHeight(),t=Math.floor((e-17)/4);if(t<=6)return Qo.getVersionForNumber(t);for(var r=0,i=e-11,a=5;a>=0;a--)for(var o=e-9;o>=i;o--)r=this.copyBit(o,a,r);var c=Qo.decodeVersionInformation(r);if(c!==null&&c.getDimensionForVersion()===e)return this.parsedVersion=c,c;r=0;for(var o=5;o>=0;o--)for(var a=e-9;a>=i;a--)r=this.copyBit(o,a,r);if(c=Qo.decodeVersionInformation(r),c!==null&&c.getDimensionForVersion()===e)return this.parsedVersion=c,c;throw new ye},n.prototype.copyBit=function(e,t,r){var i=this.isMirror?this.bitMatrix.get(t,e):this.bitMatrix.get(e,t);return i?r<<1|1:r<<1},n.prototype.readCodewords=function(){var e=this.readFormatInformation(),t=this.readVersion(),r=UA.values.get(e.getDataMask()),i=this.bitMatrix.getHeight();r.unmaskBitMatrix(this.bitMatrix,i);for(var a=t.buildFunctionPattern(),o=!0,c=new Uint8Array(t.getTotalCodewords()),u=0,h=0,p=0,g=i-1;g>0;g-=2){g===6&&g--;for(var _=0;_<i;_++)for(var w=o?i-1-_:_,A=0;A<2;A++)a.get(g-A,w)||(p++,h<<=1,this.bitMatrix.get(g-A,w)&&(h|=1),p===8&&(c[u++]=h,p=0,h=0));o=!o}if(u!==t.getTotalCodewords())throw new ye;return c},n.prototype.remask=function(){if(this.parsedFormatInfo!==null){var e=UA.values.get(this.parsedFormatInfo.getDataMask()),t=this.bitMatrix.getHeight();e.unmaskBitMatrix(this.bitMatrix,t)}},n.prototype.setMirror=function(e){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=e},n.prototype.mirror=function(){for(var e=this.bitMatrix,t=0,r=e.getWidth();t<r;t++)for(var i=t+1,a=e.getHeight();i<a;i++)e.get(t,i)!==e.get(i,t)&&(e.flip(i,t),e.flip(t,i))},n})(),zA=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},wL=(function(){function n(e,t){this.numDataCodewords=e,this.codewords=t}return n.getDataBlocks=function(e,t,r){var i,a,o,c;if(e.length!==t.getTotalCodewords())throw new Pe;var u=t.getECBlocksForLevel(r),h=0,p=u.getECBlocks();try{for(var g=zA(p),_=g.next();!_.done;_=g.next()){var w=_.value;h+=w.getCount()}}catch(L){i={error:L}}finally{try{_&&!_.done&&(a=g.return)&&a.call(g)}finally{if(i)throw i.error}}var A=new Array(h),S=0;try{for(var D=zA(p),C=D.next();!C.done;C=D.next())for(var w=C.value,P=0;P<w.getCount();P++){var V=w.getDataCodewords(),H=u.getECCodewordsPerBlock()+V;A[S++]=new n(V,new Uint8Array(H))}}catch(L){o={error:L}}finally{try{C&&!C.done&&(c=D.return)&&c.call(D)}finally{if(o)throw o.error}}for(var X=A[0].codewords.length,F=A.length-1;F>=0;){var I=A[F].codewords.length;if(I===X)break;F--}F++;for(var b=X-u.getECCodewordsPerBlock(),N=0,P=0;P<b;P++)for(var R=0;R<S;R++)A[R].codewords[P]=e[N++];for(var R=F;R<S;R++)A[R].codewords[b]=e[N++];for(var M=A[0].codewords.length,P=b;P<M;P++)for(var R=0;R<S;R++){var B=R<F?P:P+1;A[R].codewords[B]=e[N++]}return A},n.prototype.getNumDataCodewords=function(){return this.numDataCodewords},n.prototype.getCodewords=function(){return this.codewords},n})(),ai;(function(n){n[n.TERMINATOR=0]="TERMINATOR",n[n.NUMERIC=1]="NUMERIC",n[n.ALPHANUMERIC=2]="ALPHANUMERIC",n[n.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",n[n.BYTE=4]="BYTE",n[n.ECI=5]="ECI",n[n.KANJI=6]="KANJI",n[n.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",n[n.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",n[n.HANZI=9]="HANZI"})(ai||(ai={}));var qt=(function(){function n(e,t,r,i){this.value=e,this.stringValue=t,this.characterCountBitsForVersions=r,this.bits=i,n.FOR_BITS.set(i,this),n.FOR_VALUE.set(e,this)}return n.forBits=function(e){var t=n.FOR_BITS.get(e);if(t===void 0)throw new Pe;return t},n.prototype.getCharacterCountBits=function(e){var t=e.getVersionNumber(),r;return t<=9?r=0:t<=26?r=1:r=2,this.characterCountBitsForVersions[r]},n.prototype.getValue=function(){return this.value},n.prototype.getBits=function(){return this.bits},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.value===t.value},n.prototype.toString=function(){return this.stringValue},n.FOR_BITS=new Map,n.FOR_VALUE=new Map,n.TERMINATOR=new n(ai.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),n.NUMERIC=new n(ai.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),n.ALPHANUMERIC=new n(ai.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),n.STRUCTURED_APPEND=new n(ai.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),n.BYTE=new n(ai.BYTE,"BYTE",Int32Array.from([8,16,16]),4),n.ECI=new n(ai.ECI,"ECI",Int32Array.from([0,0,0]),7),n.KANJI=new n(ai.KANJI,"KANJI",Int32Array.from([8,10,12]),8),n.FNC1_FIRST_POSITION=new n(ai.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),n.FNC1_SECOND_POSITION=new n(ai.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),n.HANZI=new n(ai.HANZI,"HANZI",Int32Array.from([8,10,12]),13),n})(),EL=(function(){function n(){}return n.decode=function(e,t,r,i){var a=new N3(e),o=new Je,c=new Array,u=-1,h=-1;try{var p=null,g=!1,_=void 0;do{if(a.available()<4)_=qt.TERMINATOR;else{var w=a.readBits(4);_=qt.forBits(w)}switch(_){case qt.TERMINATOR:break;case qt.FNC1_FIRST_POSITION:case qt.FNC1_SECOND_POSITION:g=!0;break;case qt.STRUCTURED_APPEND:if(a.available()<16)throw new ye;u=a.readBits(8),h=a.readBits(8);break;case qt.ECI:var A=n.parseECIValue(a);if(p=Rn.getCharacterSetECIByValue(A),p===null)throw new ye;break;case qt.HANZI:var S=a.readBits(4),D=a.readBits(_.getCharacterCountBits(t));S===n.GB2312_SUBSET&&n.decodeHanziSegment(a,o,D);break;default:var C=a.readBits(_.getCharacterCountBits(t));switch(_){case qt.NUMERIC:n.decodeNumericSegment(a,o,C);break;case qt.ALPHANUMERIC:n.decodeAlphanumericSegment(a,o,C,g);break;case qt.BYTE:n.decodeByteSegment(a,o,C,p,c,i);break;case qt.KANJI:n.decodeKanjiSegment(a,o,C);break;default:throw new ye}break}}while(_!==qt.TERMINATOR)}catch{throw new ye}return new gp(e,o.toString(),c.length===0?null:c,r===null?null:r.toString(),u,h)},n.decodeHanziSegment=function(e,t,r){if(r*13>e.available())throw new ye;for(var i=new Uint8Array(2*r),a=0;r>0;){var o=e.readBits(13),c=o/96<<8&4294967295|o%96;c<959?c+=41377:c+=42657,i[a]=c>>8&255,i[a+1]=c&255,a+=2,r--}try{t.append(ui.decode(i,ut.GB2312))}catch(u){throw new ye(u)}},n.decodeKanjiSegment=function(e,t,r){if(r*13>e.available())throw new ye;for(var i=new Uint8Array(2*r),a=0;r>0;){var o=e.readBits(13),c=o/192<<8&4294967295|o%192;c<7936?c+=33088:c+=49472,i[a]=c>>8,i[a+1]=c,a+=2,r--}try{t.append(ui.decode(i,ut.SHIFT_JIS))}catch(u){throw new ye(u)}},n.decodeByteSegment=function(e,t,r,i,a,o){if(8*r>e.available())throw new ye;for(var c=new Uint8Array(r),u=0;u<r;u++)c[u]=e.readBits(8);var h;i===null?h=ut.guessEncoding(c,o):h=i.getName();try{t.append(ui.decode(c,h))}catch(p){throw new ye(p)}a.push(c)},n.toAlphaNumericChar=function(e){if(e>=n.ALPHANUMERIC_CHARS.length)throw new ye;return n.ALPHANUMERIC_CHARS[e]},n.decodeAlphanumericSegment=function(e,t,r,i){for(var a=t.length();r>1;){if(e.available()<11)throw new ye;var o=e.readBits(11);t.append(n.toAlphaNumericChar(Math.floor(o/45))),t.append(n.toAlphaNumericChar(o%45)),r-=2}if(r===1){if(e.available()<6)throw new ye;t.append(n.toAlphaNumericChar(e.readBits(6)))}if(i)for(var c=a;c<t.length();c++)t.charAt(c)==="%"&&(c<t.length()-1&&t.charAt(c+1)==="%"?t.deleteCharAt(c+1):t.setCharAt(c,""))},n.decodeNumericSegment=function(e,t,r){for(;r>=3;){if(e.available()<10)throw new ye;var i=e.readBits(10);if(i>=1e3)throw new ye;t.append(n.toAlphaNumericChar(Math.floor(i/100))),t.append(n.toAlphaNumericChar(Math.floor(i/10)%10)),t.append(n.toAlphaNumericChar(i%10)),r-=3}if(r===2){if(e.available()<7)throw new ye;var a=e.readBits(7);if(a>=100)throw new ye;t.append(n.toAlphaNumericChar(Math.floor(a/10))),t.append(n.toAlphaNumericChar(a%10))}else if(r===1){if(e.available()<4)throw new ye;var o=e.readBits(4);if(o>=10)throw new ye;t.append(n.toAlphaNumericChar(o))}},n.parseECIValue=function(e){var t=e.readBits(8);if((t&128)===0)return t&127;if((t&192)===128){var r=e.readBits(8);return(t&63)<<8&4294967295|r}if((t&224)===192){var i=e.readBits(16);return(t&31)<<16&4294967295|i}throw new ye},n.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",n.GB2312_SUBSET=1,n})(),O3=(function(){function n(e){this.mirrored=e}return n.prototype.isMirrored=function(){return this.mirrored},n.prototype.applyMirroredCorrection=function(e){if(!(!this.mirrored||e===null||e.length<3)){var t=e[0];e[0]=e[2],e[2]=t}},n})(),HA=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},AL=(function(){function n(){this.rsDecoder=new vp(Tr.QR_CODE_FIELD_256)}return n.prototype.decodeBooleanArray=function(e,t){return this.decodeBitMatrix(_a.parseFromBooleanArray(e),t)},n.prototype.decodeBitMatrix=function(e,t){var r=new xL(e),i=null;try{return this.decodeBitMatrixParser(r,t)}catch(o){i=o}try{r.remask(),r.setMirror(!0),r.readVersion(),r.readFormatInformation(),r.mirror();var a=this.decodeBitMatrixParser(r,t);return a.setOther(new O3(!0)),a}catch(o){throw i!==null?i:o}},n.prototype.decodeBitMatrixParser=function(e,t){var r,i,a,o,c=e.readVersion(),u=e.readFormatInformation().getErrorCorrectionLevel(),h=e.readCodewords(),p=wL.getDataBlocks(h,c,u),g=0;try{for(var _=HA(p),w=_.next();!w.done;w=_.next()){var A=w.value;g+=A.getNumDataCodewords()}}catch(F){r={error:F}}finally{try{w&&!w.done&&(i=_.return)&&i.call(_)}finally{if(r)throw r.error}}var S=new Uint8Array(g),D=0;try{for(var C=HA(p),P=C.next();!P.done;P=C.next()){var A=P.value,V=A.getCodewords(),H=A.getNumDataCodewords();this.correctErrors(V,H);for(var X=0;X<H;X++)S[D++]=V[X]}}catch(F){a={error:F}}finally{try{P&&!P.done&&(o=C.return)&&o.call(C)}finally{if(a)throw a.error}}return EL.decode(S,c,u,t)},n.prototype.correctErrors=function(e,t){var r=new Int32Array(e);try{this.rsDecoder.decode(r,e.length-t)}catch{throw new An}for(var i=0;i<t;i++)e[i]=r[i]},n})(),bL=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),SL=(function(n){bL(e,n);function e(t,r,i){var a=n.call(this,t,r)||this;return a.estimatedModuleSize=i,a}return e.prototype.aboutEquals=function(t,r,i){if(Math.abs(r-this.getY())<=t&&Math.abs(i-this.getX())<=t){var a=Math.abs(t-this.estimatedModuleSize);return a<=1||a<=this.estimatedModuleSize}return!1},e.prototype.combineEstimate=function(t,r,i){var a=(this.getX()+r)/2,o=(this.getY()+t)/2,c=(this.estimatedModuleSize+i)/2;return new e(a,o,c)},e})(Te),CL=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},TL=(function(){function n(e,t,r,i,a,o,c){this.image=e,this.startX=t,this.startY=r,this.width=i,this.height=a,this.moduleSize=o,this.resultPointCallback=c,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}return n.prototype.find=function(){for(var e=this.startX,t=this.height,r=this.width,i=e+r,a=this.startY+t/2,o=new Int32Array(3),c=this.image,u=0;u<t;u++){var h=a+((u&1)===0?Math.floor((u+1)/2):-Math.floor((u+1)/2));o[0]=0,o[1]=0,o[2]=0;for(var p=e;p<i&&!c.get(p,h);)p++;for(var g=0;p<i;){if(c.get(p,h))if(g===1)o[1]++;else if(g===2){if(this.foundPatternCross(o)){var _=this.handlePossibleCenter(o,h,p);if(_!==null)return _}o[0]=o[2],o[1]=1,o[2]=0,g=1}else o[++g]++;else g===1&&g++,o[g]++;p++}if(this.foundPatternCross(o)){var _=this.handlePossibleCenter(o,h,i);if(_!==null)return _}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new se},n.centerFromEnd=function(e,t){return t-e[2]-e[1]/2},n.prototype.foundPatternCross=function(e){for(var t=this.moduleSize,r=t/2,i=0;i<3;i++)if(Math.abs(t-e[i])>=r)return!1;return!0},n.prototype.crossCheckVertical=function(e,t,r,i){var a=this.image,o=a.getHeight(),c=this.crossCheckStateCount;c[0]=0,c[1]=0,c[2]=0;for(var u=e;u>=0&&a.get(t,u)&&c[1]<=r;)c[1]++,u--;if(u<0||c[1]>r)return NaN;for(;u>=0&&!a.get(t,u)&&c[0]<=r;)c[0]++,u--;if(c[0]>r)return NaN;for(u=e+1;u<o&&a.get(t,u)&&c[1]<=r;)c[1]++,u++;if(u===o||c[1]>r)return NaN;for(;u<o&&!a.get(t,u)&&c[2]<=r;)c[2]++,u++;if(c[2]>r)return NaN;var h=c[0]+c[1]+c[2];return 5*Math.abs(h-i)>=2*i?NaN:this.foundPatternCross(c)?n.centerFromEnd(c,u):NaN},n.prototype.handlePossibleCenter=function(e,t,r){var i,a,o=e[0]+e[1]+e[2],c=n.centerFromEnd(e,r),u=this.crossCheckVertical(t,c,2*e[1],o);if(!isNaN(u)){var h=(e[0]+e[1]+e[2])/3;try{for(var p=CL(this.possibleCenters),g=p.next();!g.done;g=p.next()){var _=g.value;if(_.aboutEquals(h,u,c))return _.combineEstimate(u,c,h)}}catch(A){i={error:A}}finally{try{g&&!g.done&&(a=p.return)&&a.call(p)}finally{if(i)throw i.error}}var w=new SL(c,u,h);this.possibleCenters.push(w),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(w)}return null},n})(),IL=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),NL=(function(n){IL(e,n);function e(t,r,i,a){var o=n.call(this,t,r)||this;return o.estimatedModuleSize=i,o.count=a,a===void 0&&(o.count=1),o}return e.prototype.getEstimatedModuleSize=function(){return this.estimatedModuleSize},e.prototype.getCount=function(){return this.count},e.prototype.aboutEquals=function(t,r,i){if(Math.abs(r-this.getY())<=t&&Math.abs(i-this.getX())<=t){var a=Math.abs(t-this.estimatedModuleSize);return a<=1||a<=this.estimatedModuleSize}return!1},e.prototype.combineEstimate=function(t,r,i){var a=this.count+1,o=(this.count*this.getX()+r)/a,c=(this.count*this.getY()+t)/a,u=(this.count*this.estimatedModuleSize+i)/a;return new e(o,c,u,a)},e})(Te),RL=(function(){function n(e){this.bottomLeft=e[0],this.topLeft=e[1],this.topRight=e[2]}return n.prototype.getBottomLeft=function(){return this.bottomLeft},n.prototype.getTopLeft=function(){return this.topLeft},n.prototype.getTopRight=function(){return this.topRight},n})(),$u=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},OL=(function(){function n(e,t){this.image=e,this.resultPointCallback=t,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=t}return n.prototype.getImage=function(){return this.image},n.prototype.getPossibleCenters=function(){return this.possibleCenters},n.prototype.find=function(e){var t=e!=null&&e.get(Ft.TRY_HARDER)!==void 0,r=e!=null&&e.get(Ft.PURE_BARCODE)!==void 0,i=this.image,a=i.getHeight(),o=i.getWidth(),c=Math.floor(3*a/(4*n.MAX_MODULES));(c<n.MIN_SKIP||t)&&(c=n.MIN_SKIP);for(var u=!1,h=new Int32Array(5),p=c-1;p<a&&!u;p+=c){h[0]=0,h[1]=0,h[2]=0,h[3]=0,h[4]=0;for(var g=0,_=0;_<o;_++)if(i.get(_,p))(g&1)===1&&g++,h[g]++;else if((g&1)===0)if(g===4)if(n.foundPatternCross(h)){var w=this.handlePossibleCenter(h,p,_,r);if(w===!0)if(c=2,this.hasSkipped===!0)u=this.haveMultiplyConfirmedCenters();else{var A=this.findRowSkip();A>h[2]&&(p+=A-h[2]-c,_=o-1)}else{h[0]=h[2],h[1]=h[3],h[2]=h[4],h[3]=1,h[4]=0,g=3;continue}g=0,h[0]=0,h[1]=0,h[2]=0,h[3]=0,h[4]=0}else h[0]=h[2],h[1]=h[3],h[2]=h[4],h[3]=1,h[4]=0,g=3;else h[++g]++;else h[g]++;if(n.foundPatternCross(h)){var w=this.handlePossibleCenter(h,p,o,r);w===!0&&(c=h[0],this.hasSkipped&&(u=this.haveMultiplyConfirmedCenters()))}}var S=this.selectBestPatterns();return Te.orderBestPatterns(S),new RL(S)},n.centerFromEnd=function(e,t){return t-e[4]-e[3]-e[2]/2},n.foundPatternCross=function(e){for(var t=0,r=0;r<5;r++){var i=e[r];if(i===0)return!1;t+=i}if(t<7)return!1;var a=t/7,o=a/2;return Math.abs(a-e[0])<o&&Math.abs(a-e[1])<o&&Math.abs(3*a-e[2])<3*o&&Math.abs(a-e[3])<o&&Math.abs(a-e[4])<o},n.prototype.getCrossCheckStateCount=function(){var e=this.crossCheckStateCount;return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e},n.prototype.crossCheckDiagonal=function(e,t,r,i){for(var a=this.getCrossCheckStateCount(),o=0,c=this.image;e>=o&&t>=o&&c.get(t-o,e-o);)a[2]++,o++;if(e<o||t<o)return!1;for(;e>=o&&t>=o&&!c.get(t-o,e-o)&&a[1]<=r;)a[1]++,o++;if(e<o||t<o||a[1]>r)return!1;for(;e>=o&&t>=o&&c.get(t-o,e-o)&&a[0]<=r;)a[0]++,o++;if(a[0]>r)return!1;var u=c.getHeight(),h=c.getWidth();for(o=1;e+o<u&&t+o<h&&c.get(t+o,e+o);)a[2]++,o++;if(e+o>=u||t+o>=h)return!1;for(;e+o<u&&t+o<h&&!c.get(t+o,e+o)&&a[3]<r;)a[3]++,o++;if(e+o>=u||t+o>=h||a[3]>=r)return!1;for(;e+o<u&&t+o<h&&c.get(t+o,e+o)&&a[4]<r;)a[4]++,o++;if(a[4]>=r)return!1;var p=a[0]+a[1]+a[2]+a[3]+a[4];return Math.abs(p-i)<2*i&&n.foundPatternCross(a)},n.prototype.crossCheckVertical=function(e,t,r,i){for(var a=this.image,o=a.getHeight(),c=this.getCrossCheckStateCount(),u=e;u>=0&&a.get(t,u);)c[2]++,u--;if(u<0)return NaN;for(;u>=0&&!a.get(t,u)&&c[1]<=r;)c[1]++,u--;if(u<0||c[1]>r)return NaN;for(;u>=0&&a.get(t,u)&&c[0]<=r;)c[0]++,u--;if(c[0]>r)return NaN;for(u=e+1;u<o&&a.get(t,u);)c[2]++,u++;if(u===o)return NaN;for(;u<o&&!a.get(t,u)&&c[3]<r;)c[3]++,u++;if(u===o||c[3]>=r)return NaN;for(;u<o&&a.get(t,u)&&c[4]<r;)c[4]++,u++;if(c[4]>=r)return NaN;var h=c[0]+c[1]+c[2]+c[3]+c[4];return 5*Math.abs(h-i)>=2*i?NaN:n.foundPatternCross(c)?n.centerFromEnd(c,u):NaN},n.prototype.crossCheckHorizontal=function(e,t,r,i){for(var a=this.image,o=a.getWidth(),c=this.getCrossCheckStateCount(),u=e;u>=0&&a.get(u,t);)c[2]++,u--;if(u<0)return NaN;for(;u>=0&&!a.get(u,t)&&c[1]<=r;)c[1]++,u--;if(u<0||c[1]>r)return NaN;for(;u>=0&&a.get(u,t)&&c[0]<=r;)c[0]++,u--;if(c[0]>r)return NaN;for(u=e+1;u<o&&a.get(u,t);)c[2]++,u++;if(u===o)return NaN;for(;u<o&&!a.get(u,t)&&c[3]<r;)c[3]++,u++;if(u===o||c[3]>=r)return NaN;for(;u<o&&a.get(u,t)&&c[4]<r;)c[4]++,u++;if(c[4]>=r)return NaN;var h=c[0]+c[1]+c[2]+c[3]+c[4];return 5*Math.abs(h-i)>=i?NaN:n.foundPatternCross(c)?n.centerFromEnd(c,u):NaN},n.prototype.handlePossibleCenter=function(e,t,r,i){var a=e[0]+e[1]+e[2]+e[3]+e[4],o=n.centerFromEnd(e,r),c=this.crossCheckVertical(t,Math.floor(o),e[2],a);if(!isNaN(c)&&(o=this.crossCheckHorizontal(Math.floor(o),Math.floor(c),e[2],a),!isNaN(o)&&(!i||this.crossCheckDiagonal(Math.floor(c),Math.floor(o),e[2],a)))){for(var u=a/7,h=!1,p=this.possibleCenters,g=0,_=p.length;g<_;g++){var w=p[g];if(w.aboutEquals(u,c,o)){p[g]=w.combineEstimate(c,o,u),h=!0;break}}if(!h){var A=new NL(o,c,u);p.push(A),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(A)}return!0}return!1},n.prototype.findRowSkip=function(){var e,t,r=this.possibleCenters.length;if(r<=1)return 0;var i=null;try{for(var a=$u(this.possibleCenters),o=a.next();!o.done;o=a.next()){var c=o.value;if(c.getCount()>=n.CENTER_QUORUM)if(i==null)i=c;else return this.hasSkipped=!0,Math.floor((Math.abs(i.getX()-c.getX())-Math.abs(i.getY()-c.getY()))/2)}}catch(u){e={error:u}}finally{try{o&&!o.done&&(t=a.return)&&t.call(a)}finally{if(e)throw e.error}}return 0},n.prototype.haveMultiplyConfirmedCenters=function(){var e,t,r,i,a=0,o=0,c=this.possibleCenters.length;try{for(var u=$u(this.possibleCenters),h=u.next();!h.done;h=u.next()){var p=h.value;p.getCount()>=n.CENTER_QUORUM&&(a++,o+=p.getEstimatedModuleSize())}}catch(S){e={error:S}}finally{try{h&&!h.done&&(t=u.return)&&t.call(u)}finally{if(e)throw e.error}}if(a<3)return!1;var g=o/c,_=0;try{for(var w=$u(this.possibleCenters),A=w.next();!A.done;A=w.next()){var p=A.value;_+=Math.abs(p.getEstimatedModuleSize()-g)}}catch(S){r={error:S}}finally{try{A&&!A.done&&(i=w.return)&&i.call(w)}finally{if(r)throw r.error}}return _<=.05*o},n.prototype.selectBestPatterns=function(){var e,t,r,i,a=this.possibleCenters.length;if(a<3)throw new se;var o=this.possibleCenters,c;if(a>3){var u=0,h=0;try{for(var p=$u(this.possibleCenters),g=p.next();!g.done;g=p.next()){var _=g.value,w=_.getEstimatedModuleSize();u+=w,h+=w*w}}catch(X){e={error:X}}finally{try{g&&!g.done&&(t=p.return)&&t.call(p)}finally{if(e)throw e.error}}c=u/a;var A=Math.sqrt(h/a-c*c);o.sort(function(X,F){var I=Math.abs(F.getEstimatedModuleSize()-c),b=Math.abs(X.getEstimatedModuleSize()-c);return I<b?-1:I>b?1:0});for(var S=Math.max(.2*c,A),D=0;D<o.length&&o.length>3;D++){var C=o[D];Math.abs(C.getEstimatedModuleSize()-c)>S&&(o.splice(D,1),D--)}}if(o.length>3){var u=0;try{for(var P=$u(o),V=P.next();!V.done;V=P.next()){var H=V.value;u+=H.getEstimatedModuleSize()}}catch(F){r={error:F}}finally{try{V&&!V.done&&(i=P.return)&&i.call(P)}finally{if(r)throw r.error}}c=u/o.length,o.sort(function(F,I){if(I.getCount()===F.getCount()){var b=Math.abs(I.getEstimatedModuleSize()-c),N=Math.abs(F.getEstimatedModuleSize()-c);return b<N?1:b>N?-1:0}else return I.getCount()-F.getCount()}),o.splice(3)}return[o[0],o[1],o[2]]},n.CENTER_QUORUM=2,n.MIN_SKIP=3,n.MAX_MODULES=57,n})(),DL=(function(){function n(e){this.image=e}return n.prototype.getImage=function(){return this.image},n.prototype.getResultPointCallback=function(){return this.resultPointCallback},n.prototype.detect=function(e){this.resultPointCallback=e==null?null:e.get(Ft.NEED_RESULT_POINT_CALLBACK);var t=new OL(this.image,this.resultPointCallback),r=t.find(e);return this.processFinderPatternInfo(r)},n.prototype.processFinderPatternInfo=function(e){var t=e.getTopLeft(),r=e.getTopRight(),i=e.getBottomLeft(),a=this.calculateModuleSize(t,r,i);if(a<1)throw new se("No pattern found in proccess finder.");var o=n.computeDimension(t,r,i,a),c=Qo.getProvisionalVersionForDimension(o),u=c.getDimensionForVersion()-7,h=null;if(c.getAlignmentPatternCenters().length>0)for(var p=r.getX()-t.getX()+i.getX(),g=r.getY()-t.getY()+i.getY(),_=1-3/u,w=Math.floor(t.getX()+_*(p-t.getX())),A=Math.floor(t.getY()+_*(g-t.getY())),S=4;S<=16;S<<=1)try{h=this.findAlignmentInRegion(a,w,A,S);break}catch(V){if(!(V instanceof se))throw V}var D=n.createTransform(t,r,i,h,o),C=n.sampleGrid(this.image,D,o),P;return h===null?P=[i,t,r]:P=[i,t,r,h],new Uy(C,P)},n.createTransform=function(e,t,r,i,a){var o=a-3.5,c,u,h,p;return i!==null?(c=i.getX(),u=i.getY(),h=o-3,p=h):(c=t.getX()-e.getX()+r.getX(),u=t.getY()-e.getY()+r.getY(),h=o,p=o),S3.quadrilateralToQuadrilateral(3.5,3.5,o,3.5,h,p,3.5,o,e.getX(),e.getY(),t.getX(),t.getY(),c,u,r.getX(),r.getY())},n.sampleGrid=function(e,t,r){var i=zy.getInstance();return i.sampleGridWithTransform(e,r,r,t)},n.computeDimension=function(e,t,r,i){var a=gt.round(Te.distance(e,t)/i),o=gt.round(Te.distance(e,r)/i),c=Math.floor((a+o)/2)+7;switch(c&3){case 0:c++;break;case 2:c--;break;case 3:throw new se("Dimensions could be not found.")}return c},n.prototype.calculateModuleSize=function(e,t,r){return(this.calculateModuleSizeOneWay(e,t)+this.calculateModuleSizeOneWay(e,r))/2},n.prototype.calculateModuleSizeOneWay=function(e,t){var r=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(e.getX()),Math.floor(e.getY()),Math.floor(t.getX()),Math.floor(t.getY())),i=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(t.getX()),Math.floor(t.getY()),Math.floor(e.getX()),Math.floor(e.getY()));return isNaN(r)?i/7:isNaN(i)?r/7:(r+i)/14},n.prototype.sizeOfBlackWhiteBlackRunBothWays=function(e,t,r,i){var a=this.sizeOfBlackWhiteBlackRun(e,t,r,i),o=1,c=e-(r-e);c<0?(o=e/(e-c),c=0):c>=this.image.getWidth()&&(o=(this.image.getWidth()-1-e)/(c-e),c=this.image.getWidth()-1);var u=Math.floor(t-(i-t)*o);return o=1,u<0?(o=t/(t-u),u=0):u>=this.image.getHeight()&&(o=(this.image.getHeight()-1-t)/(u-t),u=this.image.getHeight()-1),c=Math.floor(e+(c-e)*o),a+=this.sizeOfBlackWhiteBlackRun(e,t,c,u),a-1},n.prototype.sizeOfBlackWhiteBlackRun=function(e,t,r,i){var a=Math.abs(i-t)>Math.abs(r-e);if(a){var o=e;e=t,t=o,o=r,r=i,i=o}for(var c=Math.abs(r-e),u=Math.abs(i-t),h=-c/2,p=e<r?1:-1,g=t<i?1:-1,_=0,w=r+p,A=e,S=t;A!==w;A+=p){var D=a?S:A,C=a?A:S;if(_===1===this.image.get(D,C)){if(_===2)return gt.distance(A,S,e,t);_++}if(h+=u,h>0){if(S===i)break;S+=g,h-=c}}return _===2?gt.distance(r+p,i,e,t):NaN},n.prototype.findAlignmentInRegion=function(e,t,r,i){var a=Math.floor(i*e),o=Math.max(0,t-a),c=Math.min(this.image.getWidth()-1,t+a);if(c-o<e*3)throw new se("Alignment top exceeds estimated module size.");var u=Math.max(0,r-a),h=Math.min(this.image.getHeight()-1,r+a);if(h-u<e*3)throw new se("Alignment bottom exceeds estimated module size.");var p=new TL(this.image,o,u,c-o,h-u,e,this.resultPointCallback);return p.find()},n})(),N0=(function(){function n(){this.decoder=new AL}return n.prototype.getDecoder=function(){return this.decoder},n.prototype.decode=function(e,t){var r,i;if(t!=null&&t.get(Ft.PURE_BARCODE)!==void 0){var a=n.extractPureBits(e.getBlackMatrix());r=this.decoder.decodeBitMatrix(a,t),i=n.NO_POINTS}else{var o=new DL(e.getBlackMatrix()).detect(t);r=this.decoder.decodeBitMatrix(o.getBits(),t),i=o.getPoints()}r.getOther()instanceof O3&&r.getOther().applyMirroredCorrection(i);var c=new fr(r.getText(),r.getRawBytes(),void 0,i,Me.QR_CODE,void 0),u=r.getByteSegments();u!==null&&c.putMetadata(ir.BYTE_SEGMENTS,u);var h=r.getECLevel();return h!==null&&c.putMetadata(ir.ERROR_CORRECTION_LEVEL,h),r.hasStructuredAppend()&&(c.putMetadata(ir.STRUCTURED_APPEND_SEQUENCE,r.getStructuredAppendSequenceNumber()),c.putMetadata(ir.STRUCTURED_APPEND_PARITY,r.getStructuredAppendParity())),c},n.prototype.reset=function(){},n.extractPureBits=function(e){var t=e.getTopLeftOnBit(),r=e.getBottomRightOnBit();if(t===null||r===null)throw new se;var i=this.moduleSize(t,e),a=t[1],o=r[1],c=t[0],u=r[0];if(c>=u||a>=o)throw new se;if(o-a!==u-c&&(u=c+(o-a),u>=e.getWidth()))throw new se;var h=Math.round((u-c+1)/i),p=Math.round((o-a+1)/i);if(h<=0||p<=0)throw new se;if(p!==h)throw new se;var g=Math.floor(i/2);a+=g,c+=g;var _=c+Math.floor((h-1)*i)-u;if(_>0){if(_>g)throw new se;c-=_}var w=a+Math.floor((p-1)*i)-o;if(w>0){if(w>g)throw new se;a-=w}for(var A=new _a(h,p),S=0;S<p;S++)for(var D=a+Math.floor(S*i),C=0;C<h;C++)e.get(c+Math.floor(C*i),D)&&A.set(C,S);return A},n.moduleSize=function(e,t){for(var r=t.getHeight(),i=t.getWidth(),a=e[0],o=e[1],c=!0,u=0;a<i&&o<r;){if(c!==t.get(a,o)){if(++u===5)break;c=!c}a++,o++}if(a===i||o===r)throw new se;return(a-e[0])/7},n.NO_POINTS=new Array,n})(),ML=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},dt=(function(){function n(){}return n.prototype.PDF417Common=function(){},n.getBitCountSum=function(e){return gt.sum(e)},n.toIntArray=function(e){var t,r;if(e==null||!e.length)return n.EMPTY_INT_ARRAY;var i=new Int32Array(e.length),a=0;try{for(var o=ML(e),c=o.next();!c.done;c=o.next()){var u=c.value;i[a++]=u}}catch(h){t={error:h}}finally{try{c&&!c.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}return i},n.getCodeword=function(e){var t=On.binarySearch(n.SYMBOL_TABLE,e&262143);return t<0?-1:(n.CODEWORD_TABLE[t]-1)%n.NUMBER_OF_CODEWORDS},n.NUMBER_OF_CODEWORDS=929,n.MAX_CODEWORDS_IN_BARCODE=n.NUMBER_OF_CODEWORDS-1,n.MIN_ROWS_IN_BARCODE=3,n.MAX_ROWS_IN_BARCODE=90,n.MODULES_IN_CODEWORD=17,n.MODULES_IN_STOP_PATTERN=18,n.BARS_IN_MODULE=8,n.EMPTY_INT_ARRAY=new Int32Array([]),n.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),n.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]),n})(),PL=(function(){function n(e,t){this.bits=e,this.points=t}return n.prototype.getBits=function(){return this.bits},n.prototype.getPoints=function(){return this.points},n})(),kL=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},LL=(function(){function n(){}return n.detectMultiple=function(e,t,r){var i=e.getBlackMatrix(),a=n.detect(r,i);return a.length||(i=i.clone(),i.rotate180(),a=n.detect(r,i)),new PL(i,a)},n.detect=function(e,t){for(var r,i,a=new Array,o=0,c=0,u=!1;o<t.getHeight();){var h=n.findVertices(t,o,c);if(h[0]==null&&h[3]==null){if(!u)break;u=!1,c=0;try{for(var p=(r=void 0,kL(a)),g=p.next();!g.done;g=p.next()){var _=g.value;_[1]!=null&&(o=Math.trunc(Math.max(o,_[1].getY()))),_[3]!=null&&(o=Math.max(o,Math.trunc(_[3].getY())))}}catch(w){r={error:w}}finally{try{g&&!g.done&&(i=p.return)&&i.call(p)}finally{if(r)throw r.error}}o+=n.ROW_STEP;continue}if(u=!0,a.push(h),!e)break;h[2]!=null?(c=Math.trunc(h[2].getX()),o=Math.trunc(h[2].getY())):(c=Math.trunc(h[4].getX()),o=Math.trunc(h[4].getY()))}return a},n.findVertices=function(e,t,r){var i=e.getHeight(),a=e.getWidth(),o=new Array(8);return n.copyToResult(o,n.findRowsWithPattern(e,i,a,t,r,n.START_PATTERN),n.INDEXES_START_PATTERN),o[4]!=null&&(r=Math.trunc(o[4].getX()),t=Math.trunc(o[4].getY())),n.copyToResult(o,n.findRowsWithPattern(e,i,a,t,r,n.STOP_PATTERN),n.INDEXES_STOP_PATTERN),o},n.copyToResult=function(e,t,r){for(var i=0;i<r.length;i++)e[r[i]]=t[i]},n.findRowsWithPattern=function(e,t,r,i,a,o){for(var c=new Array(4),u=!1,h=new Int32Array(o.length);i<t;i+=n.ROW_STEP){var p=n.findGuardPattern(e,a,i,r,!1,o,h);if(p!=null){for(;i>0;){var g=n.findGuardPattern(e,a,--i,r,!1,o,h);if(g!=null)p=g;else{i++;break}}c[0]=new Te(p[0],i),c[1]=new Te(p[1],i),u=!0;break}}var _=i+1;if(u){for(var w=0,g=Int32Array.from([Math.trunc(c[0].getX()),Math.trunc(c[1].getX())]);_<t;_++){var p=n.findGuardPattern(e,g[0],_,r,!1,o,h);if(p!=null&&Math.abs(g[0]-p[0])<n.MAX_PATTERN_DRIFT&&Math.abs(g[1]-p[1])<n.MAX_PATTERN_DRIFT)g=p,w=0;else{if(w>n.SKIPPED_ROW_COUNT_MAX)break;w++}}_-=w+1,c[2]=new Te(g[0],_),c[3]=new Te(g[1],_)}return _-i<n.BARCODE_MIN_HEIGHT&&On.fill(c,null),c},n.findGuardPattern=function(e,t,r,i,a,o,c){On.fillWithin(c,0,c.length,0);for(var u=t,h=0;e.get(u,r)&&u>0&&h++<n.MAX_PIXEL_DRIFT;)u--;for(var p=u,g=0,_=o.length,w=a;p<i;p++){var A=e.get(p,r);if(A!==w)c[g]++;else{if(g===_-1){if(n.patternMatchVariance(c,o,n.MAX_INDIVIDUAL_VARIANCE)<n.MAX_AVG_VARIANCE)return new Int32Array([u,p]);u+=c[0]+c[1],Vt.arraycopy(c,2,c,0,g-1),c[g-1]=0,c[g]=0,g--}else g++;c[g]=1,w=!w}}return g===_-1&&n.patternMatchVariance(c,o,n.MAX_INDIVIDUAL_VARIANCE)<n.MAX_AVG_VARIANCE?new Int32Array([u,p-1]):null},n.patternMatchVariance=function(e,t,r){for(var i=e.length,a=0,o=0,c=0;c<i;c++)a+=e[c],o+=t[c];if(a<o)return 1/0;var u=a/o;r*=u;for(var h=0,p=0;p<i;p++){var g=e[p],_=t[p]*u,w=g>_?g-_:_-g;if(w>r)return 1/0;h+=w}return h/a},n.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),n.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),n.MAX_AVG_VARIANCE=.42,n.MAX_INDIVIDUAL_VARIANCE=.8,n.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),n.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),n.MAX_PIXEL_DRIFT=3,n.MAX_PATTERN_DRIFT=5,n.SKIPPED_ROW_COUNT_MAX=25,n.ROW_STEP=5,n.BARCODE_MIN_HEIGHT=10,n})(),jL=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Yo=(function(){function n(e,t){if(t.length===0)throw new Pe;this.field=e;var r=t.length;if(r>1&&t[0]===0){for(var i=1;i<r&&t[i]===0;)i++;i===r?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(r-i),Vt.arraycopy(t,i,this.coefficients,0,this.coefficients.length))}else this.coefficients=t}return n.prototype.getCoefficients=function(){return this.coefficients},n.prototype.getDegree=function(){return this.coefficients.length-1},n.prototype.isZero=function(){return this.coefficients[0]===0},n.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},n.prototype.evaluateAt=function(e){var t,r;if(e===0)return this.getCoefficient(0);if(e===1){var i=0;try{for(var a=jL(this.coefficients),o=a.next();!o.done;o=a.next()){var c=o.value;i=this.field.add(i,c)}}catch(g){t={error:g}}finally{try{o&&!o.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}return i}for(var u=this.coefficients[0],h=this.coefficients.length,p=1;p<h;p++)u=this.field.add(this.field.multiply(e,u),this.coefficients[p]);return u},n.prototype.add=function(e){if(!this.field.equals(e.field))throw new Pe("ModulusPolys do not have same ModulusGF field");if(this.isZero())return e;if(e.isZero())return this;var t=this.coefficients,r=e.coefficients;if(t.length>r.length){var i=t;t=r,r=i}var a=new Int32Array(r.length),o=r.length-t.length;Vt.arraycopy(r,0,a,0,o);for(var c=o;c<r.length;c++)a[c]=this.field.add(t[c-o],r[c]);return new n(this.field,a)},n.prototype.subtract=function(e){if(!this.field.equals(e.field))throw new Pe("ModulusPolys do not have same ModulusGF field");return e.isZero()?this:this.add(e.negative())},n.prototype.multiply=function(e){return e instanceof n?this.multiplyOther(e):this.multiplyScalar(e)},n.prototype.multiplyOther=function(e){if(!this.field.equals(e.field))throw new Pe("ModulusPolys do not have same ModulusGF field");if(this.isZero()||e.isZero())return new n(this.field,new Int32Array([0]));for(var t=this.coefficients,r=t.length,i=e.coefficients,a=i.length,o=new Int32Array(r+a-1),c=0;c<r;c++)for(var u=t[c],h=0;h<a;h++)o[c+h]=this.field.add(o[c+h],this.field.multiply(u,i[h]));return new n(this.field,o)},n.prototype.negative=function(){for(var e=this.coefficients.length,t=new Int32Array(e),r=0;r<e;r++)t[r]=this.field.subtract(0,this.coefficients[r]);return new n(this.field,t)},n.prototype.multiplyScalar=function(e){if(e===0)return new n(this.field,new Int32Array([0]));if(e===1)return this;for(var t=this.coefficients.length,r=new Int32Array(t),i=0;i<t;i++)r[i]=this.field.multiply(this.coefficients[i],e);return new n(this.field,r)},n.prototype.multiplyByMonomial=function(e,t){if(e<0)throw new Pe;if(t===0)return new n(this.field,new Int32Array([0]));for(var r=this.coefficients.length,i=new Int32Array(r+e),a=0;a<r;a++)i[a]=this.field.multiply(this.coefficients[a],t);return new n(this.field,i)},n.prototype.toString=function(){for(var e=new Je,t=this.getDegree();t>=0;t--){var r=this.getCoefficient(t);r!==0&&(r<0?(e.append(" - "),r=-r):e.length()>0&&e.append(" + "),(t===0||r!==1)&&e.append(r),t!==0&&(t===1?e.append("x"):(e.append("x^"),e.append(t))))}return e.toString()},n})(),BL=(function(){function n(){}return n.prototype.add=function(e,t){return(e+t)%this.modulus},n.prototype.subtract=function(e,t){return(this.modulus+e-t)%this.modulus},n.prototype.exp=function(e){return this.expTable[e]},n.prototype.log=function(e){if(e===0)throw new Pe;return this.logTable[e]},n.prototype.inverse=function(e){if(e===0)throw new b3;return this.expTable[this.modulus-this.logTable[e]-1]},n.prototype.multiply=function(e,t){return e===0||t===0?0:this.expTable[(this.logTable[e]+this.logTable[t])%(this.modulus-1)]},n.prototype.getSize=function(){return this.modulus},n.prototype.equals=function(e){return e===this},n})(),VL=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),FL=(function(n){VL(e,n);function e(t,r){var i=n.call(this)||this;i.modulus=t,i.expTable=new Int32Array(t),i.logTable=new Int32Array(t);for(var a=1,o=0;o<t;o++)i.expTable[o]=a,a=a*r%t;for(var o=0;o<t-1;o++)i.logTable[i.expTable[o]]=o;return i.zero=new Yo(i,new Int32Array([0])),i.one=new Yo(i,new Int32Array([1])),i}return e.prototype.getZero=function(){return this.zero},e.prototype.getOne=function(){return this.one},e.prototype.buildMonomial=function(t,r){if(t<0)throw new Pe;if(r===0)return this.zero;var i=new Int32Array(t+1);return i[0]=r,new Yo(this,i)},e.PDF417_GF=new e(dt.NUMBER_OF_CODEWORDS,3),e})(BL),UL=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},zL=(function(){function n(){this.field=FL.PDF417_GF}return n.prototype.decode=function(e,t,r){for(var i,a,o=new Yo(this.field,e),c=new Int32Array(t),u=!1,h=t;h>0;h--){var p=o.evaluateAt(this.field.exp(h));c[t-h]=p,p!==0&&(u=!0)}if(!u)return 0;var g=this.field.getOne();if(r!=null)try{for(var _=UL(r),w=_.next();!w.done;w=_.next()){var A=w.value,S=this.field.exp(e.length-1-A),D=new Yo(this.field,new Int32Array([this.field.subtract(0,S),1]));g=g.multiply(D)}}catch(b){i={error:b}}finally{try{w&&!w.done&&(a=_.return)&&a.call(_)}finally{if(i)throw i.error}}for(var C=new Yo(this.field,c),P=this.runEuclideanAlgorithm(this.field.buildMonomial(t,1),C,t),V=P[0],H=P[1],X=this.findErrorLocations(V),F=this.findErrorMagnitudes(H,V,X),h=0;h<X.length;h++){var I=e.length-1-this.field.log(X[h]);if(I<0)throw An.getChecksumInstance();e[I]=this.field.subtract(e[I],F[h])}return X.length},n.prototype.runEuclideanAlgorithm=function(e,t,r){if(e.getDegree()<t.getDegree()){var i=e;e=t,t=i}for(var a=e,o=t,c=this.field.getZero(),u=this.field.getOne();o.getDegree()>=Math.round(r/2);){var h=a,p=c;if(a=o,c=u,a.isZero())throw An.getChecksumInstance();o=h;for(var g=this.field.getZero(),_=a.getCoefficient(a.getDegree()),w=this.field.inverse(_);o.getDegree()>=a.getDegree()&&!o.isZero();){var A=o.getDegree()-a.getDegree(),S=this.field.multiply(o.getCoefficient(o.getDegree()),w);g=g.add(this.field.buildMonomial(A,S)),o=o.subtract(a.multiplyByMonomial(A,S))}u=g.multiply(c).subtract(p).negative()}var D=u.getCoefficient(0);if(D===0)throw An.getChecksumInstance();var C=this.field.inverse(D),P=u.multiply(C),V=o.multiply(C);return[P,V]},n.prototype.findErrorLocations=function(e){for(var t=e.getDegree(),r=new Int32Array(t),i=0,a=1;a<this.field.getSize()&&i<t;a++)e.evaluateAt(a)===0&&(r[i]=this.field.inverse(a),i++);if(i!==t)throw An.getChecksumInstance();return r},n.prototype.findErrorMagnitudes=function(e,t,r){for(var i=t.getDegree(),a=new Int32Array(i),o=1;o<=i;o++)a[i-o]=this.field.multiply(o,t.getCoefficient(o));for(var c=new Yo(this.field,a),u=r.length,h=new Int32Array(u),o=0;o<u;o++){var p=this.field.inverse(r[o]),g=this.field.subtract(0,e.evaluateAt(p)),_=this.field.inverse(c.evaluateAt(p));h[o]=this.field.multiply(g,_)}return h},n})(),hv=(function(){function n(e,t,r,i,a){e instanceof n?this.constructor_2(e):this.constructor_1(e,t,r,i,a)}return n.prototype.constructor_1=function(e,t,r,i,a){var o=t==null||r==null,c=i==null||a==null;if(o&&c)throw new se;o?(t=new Te(0,i.getY()),r=new Te(0,a.getY())):c&&(i=new Te(e.getWidth()-1,t.getY()),a=new Te(e.getWidth()-1,r.getY())),this.image=e,this.topLeft=t,this.bottomLeft=r,this.topRight=i,this.bottomRight=a,this.minX=Math.trunc(Math.min(t.getX(),r.getX())),this.maxX=Math.trunc(Math.max(i.getX(),a.getX())),this.minY=Math.trunc(Math.min(t.getY(),i.getY())),this.maxY=Math.trunc(Math.max(r.getY(),a.getY()))},n.prototype.constructor_2=function(e){this.image=e.image,this.topLeft=e.getTopLeft(),this.bottomLeft=e.getBottomLeft(),this.topRight=e.getTopRight(),this.bottomRight=e.getBottomRight(),this.minX=e.getMinX(),this.maxX=e.getMaxX(),this.minY=e.getMinY(),this.maxY=e.getMaxY()},n.merge=function(e,t){return e==null?t:t==null?e:new n(e.image,e.topLeft,e.bottomLeft,t.topRight,t.bottomRight)},n.prototype.addMissingRows=function(e,t,r){var i=this.topLeft,a=this.bottomLeft,o=this.topRight,c=this.bottomRight;if(e>0){var u=r?this.topLeft:this.topRight,h=Math.trunc(u.getY()-e);h<0&&(h=0);var p=new Te(u.getX(),h);r?i=p:o=p}if(t>0){var g=r?this.bottomLeft:this.bottomRight,_=Math.trunc(g.getY()+t);_>=this.image.getHeight()&&(_=this.image.getHeight()-1);var w=new Te(g.getX(),_);r?a=w:c=w}return new n(this.image,i,a,o,c)},n.prototype.getMinX=function(){return this.minX},n.prototype.getMaxX=function(){return this.maxX},n.prototype.getMinY=function(){return this.minY},n.prototype.getMaxY=function(){return this.maxY},n.prototype.getTopLeft=function(){return this.topLeft},n.prototype.getTopRight=function(){return this.topRight},n.prototype.getBottomLeft=function(){return this.bottomLeft},n.prototype.getBottomRight=function(){return this.bottomRight},n})(),HL=(function(){function n(e,t,r,i){this.columnCount=e,this.errorCorrectionLevel=i,this.rowCountUpperPart=t,this.rowCountLowerPart=r,this.rowCount=t+r}return n.prototype.getColumnCount=function(){return this.columnCount},n.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},n.prototype.getRowCount=function(){return this.rowCount},n.prototype.getRowCountUpperPart=function(){return this.rowCountUpperPart},n.prototype.getRowCountLowerPart=function(){return this.rowCountLowerPart},n})(),Gy=(function(){function n(){this.buffer=""}return n.form=function(e,t){var r=-1;function i(o,c,u,h,p,g){if(o==="%%")return"%";if(t[++r]!==void 0){o=h?parseInt(h.substr(1)):void 0;var _=p?parseInt(p.substr(1)):void 0,w;switch(g){case"s":w=t[r];break;case"c":w=t[r][0];break;case"f":w=parseFloat(t[r]).toFixed(o);break;case"p":w=parseFloat(t[r]).toPrecision(o);break;case"e":w=parseFloat(t[r]).toExponential(o);break;case"x":w=parseInt(t[r]).toString(_||16);break;case"d":w=parseFloat(parseInt(t[r],_||10).toPrecision(o)).toFixed(0);break}w=typeof w=="object"?JSON.stringify(w):(+w).toString(_);for(var A=parseInt(u),S=u&&u[0]+""=="0"?"0":" ";w.length<A;)w=c!==void 0?w+S:S+w;return w}}var a=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(a,i)},n.prototype.format=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this.buffer+=n.form(e,t)},n.prototype.toString=function(){return this.buffer},n})(),GL=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},D3=(function(){function n(e){this.boundingBox=new hv(e),this.codewords=new Array(e.getMaxY()-e.getMinY()+1)}return n.prototype.getCodewordNearby=function(e){var t=this.getCodeword(e);if(t!=null)return t;for(var r=1;r<n.MAX_NEARBY_DISTANCE;r++){var i=this.imageRowToCodewordIndex(e)-r;if(i>=0&&(t=this.codewords[i],t!=null)||(i=this.imageRowToCodewordIndex(e)+r,i<this.codewords.length&&(t=this.codewords[i],t!=null)))return t}return null},n.prototype.imageRowToCodewordIndex=function(e){return e-this.boundingBox.getMinY()},n.prototype.setCodeword=function(e,t){this.codewords[this.imageRowToCodewordIndex(e)]=t},n.prototype.getCodeword=function(e){return this.codewords[this.imageRowToCodewordIndex(e)]},n.prototype.getBoundingBox=function(){return this.boundingBox},n.prototype.getCodewords=function(){return this.codewords},n.prototype.toString=function(){var e,t,r=new Gy,i=0;try{for(var a=GL(this.codewords),o=a.next();!o.done;o=a.next()){var c=o.value;if(c==null){r.format("%3d:    |   %n",i++);continue}r.format("%3d: %3d|%3d%n",i++,c.getRowNumber(),c.getValue())}}catch(u){e={error:u}}finally{try{o&&!o.done&&(t=a.return)&&t.call(a)}finally{if(e)throw e.error}}return r.toString()},n.MAX_NEARBY_DISTANCE=5,n})(),qL=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},$L=function(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,a=[],o;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(c){o={error:c}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(o)throw o.error}}return a},af=(function(){function n(){this.values=new Map}return n.prototype.setValue=function(e){e=Math.trunc(e);var t=this.values.get(e);t==null&&(t=0),t++,this.values.set(e,t)},n.prototype.getValue=function(){var e,t,r=-1,i=new Array,a=function(g,_){var w={getKey:function(){return g},getValue:function(){return _}};w.getValue()>r?(r=w.getValue(),i=[],i.push(w.getKey())):w.getValue()===r&&i.push(w.getKey())};try{for(var o=qL(this.values.entries()),c=o.next();!c.done;c=o.next()){var u=$L(c.value,2),h=u[0],p=u[1];a(h,p)}}catch(g){e={error:g}}finally{try{c&&!c.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}return dt.toIntArray(i)},n.prototype.getConfidence=function(e){return this.values.get(e)},n})(),XL=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),$m=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},GA=(function(n){XL(e,n);function e(t,r){var i=n.call(this,t)||this;return i._isLeft=r,i}return e.prototype.setRowNumbers=function(){var t,r;try{for(var i=$m(this.getCodewords()),a=i.next();!a.done;a=i.next()){var o=a.value;o?.setRowNumberAsRowIndicatorColumn()}}catch(c){t={error:c}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}},e.prototype.adjustCompleteIndicatorColumnRowNumbers=function(t){var r=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(r,t);for(var i=this.getBoundingBox(),a=this._isLeft?i.getTopLeft():i.getTopRight(),o=this._isLeft?i.getBottomLeft():i.getBottomRight(),c=this.imageRowToCodewordIndex(Math.trunc(a.getY())),u=this.imageRowToCodewordIndex(Math.trunc(o.getY())),h=-1,p=1,g=0,_=c;_<u;_++)if(r[_]!=null){var w=r[_],A=w.getRowNumber()-h;if(A===0)g++;else if(A===1)p=Math.max(p,g),g=1,h=w.getRowNumber();else if(A<0||w.getRowNumber()>=t.getRowCount()||A>_)r[_]=null;else{var S=void 0;p>2?S=(p-2)*A:S=A;for(var D=S>=_,C=1;C<=S&&!D;C++)D=r[_-C]!=null;D?r[_]=null:(h=w.getRowNumber(),g=1)}}},e.prototype.getRowHeights=function(){var t,r,i=this.getBarcodeMetadata();if(i==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(i);var a=new Int32Array(i.getRowCount());try{for(var o=$m(this.getCodewords()),c=o.next();!c.done;c=o.next()){var u=c.value;if(u!=null){var h=u.getRowNumber();if(h>=a.length)continue;a[h]++}}}catch(p){t={error:p}}finally{try{c&&!c.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}return a},e.prototype.adjustIncompleteIndicatorColumnRowNumbers=function(t){for(var r=this.getBoundingBox(),i=this._isLeft?r.getTopLeft():r.getTopRight(),a=this._isLeft?r.getBottomLeft():r.getBottomRight(),o=this.imageRowToCodewordIndex(Math.trunc(i.getY())),c=this.imageRowToCodewordIndex(Math.trunc(a.getY())),u=this.getCodewords(),h=-1,p=o;p<c;p++)if(u[p]!=null){var g=u[p];g.setRowNumberAsRowIndicatorColumn();var _=g.getRowNumber()-h;_===0||(_===1?h=g.getRowNumber():g.getRowNumber()>=t.getRowCount()?u[p]=null:h=g.getRowNumber())}},e.prototype.getBarcodeMetadata=function(){var t,r,i=this.getCodewords(),a=new af,o=new af,c=new af,u=new af;try{for(var h=$m(i),p=h.next();!p.done;p=h.next()){var g=p.value;if(g!=null){g.setRowNumberAsRowIndicatorColumn();var _=g.getValue()%30,w=g.getRowNumber();switch(this._isLeft||(w+=2),w%3){case 0:o.setValue(_*3+1);break;case 1:u.setValue(_/3),c.setValue(_%3);break;case 2:a.setValue(_+1);break}}}}catch(S){t={error:S}}finally{try{p&&!p.done&&(r=h.return)&&r.call(h)}finally{if(t)throw t.error}}if(a.getValue().length===0||o.getValue().length===0||c.getValue().length===0||u.getValue().length===0||a.getValue()[0]<1||o.getValue()[0]+c.getValue()[0]<dt.MIN_ROWS_IN_BARCODE||o.getValue()[0]+c.getValue()[0]>dt.MAX_ROWS_IN_BARCODE)return null;var A=new HL(a.getValue()[0],o.getValue()[0],c.getValue()[0],u.getValue()[0]);return this.removeIncorrectCodewords(i,A),A},e.prototype.removeIncorrectCodewords=function(t,r){for(var i=0;i<t.length;i++){var a=t[i];if(t[i]!=null){var o=a.getValue()%30,c=a.getRowNumber();if(c>r.getRowCount()){t[i]=null;continue}switch(this._isLeft||(c+=2),c%3){case 0:o*3+1!==r.getRowCountUpperPart()&&(t[i]=null);break;case 1:(Math.trunc(o/3)!==r.getErrorCorrectionLevel()||o%3!==r.getRowCountLowerPart())&&(t[i]=null);break;case 2:o+1!==r.getColumnCount()&&(t[i]=null);break}}}},e.prototype.isLeft=function(){return this._isLeft},e.prototype.toString=function(){return"IsLeft: "+this._isLeft+`
`+n.prototype.toString.call(this)},e})(D3),YL=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},KL=(function(){function n(e,t){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=e,this.barcodeColumnCount=e.getColumnCount(),this.boundingBox=t,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}return n.prototype.getDetectionResultColumns=function(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);var e=dt.MAX_CODEWORDS_IN_BARCODE,t;do t=e,e=this.adjustRowNumbersAndGetCount();while(e>0&&e<t);return this.detectionResultColumns},n.prototype.adjustIndicatorColumnRowNumbers=function(e){e?.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)},n.prototype.adjustRowNumbersAndGetCount=function(){var e=this.adjustRowNumbersByRow();if(e===0)return 0;for(var t=1;t<this.barcodeColumnCount+1;t++)for(var r=this.detectionResultColumns[t].getCodewords(),i=0;i<r.length;i++)r[i]!=null&&(r[i].hasValidRowNumber()||this.adjustRowNumbers(t,i,r));return e},n.prototype.adjustRowNumbersByRow=function(){this.adjustRowNumbersFromBothRI();var e=this.adjustRowNumbersFromLRI();return e+this.adjustRowNumbersFromRRI()},n.prototype.adjustRowNumbersFromBothRI=function(){if(!(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)){for(var e=this.detectionResultColumns[0].getCodewords(),t=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),r=0;r<e.length;r++)if(e[r]!=null&&t[r]!=null&&e[r].getRowNumber()===t[r].getRowNumber())for(var i=1;i<=this.barcodeColumnCount;i++){var a=this.detectionResultColumns[i].getCodewords()[r];a!=null&&(a.setRowNumber(e[r].getRowNumber()),a.hasValidRowNumber()||(this.detectionResultColumns[i].getCodewords()[r]=null))}}},n.prototype.adjustRowNumbersFromRRI=function(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;for(var e=0,t=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),r=0;r<t.length;r++)if(t[r]!=null)for(var i=t[r].getRowNumber(),a=0,o=this.barcodeColumnCount+1;o>0&&a<this.ADJUST_ROW_NUMBER_SKIP;o--){var c=this.detectionResultColumns[o].getCodewords()[r];c!=null&&(a=n.adjustRowNumberIfValid(i,a,c),c.hasValidRowNumber()||e++)}return e},n.prototype.adjustRowNumbersFromLRI=function(){if(this.detectionResultColumns[0]==null)return 0;for(var e=0,t=this.detectionResultColumns[0].getCodewords(),r=0;r<t.length;r++)if(t[r]!=null)for(var i=t[r].getRowNumber(),a=0,o=1;o<this.barcodeColumnCount+1&&a<this.ADJUST_ROW_NUMBER_SKIP;o++){var c=this.detectionResultColumns[o].getCodewords()[r];c!=null&&(a=n.adjustRowNumberIfValid(i,a,c),c.hasValidRowNumber()||e++)}return e},n.adjustRowNumberIfValid=function(e,t,r){return r==null||r.hasValidRowNumber()||(r.isValidRowNumber(e)?(r.setRowNumber(e),t=0):++t),t},n.prototype.adjustRowNumbers=function(e,t,r){var i,a;if(this.detectionResultColumns[e-1]!=null){var o=r[t],c=this.detectionResultColumns[e-1].getCodewords(),u=c;this.detectionResultColumns[e+1]!=null&&(u=this.detectionResultColumns[e+1].getCodewords());var h=new Array(14);h[2]=c[t],h[3]=u[t],t>0&&(h[0]=r[t-1],h[4]=c[t-1],h[5]=u[t-1]),t>1&&(h[8]=r[t-2],h[10]=c[t-2],h[11]=u[t-2]),t<r.length-1&&(h[1]=r[t+1],h[6]=c[t+1],h[7]=u[t+1]),t<r.length-2&&(h[9]=r[t+2],h[12]=c[t+2],h[13]=u[t+2]);try{for(var p=YL(h),g=p.next();!g.done;g=p.next()){var _=g.value;if(n.adjustRowNumber(o,_))return}}catch(w){i={error:w}}finally{try{g&&!g.done&&(a=p.return)&&a.call(p)}finally{if(i)throw i.error}}}},n.adjustRowNumber=function(e,t){return t==null?!1:t.hasValidRowNumber()&&t.getBucket()===e.getBucket()?(e.setRowNumber(t.getRowNumber()),!0):!1},n.prototype.getBarcodeColumnCount=function(){return this.barcodeColumnCount},n.prototype.getBarcodeRowCount=function(){return this.barcodeMetadata.getRowCount()},n.prototype.getBarcodeECLevel=function(){return this.barcodeMetadata.getErrorCorrectionLevel()},n.prototype.setBoundingBox=function(e){this.boundingBox=e},n.prototype.getBoundingBox=function(){return this.boundingBox},n.prototype.setDetectionResultColumn=function(e,t){this.detectionResultColumns[e]=t},n.prototype.getDetectionResultColumn=function(e){return this.detectionResultColumns[e]},n.prototype.toString=function(){var e=this.detectionResultColumns[0];e==null&&(e=this.detectionResultColumns[this.barcodeColumnCount+1]);for(var t=new Gy,r=0;r<e.getCodewords().length;r++){t.format("CW %3d:",r);for(var i=0;i<this.barcodeColumnCount+2;i++){if(this.detectionResultColumns[i]==null){t.format("    |   ");continue}var a=this.detectionResultColumns[i].getCodewords()[r];if(a==null){t.format("    |   ");continue}t.format(" %3d|%3d",a.getRowNumber(),a.getValue())}t.format("%n")}return t.toString()},n})(),WL=(function(){function n(e,t,r,i){this.rowNumber=n.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(e),this.endX=Math.trunc(t),this.bucket=Math.trunc(r),this.value=Math.trunc(i)}return n.prototype.hasValidRowNumber=function(){return this.isValidRowNumber(this.rowNumber)},n.prototype.isValidRowNumber=function(e){return e!==n.BARCODE_ROW_UNKNOWN&&this.bucket===e%3*3},n.prototype.setRowNumberAsRowIndicatorColumn=function(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))},n.prototype.getWidth=function(){return this.endX-this.startX},n.prototype.getStartX=function(){return this.startX},n.prototype.getEndX=function(){return this.endX},n.prototype.getBucket=function(){return this.bucket},n.prototype.getValue=function(){return this.value},n.prototype.getRowNumber=function(){return this.rowNumber},n.prototype.setRowNumber=function(e){this.rowNumber=e},n.prototype.toString=function(){return this.rowNumber+"|"+this.value},n.BARCODE_ROW_UNKNOWN=-1,n})(),QL=(function(){function n(){}return n.initialize=function(){for(var e=0;e<dt.SYMBOL_TABLE.length;e++)for(var t=dt.SYMBOL_TABLE[e],r=t&1,i=0;i<dt.BARS_IN_MODULE;i++){for(var a=0;(t&1)===r;)a+=1,t>>=1;r=t&1,n.RATIOS_TABLE[e]||(n.RATIOS_TABLE[e]=new Array(dt.BARS_IN_MODULE)),n.RATIOS_TABLE[e][dt.BARS_IN_MODULE-i-1]=Math.fround(a/dt.MODULES_IN_CODEWORD)}this.bSymbolTableReady=!0},n.getDecodedValue=function(e){var t=n.getDecodedCodewordValue(n.sampleBitCounts(e));return t!==-1?t:n.getClosestDecodedValue(e)},n.sampleBitCounts=function(e){for(var t=gt.sum(e),r=new Int32Array(dt.BARS_IN_MODULE),i=0,a=0,o=0;o<dt.MODULES_IN_CODEWORD;o++){var c=t/(2*dt.MODULES_IN_CODEWORD)+o*t/dt.MODULES_IN_CODEWORD;a+e[i]<=c&&(a+=e[i],i++),r[i]++}return r},n.getDecodedCodewordValue=function(e){var t=n.getBitValue(e);return dt.getCodeword(t)===-1?-1:t},n.getBitValue=function(e){for(var t=0,r=0;r<e.length;r++)for(var i=0;i<e[r];i++)t=t<<1|(r%2===0?1:0);return Math.trunc(t)},n.getClosestDecodedValue=function(e){var t=gt.sum(e),r=new Array(dt.BARS_IN_MODULE);if(t>1)for(var i=0;i<r.length;i++)r[i]=Math.fround(e[i]/t);var a=cv.MAX_VALUE,o=-1;this.bSymbolTableReady||n.initialize();for(var c=0;c<n.RATIOS_TABLE.length;c++){for(var u=0,h=n.RATIOS_TABLE[c],p=0;p<dt.BARS_IN_MODULE;p++){var g=Math.fround(h[p]-r[p]);if(u+=Math.fround(g*g),u>=a)break}u<a&&(a=u,o=dt.SYMBOL_TABLE[c])}return o},n.bSymbolTableReady=!1,n.RATIOS_TABLE=new Array(dt.SYMBOL_TABLE.length).map(function(e){return new Array(dt.BARS_IN_MODULE)}),n})(),ZL=(function(){function n(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}return n.prototype.getSegmentIndex=function(){return this.segmentIndex},n.prototype.setSegmentIndex=function(e){this.segmentIndex=e},n.prototype.getFileId=function(){return this.fileId},n.prototype.setFileId=function(e){this.fileId=e},n.prototype.getOptionalData=function(){return this.optionalData},n.prototype.setOptionalData=function(e){this.optionalData=e},n.prototype.isLastSegment=function(){return this.lastSegment},n.prototype.setLastSegment=function(e){this.lastSegment=e},n.prototype.getSegmentCount=function(){return this.segmentCount},n.prototype.setSegmentCount=function(e){this.segmentCount=e},n.prototype.getSender=function(){return this.sender||null},n.prototype.setSender=function(e){this.sender=e},n.prototype.getAddressee=function(){return this.addressee||null},n.prototype.setAddressee=function(e){this.addressee=e},n.prototype.getFileName=function(){return this.fileName},n.prototype.setFileName=function(e){this.fileName=e},n.prototype.getFileSize=function(){return this.fileSize},n.prototype.setFileSize=function(e){this.fileSize=e},n.prototype.getChecksum=function(){return this.checksum},n.prototype.setChecksum=function(e){this.checksum=e},n.prototype.getTimestamp=function(){return this.timestamp},n.prototype.setTimestamp=function(e){this.timestamp=e},n})(),qA=(function(){function n(){}return n.parseLong=function(e,t){return t===void 0&&(t=void 0),parseInt(e,t)},n})(),JL=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),ej=(function(n){JL(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="NullPointerException",e})(Rr),tj=(function(){function n(){}return n.prototype.writeBytes=function(e){this.writeBytesOffset(e,0,e.length)},n.prototype.writeBytesOffset=function(e,t,r){if(e==null)throw new ej;if(t<0||t>e.length||r<0||t+r>e.length||t+r<0)throw new Fy;if(r===0)return;for(var i=0;i<r;i++)this.write(e[t+i])},n.prototype.flush=function(){},n.prototype.close=function(){},n})(),nj=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),rj=(function(n){nj(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e})(Rr),ij=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),aj=(function(n){ij(e,n);function e(t){t===void 0&&(t=32);var r=n.call(this)||this;if(r.count=0,t<0)throw new Pe("Negative initial size: "+t);return r.buf=new Uint8Array(t),r}return e.prototype.ensureCapacity=function(t){t-this.buf.length>0&&this.grow(t)},e.prototype.grow=function(t){var r=this.buf.length,i=r<<1;if(i-t<0&&(i=t),i<0){if(t<0)throw new rj;i=et.MAX_VALUE}this.buf=On.copyOfUint8Array(this.buf,i)},e.prototype.write=function(t){this.ensureCapacity(this.count+1),this.buf[this.count]=t,this.count+=1},e.prototype.writeBytesOffset=function(t,r,i){if(r<0||r>t.length||i<0||r+i-t.length>0)throw new Fy;this.ensureCapacity(this.count+i),Vt.arraycopy(t,r,this.buf,this.count,i),this.count+=i},e.prototype.writeTo=function(t){t.writeBytesOffset(this.buf,0,this.count)},e.prototype.reset=function(){this.count=0},e.prototype.toByteArray=function(){return On.copyOfUint8Array(this.buf,this.count)},e.prototype.size=function(){return this.count},e.prototype.toString=function(t){return t?typeof t=="string"?this.toString_string(t):this.toString_number(t):this.toString_void()},e.prototype.toString_void=function(){return new String(this.buf).toString()},e.prototype.toString_string=function(t){return new String(this.buf).toString()},e.prototype.toString_number=function(t){return new String(this.buf).toString()},e.prototype.close=function(){},e})(tj),Lt;(function(n){n[n.ALPHA=0]="ALPHA",n[n.LOWER=1]="LOWER",n[n.MIXED=2]="MIXED",n[n.PUNCT=3]="PUNCT",n[n.ALPHA_SHIFT=4]="ALPHA_SHIFT",n[n.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(Lt||(Lt={}));function M3(){if(typeof window<"u")return window.BigInt||null;if(typeof global<"u")return global.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}var Dd;function Ls(n){if(typeof Dd>"u"&&(Dd=M3()),Dd===null)throw new Error("BigInt is not supported!");return Dd(n)}function sj(){var n=[];n[0]=Ls(1);var e=Ls(900);n[1]=e;for(var t=2;t<16;t++)n[t]=n[t-1]*e;return n}var oj=(function(){function n(){}return n.decode=function(e,t){var r=new Je(""),i=Rn.ISO8859_1;r.enableDecoding(i);for(var a=1,o=e[a++],c=new ZL;a<e[0];){switch(o){case n.TEXT_COMPACTION_MODE_LATCH:a=n.textCompaction(e,a,r);break;case n.BYTE_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:a=n.byteCompaction(o,e,i,a,r);break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(e[a++]);break;case n.NUMERIC_COMPACTION_MODE_LATCH:a=n.numericCompaction(e,a,r);break;case n.ECI_CHARSET:Rn.getCharacterSetECIByValue(e[a++]);break;case n.ECI_GENERAL_PURPOSE:a+=2;break;case n.ECI_USER_DEFINED:a++;break;case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:a=n.decodeMacroBlock(e,a,c);break;case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:throw new ye;default:a--,a=n.textCompaction(e,a,r);break}if(a<e.length)o=e[a++];else throw ye.getFormatInstance()}if(r.length()===0)throw ye.getFormatInstance();var u=new gp(null,r.toString(),null,t);return u.setOther(c),u},n.decodeMacroBlock=function(e,t,r){if(t+n.NUMBER_OF_SEQUENCE_CODEWORDS>e[0])throw ye.getFormatInstance();for(var i=new Int32Array(n.NUMBER_OF_SEQUENCE_CODEWORDS),a=0;a<n.NUMBER_OF_SEQUENCE_CODEWORDS;a++,t++)i[a]=e[t];r.setSegmentIndex(et.parseInt(n.decodeBase900toBase10(i,n.NUMBER_OF_SEQUENCE_CODEWORDS)));var o=new Je;t=n.textCompaction(e,t,o),r.setFileId(o.toString());var c=-1;for(e[t]===n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(c=t+1);t<e[0];)switch(e[t]){case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(t++,e[t]){case n.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:var u=new Je;t=n.textCompaction(e,t+1,u),r.setFileName(u.toString());break;case n.MACRO_PDF417_OPTIONAL_FIELD_SENDER:var h=new Je;t=n.textCompaction(e,t+1,h),r.setSender(h.toString());break;case n.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:var p=new Je;t=n.textCompaction(e,t+1,p),r.setAddressee(p.toString());break;case n.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:var g=new Je;t=n.numericCompaction(e,t+1,g),r.setSegmentCount(et.parseInt(g.toString()));break;case n.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:var _=new Je;t=n.numericCompaction(e,t+1,_),r.setTimestamp(qA.parseLong(_.toString()));break;case n.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:var w=new Je;t=n.numericCompaction(e,t+1,w),r.setChecksum(et.parseInt(w.toString()));break;case n.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:var A=new Je;t=n.numericCompaction(e,t+1,A),r.setFileSize(qA.parseLong(A.toString()));break;default:throw ye.getFormatInstance()}break;case n.MACRO_PDF417_TERMINATOR:t++,r.setLastSegment(!0);break;default:throw ye.getFormatInstance()}if(c!==-1){var S=t-c;r.isLastSegment()&&S--,r.setOptionalData(On.copyOfRange(e,c,c+S))}return t},n.textCompaction=function(e,t,r){for(var i=new Int32Array((e[0]-t)*2),a=new Int32Array((e[0]-t)*2),o=0,c=!1;t<e[0]&&!c;){var u=e[t++];if(u<n.TEXT_COMPACTION_MODE_LATCH)i[o]=u/30,i[o+1]=u%30,o+=2;else switch(u){case n.TEXT_COMPACTION_MODE_LATCH:i[o++]=n.TEXT_COMPACTION_MODE_LATCH;break;case n.BYTE_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:case n.NUMERIC_COMPACTION_MODE_LATCH:case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:t--,c=!0;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i[o]=n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,u=e[t++],a[o]=u,o++;break}}return n.decodeTextCompaction(i,a,o,r),t},n.decodeTextCompaction=function(e,t,r,i){for(var a=Lt.ALPHA,o=Lt.ALPHA,c=0;c<r;){var u=e[c],h="";switch(a){case Lt.ALPHA:if(u<26)h=String.fromCharCode(65+u);else switch(u){case 26:h=" ";break;case n.LL:a=Lt.LOWER;break;case n.ML:a=Lt.MIXED;break;case n.PS:o=a,a=Lt.PUNCT_SHIFT;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[c]);break;case n.TEXT_COMPACTION_MODE_LATCH:a=Lt.ALPHA;break}break;case Lt.LOWER:if(u<26)h=String.fromCharCode(97+u);else switch(u){case 26:h=" ";break;case n.AS:o=a,a=Lt.ALPHA_SHIFT;break;case n.ML:a=Lt.MIXED;break;case n.PS:o=a,a=Lt.PUNCT_SHIFT;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[c]);break;case n.TEXT_COMPACTION_MODE_LATCH:a=Lt.ALPHA;break}break;case Lt.MIXED:if(u<n.PL)h=n.MIXED_CHARS[u];else switch(u){case n.PL:a=Lt.PUNCT;break;case 26:h=" ";break;case n.LL:a=Lt.LOWER;break;case n.AL:a=Lt.ALPHA;break;case n.PS:o=a,a=Lt.PUNCT_SHIFT;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[c]);break;case n.TEXT_COMPACTION_MODE_LATCH:a=Lt.ALPHA;break}break;case Lt.PUNCT:if(u<n.PAL)h=n.PUNCT_CHARS[u];else switch(u){case n.PAL:a=Lt.ALPHA;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[c]);break;case n.TEXT_COMPACTION_MODE_LATCH:a=Lt.ALPHA;break}break;case Lt.ALPHA_SHIFT:if(a=o,u<26)h=String.fromCharCode(65+u);else switch(u){case 26:h=" ";break;case n.TEXT_COMPACTION_MODE_LATCH:a=Lt.ALPHA;break}break;case Lt.PUNCT_SHIFT:if(a=o,u<n.PAL)h=n.PUNCT_CHARS[u];else switch(u){case n.PAL:a=Lt.ALPHA;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[c]);break;case n.TEXT_COMPACTION_MODE_LATCH:a=Lt.ALPHA;break}break}h!==""&&i.append(h),c++}},n.byteCompaction=function(e,t,r,i,a){var o=new aj,c=0,u=0,h=!1;switch(e){case n.BYTE_COMPACTION_MODE_LATCH:for(var p=new Int32Array(6),g=t[i++];i<t[0]&&!h;)switch(p[c++]=g,u=900*u+g,g=t[i++],g){case n.TEXT_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH:case n.NUMERIC_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:i--,h=!0;break;default:if(c%5===0&&c>0){for(var _=0;_<6;++_)o.write(Number(Ls(u)>>Ls(8*(5-_))));u=0,c=0}break}i===t[0]&&g<n.TEXT_COMPACTION_MODE_LATCH&&(p[c++]=g);for(var w=0;w<c;w++)o.write(p[w]);break;case n.BYTE_COMPACTION_MODE_LATCH_6:for(;i<t[0]&&!h;){var A=t[i++];if(A<n.TEXT_COMPACTION_MODE_LATCH)c++,u=900*u+A;else switch(A){case n.TEXT_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH:case n.NUMERIC_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:i--,h=!0;break}if(c%5===0&&c>0){for(var _=0;_<6;++_)o.write(Number(Ls(u)>>Ls(8*(5-_))));u=0,c=0}}break}return a.append(ui.decode(o.toByteArray(),r)),i},n.numericCompaction=function(e,t,r){for(var i=0,a=!1,o=new Int32Array(n.MAX_NUMERIC_CODEWORDS);t<e[0]&&!a;){var c=e[t++];if(t===e[0]&&(a=!0),c<n.TEXT_COMPACTION_MODE_LATCH)o[i]=c,i++;else switch(c){case n.TEXT_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:t--,a=!0;break}(i%n.MAX_NUMERIC_CODEWORDS===0||c===n.NUMERIC_COMPACTION_MODE_LATCH||a)&&i>0&&(r.append(n.decodeBase900toBase10(o,i)),i=0)}return t},n.decodeBase900toBase10=function(e,t){for(var r=Ls(0),i=0;i<t;i++)r+=n.EXP900[t-i-1]*Ls(e[i]);var a=r.toString();if(a.charAt(0)!=="1")throw new ye;return a.substring(1)},n.TEXT_COMPACTION_MODE_LATCH=900,n.BYTE_COMPACTION_MODE_LATCH=901,n.NUMERIC_COMPACTION_MODE_LATCH=902,n.BYTE_COMPACTION_MODE_LATCH_6=924,n.ECI_USER_DEFINED=925,n.ECI_GENERAL_PURPOSE=926,n.ECI_CHARSET=927,n.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,n.MACRO_PDF417_TERMINATOR=922,n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,n.MAX_NUMERIC_CODEWORDS=15,n.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,n.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,n.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,n.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,n.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,n.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,n.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,n.PL=25,n.LL=27,n.AS=27,n.ML=28,n.AL=28,n.PS=29,n.PAL=29,n.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,n.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",n.EXP900=M3()?sj():[],n.NUMBER_OF_SEQUENCE_CODEWORDS=2,n})(),Xu=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},lj=(function(){function n(){}return n.decode=function(e,t,r,i,a,o,c){for(var u=new hv(e,t,r,i,a),h=null,p=null,g,_=!0;;_=!1){if(t!=null&&(h=n.getRowIndicatorColumn(e,u,t,!0,o,c)),i!=null&&(p=n.getRowIndicatorColumn(e,u,i,!1,o,c)),g=n.merge(h,p),g==null)throw se.getNotFoundInstance();var w=g.getBoundingBox();if(_&&w!=null&&(w.getMinY()<u.getMinY()||w.getMaxY()>u.getMaxY()))u=w;else break}g.setBoundingBox(u);var A=g.getBarcodeColumnCount()+1;g.setDetectionResultColumn(0,h),g.setDetectionResultColumn(A,p);for(var S=h!=null,D=1;D<=A;D++){var C=S?D:A-D;if(g.getDetectionResultColumn(C)===void 0){var P=void 0;C===0||C===A?P=new GA(u,C===0):P=new D3(u),g.setDetectionResultColumn(C,P);for(var V=-1,H=V,X=u.getMinY();X<=u.getMaxY();X++){if(V=n.getStartColumn(g,C,X,S),V<0||V>u.getMaxX()){if(H===-1)continue;V=H}var F=n.detectCodeword(e,u.getMinX(),u.getMaxX(),S,V,X,o,c);F!=null&&(P.setCodeword(X,F),H=V,o=Math.min(o,F.getWidth()),c=Math.max(c,F.getWidth()))}}}return n.createDecoderResult(g)},n.merge=function(e,t){if(e==null&&t==null)return null;var r=n.getBarcodeMetadata(e,t);if(r==null)return null;var i=hv.merge(n.adjustBoundingBox(e),n.adjustBoundingBox(t));return new KL(r,i)},n.adjustBoundingBox=function(e){var t,r;if(e==null)return null;var i=e.getRowHeights();if(i==null)return null;var a=n.getMax(i),o=0;try{for(var c=Xu(i),u=c.next();!u.done;u=c.next()){var h=u.value;if(o+=a-h,h>0)break}}catch(w){t={error:w}}finally{try{u&&!u.done&&(r=c.return)&&r.call(c)}finally{if(t)throw t.error}}for(var p=e.getCodewords(),g=0;o>0&&p[g]==null;g++)o--;for(var _=0,g=i.length-1;g>=0&&(_+=a-i[g],!(i[g]>0));g--);for(var g=p.length-1;_>0&&p[g]==null;g--)_--;return e.getBoundingBox().addMissingRows(o,_,e.isLeft())},n.getMax=function(e){var t,r,i=-1;try{for(var a=Xu(e),o=a.next();!o.done;o=a.next()){var c=o.value;i=Math.max(i,c)}}catch(u){t={error:u}}finally{try{o&&!o.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}return i},n.getBarcodeMetadata=function(e,t){var r;if(e==null||(r=e.getBarcodeMetadata())==null)return t==null?null:t.getBarcodeMetadata();var i;return t==null||(i=t.getBarcodeMetadata())==null?r:r.getColumnCount()!==i.getColumnCount()&&r.getErrorCorrectionLevel()!==i.getErrorCorrectionLevel()&&r.getRowCount()!==i.getRowCount()?null:r},n.getRowIndicatorColumn=function(e,t,r,i,a,o){for(var c=new GA(t,i),u=0;u<2;u++)for(var h=u===0?1:-1,p=Math.trunc(Math.trunc(r.getX())),g=Math.trunc(Math.trunc(r.getY()));g<=t.getMaxY()&&g>=t.getMinY();g+=h){var _=n.detectCodeword(e,0,e.getWidth(),i,p,g,a,o);_!=null&&(c.setCodeword(g,_),i?p=_.getStartX():p=_.getEndX())}return c},n.adjustCodewordCount=function(e,t){var r=t[0][1],i=r.getValue(),a=e.getBarcodeColumnCount()*e.getBarcodeRowCount()-n.getNumberOfECCodeWords(e.getBarcodeECLevel());if(i.length===0){if(a<1||a>dt.MAX_CODEWORDS_IN_BARCODE)throw se.getNotFoundInstance();r.setValue(a)}else i[0]!==a&&r.setValue(a)},n.createDecoderResult=function(e){var t=n.createBarcodeMatrix(e);n.adjustCodewordCount(e,t);for(var r=new Array,i=new Int32Array(e.getBarcodeRowCount()*e.getBarcodeColumnCount()),a=[],o=new Array,c=0;c<e.getBarcodeRowCount();c++)for(var u=0;u<e.getBarcodeColumnCount();u++){var h=t[c][u+1].getValue(),p=c*e.getBarcodeColumnCount()+u;h.length===0?r.push(p):h.length===1?i[p]=h[0]:(o.push(p),a.push(h))}for(var g=new Array(a.length),_=0;_<g.length;_++)g[_]=a[_];return n.createDecoderResultFromAmbiguousValues(e.getBarcodeECLevel(),i,dt.toIntArray(r),dt.toIntArray(o),g)},n.createDecoderResultFromAmbiguousValues=function(e,t,r,i,a){for(var o=new Int32Array(i.length),c=100;c-- >0;){for(var u=0;u<o.length;u++)t[i[u]]=a[u][o[u]];try{return n.decodeCodewords(t,e,r)}catch(p){var h=p instanceof An;if(!h)throw p}if(o.length===0)throw An.getChecksumInstance();for(var u=0;u<o.length;u++)if(o[u]<a[u].length-1){o[u]++;break}else if(o[u]=0,u===o.length-1)throw An.getChecksumInstance()}throw An.getChecksumInstance()},n.createBarcodeMatrix=function(e){for(var t,r,i,a,o=Array.from({length:e.getBarcodeRowCount()},function(){return new Array(e.getBarcodeColumnCount()+2)}),c=0;c<o.length;c++)for(var u=0;u<o[c].length;u++)o[c][u]=new af;var h=0;try{for(var p=Xu(e.getDetectionResultColumns()),g=p.next();!g.done;g=p.next()){var _=g.value;if(_!=null)try{for(var w=(i=void 0,Xu(_.getCodewords())),A=w.next();!A.done;A=w.next()){var S=A.value;if(S!=null){var D=S.getRowNumber();if(D>=0){if(D>=o.length)continue;o[D][h].setValue(S.getValue())}}}}catch(C){i={error:C}}finally{try{A&&!A.done&&(a=w.return)&&a.call(w)}finally{if(i)throw i.error}}h++}}catch(C){t={error:C}}finally{try{g&&!g.done&&(r=p.return)&&r.call(p)}finally{if(t)throw t.error}}return o},n.isValidBarcodeColumn=function(e,t){return t>=0&&t<=e.getBarcodeColumnCount()+1},n.getStartColumn=function(e,t,r,i){var a,o,c=i?1:-1,u=null;if(n.isValidBarcodeColumn(e,t-c)&&(u=e.getDetectionResultColumn(t-c).getCodeword(r)),u!=null)return i?u.getEndX():u.getStartX();if(u=e.getDetectionResultColumn(t).getCodewordNearby(r),u!=null)return i?u.getStartX():u.getEndX();if(n.isValidBarcodeColumn(e,t-c)&&(u=e.getDetectionResultColumn(t-c).getCodewordNearby(r)),u!=null)return i?u.getEndX():u.getStartX();for(var h=0;n.isValidBarcodeColumn(e,t-c);){t-=c;try{for(var p=(a=void 0,Xu(e.getDetectionResultColumn(t).getCodewords())),g=p.next();!g.done;g=p.next()){var _=g.value;if(_!=null)return(i?_.getEndX():_.getStartX())+c*h*(_.getEndX()-_.getStartX())}}catch(w){a={error:w}}finally{try{g&&!g.done&&(o=p.return)&&o.call(p)}finally{if(a)throw a.error}}h++}return i?e.getBoundingBox().getMinX():e.getBoundingBox().getMaxX()},n.detectCodeword=function(e,t,r,i,a,o,c,u){a=n.adjustCodewordStartColumn(e,t,r,i,a,o);var h=n.getModuleBitCount(e,t,r,i,a,o);if(h==null)return null;var p,g=gt.sum(h);if(i)p=a+g;else{for(var _=0;_<h.length/2;_++){var w=h[_];h[_]=h[h.length-1-_],h[h.length-1-_]=w}p=a,a=p-g}if(!n.checkCodewordSkew(g,c,u))return null;var A=QL.getDecodedValue(h),S=dt.getCodeword(A);return S===-1?null:new WL(a,p,n.getCodewordBucketNumber(A),S)},n.getModuleBitCount=function(e,t,r,i,a,o){for(var c=a,u=new Int32Array(8),h=0,p=i?1:-1,g=i;(i?c<r:c>=t)&&h<u.length;)e.get(c,o)===g?(u[h]++,c+=p):(h++,g=!g);return h===u.length||c===(i?r:t)&&h===u.length-1?u:null},n.getNumberOfECCodeWords=function(e){return 2<<e},n.adjustCodewordStartColumn=function(e,t,r,i,a,o){for(var c=a,u=i?-1:1,h=0;h<2;h++){for(;(i?c>=t:c<r)&&i===e.get(c,o);){if(Math.abs(a-c)>n.CODEWORD_SKEW_SIZE)return a;c+=u}u=-u,i=!i}return c},n.checkCodewordSkew=function(e,t,r){return t-n.CODEWORD_SKEW_SIZE<=e&&e<=r+n.CODEWORD_SKEW_SIZE},n.decodeCodewords=function(e,t,r){if(e.length===0)throw ye.getFormatInstance();var i=1<<t+1,a=n.correctErrors(e,r,i);n.verifyCodewordCount(e,i);var o=oj.decode(e,""+t);return o.setErrorsCorrected(a),o.setErasures(r.length),o},n.correctErrors=function(e,t,r){if(t!=null&&t.length>r/2+n.MAX_ERRORS||r<0||r>n.MAX_EC_CODEWORDS)throw An.getChecksumInstance();return n.errorCorrection.decode(e,r,t)},n.verifyCodewordCount=function(e,t){if(e.length<4)throw ye.getFormatInstance();var r=e[0];if(r>e.length)throw ye.getFormatInstance();if(r===0)if(t<e.length)e[0]=e.length-t;else throw ye.getFormatInstance()},n.getBitCountForCodeword=function(e){for(var t=new Int32Array(8),r=0,i=t.length-1;!((e&1)!==r&&(r=e&1,i--,i<0));)t[i]++,e>>=1;return t},n.getCodewordBucketNumber=function(e){return e instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(e):this.getCodewordBucketNumber_number(e)},n.getCodewordBucketNumber_number=function(e){return n.getCodewordBucketNumber(n.getBitCountForCodeword(e))},n.getCodewordBucketNumber_Int32Array=function(e){return(e[0]-e[2]+e[4]-e[6]+9)%9},n.toString=function(e){for(var t=new Gy,r=0;r<e.length;r++){t.format("Row %2d: ",r);for(var i=0;i<e[r].length;i++){var a=e[r][i];a.getValue().length===0?t.format("        ",null):t.format("%4d(%2d)",a.getValue()[0],a.getConfidence(a.getValue()[0]))}t.format("%n")}return t.toString()},n.CODEWORD_SKEW_SIZE=2,n.MAX_ERRORS=3,n.MAX_EC_CODEWORDS=512,n.errorCorrection=new zL,n})(),cj=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},R0=(function(){function n(){}return n.prototype.decode=function(e,t){t===void 0&&(t=null);var r=n.decode(e,t,!1);if(r==null||r.length===0||r[0]==null)throw se.getNotFoundInstance();return r[0]},n.prototype.decodeMultiple=function(e,t){t===void 0&&(t=null);try{return n.decode(e,t,!0)}catch(r){throw r instanceof ye||r instanceof An?se.getNotFoundInstance():r}},n.decode=function(e,t,r){var i,a,o=new Array,c=LL.detectMultiple(e,t,r);try{for(var u=cj(c.getPoints()),h=u.next();!h.done;h=u.next()){var p=h.value,g=lj.decode(c.getBits(),p[4],p[5],p[6],p[7],n.getMinCodewordWidth(p),n.getMaxCodewordWidth(p)),_=new fr(g.getText(),g.getRawBytes(),void 0,p,Me.PDF_417);_.putMetadata(ir.ERROR_CORRECTION_LEVEL,g.getECLevel());var w=g.getOther();w!=null&&_.putMetadata(ir.PDF417_EXTRA_METADATA,w),o.push(_)}}catch(A){i={error:A}}finally{try{h&&!h.done&&(a=u.return)&&a.call(u)}finally{if(i)throw i.error}}return o.map(function(A){return A})},n.getMaxWidth=function(e,t){return e==null||t==null?0:Math.trunc(Math.abs(e.getX()-t.getX()))},n.getMinWidth=function(e,t){return e==null||t==null?et.MAX_VALUE:Math.trunc(Math.abs(e.getX()-t.getX()))},n.getMaxCodewordWidth=function(e){return Math.floor(Math.max(Math.max(n.getMaxWidth(e[0],e[4]),n.getMaxWidth(e[6],e[2])*dt.MODULES_IN_CODEWORD/dt.MODULES_IN_STOP_PATTERN),Math.max(n.getMaxWidth(e[1],e[5]),n.getMaxWidth(e[7],e[3])*dt.MODULES_IN_CODEWORD/dt.MODULES_IN_STOP_PATTERN)))},n.getMinCodewordWidth=function(e){return Math.floor(Math.min(Math.min(n.getMinWidth(e[0],e[4]),n.getMinWidth(e[6],e[2])*dt.MODULES_IN_CODEWORD/dt.MODULES_IN_STOP_PATTERN),Math.min(n.getMinWidth(e[1],e[5]),n.getMinWidth(e[7],e[3])*dt.MODULES_IN_CODEWORD/dt.MODULES_IN_STOP_PATTERN)))},n.prototype.reset=function(){},n})(),uj=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),$A=(function(n){uj(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="ReaderException",e})(Rr),XA=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},P3=(function(){function n(){}return n.prototype.decode=function(e,t){return this.setHints(t),this.decodeInternal(e)},n.prototype.decodeWithState=function(e){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(e)},n.prototype.setHints=function(e){this.hints=e;var t=e!=null&&e.get(Ft.TRY_HARDER)!==void 0,r=e==null?null:e.get(Ft.POSSIBLE_FORMATS),i=new Array;if(r!=null){var a=r.some(function(o){return o===Me.UPC_A||o===Me.UPC_E||o===Me.EAN_13||o===Me.EAN_8||o===Me.CODABAR||o===Me.CODE_39||o===Me.CODE_93||o===Me.CODE_128||o===Me.ITF||o===Me.RSS_14||o===Me.RSS_EXPANDED});a&&!t&&i.push(new uc(e)),r.includes(Me.QR_CODE)&&i.push(new N0),r.includes(Me.DATA_MATRIX)&&i.push(new I0),r.includes(Me.AZTEC)&&i.push(new C0),r.includes(Me.PDF_417)&&i.push(new R0),a&&t&&i.push(new uc(e))}i.length===0&&(t||i.push(new uc(e)),i.push(new N0),i.push(new I0),i.push(new C0),i.push(new R0),t&&i.push(new uc(e))),this.readers=i},n.prototype.reset=function(){var e,t;if(this.readers!==null)try{for(var r=XA(this.readers),i=r.next();!i.done;i=r.next()){var a=i.value;a.reset()}}catch(o){e={error:o}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}},n.prototype.decodeInternal=function(e){var t,r;if(this.readers===null)throw new $A("No readers where selected, nothing can be read.");try{for(var i=XA(this.readers),a=i.next();!a.done;a=i.next()){var o=a.value;try{return o.decode(e,this.hints)}catch(c){if(c instanceof $A)continue}}}catch(c){t={error:c}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}throw new se("No MultiFormat Readers were able to detect the code.")},n})(),fj=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})();(function(n){fj(e,n);function e(t,r){t===void 0&&(t=null),r===void 0&&(r=500);var i=this,a=new P3;return a.setHints(t),i=n.call(this,a,r)||this,i}return e.prototype.decodeBitmap=function(t){return this.reader.decodeWithState(t)},e})(zc);var hj=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})();(function(n){hj(e,n);function e(t){return t===void 0&&(t=500),n.call(this,new R0,t)||this}return e})(zc);var dj=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})();(function(n){dj(e,n);function e(t){return t===void 0&&(t=500),n.call(this,new N0,t)||this}return e})(zc);var dv;(function(n){n[n.ERROR_CORRECTION=0]="ERROR_CORRECTION",n[n.CHARACTER_SET=1]="CHARACTER_SET",n[n.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",n[n.DATA_MATRIX_COMPACT=3]="DATA_MATRIX_COMPACT",n[n.MIN_SIZE=4]="MIN_SIZE",n[n.MAX_SIZE=5]="MAX_SIZE",n[n.MARGIN=6]="MARGIN",n[n.PDF417_COMPACT=7]="PDF417_COMPACT",n[n.PDF417_COMPACTION=8]="PDF417_COMPACTION",n[n.PDF417_DIMENSIONS=9]="PDF417_DIMENSIONS",n[n.AZTEC_LAYERS=10]="AZTEC_LAYERS",n[n.QR_VERSION=11]="QR_VERSION",n[n.GS1_FORMAT=12]="GS1_FORMAT",n[n.FORCE_C40=13]="FORCE_C40"})(dv||(dv={}));const Md=dv;var k3=(function(){function n(e){this.field=e,this.cachedGenerators=[],this.cachedGenerators.push(new Ks(e,Int32Array.from([1])))}return n.prototype.buildGenerator=function(e){var t=this.cachedGenerators;if(e>=t.length)for(var r=t[t.length-1],i=this.field,a=t.length;a<=e;a++){var o=r.multiply(new Ks(i,Int32Array.from([1,i.exp(a-1+i.getGeneratorBase())])));t.push(o),r=o}return t[e]},n.prototype.encode=function(e,t){if(t===0)throw new Pe("No error correction bytes");var r=e.length-t;if(r<=0)throw new Pe("No data bytes provided");var i=this.buildGenerator(t),a=new Int32Array(r);Vt.arraycopy(e,0,a,0,r);var o=new Ks(this.field,a);o=o.multiplyByMonomial(t,1);for(var c=o.divide(i)[1],u=c.getCoefficients(),h=t-u.length,p=0;p<h;p++)e[r+p]=0;Vt.arraycopy(u,0,e,r+h,u.length)},n})(),sf=(function(){function n(){}return n.applyMaskPenaltyRule1=function(e){return n.applyMaskPenaltyRule1Internal(e,!0)+n.applyMaskPenaltyRule1Internal(e,!1)},n.applyMaskPenaltyRule2=function(e){for(var t=0,r=e.getArray(),i=e.getWidth(),a=e.getHeight(),o=0;o<a-1;o++)for(var c=r[o],u=0;u<i-1;u++){var h=c[u];h===c[u+1]&&h===r[o+1][u]&&h===r[o+1][u+1]&&t++}return n.N2*t},n.applyMaskPenaltyRule3=function(e){for(var t=0,r=e.getArray(),i=e.getWidth(),a=e.getHeight(),o=0;o<a;o++)for(var c=0;c<i;c++){var u=r[o];c+6<i&&u[c]===1&&u[c+1]===0&&u[c+2]===1&&u[c+3]===1&&u[c+4]===1&&u[c+5]===0&&u[c+6]===1&&(n.isWhiteHorizontal(u,c-4,c)||n.isWhiteHorizontal(u,c+7,c+11))&&t++,o+6<a&&r[o][c]===1&&r[o+1][c]===0&&r[o+2][c]===1&&r[o+3][c]===1&&r[o+4][c]===1&&r[o+5][c]===0&&r[o+6][c]===1&&(n.isWhiteVertical(r,c,o-4,o)||n.isWhiteVertical(r,c,o+7,o+11))&&t++}return t*n.N3},n.isWhiteHorizontal=function(e,t,r){t=Math.max(t,0),r=Math.min(r,e.length);for(var i=t;i<r;i++)if(e[i]===1)return!1;return!0},n.isWhiteVertical=function(e,t,r,i){r=Math.max(r,0),i=Math.min(i,e.length);for(var a=r;a<i;a++)if(e[a][t]===1)return!1;return!0},n.applyMaskPenaltyRule4=function(e){for(var t=0,r=e.getArray(),i=e.getWidth(),a=e.getHeight(),o=0;o<a;o++)for(var c=r[o],u=0;u<i;u++)c[u]===1&&t++;var h=e.getHeight()*e.getWidth(),p=Math.floor(Math.abs(t*2-h)*10/h);return p*n.N4},n.getDataMaskBit=function(e,t,r){var i,a;switch(e){case 0:i=r+t&1;break;case 1:i=r&1;break;case 2:i=t%3;break;case 3:i=(r+t)%3;break;case 4:i=Math.floor(r/2)+Math.floor(t/3)&1;break;case 5:a=r*t,i=(a&1)+a%3;break;case 6:a=r*t,i=(a&1)+a%3&1;break;case 7:a=r*t,i=a%3+(r+t&1)&1;break;default:throw new Pe("Invalid mask pattern: "+e)}return i===0},n.applyMaskPenaltyRule1Internal=function(e,t){for(var r=0,i=t?e.getHeight():e.getWidth(),a=t?e.getWidth():e.getHeight(),o=e.getArray(),c=0;c<i;c++){for(var u=0,h=-1,p=0;p<a;p++){var g=t?o[c][p]:o[p][c];g===h?u++:(u>=5&&(r+=n.N1+(u-5)),u=1,h=g)}u>=5&&(r+=n.N1+(u-5))}return r},n.N1=3,n.N2=3,n.N3=40,n.N4=10,n})(),pj=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},mj=(function(){function n(e,t){this.width=e,this.height=t;for(var r=new Array(t),i=0;i!==t;i++)r[i]=new Uint8Array(e);this.bytes=r}return n.prototype.getHeight=function(){return this.height},n.prototype.getWidth=function(){return this.width},n.prototype.get=function(e,t){return this.bytes[t][e]},n.prototype.getArray=function(){return this.bytes},n.prototype.setNumber=function(e,t,r){this.bytes[t][e]=r},n.prototype.setBoolean=function(e,t,r){this.bytes[t][e]=r?1:0},n.prototype.clear=function(e){var t,r;try{for(var i=pj(this.bytes),a=i.next();!a.done;a=i.next()){var o=a.value;On.fill(o,e)}}catch(c){t={error:c}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;if(this.width!==t.width||this.height!==t.height)return!1;for(var r=0,i=this.height;r<i;++r)for(var a=this.bytes[r],o=t.bytes[r],c=0,u=this.width;c<u;++c)if(a[c]!==o[c])return!1;return!0},n.prototype.toString=function(){for(var e=new Je,t=0,r=this.height;t<r;++t){for(var i=this.bytes[t],a=0,o=this.width;a<o;++a)switch(i[a]){case 0:e.append(" 0");break;case 1:e.append(" 1");break;default:e.append("  ");break}e.append(`
`)}return e.toString()},n})(),pv=(function(){function n(){this.maskPattern=-1}return n.prototype.getMode=function(){return this.mode},n.prototype.getECLevel=function(){return this.ecLevel},n.prototype.getVersion=function(){return this.version},n.prototype.getMaskPattern=function(){return this.maskPattern},n.prototype.getMatrix=function(){return this.matrix},n.prototype.toString=function(){var e=new Je;return e.append(`<<
`),e.append(" mode: "),e.append(this.mode?this.mode.toString():"null"),e.append(`
 ecLevel: `),e.append(this.ecLevel?this.ecLevel.toString():"null"),e.append(`
 version: `),e.append(this.version?this.version.toString():"null"),e.append(`
 maskPattern: `),e.append(this.maskPattern.toString()),this.matrix?(e.append(`
 matrix:
`),e.append(this.matrix.toString())):e.append(`
 matrix: null
`),e.append(`>>
`),e.toString()},n.prototype.setMode=function(e){this.mode=e},n.prototype.setECLevel=function(e){this.ecLevel=e},n.prototype.setVersion=function(e){this.version=e},n.prototype.setMaskPattern=function(e){this.maskPattern=e},n.prototype.setMatrix=function(e){this.matrix=e},n.isValidMaskPattern=function(e){return e>=0&&e<n.NUM_MASK_PATTERNS},n.NUM_MASK_PATTERNS=8,n})(),gj=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Gt=(function(n){gj(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="WriterException",e})(Rr),YA=(function(){function n(){}return n.clearMatrix=function(e){e.clear(255)},n.buildMatrix=function(e,t,r,i,a){n.clearMatrix(a),n.embedBasicPatterns(r,a),n.embedTypeInfo(t,i,a),n.maybeEmbedVersionInfo(r,a),n.embedDataBits(e,i,a)},n.embedBasicPatterns=function(e,t){n.embedPositionDetectionPatternsAndSeparators(t),n.embedDarkDotAtLeftBottomCorner(t),n.maybeEmbedPositionAdjustmentPatterns(e,t),n.embedTimingPatterns(t)},n.embedTypeInfo=function(e,t,r){var i=new $n;n.makeTypeInfoBits(e,t,i);for(var a=0,o=i.getSize();a<o;++a){var c=i.get(i.getSize()-1-a),u=n.TYPE_INFO_COORDINATES[a],h=u[0],p=u[1];if(r.setBoolean(h,p,c),a<8){var g=r.getWidth()-a-1,_=8;r.setBoolean(g,_,c)}else{var g=8,_=r.getHeight()-7+(a-8);r.setBoolean(g,_,c)}}},n.maybeEmbedVersionInfo=function(e,t){if(!(e.getVersionNumber()<7)){var r=new $n;n.makeVersionInfoBits(e,r);for(var i=17,a=0;a<6;++a)for(var o=0;o<3;++o){var c=r.get(i);i--,t.setBoolean(a,t.getHeight()-11+o,c),t.setBoolean(t.getHeight()-11+o,a,c)}}},n.embedDataBits=function(e,t,r){for(var i=0,a=-1,o=r.getWidth()-1,c=r.getHeight()-1;o>0;){for(o===6&&(o-=1);c>=0&&c<r.getHeight();){for(var u=0;u<2;++u){var h=o-u;if(n.isEmpty(r.get(h,c))){var p=void 0;i<e.getSize()?(p=e.get(i),++i):p=!1,t!==255&&sf.getDataMaskBit(t,h,c)&&(p=!p),r.setBoolean(h,c,p)}}c+=a}a=-a,c+=a,o-=2}if(i!==e.getSize())throw new Gt("Not all bits consumed: "+i+"/"+e.getSize())},n.findMSBSet=function(e){return 32-et.numberOfLeadingZeros(e)},n.calculateBCHCode=function(e,t){if(t===0)throw new Pe("0 polynomial");var r=n.findMSBSet(t);for(e<<=r-1;n.findMSBSet(e)>=r;)e^=t<<n.findMSBSet(e)-r;return e},n.makeTypeInfoBits=function(e,t,r){if(!pv.isValidMaskPattern(t))throw new Gt("Invalid mask pattern");var i=e.getBits()<<3|t;r.appendBits(i,5);var a=n.calculateBCHCode(i,n.TYPE_INFO_POLY);r.appendBits(a,10);var o=new $n;if(o.appendBits(n.TYPE_INFO_MASK_PATTERN,15),r.xor(o),r.getSize()!==15)throw new Gt("should not happen but we got: "+r.getSize())},n.makeVersionInfoBits=function(e,t){t.appendBits(e.getVersionNumber(),6);var r=n.calculateBCHCode(e.getVersionNumber(),n.VERSION_INFO_POLY);if(t.appendBits(r,12),t.getSize()!==18)throw new Gt("should not happen but we got: "+t.getSize())},n.isEmpty=function(e){return e===255},n.embedTimingPatterns=function(e){for(var t=8;t<e.getWidth()-8;++t){var r=(t+1)%2;n.isEmpty(e.get(t,6))&&e.setNumber(t,6,r),n.isEmpty(e.get(6,t))&&e.setNumber(6,t,r)}},n.embedDarkDotAtLeftBottomCorner=function(e){if(e.get(8,e.getHeight()-8)===0)throw new Gt;e.setNumber(8,e.getHeight()-8,1)},n.embedHorizontalSeparationPattern=function(e,t,r){for(var i=0;i<8;++i){if(!n.isEmpty(r.get(e+i,t)))throw new Gt;r.setNumber(e+i,t,0)}},n.embedVerticalSeparationPattern=function(e,t,r){for(var i=0;i<7;++i){if(!n.isEmpty(r.get(e,t+i)))throw new Gt;r.setNumber(e,t+i,0)}},n.embedPositionAdjustmentPattern=function(e,t,r){for(var i=0;i<5;++i)for(var a=n.POSITION_ADJUSTMENT_PATTERN[i],o=0;o<5;++o)r.setNumber(e+o,t+i,a[o])},n.embedPositionDetectionPattern=function(e,t,r){for(var i=0;i<7;++i)for(var a=n.POSITION_DETECTION_PATTERN[i],o=0;o<7;++o)r.setNumber(e+o,t+i,a[o])},n.embedPositionDetectionPatternsAndSeparators=function(e){var t=n.POSITION_DETECTION_PATTERN[0].length;n.embedPositionDetectionPattern(0,0,e),n.embedPositionDetectionPattern(e.getWidth()-t,0,e),n.embedPositionDetectionPattern(0,e.getWidth()-t,e);var r=8;n.embedHorizontalSeparationPattern(0,r-1,e),n.embedHorizontalSeparationPattern(e.getWidth()-r,r-1,e),n.embedHorizontalSeparationPattern(0,e.getWidth()-r,e);var i=7;n.embedVerticalSeparationPattern(i,0,e),n.embedVerticalSeparationPattern(e.getHeight()-i-1,0,e),n.embedVerticalSeparationPattern(i,e.getHeight()-i,e)},n.maybeEmbedPositionAdjustmentPatterns=function(e,t){if(!(e.getVersionNumber()<2))for(var r=e.getVersionNumber()-1,i=n.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[r],a=0,o=i.length;a!==o;a++){var c=i[a];if(c>=0)for(var u=0;u!==o;u++){var h=i[u];h>=0&&n.isEmpty(t.get(h,c))&&n.embedPositionAdjustmentPattern(h-2,c-2,t)}}},n.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),n.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),n.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),n.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),n.VERSION_INFO_POLY=7973,n.TYPE_INFO_POLY=1335,n.TYPE_INFO_MASK_PATTERN=21522,n})(),vj=(function(){function n(e,t){this.dataBytes=e,this.errorCorrectionBytes=t}return n.prototype.getDataBytes=function(){return this.dataBytes},n.prototype.getErrorCorrectionBytes=function(){return this.errorCorrectionBytes},n})(),KA=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};(function(){function n(){}return n.calculateMaskPenalty=function(e){return sf.applyMaskPenaltyRule1(e)+sf.applyMaskPenaltyRule2(e)+sf.applyMaskPenaltyRule3(e)+sf.applyMaskPenaltyRule4(e)},n.encode=function(e,t,r){r===void 0&&(r=null);var i=n.DEFAULT_BYTE_MODE_ENCODING,a=r!==null&&r.get(Md.CHARACTER_SET)!==void 0;a&&(i=r.get(Md.CHARACTER_SET).toString());var o=this.chooseMode(e,i),c=new $n;if(o===qt.BYTE&&(a||n.DEFAULT_BYTE_MODE_ENCODING!==i)){var u=Rn.getCharacterSetECIByName(i);u!==void 0&&this.appendECI(u,c)}this.appendModeInfo(o,c);var h=new $n;this.appendBytes(e,o,h,i);var p;if(r!==null&&r.get(Md.QR_VERSION)!==void 0){var g=Number.parseInt(r.get(Md.QR_VERSION).toString(),10);p=Qo.getVersionForNumber(g);var _=this.calculateBitsNeeded(o,c,h,p);if(!this.willFit(_,p,t))throw new Gt("Data too big for requested version")}else p=this.recommendVersion(t,o,c,h);var w=new $n;w.appendBitArray(c);var A=o===qt.BYTE?h.getSizeInBytes():e.length;this.appendLengthInfo(A,p,o,w),w.appendBitArray(h);var S=p.getECBlocksForLevel(t),D=p.getTotalCodewords()-S.getTotalECCodewords();this.terminateBits(D,w);var C=this.interleaveWithECBytes(w,p.getTotalCodewords(),D,S.getNumBlocks()),P=new pv;P.setECLevel(t),P.setMode(o),P.setVersion(p);var V=p.getDimensionForVersion(),H=new mj(V,V),X=this.chooseMaskPattern(C,t,p,H);return P.setMaskPattern(X),YA.buildMatrix(C,t,p,X,H),P.setMatrix(H),P},n.recommendVersion=function(e,t,r,i){var a=this.calculateBitsNeeded(t,r,i,Qo.getVersionForNumber(1)),o=this.chooseVersion(a,e),c=this.calculateBitsNeeded(t,r,i,o);return this.chooseVersion(c,e)},n.calculateBitsNeeded=function(e,t,r,i){return t.getSize()+e.getCharacterCountBits(i)+r.getSize()},n.getAlphanumericCode=function(e){return e<n.ALPHANUMERIC_TABLE.length?n.ALPHANUMERIC_TABLE[e]:-1},n.chooseMode=function(e,t){if(t===void 0&&(t=null),Rn.SJIS.getName()===t&&this.isOnlyDoubleByteKanji(e))return qt.KANJI;for(var r=!1,i=!1,a=0,o=e.length;a<o;++a){var c=e.charAt(a);if(n.isDigit(c))r=!0;else if(this.getAlphanumericCode(c.charCodeAt(0))!==-1)i=!0;else return qt.BYTE}return i?qt.ALPHANUMERIC:r?qt.NUMERIC:qt.BYTE},n.isOnlyDoubleByteKanji=function(e){var t;try{t=ui.encode(e,Rn.SJIS)}catch{return!1}var r=t.length;if(r%2!==0)return!1;for(var i=0;i<r;i+=2){var a=t[i]&255;if((a<129||a>159)&&(a<224||a>235))return!1}return!0},n.chooseMaskPattern=function(e,t,r,i){for(var a=Number.MAX_SAFE_INTEGER,o=-1,c=0;c<pv.NUM_MASK_PATTERNS;c++){YA.buildMatrix(e,t,r,c,i);var u=this.calculateMaskPenalty(i);u<a&&(a=u,o=c)}return o},n.chooseVersion=function(e,t){for(var r=1;r<=40;r++){var i=Qo.getVersionForNumber(r);if(n.willFit(e,i,t))return i}throw new Gt("Data too big")},n.willFit=function(e,t,r){var i=t.getTotalCodewords(),a=t.getECBlocksForLevel(r),o=a.getTotalECCodewords(),c=i-o,u=(e+7)/8;return c>=u},n.terminateBits=function(e,t){var r=e*8;if(t.getSize()>r)throw new Gt("data bits cannot fit in the QR Code"+t.getSize()+" > "+r);for(var i=0;i<4&&t.getSize()<r;++i)t.appendBit(!1);var a=t.getSize()&7;if(a>0)for(var i=a;i<8;i++)t.appendBit(!1);for(var o=e-t.getSizeInBytes(),i=0;i<o;++i)t.appendBits((i&1)===0?236:17,8);if(t.getSize()!==r)throw new Gt("Bits size does not equal capacity")},n.getNumDataBytesAndNumECBytesForBlockID=function(e,t,r,i,a,o){if(i>=r)throw new Gt("Block ID too large");var c=e%r,u=r-c,h=Math.floor(e/r),p=h+1,g=Math.floor(t/r),_=g+1,w=h-g,A=p-_;if(w!==A)throw new Gt("EC bytes mismatch");if(r!==u+c)throw new Gt("RS blocks mismatch");if(e!==(g+w)*u+(_+A)*c)throw new Gt("Total bytes mismatch");i<u?(a[0]=g,o[0]=w):(a[0]=_,o[0]=A)},n.interleaveWithECBytes=function(e,t,r,i){var a,o,c,u;if(e.getSizeInBytes()!==r)throw new Gt("Number of bits and data bytes does not match");for(var h=0,p=0,g=0,_=new Array,w=0;w<i;++w){var A=new Int32Array(1),S=new Int32Array(1);n.getNumDataBytesAndNumECBytesForBlockID(t,r,i,w,A,S);var D=A[0],C=new Uint8Array(D);e.toBytes(8*h,C,0,D);var P=n.generateECBytes(C,S[0]);_.push(new vj(C,P)),p=Math.max(p,D),g=Math.max(g,P.length),h+=A[0]}if(r!==h)throw new Gt("Data bytes does not match offset");for(var V=new $n,w=0;w<p;++w)try{for(var H=(a=void 0,KA(_)),X=H.next();!X.done;X=H.next()){var F=X.value,C=F.getDataBytes();w<C.length&&V.appendBits(C[w],8)}}catch(R){a={error:R}}finally{try{X&&!X.done&&(o=H.return)&&o.call(H)}finally{if(a)throw a.error}}for(var w=0;w<g;++w)try{for(var I=(c=void 0,KA(_)),b=I.next();!b.done;b=I.next()){var F=b.value,P=F.getErrorCorrectionBytes();w<P.length&&V.appendBits(P[w],8)}}catch(R){c={error:R}}finally{try{b&&!b.done&&(u=I.return)&&u.call(I)}finally{if(c)throw c.error}}if(t!==V.getSizeInBytes())throw new Gt("Interleaving error: "+t+" and "+V.getSizeInBytes()+" differ.");return V},n.generateECBytes=function(e,t){for(var r=e.length,i=new Int32Array(r+t),a=0;a<r;a++)i[a]=e[a]&255;new k3(Tr.QR_CODE_FIELD_256).encode(i,t);for(var o=new Uint8Array(t),a=0;a<t;a++)o[a]=i[r+a];return o},n.appendModeInfo=function(e,t){t.appendBits(e.getBits(),4)},n.appendLengthInfo=function(e,t,r,i){var a=r.getCharacterCountBits(t);if(e>=1<<a)throw new Gt(e+" is bigger than "+((1<<a)-1));i.appendBits(e,a)},n.appendBytes=function(e,t,r,i){switch(t){case qt.NUMERIC:n.appendNumericBytes(e,r);break;case qt.ALPHANUMERIC:n.appendAlphanumericBytes(e,r);break;case qt.BYTE:n.append8BitBytes(e,r,i);break;case qt.KANJI:n.appendKanjiBytes(e,r);break;default:throw new Gt("Invalid mode: "+t)}},n.getDigit=function(e){return e.charCodeAt(0)-48},n.isDigit=function(e){var t=n.getDigit(e);return t>=0&&t<=9},n.appendNumericBytes=function(e,t){for(var r=e.length,i=0;i<r;){var a=n.getDigit(e.charAt(i));if(i+2<r){var o=n.getDigit(e.charAt(i+1)),c=n.getDigit(e.charAt(i+2));t.appendBits(a*100+o*10+c,10),i+=3}else if(i+1<r){var o=n.getDigit(e.charAt(i+1));t.appendBits(a*10+o,7),i+=2}else t.appendBits(a,4),i++}},n.appendAlphanumericBytes=function(e,t){for(var r=e.length,i=0;i<r;){var a=n.getAlphanumericCode(e.charCodeAt(i));if(a===-1)throw new Gt;if(i+1<r){var o=n.getAlphanumericCode(e.charCodeAt(i+1));if(o===-1)throw new Gt;t.appendBits(a*45+o,11),i+=2}else t.appendBits(a,6),i++}},n.append8BitBytes=function(e,t,r){var i;try{i=ui.encode(e,r)}catch(u){throw new Gt(u)}for(var a=0,o=i.length;a!==o;a++){var c=i[a];t.appendBits(c,8)}},n.appendKanjiBytes=function(e,t){var r;try{r=ui.encode(e,Rn.SJIS)}catch(g){throw new Gt(g)}for(var i=r.length,a=0;a<i;a+=2){var o=r[a]&255,c=r[a+1]&255,u=o<<8&4294967295|c,h=-1;if(u>=33088&&u<=40956?h=u-33088:u>=57408&&u<=60351&&(h=u-49472),h===-1)throw new Gt("Invalid byte sequence");var p=(h>>8)*192+(h&255);t.appendBits(p,13)}},n.appendECI=function(e,t){t.appendBits(qt.ECI.getBits(),4),t.appendBits(e.getValue(),8)},n.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),n.DEFAULT_BYTE_MODE_ENCODING=Rn.UTF8.getName(),n})();var yj=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})();(function(n){yj(e,n);function e(t,r,i,a,o,c,u,h){var p=n.call(this,c,u)||this;if(p.yuvData=t,p.dataWidth=r,p.dataHeight=i,p.left=a,p.top=o,a+c>r||o+u>i)throw new Pe("Crop rectangle does not fit within image data.");return h&&p.reverseHorizontal(c,u),p}return e.prototype.getRow=function(t,r){if(t<0||t>=this.getHeight())throw new Pe("Requested row is outside the image: "+t);var i=this.getWidth();(r==null||r.length<i)&&(r=new Uint8ClampedArray(i));var a=(t+this.top)*this.dataWidth+this.left;return Vt.arraycopy(this.yuvData,a,r,0,i),r},e.prototype.getMatrix=function(){var t=this.getWidth(),r=this.getHeight();if(t===this.dataWidth&&r===this.dataHeight)return this.yuvData;var i=t*r,a=new Uint8ClampedArray(i),o=this.top*this.dataWidth+this.left;if(t===this.dataWidth)return Vt.arraycopy(this.yuvData,o,a,0,i),a;for(var c=0;c<r;c++){var u=c*t;Vt.arraycopy(this.yuvData,o,a,u,t),o+=this.dataWidth}return a},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(t,r,i,a){return new e(this.yuvData,this.dataWidth,this.dataHeight,this.left+t,this.top+r,i,a,!1)},e.prototype.renderThumbnail=function(){for(var t=this.getWidth()/e.THUMBNAIL_SCALE_FACTOR,r=this.getHeight()/e.THUMBNAIL_SCALE_FACTOR,i=new Int32Array(t*r),a=this.yuvData,o=this.top*this.dataWidth+this.left,c=0;c<r;c++){for(var u=c*t,h=0;h<t;h++){var p=a[o+h*e.THUMBNAIL_SCALE_FACTOR]&255;i[u+h]=4278190080|p*65793}o+=this.dataWidth*e.THUMBNAIL_SCALE_FACTOR}return i},e.prototype.getThumbnailWidth=function(){return this.getWidth()/e.THUMBNAIL_SCALE_FACTOR},e.prototype.getThumbnailHeight=function(){return this.getHeight()/e.THUMBNAIL_SCALE_FACTOR},e.prototype.reverseHorizontal=function(t,r){for(var i=this.yuvData,a=0,o=this.top*this.dataWidth+this.left;a<r;a++,o+=this.dataWidth)for(var c=o+t/2,u=o,h=o+t-1;u<c;u++,h--){var p=i[u];i[u]=i[h],i[h]=p}},e.prototype.invert=function(){return new mp(this)},e.THUMBNAIL_SCALE_FACTOR=2,e})(Xf);var _j=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})();(function(n){_j(e,n);function e(t,r,i,a,o,c,u){var h=n.call(this,r,i)||this;if(h.dataWidth=a,h.dataHeight=o,h.left=c,h.top=u,t.BYTES_PER_ELEMENT===4){for(var p=r*i,g=new Uint8ClampedArray(p),_=0;_<p;_++){var w=t[_],A=w>>16&255,S=w>>7&510,D=w&255;g[_]=(A+S+D)/4&255}h.luminances=g}else h.luminances=t;if(a===void 0&&(h.dataWidth=r),o===void 0&&(h.dataHeight=i),c===void 0&&(h.left=0),u===void 0&&(h.top=0),h.left+r>h.dataWidth||h.top+i>h.dataHeight)throw new Pe("Crop rectangle does not fit within image data.");return h}return e.prototype.getRow=function(t,r){if(t<0||t>=this.getHeight())throw new Pe("Requested row is outside the image: "+t);var i=this.getWidth();(r==null||r.length<i)&&(r=new Uint8ClampedArray(i));var a=(t+this.top)*this.dataWidth+this.left;return Vt.arraycopy(this.luminances,a,r,0,i),r},e.prototype.getMatrix=function(){var t=this.getWidth(),r=this.getHeight();if(t===this.dataWidth&&r===this.dataHeight)return this.luminances;var i=t*r,a=new Uint8ClampedArray(i),o=this.top*this.dataWidth+this.left;if(t===this.dataWidth)return Vt.arraycopy(this.luminances,o,a,0,i),a;for(var c=0;c<r;c++){var u=c*t;Vt.arraycopy(this.luminances,o,a,u,t),o+=this.dataWidth}return a},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(t,r,i,a){return new e(this.luminances,i,a,this.dataWidth,this.dataHeight,this.left+t,this.top+r)},e.prototype.invert=function(){return new mp(this)},e})(Xf);var xj=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),wj=(function(n){xj(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.forName=function(t){return this.getCharacterSetECIByName(t)},e})(Rn),Ej=(function(){function n(){}return n.ISO_8859_1=Rn.ISO8859_1,n})(),mv,Aj=301,bj=function(n,e){for(var t=1,r=0;r<255;r++)e[r]=t,n[t]=r,t*=2,t>=256&&(t^=Aj);return{LOG:n,ALOG:e}};mv=bj([],[]),mv.LOG;mv.ALOG;var WA;(function(n){n[n.FORCE_NONE=0]="FORCE_NONE",n[n.FORCE_SQUARE=1]="FORCE_SQUARE",n[n.FORCE_RECTANGLE=2]="FORCE_RECTANGLE"})(WA||(WA={}));var QA=129,L3=230,Sj=231,Cj=235,Tj=236,Ij=237,Nj=238,Rj=239,Oj=240,Xm=254,Dj=254,ZA="[)>05",JA="[)>06",eb="",Rt=0,er=1,gr=2,In=3,Un=4,lr=5,Mj=(function(){function n(){}return n.prototype.getEncodingMode=function(){return Rt},n.prototype.encode=function(e){var t=Ii.determineConsecutiveDigitCount(e.getMessage(),e.pos);if(t>=2)e.writeCodeword(this.encodeASCIIDigits(e.getMessage().charCodeAt(e.pos),e.getMessage().charCodeAt(e.pos+1))),e.pos+=2;else{var r=e.getCurrentChar(),i=Ii.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(i!==this.getEncodingMode())switch(i){case lr:e.writeCodeword(Sj),e.signalEncoderChange(lr);return;case er:e.writeCodeword(L3),e.signalEncoderChange(er);return;case In:e.writeCodeword(Nj),e.signalEncoderChange(In);break;case gr:e.writeCodeword(Rj),e.signalEncoderChange(gr);break;case Un:e.writeCodeword(Oj),e.signalEncoderChange(Un);break;default:throw new Error("Illegal mode: "+i)}else Ii.isExtendedASCII(r)?(e.writeCodeword(Cj),e.writeCodeword(r-128+1),e.pos++):(e.writeCodeword(r+1),e.pos++)}},n.prototype.encodeASCIIDigits=function(e,t){if(Ii.isDigit(e)&&Ii.isDigit(t)){var r=(e-48)*10+(t-48);return r+130}throw new Error("not digits: "+e+t)},n})(),Pj=(function(){function n(){}return n.prototype.getEncodingMode=function(){return lr},n.prototype.encode=function(e){var t=new Je;for(t.append(0);e.hasMoreCharacters();){var r=e.getCurrentChar();t.append(r),e.pos++;var i=Ii.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(i!==this.getEncodingMode()){e.signalEncoderChange(Rt);break}}var a=t.length()-1,o=1,c=e.getCodewordCount()+a+o;e.updateSymbolInfo(c);var u=e.getSymbolInfo().getDataCapacity()-c>0;if(e.hasMoreCharacters()||u)if(a<=249)t.setCharAt(0,ut.getCharAt(a));else if(a<=1555)t.setCharAt(0,ut.getCharAt(Math.floor(a/250)+249)),t.insert(1,ut.getCharAt(a%250));else throw new Error("Message length not in valid ranges: "+a);for(var h=0,r=t.length();h<r;h++)e.writeCodeword(this.randomize255State(t.charAt(h).charCodeAt(0),e.getCodewordCount()+1))},n.prototype.randomize255State=function(e,t){var r=149*t%255+1,i=e+r;return i<=255?i:i-256},n})(),qy=(function(){function n(){}return n.prototype.getEncodingMode=function(){return er},n.prototype.encodeMaximal=function(e){for(var t=new Je,r=0,i=e.pos,a=0;e.hasMoreCharacters();){var o=e.getCurrentChar();e.pos++,r=this.encodeChar(o,t),t.length()%3===0&&(i=e.pos,a=t.length())}if(a!==t.length()){var c=Math.floor(t.length()/3*2),u=Math.floor(e.getCodewordCount()+c+1);e.updateSymbolInfo(u);var h=e.getSymbolInfo().getDataCapacity()-u,p=Math.floor(t.length()%3);(p===2&&h!==2||p===1&&(r>3||h!==1))&&(e.pos=i)}t.length()>0&&e.writeCodeword(L3),this.handleEOD(e,t)},n.prototype.encode=function(e){for(var t=new Je;e.hasMoreCharacters();){var r=e.getCurrentChar();e.pos++;var i=this.encodeChar(r,t),a=Math.floor(t.length()/3)*2,o=e.getCodewordCount()+a;e.updateSymbolInfo(o);var c=e.getSymbolInfo().getDataCapacity()-o;if(!e.hasMoreCharacters()){var u=new Je;for(t.length()%3===2&&c!==2&&(i=this.backtrackOneCharacter(e,t,u,i));t.length()%3===1&&(i>3||c!==1);)i=this.backtrackOneCharacter(e,t,u,i);break}var h=t.length();if(h%3===0){var p=Ii.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(p!==this.getEncodingMode()){e.signalEncoderChange(Rt);break}}}this.handleEOD(e,t)},n.prototype.backtrackOneCharacter=function(e,t,r,i){var a=t.length(),o=t.toString().substring(0,a-i);t.setLengthToZero(),t.append(o),e.pos--;var c=e.getCurrentChar();return i=this.encodeChar(c,r),e.resetSymbolInfo(),i},n.prototype.writeNextTriplet=function(e,t){e.writeCodewords(this.encodeToCodewords(t.toString()));var r=t.toString().substring(3);t.setLengthToZero(),t.append(r)},n.prototype.handleEOD=function(e,t){var r=Math.floor(t.length()/3*2),i=t.length()%3,a=e.getCodewordCount()+r;e.updateSymbolInfo(a);var o=e.getSymbolInfo().getDataCapacity()-a;if(i===2){for(t.append("\0");t.length()>=3;)this.writeNextTriplet(e,t);e.hasMoreCharacters()&&e.writeCodeword(Xm)}else if(o===1&&i===1){for(;t.length()>=3;)this.writeNextTriplet(e,t);e.hasMoreCharacters()&&e.writeCodeword(Xm),e.pos--}else if(i===0){for(;t.length()>=3;)this.writeNextTriplet(e,t);(o>0||e.hasMoreCharacters())&&e.writeCodeword(Xm)}else throw new Error("Unexpected case. Please report!");e.signalEncoderChange(Rt)},n.prototype.encodeChar=function(e,t){if(e===32)return t.append(3),1;if(e>=48&&e<=57)return t.append(e-48+4),1;if(e>=65&&e<=90)return t.append(e-65+14),1;if(e<32)return t.append(0),t.append(e),2;if(e<=47)return t.append(1),t.append(e-33),2;if(e<=64)return t.append(1),t.append(e-58+15),2;if(e<=95)return t.append(1),t.append(e-91+22),2;if(e<=127)return t.append(2),t.append(e-96),2;t.append("1");var r=2;return r+=this.encodeChar(e-128,t),r},n.prototype.encodeToCodewords=function(e){var t=1600*e.charCodeAt(0)+40*e.charCodeAt(1)+e.charCodeAt(2)+1,r=t/256,i=t%256,a=new Je;return a.append(r),a.append(i),a.toString()},n})(),kj=(function(){function n(){}return n.prototype.getEncodingMode=function(){return Un},n.prototype.encode=function(e){for(var t=new Je;e.hasMoreCharacters();){var r=e.getCurrentChar();this.encodeChar(r,t),e.pos++;var i=t.length();if(i>=4){e.writeCodewords(this.encodeToCodewords(t.toString()));var a=t.toString().substring(4);t.setLengthToZero(),t.append(a);var o=Ii.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(o!==this.getEncodingMode()){e.signalEncoderChange(Rt);break}}}t.append(ut.getCharAt(31)),this.handleEOD(e,t)},n.prototype.handleEOD=function(e,t){try{var r=t.length();if(r===0)return;if(r===1){e.updateSymbolInfo();var i=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount(),a=e.getRemainingCharacters();if(a>i&&(e.updateSymbolInfo(e.getCodewordCount()+1),i=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount()),a<=i&&i<=2)return}if(r>4)throw new Error("Count must not exceed 4");var o=r-1,c=this.encodeToCodewords(t.toString()),u=!e.hasMoreCharacters(),h=u&&o<=2;if(o<=2){e.updateSymbolInfo(e.getCodewordCount()+o);var i=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount();i>=3&&(h=!1,e.updateSymbolInfo(e.getCodewordCount()+c.length))}h?(e.resetSymbolInfo(),e.pos-=o):e.writeCodewords(c)}finally{e.signalEncoderChange(Rt)}},n.prototype.encodeChar=function(e,t){e>=32&&e<=63?t.append(e):e>=64&&e<=94?t.append(ut.getCharAt(e-64)):Ii.illegalCharacter(ut.getCharAt(e))},n.prototype.encodeToCodewords=function(e){var t=e.length;if(t===0)throw new Error("StringBuilder must not be empty");var r=e.charAt(0).charCodeAt(0),i=t>=2?e.charAt(1).charCodeAt(0):0,a=t>=3?e.charAt(2).charCodeAt(0):0,o=t>=4?e.charAt(3).charCodeAt(0):0,c=(r<<18)+(i<<12)+(a<<6)+o,u=c>>16&255,h=c>>8&255,p=c&255,g=new Je;return g.append(u),t>=2&&g.append(h),t>=3&&g.append(p),g.toString()},n})(),Lj=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),jj=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},wt=(function(){function n(e,t,r,i,a,o,c,u){c===void 0&&(c=0),u===void 0&&(u=0),this.rectangular=e,this.dataCapacity=t,this.errorCodewords=r,this.matrixWidth=i,this.matrixHeight=a,this.dataRegions=o,this.rsBlockData=c,this.rsBlockError=u}return n.lookup=function(e,t,r,i,a){var o,c;t===void 0&&(t=0),r===void 0&&(r=null),i===void 0&&(i=null),a===void 0&&(a=!0);try{for(var u=jj(Vj),h=u.next();!h.done;h=u.next()){var p=h.value;if(!(t===1&&p.rectangular)&&!(t===2&&!p.rectangular)&&!(r!=null&&(p.getSymbolWidth()<r.getWidth()||p.getSymbolHeight()<r.getHeight()))&&!(i!=null&&(p.getSymbolWidth()>i.getWidth()||p.getSymbolHeight()>i.getHeight()))&&e<=p.dataCapacity)return p}}catch(g){o={error:g}}finally{try{h&&!h.done&&(c=u.return)&&c.call(u)}finally{if(o)throw o.error}}if(a)throw new Error("Can't find a symbol arrangement that matches the message. Data codewords: "+e);return null},n.prototype.getHorizontalDataRegions=function(){switch(this.dataRegions){case 1:return 1;case 2:case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},n.prototype.getVerticalDataRegions=function(){switch(this.dataRegions){case 1:case 2:return 1;case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},n.prototype.getSymbolDataWidth=function(){return this.getHorizontalDataRegions()*this.matrixWidth},n.prototype.getSymbolDataHeight=function(){return this.getVerticalDataRegions()*this.matrixHeight},n.prototype.getSymbolWidth=function(){return this.getSymbolDataWidth()+this.getHorizontalDataRegions()*2},n.prototype.getSymbolHeight=function(){return this.getSymbolDataHeight()+this.getVerticalDataRegions()*2},n.prototype.getCodewordCount=function(){return this.dataCapacity+this.errorCodewords},n.prototype.getInterleavedBlockCount=function(){return this.rsBlockData?this.dataCapacity/this.rsBlockData:1},n.prototype.getDataCapacity=function(){return this.dataCapacity},n.prototype.getErrorCodewords=function(){return this.errorCodewords},n.prototype.getDataLengthForInterleavedBlock=function(e){return this.rsBlockData},n.prototype.getErrorLengthForInterleavedBlock=function(e){return this.rsBlockError},n})(),Bj=(function(n){Lj(e,n);function e(){return n.call(this,!1,1558,620,22,22,36,-1,62)||this}return e.prototype.getInterleavedBlockCount=function(){return 10},e.prototype.getDataLengthForInterleavedBlock=function(t){return t<=8?156:155},e})(wt),Vj=[new wt(!1,3,5,8,8,1),new wt(!1,5,7,10,10,1),new wt(!0,5,7,16,6,1),new wt(!1,8,10,12,12,1),new wt(!0,10,11,14,6,2),new wt(!1,12,12,14,14,1),new wt(!0,16,14,24,10,1),new wt(!1,18,14,16,16,1),new wt(!1,22,18,18,18,1),new wt(!0,22,18,16,10,2),new wt(!1,30,20,20,20,1),new wt(!0,32,24,16,14,2),new wt(!1,36,24,22,22,1),new wt(!1,44,28,24,24,1),new wt(!0,49,28,22,14,2),new wt(!1,62,36,14,14,4),new wt(!1,86,42,16,16,4),new wt(!1,114,48,18,18,4),new wt(!1,144,56,20,20,4),new wt(!1,174,68,22,22,4),new wt(!1,204,84,24,24,4,102,42),new wt(!1,280,112,14,14,16,140,56),new wt(!1,368,144,16,16,16,92,36),new wt(!1,456,192,18,18,16,114,48),new wt(!1,576,224,20,20,16,144,56),new wt(!1,696,272,22,22,16,174,68),new wt(!1,816,336,24,24,16,136,56),new wt(!1,1050,408,18,18,36,175,68),new wt(!1,1304,496,20,20,36,163,62),new Bj],Fj=(function(){function n(e){this.msg=e,this.pos=0,this.skipAtEnd=0;for(var t=e.split("").map(function(c){return c.charCodeAt(0)}),r=new Je,i=0,a=t.length;i<a;i++){var o=String.fromCharCode(t[i]&255);if(o==="?"&&e.charAt(i)!=="?")throw new Error("Message contains characters outside ISO-8859-1 encoding.");r.append(o)}this.msg=r.toString(),this.shape=0,this.codewords=new Je,this.newEncoding=-1}return n.prototype.setSymbolShape=function(e){this.shape=e},n.prototype.setSizeConstraints=function(e,t){this.minSize=e,this.maxSize=t},n.prototype.getMessage=function(){return this.msg},n.prototype.setSkipAtEnd=function(e){this.skipAtEnd=e},n.prototype.getCurrentChar=function(){return this.msg.charCodeAt(this.pos)},n.prototype.getCurrent=function(){return this.msg.charCodeAt(this.pos)},n.prototype.getCodewords=function(){return this.codewords},n.prototype.writeCodewords=function(e){this.codewords.append(e)},n.prototype.writeCodeword=function(e){this.codewords.append(e)},n.prototype.getCodewordCount=function(){return this.codewords.length()},n.prototype.getNewEncoding=function(){return this.newEncoding},n.prototype.signalEncoderChange=function(e){this.newEncoding=e},n.prototype.resetEncoderSignal=function(){this.newEncoding=-1},n.prototype.hasMoreCharacters=function(){return this.pos<this.getTotalMessageCharCount()},n.prototype.getTotalMessageCharCount=function(){return this.msg.length-this.skipAtEnd},n.prototype.getRemainingCharacters=function(){return this.getTotalMessageCharCount()-this.pos},n.prototype.getSymbolInfo=function(){return this.symbolInfo},n.prototype.updateSymbolInfo=function(e){e===void 0&&(e=this.getCodewordCount()),(this.symbolInfo==null||e>this.symbolInfo.getDataCapacity())&&(this.symbolInfo=wt.lookup(e,this.shape,this.minSize,this.maxSize,!0))},n.prototype.resetSymbolInfo=function(){this.symbolInfo=null},n})(),Uj=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),zj=(function(n){Uj(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getEncodingMode=function(){return In},e.prototype.encode=function(t){for(var r=new Je;t.hasMoreCharacters();){var i=t.getCurrentChar();t.pos++,this.encodeChar(i,r);var a=r.length();if(a%3===0){this.writeNextTriplet(t,r);var o=Ii.lookAheadTest(t.getMessage(),t.pos,this.getEncodingMode());if(o!==this.getEncodingMode()){t.signalEncoderChange(Rt);break}}}this.handleEOD(t,r)},e.prototype.encodeChar=function(t,r){switch(t){case 13:r.append(0);break;case 42:r.append(1);break;case 62:r.append(2);break;case 32:r.append(3);break;default:t>=48&&t<=57?r.append(t-48+4):t>=65&&t<=90?r.append(t-65+14):Ii.illegalCharacter(ut.getCharAt(t));break}return 1},e.prototype.handleEOD=function(t,r){t.updateSymbolInfo();var i=t.getSymbolInfo().getDataCapacity()-t.getCodewordCount(),a=r.length();t.pos-=a,(t.getRemainingCharacters()>1||i>1||t.getRemainingCharacters()!==i)&&t.writeCodeword(Dj),t.getNewEncoding()<0&&t.signalEncoderChange(Rt)},e})(qy),Hj=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Gj=(function(n){Hj(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getEncodingMode=function(){return gr},e.prototype.encodeChar=function(t,r){if(t===32)return r.append(3),1;if(t>=48&&t<=57)return r.append(t-48+4),1;if(t>=97&&t<=122)return r.append(t-97+14),1;if(t<32)return r.append(0),r.append(t),2;if(t<=47)return r.append(1),r.append(t-33),2;if(t<=64)return r.append(1),r.append(t-58+15),2;if(t>=91&&t<=95)return r.append(1),r.append(t-91+22),2;if(t===96)return r.append(2),r.append(0),2;if(t<=90)return r.append(2),r.append(t-65+1),2;if(t<=127)return r.append(2),r.append(t-123+27),2;r.append("1");var i=2;return i+=this.encodeChar(t-128,r),i},e})(qy),Ii=(function(){function n(){}return n.randomize253State=function(e){var t=149*e%253+1,r=QA+t;return r<=254?r:r-254},n.encodeHighLevel=function(e,t,r,i,a){t===void 0&&(t=0),r===void 0&&(r=null),i===void 0&&(i=null),a===void 0&&(a=!1);var o=new qy,c=[new Mj,o,new Gj,new zj,new kj,new Pj],u=new Fj(e);u.setSymbolShape(t),u.setSizeConstraints(r,i),e.startsWith(ZA)&&e.endsWith(eb)?(u.writeCodeword(Tj),u.setSkipAtEnd(2),u.pos+=ZA.length):e.startsWith(JA)&&e.endsWith(eb)&&(u.writeCodeword(Ij),u.setSkipAtEnd(2),u.pos+=JA.length);var h=Rt;for(a&&(o.encodeMaximal(u),h=u.getNewEncoding(),u.resetEncoderSignal());u.hasMoreCharacters();)c[h].encode(u),u.getNewEncoding()>=0&&(h=u.getNewEncoding(),u.resetEncoderSignal());var p=u.getCodewordCount();u.updateSymbolInfo();var g=u.getSymbolInfo().getDataCapacity();p<g&&h!==Rt&&h!==lr&&h!==Un&&u.writeCodeword("");var _=u.getCodewords();for(_.length()<g&&_.append(QA);_.length()<g;)_.append(this.randomize253State(_.length()+1));return u.getCodewords().toString()},n.lookAheadTest=function(e,t,r){var i=this.lookAheadTestIntern(e,t,r);if(r===In&&i===In){for(var a=Math.min(t+3,e.length),o=t;o<a;o++)if(!this.isNativeX12(e.charCodeAt(o)))return Rt}else if(r===Un&&i===Un){for(var a=Math.min(t+4,e.length),o=t;o<a;o++)if(!this.isNativeEDIFACT(e.charCodeAt(o)))return Rt}return i},n.lookAheadTestIntern=function(e,t,r){if(t>=e.length)return r;var i;r===Rt?i=[0,1,1,1,1,1.25]:(i=[1,2,2,2,2,2.25],i[r]=0);for(var a=0,o=new Uint8Array(6),c=[];;){if(t+a===e.length){On.fill(o,0),On.fill(c,0);var u=this.findMinimums(i,c,et.MAX_VALUE,o),h=this.getMinimumCount(o);if(c[Rt]===u)return Rt;if(h===1){if(o[lr]>0)return lr;if(o[Un]>0)return Un;if(o[gr]>0)return gr;if(o[In]>0)return In}return er}var p=e.charCodeAt(t+a);if(a++,this.isDigit(p)?i[Rt]+=.5:this.isExtendedASCII(p)?(i[Rt]=Math.ceil(i[Rt]),i[Rt]+=2):(i[Rt]=Math.ceil(i[Rt]),i[Rt]++),this.isNativeC40(p)?i[er]+=2/3:this.isExtendedASCII(p)?i[er]+=8/3:i[er]+=4/3,this.isNativeText(p)?i[gr]+=2/3:this.isExtendedASCII(p)?i[gr]+=8/3:i[gr]+=4/3,this.isNativeX12(p)?i[In]+=2/3:this.isExtendedASCII(p)?i[In]+=13/3:i[In]+=10/3,this.isNativeEDIFACT(p)?i[Un]+=3/4:this.isExtendedASCII(p)?i[Un]+=17/4:i[Un]+=13/4,this.isSpecialB256(p)?i[lr]+=4:i[lr]++,a>=4){if(On.fill(o,0),On.fill(c,0),this.findMinimums(i,c,et.MAX_VALUE,o),c[Rt]<this.min(c[lr],c[er],c[gr],c[In],c[Un]))return Rt;if(c[lr]<c[Rt]||c[lr]+1<this.min(c[er],c[gr],c[In],c[Un]))return lr;if(c[Un]+1<this.min(c[lr],c[er],c[gr],c[In],c[Rt]))return Un;if(c[gr]+1<this.min(c[lr],c[er],c[Un],c[In],c[Rt]))return gr;if(c[In]+1<this.min(c[lr],c[er],c[Un],c[gr],c[Rt]))return In;if(c[er]+1<this.min(c[Rt],c[lr],c[Un],c[gr])){if(c[er]<c[In])return er;if(c[er]===c[In]){for(var g=t+a+1;g<e.length;){var _=e.charCodeAt(g);if(this.isX12TermSep(_))return In;if(!this.isNativeX12(_))break;g++}return er}}}}},n.min=function(e,t,r,i,a){var o=Math.min(e,Math.min(t,Math.min(r,i)));return a===void 0?o:Math.min(o,a)},n.findMinimums=function(e,t,r,i){for(var a=0;a<6;a++){var o=t[a]=Math.ceil(e[a]);r>o&&(r=o,On.fill(i,0)),r===o&&(i[a]=i[a]+1)}return r},n.getMinimumCount=function(e){for(var t=0,r=0;r<6;r++)t+=e[r];return t||0},n.isDigit=function(e){return e>=48&&e<=57},n.isExtendedASCII=function(e){return e>=128&&e<=255},n.isNativeC40=function(e){return e===32||e>=48&&e<=57||e>=65&&e<=90},n.isNativeText=function(e){return e===32||e>=48&&e<=57||e>=97&&e<=122},n.isNativeX12=function(e){return this.isX12TermSep(e)||e===32||e>=48&&e<=57||e>=65&&e<=90},n.isX12TermSep=function(e){return e===13||e===42||e===62},n.isNativeEDIFACT=function(e){return e>=32&&e<=94},n.isSpecialB256=function(e){return!1},n.determineConsecutiveDigitCount=function(e,t){t===void 0&&(t=0);for(var r=e.length,i=t;i<r&&this.isDigit(e.charCodeAt(i));)i++;return i-t},n.illegalCharacter=function(e){var t=et.toHexString(e.charCodeAt(0));throw t="0000".substring(0,4-t.length)+t,new Error("Illegal character: "+e+" (0x"+t+")")},n})(),Ym=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},tb=(function(){function n(e){this.charset=e,this.name=e.name}return n.prototype.canEncode=function(e){try{return ui.encode(e,this.charset)!=null}catch{return!1}},n})(),qj=(function(){function n(e,t,r){var i,a,o,c,u,h;this.ENCODERS=["IBM437","ISO-8859-2","ISO-8859-3","ISO-8859-4","ISO-8859-5","ISO-8859-6","ISO-8859-7","ISO-8859-8","ISO-8859-9","ISO-8859-10","ISO-8859-11","ISO-8859-13","ISO-8859-14","ISO-8859-15","ISO-8859-16","windows-1250","windows-1251","windows-1252","windows-1256","Shift_JIS"].map(function(N){return new tb(wj.forName(N))}),this.encoders=[];var p=[];p.push(new tb(Ej.ISO_8859_1));for(var g=t!=null&&t.name.startsWith("UTF"),_=0;_<e.length;_++){var w=!1;try{for(var A=(i=void 0,Ym(p)),S=A.next();!S.done;S=A.next()){var D=S.value,C=e.charAt(_),P=C.charCodeAt(0);if(P===r||D.canEncode(C)){w=!0;break}}}catch(N){i={error:N}}finally{try{S&&!S.done&&(a=A.return)&&a.call(A)}finally{if(i)throw i.error}}if(!w)try{for(var V=(o=void 0,Ym(this.ENCODERS)),H=V.next();!H.done;H=V.next()){var D=H.value;if(D.canEncode(e.charAt(_))){p.push(D),w=!0;break}}}catch(N){o={error:N}}finally{try{H&&!H.done&&(c=V.return)&&c.call(V)}finally{if(o)throw o.error}}w||(g=!0)}if(p.length===1&&!g)this.encoders=[p[0]];else{this.encoders=[];var X=0;try{for(var F=Ym(p),I=F.next();!I.done;I=F.next()){var D=I.value;this.encoders[X++]=D}}catch(N){u={error:N}}finally{try{I&&!I.done&&(h=F.return)&&h.call(F)}finally{if(u)throw u.error}}}var b=-1;if(t!=null){for(var _=0;_<this.encoders.length;_++)if(this.encoders[_]!=null&&t.name===this.encoders[_].name){b=_;break}}this.priorityEncoderIndex=b}return n.prototype.length=function(){return this.encoders.length},n.prototype.getCharsetName=function(e){if(!(e<this.length()))throw new Error("index must be less than length");return this.encoders[e].name},n.prototype.getCharset=function(e){if(!(e<this.length()))throw new Error("index must be less than length");return this.encoders[e].charset},n.prototype.getECIValue=function(e){return this.encoders[e].charset.getValueIdentifier()},n.prototype.getPriorityEncoderIndex=function(){return this.priorityEncoderIndex},n.prototype.canEncode=function(e,t){if(!(t<this.length()))throw new Error("index must be less than length");return!0},n.prototype.encode=function(e,t){if(!(t<this.length()))throw new Error("index must be less than length");return ui.encode(ut.getCharAt(e),this.encoders[t].name)},n})(),$j=3,Xj=(function(){function n(e,t,r){this.fnc1=r;var i=new qj(e,t,r);if(i.length()===1)for(var a=0;a<this.bytes.length;a++){var o=e.charAt(a).charCodeAt(0);this.bytes[a]=o===r?1e3:o}else this.bytes=this.encodeMinimally(e,i,r)}return n.prototype.getFNC1Character=function(){return this.fnc1},n.prototype.length=function(){return this.bytes.length},n.prototype.haveNCharacters=function(e,t){if(e+t-1>=this.bytes.length)return!1;for(var r=0;r<t;r++)if(this.isECI(e+r))return!1;return!0},n.prototype.charAt=function(e){if(e<0||e>=this.length())throw new Error(""+e);if(this.isECI(e))throw new Error("value at "+e+" is not a character but an ECI");return this.isFNC1(e)?this.fnc1:this.bytes[e]},n.prototype.subSequence=function(e,t){if(e<0||e>t||t>this.length())throw new Error(""+e);for(var r=new Je,i=e;i<t;i++){if(this.isECI(i))throw new Error("value at "+i+" is not a character but an ECI");r.append(this.charAt(i))}return r.toString()},n.prototype.isECI=function(e){if(e<0||e>=this.length())throw new Error(""+e);return this.bytes[e]>255&&this.bytes[e]<=999},n.prototype.isFNC1=function(e){if(e<0||e>=this.length())throw new Error(""+e);return this.bytes[e]===1e3},n.prototype.getECIValue=function(e){if(e<0||e>=this.length())throw new Error(""+e);if(!this.isECI(e))throw new Error("value at "+e+" is not an ECI but a character");return this.bytes[e]-256},n.prototype.addEdge=function(e,t,r){(e[t][r.encoderIndex]==null||e[t][r.encoderIndex].cachedTotalSize>r.cachedTotalSize)&&(e[t][r.encoderIndex]=r)},n.prototype.addEdges=function(e,t,r,i,a,o){var c=e.charAt(i).charCodeAt(0),u=0,h=t.length();t.getPriorityEncoderIndex()>=0&&(c===o||t.canEncode(c,t.getPriorityEncoderIndex()))&&(u=t.getPriorityEncoderIndex(),h=u+1);for(var p=u;p<h;p++)(c===o||t.canEncode(c,p))&&this.addEdge(r,i+1,new nb(c,t,p,a,o))},n.prototype.encodeMinimally=function(e,t,r){var i=e.length,a=new nb[i+1][t.length()];this.addEdges(e,t,a,0,null,r);for(var o=1;o<=i;o++){for(var c=0;c<t.length();c++)a[o][c]!=null&&o<i&&this.addEdges(e,t,a,o,a[o][c],r);for(var c=0;c<t.length();c++)a[o-1][c]=null}for(var u=-1,h=et.MAX_VALUE,c=0;c<t.length();c++)if(a[i][c]!=null){var p=a[i][c];p.cachedTotalSize<h&&(h=p.cachedTotalSize,u=c)}if(u<0)throw new Error('Failed to encode "'+e+'"');for(var g=[],_=a[i][u];_!=null;){if(_.isFNC1())g.unshift(1e3);else for(var w=t.encode(_.c,_.encoderIndex),o=w.length-1;o>=0;o--)g.unshift(w[o]&255);var A=_.previous===null?0:_.previous.encoderIndex;A!==_.encoderIndex&&g.unshift(256+t.getECIValue(_.encoderIndex)),_=_.previous}for(var S=[],o=0;o<S.length;o++)S[o]=g[o];return S},n})(),nb=(function(){function n(e,t,r,i,a){this.c=e,this.encoderSet=t,this.encoderIndex=r,this.previous=i,this.fnc1=a,this.c=e===a?1e3:e;var o=this.isFNC1()?1:t.encode(e,r).length,c=i===null?0:i.encoderIndex;c!==r&&(o+=$j),i!=null&&(o+=i.cachedTotalSize),this.cachedTotalSize=o}return n.prototype.isFNC1=function(){return this.c===1e3},n})(),Yj=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})();var rb;(function(n){n[n.ASCII=0]="ASCII",n[n.C40=1]="C40",n[n.TEXT=2]="TEXT",n[n.X12=3]="X12",n[n.EDF=4]="EDF",n[n.B256=5]="B256"})(rb||(rb={}));(function(n){Yj(e,n);function e(t,r,i,a,o){var c=n.call(this,t,r,i)||this;return c.shape=a,c.macroId=o,c}return e.prototype.getMacroId=function(){return this.macroId},e.prototype.getShapeHint=function(){return this.shape},e})(Xj);var Kj=(function(){function n(){}return n.prototype.isCompact=function(){return this.compact},n.prototype.setCompact=function(e){this.compact=e},n.prototype.getSize=function(){return this.size},n.prototype.setSize=function(e){this.size=e},n.prototype.getLayers=function(){return this.layers},n.prototype.setLayers=function(e){this.layers=e},n.prototype.getCodeWords=function(){return this.codeWords},n.prototype.setCodeWords=function(e){this.codeWords=e},n.prototype.getMatrix=function(){return this.matrix},n.prototype.setMatrix=function(e){this.matrix=e},n})(),ib=(function(){function n(){}return n.singletonList=function(e){return[e]},n.min=function(e,t){return e.sort(t)[0]},n})(),Wj=(function(){function n(e){this.previous=e}return n.prototype.getPrevious=function(){return this.previous},n})(),Qj=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),$y=(function(n){Qj(e,n);function e(t,r,i){var a=n.call(this,t)||this;return a.value=r,a.bitCount=i,a}return e.prototype.appendTo=function(t,r){t.appendBits(this.value,this.bitCount)},e.prototype.add=function(t,r){return new e(this,t,r)},e.prototype.addBinaryShift=function(t,r){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new e(this,t,r)},e.prototype.toString=function(){var t=this.value&(1<<this.bitCount)-1;return t|=1<<this.bitCount,"<"+et.toBinaryString(t|1<<this.bitCount).substring(1)+">"},e})(Wj),Zj=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Jj=(function(n){Zj(e,n);function e(t,r,i){var a=n.call(this,t,0,0)||this;return a.binaryShiftStart=r,a.binaryShiftByteCount=i,a}return e.prototype.appendTo=function(t,r){for(var i=0;i<this.binaryShiftByteCount;i++)(i===0||i===31&&this.binaryShiftByteCount<=62)&&(t.appendBits(31,5),this.binaryShiftByteCount>62?t.appendBits(this.binaryShiftByteCount-31,16):i===0?t.appendBits(Math.min(this.binaryShiftByteCount,31),5):t.appendBits(this.binaryShiftByteCount-31,5)),t.appendBits(r[this.binaryShiftStart+i],8)},e.prototype.addBinaryShift=function(t,r){return new e(this,t,r)},e.prototype.toString=function(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"},e})($y);function eB(n,e,t){return new Jj(n,e,t)}function Yu(n,e,t){return new $y(n,e,t)}var tB=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],Ws=0,O0=1,li=2,j3=3,fa=4,nB=new $y(null,0,0),Km=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])],rB=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};function iB(n){var e,t;try{for(var r=rB(n),i=r.next();!i.done;i=r.next()){var a=i.value;On.fill(a,-1)}}catch(o){e={error:o}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}return n[Ws][fa]=0,n[O0][fa]=0,n[O0][Ws]=28,n[j3][fa]=0,n[li][fa]=0,n[li][Ws]=15,n}var B3=iB(On.createInt32Array(6,6)),aB=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},sB=(function(){function n(e,t,r,i){this.token=e,this.mode=t,this.binaryShiftByteCount=r,this.bitCount=i}return n.prototype.getMode=function(){return this.mode},n.prototype.getToken=function(){return this.token},n.prototype.getBinaryShiftByteCount=function(){return this.binaryShiftByteCount},n.prototype.getBitCount=function(){return this.bitCount},n.prototype.latchAndAppend=function(e,t){var r=this.bitCount,i=this.token;if(e!==this.mode){var a=Km[this.mode][e];i=Yu(i,a&65535,a>>16),r+=a>>16}var o=e===li?4:5;return i=Yu(i,t,o),new n(i,e,0,r+o)},n.prototype.shiftAndAppend=function(e,t){var r=this.token,i=this.mode===li?4:5;return r=Yu(r,B3[this.mode][e],i),r=Yu(r,t,5),new n(r,this.mode,0,this.bitCount+i+5)},n.prototype.addBinaryShiftChar=function(e){var t=this.token,r=this.mode,i=this.bitCount;if(this.mode===fa||this.mode===li){var a=Km[r][Ws];t=Yu(t,a&65535,a>>16),i+=a>>16,r=Ws}var o=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,c=new n(t,r,this.binaryShiftByteCount+1,i+o);return c.binaryShiftByteCount===2078&&(c=c.endBinaryShift(e+1)),c},n.prototype.endBinaryShift=function(e){if(this.binaryShiftByteCount===0)return this;var t=this.token;return t=eB(t,e-this.binaryShiftByteCount,this.binaryShiftByteCount),new n(t,this.mode,0,this.bitCount)},n.prototype.isBetterThanOrEqualTo=function(e){var t=this.bitCount+(Km[this.mode][e.mode]>>16);return this.binaryShiftByteCount<e.binaryShiftByteCount?t+=n.calculateBinaryShiftCost(e)-n.calculateBinaryShiftCost(this):this.binaryShiftByteCount>e.binaryShiftByteCount&&e.binaryShiftByteCount>0&&(t+=10),t<=e.bitCount},n.prototype.toBitArray=function(e){for(var t,r,i=[],a=this.endBinaryShift(e.length).token;a!==null;a=a.getPrevious())i.unshift(a);var o=new $n;try{for(var c=aB(i),u=c.next();!u.done;u=c.next()){var h=u.value;h.appendTo(o,e)}}catch(p){t={error:p}}finally{try{u&&!u.done&&(r=c.return)&&r.call(c)}finally{if(t)throw t.error}}return o},n.prototype.toString=function(){return ut.format("%s bits=%d bytes=%d",tB[this.mode],this.bitCount,this.binaryShiftByteCount)},n.calculateBinaryShiftCost=function(e){return e.binaryShiftByteCount>62?21:e.binaryShiftByteCount>31?20:e.binaryShiftByteCount>0?10:0},n.INITIAL_STATE=new n(nB,Ws,0,0),n})();function oB(n){var e=ut.getCharCode(" "),t=ut.getCharCode("."),r=ut.getCharCode(",");n[Ws][e]=1;for(var i=ut.getCharCode("Z"),a=ut.getCharCode("A"),o=a;o<=i;o++)n[Ws][o]=o-a+2;n[O0][e]=1;for(var c=ut.getCharCode("z"),u=ut.getCharCode("a"),o=u;o<=c;o++)n[O0][o]=o-u+2;n[li][e]=1;for(var h=ut.getCharCode("9"),p=ut.getCharCode("0"),o=p;o<=h;o++)n[li][o]=o-p+2;n[li][r]=12,n[li][t]=13;for(var g=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""],_=0;_<g.length;_++)n[j3][ut.getCharCode(g[_])]=_;for(var w=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"],_=0;_<w.length;_++)ut.getCharCode(w[_])>0&&(n[fa][ut.getCharCode(w[_])]=_);return n}var Wm=oB(On.createInt32Array(5,256)),Pd=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},lB=(function(){function n(e){this.text=e}return n.prototype.encode=function(){for(var e=ut.getCharCode(" "),t=ut.getCharCode(`
`),r=ib.singletonList(sB.INITIAL_STATE),i=0;i<this.text.length;i++){var a=void 0,o=i+1<this.text.length?this.text[i+1]:0;switch(this.text[i]){case ut.getCharCode("\r"):a=o===t?2:0;break;case ut.getCharCode("."):a=o===e?3:0;break;case ut.getCharCode(","):a=o===e?4:0;break;case ut.getCharCode(":"):a=o===e?5:0;break;default:a=0}a>0?(r=n.updateStateListForPair(r,i,a),i++):r=this.updateStateListForChar(r,i)}var c=ib.min(r,function(u,h){return u.getBitCount()-h.getBitCount()});return c.toBitArray(this.text)},n.prototype.updateStateListForChar=function(e,t){var r,i,a=[];try{for(var o=Pd(e),c=o.next();!c.done;c=o.next()){var u=c.value;this.updateStateForChar(u,t,a)}}catch(h){r={error:h}}finally{try{c&&!c.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}return n.simplifyStates(a)},n.prototype.updateStateForChar=function(e,t,r){for(var i=this.text[t]&255,a=Wm[e.getMode()][i]>0,o=null,c=0;c<=fa;c++){var u=Wm[c][i];if(u>0){if(o==null&&(o=e.endBinaryShift(t)),!a||c===e.getMode()||c===li){var h=o.latchAndAppend(c,u);r.push(h)}if(!a&&B3[e.getMode()][c]>=0){var p=o.shiftAndAppend(c,u);r.push(p)}}}if(e.getBinaryShiftByteCount()>0||Wm[e.getMode()][i]===0){var g=e.addBinaryShiftChar(t);r.push(g)}},n.updateStateListForPair=function(e,t,r){var i,a,o=[];try{for(var c=Pd(e),u=c.next();!u.done;u=c.next()){var h=u.value;this.updateStateForPair(h,t,r,o)}}catch(p){i={error:p}}finally{try{u&&!u.done&&(a=c.return)&&a.call(c)}finally{if(i)throw i.error}}return this.simplifyStates(o)},n.updateStateForPair=function(e,t,r,i){var a=e.endBinaryShift(t);if(i.push(a.latchAndAppend(fa,r)),e.getMode()!==fa&&i.push(a.shiftAndAppend(fa,r)),r===3||r===4){var o=a.latchAndAppend(li,16-r).latchAndAppend(li,1);i.push(o)}if(e.getBinaryShiftByteCount()>0){var c=e.addBinaryShiftChar(t).addBinaryShiftChar(t+1);i.push(c)}},n.simplifyStates=function(e){var t,r,i,a,o=[];try{for(var c=Pd(e),u=c.next();!u.done;u=c.next()){var h=u.value,p=!0,g=function(D){if(D.isBetterThanOrEqualTo(h))return p=!1,"break";h.isBetterThanOrEqualTo(D)&&(o=o.filter(function(C){return C!==D}))};try{for(var _=(i=void 0,Pd(o)),w=_.next();!w.done;w=_.next()){var A=w.value,S=g(A);if(S==="break")break}}catch(D){i={error:D}}finally{try{w&&!w.done&&(a=_.return)&&a.call(_)}finally{if(i)throw i.error}}p&&o.push(h)}}catch(D){t={error:D}}finally{try{u&&!u.done&&(r=c.return)&&r.call(c)}finally{if(t)throw t.error}}return o},n})(),cB=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};(function(){function n(){}return n.encodeBytes=function(e){return n.encode(e,n.DEFAULT_EC_PERCENT,n.DEFAULT_AZTEC_LAYERS)},n.encode=function(e,t,r){var i=new lB(e).encode(),a=et.truncDivision(i.getSize()*t,100)+11,o=i.getSize()+a,c,u,h,p,g;if(r!==n.DEFAULT_AZTEC_LAYERS){if(c=r<0,u=Math.abs(r),u>(c?n.MAX_NB_BITS_COMPACT:n.MAX_NB_BITS))throw new Pe(ut.format("Illegal value %s for layers",r));h=n.totalBitsInLayer(u,c),p=n.WORD_SIZE[u];var _=h-h%p;if(g=n.stuffBits(i,p),g.getSize()+a>_)throw new Pe("Data to large for user specified layer");if(c&&g.getSize()>p*64)throw new Pe("Data to large for user specified layer")}else{p=0,g=null;for(var w=0;;w++){if(w>n.MAX_NB_BITS)throw new Pe("Data too large for an Aztec code");if(c=w<=3,u=c?w+1:w,h=n.totalBitsInLayer(u,c),!(o>h)){(g==null||p!==n.WORD_SIZE[u])&&(p=n.WORD_SIZE[u],g=n.stuffBits(i,p));var _=h-h%p;if(!(c&&g.getSize()>p*64)&&g.getSize()+a<=_)break}}}var A=n.generateCheckWords(g,h,p),S=g.getSize()/p,D=n.generateModeMessage(c,u,S),C=(c?11:14)+u*4,P=new Int32Array(C),V;if(c){V=C;for(var w=0;w<P.length;w++)P[w]=w}else{V=C+1+2*et.truncDivision(et.truncDivision(C,2)-1,15);for(var H=et.truncDivision(C,2),X=et.truncDivision(V,2),w=0;w<H;w++){var F=w+et.truncDivision(w,15);P[H-w-1]=X-F-1,P[H+w]=X+F+1}}for(var I=new _a(V),w=0,b=0;w<u;w++){for(var N=(u-w)*4+(c?9:12),R=0;R<N;R++)for(var M=R*2,B=0;B<2;B++)A.get(b+M+B)&&I.set(P[w*2+B],P[w*2+R]),A.get(b+N*2+M+B)&&I.set(P[w*2+R],P[C-1-w*2-B]),A.get(b+N*4+M+B)&&I.set(P[C-1-w*2-B],P[C-1-w*2-R]),A.get(b+N*6+M+B)&&I.set(P[C-1-w*2-R],P[w*2+B]);b+=N*8}if(n.drawModeMessage(I,c,V,D),c)n.drawBullsEye(I,et.truncDivision(V,2),5);else{n.drawBullsEye(I,et.truncDivision(V,2),7);for(var w=0,R=0;w<et.truncDivision(C,2)-1;w+=15,R+=16)for(var B=et.truncDivision(V,2)&1;B<V;B+=2)I.set(et.truncDivision(V,2)-R,B),I.set(et.truncDivision(V,2)+R,B),I.set(B,et.truncDivision(V,2)-R),I.set(B,et.truncDivision(V,2)+R)}var L=new Kj;return L.setCompact(c),L.setSize(V),L.setLayers(u),L.setCodeWords(S),L.setMatrix(I),L},n.drawBullsEye=function(e,t,r){for(var i=0;i<r;i+=2)for(var a=t-i;a<=t+i;a++)e.set(a,t-i),e.set(a,t+i),e.set(t-i,a),e.set(t+i,a);e.set(t-r,t-r),e.set(t-r+1,t-r),e.set(t-r,t-r+1),e.set(t+r,t-r),e.set(t+r,t-r+1),e.set(t+r,t+r-1)},n.generateModeMessage=function(e,t,r){var i=new $n;return e?(i.appendBits(t-1,2),i.appendBits(r-1,6),i=n.generateCheckWords(i,28,4)):(i.appendBits(t-1,5),i.appendBits(r-1,11),i=n.generateCheckWords(i,40,4)),i},n.drawModeMessage=function(e,t,r,i){var a=et.truncDivision(r,2);if(t)for(var o=0;o<7;o++){var c=a-3+o;i.get(o)&&e.set(c,a-5),i.get(o+7)&&e.set(a+5,c),i.get(20-o)&&e.set(c,a+5),i.get(27-o)&&e.set(a-5,c)}else for(var o=0;o<10;o++){var c=a-5+o+et.truncDivision(o,5);i.get(o)&&e.set(c,a-7),i.get(o+10)&&e.set(a+7,c),i.get(29-o)&&e.set(c,a+7),i.get(39-o)&&e.set(a-7,c)}},n.generateCheckWords=function(e,t,r){var i,a,o=e.getSize()/r,c=new k3(n.getGF(r)),u=et.truncDivision(t,r),h=n.bitsToWords(e,r,u);c.encode(h,u-o);var p=t%r,g=new $n;g.appendBits(0,p);try{for(var _=cB(Array.from(h)),w=_.next();!w.done;w=_.next()){var A=w.value;g.appendBits(A,r)}}catch(S){i={error:S}}finally{try{w&&!w.done&&(a=_.return)&&a.call(_)}finally{if(i)throw i.error}}return g},n.bitsToWords=function(e,t,r){var i=new Int32Array(r),a,o;for(a=0,o=e.getSize()/t;a<o;a++){for(var c=0,u=0;u<t;u++)c|=e.get(a*t+u)?1<<t-u-1:0;i[a]=c}return i},n.getGF=function(e){switch(e){case 4:return Tr.AZTEC_PARAM;case 6:return Tr.AZTEC_DATA_6;case 8:return Tr.AZTEC_DATA_8;case 10:return Tr.AZTEC_DATA_10;case 12:return Tr.AZTEC_DATA_12;default:throw new Pe("Unsupported word size "+e)}},n.stuffBits=function(e,t){for(var r=new $n,i=e.getSize(),a=(1<<t)-2,o=0;o<i;o+=t){for(var c=0,u=0;u<t;u++)(o+u>=i||e.get(o+u))&&(c|=1<<t-1-u);(c&a)===a?(r.appendBits(c&a,t),o--):(c&a)===0?(r.appendBits(c|1,t),o--):r.appendBits(c,t)}return r},n.totalBitsInLayer=function(e,t){return((t?88:112)+16*e)*e},n.DEFAULT_EC_PERCENT=33,n.DEFAULT_AZTEC_LAYERS=0,n.MAX_NB_BITS=32,n.MAX_NB_BITS_COMPACT=4,n.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]),n})();var uB=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),fB=(function(n){uB(e,n);function e(t){var r=n.call(this,t.width,t.height)||this;return r.canvas=t,r.tempCanvasElement=null,r.buffer=e.makeBufferFromCanvasImageData(t),r}return e.makeBufferFromCanvasImageData=function(t){var r;try{r=t.getContext("2d",{willReadFrequently:!0})}catch{r=t.getContext("2d")}if(!r)throw new Error("Couldn't get canvas context.");var i=r.getImageData(0,0,t.width,t.height);return e.toGrayscaleBuffer(i.data,t.width,t.height)},e.toGrayscaleBuffer=function(t,r,i){for(var a=new Uint8ClampedArray(r*i),o=0,c=0,u=t.length;o<u;o+=4,c++){var h=void 0,p=t[o+3];if(p===0)h=255;else{var g=t[o],_=t[o+1],w=t[o+2];h=306*g+601*_+117*w+512>>10}a[c]=h}return a},e.prototype.getRow=function(t,r){if(t<0||t>=this.getHeight())throw new Pe("Requested row is outside the image: "+t);var i=this.getWidth(),a=t*i;return r===null?r=this.buffer.slice(a,a+i):(r.length<i&&(r=new Uint8ClampedArray(i)),r.set(this.buffer.slice(a,a+i))),r},e.prototype.getMatrix=function(){return this.buffer},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(t,r,i,a){return n.prototype.crop.call(this,t,r,i,a),this},e.prototype.isRotateSupported=function(){return!0},e.prototype.rotateCounterClockwise=function(){return this.rotate(-90),this},e.prototype.rotateCounterClockwise45=function(){return this.rotate(-45),this},e.prototype.invert=function(){return new mp(this)},e.prototype.getTempCanvasElement=function(){if(this.tempCanvasElement===null){var t=this.canvas.ownerDocument.createElement("canvas");t.width=this.canvas.width,t.height=this.canvas.height,this.tempCanvasElement=t}return this.tempCanvasElement},e.prototype.rotate=function(t){var r=this.getTempCanvasElement();if(!r)throw new Error("Could not create a Canvas element.");var i=t*e.DEGREE_TO_RADIANS,a=this.canvas.width,o=this.canvas.height,c=Math.ceil(Math.abs(Math.cos(i))*a+Math.abs(Math.sin(i))*o),u=Math.ceil(Math.abs(Math.sin(i))*a+Math.abs(Math.cos(i))*o);r.width=c,r.height=u;var h=r.getContext("2d");if(!h)throw new Error("Could not create a Canvas Context element.");return h.translate(c/2,u/2),h.rotate(i),h.drawImage(this.canvas,a/-2,o/-2),this.buffer=e.makeBufferFromCanvasImageData(r),this},e.DEGREE_TO_RADIANS=Math.PI/180,e})(Xf);function V3(){return typeof navigator<"u"}function hB(){return V3()&&!!navigator.mediaDevices}function dB(){return!!(hB()&&navigator.mediaDevices.enumerateDevices)}var hc=function(){return hc=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},hc.apply(this,arguments)},Qt=function(n,e,t,r){function i(a){return a instanceof t?a:new t(function(o){o(a)})}return new(t||(t=Promise))(function(a,o){function c(p){try{h(r.next(p))}catch(g){o(g)}}function u(p){try{h(r.throw(p))}catch(g){o(g)}}function h(p){p.done?a(p.value):i(p.value).then(c,u)}h((r=r.apply(n,e||[])).next())})},Zt=function(n,e){var t={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,i,a,o;return o={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function c(h){return function(p){return u([h,p])}}function u(h){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,i&&(a=h[0]&2?i.return:h[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,h[1])).done)return a;switch(i=0,a&&(h=[h[0]&2,a.value]),h[0]){case 0:case 1:a=h;break;case 4:return t.label++,{value:h[1],done:!1};case 5:t.label++,i=h[1],h=[0];continue;case 7:h=t.ops.pop(),t.trys.pop();continue;default:if(a=t.trys,!(a=a.length>0&&a[a.length-1])&&(h[0]===6||h[0]===2)){t=0;continue}if(h[0]===3&&(!a||h[1]>a[0]&&h[1]<a[3])){t.label=h[1];break}if(h[0]===6&&t.label<a[1]){t.label=a[1],a=h;break}if(a&&t.label<a[2]){t.label=a[2],t.ops.push(h);break}a[2]&&t.ops.pop(),t.trys.pop();continue}h=e.call(n,t)}catch(p){h=[6,p],i=0}finally{r=a=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}},Qm=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},pB={delayBetweenScanAttempts:500,delayBetweenScanSuccess:500,tryPlayVideoTimeout:5e3},Hc=(function(){function n(e,t,r){t===void 0&&(t=new Map),r===void 0&&(r={}),this.reader=e,this.hints=t,this.options=hc(hc({},pB),r)}return Object.defineProperty(n.prototype,"possibleFormats",{set:function(e){this.hints.set(Ft.POSSIBLE_FORMATS,e)},enumerable:!1,configurable:!0}),n.addVideoSource=function(e,t){try{e.srcObject=t}catch{console.error("got interrupted by new loading request")}},n.mediaStreamSetTorch=function(e,t){return Qt(this,void 0,void 0,function(){return Zt(this,function(r){switch(r.label){case 0:return[4,e.applyConstraints({advanced:[{fillLightMode:t?"flash":"off",torch:!!t}]})];case 1:return r.sent(),[2]}})})},n.mediaStreamIsTorchCompatible=function(e){var t,r,i=e.getVideoTracks();try{for(var a=Qm(i),o=a.next();!o.done;o=a.next()){var c=o.value;if(n.mediaStreamIsTorchCompatibleTrack(c))return!0}}catch(u){t={error:u}}finally{try{o&&!o.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}return!1},n.mediaStreamIsTorchCompatibleTrack=function(e){try{var t=e.getCapabilities();return"torch"in t}catch(r){return console.error(r),console.warn("Your browser may be not fully compatible with WebRTC and/or ImageCapture specs. Torch will not be available."),!1}},n.isVideoPlaying=function(e){return e.currentTime>0&&!e.paused&&e.readyState>2},n.getMediaElement=function(e,t){var r=document.getElementById(e);if(!r)throw new cn("element with id '".concat(e,"' not found"));if(r.nodeName.toLowerCase()!==t.toLowerCase())throw new cn("element with id '".concat(e,"' must be an ").concat(t," element"));return r},n.createVideoElement=function(e){if(e instanceof HTMLVideoElement)return e;if(typeof e=="string")return n.getMediaElement(e,"video");if(!e&&typeof document<"u"){var t=document.createElement("video");return t.width=200,t.height=200,t}throw new Error("Couldn't get videoElement from videoSource!")},n.prepareImageElement=function(e){if(e instanceof HTMLImageElement)return e;if(typeof e=="string")return n.getMediaElement(e,"img");if(typeof e>"u"){var t=document.createElement("img");return t.width=200,t.height=200,t}throw new Error("Couldn't get imageElement from imageSource!")},n.prepareVideoElement=function(e){var t=n.createVideoElement(e);return t.setAttribute("autoplay","true"),t.setAttribute("muted","true"),t.setAttribute("playsinline","true"),t},n.isImageLoaded=function(e){return!(!e.complete||e.naturalWidth===0)},n.createBinaryBitmapFromCanvas=function(e){var t=new fB(e),r=new A3(t);return new E3(r)},n.drawImageOnCanvas=function(e,t){e.drawImage(t,0,0)},n.getMediaElementDimensions=function(e){if(e instanceof HTMLVideoElement)return{height:e.videoHeight,width:e.videoWidth};if(e instanceof HTMLImageElement)return{height:e.naturalHeight||e.height,width:e.naturalWidth||e.width};throw new Error("Couldn't find the Source's dimensions!")},n.createCaptureCanvas=function(e){if(!e)throw new cn("Cannot create a capture canvas without a media element.");if(typeof document>"u")throw new Error(`The page "Document" is undefined, make sure you're running in a browser.`);var t=document.createElement("canvas"),r=n.getMediaElementDimensions(e),i=r.width,a=r.height;return t.style.width=i+"px",t.style.height=a+"px",t.width=i,t.height=a,t},n.tryPlayVideo=function(e){return Qt(this,void 0,void 0,function(){var t;return Zt(this,function(r){switch(r.label){case 0:if(e?.ended)return console.error("Trying to play video that has ended."),[2,!1];if(n.isVideoPlaying(e))return console.warn("Trying to play video that is already playing."),[2,!0];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,e.play()];case 2:return r.sent(),[2,!0];case 3:return t=r.sent(),console.warn("It was not possible to play the video.",t),[2,!1];case 4:return[2]}})})},n.createCanvasFromMediaElement=function(e){var t=n.createCaptureCanvas(e),r=t.getContext("2d");if(!r)throw new Error("Couldn't find Canvas 2D Context.");return n.drawImageOnCanvas(r,e),t},n.createBinaryBitmapFromMediaElem=function(e){var t=n.createCanvasFromMediaElement(e);return n.createBinaryBitmapFromCanvas(t)},n.destroyImageElement=function(e){e.src="",e.removeAttribute("src"),e=void 0},n.listVideoInputDevices=function(){return Qt(this,void 0,void 0,function(){var e,t,r,i,a,o,c,u,h,p,g,_;return Zt(this,function(w){switch(w.label){case 0:if(!V3())throw new Error("Can't enumerate devices, navigator is not present.");if(!dB())throw new Error("Can't enumerate devices, method not supported.");return[4,navigator.mediaDevices.enumerateDevices()];case 1:e=w.sent(),t=[];try{for(r=Qm(e),i=r.next();!i.done;i=r.next())a=i.value,o=a.kind==="video"?"videoinput":a.kind,o==="videoinput"&&(c=a.deviceId||a.id,u=a.label||"Video device ".concat(t.length+1),h=a.groupId,p={deviceId:c,label:u,kind:o,groupId:h},t.push(p))}catch(A){g={error:A}}finally{try{i&&!i.done&&(_=r.return)&&_.call(r)}finally{if(g)throw g.error}}return[2,t]}})})},n.findDeviceById=function(e){return Qt(this,void 0,void 0,function(){var t;return Zt(this,function(r){switch(r.label){case 0:return[4,n.listVideoInputDevices()];case 1:return t=r.sent(),t?[2,t.find(function(i){return i.deviceId===e})]:[2]}})})},n.cleanVideoSource=function(e){if(e){try{e.srcObject=null}catch{e.src=""}e&&e.removeAttribute("src")}},n.releaseAllStreams=function(){n.streamTracker.length!==0&&n.streamTracker.forEach(function(e){e.getTracks().forEach(function(t){return t.stop()})}),n.streamTracker=[]},n.playVideoOnLoadAsync=function(e,t){return Qt(this,void 0,void 0,function(){var r;return Zt(this,function(i){switch(i.label){case 0:return[4,n.tryPlayVideo(e)];case 1:return r=i.sent(),r?[2,!0]:[2,new Promise(function(a,o){var c=setTimeout(function(){n.isVideoPlaying(e)||(o(!1),e.removeEventListener("canplay",u))},t),u=function(){n.tryPlayVideo(e).then(function(h){clearTimeout(c),e.removeEventListener("canplay",u),a(h)})};e.addEventListener("canplay",u)})]}})})},n.attachStreamToVideo=function(e,t,r){return r===void 0&&(r=5e3),Qt(this,void 0,void 0,function(){var i;return Zt(this,function(a){switch(a.label){case 0:return i=n.prepareVideoElement(t),n.addVideoSource(i,e),[4,n.playVideoOnLoadAsync(i,r)];case 1:return a.sent(),[2,i]}})})},n._waitImageLoad=function(e){return new Promise(function(t,r){var i=1e4,a=setTimeout(function(){n.isImageLoaded(e)||(e.removeEventListener("load",o),r())},i),o=function(){clearTimeout(a),e.removeEventListener("load",o),t()};e.addEventListener("load",o)})},n.checkCallbackFnOrThrow=function(e){if(!e)throw new cn("`callbackFn` is a required parameter, you cannot capture results without it.")},n.disposeMediaStream=function(e){e.getVideoTracks().forEach(function(t){return t.stop()}),e=void 0},n.prototype.decode=function(e){var t=n.createCanvasFromMediaElement(e);return this.decodeFromCanvas(t)},n.prototype.decodeBitmap=function(e){return this.reader.decode(e,this.hints)},n.prototype.decodeFromCanvas=function(e){var t=n.createBinaryBitmapFromCanvas(e);return this.decodeBitmap(t)},n.prototype.decodeFromImageElement=function(e){return Qt(this,void 0,void 0,function(){var t;return Zt(this,function(r){switch(r.label){case 0:if(!e)throw new cn("An image element must be provided.");return t=n.prepareImageElement(e),[4,this._decodeOnLoadImage(t)];case 1:return[2,r.sent()]}})})},n.prototype.decodeFromImageUrl=function(e){return Qt(this,void 0,void 0,function(){var t;return Zt(this,function(r){switch(r.label){case 0:if(!e)throw new cn("An URL must be provided.");t=n.prepareImageElement(),t.src=e,r.label=1;case 1:return r.trys.push([1,,3,4]),[4,this.decodeFromImageElement(t)];case 2:return[2,r.sent()];case 3:return n.destroyImageElement(t),[7];case 4:return[2]}})})},n.prototype.decodeFromConstraints=function(e,t,r){return Qt(this,void 0,void 0,function(){var i,a;return Zt(this,function(o){switch(o.label){case 0:return n.checkCallbackFnOrThrow(r),[4,this.getUserMedia(e)];case 1:i=o.sent(),o.label=2;case 2:return o.trys.push([2,4,,5]),[4,this.decodeFromStream(i,t,r)];case 3:return[2,o.sent()];case 4:throw a=o.sent(),n.disposeMediaStream(i),a;case 5:return[2]}})})},n.prototype.decodeFromStream=function(e,t,r){return Qt(this,void 0,void 0,function(){var i,a,o,c,u,h,p,g,_,w=this;return Zt(this,function(A){switch(A.label){case 0:return n.checkCallbackFnOrThrow(r),i=this.options.tryPlayVideoTimeout,[4,n.attachStreamToVideo(e,t,i)];case 1:return a=A.sent(),o=function(){n.disposeMediaStream(e),n.cleanVideoSource(a)},c=this.scan(a,r,o),u=e.getVideoTracks(),h=hc(hc({},c),{stop:function(){c.stop()},streamVideoConstraintsApply:function(S,D){return Qt(this,void 0,void 0,function(){var C,P,V,H,X,F,I;return Zt(this,function(b){switch(b.label){case 0:C=D?u.filter(D):u,b.label=1;case 1:b.trys.push([1,6,7,8]),P=Qm(C),V=P.next(),b.label=2;case 2:return V.done?[3,5]:(H=V.value,[4,H.applyConstraints(S)]);case 3:b.sent(),b.label=4;case 4:return V=P.next(),[3,2];case 5:return[3,8];case 6:return X=b.sent(),F={error:X},[3,8];case 7:try{V&&!V.done&&(I=P.return)&&I.call(P)}finally{if(F)throw F.error}return[7];case 8:return[2]}})})},streamVideoConstraintsGet:function(S){return u.find(S).getConstraints()},streamVideoSettingsGet:function(S){return u.find(S).getSettings()},streamVideoCapabilitiesGet:function(S){return u.find(S).getCapabilities()}}),p=n.mediaStreamIsTorchCompatible(e),p&&(g=u?.find(function(S){return n.mediaStreamIsTorchCompatibleTrack(S)}),_=function(S){return Qt(w,void 0,void 0,function(){return Zt(this,function(D){switch(D.label){case 0:return[4,n.mediaStreamSetTorch(g,S)];case 1:return D.sent(),[2]}})})},h.switchTorch=_,h.stop=function(){return Qt(w,void 0,void 0,function(){return Zt(this,function(S){switch(S.label){case 0:return c.stop(),[4,_(!1)];case 1:return S.sent(),[2]}})})}),[2,h]}})})},n.prototype.decodeFromVideoDevice=function(e,t,r){return Qt(this,void 0,void 0,function(){var i,a;return Zt(this,function(o){switch(o.label){case 0:return n.checkCallbackFnOrThrow(r),e?i={deviceId:{exact:e}}:i={facingMode:"environment"},a={video:i},[4,this.decodeFromConstraints(a,t,r)];case 1:return[2,o.sent()]}})})},n.prototype.decodeFromVideoElement=function(e,t){return Qt(this,void 0,void 0,function(){var r,i;return Zt(this,function(a){switch(a.label){case 0:if(n.checkCallbackFnOrThrow(t),!e)throw new cn("A video element must be provided.");return r=n.prepareVideoElement(e),i=this.options.tryPlayVideoTimeout,[4,n.playVideoOnLoadAsync(r,i)];case 1:return a.sent(),[2,this.scan(r,t)]}})})},n.prototype.decodeFromVideoUrl=function(e,t){return Qt(this,void 0,void 0,function(){var r,i,a,o;return Zt(this,function(c){switch(c.label){case 0:if(n.checkCallbackFnOrThrow(t),!e)throw new cn("An URL must be provided.");return r=n.prepareVideoElement(),r.src=e,i=function(){n.cleanVideoSource(r)},a=this.options.tryPlayVideoTimeout,[4,n.playVideoOnLoadAsync(r,a)];case 1:return c.sent(),o=this.scan(r,t,i),[2,o]}})})},n.prototype.decodeOnceFromConstraints=function(e,t){return Qt(this,void 0,void 0,function(){var r;return Zt(this,function(i){switch(i.label){case 0:return[4,this.getUserMedia(e)];case 1:return r=i.sent(),[4,this.decodeOnceFromStream(r,t)];case 2:return[2,i.sent()]}})})},n.prototype.decodeOnceFromStream=function(e,t){return Qt(this,void 0,void 0,function(){var r,i,a;return Zt(this,function(o){switch(o.label){case 0:return r=!!t,[4,n.attachStreamToVideo(e,t)];case 1:i=o.sent(),o.label=2;case 2:return o.trys.push([2,,4,5]),[4,this.scanOneResult(i)];case 3:return a=o.sent(),[2,a];case 4:return r||n.cleanVideoSource(i),[7];case 5:return[2]}})})},n.prototype.decodeOnceFromVideoDevice=function(e,t){return Qt(this,void 0,void 0,function(){var r,i;return Zt(this,function(a){switch(a.label){case 0:return e?r={deviceId:{exact:e}}:r={facingMode:"environment"},i={video:r},[4,this.decodeOnceFromConstraints(i,t)];case 1:return[2,a.sent()]}})})},n.prototype.decodeOnceFromVideoElement=function(e){return Qt(this,void 0,void 0,function(){var t,r;return Zt(this,function(i){switch(i.label){case 0:if(!e)throw new cn("A video element must be provided.");return t=n.prepareVideoElement(e),r=this.options.tryPlayVideoTimeout,[4,n.playVideoOnLoadAsync(t,r)];case 1:return i.sent(),[4,this.scanOneResult(t)];case 2:return[2,i.sent()]}})})},n.prototype.decodeOnceFromVideoUrl=function(e){return Qt(this,void 0,void 0,function(){var t,r;return Zt(this,function(i){switch(i.label){case 0:if(!e)throw new cn("An URL must be provided.");t=n.prepareVideoElement(),t.src=e,r=this.decodeOnceFromVideoElement(t),i.label=1;case 1:return i.trys.push([1,,3,4]),[4,r];case 2:return[2,i.sent()];case 3:return n.cleanVideoSource(t),[7];case 4:return[2]}})})},n.prototype.scanOneResult=function(e,t,r,i){var a=this;return t===void 0&&(t=!0),r===void 0&&(r=!0),i===void 0&&(i=!0),new Promise(function(o,c){a.scan(e,function(u,h,p){if(u){o(u),p.stop();return}if(h){if(h instanceof se&&t||h instanceof An&&r||h instanceof ye&&i)return;p.stop(),c(h)}})})},n.prototype.scan=function(e,t,r){var i=this;n.checkCallbackFnOrThrow(t);var a=n.createCaptureCanvas(e),o;try{o=a.getContext("2d",{willReadFrequently:!0})}catch{o=a.getContext("2d")}if(!o)throw new Error("Couldn't create canvas for visual element scan.");var c=function(){o=void 0,a=void 0},u=!1,h,p=function(){u=!0,clearTimeout(h),c(),r&&r()},g={stop:p},_=function(){if(!u)try{n.drawImageOnCanvas(o,e);var w=i.decodeFromCanvas(a);t(w,void 0,g),h=setTimeout(_,i.options.delayBetweenScanSuccess)}catch(C){t(void 0,C,g);var A=C instanceof An,S=C instanceof ye,D=C instanceof se;if(A||S||D){h=setTimeout(_,i.options.delayBetweenScanAttempts);return}c(),r&&r(C)}};return _(),g},n.prototype._decodeOnLoadImage=function(e){return Qt(this,void 0,void 0,function(){var t;return Zt(this,function(r){switch(r.label){case 0:return t=n.isImageLoaded(e),t?[3,2]:[4,n._waitImageLoad(e)];case 1:r.sent(),r.label=2;case 2:return[2,this.decode(e)]}})})},n.prototype.getUserMedia=function(e){return Qt(this,void 0,void 0,function(){var t;return Zt(this,function(r){switch(r.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return t=r.sent(),n.streamTracker.push(t),[2,t]}})})},n.streamTracker=[],n})(),mB=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})();(function(n){mB(e,n);function e(t,r){return n.call(this,new C0,t,r)||this}return e})(Hc);var gB=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})();(function(n){gB(e,n);function e(t,r){return n.call(this,new uc(t),t,r)||this}return e})(Hc);var vB=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})();(function(n){vB(e,n);function e(t,r){return n.call(this,new I0,t,r)||this}return e})(Hc);var yB=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),_B=(function(n){yB(e,n);function e(t,r){var i=this,a=new P3;return a.setHints(t),i=n.call(this,a,t,r)||this,i.reader=a,i}return Object.defineProperty(e.prototype,"possibleFormats",{set:function(t){this.hints.set(Ft.POSSIBLE_FORMATS,t),this.reader.setHints(this.hints)},enumerable:!1,configurable:!0}),e.prototype.decodeBitmap=function(t){return this.reader.decodeWithState(t)},e.prototype.setHints=function(t){this.hints=t,this.reader.setHints(this.hints)},e})(Hc),xB=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})();(function(n){xB(e,n);function e(t,r){return n.call(this,new R0,t,r)||this}return e})(Hc);var wB=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),EB=(function(n){wB(e,n);function e(t,r){return n.call(this,new N0,t,r)||this}return e})(Hc);const yp=[{value:"open",label:""},{value:"middle",label:""},{value:"close",label:""}],AB=yp.reduce((n,e)=>(n[e.value]=e.label,n),{}),Ko=100,si=50,bB="admin-cash-audit-vouchers-",SB="admin-cash-audit-voucher-usage-",CB="admin-cash-audit-janken-adjustment-",gv="admin-cash-audit:voucher-usage-updated",vv="admin-cash-audit:janken-adjustment-updated",Zd={open:0,middle:0,close:0},D0={plus:si,minus:-si};function Xy(n){return n==="plus"||n==="minus"}function Yy(n){const e=n.getFullYear(),t=String(n.getMonth()+1).padStart(2,"0"),r=String(n.getDate()).padStart(2,"0");return`${e}-${t}-${r}`}function Kf(n){const e=Number(n);return!Number.isFinite(e)||e<=0?0:Math.floor(e)}function F3(n){return`${bB}${Yy(n??new Date)}`}function M0(n){return`${SB}${Yy(n??new Date)}`}function P0(n){return`${CB}${Yy(n??new Date)}`}function Ky(n){if(typeof window>"u")return null;try{return window.localStorage.getItem(n)}catch(e){return console.warn("",e),null}}function Rf(n,e){if(!(typeof window>"u"))try{e===null?window.localStorage.removeItem(n):window.localStorage.setItem(n,e)}catch(t){console.warn("",t)}}function TB(n){const e=Ky(F3(n));if(!e)return{...Zd};try{const t=JSON.parse(e);return yp.reduce((r,i)=>(r[i.value]=Kf(t?.[i.value]),r),{...Zd})}catch(t){return console.warn("",t),{...Zd}}}function ab(n,e){const t=yp.reduce((r,i)=>(r[i.value]=Kf(n?.[i.value]),r),{...Zd});Rf(F3(e),JSON.stringify(t))}function _p(n){const e=Ky(M0(n));if(!e)return{};try{const r=JSON.parse(e)?.entries??{};return Object.entries(r).reduce((i,[a,o])=>{const c=Kf(o);return c>0&&(i[a]=c),i},{})}catch(t){return console.warn("",t),{}}}function yv(n,e){const t=Object.entries(n).reduce((r,[i,a])=>{const o=Kf(a);return o>0&&(r[i]=o),r},{});if(Object.keys(t).length===0)Rf(M0(e),null);else{const r={entries:t};Rf(M0(e),JSON.stringify(r))}}function xp(n){const e=Ky(P0(n));if(!e)return{};try{const r=JSON.parse(e)?.entries??{};return Object.entries(r).reduce((i,[a,o])=>(Xy(o)&&(i[a]=o),i),{})}catch(t){return console.warn("",t),{}}}function _v(n,e){const t=Object.entries(n).reduce((r,[i,a])=>(Xy(a)&&(r[i]=a),r),{});if(Object.keys(t).length===0)Rf(P0(e),null);else{const r={entries:t};Rf(P0(e),JSON.stringify(r))}}function xv(){typeof window>"u"||window.dispatchEvent(new CustomEvent(gv))}function wv(){typeof window>"u"||window.dispatchEvent(new CustomEvent(vv))}function sb(n){const e=_p(n);return Object.values(e).reduce((t,r)=>t+r,0)}function ob(n,e){return n?_p(e)[n]??0:0}function IB(n,e,t){if(!n)return;const r=Kf(e),i=_p(t);if(r===0){n in i&&(delete i[n],yv(i,t),xv());return}i[n]!==r&&(i[n]=r,yv(i,t),xv())}function lb(n,e){if(!n)return;const t=_p(e);n in t&&(delete t[n],yv(t,e),xv())}function NB(n){return n==="plus"?D0.plus:n==="minus"?D0.minus:0}function cb(n,e){return n?xp(e)[n]??"none":"none"}function RB(n,e,t){if(!n)return;const r=xp(t);if(!Xy(e)){n in r&&(delete r[n],_v(r,t),wv());return}r[n]!==e&&(r[n]=e,_v(r,t),wv())}function ub(n,e){if(!n)return;const t=xp(e);n in t&&(delete t[n],_v(t,e),wv())}function fb(n){const e=xp(n);return Object.values(e).reduce((t,r)=>(r==="plus"?(t.totalAmount+=D0.plus,t.plusCount+=1):r==="minus"&&(t.totalAmount+=D0.minus,t.minusCount+=1),t),{totalAmount:0,plusCount:0,minusCount:0})}function OB(n){return P0(n)}function DB(n){return M0(n)}function Si(n){return`${n.toLocaleString()}`}function Zm(n){const e=Si(Math.abs(n));return n>0?`+${e}`:n<0?`-${e}`:e}const hb=["drink_hojicha","drink_cocoa","drink_coffee","drink_milkcoffee"],MB=[{value:"none",label:"0",description:"",delta:0,tone:"neutral"},{value:"plus",label:`+${Si(si)}`,description:"50",delta:si,tone:"positive"},{value:"minus",label:`-${Si(si)}`,description:"50",delta:-si,tone:"negative"}],PB={:"",:"",:""},kB={:"warning",:"success",:"neutral"};function LB(){const n=k.useMemo(()=>{const ae=new Date;ae.setHours(0,0,0,0);const be=new Date(ae);return be.setDate(be.getDate()+1),{start:ae,end:be}},[]),{orders:e,loading:t,error:r}=Uc(n),{language:i}=Vi(),a=k.useMemo(()=>e.map(pp),[e]),[o,c]=k.useState(""),[u,h]=k.useState(null),[p,g]=k.useState(!1),[_,w]=k.useState(!1),[A,S]=k.useState(null),[D,C]=k.useState(null),[P,V]=k.useState({}),[H,X]=k.useState(null),[F,I]=k.useState(null),[b,N]=k.useState(0),[R,M]=k.useState("none"),B=k.useRef(null),L=k.useRef(null),ie=k.useRef({}),ge=k.useMemo(()=>a.filter(ae=>ae.payment==="").sort((ae,be)=>{const Ke=ae.createdAtDate?.getTime()??0,Wt=be.createdAtDate?.getTime()??0;return Ke-Wt}),[a]),K=k.useMemo(()=>{if(!o.trim())return ge;const ae=o.trim().toLowerCase();return ge.filter(be=>`${be.ticket} ${be.id} ${be.callNumber} ${be.items} ${Ci(be.id)}`.toLowerCase().includes(ae))},[o,ge]),G=k.useMemo(()=>K.find(ae=>ae.id===u)??K[0]??null,[K,u]),le=k.useMemo(()=>u?[...P[u]??[]].reverse():[],[P,u]),we=k.useMemo(()=>G?Nf(G):[],[G]),Ae=k.useMemo(()=>G?Ci(G.id):"----",[G]);k.useEffect(()=>{!G&&K.length>0&&h(K[0].id)},[K,G]),k.useEffect(()=>{if(!G)return;const ae=ie.current[G.id];ae&&ae.scrollIntoView({block:"nearest",behavior:"smooth"})},[G]);const $=k.useMemo(()=>G?Math.floor(G.total/Ko):0,[G]);k.useEffect(()=>{if(!G){N(0);return}const ae=ob(G.id),be=Math.min(Math.max(0,ae),$);N(be)},[G,$]),k.useEffect(()=>{if(!G){M("none");return}const ae=G.raw.items??{};if(!hb.some(Wt=>(ae[Wt]??0)>0)){M("none");return}const Ke=cb(G.id);M(Ke)},[G]);const oe=k.useMemo(()=>b*Ko,[b]),pe=k.useMemo(()=>{if(!G)return!1;const ae=G.raw.items??{};return hb.some(be=>(ae[be]??0)>0)},[G]),ve=k.useMemo(()=>pe?NB(R):0,[R,pe]),Ne=k.useMemo(()=>{if(!G)return 0;const ae=G.total,be=pe?ae+ve:ae;return be<0?0:be},[G,pe,ve]),Re=k.useMemo(()=>Math.max(Ne-oe,0),[Ne,oe]),Ee=pe?"":"",Qe=G?.payment!=="",Ze=k.useCallback(ae=>{N(be=>{const Ke=be+ae;return Math.min(Math.max(0,Ke),$)})},[$]),Pn=k.useCallback(ae=>{const be=ae.currentTarget.value;M(be)},[]),me=k.useMemo(()=>a.filter(ae=>ae.payment==="").sort((ae,be)=>{const Ke=ae.createdAtDate?.getTime()??0;return(be.createdAtDate?.getTime()??0)-Ke}).slice(0,6),[a]),Ve=k.useMemo(()=>({waiting:ge.length,totalDue:ge.reduce((ae,be)=>ae+be.total,0),settledToday:me.length}),[ge,me]),Ye=k.useCallback(ae=>ae?(h(ae.id),c(""),!0):!1,[c,h]),qe=k.useCallback((ae,be)=>{V(Ke=>{const Wt=[...Ke[ae]??[],{status:be,time:new Date().toISOString()}];return{...Ke,[ae]:Wt}})},[]),bt=k.useCallback(async(ae,be)=>{X(ae.id),I(null);try{await qa(ae.id,ae.ticket,{payment:be,progress:ae.progress}),qe(ae.id,be)}catch(Ke){throw console.error("",Ke),I(""),Ke}finally{X(null)}},[qe]),Et=k.useCallback(async ae=>{try{await bt(ae,"");const be=G?.id===ae.id?b:ob(ae.id),Ke=Math.max(0,Math.floor(ae.total/Ko)),Wt=Math.min(Math.max(0,be),Ke);IB(ae.id,Wt);const kn=G?.id===ae.id?pe?R:"none":cb(ae.id);RB(ae.id,kn),u===ae.id&&(S(""),M("none"),h(null))}catch{}},[R,bt,u,G?.id,pe,b]),Xn=k.useCallback(async ae=>{const be=` ${ae.callNumber}`;if(window.confirm(`${be} 
`))try{await bt(ae,""),lb(ae.id),ub(ae.id),u===ae.id&&(N(0),S(""),M("none"),h(null))}catch{}},[bt,u]),St=k.useCallback(async ae=>{try{await bt(ae,""),lb(ae.id),ub(ae.id),u===ae.id&&(N(0),M("none")),h(ae.id),S("")}catch{}},[bt,u]),Fe=k.useCallback(()=>{if(L.current?.stop(),L.current=null,B.current){const ae=B.current.srcObject;ae instanceof MediaStream&&ae.getTracks().forEach(be=>be.stop()),B.current.srcObject=null}w(!1)},[L,w,B]);k.useEffect(()=>()=>Fe(),[Fe]);const vt=k.useCallback(ae=>{const be=ae.trim();if(!be)return null;const Ke=be.toLowerCase(),Wt=Ke.match(/t[-_ ]?(\w{3,})/),kn=Ke.match(/#(\d{3,})/),Gr=Ke.match(/(?:no\.?|call||#)?\s*(\d{1,4})$/),qr=a.find(ze=>Ci(ze.id).toLowerCase()===Ke);if(qr)return qr;const Ea=Wt?`T-${Wt[1]}`:null,Ge=kn?`#${kn[1]}`:null,ht=Gr?Number.parseInt(Gr[1],10):null;if(Ea){const ze=a.find(Ln=>Ln.ticket.toLowerCase()===Ea.toLowerCase());if(ze)return ze}if(Ge){const ze=a.find(Ln=>Ln.id.toLowerCase()===Ge.toLowerCase());if(ze)return ze}if(ht){const ze=a.find(Ln=>Ln.callNumber===ht);if(ze)return ze}return a.find(ze=>ze.ticket.toLowerCase()===Ke)??a.find(ze=>ze.id.toLowerCase()===Ke)??a.find(ze=>ze.callNumber.toString()===Ke)??null},[a]),Sn=k.useCallback(ae=>{const be=vt(ae);be?(Ye(be),S(` ${be.ticket}  ${be.callNumber} ${Ci(be.id)}`),C(null),g(!1)):(S(`QR${ae}`),C(""))},[vt,Ye]);k.useEffect(()=>{if(!p){Fe();return}let ae=!1;return(async()=>{if(B.current){w(!0),C(null),S("");try{const Wt=await new EB(void 0,{delayBetweenScanAttempts:200}).decodeFromVideoDevice(void 0,B.current,(kn,Gr,qr)=>{if(ae){qr.stop();return}kn?(Sn(kn.getText()),qr.stop()):Gr&&!(Gr instanceof se)&&C(Gr.message)});if(ae){Wt.stop();return}L.current=Wt,S("QR")}catch(Ke){if(ae)return;console.error(Ke),C(Ke instanceof Error?Ke.message:""),g(!1)}}})(),()=>{ae=!0,Fe()}},[Sn,p,Fe]);const fo=k.useCallback(()=>{C(null),S(null),g(!0)},[]),Fi=k.useCallback(()=>{g(!1),Fe()},[Fe]);return t?m.jsx("p",{children:""}):m.jsxs("div",{className:"admin-payment-page",children:[p&&m.jsx("div",{className:"admin-payment-scanner-overlay",role:"dialog","aria-modal":"true",children:m.jsxs("div",{className:"admin-payment-scanner-dialog",children:[m.jsxs("header",{className:"admin-payment-scanner-header",children:[m.jsx("h2",{children:"QR"}),m.jsx("button",{type:"button",className:"admin-payment-scanner-close",onClick:Fi,children:""})]}),m.jsx("video",{ref:B,className:"admin-payment-scanner-video",autoPlay:!0,muted:!0,playsInline:!0}),m.jsxs("footer",{className:"admin-payment-scanner-footer",children:[m.jsx("span",{className:"admin-payment-scan-status",children:_?A??"":A??""}),m.jsxs("div",{className:"admin-payment-scanner-actions",children:[D&&m.jsx("p",{className:"admin-payment-scan-error",role:"alert",children:D}),m.jsx("button",{type:"button",className:"admin-payment-stop",onClick:Fi,children:""})]})]})]})}),m.jsxs("section",{className:"admin-payment-summary","aria-label":"",children:[m.jsxs("div",{className:"admin-payment-summary-card",children:[m.jsx("p",{className:"admin-payment-summary-title",children:""}),m.jsxs("p",{className:"admin-payment-summary-value",children:[Ve.waiting,""]})]}),m.jsxs("div",{className:"admin-payment-summary-card",children:[m.jsx("p",{className:"admin-payment-summary-title",children:""}),m.jsx("p",{className:"admin-payment-summary-value",children:Si(Ve.totalDue)})]}),m.jsxs("div",{className:"admin-payment-summary-card",children:[m.jsx("p",{className:"admin-payment-summary-title",children:""}),m.jsxs("p",{className:"admin-payment-summary-value",children:[Ve.settledToday,""]})]})]}),r&&m.jsx("p",{className:"admin-error",role:"alert",children:""}),F&&m.jsx("p",{className:"admin-error",role:"alert",children:F}),m.jsxs("div",{className:"admin-payment-shell",children:[m.jsxs("aside",{className:"admin-payment-sidebar","aria-label":"",children:[m.jsxs("div",{className:"admin-payment-sidebar-header",children:[m.jsx("h2",{children:""}),m.jsxs("div",{className:"field",children:[m.jsx("label",{htmlFor:"payment-search",children:""}),m.jsx("input",{id:"payment-search",type:"search",placeholder:"",value:o,onChange:ae=>c(ae.target.value)})]}),m.jsx("button",{type:"button",className:"admin-payment-qr-button",onClick:fo,children:"QR"})]}),A&&!p&&m.jsx("p",{className:"admin-payment-scan-message",children:A}),D&&!p&&m.jsx("p",{className:"admin-payment-scan-error",role:"alert",children:D}),m.jsxs("div",{className:"admin-payment-list",children:[K.map(ae=>m.jsx("button",{type:"button",className:`admin-payment-list-item${G?.id===ae.id?" active":""}`,onClick:()=>h(ae.id),ref:be=>{ie.current[ae.id]=be},"aria-pressed":G?.id===ae.id,children:m.jsx("p",{className:"admin-payment-ticket","aria-label":` ${ae.callNumber}`,children:ae.callNumber})},ae.id)),K.length===0&&m.jsx("p",{className:"admin-payment-empty",children:""})]})]}),m.jsxs("section",{className:"admin-payment-main","aria-live":"polite",children:[G?m.jsxs("article",{className:"admin-payment-detail-card",children:[m.jsxs("div",{className:"admin-payment-detail-header",children:[m.jsxs("div",{className:"admin-payment-identifiers",children:[m.jsx("p",{className:"admin-payment-ticket large","aria-label":` ${G.callNumber}`,children:G.callNumber}),m.jsxs("p",{className:"admin-payment-order",children:[" ",Ae]}),m.jsxs("p",{className:"admin-payment-order subtle",children:[" ",G.id]}),m.jsxs("p",{className:"admin-payment-order subtle",children:[" ",G.ticket]})]}),m.jsxs("div",{className:"admin-payment-total-box",children:[m.jsxs("section",{className:"admin-payment-breakdown-panel","aria-label":"",children:[m.jsxs("div",{className:"admin-payment-breakdown-row prominent",children:[m.jsx("p",{className:"admin-payment-breakdown-label",children:""}),m.jsx("p",{className:"admin-payment-cash-due","aria-live":"polite",children:Si(Re)})]}),m.jsxs("div",{className:"admin-payment-breakdown-row",children:[m.jsx("p",{className:"admin-payment-breakdown-label",children:""}),m.jsxs("div",{className:"admin-payment-voucher-control","aria-label":"",children:[m.jsx("button",{type:"button",className:"admin-payment-adjust",onClick:()=>Ze(-1),disabled:b===0,"aria-label":"1",children:"-"}),m.jsxs("span",{className:"admin-payment-voucher-count","aria-live":"polite",children:[b," ",Si(oe),""]}),m.jsx("button",{type:"button",className:"admin-payment-adjust",onClick:()=>Ze(1),disabled:b>=$,"aria-label":"1",children:"+"})]})]}),pe&&m.jsxs("div",{className:"admin-payment-breakdown-row",children:[m.jsx("p",{className:"admin-payment-breakdown-label",children:""}),m.jsx("p",{className:`admin-payment-janken-value${ve>0?" is-plus":ve<0?" is-minus":""}`,children:Zm(ve)})]}),m.jsx("hr",{className:"admin-payment-breakdown-divider"}),m.jsxs("p",{className:"admin-payment-breakdown-total","aria-live":"polite",children:[Ee," ",Si(Ne)]}),pe&&m.jsxs("p",{className:"admin-payment-breakdown-note",children:[" ",Si(G.total)]})]}),pe&&m.jsxs("section",{className:"admin-payment-janken-panel","aria-label":"",children:[m.jsx("p",{className:"admin-payment-janken-title",children:""}),m.jsxs("fieldset",{className:"admin-payment-janken-fieldset","aria-disabled":Qe,children:[m.jsx("legend",{className:"sr-only",children:""}),m.jsx("div",{className:"admin-payment-janken-options",children:MB.map(ae=>{const be=ae.delta===0?`${Si(0)}`:Zm(ae.delta),Ke=`admin-payment-janken-option${R===ae.value?" is-active":""}${Qe?" is-disabled":""}`;return m.jsxs("label",{className:Ke,"data-tone":ae.tone,children:[m.jsx("input",{type:"radio",name:"admin-payment-janken",value:ae.value,checked:R===ae.value,onChange:Pn,disabled:Qe}),m.jsxs("span",{className:"admin-payment-janken-option-header",children:[m.jsx("span",{className:`admin-payment-janken-badge ${ae.tone}`,"aria-hidden":"true",children:be}),m.jsx("span",{className:"admin-payment-janken-label",children:ae.label})]}),m.jsx("span",{className:"admin-payment-janken-description",children:ae.description})]},ae.value)})})]}),m.jsxs("div",{className:"admin-payment-janken-footer",children:[m.jsxs("div",{className:"admin-payment-janken-summary","aria-live":"polite",children:[m.jsx("span",{className:"admin-payment-janken-summary-label",children:""}),m.jsx("span",{className:`admin-payment-janken-value${ve>0?" is-plus":ve<0?" is-minus":""}`,children:Zm(ve)})]}),m.jsx("span",{className:"admin-payment-janken-helper",children:""})]})]}),m.jsxs("div",{className:"admin-payment-voucher-summary","aria-live":"polite",children:[m.jsx("p",{className:"admin-payment-voucher-summary-label",children:""}),m.jsxs("p",{className:"admin-payment-voucher-summary-value",children:[b," ",m.jsxs("span",{className:"admin-payment-voucher-summary-amount",children:["",Si(oe),""]})]})]}),m.jsxs("div",{className:"admin-payment-actions",children:[G.payment===""&&m.jsxs(m.Fragment,{children:[m.jsx("button",{type:"button",className:"admin-payment-action",onClick:()=>Et(G),disabled:H===G.id,children:""}),m.jsx("button",{type:"button",className:"admin-payment-inline-button",onClick:()=>Xn(G),disabled:H===G.id,children:""})]}),(G.payment===""||G.payment==="")&&m.jsx("button",{type:"button",className:"admin-payment-action admin-payment-action--ghost",onClick:()=>St(G),disabled:H===G.id,children:""})]})]})]}),m.jsxs("div",{className:"admin-payment-detail-body",children:[m.jsxs("section",{className:"admin-payment-detail-items",children:[m.jsx("h3",{children:""}),we.length>0?m.jsx(av,{entries:we,totalAriaLabel:"",variant:"compact",className:"admin-payment-items-inline"}):m.jsx("p",{className:"admin-payment-detail-placeholder",children:""})]}),m.jsxs("section",{className:"admin-payment-detail-meta",children:[m.jsxs("dl",{children:[m.jsxs("div",{children:[m.jsx("dt",{children:""}),m.jsx("dd",{children:m.jsx("span",{className:`admin-payment-chip ${kB[G.payment]}`,children:Cc(G.payment,i)})})]}),m.jsxs("div",{children:[m.jsx("dt",{children:""}),m.jsx("dd",{children:G.createdAt})]}),m.jsxs("div",{children:[m.jsx("dt",{children:""}),m.jsx("dd",{children:Ae})]}),m.jsxs("div",{children:[m.jsx("dt",{children:""}),m.jsx("dd",{children:G.ticket})]})]}),m.jsx("p",{className:"admin-payment-hint",children:""})]})]})]}):m.jsx("div",{className:"admin-payment-detail-placeholder",children:m.jsx("p",{className:"admin-payment-empty",children:""})}),m.jsxs("section",{className:"admin-payment-history","aria-label":"",children:[m.jsx("header",{children:m.jsx("h3",{children:""})}),G?le.length>0?m.jsx("ul",{children:le.map((ae,be)=>m.jsxs("li",{children:[m.jsx("span",{children:new Date(ae.time).toLocaleString()}),m.jsx("span",{children:PB[ae.status]})]},`${ae.time}-${be}`))}):m.jsx("p",{className:"admin-payment-history-empty",children:""}):m.jsx("p",{className:"admin-payment-history-empty",children:""})]}),m.jsxs("section",{className:"admin-payment-recent","aria-label":"",children:[m.jsxs("header",{className:"admin-payment-recent-header",children:[m.jsx("h3",{children:""}),m.jsx("p",{className:"admin-payment-recent-sub",children:""})]}),m.jsxs("ul",{children:[me.map(ae=>{const be=Ci(ae.id),Ke=ae.items.replace(//g,"");return m.jsx("li",{children:m.jsxs("article",{className:"admin-payment-recent-card",children:[m.jsxs("div",{className:"admin-payment-recent-top",children:[m.jsxs("span",{className:"admin-payment-recent-ticket","aria-label":` ${ae.callNumber}`,children:[" ",ae.callNumber]}),m.jsxs("div",{className:"admin-payment-recent-meta",children:[m.jsx("span",{className:"admin-payment-recent-total",children:Si(ae.total)}),m.jsx("time",{dateTime:ae.createdAt,className:"admin-payment-time",children:ae.createdAt})]})]}),m.jsx("p",{className:"admin-payment-recent-items","aria-label":"",children:Ke}),m.jsxs("dl",{className:"admin-payment-recent-identifiers",children:[m.jsxs("div",{children:[m.jsx("dt",{children:""}),m.jsx("dd",{children:be})]}),m.jsxs("div",{children:[m.jsx("dt",{children:""}),m.jsx("dd",{children:ae.id})]}),m.jsxs("div",{children:[m.jsx("dt",{children:""}),m.jsx("dd",{children:ae.ticket})]})]}),m.jsx("div",{className:"admin-payment-recent-actions",children:m.jsx("button",{type:"button",className:"admin-payment-revert",onClick:()=>St(ae),disabled:H===ae.id,children:""})})]})},ae.id)}),me.length===0&&m.jsx("li",{className:"admin-payment-recent-empty",children:""})]})]})]})]})]})}function jB(){const[n,e]=k.useState(!0),[t,r]=k.useState(""),[i,a]=k.useState(new Date),o=()=>{e(u=>{const h=!u;return a(new Date),h})},c=()=>{a(new Date)};return m.jsxs("div",{className:"admin-grid",style:{gap:"24px",maxWidth:720},children:[m.jsxs("section",{className:"admin-card",children:[m.jsx("h3",{children:""}),m.jsx("p",{children:""}),m.jsxs("div",{className:"admin-toggle",role:"switch","aria-checked":n,children:[m.jsx("input",{type:"checkbox",checked:n,onChange:o}),m.jsx("span",{children:n?"":""})]}),m.jsx("p",{style:{color:"#64748b"},children:n?"":""}),m.jsx("div",{className:"admin-divider"}),m.jsxs("div",{className:"admin-list",children:[m.jsx("label",{htmlFor:"reception-memo",children:""}),m.jsx("textarea",{id:"reception-memo",rows:4,style:{borderRadius:12,border:"1px solid #cbd5f5",padding:"12px 16px",fontSize:"1rem",resize:"vertical"},placeholder:":  30 ",value:t,onChange:u=>r(u.target.value)}),m.jsx("button",{type:"button",className:"admin-primary-button",onClick:c,children:""}),i&&m.jsxs("small",{style:{color:"#64748b"},children:[": ",i.toLocaleString("ja-JP")]})]})]}),m.jsxs("section",{className:"admin-card",children:[m.jsx("h3",{children:""}),m.jsx("p",{children:" Slack / LINE WORKS Webhook URL "}),m.jsxs("div",{className:"admin-list",children:[m.jsx("label",{htmlFor:"reception-webhook",children:"Webhook URL"}),m.jsx("input",{id:"reception-webhook",placeholder:"https://hooks.slack.com/...",style:{borderRadius:12,border:"1px solid #cbd5f5",padding:"10px 14px",fontSize:"1rem"}}),m.jsx("button",{type:"button",className:"admin-secondary-button",children:""})]})]})]})}function BB(n,e){const t=n.match(/^(\d{1,2}):(\d{2})$/);if(!t)return null;const[,r,i]=t,a=Number.parseInt(r,10),o=Number.parseInt(i,10);if(Number.isNaN(a)||Number.isNaN(o))return null;const c=new Date(e);return c.setHours(a,o,0,0),c.getTime()>e.getTime()&&c.setDate(c.getDate()-1),c}function VB(n,e){const t=BB(n,e);if(!t)return null;const r=e.getTime()-t.getTime();if(r<0)return null;const i=Math.floor(r/6e4);if(i<1)return"1";const a=Math.floor(i/60),o=i%60;return a===0?`${i}`:o===0?`${a}`:`${a}${o}`}function FB(){const n=k.useMemo(()=>{const G=new Date;G.setHours(0,0,0,0);const le=new Date(G);return le.setDate(le.getDate()+1),{start:G,end:le}},[]),e=k.useCallback(G=>G.length>0&&G.every(le=>le.progress===""),[]),{orders:t,loading:r,error:i}=Uc({...n,autoStopWhen:e}),{language:a}=Vi(),o=k.useMemo(()=>t.map(pp),[t]),[c,u]=k.useState(""),[h,p]=k.useState(!1),[g,_]=k.useState(null),[w,A]=k.useState(null),[S,D]=k.useState(()=>new Date),[C,P]=k.useState(null),[V,H]=k.useState(null),X=c.trim().toLowerCase(),F=k.useMemo(()=>X?o.filter(G=>[G.callNumber.toString(),G.ticket,G.id,G.items,G.progress,G.payment,Cc(G.payment,a),Ci(G.id)].filter(we=>typeof we=="string").some(we=>we.toLowerCase().includes(X))):o,[o,X,a]),I=k.useMemo(()=>F.filter(G=>G.progress==="").sort((G,le)=>{const we=G.createdAtDate?.getTime()??0,Ae=le.createdAtDate?.getTime()??0;return we-Ae}),[F]),b=k.useMemo(()=>F.filter(G=>G.progress==="").sort((G,le)=>{const we=G.createdAtDate?.getTime()??0;return(le.createdAtDate?.getTime()??0)-we}),[F]),N=k.useMemo(()=>F.filter(G=>G.progress==="").sort((G,le)=>{const we=G.createdAtDate?.getTime()??0,Ae=le.createdAtDate?.getTime()??0;return we-Ae}),[F]),R=k.useMemo(()=>({ready:I.length,delivered:b.length,upcoming:N.length}),[I,b,N]),M=k.useCallback(async G=>{P(G.id),H(null);try{await qa(G.id,G.ticket,{progress:"",payment:G.payment})}catch(le){console.error("",le),H("")}finally{P(null)}},[]),B=k.useCallback(async G=>{P(G.id),H(null);try{await qa(G.id,G.ticket,{progress:"",payment:G.payment})}catch(le){console.error("",le),H("")}finally{P(null)}},[]);k.useEffect(()=>{const G=window.setInterval(()=>{D(new Date)},6e4);return()=>{window.clearInterval(G)}},[]),k.useEffect(()=>{if(!X){A(null);return}const G=F[0];A(G?.id??null)},[F,X]),k.useEffect(()=>{if(!w||typeof document>"u")return;const G=document.querySelector(`[data-order-id="${w}"]`);G&&G.scrollIntoView({behavior:"smooth",block:"center"})},[w,I.length,b.length,N.length]);const L=G=>{u(G.target.value),_(null)},ie=()=>{u(""),A(null),_(null)},ge=k.useCallback(G=>VB(G,S),[S]),K=G=>{const le=G.trim();if(!le)return;const we=o.find(Ae=>Ae.ticket.toLowerCase()===le.toLowerCase()||Ae.id.toLowerCase()===le.toLowerCase()||Ci(Ae.id).toLowerCase()===le.toLowerCase()||Ae.callNumber.toString()===le);u(le),A(we?.id??null),_(we?null:`${le}`),p(!1)};return r?m.jsx("p",{children:""}):m.jsxs("div",{className:"admin-serving-page",children:[m.jsxs("section",{className:"admin-serving-controls","aria-label":"",children:[m.jsxs("div",{className:"admin-serving-search",children:[m.jsx("label",{htmlFor:"serving-search-input",children:""}),m.jsxs("div",{className:"admin-serving-search-input",children:[m.jsx("input",{id:"serving-search-input",type:"search",value:c,onChange:L,placeholder:"","aria-describedby":"serving-search-hint"}),c&&m.jsx("button",{type:"button",className:"admin-serving-search-clear",onClick:ie,children:""})]}),m.jsx("p",{id:"serving-search-hint",className:"admin-serving-search-hint",children:""})]}),m.jsxs("div",{className:"admin-serving-controls-actions",children:[m.jsx("button",{type:"button",className:"admin-serving-button ghost",onClick:()=>{_(null),p(!0)},children:"QR"}),g&&m.jsx("p",{className:"admin-serving-scanner-error",children:g})]})]}),m.jsxs("section",{className:"admin-serving-summary","aria-label":"",children:[m.jsxs("div",{className:"admin-serving-summary-card",children:[m.jsx("p",{className:"admin-serving-summary-title",children:""}),m.jsxs("p",{className:"admin-serving-summary-value",children:[R.ready,""]})]}),m.jsxs("div",{className:"admin-serving-summary-card",children:[m.jsx("p",{className:"admin-serving-summary-title",children:""}),m.jsxs("p",{className:"admin-serving-summary-value",children:[R.upcoming,""]})]}),m.jsxs("div",{className:"admin-serving-summary-card",children:[m.jsx("p",{className:"admin-serving-summary-title",children:""}),m.jsxs("p",{className:"admin-serving-summary-value",children:[R.delivered,""]})]})]}),i&&m.jsx("p",{className:"admin-error",role:"alert",children:""}),V&&m.jsx("p",{className:"admin-error",role:"alert",children:V}),c&&F.length===0&&m.jsxs("p",{className:"admin-serving-search-empty",role:"status",children:["",c,""]}),m.jsxs("div",{className:"admin-serving-columns",children:[m.jsxs("section",{className:"admin-serving-section","aria-label":"",children:[m.jsxs("header",{className:"admin-serving-section-header",children:[m.jsx("h2",{children:""}),m.jsx("p",{children:""})]}),m.jsxs("div",{className:"admin-serving-list",children:[I.map(G=>{const le=Ci(G.id),we=ge(G.createdAt),Ae=Nf(G);return m.jsxs("article",{className:`admin-serving-card${G.id===w?" highlight":""}`,"data-order-id":G.id,children:[m.jsxs("header",{className:"admin-serving-card-header-inline",children:[m.jsxs("div",{className:"admin-serving-header-primary",children:[m.jsx("span",{className:"admin-serving-ticket","aria-label":` ${G.callNumber}`,children:m.jsx("span",{className:"admin-payment-ticket badge",children:G.callNumber})}),m.jsxs("span",{className:"admin-serving-code",children:[" ",le]}),m.jsxs("span",{className:"admin-serving-progress-code",children:[" ",G.ticket]})]}),m.jsxs("div",{className:"admin-serving-header-meta",children:[m.jsx("time",{dateTime:G.createdAt,className:"admin-serving-time",children:G.createdAt}),we&&m.jsx("span",{className:"admin-serving-elapsed",children:we})]})]}),Ae.length>0&&m.jsx(av,{entries:Ae,totalAriaLabel:"",variant:"compact",className:"admin-serving-items-inline"}),m.jsxs("footer",{children:[m.jsxs("div",{className:"admin-serving-meta",children:[m.jsx("span",{className:`admin-serving-payment ${G.payment===""?"paid":"unpaid"}`,children:Cc(G.payment,a)}),m.jsxs("span",{className:"admin-serving-total",children:["",G.total.toLocaleString()]})]}),m.jsx("div",{className:"admin-serving-actions",children:m.jsx("button",{type:"button",className:"admin-serving-button primary",onClick:()=>M(G),disabled:C===G.id,children:""})})]})]},G.id)}),I.length===0&&m.jsx("p",{className:"admin-serving-empty",children:""})]})]}),m.jsxs("aside",{className:"admin-serving-side",children:[m.jsxs("section",{className:"admin-serving-section","aria-label":"",children:[m.jsxs("header",{className:"admin-serving-section-header",children:[m.jsx("h2",{children:""}),m.jsx("p",{children:""})]}),m.jsxs("div",{className:"admin-serving-list compact",children:[N.map(G=>{const le=Ci(G.id),we=ge(G.createdAt),Ae=Nf(G);return m.jsxs("article",{className:`admin-serving-mini-card${G.id===w?" highlight":""}`,"data-order-id":G.id,children:[m.jsxs("div",{className:"admin-serving-mini-header",children:[m.jsx("span",{className:"admin-serving-ticket","aria-label":` ${G.callNumber}`,children:m.jsx("span",{className:"admin-payment-ticket badge small",children:G.callNumber})}),m.jsxs("span",{className:"admin-serving-code",children:[" ",le]}),m.jsxs("span",{className:"admin-serving-progress-code",children:[" ",G.ticket]})]}),Ae.length>0&&m.jsx(av,{entries:Ae,showTotal:!1,variant:"compact",className:"admin-serving-items-inline"}),m.jsxs("div",{className:"admin-serving-time-group",children:[m.jsx("time",{dateTime:G.createdAt,className:"admin-serving-time",children:G.createdAt}),we&&m.jsx("span",{className:"admin-serving-elapsed",children:we})]}),m.jsx("div",{className:"admin-serving-mini-actions",children:m.jsx("button",{type:"button",className:"admin-serving-button primary small",onClick:()=>M(G),disabled:C===G.id,children:""})})]},G.id)}),N.length===0&&m.jsx("p",{className:"admin-serving-empty",children:""})]})]}),m.jsxs("section",{className:"admin-serving-section","aria-label":"",children:[m.jsxs("header",{className:"admin-serving-section-header",children:[m.jsx("h2",{children:""}),m.jsx("p",{children:""})]}),m.jsxs("div",{className:"admin-serving-list compact",children:[b.map(G=>{const le=Ci(G.id),we=ge(G.createdAt);return m.jsxs("article",{className:`admin-serving-mini-card${G.id===w?" highlight":""}`,"data-order-id":G.id,children:[m.jsxs("div",{children:[m.jsx("p",{className:"admin-serving-ticket","aria-label":` ${G.callNumber}`,children:m.jsx("span",{className:"admin-payment-ticket badge small",children:G.callNumber})}),m.jsxs("p",{className:"admin-serving-code",children:[" ",le]}),m.jsxs("p",{className:"admin-serving-progress-code",children:[" ",G.ticket]})]}),m.jsxs("div",{className:"admin-serving-time-group",children:[m.jsx("time",{dateTime:G.createdAt,className:"admin-serving-time",children:G.createdAt}),we&&m.jsx("span",{className:"admin-serving-elapsed",children:we})]}),m.jsx("button",{type:"button",className:"admin-serving-button ghost",onClick:()=>B(G),disabled:C===G.id,children:""})]},G.id)}),b.length===0&&m.jsx("p",{className:"admin-serving-empty",children:""})]})]})]})]}),h&&m.jsx(UB,{onDetected:K,onCancel:()=>{p(!1),_(null)},onCameraError:G=>_(G)})]})}function UB({onDetected:n,onCancel:e,onCameraError:t}){const r=k.useRef(null),[i,a]=k.useState(!0),[o,c]=k.useState(null),u=k.useRef(!1);return k.useEffect(()=>{const h=new _B;let p;return u.current=!1,(async()=>{const _=r.current??void 0;if(!_){const w="";c(w),t(w);return}try{p=await h.decodeFromVideoDevice(void 0,_,(w,A,S)=>{if(w&&!u.current&&(u.current=!0,S.stop(),n(w.getText())),A&&!(A instanceof Error&&A.name==="NotFoundException")){const D=A instanceof Error?A.message:String(A);c(D)}}),a(!1)}catch(w){const A=w instanceof Error?w.message:"";c(A),t(A)}})(),()=>{p?.stop()}},[n,t]),k.useEffect(()=>{o&&t(o)},[o,t]),m.jsx("div",{className:"admin-serving-scanner-overlay",role:"dialog","aria-modal":"true","aria-label":"QR",children:m.jsxs("div",{className:"admin-serving-scanner-dialog",children:[m.jsxs("header",{className:"admin-serving-scanner-header",children:[m.jsx("h2",{children:"QR"}),m.jsx("button",{type:"button",className:"admin-serving-button ghost",onClick:e,children:""})]}),m.jsx("p",{className:"admin-serving-scanner-hint",children:"QR"}),m.jsxs("div",{className:"admin-serving-scanner-video-wrap",children:[m.jsx("video",{ref:r,className:"admin-serving-scanner-video",autoPlay:!0,muted:!0,playsInline:!0}),i&&m.jsx("span",{className:"admin-serving-scanner-status",children:""})]}),o&&m.jsx("p",{className:"admin-serving-scanner-error",children:o})]})})}const Ev="app:kitchen-toast-test";function zB(n={}){if(typeof window>"u")return;const e={orderId:n.orderId??"TEST-ORDER",callNumber:n.callNumber??Math.floor(Math.random()*900+100),total:n.total??1500,itemSummary:n.itemSummary??":  1 /  1",createdAt:n.createdAt??new Date().toISOString()},t=new CustomEvent(Ev,{detail:e});window.dispatchEvent(t)}function HB(n){if(typeof window>"u")return()=>{};const e=t=>{n(t.detail)};return window.addEventListener(Ev,e),()=>{window.removeEventListener(Ev,e)}}const GB=[{id:"system",label:""},{id:"light",label:""},{id:"dark",label:""}],qB=[{id:"admin",label:"",enabled:!0},{id:"kitchen",label:"",enabled:!0},{id:"staff",label:"",enabled:!1}];function $B(){const[n,e]=k.useState("system"),[t,r]=k.useState(!0),[i,a]=k.useState(!0),{menuItems:o,baseMenuItemMap:c,overrides:u,updateMenuItem:h,resetMenuItem:p,resetAllMenuItems:g}=ol(),_=()=>Object.entries(c).reduce((M,[B,L])=>(M[B]={label:L.label,price:String(L.price)},M),{}),w=()=>Object.keys(c).reduce((M,B)=>(M[B]=null,M),{}),[A,S]=k.useState(()=>_()),[D,C]=k.useState(()=>w()),[P,V]=k.useState(null),[H,X]=k.useState({});k.useEffect(()=>{S(_()),C(w())},[o,c]);const F=(M,B,L)=>{S(ie=>({...ie,[M]:{...ie[M],[B]:L}})),C(ie=>({...ie,[M]:null})),V(null)},I=async M=>{const B=A[M];if(!B)return;const L=B.label.trim();if(!L){C(K=>({...K,[M]:{type:"error",message:""}}));return}if(L.length>40){C(K=>({...K,[M]:{type:"error",message:"40"}}));return}const ie=Number(B.price);if(!Number.isFinite(ie)||ie<0){C(K=>({...K,[M]:{type:"error",message:"0"}}));return}const ge=Math.round(ie);try{await h(M,{label:L,price:ge}),S(K=>({...K,[M]:{label:L,price:String(ge)}})),C(K=>({...K,[M]:{type:"success",message:""}})),V(null)}catch(K){console.error("",K),C(G=>({...G,[M]:{type:"error",message:""}}))}},b=async(M,B)=>{V(null),C(L=>({...L,[M]:null})),X(L=>({...L,[M]:!0}));try{await h(M,{soldOut:B}),C(L=>({...L,[M]:{type:"success",message:B?"":""}}))}catch(L){console.error("",L),C(ie=>({...ie,[M]:{type:"error",message:""}}))}finally{X(L=>{const ie={...L};return delete ie[M],ie})}},N=async M=>{if(V(null),!!!u[M]){const L=o.find(ie=>ie.key===M);if(!L)return;S(ie=>({...ie,[M]:{label:L.label,price:String(L.price)}})),C(ie=>({...ie,[M]:{type:"success",message:""}}));return}try{await p(M);const L=c[M];S(ie=>({...ie,[M]:{label:L.label,price:String(L.price)}})),C(ie=>({...ie,[M]:{type:"success",message:""}}))}catch(L){console.error("",L),C(ie=>({...ie,[M]:{type:"error",message:""}}))}},R=async()=>{if(V(null),!(Object.keys(u).length>0)){V({type:"success",message:""});return}try{await g(),S(_()),C(w()),V({type:"success",message:""})}catch(B){console.error("",B),V({type:"error",message:""})}};return m.jsxs("div",{className:"admin-grid",style:{gap:"24px",maxWidth:720},children:[m.jsxs("section",{className:"admin-card",children:[m.jsxs("header",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:"1rem",flexWrap:"wrap"},children:[m.jsxs("div",{children:[m.jsx("h3",{style:{margin:0},children:""}),m.jsx("p",{style:{margin:"4px 0 0",color:"#475569"},children:""})]}),m.jsx("button",{type:"button",className:"admin-secondary-button",onClick:()=>{R()},children:""})]}),P&&m.jsx("p",{role:"status",style:{marginTop:"12px",padding:"8px 12px",borderRadius:8,backgroundColor:P.type==="success"?"#ecfdf5":"#fee2e2",color:P.type==="success"?"#047857":"#b91c1c"},children:P.message}),m.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"16px",marginTop:"16px"},children:o.map(M=>{const B=A[M.key],L=c[M.key],ie=D[M.key],ge=String(M.price),K=B?B.label!==M.label||B.price!==ge:!1,G=!!u[M.key];return m.jsxs("article",{style:{border:"1px solid #e2e8f0",borderRadius:12,padding:"16px",backgroundColor:"#f8fafc",display:"flex",flexDirection:"column",gap:"12px"},children:[m.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:"0.75rem",flexWrap:"wrap"},children:[m.jsxs("div",{children:[m.jsx("h4",{style:{margin:0},children:M.label}),m.jsxs("p",{style:{margin:"4px 0 0",color:"#64748b"},children:["ID: ",M.key]})]}),G&&m.jsx("span",{style:{display:"inline-flex",alignItems:"center",gap:"0.25rem",padding:"4px 10px",borderRadius:999,backgroundColor:"#1e40af",color:"#eff6ff",fontSize:"0.85rem"},children:""})]}),m.jsxs("div",{style:{display:"grid",gap:"12px",gridTemplateColumns:"repeat(auto-fit, minmax(180px, 1fr))"},children:[m.jsxs("label",{style:{display:"flex",flexDirection:"column",gap:"6px"},children:[m.jsx("span",{style:{fontWeight:600},children:""}),m.jsx("input",{type:"text",value:B?.label??"",onChange:le=>F(M.key,"label",le.target.value),placeholder:L.label,style:{borderRadius:8,border:"1px solid #cbd5f5",padding:"10px 12px",fontSize:"1rem"}})]}),m.jsxs("label",{style:{display:"flex",flexDirection:"column",gap:"6px"},children:[m.jsx("span",{style:{fontWeight:600},children:" ()"}),m.jsx("input",{type:"number",min:0,inputMode:"numeric",value:B?.price??"",onChange:le=>F(M.key,"price",le.target.value),style:{borderRadius:8,border:"1px solid #cbd5f5",padding:"10px 12px",fontSize:"1rem"}})]})]}),m.jsxs("div",{className:"admin-menu-soldout-control",children:[m.jsxs("label",{className:"admin-menu-soldout-toggle",children:[m.jsx("input",{type:"checkbox",checked:M.soldOut,onChange:le=>{b(M.key,le.target.checked)},disabled:!!H[M.key]}),m.jsx("span",{children:M.soldOut?"":""})]}),m.jsx("p",{className:"admin-menu-soldout-helper",children:""})]}),m.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"8px"},children:[m.jsx("button",{type:"button",className:"admin-primary-button",onClick:()=>{I(M.key)},disabled:!K,children:""}),m.jsx("button",{type:"button",className:"admin-secondary-button",onClick:()=>{N(M.key)},children:G?"":""}),m.jsxs("span",{style:{color:"#64748b",alignSelf:"center",fontSize:"0.9rem"},children:[": ",L.label,"",L.price.toLocaleString(),""]})]}),ie&&m.jsx("p",{role:"status",style:{margin:0,padding:"8px 12px",borderRadius:8,backgroundColor:ie.type==="success"?"#ecfdf5":"#fee2e2",color:ie.type==="success"?"#047857":"#b91c1c"},children:ie.message})]},M.key)})})]}),m.jsxs("section",{className:"admin-card",children:[m.jsx("h3",{children:""}),m.jsx("p",{children:""}),m.jsx("div",{className:"admin-list",children:GB.map(M=>m.jsxs("label",{style:{display:"flex",gap:12,alignItems:"center"},children:[m.jsx("input",{type:"radio",name:"theme",value:M.id,checked:n===M.id,onChange:()=>e(M.id)}),M.label]},M.id))})]}),m.jsxs("section",{className:"admin-card",children:[m.jsx("h3",{children:""}),m.jsxs("div",{className:"admin-list",children:[m.jsxs("label",{style:{display:"flex",alignItems:"center",gap:12},children:[m.jsx("input",{type:"checkbox",checked:t,onChange:M=>r(M.target.checked)}),""]}),m.jsxs("label",{style:{display:"flex",alignItems:"center",gap:12},children:[m.jsx("input",{type:"checkbox",checked:i,onChange:M=>a(M.target.checked)}),""]}),m.jsx("button",{type:"button",className:"admin-secondary-button",onClick:()=>zB(),children:""})]})]}),m.jsxs("section",{className:"admin-card",children:[m.jsx("h3",{children:""}),m.jsx("p",{children:"Firestore "}),m.jsx("ul",{className:"admin-list",style:{margin:0},children:qB.map(M=>m.jsxs("li",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[m.jsxs("div",{children:[m.jsx("p",{style:{margin:0},children:M.label}),m.jsxs("small",{style:{color:"#64748b"},children:["ID: ",M.id]})]}),m.jsxs("label",{style:{display:"flex",alignItems:"center",gap:10},children:[m.jsx("input",{type:"checkbox",defaultChecked:M.enabled})," "]})]},M.id))})]})]})}function XB(n,e){if(n.match(/^[a-z]+:\/\//i))return n;if(n.match(/^\/\//))return window.location.protocol+n;if(n.match(/^[a-z]+:/i))return n;const t=document.implementation.createHTMLDocument(),r=t.createElement("base"),i=t.createElement("a");return t.head.appendChild(r),t.body.appendChild(i),e&&(r.href=e),i.href=n,i.href}const YB=(()=>{let n=0;const e=()=>`0000${(Math.random()*36**4<<0).toString(36)}`.slice(-4);return()=>(n+=1,`u${e()}${n}`)})();function Qs(n){const e=[];for(let t=0,r=n.length;t<r;t++)e.push(n[t]);return e}let Zl=null;function U3(n={}){return Zl||(n.includeStyleProperties?(Zl=n.includeStyleProperties,Zl):(Zl=Qs(window.getComputedStyle(document.documentElement)),Zl))}function k0(n,e){const r=(n.ownerDocument.defaultView||window).getComputedStyle(n).getPropertyValue(e);return r?parseFloat(r.replace("px","")):0}function KB(n){const e=k0(n,"border-left-width"),t=k0(n,"border-right-width");return n.clientWidth+e+t}function WB(n){const e=k0(n,"border-top-width"),t=k0(n,"border-bottom-width");return n.clientHeight+e+t}function z3(n,e={}){const t=e.width||KB(n),r=e.height||WB(n);return{width:t,height:r}}function QB(){let n,e;try{e=process}catch{}const t=e&&e.env?e.env.devicePixelRatio:null;return t&&(n=parseInt(t,10),Number.isNaN(n)&&(n=1)),n||window.devicePixelRatio||1}const Fr=16384;function ZB(n){(n.width>Fr||n.height>Fr)&&(n.width>Fr&&n.height>Fr?n.width>n.height?(n.height*=Fr/n.width,n.width=Fr):(n.width*=Fr/n.height,n.height=Fr):n.width>Fr?(n.height*=Fr/n.width,n.width=Fr):(n.width*=Fr/n.height,n.height=Fr))}function L0(n){return new Promise((e,t)=>{const r=new Image;r.onload=()=>{r.decode().then(()=>{requestAnimationFrame(()=>e(r))})},r.onerror=t,r.crossOrigin="anonymous",r.decoding="async",r.src=n})}async function JB(n){return Promise.resolve().then(()=>new XMLSerializer().serializeToString(n)).then(encodeURIComponent).then(e=>`data:image/svg+xml;charset=utf-8,${e}`)}async function eV(n,e,t){const r="http://www.w3.org/2000/svg",i=document.createElementNS(r,"svg"),a=document.createElementNS(r,"foreignObject");return i.setAttribute("width",`${e}`),i.setAttribute("height",`${t}`),i.setAttribute("viewBox",`0 0 ${e} ${t}`),a.setAttribute("width","100%"),a.setAttribute("height","100%"),a.setAttribute("x","0"),a.setAttribute("y","0"),a.setAttribute("externalResourcesRequired","true"),i.appendChild(a),a.appendChild(n),JB(i)}const Ir=(n,e)=>{if(n instanceof e)return!0;const t=Object.getPrototypeOf(n);return t===null?!1:t.constructor.name===e.name||Ir(t,e)};function tV(n){const e=n.getPropertyValue("content");return`${n.cssText} content: '${e.replace(/'|"/g,"")}';`}function nV(n,e){return U3(e).map(t=>{const r=n.getPropertyValue(t),i=n.getPropertyPriority(t);return`${t}: ${r}${i?" !important":""};`}).join(" ")}function rV(n,e,t,r){const i=`.${n}:${e}`,a=t.cssText?tV(t):nV(t,r);return document.createTextNode(`${i}{${a}}`)}function db(n,e,t,r){const i=window.getComputedStyle(n,t),a=i.getPropertyValue("content");if(a===""||a==="none")return;const o=YB();try{e.className=`${e.className} ${o}`}catch{return}const c=document.createElement("style");c.appendChild(rV(o,t,i,r)),e.appendChild(c)}function iV(n,e,t){db(n,e,":before",t),db(n,e,":after",t)}const pb="application/font-woff",mb="image/jpeg",aV={woff:pb,woff2:pb,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:mb,jpeg:mb,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml",webp:"image/webp"};function sV(n){const e=/\.([^./]*?)$/g.exec(n);return e?e[1]:""}function Wy(n){const e=sV(n).toLowerCase();return aV[e]||""}function oV(n){return n.split(/,/)[1]}function Av(n){return n.search(/^(data:)/)!==-1}function lV(n,e){return`data:${e};base64,${n}`}async function H3(n,e,t){const r=await fetch(n,e);if(r.status===404)throw new Error(`Resource "${r.url}" not found`);const i=await r.blob();return new Promise((a,o)=>{const c=new FileReader;c.onerror=o,c.onloadend=()=>{try{a(t({res:r,result:c.result}))}catch(u){o(u)}},c.readAsDataURL(i)})}const Jm={};function cV(n,e,t){let r=n.replace(/\?.*/,"");return t&&(r=n),/ttf|otf|eot|woff2?/i.test(r)&&(r=r.replace(/.*\//,"")),e?`[${e}]${r}`:r}async function Qy(n,e,t){const r=cV(n,e,t.includeQueryParams);if(Jm[r]!=null)return Jm[r];t.cacheBust&&(n+=(/\?/.test(n)?"&":"?")+new Date().getTime());let i;try{const a=await H3(n,t.fetchRequestInit,({res:o,result:c})=>(e||(e=o.headers.get("Content-Type")||""),oV(c)));i=lV(a,e)}catch(a){i=t.imagePlaceholder||"";let o=`Failed to fetch resource: ${n}`;a&&(o=typeof a=="string"?a:a.message),o&&console.warn(o)}return Jm[r]=i,i}async function uV(n){const e=n.toDataURL();return e==="data:,"?n.cloneNode(!1):L0(e)}async function fV(n,e){if(n.currentSrc){const a=document.createElement("canvas"),o=a.getContext("2d");a.width=n.clientWidth,a.height=n.clientHeight,o?.drawImage(n,0,0,a.width,a.height);const c=a.toDataURL();return L0(c)}const t=n.poster,r=Wy(t),i=await Qy(t,r,e);return L0(i)}async function hV(n,e){var t;try{if(!((t=n?.contentDocument)===null||t===void 0)&&t.body)return await wp(n.contentDocument.body,e,!0)}catch{}return n.cloneNode(!1)}async function dV(n,e){return Ir(n,HTMLCanvasElement)?uV(n):Ir(n,HTMLVideoElement)?fV(n,e):Ir(n,HTMLIFrameElement)?hV(n,e):n.cloneNode(G3(n))}const pV=n=>n.tagName!=null&&n.tagName.toUpperCase()==="SLOT",G3=n=>n.tagName!=null&&n.tagName.toUpperCase()==="SVG";async function mV(n,e,t){var r,i;if(G3(e))return e;let a=[];return pV(n)&&n.assignedNodes?a=Qs(n.assignedNodes()):Ir(n,HTMLIFrameElement)&&(!((r=n.contentDocument)===null||r===void 0)&&r.body)?a=Qs(n.contentDocument.body.childNodes):a=Qs(((i=n.shadowRoot)!==null&&i!==void 0?i:n).childNodes),a.length===0||Ir(n,HTMLVideoElement)||await a.reduce((o,c)=>o.then(()=>wp(c,t)).then(u=>{u&&e.appendChild(u)}),Promise.resolve()),e}function gV(n,e,t){const r=e.style;if(!r)return;const i=window.getComputedStyle(n);i.cssText?(r.cssText=i.cssText,r.transformOrigin=i.transformOrigin):U3(t).forEach(a=>{let o=i.getPropertyValue(a);a==="font-size"&&o.endsWith("px")&&(o=`${Math.floor(parseFloat(o.substring(0,o.length-2)))-.1}px`),Ir(n,HTMLIFrameElement)&&a==="display"&&o==="inline"&&(o="block"),a==="d"&&e.getAttribute("d")&&(o=`path(${e.getAttribute("d")})`),r.setProperty(a,o,i.getPropertyPriority(a))})}function vV(n,e){Ir(n,HTMLTextAreaElement)&&(e.innerHTML=n.value),Ir(n,HTMLInputElement)&&e.setAttribute("value",n.value)}function yV(n,e){if(Ir(n,HTMLSelectElement)){const t=e,r=Array.from(t.children).find(i=>n.value===i.getAttribute("value"));r&&r.setAttribute("selected","")}}function _V(n,e,t){return Ir(e,Element)&&(gV(n,e,t),iV(n,e,t),vV(n,e),yV(n,e)),e}async function xV(n,e){const t=n.querySelectorAll?n.querySelectorAll("use"):[];if(t.length===0)return n;const r={};for(let a=0;a<t.length;a++){const c=t[a].getAttribute("xlink:href");if(c){const u=n.querySelector(c),h=document.querySelector(c);!u&&h&&!r[c]&&(r[c]=await wp(h,e,!0))}}const i=Object.values(r);if(i.length){const a="http://www.w3.org/1999/xhtml",o=document.createElementNS(a,"svg");o.setAttribute("xmlns",a),o.style.position="absolute",o.style.width="0",o.style.height="0",o.style.overflow="hidden",o.style.display="none";const c=document.createElementNS(a,"defs");o.appendChild(c);for(let u=0;u<i.length;u++)c.appendChild(i[u]);n.appendChild(o)}return n}async function wp(n,e,t){return!t&&e.filter&&!e.filter(n)?null:Promise.resolve(n).then(r=>dV(r,e)).then(r=>mV(n,r,e)).then(r=>_V(n,r,e)).then(r=>xV(r,e))}const q3=/url\((['"]?)([^'"]+?)\1\)/g,wV=/url\([^)]+\)\s*format\((["']?)([^"']+)\1\)/g,EV=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;function AV(n){const e=n.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1");return new RegExp(`(url\\(['"]?)(${e})(['"]?\\))`,"g")}function bV(n){const e=[];return n.replace(q3,(t,r,i)=>(e.push(i),t)),e.filter(t=>!Av(t))}async function SV(n,e,t,r,i){try{const a=t?XB(e,t):e,o=Wy(e);let c;return i||(c=await Qy(a,o,r)),n.replace(AV(e),`$1${c}$3`)}catch{}return n}function CV(n,{preferredFontFormat:e}){return e?n.replace(EV,t=>{for(;;){const[r,,i]=wV.exec(t)||[];if(!i)return"";if(i===e)return`src: ${r};`}}):n}function $3(n){return n.search(q3)!==-1}async function X3(n,e,t){if(!$3(n))return n;const r=CV(n,t);return bV(r).reduce((a,o)=>a.then(c=>SV(c,o,e,t)),Promise.resolve(r))}async function Jl(n,e,t){var r;const i=(r=e.style)===null||r===void 0?void 0:r.getPropertyValue(n);if(i){const a=await X3(i,null,t);return e.style.setProperty(n,a,e.style.getPropertyPriority(n)),!0}return!1}async function TV(n,e){await Jl("background",n,e)||await Jl("background-image",n,e),await Jl("mask",n,e)||await Jl("-webkit-mask",n,e)||await Jl("mask-image",n,e)||await Jl("-webkit-mask-image",n,e)}async function IV(n,e){const t=Ir(n,HTMLImageElement);if(!(t&&!Av(n.src))&&!(Ir(n,SVGImageElement)&&!Av(n.href.baseVal)))return;const r=t?n.src:n.href.baseVal,i=await Qy(r,Wy(r),e);await new Promise((a,o)=>{n.onload=a,n.onerror=e.onImageErrorHandler?(...u)=>{try{a(e.onImageErrorHandler(...u))}catch(h){o(h)}}:o;const c=n;c.decode&&(c.decode=a),c.loading==="lazy"&&(c.loading="eager"),t?(n.srcset="",n.src=i):n.href.baseVal=i})}async function NV(n,e){const r=Qs(n.childNodes).map(i=>Y3(i,e));await Promise.all(r).then(()=>n)}async function Y3(n,e){Ir(n,Element)&&(await TV(n,e),await IV(n,e),await NV(n,e))}function RV(n,e){const{style:t}=n;e.backgroundColor&&(t.backgroundColor=e.backgroundColor),e.width&&(t.width=`${e.width}px`),e.height&&(t.height=`${e.height}px`);const r=e.style;return r!=null&&Object.keys(r).forEach(i=>{t[i]=r[i]}),n}const gb={};async function vb(n){let e=gb[n];if(e!=null)return e;const r=await(await fetch(n)).text();return e={url:n,cssText:r},gb[n]=e,e}async function yb(n,e){let t=n.cssText;const r=/url\(["']?([^"')]+)["']?\)/g,a=(t.match(/url\([^)]+\)/g)||[]).map(async o=>{let c=o.replace(r,"$1");return c.startsWith("https://")||(c=new URL(c,n.url).href),H3(c,e.fetchRequestInit,({result:u})=>(t=t.replace(o,`url(${u})`),[o,u]))});return Promise.all(a).then(()=>t)}function _b(n){if(n==null)return[];const e=[],t=/(\/\*[\s\S]*?\*\/)/gi;let r=n.replace(t,"");const i=new RegExp("((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})","gi");for(;;){const u=i.exec(r);if(u===null)break;e.push(u[0])}r=r.replace(i,"");const a=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi,o="((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})",c=new RegExp(o,"gi");for(;;){let u=a.exec(r);if(u===null){if(u=c.exec(r),u===null)break;a.lastIndex=c.lastIndex}else c.lastIndex=a.lastIndex;e.push(u[0])}return e}async function OV(n,e){const t=[],r=[];return n.forEach(i=>{if("cssRules"in i)try{Qs(i.cssRules||[]).forEach((a,o)=>{if(a.type===CSSRule.IMPORT_RULE){let c=o+1;const u=a.href,h=vb(u).then(p=>yb(p,e)).then(p=>_b(p).forEach(g=>{try{i.insertRule(g,g.startsWith("@import")?c+=1:i.cssRules.length)}catch(_){console.error("Error inserting rule from remote css",{rule:g,error:_})}})).catch(p=>{console.error("Error loading remote css",p.toString())});r.push(h)}})}catch(a){const o=n.find(c=>c.href==null)||document.styleSheets[0];i.href!=null&&r.push(vb(i.href).then(c=>yb(c,e)).then(c=>_b(c).forEach(u=>{o.insertRule(u,o.cssRules.length)})).catch(c=>{console.error("Error loading remote stylesheet",c)})),console.error("Error inlining remote css file",a)}}),Promise.all(r).then(()=>(n.forEach(i=>{if("cssRules"in i)try{Qs(i.cssRules||[]).forEach(a=>{t.push(a)})}catch(a){console.error(`Error while reading CSS rules from ${i.href}`,a)}}),t))}function DV(n){return n.filter(e=>e.type===CSSRule.FONT_FACE_RULE).filter(e=>$3(e.style.getPropertyValue("src")))}async function MV(n,e){if(n.ownerDocument==null)throw new Error("Provided element is not within a Document");const t=Qs(n.ownerDocument.styleSheets),r=await OV(t,e);return DV(r)}function K3(n){return n.trim().replace(/["']/g,"")}function PV(n){const e=new Set;function t(r){(r.style.fontFamily||getComputedStyle(r).fontFamily).split(",").forEach(a=>{e.add(K3(a))}),Array.from(r.children).forEach(a=>{a instanceof HTMLElement&&t(a)})}return t(n),e}async function kV(n,e){const t=await MV(n,e),r=PV(n);return(await Promise.all(t.filter(a=>r.has(K3(a.style.fontFamily))).map(a=>{const o=a.parentStyleSheet?a.parentStyleSheet.href:null;return X3(a.cssText,o,e)}))).join(`
`)}async function LV(n,e){const t=e.fontEmbedCSS!=null?e.fontEmbedCSS:e.skipFonts?null:await kV(n,e);if(t){const r=document.createElement("style"),i=document.createTextNode(t);r.appendChild(i),n.firstChild?n.insertBefore(r,n.firstChild):n.appendChild(r)}}async function jV(n,e={}){const{width:t,height:r}=z3(n,e),i=await wp(n,e,!0);return await LV(i,e),await Y3(i,e),RV(i,e),await eV(i,t,r)}async function BV(n,e={}){const{width:t,height:r}=z3(n,e),i=await jV(n,e),a=await L0(i),o=document.createElement("canvas"),c=o.getContext("2d"),u=e.pixelRatio||QB(),h=e.canvasWidth||t,p=e.canvasHeight||r;return o.width=h*u,o.height=p*u,e.skipAutoScale||ZB(o),o.style.width=`${h}`,o.style.height=`${p}`,e.backgroundColor&&(c.fillStyle=e.backgroundColor,c.fillRect(0,0,o.width,o.height)),c.drawImage(a,0,0,o.width,o.height),o}async function VV(n,e={}){return(await BV(n,e)).toDataURL()}const FV=[{value:1e4,label:"10,000",kind:"bill"},{value:5e3,label:"5,000",kind:"bill"},{value:2e3,label:"2,000",kind:"bill"},{value:1e3,label:"1,000",kind:"bill"}],UV=[{value:500,label:"500",kind:"coin"},{value:100,label:"100",kind:"coin"},{value:50,label:"50",kind:"coin"},{value:10,label:"10",kind:"coin"},{value:5,label:"5",kind:"coin"},{value:1,label:"1",kind:"coin"}],W3=[...FV,...UV],xb=["middle","close"],Jt=new Intl.NumberFormat("ja-JP",{style:"currency",currency:"JPY",maximumFractionDigits:0}),Ht=new Intl.NumberFormat("ja-JP",{maximumFractionDigits:0}),wb=new Intl.DateTimeFormat("ja-JP",{dateStyle:"medium",timeStyle:"short"});function ec(n){const e=Jt.format(Math.abs(n));return n>0?`+${e}`:n<0?`-${e}`:e}function Eb(){return W3.reduce((n,e)=>(n[e.value]=0,n),{})}function zV(){const[n]=k.useState(()=>new Date),e=k.useCallback(()=>{const me=TB(n),Ve=sb(n),Ye={...me},qe={open:"manual",middle:"manual",close:"manual"};let bt=!1;return Ve>0&&xb.forEach(Et=>{Ye[Et]<=0&&(Ye[Et]=Ve,qe[Et]="auto",bt=!0)}),{presets:Ye,source:qe,shouldPersist:bt,usageTotal:Ve}},[n]),t=k.useMemo(()=>e(),[e]),[r,i]=k.useState(()=>Eb()),[a,o]=k.useState(""),[c,u]=k.useState(!1),[h,p]=k.useState(null),[g,_]=k.useState(null),[w,A]=k.useState("open"),[S,D]=k.useState(()=>t.presets),[C,P]=k.useState(()=>t.source),[V,H]=k.useState(()=>t.presets.open),[X,F]=k.useState(()=>t.usageTotal),[I,b]=k.useState(()=>fb(n)),N=k.useRef(null),R=k.useRef(C),M=k.useMemo(()=>{const me=new Date(n);return me.setHours(0,0,0,0),me},[n]),B=k.useMemo(()=>{const me=new Date(M);return me.setDate(me.getDate()+1),me},[M]),L=k.useMemo(()=>({start:M,end:B}),[M,B]),{orders:ie}=Uc(L),ge=k.useMemo(()=>{const me=M.getTime(),Ve=B.getTime();return ie.reduce((Ye,qe)=>{const bt=qe.createdAt??qe.updatedAt;if(!bt)return Ye;const Et=bt.getTime();return Et<me||Et>=Ve||(qe.payment===""?(Ye.paidTotal+=qe.total,Ye.paidCount+=1):qe.payment===""&&(Ye.unpaidTotal+=qe.total,Ye.unpaidCount+=1)),Ye},{paidTotal:0,unpaidTotal:0,paidCount:0,unpaidCount:0})},[ie,M,B]);k.useEffect(()=>{R.current=C},[C]),k.useEffect(()=>{t.shouldPersist&&(ab(t.presets,n),F(t.usageTotal))},[n,t]);const K=k.useCallback(me=>{ab(me,n)},[n]),G=k.useCallback((me,Ve,Ye="manual")=>{D(qe=>{if(qe[me]===Ve)return qe;const bt={...qe,[me]:Ve};return K(bt),bt}),P(qe=>qe[me]===Ye?qe:{...qe,[me]:Ye})},[K]);k.useEffect(()=>{H(S[w])},[w,S]),k.useEffect(()=>{if(typeof window>"u")return;const me=()=>{const Et=sb(n);F(Et),D(Xn=>{const St=R.current;let Fe=Xn,vt=!1;return xb.forEach(Sn=>{St[Sn]==="auto"&&Xn[Sn]!==Et&&(vt||(Fe={...Xn},vt=!0),Fe[Sn]=Et)}),vt?(K(Fe),Fe):Xn})},Ve=()=>{const Et=fb(n);b(Et)},Ye=DB(n),qe=OB(n),bt=Et=>{Et.key===Ye?me():Et.key===qe&&Ve()};return window.addEventListener(gv,me),window.addEventListener(vv,Ve),window.addEventListener("storage",bt),()=>{window.removeEventListener(gv,me),window.removeEventListener(vv,Ve),window.removeEventListener("storage",bt)}},[n,K]);const le=k.useMemo(()=>{const me=W3.map(St=>{const Fe=r[St.value]??0,vt=St.value*Fe;return{...St,count:Fe,subtotal:vt}}),Ve=me.filter(St=>St.kind==="bill"),Ye=me.filter(St=>St.kind==="coin"),qe=Ve.reduce((St,Fe)=>St+Fe.subtotal,0),bt=Ye.reduce((St,Fe)=>St+Fe.subtotal,0),Et=Ve.reduce((St,Fe)=>St+Fe.count,0),Xn=Ye.reduce((St,Fe)=>St+Fe.count,0);return{billItems:Ve,coinItems:Ye,billTotal:qe,coinTotal:bt,grandTotal:qe+bt,totalBills:Et,totalCoins:Xn,totalPieces:Et+Xn}},[r]),we=AB[w],Ae=k.useMemo(()=>V*Ko,[V]),$=k.useMemo(()=>I.plusCount*si,[I.plusCount]),oe=k.useMemo(()=>-I.minusCount*si,[I.minusCount]),pe=k.useMemo(()=>I.plusCount+I.minusCount,[I.plusCount,I.minusCount]),ve=k.useMemo(()=>ec(I.totalAmount),[I.totalAmount]),Ne=k.useMemo(()=>new Date,[r,a,w,V,I]),Re=me=>Ve=>{const Ye=Ve.currentTarget.valueAsNumber;i(qe=>({...qe,[me]:Number.isNaN(Ye)||Ye<0?0:Math.floor(Ye)}))},Ee=me=>{const Ve=me.currentTarget.value;A(Ve),H(S[Ve]??0)},Qe=me=>{const Ve=me.currentTarget.valueAsNumber,Ye=Number.isNaN(Ve)||Ve<0?0:Math.floor(Ve);H(Ye),G(w,Ye,"manual")},Ze=()=>{i(Eb()),p(null);const me=e();D(me.presets),P(me.source);const Ve=me.presets[w];H(Ve),F(me.usageTotal),K(me.presets)},Pn=async()=>{if(N.current){u(!0),p(null);try{const me=await VV(N.current,{cacheBust:!0,pixelRatio:2,backgroundColor:"#ffffff"}),Ve=document.createElement("a"),Ye=new Date().toISOString().replace(/[:.]/g,"-");Ve.download=`cash-audit-${Ye}.png`,Ve.href=me,Ve.click(),_(new Date)}catch(me){console.error("Failed to save cash audit as image",me),p("")}finally{u(!1)}}};return m.jsxs("div",{className:"admin-grid admin-cash-audit-layout",children:[m.jsxs("div",{className:"admin-cash-audit-input-column",children:[m.jsxs("section",{className:"admin-card admin-cash-audit-config",children:[m.jsx("header",{className:"admin-card-header",children:m.jsxs("div",{children:[m.jsx("h3",{children:""}),m.jsx("p",{children:""})]})}),m.jsxs("fieldset",{className:"admin-cash-audit-shift-group",children:[m.jsx("legend",{children:""}),m.jsx("div",{className:"admin-cash-audit-shift-options",children:yp.map(me=>m.jsxs("label",{className:`admin-cash-audit-shift-option${w===me.value?" is-active":""}`,children:[m.jsx("input",{type:"radio",name:"cash-audit-shift",value:me.value,checked:w===me.value,onChange:Ee}),m.jsx("span",{children:me.label})]},me.value))})]}),m.jsxs("div",{className:"admin-cash-audit-voucher-field",children:[m.jsx("label",{htmlFor:"cash-audit-voucher-count",children:""}),m.jsxs("div",{className:"admin-cash-audit-count-input",children:[m.jsx("input",{id:"cash-audit-voucher-count",className:"admin-input admin-input--compact",type:"number",min:0,step:1,inputMode:"numeric",pattern:"[0-9]*",value:V,onChange:Qe}),m.jsx("span",{className:"admin-cash-audit-count-suffix",children:""})]}),m.jsx("p",{className:"admin-cash-audit-helper",children:""}),m.jsxs("div",{className:"admin-cash-audit-voucher-total",children:[m.jsxs("span",{children:["1",Ht.format(Ko),""]}),m.jsx("strong",{children:Jt.format(Ae)})]}),m.jsxs("div",{className:"admin-cash-audit-voucher-usage",children:[m.jsx("span",{children:""}),m.jsxs("strong",{children:[Ht.format(X)," "]}),m.jsxs("span",{className:"admin-cash-audit-voucher-usage-amount",children:[" ",Jt.format(X*Ko)]})]}),m.jsxs("div",{className:"admin-cash-audit-janken-summary","aria-live":"polite",children:[m.jsxs("div",{className:"admin-cash-audit-janken-header",children:[m.jsx("span",{className:"admin-cash-audit-janken-label",children:""}),m.jsx("span",{className:`admin-cash-audit-janken-total${I.totalAmount>0?" is-plus":I.totalAmount<0?" is-minus":""}`,children:ve})]}),m.jsxs("div",{className:"admin-cash-audit-janken-details",children:[m.jsxs("span",{className:"admin-cash-audit-janken-pill positive",children:[ec(si),"  ",Ht.format(I.plusCount)," "]}),m.jsxs("span",{className:"admin-cash-audit-janken-pill negative",children:[ec(-si),"  ",Ht.format(I.minusCount)," "]}),m.jsxs("span",{className:"admin-cash-audit-janken-pill neutral",children:[" ",Ht.format(pe)," "]})]}),m.jsx("span",{className:"admin-cash-audit-janken-note",children:""})]})]}),(w==="middle"||w==="close")&&m.jsxs("div",{className:"admin-cash-audit-shift-summary",children:[m.jsxs("div",{children:[m.jsx("span",{className:"admin-cash-audit-summary-label",children:""}),m.jsx("strong",{children:Jt.format(ge.paidTotal)}),m.jsxs("span",{className:"admin-cash-audit-summary-meta",children:[Ht.format(ge.paidCount)," "]})]}),m.jsxs("div",{children:[m.jsx("span",{className:"admin-cash-audit-summary-label",children:""}),m.jsx("strong",{children:Jt.format(ge.unpaidTotal)}),m.jsxs("span",{className:"admin-cash-audit-summary-meta",children:[Ht.format(ge.unpaidCount)," "]})]})]})]}),m.jsxs("section",{className:"admin-card",children:[m.jsxs("header",{className:"admin-card-header",children:[m.jsxs("div",{children:[m.jsx("h3",{children:""}),m.jsx("p",{children:""})]}),m.jsxs("dl",{className:"admin-cash-audit-group-summary",children:[m.jsxs("div",{children:[m.jsx("dt",{children:""}),m.jsxs("dd",{children:[Ht.format(le.totalBills)," "]})]}),m.jsxs("div",{children:[m.jsx("dt",{children:""}),m.jsx("dd",{children:Jt.format(le.billTotal)})]})]})]}),m.jsxs("table",{className:"admin-table admin-cash-audit-table",children:[m.jsx("thead",{children:m.jsxs("tr",{children:[m.jsx("th",{scope:"col",children:""}),m.jsx("th",{scope:"col",children:""}),m.jsx("th",{scope:"col",children:""})]})}),m.jsx("tbody",{children:le.billItems.map(me=>m.jsxs("tr",{children:[m.jsx("th",{scope:"row",children:me.label}),m.jsxs("td",{children:[m.jsxs("label",{className:"sr-only",htmlFor:`denomination-${me.value}`,children:[me.label,""]}),m.jsxs("div",{className:"admin-cash-audit-count-input",children:[m.jsx("input",{id:`denomination-${me.value}`,className:"admin-input admin-input--compact",type:"number",min:0,step:1,inputMode:"numeric",pattern:"[0-9]*",value:me.count,onChange:Re(me.value)}),m.jsx("span",{className:"admin-cash-audit-count-suffix",children:""})]})]}),m.jsx("td",{className:"admin-text-right admin-cash-audit-value",children:Jt.format(me.subtotal)})]},`bill-${me.value}`))}),m.jsx("tfoot",{children:m.jsxs("tr",{children:[m.jsx("th",{scope:"row",children:""}),m.jsx("td",{children:m.jsxs("span",{className:"admin-cash-audit-total-chip",children:[Ht.format(le.totalBills)," "]})}),m.jsx("td",{className:"admin-text-right admin-cash-audit-value",children:Jt.format(le.billTotal)})]})})]})]}),m.jsxs("section",{className:"admin-card",children:[m.jsxs("header",{className:"admin-card-header",children:[m.jsxs("div",{children:[m.jsx("h3",{children:""}),m.jsx("p",{children:""})]}),m.jsxs("dl",{className:"admin-cash-audit-group-summary",children:[m.jsxs("div",{children:[m.jsx("dt",{children:""}),m.jsxs("dd",{children:[Ht.format(le.totalCoins)," "]})]}),m.jsxs("div",{children:[m.jsx("dt",{children:""}),m.jsx("dd",{children:Jt.format(le.coinTotal)})]})]})]}),m.jsxs("table",{className:"admin-table admin-cash-audit-table",children:[m.jsx("thead",{children:m.jsxs("tr",{children:[m.jsx("th",{scope:"col",children:""}),m.jsx("th",{scope:"col",children:""}),m.jsx("th",{scope:"col",children:""})]})}),m.jsx("tbody",{children:le.coinItems.map(me=>m.jsxs("tr",{children:[m.jsx("th",{scope:"row",children:me.label}),m.jsxs("td",{children:[m.jsxs("label",{className:"sr-only",htmlFor:`denomination-${me.value}`,children:[me.label,""]}),m.jsxs("div",{className:"admin-cash-audit-count-input",children:[m.jsx("input",{id:`denomination-${me.value}`,className:"admin-input admin-input--compact",type:"number",min:0,step:1,inputMode:"numeric",pattern:"[0-9]*",value:me.count,onChange:Re(me.value)}),m.jsx("span",{className:"admin-cash-audit-count-suffix",children:""})]})]}),m.jsx("td",{className:"admin-text-right admin-cash-audit-value",children:Jt.format(me.subtotal)})]},`coin-${me.value}`))}),m.jsx("tfoot",{children:m.jsxs("tr",{children:[m.jsx("th",{scope:"row",children:""}),m.jsx("td",{children:m.jsxs("span",{className:"admin-cash-audit-total-chip",children:[Ht.format(le.totalCoins)," "]})}),m.jsx("td",{className:"admin-text-right admin-cash-audit-value",children:Jt.format(le.coinTotal)})]})})]})]}),m.jsxs("section",{className:"admin-card admin-cash-audit-actions",children:[m.jsx("header",{className:"admin-card-header",children:m.jsxs("div",{children:[m.jsx("h3",{children:""}),m.jsx("p",{children:""})]})}),m.jsxs("div",{className:"admin-cash-audit-note-field",children:[m.jsx("label",{htmlFor:"cash-audit-note",children:""}),m.jsx("textarea",{id:"cash-audit-note",className:"admin-textarea",value:a,maxLength:400,placeholder:": 15:30 :  100",onChange:me=>o(me.target.value)})]}),m.jsxs("div",{className:"admin-cash-audit-buttons",children:[m.jsx("button",{type:"button",className:"admin-secondary-button",onClick:Ze,children:""}),m.jsx("button",{type:"button",className:"admin-primary-button",onClick:Pn,disabled:c,children:c?"":""})]}),m.jsxs("div",{className:"admin-cash-audit-feedback",children:[m.jsxs("span",{children:[" ",Jt.format(le.grandTotal)," / ",le.totalPieces," "]}),m.jsxs("span",{className:"admin-cash-audit-feedback-muted",children:[" ",Ht.format(V)," ",Jt.format(Ae),""]}),m.jsxs("span",{className:"admin-cash-audit-feedback-muted",children:[" ",ve,"+",Ht.format(I.plusCount)," / -",Ht.format(I.minusCount)," "]}),m.jsxs("span",{className:"admin-cash-audit-feedback-muted",children:[" ",we]}),g&&m.jsxs("span",{className:"admin-cash-audit-feedback-muted",children:[": ",wb.format(g)]})]}),h&&m.jsx("p",{className:"admin-cash-audit-error",children:h})]})]}),m.jsxs("section",{className:"admin-card admin-cash-audit-report",ref:N,children:[m.jsxs("header",{className:"admin-cash-audit-report-header",children:[m.jsx("p",{className:"admin-content-overline",children:""}),m.jsx("h3",{children:Jt.format(le.grandTotal)}),m.jsxs("div",{className:"admin-cash-audit-report-meta",children:[m.jsxs("span",{children:[" ",Jt.format(le.billTotal)]}),m.jsxs("span",{children:[" ",Jt.format(le.coinTotal)]}),m.jsxs("span",{children:[" ",Ht.format(V)," ",Jt.format(Ae),""]}),m.jsxs("span",{children:[" ",ve,"+",Ht.format(I.plusCount)," / -",Ht.format(I.minusCount)," "]}),m.jsxs("span",{children:[" ",Ht.format(le.totalPieces)," "]}),m.jsxs("span",{children:[" ",Ht.format(X)," ",Jt.format(X*Ko),""]})]}),m.jsxs("p",{className:"admin-cash-audit-timestamp",children:[": ",wb.format(Ne)]}),m.jsxs("p",{className:"admin-cash-audit-shift-label",children:[": ",we]})]}),m.jsxs("div",{className:"admin-cash-audit-report-grid",children:[m.jsxs("article",{children:[m.jsx("h4",{children:""}),m.jsxs("table",{children:[m.jsx("thead",{children:m.jsxs("tr",{children:[m.jsx("th",{scope:"col",children:""}),m.jsx("th",{scope:"col",children:""}),m.jsx("th",{scope:"col",children:""})]})}),m.jsx("tbody",{children:le.billItems.map(me=>m.jsxs("tr",{children:[m.jsx("td",{children:me.label}),m.jsxs("td",{children:[Ht.format(me.count)," "]}),m.jsx("td",{children:Jt.format(me.subtotal)})]},`report-bill-${me.value}`))})]})]}),m.jsxs("article",{children:[m.jsx("h4",{children:""}),m.jsxs("table",{children:[m.jsx("thead",{children:m.jsxs("tr",{children:[m.jsx("th",{scope:"col",children:""}),m.jsx("th",{scope:"col",children:""}),m.jsx("th",{scope:"col",children:""})]})}),m.jsx("tbody",{children:le.coinItems.map(me=>m.jsxs("tr",{children:[m.jsx("td",{children:me.label}),m.jsxs("td",{children:[Ht.format(me.count)," "]}),m.jsx("td",{children:Jt.format(me.subtotal)})]},`report-coin-${me.value}`))})]})]}),m.jsxs("article",{children:[m.jsx("h4",{children:""}),m.jsxs("table",{children:[m.jsx("thead",{children:m.jsxs("tr",{children:[m.jsx("th",{scope:"col",children:""}),m.jsx("th",{scope:"col",children:""}),m.jsx("th",{scope:"col",children:""})]})}),m.jsx("tbody",{children:m.jsxs("tr",{children:[m.jsx("td",{children:""}),m.jsxs("td",{children:[Ht.format(V)," "]}),m.jsx("td",{children:Jt.format(Ae)})]})})]})]}),m.jsxs("article",{children:[m.jsx("h4",{children:""}),m.jsxs("table",{children:[m.jsx("thead",{children:m.jsxs("tr",{children:[m.jsx("th",{scope:"col",children:""}),m.jsx("th",{scope:"col",children:""}),m.jsx("th",{scope:"col",children:""})]})}),m.jsxs("tbody",{children:[m.jsxs("tr",{children:[m.jsxs("td",{children:["+",Jt.format(si)]}),m.jsxs("td",{children:[Ht.format(I.plusCount)," "]}),m.jsx("td",{children:ec($)})]}),m.jsxs("tr",{children:[m.jsxs("td",{children:["-",Jt.format(si)]}),m.jsxs("td",{children:[Ht.format(I.minusCount)," "]}),m.jsx("td",{children:ec(oe)})]}),m.jsxs("tr",{children:[m.jsx("td",{children:""}),m.jsxs("td",{children:[Ht.format(pe)," "]}),m.jsx("td",{children:ec(I.totalAmount)})]})]})]})]})]}),m.jsxs("div",{className:"admin-cash-audit-note-preview",children:[m.jsx("h4",{children:""}),m.jsx("p",{children:a||""})]})]})]})}const Ab=[{id:"dashboard",label:"",path:"/admin/dashboard",icon:"",allowedRoles:["admin"]},{id:"orders",label:"",path:"/admin/orders",icon:"",allowedRoles:["admin"]},{id:"production",label:"",path:"/admin/production",icon:"",allowedRoles:["admin","staff"]},{id:"serving",label:"",path:"/admin/serving",icon:"",allowedRoles:["admin","staff"]},{id:"payments",label:"",path:"/admin/payments",icon:"",allowedRoles:["admin","staff"]},{id:"cash-audit",label:"",path:"/admin/cash-audit",icon:"",allowedRoles:["admin"]},{id:"reception",label:"",path:"/admin/reception",icon:"",allowedRoles:["admin"]},{id:"export",label:"",path:"/admin/export",icon:"",allowedRoles:["admin"]},{id:"settings",label:"",path:"/admin/settings",icon:"",allowedRoles:["admin"]}];function HV(){const[n,e]=k.useState(!1),[t,r]=k.useState(!0),i=Bi(),a=rl(),{roles:o,signOut:c}=dp(),u=k.useCallback(C=>C.some(P=>o.includes(P)),[o]),h=k.useMemo(()=>Ab.filter(C=>u(C.allowedRoles)),[u]),p=h[0]?.path??"/admin";k.useEffect(()=>{e(!1)},[i.pathname]);const g=k.useMemo(()=>{const C=h.find(P=>i.pathname.startsWith(P.path));return C||(Ab.find(P=>i.pathname.startsWith(P.path))??null)},[h,i.pathname]);k.useEffect(()=>{g&&!u(g.allowedRoles)&&h.length>0&&a(h[0].path,{replace:!0})},[g,h,u,a]);const _=t||n,w=()=>{r(C=>!C),e(!1)},A=()=>{c()},S=["admin","kitchen","staff"],D=["admin-shell",t?"sidebar-pinned":"",n?"sidebar-open":""].filter(Boolean).join(" ");return m.jsxs("div",{className:D,children:[m.jsxs("button",{type:"button",className:"admin-hamburger","aria-controls":"admin-sidebar","aria-expanded":n,onClick:()=>e(C=>!C),children:[m.jsx("span",{className:"admin-hamburger-bar"}),m.jsx("span",{className:"admin-hamburger-bar"}),m.jsx("span",{className:"admin-hamburger-bar"}),m.jsx("span",{className:"sr-only",children:""})]}),m.jsxs("aside",{id:"admin-sidebar",className:`admin-sidebar${_?" open":""}${t?" pinned":""}`,children:[m.jsx("div",{className:"admin-sidebar-header",children:m.jsxs("div",{children:[m.jsx("p",{className:"admin-sidebar-title",children:""}),m.jsx("p",{className:"admin-sidebar-subtitle",children:""})]})}),m.jsx("nav",{"aria-label":"",className:"admin-sidebar-nav",children:m.jsx("ul",{children:h.map(C=>{const P=g?.id===C.id;return m.jsx("li",{children:m.jsxs("button",{type:"button",className:`admin-nav-button${P?" active":""}`,onClick:()=>a(C.path),children:[m.jsx("span",{"aria-hidden":!0,className:"admin-nav-icon",children:C.icon}),m.jsx("span",{children:C.label})]})},C.id)})})}),m.jsxs("div",{className:"admin-sidebar-footer",children:[m.jsxs("button",{type:"button",className:"admin-logout-button",onClick:A,children:[m.jsx("span",{"aria-hidden":!0,className:"admin-nav-icon",children:""}),m.jsx("span",{children:""})]}),m.jsxs("p",{className:"admin-roles",children:[":"," ",S.map(C=>{const P=o.includes(C);return m.jsx("span",{className:`admin-badge${P?"":" muted"}`,children:C},C)})]})]})]}),m.jsxs("div",{className:"admin-content",children:[m.jsxs("header",{className:"admin-content-header",children:[m.jsxs("div",{children:[m.jsxs("p",{className:"admin-content-overline",children:[g?.label??"",""]}),m.jsx("h1",{children:g?.label??""})]}),m.jsx("div",{className:"admin-header-actions",children:m.jsxs("button",{type:"button",className:`admin-sidebar-toggle${t?"":" is-collapsed"}`,onClick:w,children:[m.jsx("span",{className:"dot","aria-hidden":!0}),t?"":""]})})]}),m.jsx("section",{className:"admin-content-main",children:m.jsxs(mS,{children:[m.jsx(Yt,{index:!0,element:m.jsx(ii,{to:p,replace:!0})}),m.jsx(Yt,{path:"dashboard",element:u(["admin"])?m.jsx(_A,{}):m.jsx(ii,{to:p,replace:!0})}),m.jsx(Yt,{path:"orders",element:u(["admin"])?m.jsx(wP,{}):m.jsx(ii,{to:p,replace:!0})}),m.jsx(Yt,{path:"production",element:u(["admin","staff"])?m.jsx(CP,{}):m.jsx(ii,{to:p,replace:!0})}),m.jsx(Yt,{path:"serving",element:u(["admin","staff"])?m.jsx(FB,{}):m.jsx(ii,{to:p,replace:!0})}),m.jsx(Yt,{path:"payments",element:u(["admin","staff"])?m.jsx(LB,{}):m.jsx(ii,{to:p,replace:!0})}),m.jsx(Yt,{path:"cash-audit",element:u(["admin"])?m.jsx(zV,{}):m.jsx(ii,{to:p,replace:!0})}),m.jsx(Yt,{path:"reception",element:u(["admin"])?m.jsx(jB,{}):m.jsx(ii,{to:p,replace:!0})}),m.jsx(Yt,{path:"export",element:u(["admin"])?m.jsx(_A,{mode:"export"}):m.jsx(ii,{to:p,replace:!0})}),m.jsx(Yt,{path:"settings",element:u(["admin"])?m.jsx($B,{}):m.jsx(ii,{to:p,replace:!0})}),m.jsx(Yt,{path:"*",element:m.jsx(ii,{to:p,replace:!0})})]})})]})]})}const Zy="order-history.v1",GV=20,bv=new Set,Jy=()=>typeof window<"u"&&typeof window.localStorage<"u",Q3=()=>{if(!Jy())return[];try{const n=window.localStorage.getItem(Zy);if(!n)return[];const e=JSON.parse(n);return Array.isArray(e)?e.filter(t=>t&&typeof t=="object"&&"orderId"in t&&"ticket"in t).map(t=>{const r=typeof t.createdAt=="string"||t.createdAt instanceof Date?new Date(t.createdAt):void 0,i=r&&!Number.isNaN(r.getTime())?r:void 0;return{...t,callNumber:typeof t.callNumber=="number"&&Number.isFinite(t.callNumber)?t.callNumber:0,createdAt:i}}):[]}catch(n){return console.warn("Failed to parse order history from storage",n),[]}},Z3=n=>{if(Jy())try{window.localStorage.setItem(Zy,JSON.stringify(n))}catch(e){console.warn("Failed to write order history to storage",e)}},e2=()=>{bv.forEach(n=>n())},qV=()=>Q3(),$V=n=>{const e=Q3(),r=[{...n,callNumber:typeof n.callNumber=="number"&&Number.isFinite(n.callNumber)?n.callNumber:0,savedAt:new Date().toISOString()},...e.filter(i=>i.orderId!==n.orderId&&i.ticket!==n.ticket)].slice(0,GV);return Z3(r),e2(),r},XV=()=>{Z3([]),e2()},YV=n=>(bv.add(n),()=>{bv.delete(n)});Jy()&&window.addEventListener("storage",n=>{n.key===Zy&&e2()});const bb=()=>qV();function KV(){return k.useSyncExternalStore(YV,bb,bb)}function WV(){const n=KV(),{language:e}=Vi(),t=Ja[e].status,r=()=>{(typeof window>"u"||window.confirm(t.historyClearConfirm))&&XV()};return m.jsxs("div",{className:"content-container",children:[m.jsxs("section",{className:"content-card",children:[m.jsx("h1",{className:"section-title",children:t.title}),m.jsx("p",{className:"section-description",children:t.descriptionLead}),m.jsx("p",{className:"section-description",children:t.descriptionFollow})]}),n.length>0&&m.jsxs("section",{className:"content-card history-card","aria-live":"polite",children:[m.jsxs("div",{className:"history-header",children:[m.jsx("h2",{className:"section-title",children:t.historyTitle}),m.jsx("button",{type:"button",className:"history-clear",onClick:r,children:t.historyClear})]}),m.jsx("p",{className:"history-description",children:t.historyDescription}),m.jsx("ul",{className:"order-history-list",children:n.map(i=>m.jsxs("li",{className:"order-history-item","aria-live":"polite",children:[m.jsx("div",{className:"order-history-row",children:m.jsx("span",{className:"order-history-date",children:new Date(i.savedAt).toLocaleString()})}),m.jsxs("div",{className:"order-history-row meta",children:[m.jsxs("span",{children:[t.historyCallNumberLabel,":"," ",i.callNumber>0?i.callNumber:t.historyPendingCallNumber]}),m.jsxs("span",{children:[t.historyOrderIdLabel,": ",i.orderId]})]}),m.jsx("div",{className:"order-history-row meta",children:m.jsxs("span",{children:[t.historyTotalLabel,": ",i.total.toLocaleString()]})})]},i.orderId))})]})]})}var tc={},eg,Sb;function QV(){return Sb||(Sb=1,eg=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then}),eg}var tg={},ks={},Cb;function ll(){if(Cb)return ks;Cb=1;let n;const e=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];return ks.getSymbolSize=function(r){if(!r)throw new Error('"version" cannot be null or undefined');if(r<1||r>40)throw new Error('"version" should be in range from 1 to 40');return r*4+17},ks.getSymbolTotalCodewords=function(r){return e[r]},ks.getBCHDigit=function(t){let r=0;for(;t!==0;)r++,t>>>=1;return r},ks.setToSJISFunction=function(r){if(typeof r!="function")throw new Error('"toSJISFunc" is not a valid function.');n=r},ks.isKanjiModeEnabled=function(){return typeof n<"u"},ks.toSJIS=function(r){return n(r)},ks}var ng={},Tb;function t2(){return Tb||(Tb=1,(function(n){n.L={bit:1},n.M={bit:0},n.Q={bit:3},n.H={bit:2};function e(t){if(typeof t!="string")throw new Error("Param is not a string");switch(t.toLowerCase()){case"l":case"low":return n.L;case"m":case"medium":return n.M;case"q":case"quartile":return n.Q;case"h":case"high":return n.H;default:throw new Error("Unknown EC Level: "+t)}}n.isValid=function(r){return r&&typeof r.bit<"u"&&r.bit>=0&&r.bit<4},n.from=function(r,i){if(n.isValid(r))return r;try{return e(r)}catch{return i}}})(ng)),ng}var rg,Ib;function ZV(){if(Ib)return rg;Ib=1;function n(){this.buffer=[],this.length=0}return n.prototype={get:function(e){const t=Math.floor(e/8);return(this.buffer[t]>>>7-e%8&1)===1},put:function(e,t){for(let r=0;r<t;r++)this.putBit((e>>>t-r-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(e){const t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}},rg=n,rg}var ig,Nb;function JV(){if(Nb)return ig;Nb=1;function n(e){if(!e||e<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=e,this.data=new Uint8Array(e*e),this.reservedBit=new Uint8Array(e*e)}return n.prototype.set=function(e,t,r,i){const a=e*this.size+t;this.data[a]=r,i&&(this.reservedBit[a]=!0)},n.prototype.get=function(e,t){return this.data[e*this.size+t]},n.prototype.xor=function(e,t,r){this.data[e*this.size+t]^=r},n.prototype.isReserved=function(e,t){return this.reservedBit[e*this.size+t]},ig=n,ig}var ag={},Rb;function eF(){return Rb||(Rb=1,(function(n){const e=ll().getSymbolSize;n.getRowColCoords=function(r){if(r===1)return[];const i=Math.floor(r/7)+2,a=e(r),o=a===145?26:Math.ceil((a-13)/(2*i-2))*2,c=[a-7];for(let u=1;u<i-1;u++)c[u]=c[u-1]-o;return c.push(6),c.reverse()},n.getPositions=function(r){const i=[],a=n.getRowColCoords(r),o=a.length;for(let c=0;c<o;c++)for(let u=0;u<o;u++)c===0&&u===0||c===0&&u===o-1||c===o-1&&u===0||i.push([a[c],a[u]]);return i}})(ag)),ag}var sg={},Ob;function tF(){if(Ob)return sg;Ob=1;const n=ll().getSymbolSize,e=7;return sg.getPositions=function(r){const i=n(r);return[[0,0],[i-e,0],[0,i-e]]},sg}var og={},Db;function nF(){return Db||(Db=1,(function(n){n.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const e={N1:3,N2:3,N3:40,N4:10};n.isValid=function(i){return i!=null&&i!==""&&!isNaN(i)&&i>=0&&i<=7},n.from=function(i){return n.isValid(i)?parseInt(i,10):void 0},n.getPenaltyN1=function(i){const a=i.size;let o=0,c=0,u=0,h=null,p=null;for(let g=0;g<a;g++){c=u=0,h=p=null;for(let _=0;_<a;_++){let w=i.get(g,_);w===h?c++:(c>=5&&(o+=e.N1+(c-5)),h=w,c=1),w=i.get(_,g),w===p?u++:(u>=5&&(o+=e.N1+(u-5)),p=w,u=1)}c>=5&&(o+=e.N1+(c-5)),u>=5&&(o+=e.N1+(u-5))}return o},n.getPenaltyN2=function(i){const a=i.size;let o=0;for(let c=0;c<a-1;c++)for(let u=0;u<a-1;u++){const h=i.get(c,u)+i.get(c,u+1)+i.get(c+1,u)+i.get(c+1,u+1);(h===4||h===0)&&o++}return o*e.N2},n.getPenaltyN3=function(i){const a=i.size;let o=0,c=0,u=0;for(let h=0;h<a;h++){c=u=0;for(let p=0;p<a;p++)c=c<<1&2047|i.get(h,p),p>=10&&(c===1488||c===93)&&o++,u=u<<1&2047|i.get(p,h),p>=10&&(u===1488||u===93)&&o++}return o*e.N3},n.getPenaltyN4=function(i){let a=0;const o=i.data.length;for(let u=0;u<o;u++)a+=i.data[u];return Math.abs(Math.ceil(a*100/o/5)-10)*e.N4};function t(r,i,a){switch(r){case n.Patterns.PATTERN000:return(i+a)%2===0;case n.Patterns.PATTERN001:return i%2===0;case n.Patterns.PATTERN010:return a%3===0;case n.Patterns.PATTERN011:return(i+a)%3===0;case n.Patterns.PATTERN100:return(Math.floor(i/2)+Math.floor(a/3))%2===0;case n.Patterns.PATTERN101:return i*a%2+i*a%3===0;case n.Patterns.PATTERN110:return(i*a%2+i*a%3)%2===0;case n.Patterns.PATTERN111:return(i*a%3+(i+a)%2)%2===0;default:throw new Error("bad maskPattern:"+r)}}n.applyMask=function(i,a){const o=a.size;for(let c=0;c<o;c++)for(let u=0;u<o;u++)a.isReserved(u,c)||a.xor(u,c,t(i,u,c))},n.getBestMask=function(i,a){const o=Object.keys(n.Patterns).length;let c=0,u=1/0;for(let h=0;h<o;h++){a(h),n.applyMask(h,i);const p=n.getPenaltyN1(i)+n.getPenaltyN2(i)+n.getPenaltyN3(i)+n.getPenaltyN4(i);n.applyMask(h,i),p<u&&(u=p,c=h)}return c}})(og)),og}var kd={},Mb;function J3(){if(Mb)return kd;Mb=1;const n=t2(),e=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],t=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];return kd.getBlocksCount=function(i,a){switch(a){case n.L:return e[(i-1)*4+0];case n.M:return e[(i-1)*4+1];case n.Q:return e[(i-1)*4+2];case n.H:return e[(i-1)*4+3];default:return}},kd.getTotalCodewordsCount=function(i,a){switch(a){case n.L:return t[(i-1)*4+0];case n.M:return t[(i-1)*4+1];case n.Q:return t[(i-1)*4+2];case n.H:return t[(i-1)*4+3];default:return}},kd}var lg={},Ku={},Pb;function rF(){if(Pb)return Ku;Pb=1;const n=new Uint8Array(512),e=new Uint8Array(256);return(function(){let r=1;for(let i=0;i<255;i++)n[i]=r,e[r]=i,r<<=1,r&256&&(r^=285);for(let i=255;i<512;i++)n[i]=n[i-255]})(),Ku.log=function(r){if(r<1)throw new Error("log("+r+")");return e[r]},Ku.exp=function(r){return n[r]},Ku.mul=function(r,i){return r===0||i===0?0:n[e[r]+e[i]]},Ku}var kb;function iF(){return kb||(kb=1,(function(n){const e=rF();n.mul=function(r,i){const a=new Uint8Array(r.length+i.length-1);for(let o=0;o<r.length;o++)for(let c=0;c<i.length;c++)a[o+c]^=e.mul(r[o],i[c]);return a},n.mod=function(r,i){let a=new Uint8Array(r);for(;a.length-i.length>=0;){const o=a[0];for(let u=0;u<i.length;u++)a[u]^=e.mul(i[u],o);let c=0;for(;c<a.length&&a[c]===0;)c++;a=a.slice(c)}return a},n.generateECPolynomial=function(r){let i=new Uint8Array([1]);for(let a=0;a<r;a++)i=n.mul(i,new Uint8Array([1,e.exp(a)]));return i}})(lg)),lg}var cg,Lb;function aF(){if(Lb)return cg;Lb=1;const n=iF();function e(t){this.genPoly=void 0,this.degree=t,this.degree&&this.initialize(this.degree)}return e.prototype.initialize=function(r){this.degree=r,this.genPoly=n.generateECPolynomial(this.degree)},e.prototype.encode=function(r){if(!this.genPoly)throw new Error("Encoder not initialized");const i=new Uint8Array(r.length+this.degree);i.set(r);const a=n.mod(i,this.genPoly),o=this.degree-a.length;if(o>0){const c=new Uint8Array(this.degree);return c.set(a,o),c}return a},cg=e,cg}var ug={},fg={},hg={},jb;function eI(){return jb||(jb=1,hg.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40}),hg}var ca={},Bb;function tI(){if(Bb)return ca;Bb=1;const n="[0-9]+",e="[A-Z $%*+\\-./:]+";let t="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";t=t.replace(/u/g,"\\u");const r="(?:(?![A-Z0-9 $%*+\\-./:]|"+t+`)(?:.|[\r
]))+`;ca.KANJI=new RegExp(t,"g"),ca.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),ca.BYTE=new RegExp(r,"g"),ca.NUMERIC=new RegExp(n,"g"),ca.ALPHANUMERIC=new RegExp(e,"g");const i=new RegExp("^"+t+"$"),a=new RegExp("^"+n+"$"),o=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");return ca.testKanji=function(u){return i.test(u)},ca.testNumeric=function(u){return a.test(u)},ca.testAlphanumeric=function(u){return o.test(u)},ca}var Vb;function cl(){return Vb||(Vb=1,(function(n){const e=eI(),t=tI();n.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},n.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},n.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},n.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},n.MIXED={bit:-1},n.getCharCountIndicator=function(a,o){if(!a.ccBits)throw new Error("Invalid mode: "+a);if(!e.isValid(o))throw new Error("Invalid version: "+o);return o>=1&&o<10?a.ccBits[0]:o<27?a.ccBits[1]:a.ccBits[2]},n.getBestModeForData=function(a){return t.testNumeric(a)?n.NUMERIC:t.testAlphanumeric(a)?n.ALPHANUMERIC:t.testKanji(a)?n.KANJI:n.BYTE},n.toString=function(a){if(a&&a.id)return a.id;throw new Error("Invalid mode")},n.isValid=function(a){return a&&a.bit&&a.ccBits};function r(i){if(typeof i!="string")throw new Error("Param is not a string");switch(i.toLowerCase()){case"numeric":return n.NUMERIC;case"alphanumeric":return n.ALPHANUMERIC;case"kanji":return n.KANJI;case"byte":return n.BYTE;default:throw new Error("Unknown mode: "+i)}}n.from=function(a,o){if(n.isValid(a))return a;try{return r(a)}catch{return o}}})(fg)),fg}var Fb;function sF(){return Fb||(Fb=1,(function(n){const e=ll(),t=J3(),r=t2(),i=cl(),a=eI(),o=7973,c=e.getBCHDigit(o);function u(_,w,A){for(let S=1;S<=40;S++)if(w<=n.getCapacity(S,A,_))return S}function h(_,w){return i.getCharCountIndicator(_,w)+4}function p(_,w){let A=0;return _.forEach(function(S){const D=h(S.mode,w);A+=D+S.getBitsLength()}),A}function g(_,w){for(let A=1;A<=40;A++)if(p(_,A)<=n.getCapacity(A,w,i.MIXED))return A}n.from=function(w,A){return a.isValid(w)?parseInt(w,10):A},n.getCapacity=function(w,A,S){if(!a.isValid(w))throw new Error("Invalid QR Code version");typeof S>"u"&&(S=i.BYTE);const D=e.getSymbolTotalCodewords(w),C=t.getTotalCodewordsCount(w,A),P=(D-C)*8;if(S===i.MIXED)return P;const V=P-h(S,w);switch(S){case i.NUMERIC:return Math.floor(V/10*3);case i.ALPHANUMERIC:return Math.floor(V/11*2);case i.KANJI:return Math.floor(V/13);case i.BYTE:default:return Math.floor(V/8)}},n.getBestVersionForData=function(w,A){let S;const D=r.from(A,r.M);if(Array.isArray(w)){if(w.length>1)return g(w,D);if(w.length===0)return 1;S=w[0]}else S=w;return u(S.mode,S.getLength(),D)},n.getEncodedBits=function(w){if(!a.isValid(w)||w<7)throw new Error("Invalid QR Code version");let A=w<<12;for(;e.getBCHDigit(A)-c>=0;)A^=o<<e.getBCHDigit(A)-c;return w<<12|A}})(ug)),ug}var dg={},Ub;function oF(){if(Ub)return dg;Ub=1;const n=ll(),e=1335,t=21522,r=n.getBCHDigit(e);return dg.getEncodedBits=function(a,o){const c=a.bit<<3|o;let u=c<<10;for(;n.getBCHDigit(u)-r>=0;)u^=e<<n.getBCHDigit(u)-r;return(c<<10|u)^t},dg}var pg={},mg,zb;function lF(){if(zb)return mg;zb=1;const n=cl();function e(t){this.mode=n.NUMERIC,this.data=t.toString()}return e.getBitsLength=function(r){return 10*Math.floor(r/3)+(r%3?r%3*3+1:0)},e.prototype.getLength=function(){return this.data.length},e.prototype.getBitsLength=function(){return e.getBitsLength(this.data.length)},e.prototype.write=function(r){let i,a,o;for(i=0;i+3<=this.data.length;i+=3)a=this.data.substr(i,3),o=parseInt(a,10),r.put(o,10);const c=this.data.length-i;c>0&&(a=this.data.substr(i),o=parseInt(a,10),r.put(o,c*3+1))},mg=e,mg}var gg,Hb;function cF(){if(Hb)return gg;Hb=1;const n=cl(),e=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function t(r){this.mode=n.ALPHANUMERIC,this.data=r}return t.getBitsLength=function(i){return 11*Math.floor(i/2)+6*(i%2)},t.prototype.getLength=function(){return this.data.length},t.prototype.getBitsLength=function(){return t.getBitsLength(this.data.length)},t.prototype.write=function(i){let a;for(a=0;a+2<=this.data.length;a+=2){let o=e.indexOf(this.data[a])*45;o+=e.indexOf(this.data[a+1]),i.put(o,11)}this.data.length%2&&i.put(e.indexOf(this.data[a]),6)},gg=t,gg}var vg,Gb;function uF(){if(Gb)return vg;Gb=1;const n=cl();function e(t){this.mode=n.BYTE,typeof t=="string"?this.data=new TextEncoder().encode(t):this.data=new Uint8Array(t)}return e.getBitsLength=function(r){return r*8},e.prototype.getLength=function(){return this.data.length},e.prototype.getBitsLength=function(){return e.getBitsLength(this.data.length)},e.prototype.write=function(t){for(let r=0,i=this.data.length;r<i;r++)t.put(this.data[r],8)},vg=e,vg}var yg,qb;function fF(){if(qb)return yg;qb=1;const n=cl(),e=ll();function t(r){this.mode=n.KANJI,this.data=r}return t.getBitsLength=function(i){return i*13},t.prototype.getLength=function(){return this.data.length},t.prototype.getBitsLength=function(){return t.getBitsLength(this.data.length)},t.prototype.write=function(r){let i;for(i=0;i<this.data.length;i++){let a=e.toSJIS(this.data[i]);if(a>=33088&&a<=40956)a-=33088;else if(a>=57408&&a<=60351)a-=49472;else throw new Error("Invalid SJIS character: "+this.data[i]+`
Make sure your charset is UTF-8`);a=(a>>>8&255)*192+(a&255),r.put(a,13)}},yg=t,yg}var _g={exports:{}},$b;function hF(){return $b||($b=1,(function(n){var e={single_source_shortest_paths:function(t,r,i){var a={},o={};o[r]=0;var c=e.PriorityQueue.make();c.push(r,0);for(var u,h,p,g,_,w,A,S,D;!c.empty();){u=c.pop(),h=u.value,g=u.cost,_=t[h]||{};for(p in _)_.hasOwnProperty(p)&&(w=_[p],A=g+w,S=o[p],D=typeof o[p]>"u",(D||S>A)&&(o[p]=A,c.push(p,A),a[p]=h))}if(typeof i<"u"&&typeof o[i]>"u"){var C=["Could not find a path from ",r," to ",i,"."].join("");throw new Error(C)}return a},extract_shortest_path_from_predecessor_list:function(t,r){for(var i=[],a=r;a;)i.push(a),t[a],a=t[a];return i.reverse(),i},find_path:function(t,r,i){var a=e.single_source_shortest_paths(t,r,i);return e.extract_shortest_path_from_predecessor_list(a,i)},PriorityQueue:{make:function(t){var r=e.PriorityQueue,i={},a;t=t||{};for(a in r)r.hasOwnProperty(a)&&(i[a]=r[a]);return i.queue=[],i.sorter=t.sorter||r.default_sorter,i},default_sorter:function(t,r){return t.cost-r.cost},push:function(t,r){var i={value:t,cost:r};this.queue.push(i),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};n.exports=e})(_g)),_g.exports}var Xb;function dF(){return Xb||(Xb=1,(function(n){const e=cl(),t=lF(),r=cF(),i=uF(),a=fF(),o=tI(),c=ll(),u=hF();function h(C){return unescape(encodeURIComponent(C)).length}function p(C,P,V){const H=[];let X;for(;(X=C.exec(V))!==null;)H.push({data:X[0],index:X.index,mode:P,length:X[0].length});return H}function g(C){const P=p(o.NUMERIC,e.NUMERIC,C),V=p(o.ALPHANUMERIC,e.ALPHANUMERIC,C);let H,X;return c.isKanjiModeEnabled()?(H=p(o.BYTE,e.BYTE,C),X=p(o.KANJI,e.KANJI,C)):(H=p(o.BYTE_KANJI,e.BYTE,C),X=[]),P.concat(V,H,X).sort(function(I,b){return I.index-b.index}).map(function(I){return{data:I.data,mode:I.mode,length:I.length}})}function _(C,P){switch(P){case e.NUMERIC:return t.getBitsLength(C);case e.ALPHANUMERIC:return r.getBitsLength(C);case e.KANJI:return a.getBitsLength(C);case e.BYTE:return i.getBitsLength(C)}}function w(C){return C.reduce(function(P,V){const H=P.length-1>=0?P[P.length-1]:null;return H&&H.mode===V.mode?(P[P.length-1].data+=V.data,P):(P.push(V),P)},[])}function A(C){const P=[];for(let V=0;V<C.length;V++){const H=C[V];switch(H.mode){case e.NUMERIC:P.push([H,{data:H.data,mode:e.ALPHANUMERIC,length:H.length},{data:H.data,mode:e.BYTE,length:H.length}]);break;case e.ALPHANUMERIC:P.push([H,{data:H.data,mode:e.BYTE,length:H.length}]);break;case e.KANJI:P.push([H,{data:H.data,mode:e.BYTE,length:h(H.data)}]);break;case e.BYTE:P.push([{data:H.data,mode:e.BYTE,length:h(H.data)}])}}return P}function S(C,P){const V={},H={start:{}};let X=["start"];for(let F=0;F<C.length;F++){const I=C[F],b=[];for(let N=0;N<I.length;N++){const R=I[N],M=""+F+N;b.push(M),V[M]={node:R,lastCount:0},H[M]={};for(let B=0;B<X.length;B++){const L=X[B];V[L]&&V[L].node.mode===R.mode?(H[L][M]=_(V[L].lastCount+R.length,R.mode)-_(V[L].lastCount,R.mode),V[L].lastCount+=R.length):(V[L]&&(V[L].lastCount=R.length),H[L][M]=_(R.length,R.mode)+4+e.getCharCountIndicator(R.mode,P))}}X=b}for(let F=0;F<X.length;F++)H[X[F]].end=0;return{map:H,table:V}}function D(C,P){let V;const H=e.getBestModeForData(C);if(V=e.from(P,H),V!==e.BYTE&&V.bit<H.bit)throw new Error('"'+C+'" cannot be encoded with mode '+e.toString(V)+`.
 Suggested mode is: `+e.toString(H));switch(V===e.KANJI&&!c.isKanjiModeEnabled()&&(V=e.BYTE),V){case e.NUMERIC:return new t(C);case e.ALPHANUMERIC:return new r(C);case e.KANJI:return new a(C);case e.BYTE:return new i(C)}}n.fromArray=function(P){return P.reduce(function(V,H){return typeof H=="string"?V.push(D(H,null)):H.data&&V.push(D(H.data,H.mode)),V},[])},n.fromString=function(P,V){const H=g(P,c.isKanjiModeEnabled()),X=A(H),F=S(X,V),I=u.find_path(F.map,"start","end"),b=[];for(let N=1;N<I.length-1;N++)b.push(F.table[I[N]].node);return n.fromArray(w(b))},n.rawSplit=function(P){return n.fromArray(g(P,c.isKanjiModeEnabled()))}})(pg)),pg}var Yb;function pF(){if(Yb)return tg;Yb=1;const n=ll(),e=t2(),t=ZV(),r=JV(),i=eF(),a=tF(),o=nF(),c=J3(),u=aF(),h=sF(),p=oF(),g=cl(),_=dF();function w(F,I){const b=F.size,N=a.getPositions(I);for(let R=0;R<N.length;R++){const M=N[R][0],B=N[R][1];for(let L=-1;L<=7;L++)if(!(M+L<=-1||b<=M+L))for(let ie=-1;ie<=7;ie++)B+ie<=-1||b<=B+ie||(L>=0&&L<=6&&(ie===0||ie===6)||ie>=0&&ie<=6&&(L===0||L===6)||L>=2&&L<=4&&ie>=2&&ie<=4?F.set(M+L,B+ie,!0,!0):F.set(M+L,B+ie,!1,!0))}}function A(F){const I=F.size;for(let b=8;b<I-8;b++){const N=b%2===0;F.set(b,6,N,!0),F.set(6,b,N,!0)}}function S(F,I){const b=i.getPositions(I);for(let N=0;N<b.length;N++){const R=b[N][0],M=b[N][1];for(let B=-2;B<=2;B++)for(let L=-2;L<=2;L++)B===-2||B===2||L===-2||L===2||B===0&&L===0?F.set(R+B,M+L,!0,!0):F.set(R+B,M+L,!1,!0)}}function D(F,I){const b=F.size,N=h.getEncodedBits(I);let R,M,B;for(let L=0;L<18;L++)R=Math.floor(L/3),M=L%3+b-8-3,B=(N>>L&1)===1,F.set(R,M,B,!0),F.set(M,R,B,!0)}function C(F,I,b){const N=F.size,R=p.getEncodedBits(I,b);let M,B;for(M=0;M<15;M++)B=(R>>M&1)===1,M<6?F.set(M,8,B,!0):M<8?F.set(M+1,8,B,!0):F.set(N-15+M,8,B,!0),M<8?F.set(8,N-M-1,B,!0):M<9?F.set(8,15-M-1+1,B,!0):F.set(8,15-M-1,B,!0);F.set(N-8,8,1,!0)}function P(F,I){const b=F.size;let N=-1,R=b-1,M=7,B=0;for(let L=b-1;L>0;L-=2)for(L===6&&L--;;){for(let ie=0;ie<2;ie++)if(!F.isReserved(R,L-ie)){let ge=!1;B<I.length&&(ge=(I[B]>>>M&1)===1),F.set(R,L-ie,ge),M--,M===-1&&(B++,M=7)}if(R+=N,R<0||b<=R){R-=N,N=-N;break}}}function V(F,I,b){const N=new t;b.forEach(function(ie){N.put(ie.mode.bit,4),N.put(ie.getLength(),g.getCharCountIndicator(ie.mode,F)),ie.write(N)});const R=n.getSymbolTotalCodewords(F),M=c.getTotalCodewordsCount(F,I),B=(R-M)*8;for(N.getLengthInBits()+4<=B&&N.put(0,4);N.getLengthInBits()%8!==0;)N.putBit(0);const L=(B-N.getLengthInBits())/8;for(let ie=0;ie<L;ie++)N.put(ie%2?17:236,8);return H(N,F,I)}function H(F,I,b){const N=n.getSymbolTotalCodewords(I),R=c.getTotalCodewordsCount(I,b),M=N-R,B=c.getBlocksCount(I,b),L=N%B,ie=B-L,ge=Math.floor(N/B),K=Math.floor(M/B),G=K+1,le=ge-K,we=new u(le);let Ae=0;const $=new Array(B),oe=new Array(B);let pe=0;const ve=new Uint8Array(F.buffer);for(let Ze=0;Ze<B;Ze++){const Pn=Ze<ie?K:G;$[Ze]=ve.slice(Ae,Ae+Pn),oe[Ze]=we.encode($[Ze]),Ae+=Pn,pe=Math.max(pe,Pn)}const Ne=new Uint8Array(N);let Re=0,Ee,Qe;for(Ee=0;Ee<pe;Ee++)for(Qe=0;Qe<B;Qe++)Ee<$[Qe].length&&(Ne[Re++]=$[Qe][Ee]);for(Ee=0;Ee<le;Ee++)for(Qe=0;Qe<B;Qe++)Ne[Re++]=oe[Qe][Ee];return Ne}function X(F,I,b,N){let R;if(Array.isArray(F))R=_.fromArray(F);else if(typeof F=="string"){let ge=I;if(!ge){const K=_.rawSplit(F);ge=h.getBestVersionForData(K,b)}R=_.fromString(F,ge||40)}else throw new Error("Invalid data");const M=h.getBestVersionForData(R,b);if(!M)throw new Error("The amount of data is too big to be stored in a QR Code");if(!I)I=M;else if(I<M)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+M+`.
`);const B=V(I,b,R),L=n.getSymbolSize(I),ie=new r(L);return w(ie,I),A(ie),S(ie,I),C(ie,b,0),I>=7&&D(ie,I),P(ie,B),isNaN(N)&&(N=o.getBestMask(ie,C.bind(null,ie,b))),o.applyMask(N,ie),C(ie,b,N),{modules:ie,version:I,errorCorrectionLevel:b,maskPattern:N,segments:R}}return tg.create=function(I,b){if(typeof I>"u"||I==="")throw new Error("No input text");let N=e.M,R,M;return typeof b<"u"&&(N=e.from(b.errorCorrectionLevel,e.M),R=h.from(b.version),M=o.from(b.maskPattern),b.toSJISFunc&&n.setToSJISFunction(b.toSJISFunc)),X(I,R,N,M)},tg}var xg={},wg={},Kb;function nI(){return Kb||(Kb=1,(function(n){function e(t){if(typeof t=="number"&&(t=t.toString()),typeof t!="string")throw new Error("Color should be defined as hex string");let r=t.slice().replace("#","").split("");if(r.length<3||r.length===5||r.length>8)throw new Error("Invalid hex color: "+t);(r.length===3||r.length===4)&&(r=Array.prototype.concat.apply([],r.map(function(a){return[a,a]}))),r.length===6&&r.push("F","F");const i=parseInt(r.join(""),16);return{r:i>>24&255,g:i>>16&255,b:i>>8&255,a:i&255,hex:"#"+r.slice(0,6).join("")}}n.getOptions=function(r){r||(r={}),r.color||(r.color={});const i=typeof r.margin>"u"||r.margin===null||r.margin<0?4:r.margin,a=r.width&&r.width>=21?r.width:void 0,o=r.scale||4;return{width:a,scale:a?4:o,margin:i,color:{dark:e(r.color.dark||"#000000ff"),light:e(r.color.light||"#ffffffff")},type:r.type,rendererOpts:r.rendererOpts||{}}},n.getScale=function(r,i){return i.width&&i.width>=r+i.margin*2?i.width/(r+i.margin*2):i.scale},n.getImageWidth=function(r,i){const a=n.getScale(r,i);return Math.floor((r+i.margin*2)*a)},n.qrToImageData=function(r,i,a){const o=i.modules.size,c=i.modules.data,u=n.getScale(o,a),h=Math.floor((o+a.margin*2)*u),p=a.margin*u,g=[a.color.light,a.color.dark];for(let _=0;_<h;_++)for(let w=0;w<h;w++){let A=(_*h+w)*4,S=a.color.light;if(_>=p&&w>=p&&_<h-p&&w<h-p){const D=Math.floor((_-p)/u),C=Math.floor((w-p)/u);S=g[c[D*o+C]?1:0]}r[A++]=S.r,r[A++]=S.g,r[A++]=S.b,r[A]=S.a}}})(wg)),wg}var Wb;function mF(){return Wb||(Wb=1,(function(n){const e=nI();function t(i,a,o){i.clearRect(0,0,a.width,a.height),a.style||(a.style={}),a.height=o,a.width=o,a.style.height=o+"px",a.style.width=o+"px"}function r(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}n.render=function(a,o,c){let u=c,h=o;typeof u>"u"&&(!o||!o.getContext)&&(u=o,o=void 0),o||(h=r()),u=e.getOptions(u);const p=e.getImageWidth(a.modules.size,u),g=h.getContext("2d"),_=g.createImageData(p,p);return e.qrToImageData(_.data,a,u),t(g,h,p),g.putImageData(_,0,0),h},n.renderToDataURL=function(a,o,c){let u=c;typeof u>"u"&&(!o||!o.getContext)&&(u=o,o=void 0),u||(u={});const h=n.render(a,o,u),p=u.type||"image/png",g=u.rendererOpts||{};return h.toDataURL(p,g.quality)}})(xg)),xg}var Eg={},Qb;function gF(){if(Qb)return Eg;Qb=1;const n=nI();function e(i,a){const o=i.a/255,c=a+'="'+i.hex+'"';return o<1?c+" "+a+'-opacity="'+o.toFixed(2).slice(1)+'"':c}function t(i,a,o){let c=i+a;return typeof o<"u"&&(c+=" "+o),c}function r(i,a,o){let c="",u=0,h=!1,p=0;for(let g=0;g<i.length;g++){const _=Math.floor(g%a),w=Math.floor(g/a);!_&&!h&&(h=!0),i[g]?(p++,g>0&&_>0&&i[g-1]||(c+=h?t("M",_+o,.5+w+o):t("m",u,0),u=0,h=!1),_+1<a&&i[g+1]||(c+=t("h",p),p=0)):u++}return c}return Eg.render=function(a,o,c){const u=n.getOptions(o),h=a.modules.size,p=a.modules.data,g=h+u.margin*2,_=u.color.light.a?"<path "+e(u.color.light,"fill")+' d="M0 0h'+g+"v"+g+'H0z"/>':"",w="<path "+e(u.color.dark,"stroke")+' d="'+r(p,h,u.margin)+'"/>',A='viewBox="0 0 '+g+" "+g+'"',D='<svg xmlns="http://www.w3.org/2000/svg" '+(u.width?'width="'+u.width+'" height="'+u.width+'" ':"")+A+' shape-rendering="crispEdges">'+_+w+`</svg>
`;return typeof c=="function"&&c(null,D),D},Eg}var Zb;function vF(){if(Zb)return tc;Zb=1;const n=QV(),e=pF(),t=mF(),r=gF();function i(a,o,c,u,h){const p=[].slice.call(arguments,1),g=p.length,_=typeof p[g-1]=="function";if(!_&&!n())throw new Error("Callback required as last argument");if(_){if(g<2)throw new Error("Too few arguments provided");g===2?(h=c,c=o,o=u=void 0):g===3&&(o.getContext&&typeof h>"u"?(h=u,u=void 0):(h=u,u=c,c=o,o=void 0))}else{if(g<1)throw new Error("Too few arguments provided");return g===1?(c=o,o=u=void 0):g===2&&!o.getContext&&(u=c,c=o,o=void 0),new Promise(function(w,A){try{const S=e.create(c,u);w(a(S,o,u))}catch(S){A(S)}})}try{const w=e.create(c,u);h(null,a(w,o,u))}catch(w){h(w)}}return tc.create=e.create,tc.toCanvas=i.bind(null,t.render),tc.toDataURL=i.bind(null,t.renderToDataURL),tc.toString=i.bind(null,function(a,o,c){return r.render(a,c)}),tc}var yF=vF();const _F=B4(yF),xF=n=>{const e=n.replace(/^\/+/,"").replace(/\/+$/,"");return e?`/${e}`:""},wF=()=>{const n=xF("/Ichinikai/");return typeof window<"u"&&window.location?.origin?`${window.location.origin}${n}`.replace(/\/+$/,""):(n?`https://example.com${n}`:"https://example.com").replace(/\/+$/,"")},EF=n=>`${wF()}/progress/${encodeURIComponent(n)}`,mf=n=>{if(!n)return"";const e=n.trim();if(!e)return"";try{const t=new URL(e),r=t.pathname.match(/\/(?:order\/complete|progress)\/([^/]+)$/i);if(r&&r[1])return decodeURIComponent(r[1]).replace(/[^0-9a-z]/gi,"").toUpperCase();const i=t.searchParams.get("ticket");if(i)return i.replace(/[^0-9a-z]/gi,"").toUpperCase()}catch{}return e.replace(/[^0-9a-z]/gi,"").toUpperCase()},AF=n=>Number.isInteger(n)&&n!==null&&n!==void 0&&n>0?n:0,Ld=n=>{const e=n.items??{};return{orderId:n.orderId,ticket:n.ticket,callNumber:AF(n.callNumber),total:n.total,items:e,payment:n.payment,progress:n.progress,plating:Nr(e,n.plating),createdAt:n.createdAt?new Date(n.createdAt):void 0}},Jb=n=>n instanceof xa&&n.code==="permission-denied",rI=k.createContext(void 0),eS=()=>Object.keys(Fc).reduce((n,e)=>(n[e]=0,n),{});function bF({children:n}){const{menuItems:e}=ol(),[t,r]=k.useState(eS),[i,a]=k.useState(!1),[o,c]=k.useState(null),[u,h]=k.useState(null),p=k.useCallback((I,b)=>{r(N=>({...N,[I]:Math.max(0,Number.isFinite(b)?Math.floor(b):0)}))},[]),g=k.useCallback(()=>{r(eS())},[]),_=k.useMemo(()=>e.map(I=>({item:I,quantity:t[I.key],subtotal:t[I.key]*I.price})).filter(({quantity:I})=>I>0),[t,e]),w=k.useMemo(()=>_.reduce((I,b)=>I+b.subtotal,0),[_]),A=_.length>0;k.useEffect(()=>{r(I=>{let b=!1;const N={...I};return e.forEach(R=>{R.soldOut&&N[R.key]>0&&(N[R.key]=0,b=!0)}),b?N:I})},[e]);const S=k.useCallback(async I=>{const b=EF(I.ticket),N=await _F.toDataURL(b,{width:256,margin:1});return{summary:I,qrCode:N,progressUrl:b}},[]),D=k.useCallback(async()=>{if(i)return null;if(!A)return c("EMPTY_CART"),null;a(!0),c(null),h(null);try{const I=await Z7(t),b=Ld(I),N=await S(b);h(N);try{$V(b)}catch(R){console.warn("",R)}return b}catch(I){return console.error(I),c("ORDER_FAILED"),null}finally{a(!1)}},[S,A,t,i]),C=k.useCallback(()=>{h(null)},[]),P=k.useCallback(()=>{g(),C(),c(null)},[C,g]),V=k.useCallback(async()=>{if(!u)return null;try{const I=await vA(u.summary.ticket);if(!I)return h(null),null;let b=null;try{b=await yA(I.orderId)}catch(R){if(!Jb(R))throw R;console.info("orders  orderLookup ",R)}const N=Ld(b??I);return h(R=>R&&{...R,summary:N}),N}catch(I){throw console.error("",I),I}},[u]),H=k.useCallback(async I=>{const b=mf(I);if(!b)return null;try{const N=await vA(b);if(!N)return h(null),null;let R=null;try{R=await yA(N.orderId)}catch(L){if(!Jb(L))throw L;console.info("orders  orderLookup ",L)}const M=Ld(R??N),B=await S(M);return h(B),M}catch(N){throw console.error("",N),N}},[S]),X=u?.summary.ticket??"";k.useEffect(()=>{if(!X)return;let I=!1;const b=nP(X,N=>{if(!N){h(null);return}const R=Ld(N);h(M=>{if(!M)return M;const B=M.summary;return B.progress!==R.progress||B.payment!==R.payment||B.callNumber!==R.callNumber||B.total!==R.total||B.orderId!==R.orderId?(R.progress===""&&!I&&(I=!0,b()),{...M,summary:R}):M})});return()=>{I||b()}},[X]);const F=k.useMemo(()=>({items:t,updateQuantity:p,resetItems:g,cartItems:_,total:w,hasItems:A,loading:i,error:o,setError:c,confirmOrder:D,orderResult:u,clearOrderResult:C,startNewOrder:P,refreshOrderResult:V,loadOrderByTicket:H}),[t,p,g,_,w,A,i,o,D,u,C,P,V,H]);return m.jsx(rI.Provider,{value:F,children:n})}function n2(){const n=k.useContext(rI);if(!n)throw new Error("useOrderFlow must be used within an OrderFlowProvider");return n}const iI=k.createContext(void 0),SF=6e3;function CF(n,e){const t=Object.entries(e.items).filter(([,r])=>r>0).map(([r,i])=>`${n[r]?.label??r} ${i}`).join(" / ");return{id:`${e.orderId}-${Date.now()}`,orderId:e.orderId,callNumber:e.callNumber??0,total:e.total,itemSummary:t||"",createdAt:e.createdAt??e.updatedAt??new Date,source:"new-order"}}function TF(n){return{id:`test-${Date.now()}`,orderId:n.orderId??"TEST-ORDER",callNumber:n.callNumber??0,total:n.total??0,itemSummary:n.itemSummary??": ",createdAt:n.createdAt?new Date(n.createdAt):new Date,source:"test"}}function IF({children:n}){const[e,t]=k.useState([]),r=k.useRef(new Map),i=k.useRef(new Set),{status:a,hasRole:o}=dp(),{menuItemMap:c}=ol(),u=a==="signed-in"&&o(["admin","staff","kitchen"]),h=k.useCallback(D=>{i.current.forEach(C=>{try{C(D)}catch(P){console.error("OrderToast listener failed",P)}})},[]),p=k.useCallback(D=>{t(P=>P.filter(V=>V.id!==D));const C=r.current.get(D);C&&(window.clearTimeout(C),r.current.delete(D))},[]),g=k.useCallback(D=>{const C=r.current.get(D);C&&window.clearTimeout(C);const P=window.setTimeout(()=>p(D),SF);r.current.set(D,P)},[p]),_=k.useCallback((D,C)=>{t(V=>[...V,D]),g(D.id);const P=C?{...C,toast:D}:{type:D.source,toast:D};return h(P),D},[h,g]),w=k.useCallback((D,C)=>{const P=D.id??`${D.orderId}-${Date.now()}`,V={...D,id:P,source:D.source??"custom"};return _(V,C)},[_]);k.useEffect(()=>{const D=r.current;return()=>{D.forEach(C=>window.clearTimeout(C)),D.clear()}},[]),k.useEffect(()=>{if(!u)return;const D=eP(C=>{const P=CF(c,C);_(P,{type:"new-order",order:C})});return()=>{D?.()}},[u,_,c]),k.useEffect(()=>{const D=HB(C=>{const P=TF(C);_(P,{type:"test"})});return()=>{D?.()}},[_]);const A=k.useCallback(D=>(i.current.add(D),()=>{i.current.delete(D)}),[]),S=k.useMemo(()=>({toasts:e,removeToast:p,addToast:w,registerListener:A}),[w,A,p,e]);return m.jsx(iI.Provider,{value:S,children:n})}function aI(){const n=k.useContext(iI);if(!n)throw new Error("useOrderToasts must be used within an OrderToastProvider");return n}function r2(){const[n,e]=k.useState(!1),[t,r]=k.useState(null);return k.useEffect(()=>{if(za){e(!0),r(null);return}const i=aC(Ri,async a=>{try{a||await nC(Ri),e(!0)}catch(o){console.error("",o),r("ANON_SIGNIN_FAILED")}});return()=>i()},[]),{ready:n,error:t}}const NF=k.memo(function({value:e,min:t=0,max:r,onChange:i,ariaLabel:a,decreaseLabel:o,increaseLabel:c,disabled:u=!1}){const h=()=>{if(u)return;const _=e-1;_<t||i(_)},p=()=>{if(u)return;const _=e+1;typeof r=="number"&&_>r||i(_)},g=`quantity-stepper${u?" disabled":""}`;return m.jsxs("div",{className:g,role:"group","aria-label":a,"aria-disabled":u,children:[m.jsx("button",{type:"button",className:"quantity-button decrease",onClick:h,"aria-label":o??"1",disabled:u||e<=t,children:""}),m.jsx("div",{className:"quantity-value","aria-live":"polite",children:e}),m.jsx("button",{type:"button",className:"quantity-button increase",onClick:p,"aria-label":c??"1",disabled:u||typeof r=="number"&&e>=r,children:""})]})});function RF(){const n=rl(),{ready:e,error:t}=r2(),{menuItems:r}=ol(),{items:i,updateQuantity:a,resetItems:o,total:c,hasItems:u,clearOrderResult:h,setError:p}=n2(),{language:g}=Vi(),_=Ja[g],[w,A]=k.useState(null);k.useEffect(()=>{h(),p(null)},[h,p]);const S=C=>{if(C.preventDefault(),A(null),!!e){if(!u){A("EMPTY_CART");return}n("/order/review")}},D=()=>{o(),A(null)};return m.jsx("div",{className:"content-container",children:m.jsxs("section",{className:"content-card",children:[m.jsx("h1",{className:"section-title",children:_.orderInput.title}),m.jsxs("p",{className:"section-description",children:[_.orderInput.descriptionLead,m.jsx("br",{}),_.orderInput.descriptionFollow]}),!e&&!t&&m.jsx("p",{children:_.auth.signingIn}),t&&m.jsx("p",{className:"error-message",children:_.auth.error}),m.jsxs("form",{className:"form-grid",onSubmit:S,children:[r.map(C=>{const P=Vy(C,g),V=pP(C,g),H=C.soldOut,X=`menu-card${H?" sold-out":""}`,F=i[C.key]??0;return m.jsxs("article",{className:X,"aria-disabled":H,children:[m.jsx("div",{className:"menu-card-media",children:m.jsx("img",{src:C.image,alt:_.menu.imageAlt(P),loading:"lazy",decoding:"async",width:320,height:220})}),m.jsxs("div",{className:"menu-card-body",children:[m.jsxs("header",{className:"menu-card-header",children:[m.jsx("h2",{className:"menu-card-title",children:P}),m.jsxs("div",{className:"menu-card-status",children:[m.jsxs("span",{className:"menu-card-price",children:["",C.price.toLocaleString()]}),H&&m.jsx("span",{className:"menu-card-badge",role:"status",children:_.menu.soldOutBadge})]})]}),m.jsx("p",{className:"menu-card-description",children:V}),H&&m.jsx("p",{className:"menu-card-soldout-note",children:_.menu.soldOutMessage}),C.allergens.length>0&&m.jsx("ul",{className:"menu-card-allergens","aria-label":_.menu.allergensLabel(P),children:C.allergens.map(I=>{const b=k9[I],N=mP(b.key,g);return m.jsx("li",{className:"menu-card-allergen",title:N,"aria-label":N,children:m.jsx("span",{className:"menu-card-allergen-icon","aria-hidden":"true",children:m.jsx("img",{src:b.icon,alt:N,loading:"lazy",decoding:"async",width:48,height:48})})},b.key)})}),m.jsx("div",{className:"menu-card-footer",children:m.jsx(NF,{value:F,disabled:H,onChange:I=>{H||(a(C.key,I),w&&A(null))},ariaLabel:_.menu.quantityLabel(P),decreaseLabel:_.quantityStepper.decrease,increaseLabel:_.quantityStepper.increase})})]})]},C.key)}),m.jsx("div",{className:"summary-card",style:{marginTop:"0.5rem"},children:m.jsx("div",{className:"content-card",style:{boxShadow:"none"},children:m.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:"0.75rem"},children:[m.jsxs("div",{children:[m.jsx("h2",{style:{margin:0,fontSize:"1.4rem"},children:_.orderInput.totalLabel}),m.jsx("p",{style:{margin:0,color:"#475569"},children:_.orderInput.totalNote})]}),m.jsxs("strong",{style:{fontSize:"1.8rem",color:"var(--color-primary)"},children:["",c.toLocaleString()]})]})})}),w&&m.jsx("p",{style:{color:"#dc2626",margin:0},children:_.errors[w]}),m.jsxs("div",{className:"button-row",children:[m.jsx("button",{type:"submit",className:"button primary",disabled:!e,children:_.orderInput.reviewButton}),m.jsx("button",{type:"button",className:"button secondary",onClick:D,children:_.orderInput.resetButton})]})]})]})})}function OF(){const n=rl(),{ready:e,error:t}=r2(),{cartItems:r,total:i,hasItems:a,loading:o,error:c,setError:u,confirmOrder:h}=n2(),[p,g]=k.useState(null),[_,w]=k.useState(!1),{language:A}=Vi(),S=Ja[A];k.useEffect(()=>{a||n("/order",{replace:!0})},[a,n]),k.useEffect(()=>{u(null)},[u]);const D=async()=>{const P=await h();P&&(g(P.ticket),w(!0))},C=()=>{if(!p){w(!1);return}n(`/order/complete/${p}`,{replace:!0})};return m.jsx("div",{className:"content-container",children:m.jsxs("section",{className:"content-card",children:[m.jsx("h1",{className:"section-title",children:S.orderReview.title}),m.jsxs("p",{className:"section-description",children:[S.orderReview.descriptionLead,m.jsx("br",{}),S.orderReview.descriptionFollow]}),!e&&!t&&m.jsx("p",{children:S.auth.signingIn}),t&&m.jsx("p",{className:"error-message",children:S.auth.error}),m.jsxs("div",{className:"receipt-card",children:[m.jsxs("div",{className:"receipt-header",children:[m.jsx("span",{children:S.orderReview.tableHeaders.item}),m.jsx("span",{children:S.orderReview.tableHeaders.quantity}),m.jsx("span",{children:S.orderReview.tableHeaders.subtotal})]}),m.jsx("div",{className:"receipt-divider","aria-hidden":"true"}),m.jsx("div",{className:"receipt-items",children:r.map(({item:P,quantity:V,subtotal:H})=>m.jsxs("div",{className:"receipt-row",children:[m.jsx("div",{className:"receipt-item-info",children:m.jsx("span",{className:"receipt-item-name",children:Vy(P,A)})}),m.jsxs("span",{className:"receipt-item-qty",children:["",V]}),m.jsxs("span",{className:"receipt-item-subtotal",children:["",H.toLocaleString()]})]},P.key))}),m.jsx("div",{className:"receipt-divider","aria-hidden":"true"}),m.jsxs("div",{className:"receipt-total",children:[m.jsx("span",{children:S.orderReview.totalLabel}),m.jsxs("span",{children:["",i.toLocaleString()]})]}),_&&m.jsx("div",{className:"waste-guide-modal-backdrop",role:"presentation",children:m.jsxs("div",{className:"waste-guide-modal",role:"dialog","aria-modal":"true","aria-labelledby":"waste-guide-title","aria-describedby":"waste-guide-description",children:[m.jsx("h2",{id:"waste-guide-title",children:S.wasteGuide.title}),m.jsx("p",{id:"waste-guide-description",children:S.wasteGuide.description}),m.jsx("div",{className:"waste-guide-visual","aria-hidden":"true",children:S.wasteGuide.placeholder}),m.jsx("div",{className:"waste-guide-actions",children:m.jsx("button",{type:"button",className:"button primary",onClick:C,children:S.wasteGuide.confirm})})]})})]}),c&&m.jsx("p",{style:{color:"#dc2626",marginTop:0},children:S.errors[c]}),m.jsxs("div",{className:"button-row",children:[m.jsx("button",{type:"button",className:"button primary",onClick:D,disabled:!e||o,children:o?S.orderReview.confirming:S.orderReview.confirmButton}),m.jsx("button",{type:"button",className:"button secondary",onClick:()=>n("/order"),disabled:o,children:S.orderReview.changeButton})]})]})})}const DF=wn("Thnak_You_banner.png"),tS=[{key:"received",matches:[""]},{key:"ready",matches:[""]},{key:"completed",matches:[""]}];function Sv(n={}){const{enableTicketSearch:e=!1,ticketNavigationBase:t="/order/complete",fallbackPath:r="/status",titleOverride:i,descriptionOverride:a}=n,o=rl(),{ticket:c}=bN(),[u]=Pv(),h=u.get("ticket"),p=u.get("previewReady"),g=k.useMemo(()=>c?mf(c):h?mf(h):"",[h,c]),_=k.useMemo(()=>{const Ge=t||"/order/complete";return Ge.endsWith("/")?Ge.slice(0,-1):Ge},[t]),{ready:w,error:A}=r2(),{language:S}=Vi(),D=Ja[S],C=D.orderComplete,P=D.auth,V=D.copy,{orderResult:H,startNewOrder:X,refreshOrderResult:F,loadOrderByTicket:I}=n2(),[b,N]=k.useState(!1),[R,M]=k.useState(null),[B,L]=k.useState(0),[ie,ge]=k.useState(0),K=5e3,[G,le]=k.useState(!1),[we,Ae]=k.useState(null),[$,oe]=k.useState(""),[pe,ve]=k.useState(null);k.useEffect(()=>{e&&(oe(g),ve(null))},[e,g]);const Ne=H?.summary.ticket.toUpperCase(),Re=H&&(!g||Ne===g)?H:null,Ee=Re?.summary,Qe=e,Ze=Re?.qrCode??"",Pn=Re?.progressUrl??"",me=Ee?.progress??"",Ve=me==="",Ye=me==="",qe=k.useMemo(()=>p==="1"||p==="true",[p]),bt=!!(Ee&&(Ve||qe)),Et=!!(Ee&&Ye),{menuItemMap:Xn}=ol(),St=Ee?.callNumber&&Ee.callNumber>0?Ee.callNumber:null,Fe=St?C.readyInstructionWithCallNumber(St):C.readyInstructionWait,vt=k.useMemo(()=>Ee?Ee.progress===""?{label:C.paymentState.complete,tone:"complete"}:Ee.payment===""&&Ee.progress===""?{label:C.paymentState.ready,tone:"ready"}:Ee.payment===""?{label:C.paymentState.paid,tone:"paid"}:{label:C.paymentState.unpaid,tone:"unpaid"}:{label:"",tone:"unpaid"},[C,Ee]),Sn=k.useMemo(()=>{if(!Ee?.createdAt)return{display:"",iso:""};const Ge=new Date(Ee.createdAt);return Number.isNaN(Ge.getTime())?{display:"",iso:""}:{display:new Intl.DateTimeFormat(S==="ja"?"ja-JP":"en-US",{dateStyle:"medium",timeStyle:"short"}).format(Ge),iso:Ge.toISOString()}},[S,Ee?.createdAt]),fo=k.useMemo(()=>gP(me,S),[me,S]),Fi=k.useMemo(()=>{const Ge=tS.findIndex(ht=>ht.matches.includes(me));return Ge>=0?Ge:0},[me]);k.useEffect(()=>{Re&&Ae(null)},[Re]),k.useEffect(()=>{if(!g){!H&&!e&&o(r,{replace:!0});return}if(H&&Ne===g)return;let Ge=!0;return le(!0),Ae(null),I(g).then(ht=>{Ge&&(ht||o(`/order/not-found?ticket=${encodeURIComponent(g)}`,{replace:!0}))}).catch(ht=>{console.error(ht),Ge&&Ae("loadFailed")}).finally(()=>{Ge&&le(!1)}),()=>{Ge=!1}},[Ne,e,r,I,o,g,H]),k.useEffect(()=>{!Re&&!G&&!g&&H&&o(`${_}/${H.summary.ticket}`,{replace:!0})},[G,o,g,H,Re,_]),k.useEffect(()=>{if(!B){ge(0);return}const Ge=()=>{const ze=B-Date.now();ge(ze>0?Math.ceil(ze/1e3):0)};Ge();const ht=window.setInterval(Ge,500);return()=>window.clearInterval(ht)},[B]);const ae=Ge=>{Ge.preventDefault();const ht=mf($);if(!ht){ve("required");return}ve(null),oe(ht),o(`${_}/${ht}`)},be=e?m.jsxs("section",{className:"content-card","aria-label":C.ticketSearch.regionLabel,children:[m.jsx("h2",{className:"section-title",children:C.ticketSearch.title}),m.jsx("p",{className:"section-description",children:C.ticketSearch.description}),m.jsxs("form",{className:"form-grid",onSubmit:ae,children:[m.jsxs("div",{className:"field",children:[m.jsx("label",{htmlFor:"progress-ticket",children:C.ticketSearch.label}),m.jsx("input",{id:"progress-ticket",type:"text",inputMode:"text",value:$,onChange:Ge=>oe(Ge.target.value.toUpperCase()),placeholder:C.ticketSearch.placeholder,maxLength:24})]}),m.jsx("div",{className:"button-row",children:m.jsx("button",{type:"submit",className:"button primary",children:C.ticketSearch.button})})]}),pe&&m.jsx("p",{className:"error-message",children:C.ticketSearch.error})]}):null;if(!Ee)return G?m.jsxs("div",{className:"content-container",children:[be,m.jsxs("section",{className:"content-card order-complete-card","aria-live":"polite",children:[m.jsx("h1",{className:"section-title",children:C.loadingTitle}),m.jsx("p",{className:"section-description",children:C.loadingDescription})]})]}):we?m.jsxs("div",{className:"content-container",children:[be,m.jsxs("section",{className:"content-card order-complete-card","aria-live":"polite",children:[m.jsx("h1",{className:"section-title",children:C.loadErrorTitle}),m.jsx("p",{className:"section-description",children:C.loadErrorDescription}),m.jsx("div",{className:"button-row",children:m.jsx("button",{type:"button",className:"button secondary",onClick:()=>o(r),children:C.loadErrorAction})})]})]}):e?m.jsxs("div",{className:"content-container",children:[be,m.jsxs("section",{className:"content-card order-complete-card","aria-live":"polite",children:[m.jsx("h1",{className:"section-title",children:C.inviteTitle}),m.jsx("p",{className:"section-description",children:C.inviteDescription})]})]}):null;const Ke=i??C.title,Wt=a??(Qe?C.description.progressOnly:C.description.default),kn=async()=>{if(!(b||Date.now()<B||ie>0)){N(!0),M(null);try{await F()||M("refreshFailed")}catch(Ge){console.error(Ge),M("refreshFailed")}finally{N(!1),L(Date.now()+K)}}},Gr=async()=>{try{await navigator.clipboard.writeText(Ee.ticket),alert(V.progressCodeSuccess)}catch(Ge){console.error(Ge),alert(V.progressCodeFailure)}},qr=async()=>{try{await navigator.clipboard.writeText(Pn),alert(V.progressLinkSuccess)}catch(Ge){console.error(Ge),alert(V.progressLinkFailure)}},Ea=()=>{X(),o("/order")};return m.jsxs("div",{className:"content-container",children:[be,m.jsxs("section",{className:"content-card order-complete-card","aria-live":"polite",children:[m.jsx("h1",{className:"section-title",children:Ke}),m.jsx("p",{className:"section-description",children:Wt}),!w&&!A&&m.jsx("p",{children:P.signingIn}),A&&m.jsx("p",{className:"error-message",children:P.error}),m.jsxs("div",{className:"completion-order-info",children:[m.jsxs("div",{className:"completion-status-card",children:[m.jsxs("div",{className:"completion-call-number-block","aria-live":"polite",children:[m.jsx("span",{className:"completion-label",children:C.callNumberLabel}),m.jsx("span",{className:"completion-call-number",children:Ee.callNumber>0?Ee.callNumber:C.callNumberPending})]}),m.jsx("div",{className:"payment-state",children:m.jsx("span",{className:`payment-state-badge ${vt.tone}`,children:vt.label})}),m.jsxs("div",{className:"completion-status-header",children:[m.jsx("span",{className:"completion-label",children:C.statusHeading}),m.jsx("button",{type:"button",className:"button secondary completion-refresh-button",onClick:kn,disabled:b||ie>0,children:b?C.refresh.refreshing:ie>0?C.refresh.cooldown(ie):C.refresh.action})]}),R&&m.jsx("p",{className:"completion-refresh-error",children:C.refresh.error}),m.jsx("div",{className:"completion-progress",role:"list",children:tS.map((Ge,ht)=>{const ze=["completion-progress-step",ht<Fi?"done":"",ht===Fi?"current":""].filter(Boolean).join(" ");return m.jsxs("div",{className:ze,role:"listitem",children:[m.jsx("div",{className:"completion-progress-node","aria-hidden":"true"}),m.jsx("span",{className:"completion-progress-label",children:vP(Ge.key,S)})]},Ge.key)})}),bt&&Ee&&m.jsxs("div",{className:`completion-ready-notice${qe&&!Ve?" preview":""}`,role:"status","aria-live":"assertive",children:[m.jsx("div",{className:"completion-ready-icon","aria-hidden":"true",children:m.jsx("svg",{viewBox:"0 0 24 24",focusable:"false","aria-hidden":"true",children:m.jsx("path",{d:"M9.5 16.25 5.75 12.5l1.5-1.5 2.25 2.25 6-6 1.5 1.5-7.5 7.5Z",fill:"currentColor"})})}),m.jsxs("div",{className:"completion-ready-copy",children:[m.jsx("p",{className:"completion-ready-title",children:C.readyTitle}),m.jsx("p",{className:"completion-ready-message",children:Fe}),qe&&!Ve&&m.jsx("span",{className:"completion-ready-preview-tag",children:C.readyPreviewTag})]})]})]}),m.jsxs("div",{className:"completion-meta",children:[m.jsx("h2",{className:"completion-subheading",children:C.metaHeading}),m.jsxs("dl",{className:"completion-meta-list",children:[m.jsxs("div",{children:[m.jsx("dt",{children:C.meta.total}),m.jsxs("dd",{children:["",Ee.total.toLocaleString()]})]}),m.jsxs("div",{children:[m.jsx("dt",{children:C.meta.payment}),m.jsx("dd",{children:Cc(Ee.payment,S)})]}),m.jsxs("div",{children:[m.jsx("dt",{children:C.meta.progress}),m.jsx("dd",{children:fo})]}),m.jsxs("div",{children:[m.jsx("dt",{children:C.meta.orderedAt}),m.jsx("dd",{children:Sn.display?m.jsx("time",{dateTime:Sn.iso,children:Sn.display}):""})]})]})]})]}),Et&&m.jsxs("section",{className:"completion-thankyou-card",role:"status","aria-live":"polite",children:[m.jsx("img",{src:DF,alt:C.thankYouImageAlt,className:"completion-thankyou-image",loading:"lazy"}),m.jsxs("div",{className:"completion-thankyou-copy",children:[m.jsx("h2",{className:"completion-thankyou-title",children:C.thankYouTitle}),m.jsx("p",{className:"completion-thankyou-message",children:C.thankYouMessage})]})]}),Ze&&m.jsxs("div",{className:"completion-qr-block",children:[m.jsx("img",{src:Ze,alt:C.qrAlt}),m.jsx("span",{className:"completion-qr-caption",children:C.qrCaption})]}),m.jsxs("div",{className:"completion-identifiers",children:[m.jsxs("div",{className:"completion-order-id completion-identifier-card",children:[m.jsx("span",{className:"completion-label",children:C.identifiers.orderId}),m.jsx("span",{className:"completion-order-id-value",children:Ee.orderId})]}),Qe&&m.jsxs("div",{className:"completion-order-id completion-identifier-card",children:[m.jsx("span",{className:"completion-label",children:C.identifiers.ticket}),m.jsx("span",{className:"completion-order-id-value",style:{wordBreak:"break-all"},children:Ee.ticket})]})]}),m.jsxs("div",{className:"completion-items",children:[m.jsx("h2",{className:"completion-subheading",children:C.itemsHeading}),m.jsxs("table",{className:"completion-items-table",children:[m.jsx("thead",{children:m.jsxs("tr",{children:[m.jsx("th",{scope:"col",children:C.itemsTable.item}),m.jsx("th",{scope:"col",children:C.itemsTable.quantity}),m.jsx("th",{scope:"col",children:C.itemsTable.price}),m.jsx("th",{scope:"col",children:C.itemsTable.subtotal})]})}),m.jsxs("tbody",{children:[Object.entries(Ee.items).map(([Ge,ht])=>{const ze=Xn[Ge];return ze?m.jsxs("tr",{children:[m.jsx("td",{children:Vy(ze,S)}),m.jsx("td",{className:"numeric",children:ht}),m.jsxs("td",{className:"numeric",children:["",ze.price.toLocaleString()]}),m.jsxs("td",{className:"numeric",children:["",(ze.price*ht).toLocaleString()]})]},Ge):null}),m.jsxs("tr",{className:"completion-items-total",children:[m.jsx("td",{colSpan:3,children:C.itemsTable.total}),m.jsxs("td",{className:"numeric",children:["",Ee.total.toLocaleString()]})]})]})]})]}),m.jsxs("div",{className:"button-row completion-actions",children:[m.jsx("button",{type:"button",className:"button primary",onClick:qr,children:C.actions.copyLink}),Qe&&Pn&&m.jsx("button",{type:"button",className:"button secondary",onClick:Gr,children:C.actions.copyCode}),m.jsx("button",{type:"button",className:"button secondary",onClick:Ea,children:C.actions.startNew})]})]})]})}function nS(){const{language:n}=Vi(),t=Ja[n].orderProgress;return m.jsx(Sv,{enableTicketSearch:!0,ticketNavigationBase:"/progress",fallbackPath:"/progress",titleOverride:t.title,descriptionOverride:t.description})}function MF(){const[n]=Pv(),e=n.get("ticket")??"",t=mf(e),{language:r}=Vi(),i=Ja[r].ticketNotFound;return m.jsx("div",{className:"content-container",children:m.jsxs("section",{className:"content-card order-complete-card","aria-live":"polite",children:[m.jsx("h1",{className:"section-title",children:i.title}),m.jsx("p",{className:"section-description",children:t?i.descriptionKnown(t):i.descriptionUnknown}),m.jsxs("div",{className:"button-row",children:[m.jsx(e0,{className:"button primary",to:"/status",children:i.retry}),m.jsx(e0,{className:"button secondary",to:"/order",children:i.newOrder})]})]})})}const Ag=3600*1e3,sI=()=>{const{list:n}=uo();return n.reduce((e,t)=>(e[t.key]=0,e),{})},rS=n=>`${n.getHours().toString().padStart(2,"0")}:00`,PF=n=>n.createdAt??n.updatedAt;function kF(n,e,t=24){const r=e.getTime(),i=Array.from({length:t},(a,o)=>{const c=new Date(r+o*Ag),u=new Date(c.getTime()+Ag);return{slotStart:c,slotEnd:u,label:`${rS(c)} - ${rS(u)}`,totals:sI(),orderCount:0,totalItems:0}});return n.forEach(a=>{const o=PF(a);if(!o)return;const c=o.getTime()-r;if(c<0)return;const u=Math.floor(c/Ag);if(u<0||u>=t)return;const h=i[u];let p=!1;Object.entries(a.items).forEach(([g,_])=>{const w=Number(_);if(!Number.isFinite(w)||w<=0)return;const A=g;h.totals[A]=(h.totals[A]??0)+w,h.totalItems+=w,p=!0}),p&&(h.orderCount+=1)}),i}function LF(n){const e=sI(),t={:0,:0,:0};let r=0;return n.forEach(i=>{t[i.progress]=(t[i.progress]??0)+1,i.progress!==""&&(r+=1,Object.entries(i.items).forEach(([a,o])=>{const c=Number(o);if(!Number.isFinite(c)||c<=0)return;const u=a;e[u]=(e[u]??0)+c}))}),{orderCount:r,totals:e,statusCounts:t}}const jF=6e4,iS=n=>n.toISOString().slice(0,10),BF=n=>{const e=n.getHours().toString().padStart(2,"0"),t=n.getMinutes().toString().padStart(2,"0"),r=n.getSeconds().toString().padStart(2,"0");return`${e}:${t}:${r}`},VF=n=>{const e=new Date(n);return e.setDate(e.getDate()+1),e};function FF(){const[n,e]=k.useState(()=>iS(new Date)),[t,r]=k.useState([]),[i,a]=k.useState(!1),[o,c]=k.useState(null),[u,h]=k.useState(null),{registerListener:p}=aI(),{signOut:g}=dp(),{menuItems:_}=ol(),w=k.useMemo(()=>{const b=new Date(`${n}T00:00:00`);return b.setHours(0,0,0,0),b},[n]),A=k.useMemo(()=>VF(w),[w]),S=k.useCallback(async b=>{if(!b?.aborted){a(!0),c(null);try{const N=await J7({start:w,end:A});if(b?.aborted)return;r(N),h(new Date)}catch(N){if(b?.aborted)return;console.error(N);const R=N instanceof Error?N.message:"";c(R)}finally{b?.aborted||a(!1)}}},[w,A]),D=k.useRef(S);k.useEffect(()=>{D.current=S},[S]),k.useEffect(()=>{const b=new AbortController;return S(b.signal),()=>b.abort()},[S]),k.useEffect(()=>{const b=new AbortController,N=window.setInterval(()=>{S(b.signal)},jF);return()=>{b.abort(),window.clearInterval(N)}},[S]),k.useEffect(()=>{const b=p(N=>{N.type==="new-order"&&D.current()});return()=>{b()}},[p]);const C=k.useMemo(()=>kF(t,w,24),[t,w]),P=k.useMemo(()=>LF(t),[t]),V=k.useMemo(()=>C.filter(b=>b.totalItems>0),[C]),H=k.useMemo(()=>{const b=_.reduce((M,B)=>(M[B.key]=C.reduce((L,ie)=>L+(ie.totals[B.key]??0),0),M),{}),N=Object.values(b).reduce((M,B)=>M+B,0),R=C.reduce((M,B)=>M+B.orderCount,0);return{totals:b,totalItems:N,totalOrders:R}},[C,_]),X=b=>{e(b.target.value)},F=()=>{h(null),S()},I=()=>{g()};return m.jsxs("div",{className:"kitchen-page",children:[m.jsxs("header",{className:"kitchen-header",children:[m.jsxs("div",{children:[m.jsx("p",{className:"kitchen-overline",children:""}),m.jsx("h1",{children:""}),m.jsx("p",{className:"kitchen-description",children:""})]}),m.jsxs("div",{className:"kitchen-controls",role:"group","aria-label":"",children:[m.jsxs("label",{className:"kitchen-date-control",children:[m.jsx("span",{children:""}),m.jsx("input",{type:"date",value:n,onChange:X,max:iS(new Date)})]}),m.jsx("button",{type:"button",className:"button secondary",onClick:F,disabled:i,children:""}),m.jsx("button",{type:"button",className:"button secondary",onClick:I,children:""}),m.jsxs("p",{className:"kitchen-last-updated",children:[": ",u?BF(u):""]})]})]}),o&&m.jsx("div",{className:"kitchen-alert error",children:o}),i&&m.jsx("p",{className:"kitchen-loading",children:""}),m.jsxs("section",{className:"kitchen-section","aria-labelledby":"kitchen-current-orders",children:[m.jsxs("div",{className:"kitchen-section-header",children:[m.jsx("h2",{id:"kitchen-current-orders",children:""}),m.jsx("p",{children:""})]}),m.jsx("div",{className:"kitchen-summary-grid",children:_.map(b=>m.jsxs("article",{className:"kitchen-summary-card",children:[m.jsx("h3",{children:b.label}),m.jsxs("p",{className:"kitchen-summary-count",children:[P.totals[b.key],""]})]},b.key))}),m.jsxs("div",{className:"kitchen-status-chips",role:"list",children:[m.jsxs("span",{role:"listitem",className:"kitchen-status-chip",children:[" ",P.statusCounts.,""]}),m.jsxs("span",{role:"listitem",className:"kitchen-status-chip highlight",children:[" ",P.statusCounts.,""]}),m.jsxs("span",{role:"listitem",className:"kitchen-status-chip muted",children:[" ",P.statusCounts.,""]}),m.jsxs("span",{role:"listitem",className:"kitchen-status-chip total",children:[" ",P.orderCount,""]})]})]}),m.jsxs("section",{className:"kitchen-section","aria-labelledby":"kitchen-hourly-sales",children:[m.jsxs("div",{className:"kitchen-section-header",children:[m.jsx("h2",{id:"kitchen-hourly-sales",children:"1"}),m.jsx("p",{children:": 60"})]}),V.length===0?m.jsx("p",{className:"kitchen-empty",children:""}):m.jsx("div",{className:"kitchen-table-wrapper",children:m.jsxs("table",{className:"kitchen-table",children:[m.jsx("thead",{children:m.jsxs("tr",{children:[m.jsx("th",{scope:"col",children:""}),_.map(b=>m.jsx("th",{scope:"col",children:b.label},b.key)),m.jsx("th",{scope:"col",children:""}),m.jsx("th",{scope:"col",children:""})]})}),m.jsx("tbody",{children:V.map(b=>m.jsxs("tr",{children:[m.jsx("th",{scope:"row",children:b.label}),_.map(N=>m.jsx("td",{children:b.totals[N.key]>0?b.totals[N.key]:""},N.key)),m.jsx("td",{children:b.totalItems>0?b.totalItems:""}),m.jsx("td",{children:b.orderCount>0?b.orderCount:""})]},b.label))}),m.jsx("tfoot",{children:m.jsxs("tr",{children:[m.jsx("th",{scope:"row",children:""}),_.map(b=>m.jsx("td",{children:H.totals[b.key]||""},b.key)),m.jsx("td",{children:H.totalItems||""}),m.jsx("td",{children:H.totalOrders||""})]})})]})})]})]})}const UF={"new-order":"",test:"",custom:""},zF={hour:"2-digit",minute:"2-digit"};function HF(n){return n?n.toLocaleTimeString([],zF):""}function GF(n){if(!n)return;if(n instanceof Date)return n;const e=new Date(n);return Number.isNaN(e.getTime())?void 0:e}function qF(n){return n&&n>0?` ${n}`:""}const oI=k.memo(({ariaLabel:n="",className:e,hideWhenEmpty:t=!0,titleBySource:r,variant:i="dark"})=>{const{toasts:a,removeToast:o}=aI();if(t&&a.length===0)return null;const c=["order-toast-container",e].filter(Boolean).join(" ");return m.jsx("div",{className:c,role:"status","aria-live":"polite","aria-label":n,children:a.map(u=>{const h=r?.[u.source]??UF[u.source],p=GF(u.createdAt),g=HF(p),_=qF(u.callNumber),w=i==="light"?"order-toast--light":"";return m.jsxs("div",{className:`order-toast ${w}`,children:[m.jsx("button",{type:"button",className:"order-toast-close",onClick:()=>o(u.id),"aria-label":"",children:""}),m.jsxs("div",{className:"order-toast-content",children:[m.jsx("p",{className:"order-toast-title",children:h}),m.jsxs("p",{className:"order-toast-meta",children:[_,"   ",u.total.toLocaleString()]}),m.jsx("p",{className:"order-toast-message",children:u.itemSummary}),g&&m.jsxs("p",{className:"order-toast-meta",children:[" ",g]})]})]},u.id)})})});oI.displayName="OrderToastViewport";function aS({children:n,required:e,title:t,description:r}){const{status:i,error:a,signIn:o,signOut:c,hasRole:u}=dp(),h=k.useMemo(()=>Array.isArray(e)?e:[e],[e]),[p,g]=k.useState(""),[_,w]=k.useState(""),[A,S]=k.useState(!1),[D,C]=k.useState(null),P=k.useMemo(()=>({admin:"",kitchen:"",staff:""}),[]),V=k.useMemo(()=>h.map(F=>P[F]).join(", "),[h,P]);k.useEffect(()=>{i==="signed-out"&&(g(""),w(""),S(!1),C(null))},[i]);const H=async F=>{if(F.preventDefault(),!p||!_){C("");return}C(null),S(!0);try{await o({email:p,password:_})}catch(I){const b=I instanceof Error?I.message:"";C(b)}finally{S(!1)}},X=k.useMemo(()=>u(h),[u,h]);return i==="loading"?m.jsx("div",{className:"role-guard",children:m.jsx("div",{className:"role-guard-card",children:m.jsx("p",{className:"role-guard-status",children:""})})}):i==="signed-out"?m.jsx("div",{className:"role-guard",children:m.jsxs("div",{className:"role-guard-card",children:[m.jsx("h1",{children:t??""}),m.jsx("p",{className:"role-guard-description",children:r??` ${V} `}),m.jsxs("form",{className:"role-guard-form",onSubmit:H,children:[m.jsxs("label",{className:"role-guard-field",children:[m.jsx("span",{children:""}),m.jsx("input",{type:"email",autoComplete:"email",value:p,onChange:F=>g(F.target.value),required:!0,placeholder:"admin@example.com"})]}),m.jsxs("label",{className:"role-guard-field",children:[m.jsx("span",{children:""}),m.jsx("input",{type:"password",autoComplete:"current-password",value:_,onChange:F=>w(F.target.value),required:!0,placeholder:""})]}),(D||a)&&m.jsx("p",{className:"role-guard-error",children:D??a}),m.jsx("button",{type:"submit",className:"button primary",disabled:A,children:A?"":""})]})]})}):X?m.jsx(m.Fragment,{children:n}):m.jsx("div",{className:"role-guard",children:m.jsxs("div",{className:"role-guard-card",children:[m.jsx("h1",{children:""}),m.jsxs("p",{className:"role-guard-description",children:[V," "]}),(D||a)&&m.jsx("p",{className:"role-guard-error",children:D??a}),m.jsx("button",{type:"button",className:"button secondary",onClick:()=>c(),children:""})]})})}const $F=wn("header/character_illust.png"),XF=wn("header/header_title.png");function YF(){const{language:n}=Vi(),e=Ja[n];return m.jsxs("div",{className:"not-found",children:[m.jsx("h1",{children:e.notFound.title}),m.jsx("p",{children:e.notFound.description})]})}function KF(){const n=Bi(),{language:e,setLanguage:t}=Vi(),r=n.pathname.startsWith("/admin"),i=n.pathname.startsWith("/kitchen"),a=r||i,o=r||i?"ja":e,c=Ja[o],u=Ja[e].languageToggle,h=["app-shell",r?"app-shell--wide":""].filter(Boolean).join(" "),p=r?"light":"dark",g=!r&&!i,_=g,w=o==="en"?"Mobile ordering system":"",A=e==="ja"?"en":"ja",S=()=>{t(A)};return m.jsx(IF,{children:m.jsxs(bF,{children:[m.jsxs("div",{className:h,children:[m.jsx("header",{className:["app-header",_?"app-header--public":"app-header--internal"].filter(Boolean).join(" "),children:_?m.jsx("div",{className:"header-row",children:m.jsxs("div",{className:"header-brand-group",children:[m.jsx("img",{className:"header-brand-character",src:$F,alt:c.header.characterAlt}),m.jsxs("div",{className:"header-title-block",children:[m.jsx("img",{className:"header-title-image",src:XF,alt:c.header.titleAlt}),g&&m.jsx("button",{type:"button",className:"language-switch",onClick:S,"aria-label":u.buttonAria(A),children:u.buttonText})]})]})}):m.jsx("div",{className:"header-internal",children:m.jsxs("div",{className:"brand",children:[m.jsx("span",{"aria-hidden":"true",className:"brand-icon",children:""}),m.jsxs("div",{className:"brand-text",children:[m.jsx("span",{className:"brand-title",children:""}),m.jsx("span",{className:"brand-subtitle",children:w})]})]})})}),m.jsx("main",{className:"app-main",children:m.jsxs(mS,{children:[m.jsx(Yt,{path:"/",element:m.jsx(ii,{to:"/order",replace:!0})}),m.jsx(Yt,{path:"/order",element:m.jsx(RF,{})}),m.jsx(Yt,{path:"/order/review",element:m.jsx(OF,{})}),m.jsx(Yt,{path:"/order/complete",element:m.jsx(Sv,{})}),m.jsx(Yt,{path:"/order/complete/:ticket",element:m.jsx(Sv,{})}),m.jsx(Yt,{path:"/order/not-found",element:m.jsx(MF,{})}),m.jsx(Yt,{path:"/status",element:m.jsx(WV,{})}),m.jsx(Yt,{path:"/progress",element:m.jsx(nS,{})}),m.jsx(Yt,{path:"/progress/:ticket",element:m.jsx(nS,{})}),m.jsx(Yt,{path:"/kitchen",element:m.jsx(aS,{required:"kitchen",title:"",description:"",children:m.jsx(FF,{})})}),m.jsx(Yt,{path:"/admin/*",element:m.jsx(aS,{required:["admin","staff"],title:"",description:"",children:m.jsx(HV,{})})}),m.jsx(Yt,{path:"*",element:m.jsx(YF,{})})]})}),m.jsx("footer",{className:"app-footer",children:m.jsxs("p",{children:[" ",new Date().getFullYear()," Hakuto Tanaka and Haruto Otsuka. All rights reserved."]})})]}),a&&m.jsx(oI,{variant:p,ariaLabel:""})]})})}const WF="/Ichinikai/";Y4.createRoot(document.getElementById("root")).render(m.jsx(k.StrictMode,{children:m.jsx(lR,{basename:WF,children:m.jsx(P9,{children:m.jsx(uP,{children:m.jsx(KF,{})})})})}));
