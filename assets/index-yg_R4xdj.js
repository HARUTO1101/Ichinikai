(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=t(i);fetch(i.href,a)}})();function E4(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var fm={exports:{}},Fu={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fE;function w4(){if(fE)return Fu;fE=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(r,i,a){var o=null;if(a!==void 0&&(o=""+a),i.key!==void 0&&(o=""+i.key),"key"in i){a={};for(var c in i)c!=="key"&&(a[c]=i[c])}else a=i;return i=a.ref,{$$typeof:n,type:r,key:o,ref:i!==void 0?i:null,props:a}}return Fu.Fragment=e,Fu.jsx=t,Fu.jsxs=t,Fu}var hE;function A4(){return hE||(hE=1,fm.exports=w4()),fm.exports}var m=A4(),hm={exports:{}},Fe={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dE;function b4(){if(dE)return Fe;dE=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),o=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),g=Symbol.for("react.activity"),_=Symbol.iterator;function E(X){return X===null||typeof X!="object"?null:(X=_&&X[_]||X["@@iterator"],typeof X=="function"?X:null)}var A={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,O={};function T(X,se,ve){this.props=X,this.context=se,this.refs=O,this.updater=ve||A}T.prototype.isReactComponent={},T.prototype.setState=function(X,se){if(typeof X!="object"&&typeof X!="function"&&X!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,X,se,"setState")},T.prototype.forceUpdate=function(X){this.updater.enqueueForceUpdate(this,X,"forceUpdate")};function R(){}R.prototype=T.prototype;function L(X,se,ve){this.props=X,this.context=se,this.refs=O,this.updater=ve||A}var z=L.prototype=new R;z.constructor=L,S(z,T.prototype),z.isPureReactComponent=!0;var U=Array.isArray;function G(){}var D={H:null,A:null,T:null,S:null},w=Object.prototype.hasOwnProperty;function I(X,se,ve){var Ee=ve.ref;return{$$typeof:n,type:X,key:se,ref:Ee!==void 0?Ee:null,props:ve}}function M(X,se){return I(X.type,se,X.props)}function j(X){return typeof X=="object"&&X!==null&&X.$$typeof===n}function V(X){var se={"=":"=0",":":"=2"};return"$"+X.replace(/[=:]/g,function(ve){return se[ve]})}var k=/\/+/g;function ee(X,se){return typeof X=="object"&&X!==null&&X.key!=null?V(""+X.key):se.toString(36)}function Ie(X){switch(X.status){case"fulfilled":return X.value;case"rejected":throw X.reason;default:switch(typeof X.status=="string"?X.then(G,G):(X.status="pending",X.then(function(se){X.status==="pending"&&(X.status="fulfilled",X.value=se)},function(se){X.status==="pending"&&(X.status="rejected",X.reason=se)})),X.status){case"fulfilled":return X.value;case"rejected":throw X.reason}}throw X}function q(X,se,ve,Ee,ie){var ge=typeof X;(ge==="undefined"||ge==="boolean")&&(X=null);var pe=!1;if(X===null)pe=!0;else switch(ge){case"bigint":case"string":case"number":pe=!0;break;case"object":switch(X.$$typeof){case n:case e:pe=!0;break;case p:return pe=X._init,q(pe(X._payload),se,ve,Ee,ie)}}if(pe)return ie=ie(X),pe=Ee===""?"."+ee(X,0):Ee,U(ie)?(ve="",pe!=null&&(ve=pe.replace(k,"$&/")+"/"),q(ie,se,ve,"",function(rt){return rt})):ie!=null&&(j(ie)&&(ie=M(ie,ve+(ie.key==null||X&&X.key===ie.key?"":(""+ie.key).replace(k,"$&/")+"/")+pe)),se.push(ie)),1;pe=0;var be=Ee===""?".":Ee+":";if(U(X))for(var De=0;De<X.length;De++)Ee=X[De],ge=be+ee(Ee,De),pe+=q(Ee,se,ve,ge,ie);else if(De=E(X),typeof De=="function")for(X=De.call(X),De=0;!(Ee=X.next()).done;)Ee=Ee.value,ge=be+ee(Ee,De++),pe+=q(Ee,se,ve,ge,ie);else if(ge==="object"){if(typeof X.then=="function")return q(Ie(X),se,ve,Ee,ie);throw se=String(X),Error("Objects are not valid as a React child (found: "+(se==="[object Object]"?"object with keys {"+Object.keys(X).join(", ")+"}":se)+"). If you meant to render a collection of children, use an array instead.")}return pe}function ce(X,se,ve){if(X==null)return X;var Ee=[],ie=0;return q(X,Ee,"","",function(ge){return se.call(ve,ge,ie++)}),Ee}function me(X){if(X._status===-1){var se=X._result;se=se(),se.then(function(ve){(X._status===0||X._status===-1)&&(X._status=1,X._result=ve)},function(ve){(X._status===0||X._status===-1)&&(X._status=2,X._result=ve)}),X._status===-1&&(X._status=0,X._result=se)}if(X._status===1)return X._result.default;throw X._result}var Te=typeof reportError=="function"?reportError:function(X){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var se=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof X=="object"&&X!==null&&typeof X.message=="string"?String(X.message):String(X),error:X});if(!window.dispatchEvent(se))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",X);return}console.error(X)},Ue={map:ce,forEach:function(X,se,ve){ce(X,function(){se.apply(this,arguments)},ve)},count:function(X){var se=0;return ce(X,function(){se++}),se},toArray:function(X){return ce(X,function(se){return se})||[]},only:function(X){if(!j(X))throw Error("React.Children.only expected to receive a single React element child.");return X}};return Fe.Activity=g,Fe.Children=Ue,Fe.Component=T,Fe.Fragment=t,Fe.Profiler=i,Fe.PureComponent=L,Fe.StrictMode=r,Fe.Suspense=u,Fe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=D,Fe.__COMPILER_RUNTIME={__proto__:null,c:function(X){return D.H.useMemoCache(X)}},Fe.cache=function(X){return function(){return X.apply(null,arguments)}},Fe.cacheSignal=function(){return null},Fe.cloneElement=function(X,se,ve){if(X==null)throw Error("The argument must be a React element, but you passed "+X+".");var Ee=S({},X.props),ie=X.key;if(se!=null)for(ge in se.key!==void 0&&(ie=""+se.key),se)!w.call(se,ge)||ge==="key"||ge==="__self"||ge==="__source"||ge==="ref"&&se.ref===void 0||(Ee[ge]=se[ge]);var ge=arguments.length-2;if(ge===1)Ee.children=ve;else if(1<ge){for(var pe=Array(ge),be=0;be<ge;be++)pe[be]=arguments[be+2];Ee.children=pe}return I(X.type,ie,Ee)},Fe.createContext=function(X){return X={$$typeof:o,_currentValue:X,_currentValue2:X,_threadCount:0,Provider:null,Consumer:null},X.Provider=X,X.Consumer={$$typeof:a,_context:X},X},Fe.createElement=function(X,se,ve){var Ee,ie={},ge=null;if(se!=null)for(Ee in se.key!==void 0&&(ge=""+se.key),se)w.call(se,Ee)&&Ee!=="key"&&Ee!=="__self"&&Ee!=="__source"&&(ie[Ee]=se[Ee]);var pe=arguments.length-2;if(pe===1)ie.children=ve;else if(1<pe){for(var be=Array(pe),De=0;De<pe;De++)be[De]=arguments[De+2];ie.children=be}if(X&&X.defaultProps)for(Ee in pe=X.defaultProps,pe)ie[Ee]===void 0&&(ie[Ee]=pe[Ee]);return I(X,ge,ie)},Fe.createRef=function(){return{current:null}},Fe.forwardRef=function(X){return{$$typeof:c,render:X}},Fe.isValidElement=j,Fe.lazy=function(X){return{$$typeof:p,_payload:{_status:-1,_result:X},_init:me}},Fe.memo=function(X,se){return{$$typeof:h,type:X,compare:se===void 0?null:se}},Fe.startTransition=function(X){var se=D.T,ve={};D.T=ve;try{var Ee=X(),ie=D.S;ie!==null&&ie(ve,Ee),typeof Ee=="object"&&Ee!==null&&typeof Ee.then=="function"&&Ee.then(G,Te)}catch(ge){Te(ge)}finally{se!==null&&ve.types!==null&&(se.types=ve.types),D.T=se}},Fe.unstable_useCacheRefresh=function(){return D.H.useCacheRefresh()},Fe.use=function(X){return D.H.use(X)},Fe.useActionState=function(X,se,ve){return D.H.useActionState(X,se,ve)},Fe.useCallback=function(X,se){return D.H.useCallback(X,se)},Fe.useContext=function(X){return D.H.useContext(X)},Fe.useDebugValue=function(){},Fe.useDeferredValue=function(X,se){return D.H.useDeferredValue(X,se)},Fe.useEffect=function(X,se){return D.H.useEffect(X,se)},Fe.useEffectEvent=function(X){return D.H.useEffectEvent(X)},Fe.useId=function(){return D.H.useId()},Fe.useImperativeHandle=function(X,se,ve){return D.H.useImperativeHandle(X,se,ve)},Fe.useInsertionEffect=function(X,se){return D.H.useInsertionEffect(X,se)},Fe.useLayoutEffect=function(X,se){return D.H.useLayoutEffect(X,se)},Fe.useMemo=function(X,se){return D.H.useMemo(X,se)},Fe.useOptimistic=function(X,se){return D.H.useOptimistic(X,se)},Fe.useReducer=function(X,se,ve){return D.H.useReducer(X,se,ve)},Fe.useRef=function(X){return D.H.useRef(X)},Fe.useState=function(X){return D.H.useState(X)},Fe.useSyncExternalStore=function(X,se,ve){return D.H.useSyncExternalStore(X,se,ve)},Fe.useTransition=function(){return D.H.useTransition()},Fe.version="19.2.0",Fe}var pE;function gv(){return pE||(pE=1,hm.exports=b4()),hm.exports}var P=gv(),dm={exports:{}},Uu={},pm={exports:{}},mm={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mE;function S4(){return mE||(mE=1,(function(n){function e(q,ce){var me=q.length;q.push(ce);e:for(;0<me;){var Te=me-1>>>1,Ue=q[Te];if(0<i(Ue,ce))q[Te]=ce,q[me]=Ue,me=Te;else break e}}function t(q){return q.length===0?null:q[0]}function r(q){if(q.length===0)return null;var ce=q[0],me=q.pop();if(me!==ce){q[0]=me;e:for(var Te=0,Ue=q.length,X=Ue>>>1;Te<X;){var se=2*(Te+1)-1,ve=q[se],Ee=se+1,ie=q[Ee];if(0>i(ve,me))Ee<Ue&&0>i(ie,ve)?(q[Te]=ie,q[Ee]=me,Te=Ee):(q[Te]=ve,q[se]=me,Te=se);else if(Ee<Ue&&0>i(ie,me))q[Te]=ie,q[Ee]=me,Te=Ee;else break e}}return ce}function i(q,ce){var me=q.sortIndex-ce.sortIndex;return me!==0?me:q.id-ce.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var o=Date,c=o.now();n.unstable_now=function(){return o.now()-c}}var u=[],h=[],p=1,g=null,_=3,E=!1,A=!1,S=!1,O=!1,T=typeof setTimeout=="function"?setTimeout:null,R=typeof clearTimeout=="function"?clearTimeout:null,L=typeof setImmediate<"u"?setImmediate:null;function z(q){for(var ce=t(h);ce!==null;){if(ce.callback===null)r(h);else if(ce.startTime<=q)r(h),ce.sortIndex=ce.expirationTime,e(u,ce);else break;ce=t(h)}}function U(q){if(S=!1,z(q),!A)if(t(u)!==null)A=!0,G||(G=!0,V());else{var ce=t(h);ce!==null&&Ie(U,ce.startTime-q)}}var G=!1,D=-1,w=5,I=-1;function M(){return O?!0:!(n.unstable_now()-I<w)}function j(){if(O=!1,G){var q=n.unstable_now();I=q;var ce=!0;try{e:{A=!1,S&&(S=!1,R(D),D=-1),E=!0;var me=_;try{t:{for(z(q),g=t(u);g!==null&&!(g.expirationTime>q&&M());){var Te=g.callback;if(typeof Te=="function"){g.callback=null,_=g.priorityLevel;var Ue=Te(g.expirationTime<=q);if(q=n.unstable_now(),typeof Ue=="function"){g.callback=Ue,z(q),ce=!0;break t}g===t(u)&&r(u),z(q)}else r(u);g=t(u)}if(g!==null)ce=!0;else{var X=t(h);X!==null&&Ie(U,X.startTime-q),ce=!1}}break e}finally{g=null,_=me,E=!1}ce=void 0}}finally{ce?V():G=!1}}}var V;if(typeof L=="function")V=function(){L(j)};else if(typeof MessageChannel<"u"){var k=new MessageChannel,ee=k.port2;k.port1.onmessage=j,V=function(){ee.postMessage(null)}}else V=function(){T(j,0)};function Ie(q,ce){D=T(function(){q(n.unstable_now())},ce)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(q){q.callback=null},n.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):w=0<q?Math.floor(1e3/q):5},n.unstable_getCurrentPriorityLevel=function(){return _},n.unstable_next=function(q){switch(_){case 1:case 2:case 3:var ce=3;break;default:ce=_}var me=_;_=ce;try{return q()}finally{_=me}},n.unstable_requestPaint=function(){O=!0},n.unstable_runWithPriority=function(q,ce){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var me=_;_=q;try{return ce()}finally{_=me}},n.unstable_scheduleCallback=function(q,ce,me){var Te=n.unstable_now();switch(typeof me=="object"&&me!==null?(me=me.delay,me=typeof me=="number"&&0<me?Te+me:Te):me=Te,q){case 1:var Ue=-1;break;case 2:Ue=250;break;case 5:Ue=1073741823;break;case 4:Ue=1e4;break;default:Ue=5e3}return Ue=me+Ue,q={id:p++,callback:ce,priorityLevel:q,startTime:me,expirationTime:Ue,sortIndex:-1},me>Te?(q.sortIndex=me,e(h,q),t(u)===null&&q===t(h)&&(S?(R(D),D=-1):S=!0,Ie(U,me-Te))):(q.sortIndex=Ue,e(u,q),A||E||(A=!0,G||(G=!0,V()))),q},n.unstable_shouldYield=M,n.unstable_wrapCallback=function(q){var ce=_;return function(){var me=_;_=ce;try{return q.apply(this,arguments)}finally{_=me}}}})(mm)),mm}var gE;function C4(){return gE||(gE=1,pm.exports=S4()),pm.exports}var gm={exports:{}},tr={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vE;function T4(){if(vE)return tr;vE=1;var n=gv();function e(u){var h="https://react.dev/errors/"+u;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)h+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+u+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var r={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},i=Symbol.for("react.portal");function a(u,h,p){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:g==null?null:""+g,children:u,containerInfo:h,implementation:p}}var o=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(u,h){if(u==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return tr.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,tr.createPortal=function(u,h){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(e(299));return a(u,h,null,p)},tr.flushSync=function(u){var h=o.T,p=r.p;try{if(o.T=null,r.p=2,u)return u()}finally{o.T=h,r.p=p,r.d.f()}},tr.preconnect=function(u,h){typeof u=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,r.d.C(u,h))},tr.prefetchDNS=function(u){typeof u=="string"&&r.d.D(u)},tr.preinit=function(u,h){if(typeof u=="string"&&h&&typeof h.as=="string"){var p=h.as,g=c(p,h.crossOrigin),_=typeof h.integrity=="string"?h.integrity:void 0,E=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;p==="style"?r.d.S(u,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:g,integrity:_,fetchPriority:E}):p==="script"&&r.d.X(u,{crossOrigin:g,integrity:_,fetchPriority:E,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},tr.preinitModule=function(u,h){if(typeof u=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var p=c(h.as,h.crossOrigin);r.d.M(u,{crossOrigin:p,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&r.d.M(u)},tr.preload=function(u,h){if(typeof u=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var p=h.as,g=c(p,h.crossOrigin);r.d.L(u,p,{crossOrigin:g,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},tr.preloadModule=function(u,h){if(typeof u=="string")if(h){var p=c(h.as,h.crossOrigin);r.d.m(u,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:p,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else r.d.m(u)},tr.requestFormReset=function(u){r.d.r(u)},tr.unstable_batchedUpdates=function(u,h){return u(h)},tr.useFormState=function(u,h,p){return o.H.useFormState(u,h,p)},tr.useFormStatus=function(){return o.H.useHostTransitionStatus()},tr.version="19.2.0",tr}var yE;function I4(){if(yE)return gm.exports;yE=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),gm.exports=T4(),gm.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _E;function N4(){if(_E)return Uu;_E=1;var n=C4(),e=gv(),t=I4();function r(s){var l="https://react.dev/errors/"+s;if(1<arguments.length){l+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)l+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+s+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function a(s){var l=s,f=s;if(s.alternate)for(;l.return;)l=l.return;else{s=l;do l=s,(l.flags&4098)!==0&&(f=l.return),s=l.return;while(s)}return l.tag===3?f:null}function o(s){if(s.tag===13){var l=s.memoizedState;if(l===null&&(s=s.alternate,s!==null&&(l=s.memoizedState)),l!==null)return l.dehydrated}return null}function c(s){if(s.tag===31){var l=s.memoizedState;if(l===null&&(s=s.alternate,s!==null&&(l=s.memoizedState)),l!==null)return l.dehydrated}return null}function u(s){if(a(s)!==s)throw Error(r(188))}function h(s){var l=s.alternate;if(!l){if(l=a(s),l===null)throw Error(r(188));return l!==s?null:s}for(var f=s,d=l;;){var y=f.return;if(y===null)break;var x=y.alternate;if(x===null){if(d=y.return,d!==null){f=d;continue}break}if(y.child===x.child){for(x=y.child;x;){if(x===f)return u(y),s;if(x===d)return u(y),l;x=x.sibling}throw Error(r(188))}if(f.return!==d.return)f=y,d=x;else{for(var C=!1,B=y.child;B;){if(B===f){C=!0,f=y,d=x;break}if(B===d){C=!0,d=y,f=x;break}B=B.sibling}if(!C){for(B=x.child;B;){if(B===f){C=!0,f=x,d=y;break}if(B===d){C=!0,d=x,f=y;break}B=B.sibling}if(!C)throw Error(r(189))}}if(f.alternate!==d)throw Error(r(190))}if(f.tag!==3)throw Error(r(188));return f.stateNode.current===f?s:l}function p(s){var l=s.tag;if(l===5||l===26||l===27||l===6)return s;for(s=s.child;s!==null;){if(l=p(s),l!==null)return l;s=s.sibling}return null}var g=Object.assign,_=Symbol.for("react.element"),E=Symbol.for("react.transitional.element"),A=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),O=Symbol.for("react.strict_mode"),T=Symbol.for("react.profiler"),R=Symbol.for("react.consumer"),L=Symbol.for("react.context"),z=Symbol.for("react.forward_ref"),U=Symbol.for("react.suspense"),G=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),I=Symbol.for("react.activity"),M=Symbol.for("react.memo_cache_sentinel"),j=Symbol.iterator;function V(s){return s===null||typeof s!="object"?null:(s=j&&s[j]||s["@@iterator"],typeof s=="function"?s:null)}var k=Symbol.for("react.client.reference");function ee(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===k?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case S:return"Fragment";case T:return"Profiler";case O:return"StrictMode";case U:return"Suspense";case G:return"SuspenseList";case I:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case A:return"Portal";case L:return s.displayName||"Context";case R:return(s._context.displayName||"Context")+".Consumer";case z:var l=s.render;return s=s.displayName,s||(s=l.displayName||l.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case D:return l=s.displayName||null,l!==null?l:ee(s.type)||"Memo";case w:l=s._payload,s=s._init;try{return ee(s(l))}catch{}}return null}var Ie=Array.isArray,q=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ce=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,me={pending:!1,data:null,method:null,action:null},Te=[],Ue=-1;function X(s){return{current:s}}function se(s){0>Ue||(s.current=Te[Ue],Te[Ue]=null,Ue--)}function ve(s,l){Ue++,Te[Ue]=s.current,s.current=l}var Ee=X(null),ie=X(null),ge=X(null),pe=X(null);function be(s,l){switch(ve(ge,l),ve(ie,s),ve(Ee,null),l.nodeType){case 9:case 11:s=(s=l.documentElement)&&(s=s.namespaceURI)?Px(s):0;break;default:if(s=l.tagName,l=l.namespaceURI)l=Px(l),s=kx(l,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}se(Ee),ve(Ee,s)}function De(){se(Ee),se(ie),se(ge)}function rt(s){s.memoizedState!==null&&ve(pe,s);var l=Ee.current,f=kx(l,s.type);l!==f&&(ve(ie,s),ve(Ee,f))}function Gt(s){ie.current===s&&(se(Ee),se(ie)),pe.current===s&&(se(pe),Lu._currentValue=me)}var ot,Ot;function Bn(s){if(ot===void 0)try{throw Error()}catch(f){var l=f.stack.trim().match(/\n( *(at )?)/);ot=l&&l[1]||"",Ot=-1<f.stack.indexOf(`
    at`)?" (<anonymous>)":-1<f.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ot+s+Ot}var de=!1;function Ne(s,l){if(!s||de)return"";de=!0;var f=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var d={DetermineComponentFrameRoot:function(){try{if(l){var fe=function(){throw Error()};if(Object.defineProperty(fe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(fe,[])}catch(re){var te=re}Reflect.construct(s,[],fe)}else{try{fe.call()}catch(re){te=re}s.call(fe.prototype)}}else{try{throw Error()}catch(re){te=re}(fe=s())&&typeof fe.catch=="function"&&fe.catch(function(){})}}catch(re){if(re&&te&&typeof re.stack=="string")return[re.stack,te.stack]}return[null,null]}};d.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var y=Object.getOwnPropertyDescriptor(d.DetermineComponentFrameRoot,"name");y&&y.configurable&&Object.defineProperty(d.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var x=d.DetermineComponentFrameRoot(),C=x[0],B=x[1];if(C&&B){var $=C.split(`
`),J=B.split(`
`);for(y=d=0;d<$.length&&!$[d].includes("DetermineComponentFrameRoot");)d++;for(;y<J.length&&!J[y].includes("DetermineComponentFrameRoot");)y++;if(d===$.length||y===J.length)for(d=$.length-1,y=J.length-1;1<=d&&0<=y&&$[d]!==J[y];)y--;for(;1<=d&&0<=y;d--,y--)if($[d]!==J[y]){if(d!==1||y!==1)do if(d--,y--,0>y||$[d]!==J[y]){var oe=`
`+$[d].replace(" at new "," at ");return s.displayName&&oe.includes("<anonymous>")&&(oe=oe.replace("<anonymous>",s.displayName)),oe}while(1<=d&&0<=y);break}}}finally{de=!1,Error.prepareStackTrace=f}return(f=s?s.displayName||s.name:"")?Bn(f):""}function Ye(s,l){switch(s.tag){case 26:case 27:case 5:return Bn(s.type);case 16:return Bn("Lazy");case 13:return s.child!==l&&l!==null?Bn("Suspense Fallback"):Bn("Suspense");case 19:return Bn("SuspenseList");case 0:case 15:return Ne(s.type,!1);case 11:return Ne(s.type.render,!1);case 1:return Ne(s.type,!0);case 31:return Bn("Activity");default:return""}}function Kt(s){try{var l="",f=null;do l+=Ye(s,f),f=s,s=s.return;while(s);return l}catch(d){return`
Error generating stack: `+d.message+`
`+d.stack}}var gt=Object.prototype.hasOwnProperty,bt=n.unstable_scheduleCallback,Vn=n.unstable_cancelCallback,Wa=n.unstable_shouldYield,zr=n.unstable_requestPaint,on=n.unstable_now,Mt=n.unstable_getCurrentPriorityLevel,Ir=n.unstable_ImmediatePriority,lo=n.unstable_UserBlockingPriority,Li=n.unstable_NormalPriority,Fc=n.unstable_LowPriority,qe=n.unstable_IdlePriority,qt=n.log,pr=n.unstable_setDisableYieldValue,ui=null,Fn=null;function Hr(s){if(typeof qt=="function"&&pr(s),Fn&&typeof Fn.setStrictMode=="function")try{Fn.setStrictMode(ui,s)}catch{}}var Jt=Math.clz32?Math.clz32:Xf,$f=Math.log,sl=Math.LN2;function Xf(s){return s>>>=0,s===0?32:31-($f(s)/sl|0)|0}var ji=256,co=262144,ln=4194304;function Bi(s){var l=s&42;if(l!==0)return l;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return s&261888;case 262144:case 524288:case 1048576:case 2097152:return s&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function Vi(s,l,f){var d=s.pendingLanes;if(d===0)return 0;var y=0,x=s.suspendedLanes,C=s.pingedLanes;s=s.warmLanes;var B=d&134217727;return B!==0?(d=B&~x,d!==0?y=Bi(d):(C&=B,C!==0?y=Bi(C):f||(f=B&~s,f!==0&&(y=Bi(f))))):(B=d&~x,B!==0?y=Bi(B):C!==0?y=Bi(C):f||(f=d&~s,f!==0&&(y=Bi(f)))),y===0?0:l!==0&&l!==y&&(l&x)===0&&(x=y&-y,f=l&-l,x>=f||x===32&&(f&4194048)!==0)?l:y}function fi(s,l){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&l)===0}function m1(s,l){switch(s){case 1:case 2:case 4:case 8:case 64:return l+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Yf(){var s=ln;return ln<<=1,(ln&62914560)===0&&(ln=4194304),s}function Fi(s){for(var l=[],f=0;31>f;f++)l.push(s);return l}function uo(s,l){s.pendingLanes|=l,l!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function g1(s,l,f,d,y,x){var C=s.pendingLanes;s.pendingLanes=f,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=f,s.entangledLanes&=f,s.errorRecoveryDisabledLanes&=f,s.shellSuspendCounter=0;var B=s.entanglements,$=s.expirationTimes,J=s.hiddenUpdates;for(f=C&~f;0<f;){var oe=31-Jt(f),fe=1<<oe;B[oe]=0,$[oe]=-1;var te=J[oe];if(te!==null)for(J[oe]=null,oe=0;oe<te.length;oe++){var re=te[oe];re!==null&&(re.lane&=-536870913)}f&=~fe}d!==0&&fo(s,d,0),x!==0&&y===0&&s.tag!==0&&(s.suspendedLanes|=x&~(C&~l))}function fo(s,l,f){s.pendingLanes|=l,s.suspendedLanes&=~l;var d=31-Jt(l);s.entangledLanes|=l,s.entanglements[d]=s.entanglements[d]|1073741824|f&261930}function Uc(s,l){var f=s.entangledLanes|=l;for(s=s.entanglements;f;){var d=31-Jt(f),y=1<<d;y&l|s[d]&l&&(s[d]|=l),f&=~y}}function zc(s,l){var f=l&-l;return f=(f&42)!==0?1:ho(f),(f&(s.suspendedLanes|l))!==0?0:f}function ho(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function va(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function Kf(){var s=ce.p;return s!==0?s:(s=window.event,s===void 0?32:iE(s.type))}function hi(s,l){var f=ce.p;try{return ce.p=s,l()}finally{ce.p=f}}var di=Math.random().toString(36).slice(2),cn="__reactFiber$"+di,Nn="__reactProps$"+di,Ui="__reactContainer$"+di,ol="__reactEvents$"+di,v1="__reactListeners$"+di,Wf="__reactHandles$"+di,Qf="__reactResources$"+di,zi="__reactMarker$"+di;function ll(s){delete s[cn],delete s[Nn],delete s[ol],delete s[v1],delete s[Wf]}function Hi(s){var l=s[cn];if(l)return l;for(var f=s.parentNode;f;){if(l=f[Ui]||f[cn]){if(f=l.alternate,l.child!==null||f!==null&&f.child!==null)for(s=zx(s);s!==null;){if(f=s[cn])return f;s=zx(s)}return l}s=f,f=s.parentNode}return null}function Gr(s){if(s=s[cn]||s[Ui]){var l=s.tag;if(l===5||l===6||l===13||l===31||l===26||l===27||l===3)return s}return null}function Nr(s){var l=s.tag;if(l===5||l===26||l===27||l===6)return s.stateNode;throw Error(r(33))}function Gi(s){var l=s[Qf];return l||(l=s[Qf]={hoistableStyles:new Map,hoistableScripts:new Map}),l}function un(s){s[zi]=!0}var Hc=new Set,Gc={};function qi(s,l){$i(s,l),$i(s+"Capture",l)}function $i(s,l){for(Gc[s]=l,s=0;s<l.length;s++)Hc.add(l[s])}var qc=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),$c={},Xc={};function Zf(s){return gt.call(Xc,s)?!0:gt.call($c,s)?!1:qc.test(s)?Xc[s]=!0:($c[s]=!0,!1)}function cl(s,l,f){if(Zf(l))if(f===null)s.removeAttribute(l);else{switch(typeof f){case"undefined":case"function":case"symbol":s.removeAttribute(l);return;case"boolean":var d=l.toLowerCase().slice(0,5);if(d!=="data-"&&d!=="aria-"){s.removeAttribute(l);return}}s.setAttribute(l,""+f)}}function Rr(s,l,f){if(f===null)s.removeAttribute(l);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(l);return}s.setAttribute(l,""+f)}}function fn(s,l,f,d){if(d===null)s.removeAttribute(f);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(f);return}s.setAttributeNS(l,f,""+d)}}function Rn(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function Qa(s){var l=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function Yc(s,l,f){var d=Object.getOwnPropertyDescriptor(s.constructor.prototype,l);if(!s.hasOwnProperty(l)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var y=d.get,x=d.set;return Object.defineProperty(s,l,{configurable:!0,get:function(){return y.call(this)},set:function(C){f=""+C,x.call(this,C)}}),Object.defineProperty(s,l,{enumerable:d.enumerable}),{getValue:function(){return f},setValue:function(C){f=""+C},stopTracking:function(){s._valueTracker=null,delete s[l]}}}}function yt(s){if(!s._valueTracker){var l=Qa(s)?"checked":"value";s._valueTracker=Yc(s,l,""+s[l])}}function po(s){if(!s)return!1;var l=s._valueTracker;if(!l)return!0;var f=l.getValue(),d="";return s&&(d=Qa(s)?s.checked?"true":"false":s.value),s=d,s!==f?(l.setValue(s),!0):!1}function Xi(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var mo=/[\n"\\]/g;function mr(s){return s.replace(mo,function(l){return"\\"+l.charCodeAt(0).toString(16)+" "})}function ul(s,l,f,d,y,x,C,B){s.name="",C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?s.type=C:s.removeAttribute("type"),l!=null?C==="number"?(l===0&&s.value===""||s.value!=l)&&(s.value=""+Rn(l)):s.value!==""+Rn(l)&&(s.value=""+Rn(l)):C!=="submit"&&C!=="reset"||s.removeAttribute("value"),l!=null?Kc(s,C,Rn(l)):f!=null?Kc(s,C,Rn(f)):d!=null&&s.removeAttribute("value"),y==null&&x!=null&&(s.defaultChecked=!!x),y!=null&&(s.checked=y&&typeof y!="function"&&typeof y!="symbol"),B!=null&&typeof B!="function"&&typeof B!="symbol"&&typeof B!="boolean"?s.name=""+Rn(B):s.removeAttribute("name")}function Jf(s,l,f,d,y,x,C,B){if(x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"&&(s.type=x),l!=null||f!=null){if(!(x!=="submit"&&x!=="reset"||l!=null)){yt(s);return}f=f!=null?""+Rn(f):"",l=l!=null?""+Rn(l):f,B||l===s.value||(s.value=l),s.defaultValue=l}d=d??y,d=typeof d!="function"&&typeof d!="symbol"&&!!d,s.checked=B?s.checked:!!d,s.defaultChecked=!!d,C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"&&(s.name=C),yt(s)}function Kc(s,l,f){l==="number"&&Xi(s.ownerDocument)===s||s.defaultValue===""+f||(s.defaultValue=""+f)}function Za(s,l,f,d){if(s=s.options,l){l={};for(var y=0;y<f.length;y++)l["$"+f[y]]=!0;for(f=0;f<s.length;f++)y=l.hasOwnProperty("$"+s[f].value),s[f].selected!==y&&(s[f].selected=y),y&&d&&(s[f].defaultSelected=!0)}else{for(f=""+Rn(f),l=null,y=0;y<s.length;y++){if(s[y].value===f){s[y].selected=!0,d&&(s[y].defaultSelected=!0);return}l!==null||s[y].disabled||(l=s[y])}l!==null&&(l.selected=!0)}}function eh(s,l,f){if(l!=null&&(l=""+Rn(l),l!==s.value&&(s.value=l),f==null)){s.defaultValue!==l&&(s.defaultValue=l);return}s.defaultValue=f!=null?""+Rn(f):""}function Ja(s,l,f,d){if(l==null){if(d!=null){if(f!=null)throw Error(r(92));if(Ie(d)){if(1<d.length)throw Error(r(93));d=d[0]}f=d}f==null&&(f=""),l=f}f=Rn(l),s.defaultValue=f,d=s.textContent,d===f&&d!==""&&d!==null&&(s.value=d),yt(s)}function gr(s,l){if(l){var f=s.firstChild;if(f&&f===s.lastChild&&f.nodeType===3){f.nodeValue=l;return}}s.textContent=l}var th=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Wc(s,l,f){var d=l.indexOf("--")===0;f==null||typeof f=="boolean"||f===""?d?s.setProperty(l,""):l==="float"?s.cssFloat="":s[l]="":d?s.setProperty(l,f):typeof f!="number"||f===0||th.has(l)?l==="float"?s.cssFloat=f:s[l]=(""+f).trim():s[l]=f+"px"}function Qc(s,l,f){if(l!=null&&typeof l!="object")throw Error(r(62));if(s=s.style,f!=null){for(var d in f)!f.hasOwnProperty(d)||l!=null&&l.hasOwnProperty(d)||(d.indexOf("--")===0?s.setProperty(d,""):d==="float"?s.cssFloat="":s[d]="");for(var y in l)d=l[y],l.hasOwnProperty(y)&&f[y]!==d&&Wc(s,y,d)}else for(var x in l)l.hasOwnProperty(x)&&Wc(s,x,l[x])}function fl(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var nh=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),es=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function hl(s){return es.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}function pi(){}var Zc=null;function qr(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var ts=null,Yi=null;function go(s){var l=Gr(s);if(l&&(s=l.stateNode)){var f=s[Nn]||null;e:switch(s=l.stateNode,l.type){case"input":if(ul(s,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name),l=f.name,f.type==="radio"&&l!=null){for(f=s;f.parentNode;)f=f.parentNode;for(f=f.querySelectorAll('input[name="'+mr(""+l)+'"][type="radio"]'),l=0;l<f.length;l++){var d=f[l];if(d!==s&&d.form===s.form){var y=d[Nn]||null;if(!y)throw Error(r(90));ul(d,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name)}}for(l=0;l<f.length;l++)d=f[l],d.form===s.form&&po(d)}break e;case"textarea":eh(s,f.value,f.defaultValue);break e;case"select":l=f.value,l!=null&&Za(s,!!f.multiple,l,!1)}}}var dl=!1;function ns(s,l,f){if(dl)return s(l,f);dl=!0;try{var d=s(l);return d}finally{if(dl=!1,(ts!==null||Yi!==null)&&(Kh(),ts&&(l=ts,s=Yi,Yi=ts=null,go(l),s)))for(l=0;l<s.length;l++)go(s[l])}}function mi(s,l){var f=s.stateNode;if(f===null)return null;var d=f[Nn]||null;if(d===null)return null;f=d[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(s=s.type,d=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!d;break e;default:s=!1}if(s)return null;if(f&&typeof f!="function")throw Error(r(231,l,typeof f));return f}var $r=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),vo=!1;if($r)try{var St={};Object.defineProperty(St,"passive",{get:function(){vo=!0}}),window.addEventListener("test",St,St),window.removeEventListener("test",St,St)}catch{vo=!1}var Ki=null,Jc=null,yo=null;function eu(){if(yo)return yo;var s,l=Jc,f=l.length,d,y="value"in Ki?Ki.value:Ki.textContent,x=y.length;for(s=0;s<f&&l[s]===y[s];s++);var C=f-s;for(d=1;d<=C&&l[f-d]===y[x-d];d++);return yo=y.slice(s,1<d?1-d:void 0)}function _o(s){var l=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&l===13&&(s=13)):s=l,s===10&&(s=13),32<=s||s===13?s:0}function ya(){return!0}function gi(){return!1}function Un(s){function l(f,d,y,x,C){this._reactName=f,this._targetInst=y,this.type=d,this.nativeEvent=x,this.target=C,this.currentTarget=null;for(var B in s)s.hasOwnProperty(B)&&(f=s[B],this[B]=f?f(x):x[B]);return this.isDefaultPrevented=(x.defaultPrevented!=null?x.defaultPrevented:x.returnValue===!1)?ya:gi,this.isPropagationStopped=gi,this}return g(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var f=this.nativeEvent;f&&(f.preventDefault?f.preventDefault():typeof f.returnValue!="unknown"&&(f.returnValue=!1),this.isDefaultPrevented=ya)},stopPropagation:function(){var f=this.nativeEvent;f&&(f.stopPropagation?f.stopPropagation():typeof f.cancelBubble!="unknown"&&(f.cancelBubble=!0),this.isPropagationStopped=ya)},persist:function(){},isPersistent:ya}),l}var _a={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Wi=Un(_a),rs=g({},_a,{view:0,detail:0}),tu=Un(rs),is,pl,Qi,ml=g({},rs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:as,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==Qi&&(Qi&&s.type==="mousemove"?(is=s.screenX-Qi.screenX,pl=s.screenY-Qi.screenY):pl=is=0,Qi=s),is)},movementY:function(s){return"movementY"in s?s.movementY:pl}}),nu=Un(ml),xo=g({},ml,{dataTransfer:0}),rh=Un(xo),ih=g({},rs,{relatedTarget:0}),Eo=Un(ih),ru=g({},_a,{animationName:0,elapsedTime:0,pseudoElement:0}),ah=Un(ru),gl=g({},_a,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),sh=Un(gl),oh=g({},_a,{data:0}),Zi=Un(oh),lh={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ch={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},uh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function fh(s){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(s):(s=uh[s])?!!l[s]:!1}function as(){return fh}var or=g({},rs,{key:function(s){if(s.key){var l=lh[s.key]||s.key;if(l!=="Unidentified")return l}return s.type==="keypress"?(s=_o(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?ch[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:as,charCode:function(s){return s.type==="keypress"?_o(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?_o(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),hh=Un(or),dh=g({},ml,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),xa=Un(dh),v=g({},rs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:as}),b=Un(v),N=g({},_a,{propertyName:0,elapsedTime:0,pseudoElement:0}),F=Un(N),W=g({},ml,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),ne=Un(W),_e=g({},_a,{newState:0,oldState:0}),ze=Un(_e),en=[9,13,27,32],ht=$r&&"CompositionEvent"in window,Ft=null;$r&&"documentMode"in document&&(Ft=document.documentMode);var Xr=$r&&"TextEvent"in window&&!Ft,Ji=$r&&(!ht||Ft&&8<Ft&&11>=Ft),vi=" ",yi=!1;function wo(s,l){switch(s){case"keyup":return en.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function vl(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var yl=!1;function q3(s,l){switch(s){case"compositionend":return vl(l);case"keypress":return l.which!==32?null:(yi=!0,vi);case"textInput":return s=l.data,s===vi&&yi?null:s;default:return null}}function $3(s,l){if(yl)return s==="compositionend"||!ht&&wo(s,l)?(s=eu(),yo=Jc=Ki=null,yl=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return Ji&&l.locale!=="ko"?null:l.data;default:return null}}var X3={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function qy(s){var l=s&&s.nodeName&&s.nodeName.toLowerCase();return l==="input"?!!X3[s.type]:l==="textarea"}function $y(s,l,f,d){ts?Yi?Yi.push(d):Yi=[d]:ts=d,l=nd(l,"onChange"),0<l.length&&(f=new Wi("onChange","change",null,f,d),s.push({event:f,listeners:l}))}var iu=null,au=null;function Y3(s){Ix(s,0)}function ph(s){var l=Nr(s);if(po(l))return s}function Xy(s,l){if(s==="change")return l}var Yy=!1;if($r){var y1;if($r){var _1="oninput"in document;if(!_1){var Ky=document.createElement("div");Ky.setAttribute("oninput","return;"),_1=typeof Ky.oninput=="function"}y1=_1}else y1=!1;Yy=y1&&(!document.documentMode||9<document.documentMode)}function Wy(){iu&&(iu.detachEvent("onpropertychange",Qy),au=iu=null)}function Qy(s){if(s.propertyName==="value"&&ph(au)){var l=[];$y(l,au,s,qr(s)),ns(Y3,l)}}function K3(s,l,f){s==="focusin"?(Wy(),iu=l,au=f,iu.attachEvent("onpropertychange",Qy)):s==="focusout"&&Wy()}function W3(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return ph(au)}function Q3(s,l){if(s==="click")return ph(l)}function Z3(s,l){if(s==="input"||s==="change")return ph(l)}function J3(s,l){return s===l&&(s!==0||1/s===1/l)||s!==s&&l!==l}var Or=typeof Object.is=="function"?Object.is:J3;function su(s,l){if(Or(s,l))return!0;if(typeof s!="object"||s===null||typeof l!="object"||l===null)return!1;var f=Object.keys(s),d=Object.keys(l);if(f.length!==d.length)return!1;for(d=0;d<f.length;d++){var y=f[d];if(!gt.call(l,y)||!Or(s[y],l[y]))return!1}return!0}function Zy(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function Jy(s,l){var f=Zy(s);s=0;for(var d;f;){if(f.nodeType===3){if(d=s+f.textContent.length,s<=l&&d>=l)return{node:f,offset:l-s};s=d}e:{for(;f;){if(f.nextSibling){f=f.nextSibling;break e}f=f.parentNode}f=void 0}f=Zy(f)}}function e2(s,l){return s&&l?s===l?!0:s&&s.nodeType===3?!1:l&&l.nodeType===3?e2(s,l.parentNode):"contains"in s?s.contains(l):s.compareDocumentPosition?!!(s.compareDocumentPosition(l)&16):!1:!1}function t2(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var l=Xi(s.document);l instanceof s.HTMLIFrameElement;){try{var f=typeof l.contentWindow.location.href=="string"}catch{f=!1}if(f)s=l.contentWindow;else break;l=Xi(s.document)}return l}function x1(s){var l=s&&s.nodeName&&s.nodeName.toLowerCase();return l&&(l==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||l==="textarea"||s.contentEditable==="true")}var eI=$r&&"documentMode"in document&&11>=document.documentMode,_l=null,E1=null,ou=null,w1=!1;function n2(s,l,f){var d=f.window===f?f.document:f.nodeType===9?f:f.ownerDocument;w1||_l==null||_l!==Xi(d)||(d=_l,"selectionStart"in d&&x1(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),ou&&su(ou,d)||(ou=d,d=nd(E1,"onSelect"),0<d.length&&(l=new Wi("onSelect","select",null,l,f),s.push({event:l,listeners:d}),l.target=_l)))}function Ao(s,l){var f={};return f[s.toLowerCase()]=l.toLowerCase(),f["Webkit"+s]="webkit"+l,f["Moz"+s]="moz"+l,f}var xl={animationend:Ao("Animation","AnimationEnd"),animationiteration:Ao("Animation","AnimationIteration"),animationstart:Ao("Animation","AnimationStart"),transitionrun:Ao("Transition","TransitionRun"),transitionstart:Ao("Transition","TransitionStart"),transitioncancel:Ao("Transition","TransitionCancel"),transitionend:Ao("Transition","TransitionEnd")},A1={},r2={};$r&&(r2=document.createElement("div").style,"AnimationEvent"in window||(delete xl.animationend.animation,delete xl.animationiteration.animation,delete xl.animationstart.animation),"TransitionEvent"in window||delete xl.transitionend.transition);function bo(s){if(A1[s])return A1[s];if(!xl[s])return s;var l=xl[s],f;for(f in l)if(l.hasOwnProperty(f)&&f in r2)return A1[s]=l[f];return s}var i2=bo("animationend"),a2=bo("animationiteration"),s2=bo("animationstart"),tI=bo("transitionrun"),nI=bo("transitionstart"),rI=bo("transitioncancel"),o2=bo("transitionend"),l2=new Map,b1="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");b1.push("scrollEnd");function _i(s,l){l2.set(s,l),qi(l,[s])}var mh=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var l=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(l))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)},Yr=[],El=0,S1=0;function gh(){for(var s=El,l=S1=El=0;l<s;){var f=Yr[l];Yr[l++]=null;var d=Yr[l];Yr[l++]=null;var y=Yr[l];Yr[l++]=null;var x=Yr[l];if(Yr[l++]=null,d!==null&&y!==null){var C=d.pending;C===null?y.next=y:(y.next=C.next,C.next=y),d.pending=y}x!==0&&c2(f,y,x)}}function vh(s,l,f,d){Yr[El++]=s,Yr[El++]=l,Yr[El++]=f,Yr[El++]=d,S1|=d,s.lanes|=d,s=s.alternate,s!==null&&(s.lanes|=d)}function C1(s,l,f,d){return vh(s,l,f,d),yh(s)}function So(s,l){return vh(s,null,null,l),yh(s)}function c2(s,l,f){s.lanes|=f;var d=s.alternate;d!==null&&(d.lanes|=f);for(var y=!1,x=s.return;x!==null;)x.childLanes|=f,d=x.alternate,d!==null&&(d.childLanes|=f),x.tag===22&&(s=x.stateNode,s===null||s._visibility&1||(y=!0)),s=x,x=x.return;return s.tag===3?(x=s.stateNode,y&&l!==null&&(y=31-Jt(f),s=x.hiddenUpdates,d=s[y],d===null?s[y]=[l]:d.push(l),l.lane=f|536870912),x):null}function yh(s){if(50<Nu)throw Nu=0,kp=null,Error(r(185));for(var l=s.return;l!==null;)s=l,l=s.return;return s.tag===3?s.stateNode:null}var wl={};function iI(s,l,f,d){this.tag=s,this.key=f,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Dr(s,l,f,d){return new iI(s,l,f,d)}function T1(s){return s=s.prototype,!(!s||!s.isReactComponent)}function Ea(s,l){var f=s.alternate;return f===null?(f=Dr(s.tag,l,s.key,s.mode),f.elementType=s.elementType,f.type=s.type,f.stateNode=s.stateNode,f.alternate=s,s.alternate=f):(f.pendingProps=l,f.type=s.type,f.flags=0,f.subtreeFlags=0,f.deletions=null),f.flags=s.flags&65011712,f.childLanes=s.childLanes,f.lanes=s.lanes,f.child=s.child,f.memoizedProps=s.memoizedProps,f.memoizedState=s.memoizedState,f.updateQueue=s.updateQueue,l=s.dependencies,f.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},f.sibling=s.sibling,f.index=s.index,f.ref=s.ref,f.refCleanup=s.refCleanup,f}function u2(s,l){s.flags&=65011714;var f=s.alternate;return f===null?(s.childLanes=0,s.lanes=l,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=f.childLanes,s.lanes=f.lanes,s.child=f.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=f.memoizedProps,s.memoizedState=f.memoizedState,s.updateQueue=f.updateQueue,s.type=f.type,l=f.dependencies,s.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext}),s}function _h(s,l,f,d,y,x){var C=0;if(d=s,typeof s=="function")T1(s)&&(C=1);else if(typeof s=="string")C=c4(s,f,Ee.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case I:return s=Dr(31,f,l,y),s.elementType=I,s.lanes=x,s;case S:return Co(f.children,y,x,l);case O:C=8,y|=24;break;case T:return s=Dr(12,f,l,y|2),s.elementType=T,s.lanes=x,s;case U:return s=Dr(13,f,l,y),s.elementType=U,s.lanes=x,s;case G:return s=Dr(19,f,l,y),s.elementType=G,s.lanes=x,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case L:C=10;break e;case R:C=9;break e;case z:C=11;break e;case D:C=14;break e;case w:C=16,d=null;break e}C=29,f=Error(r(130,s===null?"null":typeof s,"")),d=null}return l=Dr(C,f,l,y),l.elementType=s,l.type=d,l.lanes=x,l}function Co(s,l,f,d){return s=Dr(7,s,d,l),s.lanes=f,s}function I1(s,l,f){return s=Dr(6,s,null,l),s.lanes=f,s}function f2(s){var l=Dr(18,null,null,0);return l.stateNode=s,l}function N1(s,l,f){return l=Dr(4,s.children!==null?s.children:[],s.key,l),l.lanes=f,l.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},l}var h2=new WeakMap;function Kr(s,l){if(typeof s=="object"&&s!==null){var f=h2.get(s);return f!==void 0?f:(l={value:s,source:l,stack:Kt(l)},h2.set(s,l),l)}return{value:s,source:l,stack:Kt(l)}}var Al=[],bl=0,xh=null,lu=0,Wr=[],Qr=0,ss=null,ea=1,ta="";function wa(s,l){Al[bl++]=lu,Al[bl++]=xh,xh=s,lu=l}function d2(s,l,f){Wr[Qr++]=ea,Wr[Qr++]=ta,Wr[Qr++]=ss,ss=s;var d=ea;s=ta;var y=32-Jt(d)-1;d&=~(1<<y),f+=1;var x=32-Jt(l)+y;if(30<x){var C=y-y%5;x=(d&(1<<C)-1).toString(32),d>>=C,y-=C,ea=1<<32-Jt(l)+y|f<<y|d,ta=x+s}else ea=1<<x|f<<y|d,ta=s}function R1(s){s.return!==null&&(wa(s,1),d2(s,1,0))}function O1(s){for(;s===xh;)xh=Al[--bl],Al[bl]=null,lu=Al[--bl],Al[bl]=null;for(;s===ss;)ss=Wr[--Qr],Wr[Qr]=null,ta=Wr[--Qr],Wr[Qr]=null,ea=Wr[--Qr],Wr[Qr]=null}function p2(s,l){Wr[Qr++]=ea,Wr[Qr++]=ta,Wr[Qr++]=ss,ea=l.id,ta=l.overflow,ss=s}var zn=null,Lt=null,nt=!1,os=null,Zr=!1,D1=Error(r(519));function ls(s){var l=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw cu(Kr(l,s)),D1}function m2(s){var l=s.stateNode,f=s.type,d=s.memoizedProps;switch(l[cn]=s,l[Nn]=d,f){case"dialog":We("cancel",l),We("close",l);break;case"iframe":case"object":case"embed":We("load",l);break;case"video":case"audio":for(f=0;f<Ou.length;f++)We(Ou[f],l);break;case"source":We("error",l);break;case"img":case"image":case"link":We("error",l),We("load",l);break;case"details":We("toggle",l);break;case"input":We("invalid",l),Jf(l,d.value,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name,!0);break;case"select":We("invalid",l);break;case"textarea":We("invalid",l),Ja(l,d.value,d.defaultValue,d.children)}f=d.children,typeof f!="string"&&typeof f!="number"&&typeof f!="bigint"||l.textContent===""+f||d.suppressHydrationWarning===!0||Dx(l.textContent,f)?(d.popover!=null&&(We("beforetoggle",l),We("toggle",l)),d.onScroll!=null&&We("scroll",l),d.onScrollEnd!=null&&We("scrollend",l),d.onClick!=null&&(l.onclick=pi),l=!0):l=!1,l||ls(s,!0)}function g2(s){for(zn=s.return;zn;)switch(zn.tag){case 5:case 31:case 13:Zr=!1;return;case 27:case 3:Zr=!0;return;default:zn=zn.return}}function Sl(s){if(s!==zn)return!1;if(!nt)return g2(s),nt=!0,!1;var l=s.tag,f;if((f=l!==3&&l!==27)&&((f=l===5)&&(f=s.type,f=!(f!=="form"&&f!=="button")||Wp(s.type,s.memoizedProps)),f=!f),f&&Lt&&ls(s),g2(s),l===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(317));Lt=Ux(s)}else if(l===31){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(317));Lt=Ux(s)}else l===27?(l=Lt,ws(s.type)?(s=tm,tm=null,Lt=s):Lt=l):Lt=zn?ei(s.stateNode.nextSibling):null;return!0}function To(){Lt=zn=null,nt=!1}function M1(){var s=os;return s!==null&&(xr===null?xr=s:xr.push.apply(xr,s),os=null),s}function cu(s){os===null?os=[s]:os.push(s)}var P1=X(null),Io=null,Aa=null;function cs(s,l,f){ve(P1,l._currentValue),l._currentValue=f}function ba(s){s._currentValue=P1.current,se(P1)}function k1(s,l,f){for(;s!==null;){var d=s.alternate;if((s.childLanes&l)!==l?(s.childLanes|=l,d!==null&&(d.childLanes|=l)):d!==null&&(d.childLanes&l)!==l&&(d.childLanes|=l),s===f)break;s=s.return}}function L1(s,l,f,d){var y=s.child;for(y!==null&&(y.return=s);y!==null;){var x=y.dependencies;if(x!==null){var C=y.child;x=x.firstContext;e:for(;x!==null;){var B=x;x=y;for(var $=0;$<l.length;$++)if(B.context===l[$]){x.lanes|=f,B=x.alternate,B!==null&&(B.lanes|=f),k1(x.return,f,s),d||(C=null);break e}x=B.next}}else if(y.tag===18){if(C=y.return,C===null)throw Error(r(341));C.lanes|=f,x=C.alternate,x!==null&&(x.lanes|=f),k1(C,f,s),C=null}else C=y.child;if(C!==null)C.return=y;else for(C=y;C!==null;){if(C===s){C=null;break}if(y=C.sibling,y!==null){y.return=C.return,C=y;break}C=C.return}y=C}}function Cl(s,l,f,d){s=null;for(var y=l,x=!1;y!==null;){if(!x){if((y.flags&524288)!==0)x=!0;else if((y.flags&262144)!==0)break}if(y.tag===10){var C=y.alternate;if(C===null)throw Error(r(387));if(C=C.memoizedProps,C!==null){var B=y.type;Or(y.pendingProps.value,C.value)||(s!==null?s.push(B):s=[B])}}else if(y===pe.current){if(C=y.alternate,C===null)throw Error(r(387));C.memoizedState.memoizedState!==y.memoizedState.memoizedState&&(s!==null?s.push(Lu):s=[Lu])}y=y.return}s!==null&&L1(l,s,f,d),l.flags|=262144}function Eh(s){for(s=s.firstContext;s!==null;){if(!Or(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function No(s){Io=s,Aa=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function Hn(s){return v2(Io,s)}function wh(s,l){return Io===null&&No(s),v2(s,l)}function v2(s,l){var f=l._currentValue;if(l={context:l,memoizedValue:f,next:null},Aa===null){if(s===null)throw Error(r(308));Aa=l,s.dependencies={lanes:0,firstContext:l},s.flags|=524288}else Aa=Aa.next=l;return f}var aI=typeof AbortController<"u"?AbortController:function(){var s=[],l=this.signal={aborted:!1,addEventListener:function(f,d){s.push(d)}};this.abort=function(){l.aborted=!0,s.forEach(function(f){return f()})}},sI=n.unstable_scheduleCallback,oI=n.unstable_NormalPriority,hn={$$typeof:L,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function j1(){return{controller:new aI,data:new Map,refCount:0}}function uu(s){s.refCount--,s.refCount===0&&sI(oI,function(){s.controller.abort()})}var fu=null,B1=0,Tl=0,Il=null;function lI(s,l){if(fu===null){var f=fu=[];B1=0,Tl=Up(),Il={status:"pending",value:void 0,then:function(d){f.push(d)}}}return B1++,l.then(y2,y2),l}function y2(){if(--B1===0&&fu!==null){Il!==null&&(Il.status="fulfilled");var s=fu;fu=null,Tl=0,Il=null;for(var l=0;l<s.length;l++)(0,s[l])()}}function cI(s,l){var f=[],d={status:"pending",value:null,reason:null,then:function(y){f.push(y)}};return s.then(function(){d.status="fulfilled",d.value=l;for(var y=0;y<f.length;y++)(0,f[y])(l)},function(y){for(d.status="rejected",d.reason=y,y=0;y<f.length;y++)(0,f[y])(void 0)}),d}var _2=q.S;q.S=function(s,l){nx=on(),typeof l=="object"&&l!==null&&typeof l.then=="function"&&lI(s,l),_2!==null&&_2(s,l)};var Ro=X(null);function V1(){var s=Ro.current;return s!==null?s:Dt.pooledCache}function Ah(s,l){l===null?ve(Ro,Ro.current):ve(Ro,l.pool)}function x2(){var s=V1();return s===null?null:{parent:hn._currentValue,pool:s}}var Nl=Error(r(460)),F1=Error(r(474)),bh=Error(r(542)),Sh={then:function(){}};function E2(s){return s=s.status,s==="fulfilled"||s==="rejected"}function w2(s,l,f){switch(f=s[f],f===void 0?s.push(l):f!==l&&(l.then(pi,pi),l=f),l.status){case"fulfilled":return l.value;case"rejected":throw s=l.reason,b2(s),s;default:if(typeof l.status=="string")l.then(pi,pi);else{if(s=Dt,s!==null&&100<s.shellSuspendCounter)throw Error(r(482));s=l,s.status="pending",s.then(function(d){if(l.status==="pending"){var y=l;y.status="fulfilled",y.value=d}},function(d){if(l.status==="pending"){var y=l;y.status="rejected",y.reason=d}})}switch(l.status){case"fulfilled":return l.value;case"rejected":throw s=l.reason,b2(s),s}throw Do=l,Nl}}function Oo(s){try{var l=s._init;return l(s._payload)}catch(f){throw f!==null&&typeof f=="object"&&typeof f.then=="function"?(Do=f,Nl):f}}var Do=null;function A2(){if(Do===null)throw Error(r(459));var s=Do;return Do=null,s}function b2(s){if(s===Nl||s===bh)throw Error(r(483))}var Rl=null,hu=0;function Ch(s){var l=hu;return hu+=1,Rl===null&&(Rl=[]),w2(Rl,s,l)}function du(s,l){l=l.props.ref,s.ref=l!==void 0?l:null}function Th(s,l){throw l.$$typeof===_?Error(r(525)):(s=Object.prototype.toString.call(l),Error(r(31,s==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":s)))}function S2(s){function l(K,Y){if(s){var Z=K.deletions;Z===null?(K.deletions=[Y],K.flags|=16):Z.push(Y)}}function f(K,Y){if(!s)return null;for(;Y!==null;)l(K,Y),Y=Y.sibling;return null}function d(K){for(var Y=new Map;K!==null;)K.key!==null?Y.set(K.key,K):Y.set(K.index,K),K=K.sibling;return Y}function y(K,Y){return K=Ea(K,Y),K.index=0,K.sibling=null,K}function x(K,Y,Z){return K.index=Z,s?(Z=K.alternate,Z!==null?(Z=Z.index,Z<Y?(K.flags|=67108866,Y):Z):(K.flags|=67108866,Y)):(K.flags|=1048576,Y)}function C(K){return s&&K.alternate===null&&(K.flags|=67108866),K}function B(K,Y,Z,ue){return Y===null||Y.tag!==6?(Y=I1(Z,K.mode,ue),Y.return=K,Y):(Y=y(Y,Z),Y.return=K,Y)}function $(K,Y,Z,ue){var Oe=Z.type;return Oe===S?oe(K,Y,Z.props.children,ue,Z.key):Y!==null&&(Y.elementType===Oe||typeof Oe=="object"&&Oe!==null&&Oe.$$typeof===w&&Oo(Oe)===Y.type)?(Y=y(Y,Z.props),du(Y,Z),Y.return=K,Y):(Y=_h(Z.type,Z.key,Z.props,null,K.mode,ue),du(Y,Z),Y.return=K,Y)}function J(K,Y,Z,ue){return Y===null||Y.tag!==4||Y.stateNode.containerInfo!==Z.containerInfo||Y.stateNode.implementation!==Z.implementation?(Y=N1(Z,K.mode,ue),Y.return=K,Y):(Y=y(Y,Z.children||[]),Y.return=K,Y)}function oe(K,Y,Z,ue,Oe){return Y===null||Y.tag!==7?(Y=Co(Z,K.mode,ue,Oe),Y.return=K,Y):(Y=y(Y,Z),Y.return=K,Y)}function fe(K,Y,Z){if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return Y=I1(""+Y,K.mode,Z),Y.return=K,Y;if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case E:return Z=_h(Y.type,Y.key,Y.props,null,K.mode,Z),du(Z,Y),Z.return=K,Z;case A:return Y=N1(Y,K.mode,Z),Y.return=K,Y;case w:return Y=Oo(Y),fe(K,Y,Z)}if(Ie(Y)||V(Y))return Y=Co(Y,K.mode,Z,null),Y.return=K,Y;if(typeof Y.then=="function")return fe(K,Ch(Y),Z);if(Y.$$typeof===L)return fe(K,wh(K,Y),Z);Th(K,Y)}return null}function te(K,Y,Z,ue){var Oe=Y!==null?Y.key:null;if(typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint")return Oe!==null?null:B(K,Y,""+Z,ue);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case E:return Z.key===Oe?$(K,Y,Z,ue):null;case A:return Z.key===Oe?J(K,Y,Z,ue):null;case w:return Z=Oo(Z),te(K,Y,Z,ue)}if(Ie(Z)||V(Z))return Oe!==null?null:oe(K,Y,Z,ue,null);if(typeof Z.then=="function")return te(K,Y,Ch(Z),ue);if(Z.$$typeof===L)return te(K,Y,wh(K,Z),ue);Th(K,Z)}return null}function re(K,Y,Z,ue,Oe){if(typeof ue=="string"&&ue!==""||typeof ue=="number"||typeof ue=="bigint")return K=K.get(Z)||null,B(Y,K,""+ue,Oe);if(typeof ue=="object"&&ue!==null){switch(ue.$$typeof){case E:return K=K.get(ue.key===null?Z:ue.key)||null,$(Y,K,ue,Oe);case A:return K=K.get(ue.key===null?Z:ue.key)||null,J(Y,K,ue,Oe);case w:return ue=Oo(ue),re(K,Y,Z,ue,Oe)}if(Ie(ue)||V(ue))return K=K.get(Z)||null,oe(Y,K,ue,Oe,null);if(typeof ue.then=="function")return re(K,Y,Z,Ch(ue),Oe);if(ue.$$typeof===L)return re(K,Y,Z,wh(Y,ue),Oe);Th(Y,ue)}return null}function Ae(K,Y,Z,ue){for(var Oe=null,ct=null,Ce=Y,Ge=Y=0,Ze=null;Ce!==null&&Ge<Z.length;Ge++){Ce.index>Ge?(Ze=Ce,Ce=null):Ze=Ce.sibling;var ut=te(K,Ce,Z[Ge],ue);if(ut===null){Ce===null&&(Ce=Ze);break}s&&Ce&&ut.alternate===null&&l(K,Ce),Y=x(ut,Y,Ge),ct===null?Oe=ut:ct.sibling=ut,ct=ut,Ce=Ze}if(Ge===Z.length)return f(K,Ce),nt&&wa(K,Ge),Oe;if(Ce===null){for(;Ge<Z.length;Ge++)Ce=fe(K,Z[Ge],ue),Ce!==null&&(Y=x(Ce,Y,Ge),ct===null?Oe=Ce:ct.sibling=Ce,ct=Ce);return nt&&wa(K,Ge),Oe}for(Ce=d(Ce);Ge<Z.length;Ge++)Ze=re(Ce,K,Ge,Z[Ge],ue),Ze!==null&&(s&&Ze.alternate!==null&&Ce.delete(Ze.key===null?Ge:Ze.key),Y=x(Ze,Y,Ge),ct===null?Oe=Ze:ct.sibling=Ze,ct=Ze);return s&&Ce.forEach(function(Ts){return l(K,Ts)}),nt&&wa(K,Ge),Oe}function Le(K,Y,Z,ue){if(Z==null)throw Error(r(151));for(var Oe=null,ct=null,Ce=Y,Ge=Y=0,Ze=null,ut=Z.next();Ce!==null&&!ut.done;Ge++,ut=Z.next()){Ce.index>Ge?(Ze=Ce,Ce=null):Ze=Ce.sibling;var Ts=te(K,Ce,ut.value,ue);if(Ts===null){Ce===null&&(Ce=Ze);break}s&&Ce&&Ts.alternate===null&&l(K,Ce),Y=x(Ts,Y,Ge),ct===null?Oe=Ts:ct.sibling=Ts,ct=Ts,Ce=Ze}if(ut.done)return f(K,Ce),nt&&wa(K,Ge),Oe;if(Ce===null){for(;!ut.done;Ge++,ut=Z.next())ut=fe(K,ut.value,ue),ut!==null&&(Y=x(ut,Y,Ge),ct===null?Oe=ut:ct.sibling=ut,ct=ut);return nt&&wa(K,Ge),Oe}for(Ce=d(Ce);!ut.done;Ge++,ut=Z.next())ut=re(Ce,K,Ge,ut.value,ue),ut!==null&&(s&&ut.alternate!==null&&Ce.delete(ut.key===null?Ge:ut.key),Y=x(ut,Y,Ge),ct===null?Oe=ut:ct.sibling=ut,ct=ut);return s&&Ce.forEach(function(x4){return l(K,x4)}),nt&&wa(K,Ge),Oe}function It(K,Y,Z,ue){if(typeof Z=="object"&&Z!==null&&Z.type===S&&Z.key===null&&(Z=Z.props.children),typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case E:e:{for(var Oe=Z.key;Y!==null;){if(Y.key===Oe){if(Oe=Z.type,Oe===S){if(Y.tag===7){f(K,Y.sibling),ue=y(Y,Z.props.children),ue.return=K,K=ue;break e}}else if(Y.elementType===Oe||typeof Oe=="object"&&Oe!==null&&Oe.$$typeof===w&&Oo(Oe)===Y.type){f(K,Y.sibling),ue=y(Y,Z.props),du(ue,Z),ue.return=K,K=ue;break e}f(K,Y);break}else l(K,Y);Y=Y.sibling}Z.type===S?(ue=Co(Z.props.children,K.mode,ue,Z.key),ue.return=K,K=ue):(ue=_h(Z.type,Z.key,Z.props,null,K.mode,ue),du(ue,Z),ue.return=K,K=ue)}return C(K);case A:e:{for(Oe=Z.key;Y!==null;){if(Y.key===Oe)if(Y.tag===4&&Y.stateNode.containerInfo===Z.containerInfo&&Y.stateNode.implementation===Z.implementation){f(K,Y.sibling),ue=y(Y,Z.children||[]),ue.return=K,K=ue;break e}else{f(K,Y);break}else l(K,Y);Y=Y.sibling}ue=N1(Z,K.mode,ue),ue.return=K,K=ue}return C(K);case w:return Z=Oo(Z),It(K,Y,Z,ue)}if(Ie(Z))return Ae(K,Y,Z,ue);if(V(Z)){if(Oe=V(Z),typeof Oe!="function")throw Error(r(150));return Z=Oe.call(Z),Le(K,Y,Z,ue)}if(typeof Z.then=="function")return It(K,Y,Ch(Z),ue);if(Z.$$typeof===L)return It(K,Y,wh(K,Z),ue);Th(K,Z)}return typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint"?(Z=""+Z,Y!==null&&Y.tag===6?(f(K,Y.sibling),ue=y(Y,Z),ue.return=K,K=ue):(f(K,Y),ue=I1(Z,K.mode,ue),ue.return=K,K=ue),C(K)):f(K,Y)}return function(K,Y,Z,ue){try{hu=0;var Oe=It(K,Y,Z,ue);return Rl=null,Oe}catch(Ce){if(Ce===Nl||Ce===bh)throw Ce;var ct=Dr(29,Ce,null,K.mode);return ct.lanes=ue,ct.return=K,ct}finally{}}}var Mo=S2(!0),C2=S2(!1),us=!1;function U1(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function z1(s,l){s=s.updateQueue,l.updateQueue===s&&(l.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function fs(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function hs(s,l,f){var d=s.updateQueue;if(d===null)return null;if(d=d.shared,(dt&2)!==0){var y=d.pending;return y===null?l.next=l:(l.next=y.next,y.next=l),d.pending=l,l=yh(s),c2(s,null,f),l}return vh(s,d,l,f),yh(s)}function pu(s,l,f){if(l=l.updateQueue,l!==null&&(l=l.shared,(f&4194048)!==0)){var d=l.lanes;d&=s.pendingLanes,f|=d,l.lanes=f,Uc(s,f)}}function H1(s,l){var f=s.updateQueue,d=s.alternate;if(d!==null&&(d=d.updateQueue,f===d)){var y=null,x=null;if(f=f.firstBaseUpdate,f!==null){do{var C={lane:f.lane,tag:f.tag,payload:f.payload,callback:null,next:null};x===null?y=x=C:x=x.next=C,f=f.next}while(f!==null);x===null?y=x=l:x=x.next=l}else y=x=l;f={baseState:d.baseState,firstBaseUpdate:y,lastBaseUpdate:x,shared:d.shared,callbacks:d.callbacks},s.updateQueue=f;return}s=f.lastBaseUpdate,s===null?f.firstBaseUpdate=l:s.next=l,f.lastBaseUpdate=l}var G1=!1;function mu(){if(G1){var s=Il;if(s!==null)throw s}}function gu(s,l,f,d){G1=!1;var y=s.updateQueue;us=!1;var x=y.firstBaseUpdate,C=y.lastBaseUpdate,B=y.shared.pending;if(B!==null){y.shared.pending=null;var $=B,J=$.next;$.next=null,C===null?x=J:C.next=J,C=$;var oe=s.alternate;oe!==null&&(oe=oe.updateQueue,B=oe.lastBaseUpdate,B!==C&&(B===null?oe.firstBaseUpdate=J:B.next=J,oe.lastBaseUpdate=$))}if(x!==null){var fe=y.baseState;C=0,oe=J=$=null,B=x;do{var te=B.lane&-536870913,re=te!==B.lane;if(re?(Qe&te)===te:(d&te)===te){te!==0&&te===Tl&&(G1=!0),oe!==null&&(oe=oe.next={lane:0,tag:B.tag,payload:B.payload,callback:null,next:null});e:{var Ae=s,Le=B;te=l;var It=f;switch(Le.tag){case 1:if(Ae=Le.payload,typeof Ae=="function"){fe=Ae.call(It,fe,te);break e}fe=Ae;break e;case 3:Ae.flags=Ae.flags&-65537|128;case 0:if(Ae=Le.payload,te=typeof Ae=="function"?Ae.call(It,fe,te):Ae,te==null)break e;fe=g({},fe,te);break e;case 2:us=!0}}te=B.callback,te!==null&&(s.flags|=64,re&&(s.flags|=8192),re=y.callbacks,re===null?y.callbacks=[te]:re.push(te))}else re={lane:te,tag:B.tag,payload:B.payload,callback:B.callback,next:null},oe===null?(J=oe=re,$=fe):oe=oe.next=re,C|=te;if(B=B.next,B===null){if(B=y.shared.pending,B===null)break;re=B,B=re.next,re.next=null,y.lastBaseUpdate=re,y.shared.pending=null}}while(!0);oe===null&&($=fe),y.baseState=$,y.firstBaseUpdate=J,y.lastBaseUpdate=oe,x===null&&(y.shared.lanes=0),vs|=C,s.lanes=C,s.memoizedState=fe}}function T2(s,l){if(typeof s!="function")throw Error(r(191,s));s.call(l)}function I2(s,l){var f=s.callbacks;if(f!==null)for(s.callbacks=null,s=0;s<f.length;s++)T2(f[s],l)}var Ol=X(null),Ih=X(0);function N2(s,l){s=Ma,ve(Ih,s),ve(Ol,l),Ma=s|l.baseLanes}function q1(){ve(Ih,Ma),ve(Ol,Ol.current)}function $1(){Ma=Ih.current,se(Ol),se(Ih)}var Mr=X(null),Jr=null;function ds(s){var l=s.alternate;ve(tn,tn.current&1),ve(Mr,s),Jr===null&&(l===null||Ol.current!==null||l.memoizedState!==null)&&(Jr=s)}function X1(s){ve(tn,tn.current),ve(Mr,s),Jr===null&&(Jr=s)}function R2(s){s.tag===22?(ve(tn,tn.current),ve(Mr,s),Jr===null&&(Jr=s)):ps()}function ps(){ve(tn,tn.current),ve(Mr,Mr.current)}function Pr(s){se(Mr),Jr===s&&(Jr=null),se(tn)}var tn=X(0);function Nh(s){for(var l=s;l!==null;){if(l.tag===13){var f=l.memoizedState;if(f!==null&&(f=f.dehydrated,f===null||Jp(f)||em(f)))return l}else if(l.tag===19&&(l.memoizedProps.revealOrder==="forwards"||l.memoizedProps.revealOrder==="backwards"||l.memoizedProps.revealOrder==="unstable_legacy-backwards"||l.memoizedProps.revealOrder==="together")){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===s)break;for(;l.sibling===null;){if(l.return===null||l.return===s)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}var Sa=0,He=null,Ct=null,dn=null,Rh=!1,Dl=!1,Po=!1,Oh=0,vu=0,Ml=null,uI=0;function Wt(){throw Error(r(321))}function Y1(s,l){if(l===null)return!1;for(var f=0;f<l.length&&f<s.length;f++)if(!Or(s[f],l[f]))return!1;return!0}function K1(s,l,f,d,y,x){return Sa=x,He=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,q.H=s===null||s.memoizedState===null?d_:up,Po=!1,x=f(d,y),Po=!1,Dl&&(x=D2(l,f,d,y)),O2(s),x}function O2(s){q.H=xu;var l=Ct!==null&&Ct.next!==null;if(Sa=0,dn=Ct=He=null,Rh=!1,vu=0,Ml=null,l)throw Error(r(300));s===null||pn||(s=s.dependencies,s!==null&&Eh(s)&&(pn=!0))}function D2(s,l,f,d){He=s;var y=0;do{if(Dl&&(Ml=null),vu=0,Dl=!1,25<=y)throw Error(r(301));if(y+=1,dn=Ct=null,s.updateQueue!=null){var x=s.updateQueue;x.lastEffect=null,x.events=null,x.stores=null,x.memoCache!=null&&(x.memoCache.index=0)}q.H=p_,x=l(f,d)}while(Dl);return x}function fI(){var s=q.H,l=s.useState()[0];return l=typeof l.then=="function"?yu(l):l,s=s.useState()[0],(Ct!==null?Ct.memoizedState:null)!==s&&(He.flags|=1024),l}function W1(){var s=Oh!==0;return Oh=0,s}function Q1(s,l,f){l.updateQueue=s.updateQueue,l.flags&=-2053,s.lanes&=~f}function Z1(s){if(Rh){for(s=s.memoizedState;s!==null;){var l=s.queue;l!==null&&(l.pending=null),s=s.next}Rh=!1}Sa=0,dn=Ct=He=null,Dl=!1,vu=Oh=0,Ml=null}function lr(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return dn===null?He.memoizedState=dn=s:dn=dn.next=s,dn}function nn(){if(Ct===null){var s=He.alternate;s=s!==null?s.memoizedState:null}else s=Ct.next;var l=dn===null?He.memoizedState:dn.next;if(l!==null)dn=l,Ct=s;else{if(s===null)throw He.alternate===null?Error(r(467)):Error(r(310));Ct=s,s={memoizedState:Ct.memoizedState,baseState:Ct.baseState,baseQueue:Ct.baseQueue,queue:Ct.queue,next:null},dn===null?He.memoizedState=dn=s:dn=dn.next=s}return dn}function Dh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function yu(s){var l=vu;return vu+=1,Ml===null&&(Ml=[]),s=w2(Ml,s,l),l=He,(dn===null?l.memoizedState:dn.next)===null&&(l=l.alternate,q.H=l===null||l.memoizedState===null?d_:up),s}function Mh(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return yu(s);if(s.$$typeof===L)return Hn(s)}throw Error(r(438,String(s)))}function J1(s){var l=null,f=He.updateQueue;if(f!==null&&(l=f.memoCache),l==null){var d=He.alternate;d!==null&&(d=d.updateQueue,d!==null&&(d=d.memoCache,d!=null&&(l={data:d.data.map(function(y){return y.slice()}),index:0})))}if(l==null&&(l={data:[],index:0}),f===null&&(f=Dh(),He.updateQueue=f),f.memoCache=l,f=l.data[l.index],f===void 0)for(f=l.data[l.index]=Array(s),d=0;d<s;d++)f[d]=M;return l.index++,f}function Ca(s,l){return typeof l=="function"?l(s):l}function Ph(s){var l=nn();return ep(l,Ct,s)}function ep(s,l,f){var d=s.queue;if(d===null)throw Error(r(311));d.lastRenderedReducer=f;var y=s.baseQueue,x=d.pending;if(x!==null){if(y!==null){var C=y.next;y.next=x.next,x.next=C}l.baseQueue=y=x,d.pending=null}if(x=s.baseState,y===null)s.memoizedState=x;else{l=y.next;var B=C=null,$=null,J=l,oe=!1;do{var fe=J.lane&-536870913;if(fe!==J.lane?(Qe&fe)===fe:(Sa&fe)===fe){var te=J.revertLane;if(te===0)$!==null&&($=$.next={lane:0,revertLane:0,gesture:null,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null}),fe===Tl&&(oe=!0);else if((Sa&te)===te){J=J.next,te===Tl&&(oe=!0);continue}else fe={lane:0,revertLane:J.revertLane,gesture:null,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null},$===null?(B=$=fe,C=x):$=$.next=fe,He.lanes|=te,vs|=te;fe=J.action,Po&&f(x,fe),x=J.hasEagerState?J.eagerState:f(x,fe)}else te={lane:fe,revertLane:J.revertLane,gesture:J.gesture,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null},$===null?(B=$=te,C=x):$=$.next=te,He.lanes|=fe,vs|=fe;J=J.next}while(J!==null&&J!==l);if($===null?C=x:$.next=B,!Or(x,s.memoizedState)&&(pn=!0,oe&&(f=Il,f!==null)))throw f;s.memoizedState=x,s.baseState=C,s.baseQueue=$,d.lastRenderedState=x}return y===null&&(d.lanes=0),[s.memoizedState,d.dispatch]}function tp(s){var l=nn(),f=l.queue;if(f===null)throw Error(r(311));f.lastRenderedReducer=s;var d=f.dispatch,y=f.pending,x=l.memoizedState;if(y!==null){f.pending=null;var C=y=y.next;do x=s(x,C.action),C=C.next;while(C!==y);Or(x,l.memoizedState)||(pn=!0),l.memoizedState=x,l.baseQueue===null&&(l.baseState=x),f.lastRenderedState=x}return[x,d]}function M2(s,l,f){var d=He,y=nn(),x=nt;if(x){if(f===void 0)throw Error(r(407));f=f()}else f=l();var C=!Or((Ct||y).memoizedState,f);if(C&&(y.memoizedState=f,pn=!0),y=y.queue,ip(L2.bind(null,d,y,s),[s]),y.getSnapshot!==l||C||dn!==null&&dn.memoizedState.tag&1){if(d.flags|=2048,Pl(9,{destroy:void 0},k2.bind(null,d,y,f,l),null),Dt===null)throw Error(r(349));x||(Sa&127)!==0||P2(d,l,f)}return f}function P2(s,l,f){s.flags|=16384,s={getSnapshot:l,value:f},l=He.updateQueue,l===null?(l=Dh(),He.updateQueue=l,l.stores=[s]):(f=l.stores,f===null?l.stores=[s]:f.push(s))}function k2(s,l,f,d){l.value=f,l.getSnapshot=d,j2(l)&&B2(s)}function L2(s,l,f){return f(function(){j2(l)&&B2(s)})}function j2(s){var l=s.getSnapshot;s=s.value;try{var f=l();return!Or(s,f)}catch{return!0}}function B2(s){var l=So(s,2);l!==null&&Er(l,s,2)}function np(s){var l=lr();if(typeof s=="function"){var f=s;if(s=f(),Po){Hr(!0);try{f()}finally{Hr(!1)}}}return l.memoizedState=l.baseState=s,l.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ca,lastRenderedState:s},l}function V2(s,l,f,d){return s.baseState=f,ep(s,Ct,typeof d=="function"?d:Ca)}function hI(s,l,f,d,y){if(jh(s))throw Error(r(485));if(s=l.action,s!==null){var x={payload:y,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(C){x.listeners.push(C)}};q.T!==null?f(!0):x.isTransition=!1,d(x),f=l.pending,f===null?(x.next=l.pending=x,F2(l,x)):(x.next=f.next,l.pending=f.next=x)}}function F2(s,l){var f=l.action,d=l.payload,y=s.state;if(l.isTransition){var x=q.T,C={};q.T=C;try{var B=f(y,d),$=q.S;$!==null&&$(C,B),U2(s,l,B)}catch(J){rp(s,l,J)}finally{x!==null&&C.types!==null&&(x.types=C.types),q.T=x}}else try{x=f(y,d),U2(s,l,x)}catch(J){rp(s,l,J)}}function U2(s,l,f){f!==null&&typeof f=="object"&&typeof f.then=="function"?f.then(function(d){z2(s,l,d)},function(d){return rp(s,l,d)}):z2(s,l,f)}function z2(s,l,f){l.status="fulfilled",l.value=f,H2(l),s.state=f,l=s.pending,l!==null&&(f=l.next,f===l?s.pending=null:(f=f.next,l.next=f,F2(s,f)))}function rp(s,l,f){var d=s.pending;if(s.pending=null,d!==null){d=d.next;do l.status="rejected",l.reason=f,H2(l),l=l.next;while(l!==d)}s.action=null}function H2(s){s=s.listeners;for(var l=0;l<s.length;l++)(0,s[l])()}function G2(s,l){return l}function q2(s,l){if(nt){var f=Dt.formState;if(f!==null){e:{var d=He;if(nt){if(Lt){t:{for(var y=Lt,x=Zr;y.nodeType!==8;){if(!x){y=null;break t}if(y=ei(y.nextSibling),y===null){y=null;break t}}x=y.data,y=x==="F!"||x==="F"?y:null}if(y){Lt=ei(y.nextSibling),d=y.data==="F!";break e}}ls(d)}d=!1}d&&(l=f[0])}}return f=lr(),f.memoizedState=f.baseState=l,d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:G2,lastRenderedState:l},f.queue=d,f=u_.bind(null,He,d),d.dispatch=f,d=np(!1),x=cp.bind(null,He,!1,d.queue),d=lr(),y={state:l,dispatch:null,action:s,pending:null},d.queue=y,f=hI.bind(null,He,y,x,f),y.dispatch=f,d.memoizedState=s,[l,f,!1]}function $2(s){var l=nn();return X2(l,Ct,s)}function X2(s,l,f){if(l=ep(s,l,G2)[0],s=Ph(Ca)[0],typeof l=="object"&&l!==null&&typeof l.then=="function")try{var d=yu(l)}catch(C){throw C===Nl?bh:C}else d=l;l=nn();var y=l.queue,x=y.dispatch;return f!==l.memoizedState&&(He.flags|=2048,Pl(9,{destroy:void 0},dI.bind(null,y,f),null)),[d,x,s]}function dI(s,l){s.action=l}function Y2(s){var l=nn(),f=Ct;if(f!==null)return X2(l,f,s);nn(),l=l.memoizedState,f=nn();var d=f.queue.dispatch;return f.memoizedState=s,[l,d,!1]}function Pl(s,l,f,d){return s={tag:s,create:f,deps:d,inst:l,next:null},l=He.updateQueue,l===null&&(l=Dh(),He.updateQueue=l),f=l.lastEffect,f===null?l.lastEffect=s.next=s:(d=f.next,f.next=s,s.next=d,l.lastEffect=s),s}function K2(){return nn().memoizedState}function kh(s,l,f,d){var y=lr();He.flags|=s,y.memoizedState=Pl(1|l,{destroy:void 0},f,d===void 0?null:d)}function Lh(s,l,f,d){var y=nn();d=d===void 0?null:d;var x=y.memoizedState.inst;Ct!==null&&d!==null&&Y1(d,Ct.memoizedState.deps)?y.memoizedState=Pl(l,x,f,d):(He.flags|=s,y.memoizedState=Pl(1|l,x,f,d))}function W2(s,l){kh(8390656,8,s,l)}function ip(s,l){Lh(2048,8,s,l)}function pI(s){He.flags|=4;var l=He.updateQueue;if(l===null)l=Dh(),He.updateQueue=l,l.events=[s];else{var f=l.events;f===null?l.events=[s]:f.push(s)}}function Q2(s){var l=nn().memoizedState;return pI({ref:l,nextImpl:s}),function(){if((dt&2)!==0)throw Error(r(440));return l.impl.apply(void 0,arguments)}}function Z2(s,l){return Lh(4,2,s,l)}function J2(s,l){return Lh(4,4,s,l)}function e_(s,l){if(typeof l=="function"){s=s();var f=l(s);return function(){typeof f=="function"?f():l(null)}}if(l!=null)return s=s(),l.current=s,function(){l.current=null}}function t_(s,l,f){f=f!=null?f.concat([s]):null,Lh(4,4,e_.bind(null,l,s),f)}function ap(){}function n_(s,l){var f=nn();l=l===void 0?null:l;var d=f.memoizedState;return l!==null&&Y1(l,d[1])?d[0]:(f.memoizedState=[s,l],s)}function r_(s,l){var f=nn();l=l===void 0?null:l;var d=f.memoizedState;if(l!==null&&Y1(l,d[1]))return d[0];if(d=s(),Po){Hr(!0);try{s()}finally{Hr(!1)}}return f.memoizedState=[d,l],d}function sp(s,l,f){return f===void 0||(Sa&1073741824)!==0&&(Qe&261930)===0?s.memoizedState=l:(s.memoizedState=f,s=ix(),He.lanes|=s,vs|=s,f)}function i_(s,l,f,d){return Or(f,l)?f:Ol.current!==null?(s=sp(s,f,d),Or(s,l)||(pn=!0),s):(Sa&42)===0||(Sa&1073741824)!==0&&(Qe&261930)===0?(pn=!0,s.memoizedState=f):(s=ix(),He.lanes|=s,vs|=s,l)}function a_(s,l,f,d,y){var x=ce.p;ce.p=x!==0&&8>x?x:8;var C=q.T,B={};q.T=B,cp(s,!1,l,f);try{var $=y(),J=q.S;if(J!==null&&J(B,$),$!==null&&typeof $=="object"&&typeof $.then=="function"){var oe=cI($,d);_u(s,l,oe,jr(s))}else _u(s,l,d,jr(s))}catch(fe){_u(s,l,{then:function(){},status:"rejected",reason:fe},jr())}finally{ce.p=x,C!==null&&B.types!==null&&(C.types=B.types),q.T=C}}function mI(){}function op(s,l,f,d){if(s.tag!==5)throw Error(r(476));var y=s_(s).queue;a_(s,y,l,me,f===null?mI:function(){return o_(s),f(d)})}function s_(s){var l=s.memoizedState;if(l!==null)return l;l={memoizedState:me,baseState:me,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ca,lastRenderedState:me},next:null};var f={};return l.next={memoizedState:f,baseState:f,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ca,lastRenderedState:f},next:null},s.memoizedState=l,s=s.alternate,s!==null&&(s.memoizedState=l),l}function o_(s){var l=s_(s);l.next===null&&(l=s.alternate.memoizedState),_u(s,l.next.queue,{},jr())}function lp(){return Hn(Lu)}function l_(){return nn().memoizedState}function c_(){return nn().memoizedState}function gI(s){for(var l=s.return;l!==null;){switch(l.tag){case 24:case 3:var f=jr();s=fs(f);var d=hs(l,s,f);d!==null&&(Er(d,l,f),pu(d,l,f)),l={cache:j1()},s.payload=l;return}l=l.return}}function vI(s,l,f){var d=jr();f={lane:d,revertLane:0,gesture:null,action:f,hasEagerState:!1,eagerState:null,next:null},jh(s)?f_(l,f):(f=C1(s,l,f,d),f!==null&&(Er(f,s,d),h_(f,l,d)))}function u_(s,l,f){var d=jr();_u(s,l,f,d)}function _u(s,l,f,d){var y={lane:d,revertLane:0,gesture:null,action:f,hasEagerState:!1,eagerState:null,next:null};if(jh(s))f_(l,y);else{var x=s.alternate;if(s.lanes===0&&(x===null||x.lanes===0)&&(x=l.lastRenderedReducer,x!==null))try{var C=l.lastRenderedState,B=x(C,f);if(y.hasEagerState=!0,y.eagerState=B,Or(B,C))return vh(s,l,y,0),Dt===null&&gh(),!1}catch{}finally{}if(f=C1(s,l,y,d),f!==null)return Er(f,s,d),h_(f,l,d),!0}return!1}function cp(s,l,f,d){if(d={lane:2,revertLane:Up(),gesture:null,action:d,hasEagerState:!1,eagerState:null,next:null},jh(s)){if(l)throw Error(r(479))}else l=C1(s,f,d,2),l!==null&&Er(l,s,2)}function jh(s){var l=s.alternate;return s===He||l!==null&&l===He}function f_(s,l){Dl=Rh=!0;var f=s.pending;f===null?l.next=l:(l.next=f.next,f.next=l),s.pending=l}function h_(s,l,f){if((f&4194048)!==0){var d=l.lanes;d&=s.pendingLanes,f|=d,l.lanes=f,Uc(s,f)}}var xu={readContext:Hn,use:Mh,useCallback:Wt,useContext:Wt,useEffect:Wt,useImperativeHandle:Wt,useLayoutEffect:Wt,useInsertionEffect:Wt,useMemo:Wt,useReducer:Wt,useRef:Wt,useState:Wt,useDebugValue:Wt,useDeferredValue:Wt,useTransition:Wt,useSyncExternalStore:Wt,useId:Wt,useHostTransitionStatus:Wt,useFormState:Wt,useActionState:Wt,useOptimistic:Wt,useMemoCache:Wt,useCacheRefresh:Wt};xu.useEffectEvent=Wt;var d_={readContext:Hn,use:Mh,useCallback:function(s,l){return lr().memoizedState=[s,l===void 0?null:l],s},useContext:Hn,useEffect:W2,useImperativeHandle:function(s,l,f){f=f!=null?f.concat([s]):null,kh(4194308,4,e_.bind(null,l,s),f)},useLayoutEffect:function(s,l){return kh(4194308,4,s,l)},useInsertionEffect:function(s,l){kh(4,2,s,l)},useMemo:function(s,l){var f=lr();l=l===void 0?null:l;var d=s();if(Po){Hr(!0);try{s()}finally{Hr(!1)}}return f.memoizedState=[d,l],d},useReducer:function(s,l,f){var d=lr();if(f!==void 0){var y=f(l);if(Po){Hr(!0);try{f(l)}finally{Hr(!1)}}}else y=l;return d.memoizedState=d.baseState=y,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:y},d.queue=s,s=s.dispatch=vI.bind(null,He,s),[d.memoizedState,s]},useRef:function(s){var l=lr();return s={current:s},l.memoizedState=s},useState:function(s){s=np(s);var l=s.queue,f=u_.bind(null,He,l);return l.dispatch=f,[s.memoizedState,f]},useDebugValue:ap,useDeferredValue:function(s,l){var f=lr();return sp(f,s,l)},useTransition:function(){var s=np(!1);return s=a_.bind(null,He,s.queue,!0,!1),lr().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,l,f){var d=He,y=lr();if(nt){if(f===void 0)throw Error(r(407));f=f()}else{if(f=l(),Dt===null)throw Error(r(349));(Qe&127)!==0||P2(d,l,f)}y.memoizedState=f;var x={value:f,getSnapshot:l};return y.queue=x,W2(L2.bind(null,d,x,s),[s]),d.flags|=2048,Pl(9,{destroy:void 0},k2.bind(null,d,x,f,l),null),f},useId:function(){var s=lr(),l=Dt.identifierPrefix;if(nt){var f=ta,d=ea;f=(d&~(1<<32-Jt(d)-1)).toString(32)+f,l="_"+l+"R_"+f,f=Oh++,0<f&&(l+="H"+f.toString(32)),l+="_"}else f=uI++,l="_"+l+"r_"+f.toString(32)+"_";return s.memoizedState=l},useHostTransitionStatus:lp,useFormState:q2,useActionState:q2,useOptimistic:function(s){var l=lr();l.memoizedState=l.baseState=s;var f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return l.queue=f,l=cp.bind(null,He,!0,f),f.dispatch=l,[s,l]},useMemoCache:J1,useCacheRefresh:function(){return lr().memoizedState=gI.bind(null,He)},useEffectEvent:function(s){var l=lr(),f={impl:s};return l.memoizedState=f,function(){if((dt&2)!==0)throw Error(r(440));return f.impl.apply(void 0,arguments)}}},up={readContext:Hn,use:Mh,useCallback:n_,useContext:Hn,useEffect:ip,useImperativeHandle:t_,useInsertionEffect:Z2,useLayoutEffect:J2,useMemo:r_,useReducer:Ph,useRef:K2,useState:function(){return Ph(Ca)},useDebugValue:ap,useDeferredValue:function(s,l){var f=nn();return i_(f,Ct.memoizedState,s,l)},useTransition:function(){var s=Ph(Ca)[0],l=nn().memoizedState;return[typeof s=="boolean"?s:yu(s),l]},useSyncExternalStore:M2,useId:l_,useHostTransitionStatus:lp,useFormState:$2,useActionState:$2,useOptimistic:function(s,l){var f=nn();return V2(f,Ct,s,l)},useMemoCache:J1,useCacheRefresh:c_};up.useEffectEvent=Q2;var p_={readContext:Hn,use:Mh,useCallback:n_,useContext:Hn,useEffect:ip,useImperativeHandle:t_,useInsertionEffect:Z2,useLayoutEffect:J2,useMemo:r_,useReducer:tp,useRef:K2,useState:function(){return tp(Ca)},useDebugValue:ap,useDeferredValue:function(s,l){var f=nn();return Ct===null?sp(f,s,l):i_(f,Ct.memoizedState,s,l)},useTransition:function(){var s=tp(Ca)[0],l=nn().memoizedState;return[typeof s=="boolean"?s:yu(s),l]},useSyncExternalStore:M2,useId:l_,useHostTransitionStatus:lp,useFormState:Y2,useActionState:Y2,useOptimistic:function(s,l){var f=nn();return Ct!==null?V2(f,Ct,s,l):(f.baseState=s,[s,f.queue.dispatch])},useMemoCache:J1,useCacheRefresh:c_};p_.useEffectEvent=Q2;function fp(s,l,f,d){l=s.memoizedState,f=f(d,l),f=f==null?l:g({},l,f),s.memoizedState=f,s.lanes===0&&(s.updateQueue.baseState=f)}var hp={enqueueSetState:function(s,l,f){s=s._reactInternals;var d=jr(),y=fs(d);y.payload=l,f!=null&&(y.callback=f),l=hs(s,y,d),l!==null&&(Er(l,s,d),pu(l,s,d))},enqueueReplaceState:function(s,l,f){s=s._reactInternals;var d=jr(),y=fs(d);y.tag=1,y.payload=l,f!=null&&(y.callback=f),l=hs(s,y,d),l!==null&&(Er(l,s,d),pu(l,s,d))},enqueueForceUpdate:function(s,l){s=s._reactInternals;var f=jr(),d=fs(f);d.tag=2,l!=null&&(d.callback=l),l=hs(s,d,f),l!==null&&(Er(l,s,f),pu(l,s,f))}};function m_(s,l,f,d,y,x,C){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(d,x,C):l.prototype&&l.prototype.isPureReactComponent?!su(f,d)||!su(y,x):!0}function g_(s,l,f,d){s=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(f,d),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(f,d),l.state!==s&&hp.enqueueReplaceState(l,l.state,null)}function ko(s,l){var f=l;if("ref"in l){f={};for(var d in l)d!=="ref"&&(f[d]=l[d])}if(s=s.defaultProps){f===l&&(f=g({},f));for(var y in s)f[y]===void 0&&(f[y]=s[y])}return f}function v_(s){mh(s)}function y_(s){console.error(s)}function __(s){mh(s)}function Bh(s,l){try{var f=s.onUncaughtError;f(l.value,{componentStack:l.stack})}catch(d){setTimeout(function(){throw d})}}function x_(s,l,f){try{var d=s.onCaughtError;d(f.value,{componentStack:f.stack,errorBoundary:l.tag===1?l.stateNode:null})}catch(y){setTimeout(function(){throw y})}}function dp(s,l,f){return f=fs(f),f.tag=3,f.payload={element:null},f.callback=function(){Bh(s,l)},f}function E_(s){return s=fs(s),s.tag=3,s}function w_(s,l,f,d){var y=f.type.getDerivedStateFromError;if(typeof y=="function"){var x=d.value;s.payload=function(){return y(x)},s.callback=function(){x_(l,f,d)}}var C=f.stateNode;C!==null&&typeof C.componentDidCatch=="function"&&(s.callback=function(){x_(l,f,d),typeof y!="function"&&(ys===null?ys=new Set([this]):ys.add(this));var B=d.stack;this.componentDidCatch(d.value,{componentStack:B!==null?B:""})})}function yI(s,l,f,d,y){if(f.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){if(l=f.alternate,l!==null&&Cl(l,f,y,!0),f=Mr.current,f!==null){switch(f.tag){case 31:case 13:return Jr===null?Wh():f.alternate===null&&Qt===0&&(Qt=3),f.flags&=-257,f.flags|=65536,f.lanes=y,d===Sh?f.flags|=16384:(l=f.updateQueue,l===null?f.updateQueue=new Set([d]):l.add(d),Bp(s,d,y)),!1;case 22:return f.flags|=65536,d===Sh?f.flags|=16384:(l=f.updateQueue,l===null?(l={transitions:null,markerInstances:null,retryQueue:new Set([d])},f.updateQueue=l):(f=l.retryQueue,f===null?l.retryQueue=new Set([d]):f.add(d)),Bp(s,d,y)),!1}throw Error(r(435,f.tag))}return Bp(s,d,y),Wh(),!1}if(nt)return l=Mr.current,l!==null?((l.flags&65536)===0&&(l.flags|=256),l.flags|=65536,l.lanes=y,d!==D1&&(s=Error(r(422),{cause:d}),cu(Kr(s,f)))):(d!==D1&&(l=Error(r(423),{cause:d}),cu(Kr(l,f))),s=s.current.alternate,s.flags|=65536,y&=-y,s.lanes|=y,d=Kr(d,f),y=dp(s.stateNode,d,y),H1(s,y),Qt!==4&&(Qt=2)),!1;var x=Error(r(520),{cause:d});if(x=Kr(x,f),Iu===null?Iu=[x]:Iu.push(x),Qt!==4&&(Qt=2),l===null)return!0;d=Kr(d,f),f=l;do{switch(f.tag){case 3:return f.flags|=65536,s=y&-y,f.lanes|=s,s=dp(f.stateNode,d,s),H1(f,s),!1;case 1:if(l=f.type,x=f.stateNode,(f.flags&128)===0&&(typeof l.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(ys===null||!ys.has(x))))return f.flags|=65536,y&=-y,f.lanes|=y,y=E_(y),w_(y,s,f,d),H1(f,y),!1}f=f.return}while(f!==null);return!1}var pp=Error(r(461)),pn=!1;function Gn(s,l,f,d){l.child=s===null?C2(l,null,f,d):Mo(l,s.child,f,d)}function A_(s,l,f,d,y){f=f.render;var x=l.ref;if("ref"in d){var C={};for(var B in d)B!=="ref"&&(C[B]=d[B])}else C=d;return No(l),d=K1(s,l,f,C,x,y),B=W1(),s!==null&&!pn?(Q1(s,l,y),Ta(s,l,y)):(nt&&B&&R1(l),l.flags|=1,Gn(s,l,d,y),l.child)}function b_(s,l,f,d,y){if(s===null){var x=f.type;return typeof x=="function"&&!T1(x)&&x.defaultProps===void 0&&f.compare===null?(l.tag=15,l.type=x,S_(s,l,x,d,y)):(s=_h(f.type,null,d,l,l.mode,y),s.ref=l.ref,s.return=l,l.child=s)}if(x=s.child,!wp(s,y)){var C=x.memoizedProps;if(f=f.compare,f=f!==null?f:su,f(C,d)&&s.ref===l.ref)return Ta(s,l,y)}return l.flags|=1,s=Ea(x,d),s.ref=l.ref,s.return=l,l.child=s}function S_(s,l,f,d,y){if(s!==null){var x=s.memoizedProps;if(su(x,d)&&s.ref===l.ref)if(pn=!1,l.pendingProps=d=x,wp(s,y))(s.flags&131072)!==0&&(pn=!0);else return l.lanes=s.lanes,Ta(s,l,y)}return mp(s,l,f,d,y)}function C_(s,l,f,d){var y=d.children,x=s!==null?s.memoizedState:null;if(s===null&&l.stateNode===null&&(l.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),d.mode==="hidden"){if((l.flags&128)!==0){if(x=x!==null?x.baseLanes|f:f,s!==null){for(d=l.child=s.child,y=0;d!==null;)y=y|d.lanes|d.childLanes,d=d.sibling;d=y&~x}else d=0,l.child=null;return T_(s,l,x,f,d)}if((f&536870912)!==0)l.memoizedState={baseLanes:0,cachePool:null},s!==null&&Ah(l,x!==null?x.cachePool:null),x!==null?N2(l,x):q1(),R2(l);else return d=l.lanes=536870912,T_(s,l,x!==null?x.baseLanes|f:f,f,d)}else x!==null?(Ah(l,x.cachePool),N2(l,x),ps(),l.memoizedState=null):(s!==null&&Ah(l,null),q1(),ps());return Gn(s,l,y,f),l.child}function Eu(s,l){return s!==null&&s.tag===22||l.stateNode!==null||(l.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.sibling}function T_(s,l,f,d,y){var x=V1();return x=x===null?null:{parent:hn._currentValue,pool:x},l.memoizedState={baseLanes:f,cachePool:x},s!==null&&Ah(l,null),q1(),R2(l),s!==null&&Cl(s,l,d,!0),l.childLanes=y,null}function Vh(s,l){return l=Uh({mode:l.mode,children:l.children},s.mode),l.ref=s.ref,s.child=l,l.return=s,l}function I_(s,l,f){return Mo(l,s.child,null,f),s=Vh(l,l.pendingProps),s.flags|=2,Pr(l),l.memoizedState=null,s}function _I(s,l,f){var d=l.pendingProps,y=(l.flags&128)!==0;if(l.flags&=-129,s===null){if(nt){if(d.mode==="hidden")return s=Vh(l,d),l.lanes=536870912,Eu(null,s);if(X1(l),(s=Lt)?(s=Fx(s,Zr),s=s!==null&&s.data==="&"?s:null,s!==null&&(l.memoizedState={dehydrated:s,treeContext:ss!==null?{id:ea,overflow:ta}:null,retryLane:536870912,hydrationErrors:null},f=f2(s),f.return=l,l.child=f,zn=l,Lt=null)):s=null,s===null)throw ls(l);return l.lanes=536870912,null}return Vh(l,d)}var x=s.memoizedState;if(x!==null){var C=x.dehydrated;if(X1(l),y)if(l.flags&256)l.flags&=-257,l=I_(s,l,f);else if(l.memoizedState!==null)l.child=s.child,l.flags|=128,l=null;else throw Error(r(558));else if(pn||Cl(s,l,f,!1),y=(f&s.childLanes)!==0,pn||y){if(d=Dt,d!==null&&(C=zc(d,f),C!==0&&C!==x.retryLane))throw x.retryLane=C,So(s,C),Er(d,s,C),pp;Wh(),l=I_(s,l,f)}else s=x.treeContext,Lt=ei(C.nextSibling),zn=l,nt=!0,os=null,Zr=!1,s!==null&&p2(l,s),l=Vh(l,d),l.flags|=4096;return l}return s=Ea(s.child,{mode:d.mode,children:d.children}),s.ref=l.ref,l.child=s,s.return=l,s}function Fh(s,l){var f=l.ref;if(f===null)s!==null&&s.ref!==null&&(l.flags|=4194816);else{if(typeof f!="function"&&typeof f!="object")throw Error(r(284));(s===null||s.ref!==f)&&(l.flags|=4194816)}}function mp(s,l,f,d,y){return No(l),f=K1(s,l,f,d,void 0,y),d=W1(),s!==null&&!pn?(Q1(s,l,y),Ta(s,l,y)):(nt&&d&&R1(l),l.flags|=1,Gn(s,l,f,y),l.child)}function N_(s,l,f,d,y,x){return No(l),l.updateQueue=null,f=D2(l,d,f,y),O2(s),d=W1(),s!==null&&!pn?(Q1(s,l,x),Ta(s,l,x)):(nt&&d&&R1(l),l.flags|=1,Gn(s,l,f,x),l.child)}function R_(s,l,f,d,y){if(No(l),l.stateNode===null){var x=wl,C=f.contextType;typeof C=="object"&&C!==null&&(x=Hn(C)),x=new f(d,x),l.memoizedState=x.state!==null&&x.state!==void 0?x.state:null,x.updater=hp,l.stateNode=x,x._reactInternals=l,x=l.stateNode,x.props=d,x.state=l.memoizedState,x.refs={},U1(l),C=f.contextType,x.context=typeof C=="object"&&C!==null?Hn(C):wl,x.state=l.memoizedState,C=f.getDerivedStateFromProps,typeof C=="function"&&(fp(l,f,C,d),x.state=l.memoizedState),typeof f.getDerivedStateFromProps=="function"||typeof x.getSnapshotBeforeUpdate=="function"||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(C=x.state,typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount(),C!==x.state&&hp.enqueueReplaceState(x,x.state,null),gu(l,d,x,y),mu(),x.state=l.memoizedState),typeof x.componentDidMount=="function"&&(l.flags|=4194308),d=!0}else if(s===null){x=l.stateNode;var B=l.memoizedProps,$=ko(f,B);x.props=$;var J=x.context,oe=f.contextType;C=wl,typeof oe=="object"&&oe!==null&&(C=Hn(oe));var fe=f.getDerivedStateFromProps;oe=typeof fe=="function"||typeof x.getSnapshotBeforeUpdate=="function",B=l.pendingProps!==B,oe||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(B||J!==C)&&g_(l,x,d,C),us=!1;var te=l.memoizedState;x.state=te,gu(l,d,x,y),mu(),J=l.memoizedState,B||te!==J||us?(typeof fe=="function"&&(fp(l,f,fe,d),J=l.memoizedState),($=us||m_(l,f,$,d,te,J,C))?(oe||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount()),typeof x.componentDidMount=="function"&&(l.flags|=4194308)):(typeof x.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=d,l.memoizedState=J),x.props=d,x.state=J,x.context=C,d=$):(typeof x.componentDidMount=="function"&&(l.flags|=4194308),d=!1)}else{x=l.stateNode,z1(s,l),C=l.memoizedProps,oe=ko(f,C),x.props=oe,fe=l.pendingProps,te=x.context,J=f.contextType,$=wl,typeof J=="object"&&J!==null&&($=Hn(J)),B=f.getDerivedStateFromProps,(J=typeof B=="function"||typeof x.getSnapshotBeforeUpdate=="function")||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(C!==fe||te!==$)&&g_(l,x,d,$),us=!1,te=l.memoizedState,x.state=te,gu(l,d,x,y),mu();var re=l.memoizedState;C!==fe||te!==re||us||s!==null&&s.dependencies!==null&&Eh(s.dependencies)?(typeof B=="function"&&(fp(l,f,B,d),re=l.memoizedState),(oe=us||m_(l,f,oe,d,te,re,$)||s!==null&&s.dependencies!==null&&Eh(s.dependencies))?(J||typeof x.UNSAFE_componentWillUpdate!="function"&&typeof x.componentWillUpdate!="function"||(typeof x.componentWillUpdate=="function"&&x.componentWillUpdate(d,re,$),typeof x.UNSAFE_componentWillUpdate=="function"&&x.UNSAFE_componentWillUpdate(d,re,$)),typeof x.componentDidUpdate=="function"&&(l.flags|=4),typeof x.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof x.componentDidUpdate!="function"||C===s.memoizedProps&&te===s.memoizedState||(l.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||C===s.memoizedProps&&te===s.memoizedState||(l.flags|=1024),l.memoizedProps=d,l.memoizedState=re),x.props=d,x.state=re,x.context=$,d=oe):(typeof x.componentDidUpdate!="function"||C===s.memoizedProps&&te===s.memoizedState||(l.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||C===s.memoizedProps&&te===s.memoizedState||(l.flags|=1024),d=!1)}return x=d,Fh(s,l),d=(l.flags&128)!==0,x||d?(x=l.stateNode,f=d&&typeof f.getDerivedStateFromError!="function"?null:x.render(),l.flags|=1,s!==null&&d?(l.child=Mo(l,s.child,null,y),l.child=Mo(l,null,f,y)):Gn(s,l,f,y),l.memoizedState=x.state,s=l.child):s=Ta(s,l,y),s}function O_(s,l,f,d){return To(),l.flags|=256,Gn(s,l,f,d),l.child}var gp={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function vp(s){return{baseLanes:s,cachePool:x2()}}function yp(s,l,f){return s=s!==null?s.childLanes&~f:0,l&&(s|=Lr),s}function D_(s,l,f){var d=l.pendingProps,y=!1,x=(l.flags&128)!==0,C;if((C=x)||(C=s!==null&&s.memoizedState===null?!1:(tn.current&2)!==0),C&&(y=!0,l.flags&=-129),C=(l.flags&32)!==0,l.flags&=-33,s===null){if(nt){if(y?ds(l):ps(),(s=Lt)?(s=Fx(s,Zr),s=s!==null&&s.data!=="&"?s:null,s!==null&&(l.memoizedState={dehydrated:s,treeContext:ss!==null?{id:ea,overflow:ta}:null,retryLane:536870912,hydrationErrors:null},f=f2(s),f.return=l,l.child=f,zn=l,Lt=null)):s=null,s===null)throw ls(l);return em(s)?l.lanes=32:l.lanes=536870912,null}var B=d.children;return d=d.fallback,y?(ps(),y=l.mode,B=Uh({mode:"hidden",children:B},y),d=Co(d,y,f,null),B.return=l,d.return=l,B.sibling=d,l.child=B,d=l.child,d.memoizedState=vp(f),d.childLanes=yp(s,C,f),l.memoizedState=gp,Eu(null,d)):(ds(l),_p(l,B))}var $=s.memoizedState;if($!==null&&(B=$.dehydrated,B!==null)){if(x)l.flags&256?(ds(l),l.flags&=-257,l=xp(s,l,f)):l.memoizedState!==null?(ps(),l.child=s.child,l.flags|=128,l=null):(ps(),B=d.fallback,y=l.mode,d=Uh({mode:"visible",children:d.children},y),B=Co(B,y,f,null),B.flags|=2,d.return=l,B.return=l,d.sibling=B,l.child=d,Mo(l,s.child,null,f),d=l.child,d.memoizedState=vp(f),d.childLanes=yp(s,C,f),l.memoizedState=gp,l=Eu(null,d));else if(ds(l),em(B)){if(C=B.nextSibling&&B.nextSibling.dataset,C)var J=C.dgst;C=J,d=Error(r(419)),d.stack="",d.digest=C,cu({value:d,source:null,stack:null}),l=xp(s,l,f)}else if(pn||Cl(s,l,f,!1),C=(f&s.childLanes)!==0,pn||C){if(C=Dt,C!==null&&(d=zc(C,f),d!==0&&d!==$.retryLane))throw $.retryLane=d,So(s,d),Er(C,s,d),pp;Jp(B)||Wh(),l=xp(s,l,f)}else Jp(B)?(l.flags|=192,l.child=s.child,l=null):(s=$.treeContext,Lt=ei(B.nextSibling),zn=l,nt=!0,os=null,Zr=!1,s!==null&&p2(l,s),l=_p(l,d.children),l.flags|=4096);return l}return y?(ps(),B=d.fallback,y=l.mode,$=s.child,J=$.sibling,d=Ea($,{mode:"hidden",children:d.children}),d.subtreeFlags=$.subtreeFlags&65011712,J!==null?B=Ea(J,B):(B=Co(B,y,f,null),B.flags|=2),B.return=l,d.return=l,d.sibling=B,l.child=d,Eu(null,d),d=l.child,B=s.child.memoizedState,B===null?B=vp(f):(y=B.cachePool,y!==null?($=hn._currentValue,y=y.parent!==$?{parent:$,pool:$}:y):y=x2(),B={baseLanes:B.baseLanes|f,cachePool:y}),d.memoizedState=B,d.childLanes=yp(s,C,f),l.memoizedState=gp,Eu(s.child,d)):(ds(l),f=s.child,s=f.sibling,f=Ea(f,{mode:"visible",children:d.children}),f.return=l,f.sibling=null,s!==null&&(C=l.deletions,C===null?(l.deletions=[s],l.flags|=16):C.push(s)),l.child=f,l.memoizedState=null,f)}function _p(s,l){return l=Uh({mode:"visible",children:l},s.mode),l.return=s,s.child=l}function Uh(s,l){return s=Dr(22,s,null,l),s.lanes=0,s}function xp(s,l,f){return Mo(l,s.child,null,f),s=_p(l,l.pendingProps.children),s.flags|=2,l.memoizedState=null,s}function M_(s,l,f){s.lanes|=l;var d=s.alternate;d!==null&&(d.lanes|=l),k1(s.return,l,f)}function Ep(s,l,f,d,y,x){var C=s.memoizedState;C===null?s.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:d,tail:f,tailMode:y,treeForkCount:x}:(C.isBackwards=l,C.rendering=null,C.renderingStartTime=0,C.last=d,C.tail=f,C.tailMode=y,C.treeForkCount=x)}function P_(s,l,f){var d=l.pendingProps,y=d.revealOrder,x=d.tail;d=d.children;var C=tn.current,B=(C&2)!==0;if(B?(C=C&1|2,l.flags|=128):C&=1,ve(tn,C),Gn(s,l,d,f),d=nt?lu:0,!B&&s!==null&&(s.flags&128)!==0)e:for(s=l.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&M_(s,f,l);else if(s.tag===19)M_(s,f,l);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===l)break e;for(;s.sibling===null;){if(s.return===null||s.return===l)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}switch(y){case"forwards":for(f=l.child,y=null;f!==null;)s=f.alternate,s!==null&&Nh(s)===null&&(y=f),f=f.sibling;f=y,f===null?(y=l.child,l.child=null):(y=f.sibling,f.sibling=null),Ep(l,!1,y,f,x,d);break;case"backwards":case"unstable_legacy-backwards":for(f=null,y=l.child,l.child=null;y!==null;){if(s=y.alternate,s!==null&&Nh(s)===null){l.child=y;break}s=y.sibling,y.sibling=f,f=y,y=s}Ep(l,!0,f,null,x,d);break;case"together":Ep(l,!1,null,null,void 0,d);break;default:l.memoizedState=null}return l.child}function Ta(s,l,f){if(s!==null&&(l.dependencies=s.dependencies),vs|=l.lanes,(f&l.childLanes)===0)if(s!==null){if(Cl(s,l,f,!1),(f&l.childLanes)===0)return null}else return null;if(s!==null&&l.child!==s.child)throw Error(r(153));if(l.child!==null){for(s=l.child,f=Ea(s,s.pendingProps),l.child=f,f.return=l;s.sibling!==null;)s=s.sibling,f=f.sibling=Ea(s,s.pendingProps),f.return=l;f.sibling=null}return l.child}function wp(s,l){return(s.lanes&l)!==0?!0:(s=s.dependencies,!!(s!==null&&Eh(s)))}function xI(s,l,f){switch(l.tag){case 3:be(l,l.stateNode.containerInfo),cs(l,hn,s.memoizedState.cache),To();break;case 27:case 5:rt(l);break;case 4:be(l,l.stateNode.containerInfo);break;case 10:cs(l,l.type,l.memoizedProps.value);break;case 31:if(l.memoizedState!==null)return l.flags|=128,X1(l),null;break;case 13:var d=l.memoizedState;if(d!==null)return d.dehydrated!==null?(ds(l),l.flags|=128,null):(f&l.child.childLanes)!==0?D_(s,l,f):(ds(l),s=Ta(s,l,f),s!==null?s.sibling:null);ds(l);break;case 19:var y=(s.flags&128)!==0;if(d=(f&l.childLanes)!==0,d||(Cl(s,l,f,!1),d=(f&l.childLanes)!==0),y){if(d)return P_(s,l,f);l.flags|=128}if(y=l.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),ve(tn,tn.current),d)break;return null;case 22:return l.lanes=0,C_(s,l,f,l.pendingProps);case 24:cs(l,hn,s.memoizedState.cache)}return Ta(s,l,f)}function k_(s,l,f){if(s!==null)if(s.memoizedProps!==l.pendingProps)pn=!0;else{if(!wp(s,f)&&(l.flags&128)===0)return pn=!1,xI(s,l,f);pn=(s.flags&131072)!==0}else pn=!1,nt&&(l.flags&1048576)!==0&&d2(l,lu,l.index);switch(l.lanes=0,l.tag){case 16:e:{var d=l.pendingProps;if(s=Oo(l.elementType),l.type=s,typeof s=="function")T1(s)?(d=ko(s,d),l.tag=1,l=R_(null,l,s,d,f)):(l.tag=0,l=mp(null,l,s,d,f));else{if(s!=null){var y=s.$$typeof;if(y===z){l.tag=11,l=A_(null,l,s,d,f);break e}else if(y===D){l.tag=14,l=b_(null,l,s,d,f);break e}}throw l=ee(s)||s,Error(r(306,l,""))}}return l;case 0:return mp(s,l,l.type,l.pendingProps,f);case 1:return d=l.type,y=ko(d,l.pendingProps),R_(s,l,d,y,f);case 3:e:{if(be(l,l.stateNode.containerInfo),s===null)throw Error(r(387));d=l.pendingProps;var x=l.memoizedState;y=x.element,z1(s,l),gu(l,d,null,f);var C=l.memoizedState;if(d=C.cache,cs(l,hn,d),d!==x.cache&&L1(l,[hn],f,!0),mu(),d=C.element,x.isDehydrated)if(x={element:d,isDehydrated:!1,cache:C.cache},l.updateQueue.baseState=x,l.memoizedState=x,l.flags&256){l=O_(s,l,d,f);break e}else if(d!==y){y=Kr(Error(r(424)),l),cu(y),l=O_(s,l,d,f);break e}else{switch(s=l.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(Lt=ei(s.firstChild),zn=l,nt=!0,os=null,Zr=!0,f=C2(l,null,d,f),l.child=f;f;)f.flags=f.flags&-3|4096,f=f.sibling}else{if(To(),d===y){l=Ta(s,l,f);break e}Gn(s,l,d,f)}l=l.child}return l;case 26:return Fh(s,l),s===null?(f=$x(l.type,null,l.pendingProps,null))?l.memoizedState=f:nt||(f=l.type,s=l.pendingProps,d=rd(ge.current).createElement(f),d[cn]=l,d[Nn]=s,qn(d,f,s),un(d),l.stateNode=d):l.memoizedState=$x(l.type,s.memoizedProps,l.pendingProps,s.memoizedState),null;case 27:return rt(l),s===null&&nt&&(d=l.stateNode=Hx(l.type,l.pendingProps,ge.current),zn=l,Zr=!0,y=Lt,ws(l.type)?(tm=y,Lt=ei(d.firstChild)):Lt=y),Gn(s,l,l.pendingProps.children,f),Fh(s,l),s===null&&(l.flags|=4194304),l.child;case 5:return s===null&&nt&&((y=d=Lt)&&(d=WI(d,l.type,l.pendingProps,Zr),d!==null?(l.stateNode=d,zn=l,Lt=ei(d.firstChild),Zr=!1,y=!0):y=!1),y||ls(l)),rt(l),y=l.type,x=l.pendingProps,C=s!==null?s.memoizedProps:null,d=x.children,Wp(y,x)?d=null:C!==null&&Wp(y,C)&&(l.flags|=32),l.memoizedState!==null&&(y=K1(s,l,fI,null,null,f),Lu._currentValue=y),Fh(s,l),Gn(s,l,d,f),l.child;case 6:return s===null&&nt&&((s=f=Lt)&&(f=QI(f,l.pendingProps,Zr),f!==null?(l.stateNode=f,zn=l,Lt=null,s=!0):s=!1),s||ls(l)),null;case 13:return D_(s,l,f);case 4:return be(l,l.stateNode.containerInfo),d=l.pendingProps,s===null?l.child=Mo(l,null,d,f):Gn(s,l,d,f),l.child;case 11:return A_(s,l,l.type,l.pendingProps,f);case 7:return Gn(s,l,l.pendingProps,f),l.child;case 8:return Gn(s,l,l.pendingProps.children,f),l.child;case 12:return Gn(s,l,l.pendingProps.children,f),l.child;case 10:return d=l.pendingProps,cs(l,l.type,d.value),Gn(s,l,d.children,f),l.child;case 9:return y=l.type._context,d=l.pendingProps.children,No(l),y=Hn(y),d=d(y),l.flags|=1,Gn(s,l,d,f),l.child;case 14:return b_(s,l,l.type,l.pendingProps,f);case 15:return S_(s,l,l.type,l.pendingProps,f);case 19:return P_(s,l,f);case 31:return _I(s,l,f);case 22:return C_(s,l,f,l.pendingProps);case 24:return No(l),d=Hn(hn),s===null?(y=V1(),y===null&&(y=Dt,x=j1(),y.pooledCache=x,x.refCount++,x!==null&&(y.pooledCacheLanes|=f),y=x),l.memoizedState={parent:d,cache:y},U1(l),cs(l,hn,y)):((s.lanes&f)!==0&&(z1(s,l),gu(l,null,null,f),mu()),y=s.memoizedState,x=l.memoizedState,y.parent!==d?(y={parent:d,cache:d},l.memoizedState=y,l.lanes===0&&(l.memoizedState=l.updateQueue.baseState=y),cs(l,hn,d)):(d=x.cache,cs(l,hn,d),d!==y.cache&&L1(l,[hn],f,!0))),Gn(s,l,l.pendingProps.children,f),l.child;case 29:throw l.pendingProps}throw Error(r(156,l.tag))}function Ia(s){s.flags|=4}function Ap(s,l,f,d,y){if((l=(s.mode&32)!==0)&&(l=!1),l){if(s.flags|=16777216,(y&335544128)===y)if(s.stateNode.complete)s.flags|=8192;else if(lx())s.flags|=8192;else throw Do=Sh,F1}else s.flags&=-16777217}function L_(s,l){if(l.type!=="stylesheet"||(l.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!Qx(l))if(lx())s.flags|=8192;else throw Do=Sh,F1}function zh(s,l){l!==null&&(s.flags|=4),s.flags&16384&&(l=s.tag!==22?Yf():536870912,s.lanes|=l,Bl|=l)}function wu(s,l){if(!nt)switch(s.tailMode){case"hidden":l=s.tail;for(var f=null;l!==null;)l.alternate!==null&&(f=l),l=l.sibling;f===null?s.tail=null:f.sibling=null;break;case"collapsed":f=s.tail;for(var d=null;f!==null;)f.alternate!==null&&(d=f),f=f.sibling;d===null?l||s.tail===null?s.tail=null:s.tail.sibling=null:d.sibling=null}}function jt(s){var l=s.alternate!==null&&s.alternate.child===s.child,f=0,d=0;if(l)for(var y=s.child;y!==null;)f|=y.lanes|y.childLanes,d|=y.subtreeFlags&65011712,d|=y.flags&65011712,y.return=s,y=y.sibling;else for(y=s.child;y!==null;)f|=y.lanes|y.childLanes,d|=y.subtreeFlags,d|=y.flags,y.return=s,y=y.sibling;return s.subtreeFlags|=d,s.childLanes=f,l}function EI(s,l,f){var d=l.pendingProps;switch(O1(l),l.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return jt(l),null;case 1:return jt(l),null;case 3:return f=l.stateNode,d=null,s!==null&&(d=s.memoizedState.cache),l.memoizedState.cache!==d&&(l.flags|=2048),ba(hn),De(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(s===null||s.child===null)&&(Sl(l)?Ia(l):s===null||s.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,M1())),jt(l),null;case 26:var y=l.type,x=l.memoizedState;return s===null?(Ia(l),x!==null?(jt(l),L_(l,x)):(jt(l),Ap(l,y,null,d,f))):x?x!==s.memoizedState?(Ia(l),jt(l),L_(l,x)):(jt(l),l.flags&=-16777217):(s=s.memoizedProps,s!==d&&Ia(l),jt(l),Ap(l,y,s,d,f)),null;case 27:if(Gt(l),f=ge.current,y=l.type,s!==null&&l.stateNode!=null)s.memoizedProps!==d&&Ia(l);else{if(!d){if(l.stateNode===null)throw Error(r(166));return jt(l),null}s=Ee.current,Sl(l)?m2(l):(s=Hx(y,d,f),l.stateNode=s,Ia(l))}return jt(l),null;case 5:if(Gt(l),y=l.type,s!==null&&l.stateNode!=null)s.memoizedProps!==d&&Ia(l);else{if(!d){if(l.stateNode===null)throw Error(r(166));return jt(l),null}if(x=Ee.current,Sl(l))m2(l);else{var C=rd(ge.current);switch(x){case 1:x=C.createElementNS("http://www.w3.org/2000/svg",y);break;case 2:x=C.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;default:switch(y){case"svg":x=C.createElementNS("http://www.w3.org/2000/svg",y);break;case"math":x=C.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;case"script":x=C.createElement("div"),x.innerHTML="<script><\/script>",x=x.removeChild(x.firstChild);break;case"select":x=typeof d.is=="string"?C.createElement("select",{is:d.is}):C.createElement("select"),d.multiple?x.multiple=!0:d.size&&(x.size=d.size);break;default:x=typeof d.is=="string"?C.createElement(y,{is:d.is}):C.createElement(y)}}x[cn]=l,x[Nn]=d;e:for(C=l.child;C!==null;){if(C.tag===5||C.tag===6)x.appendChild(C.stateNode);else if(C.tag!==4&&C.tag!==27&&C.child!==null){C.child.return=C,C=C.child;continue}if(C===l)break e;for(;C.sibling===null;){if(C.return===null||C.return===l)break e;C=C.return}C.sibling.return=C.return,C=C.sibling}l.stateNode=x;e:switch(qn(x,y,d),y){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break e;case"img":d=!0;break e;default:d=!1}d&&Ia(l)}}return jt(l),Ap(l,l.type,s===null?null:s.memoizedProps,l.pendingProps,f),null;case 6:if(s&&l.stateNode!=null)s.memoizedProps!==d&&Ia(l);else{if(typeof d!="string"&&l.stateNode===null)throw Error(r(166));if(s=ge.current,Sl(l)){if(s=l.stateNode,f=l.memoizedProps,d=null,y=zn,y!==null)switch(y.tag){case 27:case 5:d=y.memoizedProps}s[cn]=l,s=!!(s.nodeValue===f||d!==null&&d.suppressHydrationWarning===!0||Dx(s.nodeValue,f)),s||ls(l,!0)}else s=rd(s).createTextNode(d),s[cn]=l,l.stateNode=s}return jt(l),null;case 31:if(f=l.memoizedState,s===null||s.memoizedState!==null){if(d=Sl(l),f!==null){if(s===null){if(!d)throw Error(r(318));if(s=l.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(557));s[cn]=l}else To(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;jt(l),s=!1}else f=M1(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=f),s=!0;if(!s)return l.flags&256?(Pr(l),l):(Pr(l),null);if((l.flags&128)!==0)throw Error(r(558))}return jt(l),null;case 13:if(d=l.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(y=Sl(l),d!==null&&d.dehydrated!==null){if(s===null){if(!y)throw Error(r(318));if(y=l.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(r(317));y[cn]=l}else To(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;jt(l),y=!1}else y=M1(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=y),y=!0;if(!y)return l.flags&256?(Pr(l),l):(Pr(l),null)}return Pr(l),(l.flags&128)!==0?(l.lanes=f,l):(f=d!==null,s=s!==null&&s.memoizedState!==null,f&&(d=l.child,y=null,d.alternate!==null&&d.alternate.memoizedState!==null&&d.alternate.memoizedState.cachePool!==null&&(y=d.alternate.memoizedState.cachePool.pool),x=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(x=d.memoizedState.cachePool.pool),x!==y&&(d.flags|=2048)),f!==s&&f&&(l.child.flags|=8192),zh(l,l.updateQueue),jt(l),null);case 4:return De(),s===null&&qp(l.stateNode.containerInfo),jt(l),null;case 10:return ba(l.type),jt(l),null;case 19:if(se(tn),d=l.memoizedState,d===null)return jt(l),null;if(y=(l.flags&128)!==0,x=d.rendering,x===null)if(y)wu(d,!1);else{if(Qt!==0||s!==null&&(s.flags&128)!==0)for(s=l.child;s!==null;){if(x=Nh(s),x!==null){for(l.flags|=128,wu(d,!1),s=x.updateQueue,l.updateQueue=s,zh(l,s),l.subtreeFlags=0,s=f,f=l.child;f!==null;)u2(f,s),f=f.sibling;return ve(tn,tn.current&1|2),nt&&wa(l,d.treeForkCount),l.child}s=s.sibling}d.tail!==null&&on()>Xh&&(l.flags|=128,y=!0,wu(d,!1),l.lanes=4194304)}else{if(!y)if(s=Nh(x),s!==null){if(l.flags|=128,y=!0,s=s.updateQueue,l.updateQueue=s,zh(l,s),wu(d,!0),d.tail===null&&d.tailMode==="hidden"&&!x.alternate&&!nt)return jt(l),null}else 2*on()-d.renderingStartTime>Xh&&f!==536870912&&(l.flags|=128,y=!0,wu(d,!1),l.lanes=4194304);d.isBackwards?(x.sibling=l.child,l.child=x):(s=d.last,s!==null?s.sibling=x:l.child=x,d.last=x)}return d.tail!==null?(s=d.tail,d.rendering=s,d.tail=s.sibling,d.renderingStartTime=on(),s.sibling=null,f=tn.current,ve(tn,y?f&1|2:f&1),nt&&wa(l,d.treeForkCount),s):(jt(l),null);case 22:case 23:return Pr(l),$1(),d=l.memoizedState!==null,s!==null?s.memoizedState!==null!==d&&(l.flags|=8192):d&&(l.flags|=8192),d?(f&536870912)!==0&&(l.flags&128)===0&&(jt(l),l.subtreeFlags&6&&(l.flags|=8192)):jt(l),f=l.updateQueue,f!==null&&zh(l,f.retryQueue),f=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(f=s.memoizedState.cachePool.pool),d=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(d=l.memoizedState.cachePool.pool),d!==f&&(l.flags|=2048),s!==null&&se(Ro),null;case 24:return f=null,s!==null&&(f=s.memoizedState.cache),l.memoizedState.cache!==f&&(l.flags|=2048),ba(hn),jt(l),null;case 25:return null;case 30:return null}throw Error(r(156,l.tag))}function wI(s,l){switch(O1(l),l.tag){case 1:return s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 3:return ba(hn),De(),s=l.flags,(s&65536)!==0&&(s&128)===0?(l.flags=s&-65537|128,l):null;case 26:case 27:case 5:return Gt(l),null;case 31:if(l.memoizedState!==null){if(Pr(l),l.alternate===null)throw Error(r(340));To()}return s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 13:if(Pr(l),s=l.memoizedState,s!==null&&s.dehydrated!==null){if(l.alternate===null)throw Error(r(340));To()}return s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 19:return se(tn),null;case 4:return De(),null;case 10:return ba(l.type),null;case 22:case 23:return Pr(l),$1(),s!==null&&se(Ro),s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 24:return ba(hn),null;case 25:return null;default:return null}}function j_(s,l){switch(O1(l),l.tag){case 3:ba(hn),De();break;case 26:case 27:case 5:Gt(l);break;case 4:De();break;case 31:l.memoizedState!==null&&Pr(l);break;case 13:Pr(l);break;case 19:se(tn);break;case 10:ba(l.type);break;case 22:case 23:Pr(l),$1(),s!==null&&se(Ro);break;case 24:ba(hn)}}function Au(s,l){try{var f=l.updateQueue,d=f!==null?f.lastEffect:null;if(d!==null){var y=d.next;f=y;do{if((f.tag&s)===s){d=void 0;var x=f.create,C=f.inst;d=x(),C.destroy=d}f=f.next}while(f!==y)}}catch(B){xt(l,l.return,B)}}function ms(s,l,f){try{var d=l.updateQueue,y=d!==null?d.lastEffect:null;if(y!==null){var x=y.next;d=x;do{if((d.tag&s)===s){var C=d.inst,B=C.destroy;if(B!==void 0){C.destroy=void 0,y=l;var $=f,J=B;try{J()}catch(oe){xt(y,$,oe)}}}d=d.next}while(d!==x)}}catch(oe){xt(l,l.return,oe)}}function B_(s){var l=s.updateQueue;if(l!==null){var f=s.stateNode;try{I2(l,f)}catch(d){xt(s,s.return,d)}}}function V_(s,l,f){f.props=ko(s.type,s.memoizedProps),f.state=s.memoizedState;try{f.componentWillUnmount()}catch(d){xt(s,l,d)}}function bu(s,l){try{var f=s.ref;if(f!==null){switch(s.tag){case 26:case 27:case 5:var d=s.stateNode;break;case 30:d=s.stateNode;break;default:d=s.stateNode}typeof f=="function"?s.refCleanup=f(d):f.current=d}}catch(y){xt(s,l,y)}}function na(s,l){var f=s.ref,d=s.refCleanup;if(f!==null)if(typeof d=="function")try{d()}catch(y){xt(s,l,y)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof f=="function")try{f(null)}catch(y){xt(s,l,y)}else f.current=null}function F_(s){var l=s.type,f=s.memoizedProps,d=s.stateNode;try{e:switch(l){case"button":case"input":case"select":case"textarea":f.autoFocus&&d.focus();break e;case"img":f.src?d.src=f.src:f.srcSet&&(d.srcset=f.srcSet)}}catch(y){xt(s,s.return,y)}}function bp(s,l,f){try{var d=s.stateNode;GI(d,s.type,f,l),d[Nn]=l}catch(y){xt(s,s.return,y)}}function U_(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&ws(s.type)||s.tag===4}function Sp(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||U_(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&ws(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function Cp(s,l,f){var d=s.tag;if(d===5||d===6)s=s.stateNode,l?(f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f).insertBefore(s,l):(l=f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f,l.appendChild(s),f=f._reactRootContainer,f!=null||l.onclick!==null||(l.onclick=pi));else if(d!==4&&(d===27&&ws(s.type)&&(f=s.stateNode,l=null),s=s.child,s!==null))for(Cp(s,l,f),s=s.sibling;s!==null;)Cp(s,l,f),s=s.sibling}function Hh(s,l,f){var d=s.tag;if(d===5||d===6)s=s.stateNode,l?f.insertBefore(s,l):f.appendChild(s);else if(d!==4&&(d===27&&ws(s.type)&&(f=s.stateNode),s=s.child,s!==null))for(Hh(s,l,f),s=s.sibling;s!==null;)Hh(s,l,f),s=s.sibling}function z_(s){var l=s.stateNode,f=s.memoizedProps;try{for(var d=s.type,y=l.attributes;y.length;)l.removeAttributeNode(y[0]);qn(l,d,f),l[cn]=s,l[Nn]=f}catch(x){xt(s,s.return,x)}}var Na=!1,mn=!1,Tp=!1,H_=typeof WeakSet=="function"?WeakSet:Set,On=null;function AI(s,l){if(s=s.containerInfo,Yp=ud,s=t2(s),x1(s)){if("selectionStart"in s)var f={start:s.selectionStart,end:s.selectionEnd};else e:{f=(f=s.ownerDocument)&&f.defaultView||window;var d=f.getSelection&&f.getSelection();if(d&&d.rangeCount!==0){f=d.anchorNode;var y=d.anchorOffset,x=d.focusNode;d=d.focusOffset;try{f.nodeType,x.nodeType}catch{f=null;break e}var C=0,B=-1,$=-1,J=0,oe=0,fe=s,te=null;t:for(;;){for(var re;fe!==f||y!==0&&fe.nodeType!==3||(B=C+y),fe!==x||d!==0&&fe.nodeType!==3||($=C+d),fe.nodeType===3&&(C+=fe.nodeValue.length),(re=fe.firstChild)!==null;)te=fe,fe=re;for(;;){if(fe===s)break t;if(te===f&&++J===y&&(B=C),te===x&&++oe===d&&($=C),(re=fe.nextSibling)!==null)break;fe=te,te=fe.parentNode}fe=re}f=B===-1||$===-1?null:{start:B,end:$}}else f=null}f=f||{start:0,end:0}}else f=null;for(Kp={focusedElem:s,selectionRange:f},ud=!1,On=l;On!==null;)if(l=On,s=l.child,(l.subtreeFlags&1028)!==0&&s!==null)s.return=l,On=s;else for(;On!==null;){switch(l=On,x=l.alternate,s=l.flags,l.tag){case 0:if((s&4)!==0&&(s=l.updateQueue,s=s!==null?s.events:null,s!==null))for(f=0;f<s.length;f++)y=s[f],y.ref.impl=y.nextImpl;break;case 11:case 15:break;case 1:if((s&1024)!==0&&x!==null){s=void 0,f=l,y=x.memoizedProps,x=x.memoizedState,d=f.stateNode;try{var Ae=ko(f.type,y);s=d.getSnapshotBeforeUpdate(Ae,x),d.__reactInternalSnapshotBeforeUpdate=s}catch(Le){xt(f,f.return,Le)}}break;case 3:if((s&1024)!==0){if(s=l.stateNode.containerInfo,f=s.nodeType,f===9)Zp(s);else if(f===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":Zp(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(r(163))}if(s=l.sibling,s!==null){s.return=l.return,On=s;break}On=l.return}}function G_(s,l,f){var d=f.flags;switch(f.tag){case 0:case 11:case 15:Oa(s,f),d&4&&Au(5,f);break;case 1:if(Oa(s,f),d&4)if(s=f.stateNode,l===null)try{s.componentDidMount()}catch(C){xt(f,f.return,C)}else{var y=ko(f.type,l.memoizedProps);l=l.memoizedState;try{s.componentDidUpdate(y,l,s.__reactInternalSnapshotBeforeUpdate)}catch(C){xt(f,f.return,C)}}d&64&&B_(f),d&512&&bu(f,f.return);break;case 3:if(Oa(s,f),d&64&&(s=f.updateQueue,s!==null)){if(l=null,f.child!==null)switch(f.child.tag){case 27:case 5:l=f.child.stateNode;break;case 1:l=f.child.stateNode}try{I2(s,l)}catch(C){xt(f,f.return,C)}}break;case 27:l===null&&d&4&&z_(f);case 26:case 5:Oa(s,f),l===null&&d&4&&F_(f),d&512&&bu(f,f.return);break;case 12:Oa(s,f);break;case 31:Oa(s,f),d&4&&X_(s,f);break;case 13:Oa(s,f),d&4&&Y_(s,f),d&64&&(s=f.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(f=DI.bind(null,f),ZI(s,f))));break;case 22:if(d=f.memoizedState!==null||Na,!d){l=l!==null&&l.memoizedState!==null||mn,y=Na;var x=mn;Na=d,(mn=l)&&!x?Da(s,f,(f.subtreeFlags&8772)!==0):Oa(s,f),Na=y,mn=x}break;case 30:break;default:Oa(s,f)}}function q_(s){var l=s.alternate;l!==null&&(s.alternate=null,q_(l)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(l=s.stateNode,l!==null&&ll(l)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var Ut=null,vr=!1;function Ra(s,l,f){for(f=f.child;f!==null;)$_(s,l,f),f=f.sibling}function $_(s,l,f){if(Fn&&typeof Fn.onCommitFiberUnmount=="function")try{Fn.onCommitFiberUnmount(ui,f)}catch{}switch(f.tag){case 26:mn||na(f,l),Ra(s,l,f),f.memoizedState?f.memoizedState.count--:f.stateNode&&(f=f.stateNode,f.parentNode.removeChild(f));break;case 27:mn||na(f,l);var d=Ut,y=vr;ws(f.type)&&(Ut=f.stateNode,vr=!1),Ra(s,l,f),Mu(f.stateNode),Ut=d,vr=y;break;case 5:mn||na(f,l);case 6:if(d=Ut,y=vr,Ut=null,Ra(s,l,f),Ut=d,vr=y,Ut!==null)if(vr)try{(Ut.nodeType===9?Ut.body:Ut.nodeName==="HTML"?Ut.ownerDocument.body:Ut).removeChild(f.stateNode)}catch(x){xt(f,l,x)}else try{Ut.removeChild(f.stateNode)}catch(x){xt(f,l,x)}break;case 18:Ut!==null&&(vr?(s=Ut,Bx(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,f.stateNode),$l(s)):Bx(Ut,f.stateNode));break;case 4:d=Ut,y=vr,Ut=f.stateNode.containerInfo,vr=!0,Ra(s,l,f),Ut=d,vr=y;break;case 0:case 11:case 14:case 15:ms(2,f,l),mn||ms(4,f,l),Ra(s,l,f);break;case 1:mn||(na(f,l),d=f.stateNode,typeof d.componentWillUnmount=="function"&&V_(f,l,d)),Ra(s,l,f);break;case 21:Ra(s,l,f);break;case 22:mn=(d=mn)||f.memoizedState!==null,Ra(s,l,f),mn=d;break;default:Ra(s,l,f)}}function X_(s,l){if(l.memoizedState===null&&(s=l.alternate,s!==null&&(s=s.memoizedState,s!==null))){s=s.dehydrated;try{$l(s)}catch(f){xt(l,l.return,f)}}}function Y_(s,l){if(l.memoizedState===null&&(s=l.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{$l(s)}catch(f){xt(l,l.return,f)}}function bI(s){switch(s.tag){case 31:case 13:case 19:var l=s.stateNode;return l===null&&(l=s.stateNode=new H_),l;case 22:return s=s.stateNode,l=s._retryCache,l===null&&(l=s._retryCache=new H_),l;default:throw Error(r(435,s.tag))}}function Gh(s,l){var f=bI(s);l.forEach(function(d){if(!f.has(d)){f.add(d);var y=MI.bind(null,s,d);d.then(y,y)}})}function yr(s,l){var f=l.deletions;if(f!==null)for(var d=0;d<f.length;d++){var y=f[d],x=s,C=l,B=C;e:for(;B!==null;){switch(B.tag){case 27:if(ws(B.type)){Ut=B.stateNode,vr=!1;break e}break;case 5:Ut=B.stateNode,vr=!1;break e;case 3:case 4:Ut=B.stateNode.containerInfo,vr=!0;break e}B=B.return}if(Ut===null)throw Error(r(160));$_(x,C,y),Ut=null,vr=!1,x=y.alternate,x!==null&&(x.return=null),y.return=null}if(l.subtreeFlags&13886)for(l=l.child;l!==null;)K_(l,s),l=l.sibling}var xi=null;function K_(s,l){var f=s.alternate,d=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:yr(l,s),_r(s),d&4&&(ms(3,s,s.return),Au(3,s),ms(5,s,s.return));break;case 1:yr(l,s),_r(s),d&512&&(mn||f===null||na(f,f.return)),d&64&&Na&&(s=s.updateQueue,s!==null&&(d=s.callbacks,d!==null&&(f=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=f===null?d:f.concat(d))));break;case 26:var y=xi;if(yr(l,s),_r(s),d&512&&(mn||f===null||na(f,f.return)),d&4){var x=f!==null?f.memoizedState:null;if(d=s.memoizedState,f===null)if(d===null)if(s.stateNode===null){e:{d=s.type,f=s.memoizedProps,y=y.ownerDocument||y;t:switch(d){case"title":x=y.getElementsByTagName("title")[0],(!x||x[zi]||x[cn]||x.namespaceURI==="http://www.w3.org/2000/svg"||x.hasAttribute("itemprop"))&&(x=y.createElement(d),y.head.insertBefore(x,y.querySelector("head > title"))),qn(x,d,f),x[cn]=s,un(x),d=x;break e;case"link":var C=Kx("link","href",y).get(d+(f.href||""));if(C){for(var B=0;B<C.length;B++)if(x=C[B],x.getAttribute("href")===(f.href==null||f.href===""?null:f.href)&&x.getAttribute("rel")===(f.rel==null?null:f.rel)&&x.getAttribute("title")===(f.title==null?null:f.title)&&x.getAttribute("crossorigin")===(f.crossOrigin==null?null:f.crossOrigin)){C.splice(B,1);break t}}x=y.createElement(d),qn(x,d,f),y.head.appendChild(x);break;case"meta":if(C=Kx("meta","content",y).get(d+(f.content||""))){for(B=0;B<C.length;B++)if(x=C[B],x.getAttribute("content")===(f.content==null?null:""+f.content)&&x.getAttribute("name")===(f.name==null?null:f.name)&&x.getAttribute("property")===(f.property==null?null:f.property)&&x.getAttribute("http-equiv")===(f.httpEquiv==null?null:f.httpEquiv)&&x.getAttribute("charset")===(f.charSet==null?null:f.charSet)){C.splice(B,1);break t}}x=y.createElement(d),qn(x,d,f),y.head.appendChild(x);break;default:throw Error(r(468,d))}x[cn]=s,un(x),d=x}s.stateNode=d}else Wx(y,s.type,s.stateNode);else s.stateNode=Yx(y,d,s.memoizedProps);else x!==d?(x===null?f.stateNode!==null&&(f=f.stateNode,f.parentNode.removeChild(f)):x.count--,d===null?Wx(y,s.type,s.stateNode):Yx(y,d,s.memoizedProps)):d===null&&s.stateNode!==null&&bp(s,s.memoizedProps,f.memoizedProps)}break;case 27:yr(l,s),_r(s),d&512&&(mn||f===null||na(f,f.return)),f!==null&&d&4&&bp(s,s.memoizedProps,f.memoizedProps);break;case 5:if(yr(l,s),_r(s),d&512&&(mn||f===null||na(f,f.return)),s.flags&32){y=s.stateNode;try{gr(y,"")}catch(Ae){xt(s,s.return,Ae)}}d&4&&s.stateNode!=null&&(y=s.memoizedProps,bp(s,y,f!==null?f.memoizedProps:y)),d&1024&&(Tp=!0);break;case 6:if(yr(l,s),_r(s),d&4){if(s.stateNode===null)throw Error(r(162));d=s.memoizedProps,f=s.stateNode;try{f.nodeValue=d}catch(Ae){xt(s,s.return,Ae)}}break;case 3:if(sd=null,y=xi,xi=id(l.containerInfo),yr(l,s),xi=y,_r(s),d&4&&f!==null&&f.memoizedState.isDehydrated)try{$l(l.containerInfo)}catch(Ae){xt(s,s.return,Ae)}Tp&&(Tp=!1,W_(s));break;case 4:d=xi,xi=id(s.stateNode.containerInfo),yr(l,s),_r(s),xi=d;break;case 12:yr(l,s),_r(s);break;case 31:yr(l,s),_r(s),d&4&&(d=s.updateQueue,d!==null&&(s.updateQueue=null,Gh(s,d)));break;case 13:yr(l,s),_r(s),s.child.flags&8192&&s.memoizedState!==null!=(f!==null&&f.memoizedState!==null)&&($h=on()),d&4&&(d=s.updateQueue,d!==null&&(s.updateQueue=null,Gh(s,d)));break;case 22:y=s.memoizedState!==null;var $=f!==null&&f.memoizedState!==null,J=Na,oe=mn;if(Na=J||y,mn=oe||$,yr(l,s),mn=oe,Na=J,_r(s),d&8192)e:for(l=s.stateNode,l._visibility=y?l._visibility&-2:l._visibility|1,y&&(f===null||$||Na||mn||Lo(s)),f=null,l=s;;){if(l.tag===5||l.tag===26){if(f===null){$=f=l;try{if(x=$.stateNode,y)C=x.style,typeof C.setProperty=="function"?C.setProperty("display","none","important"):C.display="none";else{B=$.stateNode;var fe=$.memoizedProps.style,te=fe!=null&&fe.hasOwnProperty("display")?fe.display:null;B.style.display=te==null||typeof te=="boolean"?"":(""+te).trim()}}catch(Ae){xt($,$.return,Ae)}}}else if(l.tag===6){if(f===null){$=l;try{$.stateNode.nodeValue=y?"":$.memoizedProps}catch(Ae){xt($,$.return,Ae)}}}else if(l.tag===18){if(f===null){$=l;try{var re=$.stateNode;y?Vx(re,!0):Vx($.stateNode,!1)}catch(Ae){xt($,$.return,Ae)}}}else if((l.tag!==22&&l.tag!==23||l.memoizedState===null||l===s)&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===s)break e;for(;l.sibling===null;){if(l.return===null||l.return===s)break e;f===l&&(f=null),l=l.return}f===l&&(f=null),l.sibling.return=l.return,l=l.sibling}d&4&&(d=s.updateQueue,d!==null&&(f=d.retryQueue,f!==null&&(d.retryQueue=null,Gh(s,f))));break;case 19:yr(l,s),_r(s),d&4&&(d=s.updateQueue,d!==null&&(s.updateQueue=null,Gh(s,d)));break;case 30:break;case 21:break;default:yr(l,s),_r(s)}}function _r(s){var l=s.flags;if(l&2){try{for(var f,d=s.return;d!==null;){if(U_(d)){f=d;break}d=d.return}if(f==null)throw Error(r(160));switch(f.tag){case 27:var y=f.stateNode,x=Sp(s);Hh(s,x,y);break;case 5:var C=f.stateNode;f.flags&32&&(gr(C,""),f.flags&=-33);var B=Sp(s);Hh(s,B,C);break;case 3:case 4:var $=f.stateNode.containerInfo,J=Sp(s);Cp(s,J,$);break;default:throw Error(r(161))}}catch(oe){xt(s,s.return,oe)}s.flags&=-3}l&4096&&(s.flags&=-4097)}function W_(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var l=s;W_(l),l.tag===5&&l.flags&1024&&l.stateNode.reset(),s=s.sibling}}function Oa(s,l){if(l.subtreeFlags&8772)for(l=l.child;l!==null;)G_(s,l.alternate,l),l=l.sibling}function Lo(s){for(s=s.child;s!==null;){var l=s;switch(l.tag){case 0:case 11:case 14:case 15:ms(4,l,l.return),Lo(l);break;case 1:na(l,l.return);var f=l.stateNode;typeof f.componentWillUnmount=="function"&&V_(l,l.return,f),Lo(l);break;case 27:Mu(l.stateNode);case 26:case 5:na(l,l.return),Lo(l);break;case 22:l.memoizedState===null&&Lo(l);break;case 30:Lo(l);break;default:Lo(l)}s=s.sibling}}function Da(s,l,f){for(f=f&&(l.subtreeFlags&8772)!==0,l=l.child;l!==null;){var d=l.alternate,y=s,x=l,C=x.flags;switch(x.tag){case 0:case 11:case 15:Da(y,x,f),Au(4,x);break;case 1:if(Da(y,x,f),d=x,y=d.stateNode,typeof y.componentDidMount=="function")try{y.componentDidMount()}catch(J){xt(d,d.return,J)}if(d=x,y=d.updateQueue,y!==null){var B=d.stateNode;try{var $=y.shared.hiddenCallbacks;if($!==null)for(y.shared.hiddenCallbacks=null,y=0;y<$.length;y++)T2($[y],B)}catch(J){xt(d,d.return,J)}}f&&C&64&&B_(x),bu(x,x.return);break;case 27:z_(x);case 26:case 5:Da(y,x,f),f&&d===null&&C&4&&F_(x),bu(x,x.return);break;case 12:Da(y,x,f);break;case 31:Da(y,x,f),f&&C&4&&X_(y,x);break;case 13:Da(y,x,f),f&&C&4&&Y_(y,x);break;case 22:x.memoizedState===null&&Da(y,x,f),bu(x,x.return);break;case 30:break;default:Da(y,x,f)}l=l.sibling}}function Ip(s,l){var f=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(f=s.memoizedState.cachePool.pool),s=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(s=l.memoizedState.cachePool.pool),s!==f&&(s!=null&&s.refCount++,f!=null&&uu(f))}function Np(s,l){s=null,l.alternate!==null&&(s=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==s&&(l.refCount++,s!=null&&uu(s))}function Ei(s,l,f,d){if(l.subtreeFlags&10256)for(l=l.child;l!==null;)Q_(s,l,f,d),l=l.sibling}function Q_(s,l,f,d){var y=l.flags;switch(l.tag){case 0:case 11:case 15:Ei(s,l,f,d),y&2048&&Au(9,l);break;case 1:Ei(s,l,f,d);break;case 3:Ei(s,l,f,d),y&2048&&(s=null,l.alternate!==null&&(s=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==s&&(l.refCount++,s!=null&&uu(s)));break;case 12:if(y&2048){Ei(s,l,f,d),s=l.stateNode;try{var x=l.memoizedProps,C=x.id,B=x.onPostCommit;typeof B=="function"&&B(C,l.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch($){xt(l,l.return,$)}}else Ei(s,l,f,d);break;case 31:Ei(s,l,f,d);break;case 13:Ei(s,l,f,d);break;case 23:break;case 22:x=l.stateNode,C=l.alternate,l.memoizedState!==null?x._visibility&2?Ei(s,l,f,d):Su(s,l):x._visibility&2?Ei(s,l,f,d):(x._visibility|=2,kl(s,l,f,d,(l.subtreeFlags&10256)!==0||!1)),y&2048&&Ip(C,l);break;case 24:Ei(s,l,f,d),y&2048&&Np(l.alternate,l);break;default:Ei(s,l,f,d)}}function kl(s,l,f,d,y){for(y=y&&((l.subtreeFlags&10256)!==0||!1),l=l.child;l!==null;){var x=s,C=l,B=f,$=d,J=C.flags;switch(C.tag){case 0:case 11:case 15:kl(x,C,B,$,y),Au(8,C);break;case 23:break;case 22:var oe=C.stateNode;C.memoizedState!==null?oe._visibility&2?kl(x,C,B,$,y):Su(x,C):(oe._visibility|=2,kl(x,C,B,$,y)),y&&J&2048&&Ip(C.alternate,C);break;case 24:kl(x,C,B,$,y),y&&J&2048&&Np(C.alternate,C);break;default:kl(x,C,B,$,y)}l=l.sibling}}function Su(s,l){if(l.subtreeFlags&10256)for(l=l.child;l!==null;){var f=s,d=l,y=d.flags;switch(d.tag){case 22:Su(f,d),y&2048&&Ip(d.alternate,d);break;case 24:Su(f,d),y&2048&&Np(d.alternate,d);break;default:Su(f,d)}l=l.sibling}}var Cu=8192;function Ll(s,l,f){if(s.subtreeFlags&Cu)for(s=s.child;s!==null;)Z_(s,l,f),s=s.sibling}function Z_(s,l,f){switch(s.tag){case 26:Ll(s,l,f),s.flags&Cu&&s.memoizedState!==null&&u4(f,xi,s.memoizedState,s.memoizedProps);break;case 5:Ll(s,l,f);break;case 3:case 4:var d=xi;xi=id(s.stateNode.containerInfo),Ll(s,l,f),xi=d;break;case 22:s.memoizedState===null&&(d=s.alternate,d!==null&&d.memoizedState!==null?(d=Cu,Cu=16777216,Ll(s,l,f),Cu=d):Ll(s,l,f));break;default:Ll(s,l,f)}}function J_(s){var l=s.alternate;if(l!==null&&(s=l.child,s!==null)){l.child=null;do l=s.sibling,s.sibling=null,s=l;while(s!==null)}}function Tu(s){var l=s.deletions;if((s.flags&16)!==0){if(l!==null)for(var f=0;f<l.length;f++){var d=l[f];On=d,tx(d,s)}J_(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)ex(s),s=s.sibling}function ex(s){switch(s.tag){case 0:case 11:case 15:Tu(s),s.flags&2048&&ms(9,s,s.return);break;case 3:Tu(s);break;case 12:Tu(s);break;case 22:var l=s.stateNode;s.memoizedState!==null&&l._visibility&2&&(s.return===null||s.return.tag!==13)?(l._visibility&=-3,qh(s)):Tu(s);break;default:Tu(s)}}function qh(s){var l=s.deletions;if((s.flags&16)!==0){if(l!==null)for(var f=0;f<l.length;f++){var d=l[f];On=d,tx(d,s)}J_(s)}for(s=s.child;s!==null;){switch(l=s,l.tag){case 0:case 11:case 15:ms(8,l,l.return),qh(l);break;case 22:f=l.stateNode,f._visibility&2&&(f._visibility&=-3,qh(l));break;default:qh(l)}s=s.sibling}}function tx(s,l){for(;On!==null;){var f=On;switch(f.tag){case 0:case 11:case 15:ms(8,f,l);break;case 23:case 22:if(f.memoizedState!==null&&f.memoizedState.cachePool!==null){var d=f.memoizedState.cachePool.pool;d!=null&&d.refCount++}break;case 24:uu(f.memoizedState.cache)}if(d=f.child,d!==null)d.return=f,On=d;else e:for(f=s;On!==null;){d=On;var y=d.sibling,x=d.return;if(q_(d),d===f){On=null;break e}if(y!==null){y.return=x,On=y;break e}On=x}}}var SI={getCacheForType:function(s){var l=Hn(hn),f=l.data.get(s);return f===void 0&&(f=s(),l.data.set(s,f)),f},cacheSignal:function(){return Hn(hn).controller.signal}},CI=typeof WeakMap=="function"?WeakMap:Map,dt=0,Dt=null,Ke=null,Qe=0,_t=0,kr=null,gs=!1,jl=!1,Rp=!1,Ma=0,Qt=0,vs=0,jo=0,Op=0,Lr=0,Bl=0,Iu=null,xr=null,Dp=!1,$h=0,nx=0,Xh=1/0,Yh=null,ys=null,En=0,_s=null,Vl=null,Pa=0,Mp=0,Pp=null,rx=null,Nu=0,kp=null;function jr(){return(dt&2)!==0&&Qe!==0?Qe&-Qe:q.T!==null?Up():Kf()}function ix(){if(Lr===0)if((Qe&536870912)===0||nt){var s=co;co<<=1,(co&3932160)===0&&(co=262144),Lr=s}else Lr=536870912;return s=Mr.current,s!==null&&(s.flags|=32),Lr}function Er(s,l,f){(s===Dt&&(_t===2||_t===9)||s.cancelPendingCommit!==null)&&(Fl(s,0),xs(s,Qe,Lr,!1)),uo(s,f),((dt&2)===0||s!==Dt)&&(s===Dt&&((dt&2)===0&&(jo|=f),Qt===4&&xs(s,Qe,Lr,!1)),ra(s))}function ax(s,l,f){if((dt&6)!==0)throw Error(r(327));var d=!f&&(l&127)===0&&(l&s.expiredLanes)===0||fi(s,l),y=d?NI(s,l):jp(s,l,!0),x=d;do{if(y===0){jl&&!d&&xs(s,l,0,!1);break}else{if(f=s.current.alternate,x&&!TI(f)){y=jp(s,l,!1),x=!1;continue}if(y===2){if(x=l,s.errorRecoveryDisabledLanes&x)var C=0;else C=s.pendingLanes&-536870913,C=C!==0?C:C&536870912?536870912:0;if(C!==0){l=C;e:{var B=s;y=Iu;var $=B.current.memoizedState.isDehydrated;if($&&(Fl(B,C).flags|=256),C=jp(B,C,!1),C!==2){if(Rp&&!$){B.errorRecoveryDisabledLanes|=x,jo|=x,y=4;break e}x=xr,xr=y,x!==null&&(xr===null?xr=x:xr.push.apply(xr,x))}y=C}if(x=!1,y!==2)continue}}if(y===1){Fl(s,0),xs(s,l,0,!0);break}e:{switch(d=s,x=y,x){case 0:case 1:throw Error(r(345));case 4:if((l&4194048)!==l)break;case 6:xs(d,l,Lr,!gs);break e;case 2:xr=null;break;case 3:case 5:break;default:throw Error(r(329))}if((l&62914560)===l&&(y=$h+300-on(),10<y)){if(xs(d,l,Lr,!gs),Vi(d,0,!0)!==0)break e;Pa=l,d.timeoutHandle=Lx(sx.bind(null,d,f,xr,Yh,Dp,l,Lr,jo,Bl,gs,x,"Throttled",-0,0),y);break e}sx(d,f,xr,Yh,Dp,l,Lr,jo,Bl,gs,x,null,-0,0)}}break}while(!0);ra(s)}function sx(s,l,f,d,y,x,C,B,$,J,oe,fe,te,re){if(s.timeoutHandle=-1,fe=l.subtreeFlags,fe&8192||(fe&16785408)===16785408){fe={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:pi},Z_(l,x,fe);var Ae=(x&62914560)===x?$h-on():(x&4194048)===x?nx-on():0;if(Ae=f4(fe,Ae),Ae!==null){Pa=x,s.cancelPendingCommit=Ae(px.bind(null,s,l,x,f,d,y,C,B,$,oe,fe,null,te,re)),xs(s,x,C,!J);return}}px(s,l,x,f,d,y,C,B,$)}function TI(s){for(var l=s;;){var f=l.tag;if((f===0||f===11||f===15)&&l.flags&16384&&(f=l.updateQueue,f!==null&&(f=f.stores,f!==null)))for(var d=0;d<f.length;d++){var y=f[d],x=y.getSnapshot;y=y.value;try{if(!Or(x(),y))return!1}catch{return!1}}if(f=l.child,l.subtreeFlags&16384&&f!==null)f.return=l,l=f;else{if(l===s)break;for(;l.sibling===null;){if(l.return===null||l.return===s)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function xs(s,l,f,d){l&=~Op,l&=~jo,s.suspendedLanes|=l,s.pingedLanes&=~l,d&&(s.warmLanes|=l),d=s.expirationTimes;for(var y=l;0<y;){var x=31-Jt(y),C=1<<x;d[x]=-1,y&=~C}f!==0&&fo(s,f,l)}function Kh(){return(dt&6)===0?(Ru(0),!1):!0}function Lp(){if(Ke!==null){if(_t===0)var s=Ke.return;else s=Ke,Aa=Io=null,Z1(s),Rl=null,hu=0,s=Ke;for(;s!==null;)j_(s.alternate,s),s=s.return;Ke=null}}function Fl(s,l){var f=s.timeoutHandle;f!==-1&&(s.timeoutHandle=-1,XI(f)),f=s.cancelPendingCommit,f!==null&&(s.cancelPendingCommit=null,f()),Pa=0,Lp(),Dt=s,Ke=f=Ea(s.current,null),Qe=l,_t=0,kr=null,gs=!1,jl=fi(s,l),Rp=!1,Bl=Lr=Op=jo=vs=Qt=0,xr=Iu=null,Dp=!1,(l&8)!==0&&(l|=l&32);var d=s.entangledLanes;if(d!==0)for(s=s.entanglements,d&=l;0<d;){var y=31-Jt(d),x=1<<y;l|=s[y],d&=~x}return Ma=l,gh(),f}function ox(s,l){He=null,q.H=xu,l===Nl||l===bh?(l=A2(),_t=3):l===F1?(l=A2(),_t=4):_t=l===pp?8:l!==null&&typeof l=="object"&&typeof l.then=="function"?6:1,kr=l,Ke===null&&(Qt=1,Bh(s,Kr(l,s.current)))}function lx(){var s=Mr.current;return s===null?!0:(Qe&4194048)===Qe?Jr===null:(Qe&62914560)===Qe||(Qe&536870912)!==0?s===Jr:!1}function cx(){var s=q.H;return q.H=xu,s===null?xu:s}function ux(){var s=q.A;return q.A=SI,s}function Wh(){Qt=4,gs||(Qe&4194048)!==Qe&&Mr.current!==null||(jl=!0),(vs&134217727)===0&&(jo&134217727)===0||Dt===null||xs(Dt,Qe,Lr,!1)}function jp(s,l,f){var d=dt;dt|=2;var y=cx(),x=ux();(Dt!==s||Qe!==l)&&(Yh=null,Fl(s,l)),l=!1;var C=Qt;e:do try{if(_t!==0&&Ke!==null){var B=Ke,$=kr;switch(_t){case 8:Lp(),C=6;break e;case 3:case 2:case 9:case 6:Mr.current===null&&(l=!0);var J=_t;if(_t=0,kr=null,Ul(s,B,$,J),f&&jl){C=0;break e}break;default:J=_t,_t=0,kr=null,Ul(s,B,$,J)}}II(),C=Qt;break}catch(oe){ox(s,oe)}while(!0);return l&&s.shellSuspendCounter++,Aa=Io=null,dt=d,q.H=y,q.A=x,Ke===null&&(Dt=null,Qe=0,gh()),C}function II(){for(;Ke!==null;)fx(Ke)}function NI(s,l){var f=dt;dt|=2;var d=cx(),y=ux();Dt!==s||Qe!==l?(Yh=null,Xh=on()+500,Fl(s,l)):jl=fi(s,l);e:do try{if(_t!==0&&Ke!==null){l=Ke;var x=kr;t:switch(_t){case 1:_t=0,kr=null,Ul(s,l,x,1);break;case 2:case 9:if(E2(x)){_t=0,kr=null,hx(l);break}l=function(){_t!==2&&_t!==9||Dt!==s||(_t=7),ra(s)},x.then(l,l);break e;case 3:_t=7;break e;case 4:_t=5;break e;case 7:E2(x)?(_t=0,kr=null,hx(l)):(_t=0,kr=null,Ul(s,l,x,7));break;case 5:var C=null;switch(Ke.tag){case 26:C=Ke.memoizedState;case 5:case 27:var B=Ke;if(C?Qx(C):B.stateNode.complete){_t=0,kr=null;var $=B.sibling;if($!==null)Ke=$;else{var J=B.return;J!==null?(Ke=J,Qh(J)):Ke=null}break t}}_t=0,kr=null,Ul(s,l,x,5);break;case 6:_t=0,kr=null,Ul(s,l,x,6);break;case 8:Lp(),Qt=6;break e;default:throw Error(r(462))}}RI();break}catch(oe){ox(s,oe)}while(!0);return Aa=Io=null,q.H=d,q.A=y,dt=f,Ke!==null?0:(Dt=null,Qe=0,gh(),Qt)}function RI(){for(;Ke!==null&&!Wa();)fx(Ke)}function fx(s){var l=k_(s.alternate,s,Ma);s.memoizedProps=s.pendingProps,l===null?Qh(s):Ke=l}function hx(s){var l=s,f=l.alternate;switch(l.tag){case 15:case 0:l=N_(f,l,l.pendingProps,l.type,void 0,Qe);break;case 11:l=N_(f,l,l.pendingProps,l.type.render,l.ref,Qe);break;case 5:Z1(l);default:j_(f,l),l=Ke=u2(l,Ma),l=k_(f,l,Ma)}s.memoizedProps=s.pendingProps,l===null?Qh(s):Ke=l}function Ul(s,l,f,d){Aa=Io=null,Z1(l),Rl=null,hu=0;var y=l.return;try{if(yI(s,y,l,f,Qe)){Qt=1,Bh(s,Kr(f,s.current)),Ke=null;return}}catch(x){if(y!==null)throw Ke=y,x;Qt=1,Bh(s,Kr(f,s.current)),Ke=null;return}l.flags&32768?(nt||d===1?s=!0:jl||(Qe&536870912)!==0?s=!1:(gs=s=!0,(d===2||d===9||d===3||d===6)&&(d=Mr.current,d!==null&&d.tag===13&&(d.flags|=16384))),dx(l,s)):Qh(l)}function Qh(s){var l=s;do{if((l.flags&32768)!==0){dx(l,gs);return}s=l.return;var f=EI(l.alternate,l,Ma);if(f!==null){Ke=f;return}if(l=l.sibling,l!==null){Ke=l;return}Ke=l=s}while(l!==null);Qt===0&&(Qt=5)}function dx(s,l){do{var f=wI(s.alternate,s);if(f!==null){f.flags&=32767,Ke=f;return}if(f=s.return,f!==null&&(f.flags|=32768,f.subtreeFlags=0,f.deletions=null),!l&&(s=s.sibling,s!==null)){Ke=s;return}Ke=s=f}while(s!==null);Qt=6,Ke=null}function px(s,l,f,d,y,x,C,B,$){s.cancelPendingCommit=null;do Zh();while(En!==0);if((dt&6)!==0)throw Error(r(327));if(l!==null){if(l===s.current)throw Error(r(177));if(x=l.lanes|l.childLanes,x|=S1,g1(s,f,x,C,B,$),s===Dt&&(Ke=Dt=null,Qe=0),Vl=l,_s=s,Pa=f,Mp=x,Pp=y,rx=d,(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,PI(Li,function(){return _x(),null})):(s.callbackNode=null,s.callbackPriority=0),d=(l.flags&13878)!==0,(l.subtreeFlags&13878)!==0||d){d=q.T,q.T=null,y=ce.p,ce.p=2,C=dt,dt|=4;try{AI(s,l,f)}finally{dt=C,ce.p=y,q.T=d}}En=1,mx(),gx(),vx()}}function mx(){if(En===1){En=0;var s=_s,l=Vl,f=(l.flags&13878)!==0;if((l.subtreeFlags&13878)!==0||f){f=q.T,q.T=null;var d=ce.p;ce.p=2;var y=dt;dt|=4;try{K_(l,s);var x=Kp,C=t2(s.containerInfo),B=x.focusedElem,$=x.selectionRange;if(C!==B&&B&&B.ownerDocument&&e2(B.ownerDocument.documentElement,B)){if($!==null&&x1(B)){var J=$.start,oe=$.end;if(oe===void 0&&(oe=J),"selectionStart"in B)B.selectionStart=J,B.selectionEnd=Math.min(oe,B.value.length);else{var fe=B.ownerDocument||document,te=fe&&fe.defaultView||window;if(te.getSelection){var re=te.getSelection(),Ae=B.textContent.length,Le=Math.min($.start,Ae),It=$.end===void 0?Le:Math.min($.end,Ae);!re.extend&&Le>It&&(C=It,It=Le,Le=C);var K=Jy(B,Le),Y=Jy(B,It);if(K&&Y&&(re.rangeCount!==1||re.anchorNode!==K.node||re.anchorOffset!==K.offset||re.focusNode!==Y.node||re.focusOffset!==Y.offset)){var Z=fe.createRange();Z.setStart(K.node,K.offset),re.removeAllRanges(),Le>It?(re.addRange(Z),re.extend(Y.node,Y.offset)):(Z.setEnd(Y.node,Y.offset),re.addRange(Z))}}}}for(fe=[],re=B;re=re.parentNode;)re.nodeType===1&&fe.push({element:re,left:re.scrollLeft,top:re.scrollTop});for(typeof B.focus=="function"&&B.focus(),B=0;B<fe.length;B++){var ue=fe[B];ue.element.scrollLeft=ue.left,ue.element.scrollTop=ue.top}}ud=!!Yp,Kp=Yp=null}finally{dt=y,ce.p=d,q.T=f}}s.current=l,En=2}}function gx(){if(En===2){En=0;var s=_s,l=Vl,f=(l.flags&8772)!==0;if((l.subtreeFlags&8772)!==0||f){f=q.T,q.T=null;var d=ce.p;ce.p=2;var y=dt;dt|=4;try{G_(s,l.alternate,l)}finally{dt=y,ce.p=d,q.T=f}}En=3}}function vx(){if(En===4||En===3){En=0,zr();var s=_s,l=Vl,f=Pa,d=rx;(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?En=5:(En=0,Vl=_s=null,yx(s,s.pendingLanes));var y=s.pendingLanes;if(y===0&&(ys=null),va(f),l=l.stateNode,Fn&&typeof Fn.onCommitFiberRoot=="function")try{Fn.onCommitFiberRoot(ui,l,void 0,(l.current.flags&128)===128)}catch{}if(d!==null){l=q.T,y=ce.p,ce.p=2,q.T=null;try{for(var x=s.onRecoverableError,C=0;C<d.length;C++){var B=d[C];x(B.value,{componentStack:B.stack})}}finally{q.T=l,ce.p=y}}(Pa&3)!==0&&Zh(),ra(s),y=s.pendingLanes,(f&261930)!==0&&(y&42)!==0?s===kp?Nu++:(Nu=0,kp=s):Nu=0,Ru(0)}}function yx(s,l){(s.pooledCacheLanes&=l)===0&&(l=s.pooledCache,l!=null&&(s.pooledCache=null,uu(l)))}function Zh(){return mx(),gx(),vx(),_x()}function _x(){if(En!==5)return!1;var s=_s,l=Mp;Mp=0;var f=va(Pa),d=q.T,y=ce.p;try{ce.p=32>f?32:f,q.T=null,f=Pp,Pp=null;var x=_s,C=Pa;if(En=0,Vl=_s=null,Pa=0,(dt&6)!==0)throw Error(r(331));var B=dt;if(dt|=4,ex(x.current),Q_(x,x.current,C,f),dt=B,Ru(0,!1),Fn&&typeof Fn.onPostCommitFiberRoot=="function")try{Fn.onPostCommitFiberRoot(ui,x)}catch{}return!0}finally{ce.p=y,q.T=d,yx(s,l)}}function xx(s,l,f){l=Kr(f,l),l=dp(s.stateNode,l,2),s=hs(s,l,2),s!==null&&(uo(s,2),ra(s))}function xt(s,l,f){if(s.tag===3)xx(s,s,f);else for(;l!==null;){if(l.tag===3){xx(l,s,f);break}else if(l.tag===1){var d=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(ys===null||!ys.has(d))){s=Kr(f,s),f=E_(2),d=hs(l,f,2),d!==null&&(w_(f,d,l,s),uo(d,2),ra(d));break}}l=l.return}}function Bp(s,l,f){var d=s.pingCache;if(d===null){d=s.pingCache=new CI;var y=new Set;d.set(l,y)}else y=d.get(l),y===void 0&&(y=new Set,d.set(l,y));y.has(f)||(Rp=!0,y.add(f),s=OI.bind(null,s,l,f),l.then(s,s))}function OI(s,l,f){var d=s.pingCache;d!==null&&d.delete(l),s.pingedLanes|=s.suspendedLanes&f,s.warmLanes&=~f,Dt===s&&(Qe&f)===f&&(Qt===4||Qt===3&&(Qe&62914560)===Qe&&300>on()-$h?(dt&2)===0&&Fl(s,0):Op|=f,Bl===Qe&&(Bl=0)),ra(s)}function Ex(s,l){l===0&&(l=Yf()),s=So(s,l),s!==null&&(uo(s,l),ra(s))}function DI(s){var l=s.memoizedState,f=0;l!==null&&(f=l.retryLane),Ex(s,f)}function MI(s,l){var f=0;switch(s.tag){case 31:case 13:var d=s.stateNode,y=s.memoizedState;y!==null&&(f=y.retryLane);break;case 19:d=s.stateNode;break;case 22:d=s.stateNode._retryCache;break;default:throw Error(r(314))}d!==null&&d.delete(l),Ex(s,f)}function PI(s,l){return bt(s,l)}var Jh=null,zl=null,Vp=!1,ed=!1,Fp=!1,Es=0;function ra(s){s!==zl&&s.next===null&&(zl===null?Jh=zl=s:zl=zl.next=s),ed=!0,Vp||(Vp=!0,LI())}function Ru(s,l){if(!Fp&&ed){Fp=!0;do for(var f=!1,d=Jh;d!==null;){if(s!==0){var y=d.pendingLanes;if(y===0)var x=0;else{var C=d.suspendedLanes,B=d.pingedLanes;x=(1<<31-Jt(42|s)+1)-1,x&=y&~(C&~B),x=x&201326741?x&201326741|1:x?x|2:0}x!==0&&(f=!0,Sx(d,x))}else x=Qe,x=Vi(d,d===Dt?x:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),(x&3)===0||fi(d,x)||(f=!0,Sx(d,x));d=d.next}while(f);Fp=!1}}function kI(){wx()}function wx(){ed=Vp=!1;var s=0;Es!==0&&$I()&&(s=Es);for(var l=on(),f=null,d=Jh;d!==null;){var y=d.next,x=Ax(d,l);x===0?(d.next=null,f===null?Jh=y:f.next=y,y===null&&(zl=f)):(f=d,(s!==0||(x&3)!==0)&&(ed=!0)),d=y}En!==0&&En!==5||Ru(s),Es!==0&&(Es=0)}function Ax(s,l){for(var f=s.suspendedLanes,d=s.pingedLanes,y=s.expirationTimes,x=s.pendingLanes&-62914561;0<x;){var C=31-Jt(x),B=1<<C,$=y[C];$===-1?((B&f)===0||(B&d)!==0)&&(y[C]=m1(B,l)):$<=l&&(s.expiredLanes|=B),x&=~B}if(l=Dt,f=Qe,f=Vi(s,s===l?f:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),d=s.callbackNode,f===0||s===l&&(_t===2||_t===9)||s.cancelPendingCommit!==null)return d!==null&&d!==null&&Vn(d),s.callbackNode=null,s.callbackPriority=0;if((f&3)===0||fi(s,f)){if(l=f&-f,l===s.callbackPriority)return l;switch(d!==null&&Vn(d),va(f)){case 2:case 8:f=lo;break;case 32:f=Li;break;case 268435456:f=qe;break;default:f=Li}return d=bx.bind(null,s),f=bt(f,d),s.callbackPriority=l,s.callbackNode=f,l}return d!==null&&d!==null&&Vn(d),s.callbackPriority=2,s.callbackNode=null,2}function bx(s,l){if(En!==0&&En!==5)return s.callbackNode=null,s.callbackPriority=0,null;var f=s.callbackNode;if(Zh()&&s.callbackNode!==f)return null;var d=Qe;return d=Vi(s,s===Dt?d:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),d===0?null:(ax(s,d,l),Ax(s,on()),s.callbackNode!=null&&s.callbackNode===f?bx.bind(null,s):null)}function Sx(s,l){if(Zh())return null;ax(s,l,!0)}function LI(){YI(function(){(dt&6)!==0?bt(Ir,kI):wx()})}function Up(){if(Es===0){var s=Tl;s===0&&(s=ji,ji<<=1,(ji&261888)===0&&(ji=256)),Es=s}return Es}function Cx(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:hl(""+s)}function Tx(s,l){var f=l.ownerDocument.createElement("input");return f.name=l.name,f.value=l.value,s.id&&f.setAttribute("form",s.id),l.parentNode.insertBefore(f,l),s=new FormData(s),f.parentNode.removeChild(f),s}function jI(s,l,f,d,y){if(l==="submit"&&f&&f.stateNode===y){var x=Cx((y[Nn]||null).action),C=d.submitter;C&&(l=(l=C[Nn]||null)?Cx(l.formAction):C.getAttribute("formAction"),l!==null&&(x=l,C=null));var B=new Wi("action","action",null,d,y);s.push({event:B,listeners:[{instance:null,listener:function(){if(d.defaultPrevented){if(Es!==0){var $=C?Tx(y,C):new FormData(y);op(f,{pending:!0,data:$,method:y.method,action:x},null,$)}}else typeof x=="function"&&(B.preventDefault(),$=C?Tx(y,C):new FormData(y),op(f,{pending:!0,data:$,method:y.method,action:x},x,$))},currentTarget:y}]})}}for(var zp=0;zp<b1.length;zp++){var Hp=b1[zp],BI=Hp.toLowerCase(),VI=Hp[0].toUpperCase()+Hp.slice(1);_i(BI,"on"+VI)}_i(i2,"onAnimationEnd"),_i(a2,"onAnimationIteration"),_i(s2,"onAnimationStart"),_i("dblclick","onDoubleClick"),_i("focusin","onFocus"),_i("focusout","onBlur"),_i(tI,"onTransitionRun"),_i(nI,"onTransitionStart"),_i(rI,"onTransitionCancel"),_i(o2,"onTransitionEnd"),$i("onMouseEnter",["mouseout","mouseover"]),$i("onMouseLeave",["mouseout","mouseover"]),$i("onPointerEnter",["pointerout","pointerover"]),$i("onPointerLeave",["pointerout","pointerover"]),qi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),qi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),qi("onBeforeInput",["compositionend","keypress","textInput","paste"]),qi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),qi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),qi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ou="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),FI=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ou));function Ix(s,l){l=(l&4)!==0;for(var f=0;f<s.length;f++){var d=s[f],y=d.event;d=d.listeners;e:{var x=void 0;if(l)for(var C=d.length-1;0<=C;C--){var B=d[C],$=B.instance,J=B.currentTarget;if(B=B.listener,$!==x&&y.isPropagationStopped())break e;x=B,y.currentTarget=J;try{x(y)}catch(oe){mh(oe)}y.currentTarget=null,x=$}else for(C=0;C<d.length;C++){if(B=d[C],$=B.instance,J=B.currentTarget,B=B.listener,$!==x&&y.isPropagationStopped())break e;x=B,y.currentTarget=J;try{x(y)}catch(oe){mh(oe)}y.currentTarget=null,x=$}}}}function We(s,l){var f=l[ol];f===void 0&&(f=l[ol]=new Set);var d=s+"__bubble";f.has(d)||(Nx(l,s,2,!1),f.add(d))}function Gp(s,l,f){var d=0;l&&(d|=4),Nx(f,s,d,l)}var td="_reactListening"+Math.random().toString(36).slice(2);function qp(s){if(!s[td]){s[td]=!0,Hc.forEach(function(f){f!=="selectionchange"&&(FI.has(f)||Gp(f,!1,s),Gp(f,!0,s))});var l=s.nodeType===9?s:s.ownerDocument;l===null||l[td]||(l[td]=!0,Gp("selectionchange",!1,l))}}function Nx(s,l,f,d){switch(iE(l)){case 2:var y=p4;break;case 8:y=m4;break;default:y=sm}f=y.bind(null,l,f,s),y=void 0,!vo||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(y=!0),d?y!==void 0?s.addEventListener(l,f,{capture:!0,passive:y}):s.addEventListener(l,f,!0):y!==void 0?s.addEventListener(l,f,{passive:y}):s.addEventListener(l,f,!1)}function $p(s,l,f,d,y){var x=d;if((l&1)===0&&(l&2)===0&&d!==null)e:for(;;){if(d===null)return;var C=d.tag;if(C===3||C===4){var B=d.stateNode.containerInfo;if(B===y)break;if(C===4)for(C=d.return;C!==null;){var $=C.tag;if(($===3||$===4)&&C.stateNode.containerInfo===y)return;C=C.return}for(;B!==null;){if(C=Hi(B),C===null)return;if($=C.tag,$===5||$===6||$===26||$===27){d=x=C;continue e}B=B.parentNode}}d=d.return}ns(function(){var J=x,oe=qr(f),fe=[];e:{var te=l2.get(s);if(te!==void 0){var re=Wi,Ae=s;switch(s){case"keypress":if(_o(f)===0)break e;case"keydown":case"keyup":re=hh;break;case"focusin":Ae="focus",re=Eo;break;case"focusout":Ae="blur",re=Eo;break;case"beforeblur":case"afterblur":re=Eo;break;case"click":if(f.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":re=nu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":re=rh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":re=b;break;case i2:case a2:case s2:re=ah;break;case o2:re=F;break;case"scroll":case"scrollend":re=tu;break;case"wheel":re=ne;break;case"copy":case"cut":case"paste":re=sh;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":re=xa;break;case"toggle":case"beforetoggle":re=ze}var Le=(l&4)!==0,It=!Le&&(s==="scroll"||s==="scrollend"),K=Le?te!==null?te+"Capture":null:te;Le=[];for(var Y=J,Z;Y!==null;){var ue=Y;if(Z=ue.stateNode,ue=ue.tag,ue!==5&&ue!==26&&ue!==27||Z===null||K===null||(ue=mi(Y,K),ue!=null&&Le.push(Du(Y,ue,Z))),It)break;Y=Y.return}0<Le.length&&(te=new re(te,Ae,null,f,oe),fe.push({event:te,listeners:Le}))}}if((l&7)===0){e:{if(te=s==="mouseover"||s==="pointerover",re=s==="mouseout"||s==="pointerout",te&&f!==Zc&&(Ae=f.relatedTarget||f.fromElement)&&(Hi(Ae)||Ae[Ui]))break e;if((re||te)&&(te=oe.window===oe?oe:(te=oe.ownerDocument)?te.defaultView||te.parentWindow:window,re?(Ae=f.relatedTarget||f.toElement,re=J,Ae=Ae?Hi(Ae):null,Ae!==null&&(It=a(Ae),Le=Ae.tag,Ae!==It||Le!==5&&Le!==27&&Le!==6)&&(Ae=null)):(re=null,Ae=J),re!==Ae)){if(Le=nu,ue="onMouseLeave",K="onMouseEnter",Y="mouse",(s==="pointerout"||s==="pointerover")&&(Le=xa,ue="onPointerLeave",K="onPointerEnter",Y="pointer"),It=re==null?te:Nr(re),Z=Ae==null?te:Nr(Ae),te=new Le(ue,Y+"leave",re,f,oe),te.target=It,te.relatedTarget=Z,ue=null,Hi(oe)===J&&(Le=new Le(K,Y+"enter",Ae,f,oe),Le.target=Z,Le.relatedTarget=It,ue=Le),It=ue,re&&Ae)t:{for(Le=UI,K=re,Y=Ae,Z=0,ue=K;ue;ue=Le(ue))Z++;ue=0;for(var Oe=Y;Oe;Oe=Le(Oe))ue++;for(;0<Z-ue;)K=Le(K),Z--;for(;0<ue-Z;)Y=Le(Y),ue--;for(;Z--;){if(K===Y||Y!==null&&K===Y.alternate){Le=K;break t}K=Le(K),Y=Le(Y)}Le=null}else Le=null;re!==null&&Rx(fe,te,re,Le,!1),Ae!==null&&It!==null&&Rx(fe,It,Ae,Le,!0)}}e:{if(te=J?Nr(J):window,re=te.nodeName&&te.nodeName.toLowerCase(),re==="select"||re==="input"&&te.type==="file")var ct=Xy;else if(qy(te))if(Yy)ct=Z3;else{ct=W3;var Ce=K3}else re=te.nodeName,!re||re.toLowerCase()!=="input"||te.type!=="checkbox"&&te.type!=="radio"?J&&fl(J.elementType)&&(ct=Xy):ct=Q3;if(ct&&(ct=ct(s,J))){$y(fe,ct,f,oe);break e}Ce&&Ce(s,te,J),s==="focusout"&&J&&te.type==="number"&&J.memoizedProps.value!=null&&Kc(te,"number",te.value)}switch(Ce=J?Nr(J):window,s){case"focusin":(qy(Ce)||Ce.contentEditable==="true")&&(_l=Ce,E1=J,ou=null);break;case"focusout":ou=E1=_l=null;break;case"mousedown":w1=!0;break;case"contextmenu":case"mouseup":case"dragend":w1=!1,n2(fe,f,oe);break;case"selectionchange":if(eI)break;case"keydown":case"keyup":n2(fe,f,oe)}var Ge;if(ht)e:{switch(s){case"compositionstart":var Ze="onCompositionStart";break e;case"compositionend":Ze="onCompositionEnd";break e;case"compositionupdate":Ze="onCompositionUpdate";break e}Ze=void 0}else yl?wo(s,f)&&(Ze="onCompositionEnd"):s==="keydown"&&f.keyCode===229&&(Ze="onCompositionStart");Ze&&(Ji&&f.locale!=="ko"&&(yl||Ze!=="onCompositionStart"?Ze==="onCompositionEnd"&&yl&&(Ge=eu()):(Ki=oe,Jc="value"in Ki?Ki.value:Ki.textContent,yl=!0)),Ce=nd(J,Ze),0<Ce.length&&(Ze=new Zi(Ze,s,null,f,oe),fe.push({event:Ze,listeners:Ce}),Ge?Ze.data=Ge:(Ge=vl(f),Ge!==null&&(Ze.data=Ge)))),(Ge=Xr?q3(s,f):$3(s,f))&&(Ze=nd(J,"onBeforeInput"),0<Ze.length&&(Ce=new Zi("onBeforeInput","beforeinput",null,f,oe),fe.push({event:Ce,listeners:Ze}),Ce.data=Ge)),jI(fe,s,J,f,oe)}Ix(fe,l)})}function Du(s,l,f){return{instance:s,listener:l,currentTarget:f}}function nd(s,l){for(var f=l+"Capture",d=[];s!==null;){var y=s,x=y.stateNode;if(y=y.tag,y!==5&&y!==26&&y!==27||x===null||(y=mi(s,f),y!=null&&d.unshift(Du(s,y,x)),y=mi(s,l),y!=null&&d.push(Du(s,y,x))),s.tag===3)return d;s=s.return}return[]}function UI(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function Rx(s,l,f,d,y){for(var x=l._reactName,C=[];f!==null&&f!==d;){var B=f,$=B.alternate,J=B.stateNode;if(B=B.tag,$!==null&&$===d)break;B!==5&&B!==26&&B!==27||J===null||($=J,y?(J=mi(f,x),J!=null&&C.unshift(Du(f,J,$))):y||(J=mi(f,x),J!=null&&C.push(Du(f,J,$)))),f=f.return}C.length!==0&&s.push({event:l,listeners:C})}var zI=/\r\n?/g,HI=/\u0000|\uFFFD/g;function Ox(s){return(typeof s=="string"?s:""+s).replace(zI,`
`).replace(HI,"")}function Dx(s,l){return l=Ox(l),Ox(s)===l}function Tt(s,l,f,d,y,x){switch(f){case"children":typeof d=="string"?l==="body"||l==="textarea"&&d===""||gr(s,d):(typeof d=="number"||typeof d=="bigint")&&l!=="body"&&gr(s,""+d);break;case"className":Rr(s,"class",d);break;case"tabIndex":Rr(s,"tabindex",d);break;case"dir":case"role":case"viewBox":case"width":case"height":Rr(s,f,d);break;case"style":Qc(s,d,x);break;case"data":if(l!=="object"){Rr(s,"data",d);break}case"src":case"href":if(d===""&&(l!=="a"||f!=="href")){s.removeAttribute(f);break}if(d==null||typeof d=="function"||typeof d=="symbol"||typeof d=="boolean"){s.removeAttribute(f);break}d=hl(""+d),s.setAttribute(f,d);break;case"action":case"formAction":if(typeof d=="function"){s.setAttribute(f,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof x=="function"&&(f==="formAction"?(l!=="input"&&Tt(s,l,"name",y.name,y,null),Tt(s,l,"formEncType",y.formEncType,y,null),Tt(s,l,"formMethod",y.formMethod,y,null),Tt(s,l,"formTarget",y.formTarget,y,null)):(Tt(s,l,"encType",y.encType,y,null),Tt(s,l,"method",y.method,y,null),Tt(s,l,"target",y.target,y,null)));if(d==null||typeof d=="symbol"||typeof d=="boolean"){s.removeAttribute(f);break}d=hl(""+d),s.setAttribute(f,d);break;case"onClick":d!=null&&(s.onclick=pi);break;case"onScroll":d!=null&&We("scroll",s);break;case"onScrollEnd":d!=null&&We("scrollend",s);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(r(61));if(f=d.__html,f!=null){if(y.children!=null)throw Error(r(60));s.innerHTML=f}}break;case"multiple":s.multiple=d&&typeof d!="function"&&typeof d!="symbol";break;case"muted":s.muted=d&&typeof d!="function"&&typeof d!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(d==null||typeof d=="function"||typeof d=="boolean"||typeof d=="symbol"){s.removeAttribute("xlink:href");break}f=hl(""+d),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",f);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":d!=null&&typeof d!="function"&&typeof d!="symbol"?s.setAttribute(f,""+d):s.removeAttribute(f);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":d&&typeof d!="function"&&typeof d!="symbol"?s.setAttribute(f,""):s.removeAttribute(f);break;case"capture":case"download":d===!0?s.setAttribute(f,""):d!==!1&&d!=null&&typeof d!="function"&&typeof d!="symbol"?s.setAttribute(f,d):s.removeAttribute(f);break;case"cols":case"rows":case"size":case"span":d!=null&&typeof d!="function"&&typeof d!="symbol"&&!isNaN(d)&&1<=d?s.setAttribute(f,d):s.removeAttribute(f);break;case"rowSpan":case"start":d==null||typeof d=="function"||typeof d=="symbol"||isNaN(d)?s.removeAttribute(f):s.setAttribute(f,d);break;case"popover":We("beforetoggle",s),We("toggle",s),cl(s,"popover",d);break;case"xlinkActuate":fn(s,"http://www.w3.org/1999/xlink","xlink:actuate",d);break;case"xlinkArcrole":fn(s,"http://www.w3.org/1999/xlink","xlink:arcrole",d);break;case"xlinkRole":fn(s,"http://www.w3.org/1999/xlink","xlink:role",d);break;case"xlinkShow":fn(s,"http://www.w3.org/1999/xlink","xlink:show",d);break;case"xlinkTitle":fn(s,"http://www.w3.org/1999/xlink","xlink:title",d);break;case"xlinkType":fn(s,"http://www.w3.org/1999/xlink","xlink:type",d);break;case"xmlBase":fn(s,"http://www.w3.org/XML/1998/namespace","xml:base",d);break;case"xmlLang":fn(s,"http://www.w3.org/XML/1998/namespace","xml:lang",d);break;case"xmlSpace":fn(s,"http://www.w3.org/XML/1998/namespace","xml:space",d);break;case"is":cl(s,"is",d);break;case"innerText":case"textContent":break;default:(!(2<f.length)||f[0]!=="o"&&f[0]!=="O"||f[1]!=="n"&&f[1]!=="N")&&(f=nh.get(f)||f,cl(s,f,d))}}function Xp(s,l,f,d,y,x){switch(f){case"style":Qc(s,d,x);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(r(61));if(f=d.__html,f!=null){if(y.children!=null)throw Error(r(60));s.innerHTML=f}}break;case"children":typeof d=="string"?gr(s,d):(typeof d=="number"||typeof d=="bigint")&&gr(s,""+d);break;case"onScroll":d!=null&&We("scroll",s);break;case"onScrollEnd":d!=null&&We("scrollend",s);break;case"onClick":d!=null&&(s.onclick=pi);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Gc.hasOwnProperty(f))e:{if(f[0]==="o"&&f[1]==="n"&&(y=f.endsWith("Capture"),l=f.slice(2,y?f.length-7:void 0),x=s[Nn]||null,x=x!=null?x[f]:null,typeof x=="function"&&s.removeEventListener(l,x,y),typeof d=="function")){typeof x!="function"&&x!==null&&(f in s?s[f]=null:s.hasAttribute(f)&&s.removeAttribute(f)),s.addEventListener(l,d,y);break e}f in s?s[f]=d:d===!0?s.setAttribute(f,""):cl(s,f,d)}}}function qn(s,l,f){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":We("error",s),We("load",s);var d=!1,y=!1,x;for(x in f)if(f.hasOwnProperty(x)){var C=f[x];if(C!=null)switch(x){case"src":d=!0;break;case"srcSet":y=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,l));default:Tt(s,l,x,C,f,null)}}y&&Tt(s,l,"srcSet",f.srcSet,f,null),d&&Tt(s,l,"src",f.src,f,null);return;case"input":We("invalid",s);var B=x=C=y=null,$=null,J=null;for(d in f)if(f.hasOwnProperty(d)){var oe=f[d];if(oe!=null)switch(d){case"name":y=oe;break;case"type":C=oe;break;case"checked":$=oe;break;case"defaultChecked":J=oe;break;case"value":x=oe;break;case"defaultValue":B=oe;break;case"children":case"dangerouslySetInnerHTML":if(oe!=null)throw Error(r(137,l));break;default:Tt(s,l,d,oe,f,null)}}Jf(s,x,B,$,J,C,y,!1);return;case"select":We("invalid",s),d=C=x=null;for(y in f)if(f.hasOwnProperty(y)&&(B=f[y],B!=null))switch(y){case"value":x=B;break;case"defaultValue":C=B;break;case"multiple":d=B;default:Tt(s,l,y,B,f,null)}l=x,f=C,s.multiple=!!d,l!=null?Za(s,!!d,l,!1):f!=null&&Za(s,!!d,f,!0);return;case"textarea":We("invalid",s),x=y=d=null;for(C in f)if(f.hasOwnProperty(C)&&(B=f[C],B!=null))switch(C){case"value":d=B;break;case"defaultValue":y=B;break;case"children":x=B;break;case"dangerouslySetInnerHTML":if(B!=null)throw Error(r(91));break;default:Tt(s,l,C,B,f,null)}Ja(s,d,y,x);return;case"option":for($ in f)if(f.hasOwnProperty($)&&(d=f[$],d!=null))switch($){case"selected":s.selected=d&&typeof d!="function"&&typeof d!="symbol";break;default:Tt(s,l,$,d,f,null)}return;case"dialog":We("beforetoggle",s),We("toggle",s),We("cancel",s),We("close",s);break;case"iframe":case"object":We("load",s);break;case"video":case"audio":for(d=0;d<Ou.length;d++)We(Ou[d],s);break;case"image":We("error",s),We("load",s);break;case"details":We("toggle",s);break;case"embed":case"source":case"link":We("error",s),We("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(J in f)if(f.hasOwnProperty(J)&&(d=f[J],d!=null))switch(J){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,l));default:Tt(s,l,J,d,f,null)}return;default:if(fl(l)){for(oe in f)f.hasOwnProperty(oe)&&(d=f[oe],d!==void 0&&Xp(s,l,oe,d,f,void 0));return}}for(B in f)f.hasOwnProperty(B)&&(d=f[B],d!=null&&Tt(s,l,B,d,f,null))}function GI(s,l,f,d){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var y=null,x=null,C=null,B=null,$=null,J=null,oe=null;for(re in f){var fe=f[re];if(f.hasOwnProperty(re)&&fe!=null)switch(re){case"checked":break;case"value":break;case"defaultValue":$=fe;default:d.hasOwnProperty(re)||Tt(s,l,re,null,d,fe)}}for(var te in d){var re=d[te];if(fe=f[te],d.hasOwnProperty(te)&&(re!=null||fe!=null))switch(te){case"type":x=re;break;case"name":y=re;break;case"checked":J=re;break;case"defaultChecked":oe=re;break;case"value":C=re;break;case"defaultValue":B=re;break;case"children":case"dangerouslySetInnerHTML":if(re!=null)throw Error(r(137,l));break;default:re!==fe&&Tt(s,l,te,re,d,fe)}}ul(s,C,B,$,J,oe,x,y);return;case"select":re=C=B=te=null;for(x in f)if($=f[x],f.hasOwnProperty(x)&&$!=null)switch(x){case"value":break;case"multiple":re=$;default:d.hasOwnProperty(x)||Tt(s,l,x,null,d,$)}for(y in d)if(x=d[y],$=f[y],d.hasOwnProperty(y)&&(x!=null||$!=null))switch(y){case"value":te=x;break;case"defaultValue":B=x;break;case"multiple":C=x;default:x!==$&&Tt(s,l,y,x,d,$)}l=B,f=C,d=re,te!=null?Za(s,!!f,te,!1):!!d!=!!f&&(l!=null?Za(s,!!f,l,!0):Za(s,!!f,f?[]:"",!1));return;case"textarea":re=te=null;for(B in f)if(y=f[B],f.hasOwnProperty(B)&&y!=null&&!d.hasOwnProperty(B))switch(B){case"value":break;case"children":break;default:Tt(s,l,B,null,d,y)}for(C in d)if(y=d[C],x=f[C],d.hasOwnProperty(C)&&(y!=null||x!=null))switch(C){case"value":te=y;break;case"defaultValue":re=y;break;case"children":break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(r(91));break;default:y!==x&&Tt(s,l,C,y,d,x)}eh(s,te,re);return;case"option":for(var Ae in f)if(te=f[Ae],f.hasOwnProperty(Ae)&&te!=null&&!d.hasOwnProperty(Ae))switch(Ae){case"selected":s.selected=!1;break;default:Tt(s,l,Ae,null,d,te)}for($ in d)if(te=d[$],re=f[$],d.hasOwnProperty($)&&te!==re&&(te!=null||re!=null))switch($){case"selected":s.selected=te&&typeof te!="function"&&typeof te!="symbol";break;default:Tt(s,l,$,te,d,re)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Le in f)te=f[Le],f.hasOwnProperty(Le)&&te!=null&&!d.hasOwnProperty(Le)&&Tt(s,l,Le,null,d,te);for(J in d)if(te=d[J],re=f[J],d.hasOwnProperty(J)&&te!==re&&(te!=null||re!=null))switch(J){case"children":case"dangerouslySetInnerHTML":if(te!=null)throw Error(r(137,l));break;default:Tt(s,l,J,te,d,re)}return;default:if(fl(l)){for(var It in f)te=f[It],f.hasOwnProperty(It)&&te!==void 0&&!d.hasOwnProperty(It)&&Xp(s,l,It,void 0,d,te);for(oe in d)te=d[oe],re=f[oe],!d.hasOwnProperty(oe)||te===re||te===void 0&&re===void 0||Xp(s,l,oe,te,d,re);return}}for(var K in f)te=f[K],f.hasOwnProperty(K)&&te!=null&&!d.hasOwnProperty(K)&&Tt(s,l,K,null,d,te);for(fe in d)te=d[fe],re=f[fe],!d.hasOwnProperty(fe)||te===re||te==null&&re==null||Tt(s,l,fe,te,d,re)}function Mx(s){switch(s){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function qI(){if(typeof performance.getEntriesByType=="function"){for(var s=0,l=0,f=performance.getEntriesByType("resource"),d=0;d<f.length;d++){var y=f[d],x=y.transferSize,C=y.initiatorType,B=y.duration;if(x&&B&&Mx(C)){for(C=0,B=y.responseEnd,d+=1;d<f.length;d++){var $=f[d],J=$.startTime;if(J>B)break;var oe=$.transferSize,fe=$.initiatorType;oe&&Mx(fe)&&($=$.responseEnd,C+=oe*($<B?1:(B-J)/($-J)))}if(--d,l+=8*(x+C)/(y.duration/1e3),s++,10<s)break}}if(0<s)return l/s/1e6}return navigator.connection&&(s=navigator.connection.downlink,typeof s=="number")?s:5}var Yp=null,Kp=null;function rd(s){return s.nodeType===9?s:s.ownerDocument}function Px(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function kx(s,l){if(s===0)switch(l){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&l==="foreignObject"?0:s}function Wp(s,l){return s==="textarea"||s==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.children=="bigint"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var Qp=null;function $I(){var s=window.event;return s&&s.type==="popstate"?s===Qp?!1:(Qp=s,!0):(Qp=null,!1)}var Lx=typeof setTimeout=="function"?setTimeout:void 0,XI=typeof clearTimeout=="function"?clearTimeout:void 0,jx=typeof Promise=="function"?Promise:void 0,YI=typeof queueMicrotask=="function"?queueMicrotask:typeof jx<"u"?function(s){return jx.resolve(null).then(s).catch(KI)}:Lx;function KI(s){setTimeout(function(){throw s})}function ws(s){return s==="head"}function Bx(s,l){var f=l,d=0;do{var y=f.nextSibling;if(s.removeChild(f),y&&y.nodeType===8)if(f=y.data,f==="/$"||f==="/&"){if(d===0){s.removeChild(y),$l(l);return}d--}else if(f==="$"||f==="$?"||f==="$~"||f==="$!"||f==="&")d++;else if(f==="html")Mu(s.ownerDocument.documentElement);else if(f==="head"){f=s.ownerDocument.head,Mu(f);for(var x=f.firstChild;x;){var C=x.nextSibling,B=x.nodeName;x[zi]||B==="SCRIPT"||B==="STYLE"||B==="LINK"&&x.rel.toLowerCase()==="stylesheet"||f.removeChild(x),x=C}}else f==="body"&&Mu(s.ownerDocument.body);f=y}while(f);$l(l)}function Vx(s,l){var f=s;s=0;do{var d=f.nextSibling;if(f.nodeType===1?l?(f._stashedDisplay=f.style.display,f.style.display="none"):(f.style.display=f._stashedDisplay||"",f.getAttribute("style")===""&&f.removeAttribute("style")):f.nodeType===3&&(l?(f._stashedText=f.nodeValue,f.nodeValue=""):f.nodeValue=f._stashedText||""),d&&d.nodeType===8)if(f=d.data,f==="/$"){if(s===0)break;s--}else f!=="$"&&f!=="$?"&&f!=="$~"&&f!=="$!"||s++;f=d}while(f)}function Zp(s){var l=s.firstChild;for(l&&l.nodeType===10&&(l=l.nextSibling);l;){var f=l;switch(l=l.nextSibling,f.nodeName){case"HTML":case"HEAD":case"BODY":Zp(f),ll(f);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(f.rel.toLowerCase()==="stylesheet")continue}s.removeChild(f)}}function WI(s,l,f,d){for(;s.nodeType===1;){var y=f;if(s.nodeName.toLowerCase()!==l.toLowerCase()){if(!d&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(d){if(!s[zi])switch(l){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(x=s.getAttribute("rel"),x==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(x!==y.rel||s.getAttribute("href")!==(y.href==null||y.href===""?null:y.href)||s.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin)||s.getAttribute("title")!==(y.title==null?null:y.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(x=s.getAttribute("src"),(x!==(y.src==null?null:y.src)||s.getAttribute("type")!==(y.type==null?null:y.type)||s.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin))&&x&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(l==="input"&&s.type==="hidden"){var x=y.name==null?null:""+y.name;if(y.type==="hidden"&&s.getAttribute("name")===x)return s}else return s;if(s=ei(s.nextSibling),s===null)break}return null}function QI(s,l,f){if(l==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!f||(s=ei(s.nextSibling),s===null))return null;return s}function Fx(s,l){for(;s.nodeType!==8;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!l||(s=ei(s.nextSibling),s===null))return null;return s}function Jp(s){return s.data==="$?"||s.data==="$~"}function em(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState!=="loading"}function ZI(s,l){var f=s.ownerDocument;if(s.data==="$~")s._reactRetry=l;else if(s.data!=="$?"||f.readyState!=="loading")l();else{var d=function(){l(),f.removeEventListener("DOMContentLoaded",d)};f.addEventListener("DOMContentLoaded",d),s._reactRetry=d}}function ei(s){for(;s!=null;s=s.nextSibling){var l=s.nodeType;if(l===1||l===3)break;if(l===8){if(l=s.data,l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"||l==="F!"||l==="F")break;if(l==="/$"||l==="/&")return null}}return s}var tm=null;function Ux(s){s=s.nextSibling;for(var l=0;s;){if(s.nodeType===8){var f=s.data;if(f==="/$"||f==="/&"){if(l===0)return ei(s.nextSibling);l--}else f!=="$"&&f!=="$!"&&f!=="$?"&&f!=="$~"&&f!=="&"||l++}s=s.nextSibling}return null}function zx(s){s=s.previousSibling;for(var l=0;s;){if(s.nodeType===8){var f=s.data;if(f==="$"||f==="$!"||f==="$?"||f==="$~"||f==="&"){if(l===0)return s;l--}else f!=="/$"&&f!=="/&"||l++}s=s.previousSibling}return null}function Hx(s,l,f){switch(l=rd(f),s){case"html":if(s=l.documentElement,!s)throw Error(r(452));return s;case"head":if(s=l.head,!s)throw Error(r(453));return s;case"body":if(s=l.body,!s)throw Error(r(454));return s;default:throw Error(r(451))}}function Mu(s){for(var l=s.attributes;l.length;)s.removeAttributeNode(l[0]);ll(s)}var ti=new Map,Gx=new Set;function id(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var ka=ce.d;ce.d={f:JI,r:e4,D:t4,C:n4,L:r4,m:i4,X:s4,S:a4,M:o4};function JI(){var s=ka.f(),l=Kh();return s||l}function e4(s){var l=Gr(s);l!==null&&l.tag===5&&l.type==="form"?o_(l):ka.r(s)}var Hl=typeof document>"u"?null:document;function qx(s,l,f){var d=Hl;if(d&&typeof l=="string"&&l){var y=mr(l);y='link[rel="'+s+'"][href="'+y+'"]',typeof f=="string"&&(y+='[crossorigin="'+f+'"]'),Gx.has(y)||(Gx.add(y),s={rel:s,crossOrigin:f,href:l},d.querySelector(y)===null&&(l=d.createElement("link"),qn(l,"link",s),un(l),d.head.appendChild(l)))}}function t4(s){ka.D(s),qx("dns-prefetch",s,null)}function n4(s,l){ka.C(s,l),qx("preconnect",s,l)}function r4(s,l,f){ka.L(s,l,f);var d=Hl;if(d&&s&&l){var y='link[rel="preload"][as="'+mr(l)+'"]';l==="image"&&f&&f.imageSrcSet?(y+='[imagesrcset="'+mr(f.imageSrcSet)+'"]',typeof f.imageSizes=="string"&&(y+='[imagesizes="'+mr(f.imageSizes)+'"]')):y+='[href="'+mr(s)+'"]';var x=y;switch(l){case"style":x=Gl(s);break;case"script":x=ql(s)}ti.has(x)||(s=g({rel:"preload",href:l==="image"&&f&&f.imageSrcSet?void 0:s,as:l},f),ti.set(x,s),d.querySelector(y)!==null||l==="style"&&d.querySelector(Pu(x))||l==="script"&&d.querySelector(ku(x))||(l=d.createElement("link"),qn(l,"link",s),un(l),d.head.appendChild(l)))}}function i4(s,l){ka.m(s,l);var f=Hl;if(f&&s){var d=l&&typeof l.as=="string"?l.as:"script",y='link[rel="modulepreload"][as="'+mr(d)+'"][href="'+mr(s)+'"]',x=y;switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":x=ql(s)}if(!ti.has(x)&&(s=g({rel:"modulepreload",href:s},l),ti.set(x,s),f.querySelector(y)===null)){switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(f.querySelector(ku(x)))return}d=f.createElement("link"),qn(d,"link",s),un(d),f.head.appendChild(d)}}}function a4(s,l,f){ka.S(s,l,f);var d=Hl;if(d&&s){var y=Gi(d).hoistableStyles,x=Gl(s);l=l||"default";var C=y.get(x);if(!C){var B={loading:0,preload:null};if(C=d.querySelector(Pu(x)))B.loading=5;else{s=g({rel:"stylesheet",href:s,"data-precedence":l},f),(f=ti.get(x))&&nm(s,f);var $=C=d.createElement("link");un($),qn($,"link",s),$._p=new Promise(function(J,oe){$.onload=J,$.onerror=oe}),$.addEventListener("load",function(){B.loading|=1}),$.addEventListener("error",function(){B.loading|=2}),B.loading|=4,ad(C,l,d)}C={type:"stylesheet",instance:C,count:1,state:B},y.set(x,C)}}}function s4(s,l){ka.X(s,l);var f=Hl;if(f&&s){var d=Gi(f).hoistableScripts,y=ql(s),x=d.get(y);x||(x=f.querySelector(ku(y)),x||(s=g({src:s,async:!0},l),(l=ti.get(y))&&rm(s,l),x=f.createElement("script"),un(x),qn(x,"link",s),f.head.appendChild(x)),x={type:"script",instance:x,count:1,state:null},d.set(y,x))}}function o4(s,l){ka.M(s,l);var f=Hl;if(f&&s){var d=Gi(f).hoistableScripts,y=ql(s),x=d.get(y);x||(x=f.querySelector(ku(y)),x||(s=g({src:s,async:!0,type:"module"},l),(l=ti.get(y))&&rm(s,l),x=f.createElement("script"),un(x),qn(x,"link",s),f.head.appendChild(x)),x={type:"script",instance:x,count:1,state:null},d.set(y,x))}}function $x(s,l,f,d){var y=(y=ge.current)?id(y):null;if(!y)throw Error(r(446));switch(s){case"meta":case"title":return null;case"style":return typeof f.precedence=="string"&&typeof f.href=="string"?(l=Gl(f.href),f=Gi(y).hoistableStyles,d=f.get(l),d||(d={type:"style",instance:null,count:0,state:null},f.set(l,d)),d):{type:"void",instance:null,count:0,state:null};case"link":if(f.rel==="stylesheet"&&typeof f.href=="string"&&typeof f.precedence=="string"){s=Gl(f.href);var x=Gi(y).hoistableStyles,C=x.get(s);if(C||(y=y.ownerDocument||y,C={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},x.set(s,C),(x=y.querySelector(Pu(s)))&&!x._p&&(C.instance=x,C.state.loading=5),ti.has(s)||(f={rel:"preload",as:"style",href:f.href,crossOrigin:f.crossOrigin,integrity:f.integrity,media:f.media,hrefLang:f.hrefLang,referrerPolicy:f.referrerPolicy},ti.set(s,f),x||l4(y,s,f,C.state))),l&&d===null)throw Error(r(528,""));return C}if(l&&d!==null)throw Error(r(529,""));return null;case"script":return l=f.async,f=f.src,typeof f=="string"&&l&&typeof l!="function"&&typeof l!="symbol"?(l=ql(f),f=Gi(y).hoistableScripts,d=f.get(l),d||(d={type:"script",instance:null,count:0,state:null},f.set(l,d)),d):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,s))}}function Gl(s){return'href="'+mr(s)+'"'}function Pu(s){return'link[rel="stylesheet"]['+s+"]"}function Xx(s){return g({},s,{"data-precedence":s.precedence,precedence:null})}function l4(s,l,f,d){s.querySelector('link[rel="preload"][as="style"]['+l+"]")?d.loading=1:(l=s.createElement("link"),d.preload=l,l.addEventListener("load",function(){return d.loading|=1}),l.addEventListener("error",function(){return d.loading|=2}),qn(l,"link",f),un(l),s.head.appendChild(l))}function ql(s){return'[src="'+mr(s)+'"]'}function ku(s){return"script[async]"+s}function Yx(s,l,f){if(l.count++,l.instance===null)switch(l.type){case"style":var d=s.querySelector('style[data-href~="'+mr(f.href)+'"]');if(d)return l.instance=d,un(d),d;var y=g({},f,{"data-href":f.href,"data-precedence":f.precedence,href:null,precedence:null});return d=(s.ownerDocument||s).createElement("style"),un(d),qn(d,"style",y),ad(d,f.precedence,s),l.instance=d;case"stylesheet":y=Gl(f.href);var x=s.querySelector(Pu(y));if(x)return l.state.loading|=4,l.instance=x,un(x),x;d=Xx(f),(y=ti.get(y))&&nm(d,y),x=(s.ownerDocument||s).createElement("link"),un(x);var C=x;return C._p=new Promise(function(B,$){C.onload=B,C.onerror=$}),qn(x,"link",d),l.state.loading|=4,ad(x,f.precedence,s),l.instance=x;case"script":return x=ql(f.src),(y=s.querySelector(ku(x)))?(l.instance=y,un(y),y):(d=f,(y=ti.get(x))&&(d=g({},f),rm(d,y)),s=s.ownerDocument||s,y=s.createElement("script"),un(y),qn(y,"link",d),s.head.appendChild(y),l.instance=y);case"void":return null;default:throw Error(r(443,l.type))}else l.type==="stylesheet"&&(l.state.loading&4)===0&&(d=l.instance,l.state.loading|=4,ad(d,f.precedence,s));return l.instance}function ad(s,l,f){for(var d=f.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),y=d.length?d[d.length-1]:null,x=y,C=0;C<d.length;C++){var B=d[C];if(B.dataset.precedence===l)x=B;else if(x!==y)break}x?x.parentNode.insertBefore(s,x.nextSibling):(l=f.nodeType===9?f.head:f,l.insertBefore(s,l.firstChild))}function nm(s,l){s.crossOrigin==null&&(s.crossOrigin=l.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=l.referrerPolicy),s.title==null&&(s.title=l.title)}function rm(s,l){s.crossOrigin==null&&(s.crossOrigin=l.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=l.referrerPolicy),s.integrity==null&&(s.integrity=l.integrity)}var sd=null;function Kx(s,l,f){if(sd===null){var d=new Map,y=sd=new Map;y.set(f,d)}else y=sd,d=y.get(f),d||(d=new Map,y.set(f,d));if(d.has(s))return d;for(d.set(s,null),f=f.getElementsByTagName(s),y=0;y<f.length;y++){var x=f[y];if(!(x[zi]||x[cn]||s==="link"&&x.getAttribute("rel")==="stylesheet")&&x.namespaceURI!=="http://www.w3.org/2000/svg"){var C=x.getAttribute(l)||"";C=s+C;var B=d.get(C);B?B.push(x):d.set(C,[x])}}return d}function Wx(s,l,f){s=s.ownerDocument||s,s.head.insertBefore(f,l==="title"?s.querySelector("head > title"):null)}function c4(s,l,f){if(f===1||l.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof l.precedence!="string"||typeof l.href!="string"||l.href==="")break;return!0;case"link":if(typeof l.rel!="string"||typeof l.href!="string"||l.href===""||l.onLoad||l.onError)break;switch(l.rel){case"stylesheet":return s=l.disabled,typeof l.precedence=="string"&&s==null;default:return!0}case"script":if(l.async&&typeof l.async!="function"&&typeof l.async!="symbol"&&!l.onLoad&&!l.onError&&l.src&&typeof l.src=="string")return!0}return!1}function Qx(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}function u4(s,l,f,d){if(f.type==="stylesheet"&&(typeof d.media!="string"||matchMedia(d.media).matches!==!1)&&(f.state.loading&4)===0){if(f.instance===null){var y=Gl(d.href),x=l.querySelector(Pu(y));if(x){l=x._p,l!==null&&typeof l=="object"&&typeof l.then=="function"&&(s.count++,s=od.bind(s),l.then(s,s)),f.state.loading|=4,f.instance=x,un(x);return}x=l.ownerDocument||l,d=Xx(d),(y=ti.get(y))&&nm(d,y),x=x.createElement("link"),un(x);var C=x;C._p=new Promise(function(B,$){C.onload=B,C.onerror=$}),qn(x,"link",d),f.instance=x}s.stylesheets===null&&(s.stylesheets=new Map),s.stylesheets.set(f,l),(l=f.state.preload)&&(f.state.loading&3)===0&&(s.count++,f=od.bind(s),l.addEventListener("load",f),l.addEventListener("error",f))}}var im=0;function f4(s,l){return s.stylesheets&&s.count===0&&cd(s,s.stylesheets),0<s.count||0<s.imgCount?function(f){var d=setTimeout(function(){if(s.stylesheets&&cd(s,s.stylesheets),s.unsuspend){var x=s.unsuspend;s.unsuspend=null,x()}},6e4+l);0<s.imgBytes&&im===0&&(im=62500*qI());var y=setTimeout(function(){if(s.waitingForImages=!1,s.count===0&&(s.stylesheets&&cd(s,s.stylesheets),s.unsuspend)){var x=s.unsuspend;s.unsuspend=null,x()}},(s.imgBytes>im?50:800)+l);return s.unsuspend=f,function(){s.unsuspend=null,clearTimeout(d),clearTimeout(y)}}:null}function od(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)cd(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var ld=null;function cd(s,l){s.stylesheets=null,s.unsuspend!==null&&(s.count++,ld=new Map,l.forEach(h4,s),ld=null,od.call(s))}function h4(s,l){if(!(l.state.loading&4)){var f=ld.get(s);if(f)var d=f.get(null);else{f=new Map,ld.set(s,f);for(var y=s.querySelectorAll("link[data-precedence],style[data-precedence]"),x=0;x<y.length;x++){var C=y[x];(C.nodeName==="LINK"||C.getAttribute("media")!=="not all")&&(f.set(C.dataset.precedence,C),d=C)}d&&f.set(null,d)}y=l.instance,C=y.getAttribute("data-precedence"),x=f.get(C)||d,x===d&&f.set(null,y),f.set(C,y),this.count++,d=od.bind(this),y.addEventListener("load",d),y.addEventListener("error",d),x?x.parentNode.insertBefore(y,x.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(y,s.firstChild)),l.state.loading|=4}}var Lu={$$typeof:L,Provider:null,Consumer:null,_currentValue:me,_currentValue2:me,_threadCount:0};function d4(s,l,f,d,y,x,C,B,$){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Fi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Fi(0),this.hiddenUpdates=Fi(null),this.identifierPrefix=d,this.onUncaughtError=y,this.onCaughtError=x,this.onRecoverableError=C,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=$,this.incompleteTransitions=new Map}function Zx(s,l,f,d,y,x,C,B,$,J,oe,fe){return s=new d4(s,l,f,C,$,J,oe,fe,B),l=1,x===!0&&(l|=24),x=Dr(3,null,null,l),s.current=x,x.stateNode=s,l=j1(),l.refCount++,s.pooledCache=l,l.refCount++,x.memoizedState={element:d,isDehydrated:f,cache:l},U1(x),s}function Jx(s){return s?(s=wl,s):wl}function eE(s,l,f,d,y,x){y=Jx(y),d.context===null?d.context=y:d.pendingContext=y,d=fs(l),d.payload={element:f},x=x===void 0?null:x,x!==null&&(d.callback=x),f=hs(s,d,l),f!==null&&(Er(f,s,l),pu(f,s,l))}function tE(s,l){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var f=s.retryLane;s.retryLane=f!==0&&f<l?f:l}}function am(s,l){tE(s,l),(s=s.alternate)&&tE(s,l)}function nE(s){if(s.tag===13||s.tag===31){var l=So(s,67108864);l!==null&&Er(l,s,67108864),am(s,67108864)}}function rE(s){if(s.tag===13||s.tag===31){var l=jr();l=ho(l);var f=So(s,l);f!==null&&Er(f,s,l),am(s,l)}}var ud=!0;function p4(s,l,f,d){var y=q.T;q.T=null;var x=ce.p;try{ce.p=2,sm(s,l,f,d)}finally{ce.p=x,q.T=y}}function m4(s,l,f,d){var y=q.T;q.T=null;var x=ce.p;try{ce.p=8,sm(s,l,f,d)}finally{ce.p=x,q.T=y}}function sm(s,l,f,d){if(ud){var y=om(d);if(y===null)$p(s,l,d,fd,f),aE(s,d);else if(v4(y,s,l,f,d))d.stopPropagation();else if(aE(s,d),l&4&&-1<g4.indexOf(s)){for(;y!==null;){var x=Gr(y);if(x!==null)switch(x.tag){case 3:if(x=x.stateNode,x.current.memoizedState.isDehydrated){var C=Bi(x.pendingLanes);if(C!==0){var B=x;for(B.pendingLanes|=2,B.entangledLanes|=2;C;){var $=1<<31-Jt(C);B.entanglements[1]|=$,C&=~$}ra(x),(dt&6)===0&&(Xh=on()+500,Ru(0))}}break;case 31:case 13:B=So(x,2),B!==null&&Er(B,x,2),Kh(),am(x,2)}if(x=om(d),x===null&&$p(s,l,d,fd,f),x===y)break;y=x}y!==null&&d.stopPropagation()}else $p(s,l,d,null,f)}}function om(s){return s=qr(s),lm(s)}var fd=null;function lm(s){if(fd=null,s=Hi(s),s!==null){var l=a(s);if(l===null)s=null;else{var f=l.tag;if(f===13){if(s=o(l),s!==null)return s;s=null}else if(f===31){if(s=c(l),s!==null)return s;s=null}else if(f===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;s=null}else l!==s&&(s=null)}}return fd=s,null}function iE(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Mt()){case Ir:return 2;case lo:return 8;case Li:case Fc:return 32;case qe:return 268435456;default:return 32}default:return 32}}var cm=!1,As=null,bs=null,Ss=null,ju=new Map,Bu=new Map,Cs=[],g4="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function aE(s,l){switch(s){case"focusin":case"focusout":As=null;break;case"dragenter":case"dragleave":bs=null;break;case"mouseover":case"mouseout":Ss=null;break;case"pointerover":case"pointerout":ju.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":Bu.delete(l.pointerId)}}function Vu(s,l,f,d,y,x){return s===null||s.nativeEvent!==x?(s={blockedOn:l,domEventName:f,eventSystemFlags:d,nativeEvent:x,targetContainers:[y]},l!==null&&(l=Gr(l),l!==null&&nE(l)),s):(s.eventSystemFlags|=d,l=s.targetContainers,y!==null&&l.indexOf(y)===-1&&l.push(y),s)}function v4(s,l,f,d,y){switch(l){case"focusin":return As=Vu(As,s,l,f,d,y),!0;case"dragenter":return bs=Vu(bs,s,l,f,d,y),!0;case"mouseover":return Ss=Vu(Ss,s,l,f,d,y),!0;case"pointerover":var x=y.pointerId;return ju.set(x,Vu(ju.get(x)||null,s,l,f,d,y)),!0;case"gotpointercapture":return x=y.pointerId,Bu.set(x,Vu(Bu.get(x)||null,s,l,f,d,y)),!0}return!1}function sE(s){var l=Hi(s.target);if(l!==null){var f=a(l);if(f!==null){if(l=f.tag,l===13){if(l=o(f),l!==null){s.blockedOn=l,hi(s.priority,function(){rE(f)});return}}else if(l===31){if(l=c(f),l!==null){s.blockedOn=l,hi(s.priority,function(){rE(f)});return}}else if(l===3&&f.stateNode.current.memoizedState.isDehydrated){s.blockedOn=f.tag===3?f.stateNode.containerInfo:null;return}}}s.blockedOn=null}function hd(s){if(s.blockedOn!==null)return!1;for(var l=s.targetContainers;0<l.length;){var f=om(s.nativeEvent);if(f===null){f=s.nativeEvent;var d=new f.constructor(f.type,f);Zc=d,f.target.dispatchEvent(d),Zc=null}else return l=Gr(f),l!==null&&nE(l),s.blockedOn=f,!1;l.shift()}return!0}function oE(s,l,f){hd(s)&&f.delete(l)}function y4(){cm=!1,As!==null&&hd(As)&&(As=null),bs!==null&&hd(bs)&&(bs=null),Ss!==null&&hd(Ss)&&(Ss=null),ju.forEach(oE),Bu.forEach(oE)}function dd(s,l){s.blockedOn===l&&(s.blockedOn=null,cm||(cm=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,y4)))}var pd=null;function lE(s){pd!==s&&(pd=s,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){pd===s&&(pd=null);for(var l=0;l<s.length;l+=3){var f=s[l],d=s[l+1],y=s[l+2];if(typeof d!="function"){if(lm(d||f)===null)continue;break}var x=Gr(f);x!==null&&(s.splice(l,3),l-=3,op(x,{pending:!0,data:y,method:f.method,action:d},d,y))}}))}function $l(s){function l($){return dd($,s)}As!==null&&dd(As,s),bs!==null&&dd(bs,s),Ss!==null&&dd(Ss,s),ju.forEach(l),Bu.forEach(l);for(var f=0;f<Cs.length;f++){var d=Cs[f];d.blockedOn===s&&(d.blockedOn=null)}for(;0<Cs.length&&(f=Cs[0],f.blockedOn===null);)sE(f),f.blockedOn===null&&Cs.shift();if(f=(s.ownerDocument||s).$$reactFormReplay,f!=null)for(d=0;d<f.length;d+=3){var y=f[d],x=f[d+1],C=y[Nn]||null;if(typeof x=="function")C||lE(f);else if(C){var B=null;if(x&&x.hasAttribute("formAction")){if(y=x,C=x[Nn]||null)B=C.formAction;else if(lm(y)!==null)continue}else B=C.action;typeof B=="function"?f[d+1]=B:(f.splice(d,3),d-=3),lE(f)}}}function cE(){function s(x){x.canIntercept&&x.info==="react-transition"&&x.intercept({handler:function(){return new Promise(function(C){return y=C})},focusReset:"manual",scroll:"manual"})}function l(){y!==null&&(y(),y=null),d||setTimeout(f,20)}function f(){if(!d&&!navigation.transition){var x=navigation.currentEntry;x&&x.url!=null&&navigation.navigate(x.url,{state:x.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var d=!1,y=null;return navigation.addEventListener("navigate",s),navigation.addEventListener("navigatesuccess",l),navigation.addEventListener("navigateerror",l),setTimeout(f,100),function(){d=!0,navigation.removeEventListener("navigate",s),navigation.removeEventListener("navigatesuccess",l),navigation.removeEventListener("navigateerror",l),y!==null&&(y(),y=null)}}}function um(s){this._internalRoot=s}md.prototype.render=um.prototype.render=function(s){var l=this._internalRoot;if(l===null)throw Error(r(409));var f=l.current,d=jr();eE(f,d,s,l,null,null)},md.prototype.unmount=um.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var l=s.containerInfo;eE(s.current,2,null,s,null,null),Kh(),l[Ui]=null}};function md(s){this._internalRoot=s}md.prototype.unstable_scheduleHydration=function(s){if(s){var l=Kf();s={blockedOn:null,target:s,priority:l};for(var f=0;f<Cs.length&&l!==0&&l<Cs[f].priority;f++);Cs.splice(f,0,s),f===0&&sE(s)}};var uE=e.version;if(uE!=="19.2.0")throw Error(r(527,uE,"19.2.0"));ce.findDOMNode=function(s){var l=s._reactInternals;if(l===void 0)throw typeof s.render=="function"?Error(r(188)):(s=Object.keys(s).join(","),Error(r(268,s)));return s=h(l),s=s!==null?p(s):null,s=s===null?null:s.stateNode,s};var _4={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:q,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var gd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!gd.isDisabled&&gd.supportsFiber)try{ui=gd.inject(_4),Fn=gd}catch{}}return Uu.createRoot=function(s,l){if(!i(s))throw Error(r(299));var f=!1,d="",y=v_,x=y_,C=__;return l!=null&&(l.unstable_strictMode===!0&&(f=!0),l.identifierPrefix!==void 0&&(d=l.identifierPrefix),l.onUncaughtError!==void 0&&(y=l.onUncaughtError),l.onCaughtError!==void 0&&(x=l.onCaughtError),l.onRecoverableError!==void 0&&(C=l.onRecoverableError)),l=Zx(s,1,!1,null,null,f,d,null,y,x,C,cE),s[Ui]=l.current,qp(s),new um(l)},Uu.hydrateRoot=function(s,l,f){if(!i(s))throw Error(r(299));var d=!1,y="",x=v_,C=y_,B=__,$=null;return f!=null&&(f.unstable_strictMode===!0&&(d=!0),f.identifierPrefix!==void 0&&(y=f.identifierPrefix),f.onUncaughtError!==void 0&&(x=f.onUncaughtError),f.onCaughtError!==void 0&&(C=f.onCaughtError),f.onRecoverableError!==void 0&&(B=f.onRecoverableError),f.formState!==void 0&&($=f.formState)),l=Zx(s,1,!0,l,f??null,d,y,$,x,C,B,cE),l.context=Jx(null),f=l.current,d=jr(),d=ho(d),y=fs(d),y.callback=null,hs(f,y,d),f=d,l.current.lanes=f,uo(l,f),ra(l),s[Ui]=l.current,qp(s),new md(l)},Uu.version="19.2.0",Uu}var xE;function R4(){if(xE)return dm.exports;xE=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),dm.exports=N4(),dm.exports}var O4=R4();/**
 * react-router v7.9.4
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var EE="popstate";function D4(n={}){function e(r,i){let{pathname:a,search:o,hash:c}=r.location;return gg("",{pathname:a,search:o,hash:c},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function t(r,i){return typeof i=="string"?i:df(i)}return P4(e,t,null,n)}function Ht(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function li(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function M4(){return Math.random().toString(36).substring(2,10)}function wE(n,e){return{usr:n.state,key:n.key,idx:e}}function gg(n,e,t=null,r){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?bc(e):e,state:t,key:e&&e.key||r||M4()}}function df({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function bc(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substring(r),n=n.substring(0,r)),n&&(e.pathname=n)}return e}function P4(n,e,t,r={}){let{window:i=document.defaultView,v5Compat:a=!1}=r,o=i.history,c="POP",u=null,h=p();h==null&&(h=0,o.replaceState({...o.state,idx:h},""));function p(){return(o.state||{idx:null}).idx}function g(){c="POP";let O=p(),T=O==null?null:O-h;h=O,u&&u({action:c,location:S.location,delta:T})}function _(O,T){c="PUSH";let R=gg(S.location,O,T);h=p()+1;let L=wE(R,h),z=S.createHref(R);try{o.pushState(L,"",z)}catch(U){if(U instanceof DOMException&&U.name==="DataCloneError")throw U;i.location.assign(z)}a&&u&&u({action:c,location:S.location,delta:1})}function E(O,T){c="REPLACE";let R=gg(S.location,O,T);h=p();let L=wE(R,h),z=S.createHref(R);o.replaceState(L,"",z),a&&u&&u({action:c,location:S.location,delta:0})}function A(O){return k4(O)}let S={get action(){return c},get location(){return n(i,o)},listen(O){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(EE,g),u=O,()=>{i.removeEventListener(EE,g),u=null}},createHref(O){return e(i,O)},createURL:A,encodeLocation(O){let T=A(O);return{pathname:T.pathname,search:T.search,hash:T.hash}},push:_,replace:E,go(O){return o.go(O)}};return S}function k4(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),Ht(t,"No window.location.(origin|href) available to create URL");let r=typeof n=="string"?n:df(n);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=t+r),new URL(r,t)}function Hb(n,e,t="/"){return L4(n,e,t,!1)}function L4(n,e,t,r){let i=typeof e=="string"?bc(e):e,a=Ha(i.pathname||"/",t);if(a==null)return null;let o=Gb(n);j4(o);let c=null;for(let u=0;c==null&&u<o.length;++u){let h=Y4(a);c=$4(o[u],h,r)}return c}function Gb(n,e=[],t=[],r="",i=!1){let a=(o,c,u=i,h)=>{let p={relativePath:h===void 0?o.path||"":h,caseSensitive:o.caseSensitive===!0,childrenIndex:c,route:o};if(p.relativePath.startsWith("/")){if(!p.relativePath.startsWith(r)&&u)return;Ht(p.relativePath.startsWith(r),`Absolute route path "${p.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),p.relativePath=p.relativePath.slice(r.length)}let g=Ua([r,p.relativePath]),_=t.concat(p);o.children&&o.children.length>0&&(Ht(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${g}".`),Gb(o.children,e,_,g,u)),!(o.path==null&&!o.index)&&e.push({path:g,score:G4(g,o.index),routesMeta:_})};return n.forEach((o,c)=>{if(o.path===""||!o.path?.includes("?"))a(o,c);else for(let u of qb(o.path))a(o,c,!0,u)}),e}function qb(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,i=t.endsWith("?"),a=t.replace(/\?$/,"");if(r.length===0)return i?[a,""]:[a];let o=qb(r.join("/")),c=[];return c.push(...o.map(u=>u===""?a:[a,u].join("/"))),i&&c.push(...o),c.map(u=>n.startsWith("/")&&u===""?"/":u)}function j4(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:q4(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}var B4=/^:[\w-]+$/,V4=3,F4=2,U4=1,z4=10,H4=-2,AE=n=>n==="*";function G4(n,e){let t=n.split("/"),r=t.length;return t.some(AE)&&(r+=H4),e&&(r+=F4),t.filter(i=>!AE(i)).reduce((i,a)=>i+(B4.test(a)?V4:a===""?U4:z4),r)}function q4(n,e){return n.length===e.length&&n.slice(0,-1).every((r,i)=>r===e[i])?n[n.length-1]-e[e.length-1]:0}function $4(n,e,t=!1){let{routesMeta:r}=n,i={},a="/",o=[];for(let c=0;c<r.length;++c){let u=r[c],h=c===r.length-1,p=a==="/"?e:e.slice(a.length)||"/",g=Kd({path:u.relativePath,caseSensitive:u.caseSensitive,end:h},p),_=u.route;if(!g&&h&&t&&!r[r.length-1].route.index&&(g=Kd({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},p)),!g)return null;Object.assign(i,g.params),o.push({params:i,pathname:Ua([a,g.pathname]),pathnameBase:Z4(Ua([a,g.pathnameBase])),route:_}),g.pathnameBase!=="/"&&(a=Ua([a,g.pathnameBase]))}return o}function Kd(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=X4(n.path,n.caseSensitive,n.end),i=e.match(t);if(!i)return null;let a=i[0],o=a.replace(/(.)\/+$/,"$1"),c=i.slice(1);return{params:r.reduce((h,{paramName:p,isOptional:g},_)=>{if(p==="*"){let A=c[_]||"";o=a.slice(0,a.length-A.length).replace(/(.)\/+$/,"$1")}const E=c[_];return g&&!E?h[p]=void 0:h[p]=(E||"").replace(/%2F/g,"/"),h},{}),pathname:a,pathnameBase:o,pattern:n}}function X4(n,e=!1,t=!0){li(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let r=[],i="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,c,u)=>(r.push({paramName:c,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return n.endsWith("*")?(r.push({paramName:"*"}),i+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?i+="\\/*$":n!==""&&n!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function Y4(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return li(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function Ha(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}function K4(n,e="/"){let{pathname:t,search:r="",hash:i=""}=typeof n=="string"?bc(n):n;return{pathname:t?t.startsWith("/")?t:W4(t,e):e,search:J4(r),hash:eN(i)}}function W4(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(i=>{i===".."?t.length>1&&t.pop():i!=="."&&t.push(i)}),t.length>1?t.join("/"):"/"}function vm(n,e,t,r){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Q4(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function vv(n){let e=Q4(n);return e.map((t,r)=>r===e.length-1?t.pathname:t.pathnameBase)}function yv(n,e,t,r=!1){let i;typeof n=="string"?i=bc(n):(i={...n},Ht(!i.pathname||!i.pathname.includes("?"),vm("?","pathname","search",i)),Ht(!i.pathname||!i.pathname.includes("#"),vm("#","pathname","hash",i)),Ht(!i.search||!i.search.includes("#"),vm("#","search","hash",i)));let a=n===""||i.pathname==="",o=a?"/":i.pathname,c;if(o==null)c=t;else{let g=e.length-1;if(!r&&o.startsWith("..")){let _=o.split("/");for(;_[0]==="..";)_.shift(),g-=1;i.pathname=_.join("/")}c=g>=0?e[g]:"/"}let u=K4(i,c),h=o&&o!=="/"&&o.endsWith("/"),p=(a||o===".")&&t.endsWith("/");return!u.pathname.endsWith("/")&&(h||p)&&(u.pathname+="/"),u}var Ua=n=>n.join("/").replace(/\/\/+/g,"/"),Z4=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),J4=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,eN=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function tN(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}var $b=["POST","PUT","PATCH","DELETE"];new Set($b);var nN=["GET",...$b];new Set(nN);var Sc=P.createContext(null);Sc.displayName="DataRouter";var O0=P.createContext(null);O0.displayName="DataRouterState";P.createContext(!1);var Xb=P.createContext({isTransitioning:!1});Xb.displayName="ViewTransition";var rN=P.createContext(new Map);rN.displayName="Fetchers";var iN=P.createContext(null);iN.displayName="Await";var Mi=P.createContext(null);Mi.displayName="Navigation";var Tf=P.createContext(null);Tf.displayName="Location";var Pi=P.createContext({outlet:null,matches:[],isDataRoute:!1});Pi.displayName="Route";var _v=P.createContext(null);_v.displayName="RouteError";function aN(n,{relative:e}={}){Ht(Cc(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:r}=P.useContext(Mi),{hash:i,pathname:a,search:o}=If(n,{relative:e}),c=a;return t!=="/"&&(c=a==="/"?t:Ua([t,a])),r.createHref({pathname:c,search:o,hash:i})}function Cc(){return P.useContext(Tf)!=null}function ki(){return Ht(Cc(),"useLocation() may be used only in the context of a <Router> component."),P.useContext(Tf).location}var Yb="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Kb(n){P.useContext(Mi).static||P.useLayoutEffect(n)}function Jo(){let{isDataRoute:n}=P.useContext(Pi);return n?_N():sN()}function sN(){Ht(Cc(),"useNavigate() may be used only in the context of a <Router> component.");let n=P.useContext(Sc),{basename:e,navigator:t}=P.useContext(Mi),{matches:r}=P.useContext(Pi),{pathname:i}=ki(),a=JSON.stringify(vv(r)),o=P.useRef(!1);return Kb(()=>{o.current=!0}),P.useCallback((u,h={})=>{if(li(o.current,Yb),!o.current)return;if(typeof u=="number"){t.go(u);return}let p=yv(u,JSON.parse(a),i,h.relative==="path");n==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:Ua([e,p.pathname])),(h.replace?t.replace:t.push)(p,h.state,h)},[e,t,a,i,n])}P.createContext(null);function oN(){let{matches:n}=P.useContext(Pi),e=n[n.length-1];return e?e.params:{}}function If(n,{relative:e}={}){let{matches:t}=P.useContext(Pi),{pathname:r}=ki(),i=JSON.stringify(vv(t));return P.useMemo(()=>yv(n,JSON.parse(i),r,e==="path"),[n,i,r,e])}function lN(n,e){return Wb(n,e)}function Wb(n,e,t,r,i){Ht(Cc(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=P.useContext(Mi),{matches:o}=P.useContext(Pi),c=o[o.length-1],u=c?c.params:{},h=c?c.pathname:"/",p=c?c.pathnameBase:"/",g=c&&c.route;{let R=g&&g.path||"";Qb(h,!g||R.endsWith("*")||R.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${h}" (under <Route path="${R}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${R}"> to <Route path="${R==="/"?"*":`${R}/*`}">.`)}let _=ki(),E;if(e){let R=typeof e=="string"?bc(e):e;Ht(p==="/"||R.pathname?.startsWith(p),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${p}" but pathname "${R.pathname}" was given in the \`location\` prop.`),E=R}else E=_;let A=E.pathname||"/",S=A;if(p!=="/"){let R=p.replace(/^\//,"").split("/");S="/"+A.replace(/^\//,"").split("/").slice(R.length).join("/")}let O=Hb(n,{pathname:S});li(g||O!=null,`No routes matched location "${E.pathname}${E.search}${E.hash}" `),li(O==null||O[O.length-1].route.element!==void 0||O[O.length-1].route.Component!==void 0||O[O.length-1].route.lazy!==void 0,`Matched leaf route at location "${E.pathname}${E.search}${E.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let T=dN(O&&O.map(R=>Object.assign({},R,{params:Object.assign({},u,R.params),pathname:Ua([p,a.encodeLocation?a.encodeLocation(R.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:R.pathname]),pathnameBase:R.pathnameBase==="/"?p:Ua([p,a.encodeLocation?a.encodeLocation(R.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:R.pathnameBase])})),o,t,r,i);return e&&T?P.createElement(Tf.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...E},navigationType:"POP"}},T):T}function cN(){let n=yN(),e=tN(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},a={padding:"2px 4px",backgroundColor:r},o=null;return console.error("Error handled by React Router default ErrorBoundary:",n),o=P.createElement(P.Fragment,null,P.createElement("p",null,"💿 Hey developer 👋"),P.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",P.createElement("code",{style:a},"ErrorBoundary")," or"," ",P.createElement("code",{style:a},"errorElement")," prop on your route.")),P.createElement(P.Fragment,null,P.createElement("h2",null,"Unexpected Application Error!"),P.createElement("h3",{style:{fontStyle:"italic"}},e),t?P.createElement("pre",{style:i},t):null,o)}var uN=P.createElement(cN,null),fN=class extends P.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){this.props.unstable_onError?this.props.unstable_onError(n,e):console.error("React Router caught the following error during render",n)}render(){return this.state.error!==void 0?P.createElement(Pi.Provider,{value:this.props.routeContext},P.createElement(_v.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function hN({routeContext:n,match:e,children:t}){let r=P.useContext(Sc);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),P.createElement(Pi.Provider,{value:n},t)}function dN(n,e=[],t=null,r=null,i=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let a=n,o=t?.errors;if(o!=null){let h=a.findIndex(p=>p.route.id&&o?.[p.route.id]!==void 0);Ht(h>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),a=a.slice(0,Math.min(a.length,h+1))}let c=!1,u=-1;if(t)for(let h=0;h<a.length;h++){let p=a[h];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(u=h),p.route.id){let{loaderData:g,errors:_}=t,E=p.route.loader&&!g.hasOwnProperty(p.route.id)&&(!_||_[p.route.id]===void 0);if(p.route.lazy||E){c=!0,u>=0?a=a.slice(0,u+1):a=[a[0]];break}}}return a.reduceRight((h,p,g)=>{let _,E=!1,A=null,S=null;t&&(_=o&&p.route.id?o[p.route.id]:void 0,A=p.route.errorElement||uN,c&&(u<0&&g===0?(Qb("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),E=!0,S=null):u===g&&(E=!0,S=p.route.hydrateFallbackElement||null)));let O=e.concat(a.slice(0,g+1)),T=()=>{let R;return _?R=A:E?R=S:p.route.Component?R=P.createElement(p.route.Component,null):p.route.element?R=p.route.element:R=h,P.createElement(hN,{match:p,routeContext:{outlet:h,matches:O,isDataRoute:t!=null},children:R})};return t&&(p.route.ErrorBoundary||p.route.errorElement||g===0)?P.createElement(fN,{location:t.location,revalidation:t.revalidation,component:A,error:_,children:T(),routeContext:{outlet:null,matches:O,isDataRoute:!0},unstable_onError:r}):T()},null)}function xv(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function pN(n){let e=P.useContext(Sc);return Ht(e,xv(n)),e}function mN(n){let e=P.useContext(O0);return Ht(e,xv(n)),e}function gN(n){let e=P.useContext(Pi);return Ht(e,xv(n)),e}function Ev(n){let e=gN(n),t=e.matches[e.matches.length-1];return Ht(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function vN(){return Ev("useRouteId")}function yN(){let n=P.useContext(_v),e=mN("useRouteError"),t=Ev("useRouteError");return n!==void 0?n:e.errors?.[t]}function _N(){let{router:n}=pN("useNavigate"),e=Ev("useNavigate"),t=P.useRef(!1);return Kb(()=>{t.current=!0}),P.useCallback(async(i,a={})=>{li(t.current,Yb),t.current&&(typeof i=="number"?n.navigate(i):await n.navigate(i,{fromRouteId:e,...a}))},[n,e])}var bE={};function Qb(n,e,t){!e&&!bE[n]&&(bE[n]=!0,li(!1,t))}P.memo(xN);function xN({routes:n,future:e,state:t,unstable_onError:r}){return Wb(n,void 0,t,r,e)}function ni({to:n,replace:e,state:t,relative:r}){Ht(Cc(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=P.useContext(Mi);li(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:a}=P.useContext(Pi),{pathname:o}=ki(),c=Jo(),u=yv(n,vv(a),o,r==="path"),h=JSON.stringify(u);return P.useEffect(()=>{c(JSON.parse(h),{replace:e,state:t,relative:r})},[c,h,r,e,t]),null}function zt(n){Ht(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function EN({basename:n="/",children:e=null,location:t,navigationType:r="POP",navigator:i,static:a=!1}){Ht(!Cc(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=n.replace(/^\/*/,"/"),c=P.useMemo(()=>({basename:o,navigator:i,static:a,future:{}}),[o,i,a]);typeof t=="string"&&(t=bc(t));let{pathname:u="/",search:h="",hash:p="",state:g=null,key:_="default"}=t,E=P.useMemo(()=>{let A=Ha(u,o);return A==null?null:{location:{pathname:A,search:h,hash:p,state:g,key:_},navigationType:r}},[o,u,h,p,g,_,r]);return li(E!=null,`<Router basename="${o}"> is not able to match the URL "${u}${h}${p}" because it does not start with the basename, so the <Router> won't render anything.`),E==null?null:P.createElement(Mi.Provider,{value:c},P.createElement(Tf.Provider,{children:e,value:E}))}function Zb({children:n,location:e}){return lN(vg(n),e)}function vg(n,e=[]){let t=[];return P.Children.forEach(n,(r,i)=>{if(!P.isValidElement(r))return;let a=[...e,i];if(r.type===P.Fragment){t.push.apply(t,vg(r.props.children,a));return}Ht(r.type===zt,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Ht(!r.props.index||!r.props.children,"An index route cannot have child routes.");let o={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=vg(r.props.children,a)),t.push(o)}),t}var Md="get",Pd="application/x-www-form-urlencoded";function D0(n){return n!=null&&typeof n.tagName=="string"}function wN(n){return D0(n)&&n.tagName.toLowerCase()==="button"}function AN(n){return D0(n)&&n.tagName.toLowerCase()==="form"}function bN(n){return D0(n)&&n.tagName.toLowerCase()==="input"}function SN(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function CN(n,e){return n.button===0&&(!e||e==="_self")&&!SN(n)}function yg(n=""){return new URLSearchParams(typeof n=="string"||Array.isArray(n)||n instanceof URLSearchParams?n:Object.keys(n).reduce((e,t)=>{let r=n[t];return e.concat(Array.isArray(r)?r.map(i=>[t,i]):[[t,r]])},[]))}function TN(n,e){let t=yg(n);return e&&e.forEach((r,i)=>{t.has(i)||e.getAll(i).forEach(a=>{t.append(i,a)})}),t}var vd=null;function IN(){if(vd===null)try{new FormData(document.createElement("form"),0),vd=!1}catch{vd=!0}return vd}var NN=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function ym(n){return n!=null&&!NN.has(n)?(li(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Pd}"`),null):n}function RN(n,e){let t,r,i,a,o;if(AN(n)){let c=n.getAttribute("action");r=c?Ha(c,e):null,t=n.getAttribute("method")||Md,i=ym(n.getAttribute("enctype"))||Pd,a=new FormData(n)}else if(wN(n)||bN(n)&&(n.type==="submit"||n.type==="image")){let c=n.form;if(c==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let u=n.getAttribute("formaction")||c.getAttribute("action");if(r=u?Ha(u,e):null,t=n.getAttribute("formmethod")||c.getAttribute("method")||Md,i=ym(n.getAttribute("formenctype"))||ym(c.getAttribute("enctype"))||Pd,a=new FormData(c,n),!IN()){let{name:h,type:p,value:g}=n;if(p==="image"){let _=h?`${h}.`:"";a.append(`${_}x`,"0"),a.append(`${_}y`,"0")}else h&&a.append(h,g)}}else{if(D0(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Md,r=null,i=Pd,o=n}return a&&i==="text/plain"&&(o=a,a=void 0),{action:r,method:t.toLowerCase(),encType:i,formData:a,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function wv(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function ON(n,e,t){let r=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return r.pathname==="/"?r.pathname=`_root.${t}`:e&&Ha(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.${t}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${t}`,r}async function DN(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function MN(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function PN(n,e,t){let r=await Promise.all(n.map(async i=>{let a=e.routes[i.route.id];if(a){let o=await DN(a,t);return o.links?o.links():[]}return[]}));return BN(r.flat(1).filter(MN).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function SE(n,e,t,r,i,a){let o=(u,h)=>t[h]?u.route.id!==t[h].route.id:!0,c=(u,h)=>t[h].pathname!==u.pathname||t[h].route.path?.endsWith("*")&&t[h].params["*"]!==u.params["*"];return a==="assets"?e.filter((u,h)=>o(u,h)||c(u,h)):a==="data"?e.filter((u,h)=>{let p=r.routes[u.route.id];if(!p||!p.hasLoader)return!1;if(o(u,h)||c(u,h))return!0;if(u.route.shouldRevalidate){let g=u.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:t[0]?.params||{},nextUrl:new URL(n,window.origin),nextParams:u.params,defaultShouldRevalidate:!0});if(typeof g=="boolean")return g}return!0}):[]}function kN(n,e,{includeHydrateFallback:t}={}){return LN(n.map(r=>{let i=e.routes[r.route.id];if(!i)return[];let a=[i.module];return i.clientActionModule&&(a=a.concat(i.clientActionModule)),i.clientLoaderModule&&(a=a.concat(i.clientLoaderModule)),t&&i.hydrateFallbackModule&&(a=a.concat(i.hydrateFallbackModule)),i.imports&&(a=a.concat(i.imports)),a}).flat(1))}function LN(n){return[...new Set(n)]}function jN(n){let e={},t=Object.keys(n).sort();for(let r of t)e[r]=n[r];return e}function BN(n,e){let t=new Set;return new Set(e),n.reduce((r,i)=>{let a=JSON.stringify(jN(i));return t.has(a)||(t.add(a),r.push({key:a,link:i})),r},[])}function Jb(){let n=P.useContext(Sc);return wv(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function VN(){let n=P.useContext(O0);return wv(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var Av=P.createContext(void 0);Av.displayName="FrameworkContext";function eS(){let n=P.useContext(Av);return wv(n,"You must render this element inside a <HydratedRouter> element"),n}function FN(n,e){let t=P.useContext(Av),[r,i]=P.useState(!1),[a,o]=P.useState(!1),{onFocus:c,onBlur:u,onMouseEnter:h,onMouseLeave:p,onTouchStart:g}=e,_=P.useRef(null);P.useEffect(()=>{if(n==="render"&&o(!0),n==="viewport"){let S=T=>{T.forEach(R=>{o(R.isIntersecting)})},O=new IntersectionObserver(S,{threshold:.5});return _.current&&O.observe(_.current),()=>{O.disconnect()}}},[n]),P.useEffect(()=>{if(r){let S=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(S)}}},[r]);let E=()=>{i(!0)},A=()=>{i(!1),o(!1)};return t?n!=="intent"?[a,_,{}]:[a,_,{onFocus:zu(c,E),onBlur:zu(u,A),onMouseEnter:zu(h,E),onMouseLeave:zu(p,A),onTouchStart:zu(g,E)}]:[!1,_,{}]}function zu(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function UN({page:n,...e}){let{router:t}=Jb(),r=P.useMemo(()=>Hb(t.routes,n,t.basename),[t.routes,n,t.basename]);return r?P.createElement(HN,{page:n,matches:r,...e}):null}function zN(n){let{manifest:e,routeModules:t}=eS(),[r,i]=P.useState([]);return P.useEffect(()=>{let a=!1;return PN(n,e,t).then(o=>{a||i(o)}),()=>{a=!0}},[n,e,t]),r}function HN({page:n,matches:e,...t}){let r=ki(),{manifest:i,routeModules:a}=eS(),{basename:o}=Jb(),{loaderData:c,matches:u}=VN(),h=P.useMemo(()=>SE(n,e,u,i,r,"data"),[n,e,u,i,r]),p=P.useMemo(()=>SE(n,e,u,i,r,"assets"),[n,e,u,i,r]),g=P.useMemo(()=>{if(n===r.pathname+r.search+r.hash)return[];let A=new Set,S=!1;if(e.forEach(T=>{let R=i.routes[T.route.id];!R||!R.hasLoader||(!h.some(L=>L.route.id===T.route.id)&&T.route.id in c&&a[T.route.id]?.shouldRevalidate||R.hasClientLoader?S=!0:A.add(T.route.id))}),A.size===0)return[];let O=ON(n,o,"data");return S&&A.size>0&&O.searchParams.set("_routes",e.filter(T=>A.has(T.route.id)).map(T=>T.route.id).join(",")),[O.pathname+O.search]},[o,c,r,i,h,e,n,a]),_=P.useMemo(()=>kN(p,i),[p,i]),E=zN(p);return P.createElement(P.Fragment,null,g.map(A=>P.createElement("link",{key:A,rel:"prefetch",as:"fetch",href:A,...t})),_.map(A=>P.createElement("link",{key:A,rel:"modulepreload",href:A,...t})),E.map(({key:A,link:S})=>P.createElement("link",{key:A,nonce:t.nonce,...S})))}function GN(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var tS=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{tS&&(window.__reactRouterVersion="7.9.4")}catch{}function qN({basename:n,children:e,window:t}){let r=P.useRef();r.current==null&&(r.current=D4({window:t,v5Compat:!0}));let i=r.current,[a,o]=P.useState({action:i.action,location:i.location}),c=P.useCallback(u=>{P.startTransition(()=>o(u))},[o]);return P.useLayoutEffect(()=>i.listen(c),[i,c]),P.createElement(EN,{basename:n,children:e,location:a.location,navigationType:a.action,navigator:i})}var nS=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Wd=P.forwardRef(function({onClick:e,discover:t="render",prefetch:r="none",relative:i,reloadDocument:a,replace:o,state:c,target:u,to:h,preventScrollReset:p,viewTransition:g,..._},E){let{basename:A}=P.useContext(Mi),S=typeof h=="string"&&nS.test(h),O,T=!1;if(typeof h=="string"&&S&&(O=h,tS))try{let I=new URL(window.location.href),M=h.startsWith("//")?new URL(I.protocol+h):new URL(h),j=Ha(M.pathname,A);M.origin===I.origin&&j!=null?h=j+M.search+M.hash:T=!0}catch{li(!1,`<Link to="${h}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let R=aN(h,{relative:i}),[L,z,U]=FN(r,_),G=KN(h,{replace:o,state:c,target:u,preventScrollReset:p,relative:i,viewTransition:g});function D(I){e&&e(I),I.defaultPrevented||G(I)}let w=P.createElement("a",{..._,...U,href:O||R,onClick:T||a?e:D,ref:GN(E,z),target:u,"data-discover":!S&&t==="render"?"true":void 0});return L&&!S?P.createElement(P.Fragment,null,w,P.createElement(UN,{page:R})):w});Wd.displayName="Link";var $N=P.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:i=!1,style:a,to:o,viewTransition:c,children:u,...h},p){let g=If(o,{relative:h.relative}),_=ki(),E=P.useContext(O0),{navigator:A,basename:S}=P.useContext(Mi),O=E!=null&&eR(g)&&c===!0,T=A.encodeLocation?A.encodeLocation(g).pathname:g.pathname,R=_.pathname,L=E&&E.navigation&&E.navigation.location?E.navigation.location.pathname:null;t||(R=R.toLowerCase(),L=L?L.toLowerCase():null,T=T.toLowerCase()),L&&S&&(L=Ha(L,S)||L);const z=T!=="/"&&T.endsWith("/")?T.length-1:T.length;let U=R===T||!i&&R.startsWith(T)&&R.charAt(z)==="/",G=L!=null&&(L===T||!i&&L.startsWith(T)&&L.charAt(T.length)==="/"),D={isActive:U,isPending:G,isTransitioning:O},w=U?e:void 0,I;typeof r=="function"?I=r(D):I=[r,U?"active":null,G?"pending":null,O?"transitioning":null].filter(Boolean).join(" ");let M=typeof a=="function"?a(D):a;return P.createElement(Wd,{...h,"aria-current":w,className:I,ref:p,style:M,to:o,viewTransition:c},typeof u=="function"?u(D):u)});$N.displayName="NavLink";var XN=P.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:r,replace:i,state:a,method:o=Md,action:c,onSubmit:u,relative:h,preventScrollReset:p,viewTransition:g,..._},E)=>{let A=ZN(),S=JN(c,{relative:h}),O=o.toLowerCase()==="get"?"get":"post",T=typeof c=="string"&&nS.test(c),R=L=>{if(u&&u(L),L.defaultPrevented)return;L.preventDefault();let z=L.nativeEvent.submitter,U=z?.getAttribute("formmethod")||o;A(z||L.currentTarget,{fetcherKey:e,method:U,navigate:t,replace:i,state:a,relative:h,preventScrollReset:p,viewTransition:g})};return P.createElement("form",{ref:E,method:O,action:S,onSubmit:r?u:R,..._,"data-discover":!T&&n==="render"?"true":void 0})});XN.displayName="Form";function YN(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function rS(n){let e=P.useContext(Sc);return Ht(e,YN(n)),e}function KN(n,{target:e,replace:t,state:r,preventScrollReset:i,relative:a,viewTransition:o}={}){let c=Jo(),u=ki(),h=If(n,{relative:a});return P.useCallback(p=>{if(CN(p,e)){p.preventDefault();let g=t!==void 0?t:df(u)===df(h);c(n,{replace:g,state:r,preventScrollReset:i,relative:a,viewTransition:o})}},[u,c,h,t,r,e,n,i,a,o])}function bv(n){li(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=P.useRef(yg(n)),t=P.useRef(!1),r=ki(),i=P.useMemo(()=>TN(r.search,t.current?null:e.current),[r.search]),a=Jo(),o=P.useCallback((c,u)=>{const h=yg(typeof c=="function"?c(new URLSearchParams(i)):c);t.current=!0,a("?"+h,u)},[a,i]);return[i,o]}var WN=0,QN=()=>`__${String(++WN)}__`;function ZN(){let{router:n}=rS("useSubmit"),{basename:e}=P.useContext(Mi),t=vN();return P.useCallback(async(r,i={})=>{let{action:a,method:o,encType:c,formData:u,body:h}=RN(r,e);if(i.navigate===!1){let p=i.fetcherKey||QN();await n.fetch(p,t,i.action||a,{preventScrollReset:i.preventScrollReset,formData:u,body:h,formMethod:i.method||o,formEncType:i.encType||c,flushSync:i.flushSync})}else await n.navigate(i.action||a,{preventScrollReset:i.preventScrollReset,formData:u,body:h,formMethod:i.method||o,formEncType:i.encType||c,replace:i.replace,state:i.state,fromRouteId:t,flushSync:i.flushSync,viewTransition:i.viewTransition})},[n,e,t])}function JN(n,{relative:e}={}){let{basename:t}=P.useContext(Mi),r=P.useContext(Pi);Ht(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),a={...If(n||".",{relative:e})},o=ki();if(n==null){a.search=o.search;let c=new URLSearchParams(a.search),u=c.getAll("index");if(u.some(p=>p==="")){c.delete("index"),u.filter(g=>g).forEach(g=>c.append("index",g));let p=c.toString();a.search=p?`?${p}`:""}}return(!n||n===".")&&i.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(a.pathname=a.pathname==="/"?t:Ua([t,a.pathname])),df(a)}function eR(n,{relative:e}={}){let t=P.useContext(Xb);Ht(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=rS("useViewTransitionState"),i=If(n,{relative:e});if(!t.isTransitioning)return!1;let a=Ha(t.currentLocation.pathname,r)||t.currentLocation.pathname,o=Ha(t.nextLocation.pathname,r)||t.nextLocation.pathname;return Kd(i.pathname,o)!=null||Kd(i.pathname,a)!=null}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tR=()=>{};var CE={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iS=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},nR=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const a=n[t++];e[r++]=String.fromCharCode((i&31)<<6|a&63)}else if(i>239&&i<365){const a=n[t++],o=n[t++],c=n[t++],u=((i&7)<<18|(a&63)<<12|(o&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const a=n[t++],o=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(a&63)<<6|o&63)}}return e.join("")},aS={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const a=n[i],o=i+1<n.length,c=o?n[i+1]:0,u=i+2<n.length,h=u?n[i+2]:0,p=a>>2,g=(a&3)<<4|c>>4;let _=(c&15)<<2|h>>6,E=h&63;u||(E=64,o||(_=64)),r.push(t[p],t[g],t[_],t[E])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(iS(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):nR(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const a=t[n.charAt(i++)],c=i<n.length?t[n.charAt(i)]:0;++i;const h=i<n.length?t[n.charAt(i)]:64;++i;const g=i<n.length?t[n.charAt(i)]:64;if(++i,a==null||c==null||h==null||g==null)throw new rR;const _=a<<2|c>>4;if(r.push(_),h!==64){const E=c<<4&240|h>>2;if(r.push(E),g!==64){const A=h<<6&192|g;r.push(A)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class rR extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const iR=function(n){const e=iS(n);return aS.encodeByteArray(e,!0)},Qd=function(n){return iR(n).replace(/\./g,"")},sS=function(n){try{return aS.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aR(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sR=()=>aR().__FIREBASE_DEFAULTS__,oR=()=>{if(typeof process>"u"||typeof CE>"u")return;const n=CE.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},lR=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&sS(n[1]);return e&&JSON.parse(e)},M0=()=>{try{return tR()||sR()||oR()||lR()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},oS=n=>M0()?.emulatorHosts?.[n],cR=n=>{const e=oS(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},lS=()=>M0()?.config,cS=n=>M0()?.[`_${n}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uR{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tc(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function uS(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fR(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,a=n.sub||n.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}},...n};return[Qd(JSON.stringify(t)),Qd(JSON.stringify(o)),""].join(".")}const rf={};function hR(){const n={prod:[],emulator:[]};for(const e of Object.keys(rf))rf[e]?n.emulator.push(e):n.prod.push(e);return n}function dR(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let TE=!1;function fS(n,e){if(typeof window>"u"||typeof document>"u"||!Tc(window.location.host)||rf[n]===e||rf[n]||TE)return;rf[n]=e;function t(_){return`__firebase__banner__${_}`}const r="__firebase__banner",a=hR().prod.length>0;function o(){const _=document.getElementById(r);_&&_.remove()}function c(_){_.style.display="flex",_.style.background="#7faaf0",_.style.position="fixed",_.style.bottom="5px",_.style.left="5px",_.style.padding=".5em",_.style.borderRadius="5px",_.style.alignItems="center"}function u(_,E){_.setAttribute("width","24"),_.setAttribute("id",E),_.setAttribute("height","24"),_.setAttribute("viewBox","0 0 24 24"),_.setAttribute("fill","none"),_.style.marginLeft="-6px"}function h(){const _=document.createElement("span");return _.style.cursor="pointer",_.style.marginLeft="16px",_.style.fontSize="24px",_.innerHTML=" &times;",_.onclick=()=>{TE=!0,o()},_}function p(_,E){_.setAttribute("id",E),_.innerText="Learn more",_.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",_.setAttribute("target","__blank"),_.style.paddingLeft="5px",_.style.textDecoration="underline"}function g(){const _=dR(r),E=t("text"),A=document.getElementById(E)||document.createElement("span"),S=t("learnmore"),O=document.getElementById(S)||document.createElement("a"),T=t("preprendIcon"),R=document.getElementById(T)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(_.created){const L=_.element;c(L),p(O,S);const z=h();u(R,T),L.append(R,A,O,z),document.body.appendChild(L)}a?(A.innerText="Preview backend disconnected.",R.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(R.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,A.innerText="Preview backend running in this workspace."),A.setAttribute("id",E)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",g):g()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ar(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function pR(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ar())}function mR(){const n=M0()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function gR(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function vR(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function yR(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function _R(){const n=ar();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function xR(){return!mR()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ER(){try{return typeof indexedDB=="object"}catch{return!1}}function wR(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AR="FirebaseError";class ma extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=AR,Object.setPrototypeOf(this,ma.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Nf.prototype.create)}}class Nf{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},i=`${this.service}/${e}`,a=this.errors[e],o=a?bR(a,r):"Error",c=`${this.serviceName}: ${o} (${i}).`;return new ma(i,c,r)}}function bR(n,e){return n.replace(SR,(t,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const SR=/\{\$([^}]+)}/g;function CR(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Yo(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const i of t){if(!r.includes(i))return!1;const a=n[i],o=e[i];if(IE(a)&&IE(o)){if(!Yo(a,o))return!1}else if(a!==o)return!1}for(const i of r)if(!t.includes(i))return!1;return!0}function IE(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rf(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Xu(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,a]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(a)}}),e}function Yu(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function TR(n,e){const t=new IR(n,e);return t.subscribe.bind(t)}class IR{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");NR(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=_m),i.error===void 0&&(i.error=_m),i.complete===void 0&&(i.complete=_m);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function NR(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function _m(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sn(n){return n&&n._delegate?n._delegate:n}class Ko{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RR{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new uR;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(DR(e))try{this.getOrInitializeService({instanceIdentifier:Fo})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const a=this.getOrInitializeService({instanceIdentifier:i});r.resolve(a)}catch{}}}}clearInstance(e=Fo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Fo){return this.instances.has(e)}getOptions(e=Fo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[a,o]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(a);r===c&&o.resolve(i)}return i}onInit(e,t){const r=this.normalizeInstanceIdentifier(t),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const a=this.instances.get(r);return a&&e(a,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:OR(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Fo){return this.component?this.component.multipleInstances?e:Fo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function OR(n){return n===Fo?void 0:n}function DR(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MR{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new RR(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Je;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Je||(Je={}));const PR={debug:Je.DEBUG,verbose:Je.VERBOSE,info:Je.INFO,warn:Je.WARN,error:Je.ERROR,silent:Je.SILENT},kR=Je.INFO,LR={[Je.DEBUG]:"log",[Je.VERBOSE]:"log",[Je.INFO]:"info",[Je.WARN]:"warn",[Je.ERROR]:"error"},jR=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),i=LR[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Sv{constructor(e){this.name=e,this._logLevel=kR,this._logHandler=jR,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Je))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?PR[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Je.DEBUG,...e),this._logHandler(this,Je.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Je.VERBOSE,...e),this._logHandler(this,Je.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Je.INFO,...e),this._logHandler(this,Je.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Je.WARN,...e),this._logHandler(this,Je.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Je.ERROR,...e),this._logHandler(this,Je.ERROR,...e)}}const BR=(n,e)=>e.some(t=>n instanceof t);let NE,RE;function VR(){return NE||(NE=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function FR(){return RE||(RE=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const hS=new WeakMap,_g=new WeakMap,dS=new WeakMap,xm=new WeakMap,Cv=new WeakMap;function UR(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",a),n.removeEventListener("error",o)},a=()=>{t(Vs(n.result)),i()},o=()=>{r(n.error),i()};n.addEventListener("success",a),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&hS.set(t,n)}).catch(()=>{}),Cv.set(e,n),e}function zR(n){if(_g.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",a),n.removeEventListener("error",o),n.removeEventListener("abort",o)},a=()=>{t(),i()},o=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",a),n.addEventListener("error",o),n.addEventListener("abort",o)});_g.set(n,e)}let xg={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return _g.get(n);if(e==="objectStoreNames")return n.objectStoreNames||dS.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Vs(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function HR(n){xg=n(xg)}function GR(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(Em(this),e,...t);return dS.set(r,e.sort?e.sort():[e]),Vs(r)}:FR().includes(n)?function(...e){return n.apply(Em(this),e),Vs(hS.get(this))}:function(...e){return Vs(n.apply(Em(this),e))}}function qR(n){return typeof n=="function"?GR(n):(n instanceof IDBTransaction&&zR(n),BR(n,VR())?new Proxy(n,xg):n)}function Vs(n){if(n instanceof IDBRequest)return UR(n);if(xm.has(n))return xm.get(n);const e=qR(n);return e!==n&&(xm.set(n,e),Cv.set(e,n)),e}const Em=n=>Cv.get(n);function $R(n,e,{blocked:t,upgrade:r,blocking:i,terminated:a}={}){const o=indexedDB.open(n,e),c=Vs(o);return r&&o.addEventListener("upgradeneeded",u=>{r(Vs(o.result),u.oldVersion,u.newVersion,Vs(o.transaction),u)}),t&&o.addEventListener("blocked",u=>t(u.oldVersion,u.newVersion,u)),c.then(u=>{a&&u.addEventListener("close",()=>a()),i&&u.addEventListener("versionchange",h=>i(h.oldVersion,h.newVersion,h))}).catch(()=>{}),c}const XR=["get","getKey","getAll","getAllKeys","count"],YR=["put","add","delete","clear"],wm=new Map;function OE(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(wm.get(e))return wm.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=YR.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||XR.includes(t)))return;const a=async function(o,...c){const u=this.transaction(o,i?"readwrite":"readonly");let h=u.store;return r&&(h=h.index(c.shift())),(await Promise.all([h[t](...c),i&&u.done]))[0]};return wm.set(e,a),a}HR(n=>({...n,get:(e,t,r)=>OE(e,t)||n.get(e,t,r),has:(e,t)=>!!OE(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KR{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(WR(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function WR(n){return n.getComponent()?.type==="VERSION"}const Eg="@firebase/app",DE="0.14.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ga=new Sv("@firebase/app"),QR="@firebase/app-compat",ZR="@firebase/analytics-compat",JR="@firebase/analytics",e8="@firebase/app-check-compat",t8="@firebase/app-check",n8="@firebase/auth",r8="@firebase/auth-compat",i8="@firebase/database",a8="@firebase/data-connect",s8="@firebase/database-compat",o8="@firebase/functions",l8="@firebase/functions-compat",c8="@firebase/installations",u8="@firebase/installations-compat",f8="@firebase/messaging",h8="@firebase/messaging-compat",d8="@firebase/performance",p8="@firebase/performance-compat",m8="@firebase/remote-config",g8="@firebase/remote-config-compat",v8="@firebase/storage",y8="@firebase/storage-compat",_8="@firebase/firestore",x8="@firebase/ai",E8="@firebase/firestore-compat",w8="firebase",A8="12.3.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wg="[DEFAULT]",b8={[Eg]:"fire-core",[QR]:"fire-core-compat",[JR]:"fire-analytics",[ZR]:"fire-analytics-compat",[t8]:"fire-app-check",[e8]:"fire-app-check-compat",[n8]:"fire-auth",[r8]:"fire-auth-compat",[i8]:"fire-rtdb",[a8]:"fire-data-connect",[s8]:"fire-rtdb-compat",[o8]:"fire-fn",[l8]:"fire-fn-compat",[c8]:"fire-iid",[u8]:"fire-iid-compat",[f8]:"fire-fcm",[h8]:"fire-fcm-compat",[d8]:"fire-perf",[p8]:"fire-perf-compat",[m8]:"fire-rc",[g8]:"fire-rc-compat",[v8]:"fire-gcs",[y8]:"fire-gcs-compat",[_8]:"fire-fst",[E8]:"fire-fst-compat",[x8]:"fire-vertex","fire-js":"fire-js",[w8]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pf=new Map,S8=new Map,Ag=new Map;function ME(n,e){try{n.container.addComponent(e)}catch(t){Ga.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function mc(n){const e=n.name;if(Ag.has(e))return Ga.debug(`There were multiple attempts to register component ${e}.`),!1;Ag.set(e,n);for(const t of pf.values())ME(t,n);for(const t of S8.values())ME(t,n);return!0}function Tv(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function ii(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C8={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Fs=new Nf("app","Firebase",C8);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T8{constructor(e,t,r){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ko("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Fs.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ic=A8;function pS(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r={name:wg,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw Fs.create("bad-app-name",{appName:String(i)});if(t||(t=lS()),!t)throw Fs.create("no-options");const a=pf.get(i);if(a){if(Yo(t,a.options)&&Yo(r,a.config))return a;throw Fs.create("duplicate-app",{appName:i})}const o=new MR(i);for(const u of Ag.values())o.addComponent(u);const c=new T8(t,r,o);return pf.set(i,c),c}function mS(n=wg){const e=pf.get(n);if(!e&&n===wg&&lS())return pS();if(!e)throw Fs.create("no-app",{appName:n});return e}function PE(){return Array.from(pf.values())}function Us(n,e,t){let r=b8[n]??n;t&&(r+=`-${t}`);const i=r.match(/\s|\//),a=e.match(/\s|\//);if(i||a){const o=[`Unable to register library "${r}" with version "${e}":`];i&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&a&&o.push("and"),a&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ga.warn(o.join(" "));return}mc(new Ko(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I8="firebase-heartbeat-database",N8=1,mf="firebase-heartbeat-store";let Am=null;function gS(){return Am||(Am=$R(I8,N8,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(mf)}catch(t){console.warn(t)}}}}).catch(n=>{throw Fs.create("idb-open",{originalErrorMessage:n.message})})),Am}async function R8(n){try{const t=(await gS()).transaction(mf),r=await t.objectStore(mf).get(vS(n));return await t.done,r}catch(e){if(e instanceof ma)Ga.warn(e.message);else{const t=Fs.create("idb-get",{originalErrorMessage:e?.message});Ga.warn(t.message)}}}async function kE(n,e){try{const r=(await gS()).transaction(mf,"readwrite");await r.objectStore(mf).put(e,vS(n)),await r.done}catch(t){if(t instanceof ma)Ga.warn(t.message);else{const r=Fs.create("idb-set",{originalErrorMessage:t?.message});Ga.warn(r.message)}}}function vS(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O8=1024,D8=30;class M8{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new k8(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=LE();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:t}),this._heartbeatsCache.heartbeats.length>D8){const i=L8(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Ga.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=LE(),{heartbeatsToSend:t,unsentEntries:r}=P8(this._heartbeatsCache.heartbeats),i=Qd(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return Ga.warn(e),""}}}function LE(){return new Date().toISOString().substring(0,10)}function P8(n,e=O8){const t=[];let r=n.slice();for(const i of n){const a=t.find(o=>o.agent===i.agent);if(a){if(a.dates.push(i.date),jE(t)>e){a.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),jE(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class k8{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return ER()?wR().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await R8(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return kE(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return kE(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function jE(n){return Qd(JSON.stringify({version:2,heartbeats:n})).length}function L8(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j8(n){mc(new Ko("platform-logger",e=>new KR(e),"PRIVATE")),mc(new Ko("heartbeat",e=>new M8(e),"PRIVATE")),Us(Eg,DE,n),Us(Eg,DE,"esm2020"),Us("fire-js","")}j8("");function yS(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const B8=yS,_S=new Nf("auth","Firebase",yS());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zd=new Sv("@firebase/auth");function V8(n,...e){Zd.logLevel<=Je.WARN&&Zd.warn(`Auth (${Ic}): ${n}`,...e)}function kd(n,...e){Zd.logLevel<=Je.ERROR&&Zd.error(`Auth (${Ic}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oi(n,...e){throw Iv(n,...e)}function oa(n,...e){return Iv(n,...e)}function xS(n,e,t){const r={...B8(),[e]:t};return new Nf("auth","Firebase",r).create(e,{appName:n.name})}function za(n){return xS(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Iv(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return _S.create(n,...e)}function Be(n,e,...t){if(!n)throw Iv(e,...t)}function Ba(n){const e="INTERNAL ASSERTION FAILED: "+n;throw kd(e),new Error(e)}function qa(n,e){n||Ba(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bg(){return typeof self<"u"&&self.location?.href||""}function F8(){return BE()==="http:"||BE()==="https:"}function BE(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U8(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(F8()||vR()||"connection"in navigator)?navigator.onLine:!0}function z8(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Of{constructor(e,t){this.shortDelay=e,this.longDelay=t,qa(t>e,"Short delay should be less than long delay!"),this.isMobile=pR()||yR()}get(){return U8()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nv(n,e){qa(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ES{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ba("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ba("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ba("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H8={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G8=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],q8=new Of(3e4,6e4);function no(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function ro(n,e,t,r,i={}){return wS(n,i,async()=>{let a={},o={};r&&(e==="GET"?o=r:a={body:JSON.stringify(r)});const c=Rf({key:n.config.apiKey,...o}).slice(1),u=await n._getAdditionalHeaders();u["Content-Type"]="application/json",n.languageCode&&(u["X-Firebase-Locale"]=n.languageCode);const h={method:e,headers:u,...a};return gR()||(h.referrerPolicy="no-referrer"),n.emulatorConfig&&Tc(n.emulatorConfig.host)&&(h.credentials="include"),ES.fetch()(await AS(n,n.config.apiHost,t,c),h)})}async function wS(n,e,t){n._canInitEmulator=!1;const r={...H8,...e};try{const i=new X8(n),a=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();const o=await a.json();if("needConfirmation"in o)throw yd(n,"account-exists-with-different-credential",o);if(a.ok&&!("errorMessage"in o))return o;{const c=a.ok?o.errorMessage:o.error.message,[u,h]=c.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw yd(n,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw yd(n,"email-already-in-use",o);if(u==="USER_DISABLED")throw yd(n,"user-disabled",o);const p=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw xS(n,p,h);Oi(n,p)}}catch(i){if(i instanceof ma)throw i;Oi(n,"network-request-failed",{message:String(i)})}}async function Df(n,e,t,r,i={}){const a=await ro(n,e,t,r,i);return"mfaPendingCredential"in a&&Oi(n,"multi-factor-auth-required",{_serverResponse:a}),a}async function AS(n,e,t,r){const i=`${e}${t}?${r}`,a=n,o=a.config.emulator?Nv(n.config,i):`${n.config.apiScheme}://${i}`;return G8.includes(t)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(o).toString():o}function $8(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class X8{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(oa(this.auth,"network-request-failed")),q8.get())})}}function yd(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=oa(n,e,r);return i.customData._tokenResponse=t,i}function VE(n){return n!==void 0&&n.enterprise!==void 0}class Y8{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return $8(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function K8(n,e){return ro(n,"GET","/v2/recaptchaConfig",no(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function W8(n,e){return ro(n,"POST","/v1/accounts:delete",e)}async function Jd(n,e){return ro(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function af(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Q8(n,e=!1){const t=sn(n),r=await t.getIdToken(e),i=Rv(r);Be(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const a=typeof i.firebase=="object"?i.firebase:void 0,o=a?.sign_in_provider;return{claims:i,token:r,authTime:af(bm(i.auth_time)),issuedAtTime:af(bm(i.iat)),expirationTime:af(bm(i.exp)),signInProvider:o||null,signInSecondFactor:a?.sign_in_second_factor||null}}function bm(n){return Number(n)*1e3}function Rv(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return kd("JWT malformed, contained fewer than 3 sections"),null;try{const i=sS(t);return i?JSON.parse(i):(kd("Failed to decode base64 JWT payload"),null)}catch(i){return kd("Caught error parsing JWT payload as JSON",i?.toString()),null}}function FE(n){const e=Rv(n);return Be(e,"internal-error"),Be(typeof e.exp<"u","internal-error"),Be(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gf(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof ma&&Z8(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function Z8({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J8{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sg{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=af(this.lastLoginAt),this.creationTime=af(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function e0(n){const e=n.auth,t=await n.getIdToken(),r=await gf(n,Jd(e,{idToken:t}));Be(r?.users.length,e,"internal-error");const i=r.users[0];n._notifyReloadListener(i);const a=i.providerUserInfo?.length?bS(i.providerUserInfo):[],o=t6(n.providerData,a),c=n.isAnonymous,u=!(n.email&&i.passwordHash)&&!o?.length,h=c?u:!1,p={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Sg(i.createdAt,i.lastLoginAt),isAnonymous:h};Object.assign(n,p)}async function e6(n){const e=sn(n);await e0(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function t6(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function bS(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function n6(n,e){const t=await wS(n,{},async()=>{const r=Rf({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:a}=n.config,o=await AS(n,i,"/v1/token",`key=${a}`),c=await n._getAdditionalHeaders();c["Content-Type"]="application/x-www-form-urlencoded";const u={method:"POST",headers:c,body:r};return n.emulatorConfig&&Tc(n.emulatorConfig.host)&&(u.credentials="include"),ES.fetch()(o,u)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function r6(n,e){return ro(n,"POST","/v2/accounts:revokeToken",no(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uc{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Be(e.idToken,"internal-error"),Be(typeof e.idToken<"u","internal-error"),Be(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):FE(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Be(e.length!==0,"internal-error");const t=FE(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Be(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:i,expiresIn:a}=await n6(e,t);this.updateTokensAndExpiration(r,i,Number(a))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:a}=t,o=new uc;return r&&(Be(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(Be(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),a&&(Be(typeof a=="number","internal-error",{appName:e}),o.expirationTime=a),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new uc,this.toJSON())}_performRefresh(){return Ba("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Is(n,e){Be(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Ci{constructor({uid:e,auth:t,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new J8(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Sg(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await gf(this,this.stsTokenManager.getToken(this.auth,e));return Be(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return Q8(this,e)}reload(){return e6(this)}_assign(e){this!==e&&(Be(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Ci({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Be(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await e0(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ii(this.auth.app))return Promise.reject(za(this.auth));const e=await this.getIdToken();return await gf(this,W8(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const r=t.displayName??void 0,i=t.email??void 0,a=t.phoneNumber??void 0,o=t.photoURL??void 0,c=t.tenantId??void 0,u=t._redirectEventId??void 0,h=t.createdAt??void 0,p=t.lastLoginAt??void 0,{uid:g,emailVerified:_,isAnonymous:E,providerData:A,stsTokenManager:S}=t;Be(g&&S,e,"internal-error");const O=uc.fromJSON(this.name,S);Be(typeof g=="string",e,"internal-error"),Is(r,e.name),Is(i,e.name),Be(typeof _=="boolean",e,"internal-error"),Be(typeof E=="boolean",e,"internal-error"),Is(a,e.name),Is(o,e.name),Is(c,e.name),Is(u,e.name),Is(h,e.name),Is(p,e.name);const T=new Ci({uid:g,auth:e,email:i,emailVerified:_,displayName:r,isAnonymous:E,photoURL:o,phoneNumber:a,tenantId:c,stsTokenManager:O,createdAt:h,lastLoginAt:p});return A&&Array.isArray(A)&&(T.providerData=A.map(R=>({...R}))),u&&(T._redirectEventId=u),T}static async _fromIdTokenResponse(e,t,r=!1){const i=new uc;i.updateFromServerResponse(t);const a=new Ci({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await e0(a),a}static async _fromGetAccountInfoResponse(e,t,r){const i=t.users[0];Be(i.localId!==void 0,"internal-error");const a=i.providerUserInfo!==void 0?bS(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!a?.length,c=new uc;c.updateFromIdToken(r);const u=new Ci({uid:i.localId,auth:e,stsTokenManager:c,isAnonymous:o}),h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new Sg(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!a?.length};return Object.assign(u,h),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UE=new Map;function Va(n){qa(n instanceof Function,"Expected a class definition");let e=UE.get(n);return e?(qa(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,UE.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SS{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}SS.type="NONE";const zE=SS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ld(n,e,t){return`firebase:${n}:${e}:${t}`}class fc{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:a}=this.auth;this.fullUserKey=Ld(this.userKey,i.apiKey,a),this.fullPersistenceKey=Ld("persistence",i.apiKey,a),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Jd(this.auth,{idToken:e}).catch(()=>{});return t?Ci._fromGetAccountInfoResponse(this.auth,t,e):null}return Ci._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new fc(Va(zE),e,r);const i=(await Promise.all(t.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let a=i[0]||Va(zE);const o=Ld(r,e.config.apiKey,e.name);let c=null;for(const h of t)try{const p=await h._get(o);if(p){let g;if(typeof p=="string"){const _=await Jd(e,{idToken:p}).catch(()=>{});if(!_)break;g=await Ci._fromGetAccountInfoResponse(e,_,p)}else g=Ci._fromJSON(e,p);h!==a&&(c=g),a=h;break}}catch{}const u=i.filter(h=>h._shouldAllowMigration);return!a._shouldAllowMigration||!u.length?new fc(a,e,r):(a=u[0],c&&await a._set(o,c.toJSON()),await Promise.all(t.map(async h=>{if(h!==a)try{await h._remove(o)}catch{}})),new fc(a,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HE(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(NS(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(CS(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(OS(e))return"Blackberry";if(DS(e))return"Webos";if(TS(e))return"Safari";if((e.includes("chrome/")||IS(e))&&!e.includes("edge/"))return"Chrome";if(RS(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function CS(n=ar()){return/firefox\//i.test(n)}function TS(n=ar()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function IS(n=ar()){return/crios\//i.test(n)}function NS(n=ar()){return/iemobile/i.test(n)}function RS(n=ar()){return/android/i.test(n)}function OS(n=ar()){return/blackberry/i.test(n)}function DS(n=ar()){return/webos/i.test(n)}function Ov(n=ar()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function i6(n=ar()){return Ov(n)&&!!window.navigator?.standalone}function a6(){return _R()&&document.documentMode===10}function MS(n=ar()){return Ov(n)||RS(n)||DS(n)||OS(n)||/windows phone/i.test(n)||NS(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PS(n,e=[]){let t;switch(n){case"Browser":t=HE(ar());break;case"Worker":t=`${HE(ar())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Ic}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s6{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=a=>new Promise((o,c)=>{try{const u=e(a);o(u)}catch(u){c(u)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function o6(n,e={}){return ro(n,"GET","/v2/passwordPolicy",no(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l6=6;class c6{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??l6,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u6{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new GE(this),this.idTokenSubscription=new GE(this),this.beforeStateQueue=new s6(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=_S,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Va(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await fc.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Jd(this,{idToken:e}),r=await Ci._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(ii(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(o,o))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let r=t,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=this.redirectUser?._redirectEventId,o=r?._redirectEventId,c=await this.tryRedirectSignIn(e);(!a||a===o)&&c?.user&&(r=c.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(a){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Be(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await e0(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=z8()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ii(this.app))return Promise.reject(za(this));const t=e?sn(e):null;return t&&Be(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Be(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ii(this.app)?Promise.reject(za(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ii(this.app)?Promise.reject(za(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Va(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await o6(this),t=new c6(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Nf("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await r6(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Va(e)||this._popupRedirectResolver;Be(t,this,"argument-error"),this.redirectPersistenceManager=await fc.create(this,[Va(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const a=typeof t=="function"?t:t.next.bind(t);let o=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(Be(c,this,"internal-error"),c.then(()=>{o||a(this.currentUser)}),typeof t=="function"){const u=e.addObserver(t,r,i);return()=>{o=!0,u()}}else{const u=e.addObserver(t);return()=>{o=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Be(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=PS(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(ii(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&V8(`Error while retrieving App Check token: ${e.error}`),e?.token}}function el(n){return sn(n)}class GE{constructor(e){this.auth=e,this.observer=null,this.addObserver=TR(t=>this.observer=t)}get next(){return Be(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let P0={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function f6(n){P0=n}function kS(n){return P0.loadJS(n)}function h6(){return P0.recaptchaEnterpriseScript}function d6(){return P0.gapiScript}function p6(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class m6{constructor(){this.enterprise=new g6}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class g6{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const v6="recaptcha-enterprise",LS="NO_RECAPTCHA";class y6{constructor(e){this.type=v6,this.auth=el(e)}async verify(e="verify",t=!1){async function r(a){if(!t){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(o,c)=>{K8(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{const h=new Y8(u);return a.tenantId==null?a._agentRecaptchaConfig=h:a._tenantRecaptchaConfigs[a.tenantId]=h,o(h.siteKey)}}).catch(u=>{c(u)})})}function i(a,o,c){const u=window.grecaptcha;VE(u)?u.enterprise.ready(()=>{u.enterprise.execute(a,{action:e}).then(h=>{o(h)}).catch(()=>{o(LS)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new m6().execute("siteKey",{action:"verify"}):new Promise((a,o)=>{r(this.auth).then(c=>{if(!t&&VE(window.grecaptcha))i(c,a,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let u=h6();u.length!==0&&(u+=c),kS(u).then(()=>{i(c,a,o)}).catch(h=>{o(h)})}}).catch(c=>{o(c)})})}}async function qE(n,e,t,r=!1,i=!1){const a=new y6(n);let o;if(i)o=LS;else try{o=await a.verify(t)}catch{o=await a.verify(t,!0)}const c={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in c){const u=c.phoneEnrollmentInfo.phoneNumber,h=c.phoneEnrollmentInfo.recaptchaToken;Object.assign(c,{phoneEnrollmentInfo:{phoneNumber:u,recaptchaToken:h,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in c){const u=c.phoneSignInInfo.recaptchaToken;Object.assign(c,{phoneSignInInfo:{recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return c}return r?Object.assign(c,{captchaResp:o}):Object.assign(c,{captchaResponse:o}),Object.assign(c,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(c,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),c}async function $E(n,e,t,r,i){if(n._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await qE(n,e,t,t==="getOobCode");return r(n,a)}else return r(n,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await qE(n,e,t,t==="getOobCode");return r(n,o)}else return Promise.reject(a)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _6(n,e){const t=Tv(n,"auth");if(t.isInitialized()){const i=t.getImmediate(),a=t.getOptions();if(Yo(a,e??{}))return i;Oi(i,"already-initialized")}return t.initialize({options:e})}function x6(n,e){const t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(Va);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function E6(n,e,t){const r=el(n);Be(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,a=jS(e),{host:o,port:c}=w6(e),u=c===null?"":`:${c}`,h={url:`${a}//${o}${u}/`},p=Object.freeze({host:o,port:c,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){Be(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Be(Yo(h,r.config.emulator)&&Yo(p,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=h,r.emulatorConfig=p,r.settings.appVerificationDisabledForTesting=!0,Tc(o)?(uS(`${a}//${o}${u}`),fS("Auth",!0)):A6()}function jS(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function w6(n){const e=jS(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const a=i[1];return{host:a,port:XE(r.substr(a.length+1))}}else{const[a,o]=r.split(":");return{host:a,port:XE(o)}}}function XE(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function A6(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dv{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Ba("not implemented")}_getIdTokenResponse(e){return Ba("not implemented")}_linkToIdToken(e,t){return Ba("not implemented")}_getReauthenticationResolver(e){return Ba("not implemented")}}async function b6(n,e){return ro(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function S6(n,e){return Df(n,"POST","/v1/accounts:signInWithPassword",no(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function C6(n,e){return Df(n,"POST","/v1/accounts:signInWithEmailLink",no(n,e))}async function T6(n,e){return Df(n,"POST","/v1/accounts:signInWithEmailLink",no(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vf extends Dv{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new vf(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new vf(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return $E(e,t,"signInWithPassword",S6);case"emailLink":return C6(e,{email:this._email,oobCode:this._password});default:Oi(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return $E(e,r,"signUpPassword",b6);case"emailLink":return T6(e,{idToken:t,email:this._email,oobCode:this._password});default:Oi(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hc(n,e){return Df(n,"POST","/v1/accounts:signInWithIdp",no(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I6="http://localhost";class Wo extends Dv{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Wo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Oi("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,...a}=t;if(!r||!i)return null;const o=new Wo(r,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}_getIdTokenResponse(e){const t=this.buildRequest();return hc(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,hc(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,hc(e,t)}buildRequest(){const e={requestUri:I6,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Rf(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N6(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function R6(n){const e=Xu(Yu(n)).link,t=e?Xu(Yu(e)).deep_link_id:null,r=Xu(Yu(n)).deep_link_id;return(r?Xu(Yu(r)).link:null)||r||t||e||n}class Mv{constructor(e){const t=Xu(Yu(e)),r=t.apiKey??null,i=t.oobCode??null,a=N6(t.mode??null);Be(r&&i&&a,"argument-error"),this.apiKey=r,this.operation=a,this.code=i,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=R6(e);try{return new Mv(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nc{constructor(){this.providerId=Nc.PROVIDER_ID}static credential(e,t){return vf._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=Mv.parseLink(t);return Be(r,"argument-error"),vf._fromEmailAndCode(e,r.code,r.tenantId)}}Nc.PROVIDER_ID="password";Nc.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Nc.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BS{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mf extends BS{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ms extends Mf{constructor(){super("facebook.com")}static credential(e){return Wo._fromParams({providerId:Ms.PROVIDER_ID,signInMethod:Ms.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ms.credentialFromTaggedObject(e)}static credentialFromError(e){return Ms.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ms.credential(e.oauthAccessToken)}catch{return null}}}Ms.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ms.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ps extends Mf{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Wo._fromParams({providerId:Ps.PROVIDER_ID,signInMethod:Ps.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Ps.credentialFromTaggedObject(e)}static credentialFromError(e){return Ps.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return Ps.credential(t,r)}catch{return null}}}Ps.GOOGLE_SIGN_IN_METHOD="google.com";Ps.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ks extends Mf{constructor(){super("github.com")}static credential(e){return Wo._fromParams({providerId:ks.PROVIDER_ID,signInMethod:ks.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ks.credentialFromTaggedObject(e)}static credentialFromError(e){return ks.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ks.credential(e.oauthAccessToken)}catch{return null}}}ks.GITHUB_SIGN_IN_METHOD="github.com";ks.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ls extends Mf{constructor(){super("twitter.com")}static credential(e,t){return Wo._fromParams({providerId:Ls.PROVIDER_ID,signInMethod:Ls.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Ls.credentialFromTaggedObject(e)}static credentialFromError(e){return Ls.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return Ls.credential(t,r)}catch{return null}}}Ls.TWITTER_SIGN_IN_METHOD="twitter.com";Ls.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function O6(n,e){return Df(n,"POST","/v1/accounts:signUp",no(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ys{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,i=!1){const a=await Ci._fromIdTokenResponse(e,r,i),o=YE(r);return new Ys({user:a,providerId:o,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const i=YE(r);return new Ys({user:e,providerId:i,_tokenResponse:r,operationType:t})}}function YE(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VS(n){if(ii(n.app))return Promise.reject(za(n));const e=el(n);if(await e._initializationPromise,e.currentUser?.isAnonymous)return new Ys({user:e.currentUser,providerId:null,operationType:"signIn"});const t=await O6(e,{returnSecureToken:!0}),r=await Ys._fromIdTokenResponse(e,"signIn",t,!0);return await e._updateCurrentUser(r.user),r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t0 extends ma{constructor(e,t,r,i){super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,t0.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new t0(e,t,r,i)}}function FS(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?t0._fromErrorAndOperation(n,a,e,r):a})}async function D6(n,e,t=!1){const r=await gf(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Ys._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function M6(n,e,t=!1){const{auth:r}=n;if(ii(r.app))return Promise.reject(za(r));const i="reauthenticate";try{const a=await gf(n,FS(r,i,e,n),t);Be(a.idToken,r,"internal-error");const o=Rv(a.idToken);Be(o,r,"internal-error");const{sub:c}=o;return Be(n.uid===c,r,"user-mismatch"),Ys._forOperation(n,i,a)}catch(a){throw a?.code==="auth/user-not-found"&&Oi(r,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function US(n,e,t=!1){if(ii(n.app))return Promise.reject(za(n));const r="signIn",i=await FS(n,r,e),a=await Ys._fromIdTokenResponse(n,r,i);return t||await n._updateCurrentUser(a.user),a}async function P6(n,e){return US(el(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function k6(n){const e=el(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function L6(n,e,t){return ii(n.app)?Promise.reject(za(n)):P6(sn(n),Nc.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&k6(n),r})}function j6(n,e,t,r){return sn(n).onIdTokenChanged(e,t,r)}function B6(n,e,t){return sn(n).beforeAuthStateChanged(e,t)}function zS(n,e,t,r){return sn(n).onAuthStateChanged(e,t,r)}function V6(n){return sn(n).signOut()}const n0="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HS{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(n0,"1"),this.storage.removeItem(n0),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F6=1e3,U6=10;class GS extends HS{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=MS(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),i=this.localCache[t];r!==i&&e(t,i,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((o,c,u)=>{this.notifyListeners(o,u)});return}const r=e.key;t?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!t&&this.localCache[r]===o||this.notifyListeners(r,o)},a=this.storage.getItem(r);a6()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,U6):i()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},F6)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}GS.type="LOCAL";const z6=GS;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qS extends HS{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}qS.type="SESSION";const $S=qS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H6(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k0{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(i=>i.isListeningto(e));if(t)return t;const r=new k0(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:i,data:a}=t.data,o=this.handlersMap[i];if(!o?.size)return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const c=Array.from(o).map(async h=>h(t.origin,a)),u=await H6(c);t.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:u})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}k0.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pv(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G6{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let a,o;return new Promise((c,u)=>{const h=Pv("",20);i.port1.start();const p=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(g){const _=g;if(_.data.eventId===h)switch(_.data.status){case"ack":clearTimeout(p),a=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),c(_.data.response);break;default:clearTimeout(p),clearTimeout(a),u(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:h,data:t},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function la(){return window}function q6(n){la().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XS(){return typeof la().WorkerGlobalScope<"u"&&typeof la().importScripts=="function"}async function $6(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function X6(){return navigator?.serviceWorker?.controller||null}function Y6(){return XS()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YS="firebaseLocalStorageDb",K6=1,r0="firebaseLocalStorage",KS="fbase_key";class Pf{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function L0(n,e){return n.transaction([r0],e?"readwrite":"readonly").objectStore(r0)}function W6(){const n=indexedDB.deleteDatabase(YS);return new Pf(n).toPromise()}function Cg(){const n=indexedDB.open(YS,K6);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(r0,{keyPath:KS})}catch(i){t(i)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(r0)?e(r):(r.close(),await W6(),e(await Cg()))})})}async function KE(n,e,t){const r=L0(n,!0).put({[KS]:e,value:t});return new Pf(r).toPromise()}async function Q6(n,e){const t=L0(n,!1).get(e),r=await new Pf(t).toPromise();return r===void 0?null:r.value}function WE(n,e){const t=L0(n,!0).delete(e);return new Pf(t).toPromise()}const Z6=800,J6=3;class WS{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Cg(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>J6)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return XS()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=k0._getInstance(Y6()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await $6(),!this.activeServiceWorker)return;this.sender=new G6(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||X6()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Cg();return await KE(e,n0,"1"),await WE(e,n0),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>KE(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>Q6(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>WE(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const a=L0(i,!1).getAll();return new Pf(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:a}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(a)&&(this.notifyListeners(i,a),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Z6)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}WS.type="LOCAL";const eO=WS;new Of(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tO(n,e){return e?Va(e):(Be(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kv extends Dv{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return hc(e,this._buildIdpRequest())}_linkToIdToken(e,t){return hc(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return hc(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function nO(n){return US(n.auth,new kv(n),n.bypassAuthState)}function rO(n){const{auth:e,user:t}=n;return Be(t,e,"internal-error"),M6(t,new kv(n),n.bypassAuthState)}async function iO(n){const{auth:e,user:t}=n;return Be(t,e,"internal-error"),D6(t,new kv(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QS{constructor(e,t,r,i,a=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:i,tenantId:a,error:o,type:c}=e;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:t,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(u))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return nO;case"linkViaPopup":case"linkViaRedirect":return iO;case"reauthViaPopup":case"reauthViaRedirect":return rO;default:Oi(this.auth,"internal-error")}}resolve(e){qa(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){qa(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aO=new Of(2e3,1e4);class rc extends QS{constructor(e,t,r,i,a){super(e,t,i,a),this.provider=r,this.authWindow=null,this.pollId=null,rc.currentPopupAction&&rc.currentPopupAction.cancel(),rc.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Be(e,this.auth,"internal-error"),e}async onExecution(){qa(this.filter.length===1,"Popup operations only handle one event");const e=Pv();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(oa(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(oa(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,rc.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(oa(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,aO.get())};e()}}rc.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sO="pendingRedirect",jd=new Map;class oO extends QS{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=jd.get(this.auth._key());if(!e){try{const r=await lO(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}jd.set(this.auth._key(),e)}return this.bypassAuthState||jd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function lO(n,e){const t=fO(e),r=uO(n);if(!await r._isAvailable())return!1;const i=await r._get(t)==="true";return await r._remove(t),i}function cO(n,e){jd.set(n._key(),e)}function uO(n){return Va(n._redirectPersistence)}function fO(n){return Ld(sO,n.config.apiKey,n.name)}async function hO(n,e,t=!1){if(ii(n.app))return Promise.reject(za(n));const r=el(n),i=tO(r,e),o=await new oO(r,i,t).execute();return o&&!t&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dO=600*1e3;class pO{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!mO(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!ZS(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";t.onError(oa(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=dO&&this.cachedEventUids.clear(),this.cachedEventUids.has(QE(e))}saveEventToCache(e){this.cachedEventUids.add(QE(e)),this.lastProcessedEventTime=Date.now()}}function QE(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function ZS({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function mO(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ZS(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gO(n,e={}){return ro(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vO=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,yO=/^https?/;async function _O(n){if(n.config.emulator)return;const{authorizedDomains:e}=await gO(n);for(const t of e)try{if(xO(t))return}catch{}Oi(n,"unauthorized-domain")}function xO(n){const e=bg(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const o=new URL(n);return o.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&o.hostname===r}if(!yO.test(t))return!1;if(vO.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EO=new Of(3e4,6e4);function ZE(){const n=la().___jsl;if(n?.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function wO(n){return new Promise((e,t)=>{function r(){ZE(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{ZE(),t(oa(n,"network-request-failed"))},timeout:EO.get()})}if(la().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(la().gapi?.load)r();else{const i=p6("iframefcb");return la()[i]=()=>{gapi.load?r():t(oa(n,"network-request-failed"))},kS(`${d6()}?onload=${i}`).catch(a=>t(a))}}).catch(e=>{throw Bd=null,e})}let Bd=null;function AO(n){return Bd=Bd||wO(n),Bd}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bO=new Of(5e3,15e3),SO="__/auth/iframe",CO="emulator/auth/iframe",TO={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},IO=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function NO(n){const e=n.config;Be(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Nv(e,CO):`https://${n.config.authDomain}/${SO}`,r={apiKey:e.apiKey,appName:n.name,v:Ic},i=IO.get(n.config.apiHost);i&&(r.eid=i);const a=n._getFrameworks();return a.length&&(r.fw=a.join(",")),`${t}?${Rf(r).slice(1)}`}async function RO(n){const e=await AO(n),t=la().gapi;return Be(t,n,"internal-error"),e.open({where:document.body,url:NO(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:TO,dontclear:!0},r=>new Promise(async(i,a)=>{await r.restyle({setHideOnLeave:!1});const o=oa(n,"network-request-failed"),c=la().setTimeout(()=>{a(o)},bO.get());function u(){la().clearTimeout(c),i(r)}r.ping(u).then(u,()=>{a(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OO={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},DO=500,MO=600,PO="_blank",kO="http://localhost";class JE{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function LO(n,e,t,r=DO,i=MO){const a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let c="";const u={...OO,width:r.toString(),height:i.toString(),top:a,left:o},h=ar().toLowerCase();t&&(c=IS(h)?PO:t),CS(h)&&(e=e||kO,u.scrollbars="yes");const p=Object.entries(u).reduce((_,[E,A])=>`${_}${E}=${A},`,"");if(i6(h)&&c!=="_self")return jO(e||"",c),new JE(null);const g=window.open(e||"",c,p);Be(g,n,"popup-blocked");try{g.focus()}catch{}return new JE(g)}function jO(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BO="__/auth/handler",VO="emulator/auth/handler",FO=encodeURIComponent("fac");async function ew(n,e,t,r,i,a){Be(n.config.authDomain,n,"auth-domain-config-required"),Be(n.config.apiKey,n,"invalid-api-key");const o={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Ic,eventId:i};if(e instanceof BS){e.setDefaultLanguage(n.languageCode),o.providerId=e.providerId||"",CR(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[p,g]of Object.entries({}))o[p]=g}if(e instanceof Mf){const p=e.getScopes().filter(g=>g!=="");p.length>0&&(o.scopes=p.join(","))}n.tenantId&&(o.tid=n.tenantId);const c=o;for(const p of Object.keys(c))c[p]===void 0&&delete c[p];const u=await n._getAppCheckToken(),h=u?`#${FO}=${encodeURIComponent(u)}`:"";return`${UO(n)}?${Rf(c).slice(1)}${h}`}function UO({config:n}){return n.emulator?Nv(n,VO):`https://${n.authDomain}/${BO}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sm="webStorageSupport";class zO{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=$S,this._completeRedirectFn=hO,this._overrideRedirectResult=cO}async _openPopup(e,t,r,i){qa(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const a=await ew(e,t,r,bg(),i);return LO(e,a,Pv())}async _openRedirect(e,t,r,i){await this._originValidation(e);const a=await ew(e,t,r,bg(),i);return q6(a),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:a}=this.eventManagers[t];return i?Promise.resolve(i):(qa(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await RO(e),r=new pO(e);return t.register("authEvent",i=>(Be(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Sm,{type:Sm},i=>{const a=i?.[0]?.[Sm];a!==void 0&&t(!!a),Oi(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=_O(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return MS()||TS()||Ov()}}const HO=zO;var tw="@firebase/auth",nw="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GO{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Be(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qO(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function $O(n){mc(new Ko("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:o,authDomain:c}=r.options;Be(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:c,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:PS(n)},h=new u6(r,i,a,u);return x6(h,t),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),mc(new Ko("auth-internal",e=>{const t=el(e.getProvider("auth").getImmediate());return(r=>new GO(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Us(tw,nw,qO(n)),Us(tw,nw,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XO=300,YO=cS("authIdTokenMaxAge")||XO;let rw=null;const KO=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>YO)return;const i=t?.token;rw!==i&&(rw=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function WO(n=mS()){const e=Tv(n,"auth");if(e.isInitialized())return e.getImmediate();const t=_6(n,{popupRedirectResolver:HO,persistence:[eO,z6,$S]}),r=cS("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(r,location.origin);if(location.origin===a.origin){const o=KO(a.toString());B6(t,o,()=>o(t.currentUser)),j6(t,c=>o(c))}}const i=oS("auth");return i&&E6(t,`http://${i}`),t}function QO(){return document.getElementsByTagName("head")?.[0]??document}f6({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{const a=oa("internal-error");a.customData=i,t(a)},r.type="text/javascript",r.charset="UTF-8",QO().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});$O("Browser");var ZO="firebase",JO="12.3.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Us(ZO,JO,"app");var iw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var zs,JS;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(D,w){function I(){}I.prototype=w.prototype,D.F=w.prototype,D.prototype=new I,D.prototype.constructor=D,D.D=function(M,j,V){for(var k=Array(arguments.length-2),ee=2;ee<arguments.length;ee++)k[ee-2]=arguments[ee];return w.prototype[j].apply(M,k)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(D,w,I){I||(I=0);const M=Array(16);if(typeof w=="string")for(var j=0;j<16;++j)M[j]=w.charCodeAt(I++)|w.charCodeAt(I++)<<8|w.charCodeAt(I++)<<16|w.charCodeAt(I++)<<24;else for(j=0;j<16;++j)M[j]=w[I++]|w[I++]<<8|w[I++]<<16|w[I++]<<24;w=D.g[0],I=D.g[1],j=D.g[2];let V=D.g[3],k;k=w+(V^I&(j^V))+M[0]+3614090360&4294967295,w=I+(k<<7&4294967295|k>>>25),k=V+(j^w&(I^j))+M[1]+3905402710&4294967295,V=w+(k<<12&4294967295|k>>>20),k=j+(I^V&(w^I))+M[2]+606105819&4294967295,j=V+(k<<17&4294967295|k>>>15),k=I+(w^j&(V^w))+M[3]+3250441966&4294967295,I=j+(k<<22&4294967295|k>>>10),k=w+(V^I&(j^V))+M[4]+4118548399&4294967295,w=I+(k<<7&4294967295|k>>>25),k=V+(j^w&(I^j))+M[5]+1200080426&4294967295,V=w+(k<<12&4294967295|k>>>20),k=j+(I^V&(w^I))+M[6]+2821735955&4294967295,j=V+(k<<17&4294967295|k>>>15),k=I+(w^j&(V^w))+M[7]+4249261313&4294967295,I=j+(k<<22&4294967295|k>>>10),k=w+(V^I&(j^V))+M[8]+1770035416&4294967295,w=I+(k<<7&4294967295|k>>>25),k=V+(j^w&(I^j))+M[9]+2336552879&4294967295,V=w+(k<<12&4294967295|k>>>20),k=j+(I^V&(w^I))+M[10]+4294925233&4294967295,j=V+(k<<17&4294967295|k>>>15),k=I+(w^j&(V^w))+M[11]+2304563134&4294967295,I=j+(k<<22&4294967295|k>>>10),k=w+(V^I&(j^V))+M[12]+1804603682&4294967295,w=I+(k<<7&4294967295|k>>>25),k=V+(j^w&(I^j))+M[13]+4254626195&4294967295,V=w+(k<<12&4294967295|k>>>20),k=j+(I^V&(w^I))+M[14]+2792965006&4294967295,j=V+(k<<17&4294967295|k>>>15),k=I+(w^j&(V^w))+M[15]+1236535329&4294967295,I=j+(k<<22&4294967295|k>>>10),k=w+(j^V&(I^j))+M[1]+4129170786&4294967295,w=I+(k<<5&4294967295|k>>>27),k=V+(I^j&(w^I))+M[6]+3225465664&4294967295,V=w+(k<<9&4294967295|k>>>23),k=j+(w^I&(V^w))+M[11]+643717713&4294967295,j=V+(k<<14&4294967295|k>>>18),k=I+(V^w&(j^V))+M[0]+3921069994&4294967295,I=j+(k<<20&4294967295|k>>>12),k=w+(j^V&(I^j))+M[5]+3593408605&4294967295,w=I+(k<<5&4294967295|k>>>27),k=V+(I^j&(w^I))+M[10]+38016083&4294967295,V=w+(k<<9&4294967295|k>>>23),k=j+(w^I&(V^w))+M[15]+3634488961&4294967295,j=V+(k<<14&4294967295|k>>>18),k=I+(V^w&(j^V))+M[4]+3889429448&4294967295,I=j+(k<<20&4294967295|k>>>12),k=w+(j^V&(I^j))+M[9]+568446438&4294967295,w=I+(k<<5&4294967295|k>>>27),k=V+(I^j&(w^I))+M[14]+3275163606&4294967295,V=w+(k<<9&4294967295|k>>>23),k=j+(w^I&(V^w))+M[3]+4107603335&4294967295,j=V+(k<<14&4294967295|k>>>18),k=I+(V^w&(j^V))+M[8]+1163531501&4294967295,I=j+(k<<20&4294967295|k>>>12),k=w+(j^V&(I^j))+M[13]+2850285829&4294967295,w=I+(k<<5&4294967295|k>>>27),k=V+(I^j&(w^I))+M[2]+4243563512&4294967295,V=w+(k<<9&4294967295|k>>>23),k=j+(w^I&(V^w))+M[7]+1735328473&4294967295,j=V+(k<<14&4294967295|k>>>18),k=I+(V^w&(j^V))+M[12]+2368359562&4294967295,I=j+(k<<20&4294967295|k>>>12),k=w+(I^j^V)+M[5]+4294588738&4294967295,w=I+(k<<4&4294967295|k>>>28),k=V+(w^I^j)+M[8]+2272392833&4294967295,V=w+(k<<11&4294967295|k>>>21),k=j+(V^w^I)+M[11]+1839030562&4294967295,j=V+(k<<16&4294967295|k>>>16),k=I+(j^V^w)+M[14]+4259657740&4294967295,I=j+(k<<23&4294967295|k>>>9),k=w+(I^j^V)+M[1]+2763975236&4294967295,w=I+(k<<4&4294967295|k>>>28),k=V+(w^I^j)+M[4]+1272893353&4294967295,V=w+(k<<11&4294967295|k>>>21),k=j+(V^w^I)+M[7]+4139469664&4294967295,j=V+(k<<16&4294967295|k>>>16),k=I+(j^V^w)+M[10]+3200236656&4294967295,I=j+(k<<23&4294967295|k>>>9),k=w+(I^j^V)+M[13]+681279174&4294967295,w=I+(k<<4&4294967295|k>>>28),k=V+(w^I^j)+M[0]+3936430074&4294967295,V=w+(k<<11&4294967295|k>>>21),k=j+(V^w^I)+M[3]+3572445317&4294967295,j=V+(k<<16&4294967295|k>>>16),k=I+(j^V^w)+M[6]+76029189&4294967295,I=j+(k<<23&4294967295|k>>>9),k=w+(I^j^V)+M[9]+3654602809&4294967295,w=I+(k<<4&4294967295|k>>>28),k=V+(w^I^j)+M[12]+3873151461&4294967295,V=w+(k<<11&4294967295|k>>>21),k=j+(V^w^I)+M[15]+530742520&4294967295,j=V+(k<<16&4294967295|k>>>16),k=I+(j^V^w)+M[2]+3299628645&4294967295,I=j+(k<<23&4294967295|k>>>9),k=w+(j^(I|~V))+M[0]+4096336452&4294967295,w=I+(k<<6&4294967295|k>>>26),k=V+(I^(w|~j))+M[7]+1126891415&4294967295,V=w+(k<<10&4294967295|k>>>22),k=j+(w^(V|~I))+M[14]+2878612391&4294967295,j=V+(k<<15&4294967295|k>>>17),k=I+(V^(j|~w))+M[5]+4237533241&4294967295,I=j+(k<<21&4294967295|k>>>11),k=w+(j^(I|~V))+M[12]+1700485571&4294967295,w=I+(k<<6&4294967295|k>>>26),k=V+(I^(w|~j))+M[3]+2399980690&4294967295,V=w+(k<<10&4294967295|k>>>22),k=j+(w^(V|~I))+M[10]+4293915773&4294967295,j=V+(k<<15&4294967295|k>>>17),k=I+(V^(j|~w))+M[1]+2240044497&4294967295,I=j+(k<<21&4294967295|k>>>11),k=w+(j^(I|~V))+M[8]+1873313359&4294967295,w=I+(k<<6&4294967295|k>>>26),k=V+(I^(w|~j))+M[15]+4264355552&4294967295,V=w+(k<<10&4294967295|k>>>22),k=j+(w^(V|~I))+M[6]+2734768916&4294967295,j=V+(k<<15&4294967295|k>>>17),k=I+(V^(j|~w))+M[13]+1309151649&4294967295,I=j+(k<<21&4294967295|k>>>11),k=w+(j^(I|~V))+M[4]+4149444226&4294967295,w=I+(k<<6&4294967295|k>>>26),k=V+(I^(w|~j))+M[11]+3174756917&4294967295,V=w+(k<<10&4294967295|k>>>22),k=j+(w^(V|~I))+M[2]+718787259&4294967295,j=V+(k<<15&4294967295|k>>>17),k=I+(V^(j|~w))+M[9]+3951481745&4294967295,D.g[0]=D.g[0]+w&4294967295,D.g[1]=D.g[1]+(j+(k<<21&4294967295|k>>>11))&4294967295,D.g[2]=D.g[2]+j&4294967295,D.g[3]=D.g[3]+V&4294967295}r.prototype.v=function(D,w){w===void 0&&(w=D.length);const I=w-this.blockSize,M=this.C;let j=this.h,V=0;for(;V<w;){if(j==0)for(;V<=I;)i(this,D,V),V+=this.blockSize;if(typeof D=="string"){for(;V<w;)if(M[j++]=D.charCodeAt(V++),j==this.blockSize){i(this,M),j=0;break}}else for(;V<w;)if(M[j++]=D[V++],j==this.blockSize){i(this,M),j=0;break}}this.h=j,this.o+=w},r.prototype.A=function(){var D=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);D[0]=128;for(var w=1;w<D.length-8;++w)D[w]=0;w=this.o*8;for(var I=D.length-8;I<D.length;++I)D[I]=w&255,w/=256;for(this.v(D),D=Array(16),w=0,I=0;I<4;++I)for(let M=0;M<32;M+=8)D[w++]=this.g[I]>>>M&255;return D};function a(D,w){var I=c;return Object.prototype.hasOwnProperty.call(I,D)?I[D]:I[D]=w(D)}function o(D,w){this.h=w;const I=[];let M=!0;for(let j=D.length-1;j>=0;j--){const V=D[j]|0;M&&V==w||(I[j]=V,M=!1)}this.g=I}var c={};function u(D){return-128<=D&&D<128?a(D,function(w){return new o([w|0],w<0?-1:0)}):new o([D|0],D<0?-1:0)}function h(D){if(isNaN(D)||!isFinite(D))return g;if(D<0)return O(h(-D));const w=[];let I=1;for(let M=0;D>=I;M++)w[M]=D/I|0,I*=4294967296;return new o(w,0)}function p(D,w){if(D.length==0)throw Error("number format error: empty string");if(w=w||10,w<2||36<w)throw Error("radix out of range: "+w);if(D.charAt(0)=="-")return O(p(D.substring(1),w));if(D.indexOf("-")>=0)throw Error('number format error: interior "-" character');const I=h(Math.pow(w,8));let M=g;for(let V=0;V<D.length;V+=8){var j=Math.min(8,D.length-V);const k=parseInt(D.substring(V,V+j),w);j<8?(j=h(Math.pow(w,j)),M=M.j(j).add(h(k))):(M=M.j(I),M=M.add(h(k)))}return M}var g=u(0),_=u(1),E=u(16777216);n=o.prototype,n.m=function(){if(S(this))return-O(this).m();let D=0,w=1;for(let I=0;I<this.g.length;I++){const M=this.i(I);D+=(M>=0?M:4294967296+M)*w,w*=4294967296}return D},n.toString=function(D){if(D=D||10,D<2||36<D)throw Error("radix out of range: "+D);if(A(this))return"0";if(S(this))return"-"+O(this).toString(D);const w=h(Math.pow(D,6));var I=this;let M="";for(;;){const j=z(I,w).g;I=T(I,j.j(w));let V=((I.g.length>0?I.g[0]:I.h)>>>0).toString(D);if(I=j,A(I))return V+M;for(;V.length<6;)V="0"+V;M=V+M}},n.i=function(D){return D<0?0:D<this.g.length?this.g[D]:this.h};function A(D){if(D.h!=0)return!1;for(let w=0;w<D.g.length;w++)if(D.g[w]!=0)return!1;return!0}function S(D){return D.h==-1}n.l=function(D){return D=T(this,D),S(D)?-1:A(D)?0:1};function O(D){const w=D.g.length,I=[];for(let M=0;M<w;M++)I[M]=~D.g[M];return new o(I,~D.h).add(_)}n.abs=function(){return S(this)?O(this):this},n.add=function(D){const w=Math.max(this.g.length,D.g.length),I=[];let M=0;for(let j=0;j<=w;j++){let V=M+(this.i(j)&65535)+(D.i(j)&65535),k=(V>>>16)+(this.i(j)>>>16)+(D.i(j)>>>16);M=k>>>16,V&=65535,k&=65535,I[j]=k<<16|V}return new o(I,I[I.length-1]&-2147483648?-1:0)};function T(D,w){return D.add(O(w))}n.j=function(D){if(A(this)||A(D))return g;if(S(this))return S(D)?O(this).j(O(D)):O(O(this).j(D));if(S(D))return O(this.j(O(D)));if(this.l(E)<0&&D.l(E)<0)return h(this.m()*D.m());const w=this.g.length+D.g.length,I=[];for(var M=0;M<2*w;M++)I[M]=0;for(M=0;M<this.g.length;M++)for(let j=0;j<D.g.length;j++){const V=this.i(M)>>>16,k=this.i(M)&65535,ee=D.i(j)>>>16,Ie=D.i(j)&65535;I[2*M+2*j]+=k*Ie,R(I,2*M+2*j),I[2*M+2*j+1]+=V*Ie,R(I,2*M+2*j+1),I[2*M+2*j+1]+=k*ee,R(I,2*M+2*j+1),I[2*M+2*j+2]+=V*ee,R(I,2*M+2*j+2)}for(D=0;D<w;D++)I[D]=I[2*D+1]<<16|I[2*D];for(D=w;D<2*w;D++)I[D]=0;return new o(I,0)};function R(D,w){for(;(D[w]&65535)!=D[w];)D[w+1]+=D[w]>>>16,D[w]&=65535,w++}function L(D,w){this.g=D,this.h=w}function z(D,w){if(A(w))throw Error("division by zero");if(A(D))return new L(g,g);if(S(D))return w=z(O(D),w),new L(O(w.g),O(w.h));if(S(w))return w=z(D,O(w)),new L(O(w.g),w.h);if(D.g.length>30){if(S(D)||S(w))throw Error("slowDivide_ only works with positive integers.");for(var I=_,M=w;M.l(D)<=0;)I=U(I),M=U(M);var j=G(I,1),V=G(M,1);for(M=G(M,2),I=G(I,2);!A(M);){var k=V.add(M);k.l(D)<=0&&(j=j.add(I),V=k),M=G(M,1),I=G(I,1)}return w=T(D,j.j(w)),new L(j,w)}for(j=g;D.l(w)>=0;){for(I=Math.max(1,Math.floor(D.m()/w.m())),M=Math.ceil(Math.log(I)/Math.LN2),M=M<=48?1:Math.pow(2,M-48),V=h(I),k=V.j(w);S(k)||k.l(D)>0;)I-=M,V=h(I),k=V.j(w);A(V)&&(V=_),j=j.add(V),D=T(D,k)}return new L(j,D)}n.B=function(D){return z(this,D).h},n.and=function(D){const w=Math.max(this.g.length,D.g.length),I=[];for(let M=0;M<w;M++)I[M]=this.i(M)&D.i(M);return new o(I,this.h&D.h)},n.or=function(D){const w=Math.max(this.g.length,D.g.length),I=[];for(let M=0;M<w;M++)I[M]=this.i(M)|D.i(M);return new o(I,this.h|D.h)},n.xor=function(D){const w=Math.max(this.g.length,D.g.length),I=[];for(let M=0;M<w;M++)I[M]=this.i(M)^D.i(M);return new o(I,this.h^D.h)};function U(D){const w=D.g.length+1,I=[];for(let M=0;M<w;M++)I[M]=D.i(M)<<1|D.i(M-1)>>>31;return new o(I,D.h)}function G(D,w){const I=w>>5;w%=32;const M=D.g.length-I,j=[];for(let V=0;V<M;V++)j[V]=w>0?D.i(V+I)>>>w|D.i(V+I+1)<<32-w:D.i(V+I);return new o(j,D.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,JS=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=h,o.fromString=p,zs=o}).apply(typeof iw<"u"?iw:typeof self<"u"?self:typeof window<"u"?window:{});var _d=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var eC,Ku,tC,Vd,Tg,nC,rC,iC;(function(){var n,e=Object.defineProperty;function t(v){v=[typeof globalThis=="object"&&globalThis,v,typeof window=="object"&&window,typeof self=="object"&&self,typeof _d=="object"&&_d];for(var b=0;b<v.length;++b){var N=v[b];if(N&&N.Math==Math)return N}throw Error("Cannot find global object")}var r=t(this);function i(v,b){if(b)e:{var N=r;v=v.split(".");for(var F=0;F<v.length-1;F++){var W=v[F];if(!(W in N))break e;N=N[W]}v=v[v.length-1],F=N[v],b=b(F),b!=F&&b!=null&&e(N,v,{configurable:!0,writable:!0,value:b})}}i("Symbol.dispose",function(v){return v||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(v){return v||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(v){return v||function(b){var N=[],F;for(F in b)Object.prototype.hasOwnProperty.call(b,F)&&N.push([F,b[F]]);return N}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},o=this||self;function c(v){var b=typeof v;return b=="object"&&v!=null||b=="function"}function u(v,b,N){return v.call.apply(v.bind,arguments)}function h(v,b,N){return h=u,h.apply(null,arguments)}function p(v,b){var N=Array.prototype.slice.call(arguments,1);return function(){var F=N.slice();return F.push.apply(F,arguments),v.apply(this,F)}}function g(v,b){function N(){}N.prototype=b.prototype,v.Z=b.prototype,v.prototype=new N,v.prototype.constructor=v,v.Ob=function(F,W,ne){for(var _e=Array(arguments.length-2),ze=2;ze<arguments.length;ze++)_e[ze-2]=arguments[ze];return b.prototype[W].apply(F,_e)}}var _=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?v=>v&&AsyncContext.Snapshot.wrap(v):v=>v;function E(v){const b=v.length;if(b>0){const N=Array(b);for(let F=0;F<b;F++)N[F]=v[F];return N}return[]}function A(v,b){for(let F=1;F<arguments.length;F++){const W=arguments[F];var N=typeof W;if(N=N!="object"?N:W?Array.isArray(W)?"array":N:"null",N=="array"||N=="object"&&typeof W.length=="number"){N=v.length||0;const ne=W.length||0;v.length=N+ne;for(let _e=0;_e<ne;_e++)v[N+_e]=W[_e]}else v.push(W)}}class S{constructor(b,N){this.i=b,this.j=N,this.h=0,this.g=null}get(){let b;return this.h>0?(this.h--,b=this.g,this.g=b.next,b.next=null):b=this.i(),b}}function O(v){o.setTimeout(()=>{throw v},0)}function T(){var v=D;let b=null;return v.g&&(b=v.g,v.g=v.g.next,v.g||(v.h=null),b.next=null),b}class R{constructor(){this.h=this.g=null}add(b,N){const F=L.get();F.set(b,N),this.h?this.h.next=F:this.g=F,this.h=F}}var L=new S(()=>new z,v=>v.reset());class z{constructor(){this.next=this.g=this.h=null}set(b,N){this.h=b,this.g=N,this.next=null}reset(){this.next=this.g=this.h=null}}let U,G=!1,D=new R,w=()=>{const v=Promise.resolve(void 0);U=()=>{v.then(I)}};function I(){for(var v;v=T();){try{v.h.call(v.g)}catch(N){O(N)}var b=L;b.j(v),b.h<100&&(b.h++,v.next=b.g,b.g=v)}G=!1}function M(){this.u=this.u,this.C=this.C}M.prototype.u=!1,M.prototype.dispose=function(){this.u||(this.u=!0,this.N())},M.prototype[Symbol.dispose]=function(){this.dispose()},M.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function j(v,b){this.type=v,this.g=this.target=b,this.defaultPrevented=!1}j.prototype.h=function(){this.defaultPrevented=!0};var V=(function(){if(!o.addEventListener||!Object.defineProperty)return!1;var v=!1,b=Object.defineProperty({},"passive",{get:function(){v=!0}});try{const N=()=>{};o.addEventListener("test",N,b),o.removeEventListener("test",N,b)}catch{}return v})();function k(v){return/^[\s\xa0]*$/.test(v)}function ee(v,b){j.call(this,v?v.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,v&&this.init(v,b)}g(ee,j),ee.prototype.init=function(v,b){const N=this.type=v.type,F=v.changedTouches&&v.changedTouches.length?v.changedTouches[0]:null;this.target=v.target||v.srcElement,this.g=b,b=v.relatedTarget,b||(N=="mouseover"?b=v.fromElement:N=="mouseout"&&(b=v.toElement)),this.relatedTarget=b,F?(this.clientX=F.clientX!==void 0?F.clientX:F.pageX,this.clientY=F.clientY!==void 0?F.clientY:F.pageY,this.screenX=F.screenX||0,this.screenY=F.screenY||0):(this.clientX=v.clientX!==void 0?v.clientX:v.pageX,this.clientY=v.clientY!==void 0?v.clientY:v.pageY,this.screenX=v.screenX||0,this.screenY=v.screenY||0),this.button=v.button,this.key=v.key||"",this.ctrlKey=v.ctrlKey,this.altKey=v.altKey,this.shiftKey=v.shiftKey,this.metaKey=v.metaKey,this.pointerId=v.pointerId||0,this.pointerType=v.pointerType,this.state=v.state,this.i=v,v.defaultPrevented&&ee.Z.h.call(this)},ee.prototype.h=function(){ee.Z.h.call(this);const v=this.i;v.preventDefault?v.preventDefault():v.returnValue=!1};var Ie="closure_listenable_"+(Math.random()*1e6|0),q=0;function ce(v,b,N,F,W){this.listener=v,this.proxy=null,this.src=b,this.type=N,this.capture=!!F,this.ha=W,this.key=++q,this.da=this.fa=!1}function me(v){v.da=!0,v.listener=null,v.proxy=null,v.src=null,v.ha=null}function Te(v,b,N){for(const F in v)b.call(N,v[F],F,v)}function Ue(v,b){for(const N in v)b.call(void 0,v[N],N,v)}function X(v){const b={};for(const N in v)b[N]=v[N];return b}const se="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ve(v,b){let N,F;for(let W=1;W<arguments.length;W++){F=arguments[W];for(N in F)v[N]=F[N];for(let ne=0;ne<se.length;ne++)N=se[ne],Object.prototype.hasOwnProperty.call(F,N)&&(v[N]=F[N])}}function Ee(v){this.src=v,this.g={},this.h=0}Ee.prototype.add=function(v,b,N,F,W){const ne=v.toString();v=this.g[ne],v||(v=this.g[ne]=[],this.h++);const _e=ge(v,b,F,W);return _e>-1?(b=v[_e],N||(b.fa=!1)):(b=new ce(b,this.src,ne,!!F,W),b.fa=N,v.push(b)),b};function ie(v,b){const N=b.type;if(N in v.g){var F=v.g[N],W=Array.prototype.indexOf.call(F,b,void 0),ne;(ne=W>=0)&&Array.prototype.splice.call(F,W,1),ne&&(me(b),v.g[N].length==0&&(delete v.g[N],v.h--))}}function ge(v,b,N,F){for(let W=0;W<v.length;++W){const ne=v[W];if(!ne.da&&ne.listener==b&&ne.capture==!!N&&ne.ha==F)return W}return-1}var pe="closure_lm_"+(Math.random()*1e6|0),be={};function De(v,b,N,F,W){if(Array.isArray(b)){for(let ne=0;ne<b.length;ne++)De(v,b[ne],N,F,W);return null}return N=Kt(N),v&&v[Ie]?v.J(b,N,c(F)?!!F.capture:!1,W):rt(v,b,N,!1,F,W)}function rt(v,b,N,F,W,ne){if(!b)throw Error("Invalid event type");const _e=c(W)?!!W.capture:!!W;let ze=Ne(v);if(ze||(v[pe]=ze=new Ee(v)),N=ze.add(b,N,F,_e,ne),N.proxy)return N;if(F=Gt(),N.proxy=F,F.src=v,F.listener=N,v.addEventListener)V||(W=_e),W===void 0&&(W=!1),v.addEventListener(b.toString(),F,W);else if(v.attachEvent)v.attachEvent(Bn(b.toString()),F);else if(v.addListener&&v.removeListener)v.addListener(F);else throw Error("addEventListener and attachEvent are unavailable.");return N}function Gt(){function v(N){return b.call(v.src,v.listener,N)}const b=de;return v}function ot(v,b,N,F,W){if(Array.isArray(b))for(var ne=0;ne<b.length;ne++)ot(v,b[ne],N,F,W);else F=c(F)?!!F.capture:!!F,N=Kt(N),v&&v[Ie]?(v=v.i,ne=String(b).toString(),ne in v.g&&(b=v.g[ne],N=ge(b,N,F,W),N>-1&&(me(b[N]),Array.prototype.splice.call(b,N,1),b.length==0&&(delete v.g[ne],v.h--)))):v&&(v=Ne(v))&&(b=v.g[b.toString()],v=-1,b&&(v=ge(b,N,F,W)),(N=v>-1?b[v]:null)&&Ot(N))}function Ot(v){if(typeof v!="number"&&v&&!v.da){var b=v.src;if(b&&b[Ie])ie(b.i,v);else{var N=v.type,F=v.proxy;b.removeEventListener?b.removeEventListener(N,F,v.capture):b.detachEvent?b.detachEvent(Bn(N),F):b.addListener&&b.removeListener&&b.removeListener(F),(N=Ne(b))?(ie(N,v),N.h==0&&(N.src=null,b[pe]=null)):me(v)}}}function Bn(v){return v in be?be[v]:be[v]="on"+v}function de(v,b){if(v.da)v=!0;else{b=new ee(b,this);const N=v.listener,F=v.ha||v.src;v.fa&&Ot(v),v=N.call(F,b)}return v}function Ne(v){return v=v[pe],v instanceof Ee?v:null}var Ye="__closure_events_fn_"+(Math.random()*1e9>>>0);function Kt(v){return typeof v=="function"?v:(v[Ye]||(v[Ye]=function(b){return v.handleEvent(b)}),v[Ye])}function gt(){M.call(this),this.i=new Ee(this),this.M=this,this.G=null}g(gt,M),gt.prototype[Ie]=!0,gt.prototype.removeEventListener=function(v,b,N,F){ot(this,v,b,N,F)};function bt(v,b){var N,F=v.G;if(F)for(N=[];F;F=F.G)N.push(F);if(v=v.M,F=b.type||b,typeof b=="string")b=new j(b,v);else if(b instanceof j)b.target=b.target||v;else{var W=b;b=new j(F,v),ve(b,W)}W=!0;let ne,_e;if(N)for(_e=N.length-1;_e>=0;_e--)ne=b.g=N[_e],W=Vn(ne,F,!0,b)&&W;if(ne=b.g=v,W=Vn(ne,F,!0,b)&&W,W=Vn(ne,F,!1,b)&&W,N)for(_e=0;_e<N.length;_e++)ne=b.g=N[_e],W=Vn(ne,F,!1,b)&&W}gt.prototype.N=function(){if(gt.Z.N.call(this),this.i){var v=this.i;for(const b in v.g){const N=v.g[b];for(let F=0;F<N.length;F++)me(N[F]);delete v.g[b],v.h--}}this.G=null},gt.prototype.J=function(v,b,N,F){return this.i.add(String(v),b,!1,N,F)},gt.prototype.K=function(v,b,N,F){return this.i.add(String(v),b,!0,N,F)};function Vn(v,b,N,F){if(b=v.i.g[String(b)],!b)return!0;b=b.concat();let W=!0;for(let ne=0;ne<b.length;++ne){const _e=b[ne];if(_e&&!_e.da&&_e.capture==N){const ze=_e.listener,en=_e.ha||_e.src;_e.fa&&ie(v.i,_e),W=ze.call(en,F)!==!1&&W}}return W&&!F.defaultPrevented}function Wa(v,b){if(typeof v!="function")if(v&&typeof v.handleEvent=="function")v=h(v.handleEvent,v);else throw Error("Invalid listener argument");return Number(b)>2147483647?-1:o.setTimeout(v,b||0)}function zr(v){v.g=Wa(()=>{v.g=null,v.i&&(v.i=!1,zr(v))},v.l);const b=v.h;v.h=null,v.m.apply(null,b)}class on extends M{constructor(b,N){super(),this.m=b,this.l=N,this.h=null,this.i=!1,this.g=null}j(b){this.h=arguments,this.g?this.i=!0:zr(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Mt(v){M.call(this),this.h=v,this.g={}}g(Mt,M);var Ir=[];function lo(v){Te(v.g,function(b,N){this.g.hasOwnProperty(N)&&Ot(b)},v),v.g={}}Mt.prototype.N=function(){Mt.Z.N.call(this),lo(this)},Mt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Li=o.JSON.stringify,Fc=o.JSON.parse,qe=class{stringify(v){return o.JSON.stringify(v,void 0)}parse(v){return o.JSON.parse(v,void 0)}};function qt(){}function pr(){}var ui={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Fn(){j.call(this,"d")}g(Fn,j);function Hr(){j.call(this,"c")}g(Hr,j);var Jt={},$f=null;function sl(){return $f=$f||new gt}Jt.Ia="serverreachability";function Xf(v){j.call(this,Jt.Ia,v)}g(Xf,j);function ji(v){const b=sl();bt(b,new Xf(b))}Jt.STAT_EVENT="statevent";function co(v,b){j.call(this,Jt.STAT_EVENT,v),this.stat=b}g(co,j);function ln(v){const b=sl();bt(b,new co(b,v))}Jt.Ja="timingevent";function Bi(v,b){j.call(this,Jt.Ja,v),this.size=b}g(Bi,j);function Vi(v,b){if(typeof v!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){v()},b)}function fi(){this.g=!0}fi.prototype.ua=function(){this.g=!1};function m1(v,b,N,F,W,ne){v.info(function(){if(v.g)if(ne){var _e="",ze=ne.split("&");for(let ht=0;ht<ze.length;ht++){var en=ze[ht].split("=");if(en.length>1){const Ft=en[0];en=en[1];const Xr=Ft.split("_");_e=Xr.length>=2&&Xr[1]=="type"?_e+(Ft+"="+en+"&"):_e+(Ft+"=redacted&")}}}else _e=null;else _e=ne;return"XMLHTTP REQ ("+F+") [attempt "+W+"]: "+b+`
`+N+`
`+_e})}function Yf(v,b,N,F,W,ne,_e){v.info(function(){return"XMLHTTP RESP ("+F+") [ attempt "+W+"]: "+b+`
`+N+`
`+ne+" "+_e})}function Fi(v,b,N,F){v.info(function(){return"XMLHTTP TEXT ("+b+"): "+g1(v,N)+(F?" "+F:"")})}function uo(v,b){v.info(function(){return"TIMEOUT: "+b})}fi.prototype.info=function(){};function g1(v,b){if(!v.g)return b;if(!b)return null;try{const ne=JSON.parse(b);if(ne){for(v=0;v<ne.length;v++)if(Array.isArray(ne[v])){var N=ne[v];if(!(N.length<2)){var F=N[1];if(Array.isArray(F)&&!(F.length<1)){var W=F[0];if(W!="noop"&&W!="stop"&&W!="close")for(let _e=1;_e<F.length;_e++)F[_e]=""}}}}return Li(ne)}catch{return b}}var fo={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Uc={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},zc;function ho(){}g(ho,qt),ho.prototype.g=function(){return new XMLHttpRequest},zc=new ho;function va(v){return encodeURIComponent(String(v))}function Kf(v){var b=1;v=v.split(":");const N=[];for(;b>0&&v.length;)N.push(v.shift()),b--;return v.length&&N.push(v.join(":")),N}function hi(v,b,N,F){this.j=v,this.i=b,this.l=N,this.S=F||1,this.V=new Mt(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new di}function di(){this.i=null,this.g="",this.h=!1}var cn={},Nn={};function Ui(v,b,N){v.M=1,v.A=po(fn(b)),v.u=N,v.R=!0,ol(v,null)}function ol(v,b){v.F=Date.now(),zi(v),v.B=fn(v.A);var N=v.B,F=v.S;Array.isArray(F)||(F=[String(F)]),fl(N.i,"t",F),v.C=0,N=v.j.L,v.h=new di,v.g=uh(v.j,N?b:null,!v.u),v.P>0&&(v.O=new on(h(v.Y,v,v.g),v.P)),b=v.V,N=v.g,F=v.ba;var W="readystatechange";Array.isArray(W)||(W&&(Ir[0]=W.toString()),W=Ir);for(let ne=0;ne<W.length;ne++){const _e=De(N,W[ne],F||b.handleEvent,!1,b.h||b);if(!_e)break;b.g[_e.key]=_e}b=v.J?X(v.J):{},v.u?(v.v||(v.v="POST"),b["Content-Type"]="application/x-www-form-urlencoded",v.g.ea(v.B,v.v,v.u,b)):(v.v="GET",v.g.ea(v.B,v.v,null,b)),ji(),m1(v.i,v.v,v.B,v.l,v.S,v.u)}hi.prototype.ba=function(v){v=v.target;const b=this.O;b&&gi(v)==3?b.j():this.Y(v)},hi.prototype.Y=function(v){try{if(v==this.g)e:{const ze=gi(this.g),en=this.g.ya(),ht=this.g.ca();if(!(ze<3)&&(ze!=3||this.g&&(this.h.h||this.g.la()||Un(this.g)))){this.K||ze!=4||en==7||(en==8||ht<=0?ji(3):ji(2)),Hi(this);var b=this.g.ca();this.X=b;var N=v1(this);if(this.o=b==200,Yf(this.i,this.v,this.B,this.l,this.S,ze,b),this.o){if(this.U&&!this.L){t:{if(this.g){var F,W=this.g;if((F=W.g?W.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!k(F)){var ne=F;break t}}ne=null}if(v=ne)Fi(this.i,this.l,v,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Gi(this,v);else{this.o=!1,this.m=3,ln(12),Nr(this),Gr(this);break e}}if(this.R){v=!0;let Ft;for(;!this.K&&this.C<N.length;)if(Ft=Qf(this,N),Ft==Nn){ze==4&&(this.m=4,ln(14),v=!1),Fi(this.i,this.l,null,"[Incomplete Response]");break}else if(Ft==cn){this.m=4,ln(15),Fi(this.i,this.l,N,"[Invalid Chunk]"),v=!1;break}else Fi(this.i,this.l,Ft,null),Gi(this,Ft);if(Wf(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ze!=4||N.length!=0||this.h.h||(this.m=1,ln(16),v=!1),this.o=this.o&&v,!v)Fi(this.i,this.l,N,"[Invalid Chunked Response]"),Nr(this),Gr(this);else if(N.length>0&&!this.W){this.W=!0;var _e=this.j;_e.g==this&&_e.aa&&!_e.P&&(_e.j.info("Great, no buffering proxy detected. Bytes received: "+N.length),ru(_e),_e.P=!0,ln(11))}}else Fi(this.i,this.l,N,null),Gi(this,N);ze==4&&Nr(this),this.o&&!this.K&&(ze==4?sh(this.j,this):(this.o=!1,zi(this)))}else _a(this.g),b==400&&N.indexOf("Unknown SID")>0?(this.m=3,ln(12)):(this.m=0,ln(13)),Nr(this),Gr(this)}}}catch{}finally{}};function v1(v){if(!Wf(v))return v.g.la();const b=Un(v.g);if(b==="")return"";let N="";const F=b.length,W=gi(v.g)==4;if(!v.h.i){if(typeof TextDecoder>"u")return Nr(v),Gr(v),"";v.h.i=new o.TextDecoder}for(let ne=0;ne<F;ne++)v.h.h=!0,N+=v.h.i.decode(b[ne],{stream:!(W&&ne==F-1)});return b.length=0,v.h.g+=N,v.C=0,v.h.g}function Wf(v){return v.g?v.v=="GET"&&v.M!=2&&v.j.Aa:!1}function Qf(v,b){var N=v.C,F=b.indexOf(`
`,N);return F==-1?Nn:(N=Number(b.substring(N,F)),isNaN(N)?cn:(F+=1,F+N>b.length?Nn:(b=b.slice(F,F+N),v.C=F+N,b)))}hi.prototype.cancel=function(){this.K=!0,Nr(this)};function zi(v){v.T=Date.now()+v.H,ll(v,v.H)}function ll(v,b){if(v.D!=null)throw Error("WatchDog timer not null");v.D=Vi(h(v.aa,v),b)}function Hi(v){v.D&&(o.clearTimeout(v.D),v.D=null)}hi.prototype.aa=function(){this.D=null;const v=Date.now();v-this.T>=0?(uo(this.i,this.B),this.M!=2&&(ji(),ln(17)),Nr(this),this.m=2,Gr(this)):ll(this,this.T-v)};function Gr(v){v.j.I==0||v.K||sh(v.j,v)}function Nr(v){Hi(v);var b=v.O;b&&typeof b.dispose=="function"&&b.dispose(),v.O=null,lo(v.V),v.g&&(b=v.g,v.g=null,b.abort(),b.dispose())}function Gi(v,b){try{var N=v.j;if(N.I!=0&&(N.g==v||$i(N.h,v))){if(!v.L&&$i(N.h,v)&&N.I==3){try{var F=N.Ba.g.parse(b)}catch{F=null}if(Array.isArray(F)&&F.length==3){var W=F;if(W[0]==0){e:if(!N.v){if(N.g)if(N.g.F+3e3<v.F)gl(N),is(N);else break e;Eo(N),ln(18)}}else N.xa=W[1],0<N.xa-N.K&&W[2]<37500&&N.F&&N.A==0&&!N.C&&(N.C=Vi(h(N.Va,N),6e3));qi(N.h)<=1&&N.ta&&(N.ta=void 0)}else Zi(N,11)}else if((v.L||N.g==v)&&gl(N),!k(b))for(W=N.Ba.g.parse(b),b=0;b<W.length;b++){let ht=W[b];const Ft=ht[0];if(!(Ft<=N.K))if(N.K=Ft,ht=ht[1],N.I==2)if(ht[0]=="c"){N.M=ht[1],N.ba=ht[2];const Xr=ht[3];Xr!=null&&(N.ka=Xr,N.j.info("VER="+N.ka));const Ji=ht[4];Ji!=null&&(N.za=Ji,N.j.info("SVER="+N.za));const vi=ht[5];vi!=null&&typeof vi=="number"&&vi>0&&(F=1.5*vi,N.O=F,N.j.info("backChannelRequestTimeoutMs_="+F)),F=N;const yi=v.g;if(yi){const wo=yi.g?yi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(wo){var ne=F.h;ne.g||wo.indexOf("spdy")==-1&&wo.indexOf("quic")==-1&&wo.indexOf("h2")==-1||(ne.j=ne.l,ne.g=new Set,ne.h&&(qc(ne,ne.h),ne.h=null))}if(F.G){const vl=yi.g?yi.g.getResponseHeader("X-HTTP-Session-Id"):null;vl&&(F.wa=vl,yt(F.J,F.G,vl))}}N.I=3,N.l&&N.l.ra(),N.aa&&(N.T=Date.now()-v.F,N.j.info("Handshake RTT: "+N.T+"ms")),F=N;var _e=v;if(F.na=ch(F,F.L?F.ba:null,F.W),_e.L){$c(F.h,_e);var ze=_e,en=F.O;en&&(ze.H=en),ze.D&&(Hi(ze),zi(ze)),F.g=_e}else ih(F);N.i.length>0&&Qi(N)}else ht[0]!="stop"&&ht[0]!="close"||Zi(N,7);else N.I==3&&(ht[0]=="stop"||ht[0]=="close"?ht[0]=="stop"?Zi(N,7):tu(N):ht[0]!="noop"&&N.l&&N.l.qa(ht),N.A=0)}}ji(4)}catch{}}var un=class{constructor(v,b){this.g=v,this.map=b}};function Hc(v){this.l=v||10,o.PerformanceNavigationTiming?(v=o.performance.getEntriesByType("navigation"),v=v.length>0&&(v[0].nextHopProtocol=="hq"||v[0].nextHopProtocol=="h2")):v=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=v?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Gc(v){return v.h?!0:v.g?v.g.size>=v.j:!1}function qi(v){return v.h?1:v.g?v.g.size:0}function $i(v,b){return v.h?v.h==b:v.g?v.g.has(b):!1}function qc(v,b){v.g?v.g.add(b):v.h=b}function $c(v,b){v.h&&v.h==b?v.h=null:v.g&&v.g.has(b)&&v.g.delete(b)}Hc.prototype.cancel=function(){if(this.i=Xc(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const v of this.g.values())v.cancel();this.g.clear()}};function Xc(v){if(v.h!=null)return v.i.concat(v.h.G);if(v.g!=null&&v.g.size!==0){let b=v.i;for(const N of v.g.values())b=b.concat(N.G);return b}return E(v.i)}var Zf=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function cl(v,b){if(v){v=v.split("&");for(let N=0;N<v.length;N++){const F=v[N].indexOf("=");let W,ne=null;F>=0?(W=v[N].substring(0,F),ne=v[N].substring(F+1)):W=v[N],b(W,ne?decodeURIComponent(ne.replace(/\+/g," ")):"")}}}function Rr(v){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let b;v instanceof Rr?(this.l=v.l,Rn(this,v.j),this.o=v.o,this.g=v.g,Qa(this,v.u),this.h=v.h,Yc(this,nh(v.i)),this.m=v.m):v&&(b=String(v).match(Zf))?(this.l=!1,Rn(this,b[1]||"",!0),this.o=Xi(b[2]||""),this.g=Xi(b[3]||"",!0),Qa(this,b[4]),this.h=Xi(b[5]||"",!0),Yc(this,b[6]||"",!0),this.m=Xi(b[7]||"")):(this.l=!1,this.i=new Ja(null,this.l))}Rr.prototype.toString=function(){const v=[];var b=this.j;b&&v.push(mo(b,ul,!0),":");var N=this.g;return(N||b=="file")&&(v.push("//"),(b=this.o)&&v.push(mo(b,ul,!0),"@"),v.push(va(N).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),N=this.u,N!=null&&v.push(":",String(N))),(N=this.h)&&(this.g&&N.charAt(0)!="/"&&v.push("/"),v.push(mo(N,N.charAt(0)=="/"?Kc:Jf,!0))),(N=this.i.toString())&&v.push("?",N),(N=this.m)&&v.push("#",mo(N,eh)),v.join("")},Rr.prototype.resolve=function(v){const b=fn(this);let N=!!v.j;N?Rn(b,v.j):N=!!v.o,N?b.o=v.o:N=!!v.g,N?b.g=v.g:N=v.u!=null;var F=v.h;if(N)Qa(b,v.u);else if(N=!!v.h){if(F.charAt(0)!="/")if(this.g&&!this.h)F="/"+F;else{var W=b.h.lastIndexOf("/");W!=-1&&(F=b.h.slice(0,W+1)+F)}if(W=F,W==".."||W==".")F="";else if(W.indexOf("./")!=-1||W.indexOf("/.")!=-1){F=W.lastIndexOf("/",0)==0,W=W.split("/");const ne=[];for(let _e=0;_e<W.length;){const ze=W[_e++];ze=="."?F&&_e==W.length&&ne.push(""):ze==".."?((ne.length>1||ne.length==1&&ne[0]!="")&&ne.pop(),F&&_e==W.length&&ne.push("")):(ne.push(ze),F=!0)}F=ne.join("/")}else F=W}return N?b.h=F:N=v.i.toString()!=="",N?Yc(b,nh(v.i)):N=!!v.m,N&&(b.m=v.m),b};function fn(v){return new Rr(v)}function Rn(v,b,N){v.j=N?Xi(b,!0):b,v.j&&(v.j=v.j.replace(/:$/,""))}function Qa(v,b){if(b){if(b=Number(b),isNaN(b)||b<0)throw Error("Bad port number "+b);v.u=b}else v.u=null}function Yc(v,b,N){b instanceof Ja?(v.i=b,hl(v.i,v.l)):(N||(b=mo(b,Za)),v.i=new Ja(b,v.l))}function yt(v,b,N){v.i.set(b,N)}function po(v){return yt(v,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),v}function Xi(v,b){return v?b?decodeURI(v.replace(/%25/g,"%2525")):decodeURIComponent(v):""}function mo(v,b,N){return typeof v=="string"?(v=encodeURI(v).replace(b,mr),N&&(v=v.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v):null}function mr(v){return v=v.charCodeAt(0),"%"+(v>>4&15).toString(16)+(v&15).toString(16)}var ul=/[#\/\?@]/g,Jf=/[#\?:]/g,Kc=/[#\?]/g,Za=/[#\?@]/g,eh=/#/g;function Ja(v,b){this.h=this.g=null,this.i=v||null,this.j=!!b}function gr(v){v.g||(v.g=new Map,v.h=0,v.i&&cl(v.i,function(b,N){v.add(decodeURIComponent(b.replace(/\+/g," ")),N)}))}n=Ja.prototype,n.add=function(v,b){gr(this),this.i=null,v=es(this,v);let N=this.g.get(v);return N||this.g.set(v,N=[]),N.push(b),this.h+=1,this};function th(v,b){gr(v),b=es(v,b),v.g.has(b)&&(v.i=null,v.h-=v.g.get(b).length,v.g.delete(b))}function Wc(v,b){return gr(v),b=es(v,b),v.g.has(b)}n.forEach=function(v,b){gr(this),this.g.forEach(function(N,F){N.forEach(function(W){v.call(b,W,F,this)},this)},this)};function Qc(v,b){gr(v);let N=[];if(typeof b=="string")Wc(v,b)&&(N=N.concat(v.g.get(es(v,b))));else for(v=Array.from(v.g.values()),b=0;b<v.length;b++)N=N.concat(v[b]);return N}n.set=function(v,b){return gr(this),this.i=null,v=es(this,v),Wc(this,v)&&(this.h-=this.g.get(v).length),this.g.set(v,[b]),this.h+=1,this},n.get=function(v,b){return v?(v=Qc(this,v),v.length>0?String(v[0]):b):b};function fl(v,b,N){th(v,b),N.length>0&&(v.i=null,v.g.set(es(v,b),E(N)),v.h+=N.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const v=[],b=Array.from(this.g.keys());for(let F=0;F<b.length;F++){var N=b[F];const W=va(N);N=Qc(this,N);for(let ne=0;ne<N.length;ne++){let _e=W;N[ne]!==""&&(_e+="="+va(N[ne])),v.push(_e)}}return this.i=v.join("&")};function nh(v){const b=new Ja;return b.i=v.i,v.g&&(b.g=new Map(v.g),b.h=v.h),b}function es(v,b){return b=String(b),v.j&&(b=b.toLowerCase()),b}function hl(v,b){b&&!v.j&&(gr(v),v.i=null,v.g.forEach(function(N,F){const W=F.toLowerCase();F!=W&&(th(this,F),fl(this,W,N))},v)),v.j=b}function pi(v,b){const N=new fi;if(o.Image){const F=new Image;F.onload=p(qr,N,"TestLoadImage: loaded",!0,b,F),F.onerror=p(qr,N,"TestLoadImage: error",!1,b,F),F.onabort=p(qr,N,"TestLoadImage: abort",!1,b,F),F.ontimeout=p(qr,N,"TestLoadImage: timeout",!1,b,F),o.setTimeout(function(){F.ontimeout&&F.ontimeout()},1e4),F.src=v}else b(!1)}function Zc(v,b){const N=new fi,F=new AbortController,W=setTimeout(()=>{F.abort(),qr(N,"TestPingServer: timeout",!1,b)},1e4);fetch(v,{signal:F.signal}).then(ne=>{clearTimeout(W),ne.ok?qr(N,"TestPingServer: ok",!0,b):qr(N,"TestPingServer: server error",!1,b)}).catch(()=>{clearTimeout(W),qr(N,"TestPingServer: error",!1,b)})}function qr(v,b,N,F,W){try{W&&(W.onload=null,W.onerror=null,W.onabort=null,W.ontimeout=null),F(N)}catch{}}function ts(){this.g=new qe}function Yi(v){this.i=v.Sb||null,this.h=v.ab||!1}g(Yi,qt),Yi.prototype.g=function(){return new go(this.i,this.h)};function go(v,b){gt.call(this),this.H=v,this.o=b,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}g(go,gt),n=go.prototype,n.open=function(v,b){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=v,this.D=b,this.readyState=1,mi(this)},n.send=function(v){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const b={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};v&&(b.body=v),(this.H||o).fetch(new Request(this.D,b)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,ns(this)),this.readyState=0},n.Pa=function(v){if(this.g&&(this.l=v,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=v.headers,this.readyState=2,mi(this)),this.g&&(this.readyState=3,mi(this),this.g)))if(this.responseType==="arraybuffer")v.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in v){if(this.j=v.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;dl(this)}else v.text().then(this.Oa.bind(this),this.ga.bind(this))};function dl(v){v.j.read().then(v.Ma.bind(v)).catch(v.ga.bind(v))}n.Ma=function(v){if(this.g){if(this.o&&v.value)this.response.push(v.value);else if(!this.o){var b=v.value?v.value:new Uint8Array(0);(b=this.B.decode(b,{stream:!v.done}))&&(this.response=this.responseText+=b)}v.done?ns(this):mi(this),this.readyState==3&&dl(this)}},n.Oa=function(v){this.g&&(this.response=this.responseText=v,ns(this))},n.Na=function(v){this.g&&(this.response=v,ns(this))},n.ga=function(){this.g&&ns(this)};function ns(v){v.readyState=4,v.l=null,v.j=null,v.B=null,mi(v)}n.setRequestHeader=function(v,b){this.A.append(v,b)},n.getResponseHeader=function(v){return this.h&&this.h.get(v.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const v=[],b=this.h.entries();for(var N=b.next();!N.done;)N=N.value,v.push(N[0]+": "+N[1]),N=b.next();return v.join(`\r
`)};function mi(v){v.onreadystatechange&&v.onreadystatechange.call(v)}Object.defineProperty(go.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(v){this.m=v?"include":"same-origin"}});function $r(v){let b="";return Te(v,function(N,F){b+=F,b+=":",b+=N,b+=`\r
`}),b}function vo(v,b,N){e:{for(F in N){var F=!1;break e}F=!0}F||(N=$r(N),typeof v=="string"?N!=null&&va(N):yt(v,b,N))}function St(v){gt.call(this),this.headers=new Map,this.L=v||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}g(St,gt);var Ki=/^https?$/i,Jc=["POST","PUT"];n=St.prototype,n.Fa=function(v){this.H=v},n.ea=function(v,b,N,F){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+v);b=b?b.toUpperCase():"GET",this.D=v,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():zc.g(),this.g.onreadystatechange=_(h(this.Ca,this));try{this.B=!0,this.g.open(b,String(v),!0),this.B=!1}catch(ne){yo(this,ne);return}if(v=N||"",N=new Map(this.headers),F)if(Object.getPrototypeOf(F)===Object.prototype)for(var W in F)N.set(W,F[W]);else if(typeof F.keys=="function"&&typeof F.get=="function")for(const ne of F.keys())N.set(ne,F.get(ne));else throw Error("Unknown input type for opt_headers: "+String(F));F=Array.from(N.keys()).find(ne=>ne.toLowerCase()=="content-type"),W=o.FormData&&v instanceof o.FormData,!(Array.prototype.indexOf.call(Jc,b,void 0)>=0)||F||W||N.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ne,_e]of N)this.g.setRequestHeader(ne,_e);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(v),this.v=!1}catch(ne){yo(this,ne)}};function yo(v,b){v.h=!1,v.g&&(v.j=!0,v.g.abort(),v.j=!1),v.l=b,v.o=5,eu(v),ya(v)}function eu(v){v.A||(v.A=!0,bt(v,"complete"),bt(v,"error"))}n.abort=function(v){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=v||7,bt(this,"complete"),bt(this,"abort"),ya(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ya(this,!0)),St.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?_o(this):this.Xa())},n.Xa=function(){_o(this)};function _o(v){if(v.h&&typeof a<"u"){if(v.v&&gi(v)==4)setTimeout(v.Ca.bind(v),0);else if(bt(v,"readystatechange"),gi(v)==4){v.h=!1;try{const ne=v.ca();e:switch(ne){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var b=!0;break e;default:b=!1}var N;if(!(N=b)){var F;if(F=ne===0){let _e=String(v.D).match(Zf)[1]||null;!_e&&o.self&&o.self.location&&(_e=o.self.location.protocol.slice(0,-1)),F=!Ki.test(_e?_e.toLowerCase():"")}N=F}if(N)bt(v,"complete"),bt(v,"success");else{v.o=6;try{var W=gi(v)>2?v.g.statusText:""}catch{W=""}v.l=W+" ["+v.ca()+"]",eu(v)}}finally{ya(v)}}}}function ya(v,b){if(v.g){v.m&&(clearTimeout(v.m),v.m=null);const N=v.g;v.g=null,b||bt(v,"ready");try{N.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function gi(v){return v.g?v.g.readyState:0}n.ca=function(){try{return gi(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(v){if(this.g){var b=this.g.responseText;return v&&b.indexOf(v)==0&&(b=b.substring(v.length)),Fc(b)}};function Un(v){try{if(!v.g)return null;if("response"in v.g)return v.g.response;switch(v.F){case"":case"text":return v.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in v.g)return v.g.mozResponseArrayBuffer}return null}catch{return null}}function _a(v){const b={};v=(v.g&&gi(v)>=2&&v.g.getAllResponseHeaders()||"").split(`\r
`);for(let F=0;F<v.length;F++){if(k(v[F]))continue;var N=Kf(v[F]);const W=N[0];if(N=N[1],typeof N!="string")continue;N=N.trim();const ne=b[W]||[];b[W]=ne,ne.push(N)}Ue(b,function(F){return F.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Wi(v,b,N){return N&&N.internalChannelParams&&N.internalChannelParams[v]||b}function rs(v){this.za=0,this.i=[],this.j=new fi,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Wi("failFast",!1,v),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Wi("baseRetryDelayMs",5e3,v),this.Za=Wi("retryDelaySeedMs",1e4,v),this.Ta=Wi("forwardChannelMaxRetries",2,v),this.va=Wi("forwardChannelRequestTimeoutMs",2e4,v),this.ma=v&&v.xmlHttpFactory||void 0,this.Ua=v&&v.Rb||void 0,this.Aa=v&&v.useFetchStreams||!1,this.O=void 0,this.L=v&&v.supportsCrossDomainXhr||!1,this.M="",this.h=new Hc(v&&v.concurrentRequestLimit),this.Ba=new ts,this.S=v&&v.fastHandshake||!1,this.R=v&&v.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=v&&v.Pb||!1,v&&v.ua&&this.j.ua(),v&&v.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&v&&v.detectBufferingProxy||!1,this.ia=void 0,v&&v.longPollingTimeout&&v.longPollingTimeout>0&&(this.ia=v.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=rs.prototype,n.ka=8,n.I=1,n.connect=function(v,b,N,F){ln(0),this.W=v,this.H=b||{},N&&F!==void 0&&(this.H.OSID=N,this.H.OAID=F),this.F=this.X,this.J=ch(this,null,this.W),Qi(this)};function tu(v){if(pl(v),v.I==3){var b=v.V++,N=fn(v.J);if(yt(N,"SID",v.M),yt(N,"RID",b),yt(N,"TYPE","terminate"),xo(v,N),b=new hi(v,v.j,b),b.M=2,b.A=po(fn(N)),N=!1,o.navigator&&o.navigator.sendBeacon)try{N=o.navigator.sendBeacon(b.A.toString(),"")}catch{}!N&&o.Image&&(new Image().src=b.A,N=!0),N||(b.g=uh(b.j,null),b.g.ea(b.A)),b.F=Date.now(),zi(b)}lh(v)}function is(v){v.g&&(ru(v),v.g.cancel(),v.g=null)}function pl(v){is(v),v.v&&(o.clearTimeout(v.v),v.v=null),gl(v),v.h.cancel(),v.m&&(typeof v.m=="number"&&o.clearTimeout(v.m),v.m=null)}function Qi(v){if(!Gc(v.h)&&!v.m){v.m=!0;var b=v.Ea;U||w(),G||(U(),G=!0),D.add(b,v),v.D=0}}function ml(v,b){return qi(v.h)>=v.h.j-(v.m?1:0)?!1:v.m?(v.i=b.G.concat(v.i),!0):v.I==1||v.I==2||v.D>=(v.Sa?0:v.Ta)?!1:(v.m=Vi(h(v.Ea,v,b),oh(v,v.D)),v.D++,!0)}n.Ea=function(v){if(this.m)if(this.m=null,this.I==1){if(!v){this.V=Math.floor(Math.random()*1e5),v=this.V++;const W=new hi(this,this.j,v);let ne=this.o;if(this.U&&(ne?(ne=X(ne),ve(ne,this.U)):ne=this.U),this.u!==null||this.R||(W.J=ne,ne=null),this.S)e:{for(var b=0,N=0;N<this.i.length;N++){t:{var F=this.i[N];if("__data__"in F.map&&(F=F.map.__data__,typeof F=="string")){F=F.length;break t}F=void 0}if(F===void 0)break;if(b+=F,b>4096){b=N;break e}if(b===4096||N===this.i.length-1){b=N+1;break e}}b=1e3}else b=1e3;b=rh(this,W,b),N=fn(this.J),yt(N,"RID",v),yt(N,"CVER",22),this.G&&yt(N,"X-HTTP-Session-Id",this.G),xo(this,N),ne&&(this.R?b="headers="+va($r(ne))+"&"+b:this.u&&vo(N,this.u,ne)),qc(this.h,W),this.Ra&&yt(N,"TYPE","init"),this.S?(yt(N,"$req",b),yt(N,"SID","null"),W.U=!0,Ui(W,N,null)):Ui(W,N,b),this.I=2}}else this.I==3&&(v?nu(this,v):this.i.length==0||Gc(this.h)||nu(this))};function nu(v,b){var N;b?N=b.l:N=v.V++;const F=fn(v.J);yt(F,"SID",v.M),yt(F,"RID",N),yt(F,"AID",v.K),xo(v,F),v.u&&v.o&&vo(F,v.u,v.o),N=new hi(v,v.j,N,v.D+1),v.u===null&&(N.J=v.o),b&&(v.i=b.G.concat(v.i)),b=rh(v,N,1e3),N.H=Math.round(v.va*.5)+Math.round(v.va*.5*Math.random()),qc(v.h,N),Ui(N,F,b)}function xo(v,b){v.H&&Te(v.H,function(N,F){yt(b,F,N)}),v.l&&Te({},function(N,F){yt(b,F,N)})}function rh(v,b,N){N=Math.min(v.i.length,N);const F=v.l?h(v.l.Ka,v.l,v):null;e:{var W=v.i;let ze=-1;for(;;){const en=["count="+N];ze==-1?N>0?(ze=W[0].g,en.push("ofs="+ze)):ze=0:en.push("ofs="+ze);let ht=!0;for(let Ft=0;Ft<N;Ft++){var ne=W[Ft].g;const Xr=W[Ft].map;if(ne-=ze,ne<0)ze=Math.max(0,W[Ft].g-100),ht=!1;else try{ne="req"+ne+"_"||"";try{var _e=Xr instanceof Map?Xr:Object.entries(Xr);for(const[Ji,vi]of _e){let yi=vi;c(vi)&&(yi=Li(vi)),en.push(ne+Ji+"="+encodeURIComponent(yi))}}catch(Ji){throw en.push(ne+"type="+encodeURIComponent("_badmap")),Ji}}catch{F&&F(Xr)}}if(ht){_e=en.join("&");break e}}_e=void 0}return v=v.i.splice(0,N),b.G=v,_e}function ih(v){if(!v.g&&!v.v){v.Y=1;var b=v.Da;U||w(),G||(U(),G=!0),D.add(b,v),v.A=0}}function Eo(v){return v.g||v.v||v.A>=3?!1:(v.Y++,v.v=Vi(h(v.Da,v),oh(v,v.A)),v.A++,!0)}n.Da=function(){if(this.v=null,ah(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var v=4*this.T;this.j.info("BP detection timer enabled: "+v),this.B=Vi(h(this.Wa,this),v)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,ln(10),is(this),ah(this))};function ru(v){v.B!=null&&(o.clearTimeout(v.B),v.B=null)}function ah(v){v.g=new hi(v,v.j,"rpc",v.Y),v.u===null&&(v.g.J=v.o),v.g.P=0;var b=fn(v.na);yt(b,"RID","rpc"),yt(b,"SID",v.M),yt(b,"AID",v.K),yt(b,"CI",v.F?"0":"1"),!v.F&&v.ia&&yt(b,"TO",v.ia),yt(b,"TYPE","xmlhttp"),xo(v,b),v.u&&v.o&&vo(b,v.u,v.o),v.O&&(v.g.H=v.O);var N=v.g;v=v.ba,N.M=1,N.A=po(fn(b)),N.u=null,N.R=!0,ol(N,v)}n.Va=function(){this.C!=null&&(this.C=null,is(this),Eo(this),ln(19))};function gl(v){v.C!=null&&(o.clearTimeout(v.C),v.C=null)}function sh(v,b){var N=null;if(v.g==b){gl(v),ru(v),v.g=null;var F=2}else if($i(v.h,b))N=b.G,$c(v.h,b),F=1;else return;if(v.I!=0){if(b.o)if(F==1){N=b.u?b.u.length:0,b=Date.now()-b.F;var W=v.D;F=sl(),bt(F,new Bi(F,N)),Qi(v)}else ih(v);else if(W=b.m,W==3||W==0&&b.X>0||!(F==1&&ml(v,b)||F==2&&Eo(v)))switch(N&&N.length>0&&(b=v.h,b.i=b.i.concat(N)),W){case 1:Zi(v,5);break;case 4:Zi(v,10);break;case 3:Zi(v,6);break;default:Zi(v,2)}}}function oh(v,b){let N=v.Qa+Math.floor(Math.random()*v.Za);return v.isActive()||(N*=2),N*b}function Zi(v,b){if(v.j.info("Error code "+b),b==2){var N=h(v.bb,v),F=v.Ua;const W=!F;F=new Rr(F||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||Rn(F,"https"),po(F),W?pi(F.toString(),N):Zc(F.toString(),N)}else ln(2);v.I=0,v.l&&v.l.pa(b),lh(v),pl(v)}n.bb=function(v){v?(this.j.info("Successfully pinged google.com"),ln(2)):(this.j.info("Failed to ping google.com"),ln(1))};function lh(v){if(v.I=0,v.ja=[],v.l){const b=Xc(v.h);(b.length!=0||v.i.length!=0)&&(A(v.ja,b),A(v.ja,v.i),v.h.i.length=0,E(v.i),v.i.length=0),v.l.oa()}}function ch(v,b,N){var F=N instanceof Rr?fn(N):new Rr(N);if(F.g!="")b&&(F.g=b+"."+F.g),Qa(F,F.u);else{var W=o.location;F=W.protocol,b=b?b+"."+W.hostname:W.hostname,W=+W.port;const ne=new Rr(null);F&&Rn(ne,F),b&&(ne.g=b),W&&Qa(ne,W),N&&(ne.h=N),F=ne}return N=v.G,b=v.wa,N&&b&&yt(F,N,b),yt(F,"VER",v.ka),xo(v,F),F}function uh(v,b,N){if(b&&!v.L)throw Error("Can't create secondary domain capable XhrIo object.");return b=v.Aa&&!v.ma?new St(new Yi({ab:N})):new St(v.ma),b.Fa(v.L),b}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function fh(){}n=fh.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function as(){}as.prototype.g=function(v,b){return new or(v,b)};function or(v,b){gt.call(this),this.g=new rs(b),this.l=v,this.h=b&&b.messageUrlParams||null,v=b&&b.messageHeaders||null,b&&b.clientProtocolHeaderRequired&&(v?v["X-Client-Protocol"]="webchannel":v={"X-Client-Protocol":"webchannel"}),this.g.o=v,v=b&&b.initMessageHeaders||null,b&&b.messageContentType&&(v?v["X-WebChannel-Content-Type"]=b.messageContentType:v={"X-WebChannel-Content-Type":b.messageContentType}),b&&b.sa&&(v?v["X-WebChannel-Client-Profile"]=b.sa:v={"X-WebChannel-Client-Profile":b.sa}),this.g.U=v,(v=b&&b.Qb)&&!k(v)&&(this.g.u=v),this.A=b&&b.supportsCrossDomainXhr||!1,this.v=b&&b.sendRawJson||!1,(b=b&&b.httpSessionIdParam)&&!k(b)&&(this.g.G=b,v=this.h,v!==null&&b in v&&(v=this.h,b in v&&delete v[b])),this.j=new xa(this)}g(or,gt),or.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},or.prototype.close=function(){tu(this.g)},or.prototype.o=function(v){var b=this.g;if(typeof v=="string"){var N={};N.__data__=v,v=N}else this.v&&(N={},N.__data__=Li(v),v=N);b.i.push(new un(b.Ya++,v)),b.I==3&&Qi(b)},or.prototype.N=function(){this.g.l=null,delete this.j,tu(this.g),delete this.g,or.Z.N.call(this)};function hh(v){Fn.call(this),v.__headers__&&(this.headers=v.__headers__,this.statusCode=v.__status__,delete v.__headers__,delete v.__status__);var b=v.__sm__;if(b){e:{for(const N in b){v=N;break e}v=void 0}(this.i=v)&&(v=this.i,b=b!==null&&v in b?b[v]:void 0),this.data=b}else this.data=v}g(hh,Fn);function dh(){Hr.call(this),this.status=1}g(dh,Hr);function xa(v){this.g=v}g(xa,fh),xa.prototype.ra=function(){bt(this.g,"a")},xa.prototype.qa=function(v){bt(this.g,new hh(v))},xa.prototype.pa=function(v){bt(this.g,new dh)},xa.prototype.oa=function(){bt(this.g,"b")},as.prototype.createWebChannel=as.prototype.g,or.prototype.send=or.prototype.o,or.prototype.open=or.prototype.m,or.prototype.close=or.prototype.close,iC=function(){return new as},rC=function(){return sl()},nC=Jt,Tg={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},fo.NO_ERROR=0,fo.TIMEOUT=8,fo.HTTP_ERROR=6,Vd=fo,Uc.COMPLETE="complete",tC=Uc,pr.EventType=ui,ui.OPEN="a",ui.CLOSE="b",ui.ERROR="c",ui.MESSAGE="d",gt.prototype.listen=gt.prototype.J,Ku=pr,St.prototype.listenOnce=St.prototype.K,St.prototype.getLastError=St.prototype.Ha,St.prototype.getLastErrorCode=St.prototype.ya,St.prototype.getStatus=St.prototype.ca,St.prototype.getResponseJson=St.prototype.La,St.prototype.getResponseText=St.prototype.la,St.prototype.send=St.prototype.ea,St.prototype.setWithCredentials=St.prototype.Fa,eC=St}).apply(typeof _d<"u"?_d:typeof self<"u"?self:typeof window<"u"?window:{});const aw="@firebase/firestore",sw="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ir{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ir.UNAUTHENTICATED=new ir(null),ir.GOOGLE_CREDENTIALS=new ir("google-credentials-uid"),ir.FIRST_PARTY=new ir("first-party-uid"),ir.MOCK_USER=new ir("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Rc="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qo=new Sv("@firebase/firestore");function Jl(){return Qo.logLevel}function we(n,...e){if(Qo.logLevel<=Je.DEBUG){const t=e.map(Lv);Qo.debug(`Firestore (${Rc}): ${n}`,...t)}}function $a(n,...e){if(Qo.logLevel<=Je.ERROR){const t=e.map(Lv);Qo.error(`Firestore (${Rc}): ${n}`,...t)}}function gc(n,...e){if(Qo.logLevel<=Je.WARN){const t=e.map(Lv);Qo.warn(`Firestore (${Rc}): ${n}`,...t)}}function Lv(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ke(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,aC(n,r,t)}function aC(n,e,t){let r=`FIRESTORE (${Rc}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw $a(r),new Error(r)}function st(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||aC(e,i,r)}function Ve(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const le={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class xe extends ma{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ca{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sC{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class eD{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(ir.UNAUTHENTICATED)))}shutdown(){}}class tD{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class nD{constructor(e){this.t=e,this.currentUser=ir.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){st(this.o===void 0,42304);let r=this.i;const i=u=>this.i!==r?(r=this.i,t(u)):Promise.resolve();let a=new ca;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new ca,e.enqueueRetryable((()=>i(this.currentUser)))};const o=()=>{const u=a;e.enqueueRetryable((async()=>{await u.promise,await i(this.currentUser)}))},c=u=>{we("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit((u=>c(u))),setTimeout((()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?c(u):(we("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new ca)}}),0),o()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((r=>this.i!==e?(we("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(st(typeof r.accessToken=="string",31837,{l:r}),new sC(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return st(e===null||typeof e=="string",2055,{h:e}),new ir(e)}}class rD{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=ir.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class iD{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new rD(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(ir.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class ow{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class aD{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ii(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){st(this.o===void 0,3512);const r=a=>{a.error!=null&&we("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const o=a.token!==this.m;return this.m=a.token,we("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable((()=>r(a)))};const i=a=>{we("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((a=>i(a))),setTimeout((()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?i(a):we("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new ow(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(st(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new ow(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sD(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jv{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=sD(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<t&&(r+=e.charAt(i[a]%62))}return r}}function et(n,e){return n<e?-1:n>e?1:0}function Ig(n,e){const t=Math.min(n.length,e.length);for(let r=0;r<t;r++){const i=n.charAt(r),a=e.charAt(r);if(i!==a)return Cm(i)===Cm(a)?et(i,a):Cm(i)?1:-1}return et(n.length,e.length)}const oD=55296,lD=57343;function Cm(n){const e=n.charCodeAt(0);return e>=oD&&e<=lD}function vc(n,e,t){return n.length===e.length&&n.every(((r,i)=>t(r,e[i])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lw="__name__";class aa{constructor(e,t,r){t===void 0?t=0:t>e.length&&ke(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&ke(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return aa.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof aa?e.forEach((r=>{t.push(r)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const a=aa.compareSegments(e.get(i),t.get(i));if(a!==0)return a}return et(e.length,t.length)}static compareSegments(e,t){const r=aa.isNumericId(e),i=aa.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?aa.extractNumericId(e).compare(aa.extractNumericId(t)):Ig(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return zs.fromString(e.substring(4,e.length-2))}}class Rt extends aa{construct(e,t,r){return new Rt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new xe(le.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter((i=>i.length>0)))}return new Rt(t)}static emptyPath(){return new Rt([])}}const cD=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Wn extends aa{construct(e,t,r){return new Wn(e,t,r)}static isValidIdentifier(e){return cD.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Wn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===lw}static keyField(){return new Wn([lw])}static fromServerFormat(e){const t=[];let r="",i=0;const a=()=>{if(r.length===0)throw new xe(le.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let o=!1;for(;i<e.length;){const c=e[i];if(c==="\\"){if(i+1===e.length)throw new xe(le.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new xe(le.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else c==="`"?(o=!o,i++):c!=="."||o?(r+=c,i++):(a(),i++)}if(a(),o)throw new xe(le.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Wn(t)}static emptyPath(){return new Wn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Re{constructor(e){this.path=e}static fromPath(e){return new Re(Rt.fromString(e))}static fromName(e){return new Re(Rt.fromString(e).popFirst(5))}static empty(){return new Re(Rt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Rt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Rt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Re(new Rt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oC(n,e,t){if(!t)throw new xe(le.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function uD(n,e,t,r){if(e===!0&&r===!0)throw new xe(le.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function cw(n){if(!Re.isDocumentKey(n))throw new xe(le.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function uw(n){if(Re.isDocumentKey(n))throw new xe(le.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function lC(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function j0(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":ke(12329,{type:typeof n})}function si(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new xe(le.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=j0(n);throw new xe(le.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function fD(n,e){if(e<=0)throw new xe(le.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xn(n,e){const t={typeString:n};return e&&(t.value=e),t}function kf(n,e){if(!lC(n))throw new xe(le.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const i=e[r].typeString,a="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}const o=n[r];if(i&&typeof o!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(a!==void 0&&o!==a.value){t=`Expected '${r}' field to equal '${a.value}'`;break}}if(t)throw new xe(le.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fw=-62135596800,hw=1e6;class At{static now(){return At.fromMillis(Date.now())}static fromDate(e){return At.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*hw);return new At(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new xe(le.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new xe(le.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<fw)throw new xe(le.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new xe(le.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/hw}_compareTo(e){return this.seconds===e.seconds?et(this.nanoseconds,e.nanoseconds):et(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:At._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(kf(e,At._jsonSchema))return new At(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-fw;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}At._jsonSchemaVersion="firestore/timestamp/1.0",At._jsonSchema={type:xn("string",At._jsonSchemaVersion),seconds:xn("number"),nanoseconds:xn("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class je{static fromTimestamp(e){return new je(e)}static min(){return new je(new At(0,0))}static max(){return new je(new At(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yf=-1;function hD(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=je.fromTimestamp(r===1e9?new At(t+1,0):new At(t,r));return new Ks(i,Re.empty(),e)}function dD(n){return new Ks(n.readTime,n.key,yf)}class Ks{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Ks(je.min(),Re.empty(),yf)}static max(){return new Ks(je.max(),Re.empty(),yf)}}function pD(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Re.comparator(n.documentKey,e.documentKey),t!==0?t:et(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mD="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class gD{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Oc(n){if(n.code!==le.FAILED_PRECONDITION||n.message!==mD)throw n;we("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class he{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ke(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new he(((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,i)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof he?t:he.resolve(t)}catch(t){return he.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):he.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):he.reject(t)}static resolve(e){return new he(((t,r)=>{t(e)}))}static reject(e){return new he(((t,r)=>{r(e)}))}static waitFor(e){return new he(((t,r)=>{let i=0,a=0,o=!1;e.forEach((c=>{++i,c.next((()=>{++a,o&&a===i&&t()}),(u=>r(u)))})),o=!0,a===i&&t()}))}static or(e){let t=he.resolve(!1);for(const r of e)t=t.next((i=>i?he.resolve(i):r()));return t}static forEach(e,t){const r=[];return e.forEach(((i,a)=>{r.push(t.call(this,i,a))})),this.waitFor(r)}static mapArray(e,t){return new he(((r,i)=>{const a=e.length,o=new Array(a);let c=0;for(let u=0;u<a;u++){const h=u;t(e[h]).next((p=>{o[h]=p,++c,c===a&&r(o)}),(p=>i(p)))}}))}static doWhile(e,t){return new he(((r,i)=>{const a=()=>{e()===!0?t().next((()=>{a()}),i):r()};a()}))}}function vD(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Dc(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B0{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>t.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}B0.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bv=-1;function Lf(n){return n==null}function i0(n){return n===0&&1/n==-1/0}function yD(n){return typeof n=="number"&&Number.isInteger(n)&&!i0(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cC="";function _D(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=dw(e)),e=xD(n.get(t),e);return dw(e)}function xD(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const a=n.charAt(i);switch(a){case"\0":t+="";break;case cC:t+="";break;default:t+=a}}return t}function dw(n){return n+cC+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pw(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function io(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function uC(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yt{constructor(e,t){this.comparator=e,this.root=t||Kn.EMPTY}insert(e,t){return new Yt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Kn.BLACK,null,null))}remove(e){return new Yt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Kn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,r)=>(e(t,r),!1)))}toString(){const e=[];return this.inorderTraversal(((t,r)=>(e.push(`${t}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new xd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new xd(this.root,e,this.comparator,!1)}getReverseIterator(){return new xd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new xd(this.root,e,this.comparator,!0)}}class xd{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,t&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Kn{constructor(e,t,r,i,a){this.key=e,this.value=t,this.color=r??Kn.RED,this.left=i??Kn.EMPTY,this.right=a??Kn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,a){return new Kn(e??this.key,t??this.value,r??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,t,r),null):a===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Kn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return Kn.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Kn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Kn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ke(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ke(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ke(27949);return e+(this.isRed()?0:1)}}Kn.EMPTY=null,Kn.RED=!0,Kn.BLACK=!1;Kn.EMPTY=new class{constructor(){this.size=0}get key(){throw ke(57766)}get value(){throw ke(16141)}get color(){throw ke(16727)}get left(){throw ke(29726)}get right(){throw ke(36894)}copy(e,t,r,i,a){return this}insert(e,t,r){return new Kn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class In{constructor(e){this.comparator=e,this.data=new Yt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,r)=>(e(t),!1)))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new mw(this.data.getIterator())}getIteratorFrom(e){return new mw(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((r=>{t=t.add(r)})),t}isEqual(e){if(!(e instanceof In)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(this.comparator(i,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new In(this.comparator);return t.data=e,t}}class mw{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fr{constructor(e){this.fields=e,e.sort(Wn.comparator)}static empty(){return new Fr([])}unionWith(e){let t=new In(Wn.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Fr(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return vc(this.fields,e.fields,((t,r)=>t.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fC extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class er{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(i){try{return atob(i)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new fC("Invalid base64 string: "+a):a}})(e);return new er(t)}static fromUint8Array(e){const t=(function(i){let a="";for(let o=0;o<i.length;++o)a+=String.fromCharCode(i[o]);return a})(e);return new er(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return et(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}er.EMPTY_BYTE_STRING=new er("");const ED=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ws(n){if(st(!!n,39018),typeof n=="string"){let e=0;const t=ED.exec(n);if(st(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:an(n.seconds),nanos:an(n.nanos)}}function an(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Qs(n){return typeof n=="string"?er.fromBase64String(n):er.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hC="server_timestamp",dC="__type__",pC="__previous_value__",mC="__local_write_time__";function Vv(n){return(n?.mapValue?.fields||{})[dC]?.stringValue===hC}function V0(n){const e=n.mapValue.fields[pC];return Vv(e)?V0(e):e}function _f(n){const e=Ws(n.mapValue.fields[mC].timestampValue);return new At(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wD{constructor(e,t,r,i,a,o,c,u,h,p){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=c,this.longPollingOptions=u,this.useFetchStreams=h,this.isUsingEmulator=p}}const a0="(default)";class xf{constructor(e,t){this.projectId=e,this.database=t||a0}static empty(){return new xf("","")}get isDefaultDatabase(){return this.database===a0}isEqual(e){return e instanceof xf&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gC="__type__",AD="__max__",Ed={mapValue:{}},vC="__vector__",s0="value";function Zs(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Vv(n)?4:SD(n)?9007199254740991:bD(n)?10:11:ke(28295,{value:n})}function da(n,e){if(n===e)return!0;const t=Zs(n);if(t!==Zs(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return _f(n).isEqual(_f(e));case 3:return(function(i,a){if(typeof i.timestampValue=="string"&&typeof a.timestampValue=="string"&&i.timestampValue.length===a.timestampValue.length)return i.timestampValue===a.timestampValue;const o=Ws(i.timestampValue),c=Ws(a.timestampValue);return o.seconds===c.seconds&&o.nanos===c.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(i,a){return Qs(i.bytesValue).isEqual(Qs(a.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(i,a){return an(i.geoPointValue.latitude)===an(a.geoPointValue.latitude)&&an(i.geoPointValue.longitude)===an(a.geoPointValue.longitude)})(n,e);case 2:return(function(i,a){if("integerValue"in i&&"integerValue"in a)return an(i.integerValue)===an(a.integerValue);if("doubleValue"in i&&"doubleValue"in a){const o=an(i.doubleValue),c=an(a.doubleValue);return o===c?i0(o)===i0(c):isNaN(o)&&isNaN(c)}return!1})(n,e);case 9:return vc(n.arrayValue.values||[],e.arrayValue.values||[],da);case 10:case 11:return(function(i,a){const o=i.mapValue.fields||{},c=a.mapValue.fields||{};if(pw(o)!==pw(c))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(c[u]===void 0||!da(o[u],c[u])))return!1;return!0})(n,e);default:return ke(52216,{left:n})}}function Ef(n,e){return(n.values||[]).find((t=>da(t,e)))!==void 0}function yc(n,e){if(n===e)return 0;const t=Zs(n),r=Zs(e);if(t!==r)return et(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return et(n.booleanValue,e.booleanValue);case 2:return(function(a,o){const c=an(a.integerValue||a.doubleValue),u=an(o.integerValue||o.doubleValue);return c<u?-1:c>u?1:c===u?0:isNaN(c)?isNaN(u)?0:-1:1})(n,e);case 3:return gw(n.timestampValue,e.timestampValue);case 4:return gw(_f(n),_f(e));case 5:return Ig(n.stringValue,e.stringValue);case 6:return(function(a,o){const c=Qs(a),u=Qs(o);return c.compareTo(u)})(n.bytesValue,e.bytesValue);case 7:return(function(a,o){const c=a.split("/"),u=o.split("/");for(let h=0;h<c.length&&h<u.length;h++){const p=et(c[h],u[h]);if(p!==0)return p}return et(c.length,u.length)})(n.referenceValue,e.referenceValue);case 8:return(function(a,o){const c=et(an(a.latitude),an(o.latitude));return c!==0?c:et(an(a.longitude),an(o.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return vw(n.arrayValue,e.arrayValue);case 10:return(function(a,o){const c=a.fields||{},u=o.fields||{},h=c[s0]?.arrayValue,p=u[s0]?.arrayValue,g=et(h?.values?.length||0,p?.values?.length||0);return g!==0?g:vw(h,p)})(n.mapValue,e.mapValue);case 11:return(function(a,o){if(a===Ed.mapValue&&o===Ed.mapValue)return 0;if(a===Ed.mapValue)return 1;if(o===Ed.mapValue)return-1;const c=a.fields||{},u=Object.keys(c),h=o.fields||{},p=Object.keys(h);u.sort(),p.sort();for(let g=0;g<u.length&&g<p.length;++g){const _=Ig(u[g],p[g]);if(_!==0)return _;const E=yc(c[u[g]],h[p[g]]);if(E!==0)return E}return et(u.length,p.length)})(n.mapValue,e.mapValue);default:throw ke(23264,{he:t})}}function gw(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return et(n,e);const t=Ws(n),r=Ws(e),i=et(t.seconds,r.seconds);return i!==0?i:et(t.nanos,r.nanos)}function vw(n,e){const t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){const a=yc(t[i],r[i]);if(a)return a}return et(t.length,r.length)}function _c(n){return Ng(n)}function Ng(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const r=Ws(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return Qs(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return Re.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",i=!0;for(const a of t.values||[])i?i=!1:r+=",",r+=Ng(a);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){const r=Object.keys(t.fields||{}).sort();let i="{",a=!0;for(const o of r)a?a=!1:i+=",",i+=`${o}:${Ng(t.fields[o])}`;return i+"}"})(n.mapValue):ke(61005,{value:n})}function Fd(n){switch(Zs(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=V0(n);return e?16+Fd(e):16;case 5:return 2*n.stringValue.length;case 6:return Qs(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((i,a)=>i+Fd(a)),0)})(n.arrayValue);case 10:case 11:return(function(r){let i=0;return io(r.fields,((a,o)=>{i+=a.length+Fd(o)})),i})(n.mapValue);default:throw ke(13486,{value:n})}}function yw(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Rg(n){return!!n&&"integerValue"in n}function Fv(n){return!!n&&"arrayValue"in n}function _w(n){return!!n&&"nullValue"in n}function xw(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Ud(n){return!!n&&"mapValue"in n}function bD(n){return(n?.mapValue?.fields||{})[gC]?.stringValue===vC}function sf(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return io(n.mapValue.fields,((t,r)=>e.mapValue.fields[t]=sf(r))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=sf(n.arrayValue.values[t]);return e}return{...n}}function SD(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===AD}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dr{constructor(e){this.value=e}static empty(){return new dr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Ud(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=sf(t)}setAll(e){let t=Wn.emptyPath(),r={},i=[];e.forEach(((o,c)=>{if(!t.isImmediateParentOf(c)){const u=this.getFieldsMap(t);this.applyChanges(u,r,i),r={},i=[],t=c.popLast()}o?r[c.lastSegment()]=sf(o):i.push(c.lastSegment())}));const a=this.getFieldsMap(t);this.applyChanges(a,r,i)}delete(e){const t=this.field(e.popLast());Ud(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return da(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Ud(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){io(t,((i,a)=>e[i]=a));for(const i of r)delete e[i]}clone(){return new dr(sf(this.value))}}function yC(n){const e=[];return io(n.fields,((t,r)=>{const i=new Wn([t]);if(Ud(r)){const a=yC(r.mapValue).fields;if(a.length===0)e.push(i);else for(const o of a)e.push(i.child(o))}else e.push(i)})),new Fr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kn{constructor(e,t,r,i,a,o,c){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=a,this.data=o,this.documentState=c}static newInvalidDocument(e){return new kn(e,0,je.min(),je.min(),je.min(),dr.empty(),0)}static newFoundDocument(e,t,r,i){return new kn(e,1,t,je.min(),r,i,0)}static newNoDocument(e,t){return new kn(e,2,t,je.min(),je.min(),dr.empty(),0)}static newUnknownDocument(e,t){return new kn(e,3,t,je.min(),je.min(),dr.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(je.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=dr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=dr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=je.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof kn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new kn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o0{constructor(e,t){this.position=e,this.inclusive=t}}function Ew(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const a=e[i],o=n.position[i];if(a.field.isKeyField()?r=Re.comparator(Re.fromName(o.referenceValue),t.key):r=yc(o,t.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function ww(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!da(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wf{constructor(e,t="asc"){this.field=e,this.dir=t}}function CD(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _C{}class yn extends _C{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new ID(e,t,r):t==="array-contains"?new OD(e,r):t==="in"?new DD(e,r):t==="not-in"?new MD(e,r):t==="array-contains-any"?new PD(e,r):new yn(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new ND(e,r):new RD(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(yc(t,this.value)):t!==null&&Zs(this.value)===Zs(t)&&this.matchesComparison(yc(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ke(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Di extends _C{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Di(e,t)}matches(e){return xC(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function xC(n){return n.op==="and"}function EC(n){return TD(n)&&xC(n)}function TD(n){for(const e of n.filters)if(e instanceof Di)return!1;return!0}function Og(n){if(n instanceof yn)return n.field.canonicalString()+n.op.toString()+_c(n.value);if(EC(n))return n.filters.map((e=>Og(e))).join(",");{const e=n.filters.map((t=>Og(t))).join(",");return`${n.op}(${e})`}}function wC(n,e){return n instanceof yn?(function(r,i){return i instanceof yn&&r.op===i.op&&r.field.isEqual(i.field)&&da(r.value,i.value)})(n,e):n instanceof Di?(function(r,i){return i instanceof Di&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce(((a,o,c)=>a&&wC(o,i.filters[c])),!0):!1})(n,e):void ke(19439)}function AC(n){return n instanceof yn?(function(t){return`${t.field.canonicalString()} ${t.op} ${_c(t.value)}`})(n):n instanceof Di?(function(t){return t.op.toString()+" {"+t.getFilters().map(AC).join(" ,")+"}"})(n):"Filter"}class ID extends yn{constructor(e,t,r){super(e,t,r),this.key=Re.fromName(r.referenceValue)}matches(e){const t=Re.comparator(e.key,this.key);return this.matchesComparison(t)}}class ND extends yn{constructor(e,t){super(e,"in",t),this.keys=bC("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class RD extends yn{constructor(e,t){super(e,"not-in",t),this.keys=bC("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function bC(n,e){return(e.arrayValue?.values||[]).map((t=>Re.fromName(t.referenceValue)))}class OD extends yn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Fv(t)&&Ef(t.arrayValue,this.value)}}class DD extends yn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Ef(this.value.arrayValue,t)}}class MD extends yn{constructor(e,t){super(e,"not-in",t)}matches(e){if(Ef(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Ef(this.value.arrayValue,t)}}class PD extends yn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Fv(t)||!t.arrayValue.values)&&t.arrayValue.values.some((r=>Ef(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kD{constructor(e,t=null,r=[],i=[],a=null,o=null,c=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=c,this.Te=null}}function Aw(n,e=null,t=[],r=[],i=null,a=null,o=null){return new kD(n,e,t,r,i,a,o)}function Uv(n){const e=Ve(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((r=>Og(r))).join(","),t+="|ob:",t+=e.orderBy.map((r=>(function(a){return a.field.canonicalString()+a.dir})(r))).join(","),Lf(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((r=>_c(r))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((r=>_c(r))).join(",")),e.Te=t}return e.Te}function zv(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!CD(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!wC(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!ww(n.startAt,e.startAt)&&ww(n.endAt,e.endAt)}function Dg(n){return Re.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mc{constructor(e,t=null,r=[],i=[],a=null,o="F",c=null,u=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=c,this.endAt=u,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function LD(n,e,t,r,i,a,o,c){return new Mc(n,e,t,r,i,a,o,c)}function F0(n){return new Mc(n)}function bw(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function SC(n){return n.collectionGroup!==null}function of(n){const e=Ve(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const a of e.explicitOrderBy)e.Ie.push(a),t.add(a.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let c=new In(Wn.comparator);return o.filters.forEach((u=>{u.getFlattenedFilters().forEach((h=>{h.isInequality()&&(c=c.add(h.field))}))})),c})(e).forEach((a=>{t.has(a.canonicalString())||a.isKeyField()||e.Ie.push(new wf(a,r))})),t.has(Wn.keyField().canonicalString())||e.Ie.push(new wf(Wn.keyField(),r))}return e.Ie}function ua(n){const e=Ve(n);return e.Ee||(e.Ee=jD(e,of(n))),e.Ee}function jD(n,e){if(n.limitType==="F")return Aw(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((i=>{const a=i.dir==="desc"?"asc":"desc";return new wf(i.field,a)}));const t=n.endAt?new o0(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new o0(n.startAt.position,n.startAt.inclusive):null;return Aw(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function Mg(n,e){const t=n.filters.concat([e]);return new Mc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function l0(n,e,t){return new Mc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function U0(n,e){return zv(ua(n),ua(e))&&n.limitType===e.limitType}function CC(n){return`${Uv(ua(n))}|lt:${n.limitType}`}function ec(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map((i=>AC(i))).join(", ")}]`),Lf(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map((i=>(function(o){return`${o.field.canonicalString()} (${o.dir})`})(i))).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map((i=>_c(i))).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map((i=>_c(i))).join(",")),`Target(${r})`})(ua(n))}; limitType=${n.limitType})`}function z0(n,e){return e.isFoundDocument()&&(function(r,i){const a=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):Re.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)})(n,e)&&(function(r,i){for(const a of of(r))if(!a.field.isKeyField()&&i.data.field(a.field)===null)return!1;return!0})(n,e)&&(function(r,i){for(const a of r.filters)if(!a.matches(i))return!1;return!0})(n,e)&&(function(r,i){return!(r.startAt&&!(function(o,c,u){const h=Ew(o,c,u);return o.inclusive?h<=0:h<0})(r.startAt,of(r),i)||r.endAt&&!(function(o,c,u){const h=Ew(o,c,u);return o.inclusive?h>=0:h>0})(r.endAt,of(r),i))})(n,e)}function BD(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function TC(n){return(e,t)=>{let r=!1;for(const i of of(n)){const a=VD(i,e,t);if(a!==0)return a;r=r||i.field.isKeyField()}return 0}}function VD(n,e,t){const r=n.field.isKeyField()?Re.comparator(e.key,t.key):(function(a,o,c){const u=o.data.field(a),h=c.data.field(a);return u!==null&&h!==null?yc(u,h):ke(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return ke(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tl{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[i,a]of r)if(this.equalsFn(i,e))return a}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){io(this.inner,((t,r)=>{for(const[i,a]of r)e(i,a)}))}isEmpty(){return uC(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FD=new Yt(Re.comparator);function Xa(){return FD}const IC=new Yt(Re.comparator);function Wu(...n){let e=IC;for(const t of n)e=e.insert(t.key,t);return e}function NC(n){let e=IC;return n.forEach(((t,r)=>e=e.insert(t,r.overlayedDocument))),e}function Ho(){return lf()}function RC(){return lf()}function lf(){return new tl((n=>n.toString()),((n,e)=>n.isEqual(e)))}const UD=new Yt(Re.comparator),zD=new In(Re.comparator);function tt(...n){let e=zD;for(const t of n)e=e.add(t);return e}const HD=new In(et);function GD(){return HD}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hv(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:i0(e)?"-0":e}}function OC(n){return{integerValue:""+n}}function qD(n,e){return yD(e)?OC(e):Hv(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H0{constructor(){this._=void 0}}function $D(n,e,t){return n instanceof Af?(function(i,a){const o={fields:{[dC]:{stringValue:hC},[mC]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return a&&Vv(a)&&(a=V0(a)),a&&(o.fields[pC]=a),{mapValue:o}})(t,e):n instanceof bf?MC(n,e):n instanceof Sf?PC(n,e):(function(i,a){const o=DC(i,a),c=Sw(o)+Sw(i.Ae);return Rg(o)&&Rg(i.Ae)?OC(c):Hv(i.serializer,c)})(n,e)}function XD(n,e,t){return n instanceof bf?MC(n,e):n instanceof Sf?PC(n,e):t}function DC(n,e){return n instanceof c0?(function(r){return Rg(r)||(function(a){return!!a&&"doubleValue"in a})(r)})(e)?e:{integerValue:0}:null}class Af extends H0{}class bf extends H0{constructor(e){super(),this.elements=e}}function MC(n,e){const t=kC(e);for(const r of n.elements)t.some((i=>da(i,r)))||t.push(r);return{arrayValue:{values:t}}}class Sf extends H0{constructor(e){super(),this.elements=e}}function PC(n,e){let t=kC(e);for(const r of n.elements)t=t.filter((i=>!da(i,r)));return{arrayValue:{values:t}}}class c0 extends H0{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function Sw(n){return an(n.integerValue||n.doubleValue)}function kC(n){return Fv(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YD{constructor(e,t){this.field=e,this.transform=t}}function KD(n,e){return n.field.isEqual(e.field)&&(function(r,i){return r instanceof bf&&i instanceof bf||r instanceof Sf&&i instanceof Sf?vc(r.elements,i.elements,da):r instanceof c0&&i instanceof c0?da(r.Ae,i.Ae):r instanceof Af&&i instanceof Af})(n.transform,e.transform)}class WD{constructor(e,t){this.version=e,this.transformResults=t}}class Qn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Qn}static exists(e){return new Qn(void 0,e)}static updateTime(e){return new Qn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function zd(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class G0{}function LC(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new q0(n.key,Qn.none()):new jf(n.key,n.data,Qn.none());{const t=n.data,r=dr.empty();let i=new In(Wn.comparator);for(let a of e.fields)if(!i.has(a)){let o=t.field(a);o===null&&a.length>1&&(a=a.popLast(),o=t.field(a)),o===null?r.delete(a):r.set(a,o),i=i.add(a)}return new ao(n.key,r,new Fr(i.toArray()),Qn.none())}}function QD(n,e,t){n instanceof jf?(function(i,a,o){const c=i.value.clone(),u=Tw(i.fieldTransforms,a,o.transformResults);c.setAll(u),a.convertToFoundDocument(o.version,c).setHasCommittedMutations()})(n,e,t):n instanceof ao?(function(i,a,o){if(!zd(i.precondition,a))return void a.convertToUnknownDocument(o.version);const c=Tw(i.fieldTransforms,a,o.transformResults),u=a.data;u.setAll(jC(i)),u.setAll(c),a.convertToFoundDocument(o.version,u).setHasCommittedMutations()})(n,e,t):(function(i,a,o){a.convertToNoDocument(o.version).setHasCommittedMutations()})(0,e,t)}function cf(n,e,t,r){return n instanceof jf?(function(a,o,c,u){if(!zd(a.precondition,o))return c;const h=a.value.clone(),p=Iw(a.fieldTransforms,u,o);return h.setAll(p),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),null})(n,e,t,r):n instanceof ao?(function(a,o,c,u){if(!zd(a.precondition,o))return c;const h=Iw(a.fieldTransforms,u,o),p=o.data;return p.setAll(jC(a)),p.setAll(h),o.convertToFoundDocument(o.version,p).setHasLocalMutations(),c===null?null:c.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map((g=>g.field)))})(n,e,t,r):(function(a,o,c){return zd(a.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):c})(n,e,t)}function ZD(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),a=DC(r.transform,i||null);a!=null&&(t===null&&(t=dr.empty()),t.set(r.field,a))}return t||null}function Cw(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&vc(r,i,((a,o)=>KD(a,o)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class jf extends G0{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class ao extends G0{constructor(e,t,r,i,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function jC(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}})),e}function Tw(n,e,t){const r=new Map;st(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let i=0;i<t.length;i++){const a=n[i],o=a.transform,c=e.data.field(a.field);r.set(a.field,XD(o,c,t[i]))}return r}function Iw(n,e,t){const r=new Map;for(const i of n){const a=i.transform,o=t.data.field(i.field);r.set(i.field,$D(a,o,e))}return r}class q0 extends G0{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class BC extends G0{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JD{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&QD(a,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=cf(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=cf(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=RC();return this.mutations.forEach((i=>{const a=e.get(i.key),o=a.overlayedDocument;let c=this.applyToLocalView(o,a.mutatedFields);c=t.has(i.key)?null:c;const u=LC(o,c);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(je.min())})),r}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),tt())}isEqual(e){return this.batchId===e.batchId&&vc(this.mutations,e.mutations,((t,r)=>Cw(t,r)))&&vc(this.baseMutations,e.baseMutations,((t,r)=>Cw(t,r)))}}class Gv{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){st(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=(function(){return UD})();const a=e.mutations;for(let o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new Gv(e,t,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e5{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t5{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var vn,it;function VC(n){switch(n){case le.OK:return ke(64938);case le.CANCELLED:case le.UNKNOWN:case le.DEADLINE_EXCEEDED:case le.RESOURCE_EXHAUSTED:case le.INTERNAL:case le.UNAVAILABLE:case le.UNAUTHENTICATED:return!1;case le.INVALID_ARGUMENT:case le.NOT_FOUND:case le.ALREADY_EXISTS:case le.PERMISSION_DENIED:case le.FAILED_PRECONDITION:case le.ABORTED:case le.OUT_OF_RANGE:case le.UNIMPLEMENTED:case le.DATA_LOSS:return!0;default:return ke(15467,{code:n})}}function FC(n){if(n===void 0)return $a("GRPC error has no .code"),le.UNKNOWN;switch(n){case vn.OK:return le.OK;case vn.CANCELLED:return le.CANCELLED;case vn.UNKNOWN:return le.UNKNOWN;case vn.DEADLINE_EXCEEDED:return le.DEADLINE_EXCEEDED;case vn.RESOURCE_EXHAUSTED:return le.RESOURCE_EXHAUSTED;case vn.INTERNAL:return le.INTERNAL;case vn.UNAVAILABLE:return le.UNAVAILABLE;case vn.UNAUTHENTICATED:return le.UNAUTHENTICATED;case vn.INVALID_ARGUMENT:return le.INVALID_ARGUMENT;case vn.NOT_FOUND:return le.NOT_FOUND;case vn.ALREADY_EXISTS:return le.ALREADY_EXISTS;case vn.PERMISSION_DENIED:return le.PERMISSION_DENIED;case vn.FAILED_PRECONDITION:return le.FAILED_PRECONDITION;case vn.ABORTED:return le.ABORTED;case vn.OUT_OF_RANGE:return le.OUT_OF_RANGE;case vn.UNIMPLEMENTED:return le.UNIMPLEMENTED;case vn.DATA_LOSS:return le.DATA_LOSS;default:return ke(39323,{code:n})}}(it=vn||(vn={}))[it.OK=0]="OK",it[it.CANCELLED=1]="CANCELLED",it[it.UNKNOWN=2]="UNKNOWN",it[it.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",it[it.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",it[it.NOT_FOUND=5]="NOT_FOUND",it[it.ALREADY_EXISTS=6]="ALREADY_EXISTS",it[it.PERMISSION_DENIED=7]="PERMISSION_DENIED",it[it.UNAUTHENTICATED=16]="UNAUTHENTICATED",it[it.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",it[it.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",it[it.ABORTED=10]="ABORTED",it[it.OUT_OF_RANGE=11]="OUT_OF_RANGE",it[it.UNIMPLEMENTED=12]="UNIMPLEMENTED",it[it.INTERNAL=13]="INTERNAL",it[it.UNAVAILABLE=14]="UNAVAILABLE",it[it.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n5(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r5=new zs([4294967295,4294967295],0);function Nw(n){const e=n5().encode(n),t=new JS;return t.update(e),new Uint8Array(t.digest())}function Rw(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new zs([t,r],0),new zs([i,a],0)]}class qv{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Qu(`Invalid padding: ${t}`);if(r<0)throw new Qu(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Qu(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Qu(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=zs.fromNumber(this.ge)}ye(e,t,r){let i=e.add(t.multiply(zs.fromNumber(r)));return i.compare(r5)===1&&(i=new zs([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=Nw(e),[r,i]=Rw(t);for(let a=0;a<this.hashCount;a++){const o=this.ye(r,i,a);if(!this.we(o))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),o=new qv(a,i,t);return r.forEach((c=>o.insert(c))),o}insert(e){if(this.ge===0)return;const t=Nw(e),[r,i]=Rw(t);for(let a=0;a<this.hashCount;a++){const o=this.ye(r,i,a);this.Se(o)}}Se(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class Qu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $0{constructor(e,t,r,i,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,Bf.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new $0(je.min(),i,new Yt(et),Xa(),tt())}}class Bf{constructor(e,t,r,i,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Bf(r,t,tt(),tt(),tt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hd{constructor(e,t,r,i){this.be=e,this.removedTargetIds=t,this.key=r,this.De=i}}class UC{constructor(e,t){this.targetId=e,this.Ce=t}}class zC{constructor(e,t,r=er.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class Ow{constructor(){this.ve=0,this.Fe=Dw(),this.Me=er.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=tt(),t=tt(),r=tt();return this.Fe.forEach(((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:ke(38017,{changeType:a})}})),new Bf(this.Me,this.xe,e,t,r)}qe(){this.Oe=!1,this.Fe=Dw()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,st(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class i5{constructor(e){this.Ge=e,this.ze=new Map,this.je=Xa(),this.Je=wd(),this.He=wd(),this.Ye=new Yt(et)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:ke(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((r,i)=>{this.rt(i)&&t(i)}))}st(e){const t=e.targetId,r=e.Ce.count,i=this.ot(t);if(i){const a=i.target;if(Dg(a))if(r===0){const o=new Re(a.path);this.et(t,o,kn.newNoDocument(o,je.min()))}else st(r===1,20013,{expectedCount:r});else{const o=this._t(t);if(o!==r){const c=this.ut(e),u=c?this.ct(c,e,o):1;if(u!==0){this.it(t);const h=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,h)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:a=0}=t;let o,c;try{o=Qs(r).toUint8Array()}catch(u){if(u instanceof fC)return gc("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{c=new qv(o,i,a)}catch(u){return gc(u instanceof Qu?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return c.ge===0?null:c}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){const r=this.Ge.getRemoteKeysForTarget(t);let i=0;return r.forEach((a=>{const o=this.Ge.ht(),c=`projects/${o.projectId}/databases/${o.database}/documents/${a.path.canonicalString()}`;e.mightContain(c)||(this.et(t,a,null),i++)})),i}Tt(e){const t=new Map;this.ze.forEach(((a,o)=>{const c=this.ot(o);if(c){if(a.current&&Dg(c.target)){const u=new Re(c.target.path);this.It(u).has(o)||this.Et(o,u)||this.et(o,u,kn.newNoDocument(u,e))}a.Be&&(t.set(o,a.ke()),a.qe())}}));let r=tt();this.He.forEach(((a,o)=>{let c=!0;o.forEachWhile((u=>{const h=this.ot(u);return!h||h.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)})),c&&(r=r.add(a))})),this.je.forEach(((a,o)=>o.setReadTime(e)));const i=new $0(e,t,this.Ye,this.je,r);return this.je=Xa(),this.Je=wd(),this.He=wd(),this.Ye=new Yt(et),i}Xe(e,t){if(!this.rt(e))return;const r=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,r),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,t)?i.Qe(t,1):i.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new Ow,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new In(et),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new In(et),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||we("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Ow),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function wd(){return new Yt(Re.comparator)}function Dw(){return new Yt(Re.comparator)}const a5={asc:"ASCENDING",desc:"DESCENDING"},s5={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},o5={and:"AND",or:"OR"};class l5{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Pg(n,e){return n.useProto3Json||Lf(e)?e:{value:e}}function u0(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function HC(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function c5(n,e){return u0(n,e.toTimestamp())}function Ur(n){return st(!!n,49232),je.fromTimestamp((function(t){const r=Ws(t);return new At(r.seconds,r.nanos)})(n))}function $v(n,e){return kg(n,e).canonicalString()}function kg(n,e){const t=(function(i){return new Rt(["projects",i.projectId,"databases",i.database])})(n).child("documents");return e===void 0?t:t.child(e)}function GC(n){const e=Rt.fromString(n);return st(WC(e),10190,{key:e.toString()}),e}function f0(n,e){return $v(n.databaseId,e.path)}function uf(n,e){const t=GC(e);if(t.get(1)!==n.databaseId.projectId)throw new xe(le.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new xe(le.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Re($C(t))}function qC(n,e){return $v(n.databaseId,e)}function u5(n){const e=GC(n);return e.length===4?Rt.emptyPath():$C(e)}function Lg(n){return new Rt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function $C(n){return st(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function Mw(n,e,t){return{name:f0(n,e),fields:t.value.mapValue.fields}}function f5(n,e){return"found"in e?(function(r,i){st(!!i.found,43571),i.found.name,i.found.updateTime;const a=uf(r,i.found.name),o=Ur(i.found.updateTime),c=i.found.createTime?Ur(i.found.createTime):je.min(),u=new dr({mapValue:{fields:i.found.fields}});return kn.newFoundDocument(a,o,c,u)})(n,e):"missing"in e?(function(r,i){st(!!i.missing,3894),st(!!i.readTime,22933);const a=uf(r,i.missing),o=Ur(i.readTime);return kn.newNoDocument(a,o)})(n,e):ke(7234,{result:e})}function h5(n,e){let t;if("targetChange"in e){e.targetChange;const r=(function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:ke(39313,{state:h})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],a=(function(h,p){return h.useProto3Json?(st(p===void 0||typeof p=="string",58123),er.fromBase64String(p||"")):(st(p===void 0||p instanceof Buffer||p instanceof Uint8Array,16193),er.fromUint8Array(p||new Uint8Array))})(n,e.targetChange.resumeToken),o=e.targetChange.cause,c=o&&(function(h){const p=h.code===void 0?le.UNKNOWN:FC(h.code);return new xe(p,h.message||"")})(o);t=new zC(r,i,a,c||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=uf(n,r.document.name),a=Ur(r.document.updateTime),o=r.document.createTime?Ur(r.document.createTime):je.min(),c=new dr({mapValue:{fields:r.document.fields}}),u=kn.newFoundDocument(i,a,o,c),h=r.targetIds||[],p=r.removedTargetIds||[];t=new Hd(h,p,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=uf(n,r.document),a=r.readTime?Ur(r.readTime):je.min(),o=kn.newNoDocument(i,a),c=r.removedTargetIds||[];t=new Hd([],c,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=uf(n,r.document),a=r.removedTargetIds||[];t=new Hd([],a,i,null)}else{if(!("filter"in e))return ke(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:a}=r,o=new t5(i,a),c=r.targetId;t=new UC(c,o)}}return t}function XC(n,e){let t;if(e instanceof jf)t={update:Mw(n,e.key,e.value)};else if(e instanceof q0)t={delete:f0(n,e.key)};else if(e instanceof ao)t={update:Mw(n,e.key,e.data),updateMask:E5(e.fieldMask)};else{if(!(e instanceof BC))return ke(16599,{Vt:e.type});t={verify:f0(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((r=>(function(a,o){const c=o.transform;if(c instanceof Af)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof bf)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Sf)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof c0)return{fieldPath:o.field.canonicalString(),increment:c.Ae};throw ke(20930,{transform:o.transform})})(0,r)))),e.precondition.isNone||(t.currentDocument=(function(i,a){return a.updateTime!==void 0?{updateTime:c5(i,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:ke(27497)})(n,e.precondition)),t}function d5(n,e){return n&&n.length>0?(st(e!==void 0,14353),n.map((t=>(function(i,a){let o=i.updateTime?Ur(i.updateTime):Ur(a);return o.isEqual(je.min())&&(o=Ur(a)),new WD(o,i.transformResults||[])})(t,e)))):[]}function p5(n,e){return{documents:[qC(n,e.path)]}}function m5(n,e){const t={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=qC(n,i);const a=(function(h){if(h.length!==0)return KC(Di.create(h,"and"))})(e.filters);a&&(t.structuredQuery.where=a);const o=(function(h){if(h.length!==0)return h.map((p=>(function(_){return{field:tc(_.field),direction:y5(_.dir)}})(p)))})(e.orderBy);o&&(t.structuredQuery.orderBy=o);const c=Pg(n,e.limit);return c!==null&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt=(function(h){return{before:h.inclusive,values:h.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(h){return{before:!h.inclusive,values:h.position}})(e.endAt)),{ft:t,parent:i}}function g5(n){let e=u5(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){st(r===1,65062);const p=t.from[0];p.allDescendants?i=p.collectionId:e=e.child(p.collectionId)}let a=[];t.where&&(a=(function(g){const _=YC(g);return _ instanceof Di&&EC(_)?_.getFilters():[_]})(t.where));let o=[];t.orderBy&&(o=(function(g){return g.map((_=>(function(A){return new wf(nc(A.field),(function(O){switch(O){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(A.direction))})(_)))})(t.orderBy));let c=null;t.limit&&(c=(function(g){let _;return _=typeof g=="object"?g.value:g,Lf(_)?null:_})(t.limit));let u=null;t.startAt&&(u=(function(g){const _=!!g.before,E=g.values||[];return new o0(E,_)})(t.startAt));let h=null;return t.endAt&&(h=(function(g){const _=!g.before,E=g.values||[];return new o0(E,_)})(t.endAt)),LD(e,i,o,a,c,"F",u,h)}function v5(n,e){const t=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ke(28987,{purpose:i})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function YC(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=nc(t.unaryFilter.field);return yn.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=nc(t.unaryFilter.field);return yn.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=nc(t.unaryFilter.field);return yn.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=nc(t.unaryFilter.field);return yn.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ke(61313);default:return ke(60726)}})(n):n.fieldFilter!==void 0?(function(t){return yn.create(nc(t.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ke(58110);default:return ke(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return Di.create(t.compositeFilter.filters.map((r=>YC(r))),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ke(1026)}})(t.compositeFilter.op))})(n):ke(30097,{filter:n})}function y5(n){return a5[n]}function _5(n){return s5[n]}function x5(n){return o5[n]}function tc(n){return{fieldPath:n.canonicalString()}}function nc(n){return Wn.fromServerFormat(n.fieldPath)}function KC(n){return n instanceof yn?(function(t){if(t.op==="=="){if(xw(t.value))return{unaryFilter:{field:tc(t.field),op:"IS_NAN"}};if(_w(t.value))return{unaryFilter:{field:tc(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(xw(t.value))return{unaryFilter:{field:tc(t.field),op:"IS_NOT_NAN"}};if(_w(t.value))return{unaryFilter:{field:tc(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:tc(t.field),op:_5(t.op),value:t.value}}})(n):n instanceof Di?(function(t){const r=t.getFilters().map((i=>KC(i)));return r.length===1?r[0]:{compositeFilter:{op:x5(t.op),filters:r}}})(n):ke(54877,{filter:n})}function E5(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function WC(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class js{constructor(e,t,r,i,a=je.min(),o=je.min(),c=er.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=c,this.expectedCount=u}withSequenceNumber(e){return new js(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new js(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new js(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new js(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w5{constructor(e){this.yt=e}}function A5(n){const e=g5({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?l0(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b5{constructor(){this.Cn=new S5}addToCollectionParentIndex(e,t){return this.Cn.add(t),he.resolve()}getCollectionParents(e,t){return he.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return he.resolve()}deleteFieldIndex(e,t){return he.resolve()}deleteAllFieldIndexes(e){return he.resolve()}createTargetIndexes(e,t){return he.resolve()}getDocumentsMatchingTarget(e,t){return he.resolve(null)}getIndexType(e,t){return he.resolve(0)}getFieldIndexes(e,t){return he.resolve([])}getNextCollectionGroupToUpdate(e){return he.resolve(null)}getMinOffset(e,t){return he.resolve(Ks.min())}getMinOffsetFromCollectionGroup(e,t){return he.resolve(Ks.min())}updateCollectionGroup(e,t,r){return he.resolve()}updateIndexEntries(e,t){return he.resolve()}}class S5{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new In(Rt.comparator),a=!i.has(r);return this.index[t]=i.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new In(Rt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pw={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},QC=41943040;class Ar{static withCacheSize(e){return new Ar(e,Ar.DEFAULT_COLLECTION_PERCENTILE,Ar.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ar.DEFAULT_COLLECTION_PERCENTILE=10,Ar.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ar.DEFAULT=new Ar(QC,Ar.DEFAULT_COLLECTION_PERCENTILE,Ar.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ar.DISABLED=new Ar(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xc{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new xc(0)}static cr(){return new xc(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kw="LruGarbageCollector",C5=1048576;function Lw([n,e],[t,r]){const i=et(n,t);return i===0?et(e,r):i}class T5{constructor(e){this.Ir=e,this.buffer=new In(Lw),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();Lw(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class I5{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){we(kw,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Dc(t)?we(kw,"Ignoring IndexedDB error during garbage collection: ",t):await Oc(t)}await this.Vr(3e5)}))}}class N5{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((r=>Math.floor(t/100*r)))}nthSequenceNumber(e,t){if(t===0)return he.resolve(B0.ce);const r=new T5(t);return this.mr.forEachTarget(e,(i=>r.Ar(i.sequenceNumber))).next((()=>this.mr.pr(e,(i=>r.Ar(i))))).next((()=>r.maxValue))}removeTargets(e,t,r){return this.mr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(we("LruGarbageCollector","Garbage collection skipped; disabled"),he.resolve(Pw)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(we("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Pw):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let r,i,a,o,c,u,h;const p=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((g=>(g>this.params.maximumSequenceNumbersToCollect?(we("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${g}`),i=this.params.maximumSequenceNumbersToCollect):i=g,o=Date.now(),this.nthSequenceNumber(e,i)))).next((g=>(r=g,c=Date.now(),this.removeTargets(e,r,t)))).next((g=>(a=g,u=Date.now(),this.removeOrphanedDocuments(e,r)))).next((g=>(h=Date.now(),Jl()<=Je.DEBUG&&we("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-p}ms
	Determined least recently used ${i} in `+(c-o)+`ms
	Removed ${a} targets in `+(u-c)+`ms
	Removed ${g} documents in `+(h-u)+`ms
Total Duration: ${h-p}ms`),he.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:g}))))}}function R5(n,e){return new N5(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O5{constructor(){this.changes=new tl((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,kn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?he.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D5{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M5{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next((i=>(r=i,this.remoteDocumentCache.getEntry(e,t)))).next((i=>(r!==null&&cf(r.mutation,i,Fr.empty(),At.now()),i)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.getLocalViewOfDocuments(e,r,tt()).next((()=>r))))}getLocalViewOfDocuments(e,t,r=tt()){const i=Ho();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,r).next((a=>{let o=Wu();return a.forEach(((c,u)=>{o=o.insert(c,u.overlayedDocument)})),o}))))}getOverlayedDocuments(e,t){const r=Ho();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,tt())))}populateOverlays(e,t,r){const i=[];return r.forEach((a=>{t.has(a)||i.push(a)})),this.documentOverlayCache.getOverlays(e,i).next((a=>{a.forEach(((o,c)=>{t.set(o,c)}))}))}computeViews(e,t,r,i){let a=Xa();const o=lf(),c=(function(){return lf()})();return t.forEach(((u,h)=>{const p=r.get(h.key);i.has(h.key)&&(p===void 0||p.mutation instanceof ao)?a=a.insert(h.key,h):p!==void 0?(o.set(h.key,p.mutation.getFieldMask()),cf(p.mutation,h,p.mutation.getFieldMask(),At.now())):o.set(h.key,Fr.empty())})),this.recalculateAndSaveOverlays(e,a).next((u=>(u.forEach(((h,p)=>o.set(h,p))),t.forEach(((h,p)=>c.set(h,new D5(p,o.get(h)??null)))),c)))}recalculateAndSaveOverlays(e,t){const r=lf();let i=new Yt(((o,c)=>o-c)),a=tt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((o=>{for(const c of o)c.keys().forEach((u=>{const h=t.get(u);if(h===null)return;let p=r.get(u)||Fr.empty();p=c.applyToLocalView(h,p),r.set(u,p);const g=(i.get(c.batchId)||tt()).add(u);i=i.insert(c.batchId,g)}))})).next((()=>{const o=[],c=i.getReverseIterator();for(;c.hasNext();){const u=c.getNext(),h=u.key,p=u.value,g=RC();p.forEach((_=>{if(!a.has(_)){const E=LC(t.get(_),r.get(_));E!==null&&g.set(_,E),a=a.add(_)}})),o.push(this.documentOverlayCache.saveOverlays(e,h,g))}return he.waitFor(o)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,t,r,i){return(function(o){return Re.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):SC(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next((a=>{const o=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-a.size):he.resolve(Ho());let c=yf,u=a;return o.next((h=>he.forEach(h,((p,g)=>(c<g.largestBatchId&&(c=g.largestBatchId),a.get(p)?he.resolve():this.remoteDocumentCache.getEntry(e,p).next((_=>{u=u.insert(p,_)}))))).next((()=>this.populateOverlays(e,h,a))).next((()=>this.computeViews(e,u,h,tt()))).next((p=>({batchId:c,changes:NC(p)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Re(t)).next((r=>{let i=Wu();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i}))}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const a=t.collectionGroup;let o=Wu();return this.indexManager.getCollectionParents(e,a).next((c=>he.forEach(c,(u=>{const h=(function(g,_){return new Mc(_,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)})(t,u.child(a));return this.getDocumentsMatchingCollectionQuery(e,h,r,i).next((p=>{p.forEach(((g,_)=>{o=o.insert(g,_)}))}))})).next((()=>o))))}getDocumentsMatchingCollectionQuery(e,t,r,i){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next((o=>(a=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,a,i)))).next((o=>{a.forEach(((u,h)=>{const p=h.getKey();o.get(p)===null&&(o=o.insert(p,kn.newInvalidDocument(p)))}));let c=Wu();return o.forEach(((u,h)=>{const p=a.get(u);p!==void 0&&cf(p.mutation,h,Fr.empty(),At.now()),z0(t,h)&&(c=c.insert(u,h))})),c}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P5{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return he.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(i){return{id:i.id,version:i.version,createTime:Ur(i.createTime)}})(t)),he.resolve()}getNamedQuery(e,t){return he.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(i){return{name:i.name,query:A5(i.bundledQuery),readTime:Ur(i.readTime)}})(t)),he.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k5{constructor(){this.overlays=new Yt(Re.comparator),this.qr=new Map}getOverlay(e,t){return he.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Ho();return he.forEach(t,(i=>this.getOverlay(e,i).next((a=>{a!==null&&r.set(i,a)})))).next((()=>r))}saveOverlays(e,t,r){return r.forEach(((i,a)=>{this.St(e,t,a)})),he.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.qr.get(r);return i!==void 0&&(i.forEach((a=>this.overlays=this.overlays.remove(a))),this.qr.delete(r)),he.resolve()}getOverlaysForCollection(e,t,r){const i=Ho(),a=t.length+1,o=new Re(t.child("")),c=this.overlays.getIteratorFrom(o);for(;c.hasNext();){const u=c.getNext().value,h=u.getKey();if(!t.isPrefixOf(h.path))break;h.path.length===a&&u.largestBatchId>r&&i.set(u.getKey(),u)}return he.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let a=new Yt(((h,p)=>h-p));const o=this.overlays.getIterator();for(;o.hasNext();){const h=o.getNext().value;if(h.getKey().getCollectionGroup()===t&&h.largestBatchId>r){let p=a.get(h.largestBatchId);p===null&&(p=Ho(),a=a.insert(h.largestBatchId,p)),p.set(h.getKey(),h)}}const c=Ho(),u=a.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach(((h,p)=>c.set(h,p))),!(c.size()>=i)););return he.resolve(c)}St(e,t,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new e5(t,r));let a=this.qr.get(t);a===void 0&&(a=tt(),this.qr.set(t,a)),this.qr.set(t,a.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L5{constructor(){this.sessionToken=er.EMPTY_BYTE_STRING}getSessionToken(e){return he.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,he.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xv{constructor(){this.Qr=new In(Pn.$r),this.Ur=new In(Pn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const r=new Pn(e,t);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,t){e.forEach((r=>this.addReference(r,t)))}removeReference(e,t){this.Gr(new Pn(e,t))}zr(e,t){e.forEach((r=>this.removeReference(r,t)))}jr(e){const t=new Re(new Rt([])),r=new Pn(t,e),i=new Pn(t,e+1),a=[];return this.Ur.forEachInRange([r,i],(o=>{this.Gr(o),a.push(o.key)})),a}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new Re(new Rt([])),r=new Pn(t,e),i=new Pn(t,e+1);let a=tt();return this.Ur.forEachInRange([r,i],(o=>{a=a.add(o.key)})),a}containsKey(e){const t=new Pn(e,0),r=this.Qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class Pn{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return Re.comparator(e.key,t.key)||et(e.Yr,t.Yr)}static Kr(e,t){return et(e.Yr,t.Yr)||Re.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j5{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new In(Pn.$r)}checkEmpty(e){return he.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){const a=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new JD(a,t,r,i);this.mutationQueue.push(o);for(const c of i)this.Zr=this.Zr.add(new Pn(c.key,a)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return he.resolve(o)}lookupMutationBatch(e,t){return he.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=this.ei(r),a=i<0?0:i;return he.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return he.resolve(this.mutationQueue.length===0?Bv:this.tr-1)}getAllMutationBatches(e){return he.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Pn(t,0),i=new Pn(t,Number.POSITIVE_INFINITY),a=[];return this.Zr.forEachInRange([r,i],(o=>{const c=this.Xr(o.Yr);a.push(c)})),he.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new In(et);return t.forEach((i=>{const a=new Pn(i,0),o=new Pn(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([a,o],(c=>{r=r.add(c.Yr)}))})),he.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let a=r;Re.isDocumentKey(a)||(a=a.child(""));const o=new Pn(new Re(a),0);let c=new In(et);return this.Zr.forEachWhile((u=>{const h=u.key.path;return!!r.isPrefixOf(h)&&(h.length===i&&(c=c.add(u.Yr)),!0)}),o),he.resolve(this.ti(c))}ti(e){const t=[];return e.forEach((r=>{const i=this.Xr(r);i!==null&&t.push(i)})),t}removeMutationBatch(e,t){st(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return he.forEach(t.mutations,(i=>{const a=new Pn(i.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,t){const r=new Pn(t,0),i=this.Zr.firstAfterOrEqual(r);return he.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,he.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B5{constructor(e){this.ri=e,this.docs=(function(){return new Yt(Re.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),a=i?i.size:0,o=this.ri(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return he.resolve(r?r.document.mutableCopy():kn.newInvalidDocument(t))}getEntries(e,t){let r=Xa();return t.forEach((i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():kn.newInvalidDocument(i))})),he.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let a=Xa();const o=t.path,c=new Re(o.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(c);for(;u.hasNext();){const{key:h,value:{document:p}}=u.getNext();if(!o.isPrefixOf(h.path))break;h.path.length>o.length+1||pD(dD(p),r)<=0||(i.has(p.key)||z0(t,p))&&(a=a.insert(p.key,p.mutableCopy()))}return he.resolve(a)}getAllFromCollectionGroup(e,t,r,i){ke(9500)}ii(e,t){return he.forEach(this.docs,(r=>t(r)))}newChangeBuffer(e){return new V5(this)}getSize(e){return he.resolve(this.size)}}class V5 extends O5{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((r,i)=>{i.isValidDocument()?t.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)})),he.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F5{constructor(e){this.persistence=e,this.si=new tl((t=>Uv(t)),zv),this.lastRemoteSnapshotVersion=je.min(),this.highestTargetId=0,this.oi=0,this._i=new Xv,this.targetCount=0,this.ai=xc.ur()}forEachTarget(e,t){return this.si.forEach(((r,i)=>t(i))),he.resolve()}getLastRemoteSnapshotVersion(e){return he.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return he.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),he.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.oi&&(this.oi=t),he.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new xc(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,he.resolve()}updateTargetData(e,t){return this.Pr(t),he.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,he.resolve()}removeTargets(e,t,r){let i=0;const a=[];return this.si.forEach(((o,c)=>{c.sequenceNumber<=t&&r.get(c.targetId)===null&&(this.si.delete(o),a.push(this.removeMatchingKeysForTargetId(e,c.targetId)),i++)})),he.waitFor(a).next((()=>i))}getTargetCount(e){return he.resolve(this.targetCount)}getTargetData(e,t){const r=this.si.get(t)||null;return he.resolve(r)}addMatchingKeys(e,t,r){return this._i.Wr(t,r),he.resolve()}removeMatchingKeys(e,t,r){this._i.zr(t,r);const i=this.persistence.referenceDelegate,a=[];return i&&t.forEach((o=>{a.push(i.markPotentiallyOrphaned(e,o))})),he.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),he.resolve()}getMatchingKeysForTargetId(e,t){const r=this._i.Hr(t);return he.resolve(r)}containsKey(e,t){return he.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZC{constructor(e,t){this.ui={},this.overlays={},this.ci=new B0(0),this.li=!1,this.li=!0,this.hi=new L5,this.referenceDelegate=e(this),this.Pi=new F5(this),this.indexManager=new b5,this.remoteDocumentCache=(function(i){return new B5(i)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new w5(t),this.Ii=new P5(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new k5,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ui[e.toKey()];return r||(r=new j5(t,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,r){we("MemoryPersistence","Starting transaction:",e);const i=new U5(this.ci.next());return this.referenceDelegate.Ei(),r(i).next((a=>this.referenceDelegate.di(i).next((()=>a)))).toPromise().then((a=>(i.raiseOnCommittedEvent(),a)))}Ai(e,t){return he.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,t))))}}class U5 extends gD{constructor(e){super(),this.currentSequenceNumber=e}}class Yv{constructor(e){this.persistence=e,this.Ri=new Xv,this.Vi=null}static mi(e){return new Yv(e)}get fi(){if(this.Vi)return this.Vi;throw ke(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.fi.delete(r.toString()),he.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.fi.add(r.toString()),he.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),he.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((i=>this.fi.add(i.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((i=>{i.forEach((a=>this.fi.add(a.toString())))})).next((()=>r.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return he.forEach(this.fi,(r=>{const i=Re.fromPath(r);return this.gi(e,i).next((a=>{a||t.removeEntry(i,je.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((r=>{r?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return he.or([()=>he.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class h0{constructor(e,t){this.persistence=e,this.pi=new tl((r=>_D(r.path)),((r,i)=>r.isEqual(i))),this.garbageCollector=R5(this,t)}static mi(e,t){return new h0(e,t)}Ei(){}di(e){return he.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>t.next((i=>r+i))))}wr(e){let t=0;return this.pr(e,(r=>{t++})).next((()=>t))}pr(e,t){return he.forEach(this.pi,((r,i)=>this.br(e,r,i).next((a=>a?he.resolve():t(i)))))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const i=this.persistence.getRemoteDocumentCache(),a=i.newChangeBuffer();return i.ii(e,(o=>this.br(e,o,t).next((c=>{c||(r++,a.removeEntry(o,je.min()))})))).next((()=>a.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),he.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),he.resolve()}removeReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),he.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),he.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Fd(e.data.value)),t}br(e,t,r){return he.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const i=this.pi.get(t);return he.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kv{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Es=r,this.ds=i}static As(e,t){let r=tt(),i=tt();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new Kv(e,t.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z5{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H5{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return xR()?8:vD(ar())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,i){const a={result:null};return this.ys(e,t).next((o=>{a.result=o})).next((()=>{if(!a.result)return this.ws(e,t,i,r).next((o=>{a.result=o}))})).next((()=>{if(a.result)return;const o=new z5;return this.Ss(e,t,o).next((c=>{if(a.result=c,this.Vs)return this.bs(e,t,o,c.size)}))})).next((()=>a.result))}bs(e,t,r,i){return r.documentReadCount<this.fs?(Jl()<=Je.DEBUG&&we("QueryEngine","SDK will not create cache indexes for query:",ec(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),he.resolve()):(Jl()<=Je.DEBUG&&we("QueryEngine","Query:",ec(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(Jl()<=Je.DEBUG&&we("QueryEngine","The SDK decides to create cache indexes for query:",ec(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ua(t))):he.resolve())}ys(e,t){if(bw(t))return he.resolve(null);let r=ua(t);return this.indexManager.getIndexType(e,r).next((i=>i===0?null:(t.limit!==null&&i===1&&(t=l0(t,null,"F"),r=ua(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next((a=>{const o=tt(...a);return this.ps.getDocuments(e,o).next((c=>this.indexManager.getMinOffset(e,r).next((u=>{const h=this.Ds(t,c);return this.Cs(t,h,o,u.readTime)?this.ys(e,l0(t,null,"F")):this.vs(e,h,t,u)}))))})))))}ws(e,t,r,i){return bw(t)||i.isEqual(je.min())?he.resolve(null):this.ps.getDocuments(e,r).next((a=>{const o=this.Ds(t,a);return this.Cs(t,o,r,i)?he.resolve(null):(Jl()<=Je.DEBUG&&we("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),ec(t)),this.vs(e,o,t,hD(i,yf)).next((c=>c)))}))}Ds(e,t){let r=new In(TC(e));return t.forEach(((i,a)=>{z0(e,a)&&(r=r.add(a))})),r}Cs(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const a=e.limitType==="F"?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Ss(e,t,r){return Jl()<=Je.DEBUG&&we("QueryEngine","Using full collection scan to execute query:",ec(t)),this.ps.getDocumentsMatchingQuery(e,t,Ks.min(),r)}vs(e,t,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next((a=>(t.forEach((o=>{a=a.insert(o.key,o)})),a)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wv="LocalStore",G5=3e8;class q5{constructor(e,t,r,i){this.persistence=e,this.Fs=t,this.serializer=i,this.Ms=new Yt(et),this.xs=new tl((a=>Uv(a)),zv),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new M5(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function $5(n,e,t,r){return new q5(n,e,t,r)}async function JC(n,e){const t=Ve(n);return await t.persistence.runTransaction("Handle user change","readonly",(r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next((a=>(i=a,t.Bs(e),t.mutationQueue.getAllMutationBatches(r)))).next((a=>{const o=[],c=[];let u=tt();for(const h of i){o.push(h.batchId);for(const p of h.mutations)u=u.add(p.key)}for(const h of a){c.push(h.batchId);for(const p of h.mutations)u=u.add(p.key)}return t.localDocuments.getDocuments(r,u).next((h=>({Ls:h,removedBatchIds:o,addedBatchIds:c})))}))}))}function X5(n,e){const t=Ve(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const i=e.batch.keys(),a=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(c,u,h,p){const g=h.batch,_=g.keys();let E=he.resolve();return _.forEach((A=>{E=E.next((()=>p.getEntry(u,A))).next((S=>{const O=h.docVersions.get(A);st(O!==null,48541),S.version.compareTo(O)<0&&(g.applyToRemoteDocument(S,h),S.isValidDocument()&&(S.setReadTime(h.commitVersion),p.addEntry(S)))}))})),E.next((()=>c.mutationQueue.removeMutationBatch(u,g)))})(t,r,e,a).next((()=>a.apply(r))).next((()=>t.mutationQueue.performConsistencyCheck(r))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(c){let u=tt();for(let h=0;h<c.mutationResults.length;++h)c.mutationResults[h].transformResults.length>0&&(u=u.add(c.batch.mutations[h].key));return u})(e)))).next((()=>t.localDocuments.getDocuments(r,i)))}))}function eT(n){const e=Ve(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function Y5(n,e){const t=Ve(n),r=e.snapshotVersion;let i=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(a=>{const o=t.Ns.newChangeBuffer({trackRemovals:!0});i=t.Ms;const c=[];e.targetChanges.forEach(((p,g)=>{const _=i.get(g);if(!_)return;c.push(t.Pi.removeMatchingKeys(a,p.removedDocuments,g).next((()=>t.Pi.addMatchingKeys(a,p.addedDocuments,g))));let E=_.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(g)!==null?E=E.withResumeToken(er.EMPTY_BYTE_STRING,je.min()).withLastLimboFreeSnapshotVersion(je.min()):p.resumeToken.approximateByteSize()>0&&(E=E.withResumeToken(p.resumeToken,r)),i=i.insert(g,E),(function(S,O,T){return S.resumeToken.approximateByteSize()===0||O.snapshotVersion.toMicroseconds()-S.snapshotVersion.toMicroseconds()>=G5?!0:T.addedDocuments.size+T.modifiedDocuments.size+T.removedDocuments.size>0})(_,E,p)&&c.push(t.Pi.updateTargetData(a,E))}));let u=Xa(),h=tt();if(e.documentUpdates.forEach((p=>{e.resolvedLimboDocuments.has(p)&&c.push(t.persistence.referenceDelegate.updateLimboDocument(a,p))})),c.push(K5(a,o,e.documentUpdates).next((p=>{u=p.ks,h=p.qs}))),!r.isEqual(je.min())){const p=t.Pi.getLastRemoteSnapshotVersion(a).next((g=>t.Pi.setTargetsMetadata(a,a.currentSequenceNumber,r)));c.push(p)}return he.waitFor(c).next((()=>o.apply(a))).next((()=>t.localDocuments.getLocalViewOfDocuments(a,u,h))).next((()=>u))})).then((a=>(t.Ms=i,a)))}function K5(n,e,t){let r=tt(),i=tt();return t.forEach((a=>r=r.add(a))),e.getEntries(n,r).next((a=>{let o=Xa();return t.forEach(((c,u)=>{const h=a.get(c);u.isFoundDocument()!==h.isFoundDocument()&&(i=i.add(c)),u.isNoDocument()&&u.version.isEqual(je.min())?(e.removeEntry(c,u.readTime),o=o.insert(c,u)):!h.isValidDocument()||u.version.compareTo(h.version)>0||u.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(u),o=o.insert(c,u)):we(Wv,"Ignoring outdated watch update for ",c,". Current version:",h.version," Watch version:",u.version)})),{ks:o,qs:i}}))}function W5(n,e){const t=Ve(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=Bv),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function Q5(n,e){const t=Ve(n);return t.persistence.runTransaction("Allocate target","readwrite",(r=>{let i;return t.Pi.getTargetData(r,e).next((a=>a?(i=a,he.resolve(i)):t.Pi.allocateTargetId(r).next((o=>(i=new js(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.Pi.addTargetData(r,i).next((()=>i)))))))})).then((r=>{const i=t.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(r.targetId,r),t.xs.set(e,r.targetId)),r}))}async function jg(n,e,t){const r=Ve(n),i=r.Ms.get(e),a=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",a,(o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!Dc(o))throw o;we(Wv,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)}function jw(n,e,t){const r=Ve(n);let i=je.min(),a=tt();return r.persistence.runTransaction("Execute query","readwrite",(o=>(function(u,h,p){const g=Ve(u),_=g.xs.get(p);return _!==void 0?he.resolve(g.Ms.get(_)):g.Pi.getTargetData(h,p)})(r,o,ua(e)).next((c=>{if(c)return i=c.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(o,c.targetId).next((u=>{a=u}))})).next((()=>r.Fs.getDocumentsMatchingQuery(o,e,t?i:je.min(),t?a:tt()))).next((c=>(Z5(r,BD(e),c),{documents:c,Qs:a})))))}function Z5(n,e,t){let r=n.Os.get(e)||je.min();t.forEach(((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)})),n.Os.set(e,r)}class Bw{constructor(){this.activeTargetIds=GD()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class J5{constructor(){this.Mo=new Bw,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,r){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Bw,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eM{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vw="ConnectivityMonitor";class Fw{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){we(Vw,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){we(Vw,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ad=null;function Bg(){return Ad===null?Ad=(function(){return 268435456+Math.round(2147483648*Math.random())})():Ad++,"0x"+Ad.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tm="RestConnection",tM={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class nM{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===a0?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,t,r,i,a){const o=Bg(),c=this.zo(e,t.toUriEncodedString());we(Tm,`Sending RPC '${e}' ${o}:`,c,r);const u={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(u,i,a);const{host:h}=new URL(c),p=Tc(h);return this.Jo(e,c,u,r,p).then((g=>(we(Tm,`Received RPC '${e}' ${o}: `,g),g)),(g=>{throw gc(Tm,`RPC '${e}' ${o} failed with error: `,g,"url: ",c,"request:",r),g}))}Ho(e,t,r,i,a,o){return this.Go(e,t,r,i,a)}jo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Rc})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((i,a)=>e[a]=i)),r&&r.headers.forEach(((i,a)=>e[a]=i))}zo(e,t){const r=tM[e];return`${this.Uo}/v1/${t}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rM{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nr="WebChannelConnection";class iM extends nM{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,i,a){const o=Bg();return new Promise(((c,u)=>{const h=new eC;h.setWithCredentials(!0),h.listenOnce(tC.COMPLETE,(()=>{try{switch(h.getLastErrorCode()){case Vd.NO_ERROR:const g=h.getResponseJson();we(nr,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(g)),c(g);break;case Vd.TIMEOUT:we(nr,`RPC '${e}' ${o} timed out`),u(new xe(le.DEADLINE_EXCEEDED,"Request time out"));break;case Vd.HTTP_ERROR:const _=h.getStatus();if(we(nr,`RPC '${e}' ${o} failed with status:`,_,"response text:",h.getResponseText()),_>0){let E=h.getResponseJson();Array.isArray(E)&&(E=E[0]);const A=E?.error;if(A&&A.status&&A.message){const S=(function(T){const R=T.toLowerCase().replace(/_/g,"-");return Object.values(le).indexOf(R)>=0?R:le.UNKNOWN})(A.status);u(new xe(S,A.message))}else u(new xe(le.UNKNOWN,"Server responded with status "+h.getStatus()))}else u(new xe(le.UNAVAILABLE,"Connection failed."));break;default:ke(9055,{l_:e,streamId:o,h_:h.getLastErrorCode(),P_:h.getLastError()})}}finally{we(nr,`RPC '${e}' ${o} completed.`)}}));const p=JSON.stringify(i);we(nr,`RPC '${e}' ${o} sending request:`,i),h.send(t,"POST",p,r,15)}))}T_(e,t,r){const i=Bg(),a=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=iC(),c=rC(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(u.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(u.useFetchStreams=!0),this.jo(u.initMessageHeaders,t,r),u.encodeInitMessageHeaders=!0;const p=a.join("");we(nr,`Creating RPC '${e}' stream ${i}: ${p}`,u);const g=o.createWebChannel(p,u);this.I_(g);let _=!1,E=!1;const A=new rM({Yo:O=>{E?we(nr,`Not sending because RPC '${e}' stream ${i} is closed:`,O):(_||(we(nr,`Opening RPC '${e}' stream ${i} transport.`),g.open(),_=!0),we(nr,`RPC '${e}' stream ${i} sending:`,O),g.send(O))},Zo:()=>g.close()}),S=(O,T,R)=>{O.listen(T,(L=>{try{R(L)}catch(z){setTimeout((()=>{throw z}),0)}}))};return S(g,Ku.EventType.OPEN,(()=>{E||(we(nr,`RPC '${e}' stream ${i} transport opened.`),A.o_())})),S(g,Ku.EventType.CLOSE,(()=>{E||(E=!0,we(nr,`RPC '${e}' stream ${i} transport closed`),A.a_(),this.E_(g))})),S(g,Ku.EventType.ERROR,(O=>{E||(E=!0,gc(nr,`RPC '${e}' stream ${i} transport errored. Name:`,O.name,"Message:",O.message),A.a_(new xe(le.UNAVAILABLE,"The operation could not be completed")))})),S(g,Ku.EventType.MESSAGE,(O=>{if(!E){const T=O.data[0];st(!!T,16349);const R=T,L=R?.error||R[0]?.error;if(L){we(nr,`RPC '${e}' stream ${i} received error:`,L);const z=L.status;let U=(function(w){const I=vn[w];if(I!==void 0)return FC(I)})(z),G=L.message;U===void 0&&(U=le.INTERNAL,G="Unknown error status: "+z+" with message "+L.message),E=!0,A.a_(new xe(U,G)),g.close()}else we(nr,`RPC '${e}' stream ${i} received:`,T),A.u_(T)}})),S(c,nC.STAT_EVENT,(O=>{O.stat===Tg.PROXY?we(nr,`RPC '${e}' stream ${i} detected buffering proxy`):O.stat===Tg.NOPROXY&&we(nr,`RPC '${e}' stream ${i} detected no buffering proxy`)})),setTimeout((()=>{A.__()}),0),A}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function Im(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X0(n){return new l5(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qv{constructor(e,t,r=1e3,i=1.5,a=6e4){this.Mi=e,this.timerId=t,this.d_=r,this.A_=i,this.R_=a,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,t-r);i>0&&we("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uw="PersistentStream";class tT{constructor(e,t,r,i,a,o,c,u){this.Mi=e,this.S_=r,this.b_=i,this.connection=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=c,this.listener=u,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Qv(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===le.RESOURCE_EXHAUSTED?($a(t.toString()),$a("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===le.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,i])=>{this.D_===t&&this.G_(r,i)}),(r=>{e((()=>{const i=new xe(le.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)}))}))}G_(e,t){const r=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((i=>{r((()=>this.z_(i)))})),this.stream.onMessage((i=>{r((()=>++this.F_==1?this.J_(i):this.onNext(i)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return we(Uw,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(we(Uw,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class aM extends tT{constructor(e,t,r,i,a,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,o),this.serializer=a}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=h5(this.serializer,e),r=(function(a){if(!("targetChange"in a))return je.min();const o=a.targetChange;return o.targetIds&&o.targetIds.length?je.min():o.readTime?Ur(o.readTime):je.min()})(e);return this.listener.H_(t,r)}Y_(e){const t={};t.database=Lg(this.serializer),t.addTarget=(function(a,o){let c;const u=o.target;if(c=Dg(u)?{documents:p5(a,u)}:{query:m5(a,u).ft},c.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){c.resumeToken=HC(a,o.resumeToken);const h=Pg(a,o.expectedCount);h!==null&&(c.expectedCount=h)}else if(o.snapshotVersion.compareTo(je.min())>0){c.readTime=u0(a,o.snapshotVersion.toTimestamp());const h=Pg(a,o.expectedCount);h!==null&&(c.expectedCount=h)}return c})(this.serializer,e);const r=v5(this.serializer,e);r&&(t.labels=r),this.q_(t)}Z_(e){const t={};t.database=Lg(this.serializer),t.removeTarget=e,this.q_(t)}}class sM extends tT{constructor(e,t,r,i,a,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,o),this.serializer=a}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return st(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,st(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){st(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=d5(e.writeResults,e.commitTime),r=Ur(e.commitTime);return this.listener.na(r,t)}ra(){const e={};e.database=Lg(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((r=>XC(this.serializer,r)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oM{}class lM extends oM{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new xe(le.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,o])=>this.connection.Go(e,kg(t,r),i,a,o))).catch((a=>{throw a.name==="FirebaseError"?(a.code===le.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new xe(le.UNKNOWN,a.toString())}))}Ho(e,t,r,i,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,c])=>this.connection.Ho(e,kg(t,r),i,o,c,a))).catch((o=>{throw o.name==="FirebaseError"?(o.code===le.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new xe(le.UNKNOWN,o.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class cM{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?($a(t),this.aa=!1):we("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zo="RemoteStore";class uM{constructor(e,t,r,i,a){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=a,this.Aa.Oo((o=>{r.enqueueAndForget((async()=>{nl(this)&&(we(Zo,"Restarting streams for network reachability change."),await(async function(u){const h=Ve(u);h.Ea.add(4),await Vf(h),h.Ra.set("Unknown"),h.Ea.delete(4),await Y0(h)})(this))}))})),this.Ra=new cM(r,i)}}async function Y0(n){if(nl(n))for(const e of n.da)await e(!0)}async function Vf(n){for(const e of n.da)await e(!1)}function nT(n,e){const t=Ve(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),ty(t)?ey(t):Pc(t).O_()&&Jv(t,e))}function Zv(n,e){const t=Ve(n),r=Pc(t);t.Ia.delete(e),r.O_()&&rT(t,e),t.Ia.size===0&&(r.O_()?r.L_():nl(t)&&t.Ra.set("Unknown"))}function Jv(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(je.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Pc(n).Y_(e)}function rT(n,e){n.Va.Ue(e),Pc(n).Z_(e)}function ey(n){n.Va=new i5({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),Pc(n).start(),n.Ra.ua()}function ty(n){return nl(n)&&!Pc(n).x_()&&n.Ia.size>0}function nl(n){return Ve(n).Ea.size===0}function iT(n){n.Va=void 0}async function fM(n){n.Ra.set("Online")}async function hM(n){n.Ia.forEach(((e,t)=>{Jv(n,e)}))}async function dM(n,e){iT(n),ty(n)?(n.Ra.ha(e),ey(n)):n.Ra.set("Unknown")}async function pM(n,e,t){if(n.Ra.set("Online"),e instanceof zC&&e.state===2&&e.cause)try{await(async function(i,a){const o=a.cause;for(const c of a.targetIds)i.Ia.has(c)&&(await i.remoteSyncer.rejectListen(c,o),i.Ia.delete(c),i.Va.removeTarget(c))})(n,e)}catch(r){we(Zo,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await d0(n,r)}else if(e instanceof Hd?n.Va.Ze(e):e instanceof UC?n.Va.st(e):n.Va.tt(e),!t.isEqual(je.min()))try{const r=await eT(n.localStore);t.compareTo(r)>=0&&await(function(a,o){const c=a.Va.Tt(o);return c.targetChanges.forEach(((u,h)=>{if(u.resumeToken.approximateByteSize()>0){const p=a.Ia.get(h);p&&a.Ia.set(h,p.withResumeToken(u.resumeToken,o))}})),c.targetMismatches.forEach(((u,h)=>{const p=a.Ia.get(u);if(!p)return;a.Ia.set(u,p.withResumeToken(er.EMPTY_BYTE_STRING,p.snapshotVersion)),rT(a,u);const g=new js(p.target,u,h,p.sequenceNumber);Jv(a,g)})),a.remoteSyncer.applyRemoteEvent(c)})(n,t)}catch(r){we(Zo,"Failed to raise snapshot:",r),await d0(n,r)}}async function d0(n,e,t){if(!Dc(e))throw e;n.Ea.add(1),await Vf(n),n.Ra.set("Offline"),t||(t=()=>eT(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{we(Zo,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await Y0(n)}))}function aT(n,e){return e().catch((t=>d0(n,t,e)))}async function K0(n){const e=Ve(n),t=Js(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Bv;for(;mM(e);)try{const i=await W5(e.localStore,r);if(i===null){e.Ta.length===0&&t.L_();break}r=i.batchId,gM(e,i)}catch(i){await d0(e,i)}sT(e)&&oT(e)}function mM(n){return nl(n)&&n.Ta.length<10}function gM(n,e){n.Ta.push(e);const t=Js(n);t.O_()&&t.X_&&t.ea(e.mutations)}function sT(n){return nl(n)&&!Js(n).x_()&&n.Ta.length>0}function oT(n){Js(n).start()}async function vM(n){Js(n).ra()}async function yM(n){const e=Js(n);for(const t of n.Ta)e.ea(t.mutations)}async function _M(n,e,t){const r=n.Ta.shift(),i=Gv.from(r,e,t);await aT(n,(()=>n.remoteSyncer.applySuccessfulWrite(i))),await K0(n)}async function xM(n,e){e&&Js(n).X_&&await(async function(r,i){if((function(o){return VC(o)&&o!==le.ABORTED})(i.code)){const a=r.Ta.shift();Js(r).B_(),await aT(r,(()=>r.remoteSyncer.rejectFailedWrite(a.batchId,i))),await K0(r)}})(n,e),sT(n)&&oT(n)}async function zw(n,e){const t=Ve(n);t.asyncQueue.verifyOperationInProgress(),we(Zo,"RemoteStore received new credentials");const r=nl(t);t.Ea.add(3),await Vf(t),r&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Y0(t)}async function EM(n,e){const t=Ve(n);e?(t.Ea.delete(2),await Y0(t)):e||(t.Ea.add(2),await Vf(t),t.Ra.set("Unknown"))}function Pc(n){return n.ma||(n.ma=(function(t,r,i){const a=Ve(t);return a.sa(),new aM(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)})(n.datastore,n.asyncQueue,{Xo:fM.bind(null,n),t_:hM.bind(null,n),r_:dM.bind(null,n),H_:pM.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),ty(n)?ey(n):n.Ra.set("Unknown")):(await n.ma.stop(),iT(n))}))),n.ma}function Js(n){return n.fa||(n.fa=(function(t,r,i){const a=Ve(t);return a.sa(),new sM(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:vM.bind(null,n),r_:xM.bind(null,n),ta:yM.bind(null,n),na:_M.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await K0(n)):(await n.fa.stop(),n.Ta.length>0&&(we(Zo,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ny{constructor(e,t,r,i,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new ca,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((o=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,a){const o=Date.now()+r,c=new ny(e,t,o,i,a);return c.start(r),c}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new xe(le.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ry(n,e){if($a("AsyncQueue",`${e}: ${n}`),Dc(n))return new xe(le.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dc{static emptySet(e){return new dc(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||Re.comparator(t.key,r.key):(t,r)=>Re.comparator(t.key,r.key),this.keyedMap=Wu(),this.sortedSet=new Yt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,r)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof dc)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new dc;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hw{constructor(){this.ga=new Yt(Re.comparator)}track(e){const t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):ke(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,r)=>{e.push(r)})),e}}class Ec{constructor(e,t,r,i,a,o,c,u,h){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=c,this.excludesMetadataChanges=u,this.hasCachedResults=h}static fromInitialDocuments(e,t,r,i,a){const o=[];return t.forEach((c=>{o.push({type:0,doc:c})})),new Ec(e,t,dc.emptySet(t),o,r,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&U0(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wM{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class AM{constructor(){this.queries=Gw(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){const i=Ve(t),a=i.queries;i.queries=Gw(),a.forEach(((o,c)=>{for(const u of c.Sa)u.onError(r)}))})(this,new xe(le.ABORTED,"Firestore shutting down"))}}function Gw(){return new tl((n=>CC(n)),U0)}async function iy(n,e){const t=Ve(n);let r=3;const i=e.query;let a=t.queries.get(i);a?!a.ba()&&e.Da()&&(r=2):(a=new wM,r=e.Da()?0:1);try{switch(r){case 0:a.wa=await t.onListen(i,!0);break;case 1:a.wa=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(o){const c=ry(o,`Initialization of query '${ec(e.query)}' failed`);return void e.onError(c)}t.queries.set(i,a),a.Sa.push(e),e.va(t.onlineState),a.wa&&e.Fa(a.wa)&&sy(t)}async function ay(n,e){const t=Ve(n),r=e.query;let i=3;const a=t.queries.get(r);if(a){const o=a.Sa.indexOf(e);o>=0&&(a.Sa.splice(o,1),a.Sa.length===0?i=e.Da()?0:1:!a.ba()&&e.Da()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function bM(n,e){const t=Ve(n);let r=!1;for(const i of e){const a=i.query,o=t.queries.get(a);if(o){for(const c of o.Sa)c.Fa(i)&&(r=!0);o.wa=i}}r&&sy(t)}function SM(n,e,t){const r=Ve(n),i=r.queries.get(e);if(i)for(const a of i.Sa)a.onError(t);r.queries.delete(e)}function sy(n){n.Ca.forEach((e=>{e.next()}))}var Vg,qw;(qw=Vg||(Vg={})).Ma="default",qw.Cache="cache";class oy{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Ec(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const r=t!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Ec.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Vg.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lT{constructor(e){this.key=e}}class cT{constructor(e){this.key=e}}class CM{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=tt(),this.mutatedKeys=tt(),this.eu=TC(e),this.tu=new dc(this.eu)}get nu(){return this.Ya}ru(e,t){const r=t?t.iu:new Hw,i=t?t.tu:this.tu;let a=t?t.mutatedKeys:this.mutatedKeys,o=i,c=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,h=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal(((p,g)=>{const _=i.get(p),E=z0(this.query,g)?g:null,A=!!_&&this.mutatedKeys.has(_.key),S=!!E&&(E.hasLocalMutations||this.mutatedKeys.has(E.key)&&E.hasCommittedMutations);let O=!1;_&&E?_.data.isEqual(E.data)?A!==S&&(r.track({type:3,doc:E}),O=!0):this.su(_,E)||(r.track({type:2,doc:E}),O=!0,(u&&this.eu(E,u)>0||h&&this.eu(E,h)<0)&&(c=!0)):!_&&E?(r.track({type:0,doc:E}),O=!0):_&&!E&&(r.track({type:1,doc:_}),O=!0,(u||h)&&(c=!0)),O&&(E?(o=o.add(E),a=S?a.add(p):a.delete(p)):(o=o.delete(p),a=a.delete(p)))})),this.query.limit!==null)for(;o.size>this.query.limit;){const p=this.query.limitType==="F"?o.last():o.first();o=o.delete(p.key),a=a.delete(p.key),r.track({type:1,doc:p})}return{tu:o,iu:r,Cs:c,mutatedKeys:a}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const a=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort(((p,g)=>(function(E,A){const S=O=>{switch(O){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ke(20277,{Rt:O})}};return S(E)-S(A)})(p.type,g.type)||this.eu(p.doc,g.doc))),this.ou(r),i=i??!1;const c=t&&!i?this._u():[],u=this.Xa.size===0&&this.current&&!i?1:0,h=u!==this.Za;return this.Za=u,o.length!==0||h?{snapshot:new Ec(this.query,e.tu,a,o,e.mutatedKeys,u===0,h,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:c}:{au:c}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Hw,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=tt(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const t=[];return e.forEach((r=>{this.Xa.has(r)||t.push(new cT(r))})),this.Xa.forEach((r=>{e.has(r)||t.push(new lT(r))})),t}cu(e){this.Ya=e.Qs,this.Xa=tt();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Ec.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const ly="SyncEngine";class TM{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class IM{constructor(e){this.key=e,this.hu=!1}}class NM{constructor(e,t,r,i,a,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new tl((c=>CC(c)),U0),this.Iu=new Map,this.Eu=new Set,this.du=new Yt(Re.comparator),this.Au=new Map,this.Ru=new Xv,this.Vu={},this.mu=new Map,this.fu=xc.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function RM(n,e,t=!0){const r=mT(n);let i;const a=r.Tu.get(e);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),i=a.view.lu()):i=await uT(r,e,t,!0),i}async function OM(n,e){const t=mT(n);await uT(t,e,!0,!1)}async function uT(n,e,t,r){const i=await Q5(n.localStore,ua(e)),a=i.targetId,o=n.sharedClientState.addLocalQueryTarget(a,t);let c;return r&&(c=await DM(n,e,a,o==="current",i.resumeToken)),n.isPrimaryClient&&t&&nT(n.remoteStore,i),c}async function DM(n,e,t,r,i){n.pu=(g,_,E)=>(async function(S,O,T,R){let L=O.view.ru(T);L.Cs&&(L=await jw(S.localStore,O.query,!1).then((({documents:D})=>O.view.ru(D,L))));const z=R&&R.targetChanges.get(O.targetId),U=R&&R.targetMismatches.get(O.targetId)!=null,G=O.view.applyChanges(L,S.isPrimaryClient,z,U);return Xw(S,O.targetId,G.au),G.snapshot})(n,g,_,E);const a=await jw(n.localStore,e,!0),o=new CM(e,a.Qs),c=o.ru(a.documents),u=Bf.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),h=o.applyChanges(c,n.isPrimaryClient,u);Xw(n,t,h.au);const p=new TM(e,t,o);return n.Tu.set(e,p),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),h.snapshot}async function MM(n,e,t){const r=Ve(n),i=r.Tu.get(e),a=r.Iu.get(i.targetId);if(a.length>1)return r.Iu.set(i.targetId,a.filter((o=>!U0(o,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await jg(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),t&&Zv(r.remoteStore,i.targetId),Fg(r,i.targetId)})).catch(Oc)):(Fg(r,i.targetId),await jg(r.localStore,i.targetId,!0))}async function PM(n,e){const t=Ve(n),r=t.Tu.get(e),i=t.Iu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Zv(t.remoteStore,r.targetId))}async function kM(n,e,t){const r=zM(n);try{const i=await(function(o,c){const u=Ve(o),h=At.now(),p=c.reduce(((E,A)=>E.add(A.key)),tt());let g,_;return u.persistence.runTransaction("Locally write mutations","readwrite",(E=>{let A=Xa(),S=tt();return u.Ns.getEntries(E,p).next((O=>{A=O,A.forEach(((T,R)=>{R.isValidDocument()||(S=S.add(T))}))})).next((()=>u.localDocuments.getOverlayedDocuments(E,A))).next((O=>{g=O;const T=[];for(const R of c){const L=ZD(R,g.get(R.key).overlayedDocument);L!=null&&T.push(new ao(R.key,L,yC(L.value.mapValue),Qn.exists(!0)))}return u.mutationQueue.addMutationBatch(E,h,T,c)})).next((O=>{_=O;const T=O.applyToLocalDocumentSet(g,S);return u.documentOverlayCache.saveOverlays(E,O.batchId,T)}))})).then((()=>({batchId:_.batchId,changes:NC(g)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(o,c,u){let h=o.Vu[o.currentUser.toKey()];h||(h=new Yt(et)),h=h.insert(c,u),o.Vu[o.currentUser.toKey()]=h})(r,i.batchId,t),await Ff(r,i.changes),await K0(r.remoteStore)}catch(i){const a=ry(i,"Failed to persist write");t.reject(a)}}async function fT(n,e){const t=Ve(n);try{const r=await Y5(t.localStore,e);e.targetChanges.forEach(((i,a)=>{const o=t.Au.get(a);o&&(st(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?o.hu=!0:i.modifiedDocuments.size>0?st(o.hu,14607):i.removedDocuments.size>0&&(st(o.hu,42227),o.hu=!1))})),await Ff(t,r,e)}catch(r){await Oc(r)}}function $w(n,e,t){const r=Ve(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const i=[];r.Tu.forEach(((a,o)=>{const c=o.view.va(e);c.snapshot&&i.push(c.snapshot)})),(function(o,c){const u=Ve(o);u.onlineState=c;let h=!1;u.queries.forEach(((p,g)=>{for(const _ of g.Sa)_.va(c)&&(h=!0)})),h&&sy(u)})(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function LM(n,e,t){const r=Ve(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Au.get(e),a=i&&i.key;if(a){let o=new Yt(Re.comparator);o=o.insert(a,kn.newNoDocument(a,je.min()));const c=tt().add(a),u=new $0(je.min(),new Map,new Yt(et),o,c);await fT(r,u),r.du=r.du.remove(a),r.Au.delete(e),cy(r)}else await jg(r.localStore,e,!1).then((()=>Fg(r,e,t))).catch(Oc)}async function jM(n,e){const t=Ve(n),r=e.batch.batchId;try{const i=await X5(t.localStore,e);dT(t,r,null),hT(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await Ff(t,i)}catch(i){await Oc(i)}}async function BM(n,e,t){const r=Ve(n);try{const i=await(function(o,c){const u=Ve(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",(h=>{let p;return u.mutationQueue.lookupMutationBatch(h,c).next((g=>(st(g!==null,37113),p=g.keys(),u.mutationQueue.removeMutationBatch(h,g)))).next((()=>u.mutationQueue.performConsistencyCheck(h))).next((()=>u.documentOverlayCache.removeOverlaysForBatchId(h,p,c))).next((()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,p))).next((()=>u.localDocuments.getDocuments(h,p)))}))})(r.localStore,e);dT(r,e,t),hT(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await Ff(r,i)}catch(i){await Oc(i)}}function hT(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function dT(n,e,t){const r=Ve(n);let i=r.Vu[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(t?a.reject(t):a.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function Fg(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Iu.get(e))n.Tu.delete(r),t&&n.Pu.yu(r,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((r=>{n.Ru.containsKey(r)||pT(n,r)}))}function pT(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(Zv(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),cy(n))}function Xw(n,e,t){for(const r of t)r instanceof lT?(n.Ru.addReference(r.key,e),VM(n,r)):r instanceof cT?(we(ly,"Document no longer in limbo: "+r.key),n.Ru.removeReference(r.key,e),n.Ru.containsKey(r.key)||pT(n,r.key)):ke(19791,{wu:r})}function VM(n,e){const t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Eu.has(r)||(we(ly,"New document in limbo: "+t),n.Eu.add(r),cy(n))}function cy(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new Re(Rt.fromString(e)),r=n.fu.next();n.Au.set(r,new IM(t)),n.du=n.du.insert(t,r),nT(n.remoteStore,new js(ua(F0(t.path)),r,"TargetPurposeLimboResolution",B0.ce))}}async function Ff(n,e,t){const r=Ve(n),i=[],a=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach(((c,u)=>{o.push(r.pu(u,e,t).then((h=>{if((h||t)&&r.isPrimaryClient){const p=h?!h.fromCache:t?.targetChanges.get(u.targetId)?.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(h){i.push(h);const p=Kv.As(u.targetId,h);a.push(p)}})))})),await Promise.all(o),r.Pu.H_(i),await(async function(u,h){const p=Ve(u);try{await p.persistence.runTransaction("notifyLocalViewChanges","readwrite",(g=>he.forEach(h,(_=>he.forEach(_.Es,(E=>p.persistence.referenceDelegate.addReference(g,_.targetId,E))).next((()=>he.forEach(_.ds,(E=>p.persistence.referenceDelegate.removeReference(g,_.targetId,E)))))))))}catch(g){if(!Dc(g))throw g;we(Wv,"Failed to update sequence numbers: "+g)}for(const g of h){const _=g.targetId;if(!g.fromCache){const E=p.Ms.get(_),A=E.snapshotVersion,S=E.withLastLimboFreeSnapshotVersion(A);p.Ms=p.Ms.insert(_,S)}}})(r.localStore,a))}async function FM(n,e){const t=Ve(n);if(!t.currentUser.isEqual(e)){we(ly,"User change. New user:",e.toKey());const r=await JC(t.localStore,e);t.currentUser=e,(function(a,o){a.mu.forEach((c=>{c.forEach((u=>{u.reject(new xe(le.CANCELLED,o))}))})),a.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Ff(t,r.Ls)}}function UM(n,e){const t=Ve(n),r=t.Au.get(e);if(r&&r.hu)return tt().add(r.key);{let i=tt();const a=t.Iu.get(e);if(!a)return i;for(const o of a){const c=t.Tu.get(o);i=i.unionWith(c.view.nu)}return i}}function mT(n){const e=Ve(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=fT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=UM.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=LM.bind(null,e),e.Pu.H_=bM.bind(null,e.eventManager),e.Pu.yu=SM.bind(null,e.eventManager),e}function zM(n){const e=Ve(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=jM.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=BM.bind(null,e),e}class p0{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=X0(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return $5(this.persistence,new H5,e.initialUser,this.serializer)}Cu(e){return new ZC(Yv.mi,this.serializer)}Du(e){return new J5}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}p0.provider={build:()=>new p0};class HM extends p0{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){st(this.persistence.referenceDelegate instanceof h0,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new I5(r,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Ar.withCacheSize(this.cacheSizeBytes):Ar.DEFAULT;return new ZC((r=>h0.mi(r,t)),this.serializer)}}class Ug{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>$w(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=FM.bind(null,this.syncEngine),await EM(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new AM})()}createDatastore(e){const t=X0(e.databaseInfo.databaseId),r=(function(a){return new iM(a)})(e.databaseInfo);return(function(a,o,c,u){return new lM(a,o,c,u)})(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return(function(r,i,a,o,c){return new uM(r,i,a,o,c)})(this.localStore,this.datastore,e.asyncQueue,(t=>$w(this.syncEngine,t,0)),(function(){return Fw.v()?new Fw:new eM})())}createSyncEngine(e,t){return(function(i,a,o,c,u,h,p){const g=new NM(i,a,o,c,u,h);return p&&(g.gu=!0),g})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const r=Ve(t);we(Zo,"RemoteStore shutting down."),r.Ea.add(5),await Vf(r),r.Aa.shutdown(),r.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Ug.provider={build:()=>new Ug};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uy{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):$a("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GM{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new xe(le.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await(async function(i,a){const o=Ve(i),c={documents:a.map((g=>f0(o.serializer,g)))},u=await o.Ho("BatchGetDocuments",o.serializer.databaseId,Rt.emptyPath(),c,a.length),h=new Map;u.forEach((g=>{const _=f5(o.serializer,g);h.set(_.key.toString(),_)}));const p=[];return a.forEach((g=>{const _=h.get(g.toString());st(!!_,55234,{key:g}),p.push(_)})),p})(this.datastore,e);return t.forEach((r=>this.recordVersion(r))),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new q0(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((t=>{e.delete(t.key.toString())})),e.forEach(((t,r)=>{const i=Re.fromPath(r);this.mutations.push(new BC(i,this.precondition(i)))})),await(async function(r,i){const a=Ve(r),o={writes:i.map((c=>XC(a.serializer,c)))};await a.Go("Commit",a.serializer.databaseId,Rt.emptyPath(),o)})(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw ke(50498,{Gu:e.constructor.name});t=je.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new xe(le.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(je.min())?Qn.exists(!1):Qn.updateTime(t):Qn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(je.min()))throw new xe(le.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Qn.updateTime(t)}return Qn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qM{constructor(e,t,r,i,a){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=a,this.zu=r.maxAttempts,this.M_=new Qv(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Ju()}Ju(){this.M_.p_((async()=>{const e=new GM(this.datastore),t=this.Hu(e);t&&t.then((r=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(r)})).catch((i=>{this.Yu(i)}))))})).catch((r=>{this.Yu(r)}))}))}Hu(e){try{const t=this.updateFunction(e);return!Lf(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Yu(e){this.zu>0&&this.Zu(e)?(this.zu-=1,this.asyncQueue.enqueueAndForget((()=>(this.Ju(),Promise.resolve())))):this.deferred.reject(e)}Zu(e){if(e?.name==="FirebaseError"){const t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!VC(t)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eo="FirestoreClient";class $M{constructor(e,t,r,i,a){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=ir.UNAUTHENTICATED,this.clientId=jv.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,(async o=>{we(eo,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(r,(o=>(we(eo,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ca;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=ry(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function Nm(n,e){n.asyncQueue.verifyOperationInProgress(),we(eo,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener((async i=>{r.isEqual(i)||(await JC(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function Yw(n,e){n.asyncQueue.verifyOperationInProgress();const t=await XM(n);we(eo,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((r=>zw(e.remoteStore,r))),n.setAppCheckTokenChangeListener(((r,i)=>zw(e.remoteStore,i))),n._onlineComponents=e}async function XM(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){we(eo,"Using user provided OfflineComponentProvider");try{await Nm(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(i){return i.name==="FirebaseError"?i.code===le.FAILED_PRECONDITION||i.code===le.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(t))throw t;gc("Error using user provided cache. Falling back to memory cache: "+t),await Nm(n,new p0)}}else we(eo,"Using default OfflineComponentProvider"),await Nm(n,new HM(void 0));return n._offlineComponents}async function fy(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(we(eo,"Using user provided OnlineComponentProvider"),await Yw(n,n._uninitializedComponentsProvider._online)):(we(eo,"Using default OnlineComponentProvider"),await Yw(n,new Ug))),n._onlineComponents}function YM(n){return fy(n).then((e=>e.syncEngine))}function KM(n){return fy(n).then((e=>e.datastore))}async function m0(n){const e=await fy(n),t=e.eventManager;return t.onListen=RM.bind(null,e.syncEngine),t.onUnlisten=MM.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=OM.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=PM.bind(null,e.syncEngine),t}function WM(n,e,t={}){const r=new ca;return n.asyncQueue.enqueueAndForget((async()=>(function(a,o,c,u,h){const p=new uy({next:_=>{p.Nu(),o.enqueueAndForget((()=>ay(a,g)));const E=_.docs.has(c);!E&&_.fromCache?h.reject(new xe(le.UNAVAILABLE,"Failed to get document because the client is offline.")):E&&_.fromCache&&u&&u.source==="server"?h.reject(new xe(le.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(_)},error:_=>h.reject(_)}),g=new oy(F0(c.path),p,{includeMetadataChanges:!0,qa:!0});return iy(a,g)})(await m0(n),n.asyncQueue,e,t,r))),r.promise}function QM(n,e,t={}){const r=new ca;return n.asyncQueue.enqueueAndForget((async()=>(function(a,o,c,u,h){const p=new uy({next:_=>{p.Nu(),o.enqueueAndForget((()=>ay(a,g))),_.fromCache&&u.source==="server"?h.reject(new xe(le.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(_)},error:_=>h.reject(_)}),g=new oy(c,p,{includeMetadataChanges:!0,qa:!0});return iy(a,g)})(await m0(n),n.asyncQueue,e,t,r))),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gT(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kw=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vT="firestore.googleapis.com",Ww=!0;class Qw{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new xe(le.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=vT,this.ssl=Ww}else this.host=e.host,this.ssl=e.ssl??Ww;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=QC;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<C5)throw new xe(le.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}uD("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=gT(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new xe(le.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new xe(le.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new xe(le.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class W0{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Qw({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new xe(le.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new xe(le.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Qw(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new eD;switch(r.type){case"firstParty":return new iD(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new xe(le.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const r=Kw.get(t);r&&(we("ComponentProvider","Removing Datastore"),Kw.delete(t),r.terminate())})(this),Promise.resolve()}}function ZM(n,e,t,r={}){n=si(n,W0);const i=Tc(e),a=n._getSettings(),o={...a,emulatorOptions:n._getEmulatorOptions()},c=`${e}:${t}`;i&&(uS(`https://${c}`),fS("Firestore",!0)),a.host!==vT&&a.host!==c&&gc("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u={...a,host:c,ssl:i,emulatorOptions:r};if(!Yo(u,o)&&(n._setSettings(u),r.mockUserToken)){let h,p;if(typeof r.mockUserToken=="string")h=r.mockUserToken,p=ir.MOCK_USER;else{h=fR(r.mockUserToken,n._app?.options.projectId);const g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new xe(le.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new ir(g)}n._authCredentials=new tD(new sC(h,p))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ka{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ka(this.firestore,e,this._query)}}class Zt{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Hs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Zt(this.firestore,e,this._key)}toJSON(){return{type:Zt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(kf(t,Zt._jsonSchema))return new Zt(e,r||null,new Re(Rt.fromString(t.referencePath)))}}Zt._jsonSchemaVersion="firestore/documentReference/1.0",Zt._jsonSchema={type:xn("string",Zt._jsonSchemaVersion),referencePath:xn("string")};class Hs extends Ka{constructor(e,t,r){super(e,t,F0(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Zt(this.firestore,null,new Re(e))}withConverter(e){return new Hs(this.firestore,e,this._path)}}function Q0(n,e,...t){if(n=sn(n),oC("collection","path",e),n instanceof W0){const r=Rt.fromString(e,...t);return uw(r),new Hs(n,null,r)}{if(!(n instanceof Zt||n instanceof Hs))throw new xe(le.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Rt.fromString(e,...t));return uw(r),new Hs(n.firestore,null,r)}}function Ni(n,e,...t){if(n=sn(n),arguments.length===1&&(e=jv.newId()),oC("doc","path",e),n instanceof W0){const r=Rt.fromString(e,...t);return cw(r),new Zt(n,null,new Re(r))}{if(!(n instanceof Zt||n instanceof Hs))throw new xe(le.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Rt.fromString(e,...t));return cw(r),new Zt(n.firestore,n instanceof Hs?n.converter:null,new Re(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zw="AsyncQueue";class Jw{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Qv(this,"async_queue_retry"),this._c=()=>{const r=Im();r&&we(Zw,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const t=Im();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Im();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new ca;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Dc(e))throw e;we(Zw,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,$a("INTERNAL UNHANDLED ERROR: ",eA(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const i=ny.createAndSchedule(this,e,t,r,(a=>this.hc(a)));return this.tc.push(i),i}uc(){this.nc&&ke(47125,{Pc:eA(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,r)=>t.targetTimeMs-r.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function eA(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tA(n){return(function(t,r){if(typeof t!="object"||t===null)return!1;const i=t;for(const a of r)if(a in i&&typeof i[a]=="function")return!0;return!1})(n,["next","error","complete"])}class to extends W0{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new Jw,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Jw(e),this._firestoreClient=void 0,await e}}}function JM(n,e){const t=typeof n=="object"?n:mS(),r=typeof n=="string"?n:a0,i=Tv(t,"firestore").getImmediate({identifier:r});if(!i._initialized){const a=cR("firestore");a&&ZM(i,...a)}return i}function kc(n){if(n._terminated)throw new xe(le.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||e9(n),n._firestoreClient}function e9(n){const e=n._freezeSettings(),t=(function(i,a,o,c){return new wD(i,a,o,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,gT(c.experimentalLongPollingOptions),c.useFetchStreams,c.isUsingEmulator)})(n._databaseId,n._app?.options.appId||"",n._persistenceKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new $M(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(i){const a=i?._online.build();return{_offline:i?._offline.build(a),_online:a}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Vr(er.fromBase64String(e))}catch(t){throw new xe(le.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Vr(er.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Vr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(kf(e,Vr._jsonSchema))return Vr.fromBase64String(e.bytes)}}Vr._jsonSchemaVersion="firestore/bytes/1.0",Vr._jsonSchema={type:xn("string",Vr._jsonSchemaVersion),bytes:xn("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uf{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new xe(le.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Wn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z0{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fa{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new xe(le.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new xe(le.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return et(this._lat,e._lat)||et(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:fa._jsonSchemaVersion}}static fromJSON(e){if(kf(e,fa._jsonSchema))return new fa(e.latitude,e.longitude)}}fa._jsonSchemaVersion="firestore/geoPoint/1.0",fa._jsonSchema={type:xn("string",fa._jsonSchemaVersion),latitude:xn("number"),longitude:xn("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ha{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==i[a])return!1;return!0})(this._values,e._values)}toJSON(){return{type:ha._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(kf(e,ha._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new ha(e.vectorValues);throw new xe(le.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}ha._jsonSchemaVersion="firestore/vectorValue/1.0",ha._jsonSchema={type:xn("string",ha._jsonSchemaVersion),vectorValues:xn("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t9=/^__.*__$/;class n9{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new ao(e,this.data,this.fieldMask,t,this.fieldTransforms):new jf(e,this.data,t,this.fieldTransforms)}}class yT{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new ao(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function _T(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ke(40011,{Ac:n})}}class hy{constructor(e,t,r,i,a,o){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,a===void 0&&this.Rc(),this.fieldTransforms=a||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new hy({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.gc(e),r}yc(e){const t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return g0(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(_T(this.Ac)&&t9.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class r9{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||X0(e)}Cc(e,t,r,i=!1){return new hy({Ac:e,methodName:t,Dc:r,path:Wn.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function J0(n){const e=n._freezeSettings(),t=X0(n._databaseId);return new r9(n._databaseId,!!e.ignoreUndefinedProperties,t)}function dy(n,e,t,r,i,a={}){const o=n.Cc(a.merge||a.mergeFields?2:0,e,t,i);my("Data must be an object, but it was:",o,r);const c=wT(r,o);let u,h;if(a.merge)u=new Fr(o.fieldMask),h=o.fieldTransforms;else if(a.mergeFields){const p=[];for(const g of a.mergeFields){const _=zg(e,g,t);if(!o.contains(_))throw new xe(le.INVALID_ARGUMENT,`Field '${_}' is specified in your field mask but missing from your input data.`);bT(p,_)||p.push(_)}u=new Fr(p),h=o.fieldTransforms.filter((g=>u.covers(g.field)))}else u=null,h=o.fieldTransforms;return new n9(new dr(c),u,h)}class e1 extends Z0{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof e1}}class py extends Z0{_toFieldTransform(e){return new YD(e.path,new Af)}isEqual(e){return e instanceof py}}function xT(n,e,t,r){const i=n.Cc(1,e,t);my("Data must be an object, but it was:",i,r);const a=[],o=dr.empty();io(r,((u,h)=>{const p=gy(e,u,t);h=sn(h);const g=i.yc(p);if(h instanceof e1)a.push(p);else{const _=zf(h,g);_!=null&&(a.push(p),o.set(p,_))}}));const c=new Fr(a);return new yT(o,c,i.fieldTransforms)}function ET(n,e,t,r,i,a){const o=n.Cc(1,e,t),c=[zg(e,r,t)],u=[i];if(a.length%2!=0)throw new xe(le.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let _=0;_<a.length;_+=2)c.push(zg(e,a[_])),u.push(a[_+1]);const h=[],p=dr.empty();for(let _=c.length-1;_>=0;--_)if(!bT(h,c[_])){const E=c[_];let A=u[_];A=sn(A);const S=o.yc(E);if(A instanceof e1)h.push(E);else{const O=zf(A,S);O!=null&&(h.push(E),p.set(E,O))}}const g=new Fr(h);return new yT(p,g,o.fieldTransforms)}function i9(n,e,t,r=!1){return zf(t,n.Cc(r?4:3,e))}function zf(n,e){if(AT(n=sn(n)))return my("Unsupported field value:",e,n),wT(n,e);if(n instanceof Z0)return(function(r,i){if(!_T(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(i);a&&i.fieldTransforms.push(a)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,i){const a=[];let o=0;for(const c of r){let u=zf(c,i.wc(o));u==null&&(u={nullValue:"NULL_VALUE"}),a.push(u),o++}return{arrayValue:{values:a}}})(n,e)}return(function(r,i){if((r=sn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return qD(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=At.fromDate(r);return{timestampValue:u0(i.serializer,a)}}if(r instanceof At){const a=new At(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:u0(i.serializer,a)}}if(r instanceof fa)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Vr)return{bytesValue:HC(i.serializer,r._byteString)};if(r instanceof Zt){const a=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(a))throw i.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:$v(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof ha)return(function(o,c){return{mapValue:{fields:{[gC]:{stringValue:vC},[s0]:{arrayValue:{values:o.toArray().map((h=>{if(typeof h!="number")throw c.Sc("VectorValues must only contain numeric values.");return Hv(c.serializer,h)}))}}}}}})(r,i);throw i.Sc(`Unsupported field value: ${j0(r)}`)})(n,e)}function wT(n,e){const t={};return uC(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):io(n,((r,i)=>{const a=zf(i,e.mc(r));a!=null&&(t[r]=a)})),{mapValue:{fields:t}}}function AT(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof At||n instanceof fa||n instanceof Vr||n instanceof Zt||n instanceof Z0||n instanceof ha)}function my(n,e,t){if(!AT(t)||!lC(t)){const r=j0(t);throw r==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+r)}}function zg(n,e,t){if((e=sn(e))instanceof Uf)return e._internalPath;if(typeof e=="string")return gy(n,e);throw g0("Field path arguments must be of type string or ",n,!1,void 0,t)}const a9=new RegExp("[~\\*/\\[\\]]");function gy(n,e,t){if(e.search(a9)>=0)throw g0(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Uf(...e.split("."))._internalPath}catch{throw g0(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function g0(n,e,t,r,i){const a=r&&!r.isEmpty(),o=i!==void 0;let c=`Function ${e}() called with invalid data`;t&&(c+=" (via `toFirestore()`)"),c+=". ";let u="";return(a||o)&&(u+=" (found",a&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new xe(le.INVALID_ARGUMENT,c+n+u)}function bT(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v0{constructor(e,t,r,i,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new Zt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new s9(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(t1("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class s9 extends v0{data(){return super.data()}}function t1(n,e){return typeof e=="string"?gy(n,e):e instanceof Uf?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ST(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new xe(le.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class vy{}class yy extends vy{}function n1(n,e,...t){let r=[];e instanceof vy&&r.push(e),r=r.concat(t),(function(a){const o=a.filter((u=>u instanceof _y)).length,c=a.filter((u=>u instanceof r1)).length;if(o>1||o>0&&c>0)throw new xe(le.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const i of r)n=i._apply(n);return n}class r1 extends yy{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new r1(e,t,r)}_apply(e){const t=this._parse(e);return TT(e._query,t),new Ka(e.firestore,e.converter,Mg(e._query,t))}_parse(e){const t=J0(e.firestore);return(function(a,o,c,u,h,p,g){let _;if(h.isKeyField()){if(p==="array-contains"||p==="array-contains-any")throw new xe(le.INVALID_ARGUMENT,`Invalid Query. You can't perform '${p}' queries on documentId().`);if(p==="in"||p==="not-in"){rA(g,p);const A=[];for(const S of g)A.push(nA(u,a,S));_={arrayValue:{values:A}}}else _=nA(u,a,g)}else p!=="in"&&p!=="not-in"&&p!=="array-contains-any"||rA(g,p),_=i9(c,o,g,p==="in"||p==="not-in");return yn.create(h,p,_)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function y0(n,e,t){const r=e,i=t1("where",n);return r1._create(i,r,t)}class _y extends vy{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new _y(e,t)}_parse(e){const t=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return t.length===1?t[0]:Di.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(i,a){let o=i;const c=a.getFlattenedFilters();for(const u of c)TT(o,u),o=Mg(o,u)})(e._query,t),new Ka(e.firestore,e.converter,Mg(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class xy extends yy{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new xy(e,t)}_apply(e){const t=(function(i,a,o){if(i.startAt!==null)throw new xe(le.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new xe(le.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new wf(a,o)})(e._query,this._field,this._direction);return new Ka(e.firestore,e.converter,(function(i,a){const o=i.explicitOrderBy.concat([a]);return new Mc(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)})(e._query,t))}}function i1(n,e="asc"){const t=e,r=t1("orderBy",n);return xy._create(r,t)}class Ey extends yy{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new Ey(e,t,r)}_apply(e){return new Ka(e.firestore,e.converter,l0(e._query,this._limit,this._limitType))}}function CT(n){return fD("limit",n),Ey._create("limit",n,"F")}function nA(n,e,t){if(typeof(t=sn(t))=="string"){if(t==="")throw new xe(le.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!SC(e)&&t.indexOf("/")!==-1)throw new xe(le.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Rt.fromString(t));if(!Re.isDocumentKey(r))throw new xe(le.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return yw(n,new Re(r))}if(t instanceof Zt)return yw(n,t._key);throw new xe(le.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${j0(t)}.`)}function rA(n,e){if(!Array.isArray(n)||n.length===0)throw new xe(le.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function TT(n,e){const t=(function(i,a){for(const o of i)for(const c of o.getFlattenedFilters())if(a.indexOf(c.op)>=0)return c.op;return null})(n.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new xe(le.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new xe(le.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class IT{convertValue(e,t="none"){switch(Zs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return an(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Qs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw ke(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return io(e,((i,a)=>{r[i]=this.convertValue(a,t)})),r}convertVectorValue(e){const t=e.fields?.[s0].arrayValue?.values?.map((r=>an(r.doubleValue)));return new ha(t)}convertGeoPoint(e){return new fa(an(e.latitude),an(e.longitude))}convertArray(e,t){return(e.values||[]).map((r=>this.convertValue(r,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const r=V0(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(_f(e));default:return null}}convertTimestamp(e){const t=Ws(e);return new At(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Rt.fromString(e);st(WC(r),9688,{name:e});const i=new xf(r.get(1),r.get(3)),a=new Re(r.popFirst(5));return i.isEqual(t)||$a(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wy(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class o9 extends IT{constructor(e){super(),this.firestore=e}convertBytes(e){return new Vr(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Zt(this.firestore,null,t)}}class ic{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Gs extends v0{constructor(e,t,r,i,a,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Gd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(t1("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new xe(le.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Gs._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Gs._jsonSchemaVersion="firestore/documentSnapshot/1.0",Gs._jsonSchema={type:xn("string",Gs._jsonSchemaVersion),bundleSource:xn("string","DocumentSnapshot"),bundleName:xn("string"),bundle:xn("string")};class Gd extends Gs{data(e={}){return super.data(e)}}class $o{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new ic(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((r=>{e.call(t,new Gd(this._firestore,this._userDataWriter,r.key,r,new ic(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new xe(le.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(i,a){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map((c=>{const u=new Gd(i._firestore,i._userDataWriter,c.doc.key,c.doc,new ic(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);return c.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}}))}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter((c=>a||c.type!==3)).map((c=>{const u=new Gd(i._firestore,i._userDataWriter,c.doc.key,c.doc,new ic(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);let h=-1,p=-1;return c.type!==0&&(h=o.indexOf(c.doc.key),o=o.delete(c.doc.key)),c.type!==1&&(o=o.add(c.doc),p=o.indexOf(c.doc.key)),{type:l9(c.type),doc:u,oldIndex:h,newIndex:p}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new xe(le.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=$o._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=jv.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],i=[];return this.docs.forEach((a=>{a._document!==null&&(t.push(a._document),r.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),i.push(a.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function l9(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ke(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ay(n){n=si(n,Zt);const e=si(n.firestore,to);return WM(kc(e),n._key).then((t=>OT(e,n,t)))}$o._jsonSchemaVersion="firestore/querySnapshot/1.0",$o._jsonSchema={type:xn("string",$o._jsonSchemaVersion),bundleSource:xn("string","QuerySnapshot"),bundleName:xn("string"),bundle:xn("string")};class a1 extends IT{constructor(e){super(),this.firestore=e}convertBytes(e){return new Vr(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Zt(this.firestore,null,t)}}function NT(n){n=si(n,Ka);const e=si(n.firestore,to),t=kc(e),r=new a1(e);return ST(n._query),QM(t,n._query).then((i=>new $o(e,r,n,i)))}function c9(n,e,t){n=si(n,Zt);const r=si(n.firestore,to),i=wy(n.converter,e,t);return RT(r,[dy(J0(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,Qn.none())])}function s1(n,...e){n=sn(n);let t={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||tA(e[r])||(t=e[r++]);const i={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(tA(e[r])){const u=e[r];e[r]=u.next?.bind(u),e[r+1]=u.error?.bind(u),e[r+2]=u.complete?.bind(u)}let a,o,c;if(n instanceof Zt)o=si(n.firestore,to),c=F0(n._key.path),a={next:u=>{e[r]&&e[r](OT(o,n,u))},error:e[r+1],complete:e[r+2]};else{const u=si(n,Ka);o=si(u.firestore,to),c=u._query;const h=new a1(o);a={next:p=>{e[r]&&e[r](new $o(o,h,u,p))},error:e[r+1],complete:e[r+2]},ST(n._query)}return(function(h,p,g,_){const E=new uy(_),A=new oy(p,E,g);return h.asyncQueue.enqueueAndForget((async()=>iy(await m0(h),A))),()=>{E.Nu(),h.asyncQueue.enqueueAndForget((async()=>ay(await m0(h),A)))}})(kc(o),c,i,a)}function RT(n,e){return(function(r,i){const a=new ca;return r.asyncQueue.enqueueAndForget((async()=>kM(await YM(r),i,a))),a.promise})(kc(n),e)}function OT(n,e,t){const r=t.docs.get(e._key),i=new a1(n);return new Gs(n,i,e._key,r,new ic(t.hasPendingWrites,t.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u9={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f9{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=J0(e)}set(e,t,r){this._verifyNotCommitted();const i=Bs(e,this._firestore),a=wy(i.converter,t,r),o=dy(this._dataReader,"WriteBatch.set",i._key,a,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,Qn.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const a=Bs(e,this._firestore);let o;return o=typeof(t=sn(t))=="string"||t instanceof Uf?ET(this._dataReader,"WriteBatch.update",a._key,t,r,i):xT(this._dataReader,"WriteBatch.update",a._key,t),this._mutations.push(o.toMutation(a._key,Qn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Bs(e,this._firestore);return this._mutations=this._mutations.concat(new q0(t._key,Qn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new xe(le.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Bs(n,e){if((n=sn(n)).firestore!==e)throw new xe(le.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h9{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=J0(e)}get(e){const t=Bs(e,this._firestore),r=new o9(this._firestore);return this._transaction.lookup([t._key]).then((i=>{if(!i||i.length!==1)return ke(24041);const a=i[0];if(a.isFoundDocument())return new v0(this._firestore,r,a.key,a,t.converter);if(a.isNoDocument())return new v0(this._firestore,r,t._key,null,t.converter);throw ke(18433,{doc:a})}))}set(e,t,r){const i=Bs(e,this._firestore),a=wy(i.converter,t,r),o=dy(this._dataReader,"Transaction.set",i._key,a,i.converter!==null,r);return this._transaction.set(i._key,o),this}update(e,t,r,...i){const a=Bs(e,this._firestore);let o;return o=typeof(t=sn(t))=="string"||t instanceof Uf?ET(this._dataReader,"Transaction.update",a._key,t,r,i):xT(this._dataReader,"Transaction.update",a._key,t),this._transaction.update(a._key,o),this}delete(e){const t=Bs(e,this._firestore);return this._transaction.delete(t._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d9 extends h9{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Bs(e,this._firestore),r=new a1(this._firestore);return super.get(e).then((i=>new Gs(this._firestore,r,t._key,i._document,new ic(!1,!1),t.converter)))}}function p9(n,e,t){n=si(n,to);const r={...u9,...t};return(function(a){if(a.maxAttempts<1)throw new xe(le.INVALID_ARGUMENT,"Max attempts must be at least 1")})(r),(function(a,o,c){const u=new ca;return a.asyncQueue.enqueueAndForget((async()=>{const h=await KM(a);new qM(a.asyncQueue,h,c,o,u).ju()})),u.promise})(kc(n),(i=>e(new d9(n,i))),r)}function wc(){return new py("serverTimestamp")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DT(n){return kc(n=si(n,to)),new f9(n,(e=>RT(n,e)))}(function(e,t=!0){(function(i){Rc=i})(Ic),mc(new Ko("firestore",((r,{instanceIdentifier:i,options:a})=>{const o=r.getProvider("app").getImmediate(),c=new to(new nD(r.getProvider("auth-internal")),new aD(o,r.getProvider("app-check-internal")),(function(h,p){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new xe(le.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new xf(h.options.projectId,p)})(o,i),o);return a={useFetchStreams:t,...a},c._setSettings(a),c}),"PUBLIC").setMultipleInstances(!0)),Us(aw,sw,e),Us(aw,sw,"esm2020")})();const Hg={apiKey:"AIzaSyBxVSYgc9mqtDeczSZjOcPn0D-sB0PBUKM",authDomain:"ichinikai-order.firebaseapp.com",projectId:"ichinikai-order",storageBucket:"ichinikai-order.appspot.com",messagingSenderId:"829152459225",appId:"1:829152459225:web:a8966a583e54d7553ac1c8"};function m9(n){const e=Object.entries(n).filter(([,t])=>typeof t>"u").map(([t])=>t);if(e.length>0)throw new Error(`Firebaseの設定値が不足しています: ${e.join(", ")}. Viteの.envファイルを確認してください。`)}const MT=Object.entries(Hg).filter(([,n])=>!n||n==="undefined").map(([n])=>n),PT=MT.length>0,by=PT,ja=by;let Rm=null,Gg,qg;if(!by)m9(Hg),Rm=PE().length?PE()[0]:pS(Hg),Gg=WO(Rm),qg=JM(Rm);else{const n=PT?`Firebase設定値が不足しているためモックモードに切り替えました（不足: ${MT.join(", ")}）`:"モックモードが環境変数で有効化されています";console.info(`Firebase initialization skipped: ${n}`),Gg={currentUser:null},qg={}}const Ti=Gg,Ln=qg;async function g9(){if(!by){if(!Ti.currentUser){await(await VS(Ti)).user.getIdToken(!0);return}Ti.currentUser.isAnonymous&&await Ti.currentUser.getIdToken(!0)}}const kT=P.createContext(void 0),Om=["admin","kitchen","staff"];function v9(n){const e=[];return n.admin&&e.push("admin"),n.kitchen&&e.push("kitchen"),n.staff&&e.push("staff"),e}function y9({children:n}){const[e,t]=P.useState(()=>ja?"signed-in":"loading"),[r,i]=P.useState(null),[a,o]=P.useState(()=>ja?Om:[]),[c,u]=P.useState(null);P.useEffect(()=>{if(ja){t("signed-in"),i(null),o(Om),u(null);return}const E=zS(Ti,async A=>{if(!A){i(null),o([]),t("signed-out");return}try{const S=await A.getIdTokenResult(!0),O=v9(S.claims);i(A),o(O),t("signed-in"),u(null)}catch(S){console.error("Failed to refresh token claims",S),i(A),o([]),t("signed-in"),u("ロール情報の取得に失敗しました。再読み込みしてください。")}});return()=>E()},[]);const h=P.useCallback(async({email:E,password:A})=>{if(u(null),ja){t("signed-in"),i(null),o(Om);return}try{await L6(Ti,E,A)}catch(S){console.error("Failed to sign in",S);const O=S instanceof Error?S.message:"サインインに失敗しました。";throw u(O),S}},[]),p=P.useCallback(async()=>{if(u(null),ja){t("signed-out"),i(null),o([]);return}await V6(Ti)},[]),g=P.useCallback(E=>{const A=Array.isArray(E)?E:[E];return A.length===0||ja?!0:A.some(S=>a.includes(S))},[a]),_=P.useMemo(()=>({status:e,user:r,roles:a,error:c,signIn:h,signOut:p,hasRole:g}),[c,g,a,h,p,e,r]);return m.jsx(kT.Provider,{value:_,children:n})}function o1(){const n=P.useContext(kT);if(!n)throw new Error("useAuth must be used within an AuthProvider");return n}const Xn=n=>{const e="/Ichinikai/",t=e.endsWith("/")?e:`${e}/`,r=n.replace(/^\/+/,"");return`${t}${r}`},_9={wheat:{key:"wheat",label:"小麦",icon:Xn("allergy_icon/Wheat.png")},egg:{key:"egg",label:"卵",icon:Xn("allergy_icon/Egg.png")},soy:{key:"soy",label:"大豆",icon:Xn("allergy_icon/Soy.png")}},LT={potaufeu:{key:"potaufeu",label:"ポトフ",description:"野菜たっぷりの温かいスープでほっと一息",price:250,image:Xn("menu_photo/5.png"),allergens:["soy"]},plain:{key:"plain",label:"揚げパン(プレーン)",description:"あつあつの揚げパンに砂糖をまぶしました",price:250,image:Xn("menu_photo/1.png"),allergens:["wheat","egg"]},cocoa:{key:"cocoa",label:"揚げパン(ココア)",description:"ビターなココアパウダーとチョコソース",price:250,image:Xn("menu_photo/2.png"),allergens:["wheat","egg","soy"]},kinako:{key:"kinako",label:"揚げパン(きなこ)",description:"国産きなこと黒蜜の和風仕立て",price:250,image:Xn("menu_photo/3.png"),allergens:["wheat","soy"]},garlic:{key:"garlic",label:"揚げパン(ガーリック)",description:"揚げたてポテトにガーリックソルトを効かせました",price:250,image:Xn("menu_photo/4.png"),allergens:["wheat"]},drink_hojicha:{key:"drink_hojicha",label:"ほうじ茶(温)",description:"香ばしいほうじ茶でほっと一息",price:150,image:Xn("menu_photo/6.png"),allergens:[]},drink_cocoa:{key:"drink_cocoa",label:"ココア(温)",description:"甘くて濃厚なココアでほっと一息",price:150,image:Xn("menu_photo/7.png"),allergens:[]},drink_coffee:{key:"drink_coffee",label:"コーヒー(温)",description:"香り高いホットコーヒーでリフレッシュ",price:150,image:Xn("menu_photo/8.png"),allergens:[]},drink_milkcoffee:{key:"drink_milkcoffee",label:"コーヒー牛乳(冷)",description:"ミルクたっぷりのまろやかなホットコーヒー",price:150,image:Xn("menu_photo/9.png"),allergens:[]},minestrone:{key:"minestrone",label:"ミネストローネ",description:"トマトベースの具だくさんスープで体ぽかぽか",price:320,image:Xn("menu_photo/5.png"),allergens:["soy"]},strawberry:{key:"strawberry",label:"スモア(いちごジャム味)",description:"甘酸っぱいいちごジャムとマシュマロのハーモニー",price:250,image:Xn("menu_photo/1.png"),allergens:["wheat","egg"]},blueberry:{key:"blueberry",label:"スモア(ブルーベリージャム味)",description:"甘酸っぱいブルーベリージャムとマシュマロのハーモニー",price:250,image:Xn("menu_photo/2.png"),allergens:["wheat","egg","soy"]},chocolate:{key:"chocolate",label:"スモア(チョコ味)",description:"濃厚チョコレートソースとマシュマロのハーモニー",price:250,image:Xn("menu_photo/3.png"),allergens:["wheat","soy"]},honey:{key:"honey",label:"スモア(はちみつ味)",description:"香ばしいはちみつとマシュマロのハーモニー",price:250,image:Xn("menu_photo/4.png"),allergens:["wheat"]}},x9={potaufeu:"ポトフ",minestrone:"ミネスト",plain:"プレーン",cocoa:"ココア",kinako:"きなこ",garlic:"ガーリック",strawberry:"いちご",blueberry:"ブルーベリー",chocolate:"チョコ",honey:"はちみつ",drink_hojicha:"ほうじ茶",drink_cocoa:"ココア(飲)",drink_coffee:"コーヒー",drink_milkcoffee:"コーヒー牛乳"},Zu=(n,e)=>x9[n]??e,E9={day12:["potaufeu","plain","cocoa","kinako","garlic","drink_hojicha","drink_cocoa","drink_coffee","drink_milkcoffee"],day34:["minestrone","strawberry","blueberry","chocolate","honey","drink_hojicha","drink_cocoa","drink_coffee","drink_milkcoffee"]},w9="day12",A9=n=>n==="day12"||n==="day34",Dm="day34".toLowerCase(),jT=Dm&&A9(Dm)?Dm:w9,b9=jT,BT=E9[jT],Lc=BT.reduce((n,e)=>(n[e]=LT[e],n),{});BT.map(n=>LT[n]);const S9=["未払い","支払い済み","キャンセル"],VT="order-app.menu-overrides.v1",C9="config",T9="menuOverrides",FT=ja;let Zn={};const $g=new Set;let Sy;const UT=typeof window<"u",pc=ja?null:Ni(Ln,C9,T9),zT=(n,e)=>{if(typeof n!="string")return;const t=n.trim();if(!(!t||t===e))return t},HT=(n,e)=>{if(!Number.isFinite(n))return;const t=Math.max(0,Math.round(n));if(t!==e)return t},Xg=n=>!n||typeof n!="object"?{}:Object.entries(n).reduce((e,[t,r])=>{if(!GT(t)||!r||typeof r!="object")return e;const i=Lc[t],a=zT(r.label,i.label),o=HT(r.price,i.price);if(!a&&!Number.isFinite(o))return e;const c={};return a&&(c.label=a),Number.isFinite(o)&&(c.price=o),e[t]=c,e},{}),I9=()=>{if(!UT)return{};try{const n=window.localStorage.getItem(VT);if(!n)return{};const e=JSON.parse(n);return Xg(e)}catch(n){return console.warn("[menuConfigStore] Failed to load overrides",n),{}}},N9=n=>{if(UT)try{const e=JSON.stringify(n);window.localStorage.setItem(VT,e)}catch(e){console.warn("[menuConfigStore] Failed to persist overrides",e)}},GT=n=>n in Lc,qT=()=>{const n=Object.entries(Lc).reduce((e,[t,r])=>{const i=t,a=Zn[i]??{},o=a.label??r.label,c=a.price??r.price;return e[i]={...r,label:o,price:c},e},{});return{map:n,list:Object.values(n)}},Ju=(n,e)=>{const t=Object.keys(n),r=Object.keys(e);return t.length!==r.length?!1:t.every(i=>{if(!GT(i))return!1;const a=n[i],o=e[i];return!a&&!o?!0:!a||!o?!1:a.label===o.label&&a.price===o.price})},ac=(n,e={})=>{const{persist:t=!0}=e;Zn=n,Sy=qT(),FT&&t&&N9(n),$g.forEach(r=>r())},R9=async n=>{pc&&await c9(pc,{overrides:n,updatedAt:wc(),updatedBy:Ti.currentUser?.uid??null},{merge:!0})},_0=async n=>{if(Ju(n,Zn))return;const e=Zn;if(ac(n),pc)try{await R9(n)}catch(t){throw console.error("[menuConfigStore] Failed to sync overrides to Firestore",t),ac(e,{persist:!1}),t}},O9=()=>{pc&&((async()=>{try{const n=await Ay(pc);if(!n.exists()){Ju(Zn,{})||ac({},{persist:!1});return}const e=n.data(),t=Xg(e?.overrides);Ju(t,Zn)||ac(t,{persist:!1})}catch(n){console.error("[menuConfigStore] Failed to load menu overrides from Firestore",n)}})(),s1(pc,n=>{if(n.metadata.hasPendingWrites)return;if(!n.exists()){Ju(Zn,{})||ac({},{persist:!1});return}const e=n.data(),t=Xg(e?.overrides);Ju(t,Zn)||ac(t,{persist:!1})},n=>{console.error("[menuConfigStore] Failed to subscribe to menu overrides",n)}))},so=()=>Sy,D9=n=>($g.add(n),()=>{$g.delete(n)}),M9=async(n,e)=>{const t=Lc[n];if(!t)throw new Error(`Unknown menu item key: ${n}`);const r=zT(e.label,t.label),i=HT(e.price,t.price),a=Zn[n]??{},o={};if(r&&(o.label=r),Number.isFinite(i)&&(o.price=i),Object.keys(o).length===0){if(!a||!a.label&&!Number.isFinite(a.price))return;const h={...Zn};delete h[n],await _0(h);return}if(!(o.label!==a.label||o.price!==a.price))return;const u={...Zn,[n]:o};await _0(u)},P9=async n=>{if(!Zn[n])return;const e={...Zn};delete e[n],await _0(e)},k9=async()=>{Object.keys(Zn).length!==0&&await _0({})},L9=()=>Lc,j9=()=>Zn;FT?Zn=I9():(Zn={},O9());Sy=qT();const B9={day12:[{key:"potaufeu",label:"ポトフ",icon:"🥘",itemKeys:["potaufeu"]},{key:"friedBread",label:"揚げパン",icon:"🍞",itemKeys:["plain","cocoa","kinako","garlic"]}],day34:[{key:"potaufeu",label:"ミネストローネ",icon:"🥣",itemKeys:["minestrone"]},{key:"friedBread",label:"スモア",icon:"🍪",itemKeys:["strawberry","blueberry","chocolate","honey"]}]},Ri=B9[b9],V9=new Map(Ri.flatMap(n=>n.itemKeys.map(e=>[e,n.key])));function F9(n){return V9.get(n)??null}function U9(n){const e=Ri.reduce((t,r)=>(t[r.key]=0,t),{potaufeu:0,friedBread:0});return Ri.reduce((t,r)=>(t[r.key]=r.itemKeys.reduce((i,a)=>i+(n[a]??0),0),t),e)}function Cr(n,e){const t=U9(n);return{potaufeu:e?.potaufeu??t.potaufeu===0,friedBread:e?.friedBread??t.friedBread===0}}function Cy(n){return Cr(n,null)}function z9(n,e){const t=Cr(n,e);return{potaufeu:t.potaufeu?"ready":"pending",friedBread:t.friedBread?"ready":"pending"}}function $T(n,e){const t=Ri.find(r=>r.key===e);return t?t.itemKeys.reduce((r,i)=>r+(n[i]??0),0):0}function H9(n,e){return Ri.every(t=>t.itemKeys.reduce((i,a)=>i+(n[a]??0),0)===0?!0:e[t.key]==="ready")}function G9(n){const e=h=>h.toString().padStart(2,"0"),t=n.getFullYear(),r=e(n.getMonth()+1),i=e(n.getDate()),a=e(n.getHours()),o=e(n.getMinutes()),c=e(n.getSeconds()),u=Array.from({length:4},()=>String.fromCharCode(65+Math.floor(Math.random()*26))).join("");return`ORD-${t}${r}${i}${a}${o}${c}-${u}`}function q9(){const n="ABCDEFGHJKLMNPQRSTUVWXYZ23456789";return Array.from({length:16},()=>n.charAt(Math.floor(Math.random()*n.length))).join("")}function $9(n){return Object.entries(n).reduce((e,[t,r])=>{const i=Number.isFinite(r)?Math.max(0,Math.floor(r)):0;return i>0&&(e[t]=i),e},{})}function X9(n){const{map:e}=so();return Object.entries(n).reduce((t,[r,i])=>{const o=e[r]?.price??0;return t+o*i},0)}function ci(n){return n?n.toDate():void 0}const Y9=20;async function K9(n){await g9();const e=$9(n);if(!Object.values(e).some(A=>A>0))throw new Error("商品を1点以上ご注文ください。");const r=new Date,i=G9(r),a=q9(),o=X9(e),c="未払い",u="受注済み",h=Cy(e),p=Ni(Ln,"orders",i),g=Ni(Ln,"orderLookup",a),_=Ni(Ln,"metadata","counters"),E=await p9(Ln,async A=>{const T=((await A.get(_)).data()?.lastCallNumber??0)+1;A.set(_,{lastCallNumber:T,updatedAt:wc()},{merge:!0});const R=wc();return A.set(p,{orderId:i,ticket:a,callNumber:T,createdBy:Ti.currentUser?.uid??null,items:e,total:o,payment:c,progress:u,plating:h,createdAt:R,updatedAt:R}),A.set(g,{orderId:i,ticket:a,callNumber:T,items:e,total:o,payment:c,progress:u,plating:h,createdAt:R,updatedAt:R}),T});return{orderId:i,ticket:a,callNumber:E,total:o,items:e,payment:c,progress:u,plating:h,createdAt:r}}async function W9(n){const e=n.trim().toUpperCase();if(!e)return null;const t=Ni(Ln,"orderLookup",e),r=await Ay(t);if(!r.exists())return null;const i=r.data(),a=i.items??{},o=Cr(a,i.plating);return{orderId:i.orderId,ticket:e,callNumber:i.callNumber??0,total:i.total,items:a,payment:i.payment,progress:i.progress,plating:o,updatedAt:ci(i.updatedAt),createdAt:ci(i.createdAt)}}async function Q9(n){const e=Ni(Ln,"orders",n),t=await Ay(e);if(!t.exists())return null;const r=t.data(),i=r.items??{};return{orderId:r.orderId,ticket:r.ticket,callNumber:r.callNumber??0,items:i,total:r.total,payment:r.payment,progress:r.progress,plating:Cr(i,r.plating),createdAt:ci(r.createdAt),updatedAt:ci(r.updatedAt),createdBy:r.createdBy??null}}async function Z9(n,e,t){const r=DT(Ln),i=Ni(Ln,"orders",n),a=Ni(Ln,"orderLookup",e);r.update(i,{payment:t.payment,progress:t.progress,updatedAt:wc()}),r.update(a,{payment:t.payment,progress:t.progress,updatedAt:wc()}),await r.commit()}async function J9(n,e,t){const r=Object.entries(t).filter(([,u])=>typeof u=="boolean");if(r.length===0)return;const i=DT(Ln),a=Ni(Ln,"orders",n),o=Ni(Ln,"orderLookup",e),c={updatedAt:wc()};r.forEach(([u,h])=>{c[`plating.${u}`]=h}),i.update(a,c),i.update(o,c),await i.commit()}async function e7(n={}){const{start:e,end:t}=n,r=Q0(Ln,"orders"),i=[i1("createdAt","asc")];return e&&i.push(y0("createdAt",">=",At.fromDate(e))),t&&i.push(y0("createdAt","<",At.fromDate(t))),(await NT(n1(r,...i))).docs.map(o=>{const c=o.data(),u=c.items??{};return{orderId:c.orderId,ticket:c.ticket,callNumber:c.callNumber??0,items:u,total:c.total,payment:c.payment,progress:c.progress,plating:Cr(u,c.plating),createdAt:ci(c.createdAt),updatedAt:ci(c.updatedAt),createdBy:c.createdBy??null}})}function t7(n,e={}){const t=Q0(Ln,"orders"),r=n1(t,i1("createdAt","desc"),CT(Y9)),i=new Set;let a=!1;return s1(r,c=>{if(!a){c.docs.forEach(u=>i.add(u.id)),a=!0;return}c.docChanges().filter(u=>u.type==="added").forEach(u=>{const h=u.doc.id;if(i.has(h))return;i.add(h);const p=u.doc.data(),g=p.items??{};n({orderId:p.orderId,ticket:p.ticket,callNumber:p.callNumber??0,items:g,total:p.total,payment:p.payment,progress:p.progress,plating:Cr(g,p.plating),createdAt:ci(p.createdAt),updatedAt:ci(p.updatedAt),createdBy:p.createdBy??null})})},c=>{console.error("Failed to subscribe new orders",c),e.onError?.(c)})}function n7(n,e={}){const t=Q0(Ln,"orders"),r=[i1("createdAt","desc")],i=e.start;i&&!Number.isNaN(i.getTime())&&r.push(y0("createdAt",">=",At.fromDate(i)));const a=e.end;a&&!Number.isNaN(a.getTime())&&r.push(y0("createdAt","<",At.fromDate(a)));const o=e.limit;typeof o=="number"&&Number.isFinite(o)&&o>0&&r.push(CT(Math.floor(o)));const c=n1(t,...r);return s1(c,h=>{const p=h.docs.map(g=>{const _=g.data(),E=_.items??{};return{orderId:_.orderId??g.id,ticket:_.ticket,callNumber:_.callNumber??0,items:E,total:_.total,payment:_.payment,progress:_.progress,plating:Cr(E,_.plating),createdAt:ci(_.createdAt),updatedAt:ci(_.updatedAt),createdBy:_.createdBy??null}});n(p)},h=>{console.error("Failed to subscribe orders collection",h),e.onError?.(h)})}function r7(n,e,t={}){const r=n.trim().toUpperCase();if(!r)return e(null),()=>{};const i=Ni(Ln,"orderLookup",r);return s1(i,o=>{if(!o.exists()){e(null);return}const c=o.data(),u=c.items??{};e({orderId:c.orderId??r,ticket:r,callNumber:c.callNumber??0,total:c.total,items:u,payment:c.payment,progress:c.progress,plating:Cr(u,c.plating),updatedAt:ci(c.updatedAt),createdAt:ci(c.createdAt)})},o=>{console.error("Failed to subscribe order lookup",o),t.onError?.(o)})}function i7(n){if(n===null||typeof n>"u")return"";const e=String(n);return e.includes(",")||e.includes('"')||e.includes(`
`)?`"${e.replace(/"/g,'""')}"`:e}async function a7(){const n=Q0(Ln,"orders"),e=await NT(n1(n,i1("createdAt","asc"))),t=["orderId","callNumber","ticket","total","payment","progress","items","createdAt","updatedAt"],{map:r}=so(),i=e.docs.map(h=>{const p=h.data(),g=p.items,_=Object.entries(g).map(([E,A])=>`${r[E]?.label??E}:${A}`).join(" | ");return[p.orderId,p.callNumber??"",p.ticket,p.total,p.payment,p.progress,_,p.createdAt?.toDate()?.toISOString()??"",p.updatedAt?.toDate()?.toISOString()??""].map(i7).join(",")}),a=[t.join(","),...i].join(`
`),o=new Blob([a],{type:"text/csv"}),c=URL.createObjectURL(o),u=document.createElement("a");u.href=c,u.download=`orders-${new Date().toISOString().slice(0,10)}.csv`,u.click(),URL.revokeObjectURL(c)}const XT="mock-orders-state-v1",Yg=new Set,Kg=new Set,zo=new Map;function s7(n){Yg.forEach(e=>{try{e({...n})}catch(t){console.error("モック新規注文通知でエラーが発生しました",t)}})}function o7(){const n=Ii.orders.map(e=>YT(e));Kg.forEach(e=>{try{e(n)}catch(t){console.error("モック注文購読の通知でエラーが発生しました",t)}})}function YT(n){return{...n,items:{...n.items},plating:Cr(n.items,n.plating),createdAt:n.createdAt?new Date(n.createdAt):void 0,updatedAt:n.updatedAt?new Date(n.updatedAt):void 0}}function KT(n){return{orderId:n.orderId,ticket:n.ticket,callNumber:n.callNumber??0,items:{...n.items},total:n.total,payment:n.payment,progress:n.progress,plating:Cr(n.items,n.plating),createdAt:n.createdAt,updatedAt:n.updatedAt}}function WT(n){const e=n.trim().toUpperCase();if(!e)return;const t=zo.get(e);if(!t||t.size===0)return;const r=Iy(e),i=r?KT(r):null;t.forEach(a=>{try{a(i)}catch(o){console.error("モック注文詳細購読の通知でエラーが発生しました",o)}})}function l7(){Array.from(zo.keys()).forEach(n=>WT(n))}function c7(n){if(!n||typeof n!="object")return ff;const e=n,t=(e.orders??[]).map(i=>{const a=i.createdAt?new Date(i.createdAt):void 0,o=i.updatedAt?new Date(i.updatedAt):void 0;return{...i,createdAt:a,updatedAt:o}});if(t.length===0)return ff;const r=Number.isFinite(e.lastCallNumber)?Number(e.lastCallNumber):Math.max(0,...t.map(i=>i.callNumber??0));return{orders:t,lastCallNumber:r}}function u7(){if(typeof window>"u")return ff;try{const n=window.localStorage.getItem(XT);return n?c7(JSON.parse(n)):ff}catch(n){return console.warn("モックデータの読み込みに失敗しました。初期データを使用します。",n),ff}}function f7(n){if(!(typeof window>"u"))try{const e={orders:n.orders.map(t=>({...t,createdAt:t.createdAt?.toISOString()??null,updatedAt:t.updatedAt?.toISOString()??null})),lastCallNumber:n.lastCallNumber};window.localStorage.setItem(XT,JSON.stringify(e))}catch(e){console.warn("モックデータの保存に失敗しました。",e)}}function QT(n){return Object.entries(n).reduce((e,[t,r])=>{const i=Number.isFinite(r)?Math.max(0,Math.floor(r)):0;return i>0&&(e[t]=i),e},{})}function ZT(n){const{map:e}=so();return Object.entries(n).reduce((t,[r,i])=>{const o=e[r]?.price??0;return t+o*i},0)}function h7(n){const e=h=>h.toString().padStart(2,"0"),t=n.getFullYear(),r=e(n.getMonth()+1),i=e(n.getDate()),a=e(n.getHours()),o=e(n.getMinutes()),c=e(n.getSeconds()),u=Array.from({length:4},()=>String.fromCharCode(65+Math.floor(Math.random()*26))).join("");return`ORD-${t}${r}${i}${a}${o}${c}-${u}`}function d7(){const n="ABCDEFGHJKLMNPQRSTUVWXYZ23456789";return Array.from({length:16},()=>n.charAt(Math.floor(Math.random()*n.length))).join("")}const Mm=QT({plain:2,cocoa:1}),ff={orders:[{orderId:"ORD-20251009090000-DEMO",ticket:"MOCKTICKET123456",callNumber:1,items:Mm,total:ZT(Mm),payment:"未払い",progress:"受注済み",plating:Cy(Mm),createdAt:new Date,updatedAt:new Date,createdBy:"mock-user"}],lastCallNumber:1};let Ii=u7();function Ty(n){const e={orders:Ii.orders.map(t=>({...t})),lastCallNumber:Ii.lastCallNumber};n(e),Ii=e,f7(Ii),o7(),l7()}function Iy(n){const e=n.trim().toUpperCase();return e?Ii.orders.find(t=>t.ticket===e)??null:null}async function p7(n){const e=QT(n);if(!Object.values(e).some(g=>g>0))throw new Error("商品を1点以上ご注文ください。");const r=new Date,i=h7(r),a=d7(),o=ZT(e),c="未払い",u="受注済み",h=Ii.lastCallNumber+1,p={orderId:i,ticket:a,callNumber:h,items:e,total:o,payment:c,progress:u,plating:Cy(e),createdAt:r,updatedAt:r,createdBy:"mock-user"};return Ty(g=>{g.orders.push(p),g.lastCallNumber=h}),s7(p),WT(p.ticket),{orderId:i,ticket:a,callNumber:h,total:o,items:e,payment:c,progress:u,plating:p.plating,createdAt:r}}async function m7(n){const e=Iy(n);return e?{orderId:e.orderId,ticket:e.ticket,callNumber:e.callNumber,items:e.items,total:e.total,payment:e.payment,progress:e.progress,plating:Cr(e.items,e.plating),updatedAt:e.updatedAt,createdAt:e.createdAt}:null}async function g7(n){const e=n.trim().toUpperCase();if(!e)return null;const t=Ii.orders.find(r=>r.orderId===e);return t?{...t}:null}async function v7(n,e,t){Ty(r=>{r.orders=r.orders.map(i=>i.orderId!==n&&i.ticket!==e?i:{...i,payment:t.payment,progress:t.progress,updatedAt:new Date})})}async function y7(n,e,t){const r=Object.entries(t).filter(([,i])=>typeof i=="boolean");r.length!==0&&Ty(i=>{i.orders=i.orders.map(a=>{if(a.orderId!==n&&a.ticket!==e)return a;const o=Cr(a.items,{...a.plating,...Object.fromEntries(r)});return{...a,plating:o,updatedAt:new Date}})})}async function _7(n={}){const{start:e,end:t}=n,r=e?.getTime(),i=t?.getTime();return Ii.orders.filter(a=>{const o=a.createdAt??a.updatedAt;if(!o)return!r&&!i;const c=o.getTime();return!(typeof r=="number"&&c<r||typeof i=="number"&&c>=i)}).sort((a,o)=>{const c=(a.createdAt??a.updatedAt??new Date(0)).getTime(),u=(o.createdAt??o.updatedAt??new Date(0)).getTime();return c-u}).map(a=>({...a}))}async function x7(){const n=["orderId","callNumber","ticket","total","payment","progress","items","createdAt","updatedAt"],{map:e}=so(),t=Ii.orders.map(o=>{const c=Object.entries(o.items).map(([u,h])=>`${e[u]?.label??u}:${h}`).join(" | ");return[o.orderId,o.callNumber??"",o.ticket,o.total,o.payment,o.progress,c,o.createdAt?.toISOString()??"",o.updatedAt?.toISOString()??""].map(u=>{const h=String(u);return h.includes(",")||h.includes('"')||h.includes(`
`)?`"${h.replace(/"/g,'""')}"`:h}).join(",")}),r=new Blob([[n.join(","),...t].join(`
`)],{type:"text/csv"}),i=URL.createObjectURL(r),a=document.createElement("a");a.href=i,a.download=`orders-mock-${new Date().toISOString().slice(0,10)}.csv`,a.click(),URL.revokeObjectURL(i)}function E7(n){return Yg.add(n),()=>{Yg.delete(n)}}function w7(n,e={}){const t=e.start?.getTime(),r=e.end?.getTime(),i=e.limit&&Number.isFinite(e.limit)&&e.limit>0?Math.floor(e.limit):null,a=c=>{const h=c.filter(g=>{const _=g.createdAt??g.updatedAt;if(!_)return!(t!=null||r!=null);const E=_.getTime();return!(Number.isNaN(E)||t!=null&&E<t||r!=null&&E>=r)}).sort((g,_)=>{const E=g.createdAt?.getTime()??0;return(_.createdAt?.getTime()??0)-E});return(i?h.slice(0,i):h).map(g=>({...g,items:{...g.items},plating:Cr(g.items,g.plating),createdAt:g.createdAt?new Date(g.createdAt):void 0,updatedAt:g.updatedAt?new Date(g.updatedAt):void 0}))},o=c=>{try{n(a(c))}catch(u){console.error("モック注文購読のフィルタリングでエラーが発生しました",u)}};return Kg.add(o),o(Ii.orders.map(c=>YT(c))),()=>{Kg.delete(o)}}function A7(n,e){const t=n.trim().toUpperCase();if(!t)return e(null),()=>{};const r=zo.get(t)??new Set;zo.has(t)||zo.set(t,r),r.add(e);const i=Iy(t);return e(i?KT(i):null),()=>{const a=zo.get(t);a&&(a.delete(e),a.size===0&&zo.delete(t))}}const b7=["AIzaSyBxVSYgc9mqtDeczSZjOcPn0D-sB0PBUKM","ichinikai-order.firebaseapp.com","ichinikai-order","ichinikai-order.appspot.com","829152459225","1:829152459225:web:a8966a583e54d7553ac1c8"],S7=b7.some(n=>!n||n==="undefined"),ga=S7,C7=ga?p7:K9,T7=ga?m7:W9,I7=ga?g7:Q9,N7=ga?v7:Z9,R7=ga?y7:J9,O7=ga?x7:a7,D7=ga?_7:e7,M7=ga?E7:t7,P7=ga?w7:n7,k7=ga?A7:r7,L7=C7,iA=T7,aA=I7,Fa=N7,Pm=R7,JT=O7,j7=D7,B7=M7,V7=P7,F7=k7;function jc(n={}){const[e,t]=P.useState([]),[r,i]=P.useState(!0),[a,o]=P.useState(null),{autoStopWhen:c,...u}=n,h=u.start?.getTime(),p=typeof h=="number"&&!Number.isNaN(h)?h:null,g=u.end?.getTime(),_=typeof g=="number"&&!Number.isNaN(g)?g:null,E=typeof u.limit=="number"&&Number.isFinite(u.limit)&&u.limit>0?Math.floor(u.limit):null;return P.useEffect(()=>{let A=!0,S=!1,O=null;const T=()=>{O&&(O(),O=null)};i(!0),o(null);const R={...p!=null&&u.start?{start:u.start}:{},..._!=null&&u.end?{end:u.end}:{},...E!=null?{limit:E}:{},onError:L=>{A&&(console.error("注文データの購読に失敗しました",L),o(L instanceof Error?L:new Error("注文データの購読に失敗しました")),i(!1))}};return O=V7(L=>{A&&(t(L),i(!1),!S&&c?.(L)&&(S=!0,A=!1,T()))},R),()=>{A=!1,T()}},[c,_,E,p]),{orders:e,loading:r,error:a}}function rl(){const n=P.useSyncExternalStore(D9,so);return P.useMemo(()=>({menuItems:n.list,menuItemMap:n.map,baseMenuItemMap:L9(),overrides:j9(),updateMenuItem:M9,resetMenuItem:P9,resetAllMenuItems:k9}),[n])}const U7={soup:"スープ",friedBread:"揚げパン",smore:"スモア",drink:"ドリンク"},z7=["soup","friedBread","smore","drink"],H7={potaufeu:"soup",minestrone:"soup",plain:"friedBread",cocoa:"friedBread",kinako:"friedBread",garlic:"friedBread",strawberry:"smore",blueberry:"smore",chocolate:"smore",honey:"smore",drink_hojicha:"drink",drink_cocoa:"drink",drink_coffee:"drink",drink_milkcoffee:"drink"},G7=[{value:"today",label:"今日"},{value:"yesterday",label:"昨日"},{value:"7days",label:"直近7日間"}],q7=["最新 24 時間の注文を CSV 形式でダウンロードできます。","Google スプレッドシートにインポートすると集計や共有が容易になります。","エクスポートにはデータ量に応じて最大 10 秒ほどかかる場合があります。"],Xl=new Intl.NumberFormat("ja-JP",{style:"currency",currency:"JPY",maximumFractionDigits:0}),La=new Intl.NumberFormat("ja-JP",{maximumFractionDigits:0});function sA({mode:n="default"}){const[e,t]=P.useState("today"),{menuItems:r}=rl(),{start:i,end:a}=P.useMemo(()=>$7(e),[e]),o=P.useMemo(()=>({start:i,end:a,autoStopWhen:e==="today"?void 0:G=>G.length>0}),[a,i,e]),{orders:c,loading:u,error:h}=jc(o),p=P.useMemo(()=>{const U=Array.from({length:24},(w,I)=>({hour:I,orderCount:0,revenue:0,cumulativeRevenue:0}));if(c.length===0)return U;c.map(w=>({order:w,timestamp:oA(w)})).filter(w=>w.timestamp!=null).sort((w,I)=>w.timestamp.getTime()-I.timestamp.getTime()).forEach(({order:w,timestamp:I})=>{if(w.payment==="キャンセル")return;const M=I.getHours();if(M<0||M>=U.length)return;const j=Number.isFinite(w.total)?w.total:0;U[M].orderCount+=1,U[M].revenue+=j});let D=0;return U.forEach(w=>{D+=w.revenue,w.cumulativeRevenue=D}),U},[c]),g=P.useMemo(()=>{if(c.length===0)return{totalOrders:0,paidOrders:0,totalRevenue:0,averageOrderValue:0};let U=0,G=0,D=0;c.forEach(I=>{if(I.payment==="キャンセル")return;U+=1,I.payment==="支払い済み"&&(G+=1);const M=Number.isFinite(I.total)?I.total:0;D+=M});const w=U>0?D/U:0;return{totalOrders:U,paidOrders:G,totalRevenue:D,averageOrderValue:w}},[c]),_=P.useMemo(()=>p.reduce((U,G)=>Math.max(U,G.revenue),0),[p]),E=P.useMemo(()=>r.map(U=>{const G=Zu(U.key,U.label),D=Array.from({length:24},()=>({count:0,revenue:0}));let w=0,I=0;c.forEach(V=>{if(V.payment==="キャンセル")return;const k=oA(V);if(!k)return;const ee=V.items[U.key]??0;if(ee<=0)return;const Ie=k.getHours();if(Ie<0||Ie>=D.length)return;const q=ee*U.price;D[Ie].count+=ee,D[Ie].revenue+=q,w+=ee,I+=q});const M=D.reduce((V,k,ee)=>k.count>V.count?{count:k.count,hour:ee}:V,{count:0,hour:-1}),j=D.map((V,k)=>({hour:k,count:V.count,revenue:V.revenue})).filter(V=>V.count>0);return{key:U.key,label:G,totalCount:w,totalRevenue:I,peakHour:M.count>0?M.hour:null,hourlyBreakdown:j}}),[c,r]),A=P.useMemo(()=>new Map(r.map(U=>[U.key,U])),[r]),S=P.useMemo(()=>Array.from({length:24},(U,G)=>{const D=r.map(({key:I})=>{const j=E.find(V=>V.key===I)?.hourlyBreakdown.find(V=>V.hour===G);return{key:I,count:j?.count??0}}),w=D.reduce((I,M)=>I+M.count,0);return{hour:G,total:w,segments:D}}),[r,E]),O=P.useMemo(()=>S.filter(U=>U.total>0),[S]),T=P.useMemo(()=>new Map(S.map(U=>[U.hour,U])),[S]),R=P.useMemo(()=>S.reduce((U,G)=>Math.max(U,G.total),0),[S]),L=c.length>0,z=P.useMemo(()=>X7(i,a),[i,a]);return n==="export"?m.jsxs("div",{className:"admin-grid",style:{gap:"28px"},children:[m.jsxs("section",{className:"admin-card",children:[m.jsx("h3",{children:"データエクスポート"}),m.jsx("p",{children:"注文データを CSV として出力します。期間や対象を選択してから「エクスポートを開始」ボタンを押してください。"}),m.jsxs("div",{className:"admin-toolbar",children:[m.jsxs("div",{className:"field",children:[m.jsx("label",{htmlFor:"export-range",children:"対象期間"}),m.jsxs("select",{id:"export-range",defaultValue:"today",children:[m.jsx("option",{value:"today",children:"本日"}),m.jsx("option",{value:"yesterday",children:"昨日"}),m.jsx("option",{value:"week",children:"直近 7 日"}),m.jsx("option",{value:"custom",children:"カスタム期間"})]})]}),m.jsxs("div",{className:"field",children:[m.jsx("label",{htmlFor:"export-status",children:"進捗ステータス"}),m.jsxs("select",{id:"export-status",defaultValue:"all",children:[m.jsx("option",{value:"all",children:"すべて"}),m.jsx("option",{value:"open",children:"調理済みまで"}),m.jsx("option",{value:"ready",children:"調理済みのみ"}),m.jsx("option",{value:"closed",children:"クローズ済み"})]})]})]}),m.jsx("button",{type:"button",className:"admin-primary-button",style:{width:"fit-content"},children:"エクスポートを開始"})]}),m.jsxs("section",{className:"admin-card",children:[m.jsx("h3",{children:"エクスポートのヒント"}),m.jsx("ul",{className:"admin-list",children:q7.map(U=>m.jsx("li",{children:U},U))})]})]}):m.jsxs("div",{className:"admin-grid",style:{gap:"28px"},children:[m.jsxs("section",{className:"admin-card admin-dashboard-controls",children:[m.jsxs("div",{children:[m.jsx("p",{className:"admin-content-overline",children:"集計期間"}),m.jsx("h3",{children:z})]}),m.jsx("div",{className:"admin-toolbar",style:{marginBottom:0},children:m.jsxs("div",{className:"field",children:[m.jsx("label",{htmlFor:"dashboard-range",children:"期間を選択"}),m.jsx("select",{id:"dashboard-range",value:e,onChange:U=>t(U.target.value),children:G7.map(U=>m.jsx("option",{value:U.value,children:U.label},U.value))})]})})]}),u?m.jsx("section",{className:"admin-card admin-empty-state",children:m.jsx("p",{children:"注文データを読み込んでいます…"})}):h?m.jsxs("section",{className:"admin-card admin-empty-state",children:[m.jsx("p",{children:"注文データの取得に失敗しました。"}),m.jsx("small",{children:h.message})]}):m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"admin-grid admin-metric-cards",children:[m.jsxs("article",{className:"admin-card admin-metric-card",children:[m.jsx("p",{className:"admin-content-overline",children:"総売上"}),m.jsx("h3",{className:"admin-metric-card-value",children:Xl.format(g.totalRevenue)}),m.jsx("p",{className:"admin-metric-card-helper",children:"キャンセルを除く注文の合計金額"})]}),m.jsxs("article",{className:"admin-card admin-metric-card",children:[m.jsx("p",{className:"admin-content-overline",children:"注文件数"}),m.jsxs("h3",{className:"admin-metric-card-value",children:[La.format(g.totalOrders)," 件"]}),m.jsxs("p",{className:"admin-metric-card-helper",children:["支払い済み ",La.format(g.paidOrders)," 件"]})]}),m.jsxs("article",{className:"admin-card admin-metric-card",children:[m.jsx("p",{className:"admin-content-overline",children:"平均単価"}),m.jsx("h3",{className:"admin-metric-card-value",children:Xl.format(g.averageOrderValue||0)}),m.jsx("p",{className:"admin-metric-card-helper",children:"キャンセルを除く注文から算出"})]})]}),m.jsxs("section",{className:"admin-card",children:[m.jsx("header",{className:"admin-card-header",children:m.jsxs("div",{children:[m.jsx("h3",{children:"時間帯別の推移"}),m.jsx("p",{children:"売上と件数を 1 時間ごとに集計しています。"})]})}),L?m.jsxs("table",{className:"admin-table admin-hourly-table",children:[m.jsx("thead",{children:m.jsxs("tr",{children:[m.jsx("th",{scope:"col",children:"時間帯"}),m.jsx("th",{scope:"col",children:"件数"}),m.jsx("th",{scope:"col",children:"売上"}),m.jsx("th",{scope:"col",children:"累積売上"})]})}),m.jsx("tbody",{children:p.map(U=>{const D=T.get(U.hour)?.segments??[],w={soup:0,friedBread:0,smore:0,drink:0};return D.forEach(I=>{if(!I||I.count===0)return;const M=H7[I.key];w[M]+=I.count}),m.jsxs("tr",{children:[m.jsx("td",{children:Sd(U.hour)}),m.jsx("td",{children:m.jsxs("div",{className:"admin-hourly-volume",children:[m.jsxs("span",{className:"admin-hourly-volume-count",children:[La.format(U.orderCount)," 件"]}),m.jsx("div",{className:"admin-hourly-volume-bar","aria-hidden":U.orderCount===0,children:D.map(I=>{if(!I||I.count===0)return null;const M=R>0?I.count/R*100:0;if(M<=0)return null;const j=M<4?"6px":void 0,V=M<8,k=A.get(I.key);return m.jsx("span",{className:`admin-product-sales-segment menu-item-${I.key}`,style:{width:`${M}%`,flexBasis:`${M}%`,minWidth:j},"data-compact":V?"true":void 0,title:`${Zu(I.key,k?.label??I.key)}: ${La.format(I.count)}個`,children:m.jsx("span",{className:"admin-product-sales-count",children:I.count})},I.key)})}),m.jsx("div",{className:"admin-hourly-volume-category","aria-hidden":U.orderCount===0,children:z7.map(I=>{const M=w[I];return m.jsxs("span",{"data-muted":M===0?"true":void 0,children:[U7[I]," ",La.format(M)," 個"]},I)})})]})}),m.jsxs("td",{children:[Xl.format(U.revenue),m.jsx("div",{className:"admin-trend-bar revenue",children:m.jsx("span",{style:{width:`${_>0?U.revenue/_*100:0}%`}})})]}),m.jsx("td",{children:Xl.format(U.cumulativeRevenue)})]},U.hour)})})]}):m.jsx("p",{className:"admin-empty-inline",children:"指定期間の注文はありません。"})]}),m.jsxs("section",{className:"admin-card",children:[m.jsx("header",{className:"admin-card-header",children:m.jsxs("div",{children:[m.jsx("h3",{children:"商品別の売上・数量"}),m.jsx("p",{children:"時間帯ごとの傾向も確認できます。"})]})}),L?m.jsxs(m.Fragment,{children:[m.jsxs("table",{className:"admin-table admin-product-table",children:[m.jsx("thead",{children:m.jsxs("tr",{children:[m.jsx("th",{scope:"col",children:"商品"}),m.jsx("th",{scope:"col",children:"数量"}),m.jsx("th",{scope:"col",children:"売上"}),m.jsx("th",{scope:"col",children:"ピーク時間"})]})}),m.jsx("tbody",{children:E.map(U=>m.jsxs("tr",{className:`menu-item-${U.key}`,children:[m.jsx("td",{className:"admin-product-name",children:U.label}),m.jsxs("td",{children:[La.format(U.totalCount)," 個"]}),m.jsx("td",{children:Xl.format(U.totalRevenue)}),m.jsx("td",{children:U.peakHour!=null?Sd(U.peakHour):"—"})]},U.key))})]}),O.length>0&&m.jsxs("div",{className:"admin-product-sales-chart",role:"img","aria-label":"時間帯別の商品別販売数",children:[m.jsxs("div",{className:"admin-product-sales-header",children:[m.jsx("h4",{children:"時間帯別 販売個数の内訳"}),m.jsx("div",{className:"admin-product-sales-legend","aria-hidden":"true",children:r.map(U=>m.jsxs("span",{className:`admin-product-sales-legend-item menu-item-${U.key}`,children:[m.jsx("span",{className:"admin-product-sales-legend-swatch"}),Zu(U.key,U.label)]},U.key))})]}),m.jsx("div",{className:"admin-product-sales-rows",children:O.map(U=>m.jsxs("div",{className:"admin-product-sales-row",children:[m.jsx("div",{className:"admin-product-sales-hour",children:Sd(U.hour)}),m.jsx("div",{className:"admin-product-sales-bar","aria-hidden":U.total===0,children:U.segments.map(G=>{if(G.count===0)return null;const D=G.count/U.total*100,w=D<6?"6px":void 0,I=A.get(G.key);return m.jsx("span",{className:`admin-product-sales-segment menu-item-${G.key}`,style:{width:`${D}%`,flexBasis:`${D}%`,minWidth:w},title:`${Zu(G.key,I?.label??G.key)}: ${La.format(G.count)}個`,children:m.jsx("span",{className:"admin-product-sales-count",children:G.count})},G.key)})}),m.jsxs("div",{className:"admin-product-sales-total",children:[La.format(U.total)," 個"]})]},U.hour))})]}),m.jsx("div",{className:"admin-product-breakdown",children:E.every(U=>U.hourlyBreakdown.length===0)?m.jsx("p",{className:"admin-empty-inline",children:"商品別の販売データがありません。"}):E.filter(U=>U.hourlyBreakdown.length>0).map(U=>m.jsxs("details",{className:`admin-product-breakdown-item menu-item-${U.key}`,children:[m.jsxs("summary",{children:[U.label," の時間帯別内訳"]}),m.jsxs("table",{children:[m.jsx("thead",{children:m.jsxs("tr",{children:[m.jsx("th",{scope:"col",children:"時間帯"}),m.jsx("th",{scope:"col",children:"数量"}),m.jsx("th",{scope:"col",children:"売上"})]})}),m.jsx("tbody",{children:U.hourlyBreakdown.map(G=>m.jsxs("tr",{children:[m.jsx("td",{children:Sd(G.hour)}),m.jsxs("td",{children:[La.format(G.count)," 個"]}),m.jsx("td",{children:Xl.format(G.revenue)})]},`${U.key}-${G.hour}`))})]})]},U.key))})]}):m.jsx("p",{className:"admin-empty-inline",children:"商品別の集計はデータがあるときに表示されます。"})]})]})]})}function $7(n){const e=new Date,t=new Date(e.getFullYear(),e.getMonth(),e.getDate());return n==="today"?{start:t,end:bd(t,1)}:n==="yesterday"?{start:bd(t,-1),end:t}:{start:bd(t,-6),end:bd(t,1)}}function bd(n,e){const t=new Date(n);return t.setDate(t.getDate()+e),t}function oA(n){const e=n.createdAt,t=n.updatedAt;return e instanceof Date?e:typeof e=="string"?new Date(e):t instanceof Date?t:typeof t=="string"?new Date(t):null}function Sd(n){const e=`${n.toString().padStart(2,"0")}:00`,t=n===23?"23:59":`${(n+1).toString().padStart(2,"0")}:00`;return`${e} - ${t}`}function X7(n,e){const t=new Intl.DateTimeFormat("ja-JP",{month:"numeric",day:"numeric",hour:"2-digit",minute:"2-digit"}),r=t.format(n),i=new Date(e.getTime()-1),a=t.format(i);return`${r} 〜 ${a}`}const Y7=new Intl.DateTimeFormat("ja-JP",{hour:"2-digit",minute:"2-digit"}),lA=["受注済み","調理済み","クローズ"];function K7(n){const{map:e}=so();return Object.entries(n).filter(([,r])=>r>0).map(([r,i])=>`${e[r]?.label??r}（${i}）`).join("／")||"—"}function W7(n){return n?Y7.format(n):"--:--"}function l1(n){const e=n.createdAt??n.updatedAt??null,t=n.updatedAt??null;return{id:n.orderId,callNumber:n.callNumber??0,ticket:n.ticket,items:K7(n.items??{}),total:n.total,payment:n.payment,progress:n.progress,createdAt:W7(e),createdAtDate:e,updatedAtDate:t,confirmationCode:Ai(n.orderId),raw:n,platingStatus:z9(n.items??{},n.plating)}}function Ai(n){if(!n)return"----";const e=(n.match(/[A-Za-z]/g)??[]).map(r=>r.toUpperCase());return e.length===0?"----":e.length>=4?e.slice(-4).join(""):e.join("").repeat(Math.ceil(4/e.length)).slice(-4)}function x0(n){return n==="受注済み"?"調理済み":n==="調理済み"?"クローズ":null}function E0(n){return n==="クローズ"?"調理済み":n==="調理済み"?"受注済み":null}function Q7(){const{orders:n,loading:e,error:t}=jc(),r=P.useMemo(()=>n.map(l1),[n]),[i,a]=P.useState("すべて"),[o,c]=P.useState("すべて"),[u,h]=P.useState(""),[p,g]=P.useState(null),[_,E]=P.useState(null),A=P.useMemo(()=>{const R=u.trim().toLowerCase(),L=new Map(lA.map((z,U)=>[z,U]));return r.filter(z=>i==="すべて"?!0:z.progress===i).filter(z=>o==="すべて"?!0:z.payment===o).filter(z=>R?`${z.id} ${z.ticket} ${z.callNumber} ${z.items}`.toLowerCase().includes(R):!0).sort((z,U)=>{const G=(L.get(z.progress)??0)-(L.get(U.progress)??0);if(G!==0)return G;const D=z.createdAtDate?.getTime()??0;return(U.createdAtDate?.getTime()??0)-D})},[u,o,i,r]),S=P.useCallback(async R=>{const L=x0(R.progress);if(L){g(R.id),E(null);try{await Fa(R.id,R.ticket,{payment:R.payment,progress:L})}catch(z){console.error("ステータス更新に失敗しました",z),E("ステータスの更新に失敗しました。通信環境をご確認ください。")}finally{g(null)}}},[]),O=P.useCallback(async R=>{const L=E0(R.progress);if(L){g(R.id),E(null);try{await Fa(R.id,R.ticket,{payment:R.payment,progress:L})}catch(z){console.error("ステータスを戻せませんでした",z),E("ステータスを戻せませんでした。もう一度お試しください。")}finally{g(null)}}},[]),T=P.useCallback(async()=>{E(null);try{await JT()}catch(R){console.error("CSV 出力に失敗しました",R),E("CSV の出力に失敗しました。通信環境をご確認ください。")}},[]);return e?m.jsx("p",{children:"注文データを読み込み中です…"}):m.jsxs("div",{children:[m.jsxs("div",{className:"admin-toolbar",role:"region","aria-label":"フィルタ",children:[m.jsxs("div",{className:"field",children:[m.jsx("label",{htmlFor:"order-progress",children:"進捗"}),m.jsxs("select",{id:"order-progress",value:i,onChange:R=>a(R.target.value),children:[m.jsx("option",{value:"すべて",children:"すべて"}),lA.map(R=>m.jsx("option",{value:R,children:R},R))]})]}),m.jsxs("div",{className:"field",children:[m.jsx("label",{htmlFor:"order-payment",children:"支払い"}),m.jsxs("select",{id:"order-payment",value:o,onChange:R=>c(R.target.value),children:[m.jsx("option",{value:"すべて",children:"すべて"}),S9.map(R=>m.jsx("option",{value:R,children:R},R))]})]}),m.jsxs("div",{className:"field",style:{flex:"1 1 240px"},children:[m.jsx("label",{htmlFor:"order-search",children:"検索"}),m.jsx("input",{id:"order-search",type:"search",placeholder:"呼出番号・確認コード・注文番号",value:u,onChange:R=>h(R.target.value)})]}),m.jsx("button",{type:"button",className:"admin-secondary-button",disabled:A.length===0,onClick:()=>{const R=A[0];R&&S(R).catch(()=>{})},children:"選択行を進捗更新"}),m.jsx("button",{type:"button",className:"admin-primary-button",onClick:()=>void T(),disabled:r.length===0,children:"CSV 出力"})]}),t&&m.jsx("p",{className:"admin-error",role:"alert",children:"データの取得に失敗しました。ページを再読み込みしてください。"}),_&&m.jsx("p",{className:"admin-error",role:"alert",children:_}),m.jsx("div",{style:{overflowX:"auto"},children:m.jsxs("table",{className:"admin-table",children:[m.jsx("thead",{children:m.jsxs("tr",{children:[m.jsx("th",{scope:"col",children:"時刻"}),m.jsx("th",{scope:"col",children:"注文番号"}),m.jsx("th",{scope:"col",children:"呼出番号"}),m.jsx("th",{scope:"col",children:"進捗確認コード"}),m.jsx("th",{scope:"col",children:"品目"}),m.jsx("th",{scope:"col",children:"合計"}),m.jsx("th",{scope:"col",children:"支払い"}),m.jsx("th",{scope:"col",children:"進捗"}),m.jsx("th",{scope:"col",children:"操作"})]})}),m.jsx("tbody",{children:A.map(R=>m.jsxs("tr",{children:[m.jsx("td",{children:R.createdAt}),m.jsx("td",{children:R.id}),m.jsx("td",{children:R.callNumber}),m.jsx("td",{children:R.ticket}),m.jsx("td",{children:R.items}),m.jsxs("td",{children:[R.total.toLocaleString()," 円"]}),m.jsx("td",{children:m.jsx("span",{className:R.payment==="支払い済み"?"admin-status-badge success":R.payment==="未払い"?"admin-status-badge warning":"admin-status-badge neutral",children:R.payment})}),m.jsx("td",{children:m.jsx("span",{className:"admin-status-badge",children:R.progress})}),m.jsx("td",{children:m.jsxs("div",{style:{display:"flex",gap:8},children:[m.jsx("button",{type:"button",className:"admin-secondary-button",onClick:()=>S(R),disabled:p===R.id||x0(R.progress)===null,children:"次のステータスへ"}),m.jsx("button",{type:"button",className:"admin-secondary-button",onClick:()=>O(R),disabled:p===R.id||E0(R.progress)===null,children:"戻す"})]})})]},R.id))})]})}),A.length===0&&m.jsx("p",{style:{marginTop:18,color:"#64748b"},children:"該当する注文はありません。"}),m.jsx("p",{style:{marginTop:18,color:"#64748b"},children:"Firestore の注文データをリアルタイムに表示しています。操作すると全スタッフに即時反映されます。"})]})}function Z7(n,e){return n===0?"is-zero":e==="ready"?"is-complete":"is-pending"}function Cf(n){const e=n.raw.items??{},{list:t,map:r}=so();return t.map(i=>{const a=e[i.key]??0,o=F9(i.key),c=o?n.platingStatus[o]??"ready":"ready",u=Z7(a,c);return{key:i.key,label:Zu(i.key,r[i.key].label),quantity:a,stateClass:u}})}function Wg({entries:n,showTotal:e=!0,totalAriaLabel:t="合計数量",variant:r="default",className:i}){const a=n.reduce((c,u)=>c+u.quantity,0),o=["admin-order-items-inline",r==="compact"?"compact":null,i].filter(Boolean).join(" ");return m.jsxs("div",{className:o,children:[m.jsx("div",{className:"admin-production-items-card",role:"presentation",children:m.jsx("div",{className:"admin-production-items-grid",children:n.map(c=>m.jsxs("div",{className:"admin-production-item-cell",children:[m.jsx("span",{className:`admin-production-item-label menu-item-${c.key}`,children:c.label}),m.jsx("span",{className:`admin-production-quantity ${c.stateClass} menu-item-${c.key}`,"data-menu-item":c.key,children:c.quantity})]},c.key))})}),e&&m.jsx("div",{className:"admin-production-total-quantity","aria-label":t,children:a})]})}const J7=[{key:"ordered",label:"受注済み",hint:"受付済み・仕込み待ち",statuses:["受注済み"]},{key:"plating",label:"調理済み",hint:"お渡し待ち",statuses:["調理済み"]}],eP=[{key:"summary",label:"全体",icon:"📋"},...Ri.map(n=>({key:n.key,label:n.label,icon:n.icon}))];function tP(n){return n?Ri.some(e=>e.key===n):!1}const e3=(n,e)=>`${n}:${e}`;function nP(){const n=P.useMemo(()=>{const w=new Date;w.setHours(0,0,0,0);const I=new Date(w);return I.setDate(I.getDate()+1),{start:w,end:I}},[]),{orders:e,loading:t,error:r}=jc(n),i=P.useMemo(()=>e.map(l1),[e]),[a,o]=P.useState(null),[c,u]=P.useState(null),[h,p]=P.useState(null),[g,_]=bv(),E=g.get("view"),A=E==="summary"?"summary":tP(E)?E:"summary",S=A==="summary"?null:Ri.find(w=>w.key===A)??null,O=P.useCallback(w=>{p(null),_(I=>{const M=new URLSearchParams(I);return w==="summary"?M.delete("view"):M.set("view",w),M})},[p,_]),T=P.useMemo(()=>J7.map(w=>({...w,orders:i.filter(I=>w.statuses.includes(I.progress)).sort((I,M)=>{const j=I.createdAtDate?.getTime()??0,V=M.createdAtDate?.getTime()??0;return j-V})})),[i]),R=P.useMemo(()=>({ordered:T.find(w=>w.key==="ordered")?.orders.length??0,plating:T.find(w=>w.key==="plating")?.orders.length??0}),[T]),L=P.useMemo(()=>{const w={potaufeu:{pending:[],ready:[]},friedBread:{pending:[],ready:[]}};i.forEach(M=>{if(M.progress==="クローズ")return;const j=M.raw.items??{};Ri.forEach(V=>{if($T(j,V.key)===0)return;const Ie=(M.platingStatus[V.key]??"ready")==="ready"?"ready":"pending";w[V.key][Ie].push(M)})});const I=(M,j)=>(M.createdAtDate?.getTime()??0)-(j.createdAtDate?.getTime()??0);return Ri.forEach(M=>{w[M.key].pending.sort(I),w[M.key].ready.sort(I)}),w},[i]),z=P.useCallback(async w=>{const I=x0(w.progress);if(I){o(w.id),p(null);try{if(w.progress==="受注済み"){const M=uA(w,!0);Object.keys(M).length>0&&await Pm(w.id,w.ticket,M)}await Fa(w.id,w.ticket,{progress:I,payment:w.payment})}catch(M){console.error("ステータス更新に失敗しました",M),p("ステータスの更新に失敗しました。通信環境をご確認ください。")}finally{o(null)}}},[]),U=P.useCallback(async w=>{const I=E0(w.progress);if(I){o(w.id),p(null);try{if(w.progress==="調理済み"&&I==="受注済み"){const M=uA(w,!1);Object.keys(M).length>0&&await Pm(w.id,w.ticket,M)}await Fa(w.id,w.ticket,{progress:I,payment:w.payment})}catch(M){console.error("ステータスを戻せませんでした",M),p("ステータスを戻せませんでした。もう一度お試しください。")}finally{o(null)}}},[]),G=P.useCallback(async(w,I,M)=>{const j=e3(w.id,I);u(j),p(null);try{await Pm(w.id,w.ticket,{[I]:M});const V=w.raw.items??{},k={...w.platingStatus,[I]:M?"ready":"pending"};H9(V,k)&&w.progress==="受注済み"?await Fa(w.id,w.ticket,{progress:"調理済み",payment:w.payment}):!M&&w.progress==="調理済み"&&await Fa(w.id,w.ticket,{progress:"受注済み",payment:w.payment})}catch(V){console.error("盛り付け状況の更新に失敗しました",V),p("盛り付け状況の更新に失敗しました。通信環境をご確認ください。")}finally{u(null)}},[p]),D=P.useCallback(async()=>{p(null);try{await JT()}catch(w){console.error("CSV 出力に失敗しました",w),p("CSV の出力に失敗しました。通信環境をご確認ください。")}},[]);return t?m.jsx("p",{children:"注文データを読み込み中です…"}):m.jsxs("div",{className:"admin-production-page",children:[m.jsxs("div",{className:"admin-production-toolbar",role:"region","aria-label":"現在の注文サマリー",children:[m.jsxs("div",{className:"admin-production-summary",children:[m.jsx("p",{className:"admin-production-summary-title",children:"受注済み"}),m.jsxs("p",{className:"admin-production-summary-count",children:[R.ordered,"件"]}),m.jsx("p",{className:"admin-production-summary-hint",children:"受付済み・仕込み待ち"})]}),m.jsxs("div",{className:"admin-production-summary",children:[m.jsx("p",{className:"admin-production-summary-title",children:"調理済み"}),m.jsxs("p",{className:"admin-production-summary-count",children:[R.plating,"件"]}),m.jsx("p",{className:"admin-production-summary-hint",children:"お渡し待ち／クローズ済み"})]})]}),m.jsx("nav",{className:"admin-production-view-tabs",role:"tablist","aria-label":"盛り付けビュー選択",children:eP.map(w=>{const I=w.key===A,M=w.key!=="summary",j=M?L[w.key].pending.length:0;return m.jsxs("button",{type:"button",role:"tab",className:`admin-production-view-tab${I?" is-active":""}`,"aria-selected":I,onClick:()=>O(w.key),children:[m.jsxs("span",{className:"admin-production-view-tab-label",children:[m.jsx("span",{className:"admin-production-view-tab-icon","aria-hidden":"true",children:w.icon}),m.jsx("span",{className:"admin-production-view-tab-text",children:w.label})]}),M&&j>0&&m.jsx("span",{className:"admin-production-view-tab-count",children:m.jsx("span",{className:"admin-production-badge",children:j})})]},w.key)})}),A==="summary"?m.jsxs("div",{className:"admin-production-table",role:"table","aria-label":"全体の盛り付け状況",children:[m.jsx("div",{className:"admin-production-table-header",role:"row",children:T.map(w=>m.jsxs("div",{className:"admin-production-table-header-cell",role:"columnheader",children:[m.jsxs("div",{children:[m.jsx("h2",{children:w.label}),m.jsx("p",{children:w.hint})]}),m.jsx("span",{className:"admin-production-badge",children:w.orders.length})]},w.key))}),m.jsx("div",{className:"admin-production-table-body",children:T.map(w=>m.jsx("section",{className:"admin-production-table-column","aria-label":w.label,role:"rowgroup",children:m.jsxs("div",{className:"admin-production-table-list",children:[w.orders.map(I=>{const M=!!x0(I.progress),j=!!E0(I.progress);return m.jsx(rP,{order:I,onForward:()=>{z(I)},onBack:()=>{U(I)},allowForward:M,allowBack:j,busy:a===I.id},I.id)}),w.orders.length===0&&m.jsx("p",{className:"admin-production-empty",children:"対象の注文はありません。"})]})},w.key))})]}):S&&m.jsx(iP,{category:S,orders:L[S.key],busyKey:c,onUpdate:(w,I)=>G(w,S.key,I)}),r&&m.jsx("p",{className:"admin-error",role:"alert",children:"データの取得に失敗しました。ページを再読み込みしてください。"}),h&&m.jsx("p",{className:"admin-error",role:"alert",children:h}),m.jsx("div",{style:{marginTop:16},children:m.jsx("button",{type:"button",className:"admin-secondary-button",onClick:()=>void D(),disabled:i.length===0,children:"CSV 出力"})})]})}function rP({order:n,onForward:e,onBack:t,allowForward:r,allowBack:i,busy:a}){if(n.progress==="調理済み"||n.progress==="クローズ")return m.jsx("article",{className:"admin-production-row admin-production-row--compact",children:m.jsx("div",{className:"admin-production-row-main",children:m.jsxs("div",{className:"admin-production-row-compact",children:[m.jsx("span",{className:"admin-payment-ticket badge admin-production-ticket-compact","aria-label":`呼出番号 ${n.callNumber}`,children:n.callNumber}),m.jsxs("div",{className:"admin-production-row-actions admin-production-row-actions--compact",children:[m.jsx("button",{type:"button",className:"admin-production-button ghost",onClick:t,disabled:!i||a,children:"← 戻す"}),m.jsx("button",{type:"button",className:"admin-production-button primary",onClick:e,disabled:!r||a,children:"進める →"})]})]})})});const c=Cf(n),u=c.reduce((h,p)=>h+p.quantity,0);return m.jsx("article",{className:"admin-production-row",children:m.jsx("div",{className:"admin-production-row-main",children:m.jsxs("div",{className:"admin-production-row-inline",children:[m.jsx("div",{className:"admin-production-ticket-block","aria-label":`呼出番号 ${n.callNumber}`,children:m.jsx("span",{className:"admin-payment-ticket badge",children:n.callNumber})}),m.jsx("div",{className:"admin-production-items-card",role:"presentation",children:m.jsx("div",{className:"admin-production-items-grid",children:c.map(h=>m.jsxs("div",{className:"admin-production-item-cell",children:[m.jsx("span",{className:"admin-production-item-label",children:h.label}),m.jsx("span",{className:`admin-production-quantity ${h.stateClass}`,children:h.quantity})]},h.key))})}),m.jsx("div",{className:"admin-production-total-quantity","aria-label":"合計数量",children:u}),m.jsxs("div",{className:"admin-production-row-actions",children:[m.jsx("button",{type:"button",className:"admin-production-button ghost",onClick:t,disabled:!i||a,children:"← 戻す"}),m.jsx("button",{type:"button",className:"admin-production-button primary",onClick:e,disabled:!r||a,children:"進める →"})]})]})})})}function iP({category:n,orders:e,busyKey:t,onUpdate:r}){const i=`${n.label}の盛り付け待ち`,a=`${n.label}の盛り付け完了`;return m.jsxs("div",{className:"admin-production-table",role:"table","aria-label":`${n.label}の盛り付け状況`,children:[m.jsxs("div",{className:"admin-production-table-header",role:"row",children:[m.jsxs("div",{className:"admin-production-table-header-cell",role:"columnheader",children:[m.jsxs("div",{children:[m.jsx("h2",{children:i}),m.jsx("p",{children:"キッチンから受け取った順に表示されます。"})]}),m.jsx("span",{className:"admin-production-badge",children:e.pending.length})]}),m.jsxs("div",{className:"admin-production-table-header-cell",role:"columnheader",children:[m.jsxs("div",{children:[m.jsx("h2",{children:a}),m.jsx("p",{children:"盛り付け済みで引き渡し待ちの注文です。"})]}),m.jsx("span",{className:"admin-production-badge",children:e.ready.length})]})]}),m.jsxs("div",{className:"admin-production-table-body",children:[m.jsx("section",{className:"admin-production-table-column","aria-label":i,role:"rowgroup",children:m.jsxs("div",{className:"admin-production-table-list",children:[e.pending.map(o=>m.jsx(cA,{order:o,category:n,status:"pending",busyKey:t,onUpdate:c=>r(o,c)},o.id)),e.pending.length===0&&m.jsx("p",{className:"admin-production-empty",children:"盛り付け待ちの注文はありません。"})]})}),m.jsx("section",{className:"admin-production-table-column","aria-label":a,role:"rowgroup",children:m.jsxs("div",{className:"admin-production-table-list",children:[e.ready.map(o=>m.jsx(cA,{order:o,category:n,status:"ready",busyKey:t,onUpdate:c=>r(o,c)},o.id)),e.ready.length===0&&m.jsx("p",{className:"admin-production-empty",children:"盛り付け済みの注文はありません。"})]})})]})]})}function cA({order:n,category:e,status:t,busyKey:r,onUpdate:i}){const a=r===e3(n.id,e.key);if(t==="ready")return m.jsx("article",{className:"admin-production-row admin-production-row--compact",children:m.jsx("div",{className:"admin-production-row-main",children:m.jsxs("div",{className:"admin-production-row-compact",children:[m.jsx("span",{className:"admin-payment-ticket badge admin-production-ticket-compact","aria-label":`呼出番号 ${n.callNumber}`,children:n.callNumber}),m.jsx("div",{className:"admin-production-row-actions admin-production-row-actions--compact",children:m.jsx("button",{type:"button",className:"admin-production-button ghost",onClick:()=>{i(!1)},disabled:a,children:"← 未完了に戻す"})})]})})});const o=Cf(n).filter(u=>e.itemKeys.includes(u.key)),c=o.reduce((u,h)=>u+h.quantity,0);return m.jsx("article",{className:"admin-production-row",children:m.jsx("div",{className:"admin-production-row-main",children:m.jsxs("div",{className:"admin-production-row-inline",children:[m.jsx("div",{className:"admin-production-ticket-block","aria-label":`呼出番号 ${n.callNumber}`,children:m.jsx("span",{className:"admin-payment-ticket badge",children:n.callNumber})}),m.jsx("div",{className:"admin-production-items-card",role:"presentation",children:m.jsx("div",{className:"admin-production-items-grid",children:o.map(u=>m.jsxs("div",{className:"admin-production-item-cell",children:[m.jsx("span",{className:"admin-production-item-label",children:u.label}),m.jsx("span",{className:`admin-production-quantity ${u.stateClass}`,children:u.quantity})]},u.key))})}),m.jsx("div",{className:"admin-production-total-quantity","aria-label":"対象数量",children:c}),m.jsx("div",{className:"admin-production-row-actions",children:m.jsx("button",{type:"button",className:"admin-production-button primary",onClick:()=>{i(!0)},disabled:a,children:"盛り付け完了 →"})})]})})})}function uA(n,e){const t=n.raw.items??{},r={};return Ri.forEach(i=>{$T(t,i.key)>0&&(r[i.key]=e)}),r}function aP(n,e){var t=Object.setPrototypeOf;t?t(n,e):n.__proto__=e}function sP(n,e){e===void 0&&(e=n.constructor);var t=Error.captureStackTrace;t&&t(n,e)}var oP=(function(){var n=function(t,r){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(i[o]=a[o])},n(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),lP=(function(n){oP(e,n);function e(t,r){var i=this.constructor,a=n.call(this,t,r)||this;return Object.defineProperty(a,"name",{value:i.name,enumerable:!1,configurable:!0}),aP(a,i.prototype),sP(a),a}return e})(Error),cP=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Tr=(function(n){cP(e,n);function e(t){t===void 0&&(t=void 0);var r=n.call(this,t)||this;return r.message=t,r}return e.prototype.getKind=function(){var t=this.constructor;return t.kind},e.kind="Exception",e})(lP),uP=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),rn=(function(n){uP(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="ArgumentException",e})(Tr),fP=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Pe=(function(n){fP(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="IllegalArgumentException",e})(Tr),t3=(function(){function n(e){if(this.binarizer=e,e===null)throw new Pe("Binarizer must be non-null.")}return n.prototype.getWidth=function(){return this.binarizer.getWidth()},n.prototype.getHeight=function(){return this.binarizer.getHeight()},n.prototype.getBlackRow=function(e,t){return this.binarizer.getBlackRow(e,t)},n.prototype.getBlackMatrix=function(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix},n.prototype.isCropSupported=function(){return this.binarizer.getLuminanceSource().isCropSupported()},n.prototype.crop=function(e,t,r,i){var a=this.binarizer.getLuminanceSource().crop(e,t,r,i);return new n(this.binarizer.createBinarizer(a))},n.prototype.isRotateSupported=function(){return this.binarizer.getLuminanceSource().isRotateSupported()},n.prototype.rotateCounterClockwise=function(){var e=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new n(this.binarizer.createBinarizer(e))},n.prototype.rotateCounterClockwise45=function(){var e=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new n(this.binarizer.createBinarizer(e))},n.prototype.toString=function(){try{return this.getBlackMatrix().toString()}catch{return""}},n})(),hP=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),_n=(function(n){hP(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.getChecksumInstance=function(){return new e},e.kind="ChecksumException",e})(Tr),dP=(function(){function n(e){this.source=e}return n.prototype.getLuminanceSource=function(){return this.source},n.prototype.getWidth=function(){return this.source.getWidth()},n.prototype.getHeight=function(){return this.source.getHeight()},n})(),Pt=(function(){function n(){}return n.arraycopy=function(e,t,r,i,a){for(;a--;)r[i++]=e[t++]},n.currentTimeMillis=function(){return Date.now()},n})(),pP=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Ny=(function(n){pP(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="IndexOutOfBoundsException",e})(Tr),mP=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),fA=(function(n){mP(e,n);function e(t,r){t===void 0&&(t=void 0),r===void 0&&(r=void 0);var i=n.call(this,r)||this;return i.index=t,i.message=r,i}return e.kind="ArrayIndexOutOfBoundsException",e})(Ny),gP=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Cn=(function(){function n(){}return n.fill=function(e,t){for(var r=0,i=e.length;r<i;r++)e[r]=t},n.fillWithin=function(e,t,r,i){n.rangeCheck(e.length,t,r);for(var a=t;a<r;a++)e[a]=i},n.rangeCheck=function(e,t,r){if(t>r)throw new Pe("fromIndex("+t+") > toIndex("+r+")");if(t<0)throw new fA(t);if(r>e)throw new fA(r)},n.asList=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e},n.create=function(e,t,r){var i=Array.from({length:e});return i.map(function(a){return Array.from({length:t}).fill(r)})},n.createInt32Array=function(e,t,r){var i=Array.from({length:e});return i.map(function(a){return Int32Array.from({length:t}).fill(r)})},n.equals=function(e,t){if(!e||!t||!e.length||!t.length||e.length!==t.length)return!1;for(var r=0,i=e.length;r<i;r++)if(e[r]!==t[r])return!1;return!0},n.hashCode=function(e){var t,r;if(e===null)return 0;var i=1;try{for(var a=gP(e),o=a.next();!o.done;o=a.next()){var c=o.value;i=31*i+c}}catch(u){t={error:u}}finally{try{o&&!o.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}return i},n.fillUint8Array=function(e,t){for(var r=0;r!==e.length;r++)e[r]=t},n.copyOf=function(e,t){return e.slice(0,t)},n.copyOfUint8Array=function(e,t){if(e.length<=t){var r=new Uint8Array(t);return r.set(e),r}return e.slice(0,t)},n.copyOfRange=function(e,t,r){var i=r-t,a=new Int32Array(i);return Pt.arraycopy(e,t,a,0,i),a},n.binarySearch=function(e,t,r){r===void 0&&(r=n.numberComparator);for(var i=0,a=e.length-1;i<=a;){var o=a+i>>1,c=r(t,e[o]);if(c>0)i=o+1;else if(c<0)a=o-1;else return o}return-i-1},n.numberComparator=function(e,t){return e-t},n})(),Xe=(function(){function n(){}return n.numberOfTrailingZeros=function(e){var t;if(e===0)return 32;var r=31;return t=e<<16,t!==0&&(r-=16,e=t),t=e<<8,t!==0&&(r-=8,e=t),t=e<<4,t!==0&&(r-=4,e=t),t=e<<2,t!==0&&(r-=2,e=t),r-(e<<1>>>31)},n.numberOfLeadingZeros=function(e){if(e===0)return 32;var t=1;return e>>>16||(t+=16,e<<=16),e>>>24||(t+=8,e<<=8),e>>>28||(t+=4,e<<=4),e>>>30||(t+=2,e<<=2),t-=e>>>31,t},n.toHexString=function(e){return e.toString(16)},n.toBinaryString=function(e){return String(parseInt(String(e),2))},n.bitCount=function(e){return e=e-(e>>>1&1431655765),e=(e&858993459)+(e>>>2&858993459),e=e+(e>>>4)&252645135,e=e+(e>>>8),e=e+(e>>>16),e&63},n.truncDivision=function(e,t){return Math.trunc(e/t)},n.parseInt=function(e,t){return t===void 0&&(t=void 0),parseInt(e,t)},n.MIN_VALUE_32_BITS=-2147483648,n.MAX_VALUE=Number.MAX_SAFE_INTEGER,n})(),jn=(function(){function n(e,t){e===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=e,t==null?this.bits=n.makeArray(e):this.bits=t)}return n.prototype.getSize=function(){return this.size},n.prototype.getSizeInBytes=function(){return Math.floor((this.size+7)/8)},n.prototype.ensureCapacity=function(e){if(e>this.bits.length*32){var t=n.makeArray(e);Pt.arraycopy(this.bits,0,t,0,this.bits.length),this.bits=t}},n.prototype.get=function(e){return(this.bits[Math.floor(e/32)]&1<<(e&31))!==0},n.prototype.set=function(e){this.bits[Math.floor(e/32)]|=1<<(e&31)},n.prototype.flip=function(e){this.bits[Math.floor(e/32)]^=1<<(e&31)},n.prototype.getNextSet=function(e){var t=this.size;if(e>=t)return t;var r=this.bits,i=Math.floor(e/32),a=r[i];a&=~((1<<(e&31))-1);for(var o=r.length;a===0;){if(++i===o)return t;a=r[i]}var c=i*32+Xe.numberOfTrailingZeros(a);return c>t?t:c},n.prototype.getNextUnset=function(e){var t=this.size;if(e>=t)return t;var r=this.bits,i=Math.floor(e/32),a=~r[i];a&=~((1<<(e&31))-1);for(var o=r.length;a===0;){if(++i===o)return t;a=~r[i]}var c=i*32+Xe.numberOfTrailingZeros(a);return c>t?t:c},n.prototype.setBulk=function(e,t){this.bits[Math.floor(e/32)]=t},n.prototype.setRange=function(e,t){if(t<e||e<0||t>this.size)throw new Pe;if(t!==e){t--;for(var r=Math.floor(e/32),i=Math.floor(t/32),a=this.bits,o=r;o<=i;o++){var c=o>r?0:e&31,u=o<i?31:t&31,h=(2<<u)-(1<<c);a[o]|=h}}},n.prototype.clear=function(){for(var e=this.bits.length,t=this.bits,r=0;r<e;r++)t[r]=0},n.prototype.isRange=function(e,t,r){if(t<e||e<0||t>this.size)throw new Pe;if(t===e)return!0;t--;for(var i=Math.floor(e/32),a=Math.floor(t/32),o=this.bits,c=i;c<=a;c++){var u=c>i?0:e&31,h=c<a?31:t&31,p=(2<<h)-(1<<u)&4294967295;if((o[c]&p)!==(r?p:0))return!1}return!0},n.prototype.appendBit=function(e){this.ensureCapacity(this.size+1),e&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++},n.prototype.appendBits=function(e,t){if(t<0||t>32)throw new Pe("Num bits must be between 0 and 32");this.ensureCapacity(this.size+t);for(var r=t;r>0;r--)this.appendBit((e>>r-1&1)===1)},n.prototype.appendBitArray=function(e){var t=e.size;this.ensureCapacity(this.size+t);for(var r=0;r<t;r++)this.appendBit(e.get(r))},n.prototype.xor=function(e){if(this.size!==e.size)throw new Pe("Sizes don't match");for(var t=this.bits,r=0,i=t.length;r<i;r++)t[r]^=e.bits[r]},n.prototype.toBytes=function(e,t,r,i){for(var a=0;a<i;a++){for(var o=0,c=0;c<8;c++)this.get(e)&&(o|=1<<7-c),e++;t[r+a]=o}},n.prototype.getBitArray=function(){return this.bits},n.prototype.reverse=function(){for(var e=new Int32Array(this.bits.length),t=Math.floor((this.size-1)/32),r=t+1,i=this.bits,a=0;a<r;a++){var o=i[a];o=o>>1&1431655765|(o&1431655765)<<1,o=o>>2&858993459|(o&858993459)<<2,o=o>>4&252645135|(o&252645135)<<4,o=o>>8&16711935|(o&16711935)<<8,o=o>>16&65535|(o&65535)<<16,e[t-a]=o}if(this.size!==r*32){for(var c=r*32-this.size,u=e[0]>>>c,a=1;a<r;a++){var h=e[a];u|=h<<32-c,e[a-1]=u,u=h>>>c}e[r-1]=u}this.bits=e},n.makeArray=function(e){return new Int32Array(Math.floor((e+31)/32))},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.size===t.size&&Cn.equals(this.bits,t.bits)},n.prototype.hashCode=function(){return 31*this.size+Cn.hashCode(this.bits)},n.prototype.toString=function(){for(var e="",t=0,r=this.size;t<r;t++)(t&7)===0&&(e+=" "),e+=this.get(t)?"X":".";return e},n.prototype.clone=function(){return new n(this.size,this.bits.slice())},n.prototype.toArray=function(){for(var e=[],t=0,r=this.size;t<r;t++)e.push(this.get(t));return e},n})(),Qg;(function(n){n[n.OTHER=0]="OTHER",n[n.PURE_BARCODE=1]="PURE_BARCODE",n[n.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",n[n.TRY_HARDER=3]="TRY_HARDER",n[n.CHARACTER_SET=4]="CHARACTER_SET",n[n.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",n[n.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",n[n.ENABLE_CODE_39_EXTENDED_MODE=7]="ENABLE_CODE_39_EXTENDED_MODE",n[n.ASSUME_GS1=8]="ASSUME_GS1",n[n.RETURN_CODABAR_START_END=9]="RETURN_CODABAR_START_END",n[n.NEED_RESULT_POINT_CALLBACK=10]="NEED_RESULT_POINT_CALLBACK",n[n.ALLOWED_EAN_EXTENSIONS=11]="ALLOWED_EAN_EXTENSIONS"})(Qg||(Qg={}));const kt=Qg;var vP=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),ye=(function(n){vP(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.getFormatInstance=function(){return new e},e.kind="FormatException",e})(Tr),yP=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Et;(function(n){n[n.Cp437=0]="Cp437",n[n.ISO8859_1=1]="ISO8859_1",n[n.ISO8859_2=2]="ISO8859_2",n[n.ISO8859_3=3]="ISO8859_3",n[n.ISO8859_4=4]="ISO8859_4",n[n.ISO8859_5=5]="ISO8859_5",n[n.ISO8859_6=6]="ISO8859_6",n[n.ISO8859_7=7]="ISO8859_7",n[n.ISO8859_8=8]="ISO8859_8",n[n.ISO8859_9=9]="ISO8859_9",n[n.ISO8859_10=10]="ISO8859_10",n[n.ISO8859_11=11]="ISO8859_11",n[n.ISO8859_13=12]="ISO8859_13",n[n.ISO8859_14=13]="ISO8859_14",n[n.ISO8859_15=14]="ISO8859_15",n[n.ISO8859_16=15]="ISO8859_16",n[n.SJIS=16]="SJIS",n[n.Cp1250=17]="Cp1250",n[n.Cp1251=18]="Cp1251",n[n.Cp1252=19]="Cp1252",n[n.Cp1256=20]="Cp1256",n[n.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",n[n.UTF8=22]="UTF8",n[n.ASCII=23]="ASCII",n[n.Big5=24]="Big5",n[n.GB18030=25]="GB18030",n[n.EUC_KR=26]="EUC_KR"})(Et||(Et={}));var Sn=(function(){function n(e,t,r){for(var i,a,o=[],c=3;c<arguments.length;c++)o[c-3]=arguments[c];this.valueIdentifier=e,this.name=r,typeof t=="number"?this.values=Int32Array.from([t]):this.values=t,this.otherEncodingNames=o,n.VALUE_IDENTIFIER_TO_ECI.set(e,this),n.NAME_TO_ECI.set(r,this);for(var u=this.values,h=0,p=u.length;h!==p;h++){var g=u[h];n.VALUES_TO_ECI.set(g,this)}try{for(var _=yP(o),E=_.next();!E.done;E=_.next()){var A=E.value;n.NAME_TO_ECI.set(A,this)}}catch(S){i={error:S}}finally{try{E&&!E.done&&(a=_.return)&&a.call(_)}finally{if(i)throw i.error}}}return n.prototype.getValueIdentifier=function(){return this.valueIdentifier},n.prototype.getName=function(){return this.name},n.prototype.getValue=function(){return this.values[0]},n.getCharacterSetECIByValue=function(e){if(e<0||e>=900)throw new ye("incorect value");var t=n.VALUES_TO_ECI.get(e);if(t===void 0)throw new ye("incorect value");return t},n.getCharacterSetECIByName=function(e){var t=n.NAME_TO_ECI.get(e);if(t===void 0)throw new ye("incorect value");return t},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.getName()===t.getName()},n.VALUE_IDENTIFIER_TO_ECI=new Map,n.VALUES_TO_ECI=new Map,n.NAME_TO_ECI=new Map,n.Cp437=new n(Et.Cp437,Int32Array.from([0,2]),"Cp437"),n.ISO8859_1=new n(Et.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),n.ISO8859_2=new n(Et.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),n.ISO8859_3=new n(Et.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),n.ISO8859_4=new n(Et.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),n.ISO8859_5=new n(Et.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),n.ISO8859_6=new n(Et.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),n.ISO8859_7=new n(Et.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),n.ISO8859_8=new n(Et.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),n.ISO8859_9=new n(Et.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),n.ISO8859_10=new n(Et.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),n.ISO8859_11=new n(Et.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),n.ISO8859_13=new n(Et.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),n.ISO8859_14=new n(Et.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),n.ISO8859_15=new n(Et.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),n.ISO8859_16=new n(Et.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),n.SJIS=new n(Et.SJIS,20,"SJIS","Shift_JIS"),n.Cp1250=new n(Et.Cp1250,21,"Cp1250","windows-1250"),n.Cp1251=new n(Et.Cp1251,22,"Cp1251","windows-1251"),n.Cp1252=new n(Et.Cp1252,23,"Cp1252","windows-1252"),n.Cp1256=new n(Et.Cp1256,24,"Cp1256","windows-1256"),n.UnicodeBigUnmarked=new n(Et.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),n.UTF8=new n(Et.UTF8,26,"UTF8","UTF-8"),n.ASCII=new n(Et.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),n.Big5=new n(Et.Big5,28,"Big5"),n.GB18030=new n(Et.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),n.EUC_KR=new n(Et.EUC_KR,30,"EUC_KR","EUC-KR"),n})(),_P=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),qd=(function(n){_P(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="UnsupportedOperationException",e})(Tr),oi=(function(){function n(){}return n.decode=function(e,t){var r=this.encodingName(t);return this.customDecoder?this.customDecoder(e,r):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(r)?this.decodeFallback(e,r):new TextDecoder(r).decode(e)},n.shouldDecodeOnFallback=function(e){return!n.isBrowser()&&e==="ISO-8859-1"},n.encode=function(e,t){var r=this.encodingName(t);return this.customEncoder?this.customEncoder(e,r):typeof TextEncoder>"u"?this.encodeFallback(e):new TextEncoder().encode(e)},n.isBrowser=function(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"},n.encodingName=function(e){return typeof e=="string"?e:e.getName()},n.encodingCharacterSet=function(e){return e instanceof Sn?e:Sn.getCharacterSetECIByName(e)},n.decodeFallback=function(e,t){var r=this.encodingCharacterSet(t);if(n.isDecodeFallbackSupported(r)){for(var i="",a=0,o=e.length;a<o;a++){var c=e[a].toString(16);c.length<2&&(c="0"+c),i+="%"+c}return decodeURIComponent(i)}if(r.equals(Sn.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(e.buffer));throw new qd("Encoding "+this.encodingName(t)+" not supported by fallback.")},n.isDecodeFallbackSupported=function(e){return e.equals(Sn.UTF8)||e.equals(Sn.ISO8859_1)||e.equals(Sn.ASCII)},n.encodeFallback=function(e){for(var t=btoa(unescape(encodeURIComponent(e))),r=t.split(""),i=[],a=0;a<r.length;a++)i.push(r[a].charCodeAt(0));return new Uint8Array(i)},n})(),at=(function(){function n(){}return n.castAsNonUtf8Char=function(e,t){t===void 0&&(t=null);var r=t?t.getName():this.ISO88591;return oi.decode(new Uint8Array([e]),r)},n.guessEncoding=function(e,t){if(t!=null&&t.get(kt.CHARACTER_SET)!==void 0)return t.get(kt.CHARACTER_SET).toString();for(var r=e.length,i=!0,a=!0,o=!0,c=0,u=0,h=0,p=0,g=0,_=0,E=0,A=0,S=0,O=0,T=0,R=e.length>3&&e[0]===239&&e[1]===187&&e[2]===191,L=0;L<r&&(i||a||o);L++){var z=e[L]&255;o&&(c>0?(z&128)===0?o=!1:c--:(z&128)!==0&&((z&64)===0?o=!1:(c++,(z&32)===0?u++:(c++,(z&16)===0?h++:(c++,(z&8)===0?p++:o=!1))))),i&&(z>127&&z<160?i=!1:z>159&&(z<192||z===215||z===247)&&T++),a&&(g>0?z<64||z===127||z>252?a=!1:g--:z===128||z===160||z>239?a=!1:z>160&&z<224?(_++,A=0,E++,E>S&&(S=E)):z>127?(g++,E=0,A++,A>O&&(O=A)):(E=0,A=0))}return o&&c>0&&(o=!1),a&&g>0&&(a=!1),o&&(R||u+h+p>0)?n.UTF8:a&&(n.ASSUME_SHIFT_JIS||S>=3||O>=3)?n.SHIFT_JIS:i&&a?S===2&&_===2||T*10>=r?n.SHIFT_JIS:n.ISO88591:i?n.ISO88591:a?n.SHIFT_JIS:o?n.UTF8:n.PLATFORM_DEFAULT_ENCODING},n.format=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var i=-1;function a(c,u,h,p,g,_){if(c==="%%")return"%";if(t[++i]!==void 0){c=p?parseInt(p.substr(1)):void 0;var E=g?parseInt(g.substr(1)):void 0,A;switch(_){case"s":A=t[i];break;case"c":A=t[i][0];break;case"f":A=parseFloat(t[i]).toFixed(c);break;case"p":A=parseFloat(t[i]).toPrecision(c);break;case"e":A=parseFloat(t[i]).toExponential(c);break;case"x":A=parseInt(t[i]).toString(E||16);break;case"d":A=parseFloat(parseInt(t[i],E||10).toPrecision(c)).toFixed(0);break}A=typeof A=="object"?JSON.stringify(A):(+A).toString(E);for(var S=parseInt(h),O=h&&h[0]+""=="0"?"0":" ";A.length<S;)A=u!==void 0?A+O:O+A;return A}}var o=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(o,a)},n.getBytes=function(e,t){return oi.encode(e,t)},n.getCharCode=function(e,t){return t===void 0&&(t=0),e.charCodeAt(t)},n.getCharAt=function(e){return String.fromCharCode(e)},n.SHIFT_JIS=Sn.SJIS.getName(),n.GB2312="GB2312",n.ISO88591=Sn.ISO8859_1.getName(),n.EUC_JP="EUC_JP",n.UTF8=Sn.UTF8.getName(),n.PLATFORM_DEFAULT_ENCODING=n.UTF8,n.ASSUME_SHIFT_JIS=!1,n})(),$e=(function(){function n(e){e===void 0&&(e=""),this.value=e}return n.prototype.enableDecoding=function(e){return this.encoding=e,this},n.prototype.append=function(e){return typeof e=="string"?this.value+=e.toString():this.encoding?this.value+=at.castAsNonUtf8Char(e,this.encoding):this.value+=String.fromCharCode(e),this},n.prototype.appendChars=function(e,t,r){for(var i=t;t<t+r;i++)this.append(e[i]);return this},n.prototype.length=function(){return this.value.length},n.prototype.charAt=function(e){return this.value.charAt(e)},n.prototype.deleteCharAt=function(e){this.value=this.value.substr(0,e)+this.value.substring(e+1)},n.prototype.setCharAt=function(e,t){this.value=this.value.substr(0,e)+t+this.value.substr(e+1)},n.prototype.substring=function(e,t){return this.value.substring(e,t)},n.prototype.setLengthToZero=function(){this.value=""},n.prototype.toString=function(){return this.value},n.prototype.insert=function(e,t){this.value=this.value.substring(0,e)+t+this.value.substring(e)},n})(),pa=(function(){function n(e,t,r,i){if(this.width=e,this.height=t,this.rowSize=r,this.bits=i,t==null&&(t=e),this.height=t,e<1||t<1)throw new Pe("Both dimensions must be greater than 0");r==null&&(r=Math.floor((e+31)/32)),this.rowSize=r,i==null&&(this.bits=new Int32Array(this.rowSize*this.height))}return n.parseFromBooleanArray=function(e){for(var t=e.length,r=e[0].length,i=new n(r,t),a=0;a<t;a++)for(var o=e[a],c=0;c<r;c++)o[c]&&i.set(c,a);return i},n.parseFromString=function(e,t,r){if(e===null)throw new Pe("stringRepresentation cannot be null");for(var i=new Array(e.length),a=0,o=0,c=-1,u=0,h=0;h<e.length;)if(e.charAt(h)===`
`||e.charAt(h)==="\r"){if(a>o){if(c===-1)c=a-o;else if(a-o!==c)throw new Pe("row lengths do not match");o=a,u++}h++}else if(e.substring(h,h+t.length)===t)h+=t.length,i[a]=!0,a++;else if(e.substring(h,h+r.length)===r)h+=r.length,i[a]=!1,a++;else throw new Pe("illegal character encountered: "+e.substring(h));if(a>o){if(c===-1)c=a-o;else if(a-o!==c)throw new Pe("row lengths do not match");u++}for(var p=new n(c,u),g=0;g<a;g++)i[g]&&p.set(Math.floor(g%c),Math.floor(g/c));return p},n.prototype.get=function(e,t){var r=t*this.rowSize+Math.floor(e/32);return(this.bits[r]>>>(e&31)&1)!==0},n.prototype.set=function(e,t){var r=t*this.rowSize+Math.floor(e/32);this.bits[r]|=1<<(e&31)&4294967295},n.prototype.unset=function(e,t){var r=t*this.rowSize+Math.floor(e/32);this.bits[r]&=~(1<<(e&31)&4294967295)},n.prototype.flip=function(e,t){var r=t*this.rowSize+Math.floor(e/32);this.bits[r]^=1<<(e&31)&4294967295},n.prototype.xor=function(e){if(this.width!==e.getWidth()||this.height!==e.getHeight()||this.rowSize!==e.getRowSize())throw new Pe("input matrix dimensions do not match");for(var t=new jn(Math.floor(this.width/32)+1),r=this.rowSize,i=this.bits,a=0,o=this.height;a<o;a++)for(var c=a*r,u=e.getRow(a,t).getBitArray(),h=0;h<r;h++)i[c+h]^=u[h]},n.prototype.clear=function(){for(var e=this.bits,t=e.length,r=0;r<t;r++)e[r]=0},n.prototype.setRegion=function(e,t,r,i){if(t<0||e<0)throw new Pe("Left and top must be nonnegative");if(i<1||r<1)throw new Pe("Height and width must be at least 1");var a=e+r,o=t+i;if(o>this.height||a>this.width)throw new Pe("The region must fit inside the matrix");for(var c=this.rowSize,u=this.bits,h=t;h<o;h++)for(var p=h*c,g=e;g<a;g++)u[p+Math.floor(g/32)]|=1<<(g&31)&4294967295},n.prototype.getRow=function(e,t){t==null||t.getSize()<this.width?t=new jn(this.width):t.clear();for(var r=this.rowSize,i=this.bits,a=e*r,o=0;o<r;o++)t.setBulk(o*32,i[a+o]);return t},n.prototype.setRow=function(e,t){Pt.arraycopy(t.getBitArray(),0,this.bits,e*this.rowSize,this.rowSize)},n.prototype.rotate180=function(){for(var e=this.getWidth(),t=this.getHeight(),r=new jn(e),i=new jn(e),a=0,o=Math.floor((t+1)/2);a<o;a++)r=this.getRow(a,r),i=this.getRow(t-1-a,i),r.reverse(),i.reverse(),this.setRow(a,i),this.setRow(t-1-a,r)},n.prototype.getEnclosingRectangle=function(){for(var e=this.width,t=this.height,r=this.rowSize,i=this.bits,a=e,o=t,c=-1,u=-1,h=0;h<t;h++)for(var p=0;p<r;p++){var g=i[h*r+p];if(g!==0){if(h<o&&(o=h),h>u&&(u=h),p*32<a){for(var _=0;(g<<31-_&4294967295)===0;)_++;p*32+_<a&&(a=p*32+_)}if(p*32+31>c){for(var _=31;!(g>>>_);)_--;p*32+_>c&&(c=p*32+_)}}}return c<a||u<o?null:Int32Array.from([a,o,c-a+1,u-o+1])},n.prototype.getTopLeftOnBit=function(){for(var e=this.rowSize,t=this.bits,r=0;r<t.length&&t[r]===0;)r++;if(r===t.length)return null;for(var i=r/e,a=r%e*32,o=t[r],c=0;(o<<31-c&4294967295)===0;)c++;return a+=c,Int32Array.from([a,i])},n.prototype.getBottomRightOnBit=function(){for(var e=this.rowSize,t=this.bits,r=t.length-1;r>=0&&t[r]===0;)r--;if(r<0)return null;for(var i=Math.floor(r/e),a=Math.floor(r%e)*32,o=t[r],c=31;!(o>>>c);)c--;return a+=c,Int32Array.from([a,i])},n.prototype.getWidth=function(){return this.width},n.prototype.getHeight=function(){return this.height},n.prototype.getRowSize=function(){return this.rowSize},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.width===t.width&&this.height===t.height&&this.rowSize===t.rowSize&&Cn.equals(this.bits,t.bits)},n.prototype.hashCode=function(){var e=this.width;return e=31*e+this.width,e=31*e+this.height,e=31*e+this.rowSize,e=31*e+Cn.hashCode(this.bits),e},n.prototype.toString=function(e,t,r){return e===void 0&&(e="X "),t===void 0&&(t="  "),r===void 0&&(r=`
`),this.buildToString(e,t,r)},n.prototype.buildToString=function(e,t,r){for(var i=new $e,a=0,o=this.height;a<o;a++){for(var c=0,u=this.width;c<u;c++)i.append(this.get(c,a)?e:t);i.append(r)}return i.toString()},n.prototype.clone=function(){return new n(this.width,this.height,this.rowSize,this.bits.slice())},n})(),xP=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),ae=(function(n){xP(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.getNotFoundInstance=function(){return new e},e.kind="NotFoundException",e})(Tr),EP=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),wP=(function(n){EP(e,n);function e(t){var r=n.call(this,t)||this;return r.luminances=e.EMPTY,r.buckets=new Int32Array(e.LUMINANCE_BUCKETS),r}return e.prototype.getBlackRow=function(t,r){var i=this.getLuminanceSource(),a=i.getWidth();r==null||r.getSize()<a?r=new jn(a):r.clear(),this.initArrays(a);for(var o=i.getRow(t,this.luminances),c=this.buckets,u=0;u<a;u++)c[(o[u]&255)>>e.LUMINANCE_SHIFT]++;var h=e.estimateBlackPoint(c);if(a<3)for(var u=0;u<a;u++)(o[u]&255)<h&&r.set(u);else for(var p=o[0]&255,g=o[1]&255,u=1;u<a-1;u++){var _=o[u+1]&255;(g*4-p-_)/2<h&&r.set(u),p=g,g=_}return r},e.prototype.getBlackMatrix=function(){var t=this.getLuminanceSource(),r=t.getWidth(),i=t.getHeight(),a=new pa(r,i);this.initArrays(r);for(var o=this.buckets,c=1;c<5;c++)for(var u=Math.floor(i*c/5),h=t.getRow(u,this.luminances),p=Math.floor(r*4/5),g=Math.floor(r/5);g<p;g++){var _=h[g]&255;o[_>>e.LUMINANCE_SHIFT]++}for(var E=e.estimateBlackPoint(o),A=t.getMatrix(),c=0;c<i;c++)for(var S=c*r,g=0;g<r;g++){var _=A[S+g]&255;_<E&&a.set(g,c)}return a},e.prototype.createBinarizer=function(t){return new e(t)},e.prototype.initArrays=function(t){this.luminances.length<t&&(this.luminances=new Uint8ClampedArray(t));for(var r=this.buckets,i=0;i<e.LUMINANCE_BUCKETS;i++)r[i]=0},e.estimateBlackPoint=function(t){for(var r=t.length,i=0,a=0,o=0,c=0;c<r;c++)t[c]>o&&(a=c,o=t[c]),t[c]>i&&(i=t[c]);for(var u=0,h=0,c=0;c<r;c++){var p=c-a,g=t[c]*p*p;g>h&&(u=c,h=g)}if(a>u){var _=a;a=u,u=_}if(u-a<=r/16)throw new ae;for(var E=u-1,A=-1,c=u-1;c>a;c--){var S=c-a,g=S*S*(u-c)*(i-t[c]);g>A&&(E=c,A=g)}return E<<e.LUMINANCE_SHIFT},e.LUMINANCE_BITS=5,e.LUMINANCE_SHIFT=8-e.LUMINANCE_BITS,e.LUMINANCE_BUCKETS=1<<e.LUMINANCE_BITS,e.EMPTY=Uint8ClampedArray.from([0]),e})(dP),AP=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),n3=(function(n){AP(e,n);function e(t){var r=n.call(this,t)||this;return r.matrix=null,r}return e.prototype.getBlackMatrix=function(){if(this.matrix!==null)return this.matrix;var t=this.getLuminanceSource(),r=t.getWidth(),i=t.getHeight();if(r>=e.MINIMUM_DIMENSION&&i>=e.MINIMUM_DIMENSION){var a=t.getMatrix(),o=r>>e.BLOCK_SIZE_POWER;(r&e.BLOCK_SIZE_MASK)!==0&&o++;var c=i>>e.BLOCK_SIZE_POWER;(i&e.BLOCK_SIZE_MASK)!==0&&c++;var u=e.calculateBlackPoints(a,o,c,r,i),h=new pa(r,i);e.calculateThresholdForBlock(a,o,c,r,i,u,h),this.matrix=h}else this.matrix=n.prototype.getBlackMatrix.call(this);return this.matrix},e.prototype.createBinarizer=function(t){return new e(t)},e.calculateThresholdForBlock=function(t,r,i,a,o,c,u){for(var h=o-e.BLOCK_SIZE,p=a-e.BLOCK_SIZE,g=0;g<i;g++){var _=g<<e.BLOCK_SIZE_POWER;_>h&&(_=h);for(var E=e.cap(g,2,i-3),A=0;A<r;A++){var S=A<<e.BLOCK_SIZE_POWER;S>p&&(S=p);for(var O=e.cap(A,2,r-3),T=0,R=-2;R<=2;R++){var L=c[E+R];T+=L[O-2]+L[O-1]+L[O]+L[O+1]+L[O+2]}var z=T/25;e.thresholdBlock(t,S,_,z,a,u)}}},e.cap=function(t,r,i){return t<r?r:t>i?i:t},e.thresholdBlock=function(t,r,i,a,o,c){for(var u=0,h=i*o+r;u<e.BLOCK_SIZE;u++,h+=o)for(var p=0;p<e.BLOCK_SIZE;p++)(t[h+p]&255)<=a&&c.set(r+p,i+u)},e.calculateBlackPoints=function(t,r,i,a,o){for(var c=o-e.BLOCK_SIZE,u=a-e.BLOCK_SIZE,h=new Array(i),p=0;p<i;p++){h[p]=new Int32Array(r);var g=p<<e.BLOCK_SIZE_POWER;g>c&&(g=c);for(var _=0;_<r;_++){var E=_<<e.BLOCK_SIZE_POWER;E>u&&(E=u);for(var A=0,S=255,O=0,T=0,R=g*a+E;T<e.BLOCK_SIZE;T++,R+=a){for(var L=0;L<e.BLOCK_SIZE;L++){var z=t[R+L]&255;A+=z,z<S&&(S=z),z>O&&(O=z)}if(O-S>e.MIN_DYNAMIC_RANGE)for(T++,R+=a;T<e.BLOCK_SIZE;T++,R+=a)for(var L=0;L<e.BLOCK_SIZE;L++)A+=t[R+L]&255}var U=A>>e.BLOCK_SIZE_POWER*2;if(O-S<=e.MIN_DYNAMIC_RANGE&&(U=S/2,p>0&&_>0)){var G=(h[p-1][_]+2*h[p][_-1]+h[p-1][_-1])/4;S<G&&(U=G)}h[p][_]=U}}return h},e.BLOCK_SIZE_POWER=3,e.BLOCK_SIZE=1<<e.BLOCK_SIZE_POWER,e.BLOCK_SIZE_MASK=e.BLOCK_SIZE-1,e.MINIMUM_DIMENSION=e.BLOCK_SIZE*5,e.MIN_DYNAMIC_RANGE=24,e})(wP),Hf=(function(){function n(e,t){this.width=e,this.height=t}return n.prototype.getWidth=function(){return this.width},n.prototype.getHeight=function(){return this.height},n.prototype.isCropSupported=function(){return!1},n.prototype.crop=function(e,t,r,i){throw new qd("This luminance source does not support cropping.")},n.prototype.isRotateSupported=function(){return!1},n.prototype.rotateCounterClockwise=function(){throw new qd("This luminance source does not support rotation by 90 degrees.")},n.prototype.rotateCounterClockwise45=function(){throw new qd("This luminance source does not support rotation by 45 degrees.")},n.prototype.toString=function(){for(var e=new Uint8ClampedArray(this.width),t=new $e,r=0;r<this.height;r++){for(var i=this.getRow(r,e),a=0;a<this.width;a++){var o=i[a]&255,c=void 0;o<64?c="#":o<128?c="+":o<192?c=".":c=" ",t.append(c)}t.append(`
`)}return t.toString()},n})(),bP=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),c1=(function(n){bP(e,n);function e(t){var r=n.call(this,t.getWidth(),t.getHeight())||this;return r.delegate=t,r}return e.prototype.getRow=function(t,r){for(var i=this.delegate.getRow(t,r),a=this.getWidth(),o=0;o<a;o++)i[o]=255-(i[o]&255);return i},e.prototype.getMatrix=function(){for(var t=this.delegate.getMatrix(),r=this.getWidth()*this.getHeight(),i=new Uint8ClampedArray(r),a=0;a<r;a++)i[a]=255-(t[a]&255);return i},e.prototype.isCropSupported=function(){return this.delegate.isCropSupported()},e.prototype.crop=function(t,r,i,a){return new e(this.delegate.crop(t,r,i,a))},e.prototype.isRotateSupported=function(){return this.delegate.isRotateSupported()},e.prototype.invert=function(){return this.delegate},e.prototype.rotateCounterClockwise=function(){return new e(this.delegate.rotateCounterClockwise())},e.prototype.rotateCounterClockwise45=function(){return new e(this.delegate.rotateCounterClockwise45())},e})(Hf),SP=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),CP=(function(n){SP(e,n);function e(t,r){r===void 0&&(r=!1);var i=n.call(this,t.width,t.height)||this;return i.canvas=t,i.tempCanvasElement=null,i.buffer=e.makeBufferFromCanvasImageData(t,r),i}return e.makeBufferFromCanvasImageData=function(t,r){r===void 0&&(r=!1);var i=t.getContext("2d").getImageData(0,0,t.width,t.height);return e.toGrayscaleBuffer(i.data,t.width,t.height,r)},e.toGrayscaleBuffer=function(t,r,i,a){a===void 0&&(a=!1);var o=new Uint8ClampedArray(r*i);if(e.FRAME_INDEX=!e.FRAME_INDEX,e.FRAME_INDEX||!a)for(var c=0,u=0,h=t.length;c<h;c+=4,u++){var p=void 0,g=t[c+3];if(g===0)p=255;else{var _=t[c],E=t[c+1],A=t[c+2];p=306*_+601*E+117*A+512>>10}o[u]=p}else for(var c=0,u=0,S=t.length;c<S;c+=4,u++){var p=void 0,g=t[c+3];if(g===0)p=255;else{var _=t[c],E=t[c+1],A=t[c+2];p=306*_+601*E+117*A+512>>10}o[u]=255-p}return o},e.prototype.getRow=function(t,r){if(t<0||t>=this.getHeight())throw new Pe("Requested row is outside the image: "+t);var i=this.getWidth(),a=t*i;return r===null?r=this.buffer.slice(a,a+i):(r.length<i&&(r=new Uint8ClampedArray(i)),r.set(this.buffer.slice(a,a+i))),r},e.prototype.getMatrix=function(){return this.buffer},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(t,r,i,a){return n.prototype.crop.call(this,t,r,i,a),this},e.prototype.isRotateSupported=function(){return!0},e.prototype.rotateCounterClockwise=function(){return this.rotate(-90),this},e.prototype.rotateCounterClockwise45=function(){return this.rotate(-45),this},e.prototype.getTempCanvasElement=function(){if(this.tempCanvasElement===null){var t=this.canvas.ownerDocument.createElement("canvas");t.width=this.canvas.width,t.height=this.canvas.height,this.tempCanvasElement=t}return this.tempCanvasElement},e.prototype.rotate=function(t){var r=this.getTempCanvasElement(),i=r.getContext("2d"),a=t*e.DEGREE_TO_RADIANS,o=this.canvas.width,c=this.canvas.height,u=Math.ceil(Math.abs(Math.cos(a))*o+Math.abs(Math.sin(a))*c),h=Math.ceil(Math.abs(Math.sin(a))*o+Math.abs(Math.cos(a))*c);return r.width=u,r.height=h,i.translate(u/2,h/2),i.rotate(a),i.drawImage(this.canvas,o/-2,c/-2),this.buffer=e.makeBufferFromCanvasImageData(r),this},e.prototype.invert=function(){return new c1(this)},e.DEGREE_TO_RADIANS=Math.PI/180,e.FRAME_INDEX=!0,e})(Hf),TP=(function(){function n(e,t,r){this.deviceId=e,this.label=t,this.kind="videoinput",this.groupId=r||void 0}return n.prototype.toJSON=function(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}},n})(),cr=function(n,e,t,r){function i(a){return a instanceof t?a:new t(function(o){o(a)})}return new(t||(t=Promise))(function(a,o){function c(p){try{h(r.next(p))}catch(g){o(g)}}function u(p){try{h(r.throw(p))}catch(g){o(g)}}function h(p){p.done?a(p.value):i(p.value).then(c,u)}h((r=r.apply(n,e||[])).next())})},ur=function(n,e){var t={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,i,a,o;return o={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function c(h){return function(p){return u([h,p])}}function u(h){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,i&&(a=h[0]&2?i.return:h[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,h[1])).done)return a;switch(i=0,a&&(h=[h[0]&2,a.value]),h[0]){case 0:case 1:a=h;break;case 4:return t.label++,{value:h[1],done:!1};case 5:t.label++,i=h[1],h=[0];continue;case 7:h=t.ops.pop(),t.trys.pop();continue;default:if(a=t.trys,!(a=a.length>0&&a[a.length-1])&&(h[0]===6||h[0]===2)){t=0;continue}if(h[0]===3&&(!a||h[1]>a[0]&&h[1]<a[3])){t.label=h[1];break}if(h[0]===6&&t.label<a[1]){t.label=a[1],a=h;break}if(a&&t.label<a[2]){t.label=a[2],t.ops.push(h);break}a[2]&&t.ops.pop(),t.trys.pop();continue}h=e.call(n,t)}catch(p){h=[6,p],i=0}finally{r=a=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}},IP=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Bc=(function(){function n(e,t,r){t===void 0&&(t=500),this.reader=e,this.timeBetweenScansMillis=t,this._hints=r,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}return Object.defineProperty(n.prototype,"hasNavigator",{get:function(){return typeof navigator<"u"},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isMediaDevicesSuported",{get:function(){return this.hasNavigator&&!!navigator.mediaDevices},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"canEnumerateDevices",{get:function(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"timeBetweenDecodingAttempts",{get:function(){return this._timeBetweenDecodingAttempts},set:function(e){this._timeBetweenDecodingAttempts=e<0?0:e},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"hints",{get:function(){return this._hints},set:function(e){this._hints=e||null},enumerable:!1,configurable:!0}),n.prototype.listVideoInputDevices=function(){return cr(this,void 0,void 0,function(){var e,t,r,i,a,o,c,u,h,p,g,_;return ur(this,function(E){switch(E.label){case 0:if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");return[4,navigator.mediaDevices.enumerateDevices()];case 1:e=E.sent(),t=[];try{for(r=IP(e),i=r.next();!i.done;i=r.next())a=i.value,o=a.kind==="video"?"videoinput":a.kind,o==="videoinput"&&(c=a.deviceId||a.id,u=a.label||"Video device "+(t.length+1),h=a.groupId,p={deviceId:c,label:u,kind:o,groupId:h},t.push(p))}catch(A){g={error:A}}finally{try{i&&!i.done&&(_=r.return)&&_.call(r)}finally{if(g)throw g.error}}return[2,t]}})})},n.prototype.getVideoInputDevices=function(){return cr(this,void 0,void 0,function(){var e;return ur(this,function(t){switch(t.label){case 0:return[4,this.listVideoInputDevices()];case 1:return e=t.sent(),[2,e.map(function(r){return new TP(r.deviceId,r.label)})]}})})},n.prototype.findDeviceById=function(e){return cr(this,void 0,void 0,function(){var t;return ur(this,function(r){switch(r.label){case 0:return[4,this.listVideoInputDevices()];case 1:return t=r.sent(),t?[2,t.find(function(i){return i.deviceId===e})]:[2,null]}})})},n.prototype.decodeFromInputVideoDevice=function(e,t){return cr(this,void 0,void 0,function(){return ur(this,function(r){switch(r.label){case 0:return[4,this.decodeOnceFromVideoDevice(e,t)];case 1:return[2,r.sent()]}})})},n.prototype.decodeOnceFromVideoDevice=function(e,t){return cr(this,void 0,void 0,function(){var r,i;return ur(this,function(a){switch(a.label){case 0:return this.reset(),e?r={deviceId:{exact:e}}:r={facingMode:"environment"},i={video:r},[4,this.decodeOnceFromConstraints(i,t)];case 1:return[2,a.sent()]}})})},n.prototype.decodeOnceFromConstraints=function(e,t){return cr(this,void 0,void 0,function(){var r;return ur(this,function(i){switch(i.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return r=i.sent(),[4,this.decodeOnceFromStream(r,t)];case 2:return[2,i.sent()]}})})},n.prototype.decodeOnceFromStream=function(e,t){return cr(this,void 0,void 0,function(){var r,i;return ur(this,function(a){switch(a.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,t)];case 1:return r=a.sent(),[4,this.decodeOnce(r)];case 2:return i=a.sent(),[2,i]}})})},n.prototype.decodeFromInputVideoDeviceContinuously=function(e,t,r){return cr(this,void 0,void 0,function(){return ur(this,function(i){switch(i.label){case 0:return[4,this.decodeFromVideoDevice(e,t,r)];case 1:return[2,i.sent()]}})})},n.prototype.decodeFromVideoDevice=function(e,t,r){return cr(this,void 0,void 0,function(){var i,a;return ur(this,function(o){switch(o.label){case 0:return e?i={deviceId:{exact:e}}:i={facingMode:"environment"},a={video:i},[4,this.decodeFromConstraints(a,t,r)];case 1:return[2,o.sent()]}})})},n.prototype.decodeFromConstraints=function(e,t,r){return cr(this,void 0,void 0,function(){var i;return ur(this,function(a){switch(a.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return i=a.sent(),[4,this.decodeFromStream(i,t,r)];case 2:return[2,a.sent()]}})})},n.prototype.decodeFromStream=function(e,t,r){return cr(this,void 0,void 0,function(){var i;return ur(this,function(a){switch(a.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,t)];case 1:return i=a.sent(),[4,this.decodeContinuously(i,r)];case 2:return[2,a.sent()]}})})},n.prototype.stopAsyncDecode=function(){this._stopAsyncDecode=!0},n.prototype.stopContinuousDecode=function(){this._stopContinuousDecode=!0},n.prototype.attachStreamToVideo=function(e,t){return cr(this,void 0,void 0,function(){var r;return ur(this,function(i){switch(i.label){case 0:return r=this.prepareVideoElement(t),this.addVideoSource(r,e),this.videoElement=r,this.stream=e,[4,this.playVideoOnLoadAsync(r)];case 1:return i.sent(),[2,r]}})})},n.prototype.playVideoOnLoadAsync=function(e){var t=this;return new Promise(function(r,i){return t.playVideoOnLoad(e,function(){return r()})})},n.prototype.playVideoOnLoad=function(e,t){var r=this;this.videoEndedListener=function(){return r.stopStreams()},this.videoCanPlayListener=function(){return r.tryPlayVideo(e)},e.addEventListener("ended",this.videoEndedListener),e.addEventListener("canplay",this.videoCanPlayListener),e.addEventListener("playing",t),this.tryPlayVideo(e)},n.prototype.isVideoPlaying=function(e){return e.currentTime>0&&!e.paused&&!e.ended&&e.readyState>2},n.prototype.tryPlayVideo=function(e){return cr(this,void 0,void 0,function(){return ur(this,function(t){switch(t.label){case 0:if(this.isVideoPlaying(e))return console.warn("Trying to play video that is already playing."),[2];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,e.play()];case 2:return t.sent(),[3,4];case 3:return t.sent(),console.warn("It was not possible to play the video."),[3,4];case 4:return[2]}})})},n.prototype.getMediaElement=function(e,t){var r=document.getElementById(e);if(!r)throw new rn("element with id '"+e+"' not found");if(r.nodeName.toLowerCase()!==t.toLowerCase())throw new rn("element with id '"+e+"' must be an "+t+" element");return r},n.prototype.decodeFromImage=function(e,t){if(!e&&!t)throw new rn("either imageElement with a src set or an url must be provided");return t&&!e?this.decodeFromImageUrl(t):this.decodeFromImageElement(e)},n.prototype.decodeFromVideo=function(e,t){if(!e&&!t)throw new rn("Either an element with a src set or an URL must be provided");return t&&!e?this.decodeFromVideoUrl(t):this.decodeFromVideoElement(e)},n.prototype.decodeFromVideoContinuously=function(e,t,r){if(e===void 0&&t===void 0)throw new rn("Either an element with a src set or an URL must be provided");return t&&!e?this.decodeFromVideoUrlContinuously(t,r):this.decodeFromVideoElementContinuously(e,r)},n.prototype.decodeFromImageElement=function(e){if(!e)throw new rn("An image element must be provided.");this.reset();var t=this.prepareImageElement(e);this.imageElement=t;var r;return this.isImageLoaded(t)?r=this.decodeOnce(t,!1,!0):r=this._decodeOnLoadImage(t),r},n.prototype.decodeFromVideoElement=function(e){var t=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideo(t)},n.prototype.decodeFromVideoElementContinuously=function(e,t){var r=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideoContinuously(r,t)},n.prototype._decodeFromVideoElementSetup=function(e){if(!e)throw new rn("A video element must be provided.");this.reset();var t=this.prepareVideoElement(e);return this.videoElement=t,t},n.prototype.decodeFromImageUrl=function(e){if(!e)throw new rn("An URL must be provided.");this.reset();var t=this.prepareImageElement();this.imageElement=t;var r=this._decodeOnLoadImage(t);return t.src=e,r},n.prototype.decodeFromVideoUrl=function(e){if(!e)throw new rn("An URL must be provided.");this.reset();var t=this.prepareVideoElement(),r=this.decodeFromVideoElement(t);return t.src=e,r},n.prototype.decodeFromVideoUrlContinuously=function(e,t){if(!e)throw new rn("An URL must be provided.");this.reset();var r=this.prepareVideoElement(),i=this.decodeFromVideoElementContinuously(r,t);return r.src=e,i},n.prototype._decodeOnLoadImage=function(e){var t=this;return new Promise(function(r,i){t.imageLoadedListener=function(){return t.decodeOnce(e,!1,!0).then(r,i)},e.addEventListener("load",t.imageLoadedListener)})},n.prototype._decodeOnLoadVideo=function(e){return cr(this,void 0,void 0,function(){return ur(this,function(t){switch(t.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return t.sent(),[4,this.decodeOnce(e)];case 2:return[2,t.sent()]}})})},n.prototype._decodeOnLoadVideoContinuously=function(e,t){return cr(this,void 0,void 0,function(){return ur(this,function(r){switch(r.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return r.sent(),this.decodeContinuously(e,t),[2]}})})},n.prototype.isImageLoaded=function(e){return!(!e.complete||e.naturalWidth===0)},n.prototype.prepareImageElement=function(e){var t;return typeof e>"u"&&(t=document.createElement("img"),t.width=200,t.height=200),typeof e=="string"&&(t=this.getMediaElement(e,"img")),e instanceof HTMLImageElement&&(t=e),t},n.prototype.prepareVideoElement=function(e){var t;return!e&&typeof document<"u"&&(t=document.createElement("video"),t.width=200,t.height=200),typeof e=="string"&&(t=this.getMediaElement(e,"video")),e instanceof HTMLVideoElement&&(t=e),t.setAttribute("autoplay","true"),t.setAttribute("muted","true"),t.setAttribute("playsinline","true"),t},n.prototype.decodeOnce=function(e,t,r){var i=this;t===void 0&&(t=!0),r===void 0&&(r=!0),this._stopAsyncDecode=!1;var a=function(o,c){if(i._stopAsyncDecode){c(new ae("Video stream has ended before any code could be detected.")),i._stopAsyncDecode=void 0;return}try{var u=i.decode(e);o(u)}catch(_){var h=t&&_ instanceof ae,p=_ instanceof _n||_ instanceof ye,g=p&&r;if(h||g)return setTimeout(a,i._timeBetweenDecodingAttempts,o,c);c(_)}};return new Promise(function(o,c){return a(o,c)})},n.prototype.decodeContinuously=function(e,t){var r=this;this._stopContinuousDecode=!1;var i=function(){if(r._stopContinuousDecode){r._stopContinuousDecode=void 0;return}try{var a=r.decode(e);t(a,null),setTimeout(i,r.timeBetweenScansMillis)}catch(u){t(null,u);var o=u instanceof _n||u instanceof ye,c=u instanceof ae;(o||c)&&setTimeout(i,r._timeBetweenDecodingAttempts)}};i()},n.prototype.decode=function(e){var t=this.createBinaryBitmap(e);return this.decodeBitmap(t)},n.prototype.createBinaryBitmap=function(e){this.getCaptureCanvasContext(e);var t=!1;e instanceof HTMLVideoElement?(this.drawFrameOnCanvas(e),t=!0):this.drawImageOnCanvas(e);var r=this.getCaptureCanvas(e),i=new CP(r,t),a=new n3(i);return new t3(a)},n.prototype.getCaptureCanvasContext=function(e){if(!this.captureCanvasContext){var t=this.getCaptureCanvas(e),r=void 0;try{r=t.getContext("2d",{willReadFrequently:!0})}catch{r=t.getContext("2d")}this.captureCanvasContext=r}return this.captureCanvasContext},n.prototype.getCaptureCanvas=function(e){if(!this.captureCanvas){var t=this.createCaptureCanvas(e);this.captureCanvas=t}return this.captureCanvas},n.prototype.drawFrameOnCanvas=function(e,t,r){t===void 0&&(t={sx:0,sy:0,sWidth:e.videoWidth,sHeight:e.videoHeight,dx:0,dy:0,dWidth:e.videoWidth,dHeight:e.videoHeight}),r===void 0&&(r=this.captureCanvasContext),r.drawImage(e,t.sx,t.sy,t.sWidth,t.sHeight,t.dx,t.dy,t.dWidth,t.dHeight)},n.prototype.drawImageOnCanvas=function(e,t,r){t===void 0&&(t={sx:0,sy:0,sWidth:e.naturalWidth,sHeight:e.naturalHeight,dx:0,dy:0,dWidth:e.naturalWidth,dHeight:e.naturalHeight}),r===void 0&&(r=this.captureCanvasContext),r.drawImage(e,t.sx,t.sy,t.sWidth,t.sHeight,t.dx,t.dy,t.dWidth,t.dHeight)},n.prototype.decodeBitmap=function(e){return this.reader.decode(e,this._hints)},n.prototype.createCaptureCanvas=function(e){if(typeof document>"u")return this._destroyCaptureCanvas(),null;var t=document.createElement("canvas"),r,i;return typeof e<"u"&&(e instanceof HTMLVideoElement?(r=e.videoWidth,i=e.videoHeight):e instanceof HTMLImageElement&&(r=e.naturalWidth||e.width,i=e.naturalHeight||e.height)),t.style.width=r+"px",t.style.height=i+"px",t.width=r,t.height=i,t},n.prototype.stopStreams=function(){this.stream&&(this.stream.getVideoTracks().forEach(function(e){return e.stop()}),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()},n.prototype.reset=function(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()},n.prototype._destroyVideoElement=function(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)},n.prototype._destroyImageElement=function(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)},n.prototype._destroyCaptureCanvas=function(){this.captureCanvasContext=void 0,this.captureCanvas=void 0},n.prototype.addVideoSource=function(e,t){try{e.srcObject=t}catch{e.src=URL.createObjectURL(t)}},n.prototype.cleanVideoSource=function(e){try{e.srcObject=null}catch{e.src=""}this.videoElement.removeAttribute("src")},n})(),sr=(function(){function n(e,t,r,i,a,o){r===void 0&&(r=t==null?0:8*t.length),o===void 0&&(o=Pt.currentTimeMillis()),this.text=e,this.rawBytes=t,this.numBits=r,this.resultPoints=i,this.format=a,this.timestamp=o,this.text=e,this.rawBytes=t,r==null?this.numBits=t==null?0:8*t.length:this.numBits=r,this.resultPoints=i,this.format=a,this.resultMetadata=null,o==null?this.timestamp=Pt.currentTimeMillis():this.timestamp=o}return n.prototype.getText=function(){return this.text},n.prototype.getRawBytes=function(){return this.rawBytes},n.prototype.getNumBits=function(){return this.numBits},n.prototype.getResultPoints=function(){return this.resultPoints},n.prototype.getBarcodeFormat=function(){return this.format},n.prototype.getResultMetadata=function(){return this.resultMetadata},n.prototype.putMetadata=function(e,t){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(e,t)},n.prototype.putAllMetadata=function(e){e!==null&&(this.resultMetadata===null?this.resultMetadata=e:this.resultMetadata=new Map(e))},n.prototype.addResultPoints=function(e){var t=this.resultPoints;if(t===null)this.resultPoints=e;else if(e!==null&&e.length>0){var r=new Array(t.length+e.length);Pt.arraycopy(t,0,r,0,t.length),Pt.arraycopy(e,0,r,t.length,e.length),this.resultPoints=r}},n.prototype.getTimestamp=function(){return this.timestamp},n.prototype.toString=function(){return this.text},n})(),Zg;(function(n){n[n.AZTEC=0]="AZTEC",n[n.CODABAR=1]="CODABAR",n[n.CODE_39=2]="CODE_39",n[n.CODE_93=3]="CODE_93",n[n.CODE_128=4]="CODE_128",n[n.DATA_MATRIX=5]="DATA_MATRIX",n[n.EAN_8=6]="EAN_8",n[n.EAN_13=7]="EAN_13",n[n.ITF=8]="ITF",n[n.MAXICODE=9]="MAXICODE",n[n.PDF_417=10]="PDF_417",n[n.QR_CODE=11]="QR_CODE",n[n.RSS_14=12]="RSS_14",n[n.RSS_EXPANDED=13]="RSS_EXPANDED",n[n.UPC_A=14]="UPC_A",n[n.UPC_E=15]="UPC_E",n[n.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Zg||(Zg={}));const Me=Zg;var Jg;(function(n){n[n.OTHER=0]="OTHER",n[n.ORIENTATION=1]="ORIENTATION",n[n.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",n[n.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",n[n.ISSUE_NUMBER=4]="ISSUE_NUMBER",n[n.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",n[n.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",n[n.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",n[n.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",n[n.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",n[n.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(Jg||(Jg={}));const Jn=Jg;var u1=(function(){function n(e,t,r,i,a,o){a===void 0&&(a=-1),o===void 0&&(o=-1),this.rawBytes=e,this.text=t,this.byteSegments=r,this.ecLevel=i,this.structuredAppendSequenceNumber=a,this.structuredAppendParity=o,this.numBits=e==null?0:8*e.length}return n.prototype.getRawBytes=function(){return this.rawBytes},n.prototype.getNumBits=function(){return this.numBits},n.prototype.setNumBits=function(e){this.numBits=e},n.prototype.getText=function(){return this.text},n.prototype.getByteSegments=function(){return this.byteSegments},n.prototype.getECLevel=function(){return this.ecLevel},n.prototype.getErrorsCorrected=function(){return this.errorsCorrected},n.prototype.setErrorsCorrected=function(e){this.errorsCorrected=e},n.prototype.getErasures=function(){return this.erasures},n.prototype.setErasures=function(e){this.erasures=e},n.prototype.getOther=function(){return this.other},n.prototype.setOther=function(e){this.other=e},n.prototype.hasStructuredAppend=function(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0},n.prototype.getStructuredAppendParity=function(){return this.structuredAppendParity},n.prototype.getStructuredAppendSequenceNumber=function(){return this.structuredAppendSequenceNumber},n})(),ef=(function(){function n(){}return n.prototype.exp=function(e){return this.expTable[e]},n.prototype.log=function(e){if(e===0)throw new Pe;return this.logTable[e]},n.addOrSubtract=function(e,t){return e^t},n})(),qs=(function(){function n(e,t){if(t.length===0)throw new Pe;this.field=e;var r=t.length;if(r>1&&t[0]===0){for(var i=1;i<r&&t[i]===0;)i++;i===r?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(r-i),Pt.arraycopy(t,i,this.coefficients,0,this.coefficients.length))}else this.coefficients=t}return n.prototype.getCoefficients=function(){return this.coefficients},n.prototype.getDegree=function(){return this.coefficients.length-1},n.prototype.isZero=function(){return this.coefficients[0]===0},n.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},n.prototype.evaluateAt=function(e){if(e===0)return this.getCoefficient(0);var t=this.coefficients,r;if(e===1){r=0;for(var i=0,a=t.length;i!==a;i++){var o=t[i];r=ef.addOrSubtract(r,o)}return r}r=t[0];for(var c=t.length,u=this.field,i=1;i<c;i++)r=ef.addOrSubtract(u.multiply(e,r),t[i]);return r},n.prototype.addOrSubtract=function(e){if(!this.field.equals(e.field))throw new Pe("GenericGFPolys do not have same GenericGF field");if(this.isZero())return e;if(e.isZero())return this;var t=this.coefficients,r=e.coefficients;if(t.length>r.length){var i=t;t=r,r=i}var a=new Int32Array(r.length),o=r.length-t.length;Pt.arraycopy(r,0,a,0,o);for(var c=o;c<r.length;c++)a[c]=ef.addOrSubtract(t[c-o],r[c]);return new n(this.field,a)},n.prototype.multiply=function(e){if(!this.field.equals(e.field))throw new Pe("GenericGFPolys do not have same GenericGF field");if(this.isZero()||e.isZero())return this.field.getZero();for(var t=this.coefficients,r=t.length,i=e.coefficients,a=i.length,o=new Int32Array(r+a-1),c=this.field,u=0;u<r;u++)for(var h=t[u],p=0;p<a;p++)o[u+p]=ef.addOrSubtract(o[u+p],c.multiply(h,i[p]));return new n(c,o)},n.prototype.multiplyScalar=function(e){if(e===0)return this.field.getZero();if(e===1)return this;for(var t=this.coefficients.length,r=this.field,i=new Int32Array(t),a=this.coefficients,o=0;o<t;o++)i[o]=r.multiply(a[o],e);return new n(r,i)},n.prototype.multiplyByMonomial=function(e,t){if(e<0)throw new Pe;if(t===0)return this.field.getZero();for(var r=this.coefficients,i=r.length,a=new Int32Array(i+e),o=this.field,c=0;c<i;c++)a[c]=o.multiply(r[c],t);return new n(o,a)},n.prototype.divide=function(e){if(!this.field.equals(e.field))throw new Pe("GenericGFPolys do not have same GenericGF field");if(e.isZero())throw new Pe("Divide by 0");for(var t=this.field,r=t.getZero(),i=this,a=e.getCoefficient(e.getDegree()),o=t.inverse(a);i.getDegree()>=e.getDegree()&&!i.isZero();){var c=i.getDegree()-e.getDegree(),u=t.multiply(i.getCoefficient(i.getDegree()),o),h=e.multiplyByMonomial(c,u),p=t.buildMonomial(c,u);r=r.addOrSubtract(p),i=i.addOrSubtract(h)}return[r,i]},n.prototype.toString=function(){for(var e="",t=this.getDegree();t>=0;t--){var r=this.getCoefficient(t);if(r!==0){if(r<0?(e+=" - ",r=-r):e.length>0&&(e+=" + "),t===0||r!==1){var i=this.field.log(r);i===0?e+="1":i===1?e+="a":(e+="a^",e+=i)}t!==0&&(t===1?e+="x":(e+="x^",e+=t))}}return e},n})(),NP=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),r3=(function(n){NP(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="ArithmeticException",e})(Tr),RP=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),br=(function(n){RP(e,n);function e(t,r,i){var a=n.call(this)||this;a.primitive=t,a.size=r,a.generatorBase=i;for(var o=new Int32Array(r),c=1,u=0;u<r;u++)o[u]=c,c*=2,c>=r&&(c^=t,c&=r-1);a.expTable=o;for(var h=new Int32Array(r),u=0;u<r-1;u++)h[o[u]]=u;return a.logTable=h,a.zero=new qs(a,Int32Array.from([0])),a.one=new qs(a,Int32Array.from([1])),a}return e.prototype.getZero=function(){return this.zero},e.prototype.getOne=function(){return this.one},e.prototype.buildMonomial=function(t,r){if(t<0)throw new Pe;if(r===0)return this.zero;var i=new Int32Array(t+1);return i[0]=r,new qs(this,i)},e.prototype.inverse=function(t){if(t===0)throw new r3;return this.expTable[this.size-this.logTable[t]-1]},e.prototype.multiply=function(t,r){return t===0||r===0?0:this.expTable[(this.logTable[t]+this.logTable[r])%(this.size-1)]},e.prototype.getSize=function(){return this.size},e.prototype.getGeneratorBase=function(){return this.generatorBase},e.prototype.toString=function(){return"GF(0x"+Xe.toHexString(this.primitive)+","+this.size+")"},e.prototype.equals=function(t){return t===this},e.AZTEC_DATA_12=new e(4201,4096,1),e.AZTEC_DATA_10=new e(1033,1024,1),e.AZTEC_DATA_6=new e(67,64,1),e.AZTEC_PARAM=new e(19,16,1),e.QR_CODE_FIELD_256=new e(285,256,0),e.DATA_MATRIX_FIELD_256=new e(301,256,1),e.AZTEC_DATA_8=e.DATA_MATRIX_FIELD_256,e.MAXICODE_FIELD_64=e.AZTEC_DATA_6,e})(ef),OP=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Cd=(function(n){OP(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="ReedSolomonException",e})(Tr),DP=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Gf=(function(n){DP(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="IllegalStateException",e})(Tr),f1=(function(){function n(e){this.field=e}return n.prototype.decode=function(e,t){for(var r=this.field,i=new qs(r,e),a=new Int32Array(t),o=!0,c=0;c<t;c++){var u=i.evaluateAt(r.exp(c+r.getGeneratorBase()));a[a.length-1-c]=u,u!==0&&(o=!1)}if(!o)for(var h=new qs(r,a),p=this.runEuclideanAlgorithm(r.buildMonomial(t,1),h,t),g=p[0],_=p[1],E=this.findErrorLocations(g),A=this.findErrorMagnitudes(_,E),c=0;c<E.length;c++){var S=e.length-1-r.log(E[c]);if(S<0)throw new Cd("Bad error location");e[S]=br.addOrSubtract(e[S],A[c])}},n.prototype.runEuclideanAlgorithm=function(e,t,r){if(e.getDegree()<t.getDegree()){var i=e;e=t,t=i}for(var a=this.field,o=e,c=t,u=a.getZero(),h=a.getOne();c.getDegree()>=(r/2|0);){var p=o,g=u;if(o=c,u=h,o.isZero())throw new Cd("r_{i-1} was zero");c=p;for(var _=a.getZero(),E=o.getCoefficient(o.getDegree()),A=a.inverse(E);c.getDegree()>=o.getDegree()&&!c.isZero();){var S=c.getDegree()-o.getDegree(),O=a.multiply(c.getCoefficient(c.getDegree()),A);_=_.addOrSubtract(a.buildMonomial(S,O)),c=c.addOrSubtract(o.multiplyByMonomial(S,O))}if(h=_.multiply(u).addOrSubtract(g),c.getDegree()>=o.getDegree())throw new Gf("Division algorithm failed to reduce polynomial?")}var T=h.getCoefficient(0);if(T===0)throw new Cd("sigmaTilde(0) was zero");var R=a.inverse(T),L=h.multiplyScalar(R),z=c.multiplyScalar(R);return[L,z]},n.prototype.findErrorLocations=function(e){var t=e.getDegree();if(t===1)return Int32Array.from([e.getCoefficient(1)]);for(var r=new Int32Array(t),i=0,a=this.field,o=1;o<a.getSize()&&i<t;o++)e.evaluateAt(o)===0&&(r[i]=a.inverse(o),i++);if(i!==t)throw new Cd("Error locator degree does not match number of roots");return r},n.prototype.findErrorMagnitudes=function(e,t){for(var r=t.length,i=new Int32Array(r),a=this.field,o=0;o<r;o++){for(var c=a.inverse(t[o]),u=1,h=0;h<r;h++)if(o!==h){var p=a.multiply(t[h],c),g=(p&1)===0?p|1:p&-2;u=a.multiply(u,g)}i[o]=a.multiply(e.evaluateAt(c),a.inverse(u)),a.getGeneratorBase()!==0&&(i[o]=a.multiply(i[o],c))}return i},n})(),$n;(function(n){n[n.UPPER=0]="UPPER",n[n.LOWER=1]="LOWER",n[n.MIXED=2]="MIXED",n[n.DIGIT=3]="DIGIT",n[n.PUNCT=4]="PUNCT",n[n.BINARY=5]="BINARY"})($n||($n={}));var hA=(function(){function n(){}return n.prototype.decode=function(e){this.ddata=e;var t=e.getBits(),r=this.extractBits(t),i=this.correctBits(r),a=n.convertBoolArrayToByteArray(i),o=n.getEncodedData(i),c=new u1(a,o,null,null);return c.setNumBits(i.length),c},n.highLevelDecode=function(e){return this.getEncodedData(e)},n.getEncodedData=function(e){for(var t=e.length,r=$n.UPPER,i=$n.UPPER,a="",o=0;o<t;)if(i===$n.BINARY){if(t-o<5)break;var c=n.readCode(e,o,5);if(o+=5,c===0){if(t-o<11)break;c=n.readCode(e,o,11)+31,o+=11}for(var u=0;u<c;u++){if(t-o<8){o=t;break}var h=n.readCode(e,o,8);a+=at.castAsNonUtf8Char(h),o+=8}i=r}else{var p=i===$n.DIGIT?4:5;if(t-o<p)break;var h=n.readCode(e,o,p);o+=p;var g=n.getCharacter(i,h);g.startsWith("CTRL_")?(r=i,i=n.getTable(g.charAt(5)),g.charAt(6)==="L"&&(r=i)):(a+=g,i=r)}return a},n.getTable=function(e){switch(e){case"L":return $n.LOWER;case"P":return $n.PUNCT;case"M":return $n.MIXED;case"D":return $n.DIGIT;case"B":return $n.BINARY;case"U":default:return $n.UPPER}},n.getCharacter=function(e,t){switch(e){case $n.UPPER:return n.UPPER_TABLE[t];case $n.LOWER:return n.LOWER_TABLE[t];case $n.MIXED:return n.MIXED_TABLE[t];case $n.PUNCT:return n.PUNCT_TABLE[t];case $n.DIGIT:return n.DIGIT_TABLE[t];default:throw new Gf("Bad table")}},n.prototype.correctBits=function(e){var t,r;this.ddata.getNbLayers()<=2?(r=6,t=br.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(r=8,t=br.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(r=10,t=br.AZTEC_DATA_10):(r=12,t=br.AZTEC_DATA_12);var i=this.ddata.getNbDatablocks(),a=e.length/r;if(a<i)throw new ye;for(var o=e.length%r,c=new Int32Array(a),u=0;u<a;u++,o+=r)c[u]=n.readCode(e,o,r);try{var h=new f1(t);h.decode(c,a-i)}catch(O){throw new ye(O)}for(var p=(1<<r)-1,g=0,u=0;u<i;u++){var _=c[u];if(_===0||_===p)throw new ye;(_===1||_===p-1)&&g++}for(var E=new Array(i*r-g),A=0,u=0;u<i;u++){var _=c[u];if(_===1||_===p-1)E.fill(_>1,A,A+r-1),A+=r-1;else for(var S=r-1;S>=0;--S)E[A++]=(_&1<<S)!==0}return E},n.prototype.extractBits=function(e){var t=this.ddata.isCompact(),r=this.ddata.getNbLayers(),i=(t?11:14)+r*4,a=new Int32Array(i),o=new Array(this.totalBitsInLayer(r,t));if(t)for(var c=0;c<a.length;c++)a[c]=c;else for(var u=i+1+2*Xe.truncDivision(Xe.truncDivision(i,2)-1,15),h=i/2,p=Xe.truncDivision(u,2),c=0;c<h;c++){var g=c+Xe.truncDivision(c,15);a[h-c-1]=p-g-1,a[h+c]=p+g+1}for(var c=0,_=0;c<r;c++){for(var E=(r-c)*4+(t?9:12),A=c*2,S=i-1-A,O=0;O<E;O++)for(var T=O*2,R=0;R<2;R++)o[_+T+R]=e.get(a[A+R],a[A+O]),o[_+2*E+T+R]=e.get(a[A+O],a[S-R]),o[_+4*E+T+R]=e.get(a[S-R],a[S-O]),o[_+6*E+T+R]=e.get(a[S-O],a[A+R]);_+=E*8}return o},n.readCode=function(e,t,r){for(var i=0,a=t;a<t+r;a++)i<<=1,e[a]&&(i|=1);return i},n.readByte=function(e,t){var r=e.length-t;return r>=8?n.readCode(e,t,8):n.readCode(e,t,r)<<8-r},n.convertBoolArrayToByteArray=function(e){for(var t=new Uint8Array((e.length+7)/8),r=0;r<t.length;r++)t[r]=n.readByte(e,8*r);return t},n.prototype.totalBitsInLayer=function(e,t){return((t?88:112)+16*e)*e},n.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],n.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],n.MIXED_TABLE=["CTRL_PS"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~","","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],n.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],n.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"],n})(),ft=(function(){function n(){}return n.round=function(e){return isNaN(e)?0:e<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:e>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:e+(e<0?-.5:.5)|0},n.distance=function(e,t,r,i){var a=e-r,o=t-i;return Math.sqrt(a*a+o*o)},n.sum=function(e){for(var t=0,r=0,i=e.length;r!==i;r++){var a=e[r];t+=a}return t},n})(),ev=(function(){function n(){}return n.floatToIntBits=function(e){return e},n.MAX_VALUE=Number.MAX_SAFE_INTEGER,n})(),Se=(function(){function n(e,t){this.x=e,this.y=t}return n.prototype.getX=function(){return this.x},n.prototype.getY=function(){return this.y},n.prototype.equals=function(e){if(e instanceof n){var t=e;return this.x===t.x&&this.y===t.y}return!1},n.prototype.hashCode=function(){return 31*ev.floatToIntBits(this.x)+ev.floatToIntBits(this.y)},n.prototype.toString=function(){return"("+this.x+","+this.y+")"},n.orderBestPatterns=function(e){var t=this.distance(e[0],e[1]),r=this.distance(e[1],e[2]),i=this.distance(e[0],e[2]),a,o,c;if(r>=t&&r>=i?(o=e[0],a=e[1],c=e[2]):i>=r&&i>=t?(o=e[1],a=e[0],c=e[2]):(o=e[2],a=e[0],c=e[1]),this.crossProductZ(a,o,c)<0){var u=a;a=c,c=u}e[0]=a,e[1]=o,e[2]=c},n.distance=function(e,t){return ft.distance(e.x,e.y,t.x,t.y)},n.crossProductZ=function(e,t,r){var i=t.x,a=t.y;return(r.x-i)*(e.y-a)-(r.y-a)*(e.x-i)},n})(),Ry=(function(){function n(e,t){this.bits=e,this.points=t}return n.prototype.getBits=function(){return this.bits},n.prototype.getPoints=function(){return this.points},n})(),MP=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),PP=(function(n){MP(e,n);function e(t,r,i,a,o){var c=n.call(this,t,r)||this;return c.compact=i,c.nbDatablocks=a,c.nbLayers=o,c}return e.prototype.getNbLayers=function(){return this.nbLayers},e.prototype.getNbDatablocks=function(){return this.nbDatablocks},e.prototype.isCompact=function(){return this.compact},e})(Ry),tv=(function(){function n(e,t,r,i){this.image=e,this.height=e.getHeight(),this.width=e.getWidth(),t==null&&(t=n.INIT_SIZE),r==null&&(r=e.getWidth()/2|0),i==null&&(i=e.getHeight()/2|0);var a=t/2|0;if(this.leftInit=r-a,this.rightInit=r+a,this.upInit=i-a,this.downInit=i+a,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new ae}return n.prototype.detect=function(){for(var e=this.leftInit,t=this.rightInit,r=this.upInit,i=this.downInit,a=!1,o=!0,c=!1,u=!1,h=!1,p=!1,g=!1,_=this.width,E=this.height;o;){o=!1;for(var A=!0;(A||!u)&&t<_;)A=this.containsBlackPoint(r,i,t,!1),A?(t++,o=!0,u=!0):u||t++;if(t>=_){a=!0;break}for(var S=!0;(S||!h)&&i<E;)S=this.containsBlackPoint(e,t,i,!0),S?(i++,o=!0,h=!0):h||i++;if(i>=E){a=!0;break}for(var O=!0;(O||!p)&&e>=0;)O=this.containsBlackPoint(r,i,e,!1),O?(e--,o=!0,p=!0):p||e--;if(e<0){a=!0;break}for(var T=!0;(T||!g)&&r>=0;)T=this.containsBlackPoint(e,t,r,!0),T?(r--,o=!0,g=!0):g||r--;if(r<0){a=!0;break}o&&(c=!0)}if(!a&&c){for(var R=t-e,L=null,z=1;L===null&&z<R;z++)L=this.getBlackPointOnSegment(e,i-z,e+z,i);if(L==null)throw new ae;for(var U=null,z=1;U===null&&z<R;z++)U=this.getBlackPointOnSegment(e,r+z,e+z,r);if(U==null)throw new ae;for(var G=null,z=1;G===null&&z<R;z++)G=this.getBlackPointOnSegment(t,r+z,t-z,r);if(G==null)throw new ae;for(var D=null,z=1;D===null&&z<R;z++)D=this.getBlackPointOnSegment(t,i-z,t-z,i);if(D==null)throw new ae;return this.centerEdges(D,L,G,U)}else throw new ae},n.prototype.getBlackPointOnSegment=function(e,t,r,i){for(var a=ft.round(ft.distance(e,t,r,i)),o=(r-e)/a,c=(i-t)/a,u=this.image,h=0;h<a;h++){var p=ft.round(e+h*o),g=ft.round(t+h*c);if(u.get(p,g))return new Se(p,g)}return null},n.prototype.centerEdges=function(e,t,r,i){var a=e.getX(),o=e.getY(),c=t.getX(),u=t.getY(),h=r.getX(),p=r.getY(),g=i.getX(),_=i.getY(),E=n.CORR;return a<this.width/2?[new Se(g-E,_+E),new Se(c+E,u+E),new Se(h-E,p-E),new Se(a+E,o-E)]:[new Se(g+E,_+E),new Se(c+E,u-E),new Se(h-E,p+E),new Se(a-E,o-E)]},n.prototype.containsBlackPoint=function(e,t,r,i){var a=this.image;if(i){for(var o=e;o<=t;o++)if(a.get(o,r))return!0}else for(var c=e;c<=t;c++)if(a.get(r,c))return!0;return!1},n.INIT_SIZE=10,n.CORR=1,n})(),dA=(function(){function n(){}return n.checkAndNudgePoints=function(e,t){for(var r=e.getWidth(),i=e.getHeight(),a=!0,o=0;o<t.length&&a;o+=2){var c=Math.floor(t[o]),u=Math.floor(t[o+1]);if(c<-1||c>r||u<-1||u>i)throw new ae;a=!1,c===-1?(t[o]=0,a=!0):c===r&&(t[o]=r-1,a=!0),u===-1?(t[o+1]=0,a=!0):u===i&&(t[o+1]=i-1,a=!0)}a=!0;for(var o=t.length-2;o>=0&&a;o-=2){var c=Math.floor(t[o]),u=Math.floor(t[o+1]);if(c<-1||c>r||u<-1||u>i)throw new ae;a=!1,c===-1?(t[o]=0,a=!0):c===r&&(t[o]=r-1,a=!0),u===-1?(t[o+1]=0,a=!0):u===i&&(t[o+1]=i-1,a=!0)}},n})(),i3=(function(){function n(e,t,r,i,a,o,c,u,h){this.a11=e,this.a21=t,this.a31=r,this.a12=i,this.a22=a,this.a32=o,this.a13=c,this.a23=u,this.a33=h}return n.quadrilateralToQuadrilateral=function(e,t,r,i,a,o,c,u,h,p,g,_,E,A,S,O){var T=n.quadrilateralToSquare(e,t,r,i,a,o,c,u),R=n.squareToQuadrilateral(h,p,g,_,E,A,S,O);return R.times(T)},n.prototype.transformPoints=function(e){for(var t=e.length,r=this.a11,i=this.a12,a=this.a13,o=this.a21,c=this.a22,u=this.a23,h=this.a31,p=this.a32,g=this.a33,_=0;_<t;_+=2){var E=e[_],A=e[_+1],S=a*E+u*A+g;e[_]=(r*E+o*A+h)/S,e[_+1]=(i*E+c*A+p)/S}},n.prototype.transformPointsWithValues=function(e,t){for(var r=this.a11,i=this.a12,a=this.a13,o=this.a21,c=this.a22,u=this.a23,h=this.a31,p=this.a32,g=this.a33,_=e.length,E=0;E<_;E++){var A=e[E],S=t[E],O=a*A+u*S+g;e[E]=(r*A+o*S+h)/O,t[E]=(i*A+c*S+p)/O}},n.squareToQuadrilateral=function(e,t,r,i,a,o,c,u){var h=e-r+a-c,p=t-i+o-u;if(h===0&&p===0)return new n(r-e,a-r,e,i-t,o-i,t,0,0,1);var g=r-a,_=c-a,E=i-o,A=u-o,S=g*A-_*E,O=(h*A-_*p)/S,T=(g*p-h*E)/S;return new n(r-e+O*r,c-e+T*c,e,i-t+O*i,u-t+T*u,t,O,T,1)},n.quadrilateralToSquare=function(e,t,r,i,a,o,c,u){return n.squareToQuadrilateral(e,t,r,i,a,o,c,u).buildAdjoint()},n.prototype.buildAdjoint=function(){return new n(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)},n.prototype.times=function(e){return new n(this.a11*e.a11+this.a21*e.a12+this.a31*e.a13,this.a11*e.a21+this.a21*e.a22+this.a31*e.a23,this.a11*e.a31+this.a21*e.a32+this.a31*e.a33,this.a12*e.a11+this.a22*e.a12+this.a32*e.a13,this.a12*e.a21+this.a22*e.a22+this.a32*e.a23,this.a12*e.a31+this.a22*e.a32+this.a32*e.a33,this.a13*e.a11+this.a23*e.a12+this.a33*e.a13,this.a13*e.a21+this.a23*e.a22+this.a33*e.a23,this.a13*e.a31+this.a23*e.a32+this.a33*e.a33)},n})(),kP=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),LP=(function(n){kP(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.sampleGrid=function(t,r,i,a,o,c,u,h,p,g,_,E,A,S,O,T,R,L,z){var U=i3.quadrilateralToQuadrilateral(a,o,c,u,h,p,g,_,E,A,S,O,T,R,L,z);return this.sampleGridWithTransform(t,r,i,U)},e.prototype.sampleGridWithTransform=function(t,r,i,a){if(r<=0||i<=0)throw new ae;for(var o=new pa(r,i),c=new Float32Array(2*r),u=0;u<i;u++){for(var h=c.length,p=u+.5,g=0;g<h;g+=2)c[g]=g/2+.5,c[g+1]=p;a.transformPoints(c),dA.checkAndNudgePoints(t,c);try{for(var g=0;g<h;g+=2)t.get(Math.floor(c[g]),Math.floor(c[g+1]))&&o.set(g/2,u)}catch{throw new ae}}return o},e})(dA),Oy=(function(){function n(){}return n.setGridSampler=function(e){n.gridSampler=e},n.getInstance=function(){return n.gridSampler},n.gridSampler=new LP,n})(),wr=(function(){function n(e,t){this.x=e,this.y=t}return n.prototype.toResultPoint=function(){return new Se(this.getX(),this.getY())},n.prototype.getX=function(){return this.x},n.prototype.getY=function(){return this.y},n})(),jP=(function(){function n(e){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=e}return n.prototype.detect=function(){return this.detectMirror(!1)},n.prototype.detectMirror=function(e){var t=this.getMatrixCenter(),r=this.getBullsEyeCorners(t);if(e){var i=r[0];r[0]=r[2],r[2]=i}this.extractParameters(r);var a=this.sampleGrid(this.image,r[this.shift%4],r[(this.shift+1)%4],r[(this.shift+2)%4],r[(this.shift+3)%4]),o=this.getMatrixCornerPoints(r);return new PP(a,o,this.compact,this.nbDataBlocks,this.nbLayers)},n.prototype.extractParameters=function(e){if(!this.isValidPoint(e[0])||!this.isValidPoint(e[1])||!this.isValidPoint(e[2])||!this.isValidPoint(e[3]))throw new ae;var t=2*this.nbCenterLayers,r=new Int32Array([this.sampleLine(e[0],e[1],t),this.sampleLine(e[1],e[2],t),this.sampleLine(e[2],e[3],t),this.sampleLine(e[3],e[0],t)]);this.shift=this.getRotation(r,t);for(var i=0,a=0;a<4;a++){var o=r[(this.shift+a)%4];this.compact?(i<<=7,i+=o>>1&127):(i<<=10,i+=(o>>2&992)+(o>>1&31))}var c=this.getCorrectedParameterData(i,this.compact);this.compact?(this.nbLayers=(c>>6)+1,this.nbDataBlocks=(c&63)+1):(this.nbLayers=(c>>11)+1,this.nbDataBlocks=(c&2047)+1)},n.prototype.getRotation=function(e,t){var r=0;e.forEach(function(a,o,c){var u=(a>>t-2<<1)+(a&1);r=(r<<3)+u}),r=((r&1)<<11)+(r>>1);for(var i=0;i<4;i++)if(Xe.bitCount(r^this.EXPECTED_CORNER_BITS[i])<=2)return i;throw new ae},n.prototype.getCorrectedParameterData=function(e,t){var r,i;t?(r=7,i=2):(r=10,i=4);for(var a=r-i,o=new Int32Array(r),c=r-1;c>=0;--c)o[c]=e&15,e>>=4;try{var u=new f1(br.AZTEC_PARAM);u.decode(o,a)}catch{throw new ae}for(var h=0,c=0;c<i;c++)h=(h<<4)+o[c];return h},n.prototype.getBullsEyeCorners=function(e){var t=e,r=e,i=e,a=e,o=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){var c=this.getFirstDifferent(t,o,1,-1),u=this.getFirstDifferent(r,o,1,1),h=this.getFirstDifferent(i,o,-1,1),p=this.getFirstDifferent(a,o,-1,-1);if(this.nbCenterLayers>2){var g=this.distancePoint(p,c)*this.nbCenterLayers/(this.distancePoint(a,t)*(this.nbCenterLayers+2));if(g<.75||g>1.25||!this.isWhiteOrBlackRectangle(c,u,h,p))break}t=c,r=u,i=h,a=p,o=!o}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new ae;this.compact=this.nbCenterLayers===5;var _=new Se(t.getX()+.5,t.getY()-.5),E=new Se(r.getX()+.5,r.getY()+.5),A=new Se(i.getX()-.5,i.getY()+.5),S=new Se(a.getX()-.5,a.getY()-.5);return this.expandSquare([_,E,A,S],2*this.nbCenterLayers-3,2*this.nbCenterLayers)},n.prototype.getMatrixCenter=function(){var e,t,r,i;try{var a=new tv(this.image).detect();e=a[0],t=a[1],r=a[2],i=a[3]}catch{var o=this.image.getWidth()/2,c=this.image.getHeight()/2;e=this.getFirstDifferent(new wr(o+7,c-7),!1,1,-1).toResultPoint(),t=this.getFirstDifferent(new wr(o+7,c+7),!1,1,1).toResultPoint(),r=this.getFirstDifferent(new wr(o-7,c+7),!1,-1,1).toResultPoint(),i=this.getFirstDifferent(new wr(o-7,c-7),!1,-1,-1).toResultPoint()}var u=ft.round((e.getX()+i.getX()+t.getX()+r.getX())/4),h=ft.round((e.getY()+i.getY()+t.getY()+r.getY())/4);try{var a=new tv(this.image,15,u,h).detect();e=a[0],t=a[1],r=a[2],i=a[3]}catch{e=this.getFirstDifferent(new wr(u+7,h-7),!1,1,-1).toResultPoint(),t=this.getFirstDifferent(new wr(u+7,h+7),!1,1,1).toResultPoint(),r=this.getFirstDifferent(new wr(u-7,h+7),!1,-1,1).toResultPoint(),i=this.getFirstDifferent(new wr(u-7,h-7),!1,-1,-1).toResultPoint()}return u=ft.round((e.getX()+i.getX()+t.getX()+r.getX())/4),h=ft.round((e.getY()+i.getY()+t.getY()+r.getY())/4),new wr(u,h)},n.prototype.getMatrixCornerPoints=function(e){return this.expandSquare(e,2*this.nbCenterLayers,this.getDimension())},n.prototype.sampleGrid=function(e,t,r,i,a){var o=Oy.getInstance(),c=this.getDimension(),u=c/2-this.nbCenterLayers,h=c/2+this.nbCenterLayers;return o.sampleGrid(e,c,c,u,u,h,u,h,h,u,h,t.getX(),t.getY(),r.getX(),r.getY(),i.getX(),i.getY(),a.getX(),a.getY())},n.prototype.sampleLine=function(e,t,r){for(var i=0,a=this.distanceResultPoint(e,t),o=a/r,c=e.getX(),u=e.getY(),h=o*(t.getX()-e.getX())/a,p=o*(t.getY()-e.getY())/a,g=0;g<r;g++)this.image.get(ft.round(c+g*h),ft.round(u+g*p))&&(i|=1<<r-g-1);return i},n.prototype.isWhiteOrBlackRectangle=function(e,t,r,i){var a=3;e=new wr(e.getX()-a,e.getY()+a),t=new wr(t.getX()-a,t.getY()-a),r=new wr(r.getX()+a,r.getY()-a),i=new wr(i.getX()+a,i.getY()+a);var o=this.getColor(i,e);if(o===0)return!1;var c=this.getColor(e,t);return c!==o||(c=this.getColor(t,r),c!==o)?!1:(c=this.getColor(r,i),c===o)},n.prototype.getColor=function(e,t){for(var r=this.distancePoint(e,t),i=(t.getX()-e.getX())/r,a=(t.getY()-e.getY())/r,o=0,c=e.getX(),u=e.getY(),h=this.image.get(e.getX(),e.getY()),p=Math.ceil(r),g=0;g<p;g++)c+=i,u+=a,this.image.get(ft.round(c),ft.round(u))!==h&&o++;var _=o/r;return _>.1&&_<.9?0:_<=.1===h?1:-1},n.prototype.getFirstDifferent=function(e,t,r,i){for(var a=e.getX()+r,o=e.getY()+i;this.isValid(a,o)&&this.image.get(a,o)===t;)a+=r,o+=i;for(a-=r,o-=i;this.isValid(a,o)&&this.image.get(a,o)===t;)a+=r;for(a-=r;this.isValid(a,o)&&this.image.get(a,o)===t;)o+=i;return o-=i,new wr(a,o)},n.prototype.expandSquare=function(e,t,r){var i=r/(2*t),a=e[0].getX()-e[2].getX(),o=e[0].getY()-e[2].getY(),c=(e[0].getX()+e[2].getX())/2,u=(e[0].getY()+e[2].getY())/2,h=new Se(c+i*a,u+i*o),p=new Se(c-i*a,u-i*o);a=e[1].getX()-e[3].getX(),o=e[1].getY()-e[3].getY(),c=(e[1].getX()+e[3].getX())/2,u=(e[1].getY()+e[3].getY())/2;var g=new Se(c+i*a,u+i*o),_=new Se(c-i*a,u-i*o),E=[h,g,p,_];return E},n.prototype.isValid=function(e,t){return e>=0&&e<this.image.getWidth()&&t>0&&t<this.image.getHeight()},n.prototype.isValidPoint=function(e){var t=ft.round(e.getX()),r=ft.round(e.getY());return this.isValid(t,r)},n.prototype.distancePoint=function(e,t){return ft.distance(e.getX(),e.getY(),t.getX(),t.getY())},n.prototype.distanceResultPoint=function(e,t){return ft.distance(e.getX(),e.getY(),t.getX(),t.getY())},n.prototype.getDimension=function(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(Xe.truncDivision(this.nbLayers-4,8)+1)+15},n})(),w0=(function(){function n(){}return n.prototype.decode=function(e,t){t===void 0&&(t=null);var r=null,i=new jP(e.getBlackMatrix()),a=null,o=null;try{var c=i.detectMirror(!1);a=c.getPoints(),this.reportFoundResultPoints(t,a),o=new hA().decode(c)}catch(g){r=g}if(o==null)try{var c=i.detectMirror(!0);a=c.getPoints(),this.reportFoundResultPoints(t,a),o=new hA().decode(c)}catch(g){throw r??g}var u=new sr(o.getText(),o.getRawBytes(),o.getNumBits(),a,Me.AZTEC,Pt.currentTimeMillis()),h=o.getByteSegments();h!=null&&u.putMetadata(Jn.BYTE_SEGMENTS,h);var p=o.getECLevel();return p!=null&&u.putMetadata(Jn.ERROR_CORRECTION_LEVEL,p),u},n.prototype.reportFoundResultPoints=function(e,t){if(e!=null){var r=e.get(kt.NEED_RESULT_POINT_CALLBACK);r!=null&&t.forEach(function(i,a,o){r.foundPossibleResultPoint(i)})}},n.prototype.reset=function(){},n})(),BP=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})();(function(n){BP(e,n);function e(t){return t===void 0&&(t=500),n.call(this,new w0,t)||this}return e})(Bc);var Tn=(function(){function n(){}return n.prototype.decode=function(e,t){try{return this.doDecode(e,t)}catch{var r=t&&t.get(kt.TRY_HARDER)===!0;if(r&&e.isRotateSupported()){var i=e.rotateCounterClockwise(),a=this.doDecode(i,t),o=a.getResultMetadata(),c=270;o!==null&&o.get(Jn.ORIENTATION)===!0&&(c=c+o.get(Jn.ORIENTATION)%360),a.putMetadata(Jn.ORIENTATION,c);var u=a.getResultPoints();if(u!==null)for(var h=i.getHeight(),p=0;p<u.length;p++)u[p]=new Se(h-u[p].getY()-1,u[p].getX());return a}else throw new ae}},n.prototype.reset=function(){},n.prototype.doDecode=function(e,t){var r=e.getWidth(),i=e.getHeight(),a=new jn(r),o=t&&t.get(kt.TRY_HARDER)===!0,c=Math.max(1,i>>(o?8:5)),u;o?u=i:u=15;for(var h=Math.trunc(i/2),p=0;p<u;p++){var g=Math.trunc((p+1)/2),_=(p&1)===0,E=h+c*(_?g:-g);if(E<0||E>=i)break;try{a=e.getBlackRow(E,a)}catch{continue}for(var A=function(R){if(R===1&&(a.reverse(),t&&t.get(kt.NEED_RESULT_POINT_CALLBACK)===!0)){var L=new Map;t.forEach(function(G,D){return L.set(D,G)}),L.delete(kt.NEED_RESULT_POINT_CALLBACK),t=L}try{var z=S.decodeRow(E,a,t);if(R===1){z.putMetadata(Jn.ORIENTATION,180);var U=z.getResultPoints();U!==null&&(U[0]=new Se(r-U[0].getX()-1,U[0].getY()),U[1]=new Se(r-U[1].getX()-1,U[1].getY()))}return{value:z}}catch{}},S=this,O=0;O<2;O++){var T=A(O);if(typeof T=="object")return T.value}}throw new ae},n.recordPattern=function(e,t,r){for(var i=r.length,a=0;a<i;a++)r[a]=0;var o=e.getSize();if(t>=o)throw new ae;for(var c=!e.get(t),u=0,h=t;h<o;){if(e.get(h)!==c)r[u]++;else{if(++u===i)break;r[u]=1,c=!c}h++}if(!(u===i||u===i-1&&h===o))throw new ae},n.recordPatternInReverse=function(e,t,r){for(var i=r.length,a=e.get(t);t>0&&i>=0;)e.get(--t)!==a&&(i--,a=!a);if(i>=0)throw new ae;n.recordPattern(e,t+1,r)},n.patternMatchVariance=function(e,t,r){for(var i=e.length,a=0,o=0,c=0;c<i;c++)a+=e[c],o+=t[c];if(a<o)return Number.POSITIVE_INFINITY;var u=a/o;r*=u;for(var h=0,p=0;p<i;p++){var g=e[p],_=t[p]*u,E=g>_?g-_:_-g;if(E>r)return Number.POSITIVE_INFINITY;h+=E}return h/a},n})(),VP=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),pA=(function(n){VP(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.findStartPattern=function(t){for(var r=t.getSize(),i=t.getNextSet(0),a=0,o=Int32Array.from([0,0,0,0,0,0]),c=i,u=!1,h=6,p=i;p<r;p++)if(t.get(p)!==u)o[a]++;else{if(a===h-1){for(var g=e.MAX_AVG_VARIANCE,_=-1,E=e.CODE_START_A;E<=e.CODE_START_C;E++){var A=Tn.patternMatchVariance(o,e.CODE_PATTERNS[E],e.MAX_INDIVIDUAL_VARIANCE);A<g&&(g=A,_=E)}if(_>=0&&t.isRange(Math.max(0,c-(p-c)/2),c,!1))return Int32Array.from([c,p,_]);c+=o[0]+o[1],o=o.slice(2,o.length),o[a-1]=0,o[a]=0,a--}else a++;o[a]=1,u=!u}throw new ae},e.decodeCode=function(t,r,i){Tn.recordPattern(t,i,r);for(var a=e.MAX_AVG_VARIANCE,o=-1,c=0;c<e.CODE_PATTERNS.length;c++){var u=e.CODE_PATTERNS[c],h=this.patternMatchVariance(r,u,e.MAX_INDIVIDUAL_VARIANCE);h<a&&(a=h,o=c)}if(o>=0)return o;throw new ae},e.prototype.decodeRow=function(t,r,i){var a=i&&i.get(kt.ASSUME_GS1)===!0,o=e.findStartPattern(r),c=o[2],u=0,h=new Uint8Array(20);h[u++]=c;var p;switch(c){case e.CODE_START_A:p=e.CODE_CODE_A;break;case e.CODE_START_B:p=e.CODE_CODE_B;break;case e.CODE_START_C:p=e.CODE_CODE_C;break;default:throw new ye}for(var g=!1,_=!1,E="",A=o[0],S=o[1],O=Int32Array.from([0,0,0,0,0,0]),T=0,R=0,L=c,z=0,U=!0,G=!1,D=!1;!g;){var w=_;switch(_=!1,T=R,R=e.decodeCode(r,O,S),h[u++]=R,R!==e.CODE_STOP&&(U=!0),R!==e.CODE_STOP&&(z++,L+=z*R),A=S,S+=O.reduce(function(ce,me){return ce+me},0),R){case e.CODE_START_A:case e.CODE_START_B:case e.CODE_START_C:throw new ye}switch(p){case e.CODE_CODE_A:if(R<64)D===G?E+=String.fromCharCode(32+R):E+=String.fromCharCode(32+R+128),D=!1;else if(R<96)D===G?E+=String.fromCharCode(R-64):E+=String.fromCharCode(R+64),D=!1;else switch(R!==e.CODE_STOP&&(U=!1),R){case e.CODE_FNC_1:a&&(E.length===0?E+="]C1":E+="");break;case e.CODE_FNC_2:case e.CODE_FNC_3:break;case e.CODE_FNC_4_A:!G&&D?(G=!0,D=!1):G&&D?(G=!1,D=!1):D=!0;break;case e.CODE_SHIFT:_=!0,p=e.CODE_CODE_B;break;case e.CODE_CODE_B:p=e.CODE_CODE_B;break;case e.CODE_CODE_C:p=e.CODE_CODE_C;break;case e.CODE_STOP:g=!0;break}break;case e.CODE_CODE_B:if(R<96)D===G?E+=String.fromCharCode(32+R):E+=String.fromCharCode(32+R+128),D=!1;else switch(R!==e.CODE_STOP&&(U=!1),R){case e.CODE_FNC_1:a&&(E.length===0?E+="]C1":E+="");break;case e.CODE_FNC_2:case e.CODE_FNC_3:break;case e.CODE_FNC_4_B:!G&&D?(G=!0,D=!1):G&&D?(G=!1,D=!1):D=!0;break;case e.CODE_SHIFT:_=!0,p=e.CODE_CODE_A;break;case e.CODE_CODE_A:p=e.CODE_CODE_A;break;case e.CODE_CODE_C:p=e.CODE_CODE_C;break;case e.CODE_STOP:g=!0;break}break;case e.CODE_CODE_C:if(R<100)R<10&&(E+="0"),E+=R;else switch(R!==e.CODE_STOP&&(U=!1),R){case e.CODE_FNC_1:a&&(E.length===0?E+="]C1":E+="");break;case e.CODE_CODE_A:p=e.CODE_CODE_A;break;case e.CODE_CODE_B:p=e.CODE_CODE_B;break;case e.CODE_STOP:g=!0;break}break}w&&(p=p===e.CODE_CODE_A?e.CODE_CODE_B:e.CODE_CODE_A)}var I=S-A;if(S=r.getNextUnset(S),!r.isRange(S,Math.min(r.getSize(),S+(S-A)/2),!1))throw new ae;if(L-=z*T,L%103!==T)throw new _n;var M=E.length;if(M===0)throw new ae;M>0&&U&&(p===e.CODE_CODE_C?E=E.substring(0,M-2):E=E.substring(0,M-1));for(var j=(o[1]+o[0])/2,V=A+I/2,k=h.length,ee=new Uint8Array(k),Ie=0;Ie<k;Ie++)ee[Ie]=h[Ie];var q=[new Se(j,t),new Se(V,t)];return new sr(E,ee,0,q,Me.CODE_128,new Date().getTime())},e.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],e.MAX_AVG_VARIANCE=.25,e.MAX_INDIVIDUAL_VARIANCE=.7,e.CODE_SHIFT=98,e.CODE_CODE_C=99,e.CODE_CODE_B=100,e.CODE_CODE_A=101,e.CODE_FNC_1=102,e.CODE_FNC_2=97,e.CODE_FNC_3=96,e.CODE_FNC_4_A=101,e.CODE_FNC_4_B=100,e.CODE_START_A=103,e.CODE_START_B=104,e.CODE_START_C=105,e.CODE_STOP=106,e})(Tn),FP=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),km=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},mA=(function(n){FP(e,n);function e(t,r){t===void 0&&(t=!1),r===void 0&&(r=!1);var i=n.call(this)||this;return i.usingCheckDigit=t,i.extendedMode=r,i.decodeRowResult="",i.counters=new Int32Array(9),i}return e.prototype.decodeRow=function(t,r,i){var a,o,c,u,h=this.counters;h.fill(0),this.decodeRowResult="";var p=e.findAsteriskPattern(r,h),g=r.getNextSet(p[1]),_=r.getSize(),E,A;do{e.recordPattern(r,g,h);var S=e.toNarrowWidePattern(h);if(S<0)throw new ae;E=e.patternToChar(S),this.decodeRowResult+=E,A=g;try{for(var O=(a=void 0,km(h)),T=O.next();!T.done;T=O.next()){var R=T.value;g+=R}}catch(k){a={error:k}}finally{try{T&&!T.done&&(o=O.return)&&o.call(O)}finally{if(a)throw a.error}}g=r.getNextSet(g)}while(E!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var L=0;try{for(var z=km(h),U=z.next();!U.done;U=z.next()){var R=U.value;L+=R}}catch(k){c={error:k}}finally{try{U&&!U.done&&(u=z.return)&&u.call(z)}finally{if(c)throw c.error}}var G=g-A-L;if(g!==_&&G*2<L)throw new ae;if(this.usingCheckDigit){for(var D=this.decodeRowResult.length-1,w=0,I=0;I<D;I++)w+=e.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(I));if(this.decodeRowResult.charAt(D)!==e.ALPHABET_STRING.charAt(w%43))throw new _n;this.decodeRowResult=this.decodeRowResult.substring(0,D)}if(this.decodeRowResult.length===0)throw new ae;var M;this.extendedMode?M=e.decodeExtended(this.decodeRowResult):M=this.decodeRowResult;var j=(p[1]+p[0])/2,V=A+L/2;return new sr(M,null,0,[new Se(j,t),new Se(V,t)],Me.CODE_39,new Date().getTime())},e.findAsteriskPattern=function(t,r){for(var i=t.getSize(),a=t.getNextSet(0),o=0,c=a,u=!1,h=r.length,p=a;p<i;p++)if(t.get(p)!==u)r[o]++;else{if(o===h-1){if(this.toNarrowWidePattern(r)===e.ASTERISK_ENCODING&&t.isRange(Math.max(0,c-Math.floor((p-c)/2)),c,!1))return[c,p];c+=r[0]+r[1],r.copyWithin(0,2,2+o-1),r[o-1]=0,r[o]=0,o--}else o++;r[o]=1,u=!u}throw new ae},e.toNarrowWidePattern=function(t){var r,i,a=t.length,o=0,c;do{var u=2147483647;try{for(var h=(r=void 0,km(t)),p=h.next();!p.done;p=h.next()){var g=p.value;g<u&&g>o&&(u=g)}}catch(S){r={error:S}}finally{try{p&&!p.done&&(i=h.return)&&i.call(h)}finally{if(r)throw r.error}}o=u,c=0;for(var _=0,E=0,A=0;A<a;A++){var g=t[A];g>o&&(E|=1<<a-1-A,c++,_+=g)}if(c===3){for(var A=0;A<a&&c>0;A++){var g=t[A];if(g>o&&(c--,g*2>=_))return-1}return E}}while(c>3);return-1},e.patternToChar=function(t){for(var r=0;r<e.CHARACTER_ENCODINGS.length;r++)if(e.CHARACTER_ENCODINGS[r]===t)return e.ALPHABET_STRING.charAt(r);if(t===e.ASTERISK_ENCODING)return"*";throw new ae},e.decodeExtended=function(t){for(var r=t.length,i="",a=0;a<r;a++){var o=t.charAt(a);if(o==="+"||o==="$"||o==="%"||o==="/"){var c=t.charAt(a+1),u="\0";switch(o){case"+":if(c>="A"&&c<="Z")u=String.fromCharCode(c.charCodeAt(0)+32);else throw new ye;break;case"$":if(c>="A"&&c<="Z")u=String.fromCharCode(c.charCodeAt(0)-64);else throw new ye;break;case"%":if(c>="A"&&c<="E")u=String.fromCharCode(c.charCodeAt(0)-38);else if(c>="F"&&c<="J")u=String.fromCharCode(c.charCodeAt(0)-11);else if(c>="K"&&c<="O")u=String.fromCharCode(c.charCodeAt(0)+16);else if(c>="P"&&c<="T")u=String.fromCharCode(c.charCodeAt(0)+43);else if(c==="U")u="\0";else if(c==="V")u="@";else if(c==="W")u="`";else if(c==="X"||c==="Y"||c==="Z")u="";else throw new ye;break;case"/":if(c>="A"&&c<="O")u=String.fromCharCode(c.charCodeAt(0)-32);else if(c==="Z")u=":";else throw new ye;break}i+=u,a++}else i+=o}return i},e.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",e.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],e.ASTERISK_ENCODING=148,e})(Tn),UP=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Lm=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},gA=(function(n){UP(e,n);function e(){var t=n.call(this)||this;return t.decodeRowResult="",t.counters=new Int32Array(6),t}return e.prototype.decodeRow=function(t,r,i){var a,o,c,u,h=this.findAsteriskPattern(r),p=r.getNextSet(h[1]),g=r.getSize(),_=this.counters;_.fill(0),this.decodeRowResult="";var E,A;do{e.recordPattern(r,p,_);var S=this.toPattern(_);if(S<0)throw new ae;E=this.patternToChar(S),this.decodeRowResult+=E,A=p;try{for(var O=(a=void 0,Lm(_)),T=O.next();!T.done;T=O.next()){var R=T.value;p+=R}}catch(I){a={error:I}}finally{try{T&&!T.done&&(o=O.return)&&o.call(O)}finally{if(a)throw a.error}}p=r.getNextSet(p)}while(E!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var L=0;try{for(var z=Lm(_),U=z.next();!U.done;U=z.next()){var R=U.value;L+=R}}catch(I){c={error:I}}finally{try{U&&!U.done&&(u=z.return)&&u.call(z)}finally{if(c)throw c.error}}if(p===g||!r.get(p))throw new ae;if(this.decodeRowResult.length<2)throw new ae;this.checkChecksums(this.decodeRowResult),this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-2);var G=this.decodeExtended(this.decodeRowResult),D=(h[1]+h[0])/2,w=A+L/2;return new sr(G,null,0,[new Se(D,t),new Se(w,t)],Me.CODE_93,new Date().getTime())},e.prototype.findAsteriskPattern=function(t){var r=t.getSize(),i=t.getNextSet(0);this.counters.fill(0);for(var a=this.counters,o=i,c=!1,u=a.length,h=0,p=i;p<r;p++)if(t.get(p)!==c)a[h]++;else{if(h===u-1){if(this.toPattern(a)===e.ASTERISK_ENCODING)return new Int32Array([o,p]);o+=a[0]+a[1],a.copyWithin(0,2,2+h-1),a[h-1]=0,a[h]=0,h--}else h++;a[h]=1,c=!c}throw new ae},e.prototype.toPattern=function(t){var r,i,a=0;try{for(var o=Lm(t),c=o.next();!c.done;c=o.next()){var u=c.value;a+=u}}catch(A){r={error:A}}finally{try{c&&!c.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}for(var h=0,p=t.length,g=0;g<p;g++){var _=Math.round(t[g]*9/a);if(_<1||_>4)return-1;if((g&1)===0)for(var E=0;E<_;E++)h=h<<1|1;else h<<=_}return h},e.prototype.patternToChar=function(t){for(var r=0;r<e.CHARACTER_ENCODINGS.length;r++)if(e.CHARACTER_ENCODINGS[r]===t)return e.ALPHABET_STRING.charAt(r);throw new ae},e.prototype.decodeExtended=function(t){for(var r=t.length,i="",a=0;a<r;a++){var o=t.charAt(a);if(o>="a"&&o<="d"){if(a>=r-1)throw new ye;var c=t.charAt(a+1),u="\0";switch(o){case"d":if(c>="A"&&c<="Z")u=String.fromCharCode(c.charCodeAt(0)+32);else throw new ye;break;case"a":if(c>="A"&&c<="Z")u=String.fromCharCode(c.charCodeAt(0)-64);else throw new ye;break;case"b":if(c>="A"&&c<="E")u=String.fromCharCode(c.charCodeAt(0)-38);else if(c>="F"&&c<="J")u=String.fromCharCode(c.charCodeAt(0)-11);else if(c>="K"&&c<="O")u=String.fromCharCode(c.charCodeAt(0)+16);else if(c>="P"&&c<="T")u=String.fromCharCode(c.charCodeAt(0)+43);else if(c==="U")u="\0";else if(c==="V")u="@";else if(c==="W")u="`";else if(c>="X"&&c<="Z")u="";else throw new ye;break;case"c":if(c>="A"&&c<="O")u=String.fromCharCode(c.charCodeAt(0)-32);else if(c==="Z")u=":";else throw new ye;break}i+=u,a++}else i+=o}return i},e.prototype.checkChecksums=function(t){var r=t.length;this.checkOneChecksum(t,r-2,20),this.checkOneChecksum(t,r-1,15)},e.prototype.checkOneChecksum=function(t,r,i){for(var a=1,o=0,c=r-1;c>=0;c--)o+=a*e.ALPHABET_STRING.indexOf(t.charAt(c)),++a>i&&(a=1);if(t.charAt(r)!==e.ALPHABET_STRING[o%47])throw new _n},e.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%abcd*",e.CHARACTER_ENCODINGS=[276,328,324,322,296,292,290,336,274,266,424,420,418,404,402,394,360,356,354,308,282,344,332,326,300,278,436,434,428,422,406,410,364,358,310,314,302,468,466,458,366,374,430,294,474,470,306,350],e.ASTERISK_ENCODING=e.CHARACTER_ENCODINGS[47],e})(Tn),zP=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),HP=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},vA=(function(n){zP(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.narrowLineWidth=-1,t}return e.prototype.decodeRow=function(t,r,i){var a,o,c=this.decodeStart(r),u=this.decodeEnd(r),h=new $e;e.decodeMiddle(r,c[1],u[0],h);var p=h.toString(),g=null;i!=null&&(g=i.get(kt.ALLOWED_LENGTHS)),g==null&&(g=e.DEFAULT_ALLOWED_LENGTHS);var _=p.length,E=!1,A=0;try{for(var S=HP(g),O=S.next();!O.done;O=S.next()){var T=O.value;if(_===T){E=!0;break}T>A&&(A=T)}}catch(z){a={error:z}}finally{try{O&&!O.done&&(o=S.return)&&o.call(S)}finally{if(a)throw a.error}}if(!E&&_>A&&(E=!0),!E)throw new ye;var R=[new Se(c[1],t),new Se(u[0],t)],L=new sr(p,null,0,R,Me.ITF,new Date().getTime());return L},e.decodeMiddle=function(t,r,i,a){var o=new Int32Array(10),c=new Int32Array(5),u=new Int32Array(5);for(o.fill(0),c.fill(0),u.fill(0);r<i;){Tn.recordPattern(t,r,o);for(var h=0;h<5;h++){var p=2*h;c[h]=o[p],u[h]=o[p+1]}var g=e.decodeDigit(c);a.append(g.toString()),g=this.decodeDigit(u),a.append(g.toString()),o.forEach(function(_){r+=_})}},e.prototype.decodeStart=function(t){var r=e.skipWhiteSpace(t),i=e.findGuardPattern(t,r,e.START_PATTERN);return this.narrowLineWidth=(i[1]-i[0])/4,this.validateQuietZone(t,i[0]),i},e.prototype.validateQuietZone=function(t,r){var i=this.narrowLineWidth*10;i=i<r?i:r;for(var a=r-1;i>0&&a>=0&&!t.get(a);a--)i--;if(i!==0)throw new ae},e.skipWhiteSpace=function(t){var r=t.getSize(),i=t.getNextSet(0);if(i===r)throw new ae;return i},e.prototype.decodeEnd=function(t){t.reverse();try{var r=e.skipWhiteSpace(t),i=void 0;try{i=e.findGuardPattern(t,r,e.END_PATTERN_REVERSED[0])}catch(o){o instanceof ae&&(i=e.findGuardPattern(t,r,e.END_PATTERN_REVERSED[1]))}this.validateQuietZone(t,i[0]);var a=i[0];return i[0]=t.getSize()-i[1],i[1]=t.getSize()-a,i}finally{t.reverse()}},e.findGuardPattern=function(t,r,i){var a=i.length,o=new Int32Array(a),c=t.getSize(),u=!1,h=0,p=r;o.fill(0);for(var g=r;g<c;g++)if(t.get(g)!==u)o[h]++;else{if(h===a-1){if(Tn.patternMatchVariance(o,i,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return[p,g];p+=o[0]+o[1],Pt.arraycopy(o,2,o,0,h-1),o[h-1]=0,o[h]=0,h--}else h++;o[h]=1,u=!u}throw new ae},e.decodeDigit=function(t){for(var r=e.MAX_AVG_VARIANCE,i=-1,a=e.PATTERNS.length,o=0;o<a;o++){var c=e.PATTERNS[o],u=Tn.patternMatchVariance(t,c,e.MAX_INDIVIDUAL_VARIANCE);u<r?(r=u,i=o):u===r&&(i=-1)}if(i>=0)return i%10;throw new ae},e.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],e.MAX_AVG_VARIANCE=.38,e.MAX_INDIVIDUAL_VARIANCE=.5,e.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],e.START_PATTERN=Int32Array.from([1,1,1,1]),e.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])],e})(Tn),GP=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Ac=(function(n){GP(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.decodeRowStringBuffer="",t}return e.findStartGuardPattern=function(t){for(var r=!1,i,a=0,o=Int32Array.from([0,0,0]);!r;){o=Int32Array.from([0,0,0]),i=e.findGuardPattern(t,a,!1,this.START_END_PATTERN,o);var c=i[0];a=i[1];var u=c-(a-c);u>=0&&(r=t.isRange(u,c,!1))}return i},e.checkChecksum=function(t){return e.checkStandardUPCEANChecksum(t)},e.checkStandardUPCEANChecksum=function(t){var r=t.length;if(r===0)return!1;var i=parseInt(t.charAt(r-1),10);return e.getStandardUPCEANChecksum(t.substring(0,r-1))===i},e.getStandardUPCEANChecksum=function(t){for(var r=t.length,i=0,a=r-1;a>=0;a-=2){var o=t.charAt(a).charCodeAt(0)-48;if(o<0||o>9)throw new ye;i+=o}i*=3;for(var a=r-2;a>=0;a-=2){var o=t.charAt(a).charCodeAt(0)-48;if(o<0||o>9)throw new ye;i+=o}return(1e3-i)%10},e.decodeEnd=function(t,r){return e.findGuardPattern(t,r,!1,e.START_END_PATTERN,new Int32Array(e.START_END_PATTERN.length).fill(0))},e.findGuardPatternWithoutCounters=function(t,r,i,a){return this.findGuardPattern(t,r,i,a,new Int32Array(a.length))},e.findGuardPattern=function(t,r,i,a,o){var c=t.getSize();r=i?t.getNextUnset(r):t.getNextSet(r);for(var u=0,h=r,p=a.length,g=i,_=r;_<c;_++)if(t.get(_)!==g)o[u]++;else{if(u===p-1){if(Tn.patternMatchVariance(o,a,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return Int32Array.from([h,_]);h+=o[0]+o[1];for(var E=o.slice(2,o.length),A=0;A<u-1;A++)o[A]=E[A];o[u-1]=0,o[u]=0,u--}else u++;o[u]=1,g=!g}throw new ae},e.decodeDigit=function(t,r,i,a){this.recordPattern(t,i,r);for(var o=this.MAX_AVG_VARIANCE,c=-1,u=a.length,h=0;h<u;h++){var p=a[h],g=Tn.patternMatchVariance(r,p,e.MAX_INDIVIDUAL_VARIANCE);g<o&&(o=g,c=h)}if(c>=0)return c;throw new ae},e.MAX_AVG_VARIANCE=.48,e.MAX_INDIVIDUAL_VARIANCE=.7,e.START_END_PATTERN=Int32Array.from([1,1,1]),e.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),e.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),e.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])],e})(Tn),qP=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},$P=(function(){function n(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return n.prototype.decodeRow=function(e,t,r){var i=this.decodeRowStringBuffer,a=this.decodeMiddle(t,r,i),o=i.toString(),c=n.parseExtensionString(o),u=[new Se((r[0]+r[1])/2,e),new Se(a,e)],h=new sr(o,null,0,u,Me.UPC_EAN_EXTENSION,new Date().getTime());return c!=null&&h.putAllMetadata(c),h},n.prototype.decodeMiddle=function(e,t,r){var i,a,o=this.decodeMiddleCounters;o[0]=0,o[1]=0,o[2]=0,o[3]=0;for(var c=e.getSize(),u=t[1],h=0,p=0;p<5&&u<c;p++){var g=Ac.decodeDigit(e,o,u,Ac.L_AND_G_PATTERNS);r+=String.fromCharCode(48+g%10);try{for(var _=(i=void 0,qP(o)),E=_.next();!E.done;E=_.next()){var A=E.value;u+=A}}catch(O){i={error:O}}finally{try{E&&!E.done&&(a=_.return)&&a.call(_)}finally{if(i)throw i.error}}g>=10&&(h|=1<<4-p),p!==4&&(u=e.getNextSet(u),u=e.getNextUnset(u))}if(r.length!==5)throw new ae;var S=this.determineCheckDigit(h);if(n.extensionChecksum(r.toString())!==S)throw new ae;return u},n.extensionChecksum=function(e){for(var t=e.length,r=0,i=t-2;i>=0;i-=2)r+=e.charAt(i).charCodeAt(0)-48;r*=3;for(var i=t-1;i>=0;i-=2)r+=e.charAt(i).charCodeAt(0)-48;return r*=3,r%10},n.prototype.determineCheckDigit=function(e){for(var t=0;t<10;t++)if(e===this.CHECK_DIGIT_ENCODINGS[t])return t;throw new ae},n.parseExtensionString=function(e){if(e.length!==5)return null;var t=n.parseExtension5String(e);return t==null?null:new Map([[Jn.SUGGESTED_PRICE,t]])},n.parseExtension5String=function(e){var t;switch(e.charAt(0)){case"0":t="£";break;case"5":t="$";break;case"9":switch(e){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}t="";break;default:t="";break}var r=parseInt(e.substring(1)),i=(r/100).toString(),a=r%100,o=a<10?"0"+a:a.toString();return t+i+"."+o},n})(),XP=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},YP=(function(){function n(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return n.prototype.decodeRow=function(e,t,r){var i=this.decodeRowStringBuffer,a=this.decodeMiddle(t,r,i),o=i.toString(),c=n.parseExtensionString(o),u=[new Se((r[0]+r[1])/2,e),new Se(a,e)],h=new sr(o,null,0,u,Me.UPC_EAN_EXTENSION,new Date().getTime());return c!=null&&h.putAllMetadata(c),h},n.prototype.decodeMiddle=function(e,t,r){var i,a,o=this.decodeMiddleCounters;o[0]=0,o[1]=0,o[2]=0,o[3]=0;for(var c=e.getSize(),u=t[1],h=0,p=0;p<2&&u<c;p++){var g=Ac.decodeDigit(e,o,u,Ac.L_AND_G_PATTERNS);r+=String.fromCharCode(48+g%10);try{for(var _=(i=void 0,XP(o)),E=_.next();!E.done;E=_.next()){var A=E.value;u+=A}}catch(S){i={error:S}}finally{try{E&&!E.done&&(a=_.return)&&a.call(_)}finally{if(i)throw i.error}}g>=10&&(h|=1<<1-p),p!==1&&(u=e.getNextSet(u),u=e.getNextUnset(u))}if(r.length!==2)throw new ae;if(parseInt(r.toString())%4!==h)throw new ae;return u},n.parseExtensionString=function(e){return e.length!==2?null:new Map([[Jn.ISSUE_NUMBER,parseInt(e)]])},n})(),KP=(function(){function n(){}return n.decodeRow=function(e,t,r){var i=Ac.findGuardPattern(t,r,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{var a=new $P;return a.decodeRow(e,t,i)}catch{var o=new YP;return o.decodeRow(e,t,i)}},n.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]),n})(),WP=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),bn=(function(n){WP(e,n);function e(){var t=n.call(this)||this;t.decodeRowStringBuffer="",e.L_AND_G_PATTERNS=e.L_PATTERNS.map(function(c){return Int32Array.from(c)});for(var r=10;r<20;r++){for(var i=e.L_PATTERNS[r-10],a=new Int32Array(i.length),o=0;o<i.length;o++)a[o]=i[i.length-o-1];e.L_AND_G_PATTERNS[r]=a}return t}return e.prototype.decodeRow=function(t,r,i){var a=e.findStartGuardPattern(r),o=i==null?null:i.get(kt.NEED_RESULT_POINT_CALLBACK);if(o!=null){var c=new Se((a[0]+a[1])/2,t);o.foundPossibleResultPoint(c)}var u=this.decodeMiddle(r,a,this.decodeRowStringBuffer),h=u.rowOffset,p=u.resultString;if(o!=null){var g=new Se(h,t);o.foundPossibleResultPoint(g)}var _=e.decodeEnd(r,h);if(o!=null){var E=new Se((_[0]+_[1])/2,t);o.foundPossibleResultPoint(E)}var A=_[1],S=A+(A-_[0]);if(S>=r.getSize()||!r.isRange(A,S,!1))throw new ae;var O=p.toString();if(O.length<8)throw new ye;if(!e.checkChecksum(O))throw new _n;var T=(a[1]+a[0])/2,R=(_[1]+_[0])/2,L=this.getBarcodeFormat(),z=[new Se(T,t),new Se(R,t)],U=new sr(O,null,0,z,L,new Date().getTime()),G=0;try{var D=KP.decodeRow(t,r,_[1]);U.putMetadata(Jn.UPC_EAN_EXTENSION,D.getText()),U.putAllMetadata(D.getResultMetadata()),U.addResultPoints(D.getResultPoints()),G=D.getText().length}catch{}var w=i==null?null:i.get(kt.ALLOWED_EAN_EXTENSIONS);if(w!=null){var I=!1;for(var M in w)if(G.toString()===M){I=!0;break}if(!I)throw new ae}return L===Me.EAN_13||Me.UPC_A,U},e.checkChecksum=function(t){return e.checkStandardUPCEANChecksum(t)},e.checkStandardUPCEANChecksum=function(t){var r=t.length;if(r===0)return!1;var i=parseInt(t.charAt(r-1),10);return e.getStandardUPCEANChecksum(t.substring(0,r-1))===i},e.getStandardUPCEANChecksum=function(t){for(var r=t.length,i=0,a=r-1;a>=0;a-=2){var o=t.charAt(a).charCodeAt(0)-48;if(o<0||o>9)throw new ye;i+=o}i*=3;for(var a=r-2;a>=0;a-=2){var o=t.charAt(a).charCodeAt(0)-48;if(o<0||o>9)throw new ye;i+=o}return(1e3-i)%10},e.decodeEnd=function(t,r){return e.findGuardPattern(t,r,!1,e.START_END_PATTERN,new Int32Array(e.START_END_PATTERN.length).fill(0))},e})(Ac),QP=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),yA=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},nv=(function(n){QP(e,n);function e(){var t=n.call(this)||this;return t.decodeMiddleCounters=Int32Array.from([0,0,0,0]),t}return e.prototype.decodeMiddle=function(t,r,i){var a,o,c,u,h=this.decodeMiddleCounters;h[0]=0,h[1]=0,h[2]=0,h[3]=0;for(var p=t.getSize(),g=r[1],_=0,E=0;E<6&&g<p;E++){var A=bn.decodeDigit(t,h,g,bn.L_AND_G_PATTERNS);i+=String.fromCharCode(48+A%10);try{for(var S=(a=void 0,yA(h)),O=S.next();!O.done;O=S.next()){var T=O.value;g+=T}}catch(U){a={error:U}}finally{try{O&&!O.done&&(o=S.return)&&o.call(S)}finally{if(a)throw a.error}}A>=10&&(_|=1<<5-E)}i=e.determineFirstDigit(i,_);var R=bn.findGuardPattern(t,g,!0,bn.MIDDLE_PATTERN,new Int32Array(bn.MIDDLE_PATTERN.length).fill(0));g=R[1];for(var E=0;E<6&&g<p;E++){var A=bn.decodeDigit(t,h,g,bn.L_PATTERNS);i+=String.fromCharCode(48+A);try{for(var L=(c=void 0,yA(h)),z=L.next();!z.done;z=L.next()){var T=z.value;g+=T}}catch(D){c={error:D}}finally{try{z&&!z.done&&(u=L.return)&&u.call(L)}finally{if(c)throw c.error}}}return{rowOffset:g,resultString:i}},e.prototype.getBarcodeFormat=function(){return Me.EAN_13},e.determineFirstDigit=function(t,r){for(var i=0;i<10;i++)if(r===this.FIRST_DIGIT_ENCODINGS[i])return t=String.fromCharCode(48+i)+t,t;throw new ae},e.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26],e})(bn),ZP=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),_A=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},xA=(function(n){ZP(e,n);function e(){var t=n.call(this)||this;return t.decodeMiddleCounters=Int32Array.from([0,0,0,0]),t}return e.prototype.decodeMiddle=function(t,r,i){var a,o,c,u,h=this.decodeMiddleCounters;h[0]=0,h[1]=0,h[2]=0,h[3]=0;for(var p=t.getSize(),g=r[1],_=0;_<4&&g<p;_++){var E=bn.decodeDigit(t,h,g,bn.L_PATTERNS);i+=String.fromCharCode(48+E);try{for(var A=(a=void 0,_A(h)),S=A.next();!S.done;S=A.next()){var O=S.value;g+=O}}catch(z){a={error:z}}finally{try{S&&!S.done&&(o=A.return)&&o.call(A)}finally{if(a)throw a.error}}}var T=bn.findGuardPattern(t,g,!0,bn.MIDDLE_PATTERN,new Int32Array(bn.MIDDLE_PATTERN.length).fill(0));g=T[1];for(var _=0;_<4&&g<p;_++){var E=bn.decodeDigit(t,h,g,bn.L_PATTERNS);i+=String.fromCharCode(48+E);try{for(var R=(c=void 0,_A(h)),L=R.next();!L.done;L=R.next()){var O=L.value;g+=O}}catch(G){c={error:G}}finally{try{L&&!L.done&&(u=R.return)&&u.call(R)}finally{if(c)throw c.error}}}return{rowOffset:g,resultString:i}},e.prototype.getBarcodeFormat=function(){return Me.EAN_8},e})(bn),JP=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),EA=(function(n){JP(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.ean13Reader=new nv,t}return e.prototype.getBarcodeFormat=function(){return Me.UPC_A},e.prototype.decode=function(t,r){return this.maybeReturnResult(this.ean13Reader.decode(t))},e.prototype.decodeRow=function(t,r,i){return this.maybeReturnResult(this.ean13Reader.decodeRow(t,r,i))},e.prototype.decodeMiddle=function(t,r,i){return this.ean13Reader.decodeMiddle(t,r,i)},e.prototype.maybeReturnResult=function(t){var r=t.getText();if(r.charAt(0)==="0"){var i=new sr(r.substring(1),null,null,t.getResultPoints(),Me.UPC_A);return t.getResultMetadata()!=null&&i.putAllMetadata(t.getResultMetadata()),i}else throw new ae},e.prototype.reset=function(){this.ean13Reader.reset()},e})(bn),ek=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),tk=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},wA=(function(n){ek(e,n);function e(){var t=n.call(this)||this;return t.decodeMiddleCounters=new Int32Array(4),t}return e.prototype.decodeMiddle=function(t,r,i){var a,o,c=this.decodeMiddleCounters.map(function(O){return O});c[0]=0,c[1]=0,c[2]=0,c[3]=0;for(var u=t.getSize(),h=r[1],p=0,g=0;g<6&&h<u;g++){var _=e.decodeDigit(t,c,h,e.L_AND_G_PATTERNS);i+=String.fromCharCode(48+_%10);try{for(var E=(a=void 0,tk(c)),A=E.next();!A.done;A=E.next()){var S=A.value;h+=S}}catch(O){a={error:O}}finally{try{A&&!A.done&&(o=E.return)&&o.call(E)}finally{if(a)throw a.error}}_>=10&&(p|=1<<5-g)}return e.determineNumSysAndCheckDigit(new $e(i),p),h},e.prototype.decodeEnd=function(t,r){return e.findGuardPatternWithoutCounters(t,r,!0,e.MIDDLE_END_PATTERN)},e.prototype.checkChecksum=function(t){return bn.checkChecksum(e.convertUPCEtoUPCA(t))},e.determineNumSysAndCheckDigit=function(t,r){for(var i=0;i<=1;i++)for(var a=0;a<10;a++)if(r===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[i][a]){t.insert(0,"0"+i),t.append("0"+a);return}throw ae.getNotFoundInstance()},e.prototype.getBarcodeFormat=function(){return Me.UPC_E},e.convertUPCEtoUPCA=function(t){var r=t.slice(1,7).split("").map(function(o){return o.charCodeAt(0)}),i=new $e;i.append(t.charAt(0));var a=r[5];switch(a){case 0:case 1:case 2:i.appendChars(r,0,2),i.append(a),i.append("0000"),i.appendChars(r,2,3);break;case 3:i.appendChars(r,0,3),i.append("00000"),i.appendChars(r,3,2);break;case 4:i.appendChars(r,0,4),i.append("00000"),i.append(r[4]);break;default:i.appendChars(r,0,5),i.append("0000"),i.append(a);break}return t.length>=8&&i.append(t.charAt(7)),i.toString()},e.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),e.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,1])],e})(bn),nk=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),AA=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},jm=(function(n){nk(e,n);function e(t){var r=n.call(this)||this,i=t==null?null:t.get(kt.POSSIBLE_FORMATS),a=[];return i!=null&&(i.indexOf(Me.EAN_13)>-1&&a.push(new nv),i.indexOf(Me.UPC_A)>-1&&a.push(new EA),i.indexOf(Me.EAN_8)>-1&&a.push(new xA),i.indexOf(Me.UPC_E)>-1&&a.push(new wA)),a.length===0&&(a.push(new nv),a.push(new EA),a.push(new xA),a.push(new wA)),r.readers=a,r}return e.prototype.decodeRow=function(t,r,i){var a,o;try{for(var c=AA(this.readers),u=c.next();!u.done;u=c.next()){var h=u.value;try{var p=h.decodeRow(t,r,i),g=p.getBarcodeFormat()===Me.EAN_13&&p.getText().charAt(0)==="0",_=i==null?null:i.get(kt.POSSIBLE_FORMATS),E=_==null||_.includes(Me.UPC_A);if(g&&E){var A=p.getRawBytes(),S=new sr(p.getText().substring(1),A,A?A.length:null,p.getResultPoints(),Me.UPC_A);return S.putAllMetadata(p.getResultMetadata()),S}return p}catch{}}}catch(O){a={error:O}}finally{try{u&&!u.done&&(o=c.return)&&o.call(c)}finally{if(a)throw a.error}}throw new ae},e.prototype.reset=function(){var t,r;try{for(var i=AA(this.readers),a=i.next();!a.done;a=i.next()){var o=a.value;o.reset()}}catch(c){t={error:c}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}},e})(Tn),rk=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),ik=(function(n){rk(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.CODA_BAR_CHAR_SET={nnnnnww:"0",nnnnwwn:"1",nnnwnnw:"2",wwnnnnn:"3",nnwnnwn:"4",wnnnnwn:"5",nwnnnnw:"6",nwnnwnn:"7",nwwnnnn:"8",wnnwnnn:"9",nnnwwnn:"-",nnwwnnn:"$",wnnnwnw:":",wnwnnnw:"/",wnwnwnn:".",nnwwwww:"+",nnwwnwn:"A",nwnwnnw:"B",nnnwnww:"C",nnnwwwn:"D"},t}return e.prototype.decodeRow=function(t,r,i){var a=this.getValidRowData(r);if(!a)throw new ae;var o=this.codaBarDecodeRow(a.row);if(!o)throw new ae;return new sr(o,null,0,[new Se(a.left,t),new Se(a.right,t)],Me.CODABAR,new Date().getTime())},e.prototype.getValidRowData=function(t){var r=t.toArray(),i=r.indexOf(!0);if(i===-1)return null;var a=r.lastIndexOf(!0);if(a<=i)return null;r=r.slice(i,a+1);for(var o=[],c=r[0],u=1,h=1;h<r.length;h++)r[h]===c?u++:(c=r[h],o.push(u),u=1);return o.push(u),o.length<23&&(o.length+1)%8!==0?null:{row:o,left:i,right:a}},e.prototype.codaBarDecodeRow=function(t){for(var r=[],i=Math.ceil(t.reduce(function(u,h){return(u+h)/2},0));t.length>0;){var a=t.splice(0,8).splice(0,7),o=a.map(function(u){return u<i?"n":"w"}).join("");if(this.CODA_BAR_CHAR_SET[o]===void 0)return null;r.push(this.CODA_BAR_CHAR_SET[o])}var c=r.join("");return this.validCodaBarString(c)?c:null},e.prototype.validCodaBarString=function(t){var r=/^[A-D].{1,}[A-D]$/;return r.test(t)},e})(Tn),ak=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),sk=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Uo=(function(n){ak(e,n);function e(){var t=n.call(this)||this;return t.decodeFinderCounters=new Int32Array(4),t.dataCharacterCounters=new Int32Array(8),t.oddRoundingErrors=new Array(4),t.evenRoundingErrors=new Array(4),t.oddCounts=new Array(t.dataCharacterCounters.length/2),t.evenCounts=new Array(t.dataCharacterCounters.length/2),t}return e.prototype.getDecodeFinderCounters=function(){return this.decodeFinderCounters},e.prototype.getDataCharacterCounters=function(){return this.dataCharacterCounters},e.prototype.getOddRoundingErrors=function(){return this.oddRoundingErrors},e.prototype.getEvenRoundingErrors=function(){return this.evenRoundingErrors},e.prototype.getOddCounts=function(){return this.oddCounts},e.prototype.getEvenCounts=function(){return this.evenCounts},e.prototype.parseFinderValue=function(t,r){for(var i=0;i<r.length;i++)if(Tn.patternMatchVariance(t,r[i],e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return i;throw new ae},e.count=function(t){return ft.sum(new Int32Array(t))},e.increment=function(t,r){for(var i=0,a=r[0],o=1;o<t.length;o++)r[o]>a&&(a=r[o],i=o);t[i]++},e.decrement=function(t,r){for(var i=0,a=r[0],o=1;o<t.length;o++)r[o]<a&&(a=r[o],i=o);t[i]--},e.isFinderPattern=function(t){var r,i,a=t[0]+t[1],o=a+t[2]+t[3],c=a/o;if(c>=e.MIN_FINDER_PATTERN_RATIO&&c<=e.MAX_FINDER_PATTERN_RATIO){var u=Number.MAX_SAFE_INTEGER,h=Number.MIN_SAFE_INTEGER;try{for(var p=sk(t),g=p.next();!g.done;g=p.next()){var _=g.value;_>h&&(h=_),_<u&&(u=_)}}catch(E){r={error:E}}finally{try{g&&!g.done&&(i=p.return)&&i.call(p)}finally{if(r)throw r.error}}return h<10*u}return!1},e.MAX_AVG_VARIANCE=.2,e.MAX_INDIVIDUAL_VARIANCE=.45,e.MIN_FINDER_PATTERN_RATIO=9.5/12,e.MAX_FINDER_PATTERN_RATIO=12.5/14,e})(Tn),A0=(function(){function n(e,t){this.value=e,this.checksumPortion=t}return n.prototype.getValue=function(){return this.value},n.prototype.getChecksumPortion=function(){return this.checksumPortion},n.prototype.toString=function(){return this.value+"("+this.checksumPortion+")"},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.value===t.value&&this.checksumPortion===t.checksumPortion},n.prototype.hashCode=function(){return this.value^this.checksumPortion},n})(),a3=(function(){function n(e,t,r,i,a){this.value=e,this.startEnd=t,this.value=e,this.startEnd=t,this.resultPoints=new Array,this.resultPoints.push(new Se(r,a)),this.resultPoints.push(new Se(i,a))}return n.prototype.getValue=function(){return this.value},n.prototype.getStartEnd=function(){return this.startEnd},n.prototype.getResultPoints=function(){return this.resultPoints},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.value===t.value},n.prototype.hashCode=function(){return this.value},n})(),ok=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},sc=(function(){function n(){}return n.getRSSvalue=function(e,t,r){var i,a,o=0;try{for(var c=ok(e),u=c.next();!u.done;u=c.next()){var h=u.value;o+=h}}catch(R){i={error:R}}finally{try{u&&!u.done&&(a=c.return)&&a.call(c)}finally{if(i)throw i.error}}for(var p=0,g=0,_=e.length,E=0;E<_-1;E++){var A=void 0;for(A=1,g|=1<<E;A<e[E];A++,g&=~(1<<E)){var S=n.combins(o-A-1,_-E-2);if(r&&g===0&&o-A-(_-E-1)>=_-E-1&&(S-=n.combins(o-A-(_-E),_-E-2)),_-E-1>1){for(var O=0,T=o-A-(_-E-2);T>t;T--)O+=n.combins(o-A-T-1,_-E-3);S-=O*(_-1-E)}else o-A>t&&S--;p+=S}o-=A}return p},n.combins=function(e,t){var r,i;e-t>t?(i=t,r=e-t):(i=e-t,r=t);for(var a=1,o=1,c=e;c>r;c--)a*=c,o<=i&&(a/=o,o++);for(;o<=i;)a/=o,o++;return a},n})(),lk=(function(){function n(){}return n.buildBitArray=function(e){var t=e.length*2-1;e[e.length-1].getRightChar()==null&&(t-=1);for(var r=12*t,i=new jn(r),a=0,o=e[0],c=o.getRightChar().getValue(),u=11;u>=0;--u)(c&1<<u)!==0&&i.set(a),a++;for(var u=1;u<e.length;++u){for(var h=e[u],p=h.getLeftChar().getValue(),g=11;g>=0;--g)(p&1<<g)!==0&&i.set(a),a++;if(h.getRightChar()!==null)for(var _=h.getRightChar().getValue(),g=11;g>=0;--g)(_&1<<g)!==0&&i.set(a),a++}return i},n})(),Bo=(function(){function n(e,t){t?this.decodedInformation=null:(this.finished=e,this.decodedInformation=t)}return n.prototype.getDecodedInformation=function(){return this.decodedInformation},n.prototype.isFinished=function(){return this.finished},n})(),Dy=(function(){function n(e){this.newPosition=e}return n.prototype.getNewPosition=function(){return this.newPosition},n})(),ck=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),wi=(function(n){ck(e,n);function e(t,r){var i=n.call(this,t)||this;return i.value=r,i}return e.prototype.getValue=function(){return this.value},e.prototype.isFNC1=function(){return this.value===e.FNC1},e.FNC1="$",e})(Dy),uk=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Vo=(function(n){uk(e,n);function e(t,r,i){var a=n.call(this,t)||this;return i?(a.remaining=!0,a.remainingValue=a.remainingValue):(a.remaining=!1,a.remainingValue=0),a.newString=r,a}return e.prototype.getNewString=function(){return this.newString},e.prototype.isRemaining=function(){return this.remaining},e.prototype.getRemainingValue=function(){return this.remainingValue},e})(Dy),fk=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Yl=(function(n){fk(e,n);function e(t,r,i){var a=n.call(this,t)||this;if(r<0||r>10||i<0||i>10)throw new ye;return a.firstDigit=r,a.secondDigit=i,a}return e.prototype.getFirstDigit=function(){return this.firstDigit},e.prototype.getSecondDigit=function(){return this.secondDigit},e.prototype.getValue=function(){return this.firstDigit*10+this.secondDigit},e.prototype.isFirstDigitFNC1=function(){return this.firstDigit===e.FNC1},e.prototype.isSecondDigitFNC1=function(){return this.secondDigit===e.FNC1},e.prototype.isAnyFNC1=function(){return this.firstDigit===e.FNC1||this.secondDigit===e.FNC1},e.FNC1=10,e})(Dy),Td=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},hk=(function(){function n(){}return n.parseFieldsInGeneralPurpose=function(e){var t,r,i,a,o,c,u,h;if(!e)return null;if(e.length<2)throw new ae;var p=e.substring(0,2);try{for(var g=Td(n.TWO_DIGIT_DATA_LENGTH),_=g.next();!_.done;_=g.next()){var E=_.value;if(E[0]===p)return E[1]===n.VARIABLE_LENGTH?n.processVariableAI(2,E[2],e):n.processFixedAI(2,E[1],e)}}catch(G){t={error:G}}finally{try{_&&!_.done&&(r=g.return)&&r.call(g)}finally{if(t)throw t.error}}if(e.length<3)throw new ae;var A=e.substring(0,3);try{for(var S=Td(n.THREE_DIGIT_DATA_LENGTH),O=S.next();!O.done;O=S.next()){var E=O.value;if(E[0]===A)return E[1]===n.VARIABLE_LENGTH?n.processVariableAI(3,E[2],e):n.processFixedAI(3,E[1],e)}}catch(G){i={error:G}}finally{try{O&&!O.done&&(a=S.return)&&a.call(S)}finally{if(i)throw i.error}}try{for(var T=Td(n.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH),R=T.next();!R.done;R=T.next()){var E=R.value;if(E[0]===A)return E[1]===n.VARIABLE_LENGTH?n.processVariableAI(4,E[2],e):n.processFixedAI(4,E[1],e)}}catch(G){o={error:G}}finally{try{R&&!R.done&&(c=T.return)&&c.call(T)}finally{if(o)throw o.error}}if(e.length<4)throw new ae;var L=e.substring(0,4);try{for(var z=Td(n.FOUR_DIGIT_DATA_LENGTH),U=z.next();!U.done;U=z.next()){var E=U.value;if(E[0]===L)return E[1]===n.VARIABLE_LENGTH?n.processVariableAI(4,E[2],e):n.processFixedAI(4,E[1],e)}}catch(G){u={error:G}}finally{try{U&&!U.done&&(h=z.return)&&h.call(z)}finally{if(u)throw u.error}}throw new ae},n.processFixedAI=function(e,t,r){if(r.length<e)throw new ae;var i=r.substring(0,e);if(r.length<e+t)throw new ae;var a=r.substring(e,e+t),o=r.substring(e+t),c="("+i+")"+a,u=n.parseFieldsInGeneralPurpose(o);return u==null?c:c+u},n.processVariableAI=function(e,t,r){var i=r.substring(0,e),a;r.length<e+t?a=r.length:a=e+t;var o=r.substring(e,a),c=r.substring(a),u="("+i+")"+o,h=n.parseFieldsInGeneralPurpose(c);return h==null?u:u+h},n.VARIABLE_LENGTH=[],n.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",n.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",n.VARIABLE_LENGTH,20],["22",n.VARIABLE_LENGTH,29],["30",n.VARIABLE_LENGTH,8],["37",n.VARIABLE_LENGTH,8],["90",n.VARIABLE_LENGTH,30],["91",n.VARIABLE_LENGTH,30],["92",n.VARIABLE_LENGTH,30],["93",n.VARIABLE_LENGTH,30],["94",n.VARIABLE_LENGTH,30],["95",n.VARIABLE_LENGTH,30],["96",n.VARIABLE_LENGTH,30],["97",n.VARIABLE_LENGTH,3],["98",n.VARIABLE_LENGTH,30],["99",n.VARIABLE_LENGTH,30]],n.THREE_DIGIT_DATA_LENGTH=[["240",n.VARIABLE_LENGTH,30],["241",n.VARIABLE_LENGTH,30],["242",n.VARIABLE_LENGTH,6],["250",n.VARIABLE_LENGTH,30],["251",n.VARIABLE_LENGTH,30],["253",n.VARIABLE_LENGTH,17],["254",n.VARIABLE_LENGTH,20],["400",n.VARIABLE_LENGTH,30],["401",n.VARIABLE_LENGTH,30],["402",17],["403",n.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",n.VARIABLE_LENGTH,20],["421",n.VARIABLE_LENGTH,15],["422",3],["423",n.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],n.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",n.VARIABLE_LENGTH,15],["391",n.VARIABLE_LENGTH,18],["392",n.VARIABLE_LENGTH,15],["393",n.VARIABLE_LENGTH,18],["703",n.VARIABLE_LENGTH,30]],n.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",n.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",n.VARIABLE_LENGTH,20],["8003",n.VARIABLE_LENGTH,30],["8004",n.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",n.VARIABLE_LENGTH,30],["8008",n.VARIABLE_LENGTH,12],["8018",18],["8020",n.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",n.VARIABLE_LENGTH,70],["8200",n.VARIABLE_LENGTH,70]],n})(),$d=(function(){function n(e){this.buffer=new $e,this.information=e}return n.prototype.decodeAllCodes=function(e,t){var r=t,i=null;do{var a=this.decodeGeneralPurposeField(r,i),o=hk.parseFieldsInGeneralPurpose(a.getNewString());if(o!=null&&e.append(o),a.isRemaining()?i=""+a.getRemainingValue():i=null,r===a.getNewPosition())break;r=a.getNewPosition()}while(!0);return e.toString()},n.prototype.isStillNumeric=function(e){if(e+7>this.information.getSize())return e+4<=this.information.getSize();for(var t=e;t<e+3;++t)if(this.information.get(t))return!0;return this.information.get(e+3)},n.prototype.decodeNumeric=function(e){if(e+7>this.information.getSize()){var t=this.extractNumericValueFromBitArray(e,4);return t===0?new Yl(this.information.getSize(),Yl.FNC1,Yl.FNC1):new Yl(this.information.getSize(),t-1,Yl.FNC1)}var r=this.extractNumericValueFromBitArray(e,7),i=(r-8)/11,a=(r-8)%11;return new Yl(e+7,i,a)},n.prototype.extractNumericValueFromBitArray=function(e,t){return n.extractNumericValueFromBitArray(this.information,e,t)},n.extractNumericValueFromBitArray=function(e,t,r){for(var i=0,a=0;a<r;++a)e.get(t+a)&&(i|=1<<r-a-1);return i},n.prototype.decodeGeneralPurposeField=function(e,t){this.buffer.setLengthToZero(),t!=null&&this.buffer.append(t),this.current.setPosition(e);var r=this.parseBlocks();return r!=null&&r.isRemaining()?new Vo(this.current.getPosition(),this.buffer.toString(),r.getRemainingValue()):new Vo(this.current.getPosition(),this.buffer.toString())},n.prototype.parseBlocks=function(){var e,t;do{var r=this.current.getPosition();this.current.isAlpha()?(t=this.parseAlphaBlock(),e=t.isFinished()):this.current.isIsoIec646()?(t=this.parseIsoIec646Block(),e=t.isFinished()):(t=this.parseNumericBlock(),e=t.isFinished());var i=r!==this.current.getPosition();if(!i&&!e)break}while(!e);return t.getDecodedInformation()},n.prototype.parseNumericBlock=function(){for(;this.isStillNumeric(this.current.getPosition());){var e=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFirstDigitFNC1()){var t=void 0;return e.isSecondDigitFNC1()?t=new Vo(this.current.getPosition(),this.buffer.toString()):t=new Vo(this.current.getPosition(),this.buffer.toString(),e.getSecondDigit()),new Bo(!0,t)}if(this.buffer.append(e.getFirstDigit()),e.isSecondDigitFNC1()){var t=new Vo(this.current.getPosition(),this.buffer.toString());return new Bo(!0,t)}this.buffer.append(e.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new Bo(!1)},n.prototype.parseIsoIec646Block=function(){for(;this.isStillIsoIec646(this.current.getPosition());){var e=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var t=new Vo(this.current.getPosition(),this.buffer.toString());return new Bo(!0,t)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new Bo(!1)},n.prototype.parseAlphaBlock=function(){for(;this.isStillAlpha(this.current.getPosition());){var e=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var t=new Vo(this.current.getPosition(),this.buffer.toString());return new Bo(!0,t)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new Bo(!1)},n.prototype.isStillIsoIec646=function(e){if(e+5>this.information.getSize())return!1;var t=this.extractNumericValueFromBitArray(e,5);if(t>=5&&t<16)return!0;if(e+7>this.information.getSize())return!1;var r=this.extractNumericValueFromBitArray(e,7);if(r>=64&&r<116)return!0;if(e+8>this.information.getSize())return!1;var i=this.extractNumericValueFromBitArray(e,8);return i>=232&&i<253},n.prototype.decodeIsoIec646=function(e){var t=this.extractNumericValueFromBitArray(e,5);if(t===15)return new wi(e+5,wi.FNC1);if(t>=5&&t<15)return new wi(e+5,"0"+(t-5));var r=this.extractNumericValueFromBitArray(e,7);if(r>=64&&r<90)return new wi(e+7,""+(r+1));if(r>=90&&r<116)return new wi(e+7,""+(r+7));var i=this.extractNumericValueFromBitArray(e,8),a;switch(i){case 232:a="!";break;case 233:a='"';break;case 234:a="%";break;case 235:a="&";break;case 236:a="'";break;case 237:a="(";break;case 238:a=")";break;case 239:a="*";break;case 240:a="+";break;case 241:a=",";break;case 242:a="-";break;case 243:a=".";break;case 244:a="/";break;case 245:a=":";break;case 246:a=";";break;case 247:a="<";break;case 248:a="=";break;case 249:a=">";break;case 250:a="?";break;case 251:a="_";break;case 252:a=" ";break;default:throw new ye}return new wi(e+8,a)},n.prototype.isStillAlpha=function(e){if(e+5>this.information.getSize())return!1;var t=this.extractNumericValueFromBitArray(e,5);if(t>=5&&t<16)return!0;if(e+6>this.information.getSize())return!1;var r=this.extractNumericValueFromBitArray(e,6);return r>=16&&r<63},n.prototype.decodeAlphanumeric=function(e){var t=this.extractNumericValueFromBitArray(e,5);if(t===15)return new wi(e+5,wi.FNC1);if(t>=5&&t<15)return new wi(e+5,"0"+(t-5));var r=this.extractNumericValueFromBitArray(e,6);if(r>=32&&r<58)return new wi(e+6,""+(r+33));var i;switch(r){case 58:i="*";break;case 59:i=",";break;case 60:i="-";break;case 61:i=".";break;case 62:i="/";break;default:throw new Gf("Decoding invalid alphanumeric value: "+r)}return new wi(e+6,i)},n.prototype.isAlphaTo646ToAlphaLatch=function(e){if(e+1>this.information.getSize())return!1;for(var t=0;t<5&&t+e<this.information.getSize();++t)if(t===2){if(!this.information.get(e+2))return!1}else if(this.information.get(e+t))return!1;return!0},n.prototype.isAlphaOr646ToNumericLatch=function(e){if(e+3>this.information.getSize())return!1;for(var t=e;t<e+3;++t)if(this.information.get(t))return!1;return!0},n.prototype.isNumericToAlphaNumericLatch=function(e){if(e+1>this.information.getSize())return!1;for(var t=0;t<4&&t+e<this.information.getSize();++t)if(this.information.get(e+t))return!1;return!0},n})(),s3=(function(){function n(e){this.information=e,this.generalDecoder=new $d(e)}return n.prototype.getInformation=function(){return this.information},n.prototype.getGeneralDecoder=function(){return this.generalDecoder},n})(),dk=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),bi=(function(n){dk(e,n);function e(t){return n.call(this,t)||this}return e.prototype.encodeCompressedGtin=function(t,r){t.append("(01)");var i=t.length();t.append("9"),this.encodeCompressedGtinWithoutAI(t,r,i)},e.prototype.encodeCompressedGtinWithoutAI=function(t,r,i){for(var a=0;a<4;++a){var o=this.getGeneralDecoder().extractNumericValueFromBitArray(r+10*a,10);o/100===0&&t.append("0"),o/10===0&&t.append("0"),t.append(o)}e.appendCheckDigit(t,i)},e.appendCheckDigit=function(t,r){for(var i=0,a=0;a<13;a++){var o=t.charAt(a+r).charCodeAt(0)-48;i+=(a&1)===0?3*o:o}i=10-i%10,i===10&&(i=0),t.append(i)},e.GTIN_SIZE=40,e})(s3),pk=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),mk=(function(n){pk(e,n);function e(t){return n.call(this,t)||this}return e.prototype.parseInformation=function(){var t=new $e;t.append("(01)");var r=t.length(),i=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE,4);return t.append(i),this.encodeCompressedGtinWithoutAI(t,e.HEADER_SIZE+4,r),this.getGeneralDecoder().decodeAllCodes(t,e.HEADER_SIZE+44)},e.HEADER_SIZE=4,e})(bi),gk=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),vk=(function(n){gk(e,n);function e(t){return n.call(this,t)||this}return e.prototype.parseInformation=function(){var t=new $e;return this.getGeneralDecoder().decodeAllCodes(t,e.HEADER_SIZE)},e.HEADER_SIZE=5,e})(s3),yk=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Xd=(function(n){yk(e,n);function e(t){return n.call(this,t)||this}return e.prototype.encodeCompressedWeight=function(t,r,i){var a=this.getGeneralDecoder().extractNumericValueFromBitArray(r,i);this.addWeightCode(t,a);for(var o=this.checkWeight(a),c=1e5,u=0;u<5;++u)o/c===0&&t.append("0"),c/=10;t.append(o)},e})(bi),_k=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),o3=(function(n){_k(e,n);function e(t){return n.call(this,t)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()!==e.HEADER_SIZE+Xd.GTIN_SIZE+e.WEIGHT_SIZE)throw new ae;var t=new $e;return this.encodeCompressedGtin(t,e.HEADER_SIZE),this.encodeCompressedWeight(t,e.HEADER_SIZE+Xd.GTIN_SIZE,e.WEIGHT_SIZE),t.toString()},e.HEADER_SIZE=5,e.WEIGHT_SIZE=15,e})(Xd),xk=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Ek=(function(n){xk(e,n);function e(t){return n.call(this,t)||this}return e.prototype.addWeightCode=function(t,r){t.append("(3103)")},e.prototype.checkWeight=function(t){return t},e})(o3),wk=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Ak=(function(n){wk(e,n);function e(t){return n.call(this,t)||this}return e.prototype.addWeightCode=function(t,r){r<1e4?t.append("(3202)"):t.append("(3203)")},e.prototype.checkWeight=function(t){return t<1e4?t:t-1e4},e})(o3),bk=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Sk=(function(n){bk(e,n);function e(t){return n.call(this,t)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()<e.HEADER_SIZE+bi.GTIN_SIZE)throw new ae;var t=new $e;this.encodeCompressedGtin(t,e.HEADER_SIZE);var r=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+bi.GTIN_SIZE,e.LAST_DIGIT_SIZE);t.append("(392"),t.append(r),t.append(")");var i=this.getGeneralDecoder().decodeGeneralPurposeField(e.HEADER_SIZE+bi.GTIN_SIZE+e.LAST_DIGIT_SIZE,null);return t.append(i.getNewString()),t.toString()},e.HEADER_SIZE=8,e.LAST_DIGIT_SIZE=2,e})(bi),Ck=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Tk=(function(n){Ck(e,n);function e(t){return n.call(this,t)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()<e.HEADER_SIZE+bi.GTIN_SIZE)throw new ae;var t=new $e;this.encodeCompressedGtin(t,e.HEADER_SIZE);var r=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+bi.GTIN_SIZE,e.LAST_DIGIT_SIZE);t.append("(393"),t.append(r),t.append(")");var i=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+bi.GTIN_SIZE+e.LAST_DIGIT_SIZE,e.FIRST_THREE_DIGITS_SIZE);i/100===0&&t.append("0"),i/10===0&&t.append("0"),t.append(i);var a=this.getGeneralDecoder().decodeGeneralPurposeField(e.HEADER_SIZE+bi.GTIN_SIZE+e.LAST_DIGIT_SIZE+e.FIRST_THREE_DIGITS_SIZE,null);return t.append(a.getNewString()),t.toString()},e.HEADER_SIZE=8,e.LAST_DIGIT_SIZE=2,e.FIRST_THREE_DIGITS_SIZE=10,e})(bi),Ik=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Ns=(function(n){Ik(e,n);function e(t,r,i){var a=n.call(this,t)||this;return a.dateCode=i,a.firstAIdigits=r,a}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()!==e.HEADER_SIZE+e.GTIN_SIZE+e.WEIGHT_SIZE+e.DATE_SIZE)throw new ae;var t=new $e;return this.encodeCompressedGtin(t,e.HEADER_SIZE),this.encodeCompressedWeight(t,e.HEADER_SIZE+e.GTIN_SIZE,e.WEIGHT_SIZE),this.encodeCompressedDate(t,e.HEADER_SIZE+e.GTIN_SIZE+e.WEIGHT_SIZE),t.toString()},e.prototype.encodeCompressedDate=function(t,r){var i=this.getGeneralDecoder().extractNumericValueFromBitArray(r,e.DATE_SIZE);if(i!==38400){t.append("("),t.append(this.dateCode),t.append(")");var a=i%32;i/=32;var o=i%12+1;i/=12;var c=i;c/10===0&&t.append("0"),t.append(c),o/10===0&&t.append("0"),t.append(o),a/10===0&&t.append("0"),t.append(a)}},e.prototype.addWeightCode=function(t,r){t.append("("),t.append(this.firstAIdigits),t.append(r/1e5),t.append(")")},e.prototype.checkWeight=function(t){return t%1e5},e.HEADER_SIZE=8,e.WEIGHT_SIZE=20,e.DATE_SIZE=16,e})(Xd);function Nk(n){try{if(n.get(1))return new mk(n);if(!n.get(2))return new vk(n);var e=$d.extractNumericValueFromBitArray(n,1,4);switch(e){case 4:return new Ek(n);case 5:return new Ak(n)}var t=$d.extractNumericValueFromBitArray(n,1,5);switch(t){case 12:return new Sk(n);case 13:return new Tk(n)}var r=$d.extractNumericValueFromBitArray(n,1,7);switch(r){case 56:return new Ns(n,"310","11");case 57:return new Ns(n,"320","11");case 58:return new Ns(n,"310","13");case 59:return new Ns(n,"320","13");case 60:return new Ns(n,"310","15");case 61:return new Ns(n,"320","15");case 62:return new Ns(n,"310","17");case 63:return new Ns(n,"320","17")}}catch(i){throw console.log(i),new Gf("unknown decoder: "+n)}}var bA=(function(){function n(e,t,r,i){this.leftchar=e,this.rightchar=t,this.finderpattern=r,this.maybeLast=i}return n.prototype.mayBeLast=function(){return this.maybeLast},n.prototype.getLeftChar=function(){return this.leftchar},n.prototype.getRightChar=function(){return this.rightchar},n.prototype.getFinderPattern=function(){return this.finderpattern},n.prototype.mustBeLast=function(){return this.rightchar==null},n.prototype.toString=function(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"},n.equals=function(e,t){return e instanceof n?n.equalsOrNull(e.leftchar,t.leftchar)&&n.equalsOrNull(e.rightchar,t.rightchar)&&n.equalsOrNull(e.finderpattern,t.finderpattern):!1},n.equalsOrNull=function(e,t){return e===null?t===null:n.equals(e,t)},n.prototype.hashCode=function(){var e=this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue();return e},n})(),Rk=(function(){function n(e,t,r){this.pairs=e,this.rowNumber=t,this.wasReversed=r}return n.prototype.getPairs=function(){return this.pairs},n.prototype.getRowNumber=function(){return this.rowNumber},n.prototype.isReversed=function(){return this.wasReversed},n.prototype.isEquivalent=function(e){return this.checkEqualitity(this,e)},n.prototype.toString=function(){return"{ "+this.pairs+" }"},n.prototype.equals=function(e,t){return e instanceof n?this.checkEqualitity(e,t)&&e.wasReversed===t.wasReversed:!1},n.prototype.checkEqualitity=function(e,t){if(!(!e||!t)){var r;return e.forEach(function(i,a){t.forEach(function(o){i.getLeftChar().getValue()===o.getLeftChar().getValue()&&i.getRightChar().getValue()===o.getRightChar().getValue()&&i.getFinderPatter().getValue()===o.getFinderPatter().getValue()&&(r=!0)})}),r}},n})(),Ok=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Rs=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Dk=(function(n){Ok(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.pairs=new Array(e.MAX_PAIRS),t.rows=new Array,t.startEnd=[2],t}return e.prototype.decodeRow=function(t,r,i){this.pairs.length=0,this.startFromEven=!1;try{return e.constructResult(this.decodeRow2pairs(t,r))}catch{}return this.pairs.length=0,this.startFromEven=!0,e.constructResult(this.decodeRow2pairs(t,r))},e.prototype.reset=function(){this.pairs.length=0,this.rows.length=0},e.prototype.decodeRow2pairs=function(t,r){for(var i=!1;!i;)try{this.pairs.push(this.retrieveNextPair(r,this.pairs,t))}catch(c){if(c instanceof ae){if(!this.pairs.length)throw new ae;i=!0}}if(this.checkChecksum())return this.pairs;var a;if(this.rows.length?a=!0:a=!1,this.storeRow(t,!1),a){var o=this.checkRowsBoolean(!1);if(o!=null||(o=this.checkRowsBoolean(!0),o!=null))return o}throw new ae},e.prototype.checkRowsBoolean=function(t){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,t&&(this.rows=this.rows.reverse());var r=null;try{r=this.checkRows(new Array,0)}catch(i){console.log(i)}return t&&(this.rows=this.rows.reverse()),r},e.prototype.checkRows=function(t,r){for(var i,a,o=r;o<this.rows.length;o++){var c=this.rows[o];this.pairs.length=0;try{for(var u=(i=void 0,Rs(t)),h=u.next();!h.done;h=u.next()){var p=h.value;this.pairs.push(p.getPairs())}}catch(_){i={error:_}}finally{try{h&&!h.done&&(a=u.return)&&a.call(u)}finally{if(i)throw i.error}}if(this.pairs.push(c.getPairs()),!!e.isValidSequence(this.pairs)){if(this.checkChecksum())return this.pairs;var g=new Array(t);g.push(c);try{return this.checkRows(g,o+1)}catch(_){console.log(_)}}}throw new ae},e.isValidSequence=function(t){var r,i;try{for(var a=Rs(e.FINDER_PATTERN_SEQUENCES),o=a.next();!o.done;o=a.next()){var c=o.value;if(!(t.length>c.length)){for(var u=!0,h=0;h<t.length;h++)if(t[h].getFinderPattern().getValue()!==c[h]){u=!1;break}if(u)return!0}}}catch(p){r={error:p}}finally{try{o&&!o.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}return!1},e.prototype.storeRow=function(t,r){for(var i=0,a=!1,o=!1;i<this.rows.length;){var c=this.rows[i];if(c.getRowNumber()>t){o=c.isEquivalent(this.pairs);break}a=c.isEquivalent(this.pairs),i++}o||a||e.isPartialRow(this.pairs,this.rows)||(this.rows.push(i,new Rk(this.pairs,t,r)),this.removePartialRows(this.pairs,this.rows))},e.prototype.removePartialRows=function(t,r){var i,a,o,c,u,h;try{for(var p=Rs(r),g=p.next();!g.done;g=p.next()){var _=g.value;if(_.getPairs().length!==t.length){var E=!0;try{for(var A=(o=void 0,Rs(_.getPairs())),S=A.next();!S.done;S=A.next()){var O=S.value,T=!1;try{for(var R=(u=void 0,Rs(t)),L=R.next();!L.done;L=R.next()){var z=L.value;if(bA.equals(O,z)){T=!0;break}}}catch(U){u={error:U}}finally{try{L&&!L.done&&(h=R.return)&&h.call(R)}finally{if(u)throw u.error}}T||(E=!1)}}catch(U){o={error:U}}finally{try{S&&!S.done&&(c=A.return)&&c.call(A)}finally{if(o)throw o.error}}}}}catch(U){i={error:U}}finally{try{g&&!g.done&&(a=p.return)&&a.call(p)}finally{if(i)throw i.error}}},e.isPartialRow=function(t,r){var i,a,o,c,u,h;try{for(var p=Rs(r),g=p.next();!g.done;g=p.next()){var _=g.value,E=!0;try{for(var A=(o=void 0,Rs(t)),S=A.next();!S.done;S=A.next()){var O=S.value,T=!1;try{for(var R=(u=void 0,Rs(_.getPairs())),L=R.next();!L.done;L=R.next()){var z=L.value;if(O.equals(z)){T=!0;break}}}catch(U){u={error:U}}finally{try{L&&!L.done&&(h=R.return)&&h.call(R)}finally{if(u)throw u.error}}if(!T){E=!1;break}}}catch(U){o={error:U}}finally{try{S&&!S.done&&(c=A.return)&&c.call(A)}finally{if(o)throw o.error}}if(E)return!0}}catch(U){i={error:U}}finally{try{g&&!g.done&&(a=p.return)&&a.call(p)}finally{if(i)throw i.error}}return!1},e.prototype.getRows=function(){return this.rows},e.constructResult=function(t){var r=lk.buildBitArray(t),i=Nk(r),a=i.parseInformation(),o=t[0].getFinderPattern().getResultPoints(),c=t[t.length-1].getFinderPattern().getResultPoints(),u=[o[0],o[1],c[0],c[1]];return new sr(a,null,null,u,Me.RSS_EXPANDED,null)},e.prototype.checkChecksum=function(){var t=this.pairs.get(0),r=t.getLeftChar(),i=t.getRightChar();if(i===null)return!1;for(var a=i.getChecksumPortion(),o=2,c=1;c<this.pairs.size();++c){var u=this.pairs.get(c);a+=u.getLeftChar().getChecksumPortion(),o++;var h=u.getRightChar();h!=null&&(a+=h.getChecksumPortion(),o++)}a%=211;var p=211*(o-4)+a;return p===r.getValue()},e.getNextSecondBar=function(t,r){var i;return t.get(r)?(i=t.getNextUnset(r),i=t.getNextSet(i)):(i=t.getNextSet(r),i=t.getNextUnset(i)),i},e.prototype.retrieveNextPair=function(t,r,i){var a=r.length%2===0;this.startFromEven&&(a=!a);var o,c=!0,u=-1;do this.findNextPair(t,r,u),o=this.parseFoundFinderPattern(t,i,a),o===null?u=e.getNextSecondBar(t,this.startEnd[0]):c=!1;while(c);var h=this.decodeDataCharacter(t,o,a,!0);if(!this.isEmptyPair(r)&&r[r.length-1].mustBeLast())throw new ae;var p;try{p=this.decodeDataCharacter(t,o,a,!1)}catch(g){p=null,console.log(g)}return new bA(h,p,o,!0)},e.prototype.isEmptyPair=function(t){return t.length===0},e.prototype.findNextPair=function(t,r,i){var a=this.getDecodeFinderCounters();a[0]=0,a[1]=0,a[2]=0,a[3]=0;var o=t.getSize(),c;if(i>=0)c=i;else if(this.isEmptyPair(r))c=0;else{var u=r[r.length-1];c=u.getFinderPattern().getStartEnd()[1]}var h=r.length%2!==0;this.startFromEven&&(h=!h);for(var p=!1;c<o&&(p=!t.get(c),!!p);)c++;for(var g=0,_=c,E=c;E<o;E++)if(t.get(E)!==p)a[g]++;else{if(g===3){if(h&&e.reverseCounters(a),e.isFinderPattern(a)){this.startEnd[0]=_,this.startEnd[1]=E;return}h&&e.reverseCounters(a),_+=a[0]+a[1],a[0]=a[2],a[1]=a[3],a[2]=0,a[3]=0,g--}else g++;a[g]=1,p=!p}throw new ae},e.reverseCounters=function(t){for(var r=t.length,i=0;i<r/2;++i){var a=t[i];t[i]=t[r-i-1],t[r-i-1]=a}},e.prototype.parseFoundFinderPattern=function(t,r,i){var a,o,c;if(i){for(var u=this.startEnd[0]-1;u>=0&&!t.get(u);)u--;u++,a=this.startEnd[0]-u,o=u,c=this.startEnd[1]}else o=this.startEnd[0],c=t.getNextUnset(this.startEnd[1]+1),a=c-this.startEnd[1];var h=this.getDecodeFinderCounters();Pt.arraycopy(h,0,h,1,h.length-1),h[0]=a;var p;try{p=this.parseFinderValue(h,e.FINDER_PATTERNS)}catch{return null}return new a3(p,[o,c],o,c,r)},e.prototype.decodeDataCharacter=function(t,r,i,a){for(var o=this.getDataCharacterCounters(),c=0;c<o.length;c++)o[c]=0;if(a)e.recordPatternInReverse(t,r.getStartEnd()[0],o);else{e.recordPattern(t,r.getStartEnd()[1],o);for(var u=0,h=o.length-1;u<h;u++,h--){var p=o[u];o[u]=o[h],o[h]=p}}var g=17,_=ft.sum(new Int32Array(o))/g,E=(r.getStartEnd()[1]-r.getStartEnd()[0])/15;if(Math.abs(_-E)/E>.3)throw new ae;for(var A=this.getOddCounts(),S=this.getEvenCounts(),O=this.getOddRoundingErrors(),T=this.getEvenRoundingErrors(),u=0;u<o.length;u++){var R=1*o[u]/_,L=R+.5;if(L<1){if(R<.3)throw new ae;L=1}else if(L>8){if(R>8.7)throw new ae;L=8}var z=u/2;(u&1)===0?(A[z]=L,O[z]=R-L):(S[z]=L,T[z]=R-L)}this.adjustOddEvenCounts(g);for(var U=4*r.getValue()+(i?0:2)+(a?0:1)-1,G=0,D=0,u=A.length-1;u>=0;u--){if(e.isNotA1left(r,i,a)){var w=e.WEIGHTS[U][2*u];D+=A[u]*w}G+=A[u]}for(var I=0,u=S.length-1;u>=0;u--)if(e.isNotA1left(r,i,a)){var w=e.WEIGHTS[U][2*u+1];I+=S[u]*w}var M=D+I;if((G&1)!==0||G>13||G<4)throw new ae;var j=(13-G)/2,V=e.SYMBOL_WIDEST[j],k=9-V,ee=sc.getRSSvalue(A,V,!0),Ie=sc.getRSSvalue(S,k,!1),q=e.EVEN_TOTAL_SUBSET[j],ce=e.GSUM[j],me=ee*q+Ie+ce;return new A0(me,M)},e.isNotA1left=function(t,r,i){return!(t.getValue()===0&&r&&i)},e.prototype.adjustOddEvenCounts=function(t){var r=ft.sum(new Int32Array(this.getOddCounts())),i=ft.sum(new Int32Array(this.getEvenCounts())),a=!1,o=!1;r>13?o=!0:r<4&&(a=!0);var c=!1,u=!1;i>13?u=!0:i<4&&(c=!0);var h=r+i-t,p=(r&1)===1,g=(i&1)===0;if(h===1)if(p){if(g)throw new ae;o=!0}else{if(!g)throw new ae;u=!0}else if(h===-1)if(p){if(g)throw new ae;a=!0}else{if(!g)throw new ae;c=!0}else if(h===0){if(p){if(!g)throw new ae;r<i?(a=!0,u=!0):(o=!0,c=!0)}else if(g)throw new ae}else throw new ae;if(a){if(o)throw new ae;e.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(o&&e.decrement(this.getOddCounts(),this.getOddRoundingErrors()),c){if(u)throw new ae;e.increment(this.getEvenCounts(),this.getOddRoundingErrors())}u&&e.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},e.SYMBOL_WIDEST=[7,5,4,3,1],e.EVEN_TOTAL_SUBSET=[4,20,52,104,204],e.GSUM=[0,348,1388,2948,3988],e.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],e.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],e.FINDER_PAT_A=0,e.FINDER_PAT_B=1,e.FINDER_PAT_C=2,e.FINDER_PAT_D=3,e.FINDER_PAT_E=4,e.FINDER_PAT_F=5,e.FINDER_PATTERN_SEQUENCES=[[e.FINDER_PAT_A,e.FINDER_PAT_A],[e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B],[e.FINDER_PAT_A,e.FINDER_PAT_C,e.FINDER_PAT_B,e.FINDER_PAT_D],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_C],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_D,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_D],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_E],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F]],e.MAX_PAIRS=11,e})(Uo),Mk=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Pk=(function(n){Mk(e,n);function e(t,r,i){var a=n.call(this,t,r)||this;return a.count=0,a.finderPattern=i,a}return e.prototype.getFinderPattern=function(){return this.finderPattern},e.prototype.getCount=function(){return this.count},e.prototype.incrementCount=function(){this.count++},e})(A0),kk=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Bm=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},SA=(function(n){kk(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.possibleLeftPairs=[],t.possibleRightPairs=[],t}return e.prototype.decodeRow=function(t,r,i){var a,o,c,u,h=this.decodePair(r,!1,t,i);e.addOrTally(this.possibleLeftPairs,h),r.reverse();var p=this.decodePair(r,!0,t,i);e.addOrTally(this.possibleRightPairs,p),r.reverse();try{for(var g=Bm(this.possibleLeftPairs),_=g.next();!_.done;_=g.next()){var E=_.value;if(E.getCount()>1)try{for(var A=(c=void 0,Bm(this.possibleRightPairs)),S=A.next();!S.done;S=A.next()){var O=S.value;if(O.getCount()>1&&e.checkChecksum(E,O))return e.constructResult(E,O)}}catch(T){c={error:T}}finally{try{S&&!S.done&&(u=A.return)&&u.call(A)}finally{if(c)throw c.error}}}}catch(T){a={error:T}}finally{try{_&&!_.done&&(o=g.return)&&o.call(g)}finally{if(a)throw a.error}}throw new ae},e.addOrTally=function(t,r){var i,a;if(r!=null){var o=!1;try{for(var c=Bm(t),u=c.next();!u.done;u=c.next()){var h=u.value;if(h.getValue()===r.getValue()){h.incrementCount(),o=!0;break}}}catch(p){i={error:p}}finally{try{u&&!u.done&&(a=c.return)&&a.call(c)}finally{if(i)throw i.error}}o||t.push(r)}},e.prototype.reset=function(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0},e.constructResult=function(t,r){for(var i=4537077*t.getValue()+r.getValue(),a=new String(i).toString(),o=new $e,c=13-a.length;c>0;c--)o.append("0");o.append(a);for(var u=0,c=0;c<13;c++){var h=o.charAt(c).charCodeAt(0)-48;u+=(c&1)===0?3*h:h}u=10-u%10,u===10&&(u=0),o.append(u.toString());var p=t.getFinderPattern().getResultPoints(),g=r.getFinderPattern().getResultPoints();return new sr(o.toString(),null,0,[p[0],p[1],g[0],g[1]],Me.RSS_14,new Date().getTime())},e.checkChecksum=function(t,r){var i=(t.getChecksumPortion()+16*r.getChecksumPortion())%79,a=9*t.getFinderPattern().getValue()+r.getFinderPattern().getValue();return a>72&&a--,a>8&&a--,i===a},e.prototype.decodePair=function(t,r,i,a){try{var o=this.findFinderPattern(t,r),c=this.parseFoundFinderPattern(t,i,r,o),u=a==null?null:a.get(kt.NEED_RESULT_POINT_CALLBACK);if(u!=null){var h=(o[0]+o[1])/2;r&&(h=t.getSize()-1-h),u.foundPossibleResultPoint(new Se(h,i))}var p=this.decodeDataCharacter(t,c,!0),g=this.decodeDataCharacter(t,c,!1);return new Pk(1597*p.getValue()+g.getValue(),p.getChecksumPortion()+4*g.getChecksumPortion(),c)}catch{return null}},e.prototype.decodeDataCharacter=function(t,r,i){for(var a=this.getDataCharacterCounters(),o=0;o<a.length;o++)a[o]=0;if(i)Tn.recordPatternInReverse(t,r.getStartEnd()[0],a);else{Tn.recordPattern(t,r.getStartEnd()[1]+1,a);for(var c=0,u=a.length-1;c<u;c++,u--){var h=a[c];a[c]=a[u],a[u]=h}}for(var p=i?16:15,g=ft.sum(new Int32Array(a))/p,_=this.getOddCounts(),E=this.getEvenCounts(),A=this.getOddRoundingErrors(),S=this.getEvenRoundingErrors(),c=0;c<a.length;c++){var O=a[c]/g,T=Math.floor(O+.5);T<1?T=1:T>8&&(T=8);var R=Math.floor(c/2);(c&1)===0?(_[R]=T,A[R]=O-T):(E[R]=T,S[R]=O-T)}this.adjustOddEvenCounts(i,p);for(var L=0,z=0,c=_.length-1;c>=0;c--)z*=9,z+=_[c],L+=_[c];for(var U=0,G=0,c=E.length-1;c>=0;c--)U*=9,U+=E[c],G+=E[c];var D=z+3*U;if(i){if((L&1)!==0||L>12||L<4)throw new ae;var w=(12-L)/2,I=e.OUTSIDE_ODD_WIDEST[w],M=9-I,j=sc.getRSSvalue(_,I,!1),V=sc.getRSSvalue(E,M,!0),k=e.OUTSIDE_EVEN_TOTAL_SUBSET[w],ee=e.OUTSIDE_GSUM[w];return new A0(j*k+V+ee,D)}else{if((G&1)!==0||G>10||G<4)throw new ae;var w=(10-G)/2,I=e.INSIDE_ODD_WIDEST[w],M=9-I,j=sc.getRSSvalue(_,I,!0),V=sc.getRSSvalue(E,M,!1),Ie=e.INSIDE_ODD_TOTAL_SUBSET[w],ee=e.INSIDE_GSUM[w];return new A0(V*Ie+j+ee,D)}},e.prototype.findFinderPattern=function(t,r){var i=this.getDecodeFinderCounters();i[0]=0,i[1]=0,i[2]=0,i[3]=0;for(var a=t.getSize(),o=!1,c=0;c<a&&(o=!t.get(c),r!==o);)c++;for(var u=0,h=c,p=c;p<a;p++)if(t.get(p)!==o)i[u]++;else{if(u===3){if(Uo.isFinderPattern(i))return[h,p];h+=i[0]+i[1],i[0]=i[2],i[1]=i[3],i[2]=0,i[3]=0,u--}else u++;i[u]=1,o=!o}throw new ae},e.prototype.parseFoundFinderPattern=function(t,r,i,a){for(var o=t.get(a[0]),c=a[0]-1;c>=0&&o!==t.get(c);)c--;c++;var u=a[0]-c,h=this.getDecodeFinderCounters(),p=new Int32Array(h.length);Pt.arraycopy(h,0,p,1,h.length-1),p[0]=u;var g=this.parseFinderValue(p,e.FINDER_PATTERNS),_=c,E=a[1];return i&&(_=t.getSize()-1-_,E=t.getSize()-1-E),new a3(g,[c,a[1]],_,E,r)},e.prototype.adjustOddEvenCounts=function(t,r){var i=ft.sum(new Int32Array(this.getOddCounts())),a=ft.sum(new Int32Array(this.getEvenCounts())),o=!1,c=!1,u=!1,h=!1;t?(i>12?c=!0:i<4&&(o=!0),a>12?h=!0:a<4&&(u=!0)):(i>11?c=!0:i<5&&(o=!0),a>10?h=!0:a<4&&(u=!0));var p=i+a-r,g=(i&1)===(t?1:0),_=(a&1)===1;if(p===1)if(g){if(_)throw new ae;c=!0}else{if(!_)throw new ae;h=!0}else if(p===-1)if(g){if(_)throw new ae;o=!0}else{if(!_)throw new ae;u=!0}else if(p===0){if(g){if(!_)throw new ae;i<a?(o=!0,h=!0):(c=!0,u=!0)}else if(_)throw new ae}else throw new ae;if(o){if(c)throw new ae;Uo.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(c&&Uo.decrement(this.getOddCounts(),this.getOddRoundingErrors()),u){if(h)throw new ae;Uo.increment(this.getEvenCounts(),this.getOddRoundingErrors())}h&&Uo.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},e.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],e.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],e.OUTSIDE_GSUM=[0,161,961,2015,2715],e.INSIDE_GSUM=[0,336,1036,1516],e.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],e.INSIDE_ODD_WIDEST=[2,4,6,8],e.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])],e})(Uo),Lk=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),oc=(function(n){Lk(e,n);function e(t){var r=n.call(this)||this;r.readers=[];var i=t?t.get(kt.POSSIBLE_FORMATS):null,a=t&&t.get(kt.ASSUME_CODE_39_CHECK_DIGIT)!==void 0,o=t&&t.get(kt.ENABLE_CODE_39_EXTENDED_MODE)!==void 0;return i&&((i.includes(Me.EAN_13)||i.includes(Me.UPC_A)||i.includes(Me.EAN_8)||i.includes(Me.UPC_E))&&r.readers.push(new jm(t)),i.includes(Me.CODE_39)&&r.readers.push(new mA(a,o)),i.includes(Me.CODE_93)&&r.readers.push(new gA),i.includes(Me.CODE_128)&&r.readers.push(new pA),i.includes(Me.ITF)&&r.readers.push(new vA),i.includes(Me.CODABAR)&&r.readers.push(new ik),i.includes(Me.RSS_14)&&r.readers.push(new SA),i.includes(Me.RSS_EXPANDED)&&(console.warn("RSS Expanded reader IS NOT ready for production yet! use at your own risk."),r.readers.push(new Dk))),r.readers.length===0&&(r.readers.push(new jm(t)),r.readers.push(new mA),r.readers.push(new gA),r.readers.push(new jm(t)),r.readers.push(new pA),r.readers.push(new vA),r.readers.push(new SA)),r}return e.prototype.decodeRow=function(t,r,i){for(var a=0;a<this.readers.length;a++)try{return this.readers[a].decodeRow(t,r,i)}catch{}throw new ae},e.prototype.reset=function(){this.readers.forEach(function(t){return t.reset()})},e})(Tn),jk=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})();(function(n){jk(e,n);function e(t,r){return t===void 0&&(t=500),n.call(this,new oc(r),t,r)||this}return e})(Bc);var CA=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},vt=(function(){function n(e,t,r){this.ecCodewords=e,this.ecBlocks=[t],r&&this.ecBlocks.push(r)}return n.prototype.getECCodewords=function(){return this.ecCodewords},n.prototype.getECBlocks=function(){return this.ecBlocks},n})(),pt=(function(){function n(e,t){this.count=e,this.dataCodewords=t}return n.prototype.getCount=function(){return this.count},n.prototype.getDataCodewords=function(){return this.dataCodewords},n})(),Bk=(function(){function n(e,t,r,i,a,o){var c,u;this.versionNumber=e,this.symbolSizeRows=t,this.symbolSizeColumns=r,this.dataRegionSizeRows=i,this.dataRegionSizeColumns=a,this.ecBlocks=o;var h=0,p=o.getECCodewords(),g=o.getECBlocks();try{for(var _=CA(g),E=_.next();!E.done;E=_.next()){var A=E.value;h+=A.getCount()*(A.getDataCodewords()+p)}}catch(S){c={error:S}}finally{try{E&&!E.done&&(u=_.return)&&u.call(_)}finally{if(c)throw c.error}}this.totalCodewords=h}return n.prototype.getVersionNumber=function(){return this.versionNumber},n.prototype.getSymbolSizeRows=function(){return this.symbolSizeRows},n.prototype.getSymbolSizeColumns=function(){return this.symbolSizeColumns},n.prototype.getDataRegionSizeRows=function(){return this.dataRegionSizeRows},n.prototype.getDataRegionSizeColumns=function(){return this.dataRegionSizeColumns},n.prototype.getTotalCodewords=function(){return this.totalCodewords},n.prototype.getECBlocks=function(){return this.ecBlocks},n.getVersionForDimensions=function(e,t){var r,i;if((e&1)!==0||(t&1)!==0)throw new ye;try{for(var a=CA(n.VERSIONS),o=a.next();!o.done;o=a.next()){var c=o.value;if(c.symbolSizeRows===e&&c.symbolSizeColumns===t)return c}}catch(u){r={error:u}}finally{try{o&&!o.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}throw new ye},n.prototype.toString=function(){return""+this.versionNumber},n.buildVersions=function(){return[new n(1,10,10,8,8,new vt(5,new pt(1,3))),new n(2,12,12,10,10,new vt(7,new pt(1,5))),new n(3,14,14,12,12,new vt(10,new pt(1,8))),new n(4,16,16,14,14,new vt(12,new pt(1,12))),new n(5,18,18,16,16,new vt(14,new pt(1,18))),new n(6,20,20,18,18,new vt(18,new pt(1,22))),new n(7,22,22,20,20,new vt(20,new pt(1,30))),new n(8,24,24,22,22,new vt(24,new pt(1,36))),new n(9,26,26,24,24,new vt(28,new pt(1,44))),new n(10,32,32,14,14,new vt(36,new pt(1,62))),new n(11,36,36,16,16,new vt(42,new pt(1,86))),new n(12,40,40,18,18,new vt(48,new pt(1,114))),new n(13,44,44,20,20,new vt(56,new pt(1,144))),new n(14,48,48,22,22,new vt(68,new pt(1,174))),new n(15,52,52,24,24,new vt(42,new pt(2,102))),new n(16,64,64,14,14,new vt(56,new pt(2,140))),new n(17,72,72,16,16,new vt(36,new pt(4,92))),new n(18,80,80,18,18,new vt(48,new pt(4,114))),new n(19,88,88,20,20,new vt(56,new pt(4,144))),new n(20,96,96,22,22,new vt(68,new pt(4,174))),new n(21,104,104,24,24,new vt(56,new pt(6,136))),new n(22,120,120,18,18,new vt(68,new pt(6,175))),new n(23,132,132,20,20,new vt(62,new pt(8,163))),new n(24,144,144,22,22,new vt(62,new pt(8,156),new pt(2,155))),new n(25,8,18,6,16,new vt(7,new pt(1,5))),new n(26,8,32,6,14,new vt(11,new pt(1,10))),new n(27,12,26,10,24,new vt(14,new pt(1,16))),new n(28,12,36,10,16,new vt(18,new pt(1,22))),new n(29,16,36,14,16,new vt(24,new pt(1,32))),new n(30,16,48,14,22,new vt(28,new pt(1,49)))]},n.VERSIONS=n.buildVersions(),n})(),Vk=(function(){function n(e){var t=e.getHeight();if(t<8||t>144||(t&1)!==0)throw new ye;this.version=n.readVersion(e),this.mappingBitMatrix=this.extractDataRegion(e),this.readMappingMatrix=new pa(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}return n.prototype.getVersion=function(){return this.version},n.readVersion=function(e){var t=e.getHeight(),r=e.getWidth();return Bk.getVersionForDimensions(t,r)},n.prototype.readCodewords=function(){var e=new Int8Array(this.version.getTotalCodewords()),t=0,r=4,i=0,a=this.mappingBitMatrix.getHeight(),o=this.mappingBitMatrix.getWidth(),c=!1,u=!1,h=!1,p=!1;do if(r===a&&i===0&&!c)e[t++]=this.readCorner1(a,o)&255,r-=2,i+=2,c=!0;else if(r===a-2&&i===0&&(o&3)!==0&&!u)e[t++]=this.readCorner2(a,o)&255,r-=2,i+=2,u=!0;else if(r===a+4&&i===2&&(o&7)===0&&!h)e[t++]=this.readCorner3(a,o)&255,r-=2,i+=2,h=!0;else if(r===a-2&&i===0&&(o&7)===4&&!p)e[t++]=this.readCorner4(a,o)&255,r-=2,i+=2,p=!0;else{do r<a&&i>=0&&!this.readMappingMatrix.get(i,r)&&(e[t++]=this.readUtah(r,i,a,o)&255),r-=2,i+=2;while(r>=0&&i<o);r+=1,i+=3;do r>=0&&i<o&&!this.readMappingMatrix.get(i,r)&&(e[t++]=this.readUtah(r,i,a,o)&255),r+=2,i-=2;while(r<a&&i>=0);r+=3,i+=1}while(r<a||i<o);if(t!==this.version.getTotalCodewords())throw new ye;return e},n.prototype.readModule=function(e,t,r,i){return e<0&&(e+=r,t+=4-(r+4&7)),t<0&&(t+=i,e+=4-(i+4&7)),this.readMappingMatrix.set(t,e),this.mappingBitMatrix.get(t,e)},n.prototype.readUtah=function(e,t,r,i){var a=0;return this.readModule(e-2,t-2,r,i)&&(a|=1),a<<=1,this.readModule(e-2,t-1,r,i)&&(a|=1),a<<=1,this.readModule(e-1,t-2,r,i)&&(a|=1),a<<=1,this.readModule(e-1,t-1,r,i)&&(a|=1),a<<=1,this.readModule(e-1,t,r,i)&&(a|=1),a<<=1,this.readModule(e,t-2,r,i)&&(a|=1),a<<=1,this.readModule(e,t-1,r,i)&&(a|=1),a<<=1,this.readModule(e,t,r,i)&&(a|=1),a},n.prototype.readCorner1=function(e,t){var r=0;return this.readModule(e-1,0,e,t)&&(r|=1),r<<=1,this.readModule(e-1,1,e,t)&&(r|=1),r<<=1,this.readModule(e-1,2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-1,e,t)&&(r|=1),r<<=1,this.readModule(1,t-1,e,t)&&(r|=1),r<<=1,this.readModule(2,t-1,e,t)&&(r|=1),r<<=1,this.readModule(3,t-1,e,t)&&(r|=1),r},n.prototype.readCorner2=function(e,t){var r=0;return this.readModule(e-3,0,e,t)&&(r|=1),r<<=1,this.readModule(e-2,0,e,t)&&(r|=1),r<<=1,this.readModule(e-1,0,e,t)&&(r|=1),r<<=1,this.readModule(0,t-4,e,t)&&(r|=1),r<<=1,this.readModule(0,t-3,e,t)&&(r|=1),r<<=1,this.readModule(0,t-2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-1,e,t)&&(r|=1),r<<=1,this.readModule(1,t-1,e,t)&&(r|=1),r},n.prototype.readCorner3=function(e,t){var r=0;return this.readModule(e-1,0,e,t)&&(r|=1),r<<=1,this.readModule(e-1,t-1,e,t)&&(r|=1),r<<=1,this.readModule(0,t-3,e,t)&&(r|=1),r<<=1,this.readModule(0,t-2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-1,e,t)&&(r|=1),r<<=1,this.readModule(1,t-3,e,t)&&(r|=1),r<<=1,this.readModule(1,t-2,e,t)&&(r|=1),r<<=1,this.readModule(1,t-1,e,t)&&(r|=1),r},n.prototype.readCorner4=function(e,t){var r=0;return this.readModule(e-3,0,e,t)&&(r|=1),r<<=1,this.readModule(e-2,0,e,t)&&(r|=1),r<<=1,this.readModule(e-1,0,e,t)&&(r|=1),r<<=1,this.readModule(0,t-2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-1,e,t)&&(r|=1),r<<=1,this.readModule(1,t-1,e,t)&&(r|=1),r<<=1,this.readModule(2,t-1,e,t)&&(r|=1),r<<=1,this.readModule(3,t-1,e,t)&&(r|=1),r},n.prototype.extractDataRegion=function(e){var t=this.version.getSymbolSizeRows(),r=this.version.getSymbolSizeColumns();if(e.getHeight()!==t)throw new Pe("Dimension of bitMatrix must match the version size");for(var i=this.version.getDataRegionSizeRows(),a=this.version.getDataRegionSizeColumns(),o=t/i|0,c=r/a|0,u=o*i,h=c*a,p=new pa(h,u),g=0;g<o;++g)for(var _=g*i,E=0;E<c;++E)for(var A=E*a,S=0;S<i;++S)for(var O=g*(i+2)+1+S,T=_+S,R=0;R<a;++R){var L=E*(a+2)+1+R;if(e.get(L,O)){var z=A+R;p.set(z,T)}}return p},n})(),TA=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Fk=(function(){function n(e,t){this.numDataCodewords=e,this.codewords=t}return n.getDataBlocks=function(e,t){var r,i,a,o,c=t.getECBlocks(),u=0,h=c.getECBlocks();try{for(var p=TA(h),g=p.next();!g.done;g=p.next()){var _=g.value;u+=_.getCount()}}catch(ee){r={error:ee}}finally{try{g&&!g.done&&(i=p.return)&&i.call(p)}finally{if(r)throw r.error}}var E=new Array(u),A=0;try{for(var S=TA(h),O=S.next();!O.done;O=S.next())for(var _=O.value,T=0;T<_.getCount();T++){var R=_.getDataCodewords(),L=c.getECCodewords()+R;E[A++]=new n(R,new Uint8Array(L))}}catch(ee){a={error:ee}}finally{try{O&&!O.done&&(o=S.return)&&o.call(S)}finally{if(a)throw a.error}}for(var z=E[0].codewords.length,U=z-c.getECCodewords(),G=U-1,D=0,T=0;T<G;T++)for(var w=0;w<A;w++)E[w].codewords[T]=e[D++];for(var I=t.getVersionNumber()===24,M=I?8:A,w=0;w<M;w++)E[w].codewords[U-1]=e[D++];for(var j=E[0].codewords.length,T=U;T<j;T++)for(var w=0;w<A;w++){var V=I?(w+8)%A:w,k=I&&V>7?T-1:T;E[V].codewords[k]=e[D++]}if(D!==e.length)throw new Pe;return E},n.prototype.getNumDataCodewords=function(){return this.numDataCodewords},n.prototype.getCodewords=function(){return this.codewords},n})(),l3=(function(){function n(e){this.bytes=e,this.byteOffset=0,this.bitOffset=0}return n.prototype.getBitOffset=function(){return this.bitOffset},n.prototype.getByteOffset=function(){return this.byteOffset},n.prototype.readBits=function(e){if(e<1||e>32||e>this.available())throw new Pe(""+e);var t=0,r=this.bitOffset,i=this.byteOffset,a=this.bytes;if(r>0){var o=8-r,c=e<o?e:o,u=o-c,h=255>>8-c<<u;t=(a[i]&h)>>u,e-=c,r+=c,r===8&&(r=0,i++)}if(e>0){for(;e>=8;)t=t<<8|a[i]&255,i++,e-=8;if(e>0){var u=8-e,h=255>>u<<u;t=t<<e|(a[i]&h)>>u,r+=e}}return this.bitOffset=r,this.byteOffset=i,t},n.prototype.available=function(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset},n})(),wn;(function(n){n[n.PAD_ENCODE=0]="PAD_ENCODE",n[n.ASCII_ENCODE=1]="ASCII_ENCODE",n[n.C40_ENCODE=2]="C40_ENCODE",n[n.TEXT_ENCODE=3]="TEXT_ENCODE",n[n.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",n[n.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",n[n.BASE256_ENCODE=6]="BASE256_ENCODE"})(wn||(wn={}));var Uk=(function(){function n(){}return n.decode=function(e){var t=new l3(e),r=new $e,i=new $e,a=new Array,o=wn.ASCII_ENCODE;do if(o===wn.ASCII_ENCODE)o=this.decodeAsciiSegment(t,r,i);else{switch(o){case wn.C40_ENCODE:this.decodeC40Segment(t,r);break;case wn.TEXT_ENCODE:this.decodeTextSegment(t,r);break;case wn.ANSIX12_ENCODE:this.decodeAnsiX12Segment(t,r);break;case wn.EDIFACT_ENCODE:this.decodeEdifactSegment(t,r);break;case wn.BASE256_ENCODE:this.decodeBase256Segment(t,r,a);break;default:throw new ye}o=wn.ASCII_ENCODE}while(o!==wn.PAD_ENCODE&&t.available()>0);return i.length()>0&&r.append(i.toString()),new u1(e,r.toString(),a.length===0?null:a,null)},n.decodeAsciiSegment=function(e,t,r){var i=!1;do{var a=e.readBits(8);if(a===0)throw new ye;if(a<=128)return i&&(a+=128),t.append(String.fromCharCode(a-1)),wn.ASCII_ENCODE;if(a===129)return wn.PAD_ENCODE;if(a<=229){var o=a-130;o<10&&t.append("0"),t.append(""+o)}else switch(a){case 230:return wn.C40_ENCODE;case 231:return wn.BASE256_ENCODE;case 232:t.append("");break;case 233:case 234:break;case 235:i=!0;break;case 236:t.append("[)>05"),r.insert(0,"");break;case 237:t.append("[)>06"),r.insert(0,"");break;case 238:return wn.ANSIX12_ENCODE;case 239:return wn.TEXT_ENCODE;case 240:return wn.EDIFACT_ENCODE;case 241:break;default:if(a!==254||e.available()!==0)throw new ye;break}}while(e.available()>0);return wn.ASCII_ENCODE},n.decodeC40Segment=function(e,t){var r=!1,i=[],a=0;do{if(e.available()===8)return;var o=e.readBits(8);if(o===254)return;this.parseTwoBytes(o,e.readBits(8),i);for(var c=0;c<3;c++){var u=i[c];switch(a){case 0:if(u<3)a=u+1;else if(u<this.C40_BASIC_SET_CHARS.length){var h=this.C40_BASIC_SET_CHARS[u];r?(t.append(String.fromCharCode(h.charCodeAt(0)+128)),r=!1):t.append(h)}else throw new ye;break;case 1:r?(t.append(String.fromCharCode(u+128)),r=!1):t.append(String.fromCharCode(u)),a=0;break;case 2:if(u<this.C40_SHIFT2_SET_CHARS.length){var h=this.C40_SHIFT2_SET_CHARS[u];r?(t.append(String.fromCharCode(h.charCodeAt(0)+128)),r=!1):t.append(h)}else switch(u){case 27:t.append("");break;case 30:r=!0;break;default:throw new ye}a=0;break;case 3:r?(t.append(String.fromCharCode(u+224)),r=!1):t.append(String.fromCharCode(u+96)),a=0;break;default:throw new ye}}}while(e.available()>0)},n.decodeTextSegment=function(e,t){var r=!1,i=[],a=0;do{if(e.available()===8)return;var o=e.readBits(8);if(o===254)return;this.parseTwoBytes(o,e.readBits(8),i);for(var c=0;c<3;c++){var u=i[c];switch(a){case 0:if(u<3)a=u+1;else if(u<this.TEXT_BASIC_SET_CHARS.length){var h=this.TEXT_BASIC_SET_CHARS[u];r?(t.append(String.fromCharCode(h.charCodeAt(0)+128)),r=!1):t.append(h)}else throw new ye;break;case 1:r?(t.append(String.fromCharCode(u+128)),r=!1):t.append(String.fromCharCode(u)),a=0;break;case 2:if(u<this.TEXT_SHIFT2_SET_CHARS.length){var h=this.TEXT_SHIFT2_SET_CHARS[u];r?(t.append(String.fromCharCode(h.charCodeAt(0)+128)),r=!1):t.append(h)}else switch(u){case 27:t.append("");break;case 30:r=!0;break;default:throw new ye}a=0;break;case 3:if(u<this.TEXT_SHIFT3_SET_CHARS.length){var h=this.TEXT_SHIFT3_SET_CHARS[u];r?(t.append(String.fromCharCode(h.charCodeAt(0)+128)),r=!1):t.append(h),a=0}else throw new ye;break;default:throw new ye}}}while(e.available()>0)},n.decodeAnsiX12Segment=function(e,t){var r=[];do{if(e.available()===8)return;var i=e.readBits(8);if(i===254)return;this.parseTwoBytes(i,e.readBits(8),r);for(var a=0;a<3;a++){var o=r[a];switch(o){case 0:t.append("\r");break;case 1:t.append("*");break;case 2:t.append(">");break;case 3:t.append(" ");break;default:if(o<14)t.append(String.fromCharCode(o+44));else if(o<40)t.append(String.fromCharCode(o+51));else throw new ye;break}}}while(e.available()>0)},n.parseTwoBytes=function(e,t,r){var i=(e<<8)+t-1,a=Math.floor(i/1600);r[0]=a,i-=a*1600,a=Math.floor(i/40),r[1]=a,r[2]=i-a*40},n.decodeEdifactSegment=function(e,t){do{if(e.available()<=16)return;for(var r=0;r<4;r++){var i=e.readBits(6);if(i===31){var a=8-e.getBitOffset();a!==8&&e.readBits(a);return}(i&32)===0&&(i|=64),t.append(String.fromCharCode(i))}}while(e.available()>0)},n.decodeBase256Segment=function(e,t,r){var i=1+e.getByteOffset(),a=this.unrandomize255State(e.readBits(8),i++),o;if(a===0?o=e.available()/8|0:a<250?o=a:o=250*(a-249)+this.unrandomize255State(e.readBits(8),i++),o<0)throw new ye;for(var c=new Uint8Array(o),u=0;u<o;u++){if(e.available()<8)throw new ye;c[u]=this.unrandomize255State(e.readBits(8),i++)}r.push(c);try{t.append(oi.decode(c,at.ISO88591))}catch(h){throw new Gf("Platform does not support required encoding: "+h.message)}},n.unrandomize255State=function(e,t){var r=149*t%255+1,i=e-r;return i>=0?i:i+256},n.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],n.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],n.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],n.TEXT_SHIFT2_SET_CHARS=n.C40_SHIFT2_SET_CHARS,n.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""],n})(),zk=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Hk=(function(){function n(){this.rsDecoder=new f1(br.DATA_MATRIX_FIELD_256)}return n.prototype.decode=function(e){var t,r,i=new Vk(e),a=i.getVersion(),o=i.readCodewords(),c=Fk.getDataBlocks(o,a),u=0;try{for(var h=zk(c),p=h.next();!p.done;p=h.next()){var g=p.value;u+=g.getNumDataCodewords()}}catch(L){t={error:L}}finally{try{p&&!p.done&&(r=h.return)&&r.call(h)}finally{if(t)throw t.error}}for(var _=new Uint8Array(u),E=c.length,A=0;A<E;A++){var S=c[A],O=S.getCodewords(),T=S.getNumDataCodewords();this.correctErrors(O,T);for(var R=0;R<T;R++)_[R*E+A]=O[R]}return Uk.decode(_)},n.prototype.correctErrors=function(e,t){var r=new Int32Array(e);try{this.rsDecoder.decode(r,e.length-t)}catch{throw new _n}for(var i=0;i<t;i++)e[i]=r[i]},n})(),Gk=(function(){function n(e){this.image=e,this.rectangleDetector=new tv(this.image)}return n.prototype.detect=function(){var e=this.rectangleDetector.detect(),t=this.detectSolid1(e);if(t=this.detectSolid2(t),t[3]=this.correctTopRight(t),!t[3])throw new ae;t=this.shiftToModuleCenter(t);var r=t[0],i=t[1],a=t[2],o=t[3],c=this.transitionsBetween(r,o)+1,u=this.transitionsBetween(a,o)+1;(c&1)===1&&(c+=1),(u&1)===1&&(u+=1),4*c<7*u&&4*u<7*c&&(c=u=Math.max(c,u));var h=n.sampleGrid(this.image,r,i,a,o,c,u);return new Ry(h,[r,i,a,o])},n.shiftPoint=function(e,t,r){var i=(t.getX()-e.getX())/(r+1),a=(t.getY()-e.getY())/(r+1);return new Se(e.getX()+i,e.getY()+a)},n.moveAway=function(e,t,r){var i=e.getX(),a=e.getY();return i<t?i-=1:i+=1,a<r?a-=1:a+=1,new Se(i,a)},n.prototype.detectSolid1=function(e){var t=e[0],r=e[1],i=e[3],a=e[2],o=this.transitionsBetween(t,r),c=this.transitionsBetween(r,i),u=this.transitionsBetween(i,a),h=this.transitionsBetween(a,t),p=o,g=[a,t,r,i];return p>c&&(p=c,g[0]=t,g[1]=r,g[2]=i,g[3]=a),p>u&&(p=u,g[0]=r,g[1]=i,g[2]=a,g[3]=t),p>h&&(g[0]=i,g[1]=a,g[2]=t,g[3]=r),g},n.prototype.detectSolid2=function(e){var t=e[0],r=e[1],i=e[2],a=e[3],o=this.transitionsBetween(t,a),c=n.shiftPoint(r,i,(o+1)*4),u=n.shiftPoint(i,r,(o+1)*4),h=this.transitionsBetween(c,t),p=this.transitionsBetween(u,a);return h<p?(e[0]=t,e[1]=r,e[2]=i,e[3]=a):(e[0]=r,e[1]=i,e[2]=a,e[3]=t),e},n.prototype.correctTopRight=function(e){var t=e[0],r=e[1],i=e[2],a=e[3],o=this.transitionsBetween(t,a),c=this.transitionsBetween(r,a),u=n.shiftPoint(t,r,(c+1)*4),h=n.shiftPoint(i,r,(o+1)*4);o=this.transitionsBetween(u,a),c=this.transitionsBetween(h,a);var p=new Se(a.getX()+(i.getX()-r.getX())/(o+1),a.getY()+(i.getY()-r.getY())/(o+1)),g=new Se(a.getX()+(t.getX()-r.getX())/(c+1),a.getY()+(t.getY()-r.getY())/(c+1));if(!this.isValid(p))return this.isValid(g)?g:null;if(!this.isValid(g))return p;var _=this.transitionsBetween(u,p)+this.transitionsBetween(h,p),E=this.transitionsBetween(u,g)+this.transitionsBetween(h,g);return _>E?p:g},n.prototype.shiftToModuleCenter=function(e){var t=e[0],r=e[1],i=e[2],a=e[3],o=this.transitionsBetween(t,a)+1,c=this.transitionsBetween(i,a)+1,u=n.shiftPoint(t,r,c*4),h=n.shiftPoint(i,r,o*4);o=this.transitionsBetween(u,a)+1,c=this.transitionsBetween(h,a)+1,(o&1)===1&&(o+=1),(c&1)===1&&(c+=1);var p=(t.getX()+r.getX()+i.getX()+a.getX())/4,g=(t.getY()+r.getY()+i.getY()+a.getY())/4;t=n.moveAway(t,p,g),r=n.moveAway(r,p,g),i=n.moveAway(i,p,g),a=n.moveAway(a,p,g);var _,E;return u=n.shiftPoint(t,r,c*4),u=n.shiftPoint(u,a,o*4),_=n.shiftPoint(r,t,c*4),_=n.shiftPoint(_,i,o*4),h=n.shiftPoint(i,a,c*4),h=n.shiftPoint(h,r,o*4),E=n.shiftPoint(a,i,c*4),E=n.shiftPoint(E,t,o*4),[u,_,h,E]},n.prototype.isValid=function(e){return e.getX()>=0&&e.getX()<this.image.getWidth()&&e.getY()>0&&e.getY()<this.image.getHeight()},n.sampleGrid=function(e,t,r,i,a,o,c){var u=Oy.getInstance();return u.sampleGrid(e,o,c,.5,.5,o-.5,.5,o-.5,c-.5,.5,c-.5,t.getX(),t.getY(),a.getX(),a.getY(),i.getX(),i.getY(),r.getX(),r.getY())},n.prototype.transitionsBetween=function(e,t){var r=Math.trunc(e.getX()),i=Math.trunc(e.getY()),a=Math.trunc(t.getX()),o=Math.trunc(t.getY()),c=Math.abs(o-i)>Math.abs(a-r);if(c){var u=r;r=i,i=u,u=a,a=o,o=u}for(var h=Math.abs(a-r),p=Math.abs(o-i),g=-h/2,_=i<o?1:-1,E=r<a?1:-1,A=0,S=this.image.get(c?i:r,c?r:i),O=r,T=i;O!==a;O+=E){var R=this.image.get(c?T:O,c?O:T);if(R!==S&&(A++,S=R),g+=p,g>0){if(T===o)break;T+=_,g-=h}}return A},n})(),b0=(function(){function n(){this.decoder=new Hk}return n.prototype.decode=function(e,t){t===void 0&&(t=null);var r,i;if(t!=null&&t.has(kt.PURE_BARCODE)){var a=n.extractPureBits(e.getBlackMatrix());r=this.decoder.decode(a),i=n.NO_POINTS}else{var o=new Gk(e.getBlackMatrix()).detect();r=this.decoder.decode(o.getBits()),i=o.getPoints()}var c=r.getRawBytes(),u=new sr(r.getText(),c,8*c.length,i,Me.DATA_MATRIX,Pt.currentTimeMillis()),h=r.getByteSegments();h!=null&&u.putMetadata(Jn.BYTE_SEGMENTS,h);var p=r.getECLevel();return p!=null&&u.putMetadata(Jn.ERROR_CORRECTION_LEVEL,p),u},n.prototype.reset=function(){},n.extractPureBits=function(e){var t=e.getTopLeftOnBit(),r=e.getBottomRightOnBit();if(t==null||r==null)throw new ae;var i=this.moduleSize(t,e),a=t[1],o=r[1],c=t[0],u=r[0],h=(u-c+1)/i,p=(o-a+1)/i;if(h<=0||p<=0)throw new ae;var g=i/2;a+=g,c+=g;for(var _=new pa(h,p),E=0;E<p;E++)for(var A=a+E*i,S=0;S<h;S++)e.get(c+S*i,A)&&_.set(S,E);return _},n.moduleSize=function(e,t){for(var r=t.getWidth(),i=e[0],a=e[1];i<r&&t.get(i,a);)i++;if(i===r)throw new ae;var o=i-e[0];if(o===0)throw new ae;return o},n.NO_POINTS=[],n})(),qk=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})();(function(n){qk(e,n);function e(t){return t===void 0&&(t=500),n.call(this,new b0,t)||this}return e})(Bc);var lc;(function(n){n[n.L=0]="L",n[n.M=1]="M",n[n.Q=2]="Q",n[n.H=3]="H"})(lc||(lc={}));var $k=(function(){function n(e,t,r){this.value=e,this.stringValue=t,this.bits=r,n.FOR_BITS.set(r,this),n.FOR_VALUE.set(e,this)}return n.prototype.getValue=function(){return this.value},n.prototype.getBits=function(){return this.bits},n.fromString=function(e){switch(e){case"L":return n.L;case"M":return n.M;case"Q":return n.Q;case"H":return n.H;default:throw new rn(e+"not available")}},n.prototype.toString=function(){return this.stringValue},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.value===t.value},n.forBits=function(e){if(e<0||e>=n.FOR_BITS.size)throw new Pe;return n.FOR_BITS.get(e)},n.FOR_BITS=new Map,n.FOR_VALUE=new Map,n.L=new n(lc.L,"L",1),n.M=new n(lc.M,"M",0),n.Q=new n(lc.Q,"Q",3),n.H=new n(lc.H,"H",2),n})(),Xk=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},c3=(function(){function n(e){this.errorCorrectionLevel=$k.forBits(e>>3&3),this.dataMask=e&7}return n.numBitsDiffering=function(e,t){return Xe.bitCount(e^t)},n.decodeFormatInformation=function(e,t){var r=n.doDecodeFormatInformation(e,t);return r!==null?r:n.doDecodeFormatInformation(e^n.FORMAT_INFO_MASK_QR,t^n.FORMAT_INFO_MASK_QR)},n.doDecodeFormatInformation=function(e,t){var r,i,a=Number.MAX_SAFE_INTEGER,o=0;try{for(var c=Xk(n.FORMAT_INFO_DECODE_LOOKUP),u=c.next();!u.done;u=c.next()){var h=u.value,p=h[0];if(p===e||p===t)return new n(h[1]);var g=n.numBitsDiffering(e,p);g<a&&(o=h[1],a=g),e!==t&&(g=n.numBitsDiffering(t,p),g<a&&(o=h[1],a=g))}}catch(_){r={error:_}}finally{try{u&&!u.done&&(i=c.return)&&i.call(c)}finally{if(r)throw r.error}}return a<=3?new n(o):null},n.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},n.prototype.getDataMask=function(){return this.dataMask},n.prototype.hashCode=function(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.errorCorrectionLevel===t.errorCorrectionLevel&&this.dataMask===t.dataMask},n.FORMAT_INFO_MASK_QR=21522,n.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])],n})(),Yk=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Q=(function(){function n(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this.ecCodewordsPerBlock=e,this.ecBlocks=t}return n.prototype.getECCodewordsPerBlock=function(){return this.ecCodewordsPerBlock},n.prototype.getNumBlocks=function(){var e,t,r=0,i=this.ecBlocks;try{for(var a=Yk(i),o=a.next();!o.done;o=a.next()){var c=o.value;r+=c.getCount()}}catch(u){e={error:u}}finally{try{o&&!o.done&&(t=a.return)&&t.call(a)}finally{if(e)throw e.error}}return r},n.prototype.getTotalECCodewords=function(){return this.ecCodewordsPerBlock*this.getNumBlocks()},n.prototype.getECBlocks=function(){return this.ecBlocks},n})(),H=(function(){function n(e,t){this.count=e,this.dataCodewords=t}return n.prototype.getCount=function(){return this.count},n.prototype.getDataCodewords=function(){return this.dataCodewords},n})(),Kk=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Xo=(function(){function n(e,t){for(var r,i,a=[],o=2;o<arguments.length;o++)a[o-2]=arguments[o];this.versionNumber=e,this.alignmentPatternCenters=t,this.ecBlocks=a;var c=0,u=a[0].getECCodewordsPerBlock(),h=a[0].getECBlocks();try{for(var p=Kk(h),g=p.next();!g.done;g=p.next()){var _=g.value;c+=_.getCount()*(_.getDataCodewords()+u)}}catch(E){r={error:E}}finally{try{g&&!g.done&&(i=p.return)&&i.call(p)}finally{if(r)throw r.error}}this.totalCodewords=c}return n.prototype.getVersionNumber=function(){return this.versionNumber},n.prototype.getAlignmentPatternCenters=function(){return this.alignmentPatternCenters},n.prototype.getTotalCodewords=function(){return this.totalCodewords},n.prototype.getDimensionForVersion=function(){return 17+4*this.versionNumber},n.prototype.getECBlocksForLevel=function(e){return this.ecBlocks[e.getValue()]},n.getProvisionalVersionForDimension=function(e){if(e%4!==1)throw new ye;try{return this.getVersionForNumber((e-17)/4)}catch{throw new ye}},n.getVersionForNumber=function(e){if(e<1||e>40)throw new Pe;return n.VERSIONS[e-1]},n.decodeVersionInformation=function(e){for(var t=Number.MAX_SAFE_INTEGER,r=0,i=0;i<n.VERSION_DECODE_INFO.length;i++){var a=n.VERSION_DECODE_INFO[i];if(a===e)return n.getVersionForNumber(i+7);var o=c3.numBitsDiffering(e,a);o<t&&(r=i+7,t=o)}return t<=3?n.getVersionForNumber(r):null},n.prototype.buildFunctionPattern=function(){var e=this.getDimensionForVersion(),t=new pa(e);t.setRegion(0,0,9,9),t.setRegion(e-8,0,8,9),t.setRegion(0,e-8,9,8);for(var r=this.alignmentPatternCenters.length,i=0;i<r;i++)for(var a=this.alignmentPatternCenters[i]-2,o=0;o<r;o++)i===0&&(o===0||o===r-1)||i===r-1&&o===0||t.setRegion(this.alignmentPatternCenters[o]-2,a,5,5);return t.setRegion(6,9,1,e-17),t.setRegion(9,6,e-17,1),this.versionNumber>6&&(t.setRegion(e-11,0,3,6),t.setRegion(0,e-11,6,3)),t},n.prototype.toString=function(){return""+this.versionNumber},n.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),n.VERSIONS=[new n(1,new Int32Array(0),new Q(7,new H(1,19)),new Q(10,new H(1,16)),new Q(13,new H(1,13)),new Q(17,new H(1,9))),new n(2,Int32Array.from([6,18]),new Q(10,new H(1,34)),new Q(16,new H(1,28)),new Q(22,new H(1,22)),new Q(28,new H(1,16))),new n(3,Int32Array.from([6,22]),new Q(15,new H(1,55)),new Q(26,new H(1,44)),new Q(18,new H(2,17)),new Q(22,new H(2,13))),new n(4,Int32Array.from([6,26]),new Q(20,new H(1,80)),new Q(18,new H(2,32)),new Q(26,new H(2,24)),new Q(16,new H(4,9))),new n(5,Int32Array.from([6,30]),new Q(26,new H(1,108)),new Q(24,new H(2,43)),new Q(18,new H(2,15),new H(2,16)),new Q(22,new H(2,11),new H(2,12))),new n(6,Int32Array.from([6,34]),new Q(18,new H(2,68)),new Q(16,new H(4,27)),new Q(24,new H(4,19)),new Q(28,new H(4,15))),new n(7,Int32Array.from([6,22,38]),new Q(20,new H(2,78)),new Q(18,new H(4,31)),new Q(18,new H(2,14),new H(4,15)),new Q(26,new H(4,13),new H(1,14))),new n(8,Int32Array.from([6,24,42]),new Q(24,new H(2,97)),new Q(22,new H(2,38),new H(2,39)),new Q(22,new H(4,18),new H(2,19)),new Q(26,new H(4,14),new H(2,15))),new n(9,Int32Array.from([6,26,46]),new Q(30,new H(2,116)),new Q(22,new H(3,36),new H(2,37)),new Q(20,new H(4,16),new H(4,17)),new Q(24,new H(4,12),new H(4,13))),new n(10,Int32Array.from([6,28,50]),new Q(18,new H(2,68),new H(2,69)),new Q(26,new H(4,43),new H(1,44)),new Q(24,new H(6,19),new H(2,20)),new Q(28,new H(6,15),new H(2,16))),new n(11,Int32Array.from([6,30,54]),new Q(20,new H(4,81)),new Q(30,new H(1,50),new H(4,51)),new Q(28,new H(4,22),new H(4,23)),new Q(24,new H(3,12),new H(8,13))),new n(12,Int32Array.from([6,32,58]),new Q(24,new H(2,92),new H(2,93)),new Q(22,new H(6,36),new H(2,37)),new Q(26,new H(4,20),new H(6,21)),new Q(28,new H(7,14),new H(4,15))),new n(13,Int32Array.from([6,34,62]),new Q(26,new H(4,107)),new Q(22,new H(8,37),new H(1,38)),new Q(24,new H(8,20),new H(4,21)),new Q(22,new H(12,11),new H(4,12))),new n(14,Int32Array.from([6,26,46,66]),new Q(30,new H(3,115),new H(1,116)),new Q(24,new H(4,40),new H(5,41)),new Q(20,new H(11,16),new H(5,17)),new Q(24,new H(11,12),new H(5,13))),new n(15,Int32Array.from([6,26,48,70]),new Q(22,new H(5,87),new H(1,88)),new Q(24,new H(5,41),new H(5,42)),new Q(30,new H(5,24),new H(7,25)),new Q(24,new H(11,12),new H(7,13))),new n(16,Int32Array.from([6,26,50,74]),new Q(24,new H(5,98),new H(1,99)),new Q(28,new H(7,45),new H(3,46)),new Q(24,new H(15,19),new H(2,20)),new Q(30,new H(3,15),new H(13,16))),new n(17,Int32Array.from([6,30,54,78]),new Q(28,new H(1,107),new H(5,108)),new Q(28,new H(10,46),new H(1,47)),new Q(28,new H(1,22),new H(15,23)),new Q(28,new H(2,14),new H(17,15))),new n(18,Int32Array.from([6,30,56,82]),new Q(30,new H(5,120),new H(1,121)),new Q(26,new H(9,43),new H(4,44)),new Q(28,new H(17,22),new H(1,23)),new Q(28,new H(2,14),new H(19,15))),new n(19,Int32Array.from([6,30,58,86]),new Q(28,new H(3,113),new H(4,114)),new Q(26,new H(3,44),new H(11,45)),new Q(26,new H(17,21),new H(4,22)),new Q(26,new H(9,13),new H(16,14))),new n(20,Int32Array.from([6,34,62,90]),new Q(28,new H(3,107),new H(5,108)),new Q(26,new H(3,41),new H(13,42)),new Q(30,new H(15,24),new H(5,25)),new Q(28,new H(15,15),new H(10,16))),new n(21,Int32Array.from([6,28,50,72,94]),new Q(28,new H(4,116),new H(4,117)),new Q(26,new H(17,42)),new Q(28,new H(17,22),new H(6,23)),new Q(30,new H(19,16),new H(6,17))),new n(22,Int32Array.from([6,26,50,74,98]),new Q(28,new H(2,111),new H(7,112)),new Q(28,new H(17,46)),new Q(30,new H(7,24),new H(16,25)),new Q(24,new H(34,13))),new n(23,Int32Array.from([6,30,54,78,102]),new Q(30,new H(4,121),new H(5,122)),new Q(28,new H(4,47),new H(14,48)),new Q(30,new H(11,24),new H(14,25)),new Q(30,new H(16,15),new H(14,16))),new n(24,Int32Array.from([6,28,54,80,106]),new Q(30,new H(6,117),new H(4,118)),new Q(28,new H(6,45),new H(14,46)),new Q(30,new H(11,24),new H(16,25)),new Q(30,new H(30,16),new H(2,17))),new n(25,Int32Array.from([6,32,58,84,110]),new Q(26,new H(8,106),new H(4,107)),new Q(28,new H(8,47),new H(13,48)),new Q(30,new H(7,24),new H(22,25)),new Q(30,new H(22,15),new H(13,16))),new n(26,Int32Array.from([6,30,58,86,114]),new Q(28,new H(10,114),new H(2,115)),new Q(28,new H(19,46),new H(4,47)),new Q(28,new H(28,22),new H(6,23)),new Q(30,new H(33,16),new H(4,17))),new n(27,Int32Array.from([6,34,62,90,118]),new Q(30,new H(8,122),new H(4,123)),new Q(28,new H(22,45),new H(3,46)),new Q(30,new H(8,23),new H(26,24)),new Q(30,new H(12,15),new H(28,16))),new n(28,Int32Array.from([6,26,50,74,98,122]),new Q(30,new H(3,117),new H(10,118)),new Q(28,new H(3,45),new H(23,46)),new Q(30,new H(4,24),new H(31,25)),new Q(30,new H(11,15),new H(31,16))),new n(29,Int32Array.from([6,30,54,78,102,126]),new Q(30,new H(7,116),new H(7,117)),new Q(28,new H(21,45),new H(7,46)),new Q(30,new H(1,23),new H(37,24)),new Q(30,new H(19,15),new H(26,16))),new n(30,Int32Array.from([6,26,52,78,104,130]),new Q(30,new H(5,115),new H(10,116)),new Q(28,new H(19,47),new H(10,48)),new Q(30,new H(15,24),new H(25,25)),new Q(30,new H(23,15),new H(25,16))),new n(31,Int32Array.from([6,30,56,82,108,134]),new Q(30,new H(13,115),new H(3,116)),new Q(28,new H(2,46),new H(29,47)),new Q(30,new H(42,24),new H(1,25)),new Q(30,new H(23,15),new H(28,16))),new n(32,Int32Array.from([6,34,60,86,112,138]),new Q(30,new H(17,115)),new Q(28,new H(10,46),new H(23,47)),new Q(30,new H(10,24),new H(35,25)),new Q(30,new H(19,15),new H(35,16))),new n(33,Int32Array.from([6,30,58,86,114,142]),new Q(30,new H(17,115),new H(1,116)),new Q(28,new H(14,46),new H(21,47)),new Q(30,new H(29,24),new H(19,25)),new Q(30,new H(11,15),new H(46,16))),new n(34,Int32Array.from([6,34,62,90,118,146]),new Q(30,new H(13,115),new H(6,116)),new Q(28,new H(14,46),new H(23,47)),new Q(30,new H(44,24),new H(7,25)),new Q(30,new H(59,16),new H(1,17))),new n(35,Int32Array.from([6,30,54,78,102,126,150]),new Q(30,new H(12,121),new H(7,122)),new Q(28,new H(12,47),new H(26,48)),new Q(30,new H(39,24),new H(14,25)),new Q(30,new H(22,15),new H(41,16))),new n(36,Int32Array.from([6,24,50,76,102,128,154]),new Q(30,new H(6,121),new H(14,122)),new Q(28,new H(6,47),new H(34,48)),new Q(30,new H(46,24),new H(10,25)),new Q(30,new H(2,15),new H(64,16))),new n(37,Int32Array.from([6,28,54,80,106,132,158]),new Q(30,new H(17,122),new H(4,123)),new Q(28,new H(29,46),new H(14,47)),new Q(30,new H(49,24),new H(10,25)),new Q(30,new H(24,15),new H(46,16))),new n(38,Int32Array.from([6,32,58,84,110,136,162]),new Q(30,new H(4,122),new H(18,123)),new Q(28,new H(13,46),new H(32,47)),new Q(30,new H(48,24),new H(14,25)),new Q(30,new H(42,15),new H(32,16))),new n(39,Int32Array.from([6,26,54,82,110,138,166]),new Q(30,new H(20,117),new H(4,118)),new Q(28,new H(40,47),new H(7,48)),new Q(30,new H(43,24),new H(22,25)),new Q(30,new H(10,15),new H(67,16))),new n(40,Int32Array.from([6,30,58,86,114,142,170]),new Q(30,new H(19,118),new H(6,119)),new Q(28,new H(18,47),new H(31,48)),new Q(30,new H(34,24),new H(34,25)),new Q(30,new H(20,15),new H(61,16)))],n})(),Dn;(function(n){n[n.DATA_MASK_000=0]="DATA_MASK_000",n[n.DATA_MASK_001=1]="DATA_MASK_001",n[n.DATA_MASK_010=2]="DATA_MASK_010",n[n.DATA_MASK_011=3]="DATA_MASK_011",n[n.DATA_MASK_100=4]="DATA_MASK_100",n[n.DATA_MASK_101=5]="DATA_MASK_101",n[n.DATA_MASK_110=6]="DATA_MASK_110",n[n.DATA_MASK_111=7]="DATA_MASK_111"})(Dn||(Dn={}));var IA=(function(){function n(e,t){this.value=e,this.isMasked=t}return n.prototype.unmaskBitMatrix=function(e,t){for(var r=0;r<t;r++)for(var i=0;i<t;i++)this.isMasked(r,i)&&e.flip(i,r)},n.values=new Map([[Dn.DATA_MASK_000,new n(Dn.DATA_MASK_000,function(e,t){return(e+t&1)===0})],[Dn.DATA_MASK_001,new n(Dn.DATA_MASK_001,function(e,t){return(e&1)===0})],[Dn.DATA_MASK_010,new n(Dn.DATA_MASK_010,function(e,t){return t%3===0})],[Dn.DATA_MASK_011,new n(Dn.DATA_MASK_011,function(e,t){return(e+t)%3===0})],[Dn.DATA_MASK_100,new n(Dn.DATA_MASK_100,function(e,t){return(Math.floor(e/2)+Math.floor(t/3)&1)===0})],[Dn.DATA_MASK_101,new n(Dn.DATA_MASK_101,function(e,t){return e*t%6===0})],[Dn.DATA_MASK_110,new n(Dn.DATA_MASK_110,function(e,t){return e*t%6<3})],[Dn.DATA_MASK_111,new n(Dn.DATA_MASK_111,function(e,t){return(e+t+e*t%3&1)===0})]]),n})(),Wk=(function(){function n(e){var t=e.getHeight();if(t<21||(t&3)!==1)throw new ye;this.bitMatrix=e}return n.prototype.readFormatInformation=function(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;for(var e=0,t=0;t<6;t++)e=this.copyBit(t,8,e);e=this.copyBit(7,8,e),e=this.copyBit(8,8,e),e=this.copyBit(8,7,e);for(var r=5;r>=0;r--)e=this.copyBit(8,r,e);for(var i=this.bitMatrix.getHeight(),a=0,o=i-7,r=i-1;r>=o;r--)a=this.copyBit(8,r,a);for(var t=i-8;t<i;t++)a=this.copyBit(t,8,a);if(this.parsedFormatInfo=c3.decodeFormatInformation(e,a),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new ye},n.prototype.readVersion=function(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;var e=this.bitMatrix.getHeight(),t=Math.floor((e-17)/4);if(t<=6)return Xo.getVersionForNumber(t);for(var r=0,i=e-11,a=5;a>=0;a--)for(var o=e-9;o>=i;o--)r=this.copyBit(o,a,r);var c=Xo.decodeVersionInformation(r);if(c!==null&&c.getDimensionForVersion()===e)return this.parsedVersion=c,c;r=0;for(var o=5;o>=0;o--)for(var a=e-9;a>=i;a--)r=this.copyBit(o,a,r);if(c=Xo.decodeVersionInformation(r),c!==null&&c.getDimensionForVersion()===e)return this.parsedVersion=c,c;throw new ye},n.prototype.copyBit=function(e,t,r){var i=this.isMirror?this.bitMatrix.get(t,e):this.bitMatrix.get(e,t);return i?r<<1|1:r<<1},n.prototype.readCodewords=function(){var e=this.readFormatInformation(),t=this.readVersion(),r=IA.values.get(e.getDataMask()),i=this.bitMatrix.getHeight();r.unmaskBitMatrix(this.bitMatrix,i);for(var a=t.buildFunctionPattern(),o=!0,c=new Uint8Array(t.getTotalCodewords()),u=0,h=0,p=0,g=i-1;g>0;g-=2){g===6&&g--;for(var _=0;_<i;_++)for(var E=o?i-1-_:_,A=0;A<2;A++)a.get(g-A,E)||(p++,h<<=1,this.bitMatrix.get(g-A,E)&&(h|=1),p===8&&(c[u++]=h,p=0,h=0));o=!o}if(u!==t.getTotalCodewords())throw new ye;return c},n.prototype.remask=function(){if(this.parsedFormatInfo!==null){var e=IA.values.get(this.parsedFormatInfo.getDataMask()),t=this.bitMatrix.getHeight();e.unmaskBitMatrix(this.bitMatrix,t)}},n.prototype.setMirror=function(e){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=e},n.prototype.mirror=function(){for(var e=this.bitMatrix,t=0,r=e.getWidth();t<r;t++)for(var i=t+1,a=e.getHeight();i<a;i++)e.get(t,i)!==e.get(i,t)&&(e.flip(i,t),e.flip(t,i))},n})(),NA=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Qk=(function(){function n(e,t){this.numDataCodewords=e,this.codewords=t}return n.getDataBlocks=function(e,t,r){var i,a,o,c;if(e.length!==t.getTotalCodewords())throw new Pe;var u=t.getECBlocksForLevel(r),h=0,p=u.getECBlocks();try{for(var g=NA(p),_=g.next();!_.done;_=g.next()){var E=_.value;h+=E.getCount()}}catch(k){i={error:k}}finally{try{_&&!_.done&&(a=g.return)&&a.call(g)}finally{if(i)throw i.error}}var A=new Array(h),S=0;try{for(var O=NA(p),T=O.next();!T.done;T=O.next())for(var E=T.value,R=0;R<E.getCount();R++){var L=E.getDataCodewords(),z=u.getECCodewordsPerBlock()+L;A[S++]=new n(L,new Uint8Array(z))}}catch(k){o={error:k}}finally{try{T&&!T.done&&(c=O.return)&&c.call(O)}finally{if(o)throw o.error}}for(var U=A[0].codewords.length,G=A.length-1;G>=0;){var D=A[G].codewords.length;if(D===U)break;G--}G++;for(var w=U-u.getECCodewordsPerBlock(),I=0,R=0;R<w;R++)for(var M=0;M<S;M++)A[M].codewords[R]=e[I++];for(var M=G;M<S;M++)A[M].codewords[w]=e[I++];for(var j=A[0].codewords.length,R=w;R<j;R++)for(var M=0;M<S;M++){var V=M<G?R:R+1;A[M].codewords[V]=e[I++]}return A},n.prototype.getNumDataCodewords=function(){return this.numDataCodewords},n.prototype.getCodewords=function(){return this.codewords},n})(),ri;(function(n){n[n.TERMINATOR=0]="TERMINATOR",n[n.NUMERIC=1]="NUMERIC",n[n.ALPHANUMERIC=2]="ALPHANUMERIC",n[n.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",n[n.BYTE=4]="BYTE",n[n.ECI=5]="ECI",n[n.KANJI=6]="KANJI",n[n.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",n[n.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",n[n.HANZI=9]="HANZI"})(ri||(ri={}));var Vt=(function(){function n(e,t,r,i){this.value=e,this.stringValue=t,this.characterCountBitsForVersions=r,this.bits=i,n.FOR_BITS.set(i,this),n.FOR_VALUE.set(e,this)}return n.forBits=function(e){var t=n.FOR_BITS.get(e);if(t===void 0)throw new Pe;return t},n.prototype.getCharacterCountBits=function(e){var t=e.getVersionNumber(),r;return t<=9?r=0:t<=26?r=1:r=2,this.characterCountBitsForVersions[r]},n.prototype.getValue=function(){return this.value},n.prototype.getBits=function(){return this.bits},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.value===t.value},n.prototype.toString=function(){return this.stringValue},n.FOR_BITS=new Map,n.FOR_VALUE=new Map,n.TERMINATOR=new n(ri.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),n.NUMERIC=new n(ri.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),n.ALPHANUMERIC=new n(ri.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),n.STRUCTURED_APPEND=new n(ri.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),n.BYTE=new n(ri.BYTE,"BYTE",Int32Array.from([8,16,16]),4),n.ECI=new n(ri.ECI,"ECI",Int32Array.from([0,0,0]),7),n.KANJI=new n(ri.KANJI,"KANJI",Int32Array.from([8,10,12]),8),n.FNC1_FIRST_POSITION=new n(ri.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),n.FNC1_SECOND_POSITION=new n(ri.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),n.HANZI=new n(ri.HANZI,"HANZI",Int32Array.from([8,10,12]),13),n})(),Zk=(function(){function n(){}return n.decode=function(e,t,r,i){var a=new l3(e),o=new $e,c=new Array,u=-1,h=-1;try{var p=null,g=!1,_=void 0;do{if(a.available()<4)_=Vt.TERMINATOR;else{var E=a.readBits(4);_=Vt.forBits(E)}switch(_){case Vt.TERMINATOR:break;case Vt.FNC1_FIRST_POSITION:case Vt.FNC1_SECOND_POSITION:g=!0;break;case Vt.STRUCTURED_APPEND:if(a.available()<16)throw new ye;u=a.readBits(8),h=a.readBits(8);break;case Vt.ECI:var A=n.parseECIValue(a);if(p=Sn.getCharacterSetECIByValue(A),p===null)throw new ye;break;case Vt.HANZI:var S=a.readBits(4),O=a.readBits(_.getCharacterCountBits(t));S===n.GB2312_SUBSET&&n.decodeHanziSegment(a,o,O);break;default:var T=a.readBits(_.getCharacterCountBits(t));switch(_){case Vt.NUMERIC:n.decodeNumericSegment(a,o,T);break;case Vt.ALPHANUMERIC:n.decodeAlphanumericSegment(a,o,T,g);break;case Vt.BYTE:n.decodeByteSegment(a,o,T,p,c,i);break;case Vt.KANJI:n.decodeKanjiSegment(a,o,T);break;default:throw new ye}break}}while(_!==Vt.TERMINATOR)}catch{throw new ye}return new u1(e,o.toString(),c.length===0?null:c,r===null?null:r.toString(),u,h)},n.decodeHanziSegment=function(e,t,r){if(r*13>e.available())throw new ye;for(var i=new Uint8Array(2*r),a=0;r>0;){var o=e.readBits(13),c=o/96<<8&4294967295|o%96;c<959?c+=41377:c+=42657,i[a]=c>>8&255,i[a+1]=c&255,a+=2,r--}try{t.append(oi.decode(i,at.GB2312))}catch(u){throw new ye(u)}},n.decodeKanjiSegment=function(e,t,r){if(r*13>e.available())throw new ye;for(var i=new Uint8Array(2*r),a=0;r>0;){var o=e.readBits(13),c=o/192<<8&4294967295|o%192;c<7936?c+=33088:c+=49472,i[a]=c>>8,i[a+1]=c,a+=2,r--}try{t.append(oi.decode(i,at.SHIFT_JIS))}catch(u){throw new ye(u)}},n.decodeByteSegment=function(e,t,r,i,a,o){if(8*r>e.available())throw new ye;for(var c=new Uint8Array(r),u=0;u<r;u++)c[u]=e.readBits(8);var h;i===null?h=at.guessEncoding(c,o):h=i.getName();try{t.append(oi.decode(c,h))}catch(p){throw new ye(p)}a.push(c)},n.toAlphaNumericChar=function(e){if(e>=n.ALPHANUMERIC_CHARS.length)throw new ye;return n.ALPHANUMERIC_CHARS[e]},n.decodeAlphanumericSegment=function(e,t,r,i){for(var a=t.length();r>1;){if(e.available()<11)throw new ye;var o=e.readBits(11);t.append(n.toAlphaNumericChar(Math.floor(o/45))),t.append(n.toAlphaNumericChar(o%45)),r-=2}if(r===1){if(e.available()<6)throw new ye;t.append(n.toAlphaNumericChar(e.readBits(6)))}if(i)for(var c=a;c<t.length();c++)t.charAt(c)==="%"&&(c<t.length()-1&&t.charAt(c+1)==="%"?t.deleteCharAt(c+1):t.setCharAt(c,""))},n.decodeNumericSegment=function(e,t,r){for(;r>=3;){if(e.available()<10)throw new ye;var i=e.readBits(10);if(i>=1e3)throw new ye;t.append(n.toAlphaNumericChar(Math.floor(i/100))),t.append(n.toAlphaNumericChar(Math.floor(i/10)%10)),t.append(n.toAlphaNumericChar(i%10)),r-=3}if(r===2){if(e.available()<7)throw new ye;var a=e.readBits(7);if(a>=100)throw new ye;t.append(n.toAlphaNumericChar(Math.floor(a/10))),t.append(n.toAlphaNumericChar(a%10))}else if(r===1){if(e.available()<4)throw new ye;var o=e.readBits(4);if(o>=10)throw new ye;t.append(n.toAlphaNumericChar(o))}},n.parseECIValue=function(e){var t=e.readBits(8);if((t&128)===0)return t&127;if((t&192)===128){var r=e.readBits(8);return(t&63)<<8&4294967295|r}if((t&224)===192){var i=e.readBits(16);return(t&31)<<16&4294967295|i}throw new ye},n.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",n.GB2312_SUBSET=1,n})(),u3=(function(){function n(e){this.mirrored=e}return n.prototype.isMirrored=function(){return this.mirrored},n.prototype.applyMirroredCorrection=function(e){if(!(!this.mirrored||e===null||e.length<3)){var t=e[0];e[0]=e[2],e[2]=t}},n})(),RA=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Jk=(function(){function n(){this.rsDecoder=new f1(br.QR_CODE_FIELD_256)}return n.prototype.decodeBooleanArray=function(e,t){return this.decodeBitMatrix(pa.parseFromBooleanArray(e),t)},n.prototype.decodeBitMatrix=function(e,t){var r=new Wk(e),i=null;try{return this.decodeBitMatrixParser(r,t)}catch(o){i=o}try{r.remask(),r.setMirror(!0),r.readVersion(),r.readFormatInformation(),r.mirror();var a=this.decodeBitMatrixParser(r,t);return a.setOther(new u3(!0)),a}catch(o){throw i!==null?i:o}},n.prototype.decodeBitMatrixParser=function(e,t){var r,i,a,o,c=e.readVersion(),u=e.readFormatInformation().getErrorCorrectionLevel(),h=e.readCodewords(),p=Qk.getDataBlocks(h,c,u),g=0;try{for(var _=RA(p),E=_.next();!E.done;E=_.next()){var A=E.value;g+=A.getNumDataCodewords()}}catch(G){r={error:G}}finally{try{E&&!E.done&&(i=_.return)&&i.call(_)}finally{if(r)throw r.error}}var S=new Uint8Array(g),O=0;try{for(var T=RA(p),R=T.next();!R.done;R=T.next()){var A=R.value,L=A.getCodewords(),z=A.getNumDataCodewords();this.correctErrors(L,z);for(var U=0;U<z;U++)S[O++]=L[U]}}catch(G){a={error:G}}finally{try{R&&!R.done&&(o=T.return)&&o.call(T)}finally{if(a)throw a.error}}return Zk.decode(S,c,u,t)},n.prototype.correctErrors=function(e,t){var r=new Int32Array(e);try{this.rsDecoder.decode(r,e.length-t)}catch{throw new _n}for(var i=0;i<t;i++)e[i]=r[i]},n})(),eL=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),tL=(function(n){eL(e,n);function e(t,r,i){var a=n.call(this,t,r)||this;return a.estimatedModuleSize=i,a}return e.prototype.aboutEquals=function(t,r,i){if(Math.abs(r-this.getY())<=t&&Math.abs(i-this.getX())<=t){var a=Math.abs(t-this.estimatedModuleSize);return a<=1||a<=this.estimatedModuleSize}return!1},e.prototype.combineEstimate=function(t,r,i){var a=(this.getX()+r)/2,o=(this.getY()+t)/2,c=(this.estimatedModuleSize+i)/2;return new e(a,o,c)},e})(Se),nL=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},rL=(function(){function n(e,t,r,i,a,o,c){this.image=e,this.startX=t,this.startY=r,this.width=i,this.height=a,this.moduleSize=o,this.resultPointCallback=c,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}return n.prototype.find=function(){for(var e=this.startX,t=this.height,r=this.width,i=e+r,a=this.startY+t/2,o=new Int32Array(3),c=this.image,u=0;u<t;u++){var h=a+((u&1)===0?Math.floor((u+1)/2):-Math.floor((u+1)/2));o[0]=0,o[1]=0,o[2]=0;for(var p=e;p<i&&!c.get(p,h);)p++;for(var g=0;p<i;){if(c.get(p,h))if(g===1)o[1]++;else if(g===2){if(this.foundPatternCross(o)){var _=this.handlePossibleCenter(o,h,p);if(_!==null)return _}o[0]=o[2],o[1]=1,o[2]=0,g=1}else o[++g]++;else g===1&&g++,o[g]++;p++}if(this.foundPatternCross(o)){var _=this.handlePossibleCenter(o,h,i);if(_!==null)return _}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new ae},n.centerFromEnd=function(e,t){return t-e[2]-e[1]/2},n.prototype.foundPatternCross=function(e){for(var t=this.moduleSize,r=t/2,i=0;i<3;i++)if(Math.abs(t-e[i])>=r)return!1;return!0},n.prototype.crossCheckVertical=function(e,t,r,i){var a=this.image,o=a.getHeight(),c=this.crossCheckStateCount;c[0]=0,c[1]=0,c[2]=0;for(var u=e;u>=0&&a.get(t,u)&&c[1]<=r;)c[1]++,u--;if(u<0||c[1]>r)return NaN;for(;u>=0&&!a.get(t,u)&&c[0]<=r;)c[0]++,u--;if(c[0]>r)return NaN;for(u=e+1;u<o&&a.get(t,u)&&c[1]<=r;)c[1]++,u++;if(u===o||c[1]>r)return NaN;for(;u<o&&!a.get(t,u)&&c[2]<=r;)c[2]++,u++;if(c[2]>r)return NaN;var h=c[0]+c[1]+c[2];return 5*Math.abs(h-i)>=2*i?NaN:this.foundPatternCross(c)?n.centerFromEnd(c,u):NaN},n.prototype.handlePossibleCenter=function(e,t,r){var i,a,o=e[0]+e[1]+e[2],c=n.centerFromEnd(e,r),u=this.crossCheckVertical(t,c,2*e[1],o);if(!isNaN(u)){var h=(e[0]+e[1]+e[2])/3;try{for(var p=nL(this.possibleCenters),g=p.next();!g.done;g=p.next()){var _=g.value;if(_.aboutEquals(h,u,c))return _.combineEstimate(u,c,h)}}catch(A){i={error:A}}finally{try{g&&!g.done&&(a=p.return)&&a.call(p)}finally{if(i)throw i.error}}var E=new tL(c,u,h);this.possibleCenters.push(E),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(E)}return null},n})(),iL=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),aL=(function(n){iL(e,n);function e(t,r,i,a){var o=n.call(this,t,r)||this;return o.estimatedModuleSize=i,o.count=a,a===void 0&&(o.count=1),o}return e.prototype.getEstimatedModuleSize=function(){return this.estimatedModuleSize},e.prototype.getCount=function(){return this.count},e.prototype.aboutEquals=function(t,r,i){if(Math.abs(r-this.getY())<=t&&Math.abs(i-this.getX())<=t){var a=Math.abs(t-this.estimatedModuleSize);return a<=1||a<=this.estimatedModuleSize}return!1},e.prototype.combineEstimate=function(t,r,i){var a=this.count+1,o=(this.count*this.getX()+r)/a,c=(this.count*this.getY()+t)/a,u=(this.count*this.estimatedModuleSize+i)/a;return new e(o,c,u,a)},e})(Se),sL=(function(){function n(e){this.bottomLeft=e[0],this.topLeft=e[1],this.topRight=e[2]}return n.prototype.getBottomLeft=function(){return this.bottomLeft},n.prototype.getTopLeft=function(){return this.topLeft},n.prototype.getTopRight=function(){return this.topRight},n})(),Hu=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},oL=(function(){function n(e,t){this.image=e,this.resultPointCallback=t,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=t}return n.prototype.getImage=function(){return this.image},n.prototype.getPossibleCenters=function(){return this.possibleCenters},n.prototype.find=function(e){var t=e!=null&&e.get(kt.TRY_HARDER)!==void 0,r=e!=null&&e.get(kt.PURE_BARCODE)!==void 0,i=this.image,a=i.getHeight(),o=i.getWidth(),c=Math.floor(3*a/(4*n.MAX_MODULES));(c<n.MIN_SKIP||t)&&(c=n.MIN_SKIP);for(var u=!1,h=new Int32Array(5),p=c-1;p<a&&!u;p+=c){h[0]=0,h[1]=0,h[2]=0,h[3]=0,h[4]=0;for(var g=0,_=0;_<o;_++)if(i.get(_,p))(g&1)===1&&g++,h[g]++;else if((g&1)===0)if(g===4)if(n.foundPatternCross(h)){var E=this.handlePossibleCenter(h,p,_,r);if(E===!0)if(c=2,this.hasSkipped===!0)u=this.haveMultiplyConfirmedCenters();else{var A=this.findRowSkip();A>h[2]&&(p+=A-h[2]-c,_=o-1)}else{h[0]=h[2],h[1]=h[3],h[2]=h[4],h[3]=1,h[4]=0,g=3;continue}g=0,h[0]=0,h[1]=0,h[2]=0,h[3]=0,h[4]=0}else h[0]=h[2],h[1]=h[3],h[2]=h[4],h[3]=1,h[4]=0,g=3;else h[++g]++;else h[g]++;if(n.foundPatternCross(h)){var E=this.handlePossibleCenter(h,p,o,r);E===!0&&(c=h[0],this.hasSkipped&&(u=this.haveMultiplyConfirmedCenters()))}}var S=this.selectBestPatterns();return Se.orderBestPatterns(S),new sL(S)},n.centerFromEnd=function(e,t){return t-e[4]-e[3]-e[2]/2},n.foundPatternCross=function(e){for(var t=0,r=0;r<5;r++){var i=e[r];if(i===0)return!1;t+=i}if(t<7)return!1;var a=t/7,o=a/2;return Math.abs(a-e[0])<o&&Math.abs(a-e[1])<o&&Math.abs(3*a-e[2])<3*o&&Math.abs(a-e[3])<o&&Math.abs(a-e[4])<o},n.prototype.getCrossCheckStateCount=function(){var e=this.crossCheckStateCount;return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e},n.prototype.crossCheckDiagonal=function(e,t,r,i){for(var a=this.getCrossCheckStateCount(),o=0,c=this.image;e>=o&&t>=o&&c.get(t-o,e-o);)a[2]++,o++;if(e<o||t<o)return!1;for(;e>=o&&t>=o&&!c.get(t-o,e-o)&&a[1]<=r;)a[1]++,o++;if(e<o||t<o||a[1]>r)return!1;for(;e>=o&&t>=o&&c.get(t-o,e-o)&&a[0]<=r;)a[0]++,o++;if(a[0]>r)return!1;var u=c.getHeight(),h=c.getWidth();for(o=1;e+o<u&&t+o<h&&c.get(t+o,e+o);)a[2]++,o++;if(e+o>=u||t+o>=h)return!1;for(;e+o<u&&t+o<h&&!c.get(t+o,e+o)&&a[3]<r;)a[3]++,o++;if(e+o>=u||t+o>=h||a[3]>=r)return!1;for(;e+o<u&&t+o<h&&c.get(t+o,e+o)&&a[4]<r;)a[4]++,o++;if(a[4]>=r)return!1;var p=a[0]+a[1]+a[2]+a[3]+a[4];return Math.abs(p-i)<2*i&&n.foundPatternCross(a)},n.prototype.crossCheckVertical=function(e,t,r,i){for(var a=this.image,o=a.getHeight(),c=this.getCrossCheckStateCount(),u=e;u>=0&&a.get(t,u);)c[2]++,u--;if(u<0)return NaN;for(;u>=0&&!a.get(t,u)&&c[1]<=r;)c[1]++,u--;if(u<0||c[1]>r)return NaN;for(;u>=0&&a.get(t,u)&&c[0]<=r;)c[0]++,u--;if(c[0]>r)return NaN;for(u=e+1;u<o&&a.get(t,u);)c[2]++,u++;if(u===o)return NaN;for(;u<o&&!a.get(t,u)&&c[3]<r;)c[3]++,u++;if(u===o||c[3]>=r)return NaN;for(;u<o&&a.get(t,u)&&c[4]<r;)c[4]++,u++;if(c[4]>=r)return NaN;var h=c[0]+c[1]+c[2]+c[3]+c[4];return 5*Math.abs(h-i)>=2*i?NaN:n.foundPatternCross(c)?n.centerFromEnd(c,u):NaN},n.prototype.crossCheckHorizontal=function(e,t,r,i){for(var a=this.image,o=a.getWidth(),c=this.getCrossCheckStateCount(),u=e;u>=0&&a.get(u,t);)c[2]++,u--;if(u<0)return NaN;for(;u>=0&&!a.get(u,t)&&c[1]<=r;)c[1]++,u--;if(u<0||c[1]>r)return NaN;for(;u>=0&&a.get(u,t)&&c[0]<=r;)c[0]++,u--;if(c[0]>r)return NaN;for(u=e+1;u<o&&a.get(u,t);)c[2]++,u++;if(u===o)return NaN;for(;u<o&&!a.get(u,t)&&c[3]<r;)c[3]++,u++;if(u===o||c[3]>=r)return NaN;for(;u<o&&a.get(u,t)&&c[4]<r;)c[4]++,u++;if(c[4]>=r)return NaN;var h=c[0]+c[1]+c[2]+c[3]+c[4];return 5*Math.abs(h-i)>=i?NaN:n.foundPatternCross(c)?n.centerFromEnd(c,u):NaN},n.prototype.handlePossibleCenter=function(e,t,r,i){var a=e[0]+e[1]+e[2]+e[3]+e[4],o=n.centerFromEnd(e,r),c=this.crossCheckVertical(t,Math.floor(o),e[2],a);if(!isNaN(c)&&(o=this.crossCheckHorizontal(Math.floor(o),Math.floor(c),e[2],a),!isNaN(o)&&(!i||this.crossCheckDiagonal(Math.floor(c),Math.floor(o),e[2],a)))){for(var u=a/7,h=!1,p=this.possibleCenters,g=0,_=p.length;g<_;g++){var E=p[g];if(E.aboutEquals(u,c,o)){p[g]=E.combineEstimate(c,o,u),h=!0;break}}if(!h){var A=new aL(o,c,u);p.push(A),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(A)}return!0}return!1},n.prototype.findRowSkip=function(){var e,t,r=this.possibleCenters.length;if(r<=1)return 0;var i=null;try{for(var a=Hu(this.possibleCenters),o=a.next();!o.done;o=a.next()){var c=o.value;if(c.getCount()>=n.CENTER_QUORUM)if(i==null)i=c;else return this.hasSkipped=!0,Math.floor((Math.abs(i.getX()-c.getX())-Math.abs(i.getY()-c.getY()))/2)}}catch(u){e={error:u}}finally{try{o&&!o.done&&(t=a.return)&&t.call(a)}finally{if(e)throw e.error}}return 0},n.prototype.haveMultiplyConfirmedCenters=function(){var e,t,r,i,a=0,o=0,c=this.possibleCenters.length;try{for(var u=Hu(this.possibleCenters),h=u.next();!h.done;h=u.next()){var p=h.value;p.getCount()>=n.CENTER_QUORUM&&(a++,o+=p.getEstimatedModuleSize())}}catch(S){e={error:S}}finally{try{h&&!h.done&&(t=u.return)&&t.call(u)}finally{if(e)throw e.error}}if(a<3)return!1;var g=o/c,_=0;try{for(var E=Hu(this.possibleCenters),A=E.next();!A.done;A=E.next()){var p=A.value;_+=Math.abs(p.getEstimatedModuleSize()-g)}}catch(S){r={error:S}}finally{try{A&&!A.done&&(i=E.return)&&i.call(E)}finally{if(r)throw r.error}}return _<=.05*o},n.prototype.selectBestPatterns=function(){var e,t,r,i,a=this.possibleCenters.length;if(a<3)throw new ae;var o=this.possibleCenters,c;if(a>3){var u=0,h=0;try{for(var p=Hu(this.possibleCenters),g=p.next();!g.done;g=p.next()){var _=g.value,E=_.getEstimatedModuleSize();u+=E,h+=E*E}}catch(U){e={error:U}}finally{try{g&&!g.done&&(t=p.return)&&t.call(p)}finally{if(e)throw e.error}}c=u/a;var A=Math.sqrt(h/a-c*c);o.sort(function(U,G){var D=Math.abs(G.getEstimatedModuleSize()-c),w=Math.abs(U.getEstimatedModuleSize()-c);return D<w?-1:D>w?1:0});for(var S=Math.max(.2*c,A),O=0;O<o.length&&o.length>3;O++){var T=o[O];Math.abs(T.getEstimatedModuleSize()-c)>S&&(o.splice(O,1),O--)}}if(o.length>3){var u=0;try{for(var R=Hu(o),L=R.next();!L.done;L=R.next()){var z=L.value;u+=z.getEstimatedModuleSize()}}catch(G){r={error:G}}finally{try{L&&!L.done&&(i=R.return)&&i.call(R)}finally{if(r)throw r.error}}c=u/o.length,o.sort(function(G,D){if(D.getCount()===G.getCount()){var w=Math.abs(D.getEstimatedModuleSize()-c),I=Math.abs(G.getEstimatedModuleSize()-c);return w<I?1:w>I?-1:0}else return D.getCount()-G.getCount()}),o.splice(3)}return[o[0],o[1],o[2]]},n.CENTER_QUORUM=2,n.MIN_SKIP=3,n.MAX_MODULES=57,n})(),lL=(function(){function n(e){this.image=e}return n.prototype.getImage=function(){return this.image},n.prototype.getResultPointCallback=function(){return this.resultPointCallback},n.prototype.detect=function(e){this.resultPointCallback=e==null?null:e.get(kt.NEED_RESULT_POINT_CALLBACK);var t=new oL(this.image,this.resultPointCallback),r=t.find(e);return this.processFinderPatternInfo(r)},n.prototype.processFinderPatternInfo=function(e){var t=e.getTopLeft(),r=e.getTopRight(),i=e.getBottomLeft(),a=this.calculateModuleSize(t,r,i);if(a<1)throw new ae("No pattern found in proccess finder.");var o=n.computeDimension(t,r,i,a),c=Xo.getProvisionalVersionForDimension(o),u=c.getDimensionForVersion()-7,h=null;if(c.getAlignmentPatternCenters().length>0)for(var p=r.getX()-t.getX()+i.getX(),g=r.getY()-t.getY()+i.getY(),_=1-3/u,E=Math.floor(t.getX()+_*(p-t.getX())),A=Math.floor(t.getY()+_*(g-t.getY())),S=4;S<=16;S<<=1)try{h=this.findAlignmentInRegion(a,E,A,S);break}catch(L){if(!(L instanceof ae))throw L}var O=n.createTransform(t,r,i,h,o),T=n.sampleGrid(this.image,O,o),R;return h===null?R=[i,t,r]:R=[i,t,r,h],new Ry(T,R)},n.createTransform=function(e,t,r,i,a){var o=a-3.5,c,u,h,p;return i!==null?(c=i.getX(),u=i.getY(),h=o-3,p=h):(c=t.getX()-e.getX()+r.getX(),u=t.getY()-e.getY()+r.getY(),h=o,p=o),i3.quadrilateralToQuadrilateral(3.5,3.5,o,3.5,h,p,3.5,o,e.getX(),e.getY(),t.getX(),t.getY(),c,u,r.getX(),r.getY())},n.sampleGrid=function(e,t,r){var i=Oy.getInstance();return i.sampleGridWithTransform(e,r,r,t)},n.computeDimension=function(e,t,r,i){var a=ft.round(Se.distance(e,t)/i),o=ft.round(Se.distance(e,r)/i),c=Math.floor((a+o)/2)+7;switch(c&3){case 0:c++;break;case 2:c--;break;case 3:throw new ae("Dimensions could be not found.")}return c},n.prototype.calculateModuleSize=function(e,t,r){return(this.calculateModuleSizeOneWay(e,t)+this.calculateModuleSizeOneWay(e,r))/2},n.prototype.calculateModuleSizeOneWay=function(e,t){var r=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(e.getX()),Math.floor(e.getY()),Math.floor(t.getX()),Math.floor(t.getY())),i=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(t.getX()),Math.floor(t.getY()),Math.floor(e.getX()),Math.floor(e.getY()));return isNaN(r)?i/7:isNaN(i)?r/7:(r+i)/14},n.prototype.sizeOfBlackWhiteBlackRunBothWays=function(e,t,r,i){var a=this.sizeOfBlackWhiteBlackRun(e,t,r,i),o=1,c=e-(r-e);c<0?(o=e/(e-c),c=0):c>=this.image.getWidth()&&(o=(this.image.getWidth()-1-e)/(c-e),c=this.image.getWidth()-1);var u=Math.floor(t-(i-t)*o);return o=1,u<0?(o=t/(t-u),u=0):u>=this.image.getHeight()&&(o=(this.image.getHeight()-1-t)/(u-t),u=this.image.getHeight()-1),c=Math.floor(e+(c-e)*o),a+=this.sizeOfBlackWhiteBlackRun(e,t,c,u),a-1},n.prototype.sizeOfBlackWhiteBlackRun=function(e,t,r,i){var a=Math.abs(i-t)>Math.abs(r-e);if(a){var o=e;e=t,t=o,o=r,r=i,i=o}for(var c=Math.abs(r-e),u=Math.abs(i-t),h=-c/2,p=e<r?1:-1,g=t<i?1:-1,_=0,E=r+p,A=e,S=t;A!==E;A+=p){var O=a?S:A,T=a?A:S;if(_===1===this.image.get(O,T)){if(_===2)return ft.distance(A,S,e,t);_++}if(h+=u,h>0){if(S===i)break;S+=g,h-=c}}return _===2?ft.distance(r+p,i,e,t):NaN},n.prototype.findAlignmentInRegion=function(e,t,r,i){var a=Math.floor(i*e),o=Math.max(0,t-a),c=Math.min(this.image.getWidth()-1,t+a);if(c-o<e*3)throw new ae("Alignment top exceeds estimated module size.");var u=Math.max(0,r-a),h=Math.min(this.image.getHeight()-1,r+a);if(h-u<e*3)throw new ae("Alignment bottom exceeds estimated module size.");var p=new rL(this.image,o,u,c-o,h-u,e,this.resultPointCallback);return p.find()},n})(),S0=(function(){function n(){this.decoder=new Jk}return n.prototype.getDecoder=function(){return this.decoder},n.prototype.decode=function(e,t){var r,i;if(t!=null&&t.get(kt.PURE_BARCODE)!==void 0){var a=n.extractPureBits(e.getBlackMatrix());r=this.decoder.decodeBitMatrix(a,t),i=n.NO_POINTS}else{var o=new lL(e.getBlackMatrix()).detect(t);r=this.decoder.decodeBitMatrix(o.getBits(),t),i=o.getPoints()}r.getOther()instanceof u3&&r.getOther().applyMirroredCorrection(i);var c=new sr(r.getText(),r.getRawBytes(),void 0,i,Me.QR_CODE,void 0),u=r.getByteSegments();u!==null&&c.putMetadata(Jn.BYTE_SEGMENTS,u);var h=r.getECLevel();return h!==null&&c.putMetadata(Jn.ERROR_CORRECTION_LEVEL,h),r.hasStructuredAppend()&&(c.putMetadata(Jn.STRUCTURED_APPEND_SEQUENCE,r.getStructuredAppendSequenceNumber()),c.putMetadata(Jn.STRUCTURED_APPEND_PARITY,r.getStructuredAppendParity())),c},n.prototype.reset=function(){},n.extractPureBits=function(e){var t=e.getTopLeftOnBit(),r=e.getBottomRightOnBit();if(t===null||r===null)throw new ae;var i=this.moduleSize(t,e),a=t[1],o=r[1],c=t[0],u=r[0];if(c>=u||a>=o)throw new ae;if(o-a!==u-c&&(u=c+(o-a),u>=e.getWidth()))throw new ae;var h=Math.round((u-c+1)/i),p=Math.round((o-a+1)/i);if(h<=0||p<=0)throw new ae;if(p!==h)throw new ae;var g=Math.floor(i/2);a+=g,c+=g;var _=c+Math.floor((h-1)*i)-u;if(_>0){if(_>g)throw new ae;c-=_}var E=a+Math.floor((p-1)*i)-o;if(E>0){if(E>g)throw new ae;a-=E}for(var A=new pa(h,p),S=0;S<p;S++)for(var O=a+Math.floor(S*i),T=0;T<h;T++)e.get(c+Math.floor(T*i),O)&&A.set(T,S);return A},n.moduleSize=function(e,t){for(var r=t.getHeight(),i=t.getWidth(),a=e[0],o=e[1],c=!0,u=0;a<i&&o<r;){if(c!==t.get(a,o)){if(++u===5)break;c=!c}a++,o++}if(a===i||o===r)throw new ae;return(a-e[0])/7},n.NO_POINTS=new Array,n})(),cL=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},lt=(function(){function n(){}return n.prototype.PDF417Common=function(){},n.getBitCountSum=function(e){return ft.sum(e)},n.toIntArray=function(e){var t,r;if(e==null||!e.length)return n.EMPTY_INT_ARRAY;var i=new Int32Array(e.length),a=0;try{for(var o=cL(e),c=o.next();!c.done;c=o.next()){var u=c.value;i[a++]=u}}catch(h){t={error:h}}finally{try{c&&!c.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}return i},n.getCodeword=function(e){var t=Cn.binarySearch(n.SYMBOL_TABLE,e&262143);return t<0?-1:(n.CODEWORD_TABLE[t]-1)%n.NUMBER_OF_CODEWORDS},n.NUMBER_OF_CODEWORDS=929,n.MAX_CODEWORDS_IN_BARCODE=n.NUMBER_OF_CODEWORDS-1,n.MIN_ROWS_IN_BARCODE=3,n.MAX_ROWS_IN_BARCODE=90,n.MODULES_IN_CODEWORD=17,n.MODULES_IN_STOP_PATTERN=18,n.BARS_IN_MODULE=8,n.EMPTY_INT_ARRAY=new Int32Array([]),n.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),n.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]),n})(),uL=(function(){function n(e,t){this.bits=e,this.points=t}return n.prototype.getBits=function(){return this.bits},n.prototype.getPoints=function(){return this.points},n})(),fL=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},hL=(function(){function n(){}return n.detectMultiple=function(e,t,r){var i=e.getBlackMatrix(),a=n.detect(r,i);return a.length||(i=i.clone(),i.rotate180(),a=n.detect(r,i)),new uL(i,a)},n.detect=function(e,t){for(var r,i,a=new Array,o=0,c=0,u=!1;o<t.getHeight();){var h=n.findVertices(t,o,c);if(h[0]==null&&h[3]==null){if(!u)break;u=!1,c=0;try{for(var p=(r=void 0,fL(a)),g=p.next();!g.done;g=p.next()){var _=g.value;_[1]!=null&&(o=Math.trunc(Math.max(o,_[1].getY()))),_[3]!=null&&(o=Math.max(o,Math.trunc(_[3].getY())))}}catch(E){r={error:E}}finally{try{g&&!g.done&&(i=p.return)&&i.call(p)}finally{if(r)throw r.error}}o+=n.ROW_STEP;continue}if(u=!0,a.push(h),!e)break;h[2]!=null?(c=Math.trunc(h[2].getX()),o=Math.trunc(h[2].getY())):(c=Math.trunc(h[4].getX()),o=Math.trunc(h[4].getY()))}return a},n.findVertices=function(e,t,r){var i=e.getHeight(),a=e.getWidth(),o=new Array(8);return n.copyToResult(o,n.findRowsWithPattern(e,i,a,t,r,n.START_PATTERN),n.INDEXES_START_PATTERN),o[4]!=null&&(r=Math.trunc(o[4].getX()),t=Math.trunc(o[4].getY())),n.copyToResult(o,n.findRowsWithPattern(e,i,a,t,r,n.STOP_PATTERN),n.INDEXES_STOP_PATTERN),o},n.copyToResult=function(e,t,r){for(var i=0;i<r.length;i++)e[r[i]]=t[i]},n.findRowsWithPattern=function(e,t,r,i,a,o){for(var c=new Array(4),u=!1,h=new Int32Array(o.length);i<t;i+=n.ROW_STEP){var p=n.findGuardPattern(e,a,i,r,!1,o,h);if(p!=null){for(;i>0;){var g=n.findGuardPattern(e,a,--i,r,!1,o,h);if(g!=null)p=g;else{i++;break}}c[0]=new Se(p[0],i),c[1]=new Se(p[1],i),u=!0;break}}var _=i+1;if(u){for(var E=0,g=Int32Array.from([Math.trunc(c[0].getX()),Math.trunc(c[1].getX())]);_<t;_++){var p=n.findGuardPattern(e,g[0],_,r,!1,o,h);if(p!=null&&Math.abs(g[0]-p[0])<n.MAX_PATTERN_DRIFT&&Math.abs(g[1]-p[1])<n.MAX_PATTERN_DRIFT)g=p,E=0;else{if(E>n.SKIPPED_ROW_COUNT_MAX)break;E++}}_-=E+1,c[2]=new Se(g[0],_),c[3]=new Se(g[1],_)}return _-i<n.BARCODE_MIN_HEIGHT&&Cn.fill(c,null),c},n.findGuardPattern=function(e,t,r,i,a,o,c){Cn.fillWithin(c,0,c.length,0);for(var u=t,h=0;e.get(u,r)&&u>0&&h++<n.MAX_PIXEL_DRIFT;)u--;for(var p=u,g=0,_=o.length,E=a;p<i;p++){var A=e.get(p,r);if(A!==E)c[g]++;else{if(g===_-1){if(n.patternMatchVariance(c,o,n.MAX_INDIVIDUAL_VARIANCE)<n.MAX_AVG_VARIANCE)return new Int32Array([u,p]);u+=c[0]+c[1],Pt.arraycopy(c,2,c,0,g-1),c[g-1]=0,c[g]=0,g--}else g++;c[g]=1,E=!E}}return g===_-1&&n.patternMatchVariance(c,o,n.MAX_INDIVIDUAL_VARIANCE)<n.MAX_AVG_VARIANCE?new Int32Array([u,p-1]):null},n.patternMatchVariance=function(e,t,r){for(var i=e.length,a=0,o=0,c=0;c<i;c++)a+=e[c],o+=t[c];if(a<o)return 1/0;var u=a/o;r*=u;for(var h=0,p=0;p<i;p++){var g=e[p],_=t[p]*u,E=g>_?g-_:_-g;if(E>r)return 1/0;h+=E}return h/a},n.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),n.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),n.MAX_AVG_VARIANCE=.42,n.MAX_INDIVIDUAL_VARIANCE=.8,n.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),n.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),n.MAX_PIXEL_DRIFT=3,n.MAX_PATTERN_DRIFT=5,n.SKIPPED_ROW_COUNT_MAX=25,n.ROW_STEP=5,n.BARCODE_MIN_HEIGHT=10,n})(),dL=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Go=(function(){function n(e,t){if(t.length===0)throw new Pe;this.field=e;var r=t.length;if(r>1&&t[0]===0){for(var i=1;i<r&&t[i]===0;)i++;i===r?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(r-i),Pt.arraycopy(t,i,this.coefficients,0,this.coefficients.length))}else this.coefficients=t}return n.prototype.getCoefficients=function(){return this.coefficients},n.prototype.getDegree=function(){return this.coefficients.length-1},n.prototype.isZero=function(){return this.coefficients[0]===0},n.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},n.prototype.evaluateAt=function(e){var t,r;if(e===0)return this.getCoefficient(0);if(e===1){var i=0;try{for(var a=dL(this.coefficients),o=a.next();!o.done;o=a.next()){var c=o.value;i=this.field.add(i,c)}}catch(g){t={error:g}}finally{try{o&&!o.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}return i}for(var u=this.coefficients[0],h=this.coefficients.length,p=1;p<h;p++)u=this.field.add(this.field.multiply(e,u),this.coefficients[p]);return u},n.prototype.add=function(e){if(!this.field.equals(e.field))throw new Pe("ModulusPolys do not have same ModulusGF field");if(this.isZero())return e;if(e.isZero())return this;var t=this.coefficients,r=e.coefficients;if(t.length>r.length){var i=t;t=r,r=i}var a=new Int32Array(r.length),o=r.length-t.length;Pt.arraycopy(r,0,a,0,o);for(var c=o;c<r.length;c++)a[c]=this.field.add(t[c-o],r[c]);return new n(this.field,a)},n.prototype.subtract=function(e){if(!this.field.equals(e.field))throw new Pe("ModulusPolys do not have same ModulusGF field");return e.isZero()?this:this.add(e.negative())},n.prototype.multiply=function(e){return e instanceof n?this.multiplyOther(e):this.multiplyScalar(e)},n.prototype.multiplyOther=function(e){if(!this.field.equals(e.field))throw new Pe("ModulusPolys do not have same ModulusGF field");if(this.isZero()||e.isZero())return new n(this.field,new Int32Array([0]));for(var t=this.coefficients,r=t.length,i=e.coefficients,a=i.length,o=new Int32Array(r+a-1),c=0;c<r;c++)for(var u=t[c],h=0;h<a;h++)o[c+h]=this.field.add(o[c+h],this.field.multiply(u,i[h]));return new n(this.field,o)},n.prototype.negative=function(){for(var e=this.coefficients.length,t=new Int32Array(e),r=0;r<e;r++)t[r]=this.field.subtract(0,this.coefficients[r]);return new n(this.field,t)},n.prototype.multiplyScalar=function(e){if(e===0)return new n(this.field,new Int32Array([0]));if(e===1)return this;for(var t=this.coefficients.length,r=new Int32Array(t),i=0;i<t;i++)r[i]=this.field.multiply(this.coefficients[i],e);return new n(this.field,r)},n.prototype.multiplyByMonomial=function(e,t){if(e<0)throw new Pe;if(t===0)return new n(this.field,new Int32Array([0]));for(var r=this.coefficients.length,i=new Int32Array(r+e),a=0;a<r;a++)i[a]=this.field.multiply(this.coefficients[a],t);return new n(this.field,i)},n.prototype.toString=function(){for(var e=new $e,t=this.getDegree();t>=0;t--){var r=this.getCoefficient(t);r!==0&&(r<0?(e.append(" - "),r=-r):e.length()>0&&e.append(" + "),(t===0||r!==1)&&e.append(r),t!==0&&(t===1?e.append("x"):(e.append("x^"),e.append(t))))}return e.toString()},n})(),pL=(function(){function n(){}return n.prototype.add=function(e,t){return(e+t)%this.modulus},n.prototype.subtract=function(e,t){return(this.modulus+e-t)%this.modulus},n.prototype.exp=function(e){return this.expTable[e]},n.prototype.log=function(e){if(e===0)throw new Pe;return this.logTable[e]},n.prototype.inverse=function(e){if(e===0)throw new r3;return this.expTable[this.modulus-this.logTable[e]-1]},n.prototype.multiply=function(e,t){return e===0||t===0?0:this.expTable[(this.logTable[e]+this.logTable[t])%(this.modulus-1)]},n.prototype.getSize=function(){return this.modulus},n.prototype.equals=function(e){return e===this},n})(),mL=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),gL=(function(n){mL(e,n);function e(t,r){var i=n.call(this)||this;i.modulus=t,i.expTable=new Int32Array(t),i.logTable=new Int32Array(t);for(var a=1,o=0;o<t;o++)i.expTable[o]=a,a=a*r%t;for(var o=0;o<t-1;o++)i.logTable[i.expTable[o]]=o;return i.zero=new Go(i,new Int32Array([0])),i.one=new Go(i,new Int32Array([1])),i}return e.prototype.getZero=function(){return this.zero},e.prototype.getOne=function(){return this.one},e.prototype.buildMonomial=function(t,r){if(t<0)throw new Pe;if(r===0)return this.zero;var i=new Int32Array(t+1);return i[0]=r,new Go(this,i)},e.PDF417_GF=new e(lt.NUMBER_OF_CODEWORDS,3),e})(pL),vL=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},yL=(function(){function n(){this.field=gL.PDF417_GF}return n.prototype.decode=function(e,t,r){for(var i,a,o=new Go(this.field,e),c=new Int32Array(t),u=!1,h=t;h>0;h--){var p=o.evaluateAt(this.field.exp(h));c[t-h]=p,p!==0&&(u=!0)}if(!u)return 0;var g=this.field.getOne();if(r!=null)try{for(var _=vL(r),E=_.next();!E.done;E=_.next()){var A=E.value,S=this.field.exp(e.length-1-A),O=new Go(this.field,new Int32Array([this.field.subtract(0,S),1]));g=g.multiply(O)}}catch(w){i={error:w}}finally{try{E&&!E.done&&(a=_.return)&&a.call(_)}finally{if(i)throw i.error}}for(var T=new Go(this.field,c),R=this.runEuclideanAlgorithm(this.field.buildMonomial(t,1),T,t),L=R[0],z=R[1],U=this.findErrorLocations(L),G=this.findErrorMagnitudes(z,L,U),h=0;h<U.length;h++){var D=e.length-1-this.field.log(U[h]);if(D<0)throw _n.getChecksumInstance();e[D]=this.field.subtract(e[D],G[h])}return U.length},n.prototype.runEuclideanAlgorithm=function(e,t,r){if(e.getDegree()<t.getDegree()){var i=e;e=t,t=i}for(var a=e,o=t,c=this.field.getZero(),u=this.field.getOne();o.getDegree()>=Math.round(r/2);){var h=a,p=c;if(a=o,c=u,a.isZero())throw _n.getChecksumInstance();o=h;for(var g=this.field.getZero(),_=a.getCoefficient(a.getDegree()),E=this.field.inverse(_);o.getDegree()>=a.getDegree()&&!o.isZero();){var A=o.getDegree()-a.getDegree(),S=this.field.multiply(o.getCoefficient(o.getDegree()),E);g=g.add(this.field.buildMonomial(A,S)),o=o.subtract(a.multiplyByMonomial(A,S))}u=g.multiply(c).subtract(p).negative()}var O=u.getCoefficient(0);if(O===0)throw _n.getChecksumInstance();var T=this.field.inverse(O),R=u.multiply(T),L=o.multiply(T);return[R,L]},n.prototype.findErrorLocations=function(e){for(var t=e.getDegree(),r=new Int32Array(t),i=0,a=1;a<this.field.getSize()&&i<t;a++)e.evaluateAt(a)===0&&(r[i]=this.field.inverse(a),i++);if(i!==t)throw _n.getChecksumInstance();return r},n.prototype.findErrorMagnitudes=function(e,t,r){for(var i=t.getDegree(),a=new Int32Array(i),o=1;o<=i;o++)a[i-o]=this.field.multiply(o,t.getCoefficient(o));for(var c=new Go(this.field,a),u=r.length,h=new Int32Array(u),o=0;o<u;o++){var p=this.field.inverse(r[o]),g=this.field.subtract(0,e.evaluateAt(p)),_=this.field.inverse(c.evaluateAt(p));h[o]=this.field.multiply(g,_)}return h},n})(),rv=(function(){function n(e,t,r,i,a){e instanceof n?this.constructor_2(e):this.constructor_1(e,t,r,i,a)}return n.prototype.constructor_1=function(e,t,r,i,a){var o=t==null||r==null,c=i==null||a==null;if(o&&c)throw new ae;o?(t=new Se(0,i.getY()),r=new Se(0,a.getY())):c&&(i=new Se(e.getWidth()-1,t.getY()),a=new Se(e.getWidth()-1,r.getY())),this.image=e,this.topLeft=t,this.bottomLeft=r,this.topRight=i,this.bottomRight=a,this.minX=Math.trunc(Math.min(t.getX(),r.getX())),this.maxX=Math.trunc(Math.max(i.getX(),a.getX())),this.minY=Math.trunc(Math.min(t.getY(),i.getY())),this.maxY=Math.trunc(Math.max(r.getY(),a.getY()))},n.prototype.constructor_2=function(e){this.image=e.image,this.topLeft=e.getTopLeft(),this.bottomLeft=e.getBottomLeft(),this.topRight=e.getTopRight(),this.bottomRight=e.getBottomRight(),this.minX=e.getMinX(),this.maxX=e.getMaxX(),this.minY=e.getMinY(),this.maxY=e.getMaxY()},n.merge=function(e,t){return e==null?t:t==null?e:new n(e.image,e.topLeft,e.bottomLeft,t.topRight,t.bottomRight)},n.prototype.addMissingRows=function(e,t,r){var i=this.topLeft,a=this.bottomLeft,o=this.topRight,c=this.bottomRight;if(e>0){var u=r?this.topLeft:this.topRight,h=Math.trunc(u.getY()-e);h<0&&(h=0);var p=new Se(u.getX(),h);r?i=p:o=p}if(t>0){var g=r?this.bottomLeft:this.bottomRight,_=Math.trunc(g.getY()+t);_>=this.image.getHeight()&&(_=this.image.getHeight()-1);var E=new Se(g.getX(),_);r?a=E:c=E}return new n(this.image,i,a,o,c)},n.prototype.getMinX=function(){return this.minX},n.prototype.getMaxX=function(){return this.maxX},n.prototype.getMinY=function(){return this.minY},n.prototype.getMaxY=function(){return this.maxY},n.prototype.getTopLeft=function(){return this.topLeft},n.prototype.getTopRight=function(){return this.topRight},n.prototype.getBottomLeft=function(){return this.bottomLeft},n.prototype.getBottomRight=function(){return this.bottomRight},n})(),_L=(function(){function n(e,t,r,i){this.columnCount=e,this.errorCorrectionLevel=i,this.rowCountUpperPart=t,this.rowCountLowerPart=r,this.rowCount=t+r}return n.prototype.getColumnCount=function(){return this.columnCount},n.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},n.prototype.getRowCount=function(){return this.rowCount},n.prototype.getRowCountUpperPart=function(){return this.rowCountUpperPart},n.prototype.getRowCountLowerPart=function(){return this.rowCountLowerPart},n})(),My=(function(){function n(){this.buffer=""}return n.form=function(e,t){var r=-1;function i(o,c,u,h,p,g){if(o==="%%")return"%";if(t[++r]!==void 0){o=h?parseInt(h.substr(1)):void 0;var _=p?parseInt(p.substr(1)):void 0,E;switch(g){case"s":E=t[r];break;case"c":E=t[r][0];break;case"f":E=parseFloat(t[r]).toFixed(o);break;case"p":E=parseFloat(t[r]).toPrecision(o);break;case"e":E=parseFloat(t[r]).toExponential(o);break;case"x":E=parseInt(t[r]).toString(_||16);break;case"d":E=parseFloat(parseInt(t[r],_||10).toPrecision(o)).toFixed(0);break}E=typeof E=="object"?JSON.stringify(E):(+E).toString(_);for(var A=parseInt(u),S=u&&u[0]+""=="0"?"0":" ";E.length<A;)E=c!==void 0?E+S:S+E;return E}}var a=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(a,i)},n.prototype.format=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this.buffer+=n.form(e,t)},n.prototype.toString=function(){return this.buffer},n})(),xL=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},f3=(function(){function n(e){this.boundingBox=new rv(e),this.codewords=new Array(e.getMaxY()-e.getMinY()+1)}return n.prototype.getCodewordNearby=function(e){var t=this.getCodeword(e);if(t!=null)return t;for(var r=1;r<n.MAX_NEARBY_DISTANCE;r++){var i=this.imageRowToCodewordIndex(e)-r;if(i>=0&&(t=this.codewords[i],t!=null)||(i=this.imageRowToCodewordIndex(e)+r,i<this.codewords.length&&(t=this.codewords[i],t!=null)))return t}return null},n.prototype.imageRowToCodewordIndex=function(e){return e-this.boundingBox.getMinY()},n.prototype.setCodeword=function(e,t){this.codewords[this.imageRowToCodewordIndex(e)]=t},n.prototype.getCodeword=function(e){return this.codewords[this.imageRowToCodewordIndex(e)]},n.prototype.getBoundingBox=function(){return this.boundingBox},n.prototype.getCodewords=function(){return this.codewords},n.prototype.toString=function(){var e,t,r=new My,i=0;try{for(var a=xL(this.codewords),o=a.next();!o.done;o=a.next()){var c=o.value;if(c==null){r.format("%3d:    |   %n",i++);continue}r.format("%3d: %3d|%3d%n",i++,c.getRowNumber(),c.getValue())}}catch(u){e={error:u}}finally{try{o&&!o.done&&(t=a.return)&&t.call(a)}finally{if(e)throw e.error}}return r.toString()},n.MAX_NEARBY_DISTANCE=5,n})(),EL=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},wL=function(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,a=[],o;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(c){o={error:c}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(o)throw o.error}}return a},tf=(function(){function n(){this.values=new Map}return n.prototype.setValue=function(e){e=Math.trunc(e);var t=this.values.get(e);t==null&&(t=0),t++,this.values.set(e,t)},n.prototype.getValue=function(){var e,t,r=-1,i=new Array,a=function(g,_){var E={getKey:function(){return g},getValue:function(){return _}};E.getValue()>r?(r=E.getValue(),i=[],i.push(E.getKey())):E.getValue()===r&&i.push(E.getKey())};try{for(var o=EL(this.values.entries()),c=o.next();!c.done;c=o.next()){var u=wL(c.value,2),h=u[0],p=u[1];a(h,p)}}catch(g){e={error:g}}finally{try{c&&!c.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}return lt.toIntArray(i)},n.prototype.getConfidence=function(e){return this.values.get(e)},n})(),AL=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Vm=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},OA=(function(n){AL(e,n);function e(t,r){var i=n.call(this,t)||this;return i._isLeft=r,i}return e.prototype.setRowNumbers=function(){var t,r;try{for(var i=Vm(this.getCodewords()),a=i.next();!a.done;a=i.next()){var o=a.value;o?.setRowNumberAsRowIndicatorColumn()}}catch(c){t={error:c}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}},e.prototype.adjustCompleteIndicatorColumnRowNumbers=function(t){var r=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(r,t);for(var i=this.getBoundingBox(),a=this._isLeft?i.getTopLeft():i.getTopRight(),o=this._isLeft?i.getBottomLeft():i.getBottomRight(),c=this.imageRowToCodewordIndex(Math.trunc(a.getY())),u=this.imageRowToCodewordIndex(Math.trunc(o.getY())),h=-1,p=1,g=0,_=c;_<u;_++)if(r[_]!=null){var E=r[_],A=E.getRowNumber()-h;if(A===0)g++;else if(A===1)p=Math.max(p,g),g=1,h=E.getRowNumber();else if(A<0||E.getRowNumber()>=t.getRowCount()||A>_)r[_]=null;else{var S=void 0;p>2?S=(p-2)*A:S=A;for(var O=S>=_,T=1;T<=S&&!O;T++)O=r[_-T]!=null;O?r[_]=null:(h=E.getRowNumber(),g=1)}}},e.prototype.getRowHeights=function(){var t,r,i=this.getBarcodeMetadata();if(i==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(i);var a=new Int32Array(i.getRowCount());try{for(var o=Vm(this.getCodewords()),c=o.next();!c.done;c=o.next()){var u=c.value;if(u!=null){var h=u.getRowNumber();if(h>=a.length)continue;a[h]++}}}catch(p){t={error:p}}finally{try{c&&!c.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}return a},e.prototype.adjustIncompleteIndicatorColumnRowNumbers=function(t){for(var r=this.getBoundingBox(),i=this._isLeft?r.getTopLeft():r.getTopRight(),a=this._isLeft?r.getBottomLeft():r.getBottomRight(),o=this.imageRowToCodewordIndex(Math.trunc(i.getY())),c=this.imageRowToCodewordIndex(Math.trunc(a.getY())),u=this.getCodewords(),h=-1,p=o;p<c;p++)if(u[p]!=null){var g=u[p];g.setRowNumberAsRowIndicatorColumn();var _=g.getRowNumber()-h;_===0||(_===1?h=g.getRowNumber():g.getRowNumber()>=t.getRowCount()?u[p]=null:h=g.getRowNumber())}},e.prototype.getBarcodeMetadata=function(){var t,r,i=this.getCodewords(),a=new tf,o=new tf,c=new tf,u=new tf;try{for(var h=Vm(i),p=h.next();!p.done;p=h.next()){var g=p.value;if(g!=null){g.setRowNumberAsRowIndicatorColumn();var _=g.getValue()%30,E=g.getRowNumber();switch(this._isLeft||(E+=2),E%3){case 0:o.setValue(_*3+1);break;case 1:u.setValue(_/3),c.setValue(_%3);break;case 2:a.setValue(_+1);break}}}}catch(S){t={error:S}}finally{try{p&&!p.done&&(r=h.return)&&r.call(h)}finally{if(t)throw t.error}}if(a.getValue().length===0||o.getValue().length===0||c.getValue().length===0||u.getValue().length===0||a.getValue()[0]<1||o.getValue()[0]+c.getValue()[0]<lt.MIN_ROWS_IN_BARCODE||o.getValue()[0]+c.getValue()[0]>lt.MAX_ROWS_IN_BARCODE)return null;var A=new _L(a.getValue()[0],o.getValue()[0],c.getValue()[0],u.getValue()[0]);return this.removeIncorrectCodewords(i,A),A},e.prototype.removeIncorrectCodewords=function(t,r){for(var i=0;i<t.length;i++){var a=t[i];if(t[i]!=null){var o=a.getValue()%30,c=a.getRowNumber();if(c>r.getRowCount()){t[i]=null;continue}switch(this._isLeft||(c+=2),c%3){case 0:o*3+1!==r.getRowCountUpperPart()&&(t[i]=null);break;case 1:(Math.trunc(o/3)!==r.getErrorCorrectionLevel()||o%3!==r.getRowCountLowerPart())&&(t[i]=null);break;case 2:o+1!==r.getColumnCount()&&(t[i]=null);break}}}},e.prototype.isLeft=function(){return this._isLeft},e.prototype.toString=function(){return"IsLeft: "+this._isLeft+`
`+n.prototype.toString.call(this)},e})(f3),bL=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},SL=(function(){function n(e,t){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=e,this.barcodeColumnCount=e.getColumnCount(),this.boundingBox=t,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}return n.prototype.getDetectionResultColumns=function(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);var e=lt.MAX_CODEWORDS_IN_BARCODE,t;do t=e,e=this.adjustRowNumbersAndGetCount();while(e>0&&e<t);return this.detectionResultColumns},n.prototype.adjustIndicatorColumnRowNumbers=function(e){e?.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)},n.prototype.adjustRowNumbersAndGetCount=function(){var e=this.adjustRowNumbersByRow();if(e===0)return 0;for(var t=1;t<this.barcodeColumnCount+1;t++)for(var r=this.detectionResultColumns[t].getCodewords(),i=0;i<r.length;i++)r[i]!=null&&(r[i].hasValidRowNumber()||this.adjustRowNumbers(t,i,r));return e},n.prototype.adjustRowNumbersByRow=function(){this.adjustRowNumbersFromBothRI();var e=this.adjustRowNumbersFromLRI();return e+this.adjustRowNumbersFromRRI()},n.prototype.adjustRowNumbersFromBothRI=function(){if(!(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)){for(var e=this.detectionResultColumns[0].getCodewords(),t=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),r=0;r<e.length;r++)if(e[r]!=null&&t[r]!=null&&e[r].getRowNumber()===t[r].getRowNumber())for(var i=1;i<=this.barcodeColumnCount;i++){var a=this.detectionResultColumns[i].getCodewords()[r];a!=null&&(a.setRowNumber(e[r].getRowNumber()),a.hasValidRowNumber()||(this.detectionResultColumns[i].getCodewords()[r]=null))}}},n.prototype.adjustRowNumbersFromRRI=function(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;for(var e=0,t=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),r=0;r<t.length;r++)if(t[r]!=null)for(var i=t[r].getRowNumber(),a=0,o=this.barcodeColumnCount+1;o>0&&a<this.ADJUST_ROW_NUMBER_SKIP;o--){var c=this.detectionResultColumns[o].getCodewords()[r];c!=null&&(a=n.adjustRowNumberIfValid(i,a,c),c.hasValidRowNumber()||e++)}return e},n.prototype.adjustRowNumbersFromLRI=function(){if(this.detectionResultColumns[0]==null)return 0;for(var e=0,t=this.detectionResultColumns[0].getCodewords(),r=0;r<t.length;r++)if(t[r]!=null)for(var i=t[r].getRowNumber(),a=0,o=1;o<this.barcodeColumnCount+1&&a<this.ADJUST_ROW_NUMBER_SKIP;o++){var c=this.detectionResultColumns[o].getCodewords()[r];c!=null&&(a=n.adjustRowNumberIfValid(i,a,c),c.hasValidRowNumber()||e++)}return e},n.adjustRowNumberIfValid=function(e,t,r){return r==null||r.hasValidRowNumber()||(r.isValidRowNumber(e)?(r.setRowNumber(e),t=0):++t),t},n.prototype.adjustRowNumbers=function(e,t,r){var i,a;if(this.detectionResultColumns[e-1]!=null){var o=r[t],c=this.detectionResultColumns[e-1].getCodewords(),u=c;this.detectionResultColumns[e+1]!=null&&(u=this.detectionResultColumns[e+1].getCodewords());var h=new Array(14);h[2]=c[t],h[3]=u[t],t>0&&(h[0]=r[t-1],h[4]=c[t-1],h[5]=u[t-1]),t>1&&(h[8]=r[t-2],h[10]=c[t-2],h[11]=u[t-2]),t<r.length-1&&(h[1]=r[t+1],h[6]=c[t+1],h[7]=u[t+1]),t<r.length-2&&(h[9]=r[t+2],h[12]=c[t+2],h[13]=u[t+2]);try{for(var p=bL(h),g=p.next();!g.done;g=p.next()){var _=g.value;if(n.adjustRowNumber(o,_))return}}catch(E){i={error:E}}finally{try{g&&!g.done&&(a=p.return)&&a.call(p)}finally{if(i)throw i.error}}}},n.adjustRowNumber=function(e,t){return t==null?!1:t.hasValidRowNumber()&&t.getBucket()===e.getBucket()?(e.setRowNumber(t.getRowNumber()),!0):!1},n.prototype.getBarcodeColumnCount=function(){return this.barcodeColumnCount},n.prototype.getBarcodeRowCount=function(){return this.barcodeMetadata.getRowCount()},n.prototype.getBarcodeECLevel=function(){return this.barcodeMetadata.getErrorCorrectionLevel()},n.prototype.setBoundingBox=function(e){this.boundingBox=e},n.prototype.getBoundingBox=function(){return this.boundingBox},n.prototype.setDetectionResultColumn=function(e,t){this.detectionResultColumns[e]=t},n.prototype.getDetectionResultColumn=function(e){return this.detectionResultColumns[e]},n.prototype.toString=function(){var e=this.detectionResultColumns[0];e==null&&(e=this.detectionResultColumns[this.barcodeColumnCount+1]);for(var t=new My,r=0;r<e.getCodewords().length;r++){t.format("CW %3d:",r);for(var i=0;i<this.barcodeColumnCount+2;i++){if(this.detectionResultColumns[i]==null){t.format("    |   ");continue}var a=this.detectionResultColumns[i].getCodewords()[r];if(a==null){t.format("    |   ");continue}t.format(" %3d|%3d",a.getRowNumber(),a.getValue())}t.format("%n")}return t.toString()},n})(),CL=(function(){function n(e,t,r,i){this.rowNumber=n.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(e),this.endX=Math.trunc(t),this.bucket=Math.trunc(r),this.value=Math.trunc(i)}return n.prototype.hasValidRowNumber=function(){return this.isValidRowNumber(this.rowNumber)},n.prototype.isValidRowNumber=function(e){return e!==n.BARCODE_ROW_UNKNOWN&&this.bucket===e%3*3},n.prototype.setRowNumberAsRowIndicatorColumn=function(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))},n.prototype.getWidth=function(){return this.endX-this.startX},n.prototype.getStartX=function(){return this.startX},n.prototype.getEndX=function(){return this.endX},n.prototype.getBucket=function(){return this.bucket},n.prototype.getValue=function(){return this.value},n.prototype.getRowNumber=function(){return this.rowNumber},n.prototype.setRowNumber=function(e){this.rowNumber=e},n.prototype.toString=function(){return this.rowNumber+"|"+this.value},n.BARCODE_ROW_UNKNOWN=-1,n})(),TL=(function(){function n(){}return n.initialize=function(){for(var e=0;e<lt.SYMBOL_TABLE.length;e++)for(var t=lt.SYMBOL_TABLE[e],r=t&1,i=0;i<lt.BARS_IN_MODULE;i++){for(var a=0;(t&1)===r;)a+=1,t>>=1;r=t&1,n.RATIOS_TABLE[e]||(n.RATIOS_TABLE[e]=new Array(lt.BARS_IN_MODULE)),n.RATIOS_TABLE[e][lt.BARS_IN_MODULE-i-1]=Math.fround(a/lt.MODULES_IN_CODEWORD)}this.bSymbolTableReady=!0},n.getDecodedValue=function(e){var t=n.getDecodedCodewordValue(n.sampleBitCounts(e));return t!==-1?t:n.getClosestDecodedValue(e)},n.sampleBitCounts=function(e){for(var t=ft.sum(e),r=new Int32Array(lt.BARS_IN_MODULE),i=0,a=0,o=0;o<lt.MODULES_IN_CODEWORD;o++){var c=t/(2*lt.MODULES_IN_CODEWORD)+o*t/lt.MODULES_IN_CODEWORD;a+e[i]<=c&&(a+=e[i],i++),r[i]++}return r},n.getDecodedCodewordValue=function(e){var t=n.getBitValue(e);return lt.getCodeword(t)===-1?-1:t},n.getBitValue=function(e){for(var t=0,r=0;r<e.length;r++)for(var i=0;i<e[r];i++)t=t<<1|(r%2===0?1:0);return Math.trunc(t)},n.getClosestDecodedValue=function(e){var t=ft.sum(e),r=new Array(lt.BARS_IN_MODULE);if(t>1)for(var i=0;i<r.length;i++)r[i]=Math.fround(e[i]/t);var a=ev.MAX_VALUE,o=-1;this.bSymbolTableReady||n.initialize();for(var c=0;c<n.RATIOS_TABLE.length;c++){for(var u=0,h=n.RATIOS_TABLE[c],p=0;p<lt.BARS_IN_MODULE;p++){var g=Math.fround(h[p]-r[p]);if(u+=Math.fround(g*g),u>=a)break}u<a&&(a=u,o=lt.SYMBOL_TABLE[c])}return o},n.bSymbolTableReady=!1,n.RATIOS_TABLE=new Array(lt.SYMBOL_TABLE.length).map(function(e){return new Array(lt.BARS_IN_MODULE)}),n})(),IL=(function(){function n(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}return n.prototype.getSegmentIndex=function(){return this.segmentIndex},n.prototype.setSegmentIndex=function(e){this.segmentIndex=e},n.prototype.getFileId=function(){return this.fileId},n.prototype.setFileId=function(e){this.fileId=e},n.prototype.getOptionalData=function(){return this.optionalData},n.prototype.setOptionalData=function(e){this.optionalData=e},n.prototype.isLastSegment=function(){return this.lastSegment},n.prototype.setLastSegment=function(e){this.lastSegment=e},n.prototype.getSegmentCount=function(){return this.segmentCount},n.prototype.setSegmentCount=function(e){this.segmentCount=e},n.prototype.getSender=function(){return this.sender||null},n.prototype.setSender=function(e){this.sender=e},n.prototype.getAddressee=function(){return this.addressee||null},n.prototype.setAddressee=function(e){this.addressee=e},n.prototype.getFileName=function(){return this.fileName},n.prototype.setFileName=function(e){this.fileName=e},n.prototype.getFileSize=function(){return this.fileSize},n.prototype.setFileSize=function(e){this.fileSize=e},n.prototype.getChecksum=function(){return this.checksum},n.prototype.setChecksum=function(e){this.checksum=e},n.prototype.getTimestamp=function(){return this.timestamp},n.prototype.setTimestamp=function(e){this.timestamp=e},n})(),DA=(function(){function n(){}return n.parseLong=function(e,t){return t===void 0&&(t=void 0),parseInt(e,t)},n})(),NL=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),RL=(function(n){NL(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="NullPointerException",e})(Tr),OL=(function(){function n(){}return n.prototype.writeBytes=function(e){this.writeBytesOffset(e,0,e.length)},n.prototype.writeBytesOffset=function(e,t,r){if(e==null)throw new RL;if(t<0||t>e.length||r<0||t+r>e.length||t+r<0)throw new Ny;if(r===0)return;for(var i=0;i<r;i++)this.write(e[t+i])},n.prototype.flush=function(){},n.prototype.close=function(){},n})(),DL=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),ML=(function(n){DL(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e})(Tr),PL=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),kL=(function(n){PL(e,n);function e(t){t===void 0&&(t=32);var r=n.call(this)||this;if(r.count=0,t<0)throw new Pe("Negative initial size: "+t);return r.buf=new Uint8Array(t),r}return e.prototype.ensureCapacity=function(t){t-this.buf.length>0&&this.grow(t)},e.prototype.grow=function(t){var r=this.buf.length,i=r<<1;if(i-t<0&&(i=t),i<0){if(t<0)throw new ML;i=Xe.MAX_VALUE}this.buf=Cn.copyOfUint8Array(this.buf,i)},e.prototype.write=function(t){this.ensureCapacity(this.count+1),this.buf[this.count]=t,this.count+=1},e.prototype.writeBytesOffset=function(t,r,i){if(r<0||r>t.length||i<0||r+i-t.length>0)throw new Ny;this.ensureCapacity(this.count+i),Pt.arraycopy(t,r,this.buf,this.count,i),this.count+=i},e.prototype.writeTo=function(t){t.writeBytesOffset(this.buf,0,this.count)},e.prototype.reset=function(){this.count=0},e.prototype.toByteArray=function(){return Cn.copyOfUint8Array(this.buf,this.count)},e.prototype.size=function(){return this.count},e.prototype.toString=function(t){return t?typeof t=="string"?this.toString_string(t):this.toString_number(t):this.toString_void()},e.prototype.toString_void=function(){return new String(this.buf).toString()},e.prototype.toString_string=function(t){return new String(this.buf).toString()},e.prototype.toString_number=function(t){return new String(this.buf).toString()},e.prototype.close=function(){},e})(OL),Nt;(function(n){n[n.ALPHA=0]="ALPHA",n[n.LOWER=1]="LOWER",n[n.MIXED=2]="MIXED",n[n.PUNCT=3]="PUNCT",n[n.ALPHA_SHIFT=4]="ALPHA_SHIFT",n[n.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(Nt||(Nt={}));function h3(){if(typeof window<"u")return window.BigInt||null;if(typeof global<"u")return global.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}var Id;function Ds(n){if(typeof Id>"u"&&(Id=h3()),Id===null)throw new Error("BigInt is not supported!");return Id(n)}function LL(){var n=[];n[0]=Ds(1);var e=Ds(900);n[1]=e;for(var t=2;t<16;t++)n[t]=n[t-1]*e;return n}var jL=(function(){function n(){}return n.decode=function(e,t){var r=new $e(""),i=Sn.ISO8859_1;r.enableDecoding(i);for(var a=1,o=e[a++],c=new IL;a<e[0];){switch(o){case n.TEXT_COMPACTION_MODE_LATCH:a=n.textCompaction(e,a,r);break;case n.BYTE_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:a=n.byteCompaction(o,e,i,a,r);break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(e[a++]);break;case n.NUMERIC_COMPACTION_MODE_LATCH:a=n.numericCompaction(e,a,r);break;case n.ECI_CHARSET:Sn.getCharacterSetECIByValue(e[a++]);break;case n.ECI_GENERAL_PURPOSE:a+=2;break;case n.ECI_USER_DEFINED:a++;break;case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:a=n.decodeMacroBlock(e,a,c);break;case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:throw new ye;default:a--,a=n.textCompaction(e,a,r);break}if(a<e.length)o=e[a++];else throw ye.getFormatInstance()}if(r.length()===0)throw ye.getFormatInstance();var u=new u1(null,r.toString(),null,t);return u.setOther(c),u},n.decodeMacroBlock=function(e,t,r){if(t+n.NUMBER_OF_SEQUENCE_CODEWORDS>e[0])throw ye.getFormatInstance();for(var i=new Int32Array(n.NUMBER_OF_SEQUENCE_CODEWORDS),a=0;a<n.NUMBER_OF_SEQUENCE_CODEWORDS;a++,t++)i[a]=e[t];r.setSegmentIndex(Xe.parseInt(n.decodeBase900toBase10(i,n.NUMBER_OF_SEQUENCE_CODEWORDS)));var o=new $e;t=n.textCompaction(e,t,o),r.setFileId(o.toString());var c=-1;for(e[t]===n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(c=t+1);t<e[0];)switch(e[t]){case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(t++,e[t]){case n.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:var u=new $e;t=n.textCompaction(e,t+1,u),r.setFileName(u.toString());break;case n.MACRO_PDF417_OPTIONAL_FIELD_SENDER:var h=new $e;t=n.textCompaction(e,t+1,h),r.setSender(h.toString());break;case n.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:var p=new $e;t=n.textCompaction(e,t+1,p),r.setAddressee(p.toString());break;case n.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:var g=new $e;t=n.numericCompaction(e,t+1,g),r.setSegmentCount(Xe.parseInt(g.toString()));break;case n.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:var _=new $e;t=n.numericCompaction(e,t+1,_),r.setTimestamp(DA.parseLong(_.toString()));break;case n.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:var E=new $e;t=n.numericCompaction(e,t+1,E),r.setChecksum(Xe.parseInt(E.toString()));break;case n.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:var A=new $e;t=n.numericCompaction(e,t+1,A),r.setFileSize(DA.parseLong(A.toString()));break;default:throw ye.getFormatInstance()}break;case n.MACRO_PDF417_TERMINATOR:t++,r.setLastSegment(!0);break;default:throw ye.getFormatInstance()}if(c!==-1){var S=t-c;r.isLastSegment()&&S--,r.setOptionalData(Cn.copyOfRange(e,c,c+S))}return t},n.textCompaction=function(e,t,r){for(var i=new Int32Array((e[0]-t)*2),a=new Int32Array((e[0]-t)*2),o=0,c=!1;t<e[0]&&!c;){var u=e[t++];if(u<n.TEXT_COMPACTION_MODE_LATCH)i[o]=u/30,i[o+1]=u%30,o+=2;else switch(u){case n.TEXT_COMPACTION_MODE_LATCH:i[o++]=n.TEXT_COMPACTION_MODE_LATCH;break;case n.BYTE_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:case n.NUMERIC_COMPACTION_MODE_LATCH:case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:t--,c=!0;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i[o]=n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,u=e[t++],a[o]=u,o++;break}}return n.decodeTextCompaction(i,a,o,r),t},n.decodeTextCompaction=function(e,t,r,i){for(var a=Nt.ALPHA,o=Nt.ALPHA,c=0;c<r;){var u=e[c],h="";switch(a){case Nt.ALPHA:if(u<26)h=String.fromCharCode(65+u);else switch(u){case 26:h=" ";break;case n.LL:a=Nt.LOWER;break;case n.ML:a=Nt.MIXED;break;case n.PS:o=a,a=Nt.PUNCT_SHIFT;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[c]);break;case n.TEXT_COMPACTION_MODE_LATCH:a=Nt.ALPHA;break}break;case Nt.LOWER:if(u<26)h=String.fromCharCode(97+u);else switch(u){case 26:h=" ";break;case n.AS:o=a,a=Nt.ALPHA_SHIFT;break;case n.ML:a=Nt.MIXED;break;case n.PS:o=a,a=Nt.PUNCT_SHIFT;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[c]);break;case n.TEXT_COMPACTION_MODE_LATCH:a=Nt.ALPHA;break}break;case Nt.MIXED:if(u<n.PL)h=n.MIXED_CHARS[u];else switch(u){case n.PL:a=Nt.PUNCT;break;case 26:h=" ";break;case n.LL:a=Nt.LOWER;break;case n.AL:a=Nt.ALPHA;break;case n.PS:o=a,a=Nt.PUNCT_SHIFT;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[c]);break;case n.TEXT_COMPACTION_MODE_LATCH:a=Nt.ALPHA;break}break;case Nt.PUNCT:if(u<n.PAL)h=n.PUNCT_CHARS[u];else switch(u){case n.PAL:a=Nt.ALPHA;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[c]);break;case n.TEXT_COMPACTION_MODE_LATCH:a=Nt.ALPHA;break}break;case Nt.ALPHA_SHIFT:if(a=o,u<26)h=String.fromCharCode(65+u);else switch(u){case 26:h=" ";break;case n.TEXT_COMPACTION_MODE_LATCH:a=Nt.ALPHA;break}break;case Nt.PUNCT_SHIFT:if(a=o,u<n.PAL)h=n.PUNCT_CHARS[u];else switch(u){case n.PAL:a=Nt.ALPHA;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[c]);break;case n.TEXT_COMPACTION_MODE_LATCH:a=Nt.ALPHA;break}break}h!==""&&i.append(h),c++}},n.byteCompaction=function(e,t,r,i,a){var o=new kL,c=0,u=0,h=!1;switch(e){case n.BYTE_COMPACTION_MODE_LATCH:for(var p=new Int32Array(6),g=t[i++];i<t[0]&&!h;)switch(p[c++]=g,u=900*u+g,g=t[i++],g){case n.TEXT_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH:case n.NUMERIC_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:i--,h=!0;break;default:if(c%5===0&&c>0){for(var _=0;_<6;++_)o.write(Number(Ds(u)>>Ds(8*(5-_))));u=0,c=0}break}i===t[0]&&g<n.TEXT_COMPACTION_MODE_LATCH&&(p[c++]=g);for(var E=0;E<c;E++)o.write(p[E]);break;case n.BYTE_COMPACTION_MODE_LATCH_6:for(;i<t[0]&&!h;){var A=t[i++];if(A<n.TEXT_COMPACTION_MODE_LATCH)c++,u=900*u+A;else switch(A){case n.TEXT_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH:case n.NUMERIC_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:i--,h=!0;break}if(c%5===0&&c>0){for(var _=0;_<6;++_)o.write(Number(Ds(u)>>Ds(8*(5-_))));u=0,c=0}}break}return a.append(oi.decode(o.toByteArray(),r)),i},n.numericCompaction=function(e,t,r){for(var i=0,a=!1,o=new Int32Array(n.MAX_NUMERIC_CODEWORDS);t<e[0]&&!a;){var c=e[t++];if(t===e[0]&&(a=!0),c<n.TEXT_COMPACTION_MODE_LATCH)o[i]=c,i++;else switch(c){case n.TEXT_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:t--,a=!0;break}(i%n.MAX_NUMERIC_CODEWORDS===0||c===n.NUMERIC_COMPACTION_MODE_LATCH||a)&&i>0&&(r.append(n.decodeBase900toBase10(o,i)),i=0)}return t},n.decodeBase900toBase10=function(e,t){for(var r=Ds(0),i=0;i<t;i++)r+=n.EXP900[t-i-1]*Ds(e[i]);var a=r.toString();if(a.charAt(0)!=="1")throw new ye;return a.substring(1)},n.TEXT_COMPACTION_MODE_LATCH=900,n.BYTE_COMPACTION_MODE_LATCH=901,n.NUMERIC_COMPACTION_MODE_LATCH=902,n.BYTE_COMPACTION_MODE_LATCH_6=924,n.ECI_USER_DEFINED=925,n.ECI_GENERAL_PURPOSE=926,n.ECI_CHARSET=927,n.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,n.MACRO_PDF417_TERMINATOR=922,n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,n.MAX_NUMERIC_CODEWORDS=15,n.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,n.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,n.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,n.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,n.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,n.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,n.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,n.PL=25,n.LL=27,n.AS=27,n.ML=28,n.AL=28,n.PS=29,n.PAL=29,n.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,n.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",n.EXP900=h3()?LL():[],n.NUMBER_OF_SEQUENCE_CODEWORDS=2,n})(),Gu=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},BL=(function(){function n(){}return n.decode=function(e,t,r,i,a,o,c){for(var u=new rv(e,t,r,i,a),h=null,p=null,g,_=!0;;_=!1){if(t!=null&&(h=n.getRowIndicatorColumn(e,u,t,!0,o,c)),i!=null&&(p=n.getRowIndicatorColumn(e,u,i,!1,o,c)),g=n.merge(h,p),g==null)throw ae.getNotFoundInstance();var E=g.getBoundingBox();if(_&&E!=null&&(E.getMinY()<u.getMinY()||E.getMaxY()>u.getMaxY()))u=E;else break}g.setBoundingBox(u);var A=g.getBarcodeColumnCount()+1;g.setDetectionResultColumn(0,h),g.setDetectionResultColumn(A,p);for(var S=h!=null,O=1;O<=A;O++){var T=S?O:A-O;if(g.getDetectionResultColumn(T)===void 0){var R=void 0;T===0||T===A?R=new OA(u,T===0):R=new f3(u),g.setDetectionResultColumn(T,R);for(var L=-1,z=L,U=u.getMinY();U<=u.getMaxY();U++){if(L=n.getStartColumn(g,T,U,S),L<0||L>u.getMaxX()){if(z===-1)continue;L=z}var G=n.detectCodeword(e,u.getMinX(),u.getMaxX(),S,L,U,o,c);G!=null&&(R.setCodeword(U,G),z=L,o=Math.min(o,G.getWidth()),c=Math.max(c,G.getWidth()))}}}return n.createDecoderResult(g)},n.merge=function(e,t){if(e==null&&t==null)return null;var r=n.getBarcodeMetadata(e,t);if(r==null)return null;var i=rv.merge(n.adjustBoundingBox(e),n.adjustBoundingBox(t));return new SL(r,i)},n.adjustBoundingBox=function(e){var t,r;if(e==null)return null;var i=e.getRowHeights();if(i==null)return null;var a=n.getMax(i),o=0;try{for(var c=Gu(i),u=c.next();!u.done;u=c.next()){var h=u.value;if(o+=a-h,h>0)break}}catch(E){t={error:E}}finally{try{u&&!u.done&&(r=c.return)&&r.call(c)}finally{if(t)throw t.error}}for(var p=e.getCodewords(),g=0;o>0&&p[g]==null;g++)o--;for(var _=0,g=i.length-1;g>=0&&(_+=a-i[g],!(i[g]>0));g--);for(var g=p.length-1;_>0&&p[g]==null;g--)_--;return e.getBoundingBox().addMissingRows(o,_,e.isLeft())},n.getMax=function(e){var t,r,i=-1;try{for(var a=Gu(e),o=a.next();!o.done;o=a.next()){var c=o.value;i=Math.max(i,c)}}catch(u){t={error:u}}finally{try{o&&!o.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}return i},n.getBarcodeMetadata=function(e,t){var r;if(e==null||(r=e.getBarcodeMetadata())==null)return t==null?null:t.getBarcodeMetadata();var i;return t==null||(i=t.getBarcodeMetadata())==null?r:r.getColumnCount()!==i.getColumnCount()&&r.getErrorCorrectionLevel()!==i.getErrorCorrectionLevel()&&r.getRowCount()!==i.getRowCount()?null:r},n.getRowIndicatorColumn=function(e,t,r,i,a,o){for(var c=new OA(t,i),u=0;u<2;u++)for(var h=u===0?1:-1,p=Math.trunc(Math.trunc(r.getX())),g=Math.trunc(Math.trunc(r.getY()));g<=t.getMaxY()&&g>=t.getMinY();g+=h){var _=n.detectCodeword(e,0,e.getWidth(),i,p,g,a,o);_!=null&&(c.setCodeword(g,_),i?p=_.getStartX():p=_.getEndX())}return c},n.adjustCodewordCount=function(e,t){var r=t[0][1],i=r.getValue(),a=e.getBarcodeColumnCount()*e.getBarcodeRowCount()-n.getNumberOfECCodeWords(e.getBarcodeECLevel());if(i.length===0){if(a<1||a>lt.MAX_CODEWORDS_IN_BARCODE)throw ae.getNotFoundInstance();r.setValue(a)}else i[0]!==a&&r.setValue(a)},n.createDecoderResult=function(e){var t=n.createBarcodeMatrix(e);n.adjustCodewordCount(e,t);for(var r=new Array,i=new Int32Array(e.getBarcodeRowCount()*e.getBarcodeColumnCount()),a=[],o=new Array,c=0;c<e.getBarcodeRowCount();c++)for(var u=0;u<e.getBarcodeColumnCount();u++){var h=t[c][u+1].getValue(),p=c*e.getBarcodeColumnCount()+u;h.length===0?r.push(p):h.length===1?i[p]=h[0]:(o.push(p),a.push(h))}for(var g=new Array(a.length),_=0;_<g.length;_++)g[_]=a[_];return n.createDecoderResultFromAmbiguousValues(e.getBarcodeECLevel(),i,lt.toIntArray(r),lt.toIntArray(o),g)},n.createDecoderResultFromAmbiguousValues=function(e,t,r,i,a){for(var o=new Int32Array(i.length),c=100;c-- >0;){for(var u=0;u<o.length;u++)t[i[u]]=a[u][o[u]];try{return n.decodeCodewords(t,e,r)}catch(p){var h=p instanceof _n;if(!h)throw p}if(o.length===0)throw _n.getChecksumInstance();for(var u=0;u<o.length;u++)if(o[u]<a[u].length-1){o[u]++;break}else if(o[u]=0,u===o.length-1)throw _n.getChecksumInstance()}throw _n.getChecksumInstance()},n.createBarcodeMatrix=function(e){for(var t,r,i,a,o=Array.from({length:e.getBarcodeRowCount()},function(){return new Array(e.getBarcodeColumnCount()+2)}),c=0;c<o.length;c++)for(var u=0;u<o[c].length;u++)o[c][u]=new tf;var h=0;try{for(var p=Gu(e.getDetectionResultColumns()),g=p.next();!g.done;g=p.next()){var _=g.value;if(_!=null)try{for(var E=(i=void 0,Gu(_.getCodewords())),A=E.next();!A.done;A=E.next()){var S=A.value;if(S!=null){var O=S.getRowNumber();if(O>=0){if(O>=o.length)continue;o[O][h].setValue(S.getValue())}}}}catch(T){i={error:T}}finally{try{A&&!A.done&&(a=E.return)&&a.call(E)}finally{if(i)throw i.error}}h++}}catch(T){t={error:T}}finally{try{g&&!g.done&&(r=p.return)&&r.call(p)}finally{if(t)throw t.error}}return o},n.isValidBarcodeColumn=function(e,t){return t>=0&&t<=e.getBarcodeColumnCount()+1},n.getStartColumn=function(e,t,r,i){var a,o,c=i?1:-1,u=null;if(n.isValidBarcodeColumn(e,t-c)&&(u=e.getDetectionResultColumn(t-c).getCodeword(r)),u!=null)return i?u.getEndX():u.getStartX();if(u=e.getDetectionResultColumn(t).getCodewordNearby(r),u!=null)return i?u.getStartX():u.getEndX();if(n.isValidBarcodeColumn(e,t-c)&&(u=e.getDetectionResultColumn(t-c).getCodewordNearby(r)),u!=null)return i?u.getEndX():u.getStartX();for(var h=0;n.isValidBarcodeColumn(e,t-c);){t-=c;try{for(var p=(a=void 0,Gu(e.getDetectionResultColumn(t).getCodewords())),g=p.next();!g.done;g=p.next()){var _=g.value;if(_!=null)return(i?_.getEndX():_.getStartX())+c*h*(_.getEndX()-_.getStartX())}}catch(E){a={error:E}}finally{try{g&&!g.done&&(o=p.return)&&o.call(p)}finally{if(a)throw a.error}}h++}return i?e.getBoundingBox().getMinX():e.getBoundingBox().getMaxX()},n.detectCodeword=function(e,t,r,i,a,o,c,u){a=n.adjustCodewordStartColumn(e,t,r,i,a,o);var h=n.getModuleBitCount(e,t,r,i,a,o);if(h==null)return null;var p,g=ft.sum(h);if(i)p=a+g;else{for(var _=0;_<h.length/2;_++){var E=h[_];h[_]=h[h.length-1-_],h[h.length-1-_]=E}p=a,a=p-g}if(!n.checkCodewordSkew(g,c,u))return null;var A=TL.getDecodedValue(h),S=lt.getCodeword(A);return S===-1?null:new CL(a,p,n.getCodewordBucketNumber(A),S)},n.getModuleBitCount=function(e,t,r,i,a,o){for(var c=a,u=new Int32Array(8),h=0,p=i?1:-1,g=i;(i?c<r:c>=t)&&h<u.length;)e.get(c,o)===g?(u[h]++,c+=p):(h++,g=!g);return h===u.length||c===(i?r:t)&&h===u.length-1?u:null},n.getNumberOfECCodeWords=function(e){return 2<<e},n.adjustCodewordStartColumn=function(e,t,r,i,a,o){for(var c=a,u=i?-1:1,h=0;h<2;h++){for(;(i?c>=t:c<r)&&i===e.get(c,o);){if(Math.abs(a-c)>n.CODEWORD_SKEW_SIZE)return a;c+=u}u=-u,i=!i}return c},n.checkCodewordSkew=function(e,t,r){return t-n.CODEWORD_SKEW_SIZE<=e&&e<=r+n.CODEWORD_SKEW_SIZE},n.decodeCodewords=function(e,t,r){if(e.length===0)throw ye.getFormatInstance();var i=1<<t+1,a=n.correctErrors(e,r,i);n.verifyCodewordCount(e,i);var o=jL.decode(e,""+t);return o.setErrorsCorrected(a),o.setErasures(r.length),o},n.correctErrors=function(e,t,r){if(t!=null&&t.length>r/2+n.MAX_ERRORS||r<0||r>n.MAX_EC_CODEWORDS)throw _n.getChecksumInstance();return n.errorCorrection.decode(e,r,t)},n.verifyCodewordCount=function(e,t){if(e.length<4)throw ye.getFormatInstance();var r=e[0];if(r>e.length)throw ye.getFormatInstance();if(r===0)if(t<e.length)e[0]=e.length-t;else throw ye.getFormatInstance()},n.getBitCountForCodeword=function(e){for(var t=new Int32Array(8),r=0,i=t.length-1;!((e&1)!==r&&(r=e&1,i--,i<0));)t[i]++,e>>=1;return t},n.getCodewordBucketNumber=function(e){return e instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(e):this.getCodewordBucketNumber_number(e)},n.getCodewordBucketNumber_number=function(e){return n.getCodewordBucketNumber(n.getBitCountForCodeword(e))},n.getCodewordBucketNumber_Int32Array=function(e){return(e[0]-e[2]+e[4]-e[6]+9)%9},n.toString=function(e){for(var t=new My,r=0;r<e.length;r++){t.format("Row %2d: ",r);for(var i=0;i<e[r].length;i++){var a=e[r][i];a.getValue().length===0?t.format("        ",null):t.format("%4d(%2d)",a.getValue()[0],a.getConfidence(a.getValue()[0]))}t.format("%n")}return t.toString()},n.CODEWORD_SKEW_SIZE=2,n.MAX_ERRORS=3,n.MAX_EC_CODEWORDS=512,n.errorCorrection=new yL,n})(),VL=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},C0=(function(){function n(){}return n.prototype.decode=function(e,t){t===void 0&&(t=null);var r=n.decode(e,t,!1);if(r==null||r.length===0||r[0]==null)throw ae.getNotFoundInstance();return r[0]},n.prototype.decodeMultiple=function(e,t){t===void 0&&(t=null);try{return n.decode(e,t,!0)}catch(r){throw r instanceof ye||r instanceof _n?ae.getNotFoundInstance():r}},n.decode=function(e,t,r){var i,a,o=new Array,c=hL.detectMultiple(e,t,r);try{for(var u=VL(c.getPoints()),h=u.next();!h.done;h=u.next()){var p=h.value,g=BL.decode(c.getBits(),p[4],p[5],p[6],p[7],n.getMinCodewordWidth(p),n.getMaxCodewordWidth(p)),_=new sr(g.getText(),g.getRawBytes(),void 0,p,Me.PDF_417);_.putMetadata(Jn.ERROR_CORRECTION_LEVEL,g.getECLevel());var E=g.getOther();E!=null&&_.putMetadata(Jn.PDF417_EXTRA_METADATA,E),o.push(_)}}catch(A){i={error:A}}finally{try{h&&!h.done&&(a=u.return)&&a.call(u)}finally{if(i)throw i.error}}return o.map(function(A){return A})},n.getMaxWidth=function(e,t){return e==null||t==null?0:Math.trunc(Math.abs(e.getX()-t.getX()))},n.getMinWidth=function(e,t){return e==null||t==null?Xe.MAX_VALUE:Math.trunc(Math.abs(e.getX()-t.getX()))},n.getMaxCodewordWidth=function(e){return Math.floor(Math.max(Math.max(n.getMaxWidth(e[0],e[4]),n.getMaxWidth(e[6],e[2])*lt.MODULES_IN_CODEWORD/lt.MODULES_IN_STOP_PATTERN),Math.max(n.getMaxWidth(e[1],e[5]),n.getMaxWidth(e[7],e[3])*lt.MODULES_IN_CODEWORD/lt.MODULES_IN_STOP_PATTERN)))},n.getMinCodewordWidth=function(e){return Math.floor(Math.min(Math.min(n.getMinWidth(e[0],e[4]),n.getMinWidth(e[6],e[2])*lt.MODULES_IN_CODEWORD/lt.MODULES_IN_STOP_PATTERN),Math.min(n.getMinWidth(e[1],e[5]),n.getMinWidth(e[7],e[3])*lt.MODULES_IN_CODEWORD/lt.MODULES_IN_STOP_PATTERN)))},n.prototype.reset=function(){},n})(),FL=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),MA=(function(n){FL(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="ReaderException",e})(Tr),PA=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},d3=(function(){function n(){}return n.prototype.decode=function(e,t){return this.setHints(t),this.decodeInternal(e)},n.prototype.decodeWithState=function(e){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(e)},n.prototype.setHints=function(e){this.hints=e;var t=e!=null&&e.get(kt.TRY_HARDER)!==void 0,r=e==null?null:e.get(kt.POSSIBLE_FORMATS),i=new Array;if(r!=null){var a=r.some(function(o){return o===Me.UPC_A||o===Me.UPC_E||o===Me.EAN_13||o===Me.EAN_8||o===Me.CODABAR||o===Me.CODE_39||o===Me.CODE_93||o===Me.CODE_128||o===Me.ITF||o===Me.RSS_14||o===Me.RSS_EXPANDED});a&&!t&&i.push(new oc(e)),r.includes(Me.QR_CODE)&&i.push(new S0),r.includes(Me.DATA_MATRIX)&&i.push(new b0),r.includes(Me.AZTEC)&&i.push(new w0),r.includes(Me.PDF_417)&&i.push(new C0),a&&t&&i.push(new oc(e))}i.length===0&&(t||i.push(new oc(e)),i.push(new S0),i.push(new b0),i.push(new w0),i.push(new C0),t&&i.push(new oc(e))),this.readers=i},n.prototype.reset=function(){var e,t;if(this.readers!==null)try{for(var r=PA(this.readers),i=r.next();!i.done;i=r.next()){var a=i.value;a.reset()}}catch(o){e={error:o}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}},n.prototype.decodeInternal=function(e){var t,r;if(this.readers===null)throw new MA("No readers where selected, nothing can be read.");try{for(var i=PA(this.readers),a=i.next();!a.done;a=i.next()){var o=a.value;try{return o.decode(e,this.hints)}catch(c){if(c instanceof MA)continue}}}catch(c){t={error:c}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}throw new ae("No MultiFormat Readers were able to detect the code.")},n})(),UL=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})();(function(n){UL(e,n);function e(t,r){t===void 0&&(t=null),r===void 0&&(r=500);var i=this,a=new d3;return a.setHints(t),i=n.call(this,a,r)||this,i}return e.prototype.decodeBitmap=function(t){return this.reader.decodeWithState(t)},e})(Bc);var zL=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})();(function(n){zL(e,n);function e(t){return t===void 0&&(t=500),n.call(this,new C0,t)||this}return e})(Bc);var HL=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})();(function(n){HL(e,n);function e(t){return t===void 0&&(t=500),n.call(this,new S0,t)||this}return e})(Bc);var iv;(function(n){n[n.ERROR_CORRECTION=0]="ERROR_CORRECTION",n[n.CHARACTER_SET=1]="CHARACTER_SET",n[n.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",n[n.DATA_MATRIX_COMPACT=3]="DATA_MATRIX_COMPACT",n[n.MIN_SIZE=4]="MIN_SIZE",n[n.MAX_SIZE=5]="MAX_SIZE",n[n.MARGIN=6]="MARGIN",n[n.PDF417_COMPACT=7]="PDF417_COMPACT",n[n.PDF417_COMPACTION=8]="PDF417_COMPACTION",n[n.PDF417_DIMENSIONS=9]="PDF417_DIMENSIONS",n[n.AZTEC_LAYERS=10]="AZTEC_LAYERS",n[n.QR_VERSION=11]="QR_VERSION",n[n.GS1_FORMAT=12]="GS1_FORMAT",n[n.FORCE_C40=13]="FORCE_C40"})(iv||(iv={}));const Nd=iv;var p3=(function(){function n(e){this.field=e,this.cachedGenerators=[],this.cachedGenerators.push(new qs(e,Int32Array.from([1])))}return n.prototype.buildGenerator=function(e){var t=this.cachedGenerators;if(e>=t.length)for(var r=t[t.length-1],i=this.field,a=t.length;a<=e;a++){var o=r.multiply(new qs(i,Int32Array.from([1,i.exp(a-1+i.getGeneratorBase())])));t.push(o),r=o}return t[e]},n.prototype.encode=function(e,t){if(t===0)throw new Pe("No error correction bytes");var r=e.length-t;if(r<=0)throw new Pe("No data bytes provided");var i=this.buildGenerator(t),a=new Int32Array(r);Pt.arraycopy(e,0,a,0,r);var o=new qs(this.field,a);o=o.multiplyByMonomial(t,1);for(var c=o.divide(i)[1],u=c.getCoefficients(),h=t-u.length,p=0;p<h;p++)e[r+p]=0;Pt.arraycopy(u,0,e,r+h,u.length)},n})(),nf=(function(){function n(){}return n.applyMaskPenaltyRule1=function(e){return n.applyMaskPenaltyRule1Internal(e,!0)+n.applyMaskPenaltyRule1Internal(e,!1)},n.applyMaskPenaltyRule2=function(e){for(var t=0,r=e.getArray(),i=e.getWidth(),a=e.getHeight(),o=0;o<a-1;o++)for(var c=r[o],u=0;u<i-1;u++){var h=c[u];h===c[u+1]&&h===r[o+1][u]&&h===r[o+1][u+1]&&t++}return n.N2*t},n.applyMaskPenaltyRule3=function(e){for(var t=0,r=e.getArray(),i=e.getWidth(),a=e.getHeight(),o=0;o<a;o++)for(var c=0;c<i;c++){var u=r[o];c+6<i&&u[c]===1&&u[c+1]===0&&u[c+2]===1&&u[c+3]===1&&u[c+4]===1&&u[c+5]===0&&u[c+6]===1&&(n.isWhiteHorizontal(u,c-4,c)||n.isWhiteHorizontal(u,c+7,c+11))&&t++,o+6<a&&r[o][c]===1&&r[o+1][c]===0&&r[o+2][c]===1&&r[o+3][c]===1&&r[o+4][c]===1&&r[o+5][c]===0&&r[o+6][c]===1&&(n.isWhiteVertical(r,c,o-4,o)||n.isWhiteVertical(r,c,o+7,o+11))&&t++}return t*n.N3},n.isWhiteHorizontal=function(e,t,r){t=Math.max(t,0),r=Math.min(r,e.length);for(var i=t;i<r;i++)if(e[i]===1)return!1;return!0},n.isWhiteVertical=function(e,t,r,i){r=Math.max(r,0),i=Math.min(i,e.length);for(var a=r;a<i;a++)if(e[a][t]===1)return!1;return!0},n.applyMaskPenaltyRule4=function(e){for(var t=0,r=e.getArray(),i=e.getWidth(),a=e.getHeight(),o=0;o<a;o++)for(var c=r[o],u=0;u<i;u++)c[u]===1&&t++;var h=e.getHeight()*e.getWidth(),p=Math.floor(Math.abs(t*2-h)*10/h);return p*n.N4},n.getDataMaskBit=function(e,t,r){var i,a;switch(e){case 0:i=r+t&1;break;case 1:i=r&1;break;case 2:i=t%3;break;case 3:i=(r+t)%3;break;case 4:i=Math.floor(r/2)+Math.floor(t/3)&1;break;case 5:a=r*t,i=(a&1)+a%3;break;case 6:a=r*t,i=(a&1)+a%3&1;break;case 7:a=r*t,i=a%3+(r+t&1)&1;break;default:throw new Pe("Invalid mask pattern: "+e)}return i===0},n.applyMaskPenaltyRule1Internal=function(e,t){for(var r=0,i=t?e.getHeight():e.getWidth(),a=t?e.getWidth():e.getHeight(),o=e.getArray(),c=0;c<i;c++){for(var u=0,h=-1,p=0;p<a;p++){var g=t?o[c][p]:o[p][c];g===h?u++:(u>=5&&(r+=n.N1+(u-5)),u=1,h=g)}u>=5&&(r+=n.N1+(u-5))}return r},n.N1=3,n.N2=3,n.N3=40,n.N4=10,n})(),GL=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},qL=(function(){function n(e,t){this.width=e,this.height=t;for(var r=new Array(t),i=0;i!==t;i++)r[i]=new Uint8Array(e);this.bytes=r}return n.prototype.getHeight=function(){return this.height},n.prototype.getWidth=function(){return this.width},n.prototype.get=function(e,t){return this.bytes[t][e]},n.prototype.getArray=function(){return this.bytes},n.prototype.setNumber=function(e,t,r){this.bytes[t][e]=r},n.prototype.setBoolean=function(e,t,r){this.bytes[t][e]=r?1:0},n.prototype.clear=function(e){var t,r;try{for(var i=GL(this.bytes),a=i.next();!a.done;a=i.next()){var o=a.value;Cn.fill(o,e)}}catch(c){t={error:c}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;if(this.width!==t.width||this.height!==t.height)return!1;for(var r=0,i=this.height;r<i;++r)for(var a=this.bytes[r],o=t.bytes[r],c=0,u=this.width;c<u;++c)if(a[c]!==o[c])return!1;return!0},n.prototype.toString=function(){for(var e=new $e,t=0,r=this.height;t<r;++t){for(var i=this.bytes[t],a=0,o=this.width;a<o;++a)switch(i[a]){case 0:e.append(" 0");break;case 1:e.append(" 1");break;default:e.append("  ");break}e.append(`
`)}return e.toString()},n})(),av=(function(){function n(){this.maskPattern=-1}return n.prototype.getMode=function(){return this.mode},n.prototype.getECLevel=function(){return this.ecLevel},n.prototype.getVersion=function(){return this.version},n.prototype.getMaskPattern=function(){return this.maskPattern},n.prototype.getMatrix=function(){return this.matrix},n.prototype.toString=function(){var e=new $e;return e.append(`<<
`),e.append(" mode: "),e.append(this.mode?this.mode.toString():"null"),e.append(`
 ecLevel: `),e.append(this.ecLevel?this.ecLevel.toString():"null"),e.append(`
 version: `),e.append(this.version?this.version.toString():"null"),e.append(`
 maskPattern: `),e.append(this.maskPattern.toString()),this.matrix?(e.append(`
 matrix:
`),e.append(this.matrix.toString())):e.append(`
 matrix: null
`),e.append(`>>
`),e.toString()},n.prototype.setMode=function(e){this.mode=e},n.prototype.setECLevel=function(e){this.ecLevel=e},n.prototype.setVersion=function(e){this.version=e},n.prototype.setMaskPattern=function(e){this.maskPattern=e},n.prototype.setMatrix=function(e){this.matrix=e},n.isValidMaskPattern=function(e){return e>=0&&e<n.NUM_MASK_PATTERNS},n.NUM_MASK_PATTERNS=8,n})(),$L=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Bt=(function(n){$L(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="WriterException",e})(Tr),kA=(function(){function n(){}return n.clearMatrix=function(e){e.clear(255)},n.buildMatrix=function(e,t,r,i,a){n.clearMatrix(a),n.embedBasicPatterns(r,a),n.embedTypeInfo(t,i,a),n.maybeEmbedVersionInfo(r,a),n.embedDataBits(e,i,a)},n.embedBasicPatterns=function(e,t){n.embedPositionDetectionPatternsAndSeparators(t),n.embedDarkDotAtLeftBottomCorner(t),n.maybeEmbedPositionAdjustmentPatterns(e,t),n.embedTimingPatterns(t)},n.embedTypeInfo=function(e,t,r){var i=new jn;n.makeTypeInfoBits(e,t,i);for(var a=0,o=i.getSize();a<o;++a){var c=i.get(i.getSize()-1-a),u=n.TYPE_INFO_COORDINATES[a],h=u[0],p=u[1];if(r.setBoolean(h,p,c),a<8){var g=r.getWidth()-a-1,_=8;r.setBoolean(g,_,c)}else{var g=8,_=r.getHeight()-7+(a-8);r.setBoolean(g,_,c)}}},n.maybeEmbedVersionInfo=function(e,t){if(!(e.getVersionNumber()<7)){var r=new jn;n.makeVersionInfoBits(e,r);for(var i=17,a=0;a<6;++a)for(var o=0;o<3;++o){var c=r.get(i);i--,t.setBoolean(a,t.getHeight()-11+o,c),t.setBoolean(t.getHeight()-11+o,a,c)}}},n.embedDataBits=function(e,t,r){for(var i=0,a=-1,o=r.getWidth()-1,c=r.getHeight()-1;o>0;){for(o===6&&(o-=1);c>=0&&c<r.getHeight();){for(var u=0;u<2;++u){var h=o-u;if(n.isEmpty(r.get(h,c))){var p=void 0;i<e.getSize()?(p=e.get(i),++i):p=!1,t!==255&&nf.getDataMaskBit(t,h,c)&&(p=!p),r.setBoolean(h,c,p)}}c+=a}a=-a,c+=a,o-=2}if(i!==e.getSize())throw new Bt("Not all bits consumed: "+i+"/"+e.getSize())},n.findMSBSet=function(e){return 32-Xe.numberOfLeadingZeros(e)},n.calculateBCHCode=function(e,t){if(t===0)throw new Pe("0 polynomial");var r=n.findMSBSet(t);for(e<<=r-1;n.findMSBSet(e)>=r;)e^=t<<n.findMSBSet(e)-r;return e},n.makeTypeInfoBits=function(e,t,r){if(!av.isValidMaskPattern(t))throw new Bt("Invalid mask pattern");var i=e.getBits()<<3|t;r.appendBits(i,5);var a=n.calculateBCHCode(i,n.TYPE_INFO_POLY);r.appendBits(a,10);var o=new jn;if(o.appendBits(n.TYPE_INFO_MASK_PATTERN,15),r.xor(o),r.getSize()!==15)throw new Bt("should not happen but we got: "+r.getSize())},n.makeVersionInfoBits=function(e,t){t.appendBits(e.getVersionNumber(),6);var r=n.calculateBCHCode(e.getVersionNumber(),n.VERSION_INFO_POLY);if(t.appendBits(r,12),t.getSize()!==18)throw new Bt("should not happen but we got: "+t.getSize())},n.isEmpty=function(e){return e===255},n.embedTimingPatterns=function(e){for(var t=8;t<e.getWidth()-8;++t){var r=(t+1)%2;n.isEmpty(e.get(t,6))&&e.setNumber(t,6,r),n.isEmpty(e.get(6,t))&&e.setNumber(6,t,r)}},n.embedDarkDotAtLeftBottomCorner=function(e){if(e.get(8,e.getHeight()-8)===0)throw new Bt;e.setNumber(8,e.getHeight()-8,1)},n.embedHorizontalSeparationPattern=function(e,t,r){for(var i=0;i<8;++i){if(!n.isEmpty(r.get(e+i,t)))throw new Bt;r.setNumber(e+i,t,0)}},n.embedVerticalSeparationPattern=function(e,t,r){for(var i=0;i<7;++i){if(!n.isEmpty(r.get(e,t+i)))throw new Bt;r.setNumber(e,t+i,0)}},n.embedPositionAdjustmentPattern=function(e,t,r){for(var i=0;i<5;++i)for(var a=n.POSITION_ADJUSTMENT_PATTERN[i],o=0;o<5;++o)r.setNumber(e+o,t+i,a[o])},n.embedPositionDetectionPattern=function(e,t,r){for(var i=0;i<7;++i)for(var a=n.POSITION_DETECTION_PATTERN[i],o=0;o<7;++o)r.setNumber(e+o,t+i,a[o])},n.embedPositionDetectionPatternsAndSeparators=function(e){var t=n.POSITION_DETECTION_PATTERN[0].length;n.embedPositionDetectionPattern(0,0,e),n.embedPositionDetectionPattern(e.getWidth()-t,0,e),n.embedPositionDetectionPattern(0,e.getWidth()-t,e);var r=8;n.embedHorizontalSeparationPattern(0,r-1,e),n.embedHorizontalSeparationPattern(e.getWidth()-r,r-1,e),n.embedHorizontalSeparationPattern(0,e.getWidth()-r,e);var i=7;n.embedVerticalSeparationPattern(i,0,e),n.embedVerticalSeparationPattern(e.getHeight()-i-1,0,e),n.embedVerticalSeparationPattern(i,e.getHeight()-i,e)},n.maybeEmbedPositionAdjustmentPatterns=function(e,t){if(!(e.getVersionNumber()<2))for(var r=e.getVersionNumber()-1,i=n.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[r],a=0,o=i.length;a!==o;a++){var c=i[a];if(c>=0)for(var u=0;u!==o;u++){var h=i[u];h>=0&&n.isEmpty(t.get(h,c))&&n.embedPositionAdjustmentPattern(h-2,c-2,t)}}},n.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),n.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),n.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),n.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),n.VERSION_INFO_POLY=7973,n.TYPE_INFO_POLY=1335,n.TYPE_INFO_MASK_PATTERN=21522,n})(),XL=(function(){function n(e,t){this.dataBytes=e,this.errorCorrectionBytes=t}return n.prototype.getDataBytes=function(){return this.dataBytes},n.prototype.getErrorCorrectionBytes=function(){return this.errorCorrectionBytes},n})(),LA=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};(function(){function n(){}return n.calculateMaskPenalty=function(e){return nf.applyMaskPenaltyRule1(e)+nf.applyMaskPenaltyRule2(e)+nf.applyMaskPenaltyRule3(e)+nf.applyMaskPenaltyRule4(e)},n.encode=function(e,t,r){r===void 0&&(r=null);var i=n.DEFAULT_BYTE_MODE_ENCODING,a=r!==null&&r.get(Nd.CHARACTER_SET)!==void 0;a&&(i=r.get(Nd.CHARACTER_SET).toString());var o=this.chooseMode(e,i),c=new jn;if(o===Vt.BYTE&&(a||n.DEFAULT_BYTE_MODE_ENCODING!==i)){var u=Sn.getCharacterSetECIByName(i);u!==void 0&&this.appendECI(u,c)}this.appendModeInfo(o,c);var h=new jn;this.appendBytes(e,o,h,i);var p;if(r!==null&&r.get(Nd.QR_VERSION)!==void 0){var g=Number.parseInt(r.get(Nd.QR_VERSION).toString(),10);p=Xo.getVersionForNumber(g);var _=this.calculateBitsNeeded(o,c,h,p);if(!this.willFit(_,p,t))throw new Bt("Data too big for requested version")}else p=this.recommendVersion(t,o,c,h);var E=new jn;E.appendBitArray(c);var A=o===Vt.BYTE?h.getSizeInBytes():e.length;this.appendLengthInfo(A,p,o,E),E.appendBitArray(h);var S=p.getECBlocksForLevel(t),O=p.getTotalCodewords()-S.getTotalECCodewords();this.terminateBits(O,E);var T=this.interleaveWithECBytes(E,p.getTotalCodewords(),O,S.getNumBlocks()),R=new av;R.setECLevel(t),R.setMode(o),R.setVersion(p);var L=p.getDimensionForVersion(),z=new qL(L,L),U=this.chooseMaskPattern(T,t,p,z);return R.setMaskPattern(U),kA.buildMatrix(T,t,p,U,z),R.setMatrix(z),R},n.recommendVersion=function(e,t,r,i){var a=this.calculateBitsNeeded(t,r,i,Xo.getVersionForNumber(1)),o=this.chooseVersion(a,e),c=this.calculateBitsNeeded(t,r,i,o);return this.chooseVersion(c,e)},n.calculateBitsNeeded=function(e,t,r,i){return t.getSize()+e.getCharacterCountBits(i)+r.getSize()},n.getAlphanumericCode=function(e){return e<n.ALPHANUMERIC_TABLE.length?n.ALPHANUMERIC_TABLE[e]:-1},n.chooseMode=function(e,t){if(t===void 0&&(t=null),Sn.SJIS.getName()===t&&this.isOnlyDoubleByteKanji(e))return Vt.KANJI;for(var r=!1,i=!1,a=0,o=e.length;a<o;++a){var c=e.charAt(a);if(n.isDigit(c))r=!0;else if(this.getAlphanumericCode(c.charCodeAt(0))!==-1)i=!0;else return Vt.BYTE}return i?Vt.ALPHANUMERIC:r?Vt.NUMERIC:Vt.BYTE},n.isOnlyDoubleByteKanji=function(e){var t;try{t=oi.encode(e,Sn.SJIS)}catch{return!1}var r=t.length;if(r%2!==0)return!1;for(var i=0;i<r;i+=2){var a=t[i]&255;if((a<129||a>159)&&(a<224||a>235))return!1}return!0},n.chooseMaskPattern=function(e,t,r,i){for(var a=Number.MAX_SAFE_INTEGER,o=-1,c=0;c<av.NUM_MASK_PATTERNS;c++){kA.buildMatrix(e,t,r,c,i);var u=this.calculateMaskPenalty(i);u<a&&(a=u,o=c)}return o},n.chooseVersion=function(e,t){for(var r=1;r<=40;r++){var i=Xo.getVersionForNumber(r);if(n.willFit(e,i,t))return i}throw new Bt("Data too big")},n.willFit=function(e,t,r){var i=t.getTotalCodewords(),a=t.getECBlocksForLevel(r),o=a.getTotalECCodewords(),c=i-o,u=(e+7)/8;return c>=u},n.terminateBits=function(e,t){var r=e*8;if(t.getSize()>r)throw new Bt("data bits cannot fit in the QR Code"+t.getSize()+" > "+r);for(var i=0;i<4&&t.getSize()<r;++i)t.appendBit(!1);var a=t.getSize()&7;if(a>0)for(var i=a;i<8;i++)t.appendBit(!1);for(var o=e-t.getSizeInBytes(),i=0;i<o;++i)t.appendBits((i&1)===0?236:17,8);if(t.getSize()!==r)throw new Bt("Bits size does not equal capacity")},n.getNumDataBytesAndNumECBytesForBlockID=function(e,t,r,i,a,o){if(i>=r)throw new Bt("Block ID too large");var c=e%r,u=r-c,h=Math.floor(e/r),p=h+1,g=Math.floor(t/r),_=g+1,E=h-g,A=p-_;if(E!==A)throw new Bt("EC bytes mismatch");if(r!==u+c)throw new Bt("RS blocks mismatch");if(e!==(g+E)*u+(_+A)*c)throw new Bt("Total bytes mismatch");i<u?(a[0]=g,o[0]=E):(a[0]=_,o[0]=A)},n.interleaveWithECBytes=function(e,t,r,i){var a,o,c,u;if(e.getSizeInBytes()!==r)throw new Bt("Number of bits and data bytes does not match");for(var h=0,p=0,g=0,_=new Array,E=0;E<i;++E){var A=new Int32Array(1),S=new Int32Array(1);n.getNumDataBytesAndNumECBytesForBlockID(t,r,i,E,A,S);var O=A[0],T=new Uint8Array(O);e.toBytes(8*h,T,0,O);var R=n.generateECBytes(T,S[0]);_.push(new XL(T,R)),p=Math.max(p,O),g=Math.max(g,R.length),h+=A[0]}if(r!==h)throw new Bt("Data bytes does not match offset");for(var L=new jn,E=0;E<p;++E)try{for(var z=(a=void 0,LA(_)),U=z.next();!U.done;U=z.next()){var G=U.value,T=G.getDataBytes();E<T.length&&L.appendBits(T[E],8)}}catch(M){a={error:M}}finally{try{U&&!U.done&&(o=z.return)&&o.call(z)}finally{if(a)throw a.error}}for(var E=0;E<g;++E)try{for(var D=(c=void 0,LA(_)),w=D.next();!w.done;w=D.next()){var G=w.value,R=G.getErrorCorrectionBytes();E<R.length&&L.appendBits(R[E],8)}}catch(M){c={error:M}}finally{try{w&&!w.done&&(u=D.return)&&u.call(D)}finally{if(c)throw c.error}}if(t!==L.getSizeInBytes())throw new Bt("Interleaving error: "+t+" and "+L.getSizeInBytes()+" differ.");return L},n.generateECBytes=function(e,t){for(var r=e.length,i=new Int32Array(r+t),a=0;a<r;a++)i[a]=e[a]&255;new p3(br.QR_CODE_FIELD_256).encode(i,t);for(var o=new Uint8Array(t),a=0;a<t;a++)o[a]=i[r+a];return o},n.appendModeInfo=function(e,t){t.appendBits(e.getBits(),4)},n.appendLengthInfo=function(e,t,r,i){var a=r.getCharacterCountBits(t);if(e>=1<<a)throw new Bt(e+" is bigger than "+((1<<a)-1));i.appendBits(e,a)},n.appendBytes=function(e,t,r,i){switch(t){case Vt.NUMERIC:n.appendNumericBytes(e,r);break;case Vt.ALPHANUMERIC:n.appendAlphanumericBytes(e,r);break;case Vt.BYTE:n.append8BitBytes(e,r,i);break;case Vt.KANJI:n.appendKanjiBytes(e,r);break;default:throw new Bt("Invalid mode: "+t)}},n.getDigit=function(e){return e.charCodeAt(0)-48},n.isDigit=function(e){var t=n.getDigit(e);return t>=0&&t<=9},n.appendNumericBytes=function(e,t){for(var r=e.length,i=0;i<r;){var a=n.getDigit(e.charAt(i));if(i+2<r){var o=n.getDigit(e.charAt(i+1)),c=n.getDigit(e.charAt(i+2));t.appendBits(a*100+o*10+c,10),i+=3}else if(i+1<r){var o=n.getDigit(e.charAt(i+1));t.appendBits(a*10+o,7),i+=2}else t.appendBits(a,4),i++}},n.appendAlphanumericBytes=function(e,t){for(var r=e.length,i=0;i<r;){var a=n.getAlphanumericCode(e.charCodeAt(i));if(a===-1)throw new Bt;if(i+1<r){var o=n.getAlphanumericCode(e.charCodeAt(i+1));if(o===-1)throw new Bt;t.appendBits(a*45+o,11),i+=2}else t.appendBits(a,6),i++}},n.append8BitBytes=function(e,t,r){var i;try{i=oi.encode(e,r)}catch(u){throw new Bt(u)}for(var a=0,o=i.length;a!==o;a++){var c=i[a];t.appendBits(c,8)}},n.appendKanjiBytes=function(e,t){var r;try{r=oi.encode(e,Sn.SJIS)}catch(g){throw new Bt(g)}for(var i=r.length,a=0;a<i;a+=2){var o=r[a]&255,c=r[a+1]&255,u=o<<8&4294967295|c,h=-1;if(u>=33088&&u<=40956?h=u-33088:u>=57408&&u<=60351&&(h=u-49472),h===-1)throw new Bt("Invalid byte sequence");var p=(h>>8)*192+(h&255);t.appendBits(p,13)}},n.appendECI=function(e,t){t.appendBits(Vt.ECI.getBits(),4),t.appendBits(e.getValue(),8)},n.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),n.DEFAULT_BYTE_MODE_ENCODING=Sn.UTF8.getName(),n})();var YL=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})();(function(n){YL(e,n);function e(t,r,i,a,o,c,u,h){var p=n.call(this,c,u)||this;if(p.yuvData=t,p.dataWidth=r,p.dataHeight=i,p.left=a,p.top=o,a+c>r||o+u>i)throw new Pe("Crop rectangle does not fit within image data.");return h&&p.reverseHorizontal(c,u),p}return e.prototype.getRow=function(t,r){if(t<0||t>=this.getHeight())throw new Pe("Requested row is outside the image: "+t);var i=this.getWidth();(r==null||r.length<i)&&(r=new Uint8ClampedArray(i));var a=(t+this.top)*this.dataWidth+this.left;return Pt.arraycopy(this.yuvData,a,r,0,i),r},e.prototype.getMatrix=function(){var t=this.getWidth(),r=this.getHeight();if(t===this.dataWidth&&r===this.dataHeight)return this.yuvData;var i=t*r,a=new Uint8ClampedArray(i),o=this.top*this.dataWidth+this.left;if(t===this.dataWidth)return Pt.arraycopy(this.yuvData,o,a,0,i),a;for(var c=0;c<r;c++){var u=c*t;Pt.arraycopy(this.yuvData,o,a,u,t),o+=this.dataWidth}return a},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(t,r,i,a){return new e(this.yuvData,this.dataWidth,this.dataHeight,this.left+t,this.top+r,i,a,!1)},e.prototype.renderThumbnail=function(){for(var t=this.getWidth()/e.THUMBNAIL_SCALE_FACTOR,r=this.getHeight()/e.THUMBNAIL_SCALE_FACTOR,i=new Int32Array(t*r),a=this.yuvData,o=this.top*this.dataWidth+this.left,c=0;c<r;c++){for(var u=c*t,h=0;h<t;h++){var p=a[o+h*e.THUMBNAIL_SCALE_FACTOR]&255;i[u+h]=4278190080|p*65793}o+=this.dataWidth*e.THUMBNAIL_SCALE_FACTOR}return i},e.prototype.getThumbnailWidth=function(){return this.getWidth()/e.THUMBNAIL_SCALE_FACTOR},e.prototype.getThumbnailHeight=function(){return this.getHeight()/e.THUMBNAIL_SCALE_FACTOR},e.prototype.reverseHorizontal=function(t,r){for(var i=this.yuvData,a=0,o=this.top*this.dataWidth+this.left;a<r;a++,o+=this.dataWidth)for(var c=o+t/2,u=o,h=o+t-1;u<c;u++,h--){var p=i[u];i[u]=i[h],i[h]=p}},e.prototype.invert=function(){return new c1(this)},e.THUMBNAIL_SCALE_FACTOR=2,e})(Hf);var KL=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})();(function(n){KL(e,n);function e(t,r,i,a,o,c,u){var h=n.call(this,r,i)||this;if(h.dataWidth=a,h.dataHeight=o,h.left=c,h.top=u,t.BYTES_PER_ELEMENT===4){for(var p=r*i,g=new Uint8ClampedArray(p),_=0;_<p;_++){var E=t[_],A=E>>16&255,S=E>>7&510,O=E&255;g[_]=(A+S+O)/4&255}h.luminances=g}else h.luminances=t;if(a===void 0&&(h.dataWidth=r),o===void 0&&(h.dataHeight=i),c===void 0&&(h.left=0),u===void 0&&(h.top=0),h.left+r>h.dataWidth||h.top+i>h.dataHeight)throw new Pe("Crop rectangle does not fit within image data.");return h}return e.prototype.getRow=function(t,r){if(t<0||t>=this.getHeight())throw new Pe("Requested row is outside the image: "+t);var i=this.getWidth();(r==null||r.length<i)&&(r=new Uint8ClampedArray(i));var a=(t+this.top)*this.dataWidth+this.left;return Pt.arraycopy(this.luminances,a,r,0,i),r},e.prototype.getMatrix=function(){var t=this.getWidth(),r=this.getHeight();if(t===this.dataWidth&&r===this.dataHeight)return this.luminances;var i=t*r,a=new Uint8ClampedArray(i),o=this.top*this.dataWidth+this.left;if(t===this.dataWidth)return Pt.arraycopy(this.luminances,o,a,0,i),a;for(var c=0;c<r;c++){var u=c*t;Pt.arraycopy(this.luminances,o,a,u,t),o+=this.dataWidth}return a},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(t,r,i,a){return new e(this.luminances,i,a,this.dataWidth,this.dataHeight,this.left+t,this.top+r)},e.prototype.invert=function(){return new c1(this)},e})(Hf);var WL=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),QL=(function(n){WL(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.forName=function(t){return this.getCharacterSetECIByName(t)},e})(Sn),ZL=(function(){function n(){}return n.ISO_8859_1=Sn.ISO8859_1,n})(),sv,JL=301,ej=function(n,e){for(var t=1,r=0;r<255;r++)e[r]=t,n[t]=r,t*=2,t>=256&&(t^=JL);return{LOG:n,ALOG:e}};sv=ej([],[]),sv.LOG;sv.ALOG;var jA;(function(n){n[n.FORCE_NONE=0]="FORCE_NONE",n[n.FORCE_SQUARE=1]="FORCE_SQUARE",n[n.FORCE_RECTANGLE=2]="FORCE_RECTANGLE"})(jA||(jA={}));var BA=129,m3=230,tj=231,nj=235,rj=236,ij=237,aj=238,sj=239,oj=240,Fm=254,lj=254,VA="[)>05",FA="[)>06",UA="",wt=0,Yn=1,hr=2,An=3,Mn=4,rr=5,cj=(function(){function n(){}return n.prototype.getEncodingMode=function(){return wt},n.prototype.encode=function(e){var t=Si.determineConsecutiveDigitCount(e.getMessage(),e.pos);if(t>=2)e.writeCodeword(this.encodeASCIIDigits(e.getMessage().charCodeAt(e.pos),e.getMessage().charCodeAt(e.pos+1))),e.pos+=2;else{var r=e.getCurrentChar(),i=Si.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(i!==this.getEncodingMode())switch(i){case rr:e.writeCodeword(tj),e.signalEncoderChange(rr);return;case Yn:e.writeCodeword(m3),e.signalEncoderChange(Yn);return;case An:e.writeCodeword(aj),e.signalEncoderChange(An);break;case hr:e.writeCodeword(sj),e.signalEncoderChange(hr);break;case Mn:e.writeCodeword(oj),e.signalEncoderChange(Mn);break;default:throw new Error("Illegal mode: "+i)}else Si.isExtendedASCII(r)?(e.writeCodeword(nj),e.writeCodeword(r-128+1),e.pos++):(e.writeCodeword(r+1),e.pos++)}},n.prototype.encodeASCIIDigits=function(e,t){if(Si.isDigit(e)&&Si.isDigit(t)){var r=(e-48)*10+(t-48);return r+130}throw new Error("not digits: "+e+t)},n})(),uj=(function(){function n(){}return n.prototype.getEncodingMode=function(){return rr},n.prototype.encode=function(e){var t=new $e;for(t.append(0);e.hasMoreCharacters();){var r=e.getCurrentChar();t.append(r),e.pos++;var i=Si.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(i!==this.getEncodingMode()){e.signalEncoderChange(wt);break}}var a=t.length()-1,o=1,c=e.getCodewordCount()+a+o;e.updateSymbolInfo(c);var u=e.getSymbolInfo().getDataCapacity()-c>0;if(e.hasMoreCharacters()||u)if(a<=249)t.setCharAt(0,at.getCharAt(a));else if(a<=1555)t.setCharAt(0,at.getCharAt(Math.floor(a/250)+249)),t.insert(1,at.getCharAt(a%250));else throw new Error("Message length not in valid ranges: "+a);for(var h=0,r=t.length();h<r;h++)e.writeCodeword(this.randomize255State(t.charAt(h).charCodeAt(0),e.getCodewordCount()+1))},n.prototype.randomize255State=function(e,t){var r=149*t%255+1,i=e+r;return i<=255?i:i-256},n})(),Py=(function(){function n(){}return n.prototype.getEncodingMode=function(){return Yn},n.prototype.encodeMaximal=function(e){for(var t=new $e,r=0,i=e.pos,a=0;e.hasMoreCharacters();){var o=e.getCurrentChar();e.pos++,r=this.encodeChar(o,t),t.length()%3===0&&(i=e.pos,a=t.length())}if(a!==t.length()){var c=Math.floor(t.length()/3*2),u=Math.floor(e.getCodewordCount()+c+1);e.updateSymbolInfo(u);var h=e.getSymbolInfo().getDataCapacity()-u,p=Math.floor(t.length()%3);(p===2&&h!==2||p===1&&(r>3||h!==1))&&(e.pos=i)}t.length()>0&&e.writeCodeword(m3),this.handleEOD(e,t)},n.prototype.encode=function(e){for(var t=new $e;e.hasMoreCharacters();){var r=e.getCurrentChar();e.pos++;var i=this.encodeChar(r,t),a=Math.floor(t.length()/3)*2,o=e.getCodewordCount()+a;e.updateSymbolInfo(o);var c=e.getSymbolInfo().getDataCapacity()-o;if(!e.hasMoreCharacters()){var u=new $e;for(t.length()%3===2&&c!==2&&(i=this.backtrackOneCharacter(e,t,u,i));t.length()%3===1&&(i>3||c!==1);)i=this.backtrackOneCharacter(e,t,u,i);break}var h=t.length();if(h%3===0){var p=Si.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(p!==this.getEncodingMode()){e.signalEncoderChange(wt);break}}}this.handleEOD(e,t)},n.prototype.backtrackOneCharacter=function(e,t,r,i){var a=t.length(),o=t.toString().substring(0,a-i);t.setLengthToZero(),t.append(o),e.pos--;var c=e.getCurrentChar();return i=this.encodeChar(c,r),e.resetSymbolInfo(),i},n.prototype.writeNextTriplet=function(e,t){e.writeCodewords(this.encodeToCodewords(t.toString()));var r=t.toString().substring(3);t.setLengthToZero(),t.append(r)},n.prototype.handleEOD=function(e,t){var r=Math.floor(t.length()/3*2),i=t.length()%3,a=e.getCodewordCount()+r;e.updateSymbolInfo(a);var o=e.getSymbolInfo().getDataCapacity()-a;if(i===2){for(t.append("\0");t.length()>=3;)this.writeNextTriplet(e,t);e.hasMoreCharacters()&&e.writeCodeword(Fm)}else if(o===1&&i===1){for(;t.length()>=3;)this.writeNextTriplet(e,t);e.hasMoreCharacters()&&e.writeCodeword(Fm),e.pos--}else if(i===0){for(;t.length()>=3;)this.writeNextTriplet(e,t);(o>0||e.hasMoreCharacters())&&e.writeCodeword(Fm)}else throw new Error("Unexpected case. Please report!");e.signalEncoderChange(wt)},n.prototype.encodeChar=function(e,t){if(e===32)return t.append(3),1;if(e>=48&&e<=57)return t.append(e-48+4),1;if(e>=65&&e<=90)return t.append(e-65+14),1;if(e<32)return t.append(0),t.append(e),2;if(e<=47)return t.append(1),t.append(e-33),2;if(e<=64)return t.append(1),t.append(e-58+15),2;if(e<=95)return t.append(1),t.append(e-91+22),2;if(e<=127)return t.append(2),t.append(e-96),2;t.append("1");var r=2;return r+=this.encodeChar(e-128,t),r},n.prototype.encodeToCodewords=function(e){var t=1600*e.charCodeAt(0)+40*e.charCodeAt(1)+e.charCodeAt(2)+1,r=t/256,i=t%256,a=new $e;return a.append(r),a.append(i),a.toString()},n})(),fj=(function(){function n(){}return n.prototype.getEncodingMode=function(){return Mn},n.prototype.encode=function(e){for(var t=new $e;e.hasMoreCharacters();){var r=e.getCurrentChar();this.encodeChar(r,t),e.pos++;var i=t.length();if(i>=4){e.writeCodewords(this.encodeToCodewords(t.toString()));var a=t.toString().substring(4);t.setLengthToZero(),t.append(a);var o=Si.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(o!==this.getEncodingMode()){e.signalEncoderChange(wt);break}}}t.append(at.getCharAt(31)),this.handleEOD(e,t)},n.prototype.handleEOD=function(e,t){try{var r=t.length();if(r===0)return;if(r===1){e.updateSymbolInfo();var i=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount(),a=e.getRemainingCharacters();if(a>i&&(e.updateSymbolInfo(e.getCodewordCount()+1),i=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount()),a<=i&&i<=2)return}if(r>4)throw new Error("Count must not exceed 4");var o=r-1,c=this.encodeToCodewords(t.toString()),u=!e.hasMoreCharacters(),h=u&&o<=2;if(o<=2){e.updateSymbolInfo(e.getCodewordCount()+o);var i=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount();i>=3&&(h=!1,e.updateSymbolInfo(e.getCodewordCount()+c.length))}h?(e.resetSymbolInfo(),e.pos-=o):e.writeCodewords(c)}finally{e.signalEncoderChange(wt)}},n.prototype.encodeChar=function(e,t){e>=32&&e<=63?t.append(e):e>=64&&e<=94?t.append(at.getCharAt(e-64)):Si.illegalCharacter(at.getCharAt(e))},n.prototype.encodeToCodewords=function(e){var t=e.length;if(t===0)throw new Error("StringBuilder must not be empty");var r=e.charAt(0).charCodeAt(0),i=t>=2?e.charAt(1).charCodeAt(0):0,a=t>=3?e.charAt(2).charCodeAt(0):0,o=t>=4?e.charAt(3).charCodeAt(0):0,c=(r<<18)+(i<<12)+(a<<6)+o,u=c>>16&255,h=c>>8&255,p=c&255,g=new $e;return g.append(u),t>=2&&g.append(h),t>=3&&g.append(p),g.toString()},n})(),hj=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),dj=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},mt=(function(){function n(e,t,r,i,a,o,c,u){c===void 0&&(c=0),u===void 0&&(u=0),this.rectangular=e,this.dataCapacity=t,this.errorCodewords=r,this.matrixWidth=i,this.matrixHeight=a,this.dataRegions=o,this.rsBlockData=c,this.rsBlockError=u}return n.lookup=function(e,t,r,i,a){var o,c;t===void 0&&(t=0),r===void 0&&(r=null),i===void 0&&(i=null),a===void 0&&(a=!0);try{for(var u=dj(mj),h=u.next();!h.done;h=u.next()){var p=h.value;if(!(t===1&&p.rectangular)&&!(t===2&&!p.rectangular)&&!(r!=null&&(p.getSymbolWidth()<r.getWidth()||p.getSymbolHeight()<r.getHeight()))&&!(i!=null&&(p.getSymbolWidth()>i.getWidth()||p.getSymbolHeight()>i.getHeight()))&&e<=p.dataCapacity)return p}}catch(g){o={error:g}}finally{try{h&&!h.done&&(c=u.return)&&c.call(u)}finally{if(o)throw o.error}}if(a)throw new Error("Can't find a symbol arrangement that matches the message. Data codewords: "+e);return null},n.prototype.getHorizontalDataRegions=function(){switch(this.dataRegions){case 1:return 1;case 2:case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},n.prototype.getVerticalDataRegions=function(){switch(this.dataRegions){case 1:case 2:return 1;case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},n.prototype.getSymbolDataWidth=function(){return this.getHorizontalDataRegions()*this.matrixWidth},n.prototype.getSymbolDataHeight=function(){return this.getVerticalDataRegions()*this.matrixHeight},n.prototype.getSymbolWidth=function(){return this.getSymbolDataWidth()+this.getHorizontalDataRegions()*2},n.prototype.getSymbolHeight=function(){return this.getSymbolDataHeight()+this.getVerticalDataRegions()*2},n.prototype.getCodewordCount=function(){return this.dataCapacity+this.errorCodewords},n.prototype.getInterleavedBlockCount=function(){return this.rsBlockData?this.dataCapacity/this.rsBlockData:1},n.prototype.getDataCapacity=function(){return this.dataCapacity},n.prototype.getErrorCodewords=function(){return this.errorCodewords},n.prototype.getDataLengthForInterleavedBlock=function(e){return this.rsBlockData},n.prototype.getErrorLengthForInterleavedBlock=function(e){return this.rsBlockError},n})(),pj=(function(n){hj(e,n);function e(){return n.call(this,!1,1558,620,22,22,36,-1,62)||this}return e.prototype.getInterleavedBlockCount=function(){return 10},e.prototype.getDataLengthForInterleavedBlock=function(t){return t<=8?156:155},e})(mt),mj=[new mt(!1,3,5,8,8,1),new mt(!1,5,7,10,10,1),new mt(!0,5,7,16,6,1),new mt(!1,8,10,12,12,1),new mt(!0,10,11,14,6,2),new mt(!1,12,12,14,14,1),new mt(!0,16,14,24,10,1),new mt(!1,18,14,16,16,1),new mt(!1,22,18,18,18,1),new mt(!0,22,18,16,10,2),new mt(!1,30,20,20,20,1),new mt(!0,32,24,16,14,2),new mt(!1,36,24,22,22,1),new mt(!1,44,28,24,24,1),new mt(!0,49,28,22,14,2),new mt(!1,62,36,14,14,4),new mt(!1,86,42,16,16,4),new mt(!1,114,48,18,18,4),new mt(!1,144,56,20,20,4),new mt(!1,174,68,22,22,4),new mt(!1,204,84,24,24,4,102,42),new mt(!1,280,112,14,14,16,140,56),new mt(!1,368,144,16,16,16,92,36),new mt(!1,456,192,18,18,16,114,48),new mt(!1,576,224,20,20,16,144,56),new mt(!1,696,272,22,22,16,174,68),new mt(!1,816,336,24,24,16,136,56),new mt(!1,1050,408,18,18,36,175,68),new mt(!1,1304,496,20,20,36,163,62),new pj],gj=(function(){function n(e){this.msg=e,this.pos=0,this.skipAtEnd=0;for(var t=e.split("").map(function(c){return c.charCodeAt(0)}),r=new $e,i=0,a=t.length;i<a;i++){var o=String.fromCharCode(t[i]&255);if(o==="?"&&e.charAt(i)!=="?")throw new Error("Message contains characters outside ISO-8859-1 encoding.");r.append(o)}this.msg=r.toString(),this.shape=0,this.codewords=new $e,this.newEncoding=-1}return n.prototype.setSymbolShape=function(e){this.shape=e},n.prototype.setSizeConstraints=function(e,t){this.minSize=e,this.maxSize=t},n.prototype.getMessage=function(){return this.msg},n.prototype.setSkipAtEnd=function(e){this.skipAtEnd=e},n.prototype.getCurrentChar=function(){return this.msg.charCodeAt(this.pos)},n.prototype.getCurrent=function(){return this.msg.charCodeAt(this.pos)},n.prototype.getCodewords=function(){return this.codewords},n.prototype.writeCodewords=function(e){this.codewords.append(e)},n.prototype.writeCodeword=function(e){this.codewords.append(e)},n.prototype.getCodewordCount=function(){return this.codewords.length()},n.prototype.getNewEncoding=function(){return this.newEncoding},n.prototype.signalEncoderChange=function(e){this.newEncoding=e},n.prototype.resetEncoderSignal=function(){this.newEncoding=-1},n.prototype.hasMoreCharacters=function(){return this.pos<this.getTotalMessageCharCount()},n.prototype.getTotalMessageCharCount=function(){return this.msg.length-this.skipAtEnd},n.prototype.getRemainingCharacters=function(){return this.getTotalMessageCharCount()-this.pos},n.prototype.getSymbolInfo=function(){return this.symbolInfo},n.prototype.updateSymbolInfo=function(e){e===void 0&&(e=this.getCodewordCount()),(this.symbolInfo==null||e>this.symbolInfo.getDataCapacity())&&(this.symbolInfo=mt.lookup(e,this.shape,this.minSize,this.maxSize,!0))},n.prototype.resetSymbolInfo=function(){this.symbolInfo=null},n})(),vj=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),yj=(function(n){vj(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getEncodingMode=function(){return An},e.prototype.encode=function(t){for(var r=new $e;t.hasMoreCharacters();){var i=t.getCurrentChar();t.pos++,this.encodeChar(i,r);var a=r.length();if(a%3===0){this.writeNextTriplet(t,r);var o=Si.lookAheadTest(t.getMessage(),t.pos,this.getEncodingMode());if(o!==this.getEncodingMode()){t.signalEncoderChange(wt);break}}}this.handleEOD(t,r)},e.prototype.encodeChar=function(t,r){switch(t){case 13:r.append(0);break;case 42:r.append(1);break;case 62:r.append(2);break;case 32:r.append(3);break;default:t>=48&&t<=57?r.append(t-48+4):t>=65&&t<=90?r.append(t-65+14):Si.illegalCharacter(at.getCharAt(t));break}return 1},e.prototype.handleEOD=function(t,r){t.updateSymbolInfo();var i=t.getSymbolInfo().getDataCapacity()-t.getCodewordCount(),a=r.length();t.pos-=a,(t.getRemainingCharacters()>1||i>1||t.getRemainingCharacters()!==i)&&t.writeCodeword(lj),t.getNewEncoding()<0&&t.signalEncoderChange(wt)},e})(Py),_j=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),xj=(function(n){_j(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getEncodingMode=function(){return hr},e.prototype.encodeChar=function(t,r){if(t===32)return r.append(3),1;if(t>=48&&t<=57)return r.append(t-48+4),1;if(t>=97&&t<=122)return r.append(t-97+14),1;if(t<32)return r.append(0),r.append(t),2;if(t<=47)return r.append(1),r.append(t-33),2;if(t<=64)return r.append(1),r.append(t-58+15),2;if(t>=91&&t<=95)return r.append(1),r.append(t-91+22),2;if(t===96)return r.append(2),r.append(0),2;if(t<=90)return r.append(2),r.append(t-65+1),2;if(t<=127)return r.append(2),r.append(t-123+27),2;r.append("1");var i=2;return i+=this.encodeChar(t-128,r),i},e})(Py),Si=(function(){function n(){}return n.randomize253State=function(e){var t=149*e%253+1,r=BA+t;return r<=254?r:r-254},n.encodeHighLevel=function(e,t,r,i,a){t===void 0&&(t=0),r===void 0&&(r=null),i===void 0&&(i=null),a===void 0&&(a=!1);var o=new Py,c=[new cj,o,new xj,new yj,new fj,new uj],u=new gj(e);u.setSymbolShape(t),u.setSizeConstraints(r,i),e.startsWith(VA)&&e.endsWith(UA)?(u.writeCodeword(rj),u.setSkipAtEnd(2),u.pos+=VA.length):e.startsWith(FA)&&e.endsWith(UA)&&(u.writeCodeword(ij),u.setSkipAtEnd(2),u.pos+=FA.length);var h=wt;for(a&&(o.encodeMaximal(u),h=u.getNewEncoding(),u.resetEncoderSignal());u.hasMoreCharacters();)c[h].encode(u),u.getNewEncoding()>=0&&(h=u.getNewEncoding(),u.resetEncoderSignal());var p=u.getCodewordCount();u.updateSymbolInfo();var g=u.getSymbolInfo().getDataCapacity();p<g&&h!==wt&&h!==rr&&h!==Mn&&u.writeCodeword("þ");var _=u.getCodewords();for(_.length()<g&&_.append(BA);_.length()<g;)_.append(this.randomize253State(_.length()+1));return u.getCodewords().toString()},n.lookAheadTest=function(e,t,r){var i=this.lookAheadTestIntern(e,t,r);if(r===An&&i===An){for(var a=Math.min(t+3,e.length),o=t;o<a;o++)if(!this.isNativeX12(e.charCodeAt(o)))return wt}else if(r===Mn&&i===Mn){for(var a=Math.min(t+4,e.length),o=t;o<a;o++)if(!this.isNativeEDIFACT(e.charCodeAt(o)))return wt}return i},n.lookAheadTestIntern=function(e,t,r){if(t>=e.length)return r;var i;r===wt?i=[0,1,1,1,1,1.25]:(i=[1,2,2,2,2,2.25],i[r]=0);for(var a=0,o=new Uint8Array(6),c=[];;){if(t+a===e.length){Cn.fill(o,0),Cn.fill(c,0);var u=this.findMinimums(i,c,Xe.MAX_VALUE,o),h=this.getMinimumCount(o);if(c[wt]===u)return wt;if(h===1){if(o[rr]>0)return rr;if(o[Mn]>0)return Mn;if(o[hr]>0)return hr;if(o[An]>0)return An}return Yn}var p=e.charCodeAt(t+a);if(a++,this.isDigit(p)?i[wt]+=.5:this.isExtendedASCII(p)?(i[wt]=Math.ceil(i[wt]),i[wt]+=2):(i[wt]=Math.ceil(i[wt]),i[wt]++),this.isNativeC40(p)?i[Yn]+=2/3:this.isExtendedASCII(p)?i[Yn]+=8/3:i[Yn]+=4/3,this.isNativeText(p)?i[hr]+=2/3:this.isExtendedASCII(p)?i[hr]+=8/3:i[hr]+=4/3,this.isNativeX12(p)?i[An]+=2/3:this.isExtendedASCII(p)?i[An]+=13/3:i[An]+=10/3,this.isNativeEDIFACT(p)?i[Mn]+=3/4:this.isExtendedASCII(p)?i[Mn]+=17/4:i[Mn]+=13/4,this.isSpecialB256(p)?i[rr]+=4:i[rr]++,a>=4){if(Cn.fill(o,0),Cn.fill(c,0),this.findMinimums(i,c,Xe.MAX_VALUE,o),c[wt]<this.min(c[rr],c[Yn],c[hr],c[An],c[Mn]))return wt;if(c[rr]<c[wt]||c[rr]+1<this.min(c[Yn],c[hr],c[An],c[Mn]))return rr;if(c[Mn]+1<this.min(c[rr],c[Yn],c[hr],c[An],c[wt]))return Mn;if(c[hr]+1<this.min(c[rr],c[Yn],c[Mn],c[An],c[wt]))return hr;if(c[An]+1<this.min(c[rr],c[Yn],c[Mn],c[hr],c[wt]))return An;if(c[Yn]+1<this.min(c[wt],c[rr],c[Mn],c[hr])){if(c[Yn]<c[An])return Yn;if(c[Yn]===c[An]){for(var g=t+a+1;g<e.length;){var _=e.charCodeAt(g);if(this.isX12TermSep(_))return An;if(!this.isNativeX12(_))break;g++}return Yn}}}}},n.min=function(e,t,r,i,a){var o=Math.min(e,Math.min(t,Math.min(r,i)));return a===void 0?o:Math.min(o,a)},n.findMinimums=function(e,t,r,i){for(var a=0;a<6;a++){var o=t[a]=Math.ceil(e[a]);r>o&&(r=o,Cn.fill(i,0)),r===o&&(i[a]=i[a]+1)}return r},n.getMinimumCount=function(e){for(var t=0,r=0;r<6;r++)t+=e[r];return t||0},n.isDigit=function(e){return e>=48&&e<=57},n.isExtendedASCII=function(e){return e>=128&&e<=255},n.isNativeC40=function(e){return e===32||e>=48&&e<=57||e>=65&&e<=90},n.isNativeText=function(e){return e===32||e>=48&&e<=57||e>=97&&e<=122},n.isNativeX12=function(e){return this.isX12TermSep(e)||e===32||e>=48&&e<=57||e>=65&&e<=90},n.isX12TermSep=function(e){return e===13||e===42||e===62},n.isNativeEDIFACT=function(e){return e>=32&&e<=94},n.isSpecialB256=function(e){return!1},n.determineConsecutiveDigitCount=function(e,t){t===void 0&&(t=0);for(var r=e.length,i=t;i<r&&this.isDigit(e.charCodeAt(i));)i++;return i-t},n.illegalCharacter=function(e){var t=Xe.toHexString(e.charCodeAt(0));throw t="0000".substring(0,4-t.length)+t,new Error("Illegal character: "+e+" (0x"+t+")")},n})(),Um=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},zA=(function(){function n(e){this.charset=e,this.name=e.name}return n.prototype.canEncode=function(e){try{return oi.encode(e,this.charset)!=null}catch{return!1}},n})(),Ej=(function(){function n(e,t,r){var i,a,o,c,u,h;this.ENCODERS=["IBM437","ISO-8859-2","ISO-8859-3","ISO-8859-4","ISO-8859-5","ISO-8859-6","ISO-8859-7","ISO-8859-8","ISO-8859-9","ISO-8859-10","ISO-8859-11","ISO-8859-13","ISO-8859-14","ISO-8859-15","ISO-8859-16","windows-1250","windows-1251","windows-1252","windows-1256","Shift_JIS"].map(function(I){return new zA(QL.forName(I))}),this.encoders=[];var p=[];p.push(new zA(ZL.ISO_8859_1));for(var g=t!=null&&t.name.startsWith("UTF"),_=0;_<e.length;_++){var E=!1;try{for(var A=(i=void 0,Um(p)),S=A.next();!S.done;S=A.next()){var O=S.value,T=e.charAt(_),R=T.charCodeAt(0);if(R===r||O.canEncode(T)){E=!0;break}}}catch(I){i={error:I}}finally{try{S&&!S.done&&(a=A.return)&&a.call(A)}finally{if(i)throw i.error}}if(!E)try{for(var L=(o=void 0,Um(this.ENCODERS)),z=L.next();!z.done;z=L.next()){var O=z.value;if(O.canEncode(e.charAt(_))){p.push(O),E=!0;break}}}catch(I){o={error:I}}finally{try{z&&!z.done&&(c=L.return)&&c.call(L)}finally{if(o)throw o.error}}E||(g=!0)}if(p.length===1&&!g)this.encoders=[p[0]];else{this.encoders=[];var U=0;try{for(var G=Um(p),D=G.next();!D.done;D=G.next()){var O=D.value;this.encoders[U++]=O}}catch(I){u={error:I}}finally{try{D&&!D.done&&(h=G.return)&&h.call(G)}finally{if(u)throw u.error}}}var w=-1;if(t!=null){for(var _=0;_<this.encoders.length;_++)if(this.encoders[_]!=null&&t.name===this.encoders[_].name){w=_;break}}this.priorityEncoderIndex=w}return n.prototype.length=function(){return this.encoders.length},n.prototype.getCharsetName=function(e){if(!(e<this.length()))throw new Error("index must be less than length");return this.encoders[e].name},n.prototype.getCharset=function(e){if(!(e<this.length()))throw new Error("index must be less than length");return this.encoders[e].charset},n.prototype.getECIValue=function(e){return this.encoders[e].charset.getValueIdentifier()},n.prototype.getPriorityEncoderIndex=function(){return this.priorityEncoderIndex},n.prototype.canEncode=function(e,t){if(!(t<this.length()))throw new Error("index must be less than length");return!0},n.prototype.encode=function(e,t){if(!(t<this.length()))throw new Error("index must be less than length");return oi.encode(at.getCharAt(e),this.encoders[t].name)},n})(),wj=3,Aj=(function(){function n(e,t,r){this.fnc1=r;var i=new Ej(e,t,r);if(i.length()===1)for(var a=0;a<this.bytes.length;a++){var o=e.charAt(a).charCodeAt(0);this.bytes[a]=o===r?1e3:o}else this.bytes=this.encodeMinimally(e,i,r)}return n.prototype.getFNC1Character=function(){return this.fnc1},n.prototype.length=function(){return this.bytes.length},n.prototype.haveNCharacters=function(e,t){if(e+t-1>=this.bytes.length)return!1;for(var r=0;r<t;r++)if(this.isECI(e+r))return!1;return!0},n.prototype.charAt=function(e){if(e<0||e>=this.length())throw new Error(""+e);if(this.isECI(e))throw new Error("value at "+e+" is not a character but an ECI");return this.isFNC1(e)?this.fnc1:this.bytes[e]},n.prototype.subSequence=function(e,t){if(e<0||e>t||t>this.length())throw new Error(""+e);for(var r=new $e,i=e;i<t;i++){if(this.isECI(i))throw new Error("value at "+i+" is not a character but an ECI");r.append(this.charAt(i))}return r.toString()},n.prototype.isECI=function(e){if(e<0||e>=this.length())throw new Error(""+e);return this.bytes[e]>255&&this.bytes[e]<=999},n.prototype.isFNC1=function(e){if(e<0||e>=this.length())throw new Error(""+e);return this.bytes[e]===1e3},n.prototype.getECIValue=function(e){if(e<0||e>=this.length())throw new Error(""+e);if(!this.isECI(e))throw new Error("value at "+e+" is not an ECI but a character");return this.bytes[e]-256},n.prototype.addEdge=function(e,t,r){(e[t][r.encoderIndex]==null||e[t][r.encoderIndex].cachedTotalSize>r.cachedTotalSize)&&(e[t][r.encoderIndex]=r)},n.prototype.addEdges=function(e,t,r,i,a,o){var c=e.charAt(i).charCodeAt(0),u=0,h=t.length();t.getPriorityEncoderIndex()>=0&&(c===o||t.canEncode(c,t.getPriorityEncoderIndex()))&&(u=t.getPriorityEncoderIndex(),h=u+1);for(var p=u;p<h;p++)(c===o||t.canEncode(c,p))&&this.addEdge(r,i+1,new HA(c,t,p,a,o))},n.prototype.encodeMinimally=function(e,t,r){var i=e.length,a=new HA[i+1][t.length()];this.addEdges(e,t,a,0,null,r);for(var o=1;o<=i;o++){for(var c=0;c<t.length();c++)a[o][c]!=null&&o<i&&this.addEdges(e,t,a,o,a[o][c],r);for(var c=0;c<t.length();c++)a[o-1][c]=null}for(var u=-1,h=Xe.MAX_VALUE,c=0;c<t.length();c++)if(a[i][c]!=null){var p=a[i][c];p.cachedTotalSize<h&&(h=p.cachedTotalSize,u=c)}if(u<0)throw new Error('Failed to encode "'+e+'"');for(var g=[],_=a[i][u];_!=null;){if(_.isFNC1())g.unshift(1e3);else for(var E=t.encode(_.c,_.encoderIndex),o=E.length-1;o>=0;o--)g.unshift(E[o]&255);var A=_.previous===null?0:_.previous.encoderIndex;A!==_.encoderIndex&&g.unshift(256+t.getECIValue(_.encoderIndex)),_=_.previous}for(var S=[],o=0;o<S.length;o++)S[o]=g[o];return S},n})(),HA=(function(){function n(e,t,r,i,a){this.c=e,this.encoderSet=t,this.encoderIndex=r,this.previous=i,this.fnc1=a,this.c=e===a?1e3:e;var o=this.isFNC1()?1:t.encode(e,r).length,c=i===null?0:i.encoderIndex;c!==r&&(o+=wj),i!=null&&(o+=i.cachedTotalSize),this.cachedTotalSize=o}return n.prototype.isFNC1=function(){return this.c===1e3},n})(),bj=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})();var GA;(function(n){n[n.ASCII=0]="ASCII",n[n.C40=1]="C40",n[n.TEXT=2]="TEXT",n[n.X12=3]="X12",n[n.EDF=4]="EDF",n[n.B256=5]="B256"})(GA||(GA={}));(function(n){bj(e,n);function e(t,r,i,a,o){var c=n.call(this,t,r,i)||this;return c.shape=a,c.macroId=o,c}return e.prototype.getMacroId=function(){return this.macroId},e.prototype.getShapeHint=function(){return this.shape},e})(Aj);var Sj=(function(){function n(){}return n.prototype.isCompact=function(){return this.compact},n.prototype.setCompact=function(e){this.compact=e},n.prototype.getSize=function(){return this.size},n.prototype.setSize=function(e){this.size=e},n.prototype.getLayers=function(){return this.layers},n.prototype.setLayers=function(e){this.layers=e},n.prototype.getCodeWords=function(){return this.codeWords},n.prototype.setCodeWords=function(e){this.codeWords=e},n.prototype.getMatrix=function(){return this.matrix},n.prototype.setMatrix=function(e){this.matrix=e},n})(),qA=(function(){function n(){}return n.singletonList=function(e){return[e]},n.min=function(e,t){return e.sort(t)[0]},n})(),Cj=(function(){function n(e){this.previous=e}return n.prototype.getPrevious=function(){return this.previous},n})(),Tj=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),ky=(function(n){Tj(e,n);function e(t,r,i){var a=n.call(this,t)||this;return a.value=r,a.bitCount=i,a}return e.prototype.appendTo=function(t,r){t.appendBits(this.value,this.bitCount)},e.prototype.add=function(t,r){return new e(this,t,r)},e.prototype.addBinaryShift=function(t,r){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new e(this,t,r)},e.prototype.toString=function(){var t=this.value&(1<<this.bitCount)-1;return t|=1<<this.bitCount,"<"+Xe.toBinaryString(t|1<<this.bitCount).substring(1)+">"},e})(Cj),Ij=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Nj=(function(n){Ij(e,n);function e(t,r,i){var a=n.call(this,t,0,0)||this;return a.binaryShiftStart=r,a.binaryShiftByteCount=i,a}return e.prototype.appendTo=function(t,r){for(var i=0;i<this.binaryShiftByteCount;i++)(i===0||i===31&&this.binaryShiftByteCount<=62)&&(t.appendBits(31,5),this.binaryShiftByteCount>62?t.appendBits(this.binaryShiftByteCount-31,16):i===0?t.appendBits(Math.min(this.binaryShiftByteCount,31),5):t.appendBits(this.binaryShiftByteCount-31,5)),t.appendBits(r[this.binaryShiftStart+i],8)},e.prototype.addBinaryShift=function(t,r){return new e(this,t,r)},e.prototype.toString=function(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"},e})(ky);function Rj(n,e,t){return new Nj(n,e,t)}function qu(n,e,t){return new ky(n,e,t)}var Oj=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],$s=0,T0=1,ai=2,g3=3,sa=4,Dj=new ky(null,0,0),zm=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])],Mj=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};function Pj(n){var e,t;try{for(var r=Mj(n),i=r.next();!i.done;i=r.next()){var a=i.value;Cn.fill(a,-1)}}catch(o){e={error:o}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}return n[$s][sa]=0,n[T0][sa]=0,n[T0][$s]=28,n[g3][sa]=0,n[ai][sa]=0,n[ai][$s]=15,n}var v3=Pj(Cn.createInt32Array(6,6)),kj=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Lj=(function(){function n(e,t,r,i){this.token=e,this.mode=t,this.binaryShiftByteCount=r,this.bitCount=i}return n.prototype.getMode=function(){return this.mode},n.prototype.getToken=function(){return this.token},n.prototype.getBinaryShiftByteCount=function(){return this.binaryShiftByteCount},n.prototype.getBitCount=function(){return this.bitCount},n.prototype.latchAndAppend=function(e,t){var r=this.bitCount,i=this.token;if(e!==this.mode){var a=zm[this.mode][e];i=qu(i,a&65535,a>>16),r+=a>>16}var o=e===ai?4:5;return i=qu(i,t,o),new n(i,e,0,r+o)},n.prototype.shiftAndAppend=function(e,t){var r=this.token,i=this.mode===ai?4:5;return r=qu(r,v3[this.mode][e],i),r=qu(r,t,5),new n(r,this.mode,0,this.bitCount+i+5)},n.prototype.addBinaryShiftChar=function(e){var t=this.token,r=this.mode,i=this.bitCount;if(this.mode===sa||this.mode===ai){var a=zm[r][$s];t=qu(t,a&65535,a>>16),i+=a>>16,r=$s}var o=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,c=new n(t,r,this.binaryShiftByteCount+1,i+o);return c.binaryShiftByteCount===2078&&(c=c.endBinaryShift(e+1)),c},n.prototype.endBinaryShift=function(e){if(this.binaryShiftByteCount===0)return this;var t=this.token;return t=Rj(t,e-this.binaryShiftByteCount,this.binaryShiftByteCount),new n(t,this.mode,0,this.bitCount)},n.prototype.isBetterThanOrEqualTo=function(e){var t=this.bitCount+(zm[this.mode][e.mode]>>16);return this.binaryShiftByteCount<e.binaryShiftByteCount?t+=n.calculateBinaryShiftCost(e)-n.calculateBinaryShiftCost(this):this.binaryShiftByteCount>e.binaryShiftByteCount&&e.binaryShiftByteCount>0&&(t+=10),t<=e.bitCount},n.prototype.toBitArray=function(e){for(var t,r,i=[],a=this.endBinaryShift(e.length).token;a!==null;a=a.getPrevious())i.unshift(a);var o=new jn;try{for(var c=kj(i),u=c.next();!u.done;u=c.next()){var h=u.value;h.appendTo(o,e)}}catch(p){t={error:p}}finally{try{u&&!u.done&&(r=c.return)&&r.call(c)}finally{if(t)throw t.error}}return o},n.prototype.toString=function(){return at.format("%s bits=%d bytes=%d",Oj[this.mode],this.bitCount,this.binaryShiftByteCount)},n.calculateBinaryShiftCost=function(e){return e.binaryShiftByteCount>62?21:e.binaryShiftByteCount>31?20:e.binaryShiftByteCount>0?10:0},n.INITIAL_STATE=new n(Dj,$s,0,0),n})();function jj(n){var e=at.getCharCode(" "),t=at.getCharCode("."),r=at.getCharCode(",");n[$s][e]=1;for(var i=at.getCharCode("Z"),a=at.getCharCode("A"),o=a;o<=i;o++)n[$s][o]=o-a+2;n[T0][e]=1;for(var c=at.getCharCode("z"),u=at.getCharCode("a"),o=u;o<=c;o++)n[T0][o]=o-u+2;n[ai][e]=1;for(var h=at.getCharCode("9"),p=at.getCharCode("0"),o=p;o<=h;o++)n[ai][o]=o-p+2;n[ai][r]=12,n[ai][t]=13;for(var g=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""],_=0;_<g.length;_++)n[g3][at.getCharCode(g[_])]=_;for(var E=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"],_=0;_<E.length;_++)at.getCharCode(E[_])>0&&(n[sa][at.getCharCode(E[_])]=_);return n}var Hm=jj(Cn.createInt32Array(5,256)),Rd=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Bj=(function(){function n(e){this.text=e}return n.prototype.encode=function(){for(var e=at.getCharCode(" "),t=at.getCharCode(`
`),r=qA.singletonList(Lj.INITIAL_STATE),i=0;i<this.text.length;i++){var a=void 0,o=i+1<this.text.length?this.text[i+1]:0;switch(this.text[i]){case at.getCharCode("\r"):a=o===t?2:0;break;case at.getCharCode("."):a=o===e?3:0;break;case at.getCharCode(","):a=o===e?4:0;break;case at.getCharCode(":"):a=o===e?5:0;break;default:a=0}a>0?(r=n.updateStateListForPair(r,i,a),i++):r=this.updateStateListForChar(r,i)}var c=qA.min(r,function(u,h){return u.getBitCount()-h.getBitCount()});return c.toBitArray(this.text)},n.prototype.updateStateListForChar=function(e,t){var r,i,a=[];try{for(var o=Rd(e),c=o.next();!c.done;c=o.next()){var u=c.value;this.updateStateForChar(u,t,a)}}catch(h){r={error:h}}finally{try{c&&!c.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}return n.simplifyStates(a)},n.prototype.updateStateForChar=function(e,t,r){for(var i=this.text[t]&255,a=Hm[e.getMode()][i]>0,o=null,c=0;c<=sa;c++){var u=Hm[c][i];if(u>0){if(o==null&&(o=e.endBinaryShift(t)),!a||c===e.getMode()||c===ai){var h=o.latchAndAppend(c,u);r.push(h)}if(!a&&v3[e.getMode()][c]>=0){var p=o.shiftAndAppend(c,u);r.push(p)}}}if(e.getBinaryShiftByteCount()>0||Hm[e.getMode()][i]===0){var g=e.addBinaryShiftChar(t);r.push(g)}},n.updateStateListForPair=function(e,t,r){var i,a,o=[];try{for(var c=Rd(e),u=c.next();!u.done;u=c.next()){var h=u.value;this.updateStateForPair(h,t,r,o)}}catch(p){i={error:p}}finally{try{u&&!u.done&&(a=c.return)&&a.call(c)}finally{if(i)throw i.error}}return this.simplifyStates(o)},n.updateStateForPair=function(e,t,r,i){var a=e.endBinaryShift(t);if(i.push(a.latchAndAppend(sa,r)),e.getMode()!==sa&&i.push(a.shiftAndAppend(sa,r)),r===3||r===4){var o=a.latchAndAppend(ai,16-r).latchAndAppend(ai,1);i.push(o)}if(e.getBinaryShiftByteCount()>0){var c=e.addBinaryShiftChar(t).addBinaryShiftChar(t+1);i.push(c)}},n.simplifyStates=function(e){var t,r,i,a,o=[];try{for(var c=Rd(e),u=c.next();!u.done;u=c.next()){var h=u.value,p=!0,g=function(O){if(O.isBetterThanOrEqualTo(h))return p=!1,"break";h.isBetterThanOrEqualTo(O)&&(o=o.filter(function(T){return T!==O}))};try{for(var _=(i=void 0,Rd(o)),E=_.next();!E.done;E=_.next()){var A=E.value,S=g(A);if(S==="break")break}}catch(O){i={error:O}}finally{try{E&&!E.done&&(a=_.return)&&a.call(_)}finally{if(i)throw i.error}}p&&o.push(h)}}catch(O){t={error:O}}finally{try{u&&!u.done&&(r=c.return)&&r.call(c)}finally{if(t)throw t.error}}return o},n})(),Vj=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};(function(){function n(){}return n.encodeBytes=function(e){return n.encode(e,n.DEFAULT_EC_PERCENT,n.DEFAULT_AZTEC_LAYERS)},n.encode=function(e,t,r){var i=new Bj(e).encode(),a=Xe.truncDivision(i.getSize()*t,100)+11,o=i.getSize()+a,c,u,h,p,g;if(r!==n.DEFAULT_AZTEC_LAYERS){if(c=r<0,u=Math.abs(r),u>(c?n.MAX_NB_BITS_COMPACT:n.MAX_NB_BITS))throw new Pe(at.format("Illegal value %s for layers",r));h=n.totalBitsInLayer(u,c),p=n.WORD_SIZE[u];var _=h-h%p;if(g=n.stuffBits(i,p),g.getSize()+a>_)throw new Pe("Data to large for user specified layer");if(c&&g.getSize()>p*64)throw new Pe("Data to large for user specified layer")}else{p=0,g=null;for(var E=0;;E++){if(E>n.MAX_NB_BITS)throw new Pe("Data too large for an Aztec code");if(c=E<=3,u=c?E+1:E,h=n.totalBitsInLayer(u,c),!(o>h)){(g==null||p!==n.WORD_SIZE[u])&&(p=n.WORD_SIZE[u],g=n.stuffBits(i,p));var _=h-h%p;if(!(c&&g.getSize()>p*64)&&g.getSize()+a<=_)break}}}var A=n.generateCheckWords(g,h,p),S=g.getSize()/p,O=n.generateModeMessage(c,u,S),T=(c?11:14)+u*4,R=new Int32Array(T),L;if(c){L=T;for(var E=0;E<R.length;E++)R[E]=E}else{L=T+1+2*Xe.truncDivision(Xe.truncDivision(T,2)-1,15);for(var z=Xe.truncDivision(T,2),U=Xe.truncDivision(L,2),E=0;E<z;E++){var G=E+Xe.truncDivision(E,15);R[z-E-1]=U-G-1,R[z+E]=U+G+1}}for(var D=new pa(L),E=0,w=0;E<u;E++){for(var I=(u-E)*4+(c?9:12),M=0;M<I;M++)for(var j=M*2,V=0;V<2;V++)A.get(w+j+V)&&D.set(R[E*2+V],R[E*2+M]),A.get(w+I*2+j+V)&&D.set(R[E*2+M],R[T-1-E*2-V]),A.get(w+I*4+j+V)&&D.set(R[T-1-E*2-V],R[T-1-E*2-M]),A.get(w+I*6+j+V)&&D.set(R[T-1-E*2-M],R[E*2+V]);w+=I*8}if(n.drawModeMessage(D,c,L,O),c)n.drawBullsEye(D,Xe.truncDivision(L,2),5);else{n.drawBullsEye(D,Xe.truncDivision(L,2),7);for(var E=0,M=0;E<Xe.truncDivision(T,2)-1;E+=15,M+=16)for(var V=Xe.truncDivision(L,2)&1;V<L;V+=2)D.set(Xe.truncDivision(L,2)-M,V),D.set(Xe.truncDivision(L,2)+M,V),D.set(V,Xe.truncDivision(L,2)-M),D.set(V,Xe.truncDivision(L,2)+M)}var k=new Sj;return k.setCompact(c),k.setSize(L),k.setLayers(u),k.setCodeWords(S),k.setMatrix(D),k},n.drawBullsEye=function(e,t,r){for(var i=0;i<r;i+=2)for(var a=t-i;a<=t+i;a++)e.set(a,t-i),e.set(a,t+i),e.set(t-i,a),e.set(t+i,a);e.set(t-r,t-r),e.set(t-r+1,t-r),e.set(t-r,t-r+1),e.set(t+r,t-r),e.set(t+r,t-r+1),e.set(t+r,t+r-1)},n.generateModeMessage=function(e,t,r){var i=new jn;return e?(i.appendBits(t-1,2),i.appendBits(r-1,6),i=n.generateCheckWords(i,28,4)):(i.appendBits(t-1,5),i.appendBits(r-1,11),i=n.generateCheckWords(i,40,4)),i},n.drawModeMessage=function(e,t,r,i){var a=Xe.truncDivision(r,2);if(t)for(var o=0;o<7;o++){var c=a-3+o;i.get(o)&&e.set(c,a-5),i.get(o+7)&&e.set(a+5,c),i.get(20-o)&&e.set(c,a+5),i.get(27-o)&&e.set(a-5,c)}else for(var o=0;o<10;o++){var c=a-5+o+Xe.truncDivision(o,5);i.get(o)&&e.set(c,a-7),i.get(o+10)&&e.set(a+7,c),i.get(29-o)&&e.set(c,a+7),i.get(39-o)&&e.set(a-7,c)}},n.generateCheckWords=function(e,t,r){var i,a,o=e.getSize()/r,c=new p3(n.getGF(r)),u=Xe.truncDivision(t,r),h=n.bitsToWords(e,r,u);c.encode(h,u-o);var p=t%r,g=new jn;g.appendBits(0,p);try{for(var _=Vj(Array.from(h)),E=_.next();!E.done;E=_.next()){var A=E.value;g.appendBits(A,r)}}catch(S){i={error:S}}finally{try{E&&!E.done&&(a=_.return)&&a.call(_)}finally{if(i)throw i.error}}return g},n.bitsToWords=function(e,t,r){var i=new Int32Array(r),a,o;for(a=0,o=e.getSize()/t;a<o;a++){for(var c=0,u=0;u<t;u++)c|=e.get(a*t+u)?1<<t-u-1:0;i[a]=c}return i},n.getGF=function(e){switch(e){case 4:return br.AZTEC_PARAM;case 6:return br.AZTEC_DATA_6;case 8:return br.AZTEC_DATA_8;case 10:return br.AZTEC_DATA_10;case 12:return br.AZTEC_DATA_12;default:throw new Pe("Unsupported word size "+e)}},n.stuffBits=function(e,t){for(var r=new jn,i=e.getSize(),a=(1<<t)-2,o=0;o<i;o+=t){for(var c=0,u=0;u<t;u++)(o+u>=i||e.get(o+u))&&(c|=1<<t-1-u);(c&a)===a?(r.appendBits(c&a,t),o--):(c&a)===0?(r.appendBits(c|1,t),o--):r.appendBits(c,t)}return r},n.totalBitsInLayer=function(e,t){return((t?88:112)+16*e)*e},n.DEFAULT_EC_PERCENT=33,n.DEFAULT_AZTEC_LAYERS=0,n.MAX_NB_BITS=32,n.MAX_NB_BITS_COMPACT=4,n.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]),n})();var Fj=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Uj=(function(n){Fj(e,n);function e(t){var r=n.call(this,t.width,t.height)||this;return r.canvas=t,r.tempCanvasElement=null,r.buffer=e.makeBufferFromCanvasImageData(t),r}return e.makeBufferFromCanvasImageData=function(t){var r;try{r=t.getContext("2d",{willReadFrequently:!0})}catch{r=t.getContext("2d")}if(!r)throw new Error("Couldn't get canvas context.");var i=r.getImageData(0,0,t.width,t.height);return e.toGrayscaleBuffer(i.data,t.width,t.height)},e.toGrayscaleBuffer=function(t,r,i){for(var a=new Uint8ClampedArray(r*i),o=0,c=0,u=t.length;o<u;o+=4,c++){var h=void 0,p=t[o+3];if(p===0)h=255;else{var g=t[o],_=t[o+1],E=t[o+2];h=306*g+601*_+117*E+512>>10}a[c]=h}return a},e.prototype.getRow=function(t,r){if(t<0||t>=this.getHeight())throw new Pe("Requested row is outside the image: "+t);var i=this.getWidth(),a=t*i;return r===null?r=this.buffer.slice(a,a+i):(r.length<i&&(r=new Uint8ClampedArray(i)),r.set(this.buffer.slice(a,a+i))),r},e.prototype.getMatrix=function(){return this.buffer},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(t,r,i,a){return n.prototype.crop.call(this,t,r,i,a),this},e.prototype.isRotateSupported=function(){return!0},e.prototype.rotateCounterClockwise=function(){return this.rotate(-90),this},e.prototype.rotateCounterClockwise45=function(){return this.rotate(-45),this},e.prototype.invert=function(){return new c1(this)},e.prototype.getTempCanvasElement=function(){if(this.tempCanvasElement===null){var t=this.canvas.ownerDocument.createElement("canvas");t.width=this.canvas.width,t.height=this.canvas.height,this.tempCanvasElement=t}return this.tempCanvasElement},e.prototype.rotate=function(t){var r=this.getTempCanvasElement();if(!r)throw new Error("Could not create a Canvas element.");var i=t*e.DEGREE_TO_RADIANS,a=this.canvas.width,o=this.canvas.height,c=Math.ceil(Math.abs(Math.cos(i))*a+Math.abs(Math.sin(i))*o),u=Math.ceil(Math.abs(Math.sin(i))*a+Math.abs(Math.cos(i))*o);r.width=c,r.height=u;var h=r.getContext("2d");if(!h)throw new Error("Could not create a Canvas Context element.");return h.translate(c/2,u/2),h.rotate(i),h.drawImage(this.canvas,a/-2,o/-2),this.buffer=e.makeBufferFromCanvasImageData(r),this},e.DEGREE_TO_RADIANS=Math.PI/180,e})(Hf);function y3(){return typeof navigator<"u"}function zj(){return y3()&&!!navigator.mediaDevices}function Hj(){return!!(zj()&&navigator.mediaDevices.enumerateDevices)}var cc=function(){return cc=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},cc.apply(this,arguments)},$t=function(n,e,t,r){function i(a){return a instanceof t?a:new t(function(o){o(a)})}return new(t||(t=Promise))(function(a,o){function c(p){try{h(r.next(p))}catch(g){o(g)}}function u(p){try{h(r.throw(p))}catch(g){o(g)}}function h(p){p.done?a(p.value):i(p.value).then(c,u)}h((r=r.apply(n,e||[])).next())})},Xt=function(n,e){var t={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,i,a,o;return o={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function c(h){return function(p){return u([h,p])}}function u(h){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,i&&(a=h[0]&2?i.return:h[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,h[1])).done)return a;switch(i=0,a&&(h=[h[0]&2,a.value]),h[0]){case 0:case 1:a=h;break;case 4:return t.label++,{value:h[1],done:!1};case 5:t.label++,i=h[1],h=[0];continue;case 7:h=t.ops.pop(),t.trys.pop();continue;default:if(a=t.trys,!(a=a.length>0&&a[a.length-1])&&(h[0]===6||h[0]===2)){t=0;continue}if(h[0]===3&&(!a||h[1]>a[0]&&h[1]<a[3])){t.label=h[1];break}if(h[0]===6&&t.label<a[1]){t.label=a[1],a=h;break}if(a&&t.label<a[2]){t.label=a[2],t.ops.push(h);break}a[2]&&t.ops.pop(),t.trys.pop();continue}h=e.call(n,t)}catch(p){h=[6,p],i=0}finally{r=a=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}},Gm=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Gj={delayBetweenScanAttempts:500,delayBetweenScanSuccess:500,tryPlayVideoTimeout:5e3},Vc=(function(){function n(e,t,r){t===void 0&&(t=new Map),r===void 0&&(r={}),this.reader=e,this.hints=t,this.options=cc(cc({},Gj),r)}return Object.defineProperty(n.prototype,"possibleFormats",{set:function(e){this.hints.set(kt.POSSIBLE_FORMATS,e)},enumerable:!1,configurable:!0}),n.addVideoSource=function(e,t){try{e.srcObject=t}catch{console.error("got interrupted by new loading request")}},n.mediaStreamSetTorch=function(e,t){return $t(this,void 0,void 0,function(){return Xt(this,function(r){switch(r.label){case 0:return[4,e.applyConstraints({advanced:[{fillLightMode:t?"flash":"off",torch:!!t}]})];case 1:return r.sent(),[2]}})})},n.mediaStreamIsTorchCompatible=function(e){var t,r,i=e.getVideoTracks();try{for(var a=Gm(i),o=a.next();!o.done;o=a.next()){var c=o.value;if(n.mediaStreamIsTorchCompatibleTrack(c))return!0}}catch(u){t={error:u}}finally{try{o&&!o.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}return!1},n.mediaStreamIsTorchCompatibleTrack=function(e){try{var t=e.getCapabilities();return"torch"in t}catch(r){return console.error(r),console.warn("Your browser may be not fully compatible with WebRTC and/or ImageCapture specs. Torch will not be available."),!1}},n.isVideoPlaying=function(e){return e.currentTime>0&&!e.paused&&e.readyState>2},n.getMediaElement=function(e,t){var r=document.getElementById(e);if(!r)throw new rn("element with id '".concat(e,"' not found"));if(r.nodeName.toLowerCase()!==t.toLowerCase())throw new rn("element with id '".concat(e,"' must be an ").concat(t," element"));return r},n.createVideoElement=function(e){if(e instanceof HTMLVideoElement)return e;if(typeof e=="string")return n.getMediaElement(e,"video");if(!e&&typeof document<"u"){var t=document.createElement("video");return t.width=200,t.height=200,t}throw new Error("Couldn't get videoElement from videoSource!")},n.prepareImageElement=function(e){if(e instanceof HTMLImageElement)return e;if(typeof e=="string")return n.getMediaElement(e,"img");if(typeof e>"u"){var t=document.createElement("img");return t.width=200,t.height=200,t}throw new Error("Couldn't get imageElement from imageSource!")},n.prepareVideoElement=function(e){var t=n.createVideoElement(e);return t.setAttribute("autoplay","true"),t.setAttribute("muted","true"),t.setAttribute("playsinline","true"),t},n.isImageLoaded=function(e){return!(!e.complete||e.naturalWidth===0)},n.createBinaryBitmapFromCanvas=function(e){var t=new Uj(e),r=new n3(t);return new t3(r)},n.drawImageOnCanvas=function(e,t){e.drawImage(t,0,0)},n.getMediaElementDimensions=function(e){if(e instanceof HTMLVideoElement)return{height:e.videoHeight,width:e.videoWidth};if(e instanceof HTMLImageElement)return{height:e.naturalHeight||e.height,width:e.naturalWidth||e.width};throw new Error("Couldn't find the Source's dimensions!")},n.createCaptureCanvas=function(e){if(!e)throw new rn("Cannot create a capture canvas without a media element.");if(typeof document>"u")throw new Error(`The page "Document" is undefined, make sure you're running in a browser.`);var t=document.createElement("canvas"),r=n.getMediaElementDimensions(e),i=r.width,a=r.height;return t.style.width=i+"px",t.style.height=a+"px",t.width=i,t.height=a,t},n.tryPlayVideo=function(e){return $t(this,void 0,void 0,function(){var t;return Xt(this,function(r){switch(r.label){case 0:if(e?.ended)return console.error("Trying to play video that has ended."),[2,!1];if(n.isVideoPlaying(e))return console.warn("Trying to play video that is already playing."),[2,!0];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,e.play()];case 2:return r.sent(),[2,!0];case 3:return t=r.sent(),console.warn("It was not possible to play the video.",t),[2,!1];case 4:return[2]}})})},n.createCanvasFromMediaElement=function(e){var t=n.createCaptureCanvas(e),r=t.getContext("2d");if(!r)throw new Error("Couldn't find Canvas 2D Context.");return n.drawImageOnCanvas(r,e),t},n.createBinaryBitmapFromMediaElem=function(e){var t=n.createCanvasFromMediaElement(e);return n.createBinaryBitmapFromCanvas(t)},n.destroyImageElement=function(e){e.src="",e.removeAttribute("src"),e=void 0},n.listVideoInputDevices=function(){return $t(this,void 0,void 0,function(){var e,t,r,i,a,o,c,u,h,p,g,_;return Xt(this,function(E){switch(E.label){case 0:if(!y3())throw new Error("Can't enumerate devices, navigator is not present.");if(!Hj())throw new Error("Can't enumerate devices, method not supported.");return[4,navigator.mediaDevices.enumerateDevices()];case 1:e=E.sent(),t=[];try{for(r=Gm(e),i=r.next();!i.done;i=r.next())a=i.value,o=a.kind==="video"?"videoinput":a.kind,o==="videoinput"&&(c=a.deviceId||a.id,u=a.label||"Video device ".concat(t.length+1),h=a.groupId,p={deviceId:c,label:u,kind:o,groupId:h},t.push(p))}catch(A){g={error:A}}finally{try{i&&!i.done&&(_=r.return)&&_.call(r)}finally{if(g)throw g.error}}return[2,t]}})})},n.findDeviceById=function(e){return $t(this,void 0,void 0,function(){var t;return Xt(this,function(r){switch(r.label){case 0:return[4,n.listVideoInputDevices()];case 1:return t=r.sent(),t?[2,t.find(function(i){return i.deviceId===e})]:[2]}})})},n.cleanVideoSource=function(e){if(e){try{e.srcObject=null}catch{e.src=""}e&&e.removeAttribute("src")}},n.releaseAllStreams=function(){n.streamTracker.length!==0&&n.streamTracker.forEach(function(e){e.getTracks().forEach(function(t){return t.stop()})}),n.streamTracker=[]},n.playVideoOnLoadAsync=function(e,t){return $t(this,void 0,void 0,function(){var r;return Xt(this,function(i){switch(i.label){case 0:return[4,n.tryPlayVideo(e)];case 1:return r=i.sent(),r?[2,!0]:[2,new Promise(function(a,o){var c=setTimeout(function(){n.isVideoPlaying(e)||(o(!1),e.removeEventListener("canplay",u))},t),u=function(){n.tryPlayVideo(e).then(function(h){clearTimeout(c),e.removeEventListener("canplay",u),a(h)})};e.addEventListener("canplay",u)})]}})})},n.attachStreamToVideo=function(e,t,r){return r===void 0&&(r=5e3),$t(this,void 0,void 0,function(){var i;return Xt(this,function(a){switch(a.label){case 0:return i=n.prepareVideoElement(t),n.addVideoSource(i,e),[4,n.playVideoOnLoadAsync(i,r)];case 1:return a.sent(),[2,i]}})})},n._waitImageLoad=function(e){return new Promise(function(t,r){var i=1e4,a=setTimeout(function(){n.isImageLoaded(e)||(e.removeEventListener("load",o),r())},i),o=function(){clearTimeout(a),e.removeEventListener("load",o),t()};e.addEventListener("load",o)})},n.checkCallbackFnOrThrow=function(e){if(!e)throw new rn("`callbackFn` is a required parameter, you cannot capture results without it.")},n.disposeMediaStream=function(e){e.getVideoTracks().forEach(function(t){return t.stop()}),e=void 0},n.prototype.decode=function(e){var t=n.createCanvasFromMediaElement(e);return this.decodeFromCanvas(t)},n.prototype.decodeBitmap=function(e){return this.reader.decode(e,this.hints)},n.prototype.decodeFromCanvas=function(e){var t=n.createBinaryBitmapFromCanvas(e);return this.decodeBitmap(t)},n.prototype.decodeFromImageElement=function(e){return $t(this,void 0,void 0,function(){var t;return Xt(this,function(r){switch(r.label){case 0:if(!e)throw new rn("An image element must be provided.");return t=n.prepareImageElement(e),[4,this._decodeOnLoadImage(t)];case 1:return[2,r.sent()]}})})},n.prototype.decodeFromImageUrl=function(e){return $t(this,void 0,void 0,function(){var t;return Xt(this,function(r){switch(r.label){case 0:if(!e)throw new rn("An URL must be provided.");t=n.prepareImageElement(),t.src=e,r.label=1;case 1:return r.trys.push([1,,3,4]),[4,this.decodeFromImageElement(t)];case 2:return[2,r.sent()];case 3:return n.destroyImageElement(t),[7];case 4:return[2]}})})},n.prototype.decodeFromConstraints=function(e,t,r){return $t(this,void 0,void 0,function(){var i,a;return Xt(this,function(o){switch(o.label){case 0:return n.checkCallbackFnOrThrow(r),[4,this.getUserMedia(e)];case 1:i=o.sent(),o.label=2;case 2:return o.trys.push([2,4,,5]),[4,this.decodeFromStream(i,t,r)];case 3:return[2,o.sent()];case 4:throw a=o.sent(),n.disposeMediaStream(i),a;case 5:return[2]}})})},n.prototype.decodeFromStream=function(e,t,r){return $t(this,void 0,void 0,function(){var i,a,o,c,u,h,p,g,_,E=this;return Xt(this,function(A){switch(A.label){case 0:return n.checkCallbackFnOrThrow(r),i=this.options.tryPlayVideoTimeout,[4,n.attachStreamToVideo(e,t,i)];case 1:return a=A.sent(),o=function(){n.disposeMediaStream(e),n.cleanVideoSource(a)},c=this.scan(a,r,o),u=e.getVideoTracks(),h=cc(cc({},c),{stop:function(){c.stop()},streamVideoConstraintsApply:function(S,O){return $t(this,void 0,void 0,function(){var T,R,L,z,U,G,D;return Xt(this,function(w){switch(w.label){case 0:T=O?u.filter(O):u,w.label=1;case 1:w.trys.push([1,6,7,8]),R=Gm(T),L=R.next(),w.label=2;case 2:return L.done?[3,5]:(z=L.value,[4,z.applyConstraints(S)]);case 3:w.sent(),w.label=4;case 4:return L=R.next(),[3,2];case 5:return[3,8];case 6:return U=w.sent(),G={error:U},[3,8];case 7:try{L&&!L.done&&(D=R.return)&&D.call(R)}finally{if(G)throw G.error}return[7];case 8:return[2]}})})},streamVideoConstraintsGet:function(S){return u.find(S).getConstraints()},streamVideoSettingsGet:function(S){return u.find(S).getSettings()},streamVideoCapabilitiesGet:function(S){return u.find(S).getCapabilities()}}),p=n.mediaStreamIsTorchCompatible(e),p&&(g=u?.find(function(S){return n.mediaStreamIsTorchCompatibleTrack(S)}),_=function(S){return $t(E,void 0,void 0,function(){return Xt(this,function(O){switch(O.label){case 0:return[4,n.mediaStreamSetTorch(g,S)];case 1:return O.sent(),[2]}})})},h.switchTorch=_,h.stop=function(){return $t(E,void 0,void 0,function(){return Xt(this,function(S){switch(S.label){case 0:return c.stop(),[4,_(!1)];case 1:return S.sent(),[2]}})})}),[2,h]}})})},n.prototype.decodeFromVideoDevice=function(e,t,r){return $t(this,void 0,void 0,function(){var i,a;return Xt(this,function(o){switch(o.label){case 0:return n.checkCallbackFnOrThrow(r),e?i={deviceId:{exact:e}}:i={facingMode:"environment"},a={video:i},[4,this.decodeFromConstraints(a,t,r)];case 1:return[2,o.sent()]}})})},n.prototype.decodeFromVideoElement=function(e,t){return $t(this,void 0,void 0,function(){var r,i;return Xt(this,function(a){switch(a.label){case 0:if(n.checkCallbackFnOrThrow(t),!e)throw new rn("A video element must be provided.");return r=n.prepareVideoElement(e),i=this.options.tryPlayVideoTimeout,[4,n.playVideoOnLoadAsync(r,i)];case 1:return a.sent(),[2,this.scan(r,t)]}})})},n.prototype.decodeFromVideoUrl=function(e,t){return $t(this,void 0,void 0,function(){var r,i,a,o;return Xt(this,function(c){switch(c.label){case 0:if(n.checkCallbackFnOrThrow(t),!e)throw new rn("An URL must be provided.");return r=n.prepareVideoElement(),r.src=e,i=function(){n.cleanVideoSource(r)},a=this.options.tryPlayVideoTimeout,[4,n.playVideoOnLoadAsync(r,a)];case 1:return c.sent(),o=this.scan(r,t,i),[2,o]}})})},n.prototype.decodeOnceFromConstraints=function(e,t){return $t(this,void 0,void 0,function(){var r;return Xt(this,function(i){switch(i.label){case 0:return[4,this.getUserMedia(e)];case 1:return r=i.sent(),[4,this.decodeOnceFromStream(r,t)];case 2:return[2,i.sent()]}})})},n.prototype.decodeOnceFromStream=function(e,t){return $t(this,void 0,void 0,function(){var r,i,a;return Xt(this,function(o){switch(o.label){case 0:return r=!!t,[4,n.attachStreamToVideo(e,t)];case 1:i=o.sent(),o.label=2;case 2:return o.trys.push([2,,4,5]),[4,this.scanOneResult(i)];case 3:return a=o.sent(),[2,a];case 4:return r||n.cleanVideoSource(i),[7];case 5:return[2]}})})},n.prototype.decodeOnceFromVideoDevice=function(e,t){return $t(this,void 0,void 0,function(){var r,i;return Xt(this,function(a){switch(a.label){case 0:return e?r={deviceId:{exact:e}}:r={facingMode:"environment"},i={video:r},[4,this.decodeOnceFromConstraints(i,t)];case 1:return[2,a.sent()]}})})},n.prototype.decodeOnceFromVideoElement=function(e){return $t(this,void 0,void 0,function(){var t,r;return Xt(this,function(i){switch(i.label){case 0:if(!e)throw new rn("A video element must be provided.");return t=n.prepareVideoElement(e),r=this.options.tryPlayVideoTimeout,[4,n.playVideoOnLoadAsync(t,r)];case 1:return i.sent(),[4,this.scanOneResult(t)];case 2:return[2,i.sent()]}})})},n.prototype.decodeOnceFromVideoUrl=function(e){return $t(this,void 0,void 0,function(){var t,r;return Xt(this,function(i){switch(i.label){case 0:if(!e)throw new rn("An URL must be provided.");t=n.prepareVideoElement(),t.src=e,r=this.decodeOnceFromVideoElement(t),i.label=1;case 1:return i.trys.push([1,,3,4]),[4,r];case 2:return[2,i.sent()];case 3:return n.cleanVideoSource(t),[7];case 4:return[2]}})})},n.prototype.scanOneResult=function(e,t,r,i){var a=this;return t===void 0&&(t=!0),r===void 0&&(r=!0),i===void 0&&(i=!0),new Promise(function(o,c){a.scan(e,function(u,h,p){if(u){o(u),p.stop();return}if(h){if(h instanceof ae&&t||h instanceof _n&&r||h instanceof ye&&i)return;p.stop(),c(h)}})})},n.prototype.scan=function(e,t,r){var i=this;n.checkCallbackFnOrThrow(t);var a=n.createCaptureCanvas(e),o;try{o=a.getContext("2d",{willReadFrequently:!0})}catch{o=a.getContext("2d")}if(!o)throw new Error("Couldn't create canvas for visual element scan.");var c=function(){o=void 0,a=void 0},u=!1,h,p=function(){u=!0,clearTimeout(h),c(),r&&r()},g={stop:p},_=function(){if(!u)try{n.drawImageOnCanvas(o,e);var E=i.decodeFromCanvas(a);t(E,void 0,g),h=setTimeout(_,i.options.delayBetweenScanSuccess)}catch(T){t(void 0,T,g);var A=T instanceof _n,S=T instanceof ye,O=T instanceof ae;if(A||S||O){h=setTimeout(_,i.options.delayBetweenScanAttempts);return}c(),r&&r(T)}};return _(),g},n.prototype._decodeOnLoadImage=function(e){return $t(this,void 0,void 0,function(){var t;return Xt(this,function(r){switch(r.label){case 0:return t=n.isImageLoaded(e),t?[3,2]:[4,n._waitImageLoad(e)];case 1:r.sent(),r.label=2;case 2:return[2,this.decode(e)]}})})},n.prototype.getUserMedia=function(e){return $t(this,void 0,void 0,function(){var t;return Xt(this,function(r){switch(r.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return t=r.sent(),n.streamTracker.push(t),[2,t]}})})},n.streamTracker=[],n})(),qj=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})();(function(n){qj(e,n);function e(t,r){return n.call(this,new w0,t,r)||this}return e})(Vc);var $j=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})();(function(n){$j(e,n);function e(t,r){return n.call(this,new oc(t),t,r)||this}return e})(Vc);var Xj=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})();(function(n){Xj(e,n);function e(t,r){return n.call(this,new b0,t,r)||this}return e})(Vc);var Yj=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Kj=(function(n){Yj(e,n);function e(t,r){var i=this,a=new d3;return a.setHints(t),i=n.call(this,a,t,r)||this,i.reader=a,i}return Object.defineProperty(e.prototype,"possibleFormats",{set:function(t){this.hints.set(kt.POSSIBLE_FORMATS,t),this.reader.setHints(this.hints)},enumerable:!1,configurable:!0}),e.prototype.decodeBitmap=function(t){return this.reader.decodeWithState(t)},e.prototype.setHints=function(t){this.hints=t,this.reader.setHints(this.hints)},e})(Vc),Wj=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})();(function(n){Wj(e,n);function e(t,r){return n.call(this,new C0,t,r)||this}return e})(Vc);var Qj=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Zj=(function(n){Qj(e,n);function e(t,r){return n.call(this,new S0,t,r)||this}return e})(Vc);const h1=[{value:"open",label:"開店時"},{value:"middle",label:"中間点検"},{value:"close",label:"閉店時"}],Jj=h1.reduce((n,e)=>(n[e.value]=e.label,n),{}),qo=100,eB="admin-cash-audit-vouchers-",tB="admin-cash-audit-voucher-usage-",ov="admin-cash-audit:voucher-usage-updated",Yd={open:0,middle:0,close:0};function _3(n){const e=n.getFullYear(),t=String(n.getMonth()+1).padStart(2,"0"),r=String(n.getDate()).padStart(2,"0");return`${e}-${t}-${r}`}function qf(n){const e=Number(n);return!Number.isFinite(e)||e<=0?0:Math.floor(e)}function x3(n){return`${eB}${_3(n??new Date)}`}function I0(n){return`${tB}${_3(n??new Date)}`}function E3(n){if(typeof window>"u")return null;try{return window.localStorage.getItem(n)}catch(e){return console.warn("ローカルストレージの読み込みに失敗しました",e),null}}function lv(n,e){if(!(typeof window>"u"))try{e===null?window.localStorage.removeItem(n):window.localStorage.setItem(n,e)}catch(t){console.warn("ローカルストレージへの書き込みに失敗しました",t)}}function nB(n){const e=E3(x3(n));if(!e)return{...Yd};try{const t=JSON.parse(e);return h1.reduce((r,i)=>(r[i.value]=qf(t?.[i.value]),r),{...Yd})}catch(t){return console.warn("点検プリセットを復元できませんでした",t),{...Yd}}}function $A(n,e){const t=h1.reduce((r,i)=>(r[i.value]=qf(n?.[i.value]),r),{...Yd});lv(x3(e),JSON.stringify(t))}function d1(n){const e=E3(I0(n));if(!e)return{};try{const r=JSON.parse(e)?.entries??{};return Object.entries(r).reduce((i,[a,o])=>{const c=qf(o);return c>0&&(i[a]=c),i},{})}catch(t){return console.warn("金券使用履歴を復元できませんでした",t),{}}}function cv(n,e){const t=Object.entries(n).reduce((r,[i,a])=>{const o=qf(a);return o>0&&(r[i]=o),r},{});if(Object.keys(t).length===0)lv(I0(e),null);else{const r={entries:t};lv(I0(e),JSON.stringify(r))}}function uv(){typeof window>"u"||window.dispatchEvent(new CustomEvent(ov))}function XA(n){const e=d1(n);return Object.values(e).reduce((t,r)=>t+r,0)}function YA(n,e){return n?d1(e)[n]??0:0}function rB(n,e,t){if(!n)return;const r=qf(e),i=d1(t);if(r===0){n in i&&(delete i[n],cv(i,t),uv());return}i[n]!==r&&(i[n]=r,cv(i,t),uv())}function KA(n,e){if(!n)return;const t=d1(e);n in t&&(delete t[n],cv(t,e),uv())}function iB(n){return I0(n)}function Kl(n){return`¥${n.toLocaleString()}`}const aB={未払い:"未払いに戻しました",支払い済み:"支払い済みに更新",キャンセル:"注文をキャンセルしました"},sB={未払い:"warning",支払い済み:"success",キャンセル:"neutral"};function oB(){const n=P.useMemo(()=>{const de=new Date;de.setHours(0,0,0,0);const Ne=new Date(de);return Ne.setDate(Ne.getDate()+1),{start:de,end:Ne}},[]),{orders:e,loading:t,error:r}=jc(n),i=P.useMemo(()=>e.map(l1),[e]),[a,o]=P.useState(""),[c,u]=P.useState(null),[h,p]=P.useState(!1),[g,_]=P.useState(!1),[E,A]=P.useState(null),[S,O]=P.useState(null),[T,R]=P.useState({}),[L,z]=P.useState(null),[U,G]=P.useState(null),[D,w]=P.useState(0),I=P.useRef(null),M=P.useRef(null),j=P.useRef({}),V=P.useMemo(()=>i.filter(de=>de.payment==="未払い").sort((de,Ne)=>{const Ye=de.createdAtDate?.getTime()??0,Kt=Ne.createdAtDate?.getTime()??0;return Ye-Kt}),[i]),k=P.useMemo(()=>{if(!a.trim())return V;const de=a.trim().toLowerCase();return V.filter(Ne=>`${Ne.ticket} ${Ne.id} ${Ne.callNumber} ${Ne.items} ${Ai(Ne.id)}`.toLowerCase().includes(de))},[a,V]),ee=P.useMemo(()=>k.find(de=>de.id===c)??k[0]??null,[k,c]),Ie=P.useMemo(()=>c?[...T[c]??[]].reverse():[],[T,c]),q=P.useMemo(()=>ee?Cf(ee):[],[ee]),ce=P.useMemo(()=>ee?Ai(ee.id):"----",[ee]);P.useEffect(()=>{!ee&&k.length>0&&u(k[0].id)},[k,ee]),P.useEffect(()=>{if(!ee)return;const de=j.current[ee.id];de&&de.scrollIntoView({block:"nearest",behavior:"smooth"})},[ee]);const me=P.useMemo(()=>ee?Math.floor(ee.total/qo):0,[ee]);P.useEffect(()=>{if(!ee){w(0);return}const de=YA(ee.id),Ne=Math.min(Math.max(0,de),me);w(Ne)},[ee,me]);const Te=P.useMemo(()=>D*qo,[D]),Ue=P.useMemo(()=>ee?Math.max(ee.total-Te,0):0,[ee,Te]),X=P.useCallback(de=>{w(Ne=>{const Ye=Ne+de;return Math.min(Math.max(0,Ye),me)})},[me]),se=P.useMemo(()=>i.filter(de=>de.payment==="支払い済み").sort((de,Ne)=>{const Ye=de.createdAtDate?.getTime()??0;return(Ne.createdAtDate?.getTime()??0)-Ye}).slice(0,6),[i]),ve=P.useMemo(()=>({waiting:V.length,totalDue:V.reduce((de,Ne)=>de+Ne.total,0),settledToday:se.length}),[V,se]),Ee=P.useCallback(de=>de?(u(de.id),o(""),!0):!1,[o,u]),ie=P.useCallback((de,Ne)=>{R(Ye=>{const Kt=[...Ye[de]??[],{status:Ne,time:new Date().toISOString()}];return{...Ye,[de]:Kt}})},[]),ge=P.useCallback(async(de,Ne)=>{z(de.id),G(null);try{await Fa(de.id,de.ticket,{payment:Ne,progress:de.progress}),ie(de.id,Ne)}catch(Ye){throw console.error("支払いステータスを更新できませんでした",Ye),G("支払いステータスの更新に失敗しました。通信環境をご確認ください。"),Ye}finally{z(null)}},[ie]),pe=P.useCallback(async de=>{try{await ge(de,"支払い済み");const Ne=ee?.id===de.id?D:YA(de.id),Ye=Math.max(0,Math.floor(de.total/qo)),Kt=Math.min(Math.max(0,Ne),Ye);rB(de.id,Kt),c===de.id&&(A("支払い済みにしました。"),u(null))}catch{}},[ge,c,ee?.id,D]),be=P.useCallback(async de=>{const Ne=`呼出番号 ${de.callNumber}`;if(window.confirm(`${Ne} をキャンセルしますか？
キャンセルすると未払い一覧から除外されます。（あとで未払いに戻せます）`))try{await ge(de,"キャンセル"),KA(de.id),c===de.id&&(w(0),A("注文をキャンセルしました。"),u(null))}catch{}},[ge,c]),De=P.useCallback(async de=>{try{await ge(de,"未払い"),KA(de.id),c===de.id&&w(0),u(de.id),A("支払いステータスを未払いに戻しました。")}catch{}},[ge,c]),rt=P.useCallback(()=>{if(M.current?.stop(),M.current=null,I.current){const de=I.current.srcObject;de instanceof MediaStream&&de.getTracks().forEach(Ne=>Ne.stop()),I.current.srcObject=null}_(!1)},[M,_,I]);P.useEffect(()=>()=>rt(),[rt]);const Gt=P.useCallback(de=>{const Ne=de.trim();if(!Ne)return null;const Ye=Ne.toLowerCase(),Kt=Ye.match(/t[-_ ]?(\w{3,})/),gt=Ye.match(/#(\d{3,})/),bt=Ye.match(/(?:no\.?|call|呼出|#)?\s*(\d{1,4})$/),Vn=i.find(Mt=>Ai(Mt.id).toLowerCase()===Ye);if(Vn)return Vn;const Wa=Kt?`T-${Kt[1]}`:null,zr=gt?`#${gt[1]}`:null,on=bt?Number.parseInt(bt[1],10):null;if(Wa){const Mt=i.find(Ir=>Ir.ticket.toLowerCase()===Wa.toLowerCase());if(Mt)return Mt}if(zr){const Mt=i.find(Ir=>Ir.id.toLowerCase()===zr.toLowerCase());if(Mt)return Mt}if(on){const Mt=i.find(Ir=>Ir.callNumber===on);if(Mt)return Mt}return i.find(Mt=>Mt.ticket.toLowerCase()===Ye)??i.find(Mt=>Mt.id.toLowerCase()===Ye)??i.find(Mt=>Mt.callNumber.toString()===Ye)??null},[i]),ot=P.useCallback(de=>{const Ne=Gt(de);Ne?(Ee(Ne),A(`進捗確認コード ${Ne.ticket} を読み取り、呼出番号 ${Ne.callNumber}（確認コード ${Ai(Ne.id)}）を選択しました。`),O(null),p(!1)):(A(`QR内の「${de}」に対応する注文は見つかりませんでした。`),O("別のコードを読み取るか手入力を試してください。"))},[Gt,Ee]);P.useEffect(()=>{if(!h){rt();return}let de=!1;return(async()=>{if(I.current){_(!0),O(null),A("カメラを準備しています…");try{const Kt=await new Zj(void 0,{delayBetweenScanAttempts:200}).decodeFromVideoDevice(void 0,I.current,(gt,bt,Vn)=>{if(de){Vn.stop();return}gt?(ot(gt.getText()),Vn.stop()):bt&&!(bt instanceof ae)&&O(bt.message)});if(de){Kt.stop();return}M.current=Kt,A("QRコードにカメラを向けてください。")}catch(Ye){if(de)return;console.error(Ye),O(Ye instanceof Error?Ye.message:"カメラを開始できませんでした。"),p(!1)}}})(),()=>{de=!0,rt()}},[ot,h,rt]);const Ot=P.useCallback(()=>{O(null),A(null),p(!0)},[]),Bn=P.useCallback(()=>{p(!1),rt()},[rt]);return t?m.jsx("p",{children:"注文データを読み込み中です…"}):m.jsxs("div",{className:"admin-payment-page",children:[h&&m.jsx("div",{className:"admin-payment-scanner-overlay",role:"dialog","aria-modal":"true",children:m.jsxs("div",{className:"admin-payment-scanner-dialog",children:[m.jsxs("header",{className:"admin-payment-scanner-header",children:[m.jsx("h2",{children:"QRコードを読み取る"}),m.jsx("button",{type:"button",className:"admin-payment-scanner-close",onClick:Bn,children:"閉じる"})]}),m.jsx("video",{ref:I,className:"admin-payment-scanner-video",autoPlay:!0,muted:!0,playsInline:!0}),m.jsxs("footer",{className:"admin-payment-scanner-footer",children:[m.jsx("span",{className:"admin-payment-scan-status",children:g?E??"読み取り中…":E??"停止しました。"}),m.jsxs("div",{className:"admin-payment-scanner-actions",children:[S&&m.jsx("p",{className:"admin-payment-scan-error",role:"alert",children:S}),m.jsx("button",{type:"button",className:"admin-payment-stop",onClick:Bn,children:"停止する"})]})]})]})}),m.jsxs("section",{className:"admin-payment-summary","aria-label":"支払い状況サマリー",children:[m.jsxs("div",{className:"admin-payment-summary-card",children:[m.jsx("p",{className:"admin-payment-summary-title",children:"未決済"}),m.jsxs("p",{className:"admin-payment-summary-value",children:[ve.waiting,"件"]})]}),m.jsxs("div",{className:"admin-payment-summary-card",children:[m.jsx("p",{className:"admin-payment-summary-title",children:"未回収金額"}),m.jsx("p",{className:"admin-payment-summary-value",children:Kl(ve.totalDue)})]}),m.jsxs("div",{className:"admin-payment-summary-card",children:[m.jsx("p",{className:"admin-payment-summary-title",children:"本日決済"}),m.jsxs("p",{className:"admin-payment-summary-value",children:[ve.settledToday,"件"]})]})]}),r&&m.jsx("p",{className:"admin-error",role:"alert",children:"注文データの取得に失敗しました。ページを再読み込みしてください。"}),U&&m.jsx("p",{className:"admin-error",role:"alert",children:U}),m.jsxs("div",{className:"admin-payment-shell",children:[m.jsxs("aside",{className:"admin-payment-sidebar","aria-label":"呼出番号一覧",children:[m.jsxs("div",{className:"admin-payment-sidebar-header",children:[m.jsx("h2",{children:"呼出番号一覧"}),m.jsxs("div",{className:"field",children:[m.jsx("label",{htmlFor:"payment-search",children:"検索"}),m.jsx("input",{id:"payment-search",type:"search",placeholder:"呼出番号・確認コード（注文番号末尾）・注文番号",value:a,onChange:de=>o(de.target.value)})]}),m.jsx("button",{type:"button",className:"admin-payment-qr-button",onClick:Ot,children:"QRコードを読み取る"})]}),E&&!h&&m.jsx("p",{className:"admin-payment-scan-message",children:E}),S&&!h&&m.jsx("p",{className:"admin-payment-scan-error",role:"alert",children:S}),m.jsxs("div",{className:"admin-payment-list",children:[k.map(de=>m.jsx("button",{type:"button",className:`admin-payment-list-item${ee?.id===de.id?" active":""}`,onClick:()=>u(de.id),ref:Ne=>{j.current[de.id]=Ne},"aria-pressed":ee?.id===de.id,children:m.jsx("p",{className:"admin-payment-ticket","aria-label":`呼出番号 ${de.callNumber}`,children:de.callNumber})},de.id)),k.length===0&&m.jsx("p",{className:"admin-payment-empty",children:"未払いの注文はありません。"})]})]}),m.jsxs("section",{className:"admin-payment-main","aria-live":"polite",children:[ee?m.jsxs("article",{className:"admin-payment-detail-card",children:[m.jsxs("div",{className:"admin-payment-detail-header",children:[m.jsxs("div",{className:"admin-payment-identifiers",children:[m.jsx("p",{className:"admin-payment-ticket large","aria-label":`呼出番号 ${ee.callNumber}`,children:ee.callNumber}),m.jsxs("p",{className:"admin-payment-order",children:["確認コード ",ce]}),m.jsxs("p",{className:"admin-payment-order subtle",children:["注文番号 ",ee.id]}),m.jsxs("p",{className:"admin-payment-order subtle",children:["進捗コード ",ee.ticket]})]}),m.jsxs("div",{className:"admin-payment-total-box",children:[m.jsxs("section",{className:"admin-payment-breakdown-panel","aria-label":"支払い内訳",children:[m.jsxs("div",{className:"admin-payment-breakdown-row prominent",children:[m.jsx("p",{className:"admin-payment-breakdown-label",children:"現金"}),m.jsx("p",{className:"admin-payment-cash-due","aria-live":"polite",children:ee?Kl(Ue):"¥0"})]}),m.jsxs("div",{className:"admin-payment-breakdown-row",children:[m.jsx("p",{className:"admin-payment-breakdown-label",children:"金券"}),m.jsxs("div",{className:"admin-payment-voucher-control","aria-label":"金券の枚数",children:[m.jsx("button",{type:"button",className:"admin-payment-adjust",onClick:()=>X(-1),disabled:D===0,"aria-label":"金券を1枚減らす",children:"-"}),m.jsxs("span",{className:"admin-payment-voucher-count","aria-live":"polite",children:[D," 枚（",Kl(Te),"）"]}),m.jsx("button",{type:"button",className:"admin-payment-adjust",onClick:()=>X(1),disabled:D>=me,"aria-label":"金券を1枚増やす",children:"+"})]})]}),m.jsx("hr",{className:"admin-payment-breakdown-divider"}),m.jsxs("p",{className:"admin-payment-breakdown-total","aria-live":"polite",children:["合計 ",ee?Kl(ee.total):"¥0"]})]}),m.jsxs("div",{className:"admin-payment-voucher-summary","aria-live":"polite",children:[m.jsx("p",{className:"admin-payment-voucher-summary-label",children:"金券枚数"}),m.jsxs("p",{className:"admin-payment-voucher-summary-value",children:[D," 枚",m.jsxs("span",{className:"admin-payment-voucher-summary-amount",children:["（",Kl(Te),"）"]})]})]}),m.jsxs("div",{className:"admin-payment-actions",children:[ee.payment==="未払い"&&m.jsxs(m.Fragment,{children:[m.jsx("button",{type:"button",className:"admin-payment-action",onClick:()=>pe(ee),disabled:L===ee.id,children:"支払い済みにする"}),m.jsx("button",{type:"button",className:"admin-payment-inline-button",onClick:()=>be(ee),disabled:L===ee.id,children:"キャンセルにする"})]}),(ee.payment==="支払い済み"||ee.payment==="キャンセル")&&m.jsx("button",{type:"button",className:"admin-payment-action admin-payment-action--ghost",onClick:()=>De(ee),disabled:L===ee.id,children:"未払いに戻す"})]})]})]}),m.jsxs("div",{className:"admin-payment-detail-body",children:[m.jsxs("section",{className:"admin-payment-detail-items",children:[m.jsx("h3",{children:"注文内容"}),q.length>0?m.jsx(Wg,{entries:q,totalAriaLabel:"商品点数",variant:"compact",className:"admin-payment-items-inline"}):m.jsx("p",{className:"admin-payment-detail-placeholder",children:"商品情報を取得できませんでした。"})]}),m.jsxs("section",{className:"admin-payment-detail-meta",children:[m.jsxs("dl",{children:[m.jsxs("div",{children:[m.jsx("dt",{children:"ステータス"}),m.jsx("dd",{children:m.jsx("span",{className:`admin-payment-chip ${sB[ee.payment]}`,children:ee.payment})})]}),m.jsxs("div",{children:[m.jsx("dt",{children:"注文受付"}),m.jsx("dd",{children:ee.createdAt})]}),m.jsxs("div",{children:[m.jsx("dt",{children:"確認コード"}),m.jsx("dd",{children:ce})]}),m.jsxs("div",{children:[m.jsx("dt",{children:"進捗コード"}),m.jsx("dd",{children:ee.ticket})]})]}),m.jsx("p",{className:"admin-payment-hint",children:"レジで内容と金額を確認してから決済操作を行ってください。"})]})]})]}):m.jsx("div",{className:"admin-payment-detail-placeholder",children:m.jsx("p",{className:"admin-payment-empty",children:"左の一覧から注文を選択すると詳細が表示されます。"})}),m.jsxs("section",{className:"admin-payment-history","aria-label":"ステータス履歴",children:[m.jsx("header",{children:m.jsx("h3",{children:"ステータス履歴"})}),ee?Ie.length>0?m.jsx("ul",{children:Ie.map((de,Ne)=>m.jsxs("li",{children:[m.jsx("span",{children:new Date(de.time).toLocaleString()}),m.jsx("span",{children:aB[de.status]})]},`${de.time}-${Ne}`))}):m.jsx("p",{className:"admin-payment-history-empty",children:"操作履歴はまだありません。"}):m.jsx("p",{className:"admin-payment-history-empty",children:"注文を選択すると履歴が表示されます。"})]}),m.jsxs("section",{className:"admin-payment-recent","aria-label":"最近決済した注文",children:[m.jsxs("header",{className:"admin-payment-recent-header",children:[m.jsx("h3",{children:"最近の決済"}),m.jsx("p",{className:"admin-payment-recent-sub",children:"直近で決済した注文の概要です。"})]}),m.jsxs("ul",{children:[se.map(de=>{const Ne=Ai(de.id),Ye=de.items.replace(/／/g,"・");return m.jsx("li",{children:m.jsxs("article",{className:"admin-payment-recent-card",children:[m.jsxs("div",{className:"admin-payment-recent-top",children:[m.jsxs("span",{className:"admin-payment-recent-ticket","aria-label":`呼出番号 ${de.callNumber}`,children:["呼出 ",de.callNumber]}),m.jsxs("div",{className:"admin-payment-recent-meta",children:[m.jsx("span",{className:"admin-payment-recent-total",children:Kl(de.total)}),m.jsx("time",{dateTime:de.createdAt,className:"admin-payment-time",children:de.createdAt})]})]}),m.jsx("p",{className:"admin-payment-recent-items","aria-label":"注文内容の要約",children:Ye}),m.jsxs("dl",{className:"admin-payment-recent-identifiers",children:[m.jsxs("div",{children:[m.jsx("dt",{children:"確認コード"}),m.jsx("dd",{children:Ne})]}),m.jsxs("div",{children:[m.jsx("dt",{children:"注文番号"}),m.jsx("dd",{children:de.id})]}),m.jsxs("div",{children:[m.jsx("dt",{children:"進捗コード"}),m.jsx("dd",{children:de.ticket})]})]}),m.jsx("div",{className:"admin-payment-recent-actions",children:m.jsx("button",{type:"button",className:"admin-payment-revert",onClick:()=>De(de),disabled:L===de.id,children:"未払いに戻す"})})]})},de.id)}),se.length===0&&m.jsx("li",{className:"admin-payment-recent-empty",children:"決済済みの注文はまだありません。"})]})]})]})]})]})}function lB(){const[n,e]=P.useState(!0),[t,r]=P.useState(""),[i,a]=P.useState(new Date),o=()=>{e(u=>{const h=!u;return a(new Date),h})},c=()=>{a(new Date)};return m.jsxs("div",{className:"admin-grid",style:{gap:"24px",maxWidth:720},children:[m.jsxs("section",{className:"admin-card",children:[m.jsx("h3",{children:"注文受付の制御"}),m.jsx("p",{children:"混雑状況や材料状況に応じて受付の可否を切り替えられます。トグル変更後は、訪問者側の注文画面に即時反映されます。"}),m.jsxs("div",{className:"admin-toggle",role:"switch","aria-checked":n,children:[m.jsx("input",{type:"checkbox",checked:n,onChange:o}),m.jsx("span",{children:n?"受け付け中":"一時停止中"})]}),m.jsx("p",{style:{color:"#64748b"},children:n?"お客様は引き続き注文を行えます。":"受付停止中：注文ページでは理由が表示され、新規注文は行えません。"}),m.jsx("div",{className:"admin-divider"}),m.jsxs("div",{className:"admin-list",children:[m.jsx("label",{htmlFor:"reception-memo",children:"停止理由メモ"}),m.jsx("textarea",{id:"reception-memo",rows:4,style:{borderRadius:12,border:"1px solid #cbd5f5",padding:"12px 16px",fontSize:"1rem",resize:"vertical"},placeholder:"例: 材料補充のため 30 分ほど停止します。",value:t,onChange:u=>r(u.target.value)}),m.jsx("button",{type:"button",className:"admin-primary-button",onClick:c,children:"受付状態を保存"}),i&&m.jsxs("small",{style:{color:"#64748b"},children:["最終更新: ",i.toLocaleString("ja-JP")]})]})]}),m.jsxs("section",{className:"admin-card",children:[m.jsx("h3",{children:"通知設定"}),m.jsx("p",{children:"受付が停止された際に Slack / LINE WORKS へ自動投稿することができます。Webhook URL を設定すると連携が有効になります。"}),m.jsxs("div",{className:"admin-list",children:[m.jsx("label",{htmlFor:"reception-webhook",children:"Webhook URL"}),m.jsx("input",{id:"reception-webhook",placeholder:"https://hooks.slack.com/...",style:{borderRadius:12,border:"1px solid #cbd5f5",padding:"10px 14px",fontSize:"1rem"}}),m.jsx("button",{type:"button",className:"admin-secondary-button",children:"テスト送信"})]})]})]})}function cB(n,e){const t=n.match(/^(\d{1,2}):(\d{2})$/);if(!t)return null;const[,r,i]=t,a=Number.parseInt(r,10),o=Number.parseInt(i,10);if(Number.isNaN(a)||Number.isNaN(o))return null;const c=new Date(e);return c.setHours(a,o,0,0),c.getTime()>e.getTime()&&c.setDate(c.getDate()-1),c}function uB(n,e){const t=cB(n,e);if(!t)return null;const r=e.getTime()-t.getTime();if(r<0)return null;const i=Math.floor(r/6e4);if(i<1)return"1分未満";const a=Math.floor(i/60),o=i%60;return a===0?`${i}分経過`:o===0?`${a}時間経過`:`${a}時間${o}分経過`}function fB(){const n=P.useMemo(()=>{const q=new Date;q.setHours(0,0,0,0);const ce=new Date(q);return ce.setDate(ce.getDate()+1),{start:q,end:ce}},[]),e=P.useCallback(q=>q.length>0&&q.every(ce=>ce.progress==="クローズ"),[]),{orders:t,loading:r,error:i}=jc({...n,autoStopWhen:e}),a=P.useMemo(()=>t.map(l1),[t]),[o,c]=P.useState(""),[u,h]=P.useState(!1),[p,g]=P.useState(null),[_,E]=P.useState(null),[A,S]=P.useState(()=>new Date),[O,T]=P.useState(null),[R,L]=P.useState(null),z=o.trim().toLowerCase(),U=P.useMemo(()=>z?a.filter(q=>[q.callNumber.toString(),q.ticket,q.id,q.items,q.progress,q.payment,Ai(q.id)].filter(me=>typeof me=="string").some(me=>me.toLowerCase().includes(z))):a,[a,z]),G=P.useMemo(()=>U.filter(q=>q.progress==="調理済み").sort((q,ce)=>{const me=q.createdAtDate?.getTime()??0,Te=ce.createdAtDate?.getTime()??0;return me-Te}),[U]),D=P.useMemo(()=>U.filter(q=>q.progress==="クローズ").sort((q,ce)=>{const me=q.createdAtDate?.getTime()??0;return(ce.createdAtDate?.getTime()??0)-me}),[U]),w=P.useMemo(()=>U.filter(q=>q.progress==="受注済み").sort((q,ce)=>{const me=q.createdAtDate?.getTime()??0,Te=ce.createdAtDate?.getTime()??0;return me-Te}),[U]),I=P.useMemo(()=>({ready:G.length,delivered:D.length,upcoming:w.length}),[G,D,w]),M=P.useCallback(async q=>{T(q.id),L(null);try{await Fa(q.id,q.ticket,{progress:"クローズ",payment:q.payment})}catch(ce){console.error("注文を受け渡し済みに更新できませんでした",ce),L("受け渡し状況の更新に失敗しました。通信環境をご確認ください。")}finally{T(null)}},[]),j=P.useCallback(async q=>{T(q.id),L(null);try{await Fa(q.id,q.ticket,{progress:"調理済み",payment:q.payment})}catch(ce){console.error("受け渡し済みから戻せませんでした",ce),L("注文を調理済みに戻せませんでした。もう一度お試しください。")}finally{T(null)}},[]);P.useEffect(()=>{const q=window.setInterval(()=>{S(new Date)},6e4);return()=>{window.clearInterval(q)}},[]),P.useEffect(()=>{if(!z){E(null);return}const q=U[0];E(q?.id??null)},[U,z]),P.useEffect(()=>{if(!_||typeof document>"u")return;const q=document.querySelector(`[data-order-id="${_}"]`);q&&q.scrollIntoView({behavior:"smooth",block:"center"})},[_,G.length,D.length,w.length]);const V=q=>{c(q.target.value),g(null)},k=()=>{c(""),E(null),g(null)},ee=P.useCallback(q=>uB(q,A),[A]),Ie=q=>{const ce=q.trim();if(!ce)return;const me=a.find(Te=>Te.ticket.toLowerCase()===ce.toLowerCase()||Te.id.toLowerCase()===ce.toLowerCase()||Ai(Te.id).toLowerCase()===ce.toLowerCase()||Te.callNumber.toString()===ce);c(ce),E(me?.id??null),g(me?null:`読み取ったコード「${ce}」に一致する注文が見つかりませんでした。`),h(!1)};return r?m.jsx("p",{children:"注文データを読み込み中です…"}):m.jsxs("div",{className:"admin-serving-page",children:[m.jsxs("section",{className:"admin-serving-controls","aria-label":"注文検索",children:[m.jsxs("div",{className:"admin-serving-search",children:[m.jsx("label",{htmlFor:"serving-search-input",children:"検索"}),m.jsxs("div",{className:"admin-serving-search-input",children:[m.jsx("input",{id:"serving-search-input",type:"search",value:o,onChange:V,placeholder:"呼出番号・確認コード（注文番号末尾）・メニューなどで検索","aria-describedby":"serving-search-hint"}),o&&m.jsx("button",{type:"button",className:"admin-serving-search-clear",onClick:k,children:"クリア"})]}),m.jsx("p",{id:"serving-search-hint",className:"admin-serving-search-hint",children:"複数列にまたがる注文を横断的に絞り込めます。"})]}),m.jsxs("div",{className:"admin-serving-controls-actions",children:[m.jsx("button",{type:"button",className:"admin-serving-button ghost",onClick:()=>{g(null),h(!0)},children:"QR読み取り"}),p&&m.jsx("p",{className:"admin-serving-scanner-error",children:p})]})]}),m.jsxs("section",{className:"admin-serving-summary","aria-label":"提供状況サマリー",children:[m.jsxs("div",{className:"admin-serving-summary-card",children:[m.jsx("p",{className:"admin-serving-summary-title",children:"お渡し待ち"}),m.jsxs("p",{className:"admin-serving-summary-value",children:[I.ready,"件"]})]}),m.jsxs("div",{className:"admin-serving-summary-card",children:[m.jsx("p",{className:"admin-serving-summary-title",children:"準備中"}),m.jsxs("p",{className:"admin-serving-summary-value",children:[I.upcoming,"件"]})]}),m.jsxs("div",{className:"admin-serving-summary-card",children:[m.jsx("p",{className:"admin-serving-summary-title",children:"受け渡し済み"}),m.jsxs("p",{className:"admin-serving-summary-value",children:[I.delivered,"件"]})]})]}),i&&m.jsx("p",{className:"admin-error",role:"alert",children:"注文データの取得に失敗しました。ページを再読み込みしてください。"}),R&&m.jsx("p",{className:"admin-error",role:"alert",children:R}),o&&U.length===0&&m.jsxs("p",{className:"admin-serving-search-empty",role:"status",children:["「",o,"」に一致する注文は見つかりませんでした。"]}),m.jsxs("div",{className:"admin-serving-columns",children:[m.jsxs("section",{className:"admin-serving-section","aria-label":"お渡し待ち",children:[m.jsxs("header",{className:"admin-serving-section-header",children:[m.jsx("h2",{children:"お渡し待ち"}),m.jsx("p",{children:"調理済みの注文です。呼び出して番号札と照合してください。"})]}),m.jsxs("div",{className:"admin-serving-list",children:[G.map(q=>{const ce=Ai(q.id),me=ee(q.createdAt),Te=Cf(q);return m.jsxs("article",{className:`admin-serving-card${q.id===_?" highlight":""}`,"data-order-id":q.id,children:[m.jsxs("header",{className:"admin-serving-card-header-inline",children:[m.jsxs("div",{className:"admin-serving-header-primary",children:[m.jsx("span",{className:"admin-serving-ticket","aria-label":`呼出番号 ${q.callNumber}`,children:m.jsx("span",{className:"admin-payment-ticket badge",children:q.callNumber})}),m.jsxs("span",{className:"admin-serving-code",children:["確認コード ",ce]}),m.jsxs("span",{className:"admin-serving-progress-code",children:["進捗コード ",q.ticket]})]}),m.jsxs("div",{className:"admin-serving-header-meta",children:[m.jsx("time",{dateTime:q.createdAt,className:"admin-serving-time",children:q.createdAt}),me&&m.jsx("span",{className:"admin-serving-elapsed",children:me})]})]}),Te.length>0&&m.jsx(Wg,{entries:Te,totalAriaLabel:"商品点数",variant:"compact",className:"admin-serving-items-inline"}),m.jsxs("footer",{children:[m.jsxs("div",{className:"admin-serving-meta",children:[m.jsx("span",{className:`admin-serving-payment ${q.payment==="支払い済み"?"paid":"unpaid"}`,children:q.payment}),m.jsxs("span",{className:"admin-serving-total",children:["¥",q.total.toLocaleString()]})]}),m.jsx("div",{className:"admin-serving-actions",children:m.jsx("button",{type:"button",className:"admin-serving-button primary",onClick:()=>M(q),disabled:O===q.id,children:"受け渡し完了"})})]})]},q.id)}),G.length===0&&m.jsx("p",{className:"admin-serving-empty",children:"お渡し待ちの注文はありません。"})]})]}),m.jsxs("aside",{className:"admin-serving-side",children:[m.jsxs("section",{className:"admin-serving-section","aria-label":"準備中",children:[m.jsxs("header",{className:"admin-serving-section-header",children:[m.jsx("h2",{children:"準備中"}),m.jsx("p",{children:"受注済みの注文です。進捗に合わせて盛り付けラインへ共有しましょう。"})]}),m.jsxs("div",{className:"admin-serving-list compact",children:[w.map(q=>{const ce=Ai(q.id),me=ee(q.createdAt),Te=Cf(q);return m.jsxs("article",{className:`admin-serving-mini-card${q.id===_?" highlight":""}`,"data-order-id":q.id,children:[m.jsxs("div",{className:"admin-serving-mini-header",children:[m.jsx("span",{className:"admin-serving-ticket","aria-label":`呼出番号 ${q.callNumber}`,children:m.jsx("span",{className:"admin-payment-ticket badge small",children:q.callNumber})}),m.jsxs("span",{className:"admin-serving-code",children:["確認コード ",ce]}),m.jsxs("span",{className:"admin-serving-progress-code",children:["進捗コード ",q.ticket]})]}),Te.length>0&&m.jsx(Wg,{entries:Te,showTotal:!1,variant:"compact",className:"admin-serving-items-inline"}),m.jsxs("div",{className:"admin-serving-time-group",children:[m.jsx("time",{dateTime:q.createdAt,className:"admin-serving-time",children:q.createdAt}),me&&m.jsx("span",{className:"admin-serving-elapsed",children:me})]}),m.jsx("div",{className:"admin-serving-mini-actions",children:m.jsx("button",{type:"button",className:"admin-serving-button primary small",onClick:()=>M(q),disabled:O===q.id,children:"受け渡し完了"})})]},q.id)}),w.length===0&&m.jsx("p",{className:"admin-serving-empty",children:"受注済みの注文はありません。"})]})]}),m.jsxs("section",{className:"admin-serving-section","aria-label":"受け渡し済み",children:[m.jsxs("header",{className:"admin-serving-section-header",children:[m.jsx("h2",{children:"受け渡し済み"}),m.jsx("p",{children:"最近の受け渡し履歴です。"})]}),m.jsxs("div",{className:"admin-serving-list compact",children:[D.map(q=>{const ce=Ai(q.id),me=ee(q.createdAt);return m.jsxs("article",{className:`admin-serving-mini-card${q.id===_?" highlight":""}`,"data-order-id":q.id,children:[m.jsxs("div",{children:[m.jsx("p",{className:"admin-serving-ticket","aria-label":`呼出番号 ${q.callNumber}`,children:m.jsx("span",{className:"admin-payment-ticket badge small",children:q.callNumber})}),m.jsxs("p",{className:"admin-serving-code",children:["確認コード ",ce]}),m.jsxs("p",{className:"admin-serving-progress-code",children:["進捗コード ",q.ticket]})]}),m.jsxs("div",{className:"admin-serving-time-group",children:[m.jsx("time",{dateTime:q.createdAt,className:"admin-serving-time",children:q.createdAt}),me&&m.jsx("span",{className:"admin-serving-elapsed",children:me})]}),m.jsx("button",{type:"button",className:"admin-serving-button ghost",onClick:()=>j(q),disabled:O===q.id,children:"戻す"})]},q.id)}),D.length===0&&m.jsx("p",{className:"admin-serving-empty",children:"受け渡し済みの記録はありません。"})]})]})]})]}),u&&m.jsx(hB,{onDetected:Ie,onCancel:()=>{h(!1),g(null)},onCameraError:q=>g(q)})]})}function hB({onDetected:n,onCancel:e,onCameraError:t}){const r=P.useRef(null),[i,a]=P.useState(!0),[o,c]=P.useState(null),u=P.useRef(!1);return P.useEffect(()=>{const h=new Kj;let p;return u.current=!1,(async()=>{const _=r.current??void 0;if(!_){const E="カメラビューの初期化に失敗しました。ページを再読み込みしてください。";c(E),t(E);return}try{p=await h.decodeFromVideoDevice(void 0,_,(E,A,S)=>{if(E&&!u.current&&(u.current=!0,S.stop(),n(E.getText())),A&&!(A instanceof Error&&A.name==="NotFoundException")){const O=A instanceof Error?A.message:String(A);c(O)}}),a(!1)}catch(E){const A=E instanceof Error?E.message:"カメラの初期化に失敗しました。設定を確認してください。";c(A),t(A)}})(),()=>{p?.stop()}},[n,t]),P.useEffect(()=>{o&&t(o)},[o,t]),m.jsx("div",{className:"admin-serving-scanner-overlay",role:"dialog","aria-modal":"true","aria-label":"QRコード読み取り",children:m.jsxs("div",{className:"admin-serving-scanner-dialog",children:[m.jsxs("header",{className:"admin-serving-scanner-header",children:[m.jsx("h2",{children:"QRコード読み取り"}),m.jsx("button",{type:"button",className:"admin-serving-button ghost",onClick:e,children:"閉じる"})]}),m.jsx("p",{className:"admin-serving-scanner-hint",children:"QRコードをカメラにかざして注文を特定します。"}),m.jsxs("div",{className:"admin-serving-scanner-video-wrap",children:[m.jsx("video",{ref:r,className:"admin-serving-scanner-video",autoPlay:!0,muted:!0,playsInline:!0}),i&&m.jsx("span",{className:"admin-serving-scanner-status",children:"カメラを初期化しています…"})]}),o&&m.jsx("p",{className:"admin-serving-scanner-error",children:o})]})})}const fv="app:kitchen-toast-test";function dB(n={}){if(typeof window>"u")return;const e={orderId:n.orderId??"TEST-ORDER",callNumber:n.callNumber??Math.floor(Math.random()*900+100),total:n.total??1500,itemSummary:n.itemSummary??"テスト注文: プレーンチュロス ×1 / ガーリックソルトポテト ×1",createdAt:n.createdAt??new Date().toISOString()},t=new CustomEvent(fv,{detail:e});window.dispatchEvent(t)}function pB(n){if(typeof window>"u")return()=>{};const e=t=>{n(t.detail)};return window.addEventListener(fv,e),()=>{window.removeEventListener(fv,e)}}const mB=[{id:"system",label:"システム設定に追従"},{id:"light",label:"ライトモード"},{id:"dark",label:"ダークモード"}],gB=[{id:"admin",label:"管理者",enabled:!0},{id:"kitchen",label:"キッチン",enabled:!0},{id:"staff",label:"スタッフ",enabled:!1}];function vB(){const[n,e]=P.useState("system"),[t,r]=P.useState(!0),[i,a]=P.useState(!0),{menuItems:o,baseMenuItemMap:c,overrides:u,updateMenuItem:h,resetMenuItem:p,resetAllMenuItems:g}=rl(),_=()=>Object.entries(c).reduce((w,[I,M])=>(w[I]={label:M.label,price:String(M.price)},w),{}),E=()=>Object.keys(c).reduce((w,I)=>(w[I]=null,w),{}),[A,S]=P.useState(()=>_()),[O,T]=P.useState(()=>E()),[R,L]=P.useState(null);P.useEffect(()=>{S(_()),T(E())},[o,c]);const z=(w,I,M)=>{S(j=>({...j,[w]:{...j[w],[I]:M}})),T(j=>({...j,[w]:null})),L(null)},U=async w=>{const I=A[w];if(!I)return;const M=I.label.trim();if(!M){T(k=>({...k,[w]:{type:"error",message:"商品名を入力してください。"}}));return}if(M.length>40){T(k=>({...k,[w]:{type:"error",message:"商品名は40文字以内で入力してください。"}}));return}const j=Number(I.price);if(!Number.isFinite(j)||j<0){T(k=>({...k,[w]:{type:"error",message:"価格には0以上の数値を入力してください。"}}));return}const V=Math.round(j);try{await h(w,{label:M,price:V}),S(k=>({...k,[w]:{label:M,price:String(V)}})),T(k=>({...k,[w]:{type:"success",message:"保存しました。"}})),L(null)}catch(k){console.error("メニュー設定の保存に失敗しました",k),T(ee=>({...ee,[w]:{type:"error",message:"保存に失敗しました。もう一度お試しください。"}}))}},G=async w=>{if(L(null),!!!u[w]){const M=o.find(j=>j.key===w);if(!M)return;S(j=>({...j,[w]:{label:M.label,price:String(M.price)}})),T(j=>({...j,[w]:{type:"success",message:"変更を取り消しました。"}}));return}try{await p(w);const M=c[w];S(j=>({...j,[w]:{label:M.label,price:String(M.price)}})),T(j=>({...j,[w]:{type:"success",message:"初期設定に戻しました。"}}))}catch(M){console.error("メニュー設定のリセットに失敗しました",M),T(j=>({...j,[w]:{type:"error",message:"初期設定に戻せませんでした。"}}))}},D=async()=>{if(L(null),!(Object.keys(u).length>0)){L({type:"success",message:"現在、変更はありません。"});return}try{await g(),S(_()),T(E()),L({type:"success",message:"全てのメニューを初期設定に戻しました。"})}catch(I){console.error("メニュー設定の全リセットに失敗しました",I),L({type:"error",message:"リセットに失敗しました。もう一度お試しください。"})}};return m.jsxs("div",{className:"admin-grid",style:{gap:"24px",maxWidth:720},children:[m.jsxs("section",{className:"admin-card",children:[m.jsxs("header",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:"1rem",flexWrap:"wrap"},children:[m.jsxs("div",{children:[m.jsx("h3",{style:{margin:0},children:"メニュー設定"}),m.jsx("p",{style:{margin:"4px 0 0",color:"#475569"},children:"商品名と価格を編集すると、注文画面やダッシュボードに即時反映されます。"})]}),m.jsx("button",{type:"button",className:"admin-secondary-button",onClick:()=>{D()},children:"すべて初期設定に戻す"})]}),R&&m.jsx("p",{role:"status",style:{marginTop:"12px",padding:"8px 12px",borderRadius:8,backgroundColor:R.type==="success"?"#ecfdf5":"#fee2e2",color:R.type==="success"?"#047857":"#b91c1c"},children:R.message}),m.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"16px",marginTop:"16px"},children:o.map(w=>{const I=A[w.key],M=c[w.key],j=O[w.key],V=String(w.price),k=I?I.label!==w.label||I.price!==V:!1,ee=!!u[w.key];return m.jsxs("article",{style:{border:"1px solid #e2e8f0",borderRadius:12,padding:"16px",backgroundColor:"#f8fafc",display:"flex",flexDirection:"column",gap:"12px"},children:[m.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:"0.75rem",flexWrap:"wrap"},children:[m.jsxs("div",{children:[m.jsx("h4",{style:{margin:0},children:w.label}),m.jsxs("p",{style:{margin:"4px 0 0",color:"#64748b"},children:["ID: ",w.key]})]}),ee&&m.jsx("span",{style:{display:"inline-flex",alignItems:"center",gap:"0.25rem",padding:"4px 10px",borderRadius:999,backgroundColor:"#1e40af",color:"#eff6ff",fontSize:"0.85rem"},children:"カスタム適用中"})]}),m.jsxs("div",{style:{display:"grid",gap:"12px",gridTemplateColumns:"repeat(auto-fit, minmax(180px, 1fr))"},children:[m.jsxs("label",{style:{display:"flex",flexDirection:"column",gap:"6px"},children:[m.jsx("span",{style:{fontWeight:600},children:"商品名"}),m.jsx("input",{type:"text",value:I?.label??"",onChange:Ie=>z(w.key,"label",Ie.target.value),placeholder:M.label,style:{borderRadius:8,border:"1px solid #cbd5f5",padding:"10px 12px",fontSize:"1rem"}})]}),m.jsxs("label",{style:{display:"flex",flexDirection:"column",gap:"6px"},children:[m.jsx("span",{style:{fontWeight:600},children:"税込価格 (円)"}),m.jsx("input",{type:"number",min:0,inputMode:"numeric",value:I?.price??"",onChange:Ie=>z(w.key,"price",Ie.target.value),style:{borderRadius:8,border:"1px solid #cbd5f5",padding:"10px 12px",fontSize:"1rem"}})]})]}),m.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"8px"},children:[m.jsx("button",{type:"button",className:"admin-primary-button",onClick:()=>{U(w.key)},disabled:!k,children:"保存"}),m.jsx("button",{type:"button",className:"admin-secondary-button",onClick:()=>{G(w.key)},children:ee?"初期設定に戻す":"変更を取り消す"}),m.jsxs("span",{style:{color:"#64748b",alignSelf:"center",fontSize:"0.9rem"},children:["初期設定: ",M.label,"（¥",M.price.toLocaleString(),"）"]})]}),j&&m.jsx("p",{role:"status",style:{margin:0,padding:"8px 12px",borderRadius:8,backgroundColor:j.type==="success"?"#ecfdf5":"#fee2e2",color:j.type==="success"?"#047857":"#b91c1c"},children:j.message})]},w.key)})})]}),m.jsxs("section",{className:"admin-card",children:[m.jsx("h3",{children:"表示設定"}),m.jsx("p",{children:"夜間の屋外運用でも見やすいテーマを選択できます。"}),m.jsx("div",{className:"admin-list",children:mB.map(w=>m.jsxs("label",{style:{display:"flex",gap:12,alignItems:"center"},children:[m.jsx("input",{type:"radio",name:"theme",value:w.id,checked:n===w.id,onChange:()=>e(w.id)}),w.label]},w.id))})]}),m.jsxs("section",{className:"admin-card",children:[m.jsx("h3",{children:"通知"}),m.jsxs("div",{className:"admin-list",children:[m.jsxs("label",{style:{display:"flex",alignItems:"center",gap:12},children:[m.jsx("input",{type:"checkbox",checked:t,onChange:w=>r(w.target.checked)}),"新規注文をブラウザ通知で受け取る"]}),m.jsxs("label",{style:{display:"flex",alignItems:"center",gap:12},children:[m.jsx("input",{type:"checkbox",checked:i,onChange:w=>a(w.target.checked)}),"新規注文時にサウンドを鳴らす"]}),m.jsx("button",{type:"button",className:"admin-secondary-button",onClick:()=>dB(),children:"トースト通知をテスト表示"})]})]}),m.jsxs("section",{className:"admin-card",children:[m.jsx("h3",{children:"ロールと権限"}),m.jsx("p",{children:"サイドバーに表示するロールの可視化設定です。Firestore のカスタムクレームと同期されます。"}),m.jsx("ul",{className:"admin-list",style:{margin:0},children:gB.map(w=>m.jsxs("li",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[m.jsxs("div",{children:[m.jsx("p",{style:{margin:0},children:w.label}),m.jsxs("small",{style:{color:"#64748b"},children:["ID: ",w.id]})]}),m.jsxs("label",{style:{display:"flex",alignItems:"center",gap:10},children:[m.jsx("input",{type:"checkbox",defaultChecked:w.enabled})," 表示"]})]},w.id))})]})]})}function yB(n,e){if(n.match(/^[a-z]+:\/\//i))return n;if(n.match(/^\/\//))return window.location.protocol+n;if(n.match(/^[a-z]+:/i))return n;const t=document.implementation.createHTMLDocument(),r=t.createElement("base"),i=t.createElement("a");return t.head.appendChild(r),t.body.appendChild(i),e&&(r.href=e),i.href=n,i.href}const _B=(()=>{let n=0;const e=()=>`0000${(Math.random()*36**4<<0).toString(36)}`.slice(-4);return()=>(n+=1,`u${e()}${n}`)})();function Xs(n){const e=[];for(let t=0,r=n.length;t<r;t++)e.push(n[t]);return e}let Wl=null;function w3(n={}){return Wl||(n.includeStyleProperties?(Wl=n.includeStyleProperties,Wl):(Wl=Xs(window.getComputedStyle(document.documentElement)),Wl))}function N0(n,e){const r=(n.ownerDocument.defaultView||window).getComputedStyle(n).getPropertyValue(e);return r?parseFloat(r.replace("px","")):0}function xB(n){const e=N0(n,"border-left-width"),t=N0(n,"border-right-width");return n.clientWidth+e+t}function EB(n){const e=N0(n,"border-top-width"),t=N0(n,"border-bottom-width");return n.clientHeight+e+t}function A3(n,e={}){const t=e.width||xB(n),r=e.height||EB(n);return{width:t,height:r}}function wB(){let n,e;try{e=process}catch{}const t=e&&e.env?e.env.devicePixelRatio:null;return t&&(n=parseInt(t,10),Number.isNaN(n)&&(n=1)),n||window.devicePixelRatio||1}const Br=16384;function AB(n){(n.width>Br||n.height>Br)&&(n.width>Br&&n.height>Br?n.width>n.height?(n.height*=Br/n.width,n.width=Br):(n.width*=Br/n.height,n.height=Br):n.width>Br?(n.height*=Br/n.width,n.width=Br):(n.width*=Br/n.height,n.height=Br))}function R0(n){return new Promise((e,t)=>{const r=new Image;r.onload=()=>{r.decode().then(()=>{requestAnimationFrame(()=>e(r))})},r.onerror=t,r.crossOrigin="anonymous",r.decoding="async",r.src=n})}async function bB(n){return Promise.resolve().then(()=>new XMLSerializer().serializeToString(n)).then(encodeURIComponent).then(e=>`data:image/svg+xml;charset=utf-8,${e}`)}async function SB(n,e,t){const r="http://www.w3.org/2000/svg",i=document.createElementNS(r,"svg"),a=document.createElementNS(r,"foreignObject");return i.setAttribute("width",`${e}`),i.setAttribute("height",`${t}`),i.setAttribute("viewBox",`0 0 ${e} ${t}`),a.setAttribute("width","100%"),a.setAttribute("height","100%"),a.setAttribute("x","0"),a.setAttribute("y","0"),a.setAttribute("externalResourcesRequired","true"),i.appendChild(a),a.appendChild(n),bB(i)}const Sr=(n,e)=>{if(n instanceof e)return!0;const t=Object.getPrototypeOf(n);return t===null?!1:t.constructor.name===e.name||Sr(t,e)};function CB(n){const e=n.getPropertyValue("content");return`${n.cssText} content: '${e.replace(/'|"/g,"")}';`}function TB(n,e){return w3(e).map(t=>{const r=n.getPropertyValue(t),i=n.getPropertyPriority(t);return`${t}: ${r}${i?" !important":""};`}).join(" ")}function IB(n,e,t,r){const i=`.${n}:${e}`,a=t.cssText?CB(t):TB(t,r);return document.createTextNode(`${i}{${a}}`)}function WA(n,e,t,r){const i=window.getComputedStyle(n,t),a=i.getPropertyValue("content");if(a===""||a==="none")return;const o=_B();try{e.className=`${e.className} ${o}`}catch{return}const c=document.createElement("style");c.appendChild(IB(o,t,i,r)),e.appendChild(c)}function NB(n,e,t){WA(n,e,":before",t),WA(n,e,":after",t)}const QA="application/font-woff",ZA="image/jpeg",RB={woff:QA,woff2:QA,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:ZA,jpeg:ZA,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml",webp:"image/webp"};function OB(n){const e=/\.([^./]*?)$/g.exec(n);return e?e[1]:""}function Ly(n){const e=OB(n).toLowerCase();return RB[e]||""}function DB(n){return n.split(/,/)[1]}function hv(n){return n.search(/^(data:)/)!==-1}function MB(n,e){return`data:${e};base64,${n}`}async function b3(n,e,t){const r=await fetch(n,e);if(r.status===404)throw new Error(`Resource "${r.url}" not found`);const i=await r.blob();return new Promise((a,o)=>{const c=new FileReader;c.onerror=o,c.onloadend=()=>{try{a(t({res:r,result:c.result}))}catch(u){o(u)}},c.readAsDataURL(i)})}const qm={};function PB(n,e,t){let r=n.replace(/\?.*/,"");return t&&(r=n),/ttf|otf|eot|woff2?/i.test(r)&&(r=r.replace(/.*\//,"")),e?`[${e}]${r}`:r}async function jy(n,e,t){const r=PB(n,e,t.includeQueryParams);if(qm[r]!=null)return qm[r];t.cacheBust&&(n+=(/\?/.test(n)?"&":"?")+new Date().getTime());let i;try{const a=await b3(n,t.fetchRequestInit,({res:o,result:c})=>(e||(e=o.headers.get("Content-Type")||""),DB(c)));i=MB(a,e)}catch(a){i=t.imagePlaceholder||"";let o=`Failed to fetch resource: ${n}`;a&&(o=typeof a=="string"?a:a.message),o&&console.warn(o)}return qm[r]=i,i}async function kB(n){const e=n.toDataURL();return e==="data:,"?n.cloneNode(!1):R0(e)}async function LB(n,e){if(n.currentSrc){const a=document.createElement("canvas"),o=a.getContext("2d");a.width=n.clientWidth,a.height=n.clientHeight,o?.drawImage(n,0,0,a.width,a.height);const c=a.toDataURL();return R0(c)}const t=n.poster,r=Ly(t),i=await jy(t,r,e);return R0(i)}async function jB(n,e){var t;try{if(!((t=n?.contentDocument)===null||t===void 0)&&t.body)return await p1(n.contentDocument.body,e,!0)}catch{}return n.cloneNode(!1)}async function BB(n,e){return Sr(n,HTMLCanvasElement)?kB(n):Sr(n,HTMLVideoElement)?LB(n,e):Sr(n,HTMLIFrameElement)?jB(n,e):n.cloneNode(S3(n))}const VB=n=>n.tagName!=null&&n.tagName.toUpperCase()==="SLOT",S3=n=>n.tagName!=null&&n.tagName.toUpperCase()==="SVG";async function FB(n,e,t){var r,i;if(S3(e))return e;let a=[];return VB(n)&&n.assignedNodes?a=Xs(n.assignedNodes()):Sr(n,HTMLIFrameElement)&&(!((r=n.contentDocument)===null||r===void 0)&&r.body)?a=Xs(n.contentDocument.body.childNodes):a=Xs(((i=n.shadowRoot)!==null&&i!==void 0?i:n).childNodes),a.length===0||Sr(n,HTMLVideoElement)||await a.reduce((o,c)=>o.then(()=>p1(c,t)).then(u=>{u&&e.appendChild(u)}),Promise.resolve()),e}function UB(n,e,t){const r=e.style;if(!r)return;const i=window.getComputedStyle(n);i.cssText?(r.cssText=i.cssText,r.transformOrigin=i.transformOrigin):w3(t).forEach(a=>{let o=i.getPropertyValue(a);a==="font-size"&&o.endsWith("px")&&(o=`${Math.floor(parseFloat(o.substring(0,o.length-2)))-.1}px`),Sr(n,HTMLIFrameElement)&&a==="display"&&o==="inline"&&(o="block"),a==="d"&&e.getAttribute("d")&&(o=`path(${e.getAttribute("d")})`),r.setProperty(a,o,i.getPropertyPriority(a))})}function zB(n,e){Sr(n,HTMLTextAreaElement)&&(e.innerHTML=n.value),Sr(n,HTMLInputElement)&&e.setAttribute("value",n.value)}function HB(n,e){if(Sr(n,HTMLSelectElement)){const t=e,r=Array.from(t.children).find(i=>n.value===i.getAttribute("value"));r&&r.setAttribute("selected","")}}function GB(n,e,t){return Sr(e,Element)&&(UB(n,e,t),NB(n,e,t),zB(n,e),HB(n,e)),e}async function qB(n,e){const t=n.querySelectorAll?n.querySelectorAll("use"):[];if(t.length===0)return n;const r={};for(let a=0;a<t.length;a++){const c=t[a].getAttribute("xlink:href");if(c){const u=n.querySelector(c),h=document.querySelector(c);!u&&h&&!r[c]&&(r[c]=await p1(h,e,!0))}}const i=Object.values(r);if(i.length){const a="http://www.w3.org/1999/xhtml",o=document.createElementNS(a,"svg");o.setAttribute("xmlns",a),o.style.position="absolute",o.style.width="0",o.style.height="0",o.style.overflow="hidden",o.style.display="none";const c=document.createElementNS(a,"defs");o.appendChild(c);for(let u=0;u<i.length;u++)c.appendChild(i[u]);n.appendChild(o)}return n}async function p1(n,e,t){return!t&&e.filter&&!e.filter(n)?null:Promise.resolve(n).then(r=>BB(r,e)).then(r=>FB(n,r,e)).then(r=>GB(n,r,e)).then(r=>qB(r,e))}const C3=/url\((['"]?)([^'"]+?)\1\)/g,$B=/url\([^)]+\)\s*format\((["']?)([^"']+)\1\)/g,XB=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;function YB(n){const e=n.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1");return new RegExp(`(url\\(['"]?)(${e})(['"]?\\))`,"g")}function KB(n){const e=[];return n.replace(C3,(t,r,i)=>(e.push(i),t)),e.filter(t=>!hv(t))}async function WB(n,e,t,r,i){try{const a=t?yB(e,t):e,o=Ly(e);let c;return i||(c=await jy(a,o,r)),n.replace(YB(e),`$1${c}$3`)}catch{}return n}function QB(n,{preferredFontFormat:e}){return e?n.replace(XB,t=>{for(;;){const[r,,i]=$B.exec(t)||[];if(!i)return"";if(i===e)return`src: ${r};`}}):n}function T3(n){return n.search(C3)!==-1}async function I3(n,e,t){if(!T3(n))return n;const r=QB(n,t);return KB(r).reduce((a,o)=>a.then(c=>WB(c,o,e,t)),Promise.resolve(r))}async function Ql(n,e,t){var r;const i=(r=e.style)===null||r===void 0?void 0:r.getPropertyValue(n);if(i){const a=await I3(i,null,t);return e.style.setProperty(n,a,e.style.getPropertyPriority(n)),!0}return!1}async function ZB(n,e){await Ql("background",n,e)||await Ql("background-image",n,e),await Ql("mask",n,e)||await Ql("-webkit-mask",n,e)||await Ql("mask-image",n,e)||await Ql("-webkit-mask-image",n,e)}async function JB(n,e){const t=Sr(n,HTMLImageElement);if(!(t&&!hv(n.src))&&!(Sr(n,SVGImageElement)&&!hv(n.href.baseVal)))return;const r=t?n.src:n.href.baseVal,i=await jy(r,Ly(r),e);await new Promise((a,o)=>{n.onload=a,n.onerror=e.onImageErrorHandler?(...u)=>{try{a(e.onImageErrorHandler(...u))}catch(h){o(h)}}:o;const c=n;c.decode&&(c.decode=a),c.loading==="lazy"&&(c.loading="eager"),t?(n.srcset="",n.src=i):n.href.baseVal=i})}async function eV(n,e){const r=Xs(n.childNodes).map(i=>N3(i,e));await Promise.all(r).then(()=>n)}async function N3(n,e){Sr(n,Element)&&(await ZB(n,e),await JB(n,e),await eV(n,e))}function tV(n,e){const{style:t}=n;e.backgroundColor&&(t.backgroundColor=e.backgroundColor),e.width&&(t.width=`${e.width}px`),e.height&&(t.height=`${e.height}px`);const r=e.style;return r!=null&&Object.keys(r).forEach(i=>{t[i]=r[i]}),n}const JA={};async function eb(n){let e=JA[n];if(e!=null)return e;const r=await(await fetch(n)).text();return e={url:n,cssText:r},JA[n]=e,e}async function tb(n,e){let t=n.cssText;const r=/url\(["']?([^"')]+)["']?\)/g,a=(t.match(/url\([^)]+\)/g)||[]).map(async o=>{let c=o.replace(r,"$1");return c.startsWith("https://")||(c=new URL(c,n.url).href),b3(c,e.fetchRequestInit,({result:u})=>(t=t.replace(o,`url(${u})`),[o,u]))});return Promise.all(a).then(()=>t)}function nb(n){if(n==null)return[];const e=[],t=/(\/\*[\s\S]*?\*\/)/gi;let r=n.replace(t,"");const i=new RegExp("((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})","gi");for(;;){const u=i.exec(r);if(u===null)break;e.push(u[0])}r=r.replace(i,"");const a=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi,o="((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})",c=new RegExp(o,"gi");for(;;){let u=a.exec(r);if(u===null){if(u=c.exec(r),u===null)break;a.lastIndex=c.lastIndex}else c.lastIndex=a.lastIndex;e.push(u[0])}return e}async function nV(n,e){const t=[],r=[];return n.forEach(i=>{if("cssRules"in i)try{Xs(i.cssRules||[]).forEach((a,o)=>{if(a.type===CSSRule.IMPORT_RULE){let c=o+1;const u=a.href,h=eb(u).then(p=>tb(p,e)).then(p=>nb(p).forEach(g=>{try{i.insertRule(g,g.startsWith("@import")?c+=1:i.cssRules.length)}catch(_){console.error("Error inserting rule from remote css",{rule:g,error:_})}})).catch(p=>{console.error("Error loading remote css",p.toString())});r.push(h)}})}catch(a){const o=n.find(c=>c.href==null)||document.styleSheets[0];i.href!=null&&r.push(eb(i.href).then(c=>tb(c,e)).then(c=>nb(c).forEach(u=>{o.insertRule(u,o.cssRules.length)})).catch(c=>{console.error("Error loading remote stylesheet",c)})),console.error("Error inlining remote css file",a)}}),Promise.all(r).then(()=>(n.forEach(i=>{if("cssRules"in i)try{Xs(i.cssRules||[]).forEach(a=>{t.push(a)})}catch(a){console.error(`Error while reading CSS rules from ${i.href}`,a)}}),t))}function rV(n){return n.filter(e=>e.type===CSSRule.FONT_FACE_RULE).filter(e=>T3(e.style.getPropertyValue("src")))}async function iV(n,e){if(n.ownerDocument==null)throw new Error("Provided element is not within a Document");const t=Xs(n.ownerDocument.styleSheets),r=await nV(t,e);return rV(r)}function R3(n){return n.trim().replace(/["']/g,"")}function aV(n){const e=new Set;function t(r){(r.style.fontFamily||getComputedStyle(r).fontFamily).split(",").forEach(a=>{e.add(R3(a))}),Array.from(r.children).forEach(a=>{a instanceof HTMLElement&&t(a)})}return t(n),e}async function sV(n,e){const t=await iV(n,e),r=aV(n);return(await Promise.all(t.filter(a=>r.has(R3(a.style.fontFamily))).map(a=>{const o=a.parentStyleSheet?a.parentStyleSheet.href:null;return I3(a.cssText,o,e)}))).join(`
`)}async function oV(n,e){const t=e.fontEmbedCSS!=null?e.fontEmbedCSS:e.skipFonts?null:await sV(n,e);if(t){const r=document.createElement("style"),i=document.createTextNode(t);r.appendChild(i),n.firstChild?n.insertBefore(r,n.firstChild):n.appendChild(r)}}async function lV(n,e={}){const{width:t,height:r}=A3(n,e),i=await p1(n,e,!0);return await oV(i,e),await N3(i,e),tV(i,e),await SB(i,t,r)}async function cV(n,e={}){const{width:t,height:r}=A3(n,e),i=await lV(n,e),a=await R0(i),o=document.createElement("canvas"),c=o.getContext("2d"),u=e.pixelRatio||wB(),h=e.canvasWidth||t,p=e.canvasHeight||r;return o.width=h*u,o.height=p*u,e.skipAutoScale||AB(o),o.style.width=`${h}`,o.style.height=`${p}`,e.backgroundColor&&(c.fillStyle=e.backgroundColor,c.fillRect(0,0,o.width,o.height)),c.drawImage(a,0,0,o.width,o.height),o}async function uV(n,e={}){return(await cV(n,e)).toDataURL()}const fV=[{value:1e4,label:"10,000円札",kind:"bill"},{value:5e3,label:"5,000円札",kind:"bill"},{value:2e3,label:"2,000円札",kind:"bill"},{value:1e3,label:"1,000円札",kind:"bill"}],hV=[{value:500,label:"500円玉",kind:"coin"},{value:100,label:"100円玉",kind:"coin"},{value:50,label:"50円玉",kind:"coin"},{value:10,label:"10円玉",kind:"coin"},{value:5,label:"5円玉",kind:"coin"},{value:1,label:"1円玉",kind:"coin"}],O3=[...fV,...hV],rb=["middle","close"],gn=new Intl.NumberFormat("ja-JP",{style:"currency",currency:"JPY",maximumFractionDigits:0}),fr=new Intl.NumberFormat("ja-JP",{maximumFractionDigits:0}),ib=new Intl.DateTimeFormat("ja-JP",{dateStyle:"medium",timeStyle:"short"});function ab(){return O3.reduce((n,e)=>(n[e.value]=0,n),{})}function dV(){const[n]=P.useState(()=>new Date),e=P.useCallback(()=>{const ie=nB(n),ge=XA(n),pe={...ie},be={open:"manual",middle:"manual",close:"manual"};let De=!1;return ge>0&&rb.forEach(rt=>{pe[rt]<=0&&(pe[rt]=ge,be[rt]="auto",De=!0)}),{presets:pe,source:be,shouldPersist:De,usageTotal:ge}},[n]),t=P.useMemo(()=>e(),[e]),[r,i]=P.useState(()=>ab()),[a,o]=P.useState(""),[c,u]=P.useState(!1),[h,p]=P.useState(null),[g,_]=P.useState(null),[E,A]=P.useState("open"),[S,O]=P.useState(()=>t.presets),[T,R]=P.useState(()=>t.source),[L,z]=P.useState(()=>t.presets.open),[U,G]=P.useState(()=>t.usageTotal),D=P.useRef(null),w=P.useRef(T),I=P.useMemo(()=>{const ie=new Date(n);return ie.setHours(0,0,0,0),ie},[n]),M=P.useMemo(()=>{const ie=new Date(I);return ie.setDate(ie.getDate()+1),ie},[I]),j=P.useMemo(()=>({start:I,end:M}),[I,M]),{orders:V}=jc(j),k=P.useMemo(()=>{const ie=I.getTime(),ge=M.getTime();return V.reduce((pe,be)=>{const De=be.createdAt??be.updatedAt;if(!De)return pe;const rt=De.getTime();return rt<ie||rt>=ge||(be.payment==="支払い済み"?(pe.paidTotal+=be.total,pe.paidCount+=1):be.payment==="未払い"&&(pe.unpaidTotal+=be.total,pe.unpaidCount+=1)),pe},{paidTotal:0,unpaidTotal:0,paidCount:0,unpaidCount:0})},[V,I,M]);P.useEffect(()=>{w.current=T},[T]),P.useEffect(()=>{t.shouldPersist&&($A(t.presets,n),G(t.usageTotal))},[n,t]);const ee=P.useCallback(ie=>{$A(ie,n)},[n]),Ie=P.useCallback((ie,ge,pe="manual")=>{O(be=>{if(be[ie]===ge)return be;const De={...be,[ie]:ge};return ee(De),De}),R(be=>be[ie]===pe?be:{...be,[ie]:pe})},[ee]);P.useEffect(()=>{z(S[E])},[E,S]),P.useEffect(()=>{if(typeof window>"u")return;const ie=()=>{const be=XA(n);G(be),O(De=>{const rt=w.current;let Gt=De,ot=!1;return rb.forEach(Ot=>{rt[Ot]==="auto"&&De[Ot]!==be&&(ot||(Gt={...De},ot=!0),Gt[Ot]=be)}),ot?(ee(Gt),Gt):De})},ge=iB(n),pe=be=>{be.key===ge&&ie()};return window.addEventListener(ov,ie),window.addEventListener("storage",pe),()=>{window.removeEventListener(ov,ie),window.removeEventListener("storage",pe)}},[n,ee]);const q=P.useMemo(()=>{const ie=O3.map(ot=>{const Ot=r[ot.value]??0,Bn=ot.value*Ot;return{...ot,count:Ot,subtotal:Bn}}),ge=ie.filter(ot=>ot.kind==="bill"),pe=ie.filter(ot=>ot.kind==="coin"),be=ge.reduce((ot,Ot)=>ot+Ot.subtotal,0),De=pe.reduce((ot,Ot)=>ot+Ot.subtotal,0),rt=ge.reduce((ot,Ot)=>ot+Ot.count,0),Gt=pe.reduce((ot,Ot)=>ot+Ot.count,0);return{billItems:ge,coinItems:pe,billTotal:be,coinTotal:De,grandTotal:be+De,totalBills:rt,totalCoins:Gt,totalPieces:rt+Gt}},[r]),ce=Jj[E],me=P.useMemo(()=>L*qo,[L]),Te=P.useMemo(()=>new Date,[r,a,E,L]),Ue=ie=>ge=>{const pe=ge.currentTarget.valueAsNumber;i(be=>({...be,[ie]:Number.isNaN(pe)||pe<0?0:Math.floor(pe)}))},X=ie=>{const ge=ie.currentTarget.value;A(ge),z(S[ge]??0)},se=ie=>{const ge=ie.currentTarget.valueAsNumber,pe=Number.isNaN(ge)||ge<0?0:Math.floor(ge);z(pe),Ie(E,pe,"manual")},ve=()=>{i(ab()),p(null);const ie=e();O(ie.presets),R(ie.source);const ge=ie.presets[E];z(ge),G(ie.usageTotal),ee(ie.presets)},Ee=async()=>{if(D.current){u(!0),p(null);try{const ie=await uV(D.current,{cacheBust:!0,pixelRatio:2,backgroundColor:"#ffffff"}),ge=document.createElement("a"),pe=new Date().toISOString().replace(/[:.]/g,"-");ge.download=`cash-audit-${pe}.png`,ge.href=ie,ge.click(),_(new Date)}catch(ie){console.error("Failed to save cash audit as image",ie),p("画像の書き出しに失敗しました。もう一度お試しください。")}finally{u(!1)}}};return m.jsxs("div",{className:"admin-grid admin-cash-audit-layout",children:[m.jsxs("div",{className:"admin-cash-audit-input-column",children:[m.jsxs("section",{className:"admin-card admin-cash-audit-config",children:[m.jsx("header",{className:"admin-card-header",children:m.jsxs("div",{children:[m.jsx("h3",{children:"点検設定"}),m.jsx("p",{children:"点検タイミングと使用済み金券を確認できます。"})]})}),m.jsxs("fieldset",{className:"admin-cash-audit-shift-group",children:[m.jsx("legend",{children:"点検タイミング"}),m.jsx("div",{className:"admin-cash-audit-shift-options",children:h1.map(ie=>m.jsxs("label",{className:`admin-cash-audit-shift-option${E===ie.value?" is-active":""}`,children:[m.jsx("input",{type:"radio",name:"cash-audit-shift",value:ie.value,checked:E===ie.value,onChange:X}),m.jsx("span",{children:ie.label})]},ie.value))})]}),m.jsxs("div",{className:"admin-cash-audit-voucher-field",children:[m.jsx("label",{htmlFor:"cash-audit-voucher-count",children:"使用された金券"}),m.jsxs("div",{className:"admin-cash-audit-count-input",children:[m.jsx("input",{id:"cash-audit-voucher-count",className:"admin-input admin-input--compact",type:"number",min:0,step:1,inputMode:"numeric",pattern:"[0-9]*",value:L,onChange:se}),m.jsx("span",{className:"admin-cash-audit-count-suffix",children:"枚"})]}),m.jsx("p",{className:"admin-cash-audit-helper",children:"支払いフローで使用した金券枚数が記録され、中間点検と閉店時に自動入力されます。"}),m.jsxs("div",{className:"admin-cash-audit-voucher-total",children:[m.jsxs("span",{children:["金券金額（1枚あたり",fr.format(qo),"円）"]}),m.jsx("strong",{children:gn.format(me)})]}),m.jsxs("div",{className:"admin-cash-audit-voucher-usage",children:[m.jsx("span",{children:"本日の金券使用枚数"}),m.jsxs("strong",{children:[fr.format(U)," 枚"]}),m.jsxs("span",{className:"admin-cash-audit-voucher-usage-amount",children:["合計 ",gn.format(U*qo)]})]})]}),(E==="middle"||E==="close")&&m.jsxs("div",{className:"admin-cash-audit-shift-summary",children:[m.jsxs("div",{children:[m.jsx("span",{className:"admin-cash-audit-summary-label",children:"会計済み合計"}),m.jsx("strong",{children:gn.format(k.paidTotal)}),m.jsxs("span",{className:"admin-cash-audit-summary-meta",children:[fr.format(k.paidCount)," 件"]})]}),m.jsxs("div",{children:[m.jsx("span",{className:"admin-cash-audit-summary-label",children:"未会計合計"}),m.jsx("strong",{children:gn.format(k.unpaidTotal)}),m.jsxs("span",{className:"admin-cash-audit-summary-meta",children:[fr.format(k.unpaidCount)," 件"]})]})]})]}),m.jsxs("section",{className:"admin-card",children:[m.jsxs("header",{className:"admin-card-header",children:[m.jsxs("div",{children:[m.jsx("h3",{children:"紙幣"}),m.jsx("p",{children:"手元の紙幣枚数を入力してください。"})]}),m.jsxs("dl",{className:"admin-cash-audit-group-summary",children:[m.jsxs("div",{children:[m.jsx("dt",{children:"枚数"}),m.jsxs("dd",{children:[fr.format(q.totalBills)," 枚"]})]}),m.jsxs("div",{children:[m.jsx("dt",{children:"小計"}),m.jsx("dd",{children:gn.format(q.billTotal)})]})]})]}),m.jsxs("table",{className:"admin-table admin-cash-audit-table",children:[m.jsx("thead",{children:m.jsxs("tr",{children:[m.jsx("th",{scope:"col",children:"金種"}),m.jsx("th",{scope:"col",children:"枚数"}),m.jsx("th",{scope:"col",children:"小計"})]})}),m.jsx("tbody",{children:q.billItems.map(ie=>m.jsxs("tr",{children:[m.jsx("th",{scope:"row",children:ie.label}),m.jsxs("td",{children:[m.jsxs("label",{className:"sr-only",htmlFor:`denomination-${ie.value}`,children:[ie.label,"の枚数"]}),m.jsxs("div",{className:"admin-cash-audit-count-input",children:[m.jsx("input",{id:`denomination-${ie.value}`,className:"admin-input admin-input--compact",type:"number",min:0,step:1,inputMode:"numeric",pattern:"[0-9]*",value:ie.count,onChange:Ue(ie.value)}),m.jsx("span",{className:"admin-cash-audit-count-suffix",children:"枚"})]})]}),m.jsx("td",{className:"admin-text-right admin-cash-audit-value",children:gn.format(ie.subtotal)})]},`bill-${ie.value}`))}),m.jsx("tfoot",{children:m.jsxs("tr",{children:[m.jsx("th",{scope:"row",children:"紙幣小計"}),m.jsx("td",{children:m.jsxs("span",{className:"admin-cash-audit-total-chip",children:[fr.format(q.totalBills)," 枚"]})}),m.jsx("td",{className:"admin-text-right admin-cash-audit-value",children:gn.format(q.billTotal)})]})})]})]}),m.jsxs("section",{className:"admin-card",children:[m.jsxs("header",{className:"admin-card-header",children:[m.jsxs("div",{children:[m.jsx("h3",{children:"硬貨"}),m.jsx("p",{children:"硬貨の枚数も同じように入力できます。"})]}),m.jsxs("dl",{className:"admin-cash-audit-group-summary",children:[m.jsxs("div",{children:[m.jsx("dt",{children:"枚数"}),m.jsxs("dd",{children:[fr.format(q.totalCoins)," 枚"]})]}),m.jsxs("div",{children:[m.jsx("dt",{children:"小計"}),m.jsx("dd",{children:gn.format(q.coinTotal)})]})]})]}),m.jsxs("table",{className:"admin-table admin-cash-audit-table",children:[m.jsx("thead",{children:m.jsxs("tr",{children:[m.jsx("th",{scope:"col",children:"金種"}),m.jsx("th",{scope:"col",children:"枚数"}),m.jsx("th",{scope:"col",children:"小計"})]})}),m.jsx("tbody",{children:q.coinItems.map(ie=>m.jsxs("tr",{children:[m.jsx("th",{scope:"row",children:ie.label}),m.jsxs("td",{children:[m.jsxs("label",{className:"sr-only",htmlFor:`denomination-${ie.value}`,children:[ie.label,"の枚数"]}),m.jsxs("div",{className:"admin-cash-audit-count-input",children:[m.jsx("input",{id:`denomination-${ie.value}`,className:"admin-input admin-input--compact",type:"number",min:0,step:1,inputMode:"numeric",pattern:"[0-9]*",value:ie.count,onChange:Ue(ie.value)}),m.jsx("span",{className:"admin-cash-audit-count-suffix",children:"枚"})]})]}),m.jsx("td",{className:"admin-text-right admin-cash-audit-value",children:gn.format(ie.subtotal)})]},`coin-${ie.value}`))}),m.jsx("tfoot",{children:m.jsxs("tr",{children:[m.jsx("th",{scope:"row",children:"硬貨小計"}),m.jsx("td",{children:m.jsxs("span",{className:"admin-cash-audit-total-chip",children:[fr.format(q.totalCoins)," 枚"]})}),m.jsx("td",{className:"admin-text-right admin-cash-audit-value",children:gn.format(q.coinTotal)})]})})]})]}),m.jsxs("section",{className:"admin-card admin-cash-audit-actions",children:[m.jsx("header",{className:"admin-card-header",children:m.jsxs("div",{children:[m.jsx("h3",{children:"記録メモ"}),m.jsx("p",{children:"確定時刻や担当者、釣銭調整のメモを残せます。"})]})}),m.jsxs("div",{className:"admin-cash-audit-note-field",children:[m.jsx("label",{htmlFor:"cash-audit-note",children:"メモ"}),m.jsx("textarea",{id:"cash-audit-note",className:"admin-textarea",value:a,maxLength:400,placeholder:"例: 15:30 時点。担当: 佐藤。釣銭 100円玉を追加予定。",onChange:ie=>o(ie.target.value)})]}),m.jsxs("div",{className:"admin-cash-audit-buttons",children:[m.jsx("button",{type:"button",className:"admin-secondary-button",onClick:ve,children:"すべてリセット"}),m.jsx("button",{type:"button",className:"admin-primary-button",onClick:Ee,disabled:c,children:c?"画像を生成中…":"画像として保存"})]}),m.jsxs("div",{className:"admin-cash-audit-feedback",children:[m.jsxs("span",{children:["合計 ",gn.format(q.grandTotal)," / ",q.totalPieces," 枚"]}),m.jsxs("span",{className:"admin-cash-audit-feedback-muted",children:["金券 ",fr.format(L)," 枚（",gn.format(me),"）"]}),m.jsxs("span",{className:"admin-cash-audit-feedback-muted",children:["点検区分 ",ce]}),g&&m.jsxs("span",{className:"admin-cash-audit-feedback-muted",children:["最終保存: ",ib.format(g)]})]}),h&&m.jsx("p",{className:"admin-cash-audit-error",children:h})]})]}),m.jsxs("section",{className:"admin-card admin-cash-audit-report",ref:D,children:[m.jsxs("header",{className:"admin-cash-audit-report-header",children:[m.jsx("p",{className:"admin-content-overline",children:"会計点検レポート"}),m.jsx("h3",{children:gn.format(q.grandTotal)}),m.jsxs("div",{className:"admin-cash-audit-report-meta",children:[m.jsxs("span",{children:["紙幣 ",gn.format(q.billTotal)]}),m.jsxs("span",{children:["硬貨 ",gn.format(q.coinTotal)]}),m.jsxs("span",{children:["金券 ",fr.format(L)," 枚（",gn.format(me),"）"]}),m.jsxs("span",{children:["総枚数 ",fr.format(q.totalPieces)," 枚"]}),m.jsxs("span",{children:["本日の金券使用 ",fr.format(U)," 枚（",gn.format(U*qo),"）"]})]}),m.jsxs("p",{className:"admin-cash-audit-timestamp",children:["作成日時: ",ib.format(Te)]}),m.jsxs("p",{className:"admin-cash-audit-shift-label",children:["点検区分: ",ce]})]}),m.jsxs("div",{className:"admin-cash-audit-report-grid",children:[m.jsxs("article",{children:[m.jsx("h4",{children:"紙幣内訳"}),m.jsxs("table",{children:[m.jsx("thead",{children:m.jsxs("tr",{children:[m.jsx("th",{scope:"col",children:"金種"}),m.jsx("th",{scope:"col",children:"枚数"}),m.jsx("th",{scope:"col",children:"小計"})]})}),m.jsx("tbody",{children:q.billItems.map(ie=>m.jsxs("tr",{children:[m.jsx("td",{children:ie.label}),m.jsxs("td",{children:[fr.format(ie.count)," 枚"]}),m.jsx("td",{children:gn.format(ie.subtotal)})]},`report-bill-${ie.value}`))})]})]}),m.jsxs("article",{children:[m.jsx("h4",{children:"硬貨内訳"}),m.jsxs("table",{children:[m.jsx("thead",{children:m.jsxs("tr",{children:[m.jsx("th",{scope:"col",children:"金種"}),m.jsx("th",{scope:"col",children:"枚数"}),m.jsx("th",{scope:"col",children:"小計"})]})}),m.jsx("tbody",{children:q.coinItems.map(ie=>m.jsxs("tr",{children:[m.jsx("td",{children:ie.label}),m.jsxs("td",{children:[fr.format(ie.count)," 枚"]}),m.jsx("td",{children:gn.format(ie.subtotal)})]},`report-coin-${ie.value}`))})]})]}),m.jsxs("article",{children:[m.jsx("h4",{children:"金券内訳"}),m.jsxs("table",{children:[m.jsx("thead",{children:m.jsxs("tr",{children:[m.jsx("th",{scope:"col",children:"項目"}),m.jsx("th",{scope:"col",children:"枚数"}),m.jsx("th",{scope:"col",children:"小計"})]})}),m.jsx("tbody",{children:m.jsxs("tr",{children:[m.jsx("td",{children:"金券"}),m.jsxs("td",{children:[fr.format(L)," 枚"]}),m.jsx("td",{children:gn.format(me)})]})})]})]})]}),m.jsxs("div",{className:"admin-cash-audit-note-preview",children:[m.jsx("h4",{children:"メモ"}),m.jsx("p",{children:a||"記録されたメモはありません。"})]})]})]})}const sb=[{id:"dashboard",label:"ダッシュボード",path:"/admin/dashboard",icon:"📊",allowedRoles:["admin"]},{id:"orders",label:"注文一覧",path:"/admin/orders",icon:"🗂️",allowedRoles:["admin"]},{id:"production",label:"盛り付け",path:"/admin/production",icon:"🥞",allowedRoles:["admin","staff"]},{id:"serving",label:"提供フロー",path:"/admin/serving",icon:"🍽️",allowedRoles:["admin","staff"]},{id:"payments",label:"支払いフロー",path:"/admin/payments",icon:"💳",allowedRoles:["admin","staff"]},{id:"cash-audit",label:"会計点検",path:"/admin/cash-audit",icon:"💴",allowedRoles:["admin"]},{id:"reception",label:"受付設定",path:"/admin/reception",icon:"🎫",allowedRoles:["admin"]},{id:"export",label:"エクスポート",path:"/admin/export",icon:"📤",allowedRoles:["admin"]},{id:"settings",label:"設定",path:"/admin/settings",icon:"⚙️",allowedRoles:["admin"]}];function pV(){const[n,e]=P.useState(!1),[t,r]=P.useState(!0),i=ki(),a=Jo(),{roles:o,signOut:c}=o1(),u=P.useCallback(T=>T.some(R=>o.includes(R)),[o]),h=P.useMemo(()=>sb.filter(T=>u(T.allowedRoles)),[u]),p=h[0]?.path??"/admin";P.useEffect(()=>{e(!1)},[i.pathname]);const g=P.useMemo(()=>{const T=h.find(R=>i.pathname.startsWith(R.path));return T||(sb.find(R=>i.pathname.startsWith(R.path))??null)},[h,i.pathname]);P.useEffect(()=>{g&&!u(g.allowedRoles)&&h.length>0&&a(h[0].path,{replace:!0})},[g,h,u,a]);const _=t||n,E=()=>{r(T=>!T),e(!1)},A=()=>{c()},S=["admin","kitchen","staff"],O=["admin-shell",t?"sidebar-pinned":"",n?"sidebar-open":""].filter(Boolean).join(" ");return m.jsxs("div",{className:O,children:[m.jsxs("button",{type:"button",className:"admin-hamburger","aria-controls":"admin-sidebar","aria-expanded":n,onClick:()=>e(T=>!T),children:[m.jsx("span",{className:"admin-hamburger-bar"}),m.jsx("span",{className:"admin-hamburger-bar"}),m.jsx("span",{className:"admin-hamburger-bar"}),m.jsx("span",{className:"sr-only",children:"メニューを開閉"})]}),m.jsxs("aside",{id:"admin-sidebar",className:`admin-sidebar${_?" open":""}${t?" pinned":""}`,children:[m.jsx("div",{className:"admin-sidebar-header",children:m.jsxs("div",{children:[m.jsx("p",{className:"admin-sidebar-title",children:"管理メニュー"}),m.jsx("p",{className:"admin-sidebar-subtitle",children:"本番運用向けの監視・更新ツールです。"})]})}),m.jsx("nav",{"aria-label":"管理メニュー",className:"admin-sidebar-nav",children:m.jsx("ul",{children:h.map(T=>{const R=g?.id===T.id;return m.jsx("li",{children:m.jsxs("button",{type:"button",className:`admin-nav-button${R?" active":""}`,onClick:()=>a(T.path),children:[m.jsx("span",{"aria-hidden":!0,className:"admin-nav-icon",children:T.icon}),m.jsx("span",{children:T.label})]})},T.id)})})}),m.jsxs("div",{className:"admin-sidebar-footer",children:[m.jsxs("button",{type:"button",className:"admin-logout-button",onClick:A,children:[m.jsx("span",{"aria-hidden":!0,className:"admin-nav-icon",children:"🚪"}),m.jsx("span",{children:"ログアウト"})]}),m.jsxs("p",{className:"admin-roles",children:["ロール:"," ",S.map(T=>{const R=o.includes(T);return m.jsx("span",{className:`admin-badge${R?"":" muted"}`,children:T},T)})]})]})]}),m.jsxs("div",{className:"admin-content",children:[m.jsxs("header",{className:"admin-content-header",children:[m.jsxs("div",{children:[m.jsxs("p",{className:"admin-content-overline",children:[g?.label??"管理","モード"]}),m.jsx("h1",{children:g?.label??"管理画面"})]}),m.jsx("div",{className:"admin-header-actions",children:m.jsxs("button",{type:"button",className:`admin-sidebar-toggle${t?"":" is-collapsed"}`,onClick:E,children:[m.jsx("span",{className:"dot","aria-hidden":!0}),t?"メニューを隠す":"メニューを固定"]})})]}),m.jsx("section",{className:"admin-content-main",children:m.jsxs(Zb,{children:[m.jsx(zt,{index:!0,element:m.jsx(ni,{to:p,replace:!0})}),m.jsx(zt,{path:"dashboard",element:u(["admin"])?m.jsx(sA,{}):m.jsx(ni,{to:p,replace:!0})}),m.jsx(zt,{path:"orders",element:u(["admin"])?m.jsx(Q7,{}):m.jsx(ni,{to:p,replace:!0})}),m.jsx(zt,{path:"production",element:u(["admin","staff"])?m.jsx(nP,{}):m.jsx(ni,{to:p,replace:!0})}),m.jsx(zt,{path:"serving",element:u(["admin","staff"])?m.jsx(fB,{}):m.jsx(ni,{to:p,replace:!0})}),m.jsx(zt,{path:"payments",element:u(["admin","staff"])?m.jsx(oB,{}):m.jsx(ni,{to:p,replace:!0})}),m.jsx(zt,{path:"cash-audit",element:u(["admin"])?m.jsx(dV,{}):m.jsx(ni,{to:p,replace:!0})}),m.jsx(zt,{path:"reception",element:u(["admin"])?m.jsx(lB,{}):m.jsx(ni,{to:p,replace:!0})}),m.jsx(zt,{path:"export",element:u(["admin"])?m.jsx(sA,{mode:"export"}):m.jsx(ni,{to:p,replace:!0})}),m.jsx(zt,{path:"settings",element:u(["admin"])?m.jsx(vB,{}):m.jsx(ni,{to:p,replace:!0})}),m.jsx(zt,{path:"*",element:m.jsx(ni,{to:p,replace:!0})})]})})]})]})}const By="order-history.v1",mV=20,dv=new Set,Vy=()=>typeof window<"u"&&typeof window.localStorage<"u",D3=()=>{if(!Vy())return[];try{const n=window.localStorage.getItem(By);if(!n)return[];const e=JSON.parse(n);return Array.isArray(e)?e.filter(t=>t&&typeof t=="object"&&"orderId"in t&&"ticket"in t).map(t=>{const r=typeof t.createdAt=="string"||t.createdAt instanceof Date?new Date(t.createdAt):void 0,i=r&&!Number.isNaN(r.getTime())?r:void 0;return{...t,callNumber:typeof t.callNumber=="number"&&Number.isFinite(t.callNumber)?t.callNumber:0,createdAt:i}}):[]}catch(n){return console.warn("Failed to parse order history from storage",n),[]}},M3=n=>{if(Vy())try{window.localStorage.setItem(By,JSON.stringify(n))}catch(e){console.warn("Failed to write order history to storage",e)}},Fy=()=>{dv.forEach(n=>n())},gV=()=>D3(),vV=n=>{const e=D3(),r=[{...n,callNumber:typeof n.callNumber=="number"&&Number.isFinite(n.callNumber)?n.callNumber:0,savedAt:new Date().toISOString()},...e.filter(i=>i.orderId!==n.orderId&&i.ticket!==n.ticket)].slice(0,mV);return M3(r),Fy(),r},yV=()=>{M3([]),Fy()},_V=n=>(dv.add(n),()=>{dv.delete(n)});Vy()&&window.addEventListener("storage",n=>{n.key===By&&Fy()});const ob=()=>gV();function xV(){return P.useSyncExternalStore(_V,ob,ob)}const P3=P.createContext(void 0);function EV({children:n}){const[e,t]=P.useState(()=>typeof window>"u"?"ja":window.localStorage.getItem("app.language")==="en"?"en":"ja"),r=P.useCallback(o=>{t(o),typeof window<"u"&&window.localStorage.setItem("app.language",o)},[]),i=P.useCallback(()=>{r(e==="ja"?"en":"ja")},[e,r]),a=P.useMemo(()=>({language:e,setLanguage:r,toggleLanguage:i}),[e,r,i]);return m.jsx(P3.Provider,{value:a,children:n})}function oo(){const n=P.useContext(P3);if(!n)throw new Error("useLanguage must be used within a LanguageProvider");return n}const k3={potaufeu:{label:"Pot-au-feu",description:"A hearty vegetable stew served warm."},plain:{label:"Fried Bread (Plain)",description:"Freshly fried bread coated with sugar."},cocoa:{label:"Fried Bread (Cocoa)",description:"Rich cocoa powder finished with chocolate sauce."},kinako:{label:"Fried Bread (Kinako)",description:"Roasted soybean flour with sweet kuromitsu syrup."},garlic:{label:"Fried Bread (Garlic)",description:"Crispy fried bread seasoned with garlic salt."},drink_hojicha:{label:"Roasted Green Tea (Hot)",description:"Fragrant hojicha to warm you up."},drink_cocoa:{label:"Hot Cocoa",description:"Sweet and velvety cocoa."},drink_coffee:{label:"Hot Coffee",description:"Aromatic freshly brewed coffee."},drink_milkcoffee:{label:"Iced Coffee Milk",description:"Creamy coffee with plenty of milk, served cold."},minestrone:{label:"Minestrone",description:"Tomato-based soup packed with vegetables."},strawberry:{label:"S'more (Strawberry Jam)",description:"Toasted marshmallow with tangy strawberry jam."},blueberry:{label:"S'more (Blueberry Jam)",description:"Blueberry jam paired with toasted marshmallow."},chocolate:{label:"S'more (Chocolate)",description:"Rich chocolate sauce with marshmallow."},honey:{label:"S'more (Honey)",description:"Toasted marshmallow finished with golden honey."}},wV={ja:{wheat:"小麦",egg:"卵",soy:"大豆"},en:{wheat:"Wheat",egg:"Egg",soy:"Soy"}},AV={ja:{未払い:"未払い",支払い済み:"お支払い済み",キャンセル:"キャンセル"},en:{未払い:"Unpaid",支払い済み:"Paid",キャンセル:"Cancelled"}},bV={ja:{受注済み:"受注済み",調理済み:`調理済み
（お受け取りOK）`,クローズ:"受け渡し済み"},en:{受注済み:"Order received",調理済み:"Ready for pickup",クローズ:"Picked up"}},pv={ja:{received:"受注済み",ready:`調理済み
（お受け取りOK）`,completed:"受け渡し済み"},en:{received:"Order received",ready:"Ready for pickup",completed:"Picked up"}},Ya={ja:{languageToggle:{label:"言語切替",japanese:"日本語",english:"English",buttonText:"日本語 / English",buttonAria:n=>`言語を${n==="ja"?"日本語":"English"}に切り替える`},header:{orderAction:"注文する",orderActionAria:"注文操作",characterAlt:"キャラクターのイラスト",titleAlt:"ヘッダーのタイトルイラスト"},auth:{signingIn:"匿名ログイン中です…",error:"匿名認証に失敗しました。時間をおいて再度お試しください。"},errors:{EMPTY_CART:"商品を1点以上ご注文ください。",ORDER_FAILED:"注文処理に失敗しました。通信環境をご確認ください。"},orderInput:{title:"注文する",descriptionLead:"各商品の数量はボタンで調整し、「注文内容を確認する」を押すとカート画面へ進みます。",descriptionFollow:"内容を確かめてから注文を確定しましょう。",totalLabel:"合計金額",totalNote:"税込・当日お支払いです。",reviewButton:"注文内容を確認する",resetButton:"入力をリセット"},quantityStepper:{decrease:"数量を1減らす",increase:"数量を1増やす"},menu:{imageAlt:n=>`${n}のイメージ`,allergensLabel:n=>`${n}に含まれる特定原材料表示`,quantityLabel:n=>`${n}の数量`},orderReview:{title:"注文内容を確認",descriptionLead:"数量と合計金額を確認し、問題なければ注文を確定してください。",descriptionFollow:"変更が必要な場合は戻って数量を調整できます。",tableHeaders:{item:"商品",quantity:"数量",subtotal:"小計"},totalLabel:"合計",confirmButton:"この内容で注文する",changeButton:"数量を変更する",confirming:"確定中…"},wasteGuide:{title:"ごみ分別のお願い",description:"こちらは仮の説明です。実際の分別ルールや回収場所の画像・文章を後ほど差し替えてください。",placeholder:"分別案内の画像をここに配置してください",confirm:"分別ルールを確認した"},orderComplete:{title:"注文が完了しました！",description:{default:"受け取り時は呼出番号と下のQRコードを提示してください。受け取りまで保管をお願いします。",progressOnly:"受け取り時は呼出番号または下のQRコードを提示してください。受け取りまで保管をお願いします。"},readyTitle:"お渡しの準備が整いました",readyPreviewTag:"テスト表示中（後で削除）",readyInstructionWithCallNumber:n=>`呼出番号 ${n} を確認のうえ、スタッフの案内にしたがってお受け取りください。`,readyInstructionWait:"スタッフから呼び出しがあるまでその場でお待ちください。",statusHeading:"現在の状況",metaHeading:"注文情報",meta:{total:"合計金額",payment:"お支払い",progress:"準備状況",orderedAt:"注文日時"},qrAlt:"進捗確認用QRコード",qrCaption:"このQRコードを読み取ると進捗確認ページが開きます。レジまたは状況確認時に提示してください。",identifiers:{orderId:"注文番号",ticket:"進捗確認コード"},itemsHeading:"注文内容",itemsTable:{item:"商品",quantity:"数量",price:"単価",subtotal:"小計",total:"合計"},actions:{copyLink:"進捗確認リンクをコピー",copyCode:"進捗確認コードをコピー",startNew:"新しく注文する"},ticketSearch:{regionLabel:"進捗確認コード検索",title:"進捗確認コードで表示",description:"お客様用の進捗確認コードを入力するとこの画面で進捗を確認できます。",label:"進捗確認コード",placeholder:"例: AB12CD34EF56GH78",button:"進捗を表示",error:"チケット番号を入力してください。"},loadingTitle:"注文情報を読み込んでいます…",loadingDescription:"少々お待ちください。",loadErrorTitle:"注文情報を取得できませんでした",loadErrorDescription:"注文情報を取得できませんでした。時間をおいて再度お試しください。",loadErrorAction:"チケット番号を再入力する",inviteTitle:"進捗確認コードを入力してください",inviteDescription:"進捗確認コードを入力するとすぐに進捗を確認できます。",paymentState:{complete:"受取済み",paid:"お支払い済み",unpaid:"未払い"},progressSteps:pv.ja,refresh:{refreshing:"更新中…",cooldown:n=>`再取得まで ${n} 秒`,action:"最新情報に更新",error:"最新の注文情報を取得できませんでした。"},callNumberLabel:"呼出番号",callNumberPending:"準備中"},orderProgress:{title:"注文の進捗を表示しています",description:"進捗確認コードでアクセスした注文の状況と受け取りまでの流れをここで確認できます。"},status:{title:"注文状況の確認について",descriptionLead:"お客様には呼出番号のみをお伝えしています。スタッフからの案内があるまで、注文完了画面に表示された呼出番号をお控えください。",descriptionFollow:"進捗の詳細確認や調整はスタッフが内部ツールで対応します。状況に変化があった場合は店頭でお知らせいたします。",historyTitle:"この端末の注文履歴",historyClear:"履歴をクリア",historyDescription:"直近にこの端末から確定した注文を表示しています。呼出番号と注文番号を控えておくと店頭での確認がスムーズです。",historyCallNumberLabel:"呼出番号",historyOrderIdLabel:"注文番号",historyTotalLabel:"合計",historyPendingCallNumber:"準備中 / 未設定",historyClearConfirm:"この端末に保存されている注文履歴をすべて削除しますか？"},ticketNotFound:{title:"注文が見つかりません",descriptionKnown:n=>`進捗確認コード「${n}」の注文は登録されていないようです。コードを再度ご確認のうえ、もう一度お試しください。`,descriptionUnknown:"指定された進捗確認コードの注文は確認できませんでした。コードを再度ご確認のうえ、もう一度お試しください。",retry:"進捗確認コードを入力し直す",newOrder:"新しく注文する"},notFound:{title:"ページが見つかりません",description:"URLをご確認のうえ、ナビゲーションから移動してください。"},copy:{progressCodeSuccess:"進捗確認コードをコピーしました。",progressCodeFailure:"コピーに失敗しました。手動で控えてください。",progressLinkSuccess:"進捗確認用リンクをコピーしました。",progressLinkFailure:"コピーに失敗しました。手動で控えてください。"}},en:{languageToggle:{label:"Language",japanese:"日本語",english:"English",buttonText:"日本語 / English",buttonAria:n=>`Change language to ${n==="ja"?"Japanese":"English"}`},header:{orderAction:"Order now",orderActionAria:"Order actions",characterAlt:"Character illustration",titleAlt:"Header title illustration"},auth:{signingIn:"Signing in anonymously...",error:"Anonymous sign-in failed. Please try again later."},errors:{EMPTY_CART:"Please add at least one item to your order.",ORDER_FAILED:"We could not process your order. Please check your connection and try again."},orderInput:{title:"Place your order",descriptionLead:'Use the buttons to adjust each quantity, then press "Review order" to continue.',descriptionFollow:"Make sure everything looks right before you confirm.",totalLabel:"Total",totalNote:"Tax included. Please pay at pickup.",reviewButton:"Review order",resetButton:"Reset selections"},quantityStepper:{decrease:"Decrease quantity by 1",increase:"Increase quantity by 1"},menu:{imageAlt:n=>`Image of ${n}`,allergensLabel:n=>`Allergen information for ${n}`,quantityLabel:n=>`Quantity for ${n}`},orderReview:{title:"Review your order",descriptionLead:"Check the quantities and total. When ready, place your order.",descriptionFollow:"Need changes? Go back to adjust the items.",tableHeaders:{item:"Item",quantity:"Qty",subtotal:"Subtotal"},totalLabel:"Total",confirmButton:"Place order",changeButton:"Modify quantities",confirming:"Submitting..."},wasteGuide:{title:"Waste sorting reminder",description:"Replace this placeholder with the final sorting rules and drop-off locations when they are ready.",placeholder:"Place the waste sorting guide image here.",confirm:"I have read the sorting rules"},orderComplete:{title:"Order confirmed!",description:{default:"Show the call number and QR code at pickup. Keep this screen until you receive your order.",progressOnly:"Show the call number or the QR code at pickup. Keep this screen handy until completion."},readyTitle:"Your order is ready",readyPreviewTag:"Preview (remove later)",readyInstructionWithCallNumber:n=>`Please check call number ${n} and follow staff instructions to receive your order.`,readyInstructionWait:"Please wait nearby until staff call your number.",statusHeading:"Current status",metaHeading:"Order details",meta:{total:"Total",payment:"Payment",progress:"Status",orderedAt:"Order time"},qrAlt:"QR code for progress tracking",qrCaption:"Scan this code to open the progress page. Show it at the register or when staff ask.",identifiers:{orderId:"Order ID",ticket:"Progress code"},itemsHeading:"Items",itemsTable:{item:"Item",quantity:"Qty",price:"Unit price",subtotal:"Subtotal",total:"Total"},actions:{copyLink:"Copy progress link",copyCode:"Copy progress code",startNew:"Start a new order"},ticketSearch:{regionLabel:"Search by progress code",title:"Show by progress code",description:"Enter the customer progress code to view the status here.",label:"Progress code",placeholder:"e.g., AB12CD34EF56GH78",button:"Show status",error:"Enter a progress code."},loadingTitle:"Loading your order...",loadingDescription:"Please wait a moment.",loadErrorTitle:"We could not load the order",loadErrorDescription:"We could not retrieve your order. Please try again later.",loadErrorAction:"Enter the code again",inviteTitle:"Enter a progress code",inviteDescription:"Enter the progress code to check the latest status.",paymentState:{complete:"Picked up",paid:"Paid",unpaid:"Unpaid"},progressSteps:pv.en,refresh:{refreshing:"Refreshing...",cooldown:n=>`Try again in ${n} sec`,action:"Refresh status",error:"Failed to refresh the order. Please try again."},callNumberLabel:"Call number",callNumberPending:"Pending"},orderProgress:{title:"Tracking your order",description:"Check the current status and pickup steps for the code you entered."},status:{title:"How to check your order status",descriptionLead:"We only share the call number with customers. Please keep the number shown on the completion screen until staff call you.",descriptionFollow:"Our staff track progress internally. If the situation changes, we will inform you at the booth.",historyTitle:"Order history on this device",historyClear:"Clear history",historyDescription:"Recent confirmed orders from this device appear here. Keeping the call number and order ID handy speeds up pickup.",historyCallNumberLabel:"Call number",historyOrderIdLabel:"Order ID",historyTotalLabel:"Total",historyPendingCallNumber:"Pending / Not assigned",historyClearConfirm:"Remove all saved orders from this device?"},ticketNotFound:{title:"Order not found",descriptionKnown:n=>`We could not find an order for progress code "${n}". Please check the code and try again.`,descriptionUnknown:"We could not confirm an order for the provided progress code. Please check the code and try again.",retry:"Re-enter progress code",newOrder:"Start a new order"},notFound:{title:"Page not found",description:"Please check the URL and use the navigation links."},copy:{progressCodeSuccess:"Progress code copied to clipboard.",progressCodeFailure:"Copy failed. Please note it manually.",progressLinkSuccess:"Progress link copied to clipboard.",progressLinkFailure:"Copy failed. Please note it manually."}}};function Uy(n,e){return e==="en"?k3[n.key]?.label??n.label:n.label}function SV(n,e){return e==="en"?k3[n.key]?.description??n.description:n.description}function CV(n,e){return wV[e][n]}function TV(n,e){return AV[e][n]}function IV(n,e){return bV[e][n]}function NV(n,e){return pv[e][n]}function RV(){const n=xV(),{language:e}=oo(),t=Ya[e].status,r=()=>{(typeof window>"u"||window.confirm(t.historyClearConfirm))&&yV()};return m.jsxs("div",{className:"content-container",children:[m.jsxs("section",{className:"content-card",children:[m.jsx("h1",{className:"section-title",children:t.title}),m.jsx("p",{className:"section-description",children:t.descriptionLead}),m.jsx("p",{className:"section-description",children:t.descriptionFollow})]}),n.length>0&&m.jsxs("section",{className:"content-card history-card","aria-live":"polite",children:[m.jsxs("div",{className:"history-header",children:[m.jsx("h2",{className:"section-title",children:t.historyTitle}),m.jsx("button",{type:"button",className:"history-clear",onClick:r,children:t.historyClear})]}),m.jsx("p",{className:"history-description",children:t.historyDescription}),m.jsx("ul",{className:"order-history-list",children:n.map(i=>m.jsxs("li",{className:"order-history-item","aria-live":"polite",children:[m.jsx("div",{className:"order-history-row",children:m.jsx("span",{className:"order-history-date",children:new Date(i.savedAt).toLocaleString()})}),m.jsxs("div",{className:"order-history-row meta",children:[m.jsxs("span",{children:[t.historyCallNumberLabel,":"," ",i.callNumber>0?i.callNumber:t.historyPendingCallNumber]}),m.jsxs("span",{children:[t.historyOrderIdLabel,": ",i.orderId]})]}),m.jsx("div",{className:"order-history-row meta",children:m.jsxs("span",{children:[t.historyTotalLabel,": ¥",i.total.toLocaleString()]})})]},i.orderId))})]})]})}var Zl={},$m,lb;function OV(){return lb||(lb=1,$m=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then}),$m}var Xm={},Os={},cb;function il(){if(cb)return Os;cb=1;let n;const e=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];return Os.getSymbolSize=function(r){if(!r)throw new Error('"version" cannot be null or undefined');if(r<1||r>40)throw new Error('"version" should be in range from 1 to 40');return r*4+17},Os.getSymbolTotalCodewords=function(r){return e[r]},Os.getBCHDigit=function(t){let r=0;for(;t!==0;)r++,t>>>=1;return r},Os.setToSJISFunction=function(r){if(typeof r!="function")throw new Error('"toSJISFunc" is not a valid function.');n=r},Os.isKanjiModeEnabled=function(){return typeof n<"u"},Os.toSJIS=function(r){return n(r)},Os}var Ym={},ub;function zy(){return ub||(ub=1,(function(n){n.L={bit:1},n.M={bit:0},n.Q={bit:3},n.H={bit:2};function e(t){if(typeof t!="string")throw new Error("Param is not a string");switch(t.toLowerCase()){case"l":case"low":return n.L;case"m":case"medium":return n.M;case"q":case"quartile":return n.Q;case"h":case"high":return n.H;default:throw new Error("Unknown EC Level: "+t)}}n.isValid=function(r){return r&&typeof r.bit<"u"&&r.bit>=0&&r.bit<4},n.from=function(r,i){if(n.isValid(r))return r;try{return e(r)}catch{return i}}})(Ym)),Ym}var Km,fb;function DV(){if(fb)return Km;fb=1;function n(){this.buffer=[],this.length=0}return n.prototype={get:function(e){const t=Math.floor(e/8);return(this.buffer[t]>>>7-e%8&1)===1},put:function(e,t){for(let r=0;r<t;r++)this.putBit((e>>>t-r-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(e){const t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}},Km=n,Km}var Wm,hb;function MV(){if(hb)return Wm;hb=1;function n(e){if(!e||e<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=e,this.data=new Uint8Array(e*e),this.reservedBit=new Uint8Array(e*e)}return n.prototype.set=function(e,t,r,i){const a=e*this.size+t;this.data[a]=r,i&&(this.reservedBit[a]=!0)},n.prototype.get=function(e,t){return this.data[e*this.size+t]},n.prototype.xor=function(e,t,r){this.data[e*this.size+t]^=r},n.prototype.isReserved=function(e,t){return this.reservedBit[e*this.size+t]},Wm=n,Wm}var Qm={},db;function PV(){return db||(db=1,(function(n){const e=il().getSymbolSize;n.getRowColCoords=function(r){if(r===1)return[];const i=Math.floor(r/7)+2,a=e(r),o=a===145?26:Math.ceil((a-13)/(2*i-2))*2,c=[a-7];for(let u=1;u<i-1;u++)c[u]=c[u-1]-o;return c.push(6),c.reverse()},n.getPositions=function(r){const i=[],a=n.getRowColCoords(r),o=a.length;for(let c=0;c<o;c++)for(let u=0;u<o;u++)c===0&&u===0||c===0&&u===o-1||c===o-1&&u===0||i.push([a[c],a[u]]);return i}})(Qm)),Qm}var Zm={},pb;function kV(){if(pb)return Zm;pb=1;const n=il().getSymbolSize,e=7;return Zm.getPositions=function(r){const i=n(r);return[[0,0],[i-e,0],[0,i-e]]},Zm}var Jm={},mb;function LV(){return mb||(mb=1,(function(n){n.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const e={N1:3,N2:3,N3:40,N4:10};n.isValid=function(i){return i!=null&&i!==""&&!isNaN(i)&&i>=0&&i<=7},n.from=function(i){return n.isValid(i)?parseInt(i,10):void 0},n.getPenaltyN1=function(i){const a=i.size;let o=0,c=0,u=0,h=null,p=null;for(let g=0;g<a;g++){c=u=0,h=p=null;for(let _=0;_<a;_++){let E=i.get(g,_);E===h?c++:(c>=5&&(o+=e.N1+(c-5)),h=E,c=1),E=i.get(_,g),E===p?u++:(u>=5&&(o+=e.N1+(u-5)),p=E,u=1)}c>=5&&(o+=e.N1+(c-5)),u>=5&&(o+=e.N1+(u-5))}return o},n.getPenaltyN2=function(i){const a=i.size;let o=0;for(let c=0;c<a-1;c++)for(let u=0;u<a-1;u++){const h=i.get(c,u)+i.get(c,u+1)+i.get(c+1,u)+i.get(c+1,u+1);(h===4||h===0)&&o++}return o*e.N2},n.getPenaltyN3=function(i){const a=i.size;let o=0,c=0,u=0;for(let h=0;h<a;h++){c=u=0;for(let p=0;p<a;p++)c=c<<1&2047|i.get(h,p),p>=10&&(c===1488||c===93)&&o++,u=u<<1&2047|i.get(p,h),p>=10&&(u===1488||u===93)&&o++}return o*e.N3},n.getPenaltyN4=function(i){let a=0;const o=i.data.length;for(let u=0;u<o;u++)a+=i.data[u];return Math.abs(Math.ceil(a*100/o/5)-10)*e.N4};function t(r,i,a){switch(r){case n.Patterns.PATTERN000:return(i+a)%2===0;case n.Patterns.PATTERN001:return i%2===0;case n.Patterns.PATTERN010:return a%3===0;case n.Patterns.PATTERN011:return(i+a)%3===0;case n.Patterns.PATTERN100:return(Math.floor(i/2)+Math.floor(a/3))%2===0;case n.Patterns.PATTERN101:return i*a%2+i*a%3===0;case n.Patterns.PATTERN110:return(i*a%2+i*a%3)%2===0;case n.Patterns.PATTERN111:return(i*a%3+(i+a)%2)%2===0;default:throw new Error("bad maskPattern:"+r)}}n.applyMask=function(i,a){const o=a.size;for(let c=0;c<o;c++)for(let u=0;u<o;u++)a.isReserved(u,c)||a.xor(u,c,t(i,u,c))},n.getBestMask=function(i,a){const o=Object.keys(n.Patterns).length;let c=0,u=1/0;for(let h=0;h<o;h++){a(h),n.applyMask(h,i);const p=n.getPenaltyN1(i)+n.getPenaltyN2(i)+n.getPenaltyN3(i)+n.getPenaltyN4(i);n.applyMask(h,i),p<u&&(u=p,c=h)}return c}})(Jm)),Jm}var Od={},gb;function L3(){if(gb)return Od;gb=1;const n=zy(),e=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],t=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];return Od.getBlocksCount=function(i,a){switch(a){case n.L:return e[(i-1)*4+0];case n.M:return e[(i-1)*4+1];case n.Q:return e[(i-1)*4+2];case n.H:return e[(i-1)*4+3];default:return}},Od.getTotalCodewordsCount=function(i,a){switch(a){case n.L:return t[(i-1)*4+0];case n.M:return t[(i-1)*4+1];case n.Q:return t[(i-1)*4+2];case n.H:return t[(i-1)*4+3];default:return}},Od}var eg={},$u={},vb;function jV(){if(vb)return $u;vb=1;const n=new Uint8Array(512),e=new Uint8Array(256);return(function(){let r=1;for(let i=0;i<255;i++)n[i]=r,e[r]=i,r<<=1,r&256&&(r^=285);for(let i=255;i<512;i++)n[i]=n[i-255]})(),$u.log=function(r){if(r<1)throw new Error("log("+r+")");return e[r]},$u.exp=function(r){return n[r]},$u.mul=function(r,i){return r===0||i===0?0:n[e[r]+e[i]]},$u}var yb;function BV(){return yb||(yb=1,(function(n){const e=jV();n.mul=function(r,i){const a=new Uint8Array(r.length+i.length-1);for(let o=0;o<r.length;o++)for(let c=0;c<i.length;c++)a[o+c]^=e.mul(r[o],i[c]);return a},n.mod=function(r,i){let a=new Uint8Array(r);for(;a.length-i.length>=0;){const o=a[0];for(let u=0;u<i.length;u++)a[u]^=e.mul(i[u],o);let c=0;for(;c<a.length&&a[c]===0;)c++;a=a.slice(c)}return a},n.generateECPolynomial=function(r){let i=new Uint8Array([1]);for(let a=0;a<r;a++)i=n.mul(i,new Uint8Array([1,e.exp(a)]));return i}})(eg)),eg}var tg,_b;function VV(){if(_b)return tg;_b=1;const n=BV();function e(t){this.genPoly=void 0,this.degree=t,this.degree&&this.initialize(this.degree)}return e.prototype.initialize=function(r){this.degree=r,this.genPoly=n.generateECPolynomial(this.degree)},e.prototype.encode=function(r){if(!this.genPoly)throw new Error("Encoder not initialized");const i=new Uint8Array(r.length+this.degree);i.set(r);const a=n.mod(i,this.genPoly),o=this.degree-a.length;if(o>0){const c=new Uint8Array(this.degree);return c.set(a,o),c}return a},tg=e,tg}var ng={},rg={},ig={},xb;function j3(){return xb||(xb=1,ig.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40}),ig}var ia={},Eb;function B3(){if(Eb)return ia;Eb=1;const n="[0-9]+",e="[A-Z $%*+\\-./:]+";let t="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";t=t.replace(/u/g,"\\u");const r="(?:(?![A-Z0-9 $%*+\\-./:]|"+t+`)(?:.|[\r
]))+`;ia.KANJI=new RegExp(t,"g"),ia.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),ia.BYTE=new RegExp(r,"g"),ia.NUMERIC=new RegExp(n,"g"),ia.ALPHANUMERIC=new RegExp(e,"g");const i=new RegExp("^"+t+"$"),a=new RegExp("^"+n+"$"),o=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");return ia.testKanji=function(u){return i.test(u)},ia.testNumeric=function(u){return a.test(u)},ia.testAlphanumeric=function(u){return o.test(u)},ia}var wb;function al(){return wb||(wb=1,(function(n){const e=j3(),t=B3();n.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},n.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},n.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},n.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},n.MIXED={bit:-1},n.getCharCountIndicator=function(a,o){if(!a.ccBits)throw new Error("Invalid mode: "+a);if(!e.isValid(o))throw new Error("Invalid version: "+o);return o>=1&&o<10?a.ccBits[0]:o<27?a.ccBits[1]:a.ccBits[2]},n.getBestModeForData=function(a){return t.testNumeric(a)?n.NUMERIC:t.testAlphanumeric(a)?n.ALPHANUMERIC:t.testKanji(a)?n.KANJI:n.BYTE},n.toString=function(a){if(a&&a.id)return a.id;throw new Error("Invalid mode")},n.isValid=function(a){return a&&a.bit&&a.ccBits};function r(i){if(typeof i!="string")throw new Error("Param is not a string");switch(i.toLowerCase()){case"numeric":return n.NUMERIC;case"alphanumeric":return n.ALPHANUMERIC;case"kanji":return n.KANJI;case"byte":return n.BYTE;default:throw new Error("Unknown mode: "+i)}}n.from=function(a,o){if(n.isValid(a))return a;try{return r(a)}catch{return o}}})(rg)),rg}var Ab;function FV(){return Ab||(Ab=1,(function(n){const e=il(),t=L3(),r=zy(),i=al(),a=j3(),o=7973,c=e.getBCHDigit(o);function u(_,E,A){for(let S=1;S<=40;S++)if(E<=n.getCapacity(S,A,_))return S}function h(_,E){return i.getCharCountIndicator(_,E)+4}function p(_,E){let A=0;return _.forEach(function(S){const O=h(S.mode,E);A+=O+S.getBitsLength()}),A}function g(_,E){for(let A=1;A<=40;A++)if(p(_,A)<=n.getCapacity(A,E,i.MIXED))return A}n.from=function(E,A){return a.isValid(E)?parseInt(E,10):A},n.getCapacity=function(E,A,S){if(!a.isValid(E))throw new Error("Invalid QR Code version");typeof S>"u"&&(S=i.BYTE);const O=e.getSymbolTotalCodewords(E),T=t.getTotalCodewordsCount(E,A),R=(O-T)*8;if(S===i.MIXED)return R;const L=R-h(S,E);switch(S){case i.NUMERIC:return Math.floor(L/10*3);case i.ALPHANUMERIC:return Math.floor(L/11*2);case i.KANJI:return Math.floor(L/13);case i.BYTE:default:return Math.floor(L/8)}},n.getBestVersionForData=function(E,A){let S;const O=r.from(A,r.M);if(Array.isArray(E)){if(E.length>1)return g(E,O);if(E.length===0)return 1;S=E[0]}else S=E;return u(S.mode,S.getLength(),O)},n.getEncodedBits=function(E){if(!a.isValid(E)||E<7)throw new Error("Invalid QR Code version");let A=E<<12;for(;e.getBCHDigit(A)-c>=0;)A^=o<<e.getBCHDigit(A)-c;return E<<12|A}})(ng)),ng}var ag={},bb;function UV(){if(bb)return ag;bb=1;const n=il(),e=1335,t=21522,r=n.getBCHDigit(e);return ag.getEncodedBits=function(a,o){const c=a.bit<<3|o;let u=c<<10;for(;n.getBCHDigit(u)-r>=0;)u^=e<<n.getBCHDigit(u)-r;return(c<<10|u)^t},ag}var sg={},og,Sb;function zV(){if(Sb)return og;Sb=1;const n=al();function e(t){this.mode=n.NUMERIC,this.data=t.toString()}return e.getBitsLength=function(r){return 10*Math.floor(r/3)+(r%3?r%3*3+1:0)},e.prototype.getLength=function(){return this.data.length},e.prototype.getBitsLength=function(){return e.getBitsLength(this.data.length)},e.prototype.write=function(r){let i,a,o;for(i=0;i+3<=this.data.length;i+=3)a=this.data.substr(i,3),o=parseInt(a,10),r.put(o,10);const c=this.data.length-i;c>0&&(a=this.data.substr(i),o=parseInt(a,10),r.put(o,c*3+1))},og=e,og}var lg,Cb;function HV(){if(Cb)return lg;Cb=1;const n=al(),e=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function t(r){this.mode=n.ALPHANUMERIC,this.data=r}return t.getBitsLength=function(i){return 11*Math.floor(i/2)+6*(i%2)},t.prototype.getLength=function(){return this.data.length},t.prototype.getBitsLength=function(){return t.getBitsLength(this.data.length)},t.prototype.write=function(i){let a;for(a=0;a+2<=this.data.length;a+=2){let o=e.indexOf(this.data[a])*45;o+=e.indexOf(this.data[a+1]),i.put(o,11)}this.data.length%2&&i.put(e.indexOf(this.data[a]),6)},lg=t,lg}var cg,Tb;function GV(){if(Tb)return cg;Tb=1;const n=al();function e(t){this.mode=n.BYTE,typeof t=="string"?this.data=new TextEncoder().encode(t):this.data=new Uint8Array(t)}return e.getBitsLength=function(r){return r*8},e.prototype.getLength=function(){return this.data.length},e.prototype.getBitsLength=function(){return e.getBitsLength(this.data.length)},e.prototype.write=function(t){for(let r=0,i=this.data.length;r<i;r++)t.put(this.data[r],8)},cg=e,cg}var ug,Ib;function qV(){if(Ib)return ug;Ib=1;const n=al(),e=il();function t(r){this.mode=n.KANJI,this.data=r}return t.getBitsLength=function(i){return i*13},t.prototype.getLength=function(){return this.data.length},t.prototype.getBitsLength=function(){return t.getBitsLength(this.data.length)},t.prototype.write=function(r){let i;for(i=0;i<this.data.length;i++){let a=e.toSJIS(this.data[i]);if(a>=33088&&a<=40956)a-=33088;else if(a>=57408&&a<=60351)a-=49472;else throw new Error("Invalid SJIS character: "+this.data[i]+`
Make sure your charset is UTF-8`);a=(a>>>8&255)*192+(a&255),r.put(a,13)}},ug=t,ug}var fg={exports:{}},Nb;function $V(){return Nb||(Nb=1,(function(n){var e={single_source_shortest_paths:function(t,r,i){var a={},o={};o[r]=0;var c=e.PriorityQueue.make();c.push(r,0);for(var u,h,p,g,_,E,A,S,O;!c.empty();){u=c.pop(),h=u.value,g=u.cost,_=t[h]||{};for(p in _)_.hasOwnProperty(p)&&(E=_[p],A=g+E,S=o[p],O=typeof o[p]>"u",(O||S>A)&&(o[p]=A,c.push(p,A),a[p]=h))}if(typeof i<"u"&&typeof o[i]>"u"){var T=["Could not find a path from ",r," to ",i,"."].join("");throw new Error(T)}return a},extract_shortest_path_from_predecessor_list:function(t,r){for(var i=[],a=r;a;)i.push(a),t[a],a=t[a];return i.reverse(),i},find_path:function(t,r,i){var a=e.single_source_shortest_paths(t,r,i);return e.extract_shortest_path_from_predecessor_list(a,i)},PriorityQueue:{make:function(t){var r=e.PriorityQueue,i={},a;t=t||{};for(a in r)r.hasOwnProperty(a)&&(i[a]=r[a]);return i.queue=[],i.sorter=t.sorter||r.default_sorter,i},default_sorter:function(t,r){return t.cost-r.cost},push:function(t,r){var i={value:t,cost:r};this.queue.push(i),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};n.exports=e})(fg)),fg.exports}var Rb;function XV(){return Rb||(Rb=1,(function(n){const e=al(),t=zV(),r=HV(),i=GV(),a=qV(),o=B3(),c=il(),u=$V();function h(T){return unescape(encodeURIComponent(T)).length}function p(T,R,L){const z=[];let U;for(;(U=T.exec(L))!==null;)z.push({data:U[0],index:U.index,mode:R,length:U[0].length});return z}function g(T){const R=p(o.NUMERIC,e.NUMERIC,T),L=p(o.ALPHANUMERIC,e.ALPHANUMERIC,T);let z,U;return c.isKanjiModeEnabled()?(z=p(o.BYTE,e.BYTE,T),U=p(o.KANJI,e.KANJI,T)):(z=p(o.BYTE_KANJI,e.BYTE,T),U=[]),R.concat(L,z,U).sort(function(D,w){return D.index-w.index}).map(function(D){return{data:D.data,mode:D.mode,length:D.length}})}function _(T,R){switch(R){case e.NUMERIC:return t.getBitsLength(T);case e.ALPHANUMERIC:return r.getBitsLength(T);case e.KANJI:return a.getBitsLength(T);case e.BYTE:return i.getBitsLength(T)}}function E(T){return T.reduce(function(R,L){const z=R.length-1>=0?R[R.length-1]:null;return z&&z.mode===L.mode?(R[R.length-1].data+=L.data,R):(R.push(L),R)},[])}function A(T){const R=[];for(let L=0;L<T.length;L++){const z=T[L];switch(z.mode){case e.NUMERIC:R.push([z,{data:z.data,mode:e.ALPHANUMERIC,length:z.length},{data:z.data,mode:e.BYTE,length:z.length}]);break;case e.ALPHANUMERIC:R.push([z,{data:z.data,mode:e.BYTE,length:z.length}]);break;case e.KANJI:R.push([z,{data:z.data,mode:e.BYTE,length:h(z.data)}]);break;case e.BYTE:R.push([{data:z.data,mode:e.BYTE,length:h(z.data)}])}}return R}function S(T,R){const L={},z={start:{}};let U=["start"];for(let G=0;G<T.length;G++){const D=T[G],w=[];for(let I=0;I<D.length;I++){const M=D[I],j=""+G+I;w.push(j),L[j]={node:M,lastCount:0},z[j]={};for(let V=0;V<U.length;V++){const k=U[V];L[k]&&L[k].node.mode===M.mode?(z[k][j]=_(L[k].lastCount+M.length,M.mode)-_(L[k].lastCount,M.mode),L[k].lastCount+=M.length):(L[k]&&(L[k].lastCount=M.length),z[k][j]=_(M.length,M.mode)+4+e.getCharCountIndicator(M.mode,R))}}U=w}for(let G=0;G<U.length;G++)z[U[G]].end=0;return{map:z,table:L}}function O(T,R){let L;const z=e.getBestModeForData(T);if(L=e.from(R,z),L!==e.BYTE&&L.bit<z.bit)throw new Error('"'+T+'" cannot be encoded with mode '+e.toString(L)+`.
 Suggested mode is: `+e.toString(z));switch(L===e.KANJI&&!c.isKanjiModeEnabled()&&(L=e.BYTE),L){case e.NUMERIC:return new t(T);case e.ALPHANUMERIC:return new r(T);case e.KANJI:return new a(T);case e.BYTE:return new i(T)}}n.fromArray=function(R){return R.reduce(function(L,z){return typeof z=="string"?L.push(O(z,null)):z.data&&L.push(O(z.data,z.mode)),L},[])},n.fromString=function(R,L){const z=g(R,c.isKanjiModeEnabled()),U=A(z),G=S(U,L),D=u.find_path(G.map,"start","end"),w=[];for(let I=1;I<D.length-1;I++)w.push(G.table[D[I]].node);return n.fromArray(E(w))},n.rawSplit=function(R){return n.fromArray(g(R,c.isKanjiModeEnabled()))}})(sg)),sg}var Ob;function YV(){if(Ob)return Xm;Ob=1;const n=il(),e=zy(),t=DV(),r=MV(),i=PV(),a=kV(),o=LV(),c=L3(),u=VV(),h=FV(),p=UV(),g=al(),_=XV();function E(G,D){const w=G.size,I=a.getPositions(D);for(let M=0;M<I.length;M++){const j=I[M][0],V=I[M][1];for(let k=-1;k<=7;k++)if(!(j+k<=-1||w<=j+k))for(let ee=-1;ee<=7;ee++)V+ee<=-1||w<=V+ee||(k>=0&&k<=6&&(ee===0||ee===6)||ee>=0&&ee<=6&&(k===0||k===6)||k>=2&&k<=4&&ee>=2&&ee<=4?G.set(j+k,V+ee,!0,!0):G.set(j+k,V+ee,!1,!0))}}function A(G){const D=G.size;for(let w=8;w<D-8;w++){const I=w%2===0;G.set(w,6,I,!0),G.set(6,w,I,!0)}}function S(G,D){const w=i.getPositions(D);for(let I=0;I<w.length;I++){const M=w[I][0],j=w[I][1];for(let V=-2;V<=2;V++)for(let k=-2;k<=2;k++)V===-2||V===2||k===-2||k===2||V===0&&k===0?G.set(M+V,j+k,!0,!0):G.set(M+V,j+k,!1,!0)}}function O(G,D){const w=G.size,I=h.getEncodedBits(D);let M,j,V;for(let k=0;k<18;k++)M=Math.floor(k/3),j=k%3+w-8-3,V=(I>>k&1)===1,G.set(M,j,V,!0),G.set(j,M,V,!0)}function T(G,D,w){const I=G.size,M=p.getEncodedBits(D,w);let j,V;for(j=0;j<15;j++)V=(M>>j&1)===1,j<6?G.set(j,8,V,!0):j<8?G.set(j+1,8,V,!0):G.set(I-15+j,8,V,!0),j<8?G.set(8,I-j-1,V,!0):j<9?G.set(8,15-j-1+1,V,!0):G.set(8,15-j-1,V,!0);G.set(I-8,8,1,!0)}function R(G,D){const w=G.size;let I=-1,M=w-1,j=7,V=0;for(let k=w-1;k>0;k-=2)for(k===6&&k--;;){for(let ee=0;ee<2;ee++)if(!G.isReserved(M,k-ee)){let Ie=!1;V<D.length&&(Ie=(D[V]>>>j&1)===1),G.set(M,k-ee,Ie),j--,j===-1&&(V++,j=7)}if(M+=I,M<0||w<=M){M-=I,I=-I;break}}}function L(G,D,w){const I=new t;w.forEach(function(ee){I.put(ee.mode.bit,4),I.put(ee.getLength(),g.getCharCountIndicator(ee.mode,G)),ee.write(I)});const M=n.getSymbolTotalCodewords(G),j=c.getTotalCodewordsCount(G,D),V=(M-j)*8;for(I.getLengthInBits()+4<=V&&I.put(0,4);I.getLengthInBits()%8!==0;)I.putBit(0);const k=(V-I.getLengthInBits())/8;for(let ee=0;ee<k;ee++)I.put(ee%2?17:236,8);return z(I,G,D)}function z(G,D,w){const I=n.getSymbolTotalCodewords(D),M=c.getTotalCodewordsCount(D,w),j=I-M,V=c.getBlocksCount(D,w),k=I%V,ee=V-k,Ie=Math.floor(I/V),q=Math.floor(j/V),ce=q+1,me=Ie-q,Te=new u(me);let Ue=0;const X=new Array(V),se=new Array(V);let ve=0;const Ee=new Uint8Array(G.buffer);for(let De=0;De<V;De++){const rt=De<ee?q:ce;X[De]=Ee.slice(Ue,Ue+rt),se[De]=Te.encode(X[De]),Ue+=rt,ve=Math.max(ve,rt)}const ie=new Uint8Array(I);let ge=0,pe,be;for(pe=0;pe<ve;pe++)for(be=0;be<V;be++)pe<X[be].length&&(ie[ge++]=X[be][pe]);for(pe=0;pe<me;pe++)for(be=0;be<V;be++)ie[ge++]=se[be][pe];return ie}function U(G,D,w,I){let M;if(Array.isArray(G))M=_.fromArray(G);else if(typeof G=="string"){let Ie=D;if(!Ie){const q=_.rawSplit(G);Ie=h.getBestVersionForData(q,w)}M=_.fromString(G,Ie||40)}else throw new Error("Invalid data");const j=h.getBestVersionForData(M,w);if(!j)throw new Error("The amount of data is too big to be stored in a QR Code");if(!D)D=j;else if(D<j)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+j+`.
`);const V=L(D,w,M),k=n.getSymbolSize(D),ee=new r(k);return E(ee,D),A(ee),S(ee,D),T(ee,w,0),D>=7&&O(ee,D),R(ee,V),isNaN(I)&&(I=o.getBestMask(ee,T.bind(null,ee,w))),o.applyMask(I,ee),T(ee,w,I),{modules:ee,version:D,errorCorrectionLevel:w,maskPattern:I,segments:M}}return Xm.create=function(D,w){if(typeof D>"u"||D==="")throw new Error("No input text");let I=e.M,M,j;return typeof w<"u"&&(I=e.from(w.errorCorrectionLevel,e.M),M=h.from(w.version),j=o.from(w.maskPattern),w.toSJISFunc&&n.setToSJISFunction(w.toSJISFunc)),U(D,M,I,j)},Xm}var hg={},dg={},Db;function V3(){return Db||(Db=1,(function(n){function e(t){if(typeof t=="number"&&(t=t.toString()),typeof t!="string")throw new Error("Color should be defined as hex string");let r=t.slice().replace("#","").split("");if(r.length<3||r.length===5||r.length>8)throw new Error("Invalid hex color: "+t);(r.length===3||r.length===4)&&(r=Array.prototype.concat.apply([],r.map(function(a){return[a,a]}))),r.length===6&&r.push("F","F");const i=parseInt(r.join(""),16);return{r:i>>24&255,g:i>>16&255,b:i>>8&255,a:i&255,hex:"#"+r.slice(0,6).join("")}}n.getOptions=function(r){r||(r={}),r.color||(r.color={});const i=typeof r.margin>"u"||r.margin===null||r.margin<0?4:r.margin,a=r.width&&r.width>=21?r.width:void 0,o=r.scale||4;return{width:a,scale:a?4:o,margin:i,color:{dark:e(r.color.dark||"#000000ff"),light:e(r.color.light||"#ffffffff")},type:r.type,rendererOpts:r.rendererOpts||{}}},n.getScale=function(r,i){return i.width&&i.width>=r+i.margin*2?i.width/(r+i.margin*2):i.scale},n.getImageWidth=function(r,i){const a=n.getScale(r,i);return Math.floor((r+i.margin*2)*a)},n.qrToImageData=function(r,i,a){const o=i.modules.size,c=i.modules.data,u=n.getScale(o,a),h=Math.floor((o+a.margin*2)*u),p=a.margin*u,g=[a.color.light,a.color.dark];for(let _=0;_<h;_++)for(let E=0;E<h;E++){let A=(_*h+E)*4,S=a.color.light;if(_>=p&&E>=p&&_<h-p&&E<h-p){const O=Math.floor((_-p)/u),T=Math.floor((E-p)/u);S=g[c[O*o+T]?1:0]}r[A++]=S.r,r[A++]=S.g,r[A++]=S.b,r[A]=S.a}}})(dg)),dg}var Mb;function KV(){return Mb||(Mb=1,(function(n){const e=V3();function t(i,a,o){i.clearRect(0,0,a.width,a.height),a.style||(a.style={}),a.height=o,a.width=o,a.style.height=o+"px",a.style.width=o+"px"}function r(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}n.render=function(a,o,c){let u=c,h=o;typeof u>"u"&&(!o||!o.getContext)&&(u=o,o=void 0),o||(h=r()),u=e.getOptions(u);const p=e.getImageWidth(a.modules.size,u),g=h.getContext("2d"),_=g.createImageData(p,p);return e.qrToImageData(_.data,a,u),t(g,h,p),g.putImageData(_,0,0),h},n.renderToDataURL=function(a,o,c){let u=c;typeof u>"u"&&(!o||!o.getContext)&&(u=o,o=void 0),u||(u={});const h=n.render(a,o,u),p=u.type||"image/png",g=u.rendererOpts||{};return h.toDataURL(p,g.quality)}})(hg)),hg}var pg={},Pb;function WV(){if(Pb)return pg;Pb=1;const n=V3();function e(i,a){const o=i.a/255,c=a+'="'+i.hex+'"';return o<1?c+" "+a+'-opacity="'+o.toFixed(2).slice(1)+'"':c}function t(i,a,o){let c=i+a;return typeof o<"u"&&(c+=" "+o),c}function r(i,a,o){let c="",u=0,h=!1,p=0;for(let g=0;g<i.length;g++){const _=Math.floor(g%a),E=Math.floor(g/a);!_&&!h&&(h=!0),i[g]?(p++,g>0&&_>0&&i[g-1]||(c+=h?t("M",_+o,.5+E+o):t("m",u,0),u=0,h=!1),_+1<a&&i[g+1]||(c+=t("h",p),p=0)):u++}return c}return pg.render=function(a,o,c){const u=n.getOptions(o),h=a.modules.size,p=a.modules.data,g=h+u.margin*2,_=u.color.light.a?"<path "+e(u.color.light,"fill")+' d="M0 0h'+g+"v"+g+'H0z"/>':"",E="<path "+e(u.color.dark,"stroke")+' d="'+r(p,h,u.margin)+'"/>',A='viewBox="0 0 '+g+" "+g+'"',O='<svg xmlns="http://www.w3.org/2000/svg" '+(u.width?'width="'+u.width+'" height="'+u.width+'" ':"")+A+' shape-rendering="crispEdges">'+_+E+`</svg>
`;return typeof c=="function"&&c(null,O),O},pg}var kb;function QV(){if(kb)return Zl;kb=1;const n=OV(),e=YV(),t=KV(),r=WV();function i(a,o,c,u,h){const p=[].slice.call(arguments,1),g=p.length,_=typeof p[g-1]=="function";if(!_&&!n())throw new Error("Callback required as last argument");if(_){if(g<2)throw new Error("Too few arguments provided");g===2?(h=c,c=o,o=u=void 0):g===3&&(o.getContext&&typeof h>"u"?(h=u,u=void 0):(h=u,u=c,c=o,o=void 0))}else{if(g<1)throw new Error("Too few arguments provided");return g===1?(c=o,o=u=void 0):g===2&&!o.getContext&&(u=c,c=o,o=void 0),new Promise(function(E,A){try{const S=e.create(c,u);E(a(S,o,u))}catch(S){A(S)}})}try{const E=e.create(c,u);h(null,a(E,o,u))}catch(E){h(E)}}return Zl.create=e.create,Zl.toCanvas=i.bind(null,t.render),Zl.toDataURL=i.bind(null,t.renderToDataURL),Zl.toString=i.bind(null,function(a,o,c){return r.render(a,c)}),Zl}var ZV=QV();const JV=E4(ZV),eF=()=>typeof window<"u"&&window.location?.origin?window.location.origin:"https://example.com",tF=n=>`${eF().replace(/\/$/,"")}/order/complete/${encodeURIComponent(n)}`,hf=n=>{if(!n)return"";const e=n.trim();if(!e)return"";try{const t=new URL(e),r=t.pathname.match(/\/order\/complete\/(.+)$/);if(r&&r[1])return decodeURIComponent(r[1]).replace(/[^0-9a-z]/gi,"").toUpperCase();const i=t.searchParams.get("ticket");if(i)return i.replace(/[^0-9a-z]/gi,"").toUpperCase()}catch{}return e.replace(/[^0-9a-z]/gi,"").toUpperCase()},nF=n=>Number.isInteger(n)&&n!==null&&n!==void 0&&n>0?n:0,Dd=n=>{const e=n.items??{};return{orderId:n.orderId,ticket:n.ticket,callNumber:nF(n.callNumber),total:n.total,items:e,payment:n.payment,progress:n.progress,plating:Cr(e,n.plating),createdAt:n.createdAt?new Date(n.createdAt):void 0}},Lb=n=>n instanceof ma&&n.code==="permission-denied",F3=P.createContext(void 0),jb=()=>Object.keys(Lc).reduce((n,e)=>(n[e]=0,n),{});function rF({children:n}){const{menuItems:e}=rl(),[t,r]=P.useState(jb),[i,a]=P.useState(!1),[o,c]=P.useState(null),[u,h]=P.useState(null),p=P.useCallback((D,w)=>{r(I=>({...I,[D]:Math.max(0,Number.isFinite(w)?Math.floor(w):0)}))},[]),g=P.useCallback(()=>{r(jb())},[]),_=P.useMemo(()=>e.map(D=>({item:D,quantity:t[D.key],subtotal:t[D.key]*D.price})).filter(({quantity:D})=>D>0),[t,e]),E=P.useMemo(()=>_.reduce((D,w)=>D+w.subtotal,0),[_]),A=_.length>0,S=P.useCallback(async D=>{const w=tF(D.ticket),I=await JV.toDataURL(w,{width:256,margin:1});return{summary:D,qrCode:I,progressUrl:w}},[]),O=P.useCallback(async()=>{if(i)return null;if(!A)return c("EMPTY_CART"),null;a(!0),c(null),h(null);try{const D=await L7(t),w=Dd(D),I=await S(w);h(I);try{vV(w)}catch(M){console.warn("注文履歴の保存に失敗しました",M)}return w}catch(D){return console.error(D),c("ORDER_FAILED"),null}finally{a(!1)}},[S,A,t,i]),T=P.useCallback(()=>{h(null)},[]),R=P.useCallback(()=>{g(),T(),c(null)},[T,g]),L=P.useCallback(async()=>{if(!u)return null;try{const D=await iA(u.summary.ticket);if(!D)return h(null),null;let w=null;try{w=await aA(D.orderId)}catch(M){if(!Lb(M))throw M;console.info("orders コレクションの参照権限がないため orderLookup の情報を利用します。",M)}const I=Dd(w??D);return h(M=>M&&{...M,summary:I}),I}catch(D){throw console.error("最新の注文情報の取得に失敗しました",D),D}},[u]),z=P.useCallback(async D=>{const w=hf(D);if(!w)return null;try{const I=await iA(w);if(!I)return h(null),null;let M=null;try{M=await aA(I.orderId)}catch(k){if(!Lb(k))throw k;console.info("orders コレクションの参照権限がないため orderLookup の情報を利用します。",k)}const j=Dd(M??I),V=await S(j);return h(V),j}catch(I){throw console.error("チケット番号から注文を取得できませんでした",I),I}},[S]),U=u?.summary.ticket??"";P.useEffect(()=>{if(!U)return;const D=F7(U,w=>{if(!w){h(null);return}h(I=>{if(!I)return I;const M=Dd(w),j=I.summary;return j.progress!==M.progress||j.payment!==M.payment||j.callNumber!==M.callNumber||j.total!==M.total||j.orderId!==M.orderId?{...I,summary:M}:I})});return()=>{D()}},[U]);const G=P.useMemo(()=>({items:t,updateQuantity:p,resetItems:g,cartItems:_,total:E,hasItems:A,loading:i,error:o,setError:c,confirmOrder:O,orderResult:u,clearOrderResult:T,startNewOrder:R,refreshOrderResult:L,loadOrderByTicket:z}),[t,p,g,_,E,A,i,o,O,u,T,R,L,z]);return m.jsx(F3.Provider,{value:G,children:n})}function Hy(){const n=P.useContext(F3);if(!n)throw new Error("useOrderFlow must be used within an OrderFlowProvider");return n}const U3=P.createContext(void 0),iF=6e3;function aF(n,e){const t=Object.entries(e.items).filter(([,r])=>r>0).map(([r,i])=>`${n[r]?.label??r} ×${i}`).join(" / ");return{id:`${e.orderId}-${Date.now()}`,orderId:e.orderId,callNumber:e.callNumber??0,total:e.total,itemSummary:t||"新しい注文を受け付けました。",createdAt:e.createdAt??e.updatedAt??new Date,source:"new-order"}}function sF(n){return{id:`test-${Date.now()}`,orderId:n.orderId??"TEST-ORDER",callNumber:n.callNumber??0,total:n.total??0,itemSummary:n.itemSummary??"テスト通知: 注文内容がここに表示されます。",createdAt:n.createdAt?new Date(n.createdAt):new Date,source:"test"}}function oF({children:n}){const[e,t]=P.useState([]),r=P.useRef(new Map),i=P.useRef(new Set),{status:a,hasRole:o}=o1(),{menuItemMap:c}=rl(),u=a==="signed-in"&&o(["admin","staff","kitchen"]),h=P.useCallback(O=>{i.current.forEach(T=>{try{T(O)}catch(R){console.error("OrderToast listener failed",R)}})},[]),p=P.useCallback(O=>{t(R=>R.filter(L=>L.id!==O));const T=r.current.get(O);T&&(window.clearTimeout(T),r.current.delete(O))},[]),g=P.useCallback(O=>{const T=r.current.get(O);T&&window.clearTimeout(T);const R=window.setTimeout(()=>p(O),iF);r.current.set(O,R)},[p]),_=P.useCallback((O,T)=>{t(L=>[...L,O]),g(O.id);const R=T?{...T,toast:O}:{type:O.source,toast:O};return h(R),O},[h,g]),E=P.useCallback((O,T)=>{const R=O.id??`${O.orderId}-${Date.now()}`,L={...O,id:R,source:O.source??"custom"};return _(L,T)},[_]);P.useEffect(()=>{const O=r.current;return()=>{O.forEach(T=>window.clearTimeout(T)),O.clear()}},[]),P.useEffect(()=>{if(!u)return;const O=B7(T=>{const R=aF(c,T);_(R,{type:"new-order",order:T})});return()=>{O?.()}},[u,_,c]),P.useEffect(()=>{const O=pB(T=>{const R=sF(T);_(R,{type:"test"})});return()=>{O?.()}},[_]);const A=P.useCallback(O=>(i.current.add(O),()=>{i.current.delete(O)}),[]),S=P.useMemo(()=>({toasts:e,removeToast:p,addToast:E,registerListener:A}),[E,A,p,e]);return m.jsx(U3.Provider,{value:S,children:n})}function z3(){const n=P.useContext(U3);if(!n)throw new Error("useOrderToasts must be used within an OrderToastProvider");return n}function Gy(){const[n,e]=P.useState(!1),[t,r]=P.useState(null);return P.useEffect(()=>{if(ja){e(!0),r(null);return}const i=zS(Ti,async a=>{try{a||await VS(Ti),e(!0)}catch(o){console.error("匿名認証に失敗しました",o),r("ANON_SIGNIN_FAILED")}});return()=>i()},[]),{ready:n,error:t}}const lF=P.memo(function({value:e,min:t=0,max:r,onChange:i,ariaLabel:a,decreaseLabel:o,increaseLabel:c}){const u=()=>{const p=e-1;p<t||i(p)},h=()=>{const p=e+1;typeof r=="number"&&p>r||i(p)};return m.jsxs("div",{className:"quantity-stepper",role:"group","aria-label":a,children:[m.jsx("button",{type:"button",className:"quantity-button decrease",onClick:u,"aria-label":o??"数量を1減らす",disabled:e<=t,children:"−"}),m.jsx("div",{className:"quantity-value","aria-live":"polite",children:e}),m.jsx("button",{type:"button",className:"quantity-button increase",onClick:h,"aria-label":c??"数量を1増やす",disabled:typeof r=="number"&&e>=r,children:"＋"})]})});function cF(){const n=Jo(),{ready:e,error:t}=Gy(),{menuItems:r}=rl(),{items:i,updateQuantity:a,resetItems:o,total:c,hasItems:u,clearOrderResult:h,setError:p}=Hy(),{language:g}=oo(),_=Ya[g],[E,A]=P.useState(null);P.useEffect(()=>{h(),p(null)},[h,p]);const S=T=>{if(T.preventDefault(),A(null),!!e){if(!u){A("EMPTY_CART");return}n("/order/review")}},O=()=>{o(),A(null)};return m.jsx("div",{className:"content-container",children:m.jsxs("section",{className:"content-card",children:[m.jsx("h1",{className:"section-title",children:_.orderInput.title}),m.jsxs("p",{className:"section-description",children:[_.orderInput.descriptionLead,m.jsx("br",{}),_.orderInput.descriptionFollow]}),!e&&!t&&m.jsx("p",{children:_.auth.signingIn}),t&&m.jsx("p",{className:"error-message",children:_.auth.error}),m.jsxs("form",{className:"form-grid",onSubmit:S,children:[r.map(T=>{const R=Uy(T,g),L=SV(T,g);return m.jsxs("article",{className:"menu-card",children:[m.jsx("div",{className:"menu-card-media",children:m.jsx("img",{src:T.image,alt:_.menu.imageAlt(R),loading:"lazy",decoding:"async",width:320,height:220})}),m.jsxs("div",{className:"menu-card-body",children:[m.jsxs("header",{className:"menu-card-header",children:[m.jsx("h2",{className:"menu-card-title",children:R}),m.jsxs("span",{className:"menu-card-price",children:["¥",T.price.toLocaleString()]})]}),m.jsx("p",{className:"menu-card-description",children:L}),T.allergens.length>0&&m.jsx("ul",{className:"menu-card-allergens","aria-label":_.menu.allergensLabel(R),children:T.allergens.map(z=>{const U=_9[z],G=CV(U.key,g);return m.jsx("li",{className:"menu-card-allergen",title:G,"aria-label":G,children:m.jsx("span",{className:"menu-card-allergen-icon","aria-hidden":"true",children:m.jsx("img",{src:U.icon,alt:G,loading:"lazy",decoding:"async",width:48,height:48})})},U.key)})}),m.jsx("div",{className:"menu-card-footer",children:m.jsx(lF,{value:i[T.key],onChange:z=>{a(T.key,z),E&&A(null)},ariaLabel:_.menu.quantityLabel(R),decreaseLabel:_.quantityStepper.decrease,increaseLabel:_.quantityStepper.increase})})]})]},T.key)}),m.jsx("div",{className:"summary-card",style:{marginTop:"0.5rem"},children:m.jsx("div",{className:"content-card",style:{boxShadow:"none"},children:m.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:"0.75rem"},children:[m.jsxs("div",{children:[m.jsx("h2",{style:{margin:0,fontSize:"1.4rem"},children:_.orderInput.totalLabel}),m.jsx("p",{style:{margin:0,color:"#475569"},children:_.orderInput.totalNote})]}),m.jsxs("strong",{style:{fontSize:"1.8rem",color:"var(--color-primary)"},children:["¥",c.toLocaleString()]})]})})}),E&&m.jsx("p",{style:{color:"#dc2626",margin:0},children:_.errors[E]}),m.jsxs("div",{className:"button-row",children:[m.jsx("button",{type:"submit",className:"button primary",disabled:!e,children:_.orderInput.reviewButton}),m.jsx("button",{type:"button",className:"button secondary",onClick:O,children:_.orderInput.resetButton})]})]})]})})}function uF(){const n=Jo(),{ready:e,error:t}=Gy(),{cartItems:r,total:i,hasItems:a,loading:o,error:c,setError:u,confirmOrder:h}=Hy(),[p,g]=P.useState(null),[_,E]=P.useState(!1),{language:A}=oo(),S=Ya[A];P.useEffect(()=>{a||n("/order",{replace:!0})},[a,n]),P.useEffect(()=>{u(null)},[u]);const O=async()=>{const R=await h();R&&(g(R.ticket),E(!0))},T=()=>{if(!p){E(!1);return}n(`/order/complete/${p}`,{replace:!0})};return m.jsx("div",{className:"content-container",children:m.jsxs("section",{className:"content-card",children:[m.jsx("h1",{className:"section-title",children:S.orderReview.title}),m.jsxs("p",{className:"section-description",children:[S.orderReview.descriptionLead,m.jsx("br",{}),S.orderReview.descriptionFollow]}),!e&&!t&&m.jsx("p",{children:S.auth.signingIn}),t&&m.jsx("p",{className:"error-message",children:S.auth.error}),m.jsxs("div",{className:"receipt-card",children:[m.jsxs("div",{className:"receipt-header",children:[m.jsx("span",{children:S.orderReview.tableHeaders.item}),m.jsx("span",{children:S.orderReview.tableHeaders.quantity}),m.jsx("span",{children:S.orderReview.tableHeaders.subtotal})]}),m.jsx("div",{className:"receipt-divider","aria-hidden":"true"}),m.jsx("div",{className:"receipt-items",children:r.map(({item:R,quantity:L,subtotal:z})=>m.jsxs("div",{className:"receipt-row",children:[m.jsx("div",{className:"receipt-item-info",children:m.jsx("span",{className:"receipt-item-name",children:Uy(R,A)})}),m.jsxs("span",{className:"receipt-item-qty",children:["×",L]}),m.jsxs("span",{className:"receipt-item-subtotal",children:["¥",z.toLocaleString()]})]},R.key))}),m.jsx("div",{className:"receipt-divider","aria-hidden":"true"}),m.jsxs("div",{className:"receipt-total",children:[m.jsx("span",{children:S.orderReview.totalLabel}),m.jsxs("span",{children:["¥",i.toLocaleString()]})]}),_&&m.jsx("div",{className:"waste-guide-modal-backdrop",role:"presentation",children:m.jsxs("div",{className:"waste-guide-modal",role:"dialog","aria-modal":"true","aria-labelledby":"waste-guide-title","aria-describedby":"waste-guide-description",children:[m.jsx("h2",{id:"waste-guide-title",children:S.wasteGuide.title}),m.jsx("p",{id:"waste-guide-description",children:S.wasteGuide.description}),m.jsx("div",{className:"waste-guide-visual","aria-hidden":"true",children:S.wasteGuide.placeholder}),m.jsx("div",{className:"waste-guide-actions",children:m.jsx("button",{type:"button",className:"button primary",onClick:T,children:S.wasteGuide.confirm})})]})})]}),c&&m.jsx("p",{style:{color:"#dc2626",marginTop:0},children:S.errors[c]}),m.jsxs("div",{className:"button-row",children:[m.jsx("button",{type:"button",className:"button primary",onClick:O,disabled:!e||o,children:o?S.orderReview.confirming:S.orderReview.confirmButton}),m.jsx("button",{type:"button",className:"button secondary",onClick:()=>n("/order"),disabled:o,children:S.orderReview.changeButton})]})]})})}const Bb=[{key:"received",matches:["受注済み"]},{key:"ready",matches:["調理済み"]},{key:"completed",matches:["クローズ"]}];function mv(n={}){const{enableTicketSearch:e=!1,ticketNavigationBase:t="/order/complete",fallbackPath:r="/status",titleOverride:i,descriptionOverride:a}=n,o=Jo(),{ticket:c}=oN(),[u]=bv(),h=u.get("ticket"),p=u.get("previewReady"),g=P.useMemo(()=>c?hf(c):h?hf(h):"",[h,c]),_=P.useMemo(()=>{const qe=t||"/order/complete";return qe.endsWith("/")?qe.slice(0,-1):qe},[t]),{ready:E,error:A}=Gy(),{language:S}=oo(),O=Ya[S],T=O.orderComplete,R=O.auth,L=O.copy,{orderResult:z,startNewOrder:U,refreshOrderResult:G,loadOrderByTicket:D}=Hy(),[w,I]=P.useState(!1),[M,j]=P.useState(null),[V,k]=P.useState(0),[ee,Ie]=P.useState(0),q=5e3,[ce,me]=P.useState(!1),[Te,Ue]=P.useState(null),[X,se]=P.useState(""),[ve,Ee]=P.useState(null);P.useEffect(()=>{e&&(se(g),Ee(null))},[e,g]);const ie=z?.summary.ticket.toUpperCase(),ge=z&&(!g||ie===g)?z:null,pe=ge?.summary,be=e,De=ge?.qrCode??"",rt=ge?.progressUrl??"",Gt=pe?.progress??"受注済み",ot=P.useMemo(()=>p==="1"||p==="true",[p]),Ot=Gt==="調理済み",Bn=!!(pe&&(Ot||ot)),{menuItemMap:de}=rl(),Ne=pe?.callNumber&&pe.callNumber>0?pe.callNumber:null,Ye=Ne?T.readyInstructionWithCallNumber(Ne):T.readyInstructionWait,Kt=P.useMemo(()=>pe?pe.progress==="クローズ"?{label:T.paymentState.complete,tone:"complete"}:pe.payment==="支払い済み"?{label:T.paymentState.paid,tone:"paid"}:{label:T.paymentState.unpaid,tone:"unpaid"}:{label:"",tone:"unpaid"},[T,pe]),gt=P.useMemo(()=>{if(!pe?.createdAt)return{display:"",iso:""};const qe=new Date(pe.createdAt);return Number.isNaN(qe.getTime())?{display:"",iso:""}:{display:new Intl.DateTimeFormat(S==="ja"?"ja-JP":"en-US",{dateStyle:"medium",timeStyle:"short"}).format(qe),iso:qe.toISOString()}},[S,pe?.createdAt]),bt=P.useMemo(()=>IV(Gt,S),[Gt,S]),Vn=P.useMemo(()=>{const qe=Bb.findIndex(qt=>qt.matches.includes(Gt));return qe>=0?qe:0},[Gt]);P.useEffect(()=>{ge&&Ue(null)},[ge]),P.useEffect(()=>{if(!g){!z&&!e&&o(r,{replace:!0});return}if(z&&ie===g)return;let qe=!0;return me(!0),Ue(null),D(g).then(qt=>{qe&&(qt||o(`/order/not-found?ticket=${encodeURIComponent(g)}`,{replace:!0}))}).catch(qt=>{console.error(qt),qe&&Ue("loadFailed")}).finally(()=>{qe&&me(!1)}),()=>{qe=!1}},[ie,e,r,D,o,g,z]),P.useEffect(()=>{!ge&&!ce&&!g&&z&&o(`${_}/${z.summary.ticket}`,{replace:!0})},[ce,o,g,z,ge,_]),P.useEffect(()=>{if(!V){Ie(0);return}const qe=()=>{const pr=V-Date.now();Ie(pr>0?Math.ceil(pr/1e3):0)};qe();const qt=window.setInterval(qe,500);return()=>window.clearInterval(qt)},[V]);const Wa=qe=>{qe.preventDefault();const qt=hf(X);if(!qt){Ee("required");return}Ee(null),se(qt),o(`${_}/${qt}`)},zr=e?m.jsxs("section",{className:"content-card","aria-label":T.ticketSearch.regionLabel,children:[m.jsx("h2",{className:"section-title",children:T.ticketSearch.title}),m.jsx("p",{className:"section-description",children:T.ticketSearch.description}),m.jsxs("form",{className:"form-grid",onSubmit:Wa,children:[m.jsxs("div",{className:"field",children:[m.jsx("label",{htmlFor:"progress-ticket",children:T.ticketSearch.label}),m.jsx("input",{id:"progress-ticket",type:"text",inputMode:"text",value:X,onChange:qe=>se(qe.target.value.toUpperCase()),placeholder:T.ticketSearch.placeholder,maxLength:24})]}),m.jsx("div",{className:"button-row",children:m.jsx("button",{type:"submit",className:"button primary",children:T.ticketSearch.button})})]}),ve&&m.jsx("p",{className:"error-message",children:T.ticketSearch.error})]}):null;if(!pe)return ce?m.jsxs("div",{className:"content-container",children:[zr,m.jsxs("section",{className:"content-card order-complete-card","aria-live":"polite",children:[m.jsx("h1",{className:"section-title",children:T.loadingTitle}),m.jsx("p",{className:"section-description",children:T.loadingDescription})]})]}):Te?m.jsxs("div",{className:"content-container",children:[zr,m.jsxs("section",{className:"content-card order-complete-card","aria-live":"polite",children:[m.jsx("h1",{className:"section-title",children:T.loadErrorTitle}),m.jsx("p",{className:"section-description",children:T.loadErrorDescription}),m.jsx("div",{className:"button-row",children:m.jsx("button",{type:"button",className:"button secondary",onClick:()=>o(r),children:T.loadErrorAction})})]})]}):e?m.jsxs("div",{className:"content-container",children:[zr,m.jsxs("section",{className:"content-card order-complete-card","aria-live":"polite",children:[m.jsx("h1",{className:"section-title",children:T.inviteTitle}),m.jsx("p",{className:"section-description",children:T.inviteDescription})]})]}):null;const on=i??T.title,Mt=a??(be?T.description.progressOnly:T.description.default),Ir=async()=>{if(!(w||Date.now()<V||ee>0)){I(!0),j(null);try{await G()||j("refreshFailed")}catch(qe){console.error(qe),j("refreshFailed")}finally{I(!1),k(Date.now()+q)}}},lo=async()=>{try{await navigator.clipboard.writeText(pe.ticket),alert(L.progressCodeSuccess)}catch(qe){console.error(qe),alert(L.progressCodeFailure)}},Li=async()=>{try{await navigator.clipboard.writeText(rt),alert(L.progressLinkSuccess)}catch(qe){console.error(qe),alert(L.progressLinkFailure)}},Fc=()=>{U(),o("/order")};return m.jsxs("div",{className:"content-container",children:[zr,m.jsxs("section",{className:"content-card order-complete-card","aria-live":"polite",children:[m.jsx("h1",{className:"section-title",children:on}),m.jsx("p",{className:"section-description",children:Mt}),!E&&!A&&m.jsx("p",{children:R.signingIn}),A&&m.jsx("p",{className:"error-message",children:R.error}),m.jsxs("div",{className:"completion-order-info",children:[m.jsxs("div",{className:"completion-status-card",children:[m.jsxs("div",{className:"completion-call-number-block","aria-live":"polite",children:[m.jsx("span",{className:"completion-label",children:T.callNumberLabel}),m.jsx("span",{className:"completion-call-number",children:pe.callNumber>0?pe.callNumber:T.callNumberPending})]}),m.jsx("div",{className:"payment-state",children:m.jsx("span",{className:`payment-state-badge ${Kt.tone}`,children:Kt.label})}),m.jsxs("div",{className:"completion-status-header",children:[m.jsx("span",{className:"completion-label",children:T.statusHeading}),m.jsx("button",{type:"button",className:"button secondary completion-refresh-button",onClick:Ir,disabled:w||ee>0,children:w?T.refresh.refreshing:ee>0?T.refresh.cooldown(ee):T.refresh.action})]}),M&&m.jsx("p",{className:"completion-refresh-error",children:T.refresh.error}),m.jsx("div",{className:"completion-progress",role:"list",children:Bb.map((qe,qt)=>{const pr=["completion-progress-step",qt<Vn?"done":"",qt===Vn?"current":""].filter(Boolean).join(" ");return m.jsxs("div",{className:pr,role:"listitem",children:[m.jsx("div",{className:"completion-progress-node","aria-hidden":"true"}),m.jsx("span",{className:"completion-progress-label",children:NV(qe.key,S)})]},qe.key)})}),Bn&&pe&&m.jsxs("div",{className:`completion-ready-notice${ot&&!Ot?" preview":""}`,role:"status","aria-live":"assertive",children:[m.jsx("div",{className:"completion-ready-icon","aria-hidden":"true",children:m.jsx("svg",{viewBox:"0 0 24 24",focusable:"false","aria-hidden":"true",children:m.jsx("path",{d:"M9.5 16.25 5.75 12.5l1.5-1.5 2.25 2.25 6-6 1.5 1.5-7.5 7.5Z",fill:"currentColor"})})}),m.jsxs("div",{className:"completion-ready-copy",children:[m.jsx("p",{className:"completion-ready-title",children:T.readyTitle}),m.jsx("p",{className:"completion-ready-message",children:Ye}),ot&&!Ot&&m.jsx("span",{className:"completion-ready-preview-tag",children:T.readyPreviewTag})]})]})]}),m.jsxs("div",{className:"completion-meta",children:[m.jsx("h2",{className:"completion-subheading",children:T.metaHeading}),m.jsxs("dl",{className:"completion-meta-list",children:[m.jsxs("div",{children:[m.jsx("dt",{children:T.meta.total}),m.jsxs("dd",{children:["¥",pe.total.toLocaleString()]})]}),m.jsxs("div",{children:[m.jsx("dt",{children:T.meta.payment}),m.jsx("dd",{children:TV(pe.payment,S)})]}),m.jsxs("div",{children:[m.jsx("dt",{children:T.meta.progress}),m.jsx("dd",{children:bt})]}),m.jsxs("div",{children:[m.jsx("dt",{children:T.meta.orderedAt}),m.jsx("dd",{children:gt.display?m.jsx("time",{dateTime:gt.iso,children:gt.display}):"—"})]})]})]})]}),De&&m.jsxs("div",{className:"completion-qr-block",children:[m.jsx("img",{src:De,alt:T.qrAlt}),m.jsx("span",{className:"completion-qr-caption",children:T.qrCaption})]}),m.jsxs("div",{className:"completion-identifiers",children:[m.jsxs("div",{className:"completion-order-id completion-identifier-card",children:[m.jsx("span",{className:"completion-label",children:T.identifiers.orderId}),m.jsx("span",{className:"completion-order-id-value",children:pe.orderId})]}),be&&m.jsxs("div",{className:"completion-order-id completion-identifier-card",children:[m.jsx("span",{className:"completion-label",children:T.identifiers.ticket}),m.jsx("span",{className:"completion-order-id-value",style:{wordBreak:"break-all"},children:pe.ticket})]})]}),m.jsxs("div",{className:"completion-items",children:[m.jsx("h2",{className:"completion-subheading",children:T.itemsHeading}),m.jsxs("table",{className:"completion-items-table",children:[m.jsx("thead",{children:m.jsxs("tr",{children:[m.jsx("th",{scope:"col",children:T.itemsTable.item}),m.jsx("th",{scope:"col",children:T.itemsTable.quantity}),m.jsx("th",{scope:"col",children:T.itemsTable.price}),m.jsx("th",{scope:"col",children:T.itemsTable.subtotal})]})}),m.jsxs("tbody",{children:[Object.entries(pe.items).map(([qe,qt])=>{const pr=de[qe];return pr?m.jsxs("tr",{children:[m.jsx("td",{children:Uy(pr,S)}),m.jsx("td",{className:"numeric",children:qt}),m.jsxs("td",{className:"numeric",children:["¥",pr.price.toLocaleString()]}),m.jsxs("td",{className:"numeric",children:["¥",(pr.price*qt).toLocaleString()]})]},qe):null}),m.jsxs("tr",{className:"completion-items-total",children:[m.jsx("td",{colSpan:3,children:T.itemsTable.total}),m.jsxs("td",{className:"numeric",children:["¥",pe.total.toLocaleString()]})]})]})]})]}),m.jsxs("div",{className:"button-row completion-actions",children:[m.jsx("button",{type:"button",className:"button primary",onClick:Li,children:T.actions.copyLink}),be&&rt&&m.jsx("button",{type:"button",className:"button secondary",onClick:lo,children:T.actions.copyCode}),m.jsx("button",{type:"button",className:"button secondary",onClick:Fc,children:T.actions.startNew})]})]})]})}function Vb(){const{language:n}=oo(),t=Ya[n].orderProgress;return m.jsx(mv,{enableTicketSearch:!0,ticketNavigationBase:"/progress",fallbackPath:"/progress",titleOverride:t.title,descriptionOverride:t.description})}function fF(){const[n]=bv(),e=n.get("ticket")??"",t=hf(e),{language:r}=oo(),i=Ya[r].ticketNotFound;return m.jsx("div",{className:"content-container",children:m.jsxs("section",{className:"content-card order-complete-card","aria-live":"polite",children:[m.jsx("h1",{className:"section-title",children:i.title}),m.jsx("p",{className:"section-description",children:t?i.descriptionKnown(t):i.descriptionUnknown}),m.jsxs("div",{className:"button-row",children:[m.jsx(Wd,{className:"button primary",to:"/status",children:i.retry}),m.jsx(Wd,{className:"button secondary",to:"/order",children:i.newOrder})]})]})})}const mg=3600*1e3,H3=()=>{const{list:n}=so();return n.reduce((e,t)=>(e[t.key]=0,e),{})},Fb=n=>`${n.getHours().toString().padStart(2,"0")}:00`,hF=n=>n.createdAt??n.updatedAt;function dF(n,e,t=24){const r=e.getTime(),i=Array.from({length:t},(a,o)=>{const c=new Date(r+o*mg),u=new Date(c.getTime()+mg);return{slotStart:c,slotEnd:u,label:`${Fb(c)} - ${Fb(u)}`,totals:H3(),orderCount:0,totalItems:0}});return n.forEach(a=>{const o=hF(a);if(!o)return;const c=o.getTime()-r;if(c<0)return;const u=Math.floor(c/mg);if(u<0||u>=t)return;const h=i[u];let p=!1;Object.entries(a.items).forEach(([g,_])=>{const E=Number(_);if(!Number.isFinite(E)||E<=0)return;const A=g;h.totals[A]=(h.totals[A]??0)+E,h.totalItems+=E,p=!0}),p&&(h.orderCount+=1)}),i}function pF(n){const e=H3(),t={受注済み:0,調理済み:0,クローズ:0};let r=0;return n.forEach(i=>{t[i.progress]=(t[i.progress]??0)+1,i.progress!=="クローズ"&&(r+=1,Object.entries(i.items).forEach(([a,o])=>{const c=Number(o);if(!Number.isFinite(c)||c<=0)return;const u=a;e[u]=(e[u]??0)+c}))}),{orderCount:r,totals:e,statusCounts:t}}const mF=6e4,Ub=n=>n.toISOString().slice(0,10),gF=n=>{const e=n.getHours().toString().padStart(2,"0"),t=n.getMinutes().toString().padStart(2,"0"),r=n.getSeconds().toString().padStart(2,"0");return`${e}:${t}:${r}`},vF=n=>{const e=new Date(n);return e.setDate(e.getDate()+1),e};function yF(){const[n,e]=P.useState(()=>Ub(new Date)),[t,r]=P.useState([]),[i,a]=P.useState(!1),[o,c]=P.useState(null),[u,h]=P.useState(null),{registerListener:p}=z3(),{signOut:g}=o1(),{menuItems:_}=rl(),E=P.useMemo(()=>{const w=new Date(`${n}T00:00:00`);return w.setHours(0,0,0,0),w},[n]),A=P.useMemo(()=>vF(E),[E]),S=P.useCallback(async w=>{if(!w?.aborted){a(!0),c(null);try{const I=await j7({start:E,end:A});if(w?.aborted)return;r(I),h(new Date)}catch(I){if(w?.aborted)return;console.error(I);const M=I instanceof Error?I.message:"データの取得に失敗しました。";c(M)}finally{w?.aborted||a(!1)}}},[E,A]),O=P.useRef(S);P.useEffect(()=>{O.current=S},[S]),P.useEffect(()=>{const w=new AbortController;return S(w.signal),()=>w.abort()},[S]),P.useEffect(()=>{const w=new AbortController,I=window.setInterval(()=>{S(w.signal)},mF);return()=>{w.abort(),window.clearInterval(I)}},[S]),P.useEffect(()=>{const w=p(I=>{I.type==="new-order"&&O.current()});return()=>{w()}},[p]);const T=P.useMemo(()=>dF(t,E,24),[t,E]),R=P.useMemo(()=>pF(t),[t]),L=P.useMemo(()=>T.filter(w=>w.totalItems>0),[T]),z=P.useMemo(()=>{const w=_.reduce((j,V)=>(j[V.key]=T.reduce((k,ee)=>k+(ee.totals[V.key]??0),0),j),{}),I=Object.values(w).reduce((j,V)=>j+V,0),M=T.reduce((j,V)=>j+V.orderCount,0);return{totals:w,totalItems:I,totalOrders:M}},[T,_]),U=w=>{e(w.target.value)},G=()=>{h(null),S()},D=()=>{g()};return m.jsxs("div",{className:"kitchen-page",children:[m.jsxs("header",{className:"kitchen-header",children:[m.jsxs("div",{children:[m.jsx("p",{className:"kitchen-overline",children:"キッチン向けビュー"}),m.jsx("h1",{children:"調理チームダッシュボード"}),m.jsx("p",{className:"kitchen-description",children:"仕込みの目安となる販売数と、現在オーダー中のメニュー数をまとめています。"})]}),m.jsxs("div",{className:"kitchen-controls",role:"group","aria-label":"表示期間の設定",children:[m.jsxs("label",{className:"kitchen-date-control",children:[m.jsx("span",{children:"表示日"}),m.jsx("input",{type:"date",value:n,onChange:U,max:Ub(new Date)})]}),m.jsx("button",{type:"button",className:"button secondary",onClick:G,disabled:i,children:"今すぐ再読み込み"}),m.jsx("button",{type:"button",className:"button secondary",onClick:D,children:"サインアウト"}),m.jsxs("p",{className:"kitchen-last-updated",children:["最終更新: ",u?gF(u):"更新待ち"]})]})]}),o&&m.jsx("div",{className:"kitchen-alert error",children:o}),i&&m.jsx("p",{className:"kitchen-loading",children:"集計中です…"}),m.jsxs("section",{className:"kitchen-section","aria-labelledby":"kitchen-current-orders",children:[m.jsxs("div",{className:"kitchen-section-header",children:[m.jsx("h2",{id:"kitchen-current-orders",children:"現在のオーダー数"}),m.jsx("p",{children:"受注済み〜調理済みまでの進行中オーダーを合計しています。"})]}),m.jsx("div",{className:"kitchen-summary-grid",children:_.map(w=>m.jsxs("article",{className:"kitchen-summary-card",children:[m.jsx("h3",{children:w.label}),m.jsxs("p",{className:"kitchen-summary-count",children:[R.totals[w.key],"個"]})]},w.key))}),m.jsxs("div",{className:"kitchen-status-chips",role:"list",children:[m.jsxs("span",{role:"listitem",className:"kitchen-status-chip",children:["受注済み ",R.statusCounts.受注済み,"件"]}),m.jsxs("span",{role:"listitem",className:"kitchen-status-chip highlight",children:["調理済み ",R.statusCounts.調理済み,"件"]}),m.jsxs("span",{role:"listitem",className:"kitchen-status-chip muted",children:["受け渡し済み ",R.statusCounts.クローズ,"件"]}),m.jsxs("span",{role:"listitem",className:"kitchen-status-chip total",children:["進行中合計 ",R.orderCount,"件"]})]})]}),m.jsxs("section",{className:"kitchen-section","aria-labelledby":"kitchen-hourly-sales",children:[m.jsxs("div",{className:"kitchen-section-header",children:[m.jsx("h2",{id:"kitchen-hourly-sales",children:"1時間ごとの販売数"}),m.jsx("p",{children:"選択日の注文データを時間帯別に集計しています（自動更新: 60秒ごと）。"})]}),L.length===0?m.jsx("p",{className:"kitchen-empty",children:"該当データがありません。"}):m.jsx("div",{className:"kitchen-table-wrapper",children:m.jsxs("table",{className:"kitchen-table",children:[m.jsx("thead",{children:m.jsxs("tr",{children:[m.jsx("th",{scope:"col",children:"時間帯"}),_.map(w=>m.jsx("th",{scope:"col",children:w.label},w.key)),m.jsx("th",{scope:"col",children:"合計個数"}),m.jsx("th",{scope:"col",children:"注文数"})]})}),m.jsx("tbody",{children:L.map(w=>m.jsxs("tr",{children:[m.jsx("th",{scope:"row",children:w.label}),_.map(I=>m.jsx("td",{children:w.totals[I.key]>0?w.totals[I.key]:"—"},I.key)),m.jsx("td",{children:w.totalItems>0?w.totalItems:"—"}),m.jsx("td",{children:w.orderCount>0?w.orderCount:"—"})]},w.label))}),m.jsx("tfoot",{children:m.jsxs("tr",{children:[m.jsx("th",{scope:"row",children:"合計"}),_.map(w=>m.jsx("td",{children:z.totals[w.key]||"—"},w.key)),m.jsx("td",{children:z.totalItems||"—"}),m.jsx("td",{children:z.totalOrders||"—"})]})})]})})]})]})}const _F={"new-order":"新しい注文が入りました",test:"テスト通知",custom:"お知らせ"},xF={hour:"2-digit",minute:"2-digit"};function EF(n){return n?n.toLocaleTimeString([],xF):""}function wF(n){if(!n)return;if(n instanceof Date)return n;const e=new Date(n);return Number.isNaN(e.getTime())?void 0:e}function AF(n){return n&&n>0?`呼出番号 ${n}`:"呼出番号は準備中です"}const G3=P.memo(({ariaLabel:n="新規注文通知",className:e,hideWhenEmpty:t=!0,titleBySource:r,variant:i="dark"})=>{const{toasts:a,removeToast:o}=z3();if(t&&a.length===0)return null;const c=["order-toast-container",e].filter(Boolean).join(" ");return m.jsx("div",{className:c,role:"status","aria-live":"polite","aria-label":n,children:a.map(u=>{const h=r?.[u.source]??_F[u.source],p=wF(u.createdAt),g=EF(p),_=AF(u.callNumber),E=i==="light"?"order-toast--light":"";return m.jsxs("div",{className:`order-toast ${E}`,children:[m.jsx("button",{type:"button",className:"order-toast-close",onClick:()=>o(u.id),"aria-label":"通知を閉じる",children:"×"}),m.jsxs("div",{className:"order-toast-content",children:[m.jsx("p",{className:"order-toast-title",children:h}),m.jsxs("p",{className:"order-toast-meta",children:[_," ・ 合計 ¥",u.total.toLocaleString()]}),m.jsx("p",{className:"order-toast-message",children:u.itemSummary}),g&&m.jsxs("p",{className:"order-toast-meta",children:["受注 ",g]})]})]},u.id)})})});G3.displayName="OrderToastViewport";function zb({children:n,required:e,title:t,description:r}){const{status:i,error:a,signIn:o,signOut:c,hasRole:u}=o1(),h=P.useMemo(()=>Array.isArray(e)?e:[e],[e]),[p,g]=P.useState(""),[_,E]=P.useState(""),[A,S]=P.useState(!1),[O,T]=P.useState(null),R=P.useMemo(()=>({admin:"管理者",kitchen:"キッチン",staff:"スタッフ"}),[]),L=P.useMemo(()=>h.map(G=>R[G]).join(", "),[h,R]);P.useEffect(()=>{i==="signed-out"&&(g(""),E(""),S(!1),T(null))},[i]);const z=async G=>{if(G.preventDefault(),!p||!_){T("メールアドレスとパスワードを入力してください");return}T(null),S(!0);try{await o({email:p,password:_})}catch(D){const w=D instanceof Error?D.message:"サインインに失敗しました。もう一度お試しください。";T(w)}finally{S(!1)}},U=P.useMemo(()=>u(h),[u,h]);return i==="loading"?m.jsx("div",{className:"role-guard",children:m.jsx("div",{className:"role-guard-card",children:m.jsx("p",{className:"role-guard-status",children:"認証情報を確認しています…"})})}):i==="signed-out"?m.jsx("div",{className:"role-guard",children:m.jsxs("div",{className:"role-guard-card",children:[m.jsx("h1",{children:t??"ログインが必要です"}),m.jsx("p",{className:"role-guard-description",children:r??`このページにアクセスするには ${L} 権限が必要です。`}),m.jsxs("form",{className:"role-guard-form",onSubmit:z,children:[m.jsxs("label",{className:"role-guard-field",children:[m.jsx("span",{children:"メールアドレス"}),m.jsx("input",{type:"email",autoComplete:"email",value:p,onChange:G=>g(G.target.value),required:!0,placeholder:"admin@example.com"})]}),m.jsxs("label",{className:"role-guard-field",children:[m.jsx("span",{children:"パスワード"}),m.jsx("input",{type:"password",autoComplete:"current-password",value:_,onChange:G=>E(G.target.value),required:!0,placeholder:"パスワード"})]}),(O||a)&&m.jsx("p",{className:"role-guard-error",children:O??a}),m.jsx("button",{type:"submit",className:"button primary",disabled:A,children:A?"サインイン中…":"サインイン"})]})]})}):U?m.jsx(m.Fragment,{children:n}):m.jsx("div",{className:"role-guard",children:m.jsxs("div",{className:"role-guard-card",children:[m.jsx("h1",{children:"アクセス権限がありません"}),m.jsxs("p",{className:"role-guard-description",children:[L," 権限を持つアカウントでサインインしてください。"]}),(O||a)&&m.jsx("p",{className:"role-guard-error",children:O??a}),m.jsx("button",{type:"button",className:"button secondary",onClick:()=>c(),children:"サインアウトして別のアカウントでログイン"})]})})}function bF(){const{language:n}=oo(),e=Ya[n];return m.jsxs("div",{className:"not-found",children:[m.jsx("h1",{children:e.notFound.title}),m.jsx("p",{children:e.notFound.description})]})}const SF="/Ichinikai/header/character_illust.png",CF="/Ichinikai/header/header_title.png";function TF(){const n=ki(),{language:e,setLanguage:t}=oo(),r=n.pathname.startsWith("/admin"),i=n.pathname.startsWith("/kitchen"),a=r||i,o=r||i?"ja":e,c=Ya[o],u=Ya[e].languageToggle,h=["app-shell",r?"app-shell--wide":""].filter(Boolean).join(" "),p=r?"light":"dark",g=!r&&!i,_=g,E=o==="en"?"Mobile ordering system":"モバイル注文システム",A=e==="ja"?"en":"ja",S=()=>{t(A)};return m.jsx(oF,{children:m.jsxs(rF,{children:[m.jsxs("div",{className:h,children:[m.jsx("header",{className:["app-header",_?"app-header--public":"app-header--internal"].filter(Boolean).join(" "),children:_?m.jsx("div",{className:"header-row",children:m.jsxs("div",{className:"header-brand-group",children:[m.jsx("img",{className:"header-brand-character",src:SF,alt:c.header.characterAlt}),m.jsxs("div",{className:"header-title-block",children:[m.jsx("img",{className:"header-title-image",src:CF,alt:c.header.titleAlt}),g&&m.jsx("button",{type:"button",className:"language-switch",onClick:S,"aria-label":u.buttonAria(A),children:u.buttonText})]})]})}):m.jsx("div",{className:"header-internal",children:m.jsxs("div",{className:"brand",children:[m.jsx("span",{"aria-hidden":"true",className:"brand-icon",children:"🧇"}),m.jsxs("div",{className:"brand-text",children:[m.jsx("span",{className:"brand-title",children:"学園祭キッチンカー"}),m.jsx("span",{className:"brand-subtitle",children:E})]})]})})}),m.jsx("main",{className:"app-main",children:m.jsxs(Zb,{children:[m.jsx(zt,{path:"/",element:m.jsx(ni,{to:"/order",replace:!0})}),m.jsx(zt,{path:"/order",element:m.jsx(cF,{})}),m.jsx(zt,{path:"/order/review",element:m.jsx(uF,{})}),m.jsx(zt,{path:"/order/complete",element:m.jsx(mv,{})}),m.jsx(zt,{path:"/order/complete/:ticket",element:m.jsx(mv,{})}),m.jsx(zt,{path:"/order/not-found",element:m.jsx(fF,{})}),m.jsx(zt,{path:"/status",element:m.jsx(RV,{})}),m.jsx(zt,{path:"/progress",element:m.jsx(Vb,{})}),m.jsx(zt,{path:"/progress/:ticket",element:m.jsx(Vb,{})}),m.jsx(zt,{path:"/kitchen",element:m.jsx(zb,{required:"kitchen",title:"キッチン専用ページ",description:"調理チームメンバーのアカウントでサインインしてください。",children:m.jsx(yF,{})})}),m.jsx(zt,{path:"/admin/*",element:m.jsx(zb,{required:["admin","staff"],title:"管理画面へのアクセス",description:"管理者またはスタッフ権限を持つアカウントでサインインしてください。",children:m.jsx(pV,{})})}),m.jsx(zt,{path:"*",element:m.jsx(bF,{})})]})}),m.jsx("footer",{className:"app-footer",children:m.jsxs("p",{children:["© ",new Date().getFullYear()," Hakuto Tanaka and Haruto Otsuka. All rights reserved."]})})]}),a&&m.jsx(G3,{variant:p,ariaLabel:"新着通知"})]})})}const IF="/Ichinikai/";O4.createRoot(document.getElementById("root")).render(m.jsx(P.StrictMode,{children:m.jsx(qN,{basename:IF,children:m.jsx(y9,{children:m.jsx(EV,{children:m.jsx(TF,{})})})})}));
