(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=t(i);fetch(i.href,a)}})();function $4(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var b1={exports:{}},Yu={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ow;function X4(){if(Ow)return Yu;Ow=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(r,i,a){var o=null;if(a!==void 0&&(o=""+a),i.key!==void 0&&(o=""+i.key),"key"in i){a={};for(var c in i)c!=="key"&&(a[c]=i[c])}else a=i;return i=a.ref,{$$typeof:n,type:r,key:o,ref:i!==void 0?i:null,props:a}}return Yu.Fragment=e,Yu.jsx=t,Yu.jsxs=t,Yu}var Dw;function Y4(){return Dw||(Dw=1,b1.exports=X4()),b1.exports}var p=Y4(),S1={exports:{}},We={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mw;function K4(){if(Mw)return We;Mw=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),o=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),g=Symbol.for("react.activity"),_=Symbol.iterator;function w(Y){return Y===null||typeof Y!="object"?null:(Y=_&&Y[_]||Y["@@iterator"],typeof Y=="function"?Y:null)}var E={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,D={};function C(Y,te,me){this.props=Y,this.context=te,this.refs=D,this.updater=me||E}C.prototype.isReactComponent={},C.prototype.setState=function(Y,te){if(typeof Y!="object"&&typeof Y!="function"&&Y!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Y,te,"setState")},C.prototype.forceUpdate=function(Y){this.updater.enqueueForceUpdate(this,Y,"forceUpdate")};function k(){}k.prototype=C.prototype;function V(Y,te,me){this.props=Y,this.context=te,this.refs=D,this.updater=me||E}var U=V.prototype=new k;U.constructor=V,S(U,C.prototype),U.isPureReactComponent=!0;var q=Array.isArray;function $(){}var M={H:null,A:null,T:null,S:null},b=Object.prototype.hasOwnProperty;function N(Y,te,me){var we=me.ref;return{$$typeof:n,type:Y,key:te,ref:we!==void 0?we:null,props:me}}function I(Y,te){return N(Y.type,te,Y.props)}function R(Y){return typeof Y=="object"&&Y!==null&&Y.$$typeof===n}function L(Y){var te={"=":"=0",":":"=2"};return"$"+Y.replace(/[=:]/g,function(me){return te[me]})}var j=/\/+/g;function W(Y,te){return typeof Y=="object"&&Y!==null&&Y.key!=null?L(""+Y.key):te.toString(36)}function ge(Y){switch(Y.status){case"fulfilled":return Y.value;case"rejected":throw Y.reason;default:switch(typeof Y.status=="string"?Y.then($,$):(Y.status="pending",Y.then(function(te){Y.status==="pending"&&(Y.status="fulfilled",Y.value=te)},function(te){Y.status==="pending"&&(Y.status="rejected",Y.reason=te)})),Y.status){case"fulfilled":return Y.value;case"rejected":throw Y.reason}}throw Y}function H(Y,te,me,we,Ce){var be=typeof Y;(be==="undefined"||be==="boolean")&&(Y=null);var Se=!1;if(Y===null)Se=!0;else switch(be){case"bigint":case"string":case"number":Se=!0;break;case"object":switch(Y.$$typeof){case n:case e:Se=!0;break;case m:return Se=Y._init,H(Se(Y._payload),te,me,we,Ce)}}if(Se)return Ce=Ce(Y),Se=we===""?"."+W(Y,0):we,q(Ce)?(me="",Se!=null&&(me=Se.replace(j,"$&/")+"/"),H(Ce,te,me,"",function(Xe){return Xe})):Ce!=null&&(R(Ce)&&(Ce=I(Ce,me+(Ce.key==null||Y&&Y.key===Ce.key?"":(""+Ce.key).replace(j,"$&/")+"/")+Se)),te.push(Ce)),1;Se=0;var $e=we===""?".":we+":";if(q(Y))for(var tt=0;tt<Y.length;tt++)we=Y[tt],be=$e+W(we,tt),Se+=H(we,te,me,be,Ce);else if(tt=w(Y),typeof tt=="function")for(Y=tt.call(Y),tt=0;!(we=Y.next()).done;)we=we.value,be=$e+W(we,tt++),Se+=H(we,te,me,be,Ce);else if(be==="object"){if(typeof Y.then=="function")return H(ge(Y),te,me,we,Ce);throw te=String(Y),Error("Objects are not valid as a React child (found: "+(te==="[object Object]"?"object with keys {"+Object.keys(Y).join(", ")+"}":te)+"). If you meant to render a collection of children, use an array instead.")}return Se}function G(Y,te,me){if(Y==null)return Y;var we=[],Ce=0;return H(Y,we,"","",function(be){return te.call(me,be,Ce++)}),we}function le(Y){if(Y._status===-1){var te=Y._result;te=te(),te.then(function(me){(Y._status===0||Y._status===-1)&&(Y._status=1,Y._result=me)},function(me){(Y._status===0||Y._status===-1)&&(Y._status=2,Y._result=me)}),Y._status===-1&&(Y._status=0,Y._result=te)}if(Y._status===1)return Y._result.default;throw Y._result}var ve=typeof reportError=="function"?reportError:function(Y){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var te=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof Y=="object"&&Y!==null&&typeof Y.message=="string"?String(Y.message):String(Y),error:Y});if(!window.dispatchEvent(te))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",Y);return}console.error(Y)},He={map:G,forEach:function(Y,te,me){G(Y,function(){te.apply(this,arguments)},me)},count:function(Y){var te=0;return G(Y,function(){te++}),te},toArray:function(Y){return G(Y,function(te){return te})||[]},only:function(Y){if(!R(Y))throw Error("React.Children.only expected to receive a single React element child.");return Y}};return We.Activity=g,We.Children=He,We.Component=C,We.Fragment=t,We.Profiler=i,We.PureComponent=V,We.StrictMode=r,We.Suspense=u,We.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=M,We.__COMPILER_RUNTIME={__proto__:null,c:function(Y){return M.H.useMemoCache(Y)}},We.cache=function(Y){return function(){return Y.apply(null,arguments)}},We.cacheSignal=function(){return null},We.cloneElement=function(Y,te,me){if(Y==null)throw Error("The argument must be a React element, but you passed "+Y+".");var we=S({},Y.props),Ce=Y.key;if(te!=null)for(be in te.key!==void 0&&(Ce=""+te.key),te)!b.call(te,be)||be==="key"||be==="__self"||be==="__source"||be==="ref"&&te.ref===void 0||(we[be]=te[be]);var be=arguments.length-2;if(be===1)we.children=me;else if(1<be){for(var Se=Array(be),$e=0;$e<be;$e++)Se[$e]=arguments[$e+2];we.children=Se}return N(Y.type,Ce,we)},We.createContext=function(Y){return Y={$$typeof:o,_currentValue:Y,_currentValue2:Y,_threadCount:0,Provider:null,Consumer:null},Y.Provider=Y,Y.Consumer={$$typeof:a,_context:Y},Y},We.createElement=function(Y,te,me){var we,Ce={},be=null;if(te!=null)for(we in te.key!==void 0&&(be=""+te.key),te)b.call(te,we)&&we!=="key"&&we!=="__self"&&we!=="__source"&&(Ce[we]=te[we]);var Se=arguments.length-2;if(Se===1)Ce.children=me;else if(1<Se){for(var $e=Array(Se),tt=0;tt<Se;tt++)$e[tt]=arguments[tt+2];Ce.children=$e}if(Y&&Y.defaultProps)for(we in Se=Y.defaultProps,Se)Ce[we]===void 0&&(Ce[we]=Se[we]);return N(Y,be,Ce)},We.createRef=function(){return{current:null}},We.forwardRef=function(Y){return{$$typeof:c,render:Y}},We.isValidElement=R,We.lazy=function(Y){return{$$typeof:m,_payload:{_status:-1,_result:Y},_init:le}},We.memo=function(Y,te){return{$$typeof:d,type:Y,compare:te===void 0?null:te}},We.startTransition=function(Y){var te=M.T,me={};M.T=me;try{var we=Y(),Ce=M.S;Ce!==null&&Ce(me,we),typeof we=="object"&&we!==null&&typeof we.then=="function"&&we.then($,ve)}catch(be){ve(be)}finally{te!==null&&me.types!==null&&(te.types=me.types),M.T=te}},We.unstable_useCacheRefresh=function(){return M.H.useCacheRefresh()},We.use=function(Y){return M.H.use(Y)},We.useActionState=function(Y,te,me){return M.H.useActionState(Y,te,me)},We.useCallback=function(Y,te){return M.H.useCallback(Y,te)},We.useContext=function(Y){return M.H.useContext(Y)},We.useDebugValue=function(){},We.useDeferredValue=function(Y,te){return M.H.useDeferredValue(Y,te)},We.useEffect=function(Y,te){return M.H.useEffect(Y,te)},We.useEffectEvent=function(Y){return M.H.useEffectEvent(Y)},We.useId=function(){return M.H.useId()},We.useImperativeHandle=function(Y,te,me){return M.H.useImperativeHandle(Y,te,me)},We.useInsertionEffect=function(Y,te){return M.H.useInsertionEffect(Y,te)},We.useLayoutEffect=function(Y,te){return M.H.useLayoutEffect(Y,te)},We.useMemo=function(Y,te){return M.H.useMemo(Y,te)},We.useOptimistic=function(Y,te){return M.H.useOptimistic(Y,te)},We.useReducer=function(Y,te,me){return M.H.useReducer(Y,te,me)},We.useRef=function(Y){return M.H.useRef(Y)},We.useState=function(Y){return M.H.useState(Y)},We.useSyncExternalStore=function(Y,te,me){return M.H.useSyncExternalStore(Y,te,me)},We.useTransition=function(){return M.H.useTransition()},We.version="19.2.0",We}var Pw;function Mv(){return Pw||(Pw=1,S1.exports=K4()),S1.exports}var P=Mv(),C1={exports:{}},Ku={},T1={exports:{}},I1={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kw;function W4(){return kw||(kw=1,(function(n){function e(H,G){var le=H.length;H.push(G);e:for(;0<le;){var ve=le-1>>>1,He=H[ve];if(0<i(He,G))H[ve]=G,H[le]=He,le=ve;else break e}}function t(H){return H.length===0?null:H[0]}function r(H){if(H.length===0)return null;var G=H[0],le=H.pop();if(le!==G){H[0]=le;e:for(var ve=0,He=H.length,Y=He>>>1;ve<Y;){var te=2*(ve+1)-1,me=H[te],we=te+1,Ce=H[we];if(0>i(me,le))we<He&&0>i(Ce,me)?(H[ve]=Ce,H[we]=le,ve=we):(H[ve]=me,H[te]=le,ve=te);else if(we<He&&0>i(Ce,le))H[ve]=Ce,H[we]=le,ve=we;else break e}}return G}function i(H,G){var le=H.sortIndex-G.sortIndex;return le!==0?le:H.id-G.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var o=Date,c=o.now();n.unstable_now=function(){return o.now()-c}}var u=[],d=[],m=1,g=null,_=3,w=!1,E=!1,S=!1,D=!1,C=typeof setTimeout=="function"?setTimeout:null,k=typeof clearTimeout=="function"?clearTimeout:null,V=typeof setImmediate<"u"?setImmediate:null;function U(H){for(var G=t(d);G!==null;){if(G.callback===null)r(d);else if(G.startTime<=H)r(d),G.sortIndex=G.expirationTime,e(u,G);else break;G=t(d)}}function q(H){if(S=!1,U(H),!E)if(t(u)!==null)E=!0,$||($=!0,L());else{var G=t(d);G!==null&&ge(q,G.startTime-H)}}var $=!1,M=-1,b=5,N=-1;function I(){return D?!0:!(n.unstable_now()-N<b)}function R(){if(D=!1,$){var H=n.unstable_now();N=H;var G=!0;try{e:{E=!1,S&&(S=!1,k(M),M=-1),w=!0;var le=_;try{t:{for(U(H),g=t(u);g!==null&&!(g.expirationTime>H&&I());){var ve=g.callback;if(typeof ve=="function"){g.callback=null,_=g.priorityLevel;var He=ve(g.expirationTime<=H);if(H=n.unstable_now(),typeof He=="function"){g.callback=He,U(H),G=!0;break t}g===t(u)&&r(u),U(H)}else r(u);g=t(u)}if(g!==null)G=!0;else{var Y=t(d);Y!==null&&ge(q,Y.startTime-H),G=!1}}break e}finally{g=null,_=le,w=!1}G=void 0}}finally{G?L():$=!1}}}var L;if(typeof V=="function")L=function(){V(R)};else if(typeof MessageChannel<"u"){var j=new MessageChannel,W=j.port2;j.port1.onmessage=R,L=function(){W.postMessage(null)}}else L=function(){C(R,0)};function ge(H,G){M=C(function(){H(n.unstable_now())},G)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(H){H.callback=null},n.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):b=0<H?Math.floor(1e3/H):5},n.unstable_getCurrentPriorityLevel=function(){return _},n.unstable_next=function(H){switch(_){case 1:case 2:case 3:var G=3;break;default:G=_}var le=_;_=G;try{return H()}finally{_=le}},n.unstable_requestPaint=function(){D=!0},n.unstable_runWithPriority=function(H,G){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var le=_;_=H;try{return G()}finally{_=le}},n.unstable_scheduleCallback=function(H,G,le){var ve=n.unstable_now();switch(typeof le=="object"&&le!==null?(le=le.delay,le=typeof le=="number"&&0<le?ve+le:ve):le=ve,H){case 1:var He=-1;break;case 2:He=250;break;case 5:He=1073741823;break;case 4:He=1e4;break;default:He=5e3}return He=le+He,H={id:m++,callback:G,priorityLevel:H,startTime:le,expirationTime:He,sortIndex:-1},le>ve?(H.sortIndex=le,e(d,H),t(u)===null&&H===t(d)&&(S?(k(M),M=-1):S=!0,ge(q,le-ve))):(H.sortIndex=He,e(u,H),E||w||(E=!0,$||($=!0,L()))),H},n.unstable_shouldYield=I,n.unstable_wrapCallback=function(H){var G=_;return function(){var le=_;_=G;try{return H.apply(this,arguments)}finally{_=le}}}})(I1)),I1}var jw;function Q4(){return jw||(jw=1,T1.exports=W4()),T1.exports}var N1={exports:{}},hr={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lw;function Z4(){if(Lw)return hr;Lw=1;var n=Mv();function e(u){var d="https://react.dev/errors/"+u;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)d+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+u+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var r={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},i=Symbol.for("react.portal");function a(u,d,m){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:g==null?null:""+g,children:u,containerInfo:d,implementation:m}}var o=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(u,d){if(u==="font")return"";if(typeof d=="string")return d==="use-credentials"?d:""}return hr.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,hr.createPortal=function(u,d){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)throw Error(e(299));return a(u,d,null,m)},hr.flushSync=function(u){var d=o.T,m=r.p;try{if(o.T=null,r.p=2,u)return u()}finally{o.T=d,r.p=m,r.d.f()}},hr.preconnect=function(u,d){typeof u=="string"&&(d?(d=d.crossOrigin,d=typeof d=="string"?d==="use-credentials"?d:"":void 0):d=null,r.d.C(u,d))},hr.prefetchDNS=function(u){typeof u=="string"&&r.d.D(u)},hr.preinit=function(u,d){if(typeof u=="string"&&d&&typeof d.as=="string"){var m=d.as,g=c(m,d.crossOrigin),_=typeof d.integrity=="string"?d.integrity:void 0,w=typeof d.fetchPriority=="string"?d.fetchPriority:void 0;m==="style"?r.d.S(u,typeof d.precedence=="string"?d.precedence:void 0,{crossOrigin:g,integrity:_,fetchPriority:w}):m==="script"&&r.d.X(u,{crossOrigin:g,integrity:_,fetchPriority:w,nonce:typeof d.nonce=="string"?d.nonce:void 0})}},hr.preinitModule=function(u,d){if(typeof u=="string")if(typeof d=="object"&&d!==null){if(d.as==null||d.as==="script"){var m=c(d.as,d.crossOrigin);r.d.M(u,{crossOrigin:m,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0})}}else d==null&&r.d.M(u)},hr.preload=function(u,d){if(typeof u=="string"&&typeof d=="object"&&d!==null&&typeof d.as=="string"){var m=d.as,g=c(m,d.crossOrigin);r.d.L(u,m,{crossOrigin:g,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0,type:typeof d.type=="string"?d.type:void 0,fetchPriority:typeof d.fetchPriority=="string"?d.fetchPriority:void 0,referrerPolicy:typeof d.referrerPolicy=="string"?d.referrerPolicy:void 0,imageSrcSet:typeof d.imageSrcSet=="string"?d.imageSrcSet:void 0,imageSizes:typeof d.imageSizes=="string"?d.imageSizes:void 0,media:typeof d.media=="string"?d.media:void 0})}},hr.preloadModule=function(u,d){if(typeof u=="string")if(d){var m=c(d.as,d.crossOrigin);r.d.m(u,{as:typeof d.as=="string"&&d.as!=="script"?d.as:void 0,crossOrigin:m,integrity:typeof d.integrity=="string"?d.integrity:void 0})}else r.d.m(u)},hr.requestFormReset=function(u){r.d.r(u)},hr.unstable_batchedUpdates=function(u,d){return u(d)},hr.useFormState=function(u,d,m){return o.H.useFormState(u,d,m)},hr.useFormStatus=function(){return o.H.useHostTransitionStatus()},hr.version="19.2.0",hr}var Bw;function J4(){if(Bw)return N1.exports;Bw=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),N1.exports=Z4(),N1.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vw;function eN(){if(Vw)return Ku;Vw=1;var n=Q4(),e=Mv(),t=J4();function r(s){var l="https://react.dev/errors/"+s;if(1<arguments.length){l+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)l+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+s+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function a(s){var l=s,f=s;if(s.alternate)for(;l.return;)l=l.return;else{s=l;do l=s,(l.flags&4098)!==0&&(f=l.return),s=l.return;while(s)}return l.tag===3?f:null}function o(s){if(s.tag===13){var l=s.memoizedState;if(l===null&&(s=s.alternate,s!==null&&(l=s.memoizedState)),l!==null)return l.dehydrated}return null}function c(s){if(s.tag===31){var l=s.memoizedState;if(l===null&&(s=s.alternate,s!==null&&(l=s.memoizedState)),l!==null)return l.dehydrated}return null}function u(s){if(a(s)!==s)throw Error(r(188))}function d(s){var l=s.alternate;if(!l){if(l=a(s),l===null)throw Error(r(188));return l!==s?null:s}for(var f=s,h=l;;){var y=f.return;if(y===null)break;var x=y.alternate;if(x===null){if(h=y.return,h!==null){f=h;continue}break}if(y.child===x.child){for(x=y.child;x;){if(x===f)return u(y),s;if(x===h)return u(y),l;x=x.sibling}throw Error(r(188))}if(f.return!==h.return)f=y,h=x;else{for(var T=!1,B=y.child;B;){if(B===f){T=!0,f=y,h=x;break}if(B===h){T=!0,h=y,f=x;break}B=B.sibling}if(!T){for(B=x.child;B;){if(B===f){T=!0,f=x,h=y;break}if(B===h){T=!0,h=x,f=y;break}B=B.sibling}if(!T)throw Error(r(189))}}if(f.alternate!==h)throw Error(r(190))}if(f.tag!==3)throw Error(r(188));return f.stateNode.current===f?s:l}function m(s){var l=s.tag;if(l===5||l===26||l===27||l===6)return s;for(s=s.child;s!==null;){if(l=m(s),l!==null)return l;s=s.sibling}return null}var g=Object.assign,_=Symbol.for("react.element"),w=Symbol.for("react.transitional.element"),E=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),D=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),k=Symbol.for("react.consumer"),V=Symbol.for("react.context"),U=Symbol.for("react.forward_ref"),q=Symbol.for("react.suspense"),$=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),N=Symbol.for("react.activity"),I=Symbol.for("react.memo_cache_sentinel"),R=Symbol.iterator;function L(s){return s===null||typeof s!="object"?null:(s=R&&s[R]||s["@@iterator"],typeof s=="function"?s:null)}var j=Symbol.for("react.client.reference");function W(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===j?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case S:return"Fragment";case C:return"Profiler";case D:return"StrictMode";case q:return"Suspense";case $:return"SuspenseList";case N:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case E:return"Portal";case V:return s.displayName||"Context";case k:return(s._context.displayName||"Context")+".Consumer";case U:var l=s.render;return s=s.displayName,s||(s=l.displayName||l.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case M:return l=s.displayName||null,l!==null?l:W(s.type)||"Memo";case b:l=s._payload,s=s._init;try{return W(s(l))}catch{}}return null}var ge=Array.isArray,H=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,G=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,le={pending:!1,data:null,method:null,action:null},ve=[],He=-1;function Y(s){return{current:s}}function te(s){0>He||(s.current=ve[He],ve[He]=null,He--)}function me(s,l){He++,ve[He]=s.current,s.current=l}var we=Y(null),Ce=Y(null),be=Y(null),Se=Y(null);function $e(s,l){switch(me(be,l),me(Ce,s),me(we,null),l.nodeType){case 9:case 11:s=(s=l.documentElement)&&(s=s.namespaceURI)?ew(s):0;break;default:if(s=l.tagName,l=l.namespaceURI)l=ew(l),s=tw(l,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}te(we),me(we,s)}function tt(){te(we),te(Ce),te(be)}function Xe(s){s.memoizedState!==null&&me(Se,s);var l=we.current,f=tw(l,s.type);l!==f&&(me(Ce,s),me(we,f))}function et(s){Ce.current===s&&(te(we),te(Ce)),Se.current===s&&(te(Se),Gu._currentValue=le)}var Wn,Qn;function Jt(s){if(Wn===void 0)try{throw Error()}catch(f){var l=f.stack.trim().match(/\n( *(at )?)/);Wn=l&&l[1]||"",Qn=-1<f.stack.indexOf(`
    at`)?" (<anonymous>)":-1<f.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Wn+s+Qn}var It=!1;function fr(s,l){if(!s||It)return"";It=!0;var f=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var h={DetermineComponentFrameRoot:function(){try{if(l){var he=function(){throw Error()};if(Object.defineProperty(he.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(he,[])}catch(ae){var re=ae}Reflect.construct(s,[],he)}else{try{he.call()}catch(ae){re=ae}s.call(he.prototype)}}else{try{throw Error()}catch(ae){re=ae}(he=s())&&typeof he.catch=="function"&&he.catch(function(){})}}catch(ae){if(ae&&re&&typeof ae.stack=="string")return[ae.stack,re.stack]}return[null,null]}};h.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var y=Object.getOwnPropertyDescriptor(h.DetermineComponentFrameRoot,"name");y&&y.configurable&&Object.defineProperty(h.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var x=h.DetermineComponentFrameRoot(),T=x[0],B=x[1];if(T&&B){var X=T.split(`
`),ne=B.split(`
`);for(y=h=0;h<X.length&&!X[h].includes("DetermineComponentFrameRoot");)h++;for(;y<ne.length&&!ne[y].includes("DetermineComponentFrameRoot");)y++;if(h===X.length||y===ne.length)for(h=X.length-1,y=ne.length-1;1<=h&&0<=y&&X[h]!==ne[y];)y--;for(;1<=h&&0<=y;h--,y--)if(X[h]!==ne[y]){if(h!==1||y!==1)do if(h--,y--,0>y||X[h]!==ne[y]){var ce=`
`+X[h].replace(" at new "," at ");return s.displayName&&ce.includes("<anonymous>")&&(ce=ce.replace("<anonymous>",s.displayName)),ce}while(1<=h&&0<=y);break}}}finally{It=!1,Error.prepareStackTrace=f}return(f=s?s.displayName||s.name:"")?Jt(f):""}function _r(s,l){switch(s.tag){case 26:case 27:case 5:return Jt(s.type);case 16:return Jt("Lazy");case 13:return s.child!==l&&l!==null?Jt("Suspense Fallback"):Jt("Suspense");case 19:return Jt("SuspenseList");case 0:case 15:return fr(s.type,!1);case 11:return fr(s.type.render,!1);case 1:return fr(s.type,!0);case 31:return Jt("Activity");default:return""}}function Zn(s){try{var l="",f=null;do l+=_r(s,f),f=s,s=s.return;while(s);return l}catch(h){return`
Error generating stack: `+h.message+`
`+h.stack}}var kt=Object.prototype.hasOwnProperty,vt=n.unstable_scheduleCallback,Ln=n.unstable_cancelCallback,Bn=n.unstable_shouldYield,dr=n.unstable_requestPaint,zt=n.unstable_now,xr=n.unstable_getCurrentPriorityLevel,zr=n.unstable_ImmediatePriority,se=n.unstable_UserBlockingPriority,Ee=n.unstable_NormalPriority,ke=n.unstable_LowPriority,Ct=n.unstable_IdlePriority,de=n.log,Oe=n.unstable_setDisableYieldValue,De=null,Me=null;function nt(s){if(typeof de=="function"&&Oe(s),Me&&typeof Me.setStrictMode=="function")try{Me.setStrictMode(De,s)}catch{}}var ye=Math.clz32?Math.clz32:$t,Ue=Math.log,Fe=Math.LN2;function $t(s){return s>>>=0,s===0?32:31-(Ue(s)/Fe|0)|0}var Xt=256,Vn=262144,en=4194304;function Tr(s){var l=s&42;if(l!==0)return l;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return s&261888;case 262144:case 524288:case 1048576:case 2097152:return s&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function Wi(s,l,f){var h=s.pendingLanes;if(h===0)return 0;var y=0,x=s.suspendedLanes,T=s.pingedLanes;s=s.warmLanes;var B=h&134217727;return B!==0?(h=B&~x,h!==0?y=Tr(h):(T&=B,T!==0?y=Tr(T):f||(f=B&~s,f!==0&&(y=Tr(f))))):(B=h&~x,B!==0?y=Tr(B):T!==0?y=Tr(T):f||(f=h&~s,f!==0&&(y=Tr(f)))),y===0?0:l!==0&&l!==y&&(l&x)===0&&(x=y&-y,f=l&-l,x>=f||x===32&&(f&4194048)!==0)?l:y}function bi(s,l){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&l)===0}function Ip(s,l){switch(s){case 1:case 2:case 4:case 8:case 64:return l+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function nd(){var s=en;return en<<=1,(en&62914560)===0&&(en=4194304),s}function Qi(s){for(var l=[],f=0;31>f;f++)l.push(s);return l}function _o(s,l){s.pendingLanes|=l,l!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function Np(s,l,f,h,y,x){var T=s.pendingLanes;s.pendingLanes=f,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=f,s.entangledLanes&=f,s.errorRecoveryDisabledLanes&=f,s.shellSuspendCounter=0;var B=s.entanglements,X=s.expirationTimes,ne=s.hiddenUpdates;for(f=T&~f;0<f;){var ce=31-ye(f),he=1<<ce;B[ce]=0,X[ce]=-1;var re=ne[ce];if(re!==null)for(ne[ce]=null,ce=0;ce<re.length;ce++){var ae=re[ce];ae!==null&&(ae.lane&=-536870913)}f&=~he}h!==0&&xo(s,h,0),x!==0&&y===0&&s.tag!==0&&(s.suspendedLanes|=x&~(T&~l))}function xo(s,l,f){s.pendingLanes|=l,s.suspendedLanes&=~l;var h=31-ye(l);s.entangledLanes|=l,s.entanglements[h]=s.entanglements[h]|1073741824|f&261930}function Kc(s,l){var f=s.entangledLanes|=l;for(s=s.entanglements;f;){var h=31-ye(f),y=1<<h;y&l|s[h]&l&&(s[h]|=l),f&=~y}}function Wc(s,l){var f=l&-l;return f=(f&42)!==0?1:wo(f),(f&(s.suspendedLanes|l))!==0?0:f}function wo(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function Ra(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function rd(){var s=G.p;return s!==0?s:(s=window.event,s===void 0?32:bw(s.type))}function Si(s,l){var f=G.p;try{return G.p=s,l()}finally{G.p=f}}var Ci=Math.random().toString(36).slice(2),yn="__reactFiber$"+Ci,Fn="__reactProps$"+Ci,Zi="__reactContainer$"+Ci,ml="__reactEvents$"+Ci,Rp="__reactListeners$"+Ci,id="__reactHandles$"+Ci,ad="__reactResources$"+Ci,Ji="__reactMarker$"+Ci;function gl(s){delete s[yn],delete s[Fn],delete s[ml],delete s[Rp],delete s[id]}function ea(s){var l=s[yn];if(l)return l;for(var f=s.parentNode;f;){if(l=f[Zi]||f[yn]){if(f=l.alternate,l.child!==null||f!==null&&f.child!==null)for(s=lw(s);s!==null;){if(f=s[yn])return f;s=lw(s)}return l}s=f,f=s.parentNode}return null}function ri(s){if(s=s[yn]||s[Zi]){var l=s.tag;if(l===5||l===6||l===13||l===31||l===26||l===27||l===3)return s}return null}function Hr(s){var l=s.tag;if(l===5||l===26||l===27||l===6)return s.stateNode;throw Error(r(33))}function ta(s){var l=s[ad];return l||(l=s[ad]={hoistableStyles:new Map,hoistableScripts:new Map}),l}function _n(s){s[Ji]=!0}var Qc=new Set,Zc={};function na(s,l){ra(s,l),ra(s+"Capture",l)}function ra(s,l){for(Zc[s]=l,s=0;s<l.length;s++)Qc.add(l[s])}var Jc=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),eu={},tu={};function sd(s){return kt.call(tu,s)?!0:kt.call(eu,s)?!1:Jc.test(s)?tu[s]=!0:(eu[s]=!0,!1)}function vl(s,l,f){if(sd(l))if(f===null)s.removeAttribute(l);else{switch(typeof f){case"undefined":case"function":case"symbol":s.removeAttribute(l);return;case"boolean":var h=l.toLowerCase().slice(0,5);if(h!=="data-"&&h!=="aria-"){s.removeAttribute(l);return}}s.setAttribute(l,""+f)}}function Gr(s,l,f){if(f===null)s.removeAttribute(l);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(l);return}s.setAttribute(l,""+f)}}function xn(s,l,f,h){if(h===null)s.removeAttribute(f);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(f);return}s.setAttributeNS(l,f,""+h)}}function Un(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function ls(s){var l=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function nu(s,l,f){var h=Object.getOwnPropertyDescriptor(s.constructor.prototype,l);if(!s.hasOwnProperty(l)&&typeof h<"u"&&typeof h.get=="function"&&typeof h.set=="function"){var y=h.get,x=h.set;return Object.defineProperty(s,l,{configurable:!0,get:function(){return y.call(this)},set:function(T){f=""+T,x.call(this,T)}}),Object.defineProperty(s,l,{enumerable:h.enumerable}),{getValue:function(){return f},setValue:function(T){f=""+T},stopTracking:function(){s._valueTracker=null,delete s[l]}}}}function Nt(s){if(!s._valueTracker){var l=ls(s)?"checked":"value";s._valueTracker=nu(s,l,""+s[l])}}function Eo(s){if(!s)return!1;var l=s._valueTracker;if(!l)return!0;var f=l.getValue(),h="";return s&&(h=ls(s)?s.checked?"true":"false":s.value),s=h,s!==f?(l.setValue(s),!0):!1}function ia(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var Ao=/[\n"\\]/g;function Ir(s){return s.replace(Ao,function(l){return"\\"+l.charCodeAt(0).toString(16)+" "})}function yl(s,l,f,h,y,x,T,B){s.name="",T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?s.type=T:s.removeAttribute("type"),l!=null?T==="number"?(l===0&&s.value===""||s.value!=l)&&(s.value=""+Un(l)):s.value!==""+Un(l)&&(s.value=""+Un(l)):T!=="submit"&&T!=="reset"||s.removeAttribute("value"),l!=null?ru(s,T,Un(l)):f!=null?ru(s,T,Un(f)):h!=null&&s.removeAttribute("value"),y==null&&x!=null&&(s.defaultChecked=!!x),y!=null&&(s.checked=y&&typeof y!="function"&&typeof y!="symbol"),B!=null&&typeof B!="function"&&typeof B!="symbol"&&typeof B!="boolean"?s.name=""+Un(B):s.removeAttribute("name")}function od(s,l,f,h,y,x,T,B){if(x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"&&(s.type=x),l!=null||f!=null){if(!(x!=="submit"&&x!=="reset"||l!=null)){Nt(s);return}f=f!=null?""+Un(f):"",l=l!=null?""+Un(l):f,B||l===s.value||(s.value=l),s.defaultValue=l}h=h??y,h=typeof h!="function"&&typeof h!="symbol"&&!!h,s.checked=B?s.checked:!!h,s.defaultChecked=!!h,T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(s.name=T),Nt(s)}function ru(s,l,f){l==="number"&&ia(s.ownerDocument)===s||s.defaultValue===""+f||(s.defaultValue=""+f)}function cs(s,l,f,h){if(s=s.options,l){l={};for(var y=0;y<f.length;y++)l["$"+f[y]]=!0;for(f=0;f<s.length;f++)y=l.hasOwnProperty("$"+s[f].value),s[f].selected!==y&&(s[f].selected=y),y&&h&&(s[f].defaultSelected=!0)}else{for(f=""+Un(f),l=null,y=0;y<s.length;y++){if(s[y].value===f){s[y].selected=!0,h&&(s[y].defaultSelected=!0);return}l!==null||s[y].disabled||(l=s[y])}l!==null&&(l.selected=!0)}}function ld(s,l,f){if(l!=null&&(l=""+Un(l),l!==s.value&&(s.value=l),f==null)){s.defaultValue!==l&&(s.defaultValue=l);return}s.defaultValue=f!=null?""+Un(f):""}function us(s,l,f,h){if(l==null){if(h!=null){if(f!=null)throw Error(r(92));if(ge(h)){if(1<h.length)throw Error(r(93));h=h[0]}f=h}f==null&&(f=""),l=f}f=Un(l),s.defaultValue=f,h=s.textContent,h===f&&h!==""&&h!==null&&(s.value=h),Nt(s)}function Nr(s,l){if(l){var f=s.firstChild;if(f&&f===s.lastChild&&f.nodeType===3){f.nodeValue=l;return}}s.textContent=l}var cd=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function iu(s,l,f){var h=l.indexOf("--")===0;f==null||typeof f=="boolean"||f===""?h?s.setProperty(l,""):l==="float"?s.cssFloat="":s[l]="":h?s.setProperty(l,f):typeof f!="number"||f===0||cd.has(l)?l==="float"?s.cssFloat=f:s[l]=(""+f).trim():s[l]=f+"px"}function au(s,l,f){if(l!=null&&typeof l!="object")throw Error(r(62));if(s=s.style,f!=null){for(var h in f)!f.hasOwnProperty(h)||l!=null&&l.hasOwnProperty(h)||(h.indexOf("--")===0?s.setProperty(h,""):h==="float"?s.cssFloat="":s[h]="");for(var y in l)h=l[y],l.hasOwnProperty(y)&&f[y]!==h&&iu(s,y,h)}else for(var x in l)l.hasOwnProperty(x)&&iu(s,x,l[x])}function _l(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ud=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),fs=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function xl(s){return fs.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}function Ti(){}var su=null;function ii(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var ds=null,aa=null;function bo(s){var l=ri(s);if(l&&(s=l.stateNode)){var f=s[Fn]||null;e:switch(s=l.stateNode,l.type){case"input":if(yl(s,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name),l=f.name,f.type==="radio"&&l!=null){for(f=s;f.parentNode;)f=f.parentNode;for(f=f.querySelectorAll('input[name="'+Ir(""+l)+'"][type="radio"]'),l=0;l<f.length;l++){var h=f[l];if(h!==s&&h.form===s.form){var y=h[Fn]||null;if(!y)throw Error(r(90));yl(h,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name)}}for(l=0;l<f.length;l++)h=f[l],h.form===s.form&&Eo(h)}break e;case"textarea":ld(s,f.value,f.defaultValue);break e;case"select":l=f.value,l!=null&&cs(s,!!f.multiple,l,!1)}}}var wl=!1;function hs(s,l,f){if(wl)return s(l,f);wl=!0;try{var h=s(l);return h}finally{if(wl=!1,(ds!==null||aa!==null)&&(rh(),ds&&(l=ds,s=aa,aa=ds=null,bo(l),s)))for(l=0;l<s.length;l++)bo(s[l])}}function Ii(s,l){var f=s.stateNode;if(f===null)return null;var h=f[Fn]||null;if(h===null)return null;f=h[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(s=s.type,h=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!h;break e;default:s=!1}if(s)return null;if(f&&typeof f!="function")throw Error(r(231,l,typeof f));return f}var ai=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),So=!1;if(ai)try{var jt={};Object.defineProperty(jt,"passive",{get:function(){So=!0}}),window.addEventListener("test",jt,jt),window.removeEventListener("test",jt,jt)}catch{So=!1}var sa=null,ou=null,Co=null;function lu(){if(Co)return Co;var s,l=ou,f=l.length,h,y="value"in sa?sa.value:sa.textContent,x=y.length;for(s=0;s<f&&l[s]===y[s];s++);var T=f-s;for(h=1;h<=T&&l[f-h]===y[x-h];h++);return Co=y.slice(s,1<h?1-h:void 0)}function To(s){var l=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&l===13&&(s=13)):s=l,s===10&&(s=13),32<=s||s===13?s:0}function Oa(){return!0}function Ni(){return!1}function Jn(s){function l(f,h,y,x,T){this._reactName=f,this._targetInst=y,this.type=h,this.nativeEvent=x,this.target=T,this.currentTarget=null;for(var B in s)s.hasOwnProperty(B)&&(f=s[B],this[B]=f?f(x):x[B]);return this.isDefaultPrevented=(x.defaultPrevented!=null?x.defaultPrevented:x.returnValue===!1)?Oa:Ni,this.isPropagationStopped=Ni,this}return g(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var f=this.nativeEvent;f&&(f.preventDefault?f.preventDefault():typeof f.returnValue!="unknown"&&(f.returnValue=!1),this.isDefaultPrevented=Oa)},stopPropagation:function(){var f=this.nativeEvent;f&&(f.stopPropagation?f.stopPropagation():typeof f.cancelBubble!="unknown"&&(f.cancelBubble=!0),this.isPropagationStopped=Oa)},persist:function(){},isPersistent:Oa}),l}var Da={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},oa=Jn(Da),ps=g({},Da,{view:0,detail:0}),cu=Jn(ps),ms,El,la,Al=g({},ps,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:gs,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==la&&(la&&s.type==="mousemove"?(ms=s.screenX-la.screenX,El=s.screenY-la.screenY):El=ms=0,la=s),ms)},movementY:function(s){return"movementY"in s?s.movementY:El}}),uu=Jn(Al),Io=g({},Al,{dataTransfer:0}),fd=Jn(Io),dd=g({},ps,{relatedTarget:0}),No=Jn(dd),fu=g({},Da,{animationName:0,elapsedTime:0,pseudoElement:0}),hd=Jn(fu),bl=g({},Da,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),pd=Jn(bl),md=g({},Da,{data:0}),ca=Jn(md),gd={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},vd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},yd={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function _d(s){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(s):(s=yd[s])?!!l[s]:!1}function gs(){return _d}var wr=g({},ps,{key:function(s){if(s.key){var l=gd[s.key]||s.key;if(l!=="Unidentified")return l}return s.type==="keypress"?(s=To(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?vd[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:gs,charCode:function(s){return s.type==="keypress"?To(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?To(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),xd=Jn(wr),wd=g({},Al,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ma=Jn(wd),v=g({},ps,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:gs}),A=Jn(v),O=g({},Da,{propertyName:0,elapsedTime:0,pseudoElement:0}),F=Jn(O),Z=g({},Al,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),ie=Jn(Z),xe=g({},Da,{newState:0,oldState:0}),Qe=Jn(xe),dn=[9,13,27,32],Et=ai&&"CompositionEvent"in window,tn=null;ai&&"documentMode"in document&&(tn=document.documentMode);var si=ai&&"TextEvent"in window&&!tn,ua=ai&&(!Et||tn&&8<tn&&11>=tn),Ri=" ",Oi=!1;function Ro(s,l){switch(s){case"keyup":return dn.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Sl(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var Cl=!1;function gI(s,l){switch(s){case"compositionend":return Sl(l);case"keypress":return l.which!==32?null:(Oi=!0,Ri);case"textInput":return s=l.data,s===Ri&&Oi?null:s;default:return null}}function vI(s,l){if(Cl)return s==="compositionend"||!Et&&Ro(s,l)?(s=lu(),Co=ou=sa=null,Cl=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return ua&&l.locale!=="ko"?null:l.data;default:return null}}var yI={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function f2(s){var l=s&&s.nodeName&&s.nodeName.toLowerCase();return l==="input"?!!yI[s.type]:l==="textarea"}function d2(s,l,f,h){ds?aa?aa.push(h):aa=[h]:ds=h,l=uh(l,"onChange"),0<l.length&&(f=new oa("onChange","change",null,f,h),s.push({event:f,listeners:l}))}var du=null,hu=null;function _I(s){Yx(s,0)}function Ed(s){var l=Hr(s);if(Eo(l))return s}function h2(s,l){if(s==="change")return l}var p2=!1;if(ai){var Op;if(ai){var Dp="oninput"in document;if(!Dp){var m2=document.createElement("div");m2.setAttribute("oninput","return;"),Dp=typeof m2.oninput=="function"}Op=Dp}else Op=!1;p2=Op&&(!document.documentMode||9<document.documentMode)}function g2(){du&&(du.detachEvent("onpropertychange",v2),hu=du=null)}function v2(s){if(s.propertyName==="value"&&Ed(hu)){var l=[];d2(l,hu,s,ii(s)),hs(_I,l)}}function xI(s,l,f){s==="focusin"?(g2(),du=l,hu=f,du.attachEvent("onpropertychange",v2)):s==="focusout"&&g2()}function wI(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return Ed(hu)}function EI(s,l){if(s==="click")return Ed(l)}function AI(s,l){if(s==="input"||s==="change")return Ed(l)}function bI(s,l){return s===l&&(s!==0||1/s===1/l)||s!==s&&l!==l}var qr=typeof Object.is=="function"?Object.is:bI;function pu(s,l){if(qr(s,l))return!0;if(typeof s!="object"||s===null||typeof l!="object"||l===null)return!1;var f=Object.keys(s),h=Object.keys(l);if(f.length!==h.length)return!1;for(h=0;h<f.length;h++){var y=f[h];if(!kt.call(l,y)||!qr(s[y],l[y]))return!1}return!0}function y2(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function _2(s,l){var f=y2(s);s=0;for(var h;f;){if(f.nodeType===3){if(h=s+f.textContent.length,s<=l&&h>=l)return{node:f,offset:l-s};s=h}e:{for(;f;){if(f.nextSibling){f=f.nextSibling;break e}f=f.parentNode}f=void 0}f=y2(f)}}function x2(s,l){return s&&l?s===l?!0:s&&s.nodeType===3?!1:l&&l.nodeType===3?x2(s,l.parentNode):"contains"in s?s.contains(l):s.compareDocumentPosition?!!(s.compareDocumentPosition(l)&16):!1:!1}function w2(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var l=ia(s.document);l instanceof s.HTMLIFrameElement;){try{var f=typeof l.contentWindow.location.href=="string"}catch{f=!1}if(f)s=l.contentWindow;else break;l=ia(s.document)}return l}function Mp(s){var l=s&&s.nodeName&&s.nodeName.toLowerCase();return l&&(l==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||l==="textarea"||s.contentEditable==="true")}var SI=ai&&"documentMode"in document&&11>=document.documentMode,Tl=null,Pp=null,mu=null,kp=!1;function E2(s,l,f){var h=f.window===f?f.document:f.nodeType===9?f:f.ownerDocument;kp||Tl==null||Tl!==ia(h)||(h=Tl,"selectionStart"in h&&Mp(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),mu&&pu(mu,h)||(mu=h,h=uh(Pp,"onSelect"),0<h.length&&(l=new oa("onSelect","select",null,l,f),s.push({event:l,listeners:h}),l.target=Tl)))}function Oo(s,l){var f={};return f[s.toLowerCase()]=l.toLowerCase(),f["Webkit"+s]="webkit"+l,f["Moz"+s]="moz"+l,f}var Il={animationend:Oo("Animation","AnimationEnd"),animationiteration:Oo("Animation","AnimationIteration"),animationstart:Oo("Animation","AnimationStart"),transitionrun:Oo("Transition","TransitionRun"),transitionstart:Oo("Transition","TransitionStart"),transitioncancel:Oo("Transition","TransitionCancel"),transitionend:Oo("Transition","TransitionEnd")},jp={},A2={};ai&&(A2=document.createElement("div").style,"AnimationEvent"in window||(delete Il.animationend.animation,delete Il.animationiteration.animation,delete Il.animationstart.animation),"TransitionEvent"in window||delete Il.transitionend.transition);function Do(s){if(jp[s])return jp[s];if(!Il[s])return s;var l=Il[s],f;for(f in l)if(l.hasOwnProperty(f)&&f in A2)return jp[s]=l[f];return s}var b2=Do("animationend"),S2=Do("animationiteration"),C2=Do("animationstart"),CI=Do("transitionrun"),TI=Do("transitionstart"),II=Do("transitioncancel"),T2=Do("transitionend"),I2=new Map,Lp="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Lp.push("scrollEnd");function Di(s,l){I2.set(s,l),na(l,[s])}var Ad=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var l=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(l))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)},oi=[],Nl=0,Bp=0;function bd(){for(var s=Nl,l=Bp=Nl=0;l<s;){var f=oi[l];oi[l++]=null;var h=oi[l];oi[l++]=null;var y=oi[l];oi[l++]=null;var x=oi[l];if(oi[l++]=null,h!==null&&y!==null){var T=h.pending;T===null?y.next=y:(y.next=T.next,T.next=y),h.pending=y}x!==0&&N2(f,y,x)}}function Sd(s,l,f,h){oi[Nl++]=s,oi[Nl++]=l,oi[Nl++]=f,oi[Nl++]=h,Bp|=h,s.lanes|=h,s=s.alternate,s!==null&&(s.lanes|=h)}function Vp(s,l,f,h){return Sd(s,l,f,h),Cd(s)}function Mo(s,l){return Sd(s,null,null,l),Cd(s)}function N2(s,l,f){s.lanes|=f;var h=s.alternate;h!==null&&(h.lanes|=f);for(var y=!1,x=s.return;x!==null;)x.childLanes|=f,h=x.alternate,h!==null&&(h.childLanes|=f),x.tag===22&&(s=x.stateNode,s===null||s._visibility&1||(y=!0)),s=x,x=x.return;return s.tag===3?(x=s.stateNode,y&&l!==null&&(y=31-ye(f),s=x.hiddenUpdates,h=s[y],h===null?s[y]=[l]:h.push(l),l.lane=f|536870912),x):null}function Cd(s){if(50<Lu)throw Lu=0,Ym=null,Error(r(185));for(var l=s.return;l!==null;)s=l,l=s.return;return s.tag===3?s.stateNode:null}var Rl={};function NI(s,l,f,h){this.tag=s,this.key=f,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function $r(s,l,f,h){return new NI(s,l,f,h)}function Fp(s){return s=s.prototype,!(!s||!s.isReactComponent)}function Pa(s,l){var f=s.alternate;return f===null?(f=$r(s.tag,l,s.key,s.mode),f.elementType=s.elementType,f.type=s.type,f.stateNode=s.stateNode,f.alternate=s,s.alternate=f):(f.pendingProps=l,f.type=s.type,f.flags=0,f.subtreeFlags=0,f.deletions=null),f.flags=s.flags&65011712,f.childLanes=s.childLanes,f.lanes=s.lanes,f.child=s.child,f.memoizedProps=s.memoizedProps,f.memoizedState=s.memoizedState,f.updateQueue=s.updateQueue,l=s.dependencies,f.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},f.sibling=s.sibling,f.index=s.index,f.ref=s.ref,f.refCleanup=s.refCleanup,f}function R2(s,l){s.flags&=65011714;var f=s.alternate;return f===null?(s.childLanes=0,s.lanes=l,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=f.childLanes,s.lanes=f.lanes,s.child=f.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=f.memoizedProps,s.memoizedState=f.memoizedState,s.updateQueue=f.updateQueue,s.type=f.type,l=f.dependencies,s.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext}),s}function Td(s,l,f,h,y,x){var T=0;if(h=s,typeof s=="function")Fp(s)&&(T=1);else if(typeof s=="string")T=P4(s,f,we.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case N:return s=$r(31,f,l,y),s.elementType=N,s.lanes=x,s;case S:return Po(f.children,y,x,l);case D:T=8,y|=24;break;case C:return s=$r(12,f,l,y|2),s.elementType=C,s.lanes=x,s;case q:return s=$r(13,f,l,y),s.elementType=q,s.lanes=x,s;case $:return s=$r(19,f,l,y),s.elementType=$,s.lanes=x,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case V:T=10;break e;case k:T=9;break e;case U:T=11;break e;case M:T=14;break e;case b:T=16,h=null;break e}T=29,f=Error(r(130,s===null?"null":typeof s,"")),h=null}return l=$r(T,f,l,y),l.elementType=s,l.type=h,l.lanes=x,l}function Po(s,l,f,h){return s=$r(7,s,h,l),s.lanes=f,s}function Up(s,l,f){return s=$r(6,s,null,l),s.lanes=f,s}function O2(s){var l=$r(18,null,null,0);return l.stateNode=s,l}function zp(s,l,f){return l=$r(4,s.children!==null?s.children:[],s.key,l),l.lanes=f,l.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},l}var D2=new WeakMap;function li(s,l){if(typeof s=="object"&&s!==null){var f=D2.get(s);return f!==void 0?f:(l={value:s,source:l,stack:Zn(l)},D2.set(s,l),l)}return{value:s,source:l,stack:Zn(l)}}var Ol=[],Dl=0,Id=null,gu=0,ci=[],ui=0,vs=null,fa=1,da="";function ka(s,l){Ol[Dl++]=gu,Ol[Dl++]=Id,Id=s,gu=l}function M2(s,l,f){ci[ui++]=fa,ci[ui++]=da,ci[ui++]=vs,vs=s;var h=fa;s=da;var y=32-ye(h)-1;h&=~(1<<y),f+=1;var x=32-ye(l)+y;if(30<x){var T=y-y%5;x=(h&(1<<T)-1).toString(32),h>>=T,y-=T,fa=1<<32-ye(l)+y|f<<y|h,da=x+s}else fa=1<<x|f<<y|h,da=s}function Hp(s){s.return!==null&&(ka(s,1),M2(s,1,0))}function Gp(s){for(;s===Id;)Id=Ol[--Dl],Ol[Dl]=null,gu=Ol[--Dl],Ol[Dl]=null;for(;s===vs;)vs=ci[--ui],ci[ui]=null,da=ci[--ui],ci[ui]=null,fa=ci[--ui],ci[ui]=null}function P2(s,l){ci[ui++]=fa,ci[ui++]=da,ci[ui++]=vs,fa=l.id,da=l.overflow,vs=s}var er=null,Yt=null,dt=!1,ys=null,fi=!1,qp=Error(r(519));function _s(s){var l=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw vu(li(l,s)),qp}function k2(s){var l=s.stateNode,f=s.type,h=s.memoizedProps;switch(l[yn]=s,l[Fn]=h,f){case"dialog":st("cancel",l),st("close",l);break;case"iframe":case"object":case"embed":st("load",l);break;case"video":case"audio":for(f=0;f<Vu.length;f++)st(Vu[f],l);break;case"source":st("error",l);break;case"img":case"image":case"link":st("error",l),st("load",l);break;case"details":st("toggle",l);break;case"input":st("invalid",l),od(l,h.value,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name,!0);break;case"select":st("invalid",l);break;case"textarea":st("invalid",l),us(l,h.value,h.defaultValue,h.children)}f=h.children,typeof f!="string"&&typeof f!="number"&&typeof f!="bigint"||l.textContent===""+f||h.suppressHydrationWarning===!0||Zx(l.textContent,f)?(h.popover!=null&&(st("beforetoggle",l),st("toggle",l)),h.onScroll!=null&&st("scroll",l),h.onScrollEnd!=null&&st("scrollend",l),h.onClick!=null&&(l.onclick=Ti),l=!0):l=!1,l||_s(s,!0)}function j2(s){for(er=s.return;er;)switch(er.tag){case 5:case 31:case 13:fi=!1;return;case 27:case 3:fi=!0;return;default:er=er.return}}function Ml(s){if(s!==er)return!1;if(!dt)return j2(s),dt=!0,!1;var l=s.tag,f;if((f=l!==3&&l!==27)&&((f=l===5)&&(f=s.type,f=!(f!=="form"&&f!=="button")||c1(s.type,s.memoizedProps)),f=!f),f&&Yt&&_s(s),j2(s),l===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(317));Yt=ow(s)}else if(l===31){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(317));Yt=ow(s)}else l===27?(l=Yt,Ms(s.type)?(s=p1,p1=null,Yt=s):Yt=l):Yt=er?hi(s.stateNode.nextSibling):null;return!0}function ko(){Yt=er=null,dt=!1}function $p(){var s=ys;return s!==null&&(Mr===null?Mr=s:Mr.push.apply(Mr,s),ys=null),s}function vu(s){ys===null?ys=[s]:ys.push(s)}var Xp=Y(null),jo=null,ja=null;function xs(s,l,f){me(Xp,l._currentValue),l._currentValue=f}function La(s){s._currentValue=Xp.current,te(Xp)}function Yp(s,l,f){for(;s!==null;){var h=s.alternate;if((s.childLanes&l)!==l?(s.childLanes|=l,h!==null&&(h.childLanes|=l)):h!==null&&(h.childLanes&l)!==l&&(h.childLanes|=l),s===f)break;s=s.return}}function Kp(s,l,f,h){var y=s.child;for(y!==null&&(y.return=s);y!==null;){var x=y.dependencies;if(x!==null){var T=y.child;x=x.firstContext;e:for(;x!==null;){var B=x;x=y;for(var X=0;X<l.length;X++)if(B.context===l[X]){x.lanes|=f,B=x.alternate,B!==null&&(B.lanes|=f),Yp(x.return,f,s),h||(T=null);break e}x=B.next}}else if(y.tag===18){if(T=y.return,T===null)throw Error(r(341));T.lanes|=f,x=T.alternate,x!==null&&(x.lanes|=f),Yp(T,f,s),T=null}else T=y.child;if(T!==null)T.return=y;else for(T=y;T!==null;){if(T===s){T=null;break}if(y=T.sibling,y!==null){y.return=T.return,T=y;break}T=T.return}y=T}}function Pl(s,l,f,h){s=null;for(var y=l,x=!1;y!==null;){if(!x){if((y.flags&524288)!==0)x=!0;else if((y.flags&262144)!==0)break}if(y.tag===10){var T=y.alternate;if(T===null)throw Error(r(387));if(T=T.memoizedProps,T!==null){var B=y.type;qr(y.pendingProps.value,T.value)||(s!==null?s.push(B):s=[B])}}else if(y===Se.current){if(T=y.alternate,T===null)throw Error(r(387));T.memoizedState.memoizedState!==y.memoizedState.memoizedState&&(s!==null?s.push(Gu):s=[Gu])}y=y.return}s!==null&&Kp(l,s,f,h),l.flags|=262144}function Nd(s){for(s=s.firstContext;s!==null;){if(!qr(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function Lo(s){jo=s,ja=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function tr(s){return L2(jo,s)}function Rd(s,l){return jo===null&&Lo(s),L2(s,l)}function L2(s,l){var f=l._currentValue;if(l={context:l,memoizedValue:f,next:null},ja===null){if(s===null)throw Error(r(308));ja=l,s.dependencies={lanes:0,firstContext:l},s.flags|=524288}else ja=ja.next=l;return f}var RI=typeof AbortController<"u"?AbortController:function(){var s=[],l=this.signal={aborted:!1,addEventListener:function(f,h){s.push(h)}};this.abort=function(){l.aborted=!0,s.forEach(function(f){return f()})}},OI=n.unstable_scheduleCallback,DI=n.unstable_NormalPriority,wn={$$typeof:V,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Wp(){return{controller:new RI,data:new Map,refCount:0}}function yu(s){s.refCount--,s.refCount===0&&OI(DI,function(){s.controller.abort()})}var _u=null,Qp=0,kl=0,jl=null;function MI(s,l){if(_u===null){var f=_u=[];Qp=0,kl=e1(),jl={status:"pending",value:void 0,then:function(h){f.push(h)}}}return Qp++,l.then(B2,B2),l}function B2(){if(--Qp===0&&_u!==null){jl!==null&&(jl.status="fulfilled");var s=_u;_u=null,kl=0,jl=null;for(var l=0;l<s.length;l++)(0,s[l])()}}function PI(s,l){var f=[],h={status:"pending",value:null,reason:null,then:function(y){f.push(y)}};return s.then(function(){h.status="fulfilled",h.value=l;for(var y=0;y<f.length;y++)(0,f[y])(l)},function(y){for(h.status="rejected",h.reason=y,y=0;y<f.length;y++)(0,f[y])(void 0)}),h}var V2=H.S;H.S=function(s,l){Ex=zt(),typeof l=="object"&&l!==null&&typeof l.then=="function"&&MI(s,l),V2!==null&&V2(s,l)};var Bo=Y(null);function Zp(){var s=Bo.current;return s!==null?s:Ht.pooledCache}function Od(s,l){l===null?me(Bo,Bo.current):me(Bo,l.pool)}function F2(){var s=Zp();return s===null?null:{parent:wn._currentValue,pool:s}}var Ll=Error(r(460)),Jp=Error(r(474)),Dd=Error(r(542)),Md={then:function(){}};function U2(s){return s=s.status,s==="fulfilled"||s==="rejected"}function z2(s,l,f){switch(f=s[f],f===void 0?s.push(l):f!==l&&(l.then(Ti,Ti),l=f),l.status){case"fulfilled":return l.value;case"rejected":throw s=l.reason,G2(s),s;default:if(typeof l.status=="string")l.then(Ti,Ti);else{if(s=Ht,s!==null&&100<s.shellSuspendCounter)throw Error(r(482));s=l,s.status="pending",s.then(function(h){if(l.status==="pending"){var y=l;y.status="fulfilled",y.value=h}},function(h){if(l.status==="pending"){var y=l;y.status="rejected",y.reason=h}})}switch(l.status){case"fulfilled":return l.value;case"rejected":throw s=l.reason,G2(s),s}throw Fo=l,Ll}}function Vo(s){try{var l=s._init;return l(s._payload)}catch(f){throw f!==null&&typeof f=="object"&&typeof f.then=="function"?(Fo=f,Ll):f}}var Fo=null;function H2(){if(Fo===null)throw Error(r(459));var s=Fo;return Fo=null,s}function G2(s){if(s===Ll||s===Dd)throw Error(r(483))}var Bl=null,xu=0;function Pd(s){var l=xu;return xu+=1,Bl===null&&(Bl=[]),z2(Bl,s,l)}function wu(s,l){l=l.props.ref,s.ref=l!==void 0?l:null}function kd(s,l){throw l.$$typeof===_?Error(r(525)):(s=Object.prototype.toString.call(l),Error(r(31,s==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":s)))}function q2(s){function l(Q,K){if(s){var ee=Q.deletions;ee===null?(Q.deletions=[K],Q.flags|=16):ee.push(K)}}function f(Q,K){if(!s)return null;for(;K!==null;)l(Q,K),K=K.sibling;return null}function h(Q){for(var K=new Map;Q!==null;)Q.key!==null?K.set(Q.key,Q):K.set(Q.index,Q),Q=Q.sibling;return K}function y(Q,K){return Q=Pa(Q,K),Q.index=0,Q.sibling=null,Q}function x(Q,K,ee){return Q.index=ee,s?(ee=Q.alternate,ee!==null?(ee=ee.index,ee<K?(Q.flags|=67108866,K):ee):(Q.flags|=67108866,K)):(Q.flags|=1048576,K)}function T(Q){return s&&Q.alternate===null&&(Q.flags|=67108866),Q}function B(Q,K,ee,fe){return K===null||K.tag!==6?(K=Up(ee,Q.mode,fe),K.return=Q,K):(K=y(K,ee),K.return=Q,K)}function X(Q,K,ee,fe){var je=ee.type;return je===S?ce(Q,K,ee.props.children,fe,ee.key):K!==null&&(K.elementType===je||typeof je=="object"&&je!==null&&je.$$typeof===b&&Vo(je)===K.type)?(K=y(K,ee.props),wu(K,ee),K.return=Q,K):(K=Td(ee.type,ee.key,ee.props,null,Q.mode,fe),wu(K,ee),K.return=Q,K)}function ne(Q,K,ee,fe){return K===null||K.tag!==4||K.stateNode.containerInfo!==ee.containerInfo||K.stateNode.implementation!==ee.implementation?(K=zp(ee,Q.mode,fe),K.return=Q,K):(K=y(K,ee.children||[]),K.return=Q,K)}function ce(Q,K,ee,fe,je){return K===null||K.tag!==7?(K=Po(ee,Q.mode,fe,je),K.return=Q,K):(K=y(K,ee),K.return=Q,K)}function he(Q,K,ee){if(typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint")return K=Up(""+K,Q.mode,ee),K.return=Q,K;if(typeof K=="object"&&K!==null){switch(K.$$typeof){case w:return ee=Td(K.type,K.key,K.props,null,Q.mode,ee),wu(ee,K),ee.return=Q,ee;case E:return K=zp(K,Q.mode,ee),K.return=Q,K;case b:return K=Vo(K),he(Q,K,ee)}if(ge(K)||L(K))return K=Po(K,Q.mode,ee,null),K.return=Q,K;if(typeof K.then=="function")return he(Q,Pd(K),ee);if(K.$$typeof===V)return he(Q,Rd(Q,K),ee);kd(Q,K)}return null}function re(Q,K,ee,fe){var je=K!==null?K.key:null;if(typeof ee=="string"&&ee!==""||typeof ee=="number"||typeof ee=="bigint")return je!==null?null:B(Q,K,""+ee,fe);if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case w:return ee.key===je?X(Q,K,ee,fe):null;case E:return ee.key===je?ne(Q,K,ee,fe):null;case b:return ee=Vo(ee),re(Q,K,ee,fe)}if(ge(ee)||L(ee))return je!==null?null:ce(Q,K,ee,fe,null);if(typeof ee.then=="function")return re(Q,K,Pd(ee),fe);if(ee.$$typeof===V)return re(Q,K,Rd(Q,ee),fe);kd(Q,ee)}return null}function ae(Q,K,ee,fe,je){if(typeof fe=="string"&&fe!==""||typeof fe=="number"||typeof fe=="bigint")return Q=Q.get(ee)||null,B(K,Q,""+fe,je);if(typeof fe=="object"&&fe!==null){switch(fe.$$typeof){case w:return Q=Q.get(fe.key===null?ee:fe.key)||null,X(K,Q,fe,je);case E:return Q=Q.get(fe.key===null?ee:fe.key)||null,ne(K,Q,fe,je);case b:return fe=Vo(fe),ae(Q,K,ee,fe,je)}if(ge(fe)||L(fe))return Q=Q.get(ee)||null,ce(K,Q,fe,je,null);if(typeof fe.then=="function")return ae(Q,K,ee,Pd(fe),je);if(fe.$$typeof===V)return ae(Q,K,ee,Rd(K,fe),je);kd(K,fe)}return null}function Ie(Q,K,ee,fe){for(var je=null,yt=null,Re=K,Je=K=0,lt=null;Re!==null&&Je<ee.length;Je++){Re.index>Je?(lt=Re,Re=null):lt=Re.sibling;var _t=re(Q,Re,ee[Je],fe);if(_t===null){Re===null&&(Re=lt);break}s&&Re&&_t.alternate===null&&l(Q,Re),K=x(_t,K,Je),yt===null?je=_t:yt.sibling=_t,yt=_t,Re=lt}if(Je===ee.length)return f(Q,Re),dt&&ka(Q,Je),je;if(Re===null){for(;Je<ee.length;Je++)Re=he(Q,ee[Je],fe),Re!==null&&(K=x(Re,K,Je),yt===null?je=Re:yt.sibling=Re,yt=Re);return dt&&ka(Q,Je),je}for(Re=h(Re);Je<ee.length;Je++)lt=ae(Re,Q,Je,ee[Je],fe),lt!==null&&(s&&lt.alternate!==null&&Re.delete(lt.key===null?Je:lt.key),K=x(lt,K,Je),yt===null?je=lt:yt.sibling=lt,yt=lt);return s&&Re.forEach(function(Bs){return l(Q,Bs)}),dt&&ka(Q,Je),je}function ze(Q,K,ee,fe){if(ee==null)throw Error(r(151));for(var je=null,yt=null,Re=K,Je=K=0,lt=null,_t=ee.next();Re!==null&&!_t.done;Je++,_t=ee.next()){Re.index>Je?(lt=Re,Re=null):lt=Re.sibling;var Bs=re(Q,Re,_t.value,fe);if(Bs===null){Re===null&&(Re=lt);break}s&&Re&&Bs.alternate===null&&l(Q,Re),K=x(Bs,K,Je),yt===null?je=Bs:yt.sibling=Bs,yt=Bs,Re=lt}if(_t.done)return f(Q,Re),dt&&ka(Q,Je),je;if(Re===null){for(;!_t.done;Je++,_t=ee.next())_t=he(Q,_t.value,fe),_t!==null&&(K=x(_t,K,Je),yt===null?je=_t:yt.sibling=_t,yt=_t);return dt&&ka(Q,Je),je}for(Re=h(Re);!_t.done;Je++,_t=ee.next())_t=ae(Re,Q,Je,_t.value,fe),_t!==null&&(s&&_t.alternate!==null&&Re.delete(_t.key===null?Je:_t.key),K=x(_t,K,Je),yt===null?je=_t:yt.sibling=_t,yt=_t);return s&&Re.forEach(function(q4){return l(Q,q4)}),dt&&ka(Q,Je),je}function Vt(Q,K,ee,fe){if(typeof ee=="object"&&ee!==null&&ee.type===S&&ee.key===null&&(ee=ee.props.children),typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case w:e:{for(var je=ee.key;K!==null;){if(K.key===je){if(je=ee.type,je===S){if(K.tag===7){f(Q,K.sibling),fe=y(K,ee.props.children),fe.return=Q,Q=fe;break e}}else if(K.elementType===je||typeof je=="object"&&je!==null&&je.$$typeof===b&&Vo(je)===K.type){f(Q,K.sibling),fe=y(K,ee.props),wu(fe,ee),fe.return=Q,Q=fe;break e}f(Q,K);break}else l(Q,K);K=K.sibling}ee.type===S?(fe=Po(ee.props.children,Q.mode,fe,ee.key),fe.return=Q,Q=fe):(fe=Td(ee.type,ee.key,ee.props,null,Q.mode,fe),wu(fe,ee),fe.return=Q,Q=fe)}return T(Q);case E:e:{for(je=ee.key;K!==null;){if(K.key===je)if(K.tag===4&&K.stateNode.containerInfo===ee.containerInfo&&K.stateNode.implementation===ee.implementation){f(Q,K.sibling),fe=y(K,ee.children||[]),fe.return=Q,Q=fe;break e}else{f(Q,K);break}else l(Q,K);K=K.sibling}fe=zp(ee,Q.mode,fe),fe.return=Q,Q=fe}return T(Q);case b:return ee=Vo(ee),Vt(Q,K,ee,fe)}if(ge(ee))return Ie(Q,K,ee,fe);if(L(ee)){if(je=L(ee),typeof je!="function")throw Error(r(150));return ee=je.call(ee),ze(Q,K,ee,fe)}if(typeof ee.then=="function")return Vt(Q,K,Pd(ee),fe);if(ee.$$typeof===V)return Vt(Q,K,Rd(Q,ee),fe);kd(Q,ee)}return typeof ee=="string"&&ee!==""||typeof ee=="number"||typeof ee=="bigint"?(ee=""+ee,K!==null&&K.tag===6?(f(Q,K.sibling),fe=y(K,ee),fe.return=Q,Q=fe):(f(Q,K),fe=Up(ee,Q.mode,fe),fe.return=Q,Q=fe),T(Q)):f(Q,K)}return function(Q,K,ee,fe){try{xu=0;var je=Vt(Q,K,ee,fe);return Bl=null,je}catch(Re){if(Re===Ll||Re===Dd)throw Re;var yt=$r(29,Re,null,Q.mode);return yt.lanes=fe,yt.return=Q,yt}finally{}}}var Uo=q2(!0),$2=q2(!1),ws=!1;function em(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function tm(s,l){s=s.updateQueue,l.updateQueue===s&&(l.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function Es(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function As(s,l,f){var h=s.updateQueue;if(h===null)return null;if(h=h.shared,(At&2)!==0){var y=h.pending;return y===null?l.next=l:(l.next=y.next,y.next=l),h.pending=l,l=Cd(s),N2(s,null,f),l}return Sd(s,h,l,f),Cd(s)}function Eu(s,l,f){if(l=l.updateQueue,l!==null&&(l=l.shared,(f&4194048)!==0)){var h=l.lanes;h&=s.pendingLanes,f|=h,l.lanes=f,Kc(s,f)}}function nm(s,l){var f=s.updateQueue,h=s.alternate;if(h!==null&&(h=h.updateQueue,f===h)){var y=null,x=null;if(f=f.firstBaseUpdate,f!==null){do{var T={lane:f.lane,tag:f.tag,payload:f.payload,callback:null,next:null};x===null?y=x=T:x=x.next=T,f=f.next}while(f!==null);x===null?y=x=l:x=x.next=l}else y=x=l;f={baseState:h.baseState,firstBaseUpdate:y,lastBaseUpdate:x,shared:h.shared,callbacks:h.callbacks},s.updateQueue=f;return}s=f.lastBaseUpdate,s===null?f.firstBaseUpdate=l:s.next=l,f.lastBaseUpdate=l}var rm=!1;function Au(){if(rm){var s=jl;if(s!==null)throw s}}function bu(s,l,f,h){rm=!1;var y=s.updateQueue;ws=!1;var x=y.firstBaseUpdate,T=y.lastBaseUpdate,B=y.shared.pending;if(B!==null){y.shared.pending=null;var X=B,ne=X.next;X.next=null,T===null?x=ne:T.next=ne,T=X;var ce=s.alternate;ce!==null&&(ce=ce.updateQueue,B=ce.lastBaseUpdate,B!==T&&(B===null?ce.firstBaseUpdate=ne:B.next=ne,ce.lastBaseUpdate=X))}if(x!==null){var he=y.baseState;T=0,ce=ne=X=null,B=x;do{var re=B.lane&-536870913,ae=re!==B.lane;if(ae?(ot&re)===re:(h&re)===re){re!==0&&re===kl&&(rm=!0),ce!==null&&(ce=ce.next={lane:0,tag:B.tag,payload:B.payload,callback:null,next:null});e:{var Ie=s,ze=B;re=l;var Vt=f;switch(ze.tag){case 1:if(Ie=ze.payload,typeof Ie=="function"){he=Ie.call(Vt,he,re);break e}he=Ie;break e;case 3:Ie.flags=Ie.flags&-65537|128;case 0:if(Ie=ze.payload,re=typeof Ie=="function"?Ie.call(Vt,he,re):Ie,re==null)break e;he=g({},he,re);break e;case 2:ws=!0}}re=B.callback,re!==null&&(s.flags|=64,ae&&(s.flags|=8192),ae=y.callbacks,ae===null?y.callbacks=[re]:ae.push(re))}else ae={lane:re,tag:B.tag,payload:B.payload,callback:B.callback,next:null},ce===null?(ne=ce=ae,X=he):ce=ce.next=ae,T|=re;if(B=B.next,B===null){if(B=y.shared.pending,B===null)break;ae=B,B=ae.next,ae.next=null,y.lastBaseUpdate=ae,y.shared.pending=null}}while(!0);ce===null&&(X=he),y.baseState=X,y.firstBaseUpdate=ne,y.lastBaseUpdate=ce,x===null&&(y.shared.lanes=0),Is|=T,s.lanes=T,s.memoizedState=he}}function X2(s,l){if(typeof s!="function")throw Error(r(191,s));s.call(l)}function Y2(s,l){var f=s.callbacks;if(f!==null)for(s.callbacks=null,s=0;s<f.length;s++)X2(f[s],l)}var Vl=Y(null),jd=Y(0);function K2(s,l){s=$a,me(jd,s),me(Vl,l),$a=s|l.baseLanes}function im(){me(jd,$a),me(Vl,Vl.current)}function am(){$a=jd.current,te(Vl),te(jd)}var Xr=Y(null),di=null;function bs(s){var l=s.alternate;me(hn,hn.current&1),me(Xr,s),di===null&&(l===null||Vl.current!==null||l.memoizedState!==null)&&(di=s)}function sm(s){me(hn,hn.current),me(Xr,s),di===null&&(di=s)}function W2(s){s.tag===22?(me(hn,hn.current),me(Xr,s),di===null&&(di=s)):Ss()}function Ss(){me(hn,hn.current),me(Xr,Xr.current)}function Yr(s){te(Xr),di===s&&(di=null),te(hn)}var hn=Y(0);function Ld(s){for(var l=s;l!==null;){if(l.tag===13){var f=l.memoizedState;if(f!==null&&(f=f.dehydrated,f===null||d1(f)||h1(f)))return l}else if(l.tag===19&&(l.memoizedProps.revealOrder==="forwards"||l.memoizedProps.revealOrder==="backwards"||l.memoizedProps.revealOrder==="unstable_legacy-backwards"||l.memoizedProps.revealOrder==="together")){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===s)break;for(;l.sibling===null;){if(l.return===null||l.return===s)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}var Ba=0,Ze=null,Lt=null,En=null,Bd=!1,Fl=!1,zo=!1,Vd=0,Su=0,Ul=null,kI=0;function cn(){throw Error(r(321))}function om(s,l){if(l===null)return!1;for(var f=0;f<l.length&&f<s.length;f++)if(!qr(s[f],l[f]))return!1;return!0}function lm(s,l,f,h,y,x){return Ba=x,Ze=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,H.H=s===null||s.memoizedState===null?M_:Am,zo=!1,x=f(h,y),zo=!1,Fl&&(x=Z2(l,f,h,y)),Q2(s),x}function Q2(s){H.H=Iu;var l=Lt!==null&&Lt.next!==null;if(Ba=0,En=Lt=Ze=null,Bd=!1,Su=0,Ul=null,l)throw Error(r(300));s===null||An||(s=s.dependencies,s!==null&&Nd(s)&&(An=!0))}function Z2(s,l,f,h){Ze=s;var y=0;do{if(Fl&&(Ul=null),Su=0,Fl=!1,25<=y)throw Error(r(301));if(y+=1,En=Lt=null,s.updateQueue!=null){var x=s.updateQueue;x.lastEffect=null,x.events=null,x.stores=null,x.memoCache!=null&&(x.memoCache.index=0)}H.H=P_,x=l(f,h)}while(Fl);return x}function jI(){var s=H.H,l=s.useState()[0];return l=typeof l.then=="function"?Cu(l):l,s=s.useState()[0],(Lt!==null?Lt.memoizedState:null)!==s&&(Ze.flags|=1024),l}function cm(){var s=Vd!==0;return Vd=0,s}function um(s,l,f){l.updateQueue=s.updateQueue,l.flags&=-2053,s.lanes&=~f}function fm(s){if(Bd){for(s=s.memoizedState;s!==null;){var l=s.queue;l!==null&&(l.pending=null),s=s.next}Bd=!1}Ba=0,En=Lt=Ze=null,Fl=!1,Su=Vd=0,Ul=null}function Er(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return En===null?Ze.memoizedState=En=s:En=En.next=s,En}function pn(){if(Lt===null){var s=Ze.alternate;s=s!==null?s.memoizedState:null}else s=Lt.next;var l=En===null?Ze.memoizedState:En.next;if(l!==null)En=l,Lt=s;else{if(s===null)throw Ze.alternate===null?Error(r(467)):Error(r(310));Lt=s,s={memoizedState:Lt.memoizedState,baseState:Lt.baseState,baseQueue:Lt.baseQueue,queue:Lt.queue,next:null},En===null?Ze.memoizedState=En=s:En=En.next=s}return En}function Fd(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Cu(s){var l=Su;return Su+=1,Ul===null&&(Ul=[]),s=z2(Ul,s,l),l=Ze,(En===null?l.memoizedState:En.next)===null&&(l=l.alternate,H.H=l===null||l.memoizedState===null?M_:Am),s}function Ud(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return Cu(s);if(s.$$typeof===V)return tr(s)}throw Error(r(438,String(s)))}function dm(s){var l=null,f=Ze.updateQueue;if(f!==null&&(l=f.memoCache),l==null){var h=Ze.alternate;h!==null&&(h=h.updateQueue,h!==null&&(h=h.memoCache,h!=null&&(l={data:h.data.map(function(y){return y.slice()}),index:0})))}if(l==null&&(l={data:[],index:0}),f===null&&(f=Fd(),Ze.updateQueue=f),f.memoCache=l,f=l.data[l.index],f===void 0)for(f=l.data[l.index]=Array(s),h=0;h<s;h++)f[h]=I;return l.index++,f}function Va(s,l){return typeof l=="function"?l(s):l}function zd(s){var l=pn();return hm(l,Lt,s)}function hm(s,l,f){var h=s.queue;if(h===null)throw Error(r(311));h.lastRenderedReducer=f;var y=s.baseQueue,x=h.pending;if(x!==null){if(y!==null){var T=y.next;y.next=x.next,x.next=T}l.baseQueue=y=x,h.pending=null}if(x=s.baseState,y===null)s.memoizedState=x;else{l=y.next;var B=T=null,X=null,ne=l,ce=!1;do{var he=ne.lane&-536870913;if(he!==ne.lane?(ot&he)===he:(Ba&he)===he){var re=ne.revertLane;if(re===0)X!==null&&(X=X.next={lane:0,revertLane:0,gesture:null,action:ne.action,hasEagerState:ne.hasEagerState,eagerState:ne.eagerState,next:null}),he===kl&&(ce=!0);else if((Ba&re)===re){ne=ne.next,re===kl&&(ce=!0);continue}else he={lane:0,revertLane:ne.revertLane,gesture:null,action:ne.action,hasEagerState:ne.hasEagerState,eagerState:ne.eagerState,next:null},X===null?(B=X=he,T=x):X=X.next=he,Ze.lanes|=re,Is|=re;he=ne.action,zo&&f(x,he),x=ne.hasEagerState?ne.eagerState:f(x,he)}else re={lane:he,revertLane:ne.revertLane,gesture:ne.gesture,action:ne.action,hasEagerState:ne.hasEagerState,eagerState:ne.eagerState,next:null},X===null?(B=X=re,T=x):X=X.next=re,Ze.lanes|=he,Is|=he;ne=ne.next}while(ne!==null&&ne!==l);if(X===null?T=x:X.next=B,!qr(x,s.memoizedState)&&(An=!0,ce&&(f=jl,f!==null)))throw f;s.memoizedState=x,s.baseState=T,s.baseQueue=X,h.lastRenderedState=x}return y===null&&(h.lanes=0),[s.memoizedState,h.dispatch]}function pm(s){var l=pn(),f=l.queue;if(f===null)throw Error(r(311));f.lastRenderedReducer=s;var h=f.dispatch,y=f.pending,x=l.memoizedState;if(y!==null){f.pending=null;var T=y=y.next;do x=s(x,T.action),T=T.next;while(T!==y);qr(x,l.memoizedState)||(An=!0),l.memoizedState=x,l.baseQueue===null&&(l.baseState=x),f.lastRenderedState=x}return[x,h]}function J2(s,l,f){var h=Ze,y=pn(),x=dt;if(x){if(f===void 0)throw Error(r(407));f=f()}else f=l();var T=!qr((Lt||y).memoizedState,f);if(T&&(y.memoizedState=f,An=!0),y=y.queue,vm(n_.bind(null,h,y,s),[s]),y.getSnapshot!==l||T||En!==null&&En.memoizedState.tag&1){if(h.flags|=2048,zl(9,{destroy:void 0},t_.bind(null,h,y,f,l),null),Ht===null)throw Error(r(349));x||(Ba&127)!==0||e_(h,l,f)}return f}function e_(s,l,f){s.flags|=16384,s={getSnapshot:l,value:f},l=Ze.updateQueue,l===null?(l=Fd(),Ze.updateQueue=l,l.stores=[s]):(f=l.stores,f===null?l.stores=[s]:f.push(s))}function t_(s,l,f,h){l.value=f,l.getSnapshot=h,r_(l)&&i_(s)}function n_(s,l,f){return f(function(){r_(l)&&i_(s)})}function r_(s){var l=s.getSnapshot;s=s.value;try{var f=l();return!qr(s,f)}catch{return!0}}function i_(s){var l=Mo(s,2);l!==null&&Pr(l,s,2)}function mm(s){var l=Er();if(typeof s=="function"){var f=s;if(s=f(),zo){nt(!0);try{f()}finally{nt(!1)}}}return l.memoizedState=l.baseState=s,l.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Va,lastRenderedState:s},l}function a_(s,l,f,h){return s.baseState=f,hm(s,Lt,typeof h=="function"?h:Va)}function LI(s,l,f,h,y){if(qd(s))throw Error(r(485));if(s=l.action,s!==null){var x={payload:y,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(T){x.listeners.push(T)}};H.T!==null?f(!0):x.isTransition=!1,h(x),f=l.pending,f===null?(x.next=l.pending=x,s_(l,x)):(x.next=f.next,l.pending=f.next=x)}}function s_(s,l){var f=l.action,h=l.payload,y=s.state;if(l.isTransition){var x=H.T,T={};H.T=T;try{var B=f(y,h),X=H.S;X!==null&&X(T,B),o_(s,l,B)}catch(ne){gm(s,l,ne)}finally{x!==null&&T.types!==null&&(x.types=T.types),H.T=x}}else try{x=f(y,h),o_(s,l,x)}catch(ne){gm(s,l,ne)}}function o_(s,l,f){f!==null&&typeof f=="object"&&typeof f.then=="function"?f.then(function(h){l_(s,l,h)},function(h){return gm(s,l,h)}):l_(s,l,f)}function l_(s,l,f){l.status="fulfilled",l.value=f,c_(l),s.state=f,l=s.pending,l!==null&&(f=l.next,f===l?s.pending=null:(f=f.next,l.next=f,s_(s,f)))}function gm(s,l,f){var h=s.pending;if(s.pending=null,h!==null){h=h.next;do l.status="rejected",l.reason=f,c_(l),l=l.next;while(l!==h)}s.action=null}function c_(s){s=s.listeners;for(var l=0;l<s.length;l++)(0,s[l])()}function u_(s,l){return l}function f_(s,l){if(dt){var f=Ht.formState;if(f!==null){e:{var h=Ze;if(dt){if(Yt){t:{for(var y=Yt,x=fi;y.nodeType!==8;){if(!x){y=null;break t}if(y=hi(y.nextSibling),y===null){y=null;break t}}x=y.data,y=x==="F!"||x==="F"?y:null}if(y){Yt=hi(y.nextSibling),h=y.data==="F!";break e}}_s(h)}h=!1}h&&(l=f[0])}}return f=Er(),f.memoizedState=f.baseState=l,h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:u_,lastRenderedState:l},f.queue=h,f=R_.bind(null,Ze,h),h.dispatch=f,h=mm(!1),x=Em.bind(null,Ze,!1,h.queue),h=Er(),y={state:l,dispatch:null,action:s,pending:null},h.queue=y,f=LI.bind(null,Ze,y,x,f),y.dispatch=f,h.memoizedState=s,[l,f,!1]}function d_(s){var l=pn();return h_(l,Lt,s)}function h_(s,l,f){if(l=hm(s,l,u_)[0],s=zd(Va)[0],typeof l=="object"&&l!==null&&typeof l.then=="function")try{var h=Cu(l)}catch(T){throw T===Ll?Dd:T}else h=l;l=pn();var y=l.queue,x=y.dispatch;return f!==l.memoizedState&&(Ze.flags|=2048,zl(9,{destroy:void 0},BI.bind(null,y,f),null)),[h,x,s]}function BI(s,l){s.action=l}function p_(s){var l=pn(),f=Lt;if(f!==null)return h_(l,f,s);pn(),l=l.memoizedState,f=pn();var h=f.queue.dispatch;return f.memoizedState=s,[l,h,!1]}function zl(s,l,f,h){return s={tag:s,create:f,deps:h,inst:l,next:null},l=Ze.updateQueue,l===null&&(l=Fd(),Ze.updateQueue=l),f=l.lastEffect,f===null?l.lastEffect=s.next=s:(h=f.next,f.next=s,s.next=h,l.lastEffect=s),s}function m_(){return pn().memoizedState}function Hd(s,l,f,h){var y=Er();Ze.flags|=s,y.memoizedState=zl(1|l,{destroy:void 0},f,h===void 0?null:h)}function Gd(s,l,f,h){var y=pn();h=h===void 0?null:h;var x=y.memoizedState.inst;Lt!==null&&h!==null&&om(h,Lt.memoizedState.deps)?y.memoizedState=zl(l,x,f,h):(Ze.flags|=s,y.memoizedState=zl(1|l,x,f,h))}function g_(s,l){Hd(8390656,8,s,l)}function vm(s,l){Gd(2048,8,s,l)}function VI(s){Ze.flags|=4;var l=Ze.updateQueue;if(l===null)l=Fd(),Ze.updateQueue=l,l.events=[s];else{var f=l.events;f===null?l.events=[s]:f.push(s)}}function v_(s){var l=pn().memoizedState;return VI({ref:l,nextImpl:s}),function(){if((At&2)!==0)throw Error(r(440));return l.impl.apply(void 0,arguments)}}function y_(s,l){return Gd(4,2,s,l)}function __(s,l){return Gd(4,4,s,l)}function x_(s,l){if(typeof l=="function"){s=s();var f=l(s);return function(){typeof f=="function"?f():l(null)}}if(l!=null)return s=s(),l.current=s,function(){l.current=null}}function w_(s,l,f){f=f!=null?f.concat([s]):null,Gd(4,4,x_.bind(null,l,s),f)}function ym(){}function E_(s,l){var f=pn();l=l===void 0?null:l;var h=f.memoizedState;return l!==null&&om(l,h[1])?h[0]:(f.memoizedState=[s,l],s)}function A_(s,l){var f=pn();l=l===void 0?null:l;var h=f.memoizedState;if(l!==null&&om(l,h[1]))return h[0];if(h=s(),zo){nt(!0);try{s()}finally{nt(!1)}}return f.memoizedState=[h,l],h}function _m(s,l,f){return f===void 0||(Ba&1073741824)!==0&&(ot&261930)===0?s.memoizedState=l:(s.memoizedState=f,s=bx(),Ze.lanes|=s,Is|=s,f)}function b_(s,l,f,h){return qr(f,l)?f:Vl.current!==null?(s=_m(s,f,h),qr(s,l)||(An=!0),s):(Ba&42)===0||(Ba&1073741824)!==0&&(ot&261930)===0?(An=!0,s.memoizedState=f):(s=bx(),Ze.lanes|=s,Is|=s,l)}function S_(s,l,f,h,y){var x=G.p;G.p=x!==0&&8>x?x:8;var T=H.T,B={};H.T=B,Em(s,!1,l,f);try{var X=y(),ne=H.S;if(ne!==null&&ne(B,X),X!==null&&typeof X=="object"&&typeof X.then=="function"){var ce=PI(X,h);Tu(s,l,ce,Qr(s))}else Tu(s,l,h,Qr(s))}catch(he){Tu(s,l,{then:function(){},status:"rejected",reason:he},Qr())}finally{G.p=x,T!==null&&B.types!==null&&(T.types=B.types),H.T=T}}function FI(){}function xm(s,l,f,h){if(s.tag!==5)throw Error(r(476));var y=C_(s).queue;S_(s,y,l,le,f===null?FI:function(){return T_(s),f(h)})}function C_(s){var l=s.memoizedState;if(l!==null)return l;l={memoizedState:le,baseState:le,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Va,lastRenderedState:le},next:null};var f={};return l.next={memoizedState:f,baseState:f,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Va,lastRenderedState:f},next:null},s.memoizedState=l,s=s.alternate,s!==null&&(s.memoizedState=l),l}function T_(s){var l=C_(s);l.next===null&&(l=s.alternate.memoizedState),Tu(s,l.next.queue,{},Qr())}function wm(){return tr(Gu)}function I_(){return pn().memoizedState}function N_(){return pn().memoizedState}function UI(s){for(var l=s.return;l!==null;){switch(l.tag){case 24:case 3:var f=Qr();s=Es(f);var h=As(l,s,f);h!==null&&(Pr(h,l,f),Eu(h,l,f)),l={cache:Wp()},s.payload=l;return}l=l.return}}function zI(s,l,f){var h=Qr();f={lane:h,revertLane:0,gesture:null,action:f,hasEagerState:!1,eagerState:null,next:null},qd(s)?O_(l,f):(f=Vp(s,l,f,h),f!==null&&(Pr(f,s,h),D_(f,l,h)))}function R_(s,l,f){var h=Qr();Tu(s,l,f,h)}function Tu(s,l,f,h){var y={lane:h,revertLane:0,gesture:null,action:f,hasEagerState:!1,eagerState:null,next:null};if(qd(s))O_(l,y);else{var x=s.alternate;if(s.lanes===0&&(x===null||x.lanes===0)&&(x=l.lastRenderedReducer,x!==null))try{var T=l.lastRenderedState,B=x(T,f);if(y.hasEagerState=!0,y.eagerState=B,qr(B,T))return Sd(s,l,y,0),Ht===null&&bd(),!1}catch{}finally{}if(f=Vp(s,l,y,h),f!==null)return Pr(f,s,h),D_(f,l,h),!0}return!1}function Em(s,l,f,h){if(h={lane:2,revertLane:e1(),gesture:null,action:h,hasEagerState:!1,eagerState:null,next:null},qd(s)){if(l)throw Error(r(479))}else l=Vp(s,f,h,2),l!==null&&Pr(l,s,2)}function qd(s){var l=s.alternate;return s===Ze||l!==null&&l===Ze}function O_(s,l){Fl=Bd=!0;var f=s.pending;f===null?l.next=l:(l.next=f.next,f.next=l),s.pending=l}function D_(s,l,f){if((f&4194048)!==0){var h=l.lanes;h&=s.pendingLanes,f|=h,l.lanes=f,Kc(s,f)}}var Iu={readContext:tr,use:Ud,useCallback:cn,useContext:cn,useEffect:cn,useImperativeHandle:cn,useLayoutEffect:cn,useInsertionEffect:cn,useMemo:cn,useReducer:cn,useRef:cn,useState:cn,useDebugValue:cn,useDeferredValue:cn,useTransition:cn,useSyncExternalStore:cn,useId:cn,useHostTransitionStatus:cn,useFormState:cn,useActionState:cn,useOptimistic:cn,useMemoCache:cn,useCacheRefresh:cn};Iu.useEffectEvent=cn;var M_={readContext:tr,use:Ud,useCallback:function(s,l){return Er().memoizedState=[s,l===void 0?null:l],s},useContext:tr,useEffect:g_,useImperativeHandle:function(s,l,f){f=f!=null?f.concat([s]):null,Hd(4194308,4,x_.bind(null,l,s),f)},useLayoutEffect:function(s,l){return Hd(4194308,4,s,l)},useInsertionEffect:function(s,l){Hd(4,2,s,l)},useMemo:function(s,l){var f=Er();l=l===void 0?null:l;var h=s();if(zo){nt(!0);try{s()}finally{nt(!1)}}return f.memoizedState=[h,l],h},useReducer:function(s,l,f){var h=Er();if(f!==void 0){var y=f(l);if(zo){nt(!0);try{f(l)}finally{nt(!1)}}}else y=l;return h.memoizedState=h.baseState=y,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:y},h.queue=s,s=s.dispatch=zI.bind(null,Ze,s),[h.memoizedState,s]},useRef:function(s){var l=Er();return s={current:s},l.memoizedState=s},useState:function(s){s=mm(s);var l=s.queue,f=R_.bind(null,Ze,l);return l.dispatch=f,[s.memoizedState,f]},useDebugValue:ym,useDeferredValue:function(s,l){var f=Er();return _m(f,s,l)},useTransition:function(){var s=mm(!1);return s=S_.bind(null,Ze,s.queue,!0,!1),Er().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,l,f){var h=Ze,y=Er();if(dt){if(f===void 0)throw Error(r(407));f=f()}else{if(f=l(),Ht===null)throw Error(r(349));(ot&127)!==0||e_(h,l,f)}y.memoizedState=f;var x={value:f,getSnapshot:l};return y.queue=x,g_(n_.bind(null,h,x,s),[s]),h.flags|=2048,zl(9,{destroy:void 0},t_.bind(null,h,x,f,l),null),f},useId:function(){var s=Er(),l=Ht.identifierPrefix;if(dt){var f=da,h=fa;f=(h&~(1<<32-ye(h)-1)).toString(32)+f,l="_"+l+"R_"+f,f=Vd++,0<f&&(l+="H"+f.toString(32)),l+="_"}else f=kI++,l="_"+l+"r_"+f.toString(32)+"_";return s.memoizedState=l},useHostTransitionStatus:wm,useFormState:f_,useActionState:f_,useOptimistic:function(s){var l=Er();l.memoizedState=l.baseState=s;var f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return l.queue=f,l=Em.bind(null,Ze,!0,f),f.dispatch=l,[s,l]},useMemoCache:dm,useCacheRefresh:function(){return Er().memoizedState=UI.bind(null,Ze)},useEffectEvent:function(s){var l=Er(),f={impl:s};return l.memoizedState=f,function(){if((At&2)!==0)throw Error(r(440));return f.impl.apply(void 0,arguments)}}},Am={readContext:tr,use:Ud,useCallback:E_,useContext:tr,useEffect:vm,useImperativeHandle:w_,useInsertionEffect:y_,useLayoutEffect:__,useMemo:A_,useReducer:zd,useRef:m_,useState:function(){return zd(Va)},useDebugValue:ym,useDeferredValue:function(s,l){var f=pn();return b_(f,Lt.memoizedState,s,l)},useTransition:function(){var s=zd(Va)[0],l=pn().memoizedState;return[typeof s=="boolean"?s:Cu(s),l]},useSyncExternalStore:J2,useId:I_,useHostTransitionStatus:wm,useFormState:d_,useActionState:d_,useOptimistic:function(s,l){var f=pn();return a_(f,Lt,s,l)},useMemoCache:dm,useCacheRefresh:N_};Am.useEffectEvent=v_;var P_={readContext:tr,use:Ud,useCallback:E_,useContext:tr,useEffect:vm,useImperativeHandle:w_,useInsertionEffect:y_,useLayoutEffect:__,useMemo:A_,useReducer:pm,useRef:m_,useState:function(){return pm(Va)},useDebugValue:ym,useDeferredValue:function(s,l){var f=pn();return Lt===null?_m(f,s,l):b_(f,Lt.memoizedState,s,l)},useTransition:function(){var s=pm(Va)[0],l=pn().memoizedState;return[typeof s=="boolean"?s:Cu(s),l]},useSyncExternalStore:J2,useId:I_,useHostTransitionStatus:wm,useFormState:p_,useActionState:p_,useOptimistic:function(s,l){var f=pn();return Lt!==null?a_(f,Lt,s,l):(f.baseState=s,[s,f.queue.dispatch])},useMemoCache:dm,useCacheRefresh:N_};P_.useEffectEvent=v_;function bm(s,l,f,h){l=s.memoizedState,f=f(h,l),f=f==null?l:g({},l,f),s.memoizedState=f,s.lanes===0&&(s.updateQueue.baseState=f)}var Sm={enqueueSetState:function(s,l,f){s=s._reactInternals;var h=Qr(),y=Es(h);y.payload=l,f!=null&&(y.callback=f),l=As(s,y,h),l!==null&&(Pr(l,s,h),Eu(l,s,h))},enqueueReplaceState:function(s,l,f){s=s._reactInternals;var h=Qr(),y=Es(h);y.tag=1,y.payload=l,f!=null&&(y.callback=f),l=As(s,y,h),l!==null&&(Pr(l,s,h),Eu(l,s,h))},enqueueForceUpdate:function(s,l){s=s._reactInternals;var f=Qr(),h=Es(f);h.tag=2,l!=null&&(h.callback=l),l=As(s,h,f),l!==null&&(Pr(l,s,f),Eu(l,s,f))}};function k_(s,l,f,h,y,x,T){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(h,x,T):l.prototype&&l.prototype.isPureReactComponent?!pu(f,h)||!pu(y,x):!0}function j_(s,l,f,h){s=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(f,h),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(f,h),l.state!==s&&Sm.enqueueReplaceState(l,l.state,null)}function Ho(s,l){var f=l;if("ref"in l){f={};for(var h in l)h!=="ref"&&(f[h]=l[h])}if(s=s.defaultProps){f===l&&(f=g({},f));for(var y in s)f[y]===void 0&&(f[y]=s[y])}return f}function L_(s){Ad(s)}function B_(s){console.error(s)}function V_(s){Ad(s)}function $d(s,l){try{var f=s.onUncaughtError;f(l.value,{componentStack:l.stack})}catch(h){setTimeout(function(){throw h})}}function F_(s,l,f){try{var h=s.onCaughtError;h(f.value,{componentStack:f.stack,errorBoundary:l.tag===1?l.stateNode:null})}catch(y){setTimeout(function(){throw y})}}function Cm(s,l,f){return f=Es(f),f.tag=3,f.payload={element:null},f.callback=function(){$d(s,l)},f}function U_(s){return s=Es(s),s.tag=3,s}function z_(s,l,f,h){var y=f.type.getDerivedStateFromError;if(typeof y=="function"){var x=h.value;s.payload=function(){return y(x)},s.callback=function(){F_(l,f,h)}}var T=f.stateNode;T!==null&&typeof T.componentDidCatch=="function"&&(s.callback=function(){F_(l,f,h),typeof y!="function"&&(Ns===null?Ns=new Set([this]):Ns.add(this));var B=h.stack;this.componentDidCatch(h.value,{componentStack:B!==null?B:""})})}function HI(s,l,f,h,y){if(f.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){if(l=f.alternate,l!==null&&Pl(l,f,y,!0),f=Xr.current,f!==null){switch(f.tag){case 31:case 13:return di===null?ih():f.alternate===null&&un===0&&(un=3),f.flags&=-257,f.flags|=65536,f.lanes=y,h===Md?f.flags|=16384:(l=f.updateQueue,l===null?f.updateQueue=new Set([h]):l.add(h),Qm(s,h,y)),!1;case 22:return f.flags|=65536,h===Md?f.flags|=16384:(l=f.updateQueue,l===null?(l={transitions:null,markerInstances:null,retryQueue:new Set([h])},f.updateQueue=l):(f=l.retryQueue,f===null?l.retryQueue=new Set([h]):f.add(h)),Qm(s,h,y)),!1}throw Error(r(435,f.tag))}return Qm(s,h,y),ih(),!1}if(dt)return l=Xr.current,l!==null?((l.flags&65536)===0&&(l.flags|=256),l.flags|=65536,l.lanes=y,h!==qp&&(s=Error(r(422),{cause:h}),vu(li(s,f)))):(h!==qp&&(l=Error(r(423),{cause:h}),vu(li(l,f))),s=s.current.alternate,s.flags|=65536,y&=-y,s.lanes|=y,h=li(h,f),y=Cm(s.stateNode,h,y),nm(s,y),un!==4&&(un=2)),!1;var x=Error(r(520),{cause:h});if(x=li(x,f),ju===null?ju=[x]:ju.push(x),un!==4&&(un=2),l===null)return!0;h=li(h,f),f=l;do{switch(f.tag){case 3:return f.flags|=65536,s=y&-y,f.lanes|=s,s=Cm(f.stateNode,h,s),nm(f,s),!1;case 1:if(l=f.type,x=f.stateNode,(f.flags&128)===0&&(typeof l.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(Ns===null||!Ns.has(x))))return f.flags|=65536,y&=-y,f.lanes|=y,y=U_(y),z_(y,s,f,h),nm(f,y),!1}f=f.return}while(f!==null);return!1}var Tm=Error(r(461)),An=!1;function nr(s,l,f,h){l.child=s===null?$2(l,null,f,h):Uo(l,s.child,f,h)}function H_(s,l,f,h,y){f=f.render;var x=l.ref;if("ref"in h){var T={};for(var B in h)B!=="ref"&&(T[B]=h[B])}else T=h;return Lo(l),h=lm(s,l,f,T,x,y),B=cm(),s!==null&&!An?(um(s,l,y),Fa(s,l,y)):(dt&&B&&Hp(l),l.flags|=1,nr(s,l,h,y),l.child)}function G_(s,l,f,h,y){if(s===null){var x=f.type;return typeof x=="function"&&!Fp(x)&&x.defaultProps===void 0&&f.compare===null?(l.tag=15,l.type=x,q_(s,l,x,h,y)):(s=Td(f.type,null,h,l,l.mode,y),s.ref=l.ref,s.return=l,l.child=s)}if(x=s.child,!km(s,y)){var T=x.memoizedProps;if(f=f.compare,f=f!==null?f:pu,f(T,h)&&s.ref===l.ref)return Fa(s,l,y)}return l.flags|=1,s=Pa(x,h),s.ref=l.ref,s.return=l,l.child=s}function q_(s,l,f,h,y){if(s!==null){var x=s.memoizedProps;if(pu(x,h)&&s.ref===l.ref)if(An=!1,l.pendingProps=h=x,km(s,y))(s.flags&131072)!==0&&(An=!0);else return l.lanes=s.lanes,Fa(s,l,y)}return Im(s,l,f,h,y)}function $_(s,l,f,h){var y=h.children,x=s!==null?s.memoizedState:null;if(s===null&&l.stateNode===null&&(l.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),h.mode==="hidden"){if((l.flags&128)!==0){if(x=x!==null?x.baseLanes|f:f,s!==null){for(h=l.child=s.child,y=0;h!==null;)y=y|h.lanes|h.childLanes,h=h.sibling;h=y&~x}else h=0,l.child=null;return X_(s,l,x,f,h)}if((f&536870912)!==0)l.memoizedState={baseLanes:0,cachePool:null},s!==null&&Od(l,x!==null?x.cachePool:null),x!==null?K2(l,x):im(),W2(l);else return h=l.lanes=536870912,X_(s,l,x!==null?x.baseLanes|f:f,f,h)}else x!==null?(Od(l,x.cachePool),K2(l,x),Ss(),l.memoizedState=null):(s!==null&&Od(l,null),im(),Ss());return nr(s,l,y,f),l.child}function Nu(s,l){return s!==null&&s.tag===22||l.stateNode!==null||(l.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.sibling}function X_(s,l,f,h,y){var x=Zp();return x=x===null?null:{parent:wn._currentValue,pool:x},l.memoizedState={baseLanes:f,cachePool:x},s!==null&&Od(l,null),im(),W2(l),s!==null&&Pl(s,l,h,!0),l.childLanes=y,null}function Xd(s,l){return l=Kd({mode:l.mode,children:l.children},s.mode),l.ref=s.ref,s.child=l,l.return=s,l}function Y_(s,l,f){return Uo(l,s.child,null,f),s=Xd(l,l.pendingProps),s.flags|=2,Yr(l),l.memoizedState=null,s}function GI(s,l,f){var h=l.pendingProps,y=(l.flags&128)!==0;if(l.flags&=-129,s===null){if(dt){if(h.mode==="hidden")return s=Xd(l,h),l.lanes=536870912,Nu(null,s);if(sm(l),(s=Yt)?(s=sw(s,fi),s=s!==null&&s.data==="&"?s:null,s!==null&&(l.memoizedState={dehydrated:s,treeContext:vs!==null?{id:fa,overflow:da}:null,retryLane:536870912,hydrationErrors:null},f=O2(s),f.return=l,l.child=f,er=l,Yt=null)):s=null,s===null)throw _s(l);return l.lanes=536870912,null}return Xd(l,h)}var x=s.memoizedState;if(x!==null){var T=x.dehydrated;if(sm(l),y)if(l.flags&256)l.flags&=-257,l=Y_(s,l,f);else if(l.memoizedState!==null)l.child=s.child,l.flags|=128,l=null;else throw Error(r(558));else if(An||Pl(s,l,f,!1),y=(f&s.childLanes)!==0,An||y){if(h=Ht,h!==null&&(T=Wc(h,f),T!==0&&T!==x.retryLane))throw x.retryLane=T,Mo(s,T),Pr(h,s,T),Tm;ih(),l=Y_(s,l,f)}else s=x.treeContext,Yt=hi(T.nextSibling),er=l,dt=!0,ys=null,fi=!1,s!==null&&P2(l,s),l=Xd(l,h),l.flags|=4096;return l}return s=Pa(s.child,{mode:h.mode,children:h.children}),s.ref=l.ref,l.child=s,s.return=l,s}function Yd(s,l){var f=l.ref;if(f===null)s!==null&&s.ref!==null&&(l.flags|=4194816);else{if(typeof f!="function"&&typeof f!="object")throw Error(r(284));(s===null||s.ref!==f)&&(l.flags|=4194816)}}function Im(s,l,f,h,y){return Lo(l),f=lm(s,l,f,h,void 0,y),h=cm(),s!==null&&!An?(um(s,l,y),Fa(s,l,y)):(dt&&h&&Hp(l),l.flags|=1,nr(s,l,f,y),l.child)}function K_(s,l,f,h,y,x){return Lo(l),l.updateQueue=null,f=Z2(l,h,f,y),Q2(s),h=cm(),s!==null&&!An?(um(s,l,x),Fa(s,l,x)):(dt&&h&&Hp(l),l.flags|=1,nr(s,l,f,x),l.child)}function W_(s,l,f,h,y){if(Lo(l),l.stateNode===null){var x=Rl,T=f.contextType;typeof T=="object"&&T!==null&&(x=tr(T)),x=new f(h,x),l.memoizedState=x.state!==null&&x.state!==void 0?x.state:null,x.updater=Sm,l.stateNode=x,x._reactInternals=l,x=l.stateNode,x.props=h,x.state=l.memoizedState,x.refs={},em(l),T=f.contextType,x.context=typeof T=="object"&&T!==null?tr(T):Rl,x.state=l.memoizedState,T=f.getDerivedStateFromProps,typeof T=="function"&&(bm(l,f,T,h),x.state=l.memoizedState),typeof f.getDerivedStateFromProps=="function"||typeof x.getSnapshotBeforeUpdate=="function"||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(T=x.state,typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount(),T!==x.state&&Sm.enqueueReplaceState(x,x.state,null),bu(l,h,x,y),Au(),x.state=l.memoizedState),typeof x.componentDidMount=="function"&&(l.flags|=4194308),h=!0}else if(s===null){x=l.stateNode;var B=l.memoizedProps,X=Ho(f,B);x.props=X;var ne=x.context,ce=f.contextType;T=Rl,typeof ce=="object"&&ce!==null&&(T=tr(ce));var he=f.getDerivedStateFromProps;ce=typeof he=="function"||typeof x.getSnapshotBeforeUpdate=="function",B=l.pendingProps!==B,ce||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(B||ne!==T)&&j_(l,x,h,T),ws=!1;var re=l.memoizedState;x.state=re,bu(l,h,x,y),Au(),ne=l.memoizedState,B||re!==ne||ws?(typeof he=="function"&&(bm(l,f,he,h),ne=l.memoizedState),(X=ws||k_(l,f,X,h,re,ne,T))?(ce||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount()),typeof x.componentDidMount=="function"&&(l.flags|=4194308)):(typeof x.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=h,l.memoizedState=ne),x.props=h,x.state=ne,x.context=T,h=X):(typeof x.componentDidMount=="function"&&(l.flags|=4194308),h=!1)}else{x=l.stateNode,tm(s,l),T=l.memoizedProps,ce=Ho(f,T),x.props=ce,he=l.pendingProps,re=x.context,ne=f.contextType,X=Rl,typeof ne=="object"&&ne!==null&&(X=tr(ne)),B=f.getDerivedStateFromProps,(ne=typeof B=="function"||typeof x.getSnapshotBeforeUpdate=="function")||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(T!==he||re!==X)&&j_(l,x,h,X),ws=!1,re=l.memoizedState,x.state=re,bu(l,h,x,y),Au();var ae=l.memoizedState;T!==he||re!==ae||ws||s!==null&&s.dependencies!==null&&Nd(s.dependencies)?(typeof B=="function"&&(bm(l,f,B,h),ae=l.memoizedState),(ce=ws||k_(l,f,ce,h,re,ae,X)||s!==null&&s.dependencies!==null&&Nd(s.dependencies))?(ne||typeof x.UNSAFE_componentWillUpdate!="function"&&typeof x.componentWillUpdate!="function"||(typeof x.componentWillUpdate=="function"&&x.componentWillUpdate(h,ae,X),typeof x.UNSAFE_componentWillUpdate=="function"&&x.UNSAFE_componentWillUpdate(h,ae,X)),typeof x.componentDidUpdate=="function"&&(l.flags|=4),typeof x.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof x.componentDidUpdate!="function"||T===s.memoizedProps&&re===s.memoizedState||(l.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||T===s.memoizedProps&&re===s.memoizedState||(l.flags|=1024),l.memoizedProps=h,l.memoizedState=ae),x.props=h,x.state=ae,x.context=X,h=ce):(typeof x.componentDidUpdate!="function"||T===s.memoizedProps&&re===s.memoizedState||(l.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||T===s.memoizedProps&&re===s.memoizedState||(l.flags|=1024),h=!1)}return x=h,Yd(s,l),h=(l.flags&128)!==0,x||h?(x=l.stateNode,f=h&&typeof f.getDerivedStateFromError!="function"?null:x.render(),l.flags|=1,s!==null&&h?(l.child=Uo(l,s.child,null,y),l.child=Uo(l,null,f,y)):nr(s,l,f,y),l.memoizedState=x.state,s=l.child):s=Fa(s,l,y),s}function Q_(s,l,f,h){return ko(),l.flags|=256,nr(s,l,f,h),l.child}var Nm={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Rm(s){return{baseLanes:s,cachePool:F2()}}function Om(s,l,f){return s=s!==null?s.childLanes&~f:0,l&&(s|=Wr),s}function Z_(s,l,f){var h=l.pendingProps,y=!1,x=(l.flags&128)!==0,T;if((T=x)||(T=s!==null&&s.memoizedState===null?!1:(hn.current&2)!==0),T&&(y=!0,l.flags&=-129),T=(l.flags&32)!==0,l.flags&=-33,s===null){if(dt){if(y?bs(l):Ss(),(s=Yt)?(s=sw(s,fi),s=s!==null&&s.data!=="&"?s:null,s!==null&&(l.memoizedState={dehydrated:s,treeContext:vs!==null?{id:fa,overflow:da}:null,retryLane:536870912,hydrationErrors:null},f=O2(s),f.return=l,l.child=f,er=l,Yt=null)):s=null,s===null)throw _s(l);return h1(s)?l.lanes=32:l.lanes=536870912,null}var B=h.children;return h=h.fallback,y?(Ss(),y=l.mode,B=Kd({mode:"hidden",children:B},y),h=Po(h,y,f,null),B.return=l,h.return=l,B.sibling=h,l.child=B,h=l.child,h.memoizedState=Rm(f),h.childLanes=Om(s,T,f),l.memoizedState=Nm,Nu(null,h)):(bs(l),Dm(l,B))}var X=s.memoizedState;if(X!==null&&(B=X.dehydrated,B!==null)){if(x)l.flags&256?(bs(l),l.flags&=-257,l=Mm(s,l,f)):l.memoizedState!==null?(Ss(),l.child=s.child,l.flags|=128,l=null):(Ss(),B=h.fallback,y=l.mode,h=Kd({mode:"visible",children:h.children},y),B=Po(B,y,f,null),B.flags|=2,h.return=l,B.return=l,h.sibling=B,l.child=h,Uo(l,s.child,null,f),h=l.child,h.memoizedState=Rm(f),h.childLanes=Om(s,T,f),l.memoizedState=Nm,l=Nu(null,h));else if(bs(l),h1(B)){if(T=B.nextSibling&&B.nextSibling.dataset,T)var ne=T.dgst;T=ne,h=Error(r(419)),h.stack="",h.digest=T,vu({value:h,source:null,stack:null}),l=Mm(s,l,f)}else if(An||Pl(s,l,f,!1),T=(f&s.childLanes)!==0,An||T){if(T=Ht,T!==null&&(h=Wc(T,f),h!==0&&h!==X.retryLane))throw X.retryLane=h,Mo(s,h),Pr(T,s,h),Tm;d1(B)||ih(),l=Mm(s,l,f)}else d1(B)?(l.flags|=192,l.child=s.child,l=null):(s=X.treeContext,Yt=hi(B.nextSibling),er=l,dt=!0,ys=null,fi=!1,s!==null&&P2(l,s),l=Dm(l,h.children),l.flags|=4096);return l}return y?(Ss(),B=h.fallback,y=l.mode,X=s.child,ne=X.sibling,h=Pa(X,{mode:"hidden",children:h.children}),h.subtreeFlags=X.subtreeFlags&65011712,ne!==null?B=Pa(ne,B):(B=Po(B,y,f,null),B.flags|=2),B.return=l,h.return=l,h.sibling=B,l.child=h,Nu(null,h),h=l.child,B=s.child.memoizedState,B===null?B=Rm(f):(y=B.cachePool,y!==null?(X=wn._currentValue,y=y.parent!==X?{parent:X,pool:X}:y):y=F2(),B={baseLanes:B.baseLanes|f,cachePool:y}),h.memoizedState=B,h.childLanes=Om(s,T,f),l.memoizedState=Nm,Nu(s.child,h)):(bs(l),f=s.child,s=f.sibling,f=Pa(f,{mode:"visible",children:h.children}),f.return=l,f.sibling=null,s!==null&&(T=l.deletions,T===null?(l.deletions=[s],l.flags|=16):T.push(s)),l.child=f,l.memoizedState=null,f)}function Dm(s,l){return l=Kd({mode:"visible",children:l},s.mode),l.return=s,s.child=l}function Kd(s,l){return s=$r(22,s,null,l),s.lanes=0,s}function Mm(s,l,f){return Uo(l,s.child,null,f),s=Dm(l,l.pendingProps.children),s.flags|=2,l.memoizedState=null,s}function J_(s,l,f){s.lanes|=l;var h=s.alternate;h!==null&&(h.lanes|=l),Yp(s.return,l,f)}function Pm(s,l,f,h,y,x){var T=s.memoizedState;T===null?s.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:h,tail:f,tailMode:y,treeForkCount:x}:(T.isBackwards=l,T.rendering=null,T.renderingStartTime=0,T.last=h,T.tail=f,T.tailMode=y,T.treeForkCount=x)}function ex(s,l,f){var h=l.pendingProps,y=h.revealOrder,x=h.tail;h=h.children;var T=hn.current,B=(T&2)!==0;if(B?(T=T&1|2,l.flags|=128):T&=1,me(hn,T),nr(s,l,h,f),h=dt?gu:0,!B&&s!==null&&(s.flags&128)!==0)e:for(s=l.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&J_(s,f,l);else if(s.tag===19)J_(s,f,l);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===l)break e;for(;s.sibling===null;){if(s.return===null||s.return===l)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}switch(y){case"forwards":for(f=l.child,y=null;f!==null;)s=f.alternate,s!==null&&Ld(s)===null&&(y=f),f=f.sibling;f=y,f===null?(y=l.child,l.child=null):(y=f.sibling,f.sibling=null),Pm(l,!1,y,f,x,h);break;case"backwards":case"unstable_legacy-backwards":for(f=null,y=l.child,l.child=null;y!==null;){if(s=y.alternate,s!==null&&Ld(s)===null){l.child=y;break}s=y.sibling,y.sibling=f,f=y,y=s}Pm(l,!0,f,null,x,h);break;case"together":Pm(l,!1,null,null,void 0,h);break;default:l.memoizedState=null}return l.child}function Fa(s,l,f){if(s!==null&&(l.dependencies=s.dependencies),Is|=l.lanes,(f&l.childLanes)===0)if(s!==null){if(Pl(s,l,f,!1),(f&l.childLanes)===0)return null}else return null;if(s!==null&&l.child!==s.child)throw Error(r(153));if(l.child!==null){for(s=l.child,f=Pa(s,s.pendingProps),l.child=f,f.return=l;s.sibling!==null;)s=s.sibling,f=f.sibling=Pa(s,s.pendingProps),f.return=l;f.sibling=null}return l.child}function km(s,l){return(s.lanes&l)!==0?!0:(s=s.dependencies,!!(s!==null&&Nd(s)))}function qI(s,l,f){switch(l.tag){case 3:$e(l,l.stateNode.containerInfo),xs(l,wn,s.memoizedState.cache),ko();break;case 27:case 5:Xe(l);break;case 4:$e(l,l.stateNode.containerInfo);break;case 10:xs(l,l.type,l.memoizedProps.value);break;case 31:if(l.memoizedState!==null)return l.flags|=128,sm(l),null;break;case 13:var h=l.memoizedState;if(h!==null)return h.dehydrated!==null?(bs(l),l.flags|=128,null):(f&l.child.childLanes)!==0?Z_(s,l,f):(bs(l),s=Fa(s,l,f),s!==null?s.sibling:null);bs(l);break;case 19:var y=(s.flags&128)!==0;if(h=(f&l.childLanes)!==0,h||(Pl(s,l,f,!1),h=(f&l.childLanes)!==0),y){if(h)return ex(s,l,f);l.flags|=128}if(y=l.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),me(hn,hn.current),h)break;return null;case 22:return l.lanes=0,$_(s,l,f,l.pendingProps);case 24:xs(l,wn,s.memoizedState.cache)}return Fa(s,l,f)}function tx(s,l,f){if(s!==null)if(s.memoizedProps!==l.pendingProps)An=!0;else{if(!km(s,f)&&(l.flags&128)===0)return An=!1,qI(s,l,f);An=(s.flags&131072)!==0}else An=!1,dt&&(l.flags&1048576)!==0&&M2(l,gu,l.index);switch(l.lanes=0,l.tag){case 16:e:{var h=l.pendingProps;if(s=Vo(l.elementType),l.type=s,typeof s=="function")Fp(s)?(h=Ho(s,h),l.tag=1,l=W_(null,l,s,h,f)):(l.tag=0,l=Im(null,l,s,h,f));else{if(s!=null){var y=s.$$typeof;if(y===U){l.tag=11,l=H_(null,l,s,h,f);break e}else if(y===M){l.tag=14,l=G_(null,l,s,h,f);break e}}throw l=W(s)||s,Error(r(306,l,""))}}return l;case 0:return Im(s,l,l.type,l.pendingProps,f);case 1:return h=l.type,y=Ho(h,l.pendingProps),W_(s,l,h,y,f);case 3:e:{if($e(l,l.stateNode.containerInfo),s===null)throw Error(r(387));h=l.pendingProps;var x=l.memoizedState;y=x.element,tm(s,l),bu(l,h,null,f);var T=l.memoizedState;if(h=T.cache,xs(l,wn,h),h!==x.cache&&Kp(l,[wn],f,!0),Au(),h=T.element,x.isDehydrated)if(x={element:h,isDehydrated:!1,cache:T.cache},l.updateQueue.baseState=x,l.memoizedState=x,l.flags&256){l=Q_(s,l,h,f);break e}else if(h!==y){y=li(Error(r(424)),l),vu(y),l=Q_(s,l,h,f);break e}else{switch(s=l.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(Yt=hi(s.firstChild),er=l,dt=!0,ys=null,fi=!0,f=$2(l,null,h,f),l.child=f;f;)f.flags=f.flags&-3|4096,f=f.sibling}else{if(ko(),h===y){l=Fa(s,l,f);break e}nr(s,l,h,f)}l=l.child}return l;case 26:return Yd(s,l),s===null?(f=dw(l.type,null,l.pendingProps,null))?l.memoizedState=f:dt||(f=l.type,s=l.pendingProps,h=fh(be.current).createElement(f),h[yn]=l,h[Fn]=s,rr(h,f,s),_n(h),l.stateNode=h):l.memoizedState=dw(l.type,s.memoizedProps,l.pendingProps,s.memoizedState),null;case 27:return Xe(l),s===null&&dt&&(h=l.stateNode=cw(l.type,l.pendingProps,be.current),er=l,fi=!0,y=Yt,Ms(l.type)?(p1=y,Yt=hi(h.firstChild)):Yt=y),nr(s,l,l.pendingProps.children,f),Yd(s,l),s===null&&(l.flags|=4194304),l.child;case 5:return s===null&&dt&&((y=h=Yt)&&(h=w4(h,l.type,l.pendingProps,fi),h!==null?(l.stateNode=h,er=l,Yt=hi(h.firstChild),fi=!1,y=!0):y=!1),y||_s(l)),Xe(l),y=l.type,x=l.pendingProps,T=s!==null?s.memoizedProps:null,h=x.children,c1(y,x)?h=null:T!==null&&c1(y,T)&&(l.flags|=32),l.memoizedState!==null&&(y=lm(s,l,jI,null,null,f),Gu._currentValue=y),Yd(s,l),nr(s,l,h,f),l.child;case 6:return s===null&&dt&&((s=f=Yt)&&(f=E4(f,l.pendingProps,fi),f!==null?(l.stateNode=f,er=l,Yt=null,s=!0):s=!1),s||_s(l)),null;case 13:return Z_(s,l,f);case 4:return $e(l,l.stateNode.containerInfo),h=l.pendingProps,s===null?l.child=Uo(l,null,h,f):nr(s,l,h,f),l.child;case 11:return H_(s,l,l.type,l.pendingProps,f);case 7:return nr(s,l,l.pendingProps,f),l.child;case 8:return nr(s,l,l.pendingProps.children,f),l.child;case 12:return nr(s,l,l.pendingProps.children,f),l.child;case 10:return h=l.pendingProps,xs(l,l.type,h.value),nr(s,l,h.children,f),l.child;case 9:return y=l.type._context,h=l.pendingProps.children,Lo(l),y=tr(y),h=h(y),l.flags|=1,nr(s,l,h,f),l.child;case 14:return G_(s,l,l.type,l.pendingProps,f);case 15:return q_(s,l,l.type,l.pendingProps,f);case 19:return ex(s,l,f);case 31:return GI(s,l,f);case 22:return $_(s,l,f,l.pendingProps);case 24:return Lo(l),h=tr(wn),s===null?(y=Zp(),y===null&&(y=Ht,x=Wp(),y.pooledCache=x,x.refCount++,x!==null&&(y.pooledCacheLanes|=f),y=x),l.memoizedState={parent:h,cache:y},em(l),xs(l,wn,y)):((s.lanes&f)!==0&&(tm(s,l),bu(l,null,null,f),Au()),y=s.memoizedState,x=l.memoizedState,y.parent!==h?(y={parent:h,cache:h},l.memoizedState=y,l.lanes===0&&(l.memoizedState=l.updateQueue.baseState=y),xs(l,wn,h)):(h=x.cache,xs(l,wn,h),h!==y.cache&&Kp(l,[wn],f,!0))),nr(s,l,l.pendingProps.children,f),l.child;case 29:throw l.pendingProps}throw Error(r(156,l.tag))}function Ua(s){s.flags|=4}function jm(s,l,f,h,y){if((l=(s.mode&32)!==0)&&(l=!1),l){if(s.flags|=16777216,(y&335544128)===y)if(s.stateNode.complete)s.flags|=8192;else if(Ix())s.flags|=8192;else throw Fo=Md,Jp}else s.flags&=-16777217}function nx(s,l){if(l.type!=="stylesheet"||(l.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!vw(l))if(Ix())s.flags|=8192;else throw Fo=Md,Jp}function Wd(s,l){l!==null&&(s.flags|=4),s.flags&16384&&(l=s.tag!==22?nd():536870912,s.lanes|=l,$l|=l)}function Ru(s,l){if(!dt)switch(s.tailMode){case"hidden":l=s.tail;for(var f=null;l!==null;)l.alternate!==null&&(f=l),l=l.sibling;f===null?s.tail=null:f.sibling=null;break;case"collapsed":f=s.tail;for(var h=null;f!==null;)f.alternate!==null&&(h=f),f=f.sibling;h===null?l||s.tail===null?s.tail=null:s.tail.sibling=null:h.sibling=null}}function Kt(s){var l=s.alternate!==null&&s.alternate.child===s.child,f=0,h=0;if(l)for(var y=s.child;y!==null;)f|=y.lanes|y.childLanes,h|=y.subtreeFlags&65011712,h|=y.flags&65011712,y.return=s,y=y.sibling;else for(y=s.child;y!==null;)f|=y.lanes|y.childLanes,h|=y.subtreeFlags,h|=y.flags,y.return=s,y=y.sibling;return s.subtreeFlags|=h,s.childLanes=f,l}function $I(s,l,f){var h=l.pendingProps;switch(Gp(l),l.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Kt(l),null;case 1:return Kt(l),null;case 3:return f=l.stateNode,h=null,s!==null&&(h=s.memoizedState.cache),l.memoizedState.cache!==h&&(l.flags|=2048),La(wn),tt(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(s===null||s.child===null)&&(Ml(l)?Ua(l):s===null||s.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,$p())),Kt(l),null;case 26:var y=l.type,x=l.memoizedState;return s===null?(Ua(l),x!==null?(Kt(l),nx(l,x)):(Kt(l),jm(l,y,null,h,f))):x?x!==s.memoizedState?(Ua(l),Kt(l),nx(l,x)):(Kt(l),l.flags&=-16777217):(s=s.memoizedProps,s!==h&&Ua(l),Kt(l),jm(l,y,s,h,f)),null;case 27:if(et(l),f=be.current,y=l.type,s!==null&&l.stateNode!=null)s.memoizedProps!==h&&Ua(l);else{if(!h){if(l.stateNode===null)throw Error(r(166));return Kt(l),null}s=we.current,Ml(l)?k2(l):(s=cw(y,h,f),l.stateNode=s,Ua(l))}return Kt(l),null;case 5:if(et(l),y=l.type,s!==null&&l.stateNode!=null)s.memoizedProps!==h&&Ua(l);else{if(!h){if(l.stateNode===null)throw Error(r(166));return Kt(l),null}if(x=we.current,Ml(l))k2(l);else{var T=fh(be.current);switch(x){case 1:x=T.createElementNS("http://www.w3.org/2000/svg",y);break;case 2:x=T.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;default:switch(y){case"svg":x=T.createElementNS("http://www.w3.org/2000/svg",y);break;case"math":x=T.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;case"script":x=T.createElement("div"),x.innerHTML="<script><\/script>",x=x.removeChild(x.firstChild);break;case"select":x=typeof h.is=="string"?T.createElement("select",{is:h.is}):T.createElement("select"),h.multiple?x.multiple=!0:h.size&&(x.size=h.size);break;default:x=typeof h.is=="string"?T.createElement(y,{is:h.is}):T.createElement(y)}}x[yn]=l,x[Fn]=h;e:for(T=l.child;T!==null;){if(T.tag===5||T.tag===6)x.appendChild(T.stateNode);else if(T.tag!==4&&T.tag!==27&&T.child!==null){T.child.return=T,T=T.child;continue}if(T===l)break e;for(;T.sibling===null;){if(T.return===null||T.return===l)break e;T=T.return}T.sibling.return=T.return,T=T.sibling}l.stateNode=x;e:switch(rr(x,y,h),y){case"button":case"input":case"select":case"textarea":h=!!h.autoFocus;break e;case"img":h=!0;break e;default:h=!1}h&&Ua(l)}}return Kt(l),jm(l,l.type,s===null?null:s.memoizedProps,l.pendingProps,f),null;case 6:if(s&&l.stateNode!=null)s.memoizedProps!==h&&Ua(l);else{if(typeof h!="string"&&l.stateNode===null)throw Error(r(166));if(s=be.current,Ml(l)){if(s=l.stateNode,f=l.memoizedProps,h=null,y=er,y!==null)switch(y.tag){case 27:case 5:h=y.memoizedProps}s[yn]=l,s=!!(s.nodeValue===f||h!==null&&h.suppressHydrationWarning===!0||Zx(s.nodeValue,f)),s||_s(l,!0)}else s=fh(s).createTextNode(h),s[yn]=l,l.stateNode=s}return Kt(l),null;case 31:if(f=l.memoizedState,s===null||s.memoizedState!==null){if(h=Ml(l),f!==null){if(s===null){if(!h)throw Error(r(318));if(s=l.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(557));s[yn]=l}else ko(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;Kt(l),s=!1}else f=$p(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=f),s=!0;if(!s)return l.flags&256?(Yr(l),l):(Yr(l),null);if((l.flags&128)!==0)throw Error(r(558))}return Kt(l),null;case 13:if(h=l.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(y=Ml(l),h!==null&&h.dehydrated!==null){if(s===null){if(!y)throw Error(r(318));if(y=l.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(r(317));y[yn]=l}else ko(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;Kt(l),y=!1}else y=$p(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=y),y=!0;if(!y)return l.flags&256?(Yr(l),l):(Yr(l),null)}return Yr(l),(l.flags&128)!==0?(l.lanes=f,l):(f=h!==null,s=s!==null&&s.memoizedState!==null,f&&(h=l.child,y=null,h.alternate!==null&&h.alternate.memoizedState!==null&&h.alternate.memoizedState.cachePool!==null&&(y=h.alternate.memoizedState.cachePool.pool),x=null,h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(x=h.memoizedState.cachePool.pool),x!==y&&(h.flags|=2048)),f!==s&&f&&(l.child.flags|=8192),Wd(l,l.updateQueue),Kt(l),null);case 4:return tt(),s===null&&i1(l.stateNode.containerInfo),Kt(l),null;case 10:return La(l.type),Kt(l),null;case 19:if(te(hn),h=l.memoizedState,h===null)return Kt(l),null;if(y=(l.flags&128)!==0,x=h.rendering,x===null)if(y)Ru(h,!1);else{if(un!==0||s!==null&&(s.flags&128)!==0)for(s=l.child;s!==null;){if(x=Ld(s),x!==null){for(l.flags|=128,Ru(h,!1),s=x.updateQueue,l.updateQueue=s,Wd(l,s),l.subtreeFlags=0,s=f,f=l.child;f!==null;)R2(f,s),f=f.sibling;return me(hn,hn.current&1|2),dt&&ka(l,h.treeForkCount),l.child}s=s.sibling}h.tail!==null&&zt()>th&&(l.flags|=128,y=!0,Ru(h,!1),l.lanes=4194304)}else{if(!y)if(s=Ld(x),s!==null){if(l.flags|=128,y=!0,s=s.updateQueue,l.updateQueue=s,Wd(l,s),Ru(h,!0),h.tail===null&&h.tailMode==="hidden"&&!x.alternate&&!dt)return Kt(l),null}else 2*zt()-h.renderingStartTime>th&&f!==536870912&&(l.flags|=128,y=!0,Ru(h,!1),l.lanes=4194304);h.isBackwards?(x.sibling=l.child,l.child=x):(s=h.last,s!==null?s.sibling=x:l.child=x,h.last=x)}return h.tail!==null?(s=h.tail,h.rendering=s,h.tail=s.sibling,h.renderingStartTime=zt(),s.sibling=null,f=hn.current,me(hn,y?f&1|2:f&1),dt&&ka(l,h.treeForkCount),s):(Kt(l),null);case 22:case 23:return Yr(l),am(),h=l.memoizedState!==null,s!==null?s.memoizedState!==null!==h&&(l.flags|=8192):h&&(l.flags|=8192),h?(f&536870912)!==0&&(l.flags&128)===0&&(Kt(l),l.subtreeFlags&6&&(l.flags|=8192)):Kt(l),f=l.updateQueue,f!==null&&Wd(l,f.retryQueue),f=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(f=s.memoizedState.cachePool.pool),h=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(h=l.memoizedState.cachePool.pool),h!==f&&(l.flags|=2048),s!==null&&te(Bo),null;case 24:return f=null,s!==null&&(f=s.memoizedState.cache),l.memoizedState.cache!==f&&(l.flags|=2048),La(wn),Kt(l),null;case 25:return null;case 30:return null}throw Error(r(156,l.tag))}function XI(s,l){switch(Gp(l),l.tag){case 1:return s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 3:return La(wn),tt(),s=l.flags,(s&65536)!==0&&(s&128)===0?(l.flags=s&-65537|128,l):null;case 26:case 27:case 5:return et(l),null;case 31:if(l.memoizedState!==null){if(Yr(l),l.alternate===null)throw Error(r(340));ko()}return s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 13:if(Yr(l),s=l.memoizedState,s!==null&&s.dehydrated!==null){if(l.alternate===null)throw Error(r(340));ko()}return s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 19:return te(hn),null;case 4:return tt(),null;case 10:return La(l.type),null;case 22:case 23:return Yr(l),am(),s!==null&&te(Bo),s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 24:return La(wn),null;case 25:return null;default:return null}}function rx(s,l){switch(Gp(l),l.tag){case 3:La(wn),tt();break;case 26:case 27:case 5:et(l);break;case 4:tt();break;case 31:l.memoizedState!==null&&Yr(l);break;case 13:Yr(l);break;case 19:te(hn);break;case 10:La(l.type);break;case 22:case 23:Yr(l),am(),s!==null&&te(Bo);break;case 24:La(wn)}}function Ou(s,l){try{var f=l.updateQueue,h=f!==null?f.lastEffect:null;if(h!==null){var y=h.next;f=y;do{if((f.tag&s)===s){h=void 0;var x=f.create,T=f.inst;h=x(),T.destroy=h}f=f.next}while(f!==y)}}catch(B){Ot(l,l.return,B)}}function Cs(s,l,f){try{var h=l.updateQueue,y=h!==null?h.lastEffect:null;if(y!==null){var x=y.next;h=x;do{if((h.tag&s)===s){var T=h.inst,B=T.destroy;if(B!==void 0){T.destroy=void 0,y=l;var X=f,ne=B;try{ne()}catch(ce){Ot(y,X,ce)}}}h=h.next}while(h!==x)}}catch(ce){Ot(l,l.return,ce)}}function ix(s){var l=s.updateQueue;if(l!==null){var f=s.stateNode;try{Y2(l,f)}catch(h){Ot(s,s.return,h)}}}function ax(s,l,f){f.props=Ho(s.type,s.memoizedProps),f.state=s.memoizedState;try{f.componentWillUnmount()}catch(h){Ot(s,l,h)}}function Du(s,l){try{var f=s.ref;if(f!==null){switch(s.tag){case 26:case 27:case 5:var h=s.stateNode;break;case 30:h=s.stateNode;break;default:h=s.stateNode}typeof f=="function"?s.refCleanup=f(h):f.current=h}}catch(y){Ot(s,l,y)}}function ha(s,l){var f=s.ref,h=s.refCleanup;if(f!==null)if(typeof h=="function")try{h()}catch(y){Ot(s,l,y)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof f=="function")try{f(null)}catch(y){Ot(s,l,y)}else f.current=null}function sx(s){var l=s.type,f=s.memoizedProps,h=s.stateNode;try{e:switch(l){case"button":case"input":case"select":case"textarea":f.autoFocus&&h.focus();break e;case"img":f.src?h.src=f.src:f.srcSet&&(h.srcset=f.srcSet)}}catch(y){Ot(s,s.return,y)}}function Lm(s,l,f){try{var h=s.stateNode;m4(h,s.type,f,l),h[Fn]=l}catch(y){Ot(s,s.return,y)}}function ox(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&Ms(s.type)||s.tag===4}function Bm(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||ox(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&Ms(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function Vm(s,l,f){var h=s.tag;if(h===5||h===6)s=s.stateNode,l?(f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f).insertBefore(s,l):(l=f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f,l.appendChild(s),f=f._reactRootContainer,f!=null||l.onclick!==null||(l.onclick=Ti));else if(h!==4&&(h===27&&Ms(s.type)&&(f=s.stateNode,l=null),s=s.child,s!==null))for(Vm(s,l,f),s=s.sibling;s!==null;)Vm(s,l,f),s=s.sibling}function Qd(s,l,f){var h=s.tag;if(h===5||h===6)s=s.stateNode,l?f.insertBefore(s,l):f.appendChild(s);else if(h!==4&&(h===27&&Ms(s.type)&&(f=s.stateNode),s=s.child,s!==null))for(Qd(s,l,f),s=s.sibling;s!==null;)Qd(s,l,f),s=s.sibling}function lx(s){var l=s.stateNode,f=s.memoizedProps;try{for(var h=s.type,y=l.attributes;y.length;)l.removeAttributeNode(y[0]);rr(l,h,f),l[yn]=s,l[Fn]=f}catch(x){Ot(s,s.return,x)}}var za=!1,bn=!1,Fm=!1,cx=typeof WeakSet=="function"?WeakSet:Set,zn=null;function YI(s,l){if(s=s.containerInfo,o1=yh,s=w2(s),Mp(s)){if("selectionStart"in s)var f={start:s.selectionStart,end:s.selectionEnd};else e:{f=(f=s.ownerDocument)&&f.defaultView||window;var h=f.getSelection&&f.getSelection();if(h&&h.rangeCount!==0){f=h.anchorNode;var y=h.anchorOffset,x=h.focusNode;h=h.focusOffset;try{f.nodeType,x.nodeType}catch{f=null;break e}var T=0,B=-1,X=-1,ne=0,ce=0,he=s,re=null;t:for(;;){for(var ae;he!==f||y!==0&&he.nodeType!==3||(B=T+y),he!==x||h!==0&&he.nodeType!==3||(X=T+h),he.nodeType===3&&(T+=he.nodeValue.length),(ae=he.firstChild)!==null;)re=he,he=ae;for(;;){if(he===s)break t;if(re===f&&++ne===y&&(B=T),re===x&&++ce===h&&(X=T),(ae=he.nextSibling)!==null)break;he=re,re=he.parentNode}he=ae}f=B===-1||X===-1?null:{start:B,end:X}}else f=null}f=f||{start:0,end:0}}else f=null;for(l1={focusedElem:s,selectionRange:f},yh=!1,zn=l;zn!==null;)if(l=zn,s=l.child,(l.subtreeFlags&1028)!==0&&s!==null)s.return=l,zn=s;else for(;zn!==null;){switch(l=zn,x=l.alternate,s=l.flags,l.tag){case 0:if((s&4)!==0&&(s=l.updateQueue,s=s!==null?s.events:null,s!==null))for(f=0;f<s.length;f++)y=s[f],y.ref.impl=y.nextImpl;break;case 11:case 15:break;case 1:if((s&1024)!==0&&x!==null){s=void 0,f=l,y=x.memoizedProps,x=x.memoizedState,h=f.stateNode;try{var Ie=Ho(f.type,y);s=h.getSnapshotBeforeUpdate(Ie,x),h.__reactInternalSnapshotBeforeUpdate=s}catch(ze){Ot(f,f.return,ze)}}break;case 3:if((s&1024)!==0){if(s=l.stateNode.containerInfo,f=s.nodeType,f===9)f1(s);else if(f===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":f1(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(r(163))}if(s=l.sibling,s!==null){s.return=l.return,zn=s;break}zn=l.return}}function ux(s,l,f){var h=f.flags;switch(f.tag){case 0:case 11:case 15:Ga(s,f),h&4&&Ou(5,f);break;case 1:if(Ga(s,f),h&4)if(s=f.stateNode,l===null)try{s.componentDidMount()}catch(T){Ot(f,f.return,T)}else{var y=Ho(f.type,l.memoizedProps);l=l.memoizedState;try{s.componentDidUpdate(y,l,s.__reactInternalSnapshotBeforeUpdate)}catch(T){Ot(f,f.return,T)}}h&64&&ix(f),h&512&&Du(f,f.return);break;case 3:if(Ga(s,f),h&64&&(s=f.updateQueue,s!==null)){if(l=null,f.child!==null)switch(f.child.tag){case 27:case 5:l=f.child.stateNode;break;case 1:l=f.child.stateNode}try{Y2(s,l)}catch(T){Ot(f,f.return,T)}}break;case 27:l===null&&h&4&&lx(f);case 26:case 5:Ga(s,f),l===null&&h&4&&sx(f),h&512&&Du(f,f.return);break;case 12:Ga(s,f);break;case 31:Ga(s,f),h&4&&hx(s,f);break;case 13:Ga(s,f),h&4&&px(s,f),h&64&&(s=f.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(f=r4.bind(null,f),A4(s,f))));break;case 22:if(h=f.memoizedState!==null||za,!h){l=l!==null&&l.memoizedState!==null||bn,y=za;var x=bn;za=h,(bn=l)&&!x?qa(s,f,(f.subtreeFlags&8772)!==0):Ga(s,f),za=y,bn=x}break;case 30:break;default:Ga(s,f)}}function fx(s){var l=s.alternate;l!==null&&(s.alternate=null,fx(l)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(l=s.stateNode,l!==null&&gl(l)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var nn=null,Rr=!1;function Ha(s,l,f){for(f=f.child;f!==null;)dx(s,l,f),f=f.sibling}function dx(s,l,f){if(Me&&typeof Me.onCommitFiberUnmount=="function")try{Me.onCommitFiberUnmount(De,f)}catch{}switch(f.tag){case 26:bn||ha(f,l),Ha(s,l,f),f.memoizedState?f.memoizedState.count--:f.stateNode&&(f=f.stateNode,f.parentNode.removeChild(f));break;case 27:bn||ha(f,l);var h=nn,y=Rr;Ms(f.type)&&(nn=f.stateNode,Rr=!1),Ha(s,l,f),Uu(f.stateNode),nn=h,Rr=y;break;case 5:bn||ha(f,l);case 6:if(h=nn,y=Rr,nn=null,Ha(s,l,f),nn=h,Rr=y,nn!==null)if(Rr)try{(nn.nodeType===9?nn.body:nn.nodeName==="HTML"?nn.ownerDocument.body:nn).removeChild(f.stateNode)}catch(x){Ot(f,l,x)}else try{nn.removeChild(f.stateNode)}catch(x){Ot(f,l,x)}break;case 18:nn!==null&&(Rr?(s=nn,iw(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,f.stateNode),ec(s)):iw(nn,f.stateNode));break;case 4:h=nn,y=Rr,nn=f.stateNode.containerInfo,Rr=!0,Ha(s,l,f),nn=h,Rr=y;break;case 0:case 11:case 14:case 15:Cs(2,f,l),bn||Cs(4,f,l),Ha(s,l,f);break;case 1:bn||(ha(f,l),h=f.stateNode,typeof h.componentWillUnmount=="function"&&ax(f,l,h)),Ha(s,l,f);break;case 21:Ha(s,l,f);break;case 22:bn=(h=bn)||f.memoizedState!==null,Ha(s,l,f),bn=h;break;default:Ha(s,l,f)}}function hx(s,l){if(l.memoizedState===null&&(s=l.alternate,s!==null&&(s=s.memoizedState,s!==null))){s=s.dehydrated;try{ec(s)}catch(f){Ot(l,l.return,f)}}}function px(s,l){if(l.memoizedState===null&&(s=l.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{ec(s)}catch(f){Ot(l,l.return,f)}}function KI(s){switch(s.tag){case 31:case 13:case 19:var l=s.stateNode;return l===null&&(l=s.stateNode=new cx),l;case 22:return s=s.stateNode,l=s._retryCache,l===null&&(l=s._retryCache=new cx),l;default:throw Error(r(435,s.tag))}}function Zd(s,l){var f=KI(s);l.forEach(function(h){if(!f.has(h)){f.add(h);var y=i4.bind(null,s,h);h.then(y,y)}})}function Or(s,l){var f=l.deletions;if(f!==null)for(var h=0;h<f.length;h++){var y=f[h],x=s,T=l,B=T;e:for(;B!==null;){switch(B.tag){case 27:if(Ms(B.type)){nn=B.stateNode,Rr=!1;break e}break;case 5:nn=B.stateNode,Rr=!1;break e;case 3:case 4:nn=B.stateNode.containerInfo,Rr=!0;break e}B=B.return}if(nn===null)throw Error(r(160));dx(x,T,y),nn=null,Rr=!1,x=y.alternate,x!==null&&(x.return=null),y.return=null}if(l.subtreeFlags&13886)for(l=l.child;l!==null;)mx(l,s),l=l.sibling}var Mi=null;function mx(s,l){var f=s.alternate,h=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:Or(l,s),Dr(s),h&4&&(Cs(3,s,s.return),Ou(3,s),Cs(5,s,s.return));break;case 1:Or(l,s),Dr(s),h&512&&(bn||f===null||ha(f,f.return)),h&64&&za&&(s=s.updateQueue,s!==null&&(h=s.callbacks,h!==null&&(f=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=f===null?h:f.concat(h))));break;case 26:var y=Mi;if(Or(l,s),Dr(s),h&512&&(bn||f===null||ha(f,f.return)),h&4){var x=f!==null?f.memoizedState:null;if(h=s.memoizedState,f===null)if(h===null)if(s.stateNode===null){e:{h=s.type,f=s.memoizedProps,y=y.ownerDocument||y;t:switch(h){case"title":x=y.getElementsByTagName("title")[0],(!x||x[Ji]||x[yn]||x.namespaceURI==="http://www.w3.org/2000/svg"||x.hasAttribute("itemprop"))&&(x=y.createElement(h),y.head.insertBefore(x,y.querySelector("head > title"))),rr(x,h,f),x[yn]=s,_n(x),h=x;break e;case"link":var T=mw("link","href",y).get(h+(f.href||""));if(T){for(var B=0;B<T.length;B++)if(x=T[B],x.getAttribute("href")===(f.href==null||f.href===""?null:f.href)&&x.getAttribute("rel")===(f.rel==null?null:f.rel)&&x.getAttribute("title")===(f.title==null?null:f.title)&&x.getAttribute("crossorigin")===(f.crossOrigin==null?null:f.crossOrigin)){T.splice(B,1);break t}}x=y.createElement(h),rr(x,h,f),y.head.appendChild(x);break;case"meta":if(T=mw("meta","content",y).get(h+(f.content||""))){for(B=0;B<T.length;B++)if(x=T[B],x.getAttribute("content")===(f.content==null?null:""+f.content)&&x.getAttribute("name")===(f.name==null?null:f.name)&&x.getAttribute("property")===(f.property==null?null:f.property)&&x.getAttribute("http-equiv")===(f.httpEquiv==null?null:f.httpEquiv)&&x.getAttribute("charset")===(f.charSet==null?null:f.charSet)){T.splice(B,1);break t}}x=y.createElement(h),rr(x,h,f),y.head.appendChild(x);break;default:throw Error(r(468,h))}x[yn]=s,_n(x),h=x}s.stateNode=h}else gw(y,s.type,s.stateNode);else s.stateNode=pw(y,h,s.memoizedProps);else x!==h?(x===null?f.stateNode!==null&&(f=f.stateNode,f.parentNode.removeChild(f)):x.count--,h===null?gw(y,s.type,s.stateNode):pw(y,h,s.memoizedProps)):h===null&&s.stateNode!==null&&Lm(s,s.memoizedProps,f.memoizedProps)}break;case 27:Or(l,s),Dr(s),h&512&&(bn||f===null||ha(f,f.return)),f!==null&&h&4&&Lm(s,s.memoizedProps,f.memoizedProps);break;case 5:if(Or(l,s),Dr(s),h&512&&(bn||f===null||ha(f,f.return)),s.flags&32){y=s.stateNode;try{Nr(y,"")}catch(Ie){Ot(s,s.return,Ie)}}h&4&&s.stateNode!=null&&(y=s.memoizedProps,Lm(s,y,f!==null?f.memoizedProps:y)),h&1024&&(Fm=!0);break;case 6:if(Or(l,s),Dr(s),h&4){if(s.stateNode===null)throw Error(r(162));h=s.memoizedProps,f=s.stateNode;try{f.nodeValue=h}catch(Ie){Ot(s,s.return,Ie)}}break;case 3:if(ph=null,y=Mi,Mi=dh(l.containerInfo),Or(l,s),Mi=y,Dr(s),h&4&&f!==null&&f.memoizedState.isDehydrated)try{ec(l.containerInfo)}catch(Ie){Ot(s,s.return,Ie)}Fm&&(Fm=!1,gx(s));break;case 4:h=Mi,Mi=dh(s.stateNode.containerInfo),Or(l,s),Dr(s),Mi=h;break;case 12:Or(l,s),Dr(s);break;case 31:Or(l,s),Dr(s),h&4&&(h=s.updateQueue,h!==null&&(s.updateQueue=null,Zd(s,h)));break;case 13:Or(l,s),Dr(s),s.child.flags&8192&&s.memoizedState!==null!=(f!==null&&f.memoizedState!==null)&&(eh=zt()),h&4&&(h=s.updateQueue,h!==null&&(s.updateQueue=null,Zd(s,h)));break;case 22:y=s.memoizedState!==null;var X=f!==null&&f.memoizedState!==null,ne=za,ce=bn;if(za=ne||y,bn=ce||X,Or(l,s),bn=ce,za=ne,Dr(s),h&8192)e:for(l=s.stateNode,l._visibility=y?l._visibility&-2:l._visibility|1,y&&(f===null||X||za||bn||Go(s)),f=null,l=s;;){if(l.tag===5||l.tag===26){if(f===null){X=f=l;try{if(x=X.stateNode,y)T=x.style,typeof T.setProperty=="function"?T.setProperty("display","none","important"):T.display="none";else{B=X.stateNode;var he=X.memoizedProps.style,re=he!=null&&he.hasOwnProperty("display")?he.display:null;B.style.display=re==null||typeof re=="boolean"?"":(""+re).trim()}}catch(Ie){Ot(X,X.return,Ie)}}}else if(l.tag===6){if(f===null){X=l;try{X.stateNode.nodeValue=y?"":X.memoizedProps}catch(Ie){Ot(X,X.return,Ie)}}}else if(l.tag===18){if(f===null){X=l;try{var ae=X.stateNode;y?aw(ae,!0):aw(X.stateNode,!1)}catch(Ie){Ot(X,X.return,Ie)}}}else if((l.tag!==22&&l.tag!==23||l.memoizedState===null||l===s)&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===s)break e;for(;l.sibling===null;){if(l.return===null||l.return===s)break e;f===l&&(f=null),l=l.return}f===l&&(f=null),l.sibling.return=l.return,l=l.sibling}h&4&&(h=s.updateQueue,h!==null&&(f=h.retryQueue,f!==null&&(h.retryQueue=null,Zd(s,f))));break;case 19:Or(l,s),Dr(s),h&4&&(h=s.updateQueue,h!==null&&(s.updateQueue=null,Zd(s,h)));break;case 30:break;case 21:break;default:Or(l,s),Dr(s)}}function Dr(s){var l=s.flags;if(l&2){try{for(var f,h=s.return;h!==null;){if(ox(h)){f=h;break}h=h.return}if(f==null)throw Error(r(160));switch(f.tag){case 27:var y=f.stateNode,x=Bm(s);Qd(s,x,y);break;case 5:var T=f.stateNode;f.flags&32&&(Nr(T,""),f.flags&=-33);var B=Bm(s);Qd(s,B,T);break;case 3:case 4:var X=f.stateNode.containerInfo,ne=Bm(s);Vm(s,ne,X);break;default:throw Error(r(161))}}catch(ce){Ot(s,s.return,ce)}s.flags&=-3}l&4096&&(s.flags&=-4097)}function gx(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var l=s;gx(l),l.tag===5&&l.flags&1024&&l.stateNode.reset(),s=s.sibling}}function Ga(s,l){if(l.subtreeFlags&8772)for(l=l.child;l!==null;)ux(s,l.alternate,l),l=l.sibling}function Go(s){for(s=s.child;s!==null;){var l=s;switch(l.tag){case 0:case 11:case 14:case 15:Cs(4,l,l.return),Go(l);break;case 1:ha(l,l.return);var f=l.stateNode;typeof f.componentWillUnmount=="function"&&ax(l,l.return,f),Go(l);break;case 27:Uu(l.stateNode);case 26:case 5:ha(l,l.return),Go(l);break;case 22:l.memoizedState===null&&Go(l);break;case 30:Go(l);break;default:Go(l)}s=s.sibling}}function qa(s,l,f){for(f=f&&(l.subtreeFlags&8772)!==0,l=l.child;l!==null;){var h=l.alternate,y=s,x=l,T=x.flags;switch(x.tag){case 0:case 11:case 15:qa(y,x,f),Ou(4,x);break;case 1:if(qa(y,x,f),h=x,y=h.stateNode,typeof y.componentDidMount=="function")try{y.componentDidMount()}catch(ne){Ot(h,h.return,ne)}if(h=x,y=h.updateQueue,y!==null){var B=h.stateNode;try{var X=y.shared.hiddenCallbacks;if(X!==null)for(y.shared.hiddenCallbacks=null,y=0;y<X.length;y++)X2(X[y],B)}catch(ne){Ot(h,h.return,ne)}}f&&T&64&&ix(x),Du(x,x.return);break;case 27:lx(x);case 26:case 5:qa(y,x,f),f&&h===null&&T&4&&sx(x),Du(x,x.return);break;case 12:qa(y,x,f);break;case 31:qa(y,x,f),f&&T&4&&hx(y,x);break;case 13:qa(y,x,f),f&&T&4&&px(y,x);break;case 22:x.memoizedState===null&&qa(y,x,f),Du(x,x.return);break;case 30:break;default:qa(y,x,f)}l=l.sibling}}function Um(s,l){var f=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(f=s.memoizedState.cachePool.pool),s=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(s=l.memoizedState.cachePool.pool),s!==f&&(s!=null&&s.refCount++,f!=null&&yu(f))}function zm(s,l){s=null,l.alternate!==null&&(s=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==s&&(l.refCount++,s!=null&&yu(s))}function Pi(s,l,f,h){if(l.subtreeFlags&10256)for(l=l.child;l!==null;)vx(s,l,f,h),l=l.sibling}function vx(s,l,f,h){var y=l.flags;switch(l.tag){case 0:case 11:case 15:Pi(s,l,f,h),y&2048&&Ou(9,l);break;case 1:Pi(s,l,f,h);break;case 3:Pi(s,l,f,h),y&2048&&(s=null,l.alternate!==null&&(s=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==s&&(l.refCount++,s!=null&&yu(s)));break;case 12:if(y&2048){Pi(s,l,f,h),s=l.stateNode;try{var x=l.memoizedProps,T=x.id,B=x.onPostCommit;typeof B=="function"&&B(T,l.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(X){Ot(l,l.return,X)}}else Pi(s,l,f,h);break;case 31:Pi(s,l,f,h);break;case 13:Pi(s,l,f,h);break;case 23:break;case 22:x=l.stateNode,T=l.alternate,l.memoizedState!==null?x._visibility&2?Pi(s,l,f,h):Mu(s,l):x._visibility&2?Pi(s,l,f,h):(x._visibility|=2,Hl(s,l,f,h,(l.subtreeFlags&10256)!==0||!1)),y&2048&&Um(T,l);break;case 24:Pi(s,l,f,h),y&2048&&zm(l.alternate,l);break;default:Pi(s,l,f,h)}}function Hl(s,l,f,h,y){for(y=y&&((l.subtreeFlags&10256)!==0||!1),l=l.child;l!==null;){var x=s,T=l,B=f,X=h,ne=T.flags;switch(T.tag){case 0:case 11:case 15:Hl(x,T,B,X,y),Ou(8,T);break;case 23:break;case 22:var ce=T.stateNode;T.memoizedState!==null?ce._visibility&2?Hl(x,T,B,X,y):Mu(x,T):(ce._visibility|=2,Hl(x,T,B,X,y)),y&&ne&2048&&Um(T.alternate,T);break;case 24:Hl(x,T,B,X,y),y&&ne&2048&&zm(T.alternate,T);break;default:Hl(x,T,B,X,y)}l=l.sibling}}function Mu(s,l){if(l.subtreeFlags&10256)for(l=l.child;l!==null;){var f=s,h=l,y=h.flags;switch(h.tag){case 22:Mu(f,h),y&2048&&Um(h.alternate,h);break;case 24:Mu(f,h),y&2048&&zm(h.alternate,h);break;default:Mu(f,h)}l=l.sibling}}var Pu=8192;function Gl(s,l,f){if(s.subtreeFlags&Pu)for(s=s.child;s!==null;)yx(s,l,f),s=s.sibling}function yx(s,l,f){switch(s.tag){case 26:Gl(s,l,f),s.flags&Pu&&s.memoizedState!==null&&k4(f,Mi,s.memoizedState,s.memoizedProps);break;case 5:Gl(s,l,f);break;case 3:case 4:var h=Mi;Mi=dh(s.stateNode.containerInfo),Gl(s,l,f),Mi=h;break;case 22:s.memoizedState===null&&(h=s.alternate,h!==null&&h.memoizedState!==null?(h=Pu,Pu=16777216,Gl(s,l,f),Pu=h):Gl(s,l,f));break;default:Gl(s,l,f)}}function _x(s){var l=s.alternate;if(l!==null&&(s=l.child,s!==null)){l.child=null;do l=s.sibling,s.sibling=null,s=l;while(s!==null)}}function ku(s){var l=s.deletions;if((s.flags&16)!==0){if(l!==null)for(var f=0;f<l.length;f++){var h=l[f];zn=h,wx(h,s)}_x(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)xx(s),s=s.sibling}function xx(s){switch(s.tag){case 0:case 11:case 15:ku(s),s.flags&2048&&Cs(9,s,s.return);break;case 3:ku(s);break;case 12:ku(s);break;case 22:var l=s.stateNode;s.memoizedState!==null&&l._visibility&2&&(s.return===null||s.return.tag!==13)?(l._visibility&=-3,Jd(s)):ku(s);break;default:ku(s)}}function Jd(s){var l=s.deletions;if((s.flags&16)!==0){if(l!==null)for(var f=0;f<l.length;f++){var h=l[f];zn=h,wx(h,s)}_x(s)}for(s=s.child;s!==null;){switch(l=s,l.tag){case 0:case 11:case 15:Cs(8,l,l.return),Jd(l);break;case 22:f=l.stateNode,f._visibility&2&&(f._visibility&=-3,Jd(l));break;default:Jd(l)}s=s.sibling}}function wx(s,l){for(;zn!==null;){var f=zn;switch(f.tag){case 0:case 11:case 15:Cs(8,f,l);break;case 23:case 22:if(f.memoizedState!==null&&f.memoizedState.cachePool!==null){var h=f.memoizedState.cachePool.pool;h!=null&&h.refCount++}break;case 24:yu(f.memoizedState.cache)}if(h=f.child,h!==null)h.return=f,zn=h;else e:for(f=s;zn!==null;){h=zn;var y=h.sibling,x=h.return;if(fx(h),h===f){zn=null;break e}if(y!==null){y.return=x,zn=y;break e}zn=x}}}var WI={getCacheForType:function(s){var l=tr(wn),f=l.data.get(s);return f===void 0&&(f=s(),l.data.set(s,f)),f},cacheSignal:function(){return tr(wn).controller.signal}},QI=typeof WeakMap=="function"?WeakMap:Map,At=0,Ht=null,at=null,ot=0,Rt=0,Kr=null,Ts=!1,ql=!1,Hm=!1,$a=0,un=0,Is=0,qo=0,Gm=0,Wr=0,$l=0,ju=null,Mr=null,qm=!1,eh=0,Ex=0,th=1/0,nh=null,Ns=null,Nn=0,Rs=null,Xl=null,Xa=0,$m=0,Xm=null,Ax=null,Lu=0,Ym=null;function Qr(){return(At&2)!==0&&ot!==0?ot&-ot:H.T!==null?e1():rd()}function bx(){if(Wr===0)if((ot&536870912)===0||dt){var s=Vn;Vn<<=1,(Vn&3932160)===0&&(Vn=262144),Wr=s}else Wr=536870912;return s=Xr.current,s!==null&&(s.flags|=32),Wr}function Pr(s,l,f){(s===Ht&&(Rt===2||Rt===9)||s.cancelPendingCommit!==null)&&(Yl(s,0),Os(s,ot,Wr,!1)),_o(s,f),((At&2)===0||s!==Ht)&&(s===Ht&&((At&2)===0&&(qo|=f),un===4&&Os(s,ot,Wr,!1)),pa(s))}function Sx(s,l,f){if((At&6)!==0)throw Error(r(327));var h=!f&&(l&127)===0&&(l&s.expiredLanes)===0||bi(s,l),y=h?e4(s,l):Wm(s,l,!0),x=h;do{if(y===0){ql&&!h&&Os(s,l,0,!1);break}else{if(f=s.current.alternate,x&&!ZI(f)){y=Wm(s,l,!1),x=!1;continue}if(y===2){if(x=l,s.errorRecoveryDisabledLanes&x)var T=0;else T=s.pendingLanes&-536870913,T=T!==0?T:T&536870912?536870912:0;if(T!==0){l=T;e:{var B=s;y=ju;var X=B.current.memoizedState.isDehydrated;if(X&&(Yl(B,T).flags|=256),T=Wm(B,T,!1),T!==2){if(Hm&&!X){B.errorRecoveryDisabledLanes|=x,qo|=x,y=4;break e}x=Mr,Mr=y,x!==null&&(Mr===null?Mr=x:Mr.push.apply(Mr,x))}y=T}if(x=!1,y!==2)continue}}if(y===1){Yl(s,0),Os(s,l,0,!0);break}e:{switch(h=s,x=y,x){case 0:case 1:throw Error(r(345));case 4:if((l&4194048)!==l)break;case 6:Os(h,l,Wr,!Ts);break e;case 2:Mr=null;break;case 3:case 5:break;default:throw Error(r(329))}if((l&62914560)===l&&(y=eh+300-zt(),10<y)){if(Os(h,l,Wr,!Ts),Wi(h,0,!0)!==0)break e;Xa=l,h.timeoutHandle=nw(Cx.bind(null,h,f,Mr,nh,qm,l,Wr,qo,$l,Ts,x,"Throttled",-0,0),y);break e}Cx(h,f,Mr,nh,qm,l,Wr,qo,$l,Ts,x,null,-0,0)}}break}while(!0);pa(s)}function Cx(s,l,f,h,y,x,T,B,X,ne,ce,he,re,ae){if(s.timeoutHandle=-1,he=l.subtreeFlags,he&8192||(he&16785408)===16785408){he={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Ti},yx(l,x,he);var Ie=(x&62914560)===x?eh-zt():(x&4194048)===x?Ex-zt():0;if(Ie=j4(he,Ie),Ie!==null){Xa=x,s.cancelPendingCommit=Ie(Px.bind(null,s,l,x,f,h,y,T,B,X,ce,he,null,re,ae)),Os(s,x,T,!ne);return}}Px(s,l,x,f,h,y,T,B,X)}function ZI(s){for(var l=s;;){var f=l.tag;if((f===0||f===11||f===15)&&l.flags&16384&&(f=l.updateQueue,f!==null&&(f=f.stores,f!==null)))for(var h=0;h<f.length;h++){var y=f[h],x=y.getSnapshot;y=y.value;try{if(!qr(x(),y))return!1}catch{return!1}}if(f=l.child,l.subtreeFlags&16384&&f!==null)f.return=l,l=f;else{if(l===s)break;for(;l.sibling===null;){if(l.return===null||l.return===s)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function Os(s,l,f,h){l&=~Gm,l&=~qo,s.suspendedLanes|=l,s.pingedLanes&=~l,h&&(s.warmLanes|=l),h=s.expirationTimes;for(var y=l;0<y;){var x=31-ye(y),T=1<<x;h[x]=-1,y&=~T}f!==0&&xo(s,f,l)}function rh(){return(At&6)===0?(Bu(0),!1):!0}function Km(){if(at!==null){if(Rt===0)var s=at.return;else s=at,ja=jo=null,fm(s),Bl=null,xu=0,s=at;for(;s!==null;)rx(s.alternate,s),s=s.return;at=null}}function Yl(s,l){var f=s.timeoutHandle;f!==-1&&(s.timeoutHandle=-1,y4(f)),f=s.cancelPendingCommit,f!==null&&(s.cancelPendingCommit=null,f()),Xa=0,Km(),Ht=s,at=f=Pa(s.current,null),ot=l,Rt=0,Kr=null,Ts=!1,ql=bi(s,l),Hm=!1,$l=Wr=Gm=qo=Is=un=0,Mr=ju=null,qm=!1,(l&8)!==0&&(l|=l&32);var h=s.entangledLanes;if(h!==0)for(s=s.entanglements,h&=l;0<h;){var y=31-ye(h),x=1<<y;l|=s[y],h&=~x}return $a=l,bd(),f}function Tx(s,l){Ze=null,H.H=Iu,l===Ll||l===Dd?(l=H2(),Rt=3):l===Jp?(l=H2(),Rt=4):Rt=l===Tm?8:l!==null&&typeof l=="object"&&typeof l.then=="function"?6:1,Kr=l,at===null&&(un=1,$d(s,li(l,s.current)))}function Ix(){var s=Xr.current;return s===null?!0:(ot&4194048)===ot?di===null:(ot&62914560)===ot||(ot&536870912)!==0?s===di:!1}function Nx(){var s=H.H;return H.H=Iu,s===null?Iu:s}function Rx(){var s=H.A;return H.A=WI,s}function ih(){un=4,Ts||(ot&4194048)!==ot&&Xr.current!==null||(ql=!0),(Is&134217727)===0&&(qo&134217727)===0||Ht===null||Os(Ht,ot,Wr,!1)}function Wm(s,l,f){var h=At;At|=2;var y=Nx(),x=Rx();(Ht!==s||ot!==l)&&(nh=null,Yl(s,l)),l=!1;var T=un;e:do try{if(Rt!==0&&at!==null){var B=at,X=Kr;switch(Rt){case 8:Km(),T=6;break e;case 3:case 2:case 9:case 6:Xr.current===null&&(l=!0);var ne=Rt;if(Rt=0,Kr=null,Kl(s,B,X,ne),f&&ql){T=0;break e}break;default:ne=Rt,Rt=0,Kr=null,Kl(s,B,X,ne)}}JI(),T=un;break}catch(ce){Tx(s,ce)}while(!0);return l&&s.shellSuspendCounter++,ja=jo=null,At=h,H.H=y,H.A=x,at===null&&(Ht=null,ot=0,bd()),T}function JI(){for(;at!==null;)Ox(at)}function e4(s,l){var f=At;At|=2;var h=Nx(),y=Rx();Ht!==s||ot!==l?(nh=null,th=zt()+500,Yl(s,l)):ql=bi(s,l);e:do try{if(Rt!==0&&at!==null){l=at;var x=Kr;t:switch(Rt){case 1:Rt=0,Kr=null,Kl(s,l,x,1);break;case 2:case 9:if(U2(x)){Rt=0,Kr=null,Dx(l);break}l=function(){Rt!==2&&Rt!==9||Ht!==s||(Rt=7),pa(s)},x.then(l,l);break e;case 3:Rt=7;break e;case 4:Rt=5;break e;case 7:U2(x)?(Rt=0,Kr=null,Dx(l)):(Rt=0,Kr=null,Kl(s,l,x,7));break;case 5:var T=null;switch(at.tag){case 26:T=at.memoizedState;case 5:case 27:var B=at;if(T?vw(T):B.stateNode.complete){Rt=0,Kr=null;var X=B.sibling;if(X!==null)at=X;else{var ne=B.return;ne!==null?(at=ne,ah(ne)):at=null}break t}}Rt=0,Kr=null,Kl(s,l,x,5);break;case 6:Rt=0,Kr=null,Kl(s,l,x,6);break;case 8:Km(),un=6;break e;default:throw Error(r(462))}}t4();break}catch(ce){Tx(s,ce)}while(!0);return ja=jo=null,H.H=h,H.A=y,At=f,at!==null?0:(Ht=null,ot=0,bd(),un)}function t4(){for(;at!==null&&!Bn();)Ox(at)}function Ox(s){var l=tx(s.alternate,s,$a);s.memoizedProps=s.pendingProps,l===null?ah(s):at=l}function Dx(s){var l=s,f=l.alternate;switch(l.tag){case 15:case 0:l=K_(f,l,l.pendingProps,l.type,void 0,ot);break;case 11:l=K_(f,l,l.pendingProps,l.type.render,l.ref,ot);break;case 5:fm(l);default:rx(f,l),l=at=R2(l,$a),l=tx(f,l,$a)}s.memoizedProps=s.pendingProps,l===null?ah(s):at=l}function Kl(s,l,f,h){ja=jo=null,fm(l),Bl=null,xu=0;var y=l.return;try{if(HI(s,y,l,f,ot)){un=1,$d(s,li(f,s.current)),at=null;return}}catch(x){if(y!==null)throw at=y,x;un=1,$d(s,li(f,s.current)),at=null;return}l.flags&32768?(dt||h===1?s=!0:ql||(ot&536870912)!==0?s=!1:(Ts=s=!0,(h===2||h===9||h===3||h===6)&&(h=Xr.current,h!==null&&h.tag===13&&(h.flags|=16384))),Mx(l,s)):ah(l)}function ah(s){var l=s;do{if((l.flags&32768)!==0){Mx(l,Ts);return}s=l.return;var f=$I(l.alternate,l,$a);if(f!==null){at=f;return}if(l=l.sibling,l!==null){at=l;return}at=l=s}while(l!==null);un===0&&(un=5)}function Mx(s,l){do{var f=XI(s.alternate,s);if(f!==null){f.flags&=32767,at=f;return}if(f=s.return,f!==null&&(f.flags|=32768,f.subtreeFlags=0,f.deletions=null),!l&&(s=s.sibling,s!==null)){at=s;return}at=s=f}while(s!==null);un=6,at=null}function Px(s,l,f,h,y,x,T,B,X){s.cancelPendingCommit=null;do sh();while(Nn!==0);if((At&6)!==0)throw Error(r(327));if(l!==null){if(l===s.current)throw Error(r(177));if(x=l.lanes|l.childLanes,x|=Bp,Np(s,f,x,T,B,X),s===Ht&&(at=Ht=null,ot=0),Xl=l,Rs=s,Xa=f,$m=x,Xm=y,Ax=h,(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,a4(Ee,function(){return Vx(),null})):(s.callbackNode=null,s.callbackPriority=0),h=(l.flags&13878)!==0,(l.subtreeFlags&13878)!==0||h){h=H.T,H.T=null,y=G.p,G.p=2,T=At,At|=4;try{YI(s,l,f)}finally{At=T,G.p=y,H.T=h}}Nn=1,kx(),jx(),Lx()}}function kx(){if(Nn===1){Nn=0;var s=Rs,l=Xl,f=(l.flags&13878)!==0;if((l.subtreeFlags&13878)!==0||f){f=H.T,H.T=null;var h=G.p;G.p=2;var y=At;At|=4;try{mx(l,s);var x=l1,T=w2(s.containerInfo),B=x.focusedElem,X=x.selectionRange;if(T!==B&&B&&B.ownerDocument&&x2(B.ownerDocument.documentElement,B)){if(X!==null&&Mp(B)){var ne=X.start,ce=X.end;if(ce===void 0&&(ce=ne),"selectionStart"in B)B.selectionStart=ne,B.selectionEnd=Math.min(ce,B.value.length);else{var he=B.ownerDocument||document,re=he&&he.defaultView||window;if(re.getSelection){var ae=re.getSelection(),Ie=B.textContent.length,ze=Math.min(X.start,Ie),Vt=X.end===void 0?ze:Math.min(X.end,Ie);!ae.extend&&ze>Vt&&(T=Vt,Vt=ze,ze=T);var Q=_2(B,ze),K=_2(B,Vt);if(Q&&K&&(ae.rangeCount!==1||ae.anchorNode!==Q.node||ae.anchorOffset!==Q.offset||ae.focusNode!==K.node||ae.focusOffset!==K.offset)){var ee=he.createRange();ee.setStart(Q.node,Q.offset),ae.removeAllRanges(),ze>Vt?(ae.addRange(ee),ae.extend(K.node,K.offset)):(ee.setEnd(K.node,K.offset),ae.addRange(ee))}}}}for(he=[],ae=B;ae=ae.parentNode;)ae.nodeType===1&&he.push({element:ae,left:ae.scrollLeft,top:ae.scrollTop});for(typeof B.focus=="function"&&B.focus(),B=0;B<he.length;B++){var fe=he[B];fe.element.scrollLeft=fe.left,fe.element.scrollTop=fe.top}}yh=!!o1,l1=o1=null}finally{At=y,G.p=h,H.T=f}}s.current=l,Nn=2}}function jx(){if(Nn===2){Nn=0;var s=Rs,l=Xl,f=(l.flags&8772)!==0;if((l.subtreeFlags&8772)!==0||f){f=H.T,H.T=null;var h=G.p;G.p=2;var y=At;At|=4;try{ux(s,l.alternate,l)}finally{At=y,G.p=h,H.T=f}}Nn=3}}function Lx(){if(Nn===4||Nn===3){Nn=0,dr();var s=Rs,l=Xl,f=Xa,h=Ax;(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?Nn=5:(Nn=0,Xl=Rs=null,Bx(s,s.pendingLanes));var y=s.pendingLanes;if(y===0&&(Ns=null),Ra(f),l=l.stateNode,Me&&typeof Me.onCommitFiberRoot=="function")try{Me.onCommitFiberRoot(De,l,void 0,(l.current.flags&128)===128)}catch{}if(h!==null){l=H.T,y=G.p,G.p=2,H.T=null;try{for(var x=s.onRecoverableError,T=0;T<h.length;T++){var B=h[T];x(B.value,{componentStack:B.stack})}}finally{H.T=l,G.p=y}}(Xa&3)!==0&&sh(),pa(s),y=s.pendingLanes,(f&261930)!==0&&(y&42)!==0?s===Ym?Lu++:(Lu=0,Ym=s):Lu=0,Bu(0)}}function Bx(s,l){(s.pooledCacheLanes&=l)===0&&(l=s.pooledCache,l!=null&&(s.pooledCache=null,yu(l)))}function sh(){return kx(),jx(),Lx(),Vx()}function Vx(){if(Nn!==5)return!1;var s=Rs,l=$m;$m=0;var f=Ra(Xa),h=H.T,y=G.p;try{G.p=32>f?32:f,H.T=null,f=Xm,Xm=null;var x=Rs,T=Xa;if(Nn=0,Xl=Rs=null,Xa=0,(At&6)!==0)throw Error(r(331));var B=At;if(At|=4,xx(x.current),vx(x,x.current,T,f),At=B,Bu(0,!1),Me&&typeof Me.onPostCommitFiberRoot=="function")try{Me.onPostCommitFiberRoot(De,x)}catch{}return!0}finally{G.p=y,H.T=h,Bx(s,l)}}function Fx(s,l,f){l=li(f,l),l=Cm(s.stateNode,l,2),s=As(s,l,2),s!==null&&(_o(s,2),pa(s))}function Ot(s,l,f){if(s.tag===3)Fx(s,s,f);else for(;l!==null;){if(l.tag===3){Fx(l,s,f);break}else if(l.tag===1){var h=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(Ns===null||!Ns.has(h))){s=li(f,s),f=U_(2),h=As(l,f,2),h!==null&&(z_(f,h,l,s),_o(h,2),pa(h));break}}l=l.return}}function Qm(s,l,f){var h=s.pingCache;if(h===null){h=s.pingCache=new QI;var y=new Set;h.set(l,y)}else y=h.get(l),y===void 0&&(y=new Set,h.set(l,y));y.has(f)||(Hm=!0,y.add(f),s=n4.bind(null,s,l,f),l.then(s,s))}function n4(s,l,f){var h=s.pingCache;h!==null&&h.delete(l),s.pingedLanes|=s.suspendedLanes&f,s.warmLanes&=~f,Ht===s&&(ot&f)===f&&(un===4||un===3&&(ot&62914560)===ot&&300>zt()-eh?(At&2)===0&&Yl(s,0):Gm|=f,$l===ot&&($l=0)),pa(s)}function Ux(s,l){l===0&&(l=nd()),s=Mo(s,l),s!==null&&(_o(s,l),pa(s))}function r4(s){var l=s.memoizedState,f=0;l!==null&&(f=l.retryLane),Ux(s,f)}function i4(s,l){var f=0;switch(s.tag){case 31:case 13:var h=s.stateNode,y=s.memoizedState;y!==null&&(f=y.retryLane);break;case 19:h=s.stateNode;break;case 22:h=s.stateNode._retryCache;break;default:throw Error(r(314))}h!==null&&h.delete(l),Ux(s,f)}function a4(s,l){return vt(s,l)}var oh=null,Wl=null,Zm=!1,lh=!1,Jm=!1,Ds=0;function pa(s){s!==Wl&&s.next===null&&(Wl===null?oh=Wl=s:Wl=Wl.next=s),lh=!0,Zm||(Zm=!0,o4())}function Bu(s,l){if(!Jm&&lh){Jm=!0;do for(var f=!1,h=oh;h!==null;){if(s!==0){var y=h.pendingLanes;if(y===0)var x=0;else{var T=h.suspendedLanes,B=h.pingedLanes;x=(1<<31-ye(42|s)+1)-1,x&=y&~(T&~B),x=x&201326741?x&201326741|1:x?x|2:0}x!==0&&(f=!0,qx(h,x))}else x=ot,x=Wi(h,h===Ht?x:0,h.cancelPendingCommit!==null||h.timeoutHandle!==-1),(x&3)===0||bi(h,x)||(f=!0,qx(h,x));h=h.next}while(f);Jm=!1}}function s4(){zx()}function zx(){lh=Zm=!1;var s=0;Ds!==0&&v4()&&(s=Ds);for(var l=zt(),f=null,h=oh;h!==null;){var y=h.next,x=Hx(h,l);x===0?(h.next=null,f===null?oh=y:f.next=y,y===null&&(Wl=f)):(f=h,(s!==0||(x&3)!==0)&&(lh=!0)),h=y}Nn!==0&&Nn!==5||Bu(s),Ds!==0&&(Ds=0)}function Hx(s,l){for(var f=s.suspendedLanes,h=s.pingedLanes,y=s.expirationTimes,x=s.pendingLanes&-62914561;0<x;){var T=31-ye(x),B=1<<T,X=y[T];X===-1?((B&f)===0||(B&h)!==0)&&(y[T]=Ip(B,l)):X<=l&&(s.expiredLanes|=B),x&=~B}if(l=Ht,f=ot,f=Wi(s,s===l?f:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),h=s.callbackNode,f===0||s===l&&(Rt===2||Rt===9)||s.cancelPendingCommit!==null)return h!==null&&h!==null&&Ln(h),s.callbackNode=null,s.callbackPriority=0;if((f&3)===0||bi(s,f)){if(l=f&-f,l===s.callbackPriority)return l;switch(h!==null&&Ln(h),Ra(f)){case 2:case 8:f=se;break;case 32:f=Ee;break;case 268435456:f=Ct;break;default:f=Ee}return h=Gx.bind(null,s),f=vt(f,h),s.callbackPriority=l,s.callbackNode=f,l}return h!==null&&h!==null&&Ln(h),s.callbackPriority=2,s.callbackNode=null,2}function Gx(s,l){if(Nn!==0&&Nn!==5)return s.callbackNode=null,s.callbackPriority=0,null;var f=s.callbackNode;if(sh()&&s.callbackNode!==f)return null;var h=ot;return h=Wi(s,s===Ht?h:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),h===0?null:(Sx(s,h,l),Hx(s,zt()),s.callbackNode!=null&&s.callbackNode===f?Gx.bind(null,s):null)}function qx(s,l){if(sh())return null;Sx(s,l,!0)}function o4(){_4(function(){(At&6)!==0?vt(zr,s4):zx()})}function e1(){if(Ds===0){var s=kl;s===0&&(s=Xt,Xt<<=1,(Xt&261888)===0&&(Xt=256)),Ds=s}return Ds}function $x(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:xl(""+s)}function Xx(s,l){var f=l.ownerDocument.createElement("input");return f.name=l.name,f.value=l.value,s.id&&f.setAttribute("form",s.id),l.parentNode.insertBefore(f,l),s=new FormData(s),f.parentNode.removeChild(f),s}function l4(s,l,f,h,y){if(l==="submit"&&f&&f.stateNode===y){var x=$x((y[Fn]||null).action),T=h.submitter;T&&(l=(l=T[Fn]||null)?$x(l.formAction):T.getAttribute("formAction"),l!==null&&(x=l,T=null));var B=new oa("action","action",null,h,y);s.push({event:B,listeners:[{instance:null,listener:function(){if(h.defaultPrevented){if(Ds!==0){var X=T?Xx(y,T):new FormData(y);xm(f,{pending:!0,data:X,method:y.method,action:x},null,X)}}else typeof x=="function"&&(B.preventDefault(),X=T?Xx(y,T):new FormData(y),xm(f,{pending:!0,data:X,method:y.method,action:x},x,X))},currentTarget:y}]})}}for(var t1=0;t1<Lp.length;t1++){var n1=Lp[t1],c4=n1.toLowerCase(),u4=n1[0].toUpperCase()+n1.slice(1);Di(c4,"on"+u4)}Di(b2,"onAnimationEnd"),Di(S2,"onAnimationIteration"),Di(C2,"onAnimationStart"),Di("dblclick","onDoubleClick"),Di("focusin","onFocus"),Di("focusout","onBlur"),Di(CI,"onTransitionRun"),Di(TI,"onTransitionStart"),Di(II,"onTransitionCancel"),Di(T2,"onTransitionEnd"),ra("onMouseEnter",["mouseout","mouseover"]),ra("onMouseLeave",["mouseout","mouseover"]),ra("onPointerEnter",["pointerout","pointerover"]),ra("onPointerLeave",["pointerout","pointerover"]),na("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),na("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),na("onBeforeInput",["compositionend","keypress","textInput","paste"]),na("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),na("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),na("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Vu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),f4=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Vu));function Yx(s,l){l=(l&4)!==0;for(var f=0;f<s.length;f++){var h=s[f],y=h.event;h=h.listeners;e:{var x=void 0;if(l)for(var T=h.length-1;0<=T;T--){var B=h[T],X=B.instance,ne=B.currentTarget;if(B=B.listener,X!==x&&y.isPropagationStopped())break e;x=B,y.currentTarget=ne;try{x(y)}catch(ce){Ad(ce)}y.currentTarget=null,x=X}else for(T=0;T<h.length;T++){if(B=h[T],X=B.instance,ne=B.currentTarget,B=B.listener,X!==x&&y.isPropagationStopped())break e;x=B,y.currentTarget=ne;try{x(y)}catch(ce){Ad(ce)}y.currentTarget=null,x=X}}}}function st(s,l){var f=l[ml];f===void 0&&(f=l[ml]=new Set);var h=s+"__bubble";f.has(h)||(Kx(l,s,2,!1),f.add(h))}function r1(s,l,f){var h=0;l&&(h|=4),Kx(f,s,h,l)}var ch="_reactListening"+Math.random().toString(36).slice(2);function i1(s){if(!s[ch]){s[ch]=!0,Qc.forEach(function(f){f!=="selectionchange"&&(f4.has(f)||r1(f,!1,s),r1(f,!0,s))});var l=s.nodeType===9?s:s.ownerDocument;l===null||l[ch]||(l[ch]=!0,r1("selectionchange",!1,l))}}function Kx(s,l,f,h){switch(bw(l)){case 2:var y=V4;break;case 8:y=F4;break;default:y=_1}f=y.bind(null,l,f,s),y=void 0,!So||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(y=!0),h?y!==void 0?s.addEventListener(l,f,{capture:!0,passive:y}):s.addEventListener(l,f,!0):y!==void 0?s.addEventListener(l,f,{passive:y}):s.addEventListener(l,f,!1)}function a1(s,l,f,h,y){var x=h;if((l&1)===0&&(l&2)===0&&h!==null)e:for(;;){if(h===null)return;var T=h.tag;if(T===3||T===4){var B=h.stateNode.containerInfo;if(B===y)break;if(T===4)for(T=h.return;T!==null;){var X=T.tag;if((X===3||X===4)&&T.stateNode.containerInfo===y)return;T=T.return}for(;B!==null;){if(T=ea(B),T===null)return;if(X=T.tag,X===5||X===6||X===26||X===27){h=x=T;continue e}B=B.parentNode}}h=h.return}hs(function(){var ne=x,ce=ii(f),he=[];e:{var re=I2.get(s);if(re!==void 0){var ae=oa,Ie=s;switch(s){case"keypress":if(To(f)===0)break e;case"keydown":case"keyup":ae=xd;break;case"focusin":Ie="focus",ae=No;break;case"focusout":Ie="blur",ae=No;break;case"beforeblur":case"afterblur":ae=No;break;case"click":if(f.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ae=uu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ae=fd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ae=A;break;case b2:case S2:case C2:ae=hd;break;case T2:ae=F;break;case"scroll":case"scrollend":ae=cu;break;case"wheel":ae=ie;break;case"copy":case"cut":case"paste":ae=pd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ae=Ma;break;case"toggle":case"beforetoggle":ae=Qe}var ze=(l&4)!==0,Vt=!ze&&(s==="scroll"||s==="scrollend"),Q=ze?re!==null?re+"Capture":null:re;ze=[];for(var K=ne,ee;K!==null;){var fe=K;if(ee=fe.stateNode,fe=fe.tag,fe!==5&&fe!==26&&fe!==27||ee===null||Q===null||(fe=Ii(K,Q),fe!=null&&ze.push(Fu(K,fe,ee))),Vt)break;K=K.return}0<ze.length&&(re=new ae(re,Ie,null,f,ce),he.push({event:re,listeners:ze}))}}if((l&7)===0){e:{if(re=s==="mouseover"||s==="pointerover",ae=s==="mouseout"||s==="pointerout",re&&f!==su&&(Ie=f.relatedTarget||f.fromElement)&&(ea(Ie)||Ie[Zi]))break e;if((ae||re)&&(re=ce.window===ce?ce:(re=ce.ownerDocument)?re.defaultView||re.parentWindow:window,ae?(Ie=f.relatedTarget||f.toElement,ae=ne,Ie=Ie?ea(Ie):null,Ie!==null&&(Vt=a(Ie),ze=Ie.tag,Ie!==Vt||ze!==5&&ze!==27&&ze!==6)&&(Ie=null)):(ae=null,Ie=ne),ae!==Ie)){if(ze=uu,fe="onMouseLeave",Q="onMouseEnter",K="mouse",(s==="pointerout"||s==="pointerover")&&(ze=Ma,fe="onPointerLeave",Q="onPointerEnter",K="pointer"),Vt=ae==null?re:Hr(ae),ee=Ie==null?re:Hr(Ie),re=new ze(fe,K+"leave",ae,f,ce),re.target=Vt,re.relatedTarget=ee,fe=null,ea(ce)===ne&&(ze=new ze(Q,K+"enter",Ie,f,ce),ze.target=ee,ze.relatedTarget=Vt,fe=ze),Vt=fe,ae&&Ie)t:{for(ze=d4,Q=ae,K=Ie,ee=0,fe=Q;fe;fe=ze(fe))ee++;fe=0;for(var je=K;je;je=ze(je))fe++;for(;0<ee-fe;)Q=ze(Q),ee--;for(;0<fe-ee;)K=ze(K),fe--;for(;ee--;){if(Q===K||K!==null&&Q===K.alternate){ze=Q;break t}Q=ze(Q),K=ze(K)}ze=null}else ze=null;ae!==null&&Wx(he,re,ae,ze,!1),Ie!==null&&Vt!==null&&Wx(he,Vt,Ie,ze,!0)}}e:{if(re=ne?Hr(ne):window,ae=re.nodeName&&re.nodeName.toLowerCase(),ae==="select"||ae==="input"&&re.type==="file")var yt=h2;else if(f2(re))if(p2)yt=AI;else{yt=wI;var Re=xI}else ae=re.nodeName,!ae||ae.toLowerCase()!=="input"||re.type!=="checkbox"&&re.type!=="radio"?ne&&_l(ne.elementType)&&(yt=h2):yt=EI;if(yt&&(yt=yt(s,ne))){d2(he,yt,f,ce);break e}Re&&Re(s,re,ne),s==="focusout"&&ne&&re.type==="number"&&ne.memoizedProps.value!=null&&ru(re,"number",re.value)}switch(Re=ne?Hr(ne):window,s){case"focusin":(f2(Re)||Re.contentEditable==="true")&&(Tl=Re,Pp=ne,mu=null);break;case"focusout":mu=Pp=Tl=null;break;case"mousedown":kp=!0;break;case"contextmenu":case"mouseup":case"dragend":kp=!1,E2(he,f,ce);break;case"selectionchange":if(SI)break;case"keydown":case"keyup":E2(he,f,ce)}var Je;if(Et)e:{switch(s){case"compositionstart":var lt="onCompositionStart";break e;case"compositionend":lt="onCompositionEnd";break e;case"compositionupdate":lt="onCompositionUpdate";break e}lt=void 0}else Cl?Ro(s,f)&&(lt="onCompositionEnd"):s==="keydown"&&f.keyCode===229&&(lt="onCompositionStart");lt&&(ua&&f.locale!=="ko"&&(Cl||lt!=="onCompositionStart"?lt==="onCompositionEnd"&&Cl&&(Je=lu()):(sa=ce,ou="value"in sa?sa.value:sa.textContent,Cl=!0)),Re=uh(ne,lt),0<Re.length&&(lt=new ca(lt,s,null,f,ce),he.push({event:lt,listeners:Re}),Je?lt.data=Je:(Je=Sl(f),Je!==null&&(lt.data=Je)))),(Je=si?gI(s,f):vI(s,f))&&(lt=uh(ne,"onBeforeInput"),0<lt.length&&(Re=new ca("onBeforeInput","beforeinput",null,f,ce),he.push({event:Re,listeners:lt}),Re.data=Je)),l4(he,s,ne,f,ce)}Yx(he,l)})}function Fu(s,l,f){return{instance:s,listener:l,currentTarget:f}}function uh(s,l){for(var f=l+"Capture",h=[];s!==null;){var y=s,x=y.stateNode;if(y=y.tag,y!==5&&y!==26&&y!==27||x===null||(y=Ii(s,f),y!=null&&h.unshift(Fu(s,y,x)),y=Ii(s,l),y!=null&&h.push(Fu(s,y,x))),s.tag===3)return h;s=s.return}return[]}function d4(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function Wx(s,l,f,h,y){for(var x=l._reactName,T=[];f!==null&&f!==h;){var B=f,X=B.alternate,ne=B.stateNode;if(B=B.tag,X!==null&&X===h)break;B!==5&&B!==26&&B!==27||ne===null||(X=ne,y?(ne=Ii(f,x),ne!=null&&T.unshift(Fu(f,ne,X))):y||(ne=Ii(f,x),ne!=null&&T.push(Fu(f,ne,X)))),f=f.return}T.length!==0&&s.push({event:l,listeners:T})}var h4=/\r\n?/g,p4=/\u0000|\uFFFD/g;function Qx(s){return(typeof s=="string"?s:""+s).replace(h4,`
`).replace(p4,"")}function Zx(s,l){return l=Qx(l),Qx(s)===l}function Bt(s,l,f,h,y,x){switch(f){case"children":typeof h=="string"?l==="body"||l==="textarea"&&h===""||Nr(s,h):(typeof h=="number"||typeof h=="bigint")&&l!=="body"&&Nr(s,""+h);break;case"className":Gr(s,"class",h);break;case"tabIndex":Gr(s,"tabindex",h);break;case"dir":case"role":case"viewBox":case"width":case"height":Gr(s,f,h);break;case"style":au(s,h,x);break;case"data":if(l!=="object"){Gr(s,"data",h);break}case"src":case"href":if(h===""&&(l!=="a"||f!=="href")){s.removeAttribute(f);break}if(h==null||typeof h=="function"||typeof h=="symbol"||typeof h=="boolean"){s.removeAttribute(f);break}h=xl(""+h),s.setAttribute(f,h);break;case"action":case"formAction":if(typeof h=="function"){s.setAttribute(f,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof x=="function"&&(f==="formAction"?(l!=="input"&&Bt(s,l,"name",y.name,y,null),Bt(s,l,"formEncType",y.formEncType,y,null),Bt(s,l,"formMethod",y.formMethod,y,null),Bt(s,l,"formTarget",y.formTarget,y,null)):(Bt(s,l,"encType",y.encType,y,null),Bt(s,l,"method",y.method,y,null),Bt(s,l,"target",y.target,y,null)));if(h==null||typeof h=="symbol"||typeof h=="boolean"){s.removeAttribute(f);break}h=xl(""+h),s.setAttribute(f,h);break;case"onClick":h!=null&&(s.onclick=Ti);break;case"onScroll":h!=null&&st("scroll",s);break;case"onScrollEnd":h!=null&&st("scrollend",s);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(r(61));if(f=h.__html,f!=null){if(y.children!=null)throw Error(r(60));s.innerHTML=f}}break;case"multiple":s.multiple=h&&typeof h!="function"&&typeof h!="symbol";break;case"muted":s.muted=h&&typeof h!="function"&&typeof h!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(h==null||typeof h=="function"||typeof h=="boolean"||typeof h=="symbol"){s.removeAttribute("xlink:href");break}f=xl(""+h),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",f);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":h!=null&&typeof h!="function"&&typeof h!="symbol"?s.setAttribute(f,""+h):s.removeAttribute(f);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":h&&typeof h!="function"&&typeof h!="symbol"?s.setAttribute(f,""):s.removeAttribute(f);break;case"capture":case"download":h===!0?s.setAttribute(f,""):h!==!1&&h!=null&&typeof h!="function"&&typeof h!="symbol"?s.setAttribute(f,h):s.removeAttribute(f);break;case"cols":case"rows":case"size":case"span":h!=null&&typeof h!="function"&&typeof h!="symbol"&&!isNaN(h)&&1<=h?s.setAttribute(f,h):s.removeAttribute(f);break;case"rowSpan":case"start":h==null||typeof h=="function"||typeof h=="symbol"||isNaN(h)?s.removeAttribute(f):s.setAttribute(f,h);break;case"popover":st("beforetoggle",s),st("toggle",s),vl(s,"popover",h);break;case"xlinkActuate":xn(s,"http://www.w3.org/1999/xlink","xlink:actuate",h);break;case"xlinkArcrole":xn(s,"http://www.w3.org/1999/xlink","xlink:arcrole",h);break;case"xlinkRole":xn(s,"http://www.w3.org/1999/xlink","xlink:role",h);break;case"xlinkShow":xn(s,"http://www.w3.org/1999/xlink","xlink:show",h);break;case"xlinkTitle":xn(s,"http://www.w3.org/1999/xlink","xlink:title",h);break;case"xlinkType":xn(s,"http://www.w3.org/1999/xlink","xlink:type",h);break;case"xmlBase":xn(s,"http://www.w3.org/XML/1998/namespace","xml:base",h);break;case"xmlLang":xn(s,"http://www.w3.org/XML/1998/namespace","xml:lang",h);break;case"xmlSpace":xn(s,"http://www.w3.org/XML/1998/namespace","xml:space",h);break;case"is":vl(s,"is",h);break;case"innerText":case"textContent":break;default:(!(2<f.length)||f[0]!=="o"&&f[0]!=="O"||f[1]!=="n"&&f[1]!=="N")&&(f=ud.get(f)||f,vl(s,f,h))}}function s1(s,l,f,h,y,x){switch(f){case"style":au(s,h,x);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(r(61));if(f=h.__html,f!=null){if(y.children!=null)throw Error(r(60));s.innerHTML=f}}break;case"children":typeof h=="string"?Nr(s,h):(typeof h=="number"||typeof h=="bigint")&&Nr(s,""+h);break;case"onScroll":h!=null&&st("scroll",s);break;case"onScrollEnd":h!=null&&st("scrollend",s);break;case"onClick":h!=null&&(s.onclick=Ti);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Zc.hasOwnProperty(f))e:{if(f[0]==="o"&&f[1]==="n"&&(y=f.endsWith("Capture"),l=f.slice(2,y?f.length-7:void 0),x=s[Fn]||null,x=x!=null?x[f]:null,typeof x=="function"&&s.removeEventListener(l,x,y),typeof h=="function")){typeof x!="function"&&x!==null&&(f in s?s[f]=null:s.hasAttribute(f)&&s.removeAttribute(f)),s.addEventListener(l,h,y);break e}f in s?s[f]=h:h===!0?s.setAttribute(f,""):vl(s,f,h)}}}function rr(s,l,f){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":st("error",s),st("load",s);var h=!1,y=!1,x;for(x in f)if(f.hasOwnProperty(x)){var T=f[x];if(T!=null)switch(x){case"src":h=!0;break;case"srcSet":y=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,l));default:Bt(s,l,x,T,f,null)}}y&&Bt(s,l,"srcSet",f.srcSet,f,null),h&&Bt(s,l,"src",f.src,f,null);return;case"input":st("invalid",s);var B=x=T=y=null,X=null,ne=null;for(h in f)if(f.hasOwnProperty(h)){var ce=f[h];if(ce!=null)switch(h){case"name":y=ce;break;case"type":T=ce;break;case"checked":X=ce;break;case"defaultChecked":ne=ce;break;case"value":x=ce;break;case"defaultValue":B=ce;break;case"children":case"dangerouslySetInnerHTML":if(ce!=null)throw Error(r(137,l));break;default:Bt(s,l,h,ce,f,null)}}od(s,x,B,X,ne,T,y,!1);return;case"select":st("invalid",s),h=T=x=null;for(y in f)if(f.hasOwnProperty(y)&&(B=f[y],B!=null))switch(y){case"value":x=B;break;case"defaultValue":T=B;break;case"multiple":h=B;default:Bt(s,l,y,B,f,null)}l=x,f=T,s.multiple=!!h,l!=null?cs(s,!!h,l,!1):f!=null&&cs(s,!!h,f,!0);return;case"textarea":st("invalid",s),x=y=h=null;for(T in f)if(f.hasOwnProperty(T)&&(B=f[T],B!=null))switch(T){case"value":h=B;break;case"defaultValue":y=B;break;case"children":x=B;break;case"dangerouslySetInnerHTML":if(B!=null)throw Error(r(91));break;default:Bt(s,l,T,B,f,null)}us(s,h,y,x);return;case"option":for(X in f)if(f.hasOwnProperty(X)&&(h=f[X],h!=null))switch(X){case"selected":s.selected=h&&typeof h!="function"&&typeof h!="symbol";break;default:Bt(s,l,X,h,f,null)}return;case"dialog":st("beforetoggle",s),st("toggle",s),st("cancel",s),st("close",s);break;case"iframe":case"object":st("load",s);break;case"video":case"audio":for(h=0;h<Vu.length;h++)st(Vu[h],s);break;case"image":st("error",s),st("load",s);break;case"details":st("toggle",s);break;case"embed":case"source":case"link":st("error",s),st("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ne in f)if(f.hasOwnProperty(ne)&&(h=f[ne],h!=null))switch(ne){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,l));default:Bt(s,l,ne,h,f,null)}return;default:if(_l(l)){for(ce in f)f.hasOwnProperty(ce)&&(h=f[ce],h!==void 0&&s1(s,l,ce,h,f,void 0));return}}for(B in f)f.hasOwnProperty(B)&&(h=f[B],h!=null&&Bt(s,l,B,h,f,null))}function m4(s,l,f,h){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var y=null,x=null,T=null,B=null,X=null,ne=null,ce=null;for(ae in f){var he=f[ae];if(f.hasOwnProperty(ae)&&he!=null)switch(ae){case"checked":break;case"value":break;case"defaultValue":X=he;default:h.hasOwnProperty(ae)||Bt(s,l,ae,null,h,he)}}for(var re in h){var ae=h[re];if(he=f[re],h.hasOwnProperty(re)&&(ae!=null||he!=null))switch(re){case"type":x=ae;break;case"name":y=ae;break;case"checked":ne=ae;break;case"defaultChecked":ce=ae;break;case"value":T=ae;break;case"defaultValue":B=ae;break;case"children":case"dangerouslySetInnerHTML":if(ae!=null)throw Error(r(137,l));break;default:ae!==he&&Bt(s,l,re,ae,h,he)}}yl(s,T,B,X,ne,ce,x,y);return;case"select":ae=T=B=re=null;for(x in f)if(X=f[x],f.hasOwnProperty(x)&&X!=null)switch(x){case"value":break;case"multiple":ae=X;default:h.hasOwnProperty(x)||Bt(s,l,x,null,h,X)}for(y in h)if(x=h[y],X=f[y],h.hasOwnProperty(y)&&(x!=null||X!=null))switch(y){case"value":re=x;break;case"defaultValue":B=x;break;case"multiple":T=x;default:x!==X&&Bt(s,l,y,x,h,X)}l=B,f=T,h=ae,re!=null?cs(s,!!f,re,!1):!!h!=!!f&&(l!=null?cs(s,!!f,l,!0):cs(s,!!f,f?[]:"",!1));return;case"textarea":ae=re=null;for(B in f)if(y=f[B],f.hasOwnProperty(B)&&y!=null&&!h.hasOwnProperty(B))switch(B){case"value":break;case"children":break;default:Bt(s,l,B,null,h,y)}for(T in h)if(y=h[T],x=f[T],h.hasOwnProperty(T)&&(y!=null||x!=null))switch(T){case"value":re=y;break;case"defaultValue":ae=y;break;case"children":break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(r(91));break;default:y!==x&&Bt(s,l,T,y,h,x)}ld(s,re,ae);return;case"option":for(var Ie in f)if(re=f[Ie],f.hasOwnProperty(Ie)&&re!=null&&!h.hasOwnProperty(Ie))switch(Ie){case"selected":s.selected=!1;break;default:Bt(s,l,Ie,null,h,re)}for(X in h)if(re=h[X],ae=f[X],h.hasOwnProperty(X)&&re!==ae&&(re!=null||ae!=null))switch(X){case"selected":s.selected=re&&typeof re!="function"&&typeof re!="symbol";break;default:Bt(s,l,X,re,h,ae)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ze in f)re=f[ze],f.hasOwnProperty(ze)&&re!=null&&!h.hasOwnProperty(ze)&&Bt(s,l,ze,null,h,re);for(ne in h)if(re=h[ne],ae=f[ne],h.hasOwnProperty(ne)&&re!==ae&&(re!=null||ae!=null))switch(ne){case"children":case"dangerouslySetInnerHTML":if(re!=null)throw Error(r(137,l));break;default:Bt(s,l,ne,re,h,ae)}return;default:if(_l(l)){for(var Vt in f)re=f[Vt],f.hasOwnProperty(Vt)&&re!==void 0&&!h.hasOwnProperty(Vt)&&s1(s,l,Vt,void 0,h,re);for(ce in h)re=h[ce],ae=f[ce],!h.hasOwnProperty(ce)||re===ae||re===void 0&&ae===void 0||s1(s,l,ce,re,h,ae);return}}for(var Q in f)re=f[Q],f.hasOwnProperty(Q)&&re!=null&&!h.hasOwnProperty(Q)&&Bt(s,l,Q,null,h,re);for(he in h)re=h[he],ae=f[he],!h.hasOwnProperty(he)||re===ae||re==null&&ae==null||Bt(s,l,he,re,h,ae)}function Jx(s){switch(s){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function g4(){if(typeof performance.getEntriesByType=="function"){for(var s=0,l=0,f=performance.getEntriesByType("resource"),h=0;h<f.length;h++){var y=f[h],x=y.transferSize,T=y.initiatorType,B=y.duration;if(x&&B&&Jx(T)){for(T=0,B=y.responseEnd,h+=1;h<f.length;h++){var X=f[h],ne=X.startTime;if(ne>B)break;var ce=X.transferSize,he=X.initiatorType;ce&&Jx(he)&&(X=X.responseEnd,T+=ce*(X<B?1:(B-ne)/(X-ne)))}if(--h,l+=8*(x+T)/(y.duration/1e3),s++,10<s)break}}if(0<s)return l/s/1e6}return navigator.connection&&(s=navigator.connection.downlink,typeof s=="number")?s:5}var o1=null,l1=null;function fh(s){return s.nodeType===9?s:s.ownerDocument}function ew(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function tw(s,l){if(s===0)switch(l){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&l==="foreignObject"?0:s}function c1(s,l){return s==="textarea"||s==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.children=="bigint"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var u1=null;function v4(){var s=window.event;return s&&s.type==="popstate"?s===u1?!1:(u1=s,!0):(u1=null,!1)}var nw=typeof setTimeout=="function"?setTimeout:void 0,y4=typeof clearTimeout=="function"?clearTimeout:void 0,rw=typeof Promise=="function"?Promise:void 0,_4=typeof queueMicrotask=="function"?queueMicrotask:typeof rw<"u"?function(s){return rw.resolve(null).then(s).catch(x4)}:nw;function x4(s){setTimeout(function(){throw s})}function Ms(s){return s==="head"}function iw(s,l){var f=l,h=0;do{var y=f.nextSibling;if(s.removeChild(f),y&&y.nodeType===8)if(f=y.data,f==="/$"||f==="/&"){if(h===0){s.removeChild(y),ec(l);return}h--}else if(f==="$"||f==="$?"||f==="$~"||f==="$!"||f==="&")h++;else if(f==="html")Uu(s.ownerDocument.documentElement);else if(f==="head"){f=s.ownerDocument.head,Uu(f);for(var x=f.firstChild;x;){var T=x.nextSibling,B=x.nodeName;x[Ji]||B==="SCRIPT"||B==="STYLE"||B==="LINK"&&x.rel.toLowerCase()==="stylesheet"||f.removeChild(x),x=T}}else f==="body"&&Uu(s.ownerDocument.body);f=y}while(f);ec(l)}function aw(s,l){var f=s;s=0;do{var h=f.nextSibling;if(f.nodeType===1?l?(f._stashedDisplay=f.style.display,f.style.display="none"):(f.style.display=f._stashedDisplay||"",f.getAttribute("style")===""&&f.removeAttribute("style")):f.nodeType===3&&(l?(f._stashedText=f.nodeValue,f.nodeValue=""):f.nodeValue=f._stashedText||""),h&&h.nodeType===8)if(f=h.data,f==="/$"){if(s===0)break;s--}else f!=="$"&&f!=="$?"&&f!=="$~"&&f!=="$!"||s++;f=h}while(f)}function f1(s){var l=s.firstChild;for(l&&l.nodeType===10&&(l=l.nextSibling);l;){var f=l;switch(l=l.nextSibling,f.nodeName){case"HTML":case"HEAD":case"BODY":f1(f),gl(f);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(f.rel.toLowerCase()==="stylesheet")continue}s.removeChild(f)}}function w4(s,l,f,h){for(;s.nodeType===1;){var y=f;if(s.nodeName.toLowerCase()!==l.toLowerCase()){if(!h&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(h){if(!s[Ji])switch(l){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(x=s.getAttribute("rel"),x==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(x!==y.rel||s.getAttribute("href")!==(y.href==null||y.href===""?null:y.href)||s.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin)||s.getAttribute("title")!==(y.title==null?null:y.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(x=s.getAttribute("src"),(x!==(y.src==null?null:y.src)||s.getAttribute("type")!==(y.type==null?null:y.type)||s.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin))&&x&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(l==="input"&&s.type==="hidden"){var x=y.name==null?null:""+y.name;if(y.type==="hidden"&&s.getAttribute("name")===x)return s}else return s;if(s=hi(s.nextSibling),s===null)break}return null}function E4(s,l,f){if(l==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!f||(s=hi(s.nextSibling),s===null))return null;return s}function sw(s,l){for(;s.nodeType!==8;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!l||(s=hi(s.nextSibling),s===null))return null;return s}function d1(s){return s.data==="$?"||s.data==="$~"}function h1(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState!=="loading"}function A4(s,l){var f=s.ownerDocument;if(s.data==="$~")s._reactRetry=l;else if(s.data!=="$?"||f.readyState!=="loading")l();else{var h=function(){l(),f.removeEventListener("DOMContentLoaded",h)};f.addEventListener("DOMContentLoaded",h),s._reactRetry=h}}function hi(s){for(;s!=null;s=s.nextSibling){var l=s.nodeType;if(l===1||l===3)break;if(l===8){if(l=s.data,l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"||l==="F!"||l==="F")break;if(l==="/$"||l==="/&")return null}}return s}var p1=null;function ow(s){s=s.nextSibling;for(var l=0;s;){if(s.nodeType===8){var f=s.data;if(f==="/$"||f==="/&"){if(l===0)return hi(s.nextSibling);l--}else f!=="$"&&f!=="$!"&&f!=="$?"&&f!=="$~"&&f!=="&"||l++}s=s.nextSibling}return null}function lw(s){s=s.previousSibling;for(var l=0;s;){if(s.nodeType===8){var f=s.data;if(f==="$"||f==="$!"||f==="$?"||f==="$~"||f==="&"){if(l===0)return s;l--}else f!=="/$"&&f!=="/&"||l++}s=s.previousSibling}return null}function cw(s,l,f){switch(l=fh(f),s){case"html":if(s=l.documentElement,!s)throw Error(r(452));return s;case"head":if(s=l.head,!s)throw Error(r(453));return s;case"body":if(s=l.body,!s)throw Error(r(454));return s;default:throw Error(r(451))}}function Uu(s){for(var l=s.attributes;l.length;)s.removeAttributeNode(l[0]);gl(s)}var pi=new Map,uw=new Set;function dh(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var Ya=G.d;G.d={f:b4,r:S4,D:C4,C:T4,L:I4,m:N4,X:O4,S:R4,M:D4};function b4(){var s=Ya.f(),l=rh();return s||l}function S4(s){var l=ri(s);l!==null&&l.tag===5&&l.type==="form"?T_(l):Ya.r(s)}var Ql=typeof document>"u"?null:document;function fw(s,l,f){var h=Ql;if(h&&typeof l=="string"&&l){var y=Ir(l);y='link[rel="'+s+'"][href="'+y+'"]',typeof f=="string"&&(y+='[crossorigin="'+f+'"]'),uw.has(y)||(uw.add(y),s={rel:s,crossOrigin:f,href:l},h.querySelector(y)===null&&(l=h.createElement("link"),rr(l,"link",s),_n(l),h.head.appendChild(l)))}}function C4(s){Ya.D(s),fw("dns-prefetch",s,null)}function T4(s,l){Ya.C(s,l),fw("preconnect",s,l)}function I4(s,l,f){Ya.L(s,l,f);var h=Ql;if(h&&s&&l){var y='link[rel="preload"][as="'+Ir(l)+'"]';l==="image"&&f&&f.imageSrcSet?(y+='[imagesrcset="'+Ir(f.imageSrcSet)+'"]',typeof f.imageSizes=="string"&&(y+='[imagesizes="'+Ir(f.imageSizes)+'"]')):y+='[href="'+Ir(s)+'"]';var x=y;switch(l){case"style":x=Zl(s);break;case"script":x=Jl(s)}pi.has(x)||(s=g({rel:"preload",href:l==="image"&&f&&f.imageSrcSet?void 0:s,as:l},f),pi.set(x,s),h.querySelector(y)!==null||l==="style"&&h.querySelector(zu(x))||l==="script"&&h.querySelector(Hu(x))||(l=h.createElement("link"),rr(l,"link",s),_n(l),h.head.appendChild(l)))}}function N4(s,l){Ya.m(s,l);var f=Ql;if(f&&s){var h=l&&typeof l.as=="string"?l.as:"script",y='link[rel="modulepreload"][as="'+Ir(h)+'"][href="'+Ir(s)+'"]',x=y;switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":x=Jl(s)}if(!pi.has(x)&&(s=g({rel:"modulepreload",href:s},l),pi.set(x,s),f.querySelector(y)===null)){switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(f.querySelector(Hu(x)))return}h=f.createElement("link"),rr(h,"link",s),_n(h),f.head.appendChild(h)}}}function R4(s,l,f){Ya.S(s,l,f);var h=Ql;if(h&&s){var y=ta(h).hoistableStyles,x=Zl(s);l=l||"default";var T=y.get(x);if(!T){var B={loading:0,preload:null};if(T=h.querySelector(zu(x)))B.loading=5;else{s=g({rel:"stylesheet",href:s,"data-precedence":l},f),(f=pi.get(x))&&m1(s,f);var X=T=h.createElement("link");_n(X),rr(X,"link",s),X._p=new Promise(function(ne,ce){X.onload=ne,X.onerror=ce}),X.addEventListener("load",function(){B.loading|=1}),X.addEventListener("error",function(){B.loading|=2}),B.loading|=4,hh(T,l,h)}T={type:"stylesheet",instance:T,count:1,state:B},y.set(x,T)}}}function O4(s,l){Ya.X(s,l);var f=Ql;if(f&&s){var h=ta(f).hoistableScripts,y=Jl(s),x=h.get(y);x||(x=f.querySelector(Hu(y)),x||(s=g({src:s,async:!0},l),(l=pi.get(y))&&g1(s,l),x=f.createElement("script"),_n(x),rr(x,"link",s),f.head.appendChild(x)),x={type:"script",instance:x,count:1,state:null},h.set(y,x))}}function D4(s,l){Ya.M(s,l);var f=Ql;if(f&&s){var h=ta(f).hoistableScripts,y=Jl(s),x=h.get(y);x||(x=f.querySelector(Hu(y)),x||(s=g({src:s,async:!0,type:"module"},l),(l=pi.get(y))&&g1(s,l),x=f.createElement("script"),_n(x),rr(x,"link",s),f.head.appendChild(x)),x={type:"script",instance:x,count:1,state:null},h.set(y,x))}}function dw(s,l,f,h){var y=(y=be.current)?dh(y):null;if(!y)throw Error(r(446));switch(s){case"meta":case"title":return null;case"style":return typeof f.precedence=="string"&&typeof f.href=="string"?(l=Zl(f.href),f=ta(y).hoistableStyles,h=f.get(l),h||(h={type:"style",instance:null,count:0,state:null},f.set(l,h)),h):{type:"void",instance:null,count:0,state:null};case"link":if(f.rel==="stylesheet"&&typeof f.href=="string"&&typeof f.precedence=="string"){s=Zl(f.href);var x=ta(y).hoistableStyles,T=x.get(s);if(T||(y=y.ownerDocument||y,T={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},x.set(s,T),(x=y.querySelector(zu(s)))&&!x._p&&(T.instance=x,T.state.loading=5),pi.has(s)||(f={rel:"preload",as:"style",href:f.href,crossOrigin:f.crossOrigin,integrity:f.integrity,media:f.media,hrefLang:f.hrefLang,referrerPolicy:f.referrerPolicy},pi.set(s,f),x||M4(y,s,f,T.state))),l&&h===null)throw Error(r(528,""));return T}if(l&&h!==null)throw Error(r(529,""));return null;case"script":return l=f.async,f=f.src,typeof f=="string"&&l&&typeof l!="function"&&typeof l!="symbol"?(l=Jl(f),f=ta(y).hoistableScripts,h=f.get(l),h||(h={type:"script",instance:null,count:0,state:null},f.set(l,h)),h):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,s))}}function Zl(s){return'href="'+Ir(s)+'"'}function zu(s){return'link[rel="stylesheet"]['+s+"]"}function hw(s){return g({},s,{"data-precedence":s.precedence,precedence:null})}function M4(s,l,f,h){s.querySelector('link[rel="preload"][as="style"]['+l+"]")?h.loading=1:(l=s.createElement("link"),h.preload=l,l.addEventListener("load",function(){return h.loading|=1}),l.addEventListener("error",function(){return h.loading|=2}),rr(l,"link",f),_n(l),s.head.appendChild(l))}function Jl(s){return'[src="'+Ir(s)+'"]'}function Hu(s){return"script[async]"+s}function pw(s,l,f){if(l.count++,l.instance===null)switch(l.type){case"style":var h=s.querySelector('style[data-href~="'+Ir(f.href)+'"]');if(h)return l.instance=h,_n(h),h;var y=g({},f,{"data-href":f.href,"data-precedence":f.precedence,href:null,precedence:null});return h=(s.ownerDocument||s).createElement("style"),_n(h),rr(h,"style",y),hh(h,f.precedence,s),l.instance=h;case"stylesheet":y=Zl(f.href);var x=s.querySelector(zu(y));if(x)return l.state.loading|=4,l.instance=x,_n(x),x;h=hw(f),(y=pi.get(y))&&m1(h,y),x=(s.ownerDocument||s).createElement("link"),_n(x);var T=x;return T._p=new Promise(function(B,X){T.onload=B,T.onerror=X}),rr(x,"link",h),l.state.loading|=4,hh(x,f.precedence,s),l.instance=x;case"script":return x=Jl(f.src),(y=s.querySelector(Hu(x)))?(l.instance=y,_n(y),y):(h=f,(y=pi.get(x))&&(h=g({},f),g1(h,y)),s=s.ownerDocument||s,y=s.createElement("script"),_n(y),rr(y,"link",h),s.head.appendChild(y),l.instance=y);case"void":return null;default:throw Error(r(443,l.type))}else l.type==="stylesheet"&&(l.state.loading&4)===0&&(h=l.instance,l.state.loading|=4,hh(h,f.precedence,s));return l.instance}function hh(s,l,f){for(var h=f.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),y=h.length?h[h.length-1]:null,x=y,T=0;T<h.length;T++){var B=h[T];if(B.dataset.precedence===l)x=B;else if(x!==y)break}x?x.parentNode.insertBefore(s,x.nextSibling):(l=f.nodeType===9?f.head:f,l.insertBefore(s,l.firstChild))}function m1(s,l){s.crossOrigin==null&&(s.crossOrigin=l.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=l.referrerPolicy),s.title==null&&(s.title=l.title)}function g1(s,l){s.crossOrigin==null&&(s.crossOrigin=l.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=l.referrerPolicy),s.integrity==null&&(s.integrity=l.integrity)}var ph=null;function mw(s,l,f){if(ph===null){var h=new Map,y=ph=new Map;y.set(f,h)}else y=ph,h=y.get(f),h||(h=new Map,y.set(f,h));if(h.has(s))return h;for(h.set(s,null),f=f.getElementsByTagName(s),y=0;y<f.length;y++){var x=f[y];if(!(x[Ji]||x[yn]||s==="link"&&x.getAttribute("rel")==="stylesheet")&&x.namespaceURI!=="http://www.w3.org/2000/svg"){var T=x.getAttribute(l)||"";T=s+T;var B=h.get(T);B?B.push(x):h.set(T,[x])}}return h}function gw(s,l,f){s=s.ownerDocument||s,s.head.insertBefore(f,l==="title"?s.querySelector("head > title"):null)}function P4(s,l,f){if(f===1||l.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof l.precedence!="string"||typeof l.href!="string"||l.href==="")break;return!0;case"link":if(typeof l.rel!="string"||typeof l.href!="string"||l.href===""||l.onLoad||l.onError)break;switch(l.rel){case"stylesheet":return s=l.disabled,typeof l.precedence=="string"&&s==null;default:return!0}case"script":if(l.async&&typeof l.async!="function"&&typeof l.async!="symbol"&&!l.onLoad&&!l.onError&&l.src&&typeof l.src=="string")return!0}return!1}function vw(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}function k4(s,l,f,h){if(f.type==="stylesheet"&&(typeof h.media!="string"||matchMedia(h.media).matches!==!1)&&(f.state.loading&4)===0){if(f.instance===null){var y=Zl(h.href),x=l.querySelector(zu(y));if(x){l=x._p,l!==null&&typeof l=="object"&&typeof l.then=="function"&&(s.count++,s=mh.bind(s),l.then(s,s)),f.state.loading|=4,f.instance=x,_n(x);return}x=l.ownerDocument||l,h=hw(h),(y=pi.get(y))&&m1(h,y),x=x.createElement("link"),_n(x);var T=x;T._p=new Promise(function(B,X){T.onload=B,T.onerror=X}),rr(x,"link",h),f.instance=x}s.stylesheets===null&&(s.stylesheets=new Map),s.stylesheets.set(f,l),(l=f.state.preload)&&(f.state.loading&3)===0&&(s.count++,f=mh.bind(s),l.addEventListener("load",f),l.addEventListener("error",f))}}var v1=0;function j4(s,l){return s.stylesheets&&s.count===0&&vh(s,s.stylesheets),0<s.count||0<s.imgCount?function(f){var h=setTimeout(function(){if(s.stylesheets&&vh(s,s.stylesheets),s.unsuspend){var x=s.unsuspend;s.unsuspend=null,x()}},6e4+l);0<s.imgBytes&&v1===0&&(v1=62500*g4());var y=setTimeout(function(){if(s.waitingForImages=!1,s.count===0&&(s.stylesheets&&vh(s,s.stylesheets),s.unsuspend)){var x=s.unsuspend;s.unsuspend=null,x()}},(s.imgBytes>v1?50:800)+l);return s.unsuspend=f,function(){s.unsuspend=null,clearTimeout(h),clearTimeout(y)}}:null}function mh(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)vh(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var gh=null;function vh(s,l){s.stylesheets=null,s.unsuspend!==null&&(s.count++,gh=new Map,l.forEach(L4,s),gh=null,mh.call(s))}function L4(s,l){if(!(l.state.loading&4)){var f=gh.get(s);if(f)var h=f.get(null);else{f=new Map,gh.set(s,f);for(var y=s.querySelectorAll("link[data-precedence],style[data-precedence]"),x=0;x<y.length;x++){var T=y[x];(T.nodeName==="LINK"||T.getAttribute("media")!=="not all")&&(f.set(T.dataset.precedence,T),h=T)}h&&f.set(null,h)}y=l.instance,T=y.getAttribute("data-precedence"),x=f.get(T)||h,x===h&&f.set(null,y),f.set(T,y),this.count++,h=mh.bind(this),y.addEventListener("load",h),y.addEventListener("error",h),x?x.parentNode.insertBefore(y,x.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(y,s.firstChild)),l.state.loading|=4}}var Gu={$$typeof:V,Provider:null,Consumer:null,_currentValue:le,_currentValue2:le,_threadCount:0};function B4(s,l,f,h,y,x,T,B,X){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Qi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Qi(0),this.hiddenUpdates=Qi(null),this.identifierPrefix=h,this.onUncaughtError=y,this.onCaughtError=x,this.onRecoverableError=T,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=X,this.incompleteTransitions=new Map}function yw(s,l,f,h,y,x,T,B,X,ne,ce,he){return s=new B4(s,l,f,T,X,ne,ce,he,B),l=1,x===!0&&(l|=24),x=$r(3,null,null,l),s.current=x,x.stateNode=s,l=Wp(),l.refCount++,s.pooledCache=l,l.refCount++,x.memoizedState={element:h,isDehydrated:f,cache:l},em(x),s}function _w(s){return s?(s=Rl,s):Rl}function xw(s,l,f,h,y,x){y=_w(y),h.context===null?h.context=y:h.pendingContext=y,h=Es(l),h.payload={element:f},x=x===void 0?null:x,x!==null&&(h.callback=x),f=As(s,h,l),f!==null&&(Pr(f,s,l),Eu(f,s,l))}function ww(s,l){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var f=s.retryLane;s.retryLane=f!==0&&f<l?f:l}}function y1(s,l){ww(s,l),(s=s.alternate)&&ww(s,l)}function Ew(s){if(s.tag===13||s.tag===31){var l=Mo(s,67108864);l!==null&&Pr(l,s,67108864),y1(s,67108864)}}function Aw(s){if(s.tag===13||s.tag===31){var l=Qr();l=wo(l);var f=Mo(s,l);f!==null&&Pr(f,s,l),y1(s,l)}}var yh=!0;function V4(s,l,f,h){var y=H.T;H.T=null;var x=G.p;try{G.p=2,_1(s,l,f,h)}finally{G.p=x,H.T=y}}function F4(s,l,f,h){var y=H.T;H.T=null;var x=G.p;try{G.p=8,_1(s,l,f,h)}finally{G.p=x,H.T=y}}function _1(s,l,f,h){if(yh){var y=x1(h);if(y===null)a1(s,l,h,_h,f),Sw(s,h);else if(z4(y,s,l,f,h))h.stopPropagation();else if(Sw(s,h),l&4&&-1<U4.indexOf(s)){for(;y!==null;){var x=ri(y);if(x!==null)switch(x.tag){case 3:if(x=x.stateNode,x.current.memoizedState.isDehydrated){var T=Tr(x.pendingLanes);if(T!==0){var B=x;for(B.pendingLanes|=2,B.entangledLanes|=2;T;){var X=1<<31-ye(T);B.entanglements[1]|=X,T&=~X}pa(x),(At&6)===0&&(th=zt()+500,Bu(0))}}break;case 31:case 13:B=Mo(x,2),B!==null&&Pr(B,x,2),rh(),y1(x,2)}if(x=x1(h),x===null&&a1(s,l,h,_h,f),x===y)break;y=x}y!==null&&h.stopPropagation()}else a1(s,l,h,null,f)}}function x1(s){return s=ii(s),w1(s)}var _h=null;function w1(s){if(_h=null,s=ea(s),s!==null){var l=a(s);if(l===null)s=null;else{var f=l.tag;if(f===13){if(s=o(l),s!==null)return s;s=null}else if(f===31){if(s=c(l),s!==null)return s;s=null}else if(f===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;s=null}else l!==s&&(s=null)}}return _h=s,null}function bw(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(xr()){case zr:return 2;case se:return 8;case Ee:case ke:return 32;case Ct:return 268435456;default:return 32}default:return 32}}var E1=!1,Ps=null,ks=null,js=null,qu=new Map,$u=new Map,Ls=[],U4="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Sw(s,l){switch(s){case"focusin":case"focusout":Ps=null;break;case"dragenter":case"dragleave":ks=null;break;case"mouseover":case"mouseout":js=null;break;case"pointerover":case"pointerout":qu.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":$u.delete(l.pointerId)}}function Xu(s,l,f,h,y,x){return s===null||s.nativeEvent!==x?(s={blockedOn:l,domEventName:f,eventSystemFlags:h,nativeEvent:x,targetContainers:[y]},l!==null&&(l=ri(l),l!==null&&Ew(l)),s):(s.eventSystemFlags|=h,l=s.targetContainers,y!==null&&l.indexOf(y)===-1&&l.push(y),s)}function z4(s,l,f,h,y){switch(l){case"focusin":return Ps=Xu(Ps,s,l,f,h,y),!0;case"dragenter":return ks=Xu(ks,s,l,f,h,y),!0;case"mouseover":return js=Xu(js,s,l,f,h,y),!0;case"pointerover":var x=y.pointerId;return qu.set(x,Xu(qu.get(x)||null,s,l,f,h,y)),!0;case"gotpointercapture":return x=y.pointerId,$u.set(x,Xu($u.get(x)||null,s,l,f,h,y)),!0}return!1}function Cw(s){var l=ea(s.target);if(l!==null){var f=a(l);if(f!==null){if(l=f.tag,l===13){if(l=o(f),l!==null){s.blockedOn=l,Si(s.priority,function(){Aw(f)});return}}else if(l===31){if(l=c(f),l!==null){s.blockedOn=l,Si(s.priority,function(){Aw(f)});return}}else if(l===3&&f.stateNode.current.memoizedState.isDehydrated){s.blockedOn=f.tag===3?f.stateNode.containerInfo:null;return}}}s.blockedOn=null}function xh(s){if(s.blockedOn!==null)return!1;for(var l=s.targetContainers;0<l.length;){var f=x1(s.nativeEvent);if(f===null){f=s.nativeEvent;var h=new f.constructor(f.type,f);su=h,f.target.dispatchEvent(h),su=null}else return l=ri(f),l!==null&&Ew(l),s.blockedOn=f,!1;l.shift()}return!0}function Tw(s,l,f){xh(s)&&f.delete(l)}function H4(){E1=!1,Ps!==null&&xh(Ps)&&(Ps=null),ks!==null&&xh(ks)&&(ks=null),js!==null&&xh(js)&&(js=null),qu.forEach(Tw),$u.forEach(Tw)}function wh(s,l){s.blockedOn===l&&(s.blockedOn=null,E1||(E1=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,H4)))}var Eh=null;function Iw(s){Eh!==s&&(Eh=s,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Eh===s&&(Eh=null);for(var l=0;l<s.length;l+=3){var f=s[l],h=s[l+1],y=s[l+2];if(typeof h!="function"){if(w1(h||f)===null)continue;break}var x=ri(f);x!==null&&(s.splice(l,3),l-=3,xm(x,{pending:!0,data:y,method:f.method,action:h},h,y))}}))}function ec(s){function l(X){return wh(X,s)}Ps!==null&&wh(Ps,s),ks!==null&&wh(ks,s),js!==null&&wh(js,s),qu.forEach(l),$u.forEach(l);for(var f=0;f<Ls.length;f++){var h=Ls[f];h.blockedOn===s&&(h.blockedOn=null)}for(;0<Ls.length&&(f=Ls[0],f.blockedOn===null);)Cw(f),f.blockedOn===null&&Ls.shift();if(f=(s.ownerDocument||s).$$reactFormReplay,f!=null)for(h=0;h<f.length;h+=3){var y=f[h],x=f[h+1],T=y[Fn]||null;if(typeof x=="function")T||Iw(f);else if(T){var B=null;if(x&&x.hasAttribute("formAction")){if(y=x,T=x[Fn]||null)B=T.formAction;else if(w1(y)!==null)continue}else B=T.action;typeof B=="function"?f[h+1]=B:(f.splice(h,3),h-=3),Iw(f)}}}function Nw(){function s(x){x.canIntercept&&x.info==="react-transition"&&x.intercept({handler:function(){return new Promise(function(T){return y=T})},focusReset:"manual",scroll:"manual"})}function l(){y!==null&&(y(),y=null),h||setTimeout(f,20)}function f(){if(!h&&!navigation.transition){var x=navigation.currentEntry;x&&x.url!=null&&navigation.navigate(x.url,{state:x.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var h=!1,y=null;return navigation.addEventListener("navigate",s),navigation.addEventListener("navigatesuccess",l),navigation.addEventListener("navigateerror",l),setTimeout(f,100),function(){h=!0,navigation.removeEventListener("navigate",s),navigation.removeEventListener("navigatesuccess",l),navigation.removeEventListener("navigateerror",l),y!==null&&(y(),y=null)}}}function A1(s){this._internalRoot=s}Ah.prototype.render=A1.prototype.render=function(s){var l=this._internalRoot;if(l===null)throw Error(r(409));var f=l.current,h=Qr();xw(f,h,s,l,null,null)},Ah.prototype.unmount=A1.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var l=s.containerInfo;xw(s.current,2,null,s,null,null),rh(),l[Zi]=null}};function Ah(s){this._internalRoot=s}Ah.prototype.unstable_scheduleHydration=function(s){if(s){var l=rd();s={blockedOn:null,target:s,priority:l};for(var f=0;f<Ls.length&&l!==0&&l<Ls[f].priority;f++);Ls.splice(f,0,s),f===0&&Cw(s)}};var Rw=e.version;if(Rw!=="19.2.0")throw Error(r(527,Rw,"19.2.0"));G.findDOMNode=function(s){var l=s._reactInternals;if(l===void 0)throw typeof s.render=="function"?Error(r(188)):(s=Object.keys(s).join(","),Error(r(268,s)));return s=d(l),s=s!==null?m(s):null,s=s===null?null:s.stateNode,s};var G4={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:H,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var bh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!bh.isDisabled&&bh.supportsFiber)try{De=bh.inject(G4),Me=bh}catch{}}return Ku.createRoot=function(s,l){if(!i(s))throw Error(r(299));var f=!1,h="",y=L_,x=B_,T=V_;return l!=null&&(l.unstable_strictMode===!0&&(f=!0),l.identifierPrefix!==void 0&&(h=l.identifierPrefix),l.onUncaughtError!==void 0&&(y=l.onUncaughtError),l.onCaughtError!==void 0&&(x=l.onCaughtError),l.onRecoverableError!==void 0&&(T=l.onRecoverableError)),l=yw(s,1,!1,null,null,f,h,null,y,x,T,Nw),s[Zi]=l.current,i1(s),new A1(l)},Ku.hydrateRoot=function(s,l,f){if(!i(s))throw Error(r(299));var h=!1,y="",x=L_,T=B_,B=V_,X=null;return f!=null&&(f.unstable_strictMode===!0&&(h=!0),f.identifierPrefix!==void 0&&(y=f.identifierPrefix),f.onUncaughtError!==void 0&&(x=f.onUncaughtError),f.onCaughtError!==void 0&&(T=f.onCaughtError),f.onRecoverableError!==void 0&&(B=f.onRecoverableError),f.formState!==void 0&&(X=f.formState)),l=yw(s,1,!0,l,f??null,h,y,X,x,T,B,Nw),l.context=_w(null),f=l.current,h=Qr(),h=wo(h),y=Es(h),y.callback=null,As(f,y,h),f=h,l.current.lanes=f,_o(l,f),pa(l),s[Zi]=l.current,i1(s),new Ah(l)},Ku.version="19.2.0",Ku}var Fw;function tN(){if(Fw)return C1.exports;Fw=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),C1.exports=eN(),C1.exports}var nN=tN();/**
 * react-router v7.9.4
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Uw="popstate";function rN(n={}){function e(r,i){let{pathname:a,search:o,hash:c}=r.location;return Og("",{pathname:a,search:o,hash:c},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function t(r,i){return typeof i=="string"?i:Ef(i)}return aN(e,t,null,n)}function an(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function Ei(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function iN(){return Math.random().toString(36).substring(2,10)}function zw(n,e){return{usr:n.state,key:n.key,idx:e}}function Og(n,e,t=null,r){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?Dc(e):e,state:t,key:e&&e.key||r||iN()}}function Ef({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function Dc(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substring(r),n=n.substring(0,r)),n&&(e.pathname=n)}return e}function aN(n,e,t,r={}){let{window:i=document.defaultView,v5Compat:a=!1}=r,o=i.history,c="POP",u=null,d=m();d==null&&(d=0,o.replaceState({...o.state,idx:d},""));function m(){return(o.state||{idx:null}).idx}function g(){c="POP";let D=m(),C=D==null?null:D-d;d=D,u&&u({action:c,location:S.location,delta:C})}function _(D,C){c="PUSH";let k=Og(S.location,D,C);d=m()+1;let V=zw(k,d),U=S.createHref(k);try{o.pushState(V,"",U)}catch(q){if(q instanceof DOMException&&q.name==="DataCloneError")throw q;i.location.assign(U)}a&&u&&u({action:c,location:S.location,delta:1})}function w(D,C){c="REPLACE";let k=Og(S.location,D,C);d=m();let V=zw(k,d),U=S.createHref(k);o.replaceState(V,"",U),a&&u&&u({action:c,location:S.location,delta:0})}function E(D){return sN(D)}let S={get action(){return c},get location(){return n(i,o)},listen(D){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(Uw,g),u=D,()=>{i.removeEventListener(Uw,g),u=null}},createHref(D){return e(i,D)},createURL:E,encodeLocation(D){let C=E(D);return{pathname:C.pathname,search:C.search,hash:C.hash}},push:_,replace:w,go(D){return o.go(D)}};return S}function sN(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),an(t,"No window.location.(origin|href) available to create URL");let r=typeof n=="string"?n:Ef(n);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=t+r),new URL(r,t)}function mS(n,e,t="/"){return oN(n,e,t,!1)}function oN(n,e,t,r){let i=typeof e=="string"?Dc(e):e,a=ts(i.pathname||"/",t);if(a==null)return null;let o=gS(n);lN(o);let c=null;for(let u=0;c==null&&u<o.length;++u){let d=_N(a);c=vN(o[u],d,r)}return c}function gS(n,e=[],t=[],r="",i=!1){let a=(o,c,u=i,d)=>{let m={relativePath:d===void 0?o.path||"":d,caseSensitive:o.caseSensitive===!0,childrenIndex:c,route:o};if(m.relativePath.startsWith("/")){if(!m.relativePath.startsWith(r)&&u)return;an(m.relativePath.startsWith(r),`Absolute route path "${m.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),m.relativePath=m.relativePath.slice(r.length)}let g=Za([r,m.relativePath]),_=t.concat(m);o.children&&o.children.length>0&&(an(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${g}".`),gS(o.children,e,_,g,u)),!(o.path==null&&!o.index)&&e.push({path:g,score:mN(g,o.index),routesMeta:_})};return n.forEach((o,c)=>{if(o.path===""||!o.path?.includes("?"))a(o,c);else for(let u of vS(o.path))a(o,c,!0,u)}),e}function vS(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,i=t.endsWith("?"),a=t.replace(/\?$/,"");if(r.length===0)return i?[a,""]:[a];let o=vS(r.join("/")),c=[];return c.push(...o.map(u=>u===""?a:[a,u].join("/"))),i&&c.push(...o),c.map(u=>n.startsWith("/")&&u===""?"/":u)}function lN(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:gN(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}var cN=/^:[\w-]+$/,uN=3,fN=2,dN=1,hN=10,pN=-2,Hw=n=>n==="*";function mN(n,e){let t=n.split("/"),r=t.length;return t.some(Hw)&&(r+=pN),e&&(r+=fN),t.filter(i=>!Hw(i)).reduce((i,a)=>i+(cN.test(a)?uN:a===""?dN:hN),r)}function gN(n,e){return n.length===e.length&&n.slice(0,-1).every((r,i)=>r===e[i])?n[n.length-1]-e[e.length-1]:0}function vN(n,e,t=!1){let{routesMeta:r}=n,i={},a="/",o=[];for(let c=0;c<r.length;++c){let u=r[c],d=c===r.length-1,m=a==="/"?e:e.slice(a.length)||"/",g=s0({path:u.relativePath,caseSensitive:u.caseSensitive,end:d},m),_=u.route;if(!g&&d&&t&&!r[r.length-1].route.index&&(g=s0({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},m)),!g)return null;Object.assign(i,g.params),o.push({params:i,pathname:Za([a,g.pathname]),pathnameBase:AN(Za([a,g.pathnameBase])),route:_}),g.pathnameBase!=="/"&&(a=Za([a,g.pathnameBase]))}return o}function s0(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=yN(n.path,n.caseSensitive,n.end),i=e.match(t);if(!i)return null;let a=i[0],o=a.replace(/(.)\/+$/,"$1"),c=i.slice(1);return{params:r.reduce((d,{paramName:m,isOptional:g},_)=>{if(m==="*"){let E=c[_]||"";o=a.slice(0,a.length-E.length).replace(/(.)\/+$/,"$1")}const w=c[_];return g&&!w?d[m]=void 0:d[m]=(w||"").replace(/%2F/g,"/"),d},{}),pathname:a,pathnameBase:o,pattern:n}}function yN(n,e=!1,t=!0){Ei(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let r=[],i="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,c,u)=>(r.push({paramName:c,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return n.endsWith("*")?(r.push({paramName:"*"}),i+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?i+="\\/*$":n!==""&&n!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function _N(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Ei(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function ts(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}function xN(n,e="/"){let{pathname:t,search:r="",hash:i=""}=typeof n=="string"?Dc(n):n;return{pathname:t?t.startsWith("/")?t:wN(t,e):e,search:bN(r),hash:SN(i)}}function wN(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(i=>{i===".."?t.length>1&&t.pop():i!=="."&&t.push(i)}),t.length>1?t.join("/"):"/"}function R1(n,e,t,r){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function EN(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function Pv(n){let e=EN(n);return e.map((t,r)=>r===e.length-1?t.pathname:t.pathnameBase)}function kv(n,e,t,r=!1){let i;typeof n=="string"?i=Dc(n):(i={...n},an(!i.pathname||!i.pathname.includes("?"),R1("?","pathname","search",i)),an(!i.pathname||!i.pathname.includes("#"),R1("#","pathname","hash",i)),an(!i.search||!i.search.includes("#"),R1("#","search","hash",i)));let a=n===""||i.pathname==="",o=a?"/":i.pathname,c;if(o==null)c=t;else{let g=e.length-1;if(!r&&o.startsWith("..")){let _=o.split("/");for(;_[0]==="..";)_.shift(),g-=1;i.pathname=_.join("/")}c=g>=0?e[g]:"/"}let u=xN(i,c),d=o&&o!=="/"&&o.endsWith("/"),m=(a||o===".")&&t.endsWith("/");return!u.pathname.endsWith("/")&&(d||m)&&(u.pathname+="/"),u}var Za=n=>n.join("/").replace(/\/\/+/g,"/"),AN=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),bN=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,SN=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function CN(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}var yS=["POST","PUT","PATCH","DELETE"];new Set(yS);var TN=["GET",...yS];new Set(TN);var Mc=P.createContext(null);Mc.displayName="DataRouter";var G0=P.createContext(null);G0.displayName="DataRouterState";P.createContext(!1);var _S=P.createContext({isTransitioning:!1});_S.displayName="ViewTransition";var IN=P.createContext(new Map);IN.displayName="Fetchers";var NN=P.createContext(null);NN.displayName="Await";var $i=P.createContext(null);$i.displayName="Navigation";var Bf=P.createContext(null);Bf.displayName="Location";var Xi=P.createContext({outlet:null,matches:[],isDataRoute:!1});Xi.displayName="Route";var jv=P.createContext(null);jv.displayName="RouteError";function RN(n,{relative:e}={}){an(Pc(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:r}=P.useContext($i),{hash:i,pathname:a,search:o}=Vf(n,{relative:e}),c=a;return t!=="/"&&(c=a==="/"?t:Za([t,a])),r.createHref({pathname:c,search:o,hash:i})}function Pc(){return P.useContext(Bf)!=null}function Yi(){return an(Pc(),"useLocation() may be used only in the context of a <Router> component."),P.useContext(Bf).location}var xS="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function wS(n){P.useContext($i).static||P.useLayoutEffect(n)}function ol(){let{isDataRoute:n}=P.useContext(Xi);return n?GN():ON()}function ON(){an(Pc(),"useNavigate() may be used only in the context of a <Router> component.");let n=P.useContext(Mc),{basename:e,navigator:t}=P.useContext($i),{matches:r}=P.useContext(Xi),{pathname:i}=Yi(),a=JSON.stringify(Pv(r)),o=P.useRef(!1);return wS(()=>{o.current=!0}),P.useCallback((u,d={})=>{if(Ei(o.current,xS),!o.current)return;if(typeof u=="number"){t.go(u);return}let m=kv(u,JSON.parse(a),i,d.relative==="path");n==null&&e!=="/"&&(m.pathname=m.pathname==="/"?e:Za([e,m.pathname])),(d.replace?t.replace:t.push)(m,d.state,d)},[e,t,a,i,n])}P.createContext(null);function DN(){let{matches:n}=P.useContext(Xi),e=n[n.length-1];return e?e.params:{}}function Vf(n,{relative:e}={}){let{matches:t}=P.useContext(Xi),{pathname:r}=Yi(),i=JSON.stringify(Pv(t));return P.useMemo(()=>kv(n,JSON.parse(i),r,e==="path"),[n,i,r,e])}function MN(n,e){return ES(n,e)}function ES(n,e,t,r,i){an(Pc(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=P.useContext($i),{matches:o}=P.useContext(Xi),c=o[o.length-1],u=c?c.params:{},d=c?c.pathname:"/",m=c?c.pathnameBase:"/",g=c&&c.route;{let k=g&&g.path||"";AS(d,!g||k.endsWith("*")||k.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${d}" (under <Route path="${k}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${k}"> to <Route path="${k==="/"?"*":`${k}/*`}">.`)}let _=Yi(),w;if(e){let k=typeof e=="string"?Dc(e):e;an(m==="/"||k.pathname?.startsWith(m),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${m}" but pathname "${k.pathname}" was given in the \`location\` prop.`),w=k}else w=_;let E=w.pathname||"/",S=E;if(m!=="/"){let k=m.replace(/^\//,"").split("/");S="/"+E.replace(/^\//,"").split("/").slice(k.length).join("/")}let D=mS(n,{pathname:S});Ei(g||D!=null,`No routes matched location "${w.pathname}${w.search}${w.hash}" `),Ei(D==null||D[D.length-1].route.element!==void 0||D[D.length-1].route.Component!==void 0||D[D.length-1].route.lazy!==void 0,`Matched leaf route at location "${w.pathname}${w.search}${w.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let C=BN(D&&D.map(k=>Object.assign({},k,{params:Object.assign({},u,k.params),pathname:Za([m,a.encodeLocation?a.encodeLocation(k.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:k.pathname]),pathnameBase:k.pathnameBase==="/"?m:Za([m,a.encodeLocation?a.encodeLocation(k.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:k.pathnameBase])})),o,t,r,i);return e&&C?P.createElement(Bf.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...w},navigationType:"POP"}},C):C}function PN(){let n=HN(),e=CN(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},a={padding:"2px 4px",backgroundColor:r},o=null;return console.error("Error handled by React Router default ErrorBoundary:",n),o=P.createElement(P.Fragment,null,P.createElement("p",null," Hey developer "),P.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",P.createElement("code",{style:a},"ErrorBoundary")," or"," ",P.createElement("code",{style:a},"errorElement")," prop on your route.")),P.createElement(P.Fragment,null,P.createElement("h2",null,"Unexpected Application Error!"),P.createElement("h3",{style:{fontStyle:"italic"}},e),t?P.createElement("pre",{style:i},t):null,o)}var kN=P.createElement(PN,null),jN=class extends P.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){this.props.unstable_onError?this.props.unstable_onError(n,e):console.error("React Router caught the following error during render",n)}render(){return this.state.error!==void 0?P.createElement(Xi.Provider,{value:this.props.routeContext},P.createElement(jv.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function LN({routeContext:n,match:e,children:t}){let r=P.useContext(Mc);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),P.createElement(Xi.Provider,{value:n},t)}function BN(n,e=[],t=null,r=null,i=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let a=n,o=t?.errors;if(o!=null){let d=a.findIndex(m=>m.route.id&&o?.[m.route.id]!==void 0);an(d>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),a=a.slice(0,Math.min(a.length,d+1))}let c=!1,u=-1;if(t)for(let d=0;d<a.length;d++){let m=a[d];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(u=d),m.route.id){let{loaderData:g,errors:_}=t,w=m.route.loader&&!g.hasOwnProperty(m.route.id)&&(!_||_[m.route.id]===void 0);if(m.route.lazy||w){c=!0,u>=0?a=a.slice(0,u+1):a=[a[0]];break}}}return a.reduceRight((d,m,g)=>{let _,w=!1,E=null,S=null;t&&(_=o&&m.route.id?o[m.route.id]:void 0,E=m.route.errorElement||kN,c&&(u<0&&g===0?(AS("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),w=!0,S=null):u===g&&(w=!0,S=m.route.hydrateFallbackElement||null)));let D=e.concat(a.slice(0,g+1)),C=()=>{let k;return _?k=E:w?k=S:m.route.Component?k=P.createElement(m.route.Component,null):m.route.element?k=m.route.element:k=d,P.createElement(LN,{match:m,routeContext:{outlet:d,matches:D,isDataRoute:t!=null},children:k})};return t&&(m.route.ErrorBoundary||m.route.errorElement||g===0)?P.createElement(jN,{location:t.location,revalidation:t.revalidation,component:E,error:_,children:C(),routeContext:{outlet:null,matches:D,isDataRoute:!0},unstable_onError:r}):C()},null)}function Lv(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function VN(n){let e=P.useContext(Mc);return an(e,Lv(n)),e}function FN(n){let e=P.useContext(G0);return an(e,Lv(n)),e}function UN(n){let e=P.useContext(Xi);return an(e,Lv(n)),e}function Bv(n){let e=UN(n),t=e.matches[e.matches.length-1];return an(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function zN(){return Bv("useRouteId")}function HN(){let n=P.useContext(jv),e=FN("useRouteError"),t=Bv("useRouteError");return n!==void 0?n:e.errors?.[t]}function GN(){let{router:n}=VN("useNavigate"),e=Bv("useNavigate"),t=P.useRef(!1);return wS(()=>{t.current=!0}),P.useCallback(async(i,a={})=>{Ei(t.current,xS),t.current&&(typeof i=="number"?n.navigate(i):await n.navigate(i,{fromRouteId:e,...a}))},[n,e])}var Gw={};function AS(n,e,t){!e&&!Gw[n]&&(Gw[n]=!0,Ei(!1,t))}P.memo(qN);function qN({routes:n,future:e,state:t,unstable_onError:r}){return ES(n,void 0,t,r,e)}function mi({to:n,replace:e,state:t,relative:r}){an(Pc(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=P.useContext($i);Ei(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:a}=P.useContext(Xi),{pathname:o}=Yi(),c=ol(),u=kv(n,Pv(a),o,r==="path"),d=JSON.stringify(u);return P.useEffect(()=>{c(JSON.parse(d),{replace:e,state:t,relative:r})},[c,d,r,e,t]),null}function rn(n){an(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function $N({basename:n="/",children:e=null,location:t,navigationType:r="POP",navigator:i,static:a=!1}){an(!Pc(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=n.replace(/^\/*/,"/"),c=P.useMemo(()=>({basename:o,navigator:i,static:a,future:{}}),[o,i,a]);typeof t=="string"&&(t=Dc(t));let{pathname:u="/",search:d="",hash:m="",state:g=null,key:_="default"}=t,w=P.useMemo(()=>{let E=ts(u,o);return E==null?null:{location:{pathname:E,search:d,hash:m,state:g,key:_},navigationType:r}},[o,u,d,m,g,_,r]);return Ei(w!=null,`<Router basename="${o}"> is not able to match the URL "${u}${d}${m}" because it does not start with the basename, so the <Router> won't render anything.`),w==null?null:P.createElement($i.Provider,{value:c},P.createElement(Bf.Provider,{children:e,value:w}))}function bS({children:n,location:e}){return MN(Dg(n),e)}function Dg(n,e=[]){let t=[];return P.Children.forEach(n,(r,i)=>{if(!P.isValidElement(r))return;let a=[...e,i];if(r.type===P.Fragment){t.push.apply(t,Dg(r.props.children,a));return}an(r.type===rn,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),an(!r.props.index||!r.props.children,"An index route cannot have child routes.");let o={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Dg(r.props.children,a)),t.push(o)}),t}var Hh="get",Gh="application/x-www-form-urlencoded";function q0(n){return n!=null&&typeof n.tagName=="string"}function XN(n){return q0(n)&&n.tagName.toLowerCase()==="button"}function YN(n){return q0(n)&&n.tagName.toLowerCase()==="form"}function KN(n){return q0(n)&&n.tagName.toLowerCase()==="input"}function WN(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function QN(n,e){return n.button===0&&(!e||e==="_self")&&!WN(n)}function Mg(n=""){return new URLSearchParams(typeof n=="string"||Array.isArray(n)||n instanceof URLSearchParams?n:Object.keys(n).reduce((e,t)=>{let r=n[t];return e.concat(Array.isArray(r)?r.map(i=>[t,i]):[[t,r]])},[]))}function ZN(n,e){let t=Mg(n);return e&&e.forEach((r,i)=>{t.has(i)||e.getAll(i).forEach(a=>{t.append(i,a)})}),t}var Sh=null;function JN(){if(Sh===null)try{new FormData(document.createElement("form"),0),Sh=!1}catch{Sh=!0}return Sh}var eR=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function O1(n){return n!=null&&!eR.has(n)?(Ei(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Gh}"`),null):n}function tR(n,e){let t,r,i,a,o;if(YN(n)){let c=n.getAttribute("action");r=c?ts(c,e):null,t=n.getAttribute("method")||Hh,i=O1(n.getAttribute("enctype"))||Gh,a=new FormData(n)}else if(XN(n)||KN(n)&&(n.type==="submit"||n.type==="image")){let c=n.form;if(c==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let u=n.getAttribute("formaction")||c.getAttribute("action");if(r=u?ts(u,e):null,t=n.getAttribute("formmethod")||c.getAttribute("method")||Hh,i=O1(n.getAttribute("formenctype"))||O1(c.getAttribute("enctype"))||Gh,a=new FormData(c,n),!JN()){let{name:d,type:m,value:g}=n;if(m==="image"){let _=d?`${d}.`:"";a.append(`${_}x`,"0"),a.append(`${_}y`,"0")}else d&&a.append(d,g)}}else{if(q0(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Hh,r=null,i=Gh,o=n}return a&&i==="text/plain"&&(o=a,a=void 0),{action:r,method:t.toLowerCase(),encType:i,formData:a,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Vv(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function nR(n,e,t){let r=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return r.pathname==="/"?r.pathname=`_root.${t}`:e&&ts(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.${t}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${t}`,r}async function rR(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function iR(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function aR(n,e,t){let r=await Promise.all(n.map(async i=>{let a=e.routes[i.route.id];if(a){let o=await rR(a,t);return o.links?o.links():[]}return[]}));return cR(r.flat(1).filter(iR).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function qw(n,e,t,r,i,a){let o=(u,d)=>t[d]?u.route.id!==t[d].route.id:!0,c=(u,d)=>t[d].pathname!==u.pathname||t[d].route.path?.endsWith("*")&&t[d].params["*"]!==u.params["*"];return a==="assets"?e.filter((u,d)=>o(u,d)||c(u,d)):a==="data"?e.filter((u,d)=>{let m=r.routes[u.route.id];if(!m||!m.hasLoader)return!1;if(o(u,d)||c(u,d))return!0;if(u.route.shouldRevalidate){let g=u.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:t[0]?.params||{},nextUrl:new URL(n,window.origin),nextParams:u.params,defaultShouldRevalidate:!0});if(typeof g=="boolean")return g}return!0}):[]}function sR(n,e,{includeHydrateFallback:t}={}){return oR(n.map(r=>{let i=e.routes[r.route.id];if(!i)return[];let a=[i.module];return i.clientActionModule&&(a=a.concat(i.clientActionModule)),i.clientLoaderModule&&(a=a.concat(i.clientLoaderModule)),t&&i.hydrateFallbackModule&&(a=a.concat(i.hydrateFallbackModule)),i.imports&&(a=a.concat(i.imports)),a}).flat(1))}function oR(n){return[...new Set(n)]}function lR(n){let e={},t=Object.keys(n).sort();for(let r of t)e[r]=n[r];return e}function cR(n,e){let t=new Set;return new Set(e),n.reduce((r,i)=>{let a=JSON.stringify(lR(i));return t.has(a)||(t.add(a),r.push({key:a,link:i})),r},[])}function SS(){let n=P.useContext(Mc);return Vv(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function uR(){let n=P.useContext(G0);return Vv(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var Fv=P.createContext(void 0);Fv.displayName="FrameworkContext";function CS(){let n=P.useContext(Fv);return Vv(n,"You must render this element inside a <HydratedRouter> element"),n}function fR(n,e){let t=P.useContext(Fv),[r,i]=P.useState(!1),[a,o]=P.useState(!1),{onFocus:c,onBlur:u,onMouseEnter:d,onMouseLeave:m,onTouchStart:g}=e,_=P.useRef(null);P.useEffect(()=>{if(n==="render"&&o(!0),n==="viewport"){let S=C=>{C.forEach(k=>{o(k.isIntersecting)})},D=new IntersectionObserver(S,{threshold:.5});return _.current&&D.observe(_.current),()=>{D.disconnect()}}},[n]),P.useEffect(()=>{if(r){let S=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(S)}}},[r]);let w=()=>{i(!0)},E=()=>{i(!1),o(!1)};return t?n!=="intent"?[a,_,{}]:[a,_,{onFocus:Wu(c,w),onBlur:Wu(u,E),onMouseEnter:Wu(d,w),onMouseLeave:Wu(m,E),onTouchStart:Wu(g,w)}]:[!1,_,{}]}function Wu(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function dR({page:n,...e}){let{router:t}=SS(),r=P.useMemo(()=>mS(t.routes,n,t.basename),[t.routes,n,t.basename]);return r?P.createElement(pR,{page:n,matches:r,...e}):null}function hR(n){let{manifest:e,routeModules:t}=CS(),[r,i]=P.useState([]);return P.useEffect(()=>{let a=!1;return aR(n,e,t).then(o=>{a||i(o)}),()=>{a=!0}},[n,e,t]),r}function pR({page:n,matches:e,...t}){let r=Yi(),{manifest:i,routeModules:a}=CS(),{basename:o}=SS(),{loaderData:c,matches:u}=uR(),d=P.useMemo(()=>qw(n,e,u,i,r,"data"),[n,e,u,i,r]),m=P.useMemo(()=>qw(n,e,u,i,r,"assets"),[n,e,u,i,r]),g=P.useMemo(()=>{if(n===r.pathname+r.search+r.hash)return[];let E=new Set,S=!1;if(e.forEach(C=>{let k=i.routes[C.route.id];!k||!k.hasLoader||(!d.some(V=>V.route.id===C.route.id)&&C.route.id in c&&a[C.route.id]?.shouldRevalidate||k.hasClientLoader?S=!0:E.add(C.route.id))}),E.size===0)return[];let D=nR(n,o,"data");return S&&E.size>0&&D.searchParams.set("_routes",e.filter(C=>E.has(C.route.id)).map(C=>C.route.id).join(",")),[D.pathname+D.search]},[o,c,r,i,d,e,n,a]),_=P.useMemo(()=>sR(m,i),[m,i]),w=hR(m);return P.createElement(P.Fragment,null,g.map(E=>P.createElement("link",{key:E,rel:"prefetch",as:"fetch",href:E,...t})),_.map(E=>P.createElement("link",{key:E,rel:"modulepreload",href:E,...t})),w.map(({key:E,link:S})=>P.createElement("link",{key:E,nonce:t.nonce,...S})))}function mR(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var TS=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{TS&&(window.__reactRouterVersion="7.9.4")}catch{}function gR({basename:n,children:e,window:t}){let r=P.useRef();r.current==null&&(r.current=rN({window:t,v5Compat:!0}));let i=r.current,[a,o]=P.useState({action:i.action,location:i.location}),c=P.useCallback(u=>{P.startTransition(()=>o(u))},[o]);return P.useLayoutEffect(()=>i.listen(c),[i,c]),P.createElement($N,{basename:n,children:e,location:a.location,navigationType:a.action,navigator:i})}var IS=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,o0=P.forwardRef(function({onClick:e,discover:t="render",prefetch:r="none",relative:i,reloadDocument:a,replace:o,state:c,target:u,to:d,preventScrollReset:m,viewTransition:g,..._},w){let{basename:E}=P.useContext($i),S=typeof d=="string"&&IS.test(d),D,C=!1;if(typeof d=="string"&&S&&(D=d,TS))try{let N=new URL(window.location.href),I=d.startsWith("//")?new URL(N.protocol+d):new URL(d),R=ts(I.pathname,E);I.origin===N.origin&&R!=null?d=R+I.search+I.hash:C=!0}catch{Ei(!1,`<Link to="${d}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let k=RN(d,{relative:i}),[V,U,q]=fR(r,_),$=xR(d,{replace:o,state:c,target:u,preventScrollReset:m,relative:i,viewTransition:g});function M(N){e&&e(N),N.defaultPrevented||$(N)}let b=P.createElement("a",{..._,...q,href:D||k,onClick:C||a?e:M,ref:mR(w,U),target:u,"data-discover":!S&&t==="render"?"true":void 0});return V&&!S?P.createElement(P.Fragment,null,b,P.createElement(dR,{page:k})):b});o0.displayName="Link";var vR=P.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:i=!1,style:a,to:o,viewTransition:c,children:u,...d},m){let g=Vf(o,{relative:d.relative}),_=Yi(),w=P.useContext(G0),{navigator:E,basename:S}=P.useContext($i),D=w!=null&&SR(g)&&c===!0,C=E.encodeLocation?E.encodeLocation(g).pathname:g.pathname,k=_.pathname,V=w&&w.navigation&&w.navigation.location?w.navigation.location.pathname:null;t||(k=k.toLowerCase(),V=V?V.toLowerCase():null,C=C.toLowerCase()),V&&S&&(V=ts(V,S)||V);const U=C!=="/"&&C.endsWith("/")?C.length-1:C.length;let q=k===C||!i&&k.startsWith(C)&&k.charAt(U)==="/",$=V!=null&&(V===C||!i&&V.startsWith(C)&&V.charAt(C.length)==="/"),M={isActive:q,isPending:$,isTransitioning:D},b=q?e:void 0,N;typeof r=="function"?N=r(M):N=[r,q?"active":null,$?"pending":null,D?"transitioning":null].filter(Boolean).join(" ");let I=typeof a=="function"?a(M):a;return P.createElement(o0,{...d,"aria-current":b,className:N,ref:m,style:I,to:o,viewTransition:c},typeof u=="function"?u(M):u)});vR.displayName="NavLink";var yR=P.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:r,replace:i,state:a,method:o=Hh,action:c,onSubmit:u,relative:d,preventScrollReset:m,viewTransition:g,..._},w)=>{let E=AR(),S=bR(c,{relative:d}),D=o.toLowerCase()==="get"?"get":"post",C=typeof c=="string"&&IS.test(c),k=V=>{if(u&&u(V),V.defaultPrevented)return;V.preventDefault();let U=V.nativeEvent.submitter,q=U?.getAttribute("formmethod")||o;E(U||V.currentTarget,{fetcherKey:e,method:q,navigate:t,replace:i,state:a,relative:d,preventScrollReset:m,viewTransition:g})};return P.createElement("form",{ref:w,method:D,action:S,onSubmit:r?u:k,..._,"data-discover":!C&&n==="render"?"true":void 0})});yR.displayName="Form";function _R(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function NS(n){let e=P.useContext(Mc);return an(e,_R(n)),e}function xR(n,{target:e,replace:t,state:r,preventScrollReset:i,relative:a,viewTransition:o}={}){let c=ol(),u=Yi(),d=Vf(n,{relative:a});return P.useCallback(m=>{if(QN(m,e)){m.preventDefault();let g=t!==void 0?t:Ef(u)===Ef(d);c(n,{replace:g,state:r,preventScrollReset:i,relative:a,viewTransition:o})}},[u,c,d,t,r,e,n,i,a,o])}function Uv(n){Ei(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=P.useRef(Mg(n)),t=P.useRef(!1),r=Yi(),i=P.useMemo(()=>ZN(r.search,t.current?null:e.current),[r.search]),a=ol(),o=P.useCallback((c,u)=>{const d=Mg(typeof c=="function"?c(new URLSearchParams(i)):c);t.current=!0,a("?"+d,u)},[a,i]);return[i,o]}var wR=0,ER=()=>`__${String(++wR)}__`;function AR(){let{router:n}=NS("useSubmit"),{basename:e}=P.useContext($i),t=zN();return P.useCallback(async(r,i={})=>{let{action:a,method:o,encType:c,formData:u,body:d}=tR(r,e);if(i.navigate===!1){let m=i.fetcherKey||ER();await n.fetch(m,t,i.action||a,{preventScrollReset:i.preventScrollReset,formData:u,body:d,formMethod:i.method||o,formEncType:i.encType||c,flushSync:i.flushSync})}else await n.navigate(i.action||a,{preventScrollReset:i.preventScrollReset,formData:u,body:d,formMethod:i.method||o,formEncType:i.encType||c,replace:i.replace,state:i.state,fromRouteId:t,flushSync:i.flushSync,viewTransition:i.viewTransition})},[n,e,t])}function bR(n,{relative:e}={}){let{basename:t}=P.useContext($i),r=P.useContext(Xi);an(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),a={...Vf(n||".",{relative:e})},o=Yi();if(n==null){a.search=o.search;let c=new URLSearchParams(a.search),u=c.getAll("index");if(u.some(m=>m==="")){c.delete("index"),u.filter(g=>g).forEach(g=>c.append("index",g));let m=c.toString();a.search=m?`?${m}`:""}}return(!n||n===".")&&i.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(a.pathname=a.pathname==="/"?t:Za([t,a.pathname])),Ef(a)}function SR(n,{relative:e}={}){let t=P.useContext(_S);an(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=NS("useViewTransitionState"),i=Vf(n,{relative:e});if(!t.isTransitioning)return!1;let a=ts(t.currentLocation.pathname,r)||t.currentLocation.pathname,o=ts(t.nextLocation.pathname,r)||t.nextLocation.pathname;return s0(i.pathname,o)!=null||s0(i.pathname,a)!=null}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CR=()=>{};var $w={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RS=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},TR=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const a=n[t++];e[r++]=String.fromCharCode((i&31)<<6|a&63)}else if(i>239&&i<365){const a=n[t++],o=n[t++],c=n[t++],u=((i&7)<<18|(a&63)<<12|(o&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const a=n[t++],o=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(a&63)<<6|o&63)}}return e.join("")},OS={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const a=n[i],o=i+1<n.length,c=o?n[i+1]:0,u=i+2<n.length,d=u?n[i+2]:0,m=a>>2,g=(a&3)<<4|c>>4;let _=(c&15)<<2|d>>6,w=d&63;u||(w=64,o||(_=64)),r.push(t[m],t[g],t[_],t[w])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(RS(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):TR(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const a=t[n.charAt(i++)],c=i<n.length?t[n.charAt(i)]:0;++i;const d=i<n.length?t[n.charAt(i)]:64;++i;const g=i<n.length?t[n.charAt(i)]:64;if(++i,a==null||c==null||d==null||g==null)throw new IR;const _=a<<2|c>>4;if(r.push(_),d!==64){const w=c<<4&240|d>>2;if(r.push(w),g!==64){const E=d<<6&192|g;r.push(E)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class IR extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const NR=function(n){const e=RS(n);return OS.encodeByteArray(e,!0)},l0=function(n){return NR(n).replace(/\./g,"")},DS=function(n){try{return OS.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RR(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OR=()=>RR().__FIREBASE_DEFAULTS__,DR=()=>{if(typeof process>"u"||typeof $w>"u")return;const n=$w.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},MR=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&DS(n[1]);return e&&JSON.parse(e)},$0=()=>{try{return CR()||OR()||DR()||MR()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},MS=n=>$0()?.emulatorHosts?.[n],PR=n=>{const e=MS(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},PS=()=>$0()?.config,kS=n=>$0()?.[`_${n}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kR{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kc(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function jS(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jR(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,a=n.sub||n.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}},...n};return[l0(JSON.stringify(t)),l0(JSON.stringify(o)),""].join(".")}const hf={};function LR(){const n={prod:[],emulator:[]};for(const e of Object.keys(hf))hf[e]?n.emulator.push(e):n.prod.push(e);return n}function BR(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let Xw=!1;function LS(n,e){if(typeof window>"u"||typeof document>"u"||!kc(window.location.host)||hf[n]===e||hf[n]||Xw)return;hf[n]=e;function t(_){return`__firebase__banner__${_}`}const r="__firebase__banner",a=LR().prod.length>0;function o(){const _=document.getElementById(r);_&&_.remove()}function c(_){_.style.display="flex",_.style.background="#7faaf0",_.style.position="fixed",_.style.bottom="5px",_.style.left="5px",_.style.padding=".5em",_.style.borderRadius="5px",_.style.alignItems="center"}function u(_,w){_.setAttribute("width","24"),_.setAttribute("id",w),_.setAttribute("height","24"),_.setAttribute("viewBox","0 0 24 24"),_.setAttribute("fill","none"),_.style.marginLeft="-6px"}function d(){const _=document.createElement("span");return _.style.cursor="pointer",_.style.marginLeft="16px",_.style.fontSize="24px",_.innerHTML=" &times;",_.onclick=()=>{Xw=!0,o()},_}function m(_,w){_.setAttribute("id",w),_.innerText="Learn more",_.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",_.setAttribute("target","__blank"),_.style.paddingLeft="5px",_.style.textDecoration="underline"}function g(){const _=BR(r),w=t("text"),E=document.getElementById(w)||document.createElement("span"),S=t("learnmore"),D=document.getElementById(S)||document.createElement("a"),C=t("preprendIcon"),k=document.getElementById(C)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(_.created){const V=_.element;c(V),m(D,S);const U=d();u(k,C),V.append(k,E,D,U),document.body.appendChild(V)}a?(E.innerText="Preview backend disconnected.",k.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(k.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,E.innerText="Preview backend running in this workspace."),E.setAttribute("id",w)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",g):g()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vr(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function VR(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(vr())}function FR(){const n=$0()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function UR(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function zR(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function HR(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function GR(){const n=vr();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function qR(){return!FR()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function $R(){try{return typeof indexedDB=="object"}catch{return!1}}function XR(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YR="FirebaseError";class Ia extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=YR,Object.setPrototypeOf(this,Ia.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ff.prototype.create)}}class Ff{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},i=`${this.service}/${e}`,a=this.errors[e],o=a?KR(a,r):"Error",c=`${this.serviceName}: ${o} (${i}).`;return new Ia(i,c,r)}}function KR(n,e){return n.replace(WR,(t,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const WR=/\{\$([^}]+)}/g;function QR(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function nl(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const i of t){if(!r.includes(i))return!1;const a=n[i],o=e[i];if(Yw(a)&&Yw(o)){if(!nl(a,o))return!1}else if(a!==o)return!1}for(const i of r)if(!t.includes(i))return!1;return!0}function Yw(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uf(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function tf(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,a]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(a)}}),e}function nf(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function ZR(n,e){const t=new JR(n,e);return t.subscribe.bind(t)}class JR{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");e8(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=D1),i.error===void 0&&(i.error=D1),i.complete===void 0&&(i.complete=D1);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function e8(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function D1(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vn(n){return n&&n._delegate?n._delegate:n}class rl{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ko="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t8{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new kR;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(r8(e))try{this.getOrInitializeService({instanceIdentifier:Ko})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const a=this.getOrInitializeService({instanceIdentifier:i});r.resolve(a)}catch{}}}}clearInstance(e=Ko){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ko){return this.instances.has(e)}getOptions(e=Ko){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[a,o]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(a);r===c&&o.resolve(i)}return i}onInit(e,t){const r=this.normalizeInstanceIdentifier(t),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const a=this.instances.get(r);return a&&e(a,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:n8(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Ko){return this.component?this.component.multipleInstances?e:Ko:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function n8(n){return n===Ko?void 0:n}function r8(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i8{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new t8(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ct;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(ct||(ct={}));const a8={debug:ct.DEBUG,verbose:ct.VERBOSE,info:ct.INFO,warn:ct.WARN,error:ct.ERROR,silent:ct.SILENT},s8=ct.INFO,o8={[ct.DEBUG]:"log",[ct.VERBOSE]:"log",[ct.INFO]:"info",[ct.WARN]:"warn",[ct.ERROR]:"error"},l8=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),i=o8[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class zv{constructor(e){this.name=e,this._logLevel=s8,this._logHandler=l8,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ct))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?a8[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ct.DEBUG,...e),this._logHandler(this,ct.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ct.VERBOSE,...e),this._logHandler(this,ct.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ct.INFO,...e),this._logHandler(this,ct.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ct.WARN,...e),this._logHandler(this,ct.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ct.ERROR,...e),this._logHandler(this,ct.ERROR,...e)}}const c8=(n,e)=>e.some(t=>n instanceof t);let Kw,Ww;function u8(){return Kw||(Kw=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function f8(){return Ww||(Ww=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const BS=new WeakMap,Pg=new WeakMap,VS=new WeakMap,M1=new WeakMap,Hv=new WeakMap;function d8(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",a),n.removeEventListener("error",o)},a=()=>{t(Ws(n.result)),i()},o=()=>{r(n.error),i()};n.addEventListener("success",a),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&BS.set(t,n)}).catch(()=>{}),Hv.set(e,n),e}function h8(n){if(Pg.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",a),n.removeEventListener("error",o),n.removeEventListener("abort",o)},a=()=>{t(),i()},o=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",a),n.addEventListener("error",o),n.addEventListener("abort",o)});Pg.set(n,e)}let kg={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Pg.get(n);if(e==="objectStoreNames")return n.objectStoreNames||VS.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Ws(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function p8(n){kg=n(kg)}function m8(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(P1(this),e,...t);return VS.set(r,e.sort?e.sort():[e]),Ws(r)}:f8().includes(n)?function(...e){return n.apply(P1(this),e),Ws(BS.get(this))}:function(...e){return Ws(n.apply(P1(this),e))}}function g8(n){return typeof n=="function"?m8(n):(n instanceof IDBTransaction&&h8(n),c8(n,u8())?new Proxy(n,kg):n)}function Ws(n){if(n instanceof IDBRequest)return d8(n);if(M1.has(n))return M1.get(n);const e=g8(n);return e!==n&&(M1.set(n,e),Hv.set(e,n)),e}const P1=n=>Hv.get(n);function v8(n,e,{blocked:t,upgrade:r,blocking:i,terminated:a}={}){const o=indexedDB.open(n,e),c=Ws(o);return r&&o.addEventListener("upgradeneeded",u=>{r(Ws(o.result),u.oldVersion,u.newVersion,Ws(o.transaction),u)}),t&&o.addEventListener("blocked",u=>t(u.oldVersion,u.newVersion,u)),c.then(u=>{a&&u.addEventListener("close",()=>a()),i&&u.addEventListener("versionchange",d=>i(d.oldVersion,d.newVersion,d))}).catch(()=>{}),c}const y8=["get","getKey","getAll","getAllKeys","count"],_8=["put","add","delete","clear"],k1=new Map;function Qw(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(k1.get(e))return k1.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=_8.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||y8.includes(t)))return;const a=async function(o,...c){const u=this.transaction(o,i?"readwrite":"readonly");let d=u.store;return r&&(d=d.index(c.shift())),(await Promise.all([d[t](...c),i&&u.done]))[0]};return k1.set(e,a),a}p8(n=>({...n,get:(e,t,r)=>Qw(e,t)||n.get(e,t,r),has:(e,t)=>!!Qw(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x8{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(w8(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function w8(n){return n.getComponent()?.type==="VERSION"}const jg="@firebase/app",Zw="0.14.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ns=new zv("@firebase/app"),E8="@firebase/app-compat",A8="@firebase/analytics-compat",b8="@firebase/analytics",S8="@firebase/app-check-compat",C8="@firebase/app-check",T8="@firebase/auth",I8="@firebase/auth-compat",N8="@firebase/database",R8="@firebase/data-connect",O8="@firebase/database-compat",D8="@firebase/functions",M8="@firebase/functions-compat",P8="@firebase/installations",k8="@firebase/installations-compat",j8="@firebase/messaging",L8="@firebase/messaging-compat",B8="@firebase/performance",V8="@firebase/performance-compat",F8="@firebase/remote-config",U8="@firebase/remote-config-compat",z8="@firebase/storage",H8="@firebase/storage-compat",G8="@firebase/firestore",q8="@firebase/ai",$8="@firebase/firestore-compat",X8="firebase",Y8="12.3.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lg="[DEFAULT]",K8={[jg]:"fire-core",[E8]:"fire-core-compat",[b8]:"fire-analytics",[A8]:"fire-analytics-compat",[C8]:"fire-app-check",[S8]:"fire-app-check-compat",[T8]:"fire-auth",[I8]:"fire-auth-compat",[N8]:"fire-rtdb",[R8]:"fire-data-connect",[O8]:"fire-rtdb-compat",[D8]:"fire-fn",[M8]:"fire-fn-compat",[P8]:"fire-iid",[k8]:"fire-iid-compat",[j8]:"fire-fcm",[L8]:"fire-fcm-compat",[B8]:"fire-perf",[V8]:"fire-perf-compat",[F8]:"fire-rc",[U8]:"fire-rc-compat",[z8]:"fire-gcs",[H8]:"fire-gcs-compat",[G8]:"fire-fst",[$8]:"fire-fst-compat",[q8]:"fire-vertex","fire-js":"fire-js",[X8]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Af=new Map,W8=new Map,Bg=new Map;function Jw(n,e){try{n.container.addComponent(e)}catch(t){ns.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Ec(n){const e=n.name;if(Bg.has(e))return ns.debug(`There were multiple attempts to register component ${e}.`),!1;Bg.set(e,n);for(const t of Af.values())Jw(t,n);for(const t of W8.values())Jw(t,n);return!0}function Gv(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function yi(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q8={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Qs=new Ff("app","Firebase",Q8);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z8{constructor(e,t,r){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new rl("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Qs.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jc=Y8;function FS(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r={name:Lg,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw Qs.create("bad-app-name",{appName:String(i)});if(t||(t=PS()),!t)throw Qs.create("no-options");const a=Af.get(i);if(a){if(nl(t,a.options)&&nl(r,a.config))return a;throw Qs.create("duplicate-app",{appName:i})}const o=new i8(i);for(const u of Bg.values())o.addComponent(u);const c=new Z8(t,r,o);return Af.set(i,c),c}function US(n=Lg){const e=Af.get(n);if(!e&&n===Lg&&PS())return FS();if(!e)throw Qs.create("no-app",{appName:n});return e}function eE(){return Array.from(Af.values())}function Zs(n,e,t){let r=K8[n]??n;t&&(r+=`-${t}`);const i=r.match(/\s|\//),a=e.match(/\s|\//);if(i||a){const o=[`Unable to register library "${r}" with version "${e}":`];i&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&a&&o.push("and"),a&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ns.warn(o.join(" "));return}Ec(new rl(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J8="firebase-heartbeat-database",e6=1,bf="firebase-heartbeat-store";let j1=null;function zS(){return j1||(j1=v8(J8,e6,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(bf)}catch(t){console.warn(t)}}}}).catch(n=>{throw Qs.create("idb-open",{originalErrorMessage:n.message})})),j1}async function t6(n){try{const t=(await zS()).transaction(bf),r=await t.objectStore(bf).get(HS(n));return await t.done,r}catch(e){if(e instanceof Ia)ns.warn(e.message);else{const t=Qs.create("idb-get",{originalErrorMessage:e?.message});ns.warn(t.message)}}}async function tE(n,e){try{const r=(await zS()).transaction(bf,"readwrite");await r.objectStore(bf).put(e,HS(n)),await r.done}catch(t){if(t instanceof Ia)ns.warn(t.message);else{const r=Qs.create("idb-set",{originalErrorMessage:t?.message});ns.warn(r.message)}}}function HS(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n6=1024,r6=30;class i6{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new s6(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=nE();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:t}),this._heartbeatsCache.heartbeats.length>r6){const i=o6(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){ns.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=nE(),{heartbeatsToSend:t,unsentEntries:r}=a6(this._heartbeatsCache.heartbeats),i=l0(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return ns.warn(e),""}}}function nE(){return new Date().toISOString().substring(0,10)}function a6(n,e=n6){const t=[];let r=n.slice();for(const i of n){const a=t.find(o=>o.agent===i.agent);if(a){if(a.dates.push(i.date),rE(t)>e){a.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),rE(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class s6{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return $R()?XR().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await t6(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return tE(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return tE(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function rE(n){return l0(JSON.stringify({version:2,heartbeats:n})).length}function o6(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l6(n){Ec(new rl("platform-logger",e=>new x8(e),"PRIVATE")),Ec(new rl("heartbeat",e=>new i6(e),"PRIVATE")),Zs(jg,Zw,n),Zs(jg,Zw,"esm2020"),Zs("fire-js","")}l6("");function GS(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const c6=GS,qS=new Ff("auth","Firebase",GS());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c0=new zv("@firebase/auth");function u6(n,...e){c0.logLevel<=ct.WARN&&c0.warn(`Auth (${jc}): ${n}`,...e)}function qh(n,...e){c0.logLevel<=ct.ERROR&&c0.error(`Auth (${jc}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gi(n,...e){throw qv(n,...e)}function xa(n,...e){return qv(n,...e)}function $S(n,e,t){const r={...c6(),[e]:t};return new Ff("auth","Firebase",r).create(e,{appName:n.name})}function Ja(n){return $S(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function qv(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return qS.create(n,...e)}function qe(n,e,...t){if(!n)throw qv(e,...t)}function Wa(n){const e="INTERNAL ASSERTION FAILED: "+n;throw qh(e),new Error(e)}function rs(n,e){n||Wa(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vg(){return typeof self<"u"&&self.location?.href||""}function f6(){return iE()==="http:"||iE()==="https:"}function iE(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d6(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(f6()||zR()||"connection"in navigator)?navigator.onLine:!0}function h6(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zf{constructor(e,t){this.shortDelay=e,this.longDelay=t,rs(t>e,"Short delay should be less than long delay!"),this.isMobile=VR()||HR()}get(){return d6()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $v(n,e){rs(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XS{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Wa("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Wa("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Wa("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p6={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m6=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],g6=new zf(3e4,6e4);function po(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function mo(n,e,t,r,i={}){return YS(n,i,async()=>{let a={},o={};r&&(e==="GET"?o=r:a={body:JSON.stringify(r)});const c=Uf({key:n.config.apiKey,...o}).slice(1),u=await n._getAdditionalHeaders();u["Content-Type"]="application/json",n.languageCode&&(u["X-Firebase-Locale"]=n.languageCode);const d={method:e,headers:u,...a};return UR()||(d.referrerPolicy="no-referrer"),n.emulatorConfig&&kc(n.emulatorConfig.host)&&(d.credentials="include"),XS.fetch()(await KS(n,n.config.apiHost,t,c),d)})}async function YS(n,e,t){n._canInitEmulator=!1;const r={...p6,...e};try{const i=new y6(n),a=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();const o=await a.json();if("needConfirmation"in o)throw Ch(n,"account-exists-with-different-credential",o);if(a.ok&&!("errorMessage"in o))return o;{const c=a.ok?o.errorMessage:o.error.message,[u,d]=c.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ch(n,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw Ch(n,"email-already-in-use",o);if(u==="USER_DISABLED")throw Ch(n,"user-disabled",o);const m=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw $S(n,m,d);Gi(n,m)}}catch(i){if(i instanceof Ia)throw i;Gi(n,"network-request-failed",{message:String(i)})}}async function Hf(n,e,t,r,i={}){const a=await mo(n,e,t,r,i);return"mfaPendingCredential"in a&&Gi(n,"multi-factor-auth-required",{_serverResponse:a}),a}async function KS(n,e,t,r){const i=`${e}${t}?${r}`,a=n,o=a.config.emulator?$v(n.config,i):`${n.config.apiScheme}://${i}`;return m6.includes(t)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(o).toString():o}function v6(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class y6{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(xa(this.auth,"network-request-failed")),g6.get())})}}function Ch(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=xa(n,e,r);return i.customData._tokenResponse=t,i}function aE(n){return n!==void 0&&n.enterprise!==void 0}class _6{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return v6(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function x6(n,e){return mo(n,"GET","/v2/recaptchaConfig",po(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function w6(n,e){return mo(n,"POST","/v1/accounts:delete",e)}async function u0(n,e){return mo(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pf(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function E6(n,e=!1){const t=vn(n),r=await t.getIdToken(e),i=Xv(r);qe(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const a=typeof i.firebase=="object"?i.firebase:void 0,o=a?.sign_in_provider;return{claims:i,token:r,authTime:pf(L1(i.auth_time)),issuedAtTime:pf(L1(i.iat)),expirationTime:pf(L1(i.exp)),signInProvider:o||null,signInSecondFactor:a?.sign_in_second_factor||null}}function L1(n){return Number(n)*1e3}function Xv(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return qh("JWT malformed, contained fewer than 3 sections"),null;try{const i=DS(t);return i?JSON.parse(i):(qh("Failed to decode base64 JWT payload"),null)}catch(i){return qh("Caught error parsing JWT payload as JSON",i?.toString()),null}}function sE(n){const e=Xv(n);return qe(e,"internal-error"),qe(typeof e.exp<"u","internal-error"),qe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sf(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof Ia&&A6(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function A6({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b6{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fg{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=pf(this.lastLoginAt),this.creationTime=pf(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function f0(n){const e=n.auth,t=await n.getIdToken(),r=await Sf(n,u0(e,{idToken:t}));qe(r?.users.length,e,"internal-error");const i=r.users[0];n._notifyReloadListener(i);const a=i.providerUserInfo?.length?WS(i.providerUserInfo):[],o=C6(n.providerData,a),c=n.isAnonymous,u=!(n.email&&i.passwordHash)&&!o?.length,d=c?u:!1,m={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Fg(i.createdAt,i.lastLoginAt),isAnonymous:d};Object.assign(n,m)}async function S6(n){const e=vn(n);await f0(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function C6(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function WS(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function T6(n,e){const t=await YS(n,{},async()=>{const r=Uf({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:a}=n.config,o=await KS(n,i,"/v1/token",`key=${a}`),c=await n._getAdditionalHeaders();c["Content-Type"]="application/x-www-form-urlencoded";const u={method:"POST",headers:c,body:r};return n.emulatorConfig&&kc(n.emulatorConfig.host)&&(u.credentials="include"),XS.fetch()(o,u)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function I6(n,e){return mo(n,"POST","/v2/accounts:revokeToken",po(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vc{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){qe(e.idToken,"internal-error"),qe(typeof e.idToken<"u","internal-error"),qe(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):sE(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){qe(e.length!==0,"internal-error");const t=sE(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(qe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:i,expiresIn:a}=await T6(e,t);this.updateTokensAndExpiration(r,i,Number(a))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:a}=t,o=new vc;return r&&(qe(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(qe(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),a&&(qe(typeof a=="number","internal-error",{appName:e}),o.expirationTime=a),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new vc,this.toJSON())}_performRefresh(){return Wa("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vs(n,e){qe(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Vi{constructor({uid:e,auth:t,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new b6(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Fg(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await Sf(this,this.stsTokenManager.getToken(this.auth,e));return qe(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return E6(this,e)}reload(){return S6(this)}_assign(e){this!==e&&(qe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Vi({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){qe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await f0(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(yi(this.auth.app))return Promise.reject(Ja(this.auth));const e=await this.getIdToken();return await Sf(this,w6(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const r=t.displayName??void 0,i=t.email??void 0,a=t.phoneNumber??void 0,o=t.photoURL??void 0,c=t.tenantId??void 0,u=t._redirectEventId??void 0,d=t.createdAt??void 0,m=t.lastLoginAt??void 0,{uid:g,emailVerified:_,isAnonymous:w,providerData:E,stsTokenManager:S}=t;qe(g&&S,e,"internal-error");const D=vc.fromJSON(this.name,S);qe(typeof g=="string",e,"internal-error"),Vs(r,e.name),Vs(i,e.name),qe(typeof _=="boolean",e,"internal-error"),qe(typeof w=="boolean",e,"internal-error"),Vs(a,e.name),Vs(o,e.name),Vs(c,e.name),Vs(u,e.name),Vs(d,e.name),Vs(m,e.name);const C=new Vi({uid:g,auth:e,email:i,emailVerified:_,displayName:r,isAnonymous:w,photoURL:o,phoneNumber:a,tenantId:c,stsTokenManager:D,createdAt:d,lastLoginAt:m});return E&&Array.isArray(E)&&(C.providerData=E.map(k=>({...k}))),u&&(C._redirectEventId=u),C}static async _fromIdTokenResponse(e,t,r=!1){const i=new vc;i.updateFromServerResponse(t);const a=new Vi({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await f0(a),a}static async _fromGetAccountInfoResponse(e,t,r){const i=t.users[0];qe(i.localId!==void 0,"internal-error");const a=i.providerUserInfo!==void 0?WS(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!a?.length,c=new vc;c.updateFromIdToken(r);const u=new Vi({uid:i.localId,auth:e,stsTokenManager:c,isAnonymous:o}),d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new Fg(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!a?.length};return Object.assign(u,d),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oE=new Map;function Qa(n){rs(n instanceof Function,"Expected a class definition");let e=oE.get(n);return e?(rs(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,oE.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QS{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}QS.type="NONE";const lE=QS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $h(n,e,t){return`firebase:${n}:${e}:${t}`}class yc{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:a}=this.auth;this.fullUserKey=$h(this.userKey,i.apiKey,a),this.fullPersistenceKey=$h("persistence",i.apiKey,a),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await u0(this.auth,{idToken:e}).catch(()=>{});return t?Vi._fromGetAccountInfoResponse(this.auth,t,e):null}return Vi._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new yc(Qa(lE),e,r);const i=(await Promise.all(t.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let a=i[0]||Qa(lE);const o=$h(r,e.config.apiKey,e.name);let c=null;for(const d of t)try{const m=await d._get(o);if(m){let g;if(typeof m=="string"){const _=await u0(e,{idToken:m}).catch(()=>{});if(!_)break;g=await Vi._fromGetAccountInfoResponse(e,_,m)}else g=Vi._fromJSON(e,m);d!==a&&(c=g),a=d;break}}catch{}const u=i.filter(d=>d._shouldAllowMigration);return!a._shouldAllowMigration||!u.length?new yc(a,e,r):(a=u[0],c&&await a._set(o,c.toJSON()),await Promise.all(t.map(async d=>{if(d!==a)try{await d._remove(o)}catch{}})),new yc(a,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cE(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(tC(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(ZS(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(rC(e))return"Blackberry";if(iC(e))return"Webos";if(JS(e))return"Safari";if((e.includes("chrome/")||eC(e))&&!e.includes("edge/"))return"Chrome";if(nC(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function ZS(n=vr()){return/firefox\//i.test(n)}function JS(n=vr()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function eC(n=vr()){return/crios\//i.test(n)}function tC(n=vr()){return/iemobile/i.test(n)}function nC(n=vr()){return/android/i.test(n)}function rC(n=vr()){return/blackberry/i.test(n)}function iC(n=vr()){return/webos/i.test(n)}function Yv(n=vr()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function N6(n=vr()){return Yv(n)&&!!window.navigator?.standalone}function R6(){return GR()&&document.documentMode===10}function aC(n=vr()){return Yv(n)||nC(n)||iC(n)||rC(n)||/windows phone/i.test(n)||tC(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sC(n,e=[]){let t;switch(n){case"Browser":t=cE(vr());break;case"Worker":t=`${cE(vr())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${jc}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O6{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=a=>new Promise((o,c)=>{try{const u=e(a);o(u)}catch(u){c(u)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function D6(n,e={}){return mo(n,"GET","/v2/passwordPolicy",po(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M6=6;class P6{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??M6,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k6{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new uE(this),this.idTokenSubscription=new uE(this),this.beforeStateQueue=new O6(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=qS,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Qa(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await yc.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await u0(this,{idToken:e}),r=await Vi._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(yi(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(o,o))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let r=t,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=this.redirectUser?._redirectEventId,o=r?._redirectEventId,c=await this.tryRedirectSignIn(e);(!a||a===o)&&c?.user&&(r=c.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(a){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return qe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await f0(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=h6()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(yi(this.app))return Promise.reject(Ja(this));const t=e?vn(e):null;return t&&qe(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&qe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return yi(this.app)?Promise.reject(Ja(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return yi(this.app)?Promise.reject(Ja(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Qa(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await D6(this),t=new P6(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Ff("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await I6(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Qa(e)||this._popupRedirectResolver;qe(t,this,"argument-error"),this.redirectPersistenceManager=await yc.create(this,[Qa(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const a=typeof t=="function"?t:t.next.bind(t);let o=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(qe(c,this,"internal-error"),c.then(()=>{o||a(this.currentUser)}),typeof t=="function"){const u=e.addObserver(t,r,i);return()=>{o=!0,u()}}else{const u=e.addObserver(t);return()=>{o=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return qe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=sC(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(yi(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&u6(`Error while retrieving App Check token: ${e.error}`),e?.token}}function ll(n){return vn(n)}class uE{constructor(e){this.auth=e,this.observer=null,this.addObserver=ZR(t=>this.observer=t)}get next(){return qe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let X0={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function j6(n){X0=n}function oC(n){return X0.loadJS(n)}function L6(){return X0.recaptchaEnterpriseScript}function B6(){return X0.gapiScript}function V6(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class F6{constructor(){this.enterprise=new U6}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class U6{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const z6="recaptcha-enterprise",lC="NO_RECAPTCHA";class H6{constructor(e){this.type=z6,this.auth=ll(e)}async verify(e="verify",t=!1){async function r(a){if(!t){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(o,c)=>{x6(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{const d=new _6(u);return a.tenantId==null?a._agentRecaptchaConfig=d:a._tenantRecaptchaConfigs[a.tenantId]=d,o(d.siteKey)}}).catch(u=>{c(u)})})}function i(a,o,c){const u=window.grecaptcha;aE(u)?u.enterprise.ready(()=>{u.enterprise.execute(a,{action:e}).then(d=>{o(d)}).catch(()=>{o(lC)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new F6().execute("siteKey",{action:"verify"}):new Promise((a,o)=>{r(this.auth).then(c=>{if(!t&&aE(window.grecaptcha))i(c,a,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let u=L6();u.length!==0&&(u+=c),oC(u).then(()=>{i(c,a,o)}).catch(d=>{o(d)})}}).catch(c=>{o(c)})})}}async function fE(n,e,t,r=!1,i=!1){const a=new H6(n);let o;if(i)o=lC;else try{o=await a.verify(t)}catch{o=await a.verify(t,!0)}const c={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in c){const u=c.phoneEnrollmentInfo.phoneNumber,d=c.phoneEnrollmentInfo.recaptchaToken;Object.assign(c,{phoneEnrollmentInfo:{phoneNumber:u,recaptchaToken:d,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in c){const u=c.phoneSignInInfo.recaptchaToken;Object.assign(c,{phoneSignInInfo:{recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return c}return r?Object.assign(c,{captchaResp:o}):Object.assign(c,{captchaResponse:o}),Object.assign(c,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(c,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),c}async function dE(n,e,t,r,i){if(n._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await fE(n,e,t,t==="getOobCode");return r(n,a)}else return r(n,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await fE(n,e,t,t==="getOobCode");return r(n,o)}else return Promise.reject(a)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G6(n,e){const t=Gv(n,"auth");if(t.isInitialized()){const i=t.getImmediate(),a=t.getOptions();if(nl(a,e??{}))return i;Gi(i,"already-initialized")}return t.initialize({options:e})}function q6(n,e){const t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(Qa);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function $6(n,e,t){const r=ll(n);qe(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,a=cC(e),{host:o,port:c}=X6(e),u=c===null?"":`:${c}`,d={url:`${a}//${o}${u}/`},m=Object.freeze({host:o,port:c,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){qe(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),qe(nl(d,r.config.emulator)&&nl(m,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=d,r.emulatorConfig=m,r.settings.appVerificationDisabledForTesting=!0,kc(o)?(jS(`${a}//${o}${u}`),LS("Auth",!0)):Y6()}function cC(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function X6(n){const e=cC(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const a=i[1];return{host:a,port:hE(r.substr(a.length+1))}}else{const[a,o]=r.split(":");return{host:a,port:hE(o)}}}function hE(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function Y6(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kv{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Wa("not implemented")}_getIdTokenResponse(e){return Wa("not implemented")}_linkToIdToken(e,t){return Wa("not implemented")}_getReauthenticationResolver(e){return Wa("not implemented")}}async function K6(n,e){return mo(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function W6(n,e){return Hf(n,"POST","/v1/accounts:signInWithPassword",po(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Q6(n,e){return Hf(n,"POST","/v1/accounts:signInWithEmailLink",po(n,e))}async function Z6(n,e){return Hf(n,"POST","/v1/accounts:signInWithEmailLink",po(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cf extends Kv{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new Cf(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new Cf(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return dE(e,t,"signInWithPassword",W6);case"emailLink":return Q6(e,{email:this._email,oobCode:this._password});default:Gi(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return dE(e,r,"signUpPassword",K6);case"emailLink":return Z6(e,{idToken:t,email:this._email,oobCode:this._password});default:Gi(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _c(n,e){return Hf(n,"POST","/v1/accounts:signInWithIdp",po(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J6="http://localhost";class il extends Kv{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new il(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Gi("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,...a}=t;if(!r||!i)return null;const o=new il(r,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}_getIdTokenResponse(e){const t=this.buildRequest();return _c(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,_c(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,_c(e,t)}buildRequest(){const e={requestUri:J6,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Uf(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eO(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function tO(n){const e=tf(nf(n)).link,t=e?tf(nf(e)).deep_link_id:null,r=tf(nf(n)).deep_link_id;return(r?tf(nf(r)).link:null)||r||t||e||n}class Wv{constructor(e){const t=tf(nf(e)),r=t.apiKey??null,i=t.oobCode??null,a=eO(t.mode??null);qe(r&&i&&a,"argument-error"),this.apiKey=r,this.operation=a,this.code=i,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=tO(e);try{return new Wv(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lc{constructor(){this.providerId=Lc.PROVIDER_ID}static credential(e,t){return Cf._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=Wv.parseLink(t);return qe(r,"argument-error"),Cf._fromEmailAndCode(e,r.code,r.tenantId)}}Lc.PROVIDER_ID="password";Lc.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Lc.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uC{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gf extends uC{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gs extends Gf{constructor(){super("facebook.com")}static credential(e){return il._fromParams({providerId:Gs.PROVIDER_ID,signInMethod:Gs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Gs.credentialFromTaggedObject(e)}static credentialFromError(e){return Gs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Gs.credential(e.oauthAccessToken)}catch{return null}}}Gs.FACEBOOK_SIGN_IN_METHOD="facebook.com";Gs.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qs extends Gf{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return il._fromParams({providerId:qs.PROVIDER_ID,signInMethod:qs.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return qs.credentialFromTaggedObject(e)}static credentialFromError(e){return qs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return qs.credential(t,r)}catch{return null}}}qs.GOOGLE_SIGN_IN_METHOD="google.com";qs.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $s extends Gf{constructor(){super("github.com")}static credential(e){return il._fromParams({providerId:$s.PROVIDER_ID,signInMethod:$s.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return $s.credentialFromTaggedObject(e)}static credentialFromError(e){return $s.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return $s.credential(e.oauthAccessToken)}catch{return null}}}$s.GITHUB_SIGN_IN_METHOD="github.com";$s.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xs extends Gf{constructor(){super("twitter.com")}static credential(e,t){return il._fromParams({providerId:Xs.PROVIDER_ID,signInMethod:Xs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Xs.credentialFromTaggedObject(e)}static credentialFromError(e){return Xs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return Xs.credential(t,r)}catch{return null}}}Xs.TWITTER_SIGN_IN_METHOD="twitter.com";Xs.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nO(n,e){return Hf(n,"POST","/v1/accounts:signUp",po(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ao{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,i=!1){const a=await Vi._fromIdTokenResponse(e,r,i),o=pE(r);return new ao({user:a,providerId:o,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const i=pE(r);return new ao({user:e,providerId:i,_tokenResponse:r,operationType:t})}}function pE(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fC(n){if(yi(n.app))return Promise.reject(Ja(n));const e=ll(n);if(await e._initializationPromise,e.currentUser?.isAnonymous)return new ao({user:e.currentUser,providerId:null,operationType:"signIn"});const t=await nO(e,{returnSecureToken:!0}),r=await ao._fromIdTokenResponse(e,"signIn",t,!0);return await e._updateCurrentUser(r.user),r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d0 extends Ia{constructor(e,t,r,i){super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,d0.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new d0(e,t,r,i)}}function dC(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?d0._fromErrorAndOperation(n,a,e,r):a})}async function rO(n,e,t=!1){const r=await Sf(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return ao._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iO(n,e,t=!1){const{auth:r}=n;if(yi(r.app))return Promise.reject(Ja(r));const i="reauthenticate";try{const a=await Sf(n,dC(r,i,e,n),t);qe(a.idToken,r,"internal-error");const o=Xv(a.idToken);qe(o,r,"internal-error");const{sub:c}=o;return qe(n.uid===c,r,"user-mismatch"),ao._forOperation(n,i,a)}catch(a){throw a?.code==="auth/user-not-found"&&Gi(r,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hC(n,e,t=!1){if(yi(n.app))return Promise.reject(Ja(n));const r="signIn",i=await dC(n,r,e),a=await ao._fromIdTokenResponse(n,r,i);return t||await n._updateCurrentUser(a.user),a}async function aO(n,e){return hC(ll(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sO(n){const e=ll(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function oO(n,e,t){return yi(n.app)?Promise.reject(Ja(n)):aO(vn(n),Lc.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&sO(n),r})}function lO(n,e,t,r){return vn(n).onIdTokenChanged(e,t,r)}function cO(n,e,t){return vn(n).beforeAuthStateChanged(e,t)}function pC(n,e,t,r){return vn(n).onAuthStateChanged(e,t,r)}function uO(n){return vn(n).signOut()}const h0="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mC{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(h0,"1"),this.storage.removeItem(h0),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fO=1e3,dO=10;class gC extends mC{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=aC(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),i=this.localCache[t];r!==i&&e(t,i,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((o,c,u)=>{this.notifyListeners(o,u)});return}const r=e.key;t?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!t&&this.localCache[r]===o||this.notifyListeners(r,o)},a=this.storage.getItem(r);R6()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,dO):i()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},fO)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}gC.type="LOCAL";const hO=gC;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vC extends mC{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}vC.type="SESSION";const yC=vC;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pO(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y0{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(i=>i.isListeningto(e));if(t)return t;const r=new Y0(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:i,data:a}=t.data,o=this.handlersMap[i];if(!o?.size)return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const c=Array.from(o).map(async d=>d(t.origin,a)),u=await pO(c);t.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:u})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Y0.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qv(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mO{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let a,o;return new Promise((c,u)=>{const d=Qv("",20);i.port1.start();const m=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(g){const _=g;if(_.data.eventId===d)switch(_.data.status){case"ack":clearTimeout(m),a=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),c(_.data.response);break;default:clearTimeout(m),clearTimeout(a),u(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:d,data:t},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wa(){return window}function gO(n){wa().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _C(){return typeof wa().WorkerGlobalScope<"u"&&typeof wa().importScripts=="function"}async function vO(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function yO(){return navigator?.serviceWorker?.controller||null}function _O(){return _C()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xC="firebaseLocalStorageDb",xO=1,p0="firebaseLocalStorage",wC="fbase_key";class qf{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function K0(n,e){return n.transaction([p0],e?"readwrite":"readonly").objectStore(p0)}function wO(){const n=indexedDB.deleteDatabase(xC);return new qf(n).toPromise()}function Ug(){const n=indexedDB.open(xC,xO);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(p0,{keyPath:wC})}catch(i){t(i)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(p0)?e(r):(r.close(),await wO(),e(await Ug()))})})}async function mE(n,e,t){const r=K0(n,!0).put({[wC]:e,value:t});return new qf(r).toPromise()}async function EO(n,e){const t=K0(n,!1).get(e),r=await new qf(t).toPromise();return r===void 0?null:r.value}function gE(n,e){const t=K0(n,!0).delete(e);return new qf(t).toPromise()}const AO=800,bO=3;class EC{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Ug(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>bO)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return _C()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Y0._getInstance(_O()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await vO(),!this.activeServiceWorker)return;this.sender=new mO(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||yO()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Ug();return await mE(e,h0,"1"),await gE(e,h0),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>mE(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>EO(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>gE(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const a=K0(i,!1).getAll();return new qf(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:a}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(a)&&(this.notifyListeners(i,a),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),AO)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}EC.type="LOCAL";const SO=EC;new zf(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CO(n,e){return e?Qa(e):(qe(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zv extends Kv{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return _c(e,this._buildIdpRequest())}_linkToIdToken(e,t){return _c(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return _c(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function TO(n){return hC(n.auth,new Zv(n),n.bypassAuthState)}function IO(n){const{auth:e,user:t}=n;return qe(t,e,"internal-error"),iO(t,new Zv(n),n.bypassAuthState)}async function NO(n){const{auth:e,user:t}=n;return qe(t,e,"internal-error"),rO(t,new Zv(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AC{constructor(e,t,r,i,a=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:i,tenantId:a,error:o,type:c}=e;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:t,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(u))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return TO;case"linkViaPopup":case"linkViaRedirect":return NO;case"reauthViaPopup":case"reauthViaRedirect":return IO;default:Gi(this.auth,"internal-error")}}resolve(e){rs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){rs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RO=new zf(2e3,1e4);class cc extends AC{constructor(e,t,r,i,a){super(e,t,i,a),this.provider=r,this.authWindow=null,this.pollId=null,cc.currentPopupAction&&cc.currentPopupAction.cancel(),cc.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return qe(e,this.auth,"internal-error"),e}async onExecution(){rs(this.filter.length===1,"Popup operations only handle one event");const e=Qv();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(xa(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(xa(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,cc.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(xa(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,RO.get())};e()}}cc.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OO="pendingRedirect",Xh=new Map;class DO extends AC{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=Xh.get(this.auth._key());if(!e){try{const r=await MO(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Xh.set(this.auth._key(),e)}return this.bypassAuthState||Xh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function MO(n,e){const t=jO(e),r=kO(n);if(!await r._isAvailable())return!1;const i=await r._get(t)==="true";return await r._remove(t),i}function PO(n,e){Xh.set(n._key(),e)}function kO(n){return Qa(n._redirectPersistence)}function jO(n){return $h(OO,n.config.apiKey,n.name)}async function LO(n,e,t=!1){if(yi(n.app))return Promise.reject(Ja(n));const r=ll(n),i=CO(r,e),o=await new DO(r,i,t).execute();return o&&!t&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BO=600*1e3;class VO{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!FO(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!bC(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";t.onError(xa(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=BO&&this.cachedEventUids.clear(),this.cachedEventUids.has(vE(e))}saveEventToCache(e){this.cachedEventUids.add(vE(e)),this.lastProcessedEventTime=Date.now()}}function vE(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function bC({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function FO(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return bC(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UO(n,e={}){return mo(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zO=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,HO=/^https?/;async function GO(n){if(n.config.emulator)return;const{authorizedDomains:e}=await UO(n);for(const t of e)try{if(qO(t))return}catch{}Gi(n,"unauthorized-domain")}function qO(n){const e=Vg(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const o=new URL(n);return o.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&o.hostname===r}if(!HO.test(t))return!1;if(zO.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $O=new zf(3e4,6e4);function yE(){const n=wa().___jsl;if(n?.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function XO(n){return new Promise((e,t)=>{function r(){yE(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{yE(),t(xa(n,"network-request-failed"))},timeout:$O.get()})}if(wa().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(wa().gapi?.load)r();else{const i=V6("iframefcb");return wa()[i]=()=>{gapi.load?r():t(xa(n,"network-request-failed"))},oC(`${B6()}?onload=${i}`).catch(a=>t(a))}}).catch(e=>{throw Yh=null,e})}let Yh=null;function YO(n){return Yh=Yh||XO(n),Yh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KO=new zf(5e3,15e3),WO="__/auth/iframe",QO="emulator/auth/iframe",ZO={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},JO=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function eD(n){const e=n.config;qe(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?$v(e,QO):`https://${n.config.authDomain}/${WO}`,r={apiKey:e.apiKey,appName:n.name,v:jc},i=JO.get(n.config.apiHost);i&&(r.eid=i);const a=n._getFrameworks();return a.length&&(r.fw=a.join(",")),`${t}?${Uf(r).slice(1)}`}async function tD(n){const e=await YO(n),t=wa().gapi;return qe(t,n,"internal-error"),e.open({where:document.body,url:eD(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ZO,dontclear:!0},r=>new Promise(async(i,a)=>{await r.restyle({setHideOnLeave:!1});const o=xa(n,"network-request-failed"),c=wa().setTimeout(()=>{a(o)},KO.get());function u(){wa().clearTimeout(c),i(r)}r.ping(u).then(u,()=>{a(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nD={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},rD=500,iD=600,aD="_blank",sD="http://localhost";class _E{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function oD(n,e,t,r=rD,i=iD){const a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let c="";const u={...nD,width:r.toString(),height:i.toString(),top:a,left:o},d=vr().toLowerCase();t&&(c=eC(d)?aD:t),ZS(d)&&(e=e||sD,u.scrollbars="yes");const m=Object.entries(u).reduce((_,[w,E])=>`${_}${w}=${E},`,"");if(N6(d)&&c!=="_self")return lD(e||"",c),new _E(null);const g=window.open(e||"",c,m);qe(g,n,"popup-blocked");try{g.focus()}catch{}return new _E(g)}function lD(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cD="__/auth/handler",uD="emulator/auth/handler",fD=encodeURIComponent("fac");async function xE(n,e,t,r,i,a){qe(n.config.authDomain,n,"auth-domain-config-required"),qe(n.config.apiKey,n,"invalid-api-key");const o={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:jc,eventId:i};if(e instanceof uC){e.setDefaultLanguage(n.languageCode),o.providerId=e.providerId||"",QR(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[m,g]of Object.entries({}))o[m]=g}if(e instanceof Gf){const m=e.getScopes().filter(g=>g!=="");m.length>0&&(o.scopes=m.join(","))}n.tenantId&&(o.tid=n.tenantId);const c=o;for(const m of Object.keys(c))c[m]===void 0&&delete c[m];const u=await n._getAppCheckToken(),d=u?`#${fD}=${encodeURIComponent(u)}`:"";return`${dD(n)}?${Uf(c).slice(1)}${d}`}function dD({config:n}){return n.emulator?$v(n,uD):`https://${n.authDomain}/${cD}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B1="webStorageSupport";class hD{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=yC,this._completeRedirectFn=LO,this._overrideRedirectResult=PO}async _openPopup(e,t,r,i){rs(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const a=await xE(e,t,r,Vg(),i);return oD(e,a,Qv())}async _openRedirect(e,t,r,i){await this._originValidation(e);const a=await xE(e,t,r,Vg(),i);return gO(a),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:a}=this.eventManagers[t];return i?Promise.resolve(i):(rs(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await tD(e),r=new VO(e);return t.register("authEvent",i=>(qe(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(B1,{type:B1},i=>{const a=i?.[0]?.[B1];a!==void 0&&t(!!a),Gi(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=GO(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return aC()||JS()||Yv()}}const pD=hD;var wE="@firebase/auth",EE="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mD{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){qe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gD(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function vD(n){Ec(new rl("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:o,authDomain:c}=r.options;qe(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:c,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:sC(n)},d=new k6(r,i,a,u);return q6(d,t),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Ec(new rl("auth-internal",e=>{const t=ll(e.getProvider("auth").getImmediate());return(r=>new mD(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Zs(wE,EE,gD(n)),Zs(wE,EE,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yD=300,_D=kS("authIdTokenMaxAge")||yD;let AE=null;const xD=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>_D)return;const i=t?.token;AE!==i&&(AE=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function wD(n=US()){const e=Gv(n,"auth");if(e.isInitialized())return e.getImmediate();const t=G6(n,{popupRedirectResolver:pD,persistence:[SO,hO,yC]}),r=kS("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(r,location.origin);if(location.origin===a.origin){const o=xD(a.toString());cO(t,o,()=>o(t.currentUser)),lO(t,c=>o(c))}}const i=MS("auth");return i&&$6(t,`http://${i}`),t}function ED(){return document.getElementsByTagName("head")?.[0]??document}j6({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{const a=xa("internal-error");a.customData=i,t(a)},r.type="text/javascript",r.charset="UTF-8",ED().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});vD("Browser");var AD="firebase",bD="12.3.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Zs(AD,bD,"app");var bE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Js,SC;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(M,b){function N(){}N.prototype=b.prototype,M.F=b.prototype,M.prototype=new N,M.prototype.constructor=M,M.D=function(I,R,L){for(var j=Array(arguments.length-2),W=2;W<arguments.length;W++)j[W-2]=arguments[W];return b.prototype[R].apply(I,j)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(M,b,N){N||(N=0);const I=Array(16);if(typeof b=="string")for(var R=0;R<16;++R)I[R]=b.charCodeAt(N++)|b.charCodeAt(N++)<<8|b.charCodeAt(N++)<<16|b.charCodeAt(N++)<<24;else for(R=0;R<16;++R)I[R]=b[N++]|b[N++]<<8|b[N++]<<16|b[N++]<<24;b=M.g[0],N=M.g[1],R=M.g[2];let L=M.g[3],j;j=b+(L^N&(R^L))+I[0]+3614090360&4294967295,b=N+(j<<7&4294967295|j>>>25),j=L+(R^b&(N^R))+I[1]+3905402710&4294967295,L=b+(j<<12&4294967295|j>>>20),j=R+(N^L&(b^N))+I[2]+606105819&4294967295,R=L+(j<<17&4294967295|j>>>15),j=N+(b^R&(L^b))+I[3]+3250441966&4294967295,N=R+(j<<22&4294967295|j>>>10),j=b+(L^N&(R^L))+I[4]+4118548399&4294967295,b=N+(j<<7&4294967295|j>>>25),j=L+(R^b&(N^R))+I[5]+1200080426&4294967295,L=b+(j<<12&4294967295|j>>>20),j=R+(N^L&(b^N))+I[6]+2821735955&4294967295,R=L+(j<<17&4294967295|j>>>15),j=N+(b^R&(L^b))+I[7]+4249261313&4294967295,N=R+(j<<22&4294967295|j>>>10),j=b+(L^N&(R^L))+I[8]+1770035416&4294967295,b=N+(j<<7&4294967295|j>>>25),j=L+(R^b&(N^R))+I[9]+2336552879&4294967295,L=b+(j<<12&4294967295|j>>>20),j=R+(N^L&(b^N))+I[10]+4294925233&4294967295,R=L+(j<<17&4294967295|j>>>15),j=N+(b^R&(L^b))+I[11]+2304563134&4294967295,N=R+(j<<22&4294967295|j>>>10),j=b+(L^N&(R^L))+I[12]+1804603682&4294967295,b=N+(j<<7&4294967295|j>>>25),j=L+(R^b&(N^R))+I[13]+4254626195&4294967295,L=b+(j<<12&4294967295|j>>>20),j=R+(N^L&(b^N))+I[14]+2792965006&4294967295,R=L+(j<<17&4294967295|j>>>15),j=N+(b^R&(L^b))+I[15]+1236535329&4294967295,N=R+(j<<22&4294967295|j>>>10),j=b+(R^L&(N^R))+I[1]+4129170786&4294967295,b=N+(j<<5&4294967295|j>>>27),j=L+(N^R&(b^N))+I[6]+3225465664&4294967295,L=b+(j<<9&4294967295|j>>>23),j=R+(b^N&(L^b))+I[11]+643717713&4294967295,R=L+(j<<14&4294967295|j>>>18),j=N+(L^b&(R^L))+I[0]+3921069994&4294967295,N=R+(j<<20&4294967295|j>>>12),j=b+(R^L&(N^R))+I[5]+3593408605&4294967295,b=N+(j<<5&4294967295|j>>>27),j=L+(N^R&(b^N))+I[10]+38016083&4294967295,L=b+(j<<9&4294967295|j>>>23),j=R+(b^N&(L^b))+I[15]+3634488961&4294967295,R=L+(j<<14&4294967295|j>>>18),j=N+(L^b&(R^L))+I[4]+3889429448&4294967295,N=R+(j<<20&4294967295|j>>>12),j=b+(R^L&(N^R))+I[9]+568446438&4294967295,b=N+(j<<5&4294967295|j>>>27),j=L+(N^R&(b^N))+I[14]+3275163606&4294967295,L=b+(j<<9&4294967295|j>>>23),j=R+(b^N&(L^b))+I[3]+4107603335&4294967295,R=L+(j<<14&4294967295|j>>>18),j=N+(L^b&(R^L))+I[8]+1163531501&4294967295,N=R+(j<<20&4294967295|j>>>12),j=b+(R^L&(N^R))+I[13]+2850285829&4294967295,b=N+(j<<5&4294967295|j>>>27),j=L+(N^R&(b^N))+I[2]+4243563512&4294967295,L=b+(j<<9&4294967295|j>>>23),j=R+(b^N&(L^b))+I[7]+1735328473&4294967295,R=L+(j<<14&4294967295|j>>>18),j=N+(L^b&(R^L))+I[12]+2368359562&4294967295,N=R+(j<<20&4294967295|j>>>12),j=b+(N^R^L)+I[5]+4294588738&4294967295,b=N+(j<<4&4294967295|j>>>28),j=L+(b^N^R)+I[8]+2272392833&4294967295,L=b+(j<<11&4294967295|j>>>21),j=R+(L^b^N)+I[11]+1839030562&4294967295,R=L+(j<<16&4294967295|j>>>16),j=N+(R^L^b)+I[14]+4259657740&4294967295,N=R+(j<<23&4294967295|j>>>9),j=b+(N^R^L)+I[1]+2763975236&4294967295,b=N+(j<<4&4294967295|j>>>28),j=L+(b^N^R)+I[4]+1272893353&4294967295,L=b+(j<<11&4294967295|j>>>21),j=R+(L^b^N)+I[7]+4139469664&4294967295,R=L+(j<<16&4294967295|j>>>16),j=N+(R^L^b)+I[10]+3200236656&4294967295,N=R+(j<<23&4294967295|j>>>9),j=b+(N^R^L)+I[13]+681279174&4294967295,b=N+(j<<4&4294967295|j>>>28),j=L+(b^N^R)+I[0]+3936430074&4294967295,L=b+(j<<11&4294967295|j>>>21),j=R+(L^b^N)+I[3]+3572445317&4294967295,R=L+(j<<16&4294967295|j>>>16),j=N+(R^L^b)+I[6]+76029189&4294967295,N=R+(j<<23&4294967295|j>>>9),j=b+(N^R^L)+I[9]+3654602809&4294967295,b=N+(j<<4&4294967295|j>>>28),j=L+(b^N^R)+I[12]+3873151461&4294967295,L=b+(j<<11&4294967295|j>>>21),j=R+(L^b^N)+I[15]+530742520&4294967295,R=L+(j<<16&4294967295|j>>>16),j=N+(R^L^b)+I[2]+3299628645&4294967295,N=R+(j<<23&4294967295|j>>>9),j=b+(R^(N|~L))+I[0]+4096336452&4294967295,b=N+(j<<6&4294967295|j>>>26),j=L+(N^(b|~R))+I[7]+1126891415&4294967295,L=b+(j<<10&4294967295|j>>>22),j=R+(b^(L|~N))+I[14]+2878612391&4294967295,R=L+(j<<15&4294967295|j>>>17),j=N+(L^(R|~b))+I[5]+4237533241&4294967295,N=R+(j<<21&4294967295|j>>>11),j=b+(R^(N|~L))+I[12]+1700485571&4294967295,b=N+(j<<6&4294967295|j>>>26),j=L+(N^(b|~R))+I[3]+2399980690&4294967295,L=b+(j<<10&4294967295|j>>>22),j=R+(b^(L|~N))+I[10]+4293915773&4294967295,R=L+(j<<15&4294967295|j>>>17),j=N+(L^(R|~b))+I[1]+2240044497&4294967295,N=R+(j<<21&4294967295|j>>>11),j=b+(R^(N|~L))+I[8]+1873313359&4294967295,b=N+(j<<6&4294967295|j>>>26),j=L+(N^(b|~R))+I[15]+4264355552&4294967295,L=b+(j<<10&4294967295|j>>>22),j=R+(b^(L|~N))+I[6]+2734768916&4294967295,R=L+(j<<15&4294967295|j>>>17),j=N+(L^(R|~b))+I[13]+1309151649&4294967295,N=R+(j<<21&4294967295|j>>>11),j=b+(R^(N|~L))+I[4]+4149444226&4294967295,b=N+(j<<6&4294967295|j>>>26),j=L+(N^(b|~R))+I[11]+3174756917&4294967295,L=b+(j<<10&4294967295|j>>>22),j=R+(b^(L|~N))+I[2]+718787259&4294967295,R=L+(j<<15&4294967295|j>>>17),j=N+(L^(R|~b))+I[9]+3951481745&4294967295,M.g[0]=M.g[0]+b&4294967295,M.g[1]=M.g[1]+(R+(j<<21&4294967295|j>>>11))&4294967295,M.g[2]=M.g[2]+R&4294967295,M.g[3]=M.g[3]+L&4294967295}r.prototype.v=function(M,b){b===void 0&&(b=M.length);const N=b-this.blockSize,I=this.C;let R=this.h,L=0;for(;L<b;){if(R==0)for(;L<=N;)i(this,M,L),L+=this.blockSize;if(typeof M=="string"){for(;L<b;)if(I[R++]=M.charCodeAt(L++),R==this.blockSize){i(this,I),R=0;break}}else for(;L<b;)if(I[R++]=M[L++],R==this.blockSize){i(this,I),R=0;break}}this.h=R,this.o+=b},r.prototype.A=function(){var M=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);M[0]=128;for(var b=1;b<M.length-8;++b)M[b]=0;b=this.o*8;for(var N=M.length-8;N<M.length;++N)M[N]=b&255,b/=256;for(this.v(M),M=Array(16),b=0,N=0;N<4;++N)for(let I=0;I<32;I+=8)M[b++]=this.g[N]>>>I&255;return M};function a(M,b){var N=c;return Object.prototype.hasOwnProperty.call(N,M)?N[M]:N[M]=b(M)}function o(M,b){this.h=b;const N=[];let I=!0;for(let R=M.length-1;R>=0;R--){const L=M[R]|0;I&&L==b||(N[R]=L,I=!1)}this.g=N}var c={};function u(M){return-128<=M&&M<128?a(M,function(b){return new o([b|0],b<0?-1:0)}):new o([M|0],M<0?-1:0)}function d(M){if(isNaN(M)||!isFinite(M))return g;if(M<0)return D(d(-M));const b=[];let N=1;for(let I=0;M>=N;I++)b[I]=M/N|0,N*=4294967296;return new o(b,0)}function m(M,b){if(M.length==0)throw Error("number format error: empty string");if(b=b||10,b<2||36<b)throw Error("radix out of range: "+b);if(M.charAt(0)=="-")return D(m(M.substring(1),b));if(M.indexOf("-")>=0)throw Error('number format error: interior "-" character');const N=d(Math.pow(b,8));let I=g;for(let L=0;L<M.length;L+=8){var R=Math.min(8,M.length-L);const j=parseInt(M.substring(L,L+R),b);R<8?(R=d(Math.pow(b,R)),I=I.j(R).add(d(j))):(I=I.j(N),I=I.add(d(j)))}return I}var g=u(0),_=u(1),w=u(16777216);n=o.prototype,n.m=function(){if(S(this))return-D(this).m();let M=0,b=1;for(let N=0;N<this.g.length;N++){const I=this.i(N);M+=(I>=0?I:4294967296+I)*b,b*=4294967296}return M},n.toString=function(M){if(M=M||10,M<2||36<M)throw Error("radix out of range: "+M);if(E(this))return"0";if(S(this))return"-"+D(this).toString(M);const b=d(Math.pow(M,6));var N=this;let I="";for(;;){const R=U(N,b).g;N=C(N,R.j(b));let L=((N.g.length>0?N.g[0]:N.h)>>>0).toString(M);if(N=R,E(N))return L+I;for(;L.length<6;)L="0"+L;I=L+I}},n.i=function(M){return M<0?0:M<this.g.length?this.g[M]:this.h};function E(M){if(M.h!=0)return!1;for(let b=0;b<M.g.length;b++)if(M.g[b]!=0)return!1;return!0}function S(M){return M.h==-1}n.l=function(M){return M=C(this,M),S(M)?-1:E(M)?0:1};function D(M){const b=M.g.length,N=[];for(let I=0;I<b;I++)N[I]=~M.g[I];return new o(N,~M.h).add(_)}n.abs=function(){return S(this)?D(this):this},n.add=function(M){const b=Math.max(this.g.length,M.g.length),N=[];let I=0;for(let R=0;R<=b;R++){let L=I+(this.i(R)&65535)+(M.i(R)&65535),j=(L>>>16)+(this.i(R)>>>16)+(M.i(R)>>>16);I=j>>>16,L&=65535,j&=65535,N[R]=j<<16|L}return new o(N,N[N.length-1]&-2147483648?-1:0)};function C(M,b){return M.add(D(b))}n.j=function(M){if(E(this)||E(M))return g;if(S(this))return S(M)?D(this).j(D(M)):D(D(this).j(M));if(S(M))return D(this.j(D(M)));if(this.l(w)<0&&M.l(w)<0)return d(this.m()*M.m());const b=this.g.length+M.g.length,N=[];for(var I=0;I<2*b;I++)N[I]=0;for(I=0;I<this.g.length;I++)for(let R=0;R<M.g.length;R++){const L=this.i(I)>>>16,j=this.i(I)&65535,W=M.i(R)>>>16,ge=M.i(R)&65535;N[2*I+2*R]+=j*ge,k(N,2*I+2*R),N[2*I+2*R+1]+=L*ge,k(N,2*I+2*R+1),N[2*I+2*R+1]+=j*W,k(N,2*I+2*R+1),N[2*I+2*R+2]+=L*W,k(N,2*I+2*R+2)}for(M=0;M<b;M++)N[M]=N[2*M+1]<<16|N[2*M];for(M=b;M<2*b;M++)N[M]=0;return new o(N,0)};function k(M,b){for(;(M[b]&65535)!=M[b];)M[b+1]+=M[b]>>>16,M[b]&=65535,b++}function V(M,b){this.g=M,this.h=b}function U(M,b){if(E(b))throw Error("division by zero");if(E(M))return new V(g,g);if(S(M))return b=U(D(M),b),new V(D(b.g),D(b.h));if(S(b))return b=U(M,D(b)),new V(D(b.g),b.h);if(M.g.length>30){if(S(M)||S(b))throw Error("slowDivide_ only works with positive integers.");for(var N=_,I=b;I.l(M)<=0;)N=q(N),I=q(I);var R=$(N,1),L=$(I,1);for(I=$(I,2),N=$(N,2);!E(I);){var j=L.add(I);j.l(M)<=0&&(R=R.add(N),L=j),I=$(I,1),N=$(N,1)}return b=C(M,R.j(b)),new V(R,b)}for(R=g;M.l(b)>=0;){for(N=Math.max(1,Math.floor(M.m()/b.m())),I=Math.ceil(Math.log(N)/Math.LN2),I=I<=48?1:Math.pow(2,I-48),L=d(N),j=L.j(b);S(j)||j.l(M)>0;)N-=I,L=d(N),j=L.j(b);E(L)&&(L=_),R=R.add(L),M=C(M,j)}return new V(R,M)}n.B=function(M){return U(this,M).h},n.and=function(M){const b=Math.max(this.g.length,M.g.length),N=[];for(let I=0;I<b;I++)N[I]=this.i(I)&M.i(I);return new o(N,this.h&M.h)},n.or=function(M){const b=Math.max(this.g.length,M.g.length),N=[];for(let I=0;I<b;I++)N[I]=this.i(I)|M.i(I);return new o(N,this.h|M.h)},n.xor=function(M){const b=Math.max(this.g.length,M.g.length),N=[];for(let I=0;I<b;I++)N[I]=this.i(I)^M.i(I);return new o(N,this.h^M.h)};function q(M){const b=M.g.length+1,N=[];for(let I=0;I<b;I++)N[I]=M.i(I)<<1|M.i(I-1)>>>31;return new o(N,M.h)}function $(M,b){const N=b>>5;b%=32;const I=M.g.length-N,R=[];for(let L=0;L<I;L++)R[L]=b>0?M.i(L+N)>>>b|M.i(L+N+1)<<32-b:M.i(L+N);return new o(R,M.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,SC=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=m,Js=o}).apply(typeof bE<"u"?bE:typeof self<"u"?self:typeof window<"u"?window:{});var Th=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var CC,rf,TC,Kh,zg,IC,NC,RC;(function(){var n,e=Object.defineProperty;function t(v){v=[typeof globalThis=="object"&&globalThis,v,typeof window=="object"&&window,typeof self=="object"&&self,typeof Th=="object"&&Th];for(var A=0;A<v.length;++A){var O=v[A];if(O&&O.Math==Math)return O}throw Error("Cannot find global object")}var r=t(this);function i(v,A){if(A)e:{var O=r;v=v.split(".");for(var F=0;F<v.length-1;F++){var Z=v[F];if(!(Z in O))break e;O=O[Z]}v=v[v.length-1],F=O[v],A=A(F),A!=F&&A!=null&&e(O,v,{configurable:!0,writable:!0,value:A})}}i("Symbol.dispose",function(v){return v||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(v){return v||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(v){return v||function(A){var O=[],F;for(F in A)Object.prototype.hasOwnProperty.call(A,F)&&O.push([F,A[F]]);return O}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},o=this||self;function c(v){var A=typeof v;return A=="object"&&v!=null||A=="function"}function u(v,A,O){return v.call.apply(v.bind,arguments)}function d(v,A,O){return d=u,d.apply(null,arguments)}function m(v,A){var O=Array.prototype.slice.call(arguments,1);return function(){var F=O.slice();return F.push.apply(F,arguments),v.apply(this,F)}}function g(v,A){function O(){}O.prototype=A.prototype,v.Z=A.prototype,v.prototype=new O,v.prototype.constructor=v,v.Ob=function(F,Z,ie){for(var xe=Array(arguments.length-2),Qe=2;Qe<arguments.length;Qe++)xe[Qe-2]=arguments[Qe];return A.prototype[Z].apply(F,xe)}}var _=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?v=>v&&AsyncContext.Snapshot.wrap(v):v=>v;function w(v){const A=v.length;if(A>0){const O=Array(A);for(let F=0;F<A;F++)O[F]=v[F];return O}return[]}function E(v,A){for(let F=1;F<arguments.length;F++){const Z=arguments[F];var O=typeof Z;if(O=O!="object"?O:Z?Array.isArray(Z)?"array":O:"null",O=="array"||O=="object"&&typeof Z.length=="number"){O=v.length||0;const ie=Z.length||0;v.length=O+ie;for(let xe=0;xe<ie;xe++)v[O+xe]=Z[xe]}else v.push(Z)}}class S{constructor(A,O){this.i=A,this.j=O,this.h=0,this.g=null}get(){let A;return this.h>0?(this.h--,A=this.g,this.g=A.next,A.next=null):A=this.i(),A}}function D(v){o.setTimeout(()=>{throw v},0)}function C(){var v=M;let A=null;return v.g&&(A=v.g,v.g=v.g.next,v.g||(v.h=null),A.next=null),A}class k{constructor(){this.h=this.g=null}add(A,O){const F=V.get();F.set(A,O),this.h?this.h.next=F:this.g=F,this.h=F}}var V=new S(()=>new U,v=>v.reset());class U{constructor(){this.next=this.g=this.h=null}set(A,O){this.h=A,this.g=O,this.next=null}reset(){this.next=this.g=this.h=null}}let q,$=!1,M=new k,b=()=>{const v=Promise.resolve(void 0);q=()=>{v.then(N)}};function N(){for(var v;v=C();){try{v.h.call(v.g)}catch(O){D(O)}var A=V;A.j(v),A.h<100&&(A.h++,v.next=A.g,A.g=v)}$=!1}function I(){this.u=this.u,this.C=this.C}I.prototype.u=!1,I.prototype.dispose=function(){this.u||(this.u=!0,this.N())},I.prototype[Symbol.dispose]=function(){this.dispose()},I.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function R(v,A){this.type=v,this.g=this.target=A,this.defaultPrevented=!1}R.prototype.h=function(){this.defaultPrevented=!0};var L=(function(){if(!o.addEventListener||!Object.defineProperty)return!1;var v=!1,A=Object.defineProperty({},"passive",{get:function(){v=!0}});try{const O=()=>{};o.addEventListener("test",O,A),o.removeEventListener("test",O,A)}catch{}return v})();function j(v){return/^[\s\xa0]*$/.test(v)}function W(v,A){R.call(this,v?v.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,v&&this.init(v,A)}g(W,R),W.prototype.init=function(v,A){const O=this.type=v.type,F=v.changedTouches&&v.changedTouches.length?v.changedTouches[0]:null;this.target=v.target||v.srcElement,this.g=A,A=v.relatedTarget,A||(O=="mouseover"?A=v.fromElement:O=="mouseout"&&(A=v.toElement)),this.relatedTarget=A,F?(this.clientX=F.clientX!==void 0?F.clientX:F.pageX,this.clientY=F.clientY!==void 0?F.clientY:F.pageY,this.screenX=F.screenX||0,this.screenY=F.screenY||0):(this.clientX=v.clientX!==void 0?v.clientX:v.pageX,this.clientY=v.clientY!==void 0?v.clientY:v.pageY,this.screenX=v.screenX||0,this.screenY=v.screenY||0),this.button=v.button,this.key=v.key||"",this.ctrlKey=v.ctrlKey,this.altKey=v.altKey,this.shiftKey=v.shiftKey,this.metaKey=v.metaKey,this.pointerId=v.pointerId||0,this.pointerType=v.pointerType,this.state=v.state,this.i=v,v.defaultPrevented&&W.Z.h.call(this)},W.prototype.h=function(){W.Z.h.call(this);const v=this.i;v.preventDefault?v.preventDefault():v.returnValue=!1};var ge="closure_listenable_"+(Math.random()*1e6|0),H=0;function G(v,A,O,F,Z){this.listener=v,this.proxy=null,this.src=A,this.type=O,this.capture=!!F,this.ha=Z,this.key=++H,this.da=this.fa=!1}function le(v){v.da=!0,v.listener=null,v.proxy=null,v.src=null,v.ha=null}function ve(v,A,O){for(const F in v)A.call(O,v[F],F,v)}function He(v,A){for(const O in v)A.call(void 0,v[O],O,v)}function Y(v){const A={};for(const O in v)A[O]=v[O];return A}const te="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function me(v,A){let O,F;for(let Z=1;Z<arguments.length;Z++){F=arguments[Z];for(O in F)v[O]=F[O];for(let ie=0;ie<te.length;ie++)O=te[ie],Object.prototype.hasOwnProperty.call(F,O)&&(v[O]=F[O])}}function we(v){this.src=v,this.g={},this.h=0}we.prototype.add=function(v,A,O,F,Z){const ie=v.toString();v=this.g[ie],v||(v=this.g[ie]=[],this.h++);const xe=be(v,A,F,Z);return xe>-1?(A=v[xe],O||(A.fa=!1)):(A=new G(A,this.src,ie,!!F,Z),A.fa=O,v.push(A)),A};function Ce(v,A){const O=A.type;if(O in v.g){var F=v.g[O],Z=Array.prototype.indexOf.call(F,A,void 0),ie;(ie=Z>=0)&&Array.prototype.splice.call(F,Z,1),ie&&(le(A),v.g[O].length==0&&(delete v.g[O],v.h--))}}function be(v,A,O,F){for(let Z=0;Z<v.length;++Z){const ie=v[Z];if(!ie.da&&ie.listener==A&&ie.capture==!!O&&ie.ha==F)return Z}return-1}var Se="closure_lm_"+(Math.random()*1e6|0),$e={};function tt(v,A,O,F,Z){if(Array.isArray(A)){for(let ie=0;ie<A.length;ie++)tt(v,A[ie],O,F,Z);return null}return O=Zn(O),v&&v[ge]?v.J(A,O,c(F)?!!F.capture:!1,Z):Xe(v,A,O,!1,F,Z)}function Xe(v,A,O,F,Z,ie){if(!A)throw Error("Invalid event type");const xe=c(Z)?!!Z.capture:!!Z;let Qe=fr(v);if(Qe||(v[Se]=Qe=new we(v)),O=Qe.add(A,O,F,xe,ie),O.proxy)return O;if(F=et(),O.proxy=F,F.src=v,F.listener=O,v.addEventListener)L||(Z=xe),Z===void 0&&(Z=!1),v.addEventListener(A.toString(),F,Z);else if(v.attachEvent)v.attachEvent(Jt(A.toString()),F);else if(v.addListener&&v.removeListener)v.addListener(F);else throw Error("addEventListener and attachEvent are unavailable.");return O}function et(){function v(O){return A.call(v.src,v.listener,O)}const A=It;return v}function Wn(v,A,O,F,Z){if(Array.isArray(A))for(var ie=0;ie<A.length;ie++)Wn(v,A[ie],O,F,Z);else F=c(F)?!!F.capture:!!F,O=Zn(O),v&&v[ge]?(v=v.i,ie=String(A).toString(),ie in v.g&&(A=v.g[ie],O=be(A,O,F,Z),O>-1&&(le(A[O]),Array.prototype.splice.call(A,O,1),A.length==0&&(delete v.g[ie],v.h--)))):v&&(v=fr(v))&&(A=v.g[A.toString()],v=-1,A&&(v=be(A,O,F,Z)),(O=v>-1?A[v]:null)&&Qn(O))}function Qn(v){if(typeof v!="number"&&v&&!v.da){var A=v.src;if(A&&A[ge])Ce(A.i,v);else{var O=v.type,F=v.proxy;A.removeEventListener?A.removeEventListener(O,F,v.capture):A.detachEvent?A.detachEvent(Jt(O),F):A.addListener&&A.removeListener&&A.removeListener(F),(O=fr(A))?(Ce(O,v),O.h==0&&(O.src=null,A[Se]=null)):le(v)}}}function Jt(v){return v in $e?$e[v]:$e[v]="on"+v}function It(v,A){if(v.da)v=!0;else{A=new W(A,this);const O=v.listener,F=v.ha||v.src;v.fa&&Qn(v),v=O.call(F,A)}return v}function fr(v){return v=v[Se],v instanceof we?v:null}var _r="__closure_events_fn_"+(Math.random()*1e9>>>0);function Zn(v){return typeof v=="function"?v:(v[_r]||(v[_r]=function(A){return v.handleEvent(A)}),v[_r])}function kt(){I.call(this),this.i=new we(this),this.M=this,this.G=null}g(kt,I),kt.prototype[ge]=!0,kt.prototype.removeEventListener=function(v,A,O,F){Wn(this,v,A,O,F)};function vt(v,A){var O,F=v.G;if(F)for(O=[];F;F=F.G)O.push(F);if(v=v.M,F=A.type||A,typeof A=="string")A=new R(A,v);else if(A instanceof R)A.target=A.target||v;else{var Z=A;A=new R(F,v),me(A,Z)}Z=!0;let ie,xe;if(O)for(xe=O.length-1;xe>=0;xe--)ie=A.g=O[xe],Z=Ln(ie,F,!0,A)&&Z;if(ie=A.g=v,Z=Ln(ie,F,!0,A)&&Z,Z=Ln(ie,F,!1,A)&&Z,O)for(xe=0;xe<O.length;xe++)ie=A.g=O[xe],Z=Ln(ie,F,!1,A)&&Z}kt.prototype.N=function(){if(kt.Z.N.call(this),this.i){var v=this.i;for(const A in v.g){const O=v.g[A];for(let F=0;F<O.length;F++)le(O[F]);delete v.g[A],v.h--}}this.G=null},kt.prototype.J=function(v,A,O,F){return this.i.add(String(v),A,!1,O,F)},kt.prototype.K=function(v,A,O,F){return this.i.add(String(v),A,!0,O,F)};function Ln(v,A,O,F){if(A=v.i.g[String(A)],!A)return!0;A=A.concat();let Z=!0;for(let ie=0;ie<A.length;++ie){const xe=A[ie];if(xe&&!xe.da&&xe.capture==O){const Qe=xe.listener,dn=xe.ha||xe.src;xe.fa&&Ce(v.i,xe),Z=Qe.call(dn,F)!==!1&&Z}}return Z&&!F.defaultPrevented}function Bn(v,A){if(typeof v!="function")if(v&&typeof v.handleEvent=="function")v=d(v.handleEvent,v);else throw Error("Invalid listener argument");return Number(A)>2147483647?-1:o.setTimeout(v,A||0)}function dr(v){v.g=Bn(()=>{v.g=null,v.i&&(v.i=!1,dr(v))},v.l);const A=v.h;v.h=null,v.m.apply(null,A)}class zt extends I{constructor(A,O){super(),this.m=A,this.l=O,this.h=null,this.i=!1,this.g=null}j(A){this.h=arguments,this.g?this.i=!0:dr(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function xr(v){I.call(this),this.h=v,this.g={}}g(xr,I);var zr=[];function se(v){ve(v.g,function(A,O){this.g.hasOwnProperty(O)&&Qn(A)},v),v.g={}}xr.prototype.N=function(){xr.Z.N.call(this),se(this)},xr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ee=o.JSON.stringify,ke=o.JSON.parse,Ct=class{stringify(v){return o.JSON.stringify(v,void 0)}parse(v){return o.JSON.parse(v,void 0)}};function de(){}function Oe(){}var De={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Me(){R.call(this,"d")}g(Me,R);function nt(){R.call(this,"c")}g(nt,R);var ye={},Ue=null;function Fe(){return Ue=Ue||new kt}ye.Ia="serverreachability";function $t(v){R.call(this,ye.Ia,v)}g($t,R);function Xt(v){const A=Fe();vt(A,new $t(A))}ye.STAT_EVENT="statevent";function Vn(v,A){R.call(this,ye.STAT_EVENT,v),this.stat=A}g(Vn,R);function en(v){const A=Fe();vt(A,new Vn(A,v))}ye.Ja="timingevent";function Tr(v,A){R.call(this,ye.Ja,v),this.size=A}g(Tr,R);function Wi(v,A){if(typeof v!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){v()},A)}function bi(){this.g=!0}bi.prototype.ua=function(){this.g=!1};function Ip(v,A,O,F,Z,ie){v.info(function(){if(v.g)if(ie){var xe="",Qe=ie.split("&");for(let Et=0;Et<Qe.length;Et++){var dn=Qe[Et].split("=");if(dn.length>1){const tn=dn[0];dn=dn[1];const si=tn.split("_");xe=si.length>=2&&si[1]=="type"?xe+(tn+"="+dn+"&"):xe+(tn+"=redacted&")}}}else xe=null;else xe=ie;return"XMLHTTP REQ ("+F+") [attempt "+Z+"]: "+A+`
`+O+`
`+xe})}function nd(v,A,O,F,Z,ie,xe){v.info(function(){return"XMLHTTP RESP ("+F+") [ attempt "+Z+"]: "+A+`
`+O+`
`+ie+" "+xe})}function Qi(v,A,O,F){v.info(function(){return"XMLHTTP TEXT ("+A+"): "+Np(v,O)+(F?" "+F:"")})}function _o(v,A){v.info(function(){return"TIMEOUT: "+A})}bi.prototype.info=function(){};function Np(v,A){if(!v.g)return A;if(!A)return null;try{const ie=JSON.parse(A);if(ie){for(v=0;v<ie.length;v++)if(Array.isArray(ie[v])){var O=ie[v];if(!(O.length<2)){var F=O[1];if(Array.isArray(F)&&!(F.length<1)){var Z=F[0];if(Z!="noop"&&Z!="stop"&&Z!="close")for(let xe=1;xe<F.length;xe++)F[xe]=""}}}}return Ee(ie)}catch{return A}}var xo={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Kc={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Wc;function wo(){}g(wo,de),wo.prototype.g=function(){return new XMLHttpRequest},Wc=new wo;function Ra(v){return encodeURIComponent(String(v))}function rd(v){var A=1;v=v.split(":");const O=[];for(;A>0&&v.length;)O.push(v.shift()),A--;return v.length&&O.push(v.join(":")),O}function Si(v,A,O,F){this.j=v,this.i=A,this.l=O,this.S=F||1,this.V=new xr(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Ci}function Ci(){this.i=null,this.g="",this.h=!1}var yn={},Fn={};function Zi(v,A,O){v.M=1,v.A=Eo(xn(A)),v.u=O,v.R=!0,ml(v,null)}function ml(v,A){v.F=Date.now(),Ji(v),v.B=xn(v.A);var O=v.B,F=v.S;Array.isArray(F)||(F=[String(F)]),_l(O.i,"t",F),v.C=0,O=v.j.L,v.h=new Ci,v.g=yd(v.j,O?A:null,!v.u),v.P>0&&(v.O=new zt(d(v.Y,v,v.g),v.P)),A=v.V,O=v.g,F=v.ba;var Z="readystatechange";Array.isArray(Z)||(Z&&(zr[0]=Z.toString()),Z=zr);for(let ie=0;ie<Z.length;ie++){const xe=tt(O,Z[ie],F||A.handleEvent,!1,A.h||A);if(!xe)break;A.g[xe.key]=xe}A=v.J?Y(v.J):{},v.u?(v.v||(v.v="POST"),A["Content-Type"]="application/x-www-form-urlencoded",v.g.ea(v.B,v.v,v.u,A)):(v.v="GET",v.g.ea(v.B,v.v,null,A)),Xt(),Ip(v.i,v.v,v.B,v.l,v.S,v.u)}Si.prototype.ba=function(v){v=v.target;const A=this.O;A&&Ni(v)==3?A.j():this.Y(v)},Si.prototype.Y=function(v){try{if(v==this.g)e:{const Qe=Ni(this.g),dn=this.g.ya(),Et=this.g.ca();if(!(Qe<3)&&(Qe!=3||this.g&&(this.h.h||this.g.la()||Jn(this.g)))){this.K||Qe!=4||dn==7||(dn==8||Et<=0?Xt(3):Xt(2)),ea(this);var A=this.g.ca();this.X=A;var O=Rp(this);if(this.o=A==200,nd(this.i,this.v,this.B,this.l,this.S,Qe,A),this.o){if(this.U&&!this.L){t:{if(this.g){var F,Z=this.g;if((F=Z.g?Z.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!j(F)){var ie=F;break t}}ie=null}if(v=ie)Qi(this.i,this.l,v,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,ta(this,v);else{this.o=!1,this.m=3,en(12),Hr(this),ri(this);break e}}if(this.R){v=!0;let tn;for(;!this.K&&this.C<O.length;)if(tn=ad(this,O),tn==Fn){Qe==4&&(this.m=4,en(14),v=!1),Qi(this.i,this.l,null,"[Incomplete Response]");break}else if(tn==yn){this.m=4,en(15),Qi(this.i,this.l,O,"[Invalid Chunk]"),v=!1;break}else Qi(this.i,this.l,tn,null),ta(this,tn);if(id(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Qe!=4||O.length!=0||this.h.h||(this.m=1,en(16),v=!1),this.o=this.o&&v,!v)Qi(this.i,this.l,O,"[Invalid Chunked Response]"),Hr(this),ri(this);else if(O.length>0&&!this.W){this.W=!0;var xe=this.j;xe.g==this&&xe.aa&&!xe.P&&(xe.j.info("Great, no buffering proxy detected. Bytes received: "+O.length),fu(xe),xe.P=!0,en(11))}}else Qi(this.i,this.l,O,null),ta(this,O);Qe==4&&Hr(this),this.o&&!this.K&&(Qe==4?pd(this.j,this):(this.o=!1,Ji(this)))}else Da(this.g),A==400&&O.indexOf("Unknown SID")>0?(this.m=3,en(12)):(this.m=0,en(13)),Hr(this),ri(this)}}}catch{}finally{}};function Rp(v){if(!id(v))return v.g.la();const A=Jn(v.g);if(A==="")return"";let O="";const F=A.length,Z=Ni(v.g)==4;if(!v.h.i){if(typeof TextDecoder>"u")return Hr(v),ri(v),"";v.h.i=new o.TextDecoder}for(let ie=0;ie<F;ie++)v.h.h=!0,O+=v.h.i.decode(A[ie],{stream:!(Z&&ie==F-1)});return A.length=0,v.h.g+=O,v.C=0,v.h.g}function id(v){return v.g?v.v=="GET"&&v.M!=2&&v.j.Aa:!1}function ad(v,A){var O=v.C,F=A.indexOf(`
`,O);return F==-1?Fn:(O=Number(A.substring(O,F)),isNaN(O)?yn:(F+=1,F+O>A.length?Fn:(A=A.slice(F,F+O),v.C=F+O,A)))}Si.prototype.cancel=function(){this.K=!0,Hr(this)};function Ji(v){v.T=Date.now()+v.H,gl(v,v.H)}function gl(v,A){if(v.D!=null)throw Error("WatchDog timer not null");v.D=Wi(d(v.aa,v),A)}function ea(v){v.D&&(o.clearTimeout(v.D),v.D=null)}Si.prototype.aa=function(){this.D=null;const v=Date.now();v-this.T>=0?(_o(this.i,this.B),this.M!=2&&(Xt(),en(17)),Hr(this),this.m=2,ri(this)):gl(this,this.T-v)};function ri(v){v.j.I==0||v.K||pd(v.j,v)}function Hr(v){ea(v);var A=v.O;A&&typeof A.dispose=="function"&&A.dispose(),v.O=null,se(v.V),v.g&&(A=v.g,v.g=null,A.abort(),A.dispose())}function ta(v,A){try{var O=v.j;if(O.I!=0&&(O.g==v||ra(O.h,v))){if(!v.L&&ra(O.h,v)&&O.I==3){try{var F=O.Ba.g.parse(A)}catch{F=null}if(Array.isArray(F)&&F.length==3){var Z=F;if(Z[0]==0){e:if(!O.v){if(O.g)if(O.g.F+3e3<v.F)bl(O),ms(O);else break e;No(O),en(18)}}else O.xa=Z[1],0<O.xa-O.K&&Z[2]<37500&&O.F&&O.A==0&&!O.C&&(O.C=Wi(d(O.Va,O),6e3));na(O.h)<=1&&O.ta&&(O.ta=void 0)}else ca(O,11)}else if((v.L||O.g==v)&&bl(O),!j(A))for(Z=O.Ba.g.parse(A),A=0;A<Z.length;A++){let Et=Z[A];const tn=Et[0];if(!(tn<=O.K))if(O.K=tn,Et=Et[1],O.I==2)if(Et[0]=="c"){O.M=Et[1],O.ba=Et[2];const si=Et[3];si!=null&&(O.ka=si,O.j.info("VER="+O.ka));const ua=Et[4];ua!=null&&(O.za=ua,O.j.info("SVER="+O.za));const Ri=Et[5];Ri!=null&&typeof Ri=="number"&&Ri>0&&(F=1.5*Ri,O.O=F,O.j.info("backChannelRequestTimeoutMs_="+F)),F=O;const Oi=v.g;if(Oi){const Ro=Oi.g?Oi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ro){var ie=F.h;ie.g||Ro.indexOf("spdy")==-1&&Ro.indexOf("quic")==-1&&Ro.indexOf("h2")==-1||(ie.j=ie.l,ie.g=new Set,ie.h&&(Jc(ie,ie.h),ie.h=null))}if(F.G){const Sl=Oi.g?Oi.g.getResponseHeader("X-HTTP-Session-Id"):null;Sl&&(F.wa=Sl,Nt(F.J,F.G,Sl))}}O.I=3,O.l&&O.l.ra(),O.aa&&(O.T=Date.now()-v.F,O.j.info("Handshake RTT: "+O.T+"ms")),F=O;var xe=v;if(F.na=vd(F,F.L?F.ba:null,F.W),xe.L){eu(F.h,xe);var Qe=xe,dn=F.O;dn&&(Qe.H=dn),Qe.D&&(ea(Qe),Ji(Qe)),F.g=xe}else dd(F);O.i.length>0&&la(O)}else Et[0]!="stop"&&Et[0]!="close"||ca(O,7);else O.I==3&&(Et[0]=="stop"||Et[0]=="close"?Et[0]=="stop"?ca(O,7):cu(O):Et[0]!="noop"&&O.l&&O.l.qa(Et),O.A=0)}}Xt(4)}catch{}}var _n=class{constructor(v,A){this.g=v,this.map=A}};function Qc(v){this.l=v||10,o.PerformanceNavigationTiming?(v=o.performance.getEntriesByType("navigation"),v=v.length>0&&(v[0].nextHopProtocol=="hq"||v[0].nextHopProtocol=="h2")):v=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=v?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Zc(v){return v.h?!0:v.g?v.g.size>=v.j:!1}function na(v){return v.h?1:v.g?v.g.size:0}function ra(v,A){return v.h?v.h==A:v.g?v.g.has(A):!1}function Jc(v,A){v.g?v.g.add(A):v.h=A}function eu(v,A){v.h&&v.h==A?v.h=null:v.g&&v.g.has(A)&&v.g.delete(A)}Qc.prototype.cancel=function(){if(this.i=tu(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const v of this.g.values())v.cancel();this.g.clear()}};function tu(v){if(v.h!=null)return v.i.concat(v.h.G);if(v.g!=null&&v.g.size!==0){let A=v.i;for(const O of v.g.values())A=A.concat(O.G);return A}return w(v.i)}var sd=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function vl(v,A){if(v){v=v.split("&");for(let O=0;O<v.length;O++){const F=v[O].indexOf("=");let Z,ie=null;F>=0?(Z=v[O].substring(0,F),ie=v[O].substring(F+1)):Z=v[O],A(Z,ie?decodeURIComponent(ie.replace(/\+/g," ")):"")}}}function Gr(v){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let A;v instanceof Gr?(this.l=v.l,Un(this,v.j),this.o=v.o,this.g=v.g,ls(this,v.u),this.h=v.h,nu(this,ud(v.i)),this.m=v.m):v&&(A=String(v).match(sd))?(this.l=!1,Un(this,A[1]||"",!0),this.o=ia(A[2]||""),this.g=ia(A[3]||"",!0),ls(this,A[4]),this.h=ia(A[5]||"",!0),nu(this,A[6]||"",!0),this.m=ia(A[7]||"")):(this.l=!1,this.i=new us(null,this.l))}Gr.prototype.toString=function(){const v=[];var A=this.j;A&&v.push(Ao(A,yl,!0),":");var O=this.g;return(O||A=="file")&&(v.push("//"),(A=this.o)&&v.push(Ao(A,yl,!0),"@"),v.push(Ra(O).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),O=this.u,O!=null&&v.push(":",String(O))),(O=this.h)&&(this.g&&O.charAt(0)!="/"&&v.push("/"),v.push(Ao(O,O.charAt(0)=="/"?ru:od,!0))),(O=this.i.toString())&&v.push("?",O),(O=this.m)&&v.push("#",Ao(O,ld)),v.join("")},Gr.prototype.resolve=function(v){const A=xn(this);let O=!!v.j;O?Un(A,v.j):O=!!v.o,O?A.o=v.o:O=!!v.g,O?A.g=v.g:O=v.u!=null;var F=v.h;if(O)ls(A,v.u);else if(O=!!v.h){if(F.charAt(0)!="/")if(this.g&&!this.h)F="/"+F;else{var Z=A.h.lastIndexOf("/");Z!=-1&&(F=A.h.slice(0,Z+1)+F)}if(Z=F,Z==".."||Z==".")F="";else if(Z.indexOf("./")!=-1||Z.indexOf("/.")!=-1){F=Z.lastIndexOf("/",0)==0,Z=Z.split("/");const ie=[];for(let xe=0;xe<Z.length;){const Qe=Z[xe++];Qe=="."?F&&xe==Z.length&&ie.push(""):Qe==".."?((ie.length>1||ie.length==1&&ie[0]!="")&&ie.pop(),F&&xe==Z.length&&ie.push("")):(ie.push(Qe),F=!0)}F=ie.join("/")}else F=Z}return O?A.h=F:O=v.i.toString()!=="",O?nu(A,ud(v.i)):O=!!v.m,O&&(A.m=v.m),A};function xn(v){return new Gr(v)}function Un(v,A,O){v.j=O?ia(A,!0):A,v.j&&(v.j=v.j.replace(/:$/,""))}function ls(v,A){if(A){if(A=Number(A),isNaN(A)||A<0)throw Error("Bad port number "+A);v.u=A}else v.u=null}function nu(v,A,O){A instanceof us?(v.i=A,xl(v.i,v.l)):(O||(A=Ao(A,cs)),v.i=new us(A,v.l))}function Nt(v,A,O){v.i.set(A,O)}function Eo(v){return Nt(v,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),v}function ia(v,A){return v?A?decodeURI(v.replace(/%25/g,"%2525")):decodeURIComponent(v):""}function Ao(v,A,O){return typeof v=="string"?(v=encodeURI(v).replace(A,Ir),O&&(v=v.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v):null}function Ir(v){return v=v.charCodeAt(0),"%"+(v>>4&15).toString(16)+(v&15).toString(16)}var yl=/[#\/\?@]/g,od=/[#\?:]/g,ru=/[#\?]/g,cs=/[#\?@]/g,ld=/#/g;function us(v,A){this.h=this.g=null,this.i=v||null,this.j=!!A}function Nr(v){v.g||(v.g=new Map,v.h=0,v.i&&vl(v.i,function(A,O){v.add(decodeURIComponent(A.replace(/\+/g," ")),O)}))}n=us.prototype,n.add=function(v,A){Nr(this),this.i=null,v=fs(this,v);let O=this.g.get(v);return O||this.g.set(v,O=[]),O.push(A),this.h+=1,this};function cd(v,A){Nr(v),A=fs(v,A),v.g.has(A)&&(v.i=null,v.h-=v.g.get(A).length,v.g.delete(A))}function iu(v,A){return Nr(v),A=fs(v,A),v.g.has(A)}n.forEach=function(v,A){Nr(this),this.g.forEach(function(O,F){O.forEach(function(Z){v.call(A,Z,F,this)},this)},this)};function au(v,A){Nr(v);let O=[];if(typeof A=="string")iu(v,A)&&(O=O.concat(v.g.get(fs(v,A))));else for(v=Array.from(v.g.values()),A=0;A<v.length;A++)O=O.concat(v[A]);return O}n.set=function(v,A){return Nr(this),this.i=null,v=fs(this,v),iu(this,v)&&(this.h-=this.g.get(v).length),this.g.set(v,[A]),this.h+=1,this},n.get=function(v,A){return v?(v=au(this,v),v.length>0?String(v[0]):A):A};function _l(v,A,O){cd(v,A),O.length>0&&(v.i=null,v.g.set(fs(v,A),w(O)),v.h+=O.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const v=[],A=Array.from(this.g.keys());for(let F=0;F<A.length;F++){var O=A[F];const Z=Ra(O);O=au(this,O);for(let ie=0;ie<O.length;ie++){let xe=Z;O[ie]!==""&&(xe+="="+Ra(O[ie])),v.push(xe)}}return this.i=v.join("&")};function ud(v){const A=new us;return A.i=v.i,v.g&&(A.g=new Map(v.g),A.h=v.h),A}function fs(v,A){return A=String(A),v.j&&(A=A.toLowerCase()),A}function xl(v,A){A&&!v.j&&(Nr(v),v.i=null,v.g.forEach(function(O,F){const Z=F.toLowerCase();F!=Z&&(cd(this,F),_l(this,Z,O))},v)),v.j=A}function Ti(v,A){const O=new bi;if(o.Image){const F=new Image;F.onload=m(ii,O,"TestLoadImage: loaded",!0,A,F),F.onerror=m(ii,O,"TestLoadImage: error",!1,A,F),F.onabort=m(ii,O,"TestLoadImage: abort",!1,A,F),F.ontimeout=m(ii,O,"TestLoadImage: timeout",!1,A,F),o.setTimeout(function(){F.ontimeout&&F.ontimeout()},1e4),F.src=v}else A(!1)}function su(v,A){const O=new bi,F=new AbortController,Z=setTimeout(()=>{F.abort(),ii(O,"TestPingServer: timeout",!1,A)},1e4);fetch(v,{signal:F.signal}).then(ie=>{clearTimeout(Z),ie.ok?ii(O,"TestPingServer: ok",!0,A):ii(O,"TestPingServer: server error",!1,A)}).catch(()=>{clearTimeout(Z),ii(O,"TestPingServer: error",!1,A)})}function ii(v,A,O,F,Z){try{Z&&(Z.onload=null,Z.onerror=null,Z.onabort=null,Z.ontimeout=null),F(O)}catch{}}function ds(){this.g=new Ct}function aa(v){this.i=v.Sb||null,this.h=v.ab||!1}g(aa,de),aa.prototype.g=function(){return new bo(this.i,this.h)};function bo(v,A){kt.call(this),this.H=v,this.o=A,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}g(bo,kt),n=bo.prototype,n.open=function(v,A){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=v,this.D=A,this.readyState=1,Ii(this)},n.send=function(v){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const A={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};v&&(A.body=v),(this.H||o).fetch(new Request(this.D,A)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,hs(this)),this.readyState=0},n.Pa=function(v){if(this.g&&(this.l=v,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=v.headers,this.readyState=2,Ii(this)),this.g&&(this.readyState=3,Ii(this),this.g)))if(this.responseType==="arraybuffer")v.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in v){if(this.j=v.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;wl(this)}else v.text().then(this.Oa.bind(this),this.ga.bind(this))};function wl(v){v.j.read().then(v.Ma.bind(v)).catch(v.ga.bind(v))}n.Ma=function(v){if(this.g){if(this.o&&v.value)this.response.push(v.value);else if(!this.o){var A=v.value?v.value:new Uint8Array(0);(A=this.B.decode(A,{stream:!v.done}))&&(this.response=this.responseText+=A)}v.done?hs(this):Ii(this),this.readyState==3&&wl(this)}},n.Oa=function(v){this.g&&(this.response=this.responseText=v,hs(this))},n.Na=function(v){this.g&&(this.response=v,hs(this))},n.ga=function(){this.g&&hs(this)};function hs(v){v.readyState=4,v.l=null,v.j=null,v.B=null,Ii(v)}n.setRequestHeader=function(v,A){this.A.append(v,A)},n.getResponseHeader=function(v){return this.h&&this.h.get(v.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const v=[],A=this.h.entries();for(var O=A.next();!O.done;)O=O.value,v.push(O[0]+": "+O[1]),O=A.next();return v.join(`\r
`)};function Ii(v){v.onreadystatechange&&v.onreadystatechange.call(v)}Object.defineProperty(bo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(v){this.m=v?"include":"same-origin"}});function ai(v){let A="";return ve(v,function(O,F){A+=F,A+=":",A+=O,A+=`\r
`}),A}function So(v,A,O){e:{for(F in O){var F=!1;break e}F=!0}F||(O=ai(O),typeof v=="string"?O!=null&&Ra(O):Nt(v,A,O))}function jt(v){kt.call(this),this.headers=new Map,this.L=v||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}g(jt,kt);var sa=/^https?$/i,ou=["POST","PUT"];n=jt.prototype,n.Fa=function(v){this.H=v},n.ea=function(v,A,O,F){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+v);A=A?A.toUpperCase():"GET",this.D=v,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Wc.g(),this.g.onreadystatechange=_(d(this.Ca,this));try{this.B=!0,this.g.open(A,String(v),!0),this.B=!1}catch(ie){Co(this,ie);return}if(v=O||"",O=new Map(this.headers),F)if(Object.getPrototypeOf(F)===Object.prototype)for(var Z in F)O.set(Z,F[Z]);else if(typeof F.keys=="function"&&typeof F.get=="function")for(const ie of F.keys())O.set(ie,F.get(ie));else throw Error("Unknown input type for opt_headers: "+String(F));F=Array.from(O.keys()).find(ie=>ie.toLowerCase()=="content-type"),Z=o.FormData&&v instanceof o.FormData,!(Array.prototype.indexOf.call(ou,A,void 0)>=0)||F||Z||O.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ie,xe]of O)this.g.setRequestHeader(ie,xe);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(v),this.v=!1}catch(ie){Co(this,ie)}};function Co(v,A){v.h=!1,v.g&&(v.j=!0,v.g.abort(),v.j=!1),v.l=A,v.o=5,lu(v),Oa(v)}function lu(v){v.A||(v.A=!0,vt(v,"complete"),vt(v,"error"))}n.abort=function(v){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=v||7,vt(this,"complete"),vt(this,"abort"),Oa(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Oa(this,!0)),jt.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?To(this):this.Xa())},n.Xa=function(){To(this)};function To(v){if(v.h&&typeof a<"u"){if(v.v&&Ni(v)==4)setTimeout(v.Ca.bind(v),0);else if(vt(v,"readystatechange"),Ni(v)==4){v.h=!1;try{const ie=v.ca();e:switch(ie){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var A=!0;break e;default:A=!1}var O;if(!(O=A)){var F;if(F=ie===0){let xe=String(v.D).match(sd)[1]||null;!xe&&o.self&&o.self.location&&(xe=o.self.location.protocol.slice(0,-1)),F=!sa.test(xe?xe.toLowerCase():"")}O=F}if(O)vt(v,"complete"),vt(v,"success");else{v.o=6;try{var Z=Ni(v)>2?v.g.statusText:""}catch{Z=""}v.l=Z+" ["+v.ca()+"]",lu(v)}}finally{Oa(v)}}}}function Oa(v,A){if(v.g){v.m&&(clearTimeout(v.m),v.m=null);const O=v.g;v.g=null,A||vt(v,"ready");try{O.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function Ni(v){return v.g?v.g.readyState:0}n.ca=function(){try{return Ni(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(v){if(this.g){var A=this.g.responseText;return v&&A.indexOf(v)==0&&(A=A.substring(v.length)),ke(A)}};function Jn(v){try{if(!v.g)return null;if("response"in v.g)return v.g.response;switch(v.F){case"":case"text":return v.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in v.g)return v.g.mozResponseArrayBuffer}return null}catch{return null}}function Da(v){const A={};v=(v.g&&Ni(v)>=2&&v.g.getAllResponseHeaders()||"").split(`\r
`);for(let F=0;F<v.length;F++){if(j(v[F]))continue;var O=rd(v[F]);const Z=O[0];if(O=O[1],typeof O!="string")continue;O=O.trim();const ie=A[Z]||[];A[Z]=ie,ie.push(O)}He(A,function(F){return F.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function oa(v,A,O){return O&&O.internalChannelParams&&O.internalChannelParams[v]||A}function ps(v){this.za=0,this.i=[],this.j=new bi,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=oa("failFast",!1,v),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=oa("baseRetryDelayMs",5e3,v),this.Za=oa("retryDelaySeedMs",1e4,v),this.Ta=oa("forwardChannelMaxRetries",2,v),this.va=oa("forwardChannelRequestTimeoutMs",2e4,v),this.ma=v&&v.xmlHttpFactory||void 0,this.Ua=v&&v.Rb||void 0,this.Aa=v&&v.useFetchStreams||!1,this.O=void 0,this.L=v&&v.supportsCrossDomainXhr||!1,this.M="",this.h=new Qc(v&&v.concurrentRequestLimit),this.Ba=new ds,this.S=v&&v.fastHandshake||!1,this.R=v&&v.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=v&&v.Pb||!1,v&&v.ua&&this.j.ua(),v&&v.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&v&&v.detectBufferingProxy||!1,this.ia=void 0,v&&v.longPollingTimeout&&v.longPollingTimeout>0&&(this.ia=v.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=ps.prototype,n.ka=8,n.I=1,n.connect=function(v,A,O,F){en(0),this.W=v,this.H=A||{},O&&F!==void 0&&(this.H.OSID=O,this.H.OAID=F),this.F=this.X,this.J=vd(this,null,this.W),la(this)};function cu(v){if(El(v),v.I==3){var A=v.V++,O=xn(v.J);if(Nt(O,"SID",v.M),Nt(O,"RID",A),Nt(O,"TYPE","terminate"),Io(v,O),A=new Si(v,v.j,A),A.M=2,A.A=Eo(xn(O)),O=!1,o.navigator&&o.navigator.sendBeacon)try{O=o.navigator.sendBeacon(A.A.toString(),"")}catch{}!O&&o.Image&&(new Image().src=A.A,O=!0),O||(A.g=yd(A.j,null),A.g.ea(A.A)),A.F=Date.now(),Ji(A)}gd(v)}function ms(v){v.g&&(fu(v),v.g.cancel(),v.g=null)}function El(v){ms(v),v.v&&(o.clearTimeout(v.v),v.v=null),bl(v),v.h.cancel(),v.m&&(typeof v.m=="number"&&o.clearTimeout(v.m),v.m=null)}function la(v){if(!Zc(v.h)&&!v.m){v.m=!0;var A=v.Ea;q||b(),$||(q(),$=!0),M.add(A,v),v.D=0}}function Al(v,A){return na(v.h)>=v.h.j-(v.m?1:0)?!1:v.m?(v.i=A.G.concat(v.i),!0):v.I==1||v.I==2||v.D>=(v.Sa?0:v.Ta)?!1:(v.m=Wi(d(v.Ea,v,A),md(v,v.D)),v.D++,!0)}n.Ea=function(v){if(this.m)if(this.m=null,this.I==1){if(!v){this.V=Math.floor(Math.random()*1e5),v=this.V++;const Z=new Si(this,this.j,v);let ie=this.o;if(this.U&&(ie?(ie=Y(ie),me(ie,this.U)):ie=this.U),this.u!==null||this.R||(Z.J=ie,ie=null),this.S)e:{for(var A=0,O=0;O<this.i.length;O++){t:{var F=this.i[O];if("__data__"in F.map&&(F=F.map.__data__,typeof F=="string")){F=F.length;break t}F=void 0}if(F===void 0)break;if(A+=F,A>4096){A=O;break e}if(A===4096||O===this.i.length-1){A=O+1;break e}}A=1e3}else A=1e3;A=fd(this,Z,A),O=xn(this.J),Nt(O,"RID",v),Nt(O,"CVER",22),this.G&&Nt(O,"X-HTTP-Session-Id",this.G),Io(this,O),ie&&(this.R?A="headers="+Ra(ai(ie))+"&"+A:this.u&&So(O,this.u,ie)),Jc(this.h,Z),this.Ra&&Nt(O,"TYPE","init"),this.S?(Nt(O,"$req",A),Nt(O,"SID","null"),Z.U=!0,Zi(Z,O,null)):Zi(Z,O,A),this.I=2}}else this.I==3&&(v?uu(this,v):this.i.length==0||Zc(this.h)||uu(this))};function uu(v,A){var O;A?O=A.l:O=v.V++;const F=xn(v.J);Nt(F,"SID",v.M),Nt(F,"RID",O),Nt(F,"AID",v.K),Io(v,F),v.u&&v.o&&So(F,v.u,v.o),O=new Si(v,v.j,O,v.D+1),v.u===null&&(O.J=v.o),A&&(v.i=A.G.concat(v.i)),A=fd(v,O,1e3),O.H=Math.round(v.va*.5)+Math.round(v.va*.5*Math.random()),Jc(v.h,O),Zi(O,F,A)}function Io(v,A){v.H&&ve(v.H,function(O,F){Nt(A,F,O)}),v.l&&ve({},function(O,F){Nt(A,F,O)})}function fd(v,A,O){O=Math.min(v.i.length,O);const F=v.l?d(v.l.Ka,v.l,v):null;e:{var Z=v.i;let Qe=-1;for(;;){const dn=["count="+O];Qe==-1?O>0?(Qe=Z[0].g,dn.push("ofs="+Qe)):Qe=0:dn.push("ofs="+Qe);let Et=!0;for(let tn=0;tn<O;tn++){var ie=Z[tn].g;const si=Z[tn].map;if(ie-=Qe,ie<0)Qe=Math.max(0,Z[tn].g-100),Et=!1;else try{ie="req"+ie+"_"||"";try{var xe=si instanceof Map?si:Object.entries(si);for(const[ua,Ri]of xe){let Oi=Ri;c(Ri)&&(Oi=Ee(Ri)),dn.push(ie+ua+"="+encodeURIComponent(Oi))}}catch(ua){throw dn.push(ie+"type="+encodeURIComponent("_badmap")),ua}}catch{F&&F(si)}}if(Et){xe=dn.join("&");break e}}xe=void 0}return v=v.i.splice(0,O),A.G=v,xe}function dd(v){if(!v.g&&!v.v){v.Y=1;var A=v.Da;q||b(),$||(q(),$=!0),M.add(A,v),v.A=0}}function No(v){return v.g||v.v||v.A>=3?!1:(v.Y++,v.v=Wi(d(v.Da,v),md(v,v.A)),v.A++,!0)}n.Da=function(){if(this.v=null,hd(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var v=4*this.T;this.j.info("BP detection timer enabled: "+v),this.B=Wi(d(this.Wa,this),v)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,en(10),ms(this),hd(this))};function fu(v){v.B!=null&&(o.clearTimeout(v.B),v.B=null)}function hd(v){v.g=new Si(v,v.j,"rpc",v.Y),v.u===null&&(v.g.J=v.o),v.g.P=0;var A=xn(v.na);Nt(A,"RID","rpc"),Nt(A,"SID",v.M),Nt(A,"AID",v.K),Nt(A,"CI",v.F?"0":"1"),!v.F&&v.ia&&Nt(A,"TO",v.ia),Nt(A,"TYPE","xmlhttp"),Io(v,A),v.u&&v.o&&So(A,v.u,v.o),v.O&&(v.g.H=v.O);var O=v.g;v=v.ba,O.M=1,O.A=Eo(xn(A)),O.u=null,O.R=!0,ml(O,v)}n.Va=function(){this.C!=null&&(this.C=null,ms(this),No(this),en(19))};function bl(v){v.C!=null&&(o.clearTimeout(v.C),v.C=null)}function pd(v,A){var O=null;if(v.g==A){bl(v),fu(v),v.g=null;var F=2}else if(ra(v.h,A))O=A.G,eu(v.h,A),F=1;else return;if(v.I!=0){if(A.o)if(F==1){O=A.u?A.u.length:0,A=Date.now()-A.F;var Z=v.D;F=Fe(),vt(F,new Tr(F,O)),la(v)}else dd(v);else if(Z=A.m,Z==3||Z==0&&A.X>0||!(F==1&&Al(v,A)||F==2&&No(v)))switch(O&&O.length>0&&(A=v.h,A.i=A.i.concat(O)),Z){case 1:ca(v,5);break;case 4:ca(v,10);break;case 3:ca(v,6);break;default:ca(v,2)}}}function md(v,A){let O=v.Qa+Math.floor(Math.random()*v.Za);return v.isActive()||(O*=2),O*A}function ca(v,A){if(v.j.info("Error code "+A),A==2){var O=d(v.bb,v),F=v.Ua;const Z=!F;F=new Gr(F||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||Un(F,"https"),Eo(F),Z?Ti(F.toString(),O):su(F.toString(),O)}else en(2);v.I=0,v.l&&v.l.pa(A),gd(v),El(v)}n.bb=function(v){v?(this.j.info("Successfully pinged google.com"),en(2)):(this.j.info("Failed to ping google.com"),en(1))};function gd(v){if(v.I=0,v.ja=[],v.l){const A=tu(v.h);(A.length!=0||v.i.length!=0)&&(E(v.ja,A),E(v.ja,v.i),v.h.i.length=0,w(v.i),v.i.length=0),v.l.oa()}}function vd(v,A,O){var F=O instanceof Gr?xn(O):new Gr(O);if(F.g!="")A&&(F.g=A+"."+F.g),ls(F,F.u);else{var Z=o.location;F=Z.protocol,A=A?A+"."+Z.hostname:Z.hostname,Z=+Z.port;const ie=new Gr(null);F&&Un(ie,F),A&&(ie.g=A),Z&&ls(ie,Z),O&&(ie.h=O),F=ie}return O=v.G,A=v.wa,O&&A&&Nt(F,O,A),Nt(F,"VER",v.ka),Io(v,F),F}function yd(v,A,O){if(A&&!v.L)throw Error("Can't create secondary domain capable XhrIo object.");return A=v.Aa&&!v.ma?new jt(new aa({ab:O})):new jt(v.ma),A.Fa(v.L),A}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function _d(){}n=_d.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function gs(){}gs.prototype.g=function(v,A){return new wr(v,A)};function wr(v,A){kt.call(this),this.g=new ps(A),this.l=v,this.h=A&&A.messageUrlParams||null,v=A&&A.messageHeaders||null,A&&A.clientProtocolHeaderRequired&&(v?v["X-Client-Protocol"]="webchannel":v={"X-Client-Protocol":"webchannel"}),this.g.o=v,v=A&&A.initMessageHeaders||null,A&&A.messageContentType&&(v?v["X-WebChannel-Content-Type"]=A.messageContentType:v={"X-WebChannel-Content-Type":A.messageContentType}),A&&A.sa&&(v?v["X-WebChannel-Client-Profile"]=A.sa:v={"X-WebChannel-Client-Profile":A.sa}),this.g.U=v,(v=A&&A.Qb)&&!j(v)&&(this.g.u=v),this.A=A&&A.supportsCrossDomainXhr||!1,this.v=A&&A.sendRawJson||!1,(A=A&&A.httpSessionIdParam)&&!j(A)&&(this.g.G=A,v=this.h,v!==null&&A in v&&(v=this.h,A in v&&delete v[A])),this.j=new Ma(this)}g(wr,kt),wr.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},wr.prototype.close=function(){cu(this.g)},wr.prototype.o=function(v){var A=this.g;if(typeof v=="string"){var O={};O.__data__=v,v=O}else this.v&&(O={},O.__data__=Ee(v),v=O);A.i.push(new _n(A.Ya++,v)),A.I==3&&la(A)},wr.prototype.N=function(){this.g.l=null,delete this.j,cu(this.g),delete this.g,wr.Z.N.call(this)};function xd(v){Me.call(this),v.__headers__&&(this.headers=v.__headers__,this.statusCode=v.__status__,delete v.__headers__,delete v.__status__);var A=v.__sm__;if(A){e:{for(const O in A){v=O;break e}v=void 0}(this.i=v)&&(v=this.i,A=A!==null&&v in A?A[v]:void 0),this.data=A}else this.data=v}g(xd,Me);function wd(){nt.call(this),this.status=1}g(wd,nt);function Ma(v){this.g=v}g(Ma,_d),Ma.prototype.ra=function(){vt(this.g,"a")},Ma.prototype.qa=function(v){vt(this.g,new xd(v))},Ma.prototype.pa=function(v){vt(this.g,new wd)},Ma.prototype.oa=function(){vt(this.g,"b")},gs.prototype.createWebChannel=gs.prototype.g,wr.prototype.send=wr.prototype.o,wr.prototype.open=wr.prototype.m,wr.prototype.close=wr.prototype.close,RC=function(){return new gs},NC=function(){return Fe()},IC=ye,zg={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},xo.NO_ERROR=0,xo.TIMEOUT=8,xo.HTTP_ERROR=6,Kh=xo,Kc.COMPLETE="complete",TC=Kc,Oe.EventType=De,De.OPEN="a",De.CLOSE="b",De.ERROR="c",De.MESSAGE="d",kt.prototype.listen=kt.prototype.J,rf=Oe,jt.prototype.listenOnce=jt.prototype.K,jt.prototype.getLastError=jt.prototype.Ha,jt.prototype.getLastErrorCode=jt.prototype.ya,jt.prototype.getStatus=jt.prototype.ca,jt.prototype.getResponseJson=jt.prototype.La,jt.prototype.getResponseText=jt.prototype.la,jt.prototype.send=jt.prototype.ea,jt.prototype.setWithCredentials=jt.prototype.Fa,CC=jt}).apply(typeof Th<"u"?Th:typeof self<"u"?self:typeof window<"u"?window:{});const SE="@firebase/firestore",CE="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gr{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}gr.UNAUTHENTICATED=new gr(null),gr.GOOGLE_CREDENTIALS=new gr("google-credentials-uid"),gr.FIRST_PARTY=new gr("first-party-uid"),gr.MOCK_USER=new gr("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Bc="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const al=new zv("@firebase/firestore");function ac(){return al.logLevel}function Te(n,...e){if(al.logLevel<=ct.DEBUG){const t=e.map(Jv);al.debug(`Firestore (${Bc}): ${n}`,...t)}}function is(n,...e){if(al.logLevel<=ct.ERROR){const t=e.map(Jv);al.error(`Firestore (${Bc}): ${n}`,...t)}}function Ac(n,...e){if(al.logLevel<=ct.WARN){const t=e.map(Jv);al.warn(`Firestore (${Bc}): ${n}`,...t)}}function Jv(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ve(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,OC(n,r,t)}function OC(n,e,t){let r=`FIRESTORE (${Bc}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw is(r),new Error(r)}function mt(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||OC(e,i,r)}function Ke(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ue={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ae extends Ia{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ea{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DC{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class SD{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(gr.UNAUTHENTICATED)))}shutdown(){}}class CD{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class TD{constructor(e){this.t=e,this.currentUser=gr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){mt(this.o===void 0,42304);let r=this.i;const i=u=>this.i!==r?(r=this.i,t(u)):Promise.resolve();let a=new Ea;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new Ea,e.enqueueRetryable((()=>i(this.currentUser)))};const o=()=>{const u=a;e.enqueueRetryable((async()=>{await u.promise,await i(this.currentUser)}))},c=u=>{Te("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit((u=>c(u))),setTimeout((()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?c(u):(Te("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Ea)}}),0),o()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((r=>this.i!==e?(Te("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(mt(typeof r.accessToken=="string",31837,{l:r}),new DC(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return mt(e===null||typeof e=="string",2055,{h:e}),new gr(e)}}class ID{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=gr.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class ND{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new ID(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(gr.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class TE{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class RD{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,yi(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){mt(this.o===void 0,3512);const r=a=>{a.error!=null&&Te("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const o=a.token!==this.m;return this.m=a.token,Te("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable((()=>r(a)))};const i=a=>{Te("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((a=>i(a))),setTimeout((()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?i(a):Te("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new TE(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(mt(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new TE(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OD(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ey{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=OD(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<t&&(r+=e.charAt(i[a]%62))}return r}}function ut(n,e){return n<e?-1:n>e?1:0}function Hg(n,e){const t=Math.min(n.length,e.length);for(let r=0;r<t;r++){const i=n.charAt(r),a=e.charAt(r);if(i!==a)return V1(i)===V1(a)?ut(i,a):V1(i)?1:-1}return ut(n.length,e.length)}const DD=55296,MD=57343;function V1(n){const e=n.charCodeAt(0);return e>=DD&&e<=MD}function bc(n,e,t){return n.length===e.length&&n.every(((r,i)=>t(r,e[i])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IE="__name__";class va{constructor(e,t,r){t===void 0?t=0:t>e.length&&Ve(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&Ve(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return va.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof va?e.forEach((r=>{t.push(r)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const a=va.compareSegments(e.get(i),t.get(i));if(a!==0)return a}return ut(e.length,t.length)}static compareSegments(e,t){const r=va.isNumericId(e),i=va.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?va.extractNumericId(e).compare(va.extractNumericId(t)):Hg(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Js.fromString(e.substring(4,e.length-2))}}class Ut extends va{construct(e,t,r){return new Ut(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ae(ue.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter((i=>i.length>0)))}return new Ut(t)}static emptyPath(){return new Ut([])}}const PD=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class or extends va{construct(e,t,r){return new or(e,t,r)}static isValidIdentifier(e){return PD.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),or.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===IE}static keyField(){return new or([IE])}static fromServerFormat(e){const t=[];let r="",i=0;const a=()=>{if(r.length===0)throw new Ae(ue.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let o=!1;for(;i<e.length;){const c=e[i];if(c==="\\"){if(i+1===e.length)throw new Ae(ue.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new Ae(ue.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else c==="`"?(o=!o,i++):c!=="."||o?(r+=c,i++):(a(),i++)}if(a(),o)throw new Ae(ue.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new or(t)}static emptyPath(){return new or([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pe{constructor(e){this.path=e}static fromPath(e){return new Pe(Ut.fromString(e))}static fromName(e){return new Pe(Ut.fromString(e).popFirst(5))}static empty(){return new Pe(Ut.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ut.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Ut.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Pe(new Ut(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MC(n,e,t){if(!t)throw new Ae(ue.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function kD(n,e,t,r){if(e===!0&&r===!0)throw new Ae(ue.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function NE(n){if(!Pe.isDocumentKey(n))throw new Ae(ue.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function RE(n){if(Pe.isDocumentKey(n))throw new Ae(ue.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function PC(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function W0(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Ve(12329,{type:typeof n})}function xi(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Ae(ue.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=W0(n);throw new Ae(ue.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function jD(n,e){if(e<=0)throw new Ae(ue.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function In(n,e){const t={typeString:n};return e&&(t.value=e),t}function $f(n,e){if(!PC(n))throw new Ae(ue.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const i=e[r].typeString,a="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}const o=n[r];if(i&&typeof o!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(a!==void 0&&o!==a.value){t=`Expected '${r}' field to equal '${a.value}'`;break}}if(t)throw new Ae(ue.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OE=-62135596800,DE=1e6;class Pt{static now(){return Pt.fromMillis(Date.now())}static fromDate(e){return Pt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*DE);return new Pt(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ae(ue.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ae(ue.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<OE)throw new Ae(ue.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ae(ue.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/DE}_compareTo(e){return this.seconds===e.seconds?ut(this.nanoseconds,e.nanoseconds):ut(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Pt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if($f(e,Pt._jsonSchema))return new Pt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-OE;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Pt._jsonSchemaVersion="firestore/timestamp/1.0",Pt._jsonSchema={type:In("string",Pt._jsonSchemaVersion),seconds:In("number"),nanoseconds:In("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ge{static fromTimestamp(e){return new Ge(e)}static min(){return new Ge(new Pt(0,0))}static max(){return new Ge(new Pt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tf=-1;function LD(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Ge.fromTimestamp(r===1e9?new Pt(t+1,0):new Pt(t,r));return new so(i,Pe.empty(),e)}function BD(n){return new so(n.readTime,n.key,Tf)}class so{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new so(Ge.min(),Pe.empty(),Tf)}static max(){return new so(Ge.max(),Pe.empty(),Tf)}}function VD(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Pe.comparator(n.documentKey,e.documentKey),t!==0?t:ut(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FD="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class UD{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vc(n){if(n.code!==ue.FAILED_PRECONDITION||n.message!==FD)throw n;Te("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ve(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new pe(((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,i)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof pe?t:pe.resolve(t)}catch(t){return pe.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):pe.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):pe.reject(t)}static resolve(e){return new pe(((t,r)=>{t(e)}))}static reject(e){return new pe(((t,r)=>{r(e)}))}static waitFor(e){return new pe(((t,r)=>{let i=0,a=0,o=!1;e.forEach((c=>{++i,c.next((()=>{++a,o&&a===i&&t()}),(u=>r(u)))})),o=!0,a===i&&t()}))}static or(e){let t=pe.resolve(!1);for(const r of e)t=t.next((i=>i?pe.resolve(i):r()));return t}static forEach(e,t){const r=[];return e.forEach(((i,a)=>{r.push(t.call(this,i,a))})),this.waitFor(r)}static mapArray(e,t){return new pe(((r,i)=>{const a=e.length,o=new Array(a);let c=0;for(let u=0;u<a;u++){const d=u;t(e[d]).next((m=>{o[d]=m,++c,c===a&&r(o)}),(m=>i(m)))}}))}static doWhile(e,t){return new pe(((r,i)=>{const a=()=>{e()===!0?t().next((()=>{a()}),i):r()};a()}))}}function zD(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Fc(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q0{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>t.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Q0.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ty=-1;function Xf(n){return n==null}function m0(n){return n===0&&1/n==-1/0}function HD(n){return typeof n=="number"&&Number.isInteger(n)&&!m0(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kC="";function GD(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=ME(e)),e=qD(n.get(t),e);return ME(e)}function qD(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const a=n.charAt(i);switch(a){case"\0":t+="";break;case kC:t+="";break;default:t+=a}}return t}function ME(n){return n+kC+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PE(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function go(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function jC(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(e,t){this.comparator=e,this.root=t||sr.EMPTY}insert(e,t){return new ln(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,sr.BLACK,null,null))}remove(e){return new ln(this.comparator,this.root.remove(e,this.comparator).copy(null,null,sr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,r)=>(e(t,r),!1)))}toString(){const e=[];return this.inorderTraversal(((t,r)=>(e.push(`${t}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ih(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ih(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ih(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ih(this.root,e,this.comparator,!0)}}class Ih{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,t&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class sr{constructor(e,t,r,i,a){this.key=e,this.value=t,this.color=r??sr.RED,this.left=i??sr.EMPTY,this.right=a??sr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,a){return new sr(e??this.key,t??this.value,r??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,t,r),null):a===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return sr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return sr.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,sr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,sr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ve(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ve(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ve(27949);return e+(this.isRed()?0:1)}}sr.EMPTY=null,sr.RED=!0,sr.BLACK=!1;sr.EMPTY=new class{constructor(){this.size=0}get key(){throw Ve(57766)}get value(){throw Ve(16141)}get color(){throw Ve(16727)}get left(){throw Ve(29726)}get right(){throw Ve(36894)}copy(e,t,r,i,a){return this}insert(e,t,r){return new sr(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jn{constructor(e){this.comparator=e,this.data=new ln(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,r)=>(e(t),!1)))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new kE(this.data.getIterator())}getIteratorFrom(e){return new kE(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((r=>{t=t.add(r)})),t}isEqual(e){if(!(e instanceof jn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(this.comparator(i,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new jn(this.comparator);return t.data=e,t}}class kE{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ti{constructor(e){this.fields=e,e.sort(or.comparator)}static empty(){return new ti([])}unionWith(e){let t=new jn(or.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new ti(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return bc(this.fields,e.fields,((t,r)=>t.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LC extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ur{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(i){try{return atob(i)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new LC("Invalid base64 string: "+a):a}})(e);return new ur(t)}static fromUint8Array(e){const t=(function(i){let a="";for(let o=0;o<i.length;++o)a+=String.fromCharCode(i[o]);return a})(e);return new ur(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ut(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ur.EMPTY_BYTE_STRING=new ur("");const $D=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function oo(n){if(mt(!!n,39018),typeof n=="string"){let e=0;const t=$D.exec(n);if(mt(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:gn(n.seconds),nanos:gn(n.nanos)}}function gn(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function lo(n){return typeof n=="string"?ur.fromBase64String(n):ur.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BC="server_timestamp",VC="__type__",FC="__previous_value__",UC="__local_write_time__";function ny(n){return(n?.mapValue?.fields||{})[VC]?.stringValue===BC}function Z0(n){const e=n.mapValue.fields[FC];return ny(e)?Z0(e):e}function If(n){const e=oo(n.mapValue.fields[UC].timestampValue);return new Pt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XD{constructor(e,t,r,i,a,o,c,u,d,m){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=c,this.longPollingOptions=u,this.useFetchStreams=d,this.isUsingEmulator=m}}const g0="(default)";class Nf{constructor(e,t){this.projectId=e,this.database=t||g0}static empty(){return new Nf("","")}get isDefaultDatabase(){return this.database===g0}isEqual(e){return e instanceof Nf&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zC="__type__",YD="__max__",Nh={mapValue:{}},HC="__vector__",v0="value";function co(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?ny(n)?4:WD(n)?9007199254740991:KD(n)?10:11:Ve(28295,{value:n})}function Ca(n,e){if(n===e)return!0;const t=co(n);if(t!==co(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return If(n).isEqual(If(e));case 3:return(function(i,a){if(typeof i.timestampValue=="string"&&typeof a.timestampValue=="string"&&i.timestampValue.length===a.timestampValue.length)return i.timestampValue===a.timestampValue;const o=oo(i.timestampValue),c=oo(a.timestampValue);return o.seconds===c.seconds&&o.nanos===c.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(i,a){return lo(i.bytesValue).isEqual(lo(a.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(i,a){return gn(i.geoPointValue.latitude)===gn(a.geoPointValue.latitude)&&gn(i.geoPointValue.longitude)===gn(a.geoPointValue.longitude)})(n,e);case 2:return(function(i,a){if("integerValue"in i&&"integerValue"in a)return gn(i.integerValue)===gn(a.integerValue);if("doubleValue"in i&&"doubleValue"in a){const o=gn(i.doubleValue),c=gn(a.doubleValue);return o===c?m0(o)===m0(c):isNaN(o)&&isNaN(c)}return!1})(n,e);case 9:return bc(n.arrayValue.values||[],e.arrayValue.values||[],Ca);case 10:case 11:return(function(i,a){const o=i.mapValue.fields||{},c=a.mapValue.fields||{};if(PE(o)!==PE(c))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(c[u]===void 0||!Ca(o[u],c[u])))return!1;return!0})(n,e);default:return Ve(52216,{left:n})}}function Rf(n,e){return(n.values||[]).find((t=>Ca(t,e)))!==void 0}function Sc(n,e){if(n===e)return 0;const t=co(n),r=co(e);if(t!==r)return ut(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return ut(n.booleanValue,e.booleanValue);case 2:return(function(a,o){const c=gn(a.integerValue||a.doubleValue),u=gn(o.integerValue||o.doubleValue);return c<u?-1:c>u?1:c===u?0:isNaN(c)?isNaN(u)?0:-1:1})(n,e);case 3:return jE(n.timestampValue,e.timestampValue);case 4:return jE(If(n),If(e));case 5:return Hg(n.stringValue,e.stringValue);case 6:return(function(a,o){const c=lo(a),u=lo(o);return c.compareTo(u)})(n.bytesValue,e.bytesValue);case 7:return(function(a,o){const c=a.split("/"),u=o.split("/");for(let d=0;d<c.length&&d<u.length;d++){const m=ut(c[d],u[d]);if(m!==0)return m}return ut(c.length,u.length)})(n.referenceValue,e.referenceValue);case 8:return(function(a,o){const c=ut(gn(a.latitude),gn(o.latitude));return c!==0?c:ut(gn(a.longitude),gn(o.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return LE(n.arrayValue,e.arrayValue);case 10:return(function(a,o){const c=a.fields||{},u=o.fields||{},d=c[v0]?.arrayValue,m=u[v0]?.arrayValue,g=ut(d?.values?.length||0,m?.values?.length||0);return g!==0?g:LE(d,m)})(n.mapValue,e.mapValue);case 11:return(function(a,o){if(a===Nh.mapValue&&o===Nh.mapValue)return 0;if(a===Nh.mapValue)return 1;if(o===Nh.mapValue)return-1;const c=a.fields||{},u=Object.keys(c),d=o.fields||{},m=Object.keys(d);u.sort(),m.sort();for(let g=0;g<u.length&&g<m.length;++g){const _=Hg(u[g],m[g]);if(_!==0)return _;const w=Sc(c[u[g]],d[m[g]]);if(w!==0)return w}return ut(u.length,m.length)})(n.mapValue,e.mapValue);default:throw Ve(23264,{he:t})}}function jE(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return ut(n,e);const t=oo(n),r=oo(e),i=ut(t.seconds,r.seconds);return i!==0?i:ut(t.nanos,r.nanos)}function LE(n,e){const t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){const a=Sc(t[i],r[i]);if(a)return a}return ut(t.length,r.length)}function Cc(n){return Gg(n)}function Gg(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const r=oo(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return lo(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return Pe.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",i=!0;for(const a of t.values||[])i?i=!1:r+=",",r+=Gg(a);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){const r=Object.keys(t.fields||{}).sort();let i="{",a=!0;for(const o of r)a?a=!1:i+=",",i+=`${o}:${Gg(t.fields[o])}`;return i+"}"})(n.mapValue):Ve(61005,{value:n})}function Wh(n){switch(co(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Z0(n);return e?16+Wh(e):16;case 5:return 2*n.stringValue.length;case 6:return lo(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((i,a)=>i+Wh(a)),0)})(n.arrayValue);case 10:case 11:return(function(r){let i=0;return go(r.fields,((a,o)=>{i+=a.length+Wh(o)})),i})(n.mapValue);default:throw Ve(13486,{value:n})}}function BE(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function qg(n){return!!n&&"integerValue"in n}function ry(n){return!!n&&"arrayValue"in n}function VE(n){return!!n&&"nullValue"in n}function FE(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Qh(n){return!!n&&"mapValue"in n}function KD(n){return(n?.mapValue?.fields||{})[zC]?.stringValue===HC}function mf(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return go(n.mapValue.fields,((t,r)=>e.mapValue.fields[t]=mf(r))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=mf(n.arrayValue.values[t]);return e}return{...n}}function WD(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===YD}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cr{constructor(e){this.value=e}static empty(){return new Cr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Qh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=mf(t)}setAll(e){let t=or.emptyPath(),r={},i=[];e.forEach(((o,c)=>{if(!t.isImmediateParentOf(c)){const u=this.getFieldsMap(t);this.applyChanges(u,r,i),r={},i=[],t=c.popLast()}o?r[c.lastSegment()]=mf(o):i.push(c.lastSegment())}));const a=this.getFieldsMap(t);this.applyChanges(a,r,i)}delete(e){const t=this.field(e.popLast());Qh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ca(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Qh(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){go(t,((i,a)=>e[i]=a));for(const i of r)delete e[i]}clone(){return new Cr(mf(this.value))}}function GC(n){const e=[];return go(n.fields,((t,r)=>{const i=new or([t]);if(Qh(r)){const a=GC(r.mapValue).fields;if(a.length===0)e.push(i);else for(const o of a)e.push(i.child(o))}else e.push(i)})),new ti(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $n{constructor(e,t,r,i,a,o,c){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=a,this.data=o,this.documentState=c}static newInvalidDocument(e){return new $n(e,0,Ge.min(),Ge.min(),Ge.min(),Cr.empty(),0)}static newFoundDocument(e,t,r,i){return new $n(e,1,t,Ge.min(),r,i,0)}static newNoDocument(e,t){return new $n(e,2,t,Ge.min(),Ge.min(),Cr.empty(),0)}static newUnknownDocument(e,t){return new $n(e,3,t,Ge.min(),Ge.min(),Cr.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ge.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Cr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Cr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ge.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof $n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new $n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y0{constructor(e,t){this.position=e,this.inclusive=t}}function UE(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const a=e[i],o=n.position[i];if(a.field.isKeyField()?r=Pe.comparator(Pe.fromName(o.referenceValue),t.key):r=Sc(o,t.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function zE(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Ca(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Of{constructor(e,t="asc"){this.field=e,this.dir=t}}function QD(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qC{}class Cn extends qC{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new JD(e,t,r):t==="array-contains"?new n5(e,r):t==="in"?new r5(e,r):t==="not-in"?new i5(e,r):t==="array-contains-any"?new a5(e,r):new Cn(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new e5(e,r):new t5(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Sc(t,this.value)):t!==null&&co(this.value)===co(t)&&this.matchesComparison(Sc(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ve(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class qi extends qC{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new qi(e,t)}matches(e){return $C(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function $C(n){return n.op==="and"}function XC(n){return ZD(n)&&$C(n)}function ZD(n){for(const e of n.filters)if(e instanceof qi)return!1;return!0}function $g(n){if(n instanceof Cn)return n.field.canonicalString()+n.op.toString()+Cc(n.value);if(XC(n))return n.filters.map((e=>$g(e))).join(",");{const e=n.filters.map((t=>$g(t))).join(",");return`${n.op}(${e})`}}function YC(n,e){return n instanceof Cn?(function(r,i){return i instanceof Cn&&r.op===i.op&&r.field.isEqual(i.field)&&Ca(r.value,i.value)})(n,e):n instanceof qi?(function(r,i){return i instanceof qi&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce(((a,o,c)=>a&&YC(o,i.filters[c])),!0):!1})(n,e):void Ve(19439)}function KC(n){return n instanceof Cn?(function(t){return`${t.field.canonicalString()} ${t.op} ${Cc(t.value)}`})(n):n instanceof qi?(function(t){return t.op.toString()+" {"+t.getFilters().map(KC).join(" ,")+"}"})(n):"Filter"}class JD extends Cn{constructor(e,t,r){super(e,t,r),this.key=Pe.fromName(r.referenceValue)}matches(e){const t=Pe.comparator(e.key,this.key);return this.matchesComparison(t)}}class e5 extends Cn{constructor(e,t){super(e,"in",t),this.keys=WC("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class t5 extends Cn{constructor(e,t){super(e,"not-in",t),this.keys=WC("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function WC(n,e){return(e.arrayValue?.values||[]).map((t=>Pe.fromName(t.referenceValue)))}class n5 extends Cn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return ry(t)&&Rf(t.arrayValue,this.value)}}class r5 extends Cn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Rf(this.value.arrayValue,t)}}class i5 extends Cn{constructor(e,t){super(e,"not-in",t)}matches(e){if(Rf(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Rf(this.value.arrayValue,t)}}class a5 extends Cn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!ry(t)||!t.arrayValue.values)&&t.arrayValue.values.some((r=>Rf(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s5{constructor(e,t=null,r=[],i=[],a=null,o=null,c=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=c,this.Te=null}}function HE(n,e=null,t=[],r=[],i=null,a=null,o=null){return new s5(n,e,t,r,i,a,o)}function iy(n){const e=Ke(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((r=>$g(r))).join(","),t+="|ob:",t+=e.orderBy.map((r=>(function(a){return a.field.canonicalString()+a.dir})(r))).join(","),Xf(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((r=>Cc(r))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((r=>Cc(r))).join(",")),e.Te=t}return e.Te}function ay(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!QD(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!YC(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!zE(n.startAt,e.startAt)&&zE(n.endAt,e.endAt)}function Xg(n){return Pe.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uc{constructor(e,t=null,r=[],i=[],a=null,o="F",c=null,u=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=c,this.endAt=u,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function o5(n,e,t,r,i,a,o,c){return new Uc(n,e,t,r,i,a,o,c)}function J0(n){return new Uc(n)}function GE(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function QC(n){return n.collectionGroup!==null}function gf(n){const e=Ke(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const a of e.explicitOrderBy)e.Ie.push(a),t.add(a.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let c=new jn(or.comparator);return o.filters.forEach((u=>{u.getFlattenedFilters().forEach((d=>{d.isInequality()&&(c=c.add(d.field))}))})),c})(e).forEach((a=>{t.has(a.canonicalString())||a.isKeyField()||e.Ie.push(new Of(a,r))})),t.has(or.keyField().canonicalString())||e.Ie.push(new Of(or.keyField(),r))}return e.Ie}function Aa(n){const e=Ke(n);return e.Ee||(e.Ee=l5(e,gf(n))),e.Ee}function l5(n,e){if(n.limitType==="F")return HE(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((i=>{const a=i.dir==="desc"?"asc":"desc";return new Of(i.field,a)}));const t=n.endAt?new y0(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new y0(n.startAt.position,n.startAt.inclusive):null;return HE(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function Yg(n,e){const t=n.filters.concat([e]);return new Uc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function _0(n,e,t){return new Uc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function ep(n,e){return ay(Aa(n),Aa(e))&&n.limitType===e.limitType}function ZC(n){return`${iy(Aa(n))}|lt:${n.limitType}`}function sc(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map((i=>KC(i))).join(", ")}]`),Xf(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map((i=>(function(o){return`${o.field.canonicalString()} (${o.dir})`})(i))).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map((i=>Cc(i))).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map((i=>Cc(i))).join(",")),`Target(${r})`})(Aa(n))}; limitType=${n.limitType})`}function tp(n,e){return e.isFoundDocument()&&(function(r,i){const a=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):Pe.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)})(n,e)&&(function(r,i){for(const a of gf(r))if(!a.field.isKeyField()&&i.data.field(a.field)===null)return!1;return!0})(n,e)&&(function(r,i){for(const a of r.filters)if(!a.matches(i))return!1;return!0})(n,e)&&(function(r,i){return!(r.startAt&&!(function(o,c,u){const d=UE(o,c,u);return o.inclusive?d<=0:d<0})(r.startAt,gf(r),i)||r.endAt&&!(function(o,c,u){const d=UE(o,c,u);return o.inclusive?d>=0:d>0})(r.endAt,gf(r),i))})(n,e)}function c5(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function JC(n){return(e,t)=>{let r=!1;for(const i of gf(n)){const a=u5(i,e,t);if(a!==0)return a;r=r||i.field.isKeyField()}return 0}}function u5(n,e,t){const r=n.field.isKeyField()?Pe.comparator(e.key,t.key):(function(a,o,c){const u=o.data.field(a),d=c.data.field(a);return u!==null&&d!==null?Sc(u,d):Ve(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Ve(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cl{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[i,a]of r)if(this.equalsFn(i,e))return a}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){go(this.inner,((t,r)=>{for(const[i,a]of r)e(i,a)}))}isEmpty(){return jC(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f5=new ln(Pe.comparator);function as(){return f5}const eT=new ln(Pe.comparator);function af(...n){let e=eT;for(const t of n)e=e.insert(t.key,t);return e}function tT(n){let e=eT;return n.forEach(((t,r)=>e=e.insert(t,r.overlayedDocument))),e}function Zo(){return vf()}function nT(){return vf()}function vf(){return new cl((n=>n.toString()),((n,e)=>n.isEqual(e)))}const d5=new ln(Pe.comparator),h5=new jn(Pe.comparator);function ft(...n){let e=h5;for(const t of n)e=e.add(t);return e}const p5=new jn(ut);function m5(){return p5}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sy(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:m0(e)?"-0":e}}function rT(n){return{integerValue:""+n}}function g5(n,e){return HD(e)?rT(e):sy(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class np{constructor(){this._=void 0}}function v5(n,e,t){return n instanceof Df?(function(i,a){const o={fields:{[VC]:{stringValue:BC},[UC]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return a&&ny(a)&&(a=Z0(a)),a&&(o.fields[FC]=a),{mapValue:o}})(t,e):n instanceof Mf?aT(n,e):n instanceof Pf?sT(n,e):(function(i,a){const o=iT(i,a),c=qE(o)+qE(i.Ae);return qg(o)&&qg(i.Ae)?rT(c):sy(i.serializer,c)})(n,e)}function y5(n,e,t){return n instanceof Mf?aT(n,e):n instanceof Pf?sT(n,e):t}function iT(n,e){return n instanceof x0?(function(r){return qg(r)||(function(a){return!!a&&"doubleValue"in a})(r)})(e)?e:{integerValue:0}:null}class Df extends np{}class Mf extends np{constructor(e){super(),this.elements=e}}function aT(n,e){const t=oT(e);for(const r of n.elements)t.some((i=>Ca(i,r)))||t.push(r);return{arrayValue:{values:t}}}class Pf extends np{constructor(e){super(),this.elements=e}}function sT(n,e){let t=oT(e);for(const r of n.elements)t=t.filter((i=>!Ca(i,r)));return{arrayValue:{values:t}}}class x0 extends np{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function qE(n){return gn(n.integerValue||n.doubleValue)}function oT(n){return ry(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _5{constructor(e,t){this.field=e,this.transform=t}}function x5(n,e){return n.field.isEqual(e.field)&&(function(r,i){return r instanceof Mf&&i instanceof Mf||r instanceof Pf&&i instanceof Pf?bc(r.elements,i.elements,Ca):r instanceof x0&&i instanceof x0?Ca(r.Ae,i.Ae):r instanceof Df&&i instanceof Df})(n.transform,e.transform)}class w5{constructor(e,t){this.version=e,this.transformResults=t}}class lr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new lr}static exists(e){return new lr(void 0,e)}static updateTime(e){return new lr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Zh(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class rp{}function lT(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new ip(n.key,lr.none()):new Yf(n.key,n.data,lr.none());{const t=n.data,r=Cr.empty();let i=new jn(or.comparator);for(let a of e.fields)if(!i.has(a)){let o=t.field(a);o===null&&a.length>1&&(a=a.popLast(),o=t.field(a)),o===null?r.delete(a):r.set(a,o),i=i.add(a)}return new vo(n.key,r,new ti(i.toArray()),lr.none())}}function E5(n,e,t){n instanceof Yf?(function(i,a,o){const c=i.value.clone(),u=XE(i.fieldTransforms,a,o.transformResults);c.setAll(u),a.convertToFoundDocument(o.version,c).setHasCommittedMutations()})(n,e,t):n instanceof vo?(function(i,a,o){if(!Zh(i.precondition,a))return void a.convertToUnknownDocument(o.version);const c=XE(i.fieldTransforms,a,o.transformResults),u=a.data;u.setAll(cT(i)),u.setAll(c),a.convertToFoundDocument(o.version,u).setHasCommittedMutations()})(n,e,t):(function(i,a,o){a.convertToNoDocument(o.version).setHasCommittedMutations()})(0,e,t)}function yf(n,e,t,r){return n instanceof Yf?(function(a,o,c,u){if(!Zh(a.precondition,o))return c;const d=a.value.clone(),m=YE(a.fieldTransforms,u,o);return d.setAll(m),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null})(n,e,t,r):n instanceof vo?(function(a,o,c,u){if(!Zh(a.precondition,o))return c;const d=YE(a.fieldTransforms,u,o),m=o.data;return m.setAll(cT(a)),m.setAll(d),o.convertToFoundDocument(o.version,m).setHasLocalMutations(),c===null?null:c.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map((g=>g.field)))})(n,e,t,r):(function(a,o,c){return Zh(a.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):c})(n,e,t)}function A5(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),a=iT(r.transform,i||null);a!=null&&(t===null&&(t=Cr.empty()),t.set(r.field,a))}return t||null}function $E(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&bc(r,i,((a,o)=>x5(a,o)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Yf extends rp{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class vo extends rp{constructor(e,t,r,i,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function cT(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}})),e}function XE(n,e,t){const r=new Map;mt(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let i=0;i<t.length;i++){const a=n[i],o=a.transform,c=e.data.field(a.field);r.set(a.field,y5(o,c,t[i]))}return r}function YE(n,e,t){const r=new Map;for(const i of n){const a=i.transform,o=t.data.field(i.field);r.set(i.field,v5(a,o,e))}return r}class ip extends rp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class uT extends rp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b5{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&E5(a,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=yf(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=yf(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=nT();return this.mutations.forEach((i=>{const a=e.get(i.key),o=a.overlayedDocument;let c=this.applyToLocalView(o,a.mutatedFields);c=t.has(i.key)?null:c;const u=lT(o,c);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(Ge.min())})),r}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),ft())}isEqual(e){return this.batchId===e.batchId&&bc(this.mutations,e.mutations,((t,r)=>$E(t,r)))&&bc(this.baseMutations,e.baseMutations,((t,r)=>$E(t,r)))}}class oy{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){mt(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=(function(){return d5})();const a=e.mutations;for(let o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new oy(e,t,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S5{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C5{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Sn,ht;function fT(n){switch(n){case ue.OK:return Ve(64938);case ue.CANCELLED:case ue.UNKNOWN:case ue.DEADLINE_EXCEEDED:case ue.RESOURCE_EXHAUSTED:case ue.INTERNAL:case ue.UNAVAILABLE:case ue.UNAUTHENTICATED:return!1;case ue.INVALID_ARGUMENT:case ue.NOT_FOUND:case ue.ALREADY_EXISTS:case ue.PERMISSION_DENIED:case ue.FAILED_PRECONDITION:case ue.ABORTED:case ue.OUT_OF_RANGE:case ue.UNIMPLEMENTED:case ue.DATA_LOSS:return!0;default:return Ve(15467,{code:n})}}function dT(n){if(n===void 0)return is("GRPC error has no .code"),ue.UNKNOWN;switch(n){case Sn.OK:return ue.OK;case Sn.CANCELLED:return ue.CANCELLED;case Sn.UNKNOWN:return ue.UNKNOWN;case Sn.DEADLINE_EXCEEDED:return ue.DEADLINE_EXCEEDED;case Sn.RESOURCE_EXHAUSTED:return ue.RESOURCE_EXHAUSTED;case Sn.INTERNAL:return ue.INTERNAL;case Sn.UNAVAILABLE:return ue.UNAVAILABLE;case Sn.UNAUTHENTICATED:return ue.UNAUTHENTICATED;case Sn.INVALID_ARGUMENT:return ue.INVALID_ARGUMENT;case Sn.NOT_FOUND:return ue.NOT_FOUND;case Sn.ALREADY_EXISTS:return ue.ALREADY_EXISTS;case Sn.PERMISSION_DENIED:return ue.PERMISSION_DENIED;case Sn.FAILED_PRECONDITION:return ue.FAILED_PRECONDITION;case Sn.ABORTED:return ue.ABORTED;case Sn.OUT_OF_RANGE:return ue.OUT_OF_RANGE;case Sn.UNIMPLEMENTED:return ue.UNIMPLEMENTED;case Sn.DATA_LOSS:return ue.DATA_LOSS;default:return Ve(39323,{code:n})}}(ht=Sn||(Sn={}))[ht.OK=0]="OK",ht[ht.CANCELLED=1]="CANCELLED",ht[ht.UNKNOWN=2]="UNKNOWN",ht[ht.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ht[ht.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ht[ht.NOT_FOUND=5]="NOT_FOUND",ht[ht.ALREADY_EXISTS=6]="ALREADY_EXISTS",ht[ht.PERMISSION_DENIED=7]="PERMISSION_DENIED",ht[ht.UNAUTHENTICATED=16]="UNAUTHENTICATED",ht[ht.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ht[ht.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ht[ht.ABORTED=10]="ABORTED",ht[ht.OUT_OF_RANGE=11]="OUT_OF_RANGE",ht[ht.UNIMPLEMENTED=12]="UNIMPLEMENTED",ht[ht.INTERNAL=13]="INTERNAL",ht[ht.UNAVAILABLE=14]="UNAVAILABLE",ht[ht.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T5(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I5=new Js([4294967295,4294967295],0);function KE(n){const e=T5().encode(n),t=new SC;return t.update(e),new Uint8Array(t.digest())}function WE(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new Js([t,r],0),new Js([i,a],0)]}class ly{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new sf(`Invalid padding: ${t}`);if(r<0)throw new sf(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new sf(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new sf(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Js.fromNumber(this.ge)}ye(e,t,r){let i=e.add(t.multiply(Js.fromNumber(r)));return i.compare(I5)===1&&(i=new Js([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=KE(e),[r,i]=WE(t);for(let a=0;a<this.hashCount;a++){const o=this.ye(r,i,a);if(!this.we(o))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),o=new ly(a,i,t);return r.forEach((c=>o.insert(c))),o}insert(e){if(this.ge===0)return;const t=KE(e),[r,i]=WE(t);for(let a=0;a<this.hashCount;a++){const o=this.ye(r,i,a);this.Se(o)}}Se(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class sf extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ap{constructor(e,t,r,i,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,Kf.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new ap(Ge.min(),i,new ln(ut),as(),ft())}}class Kf{constructor(e,t,r,i,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Kf(r,t,ft(),ft(),ft())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jh{constructor(e,t,r,i){this.be=e,this.removedTargetIds=t,this.key=r,this.De=i}}class hT{constructor(e,t){this.targetId=e,this.Ce=t}}class pT{constructor(e,t,r=ur.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class QE{constructor(){this.ve=0,this.Fe=ZE(),this.Me=ur.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ft(),t=ft(),r=ft();return this.Fe.forEach(((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:Ve(38017,{changeType:a})}})),new Kf(this.Me,this.xe,e,t,r)}qe(){this.Oe=!1,this.Fe=ZE()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,mt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class N5{constructor(e){this.Ge=e,this.ze=new Map,this.je=as(),this.Je=Rh(),this.He=Rh(),this.Ye=new ln(ut)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:Ve(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((r,i)=>{this.rt(i)&&t(i)}))}st(e){const t=e.targetId,r=e.Ce.count,i=this.ot(t);if(i){const a=i.target;if(Xg(a))if(r===0){const o=new Pe(a.path);this.et(t,o,$n.newNoDocument(o,Ge.min()))}else mt(r===1,20013,{expectedCount:r});else{const o=this._t(t);if(o!==r){const c=this.ut(e),u=c?this.ct(c,e,o):1;if(u!==0){this.it(t);const d=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,d)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:a=0}=t;let o,c;try{o=lo(r).toUint8Array()}catch(u){if(u instanceof LC)return Ac("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{c=new ly(o,i,a)}catch(u){return Ac(u instanceof sf?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return c.ge===0?null:c}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){const r=this.Ge.getRemoteKeysForTarget(t);let i=0;return r.forEach((a=>{const o=this.Ge.ht(),c=`projects/${o.projectId}/databases/${o.database}/documents/${a.path.canonicalString()}`;e.mightContain(c)||(this.et(t,a,null),i++)})),i}Tt(e){const t=new Map;this.ze.forEach(((a,o)=>{const c=this.ot(o);if(c){if(a.current&&Xg(c.target)){const u=new Pe(c.target.path);this.It(u).has(o)||this.Et(o,u)||this.et(o,u,$n.newNoDocument(u,e))}a.Be&&(t.set(o,a.ke()),a.qe())}}));let r=ft();this.He.forEach(((a,o)=>{let c=!0;o.forEachWhile((u=>{const d=this.ot(u);return!d||d.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)})),c&&(r=r.add(a))})),this.je.forEach(((a,o)=>o.setReadTime(e)));const i=new ap(e,t,this.Ye,this.je,r);return this.je=as(),this.Je=Rh(),this.He=Rh(),this.Ye=new ln(ut),i}Xe(e,t){if(!this.rt(e))return;const r=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,r),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,t)?i.Qe(t,1):i.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new QE,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new jn(ut),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new jn(ut),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||Te("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new QE),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Rh(){return new ln(Pe.comparator)}function ZE(){return new ln(Pe.comparator)}const R5={asc:"ASCENDING",desc:"DESCENDING"},O5={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},D5={and:"AND",or:"OR"};class M5{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Kg(n,e){return n.useProto3Json||Xf(e)?e:{value:e}}function w0(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function mT(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function P5(n,e){return w0(n,e.toTimestamp())}function ni(n){return mt(!!n,49232),Ge.fromTimestamp((function(t){const r=oo(t);return new Pt(r.seconds,r.nanos)})(n))}function cy(n,e){return Wg(n,e).canonicalString()}function Wg(n,e){const t=(function(i){return new Ut(["projects",i.projectId,"databases",i.database])})(n).child("documents");return e===void 0?t:t.child(e)}function gT(n){const e=Ut.fromString(n);return mt(ET(e),10190,{key:e.toString()}),e}function E0(n,e){return cy(n.databaseId,e.path)}function _f(n,e){const t=gT(e);if(t.get(1)!==n.databaseId.projectId)throw new Ae(ue.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Ae(ue.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Pe(yT(t))}function vT(n,e){return cy(n.databaseId,e)}function k5(n){const e=gT(n);return e.length===4?Ut.emptyPath():yT(e)}function Qg(n){return new Ut(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function yT(n){return mt(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function JE(n,e,t){return{name:E0(n,e),fields:t.value.mapValue.fields}}function j5(n,e){return"found"in e?(function(r,i){mt(!!i.found,43571),i.found.name,i.found.updateTime;const a=_f(r,i.found.name),o=ni(i.found.updateTime),c=i.found.createTime?ni(i.found.createTime):Ge.min(),u=new Cr({mapValue:{fields:i.found.fields}});return $n.newFoundDocument(a,o,c,u)})(n,e):"missing"in e?(function(r,i){mt(!!i.missing,3894),mt(!!i.readTime,22933);const a=_f(r,i.missing),o=ni(i.readTime);return $n.newNoDocument(a,o)})(n,e):Ve(7234,{result:e})}function L5(n,e){let t;if("targetChange"in e){e.targetChange;const r=(function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:Ve(39313,{state:d})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],a=(function(d,m){return d.useProto3Json?(mt(m===void 0||typeof m=="string",58123),ur.fromBase64String(m||"")):(mt(m===void 0||m instanceof Buffer||m instanceof Uint8Array,16193),ur.fromUint8Array(m||new Uint8Array))})(n,e.targetChange.resumeToken),o=e.targetChange.cause,c=o&&(function(d){const m=d.code===void 0?ue.UNKNOWN:dT(d.code);return new Ae(m,d.message||"")})(o);t=new pT(r,i,a,c||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=_f(n,r.document.name),a=ni(r.document.updateTime),o=r.document.createTime?ni(r.document.createTime):Ge.min(),c=new Cr({mapValue:{fields:r.document.fields}}),u=$n.newFoundDocument(i,a,o,c),d=r.targetIds||[],m=r.removedTargetIds||[];t=new Jh(d,m,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=_f(n,r.document),a=r.readTime?ni(r.readTime):Ge.min(),o=$n.newNoDocument(i,a),c=r.removedTargetIds||[];t=new Jh([],c,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=_f(n,r.document),a=r.removedTargetIds||[];t=new Jh([],a,i,null)}else{if(!("filter"in e))return Ve(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:a}=r,o=new C5(i,a),c=r.targetId;t=new hT(c,o)}}return t}function _T(n,e){let t;if(e instanceof Yf)t={update:JE(n,e.key,e.value)};else if(e instanceof ip)t={delete:E0(n,e.key)};else if(e instanceof vo)t={update:JE(n,e.key,e.data),updateMask:$5(e.fieldMask)};else{if(!(e instanceof uT))return Ve(16599,{Vt:e.type});t={verify:E0(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((r=>(function(a,o){const c=o.transform;if(c instanceof Df)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Mf)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Pf)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof x0)return{fieldPath:o.field.canonicalString(),increment:c.Ae};throw Ve(20930,{transform:o.transform})})(0,r)))),e.precondition.isNone||(t.currentDocument=(function(i,a){return a.updateTime!==void 0?{updateTime:P5(i,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:Ve(27497)})(n,e.precondition)),t}function B5(n,e){return n&&n.length>0?(mt(e!==void 0,14353),n.map((t=>(function(i,a){let o=i.updateTime?ni(i.updateTime):ni(a);return o.isEqual(Ge.min())&&(o=ni(a)),new w5(o,i.transformResults||[])})(t,e)))):[]}function V5(n,e){return{documents:[vT(n,e.path)]}}function F5(n,e){const t={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=vT(n,i);const a=(function(d){if(d.length!==0)return wT(qi.create(d,"and"))})(e.filters);a&&(t.structuredQuery.where=a);const o=(function(d){if(d.length!==0)return d.map((m=>(function(_){return{field:oc(_.field),direction:H5(_.dir)}})(m)))})(e.orderBy);o&&(t.structuredQuery.orderBy=o);const c=Kg(n,e.limit);return c!==null&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt=(function(d){return{before:d.inclusive,values:d.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(d){return{before:!d.inclusive,values:d.position}})(e.endAt)),{ft:t,parent:i}}function U5(n){let e=k5(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){mt(r===1,65062);const m=t.from[0];m.allDescendants?i=m.collectionId:e=e.child(m.collectionId)}let a=[];t.where&&(a=(function(g){const _=xT(g);return _ instanceof qi&&XC(_)?_.getFilters():[_]})(t.where));let o=[];t.orderBy&&(o=(function(g){return g.map((_=>(function(E){return new Of(lc(E.field),(function(D){switch(D){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(E.direction))})(_)))})(t.orderBy));let c=null;t.limit&&(c=(function(g){let _;return _=typeof g=="object"?g.value:g,Xf(_)?null:_})(t.limit));let u=null;t.startAt&&(u=(function(g){const _=!!g.before,w=g.values||[];return new y0(w,_)})(t.startAt));let d=null;return t.endAt&&(d=(function(g){const _=!g.before,w=g.values||[];return new y0(w,_)})(t.endAt)),o5(e,i,o,a,c,"F",u,d)}function z5(n,e){const t=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ve(28987,{purpose:i})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function xT(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=lc(t.unaryFilter.field);return Cn.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=lc(t.unaryFilter.field);return Cn.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=lc(t.unaryFilter.field);return Cn.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=lc(t.unaryFilter.field);return Cn.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ve(61313);default:return Ve(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Cn.create(lc(t.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ve(58110);default:return Ve(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return qi.create(t.compositeFilter.filters.map((r=>xT(r))),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Ve(1026)}})(t.compositeFilter.op))})(n):Ve(30097,{filter:n})}function H5(n){return R5[n]}function G5(n){return O5[n]}function q5(n){return D5[n]}function oc(n){return{fieldPath:n.canonicalString()}}function lc(n){return or.fromServerFormat(n.fieldPath)}function wT(n){return n instanceof Cn?(function(t){if(t.op==="=="){if(FE(t.value))return{unaryFilter:{field:oc(t.field),op:"IS_NAN"}};if(VE(t.value))return{unaryFilter:{field:oc(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(FE(t.value))return{unaryFilter:{field:oc(t.field),op:"IS_NOT_NAN"}};if(VE(t.value))return{unaryFilter:{field:oc(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:oc(t.field),op:G5(t.op),value:t.value}}})(n):n instanceof qi?(function(t){const r=t.getFilters().map((i=>wT(i)));return r.length===1?r[0]:{compositeFilter:{op:q5(t.op),filters:r}}})(n):Ve(54877,{filter:n})}function $5(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function ET(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ys{constructor(e,t,r,i,a=Ge.min(),o=Ge.min(),c=ur.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=c,this.expectedCount=u}withSequenceNumber(e){return new Ys(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Ys(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ys(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ys(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X5{constructor(e){this.yt=e}}function Y5(n){const e=U5({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?_0(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K5{constructor(){this.Cn=new W5}addToCollectionParentIndex(e,t){return this.Cn.add(t),pe.resolve()}getCollectionParents(e,t){return pe.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return pe.resolve()}deleteFieldIndex(e,t){return pe.resolve()}deleteAllFieldIndexes(e){return pe.resolve()}createTargetIndexes(e,t){return pe.resolve()}getDocumentsMatchingTarget(e,t){return pe.resolve(null)}getIndexType(e,t){return pe.resolve(0)}getFieldIndexes(e,t){return pe.resolve([])}getNextCollectionGroupToUpdate(e){return pe.resolve(null)}getMinOffset(e,t){return pe.resolve(so.min())}getMinOffsetFromCollectionGroup(e,t){return pe.resolve(so.min())}updateCollectionGroup(e,t,r){return pe.resolve()}updateIndexEntries(e,t){return pe.resolve()}}class W5{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new jn(Ut.comparator),a=!i.has(r);return this.index[t]=i.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new jn(Ut.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eA={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},AT=41943040;class jr{static withCacheSize(e){return new jr(e,jr.DEFAULT_COLLECTION_PERCENTILE,jr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */jr.DEFAULT_COLLECTION_PERCENTILE=10,jr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,jr.DEFAULT=new jr(AT,jr.DEFAULT_COLLECTION_PERCENTILE,jr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),jr.DISABLED=new jr(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tc{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Tc(0)}static cr(){return new Tc(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tA="LruGarbageCollector",Q5=1048576;function nA([n,e],[t,r]){const i=ut(n,t);return i===0?ut(e,r):i}class Z5{constructor(e){this.Ir=e,this.buffer=new jn(nA),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();nA(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class J5{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Te(tA,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Fc(t)?Te(tA,"Ignoring IndexedDB error during garbage collection: ",t):await Vc(t)}await this.Vr(3e5)}))}}class eM{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((r=>Math.floor(t/100*r)))}nthSequenceNumber(e,t){if(t===0)return pe.resolve(Q0.ce);const r=new Z5(t);return this.mr.forEachTarget(e,(i=>r.Ar(i.sequenceNumber))).next((()=>this.mr.pr(e,(i=>r.Ar(i))))).next((()=>r.maxValue))}removeTargets(e,t,r){return this.mr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(Te("LruGarbageCollector","Garbage collection skipped; disabled"),pe.resolve(eA)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(Te("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),eA):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let r,i,a,o,c,u,d;const m=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((g=>(g>this.params.maximumSequenceNumbersToCollect?(Te("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${g}`),i=this.params.maximumSequenceNumbersToCollect):i=g,o=Date.now(),this.nthSequenceNumber(e,i)))).next((g=>(r=g,c=Date.now(),this.removeTargets(e,r,t)))).next((g=>(a=g,u=Date.now(),this.removeOrphanedDocuments(e,r)))).next((g=>(d=Date.now(),ac()<=ct.DEBUG&&Te("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-m}ms
	Determined least recently used ${i} in `+(c-o)+`ms
	Removed ${a} targets in `+(u-c)+`ms
	Removed ${g} documents in `+(d-u)+`ms
Total Duration: ${d-m}ms`),pe.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:g}))))}}function tM(n,e){return new eM(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nM{constructor(){this.changes=new cl((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,$n.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?pe.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rM{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iM{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next((i=>(r=i,this.remoteDocumentCache.getEntry(e,t)))).next((i=>(r!==null&&yf(r.mutation,i,ti.empty(),Pt.now()),i)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.getLocalViewOfDocuments(e,r,ft()).next((()=>r))))}getLocalViewOfDocuments(e,t,r=ft()){const i=Zo();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,r).next((a=>{let o=af();return a.forEach(((c,u)=>{o=o.insert(c,u.overlayedDocument)})),o}))))}getOverlayedDocuments(e,t){const r=Zo();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,ft())))}populateOverlays(e,t,r){const i=[];return r.forEach((a=>{t.has(a)||i.push(a)})),this.documentOverlayCache.getOverlays(e,i).next((a=>{a.forEach(((o,c)=>{t.set(o,c)}))}))}computeViews(e,t,r,i){let a=as();const o=vf(),c=(function(){return vf()})();return t.forEach(((u,d)=>{const m=r.get(d.key);i.has(d.key)&&(m===void 0||m.mutation instanceof vo)?a=a.insert(d.key,d):m!==void 0?(o.set(d.key,m.mutation.getFieldMask()),yf(m.mutation,d,m.mutation.getFieldMask(),Pt.now())):o.set(d.key,ti.empty())})),this.recalculateAndSaveOverlays(e,a).next((u=>(u.forEach(((d,m)=>o.set(d,m))),t.forEach(((d,m)=>c.set(d,new rM(m,o.get(d)??null)))),c)))}recalculateAndSaveOverlays(e,t){const r=vf();let i=new ln(((o,c)=>o-c)),a=ft();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((o=>{for(const c of o)c.keys().forEach((u=>{const d=t.get(u);if(d===null)return;let m=r.get(u)||ti.empty();m=c.applyToLocalView(d,m),r.set(u,m);const g=(i.get(c.batchId)||ft()).add(u);i=i.insert(c.batchId,g)}))})).next((()=>{const o=[],c=i.getReverseIterator();for(;c.hasNext();){const u=c.getNext(),d=u.key,m=u.value,g=nT();m.forEach((_=>{if(!a.has(_)){const w=lT(t.get(_),r.get(_));w!==null&&g.set(_,w),a=a.add(_)}})),o.push(this.documentOverlayCache.saveOverlays(e,d,g))}return pe.waitFor(o)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,t,r,i){return(function(o){return Pe.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):QC(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next((a=>{const o=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-a.size):pe.resolve(Zo());let c=Tf,u=a;return o.next((d=>pe.forEach(d,((m,g)=>(c<g.largestBatchId&&(c=g.largestBatchId),a.get(m)?pe.resolve():this.remoteDocumentCache.getEntry(e,m).next((_=>{u=u.insert(m,_)}))))).next((()=>this.populateOverlays(e,d,a))).next((()=>this.computeViews(e,u,d,ft()))).next((m=>({batchId:c,changes:tT(m)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Pe(t)).next((r=>{let i=af();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i}))}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const a=t.collectionGroup;let o=af();return this.indexManager.getCollectionParents(e,a).next((c=>pe.forEach(c,(u=>{const d=(function(g,_){return new Uc(_,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)})(t,u.child(a));return this.getDocumentsMatchingCollectionQuery(e,d,r,i).next((m=>{m.forEach(((g,_)=>{o=o.insert(g,_)}))}))})).next((()=>o))))}getDocumentsMatchingCollectionQuery(e,t,r,i){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next((o=>(a=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,a,i)))).next((o=>{a.forEach(((u,d)=>{const m=d.getKey();o.get(m)===null&&(o=o.insert(m,$n.newInvalidDocument(m)))}));let c=af();return o.forEach(((u,d)=>{const m=a.get(u);m!==void 0&&yf(m.mutation,d,ti.empty(),Pt.now()),tp(t,d)&&(c=c.insert(u,d))})),c}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aM{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return pe.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(i){return{id:i.id,version:i.version,createTime:ni(i.createTime)}})(t)),pe.resolve()}getNamedQuery(e,t){return pe.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(i){return{name:i.name,query:Y5(i.bundledQuery),readTime:ni(i.readTime)}})(t)),pe.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sM{constructor(){this.overlays=new ln(Pe.comparator),this.qr=new Map}getOverlay(e,t){return pe.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Zo();return pe.forEach(t,(i=>this.getOverlay(e,i).next((a=>{a!==null&&r.set(i,a)})))).next((()=>r))}saveOverlays(e,t,r){return r.forEach(((i,a)=>{this.St(e,t,a)})),pe.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.qr.get(r);return i!==void 0&&(i.forEach((a=>this.overlays=this.overlays.remove(a))),this.qr.delete(r)),pe.resolve()}getOverlaysForCollection(e,t,r){const i=Zo(),a=t.length+1,o=new Pe(t.child("")),c=this.overlays.getIteratorFrom(o);for(;c.hasNext();){const u=c.getNext().value,d=u.getKey();if(!t.isPrefixOf(d.path))break;d.path.length===a&&u.largestBatchId>r&&i.set(u.getKey(),u)}return pe.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let a=new ln(((d,m)=>d-m));const o=this.overlays.getIterator();for(;o.hasNext();){const d=o.getNext().value;if(d.getKey().getCollectionGroup()===t&&d.largestBatchId>r){let m=a.get(d.largestBatchId);m===null&&(m=Zo(),a=a.insert(d.largestBatchId,m)),m.set(d.getKey(),d)}}const c=Zo(),u=a.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach(((d,m)=>c.set(d,m))),!(c.size()>=i)););return pe.resolve(c)}St(e,t,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new S5(t,r));let a=this.qr.get(t);a===void 0&&(a=ft(),this.qr.set(t,a)),this.qr.set(t,a.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oM{constructor(){this.sessionToken=ur.EMPTY_BYTE_STRING}getSessionToken(e){return pe.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,pe.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uy{constructor(){this.Qr=new jn(qn.$r),this.Ur=new jn(qn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const r=new qn(e,t);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,t){e.forEach((r=>this.addReference(r,t)))}removeReference(e,t){this.Gr(new qn(e,t))}zr(e,t){e.forEach((r=>this.removeReference(r,t)))}jr(e){const t=new Pe(new Ut([])),r=new qn(t,e),i=new qn(t,e+1),a=[];return this.Ur.forEachInRange([r,i],(o=>{this.Gr(o),a.push(o.key)})),a}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new Pe(new Ut([])),r=new qn(t,e),i=new qn(t,e+1);let a=ft();return this.Ur.forEachInRange([r,i],(o=>{a=a.add(o.key)})),a}containsKey(e){const t=new qn(e,0),r=this.Qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class qn{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return Pe.comparator(e.key,t.key)||ut(e.Yr,t.Yr)}static Kr(e,t){return ut(e.Yr,t.Yr)||Pe.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lM{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new jn(qn.$r)}checkEmpty(e){return pe.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){const a=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new b5(a,t,r,i);this.mutationQueue.push(o);for(const c of i)this.Zr=this.Zr.add(new qn(c.key,a)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return pe.resolve(o)}lookupMutationBatch(e,t){return pe.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=this.ei(r),a=i<0?0:i;return pe.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return pe.resolve(this.mutationQueue.length===0?ty:this.tr-1)}getAllMutationBatches(e){return pe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new qn(t,0),i=new qn(t,Number.POSITIVE_INFINITY),a=[];return this.Zr.forEachInRange([r,i],(o=>{const c=this.Xr(o.Yr);a.push(c)})),pe.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new jn(ut);return t.forEach((i=>{const a=new qn(i,0),o=new qn(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([a,o],(c=>{r=r.add(c.Yr)}))})),pe.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let a=r;Pe.isDocumentKey(a)||(a=a.child(""));const o=new qn(new Pe(a),0);let c=new jn(ut);return this.Zr.forEachWhile((u=>{const d=u.key.path;return!!r.isPrefixOf(d)&&(d.length===i&&(c=c.add(u.Yr)),!0)}),o),pe.resolve(this.ti(c))}ti(e){const t=[];return e.forEach((r=>{const i=this.Xr(r);i!==null&&t.push(i)})),t}removeMutationBatch(e,t){mt(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return pe.forEach(t.mutations,(i=>{const a=new qn(i.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,t){const r=new qn(t,0),i=this.Zr.firstAfterOrEqual(r);return pe.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,pe.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cM{constructor(e){this.ri=e,this.docs=(function(){return new ln(Pe.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),a=i?i.size:0,o=this.ri(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return pe.resolve(r?r.document.mutableCopy():$n.newInvalidDocument(t))}getEntries(e,t){let r=as();return t.forEach((i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():$n.newInvalidDocument(i))})),pe.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let a=as();const o=t.path,c=new Pe(o.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(c);for(;u.hasNext();){const{key:d,value:{document:m}}=u.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||VD(BD(m),r)<=0||(i.has(m.key)||tp(t,m))&&(a=a.insert(m.key,m.mutableCopy()))}return pe.resolve(a)}getAllFromCollectionGroup(e,t,r,i){Ve(9500)}ii(e,t){return pe.forEach(this.docs,(r=>t(r)))}newChangeBuffer(e){return new uM(this)}getSize(e){return pe.resolve(this.size)}}class uM extends nM{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((r,i)=>{i.isValidDocument()?t.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)})),pe.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fM{constructor(e){this.persistence=e,this.si=new cl((t=>iy(t)),ay),this.lastRemoteSnapshotVersion=Ge.min(),this.highestTargetId=0,this.oi=0,this._i=new uy,this.targetCount=0,this.ai=Tc.ur()}forEachTarget(e,t){return this.si.forEach(((r,i)=>t(i))),pe.resolve()}getLastRemoteSnapshotVersion(e){return pe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return pe.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),pe.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.oi&&(this.oi=t),pe.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Tc(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,pe.resolve()}updateTargetData(e,t){return this.Pr(t),pe.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,pe.resolve()}removeTargets(e,t,r){let i=0;const a=[];return this.si.forEach(((o,c)=>{c.sequenceNumber<=t&&r.get(c.targetId)===null&&(this.si.delete(o),a.push(this.removeMatchingKeysForTargetId(e,c.targetId)),i++)})),pe.waitFor(a).next((()=>i))}getTargetCount(e){return pe.resolve(this.targetCount)}getTargetData(e,t){const r=this.si.get(t)||null;return pe.resolve(r)}addMatchingKeys(e,t,r){return this._i.Wr(t,r),pe.resolve()}removeMatchingKeys(e,t,r){this._i.zr(t,r);const i=this.persistence.referenceDelegate,a=[];return i&&t.forEach((o=>{a.push(i.markPotentiallyOrphaned(e,o))})),pe.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),pe.resolve()}getMatchingKeysForTargetId(e,t){const r=this._i.Hr(t);return pe.resolve(r)}containsKey(e,t){return pe.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bT{constructor(e,t){this.ui={},this.overlays={},this.ci=new Q0(0),this.li=!1,this.li=!0,this.hi=new oM,this.referenceDelegate=e(this),this.Pi=new fM(this),this.indexManager=new K5,this.remoteDocumentCache=(function(i){return new cM(i)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new X5(t),this.Ii=new aM(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new sM,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ui[e.toKey()];return r||(r=new lM(t,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,r){Te("MemoryPersistence","Starting transaction:",e);const i=new dM(this.ci.next());return this.referenceDelegate.Ei(),r(i).next((a=>this.referenceDelegate.di(i).next((()=>a)))).toPromise().then((a=>(i.raiseOnCommittedEvent(),a)))}Ai(e,t){return pe.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,t))))}}class dM extends UD{constructor(e){super(),this.currentSequenceNumber=e}}class fy{constructor(e){this.persistence=e,this.Ri=new uy,this.Vi=null}static mi(e){return new fy(e)}get fi(){if(this.Vi)return this.Vi;throw Ve(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.fi.delete(r.toString()),pe.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.fi.add(r.toString()),pe.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),pe.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((i=>this.fi.add(i.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((i=>{i.forEach((a=>this.fi.add(a.toString())))})).next((()=>r.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return pe.forEach(this.fi,(r=>{const i=Pe.fromPath(r);return this.gi(e,i).next((a=>{a||t.removeEntry(i,Ge.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((r=>{r?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return pe.or([()=>pe.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class A0{constructor(e,t){this.persistence=e,this.pi=new cl((r=>GD(r.path)),((r,i)=>r.isEqual(i))),this.garbageCollector=tM(this,t)}static mi(e,t){return new A0(e,t)}Ei(){}di(e){return pe.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>t.next((i=>r+i))))}wr(e){let t=0;return this.pr(e,(r=>{t++})).next((()=>t))}pr(e,t){return pe.forEach(this.pi,((r,i)=>this.br(e,r,i).next((a=>a?pe.resolve():t(i)))))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const i=this.persistence.getRemoteDocumentCache(),a=i.newChangeBuffer();return i.ii(e,(o=>this.br(e,o,t).next((c=>{c||(r++,a.removeEntry(o,Ge.min()))})))).next((()=>a.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),pe.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),pe.resolve()}removeReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),pe.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),pe.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Wh(e.data.value)),t}br(e,t,r){return pe.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const i=this.pi.get(t);return pe.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dy{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Es=r,this.ds=i}static As(e,t){let r=ft(),i=ft();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new dy(e,t.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hM{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pM{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return qR()?8:zD(vr())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,i){const a={result:null};return this.ys(e,t).next((o=>{a.result=o})).next((()=>{if(!a.result)return this.ws(e,t,i,r).next((o=>{a.result=o}))})).next((()=>{if(a.result)return;const o=new hM;return this.Ss(e,t,o).next((c=>{if(a.result=c,this.Vs)return this.bs(e,t,o,c.size)}))})).next((()=>a.result))}bs(e,t,r,i){return r.documentReadCount<this.fs?(ac()<=ct.DEBUG&&Te("QueryEngine","SDK will not create cache indexes for query:",sc(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),pe.resolve()):(ac()<=ct.DEBUG&&Te("QueryEngine","Query:",sc(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(ac()<=ct.DEBUG&&Te("QueryEngine","The SDK decides to create cache indexes for query:",sc(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Aa(t))):pe.resolve())}ys(e,t){if(GE(t))return pe.resolve(null);let r=Aa(t);return this.indexManager.getIndexType(e,r).next((i=>i===0?null:(t.limit!==null&&i===1&&(t=_0(t,null,"F"),r=Aa(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next((a=>{const o=ft(...a);return this.ps.getDocuments(e,o).next((c=>this.indexManager.getMinOffset(e,r).next((u=>{const d=this.Ds(t,c);return this.Cs(t,d,o,u.readTime)?this.ys(e,_0(t,null,"F")):this.vs(e,d,t,u)}))))})))))}ws(e,t,r,i){return GE(t)||i.isEqual(Ge.min())?pe.resolve(null):this.ps.getDocuments(e,r).next((a=>{const o=this.Ds(t,a);return this.Cs(t,o,r,i)?pe.resolve(null):(ac()<=ct.DEBUG&&Te("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),sc(t)),this.vs(e,o,t,LD(i,Tf)).next((c=>c)))}))}Ds(e,t){let r=new jn(JC(e));return t.forEach(((i,a)=>{tp(e,a)&&(r=r.add(a))})),r}Cs(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const a=e.limitType==="F"?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Ss(e,t,r){return ac()<=ct.DEBUG&&Te("QueryEngine","Using full collection scan to execute query:",sc(t)),this.ps.getDocumentsMatchingQuery(e,t,so.min(),r)}vs(e,t,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next((a=>(t.forEach((o=>{a=a.insert(o.key,o)})),a)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hy="LocalStore",mM=3e8;class gM{constructor(e,t,r,i){this.persistence=e,this.Fs=t,this.serializer=i,this.Ms=new ln(ut),this.xs=new cl((a=>iy(a)),ay),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new iM(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function vM(n,e,t,r){return new gM(n,e,t,r)}async function ST(n,e){const t=Ke(n);return await t.persistence.runTransaction("Handle user change","readonly",(r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next((a=>(i=a,t.Bs(e),t.mutationQueue.getAllMutationBatches(r)))).next((a=>{const o=[],c=[];let u=ft();for(const d of i){o.push(d.batchId);for(const m of d.mutations)u=u.add(m.key)}for(const d of a){c.push(d.batchId);for(const m of d.mutations)u=u.add(m.key)}return t.localDocuments.getDocuments(r,u).next((d=>({Ls:d,removedBatchIds:o,addedBatchIds:c})))}))}))}function yM(n,e){const t=Ke(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const i=e.batch.keys(),a=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(c,u,d,m){const g=d.batch,_=g.keys();let w=pe.resolve();return _.forEach((E=>{w=w.next((()=>m.getEntry(u,E))).next((S=>{const D=d.docVersions.get(E);mt(D!==null,48541),S.version.compareTo(D)<0&&(g.applyToRemoteDocument(S,d),S.isValidDocument()&&(S.setReadTime(d.commitVersion),m.addEntry(S)))}))})),w.next((()=>c.mutationQueue.removeMutationBatch(u,g)))})(t,r,e,a).next((()=>a.apply(r))).next((()=>t.mutationQueue.performConsistencyCheck(r))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(c){let u=ft();for(let d=0;d<c.mutationResults.length;++d)c.mutationResults[d].transformResults.length>0&&(u=u.add(c.batch.mutations[d].key));return u})(e)))).next((()=>t.localDocuments.getDocuments(r,i)))}))}function CT(n){const e=Ke(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function _M(n,e){const t=Ke(n),r=e.snapshotVersion;let i=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(a=>{const o=t.Ns.newChangeBuffer({trackRemovals:!0});i=t.Ms;const c=[];e.targetChanges.forEach(((m,g)=>{const _=i.get(g);if(!_)return;c.push(t.Pi.removeMatchingKeys(a,m.removedDocuments,g).next((()=>t.Pi.addMatchingKeys(a,m.addedDocuments,g))));let w=_.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(g)!==null?w=w.withResumeToken(ur.EMPTY_BYTE_STRING,Ge.min()).withLastLimboFreeSnapshotVersion(Ge.min()):m.resumeToken.approximateByteSize()>0&&(w=w.withResumeToken(m.resumeToken,r)),i=i.insert(g,w),(function(S,D,C){return S.resumeToken.approximateByteSize()===0||D.snapshotVersion.toMicroseconds()-S.snapshotVersion.toMicroseconds()>=mM?!0:C.addedDocuments.size+C.modifiedDocuments.size+C.removedDocuments.size>0})(_,w,m)&&c.push(t.Pi.updateTargetData(a,w))}));let u=as(),d=ft();if(e.documentUpdates.forEach((m=>{e.resolvedLimboDocuments.has(m)&&c.push(t.persistence.referenceDelegate.updateLimboDocument(a,m))})),c.push(xM(a,o,e.documentUpdates).next((m=>{u=m.ks,d=m.qs}))),!r.isEqual(Ge.min())){const m=t.Pi.getLastRemoteSnapshotVersion(a).next((g=>t.Pi.setTargetsMetadata(a,a.currentSequenceNumber,r)));c.push(m)}return pe.waitFor(c).next((()=>o.apply(a))).next((()=>t.localDocuments.getLocalViewOfDocuments(a,u,d))).next((()=>u))})).then((a=>(t.Ms=i,a)))}function xM(n,e,t){let r=ft(),i=ft();return t.forEach((a=>r=r.add(a))),e.getEntries(n,r).next((a=>{let o=as();return t.forEach(((c,u)=>{const d=a.get(c);u.isFoundDocument()!==d.isFoundDocument()&&(i=i.add(c)),u.isNoDocument()&&u.version.isEqual(Ge.min())?(e.removeEntry(c,u.readTime),o=o.insert(c,u)):!d.isValidDocument()||u.version.compareTo(d.version)>0||u.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(u),o=o.insert(c,u)):Te(hy,"Ignoring outdated watch update for ",c,". Current version:",d.version," Watch version:",u.version)})),{ks:o,qs:i}}))}function wM(n,e){const t=Ke(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=ty),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function EM(n,e){const t=Ke(n);return t.persistence.runTransaction("Allocate target","readwrite",(r=>{let i;return t.Pi.getTargetData(r,e).next((a=>a?(i=a,pe.resolve(i)):t.Pi.allocateTargetId(r).next((o=>(i=new Ys(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.Pi.addTargetData(r,i).next((()=>i)))))))})).then((r=>{const i=t.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(r.targetId,r),t.xs.set(e,r.targetId)),r}))}async function Zg(n,e,t){const r=Ke(n),i=r.Ms.get(e),a=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",a,(o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!Fc(o))throw o;Te(hy,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)}function rA(n,e,t){const r=Ke(n);let i=Ge.min(),a=ft();return r.persistence.runTransaction("Execute query","readwrite",(o=>(function(u,d,m){const g=Ke(u),_=g.xs.get(m);return _!==void 0?pe.resolve(g.Ms.get(_)):g.Pi.getTargetData(d,m)})(r,o,Aa(e)).next((c=>{if(c)return i=c.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(o,c.targetId).next((u=>{a=u}))})).next((()=>r.Fs.getDocumentsMatchingQuery(o,e,t?i:Ge.min(),t?a:ft()))).next((c=>(AM(r,c5(e),c),{documents:c,Qs:a})))))}function AM(n,e,t){let r=n.Os.get(e)||Ge.min();t.forEach(((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)})),n.Os.set(e,r)}class iA{constructor(){this.activeTargetIds=m5()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class bM{constructor(){this.Mo=new iA,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,r){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new iA,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SM{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aA="ConnectivityMonitor";class sA{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Te(aA,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Te(aA,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Oh=null;function Jg(){return Oh===null?Oh=(function(){return 268435456+Math.round(2147483648*Math.random())})():Oh++,"0x"+Oh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F1="RestConnection",CM={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class TM{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===g0?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,t,r,i,a){const o=Jg(),c=this.zo(e,t.toUriEncodedString());Te(F1,`Sending RPC '${e}' ${o}:`,c,r);const u={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(u,i,a);const{host:d}=new URL(c),m=kc(d);return this.Jo(e,c,u,r,m).then((g=>(Te(F1,`Received RPC '${e}' ${o}: `,g),g)),(g=>{throw Ac(F1,`RPC '${e}' ${o} failed with error: `,g,"url: ",c,"request:",r),g}))}Ho(e,t,r,i,a,o){return this.Go(e,t,r,i,a)}jo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Bc})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((i,a)=>e[a]=i)),r&&r.headers.forEach(((i,a)=>e[a]=i))}zo(e,t){const r=CM[e];return`${this.Uo}/v1/${t}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IM{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pr="WebChannelConnection";class NM extends TM{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,i,a){const o=Jg();return new Promise(((c,u)=>{const d=new CC;d.setWithCredentials(!0),d.listenOnce(TC.COMPLETE,(()=>{try{switch(d.getLastErrorCode()){case Kh.NO_ERROR:const g=d.getResponseJson();Te(pr,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(g)),c(g);break;case Kh.TIMEOUT:Te(pr,`RPC '${e}' ${o} timed out`),u(new Ae(ue.DEADLINE_EXCEEDED,"Request time out"));break;case Kh.HTTP_ERROR:const _=d.getStatus();if(Te(pr,`RPC '${e}' ${o} failed with status:`,_,"response text:",d.getResponseText()),_>0){let w=d.getResponseJson();Array.isArray(w)&&(w=w[0]);const E=w?.error;if(E&&E.status&&E.message){const S=(function(C){const k=C.toLowerCase().replace(/_/g,"-");return Object.values(ue).indexOf(k)>=0?k:ue.UNKNOWN})(E.status);u(new Ae(S,E.message))}else u(new Ae(ue.UNKNOWN,"Server responded with status "+d.getStatus()))}else u(new Ae(ue.UNAVAILABLE,"Connection failed."));break;default:Ve(9055,{l_:e,streamId:o,h_:d.getLastErrorCode(),P_:d.getLastError()})}}finally{Te(pr,`RPC '${e}' ${o} completed.`)}}));const m=JSON.stringify(i);Te(pr,`RPC '${e}' ${o} sending request:`,i),d.send(t,"POST",m,r,15)}))}T_(e,t,r){const i=Jg(),a=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=RC(),c=NC(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(u.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(u.useFetchStreams=!0),this.jo(u.initMessageHeaders,t,r),u.encodeInitMessageHeaders=!0;const m=a.join("");Te(pr,`Creating RPC '${e}' stream ${i}: ${m}`,u);const g=o.createWebChannel(m,u);this.I_(g);let _=!1,w=!1;const E=new IM({Yo:D=>{w?Te(pr,`Not sending because RPC '${e}' stream ${i} is closed:`,D):(_||(Te(pr,`Opening RPC '${e}' stream ${i} transport.`),g.open(),_=!0),Te(pr,`RPC '${e}' stream ${i} sending:`,D),g.send(D))},Zo:()=>g.close()}),S=(D,C,k)=>{D.listen(C,(V=>{try{k(V)}catch(U){setTimeout((()=>{throw U}),0)}}))};return S(g,rf.EventType.OPEN,(()=>{w||(Te(pr,`RPC '${e}' stream ${i} transport opened.`),E.o_())})),S(g,rf.EventType.CLOSE,(()=>{w||(w=!0,Te(pr,`RPC '${e}' stream ${i} transport closed`),E.a_(),this.E_(g))})),S(g,rf.EventType.ERROR,(D=>{w||(w=!0,Ac(pr,`RPC '${e}' stream ${i} transport errored. Name:`,D.name,"Message:",D.message),E.a_(new Ae(ue.UNAVAILABLE,"The operation could not be completed")))})),S(g,rf.EventType.MESSAGE,(D=>{if(!w){const C=D.data[0];mt(!!C,16349);const k=C,V=k?.error||k[0]?.error;if(V){Te(pr,`RPC '${e}' stream ${i} received error:`,V);const U=V.status;let q=(function(b){const N=Sn[b];if(N!==void 0)return dT(N)})(U),$=V.message;q===void 0&&(q=ue.INTERNAL,$="Unknown error status: "+U+" with message "+V.message),w=!0,E.a_(new Ae(q,$)),g.close()}else Te(pr,`RPC '${e}' stream ${i} received:`,C),E.u_(C)}})),S(c,IC.STAT_EVENT,(D=>{D.stat===zg.PROXY?Te(pr,`RPC '${e}' stream ${i} detected buffering proxy`):D.stat===zg.NOPROXY&&Te(pr,`RPC '${e}' stream ${i} detected no buffering proxy`)})),setTimeout((()=>{E.__()}),0),E}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function U1(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sp(n){return new M5(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class py{constructor(e,t,r=1e3,i=1.5,a=6e4){this.Mi=e,this.timerId=t,this.d_=r,this.A_=i,this.R_=a,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,t-r);i>0&&Te("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oA="PersistentStream";class TT{constructor(e,t,r,i,a,o,c,u){this.Mi=e,this.S_=r,this.b_=i,this.connection=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=c,this.listener=u,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new py(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===ue.RESOURCE_EXHAUSTED?(is(t.toString()),is("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===ue.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,i])=>{this.D_===t&&this.G_(r,i)}),(r=>{e((()=>{const i=new Ae(ue.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)}))}))}G_(e,t){const r=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((i=>{r((()=>this.z_(i)))})),this.stream.onMessage((i=>{r((()=>++this.F_==1?this.J_(i):this.onNext(i)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Te(oA,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(Te(oA,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class RM extends TT{constructor(e,t,r,i,a,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,o),this.serializer=a}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=L5(this.serializer,e),r=(function(a){if(!("targetChange"in a))return Ge.min();const o=a.targetChange;return o.targetIds&&o.targetIds.length?Ge.min():o.readTime?ni(o.readTime):Ge.min()})(e);return this.listener.H_(t,r)}Y_(e){const t={};t.database=Qg(this.serializer),t.addTarget=(function(a,o){let c;const u=o.target;if(c=Xg(u)?{documents:V5(a,u)}:{query:F5(a,u).ft},c.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){c.resumeToken=mT(a,o.resumeToken);const d=Kg(a,o.expectedCount);d!==null&&(c.expectedCount=d)}else if(o.snapshotVersion.compareTo(Ge.min())>0){c.readTime=w0(a,o.snapshotVersion.toTimestamp());const d=Kg(a,o.expectedCount);d!==null&&(c.expectedCount=d)}return c})(this.serializer,e);const r=z5(this.serializer,e);r&&(t.labels=r),this.q_(t)}Z_(e){const t={};t.database=Qg(this.serializer),t.removeTarget=e,this.q_(t)}}class OM extends TT{constructor(e,t,r,i,a,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,o),this.serializer=a}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return mt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,mt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){mt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=B5(e.writeResults,e.commitTime),r=ni(e.commitTime);return this.listener.na(r,t)}ra(){const e={};e.database=Qg(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((r=>_T(this.serializer,r)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DM{}class MM extends DM{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new Ae(ue.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,o])=>this.connection.Go(e,Wg(t,r),i,a,o))).catch((a=>{throw a.name==="FirebaseError"?(a.code===ue.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Ae(ue.UNKNOWN,a.toString())}))}Ho(e,t,r,i,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,c])=>this.connection.Ho(e,Wg(t,r),i,o,c,a))).catch((o=>{throw o.name==="FirebaseError"?(o.code===ue.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Ae(ue.UNKNOWN,o.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class PM{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(is(t),this.aa=!1):Te("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sl="RemoteStore";class kM{constructor(e,t,r,i,a){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=a,this.Aa.Oo((o=>{r.enqueueAndForget((async()=>{ul(this)&&(Te(sl,"Restarting streams for network reachability change."),await(async function(u){const d=Ke(u);d.Ea.add(4),await Wf(d),d.Ra.set("Unknown"),d.Ea.delete(4),await op(d)})(this))}))})),this.Ra=new PM(r,i)}}async function op(n){if(ul(n))for(const e of n.da)await e(!0)}async function Wf(n){for(const e of n.da)await e(!1)}function IT(n,e){const t=Ke(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),yy(t)?vy(t):zc(t).O_()&&gy(t,e))}function my(n,e){const t=Ke(n),r=zc(t);t.Ia.delete(e),r.O_()&&NT(t,e),t.Ia.size===0&&(r.O_()?r.L_():ul(t)&&t.Ra.set("Unknown"))}function gy(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ge.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}zc(n).Y_(e)}function NT(n,e){n.Va.Ue(e),zc(n).Z_(e)}function vy(n){n.Va=new N5({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),zc(n).start(),n.Ra.ua()}function yy(n){return ul(n)&&!zc(n).x_()&&n.Ia.size>0}function ul(n){return Ke(n).Ea.size===0}function RT(n){n.Va=void 0}async function jM(n){n.Ra.set("Online")}async function LM(n){n.Ia.forEach(((e,t)=>{gy(n,e)}))}async function BM(n,e){RT(n),yy(n)?(n.Ra.ha(e),vy(n)):n.Ra.set("Unknown")}async function VM(n,e,t){if(n.Ra.set("Online"),e instanceof pT&&e.state===2&&e.cause)try{await(async function(i,a){const o=a.cause;for(const c of a.targetIds)i.Ia.has(c)&&(await i.remoteSyncer.rejectListen(c,o),i.Ia.delete(c),i.Va.removeTarget(c))})(n,e)}catch(r){Te(sl,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await b0(n,r)}else if(e instanceof Jh?n.Va.Ze(e):e instanceof hT?n.Va.st(e):n.Va.tt(e),!t.isEqual(Ge.min()))try{const r=await CT(n.localStore);t.compareTo(r)>=0&&await(function(a,o){const c=a.Va.Tt(o);return c.targetChanges.forEach(((u,d)=>{if(u.resumeToken.approximateByteSize()>0){const m=a.Ia.get(d);m&&a.Ia.set(d,m.withResumeToken(u.resumeToken,o))}})),c.targetMismatches.forEach(((u,d)=>{const m=a.Ia.get(u);if(!m)return;a.Ia.set(u,m.withResumeToken(ur.EMPTY_BYTE_STRING,m.snapshotVersion)),NT(a,u);const g=new Ys(m.target,u,d,m.sequenceNumber);gy(a,g)})),a.remoteSyncer.applyRemoteEvent(c)})(n,t)}catch(r){Te(sl,"Failed to raise snapshot:",r),await b0(n,r)}}async function b0(n,e,t){if(!Fc(e))throw e;n.Ea.add(1),await Wf(n),n.Ra.set("Offline"),t||(t=()=>CT(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{Te(sl,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await op(n)}))}function OT(n,e){return e().catch((t=>b0(n,t,e)))}async function lp(n){const e=Ke(n),t=uo(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:ty;for(;FM(e);)try{const i=await wM(e.localStore,r);if(i===null){e.Ta.length===0&&t.L_();break}r=i.batchId,UM(e,i)}catch(i){await b0(e,i)}DT(e)&&MT(e)}function FM(n){return ul(n)&&n.Ta.length<10}function UM(n,e){n.Ta.push(e);const t=uo(n);t.O_()&&t.X_&&t.ea(e.mutations)}function DT(n){return ul(n)&&!uo(n).x_()&&n.Ta.length>0}function MT(n){uo(n).start()}async function zM(n){uo(n).ra()}async function HM(n){const e=uo(n);for(const t of n.Ta)e.ea(t.mutations)}async function GM(n,e,t){const r=n.Ta.shift(),i=oy.from(r,e,t);await OT(n,(()=>n.remoteSyncer.applySuccessfulWrite(i))),await lp(n)}async function qM(n,e){e&&uo(n).X_&&await(async function(r,i){if((function(o){return fT(o)&&o!==ue.ABORTED})(i.code)){const a=r.Ta.shift();uo(r).B_(),await OT(r,(()=>r.remoteSyncer.rejectFailedWrite(a.batchId,i))),await lp(r)}})(n,e),DT(n)&&MT(n)}async function lA(n,e){const t=Ke(n);t.asyncQueue.verifyOperationInProgress(),Te(sl,"RemoteStore received new credentials");const r=ul(t);t.Ea.add(3),await Wf(t),r&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await op(t)}async function $M(n,e){const t=Ke(n);e?(t.Ea.delete(2),await op(t)):e||(t.Ea.add(2),await Wf(t),t.Ra.set("Unknown"))}function zc(n){return n.ma||(n.ma=(function(t,r,i){const a=Ke(t);return a.sa(),new RM(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)})(n.datastore,n.asyncQueue,{Xo:jM.bind(null,n),t_:LM.bind(null,n),r_:BM.bind(null,n),H_:VM.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),yy(n)?vy(n):n.Ra.set("Unknown")):(await n.ma.stop(),RT(n))}))),n.ma}function uo(n){return n.fa||(n.fa=(function(t,r,i){const a=Ke(t);return a.sa(),new OM(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:zM.bind(null,n),r_:qM.bind(null,n),ta:HM.bind(null,n),na:GM.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await lp(n)):(await n.fa.stop(),n.Ta.length>0&&(Te(sl,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _y{constructor(e,t,r,i,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new Ea,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((o=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,a){const o=Date.now()+r,c=new _y(e,t,o,i,a);return c.start(r),c}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ae(ue.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function xy(n,e){if(is("AsyncQueue",`${e}: ${n}`),Fc(n))return new Ae(ue.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xc{static emptySet(e){return new xc(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||Pe.comparator(t.key,r.key):(t,r)=>Pe.comparator(t.key,r.key),this.keyedMap=af(),this.sortedSet=new ln(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,r)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof xc)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new xc;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cA{constructor(){this.ga=new ln(Pe.comparator)}track(e){const t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Ve(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,r)=>{e.push(r)})),e}}class Ic{constructor(e,t,r,i,a,o,c,u,d){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=c,this.excludesMetadataChanges=u,this.hasCachedResults=d}static fromInitialDocuments(e,t,r,i,a){const o=[];return t.forEach((c=>{o.push({type:0,doc:c})})),new Ic(e,t,xc.emptySet(t),o,r,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ep(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XM{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class YM{constructor(){this.queries=uA(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){const i=Ke(t),a=i.queries;i.queries=uA(),a.forEach(((o,c)=>{for(const u of c.Sa)u.onError(r)}))})(this,new Ae(ue.ABORTED,"Firestore shutting down"))}}function uA(){return new cl((n=>ZC(n)),ep)}async function wy(n,e){const t=Ke(n);let r=3;const i=e.query;let a=t.queries.get(i);a?!a.ba()&&e.Da()&&(r=2):(a=new XM,r=e.Da()?0:1);try{switch(r){case 0:a.wa=await t.onListen(i,!0);break;case 1:a.wa=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(o){const c=xy(o,`Initialization of query '${sc(e.query)}' failed`);return void e.onError(c)}t.queries.set(i,a),a.Sa.push(e),e.va(t.onlineState),a.wa&&e.Fa(a.wa)&&Ay(t)}async function Ey(n,e){const t=Ke(n),r=e.query;let i=3;const a=t.queries.get(r);if(a){const o=a.Sa.indexOf(e);o>=0&&(a.Sa.splice(o,1),a.Sa.length===0?i=e.Da()?0:1:!a.ba()&&e.Da()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function KM(n,e){const t=Ke(n);let r=!1;for(const i of e){const a=i.query,o=t.queries.get(a);if(o){for(const c of o.Sa)c.Fa(i)&&(r=!0);o.wa=i}}r&&Ay(t)}function WM(n,e,t){const r=Ke(n),i=r.queries.get(e);if(i)for(const a of i.Sa)a.onError(t);r.queries.delete(e)}function Ay(n){n.Ca.forEach((e=>{e.next()}))}var ev,fA;(fA=ev||(ev={})).Ma="default",fA.Cache="cache";class by{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Ic(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const r=t!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Ic.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==ev.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PT{constructor(e){this.key=e}}class kT{constructor(e){this.key=e}}class QM{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=ft(),this.mutatedKeys=ft(),this.eu=JC(e),this.tu=new xc(this.eu)}get nu(){return this.Ya}ru(e,t){const r=t?t.iu:new cA,i=t?t.tu:this.tu;let a=t?t.mutatedKeys:this.mutatedKeys,o=i,c=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,d=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal(((m,g)=>{const _=i.get(m),w=tp(this.query,g)?g:null,E=!!_&&this.mutatedKeys.has(_.key),S=!!w&&(w.hasLocalMutations||this.mutatedKeys.has(w.key)&&w.hasCommittedMutations);let D=!1;_&&w?_.data.isEqual(w.data)?E!==S&&(r.track({type:3,doc:w}),D=!0):this.su(_,w)||(r.track({type:2,doc:w}),D=!0,(u&&this.eu(w,u)>0||d&&this.eu(w,d)<0)&&(c=!0)):!_&&w?(r.track({type:0,doc:w}),D=!0):_&&!w&&(r.track({type:1,doc:_}),D=!0,(u||d)&&(c=!0)),D&&(w?(o=o.add(w),a=S?a.add(m):a.delete(m)):(o=o.delete(m),a=a.delete(m)))})),this.query.limit!==null)for(;o.size>this.query.limit;){const m=this.query.limitType==="F"?o.last():o.first();o=o.delete(m.key),a=a.delete(m.key),r.track({type:1,doc:m})}return{tu:o,iu:r,Cs:c,mutatedKeys:a}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const a=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort(((m,g)=>(function(w,E){const S=D=>{switch(D){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ve(20277,{Rt:D})}};return S(w)-S(E)})(m.type,g.type)||this.eu(m.doc,g.doc))),this.ou(r),i=i??!1;const c=t&&!i?this._u():[],u=this.Xa.size===0&&this.current&&!i?1:0,d=u!==this.Za;return this.Za=u,o.length!==0||d?{snapshot:new Ic(this.query,e.tu,a,o,e.mutatedKeys,u===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:c}:{au:c}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new cA,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=ft(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const t=[];return e.forEach((r=>{this.Xa.has(r)||t.push(new kT(r))})),this.Xa.forEach((r=>{e.has(r)||t.push(new PT(r))})),t}cu(e){this.Ya=e.Qs,this.Xa=ft();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Ic.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Sy="SyncEngine";class ZM{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class JM{constructor(e){this.key=e,this.hu=!1}}class e9{constructor(e,t,r,i,a,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new cl((c=>ZC(c)),ep),this.Iu=new Map,this.Eu=new Set,this.du=new ln(Pe.comparator),this.Au=new Map,this.Ru=new uy,this.Vu={},this.mu=new Map,this.fu=Tc.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function t9(n,e,t=!0){const r=UT(n);let i;const a=r.Tu.get(e);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),i=a.view.lu()):i=await jT(r,e,t,!0),i}async function n9(n,e){const t=UT(n);await jT(t,e,!0,!1)}async function jT(n,e,t,r){const i=await EM(n.localStore,Aa(e)),a=i.targetId,o=n.sharedClientState.addLocalQueryTarget(a,t);let c;return r&&(c=await r9(n,e,a,o==="current",i.resumeToken)),n.isPrimaryClient&&t&&IT(n.remoteStore,i),c}async function r9(n,e,t,r,i){n.pu=(g,_,w)=>(async function(S,D,C,k){let V=D.view.ru(C);V.Cs&&(V=await rA(S.localStore,D.query,!1).then((({documents:M})=>D.view.ru(M,V))));const U=k&&k.targetChanges.get(D.targetId),q=k&&k.targetMismatches.get(D.targetId)!=null,$=D.view.applyChanges(V,S.isPrimaryClient,U,q);return hA(S,D.targetId,$.au),$.snapshot})(n,g,_,w);const a=await rA(n.localStore,e,!0),o=new QM(e,a.Qs),c=o.ru(a.documents),u=Kf.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),d=o.applyChanges(c,n.isPrimaryClient,u);hA(n,t,d.au);const m=new ZM(e,t,o);return n.Tu.set(e,m),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),d.snapshot}async function i9(n,e,t){const r=Ke(n),i=r.Tu.get(e),a=r.Iu.get(i.targetId);if(a.length>1)return r.Iu.set(i.targetId,a.filter((o=>!ep(o,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Zg(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),t&&my(r.remoteStore,i.targetId),tv(r,i.targetId)})).catch(Vc)):(tv(r,i.targetId),await Zg(r.localStore,i.targetId,!0))}async function a9(n,e){const t=Ke(n),r=t.Tu.get(e),i=t.Iu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),my(t.remoteStore,r.targetId))}async function s9(n,e,t){const r=h9(n);try{const i=await(function(o,c){const u=Ke(o),d=Pt.now(),m=c.reduce(((w,E)=>w.add(E.key)),ft());let g,_;return u.persistence.runTransaction("Locally write mutations","readwrite",(w=>{let E=as(),S=ft();return u.Ns.getEntries(w,m).next((D=>{E=D,E.forEach(((C,k)=>{k.isValidDocument()||(S=S.add(C))}))})).next((()=>u.localDocuments.getOverlayedDocuments(w,E))).next((D=>{g=D;const C=[];for(const k of c){const V=A5(k,g.get(k.key).overlayedDocument);V!=null&&C.push(new vo(k.key,V,GC(V.value.mapValue),lr.exists(!0)))}return u.mutationQueue.addMutationBatch(w,d,C,c)})).next((D=>{_=D;const C=D.applyToLocalDocumentSet(g,S);return u.documentOverlayCache.saveOverlays(w,D.batchId,C)}))})).then((()=>({batchId:_.batchId,changes:tT(g)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(o,c,u){let d=o.Vu[o.currentUser.toKey()];d||(d=new ln(ut)),d=d.insert(c,u),o.Vu[o.currentUser.toKey()]=d})(r,i.batchId,t),await Qf(r,i.changes),await lp(r.remoteStore)}catch(i){const a=xy(i,"Failed to persist write");t.reject(a)}}async function LT(n,e){const t=Ke(n);try{const r=await _M(t.localStore,e);e.targetChanges.forEach(((i,a)=>{const o=t.Au.get(a);o&&(mt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?o.hu=!0:i.modifiedDocuments.size>0?mt(o.hu,14607):i.removedDocuments.size>0&&(mt(o.hu,42227),o.hu=!1))})),await Qf(t,r,e)}catch(r){await Vc(r)}}function dA(n,e,t){const r=Ke(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const i=[];r.Tu.forEach(((a,o)=>{const c=o.view.va(e);c.snapshot&&i.push(c.snapshot)})),(function(o,c){const u=Ke(o);u.onlineState=c;let d=!1;u.queries.forEach(((m,g)=>{for(const _ of g.Sa)_.va(c)&&(d=!0)})),d&&Ay(u)})(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function o9(n,e,t){const r=Ke(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Au.get(e),a=i&&i.key;if(a){let o=new ln(Pe.comparator);o=o.insert(a,$n.newNoDocument(a,Ge.min()));const c=ft().add(a),u=new ap(Ge.min(),new Map,new ln(ut),o,c);await LT(r,u),r.du=r.du.remove(a),r.Au.delete(e),Cy(r)}else await Zg(r.localStore,e,!1).then((()=>tv(r,e,t))).catch(Vc)}async function l9(n,e){const t=Ke(n),r=e.batch.batchId;try{const i=await yM(t.localStore,e);VT(t,r,null),BT(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await Qf(t,i)}catch(i){await Vc(i)}}async function c9(n,e,t){const r=Ke(n);try{const i=await(function(o,c){const u=Ke(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",(d=>{let m;return u.mutationQueue.lookupMutationBatch(d,c).next((g=>(mt(g!==null,37113),m=g.keys(),u.mutationQueue.removeMutationBatch(d,g)))).next((()=>u.mutationQueue.performConsistencyCheck(d))).next((()=>u.documentOverlayCache.removeOverlaysForBatchId(d,m,c))).next((()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,m))).next((()=>u.localDocuments.getDocuments(d,m)))}))})(r.localStore,e);VT(r,e,t),BT(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await Qf(r,i)}catch(i){await Vc(i)}}function BT(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function VT(n,e,t){const r=Ke(n);let i=r.Vu[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(t?a.reject(t):a.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function tv(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Iu.get(e))n.Tu.delete(r),t&&n.Pu.yu(r,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((r=>{n.Ru.containsKey(r)||FT(n,r)}))}function FT(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(my(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),Cy(n))}function hA(n,e,t){for(const r of t)r instanceof PT?(n.Ru.addReference(r.key,e),u9(n,r)):r instanceof kT?(Te(Sy,"Document no longer in limbo: "+r.key),n.Ru.removeReference(r.key,e),n.Ru.containsKey(r.key)||FT(n,r.key)):Ve(19791,{wu:r})}function u9(n,e){const t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Eu.has(r)||(Te(Sy,"New document in limbo: "+t),n.Eu.add(r),Cy(n))}function Cy(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new Pe(Ut.fromString(e)),r=n.fu.next();n.Au.set(r,new JM(t)),n.du=n.du.insert(t,r),IT(n.remoteStore,new Ys(Aa(J0(t.path)),r,"TargetPurposeLimboResolution",Q0.ce))}}async function Qf(n,e,t){const r=Ke(n),i=[],a=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach(((c,u)=>{o.push(r.pu(u,e,t).then((d=>{if((d||t)&&r.isPrimaryClient){const m=d?!d.fromCache:t?.targetChanges.get(u.targetId)?.current;r.sharedClientState.updateQueryState(u.targetId,m?"current":"not-current")}if(d){i.push(d);const m=dy.As(u.targetId,d);a.push(m)}})))})),await Promise.all(o),r.Pu.H_(i),await(async function(u,d){const m=Ke(u);try{await m.persistence.runTransaction("notifyLocalViewChanges","readwrite",(g=>pe.forEach(d,(_=>pe.forEach(_.Es,(w=>m.persistence.referenceDelegate.addReference(g,_.targetId,w))).next((()=>pe.forEach(_.ds,(w=>m.persistence.referenceDelegate.removeReference(g,_.targetId,w)))))))))}catch(g){if(!Fc(g))throw g;Te(hy,"Failed to update sequence numbers: "+g)}for(const g of d){const _=g.targetId;if(!g.fromCache){const w=m.Ms.get(_),E=w.snapshotVersion,S=w.withLastLimboFreeSnapshotVersion(E);m.Ms=m.Ms.insert(_,S)}}})(r.localStore,a))}async function f9(n,e){const t=Ke(n);if(!t.currentUser.isEqual(e)){Te(Sy,"User change. New user:",e.toKey());const r=await ST(t.localStore,e);t.currentUser=e,(function(a,o){a.mu.forEach((c=>{c.forEach((u=>{u.reject(new Ae(ue.CANCELLED,o))}))})),a.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Qf(t,r.Ls)}}function d9(n,e){const t=Ke(n),r=t.Au.get(e);if(r&&r.hu)return ft().add(r.key);{let i=ft();const a=t.Iu.get(e);if(!a)return i;for(const o of a){const c=t.Tu.get(o);i=i.unionWith(c.view.nu)}return i}}function UT(n){const e=Ke(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=LT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=d9.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=o9.bind(null,e),e.Pu.H_=KM.bind(null,e.eventManager),e.Pu.yu=WM.bind(null,e.eventManager),e}function h9(n){const e=Ke(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=l9.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=c9.bind(null,e),e}class S0{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=sp(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return vM(this.persistence,new pM,e.initialUser,this.serializer)}Cu(e){return new bT(fy.mi,this.serializer)}Du(e){return new bM}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}S0.provider={build:()=>new S0};class p9 extends S0{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){mt(this.persistence.referenceDelegate instanceof A0,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new J5(r,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?jr.withCacheSize(this.cacheSizeBytes):jr.DEFAULT;return new bT((r=>A0.mi(r,t)),this.serializer)}}class nv{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>dA(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=f9.bind(null,this.syncEngine),await $M(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new YM})()}createDatastore(e){const t=sp(e.databaseInfo.databaseId),r=(function(a){return new NM(a)})(e.databaseInfo);return(function(a,o,c,u){return new MM(a,o,c,u)})(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return(function(r,i,a,o,c){return new kM(r,i,a,o,c)})(this.localStore,this.datastore,e.asyncQueue,(t=>dA(this.syncEngine,t,0)),(function(){return sA.v()?new sA:new SM})())}createSyncEngine(e,t){return(function(i,a,o,c,u,d,m){const g=new e9(i,a,o,c,u,d);return m&&(g.gu=!0),g})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const r=Ke(t);Te(sl,"RemoteStore shutting down."),r.Ea.add(5),await Wf(r),r.Aa.shutdown(),r.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}nv.provider={build:()=>new nv};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ty{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):is("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m9{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new Ae(ue.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await(async function(i,a){const o=Ke(i),c={documents:a.map((g=>E0(o.serializer,g)))},u=await o.Ho("BatchGetDocuments",o.serializer.databaseId,Ut.emptyPath(),c,a.length),d=new Map;u.forEach((g=>{const _=j5(o.serializer,g);d.set(_.key.toString(),_)}));const m=[];return a.forEach((g=>{const _=d.get(g.toString());mt(!!_,55234,{key:g}),m.push(_)})),m})(this.datastore,e);return t.forEach((r=>this.recordVersion(r))),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new ip(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((t=>{e.delete(t.key.toString())})),e.forEach(((t,r)=>{const i=Pe.fromPath(r);this.mutations.push(new uT(i,this.precondition(i)))})),await(async function(r,i){const a=Ke(r),o={writes:i.map((c=>_T(a.serializer,c)))};await a.Go("Commit",a.serializer.databaseId,Ut.emptyPath(),o)})(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Ve(50498,{Gu:e.constructor.name});t=Ge.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Ae(ue.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Ge.min())?lr.exists(!1):lr.updateTime(t):lr.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Ge.min()))throw new Ae(ue.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return lr.updateTime(t)}return lr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g9{constructor(e,t,r,i,a){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=a,this.zu=r.maxAttempts,this.M_=new py(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Ju()}Ju(){this.M_.p_((async()=>{const e=new m9(this.datastore),t=this.Hu(e);t&&t.then((r=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(r)})).catch((i=>{this.Yu(i)}))))})).catch((r=>{this.Yu(r)}))}))}Hu(e){try{const t=this.updateFunction(e);return!Xf(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Yu(e){this.zu>0&&this.Zu(e)?(this.zu-=1,this.asyncQueue.enqueueAndForget((()=>(this.Ju(),Promise.resolve())))):this.deferred.reject(e)}Zu(e){if(e?.name==="FirebaseError"){const t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!fT(t)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fo="FirestoreClient";class v9{constructor(e,t,r,i,a){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=gr.UNAUTHENTICATED,this.clientId=ey.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,(async o=>{Te(fo,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(r,(o=>(Te(fo,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ea;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=xy(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function z1(n,e){n.asyncQueue.verifyOperationInProgress(),Te(fo,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener((async i=>{r.isEqual(i)||(await ST(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function pA(n,e){n.asyncQueue.verifyOperationInProgress();const t=await y9(n);Te(fo,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((r=>lA(e.remoteStore,r))),n.setAppCheckTokenChangeListener(((r,i)=>lA(e.remoteStore,i))),n._onlineComponents=e}async function y9(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Te(fo,"Using user provided OfflineComponentProvider");try{await z1(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(i){return i.name==="FirebaseError"?i.code===ue.FAILED_PRECONDITION||i.code===ue.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(t))throw t;Ac("Error using user provided cache. Falling back to memory cache: "+t),await z1(n,new S0)}}else Te(fo,"Using default OfflineComponentProvider"),await z1(n,new p9(void 0));return n._offlineComponents}async function Iy(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Te(fo,"Using user provided OnlineComponentProvider"),await pA(n,n._uninitializedComponentsProvider._online)):(Te(fo,"Using default OnlineComponentProvider"),await pA(n,new nv))),n._onlineComponents}function _9(n){return Iy(n).then((e=>e.syncEngine))}function x9(n){return Iy(n).then((e=>e.datastore))}async function C0(n){const e=await Iy(n),t=e.eventManager;return t.onListen=t9.bind(null,e.syncEngine),t.onUnlisten=i9.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=n9.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=a9.bind(null,e.syncEngine),t}function w9(n,e,t={}){const r=new Ea;return n.asyncQueue.enqueueAndForget((async()=>(function(a,o,c,u,d){const m=new Ty({next:_=>{m.Nu(),o.enqueueAndForget((()=>Ey(a,g)));const w=_.docs.has(c);!w&&_.fromCache?d.reject(new Ae(ue.UNAVAILABLE,"Failed to get document because the client is offline.")):w&&_.fromCache&&u&&u.source==="server"?d.reject(new Ae(ue.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(_)},error:_=>d.reject(_)}),g=new by(J0(c.path),m,{includeMetadataChanges:!0,qa:!0});return wy(a,g)})(await C0(n),n.asyncQueue,e,t,r))),r.promise}function E9(n,e,t={}){const r=new Ea;return n.asyncQueue.enqueueAndForget((async()=>(function(a,o,c,u,d){const m=new Ty({next:_=>{m.Nu(),o.enqueueAndForget((()=>Ey(a,g))),_.fromCache&&u.source==="server"?d.reject(new Ae(ue.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(_)},error:_=>d.reject(_)}),g=new by(c,m,{includeMetadataChanges:!0,qa:!0});return wy(a,g)})(await C0(n),n.asyncQueue,e,t,r))),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zT(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mA=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HT="firestore.googleapis.com",gA=!0;class vA{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Ae(ue.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=HT,this.ssl=gA}else this.host=e.host,this.ssl=e.ssl??gA;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=AT;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Q5)throw new Ae(ue.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}kD("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=zT(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new Ae(ue.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new Ae(ue.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new Ae(ue.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class cp{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new vA({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ae(ue.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ae(ue.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new vA(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new SD;switch(r.type){case"firstParty":return new ND(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Ae(ue.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const r=mA.get(t);r&&(Te("ComponentProvider","Removing Datastore"),mA.delete(t),r.terminate())})(this),Promise.resolve()}}function A9(n,e,t,r={}){n=xi(n,cp);const i=kc(e),a=n._getSettings(),o={...a,emulatorOptions:n._getEmulatorOptions()},c=`${e}:${t}`;i&&(jS(`https://${c}`),LS("Firestore",!0)),a.host!==HT&&a.host!==c&&Ac("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u={...a,host:c,ssl:i,emulatorOptions:r};if(!nl(u,o)&&(n._setSettings(u),r.mockUserToken)){let d,m;if(typeof r.mockUserToken=="string")d=r.mockUserToken,m=gr.MOCK_USER;else{d=jR(r.mockUserToken,n._app?.options.projectId);const g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new Ae(ue.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new gr(g)}n._authCredentials=new CD(new DC(d,m))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class os{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new os(this.firestore,e,this._query)}}class fn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new eo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new fn(this.firestore,e,this._key)}toJSON(){return{type:fn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if($f(t,fn._jsonSchema))return new fn(e,r||null,new Pe(Ut.fromString(t.referencePath)))}}fn._jsonSchemaVersion="firestore/documentReference/1.0",fn._jsonSchema={type:In("string",fn._jsonSchemaVersion),referencePath:In("string")};class eo extends os{constructor(e,t,r){super(e,t,J0(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new fn(this.firestore,null,new Pe(e))}withConverter(e){return new eo(this.firestore,e,this._path)}}function up(n,e,...t){if(n=vn(n),MC("collection","path",e),n instanceof cp){const r=Ut.fromString(e,...t);return RE(r),new eo(n,null,r)}{if(!(n instanceof fn||n instanceof eo))throw new Ae(ue.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Ut.fromString(e,...t));return RE(r),new eo(n.firestore,null,r)}}function zi(n,e,...t){if(n=vn(n),arguments.length===1&&(e=ey.newId()),MC("doc","path",e),n instanceof cp){const r=Ut.fromString(e,...t);return NE(r),new fn(n,null,new Pe(r))}{if(!(n instanceof fn||n instanceof eo))throw new Ae(ue.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Ut.fromString(e,...t));return NE(r),new fn(n.firestore,n instanceof eo?n.converter:null,new Pe(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yA="AsyncQueue";class _A{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new py(this,"async_queue_retry"),this._c=()=>{const r=U1();r&&Te(yA,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const t=U1();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=U1();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Ea;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Fc(e))throw e;Te(yA,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,is("INTERNAL UNHANDLED ERROR: ",xA(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const i=_y.createAndSchedule(this,e,t,r,(a=>this.hc(a)));return this.tc.push(i),i}uc(){this.nc&&Ve(47125,{Pc:xA(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,r)=>t.targetTimeMs-r.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function xA(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wA(n){return(function(t,r){if(typeof t!="object"||t===null)return!1;const i=t;for(const a of r)if(a in i&&typeof i[a]=="function")return!0;return!1})(n,["next","error","complete"])}class ho extends cp{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new _A,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new _A(e),this._firestoreClient=void 0,await e}}}function b9(n,e){const t=typeof n=="object"?n:US(),r=typeof n=="string"?n:g0,i=Gv(t,"firestore").getImmediate({identifier:r});if(!i._initialized){const a=PR("firestore");a&&A9(i,...a)}return i}function Hc(n){if(n._terminated)throw new Ae(ue.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||S9(n),n._firestoreClient}function S9(n){const e=n._freezeSettings(),t=(function(i,a,o,c){return new XD(i,a,o,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,zT(c.experimentalLongPollingOptions),c.useFetchStreams,c.isUsingEmulator)})(n._databaseId,n._app?.options.appId||"",n._persistenceKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new v9(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(i){const a=i?._online.build();return{_offline:i?._offline.build(a),_online:a}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ei{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ei(ur.fromBase64String(e))}catch(t){throw new Ae(ue.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new ei(ur.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:ei._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if($f(e,ei._jsonSchema))return ei.fromBase64String(e.bytes)}}ei._jsonSchemaVersion="firestore/bytes/1.0",ei._jsonSchema={type:In("string",ei._jsonSchemaVersion),bytes:In("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zf{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Ae(ue.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new or(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fp{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ba{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ae(ue.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ae(ue.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ut(this._lat,e._lat)||ut(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:ba._jsonSchemaVersion}}static fromJSON(e){if($f(e,ba._jsonSchema))return new ba(e.latitude,e.longitude)}}ba._jsonSchemaVersion="firestore/geoPoint/1.0",ba._jsonSchema={type:In("string",ba._jsonSchemaVersion),latitude:In("number"),longitude:In("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sa{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==i[a])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Sa._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if($f(e,Sa._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Sa(e.vectorValues);throw new Ae(ue.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Sa._jsonSchemaVersion="firestore/vectorValue/1.0",Sa._jsonSchema={type:In("string",Sa._jsonSchemaVersion),vectorValues:In("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C9=/^__.*__$/;class T9{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new vo(e,this.data,this.fieldMask,t,this.fieldTransforms):new Yf(e,this.data,t,this.fieldTransforms)}}class GT{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new vo(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function qT(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ve(40011,{Ac:n})}}class Ny{constructor(e,t,r,i,a,o){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,a===void 0&&this.Rc(),this.fieldTransforms=a||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Ny({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.gc(e),r}yc(e){const t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return T0(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(qT(this.Ac)&&C9.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class I9{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||sp(e)}Cc(e,t,r,i=!1){return new Ny({Ac:e,methodName:t,Dc:r,path:or.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function dp(n){const e=n._freezeSettings(),t=sp(n._databaseId);return new I9(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Ry(n,e,t,r,i,a={}){const o=n.Cc(a.merge||a.mergeFields?2:0,e,t,i);Dy("Data must be an object, but it was:",o,r);const c=YT(r,o);let u,d;if(a.merge)u=new ti(o.fieldMask),d=o.fieldTransforms;else if(a.mergeFields){const m=[];for(const g of a.mergeFields){const _=rv(e,g,t);if(!o.contains(_))throw new Ae(ue.INVALID_ARGUMENT,`Field '${_}' is specified in your field mask but missing from your input data.`);WT(m,_)||m.push(_)}u=new ti(m),d=o.fieldTransforms.filter((g=>u.covers(g.field)))}else u=null,d=o.fieldTransforms;return new T9(new Cr(c),u,d)}class hp extends fp{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof hp}}class Oy extends fp{_toFieldTransform(e){return new _5(e.path,new Df)}isEqual(e){return e instanceof Oy}}function $T(n,e,t,r){const i=n.Cc(1,e,t);Dy("Data must be an object, but it was:",i,r);const a=[],o=Cr.empty();go(r,((u,d)=>{const m=My(e,u,t);d=vn(d);const g=i.yc(m);if(d instanceof hp)a.push(m);else{const _=Jf(d,g);_!=null&&(a.push(m),o.set(m,_))}}));const c=new ti(a);return new GT(o,c,i.fieldTransforms)}function XT(n,e,t,r,i,a){const o=n.Cc(1,e,t),c=[rv(e,r,t)],u=[i];if(a.length%2!=0)throw new Ae(ue.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let _=0;_<a.length;_+=2)c.push(rv(e,a[_])),u.push(a[_+1]);const d=[],m=Cr.empty();for(let _=c.length-1;_>=0;--_)if(!WT(d,c[_])){const w=c[_];let E=u[_];E=vn(E);const S=o.yc(w);if(E instanceof hp)d.push(w);else{const D=Jf(E,S);D!=null&&(d.push(w),m.set(w,D))}}const g=new ti(d);return new GT(m,g,o.fieldTransforms)}function N9(n,e,t,r=!1){return Jf(t,n.Cc(r?4:3,e))}function Jf(n,e){if(KT(n=vn(n)))return Dy("Unsupported field value:",e,n),YT(n,e);if(n instanceof fp)return(function(r,i){if(!qT(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(i);a&&i.fieldTransforms.push(a)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,i){const a=[];let o=0;for(const c of r){let u=Jf(c,i.wc(o));u==null&&(u={nullValue:"NULL_VALUE"}),a.push(u),o++}return{arrayValue:{values:a}}})(n,e)}return(function(r,i){if((r=vn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return g5(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=Pt.fromDate(r);return{timestampValue:w0(i.serializer,a)}}if(r instanceof Pt){const a=new Pt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:w0(i.serializer,a)}}if(r instanceof ba)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof ei)return{bytesValue:mT(i.serializer,r._byteString)};if(r instanceof fn){const a=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(a))throw i.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:cy(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Sa)return(function(o,c){return{mapValue:{fields:{[zC]:{stringValue:HC},[v0]:{arrayValue:{values:o.toArray().map((d=>{if(typeof d!="number")throw c.Sc("VectorValues must only contain numeric values.");return sy(c.serializer,d)}))}}}}}})(r,i);throw i.Sc(`Unsupported field value: ${W0(r)}`)})(n,e)}function YT(n,e){const t={};return jC(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):go(n,((r,i)=>{const a=Jf(i,e.mc(r));a!=null&&(t[r]=a)})),{mapValue:{fields:t}}}function KT(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Pt||n instanceof ba||n instanceof ei||n instanceof fn||n instanceof fp||n instanceof Sa)}function Dy(n,e,t){if(!KT(t)||!PC(t)){const r=W0(t);throw r==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+r)}}function rv(n,e,t){if((e=vn(e))instanceof Zf)return e._internalPath;if(typeof e=="string")return My(n,e);throw T0("Field path arguments must be of type string or ",n,!1,void 0,t)}const R9=new RegExp("[~\\*/\\[\\]]");function My(n,e,t){if(e.search(R9)>=0)throw T0(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Zf(...e.split("."))._internalPath}catch{throw T0(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function T0(n,e,t,r,i){const a=r&&!r.isEmpty(),o=i!==void 0;let c=`Function ${e}() called with invalid data`;t&&(c+=" (via `toFirestore()`)"),c+=". ";let u="";return(a||o)&&(u+=" (found",a&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new Ae(ue.INVALID_ARGUMENT,c+n+u)}function WT(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I0{constructor(e,t,r,i,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new fn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new O9(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(pp("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class O9 extends I0{data(){return super.data()}}function pp(n,e){return typeof e=="string"?My(n,e):e instanceof Zf?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QT(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new Ae(ue.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Py{}class ky extends Py{}function mp(n,e,...t){let r=[];e instanceof Py&&r.push(e),r=r.concat(t),(function(a){const o=a.filter((u=>u instanceof jy)).length,c=a.filter((u=>u instanceof gp)).length;if(o>1||o>0&&c>0)throw new Ae(ue.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const i of r)n=i._apply(n);return n}class gp extends ky{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new gp(e,t,r)}_apply(e){const t=this._parse(e);return JT(e._query,t),new os(e.firestore,e.converter,Yg(e._query,t))}_parse(e){const t=dp(e.firestore);return(function(a,o,c,u,d,m,g){let _;if(d.isKeyField()){if(m==="array-contains"||m==="array-contains-any")throw new Ae(ue.INVALID_ARGUMENT,`Invalid Query. You can't perform '${m}' queries on documentId().`);if(m==="in"||m==="not-in"){AA(g,m);const E=[];for(const S of g)E.push(EA(u,a,S));_={arrayValue:{values:E}}}else _=EA(u,a,g)}else m!=="in"&&m!=="not-in"&&m!=="array-contains-any"||AA(g,m),_=N9(c,o,g,m==="in"||m==="not-in");return Cn.create(d,m,_)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function N0(n,e,t){const r=e,i=pp("where",n);return gp._create(i,r,t)}class jy extends Py{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new jy(e,t)}_parse(e){const t=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return t.length===1?t[0]:qi.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(i,a){let o=i;const c=a.getFlattenedFilters();for(const u of c)JT(o,u),o=Yg(o,u)})(e._query,t),new os(e.firestore,e.converter,Yg(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Ly extends ky{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Ly(e,t)}_apply(e){const t=(function(i,a,o){if(i.startAt!==null)throw new Ae(ue.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new Ae(ue.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Of(a,o)})(e._query,this._field,this._direction);return new os(e.firestore,e.converter,(function(i,a){const o=i.explicitOrderBy.concat([a]);return new Uc(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)})(e._query,t))}}function vp(n,e="asc"){const t=e,r=pp("orderBy",n);return Ly._create(r,t)}class By extends ky{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new By(e,t,r)}_apply(e){return new os(e.firestore,e.converter,_0(e._query,this._limit,this._limitType))}}function ZT(n){return jD("limit",n),By._create("limit",n,"F")}function EA(n,e,t){if(typeof(t=vn(t))=="string"){if(t==="")throw new Ae(ue.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!QC(e)&&t.indexOf("/")!==-1)throw new Ae(ue.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Ut.fromString(t));if(!Pe.isDocumentKey(r))throw new Ae(ue.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return BE(n,new Pe(r))}if(t instanceof fn)return BE(n,t._key);throw new Ae(ue.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${W0(t)}.`)}function AA(n,e){if(!Array.isArray(n)||n.length===0)throw new Ae(ue.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function JT(n,e){const t=(function(i,a){for(const o of i)for(const c of o.getFlattenedFilters())if(a.indexOf(c.op)>=0)return c.op;return null})(n.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new Ae(ue.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Ae(ue.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class e3{convertValue(e,t="none"){switch(co(e)){case 0:return null;case 1:return e.booleanValue;case 2:return gn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(lo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ve(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return go(e,((i,a)=>{r[i]=this.convertValue(a,t)})),r}convertVectorValue(e){const t=e.fields?.[v0].arrayValue?.values?.map((r=>gn(r.doubleValue)));return new Sa(t)}convertGeoPoint(e){return new ba(gn(e.latitude),gn(e.longitude))}convertArray(e,t){return(e.values||[]).map((r=>this.convertValue(r,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Z0(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(If(e));default:return null}}convertTimestamp(e){const t=oo(e);return new Pt(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Ut.fromString(e);mt(ET(r),9688,{name:e});const i=new Nf(r.get(1),r.get(3)),a=new Pe(r.popFirst(5));return i.isEqual(t)||is(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vy(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class D9 extends e3{constructor(e){super(),this.firestore=e}convertBytes(e){return new ei(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new fn(this.firestore,null,t)}}class uc{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class to extends I0{constructor(e,t,r,i,a,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new e0(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(pp("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Ae(ue.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=to._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}to._jsonSchemaVersion="firestore/documentSnapshot/1.0",to._jsonSchema={type:In("string",to._jsonSchemaVersion),bundleSource:In("string","DocumentSnapshot"),bundleName:In("string"),bundle:In("string")};class e0 extends to{data(e={}){return super.data(e)}}class el{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new uc(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((r=>{e.call(t,new e0(this._firestore,this._userDataWriter,r.key,r,new uc(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ae(ue.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(i,a){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map((c=>{const u=new e0(i._firestore,i._userDataWriter,c.doc.key,c.doc,new uc(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);return c.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}}))}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter((c=>a||c.type!==3)).map((c=>{const u=new e0(i._firestore,i._userDataWriter,c.doc.key,c.doc,new uc(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);let d=-1,m=-1;return c.type!==0&&(d=o.indexOf(c.doc.key),o=o.delete(c.doc.key)),c.type!==1&&(o=o.add(c.doc),m=o.indexOf(c.doc.key)),{type:M9(c.type),doc:u,oldIndex:d,newIndex:m}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Ae(ue.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=el._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=ey.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],i=[];return this.docs.forEach((a=>{a._document!==null&&(t.push(a._document),r.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),i.push(a.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function M9(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ve(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fy(n){n=xi(n,fn);const e=xi(n.firestore,ho);return w9(Hc(e),n._key).then((t=>r3(e,n,t)))}el._jsonSchemaVersion="firestore/querySnapshot/1.0",el._jsonSchema={type:In("string",el._jsonSchemaVersion),bundleSource:In("string","QuerySnapshot"),bundleName:In("string"),bundle:In("string")};class yp extends e3{constructor(e){super(),this.firestore=e}convertBytes(e){return new ei(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new fn(this.firestore,null,t)}}function t3(n){n=xi(n,os);const e=xi(n.firestore,ho),t=Hc(e),r=new yp(e);return QT(n._query),E9(t,n._query).then((i=>new el(e,r,n,i)))}function P9(n,e,t){n=xi(n,fn);const r=xi(n.firestore,ho),i=Vy(n.converter,e,t);return n3(r,[Ry(dp(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,lr.none())])}function _p(n,...e){n=vn(n);let t={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||wA(e[r])||(t=e[r++]);const i={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(wA(e[r])){const u=e[r];e[r]=u.next?.bind(u),e[r+1]=u.error?.bind(u),e[r+2]=u.complete?.bind(u)}let a,o,c;if(n instanceof fn)o=xi(n.firestore,ho),c=J0(n._key.path),a={next:u=>{e[r]&&e[r](r3(o,n,u))},error:e[r+1],complete:e[r+2]};else{const u=xi(n,os);o=xi(u.firestore,ho),c=u._query;const d=new yp(o);a={next:m=>{e[r]&&e[r](new el(o,d,u,m))},error:e[r+1],complete:e[r+2]},QT(n._query)}return(function(d,m,g,_){const w=new Ty(_),E=new by(m,w,g);return d.asyncQueue.enqueueAndForget((async()=>wy(await C0(d),E))),()=>{w.Nu(),d.asyncQueue.enqueueAndForget((async()=>Ey(await C0(d),E)))}})(Hc(o),c,i,a)}function n3(n,e){return(function(r,i){const a=new Ea;return r.asyncQueue.enqueueAndForget((async()=>s9(await _9(r),i,a))),a.promise})(Hc(n),e)}function r3(n,e,t){const r=t.docs.get(e._key),i=new yp(n);return new to(n,i,e._key,r,new uc(t.hasPendingWrites,t.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k9={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j9{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=dp(e)}set(e,t,r){this._verifyNotCommitted();const i=Ks(e,this._firestore),a=Vy(i.converter,t,r),o=Ry(this._dataReader,"WriteBatch.set",i._key,a,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,lr.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const a=Ks(e,this._firestore);let o;return o=typeof(t=vn(t))=="string"||t instanceof Zf?XT(this._dataReader,"WriteBatch.update",a._key,t,r,i):$T(this._dataReader,"WriteBatch.update",a._key,t),this._mutations.push(o.toMutation(a._key,lr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Ks(e,this._firestore);return this._mutations=this._mutations.concat(new ip(t._key,lr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ae(ue.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Ks(n,e){if((n=vn(n)).firestore!==e)throw new Ae(ue.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L9{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=dp(e)}get(e){const t=Ks(e,this._firestore),r=new D9(this._firestore);return this._transaction.lookup([t._key]).then((i=>{if(!i||i.length!==1)return Ve(24041);const a=i[0];if(a.isFoundDocument())return new I0(this._firestore,r,a.key,a,t.converter);if(a.isNoDocument())return new I0(this._firestore,r,t._key,null,t.converter);throw Ve(18433,{doc:a})}))}set(e,t,r){const i=Ks(e,this._firestore),a=Vy(i.converter,t,r),o=Ry(this._dataReader,"Transaction.set",i._key,a,i.converter!==null,r);return this._transaction.set(i._key,o),this}update(e,t,r,...i){const a=Ks(e,this._firestore);let o;return o=typeof(t=vn(t))=="string"||t instanceof Zf?XT(this._dataReader,"Transaction.update",a._key,t,r,i):$T(this._dataReader,"Transaction.update",a._key,t),this._transaction.update(a._key,o),this}delete(e){const t=Ks(e,this._firestore);return this._transaction.delete(t._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B9 extends L9{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Ks(e,this._firestore),r=new yp(this._firestore);return super.get(e).then((i=>new to(this._firestore,r,t._key,i._document,new uc(!1,!1),t.converter)))}}function V9(n,e,t){n=xi(n,ho);const r={...k9,...t};return(function(a){if(a.maxAttempts<1)throw new Ae(ue.INVALID_ARGUMENT,"Max attempts must be at least 1")})(r),(function(a,o,c){const u=new Ea;return a.asyncQueue.enqueueAndForget((async()=>{const d=await x9(a);new g9(a.asyncQueue,d,c,o,u).ju()})),u.promise})(Hc(n),(i=>e(new B9(n,i))),r)}function kf(){return new Oy("serverTimestamp")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i3(n){return Hc(n=xi(n,ho)),new j9(n,(e=>n3(n,e)))}(function(e,t=!0){(function(i){Bc=i})(jc),Ec(new rl("firestore",((r,{instanceIdentifier:i,options:a})=>{const o=r.getProvider("app").getImmediate(),c=new ho(new TD(r.getProvider("auth-internal")),new RD(o,r.getProvider("app-check-internal")),(function(d,m){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new Ae(ue.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Nf(d.options.projectId,m)})(o,i),o);return a={useFetchStreams:t,...a},c._setSettings(a),c}),"PUBLIC").setMultipleInstances(!0)),Zs(SE,CE,e),Zs(SE,CE,"esm2020")})();const iv={apiKey:"AIzaSyAaAHxUEayt4oM_GKqv-Bl9ryEhQ0SdC2k",authDomain:"pfes2025-ichinikai-order.firebaseapp.com",projectId:"pfes2025-ichinikai-order",storageBucket:"pfes2025-ichinikai-order.firebasestorage.app",messagingSenderId:"1047778685960",appId:"1:1047778685960:web:61b378c5e254840d914dbd"};function F9(n){const e=Object.entries(n).filter(([,t])=>typeof t>"u").map(([t])=>t);if(e.length>0)throw new Error(`Firebase: ${e.join(", ")}. Vite.env`)}const a3=Object.entries(iv).filter(([,n])=>!n||n==="undefined").map(([n])=>n),s3=a3.length>0,Uy=s3,Ka=Uy;let H1=null,av,sv;if(!Uy)F9(iv),H1=eE().length?eE()[0]:FS(iv),av=wD(H1),sv=b9(H1);else{const n=s3?`Firebase: ${a3.join(", ")}`:"";console.info(`Firebase initialization skipped: ${n}`),av={currentUser:null},sv={}}const Fi=av,Xn=sv;async function o3(){if(!Uy){if(!Fi.currentUser){await(await fC(Fi)).user.getIdToken(!0);return}Fi.currentUser.isAnonymous&&await Fi.currentUser.getIdToken(!0)}}const l3=P.createContext(void 0),G1=["admin","kitchen","staff"];function U9(n){const e=[];return n.admin&&e.push("admin"),n.kitchen&&e.push("kitchen"),n.staff&&e.push("staff"),e}function z9({children:n}){const[e,t]=P.useState(()=>Ka?"signed-in":"loading"),[r,i]=P.useState(null),[a,o]=P.useState(()=>Ka?G1:[]),[c,u]=P.useState(null);P.useEffect(()=>{if(Ka){t("signed-in"),i(null),o(G1),u(null);return}const w=pC(Fi,async E=>{if(!E){i(null),o([]),t("signed-out");return}try{const S=await E.getIdTokenResult(!0),D=U9(S.claims);i(E),o(D),t("signed-in"),u(null)}catch(S){console.error("Failed to refresh token claims",S),i(E),o([]),t("signed-in"),u("")}});return()=>w()},[]);const d=P.useCallback(async({email:w,password:E})=>{if(u(null),Ka){t("signed-in"),i(null),o(G1);return}try{await oO(Fi,w,E)}catch(S){console.error("Failed to sign in",S);const D=S instanceof Error?S.message:"";throw u(D),S}},[]),m=P.useCallback(async()=>{if(u(null),Ka){t("signed-out"),i(null),o([]);return}await uO(Fi)},[]),g=P.useCallback(w=>{const E=Array.isArray(w)?w:[w];return E.length===0||Ka?!0:E.some(S=>a.includes(S))},[a]),_=P.useMemo(()=>({status:e,user:r,roles:a,error:c,signIn:d,signOut:m,hasRole:g}),[c,g,a,d,m,e,r]);return p.jsx(l3.Provider,{value:_,children:n})}function xp(){const n=P.useContext(l3);if(!n)throw new Error("useAuth must be used within an AuthProvider");return n}const Qt=n=>{const e="/Ichinikai/",t=e.endsWith("/")?e:`${e}/`,r=n.replace(/^\/+/u,"");return`${t}${r}`},H9={wheat:{key:"wheat",label:"",icon:Qt("WebP/Allergie_icons/Wheat_result.webp")},egg:{key:"egg",label:"",icon:Qt("WebP/Allergie_icons/Egg_result.webp")},soy:{key:"soy",label:"",icon:Qt("WebP/Allergie_icons/Soy_result.webp")},milk:{key:"milk",label:"",icon:Qt("WebP/Allergie_icons/Milk_result.webp")},beef:{key:"beef",label:"",icon:Qt("WebP/Allergie_icons/Beef_result.webp")},chicken:{key:"chicken",label:"",icon:Qt("WebP/Allergie_icons/Chicken_result.webp")},pork:{key:"pork",label:"",icon:Qt("WebP/Allergie_icons/Pork_result.webp")},gelatin:{key:"gelatin",label:"",icon:Qt("WebP/Allergie_icons/Gelatin_result.webp")}},Nc={potaufeu:{key:"potaufeu",label:"",description:"",price:250,image:Qt("WebP/menu/soup/potfeu.webp"),allergens:["egg","milk","soy","gelatin","pork","beef","chicken"],soldOut:!1},plain:{key:"plain",label:"()",description:"",price:200,image:Qt("WebP/menu/bread/Suger_result.webp"),allergens:["wheat","egg","milk","soy"],soldOut:!1},cocoa:{key:"cocoa",label:"()",description:"",price:200,image:Qt("WebP/menu/bread/Cocoa_result.webp"),allergens:["wheat","egg","milk","soy"],soldOut:!1},kinako:{key:"kinako",label:"()",description:"",price:200,image:Qt("WebP/menu/bread/Kinako_result.webp"),allergens:["wheat","egg","milk","soy"],soldOut:!1},garlic:{key:"garlic",label:"()",description:"",price:200,image:Qt("WebP/menu/bread/Garlic_result.webp"),allergens:["wheat","egg","milk","soy"],soldOut:!1},drink_hojicha:{key:"drink_hojicha",label:"()",description:"",price:120,image:Qt("WebP/menu/drink/ocha.webp"),allergens:[],soldOut:!1},drink_cocoa:{key:"drink_cocoa",label:"()",description:"",price:150,image:Qt("WebP/menu/drink/cocoa.webp"),allergens:["milk"],soldOut:!1},drink_coffee:{key:"drink_coffee",label:"()",description:"",price:120,image:Qt("WebP/menu/drink/coffee.webp"),allergens:["milk"],soldOut:!1},drink_milkcoffee:{key:"drink_milkcoffee",label:"()",description:"",price:150,image:Qt("WebP/menu/drink/milk_coffee.webp"),allergens:["milk"],soldOut:!1},minestrone:{key:"minestrone",label:"",description:" ",price:250,image:Qt("WebP/menu/soup/minestrone_result.webp"),allergens:["wheat","milk","soy","pork","beef","chicken"],soldOut:!1},strawberry:{key:"strawberry",label:"()3",description:" ",price:250,image:Qt("WebP/menu/smore/Strawberry_result.webp"),allergens:["wheat","soy","gelatin"],soldOut:!1},blueberry:{key:"blueberry",label:"()3",description:" ",price:250,image:Qt("WebP/menu/smore/Blueberry_result.webp"),allergens:["wheat","soy","gelatin"],soldOut:!1},chocolate:{key:"chocolate",label:"()2",description:"",price:250,image:Qt("WebP/menu/smore/Chocolate_result.webp"),allergens:["wheat","milk","soy","gelatin"],soldOut:!1},honey:{key:"honey",label:"()2",description:" ",price:250,image:Qt("WebP/menu/smore/Honey_result.webp"),allergens:["wheat","milk","soy","gelatin"],soldOut:!1}},G9={potaufeu:"",minestrone:"",plain:"",cocoa:"",kinako:"",garlic:"",strawberry:"",blueberry:"",chocolate:"",honey:"",drink_hojicha:"",drink_cocoa:"()",drink_coffee:"",drink_milkcoffee:""},of=(n,e)=>G9[n]??e,q9={day12:["potaufeu","plain","cocoa","kinako","garlic","drink_hojicha","drink_cocoa","drink_coffee","drink_milkcoffee"],day34:["minestrone","strawberry","blueberry","chocolate","honey","drink_hojicha","drink_cocoa","drink_coffee","drink_milkcoffee"]},$9="day12",X9=n=>n==="day12"||n==="day34",q1="day34".toLowerCase(),c3=q1&&X9(q1)?q1:$9,Y9=c3,u3=q9[c3],Gc=u3.reduce((n,e)=>(n[e]=Nc[e],n),{});u3.map(n=>Nc[n]);const K9=["","",""],f3="order-app.menu-overrides.v1",W9="config",Q9="menuOverrides",d3=Ka;let Yn={};const ov=new Set;let zy;const h3=typeof window<"u",wc=Ka?null:zi(Xn,W9,Q9),p3=(n,e)=>{if(typeof n!="string")return;const t=n.trim();if(!(!t||t===e))return t},m3=(n,e)=>{if(!Number.isFinite(n))return;const t=Math.max(0,Math.round(n));if(t!==e)return t},g3=(n,e)=>{if(typeof n=="boolean")return n===e?void 0:n},lv=n=>!n||typeof n!="object"?{}:Object.entries(n).reduce((e,[t,r])=>{if(!v3(t)||!r||typeof r!="object")return e;const i=Gc[t],a=p3(r.label,i.label),o=m3(r.price,i.price),c=g3(r.soldOut,i.soldOut);if(!a&&!Number.isFinite(o)&&typeof c!="boolean")return e;const u={};return a&&(u.label=a),Number.isFinite(o)&&(u.price=o),typeof c=="boolean"&&(u.soldOut=c),e[t]=u,e},{}),Z9=()=>{if(!h3)return{};try{const n=window.localStorage.getItem(f3);if(!n)return{};const e=JSON.parse(n);return lv(e)}catch(n){return console.warn("[menuConfigStore] Failed to load overrides",n),{}}},J9=n=>{if(h3)try{const e=JSON.stringify(n);window.localStorage.setItem(f3,e)}catch(e){console.warn("[menuConfigStore] Failed to persist overrides",e)}},v3=n=>n in Gc,y3=()=>{const n=Object.entries(Gc).reduce((e,[t,r])=>{const i=t,a=Yn[i]??{},o=a.label??r.label,c=a.price??r.price,u=a.soldOut??r.soldOut;return e[i]={...r,label:o,price:c,soldOut:u},e},{});return{map:n,list:Object.values(n)}},lf=(n,e)=>{const t=Object.keys(n),r=Object.keys(e);return t.length!==r.length?!1:t.every(i=>{if(!v3(i))return!1;const a=n[i],o=e[i];return!a&&!o?!0:!a||!o?!1:a.label===o.label&&a.price===o.price&&a.soldOut===o.soldOut})},fc=(n,e={})=>{const{persist:t=!0}=e;Yn=n,zy=y3(),d3&&t&&J9(n),ov.forEach(r=>r())},e7=async n=>{wc&&await P9(wc,{overrides:n,updatedAt:kf(),updatedBy:Fi.currentUser?.uid??null},{merge:!0})},R0=async n=>{if(lf(n,Yn))return;const e=Yn;if(fc(n),wc)try{await e7(n)}catch(t){throw console.error("[menuConfigStore] Failed to sync overrides to Firestore",t),fc(e,{persist:!1}),t}},t7=()=>{wc&&((async()=>{try{await o3();const n=await Fy(wc);if(!n.exists()){lf(Yn,{})||fc({},{persist:!1});return}const e=n.data(),t=lv(e?.overrides);lf(t,Yn)||fc(t,{persist:!1})}catch(n){console.error("[menuConfigStore] Failed to load menu overrides from Firestore",n)}})(),_p(wc,n=>{if(n.metadata.hasPendingWrites)return;if(!n.exists()){lf(Yn,{})||fc({},{persist:!1});return}const e=n.data(),t=lv(e?.overrides);lf(t,Yn)||fc(t,{persist:!1})},n=>{console.error("[menuConfigStore] Failed to subscribe to menu overrides",n)}))},yo=()=>zy,n7=n=>(ov.add(n),()=>{ov.delete(n)}),r7=async(n,e)=>{const t=Gc[n];if(!t)throw new Error(`Unknown menu item key: ${n}`);const i={...Yn[n]??{}};let a=!1;if(Object.prototype.hasOwnProperty.call(e,"label")){const m=p3(e.label,t.label);typeof m=="string"?i.label!==m&&(i.label=m,a=!0):i.label!==void 0&&(delete i.label,a=!0)}if(Object.prototype.hasOwnProperty.call(e,"price")){const m=m3(e.price,t.price);typeof m=="number"?i.price!==m&&(i.price=m,a=!0):i.price!==void 0&&(delete i.price,a=!0)}if(Object.prototype.hasOwnProperty.call(e,"soldOut")){const m=g3(e.soldOut,t.soldOut);typeof m=="boolean"?i.soldOut!==m&&(i.soldOut=m,a=!0):i.soldOut!==void 0&&(delete i.soldOut,a=!0)}if(!a)return;if(Object.keys(i).length===0){if(!Yn[n])return;const m={...Yn};delete m[n],await R0(m);return}const d={...Yn,[n]:i};await R0(d)},i7=async n=>{if(!Yn[n])return;const e={...Yn};delete e[n],await R0(e)},a7=async()=>{Object.keys(Yn).length!==0&&await R0({})},s7=()=>Gc,o7=()=>Yn;d3?Yn=Z9():(Yn={},t7());zy=y3();const l7={day12:[{key:"potaufeu",label:"",icon:"",itemKeys:["potaufeu"]},{key:"friedBread",label:"",icon:"",itemKeys:["plain","cocoa","kinako","garlic"]}],day34:[{key:"potaufeu",label:"",icon:"",itemKeys:["minestrone"]},{key:"friedBread",label:"",icon:"",itemKeys:["strawberry","blueberry","chocolate","honey"]}]},Hi=l7[Y9],c7=new Map(Hi.flatMap(n=>n.itemKeys.map(e=>[e,n.key])));function u7(n){return c7.get(n)??null}function f7(n){const e=Hi.reduce((t,r)=>(t[r.key]=0,t),{potaufeu:0,friedBread:0});return Hi.reduce((t,r)=>(t[r.key]=r.itemKeys.reduce((i,a)=>i+(n[a]??0),0),t),e)}function Fr(n,e){const t=f7(n);return{potaufeu:e?.potaufeu??t.potaufeu===0,friedBread:e?.friedBread??t.friedBread===0}}function Hy(n){return Fr(n,null)}function d7(n,e){const t=Fr(n,e);return{potaufeu:t.potaufeu?"ready":"pending",friedBread:t.friedBread?"ready":"pending"}}function _3(n,e){const t=Hi.find(r=>r.key===e);return t?t.itemKeys.reduce((r,i)=>r+(n[i]??0),0):0}function h7(n,e){return Hi.every(t=>t.itemKeys.reduce((i,a)=>i+(n[a]??0),0)===0?!0:e[t.key]==="ready")}function p7(n){const e=d=>d.toString().padStart(2,"0"),t=n.getFullYear(),r=e(n.getMonth()+1),i=e(n.getDate()),a=e(n.getHours()),o=e(n.getMinutes()),c=e(n.getSeconds()),u=Array.from({length:4},()=>String.fromCharCode(65+Math.floor(Math.random()*26))).join("");return`ORD-${t}${r}${i}${a}${o}${c}-${u}`}function m7(){const n="ABCDEFGHJKLMNPQRSTUVWXYZ23456789";return Array.from({length:16},()=>n.charAt(Math.floor(Math.random()*n.length))).join("")}function g7(n){return Object.entries(n).reduce((e,[t,r])=>{const i=Number.isFinite(r)?Math.max(0,Math.floor(r)):0;return i>0&&(e[t]=i),e},{})}function v7(n){const{map:e}=yo();return Object.entries(n).reduce((t,[r,i])=>{const o=e[r]?.price??0;return t+o*i},0)}function Ai(n){return n?n.toDate():void 0}function fl(n){if(!n||typeof n!="object")return;const e=n,t={};if(e.voucherUsage&&typeof e.voucherUsage=="object"){const r=e.voucherUsage,i=typeof r.count50=="number"?Math.max(0,Math.floor(r.count50)):0,a=typeof r.count100=="number"?Math.max(0,Math.floor(r.count100)):0;(i>0||a>0)&&(t.voucherUsage={count50:i,count100:a})}return e.jankenOutcome&&(e.jankenOutcome==="none"||e.jankenOutcome==="plus"||e.jankenOutcome==="minus")&&e.jankenOutcome!=="none"&&(t.jankenOutcome=e.jankenOutcome),Object.keys(t).length>0?t:void 0}const y7=20;async function _7(n){await o3();const e=g7(n);if(!Object.values(e).some(E=>E>0))throw new Error("1");const r=new Date,i=p7(r),a=m7(),o=v7(e),c="",u="",d=Hy(e),m=zi(Xn,"orders",i),g=zi(Xn,"orderLookup",a),_=zi(Xn,"metadata","counters"),w=await V9(Xn,async E=>{const C=((await E.get(_)).data()?.lastCallNumber??0)+1;E.set(_,{lastCallNumber:C,updatedAt:kf()},{merge:!0});const k=kf();return E.set(m,{orderId:i,ticket:a,callNumber:C,createdBy:Fi.currentUser?.uid??null,items:e,total:o,payment:c,progress:u,plating:d,createdAt:k,updatedAt:k}),E.set(g,{orderId:i,ticket:a,callNumber:C,items:e,total:o,payment:c,progress:u,plating:d,createdAt:k,updatedAt:k}),C});return{orderId:i,ticket:a,callNumber:w,total:o,items:e,payment:c,progress:u,plating:d,createdAt:r}}async function x7(n){const e=n.trim().toUpperCase();if(!e)return null;const t=zi(Xn,"orderLookup",e),r=await Fy(t);if(!r.exists())return null;const i=r.data(),a=i.items??{},o=Fr(a,i.plating),c=fl(i.adjustments);return{orderId:i.orderId,ticket:e,callNumber:i.callNumber??0,total:i.total,items:a,payment:i.payment,progress:i.progress,plating:o,adjustments:c,updatedAt:Ai(i.updatedAt),createdAt:Ai(i.createdAt)}}async function w7(n){const e=zi(Xn,"orders",n),t=await Fy(e);if(!t.exists())return null;const r=t.data(),i=r.items??{},a=fl(r.adjustments);return{orderId:r.orderId,ticket:r.ticket,callNumber:r.callNumber??0,items:i,total:r.total,payment:r.payment,progress:r.progress,plating:Fr(i,r.plating),adjustments:a,createdAt:Ai(r.createdAt),updatedAt:Ai(r.updatedAt),createdBy:r.createdBy??null}}async function E7(n,e,t){const r=i3(Xn),i=zi(Xn,"orders",n),a=zi(Xn,"orderLookup",e),o={payment:t.payment,progress:t.progress,updatedAt:kf()};t.adjustments&&(o.adjustments=t.adjustments),r.update(i,o),r.update(a,o),await r.commit()}async function A7(n,e,t){const r=Object.entries(t).filter(([,u])=>typeof u=="boolean");if(r.length===0)return;const i=i3(Xn),a=zi(Xn,"orders",n),o=zi(Xn,"orderLookup",e),c={updatedAt:kf()};r.forEach(([u,d])=>{c[`plating.${u}`]=d}),i.update(a,c),i.update(o,c),await i.commit()}async function b7(n={}){const{start:e,end:t}=n,r=up(Xn,"orders"),i=[vp("createdAt","asc")];return e&&i.push(N0("createdAt",">=",Pt.fromDate(e))),t&&i.push(N0("createdAt","<",Pt.fromDate(t))),(await t3(mp(r,...i))).docs.map(o=>{const c=o.data(),u=c.items??{},d=fl(c.adjustments);return{orderId:c.orderId,ticket:c.ticket,callNumber:c.callNumber??0,items:u,total:c.total,payment:c.payment,progress:c.progress,plating:Fr(u,c.plating),adjustments:d,createdAt:Ai(c.createdAt),updatedAt:Ai(c.updatedAt),createdBy:c.createdBy??null}})}function S7(n,e={}){const t=up(Xn,"orders"),r=mp(t,vp("createdAt","desc"),ZT(y7)),i=new Set;let a=!1;return _p(r,c=>{if(!a){c.docs.forEach(u=>i.add(u.id)),a=!0;return}c.docChanges().filter(u=>u.type==="added").forEach(u=>{const d=u.doc.id;if(i.has(d))return;i.add(d);const m=u.doc.data(),g=m.items??{},_=fl(m.adjustments);n({orderId:m.orderId,ticket:m.ticket,callNumber:m.callNumber??0,items:g,total:m.total,payment:m.payment,progress:m.progress,plating:Fr(g,m.plating),adjustments:_,createdAt:Ai(m.createdAt),updatedAt:Ai(m.updatedAt),createdBy:m.createdBy??null})})},c=>{console.error("Failed to subscribe new orders",c),e.onError?.(c)})}function C7(n,e={}){const t=up(Xn,"orders"),r=[vp("createdAt","desc")],i=e.start;i&&!Number.isNaN(i.getTime())&&r.push(N0("createdAt",">=",Pt.fromDate(i)));const a=e.end;a&&!Number.isNaN(a.getTime())&&r.push(N0("createdAt","<",Pt.fromDate(a)));const o=e.limit;typeof o=="number"&&Number.isFinite(o)&&o>0&&r.push(ZT(Math.floor(o)));const c=mp(t,...r);return _p(c,d=>{const m=d.docs.map(g=>{const _=g.data(),w=_.items??{},E=fl(_.adjustments);return{orderId:_.orderId??g.id,ticket:_.ticket,callNumber:_.callNumber??0,items:w,total:_.total,payment:_.payment,progress:_.progress,plating:Fr(w,_.plating),adjustments:E,createdAt:Ai(_.createdAt),updatedAt:Ai(_.updatedAt),createdBy:_.createdBy??null}});n(m)},d=>{console.error("Failed to subscribe orders collection",d),e.onError?.(d)})}function T7(n,e,t={}){const r=n.trim().toUpperCase();if(!r)return e(null),()=>{};const i=zi(Xn,"orderLookup",r);return _p(i,o=>{if(!o.exists()){e(null);return}const c=o.data(),u=c.items??{},d=fl(c.adjustments);e({orderId:c.orderId??r,ticket:r,callNumber:c.callNumber??0,total:c.total,items:u,payment:c.payment,progress:c.progress,plating:Fr(u,c.plating),adjustments:d,updatedAt:Ai(c.updatedAt),createdAt:Ai(c.createdAt)})},o=>{console.error("Failed to subscribe order lookup",o),t.onError?.(o)})}function I7(n){if(n===null||typeof n>"u")return"";const e=String(n);return e.includes(",")||e.includes('"')||e.includes(`
`)?`"${e.replace(/"/g,'""')}"`:e}async function N7(){const n=up(Xn,"orders"),e=await t3(mp(n,vp("createdAt","asc"))),{map:t}=yo(),r=50,i=Object.keys(Nc),a=["orderId","callNumber","ticket","payment","progress","createdAt","updatedAt",...i.map(g=>t[g]?.label??Nc[g]?.label??g),"voucherCount50","voucherCount100","voucherTotal","jankenOutcome","jankenAdjustment","orderTotal"],o=[];e.docs.forEach(g=>{const _=g.data(),w=_.items,E=fl(_.adjustments),S=_.orderId,D=_.callNumber??"",C=_.ticket,k=_.payment,V=_.progress,U=_.createdAt?.toDate()?.toISOString()??"",q=_.updatedAt?.toDate()?.toISOString()??"",$=_.total,M=E?.voucherUsage?.count50??0,b=E?.voucherUsage?.count100??0,N=M*50+b*100,I=E?.jankenOutcome??"none",R=I==="plus"?r:I==="minus"?-r:0,L=i.map(j=>w[j]??0);o.push([S,D,C,k,V,U,q,...L,M,b,N,I,R,$].map(I7).join(","))});const c=[a.join(","),...o].join(`
`),u=new Blob([c],{type:"text/csv"}),d=URL.createObjectURL(u),m=document.createElement("a");m.href=d,m.download=`orders-${new Date().toISOString().slice(0,10)}.csv`,m.click(),URL.revokeObjectURL(d)}const x3="mock-orders-state-v1",cv=new Set,uv=new Set,Qo=new Map;function R7(n){cv.forEach(e=>{try{e({...n})}catch(t){console.error("",t)}})}function O7(){const n=Ui.orders.map(e=>w3(e));uv.forEach(e=>{try{e(n)}catch(t){console.error("",t)}})}function w3(n){return{...n,items:{...n.items},plating:Fr(n.items,n.plating),createdAt:n.createdAt?new Date(n.createdAt):void 0,updatedAt:n.updatedAt?new Date(n.updatedAt):void 0}}function E3(n){return{orderId:n.orderId,ticket:n.ticket,callNumber:n.callNumber??0,items:{...n.items},total:n.total,payment:n.payment,progress:n.progress,plating:Fr(n.items,n.plating),createdAt:n.createdAt,updatedAt:n.updatedAt}}function A3(n){const e=n.trim().toUpperCase();if(!e)return;const t=Qo.get(e);if(!t||t.size===0)return;const r=qy(e),i=r?E3(r):null;t.forEach(a=>{try{a(i)}catch(o){console.error("",o)}})}function D7(){Array.from(Qo.keys()).forEach(n=>A3(n))}function M7(n){if(!n||typeof n!="object")return xf;const e=n,t=(e.orders??[]).map(i=>{const a=i.createdAt?new Date(i.createdAt):void 0,o=i.updatedAt?new Date(i.updatedAt):void 0;return{...i,createdAt:a,updatedAt:o}});if(t.length===0)return xf;const r=Number.isFinite(e.lastCallNumber)?Number(e.lastCallNumber):Math.max(0,...t.map(i=>i.callNumber??0));return{orders:t,lastCallNumber:r}}function P7(){if(typeof window>"u")return xf;try{const n=window.localStorage.getItem(x3);return n?M7(JSON.parse(n)):xf}catch(n){return console.warn("",n),xf}}function k7(n){if(!(typeof window>"u"))try{const e={orders:n.orders.map(t=>({...t,createdAt:t.createdAt?.toISOString()??null,updatedAt:t.updatedAt?.toISOString()??null})),lastCallNumber:n.lastCallNumber};window.localStorage.setItem(x3,JSON.stringify(e))}catch(e){console.warn("",e)}}function b3(n){return Object.entries(n).reduce((e,[t,r])=>{const i=Number.isFinite(r)?Math.max(0,Math.floor(r)):0;return i>0&&(e[t]=i),e},{})}function S3(n){const{map:e}=yo();return Object.entries(n).reduce((t,[r,i])=>{const o=e[r]?.price??0;return t+o*i},0)}function j7(n){const e=d=>d.toString().padStart(2,"0"),t=n.getFullYear(),r=e(n.getMonth()+1),i=e(n.getDate()),a=e(n.getHours()),o=e(n.getMinutes()),c=e(n.getSeconds()),u=Array.from({length:4},()=>String.fromCharCode(65+Math.floor(Math.random()*26))).join("");return`ORD-${t}${r}${i}${a}${o}${c}-${u}`}function L7(){const n="ABCDEFGHJKLMNPQRSTUVWXYZ23456789";return Array.from({length:16},()=>n.charAt(Math.floor(Math.random()*n.length))).join("")}const $1=b3({plain:2,cocoa:1}),xf={orders:[{orderId:"ORD-20251009090000-DEMO",ticket:"MOCKTICKET123456",callNumber:1,items:$1,total:S3($1),payment:"",progress:"",plating:Hy($1),createdAt:new Date,updatedAt:new Date,createdBy:"mock-user"}],lastCallNumber:1};let Ui=P7();function Gy(n){const e={orders:Ui.orders.map(t=>({...t})),lastCallNumber:Ui.lastCallNumber};n(e),Ui=e,k7(Ui),O7(),D7()}function qy(n){const e=n.trim().toUpperCase();return e?Ui.orders.find(t=>t.ticket===e)??null:null}async function B7(n){const e=b3(n);if(!Object.values(e).some(g=>g>0))throw new Error("1");const r=new Date,i=j7(r),a=L7(),o=S3(e),c="",u="",d=Ui.lastCallNumber+1,m={orderId:i,ticket:a,callNumber:d,items:e,total:o,payment:c,progress:u,plating:Hy(e),createdAt:r,updatedAt:r,createdBy:"mock-user"};return Gy(g=>{g.orders.push(m),g.lastCallNumber=d}),R7(m),A3(m.ticket),{orderId:i,ticket:a,callNumber:d,total:o,items:e,payment:c,progress:u,plating:m.plating,createdAt:r}}async function V7(n){const e=qy(n);return e?{orderId:e.orderId,ticket:e.ticket,callNumber:e.callNumber,items:e.items,total:e.total,payment:e.payment,progress:e.progress,plating:Fr(e.items,e.plating),updatedAt:e.updatedAt,createdAt:e.createdAt}:null}async function F7(n){const e=n.trim().toUpperCase();if(!e)return null;const t=Ui.orders.find(r=>r.orderId===e);return t?{...t}:null}async function U7(n,e,t){Gy(r=>{r.orders=r.orders.map(i=>i.orderId!==n&&i.ticket!==e?i:{...i,payment:t.payment,progress:t.progress,updatedAt:new Date})})}async function z7(n,e,t){const r=Object.entries(t).filter(([,i])=>typeof i=="boolean");r.length!==0&&Gy(i=>{i.orders=i.orders.map(a=>{if(a.orderId!==n&&a.ticket!==e)return a;const o=Fr(a.items,{...a.plating,...Object.fromEntries(r)});return{...a,plating:o,updatedAt:new Date}})})}async function H7(n={}){const{start:e,end:t}=n,r=e?.getTime(),i=t?.getTime();return Ui.orders.filter(a=>{const o=a.createdAt??a.updatedAt;if(!o)return!r&&!i;const c=o.getTime();return!(typeof r=="number"&&c<r||typeof i=="number"&&c>=i)}).sort((a,o)=>{const c=(a.createdAt??a.updatedAt??new Date(0)).getTime(),u=(o.createdAt??o.updatedAt??new Date(0)).getTime();return c-u}).map(a=>({...a}))}function G7(n){if(n===null||typeof n>"u")return"";const e=String(n);return e.includes(",")||e.includes('"')||e.includes(`
`)?`"${e.replace(/"/g,'""')}"`:e}async function q7(){const{map:n}=yo(),e=50,t=Object.keys(Nc),r=["orderId","callNumber","ticket","payment","progress","createdAt","updatedAt",...t.map(u=>n[u]?.label??Nc[u]?.label??u),"voucherCount50","voucherCount100","voucherTotal","jankenOutcome","jankenAdjustment","orderTotal"],i=[];Ui.orders.forEach(u=>{const d=u.adjustments,m=u.orderId,g=u.callNumber??"",_=u.ticket,w=u.payment,E=u.progress,S=u.createdAt?.toISOString()??"",D=u.updatedAt?.toISOString()??"",C=u.total,k=d?.voucherUsage?.count50??0,V=d?.voucherUsage?.count100??0,U=k*50+V*100,q=d?.jankenOutcome??"none",$=q==="plus"?e:q==="minus"?-e:0,M=t.map(b=>u.items[b]??0);i.push([m,g,_,w,E,S,D,...M,k,V,U,q,$,C].map(G7).join(","))});const a=new Blob([[r.join(","),...i].join(`
`)],{type:"text/csv"}),o=URL.createObjectURL(a),c=document.createElement("a");c.href=o,c.download=`orders-mock-${new Date().toISOString().slice(0,10)}.csv`,c.click(),URL.revokeObjectURL(o)}function $7(n){return cv.add(n),()=>{cv.delete(n)}}function X7(n,e={}){const t=e.start?.getTime(),r=e.end?.getTime(),i=e.limit&&Number.isFinite(e.limit)&&e.limit>0?Math.floor(e.limit):null,a=c=>{const d=c.filter(g=>{const _=g.createdAt??g.updatedAt;if(!_)return!(t!=null||r!=null);const w=_.getTime();return!(Number.isNaN(w)||t!=null&&w<t||r!=null&&w>=r)}).sort((g,_)=>{const w=g.createdAt?.getTime()??0;return(_.createdAt?.getTime()??0)-w});return(i?d.slice(0,i):d).map(g=>({...g,items:{...g.items},plating:Fr(g.items,g.plating),createdAt:g.createdAt?new Date(g.createdAt):void 0,updatedAt:g.updatedAt?new Date(g.updatedAt):void 0}))},o=c=>{try{n(a(c))}catch(u){console.error("",u)}};return uv.add(o),o(Ui.orders.map(c=>w3(c))),()=>{uv.delete(o)}}function Y7(n,e){const t=n.trim().toUpperCase();if(!t)return e(null),()=>{};const r=Qo.get(t)??new Set;Qo.has(t)||Qo.set(t,r),r.add(e);const i=qy(t);return e(i?E3(i):null),()=>{const a=Qo.get(t);a&&(a.delete(e),a.size===0&&Qo.delete(t))}}const K7=["AIzaSyAaAHxUEayt4oM_GKqv-Bl9ryEhQ0SdC2k","pfes2025-ichinikai-order.firebaseapp.com","pfes2025-ichinikai-order","pfes2025-ichinikai-order.firebasestorage.app","1047778685960","1:1047778685960:web:61b378c5e254840d914dbd"],W7=K7.some(n=>!n||n==="undefined"),Na=W7,Q7=Na?B7:_7,Z7=Na?V7:x7,J7=Na?F7:w7,eP=Na?U7:E7,tP=Na?z7:A7,nP=Na?q7:N7,rP=Na?H7:b7,iP=Na?$7:S7,aP=Na?X7:C7,sP=Na?Y7:T7,oP=Q7,bA=Z7,SA=J7,ya=eP,X1=tP,C3=nP,lP=rP,cP=iP,uP=aP,fP=sP;function qc(n={}){const[e,t]=P.useState([]),[r,i]=P.useState(!0),[a,o]=P.useState(null),{autoStopWhen:c,...u}=n,d=u.start?.getTime(),m=typeof d=="number"&&!Number.isNaN(d)?d:null,g=u.end?.getTime(),_=typeof g=="number"&&!Number.isNaN(g)?g:null,w=typeof u.limit=="number"&&Number.isFinite(u.limit)&&u.limit>0?Math.floor(u.limit):null;return P.useEffect(()=>{let E=!0,S=!1,D=null;const C=()=>{D&&(D(),D=null)};i(!0),o(null);const k={...m!=null&&u.start?{start:u.start}:{},..._!=null&&u.end?{end:u.end}:{},...w!=null?{limit:w}:{},onError:V=>{E&&(console.error("",V),o(V instanceof Error?V:new Error("")),i(!1))}};return D=uP(V=>{E&&(t(V),i(!1),!S&&c?.(V)&&(S=!0,E=!1,C()))},k),()=>{E=!1,C()}},[c,_,w,m]),{orders:e,loading:r,error:a}}function dl(){const n=P.useSyncExternalStore(n7,yo);return P.useMemo(()=>({menuItems:n.list,menuItemMap:n.map,baseMenuItemMap:s7(),overrides:o7(),updateMenuItem:r7,resetMenuItem:i7,resetAllMenuItems:a7}),[n])}const dP={soup:"",friedBread:"",smore:"",drink:""},hP=["soup","friedBread","smore","drink"],pP={potaufeu:"soup",minestrone:"soup",plain:"friedBread",cocoa:"friedBread",kinako:"friedBread",garlic:"friedBread",strawberry:"smore",blueberry:"smore",chocolate:"smore",honey:"smore",drink_hojicha:"drink",drink_cocoa:"drink",drink_coffee:"drink",drink_milkcoffee:"drink"},mP=[{value:"today",label:""},{value:"yesterday",label:""},{value:"7days",label:"7"},{value:"custom",label:""}],Dh=n=>{const e=n.getFullYear(),t=String(n.getMonth()+1).padStart(2,"0"),r=String(n.getDate()).padStart(2,"0");return`${e}-${t}-${r}`},gP=n=>{const e=new Date(n);return e.setHours(0,0,0,0),e},vP=n=>{const e=new Date(n);return e.setHours(23,59,59,999),e},yP=[" 24  CSV ","Google "," 10 "],$o=new Intl.NumberFormat("ja-JP",{style:"currency",currency:"JPY",maximumFractionDigits:0}),ma=new Intl.NumberFormat("ja-JP",{maximumFractionDigits:0});function CA({mode:n="default"}){const[e,t]=P.useState("today"),[r,i]=P.useState(()=>Dh(new Date)),[a,o]=P.useState(()=>Dh(new Date)),{menuItems:c}=dl(),{start:u,end:d}=P.useMemo(()=>{if(e==="custom"){const I=new Date(`${r}T00:00:00`),R=new Date(`${a}T00:00:00`);return{start:gP(I),end:vP(R)}}return _P(e)},[e,r,a]),m=P.useMemo(()=>({start:u,end:d,autoStopWhen:e==="today"?void 0:R=>R.length>0}),[d,u,e]),{orders:g,loading:_,error:w}=qc(m),E=P.useMemo(()=>{const I=Array.from({length:24},(j,W)=>({hour:W,orderCount:0,revenue:0,cumulativeRevenue:0}));if(g.length===0)return I;g.map(j=>({order:j,timestamp:TA(j)})).filter(j=>j.timestamp!=null).sort((j,W)=>j.timestamp.getTime()-W.timestamp.getTime()).forEach(({order:j,timestamp:W})=>{if(j.payment==="")return;const ge=W.getHours();if(ge<0||ge>=I.length)return;const H=Number.isFinite(j.total)?j.total:0;I[ge].orderCount+=1,I[ge].revenue+=H});let L=0;return I.forEach(j=>{L+=j.revenue,j.cumulativeRevenue=L}),I},[g]),S=P.useMemo(()=>{if(g.length===0)return{totalOrders:0,paidOrders:0,totalRevenue:0,averageOrderValue:0};let I=0,R=0,L=0;g.forEach(W=>{if(W.payment==="")return;I+=1,W.payment===""&&(R+=1);const ge=Number.isFinite(W.total)?W.total:0;L+=ge});const j=I>0?L/I:0;return{totalOrders:I,paidOrders:R,totalRevenue:L,averageOrderValue:j}},[g]),D=P.useMemo(()=>E.reduce((I,R)=>Math.max(I,R.revenue),0),[E]),C=P.useMemo(()=>c.map(I=>{const R=of(I.key,I.label),L=Array.from({length:24},()=>({count:0,revenue:0}));let j=0,W=0;g.forEach(G=>{if(G.payment==="")return;const le=TA(G);if(!le)return;const ve=G.items[I.key]??0;if(ve<=0)return;const He=le.getHours();if(He<0||He>=L.length)return;const Y=ve*I.price;L[He].count+=ve,L[He].revenue+=Y,j+=ve,W+=Y});const ge=L.reduce((G,le,ve)=>le.count>G.count?{count:le.count,hour:ve}:G,{count:0,hour:-1}),H=L.map((G,le)=>({hour:le,count:G.count,revenue:G.revenue})).filter(G=>G.count>0);return{key:I.key,label:R,totalCount:j,totalRevenue:W,peakHour:ge.count>0?ge.hour:null,hourlyBreakdown:H}}),[g,c]),k=P.useMemo(()=>C.filter(I=>I.totalCount>0),[C]),V=P.useMemo(()=>new Map(c.map(I=>[I.key,I])),[c]),U=P.useMemo(()=>Array.from({length:24},(I,R)=>{const L=c.map(({key:W})=>{const H=C.find(G=>G.key===W)?.hourlyBreakdown.find(G=>G.hour===R);return{key:W,count:H?.count??0}}),j=L.reduce((W,ge)=>W+ge.count,0);return{hour:R,total:j,segments:L}}),[c,C]),q=P.useMemo(()=>U.filter(I=>I.total>0),[U]),$=P.useMemo(()=>new Map(U.map(I=>[I.hour,I])),[U]),M=P.useMemo(()=>U.reduce((I,R)=>Math.max(I,R.total),0),[U]),b=g.length>0,N=P.useMemo(()=>xP(u,d),[u,d]);return n==="export"?p.jsxs("div",{className:"admin-grid",style:{gap:"28px"},children:[p.jsxs("section",{className:"admin-card",children:[p.jsx("h3",{children:""}),p.jsx("p",{children:" CSV "}),p.jsxs("div",{className:"admin-toolbar",children:[p.jsxs("div",{className:"field",children:[p.jsx("label",{htmlFor:"export-range",children:""}),p.jsxs("select",{id:"export-range",defaultValue:"today",children:[p.jsx("option",{value:"today",children:""}),p.jsx("option",{value:"yesterday",children:""}),p.jsx("option",{value:"week",children:" 7 "}),p.jsx("option",{value:"custom",children:""})]})]}),p.jsxs("div",{className:"field",children:[p.jsx("label",{htmlFor:"export-status",children:""}),p.jsxs("select",{id:"export-status",defaultValue:"all",children:[p.jsx("option",{value:"all",children:""}),p.jsx("option",{value:"open",children:""}),p.jsx("option",{value:"ready",children:""}),p.jsx("option",{value:"closed",children:""})]})]})]}),p.jsx("button",{type:"button",className:"admin-primary-button",style:{width:"fit-content"},children:""})]}),p.jsxs("section",{className:"admin-card",children:[p.jsx("h3",{children:""}),p.jsx("ul",{className:"admin-list",children:yP.map(I=>p.jsx("li",{children:I},I))})]})]}):p.jsxs("div",{className:"admin-grid",style:{gap:"28px"},children:[p.jsxs("section",{className:"admin-card admin-dashboard-controls",children:[p.jsxs("div",{children:[p.jsx("p",{className:"admin-content-overline",children:""}),p.jsx("h3",{children:N})]}),p.jsxs("div",{className:"admin-toolbar",style:{marginBottom:0},children:[p.jsxs("div",{className:"field",children:[p.jsx("label",{htmlFor:"dashboard-range",children:""}),p.jsx("select",{id:"dashboard-range",value:e,onChange:I=>t(I.target.value),children:mP.map(I=>p.jsx("option",{value:I.value,children:I.label},I.value))})]}),e==="custom"&&p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"field",children:[p.jsx("label",{htmlFor:"dashboard-start-date",children:""}),p.jsx("input",{id:"dashboard-start-date",type:"date",value:r,onChange:I=>i(I.target.value),max:Dh(new Date)})]}),p.jsxs("div",{className:"field",children:[p.jsx("label",{htmlFor:"dashboard-end-date",children:""}),p.jsx("input",{id:"dashboard-end-date",type:"date",value:a,onChange:I=>o(I.target.value),min:r,max:Dh(new Date)})]})]})]})]}),_?p.jsx("section",{className:"admin-card admin-empty-state",children:p.jsx("p",{children:""})}):w?p.jsxs("section",{className:"admin-card admin-empty-state",children:[p.jsx("p",{children:""}),p.jsx("small",{children:w.message})]}):p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"admin-grid admin-metric-cards",children:[p.jsxs("article",{className:"admin-card admin-metric-card",children:[p.jsx("p",{className:"admin-content-overline",children:""}),p.jsx("h3",{className:"admin-metric-card-value",children:$o.format(S.totalRevenue)}),p.jsx("p",{className:"admin-metric-card-helper",children:""})]}),p.jsxs("article",{className:"admin-card admin-metric-card",children:[p.jsx("p",{className:"admin-content-overline",children:""}),p.jsxs("h3",{className:"admin-metric-card-value",children:[ma.format(S.totalOrders)," "]}),p.jsxs("p",{className:"admin-metric-card-helper",children:[" ",ma.format(S.paidOrders)," "]})]}),p.jsxs("article",{className:"admin-card admin-metric-card",children:[p.jsx("p",{className:"admin-content-overline",children:""}),p.jsx("h3",{className:"admin-metric-card-value",children:$o.format(S.averageOrderValue||0)}),p.jsx("p",{className:"admin-metric-card-helper",children:""})]})]}),b&&p.jsxs("section",{className:"admin-card admin-product-total-card",children:[p.jsx("header",{className:"admin-card-header",children:p.jsxs("div",{children:[p.jsx("h3",{children:""}),p.jsx("p",{children:""})]})}),k.length>0?p.jsx("div",{className:"admin-product-total-grid",children:k.map(I=>p.jsxs("article",{className:`admin-product-total-item menu-item-${I.key}`,children:[p.jsx("span",{className:"admin-product-total-label",children:I.label}),p.jsxs("span",{className:"admin-product-total-count",children:[ma.format(I.totalCount)," "]}),p.jsx("span",{className:"admin-product-total-revenue",children:$o.format(I.totalRevenue)})]},I.key))}):p.jsx("p",{className:"admin-empty-inline",children:""})]}),p.jsxs("section",{className:"admin-card",children:[p.jsx("header",{className:"admin-card-header",children:p.jsxs("div",{children:[p.jsx("h3",{children:""}),p.jsx("p",{children:" 1 "})]})}),b?p.jsxs("table",{className:"admin-table admin-hourly-table",children:[p.jsx("thead",{children:p.jsxs("tr",{children:[p.jsx("th",{scope:"col",children:""}),p.jsx("th",{scope:"col",children:""}),p.jsx("th",{scope:"col",children:""}),p.jsx("th",{scope:"col",children:""})]})}),p.jsx("tbody",{children:E.map(I=>{const L=$.get(I.hour)?.segments??[],j={soup:0,friedBread:0,smore:0,drink:0};return L.forEach(W=>{if(!W||W.count===0)return;const ge=pP[W.key];j[ge]+=W.count}),p.jsxs("tr",{children:[p.jsx("td",{children:Ph(I.hour)}),p.jsx("td",{children:p.jsxs("div",{className:"admin-hourly-volume",children:[p.jsxs("span",{className:"admin-hourly-volume-count",children:[ma.format(I.orderCount)," "]}),p.jsx("div",{className:"admin-hourly-volume-bar","aria-hidden":I.orderCount===0,children:L.map(W=>{if(!W||W.count===0)return null;const ge=M>0?W.count/M*100:0;if(ge<=0)return null;const H=ge<4?"6px":void 0,G=ge<8,le=V.get(W.key);return p.jsx("span",{className:`admin-product-sales-segment menu-item-${W.key}`,style:{width:`${ge}%`,flexBasis:`${ge}%`,minWidth:H},"data-compact":G?"true":void 0,title:`${of(W.key,le?.label??W.key)}: ${ma.format(W.count)}`,children:p.jsx("span",{className:"admin-product-sales-count",children:W.count})},W.key)})}),p.jsx("div",{className:"admin-hourly-volume-category","aria-hidden":I.orderCount===0,children:hP.map(W=>{const ge=j[W];return p.jsxs("span",{"data-muted":ge===0?"true":void 0,children:[dP[W]," ",ma.format(ge)," "]},W)})})]})}),p.jsxs("td",{children:[$o.format(I.revenue),p.jsx("div",{className:"admin-trend-bar revenue",children:p.jsx("span",{style:{width:`${D>0?I.revenue/D*100:0}%`}})})]}),p.jsx("td",{children:$o.format(I.cumulativeRevenue)})]},I.hour)})})]}):p.jsx("p",{className:"admin-empty-inline",children:""})]}),p.jsxs("section",{className:"admin-card",children:[p.jsx("header",{className:"admin-card-header",children:p.jsxs("div",{children:[p.jsx("h3",{children:""}),p.jsx("p",{children:""})]})}),b?p.jsxs(p.Fragment,{children:[p.jsxs("table",{className:"admin-table admin-product-table",children:[p.jsx("thead",{children:p.jsxs("tr",{children:[p.jsx("th",{scope:"col",children:""}),p.jsx("th",{scope:"col",children:""}),p.jsx("th",{scope:"col",children:""}),p.jsx("th",{scope:"col",children:""})]})}),p.jsx("tbody",{children:C.map(I=>p.jsxs("tr",{className:`menu-item-${I.key}`,children:[p.jsx("td",{className:"admin-product-name",children:I.label}),p.jsxs("td",{children:[ma.format(I.totalCount)," "]}),p.jsx("td",{children:$o.format(I.totalRevenue)}),p.jsx("td",{children:I.peakHour!=null?Ph(I.peakHour):""})]},I.key))})]}),q.length>0&&p.jsxs("div",{className:"admin-product-sales-chart",role:"img","aria-label":"",children:[p.jsxs("div",{className:"admin-product-sales-header",children:[p.jsx("h4",{children:" "}),p.jsx("div",{className:"admin-product-sales-legend","aria-hidden":"true",children:c.map(I=>p.jsxs("span",{className:`admin-product-sales-legend-item menu-item-${I.key}`,children:[p.jsx("span",{className:"admin-product-sales-legend-swatch"}),of(I.key,I.label)]},I.key))})]}),p.jsx("div",{className:"admin-product-sales-rows",children:q.map(I=>p.jsxs("div",{className:"admin-product-sales-row",children:[p.jsx("div",{className:"admin-product-sales-hour",children:Ph(I.hour)}),p.jsx("div",{className:"admin-product-sales-bar","aria-hidden":I.total===0,children:I.segments.map(R=>{if(R.count===0)return null;const L=R.count/I.total*100,j=L<6?"6px":void 0,W=V.get(R.key);return p.jsx("span",{className:`admin-product-sales-segment menu-item-${R.key}`,style:{width:`${L}%`,flexBasis:`${L}%`,minWidth:j},title:`${of(R.key,W?.label??R.key)}: ${ma.format(R.count)}`,children:p.jsx("span",{className:"admin-product-sales-count",children:R.count})},R.key)})}),p.jsxs("div",{className:"admin-product-sales-total",children:[ma.format(I.total)," "]})]},I.hour))})]}),p.jsx("div",{className:"admin-product-breakdown",children:C.every(I=>I.hourlyBreakdown.length===0)?p.jsx("p",{className:"admin-empty-inline",children:""}):C.filter(I=>I.hourlyBreakdown.length>0).map(I=>p.jsxs("details",{className:`admin-product-breakdown-item menu-item-${I.key}`,children:[p.jsxs("summary",{children:[I.label," "]}),p.jsxs("table",{children:[p.jsx("thead",{children:p.jsxs("tr",{children:[p.jsx("th",{scope:"col",children:""}),p.jsx("th",{scope:"col",children:""}),p.jsx("th",{scope:"col",children:""})]})}),p.jsx("tbody",{children:I.hourlyBreakdown.map(R=>p.jsxs("tr",{children:[p.jsx("td",{children:Ph(R.hour)}),p.jsxs("td",{children:[ma.format(R.count)," "]}),p.jsx("td",{children:$o.format(R.revenue)})]},`${I.key}-${R.hour}`))})]})]},I.key))})]}):p.jsx("p",{className:"admin-empty-inline",children:""})]})]})]})}function _P(n){const e=new Date,t=new Date(e.getFullYear(),e.getMonth(),e.getDate());return n==="today"?{start:t,end:Mh(t,1)}:n==="yesterday"?{start:Mh(t,-1),end:t}:{start:Mh(t,-6),end:Mh(t,1)}}function Mh(n,e){const t=new Date(n);return t.setDate(t.getDate()+e),t}function TA(n){const e=n.createdAt,t=n.updatedAt;return e instanceof Date?e:typeof e=="string"?new Date(e):t instanceof Date?t:typeof t=="string"?new Date(t):null}function Ph(n){const e=`${n.toString().padStart(2,"0")}:00`,t=n===23?"23:59":`${(n+1).toString().padStart(2,"0")}:00`;return`${e} - ${t}`}function xP(n,e){const t=new Intl.DateTimeFormat("ja-JP",{month:"numeric",day:"numeric",hour:"2-digit",minute:"2-digit"}),r=t.format(n),i=new Date(e.getTime()-1),a=t.format(i);return`${r}  ${a}`}const T3=P.createContext(void 0);function wP({children:n}){const[e,t]=P.useState(()=>typeof window>"u"?"ja":window.localStorage.getItem("app.language")==="en"?"en":"ja"),r=P.useCallback(o=>{t(o),typeof window<"u"&&window.localStorage.setItem("app.language",o)},[]),i=P.useCallback(()=>{r(e==="ja"?"en":"ja")},[e,r]),a=P.useMemo(()=>({language:e,setLanguage:r,toggleLanguage:i}),[e,r,i]);return p.jsx(T3.Provider,{value:a,children:n})}function Ki(){const n=P.useContext(T3);if(!n)throw new Error("useLanguage must be used within a LanguageProvider");return n}const I3={potaufeu:{label:"Pot-au-feu",description:"Packed with fresh ginger to warm you from the inside out. Take a sip and let this hearty soup comfort you."},plain:{label:"Fried Bread (Plain)",description:"The timeless classic. Get ready to fall into the world of fried breadsimple, irresistible, and unforgettable."},cocoa:{label:"Fried Bread (Cocoa)",description:"Fried bread meets cocoatheres no way this could go wrong. One bite and youll be hooked."},kinako:{label:"Fried Bread (Kinako)",description:"A nostalgic taste straight from Japanese school lunches. The beloved kinako fried bread is back."},garlic:{label:"Fried Bread (Garlic)",description:"Who said fried bread has to be sweet? This savory twist will change the way you think about it."},drink_hojicha:{label:"Roasted Green Tea (Hot)",description:"Fragrant hojicha to warm you up."},drink_cocoa:{label:"Hot Cocoa",description:"Sweet and velvety cocoa."},drink_coffee:{label:"Hot Coffee",description:"Aromatic freshly brewed coffee."},drink_milkcoffee:{label:"Iced Coffee Milk",description:"Creamy coffee with plenty of milk, served cold."},minestrone:{label:"Minestrone",description:"A hearty Italian classic, brimming with vegetables and warmth. Enjoy the full goodness of tomatoesnatures own beauty elixir."},strawberry:{label:"S'more (Strawberry Jam)",description:"Love probably tastes like thissweet, slightly tart, and a little bit nostalgic."},blueberry:{label:"S'more (Blueberry Jam)",description:"A refreshing mix of sweetness and tanginess to wake you upperfect for beating that post-lunch slump."},chocolate:{label:"S'more (Chocolate)",description:"When in doubt, go with chocolate. In life and in smores, chocolate never fails."},honey:{label:"S'more (Honey)",description:"A sweet little rescue for your tired self. Even the bees would be jealous."}},EP={ja:{wheat:"",egg:"",soy:"",milk:"",beef:"",chicken:"",pork:"",gelatin:""},en:{wheat:"Wheat",egg:"Egg",soy:"Soy",milk:"Milk",beef:"Beef",chicken:"Chicken",pork:"Pork",gelatin:"Gelatin"}},AP={ja:{:"",:"",:""},en:{:"Unpaid",:"Paid",:"Cancelled"}},bP={ja:{:"",:`
OK`,:""},en:{:"order confirmed",:"Ready for pickup",:"Picked up"}},fv={ja:{received:"",ready:`
OK`,completed:""},en:{received:"order confirmed",ready:"Ready for pickup",completed:"Picked up"}},ss={ja:{languageToggle:{label:"",japanese:"",english:"English",buttonText:" / English",buttonAria:n=>`${n==="ja"?"":"English"}`},header:{orderAction:"",orderActionAria:"",characterAlt:"",titleAlt:""},auth:{signingIn:"",error:""},errors:{EMPTY_CART:"1",ORDER_FAILED:""},orderInput:{title:"",descriptionLead:"",descriptionFollow:`
 
 `,totalLabel:"",totalNote:"",reviewButton:"",resetButton:"",categories:{food:"",drink:""}},quantityStepper:{decrease:"1",increase:"1"},menu:{imageAlt:n=>`${n}`,imageNote:"",allergensLabel:n=>`${n}`,quantityLabel:n=>`${n}`,soldOutBadge:"",soldOutMessage:""},orderReview:{title:"",descriptionLead:"",descriptionFollow:"",tableHeaders:{item:"",quantity:"",subtotal:""},totalLabel:"",confirmButton:"",changeButton:"",confirming:"",urlCopyModal:{title:"",description:"URL",copyButton:"URL"}},wasteGuide:{title:"",description:"",placeholder:"",confirm:""},orderComplete:{title:"",description:{default:"QR",progressOnly:"QR"},readyTitle:"",readyPreviewTag:"",readyInstructionWithCallNumber:n=>` ${n} `,readyInstructionWait:"",statusHeading:"",metaHeading:"",meta:{total:"",payment:"",progress:"",orderedAt:""},qrAlt:"QR",qrCaption:"QR",identifiers:{orderId:"",ticket:""},itemsHeading:"",itemsTable:{item:"",quantity:"",price:"",subtotal:"",total:""},actions:{copyLink:"",copyCode:"",startNew:""},ticketSearch:{regionLabel:"",title:"",description:"",label:"",placeholder:": AB12CD34EF56GH78",button:"",error:""},loadingTitle:"",loadingDescription:"",loadErrorTitle:"",loadErrorDescription:"",loadErrorAction:"",inviteTitle:"",inviteDescription:"",paymentState:{complete:"",paid:"",ready:"",unpaid:""},thankYouTitle:"",thankYouMessage:"",thankYouImageAlt:"Thank you ",thankYouCloseButton:"",progressSteps:fv.ja,refresh:{refreshing:"",cooldown:n=>` ${n} `,action:"",error:""},callNumberLabel:"",callNumberPending:""},orderProgress:{title:"",description:""},status:{title:"",descriptionLead:"",descriptionFollow:"",historyTitle:"",historyClear:"",historyDescription:"",historyCallNumberLabel:"",historyOrderIdLabel:"",historyTotalLabel:"",historyPendingCallNumber:" / ",historyClearConfirm:""},ticketNotFound:{title:"",descriptionKnown:n=>`${n}`,descriptionUnknown:"",retry:"",newOrder:""},notFound:{title:"",description:"URL"},copy:{progressCodeSuccess:"",progressCodeFailure:"",progressLinkSuccess:"",progressLinkFailure:""}},en:{languageToggle:{label:"Language",japanese:"",english:"English",buttonText:" / English",buttonAria:n=>`Change language to ${n==="ja"?"Japanese":"English"}`},header:{orderAction:"Order now",orderActionAria:"Order actions",characterAlt:"Character illustration",titleAlt:"Header title illustration"},auth:{signingIn:"Signing in anonymously...",error:"Anonymous sign-in failed. Please try again later."},errors:{EMPTY_CART:"Please add at least one item to your order.",ORDER_FAILED:"We could not process your order. Please check your connection and try again."},orderInput:{title:"Place your order",descriptionLead:"[Allergy Information]",descriptionFollow:"We display major allergy information for the food provided at this booth. However, there is a possibility of shared or mixed cooking environments with food provided at other booths within the school festival. Therefore, we cannot guarantee that the food is completely free of allergens. If you have severe allergies, please consult with our staff in advance.",totalLabel:"Total",totalNote:"Tax included. Please pay at pickup.",reviewButton:"Review order",resetButton:"Reset selections",categories:{food:"Food",drink:"Drink"}},quantityStepper:{decrease:"Decrease quantity by 1",increase:"Increase quantity by 1"},menu:{imageAlt:n=>`Image of ${n}`,imageNote:"Product image for illustration purposes only. Actual product may vary.",allergensLabel:n=>`Allergen information for ${n}`,quantityLabel:n=>`Quantity for ${n}`,soldOutBadge:"Sold out",soldOutMessage:"Currently unavailable."},orderReview:{title:"Review your order",descriptionLead:"Check the quantities and total. When ready, place your order.",descriptionFollow:"Need changes? Go back to adjust the items.",tableHeaders:{item:"Item",quantity:"Qty",subtotal:"Subtotal"},totalLabel:"Total",confirmButton:"Place order",changeButton:"Modify quantities",confirming:"Submitting...",urlCopyModal:{title:"Order confirmed",description:"Please copy the progress check URL",copyButton:"Copy URL and close"}},wasteGuide:{title:"Waste sorting reminder",description:"Please separate your trash and dispose of paper plates and disposable chopsticks in the trash can located near the entrance of the Faculty of Education building (indicated by a blue square)!! We appreciate your cooperation.",placeholder:"Place the waste sorting guide image here.",confirm:"I have read the sorting rules"},orderComplete:{title:"Order confirmed!",description:{default:"Show the call number and QR code at pickup. Keep this screen until you receive your order.",progressOnly:"Show the call number or the QR code at pickup. Keep this screen handy until completion."},readyTitle:"Your order is ready",readyPreviewTag:"Preview (remove later)",readyInstructionWithCallNumber:n=>`Please check call number ${n} and follow staff instructions to receive your order.`,readyInstructionWait:"Please wait nearby until staff call your number.",statusHeading:"Current status",metaHeading:"Order details",meta:{total:"Total",payment:"Payment",progress:"Status",orderedAt:"Order time"},qrAlt:"QR code for progress tracking",qrCaption:"Scan this code to open the progress page. Show it at the register or when staff ask.",identifiers:{orderId:"Order ID",ticket:"Progress code"},itemsHeading:"Items",itemsTable:{item:"Item",quantity:"Qty",price:"Unit price",subtotal:"Subtotal",total:"Total"},actions:{copyLink:"Copy progress link",copyCode:"Copy progress code",startNew:"Start a new order"},ticketSearch:{regionLabel:"Search by progress code",title:"Show by progress code",description:"Enter the customer progress code to view the status here.",label:"Progress code",placeholder:"e.g., AB12CD34EF56GH78",button:"Show status",error:"Enter a progress code."},loadingTitle:"Loading your order...",loadingDescription:"Please wait a moment.",loadErrorTitle:"We could not load the order",loadErrorDescription:"We could not retrieve your order. Please try again later.",loadErrorAction:"Enter the code again",inviteTitle:"Enter a progress code",inviteDescription:"Enter the progress code to check the latest status.",paymentState:{complete:"Picked up",paid:"Paid",ready:"Awaiting pickup",unpaid:"Unpaid"},thankYouTitle:"Thank you so much!",thankYouMessage:"Your pickup is complete. Enjoy the rest of your time at the event!",thankYouImageAlt:"Decorative thank-you banner",thankYouCloseButton:"Close",progressSteps:fv.en,refresh:{refreshing:"Refreshing...",cooldown:n=>`Try again in ${n} sec`,action:"Refresh status",error:"Failed to refresh the order. Please try again."},callNumberLabel:"Call number",callNumberPending:"Pending"},orderProgress:{title:"Tracking your order",description:"Check the current status and pickup steps for the code you entered."},status:{title:"How to check your order status",descriptionLead:"We only share the call number with customers. Please keep the number shown on the completion screen until staff call you.",descriptionFollow:"Our staff track progress internally. If the situation changes, we will inform you at the booth.",historyTitle:"Order history on this device",historyClear:"Clear history",historyDescription:"Recent confirmed orders from this device appear here. Keeping the call number and order ID handy speeds up pickup.",historyCallNumberLabel:"Call number",historyOrderIdLabel:"Order ID",historyTotalLabel:"Total",historyPendingCallNumber:"Pending / Not assigned",historyClearConfirm:"Remove all saved orders from this device?"},ticketNotFound:{title:"Order not found",descriptionKnown:n=>`We could not find an order for progress code "${n}". Please check the code and try again.`,descriptionUnknown:"We could not confirm an order for the provided progress code. Please check the code and try again.",retry:"Re-enter progress code",newOrder:"Start a new order"},notFound:{title:"Page not found",description:"Please check the URL and use the navigation links."},copy:{progressCodeSuccess:"Progress code copied to clipboard.",progressCodeFailure:"Copy failed. Please note it manually.",progressLinkSuccess:"Progress link copied to clipboard.",progressLinkFailure:"Copy failed. Please note it manually."}}};function $y(n,e){return e==="en"?I3[n.key]?.label??n.label:n.label}function SP(n,e){return e==="en"?I3[n.key]?.description??n.description:n.description}function CP(n,e){return EP[e][n]}function Rc(n,e){return AP[e][n]}function TP(n,e){return bP[e][n]}function IP(n,e){return fv[e][n]}const NP=new Intl.DateTimeFormat("ja-JP",{hour:"2-digit",minute:"2-digit"}),IA=["","",""];function RP(n){const{map:e}=yo();return Object.entries(n).filter(([,r])=>r>0).map(([r,i])=>`${e[r]?.label??r}${i}`).join("")||""}function OP(n){return n?NP.format(n):"--:--"}function wp(n){const e=n.createdAt??n.updatedAt??null,t=n.updatedAt??null;return{id:n.orderId,callNumber:n.callNumber??0,ticket:n.ticket,items:RP(n.items??{}),total:n.total,payment:n.payment,progress:n.progress,createdAt:OP(e),createdAtDate:e,updatedAtDate:t,confirmationCode:ji(n.orderId),raw:n,platingStatus:d7(n.items??{},n.plating)}}function ji(n){if(!n)return"----";const e=(n.match(/[A-Za-z]/g)??[]).map(r=>r.toUpperCase());return e.length===0?"----":e.length>=4?e.slice(-4).join(""):e.join("").repeat(Math.ceil(4/e.length)).slice(-4)}function O0(n){return n===""?"":n===""?"":null}function D0(n){return n===""?"":n===""?"":null}const kh=n=>{const e=n.getFullYear(),t=String(n.getMonth()+1).padStart(2,"0"),r=String(n.getDate()).padStart(2,"0");return`${e}-${t}-${r}`},DP=n=>{const e=new Date(n);return e.setHours(0,0,0,0),e},MP=n=>{const e=new Date(n);return e.setHours(23,59,59,999),e};function PP(){const[n,e]=P.useState("all"),[t,r]=P.useState(()=>kh(new Date)),[i,a]=P.useState(()=>kh(new Date)),o=P.useMemo(()=>{if(n==="all")return{};const G=new Date(`${t}T00:00:00`),le=new Date(`${i}T00:00:00`);return{start:DP(G),end:MP(le),autoStopWhen:()=>!0}},[n,t,i]),{orders:c,loading:u,error:d}=qc(o),m=P.useMemo(()=>c.map(wp),[c]),{language:g}=Ki(),[_,w]=P.useState(""),[E,S]=P.useState(""),[D,C]=P.useState(""),[k,V]=P.useState("createdAt"),[U,q]=P.useState("desc"),[$,M]=P.useState(null),[b,N]=P.useState(null),I=P.useMemo(()=>{const G=D.trim().toLowerCase(),le=new Map(IA.map((te,me)=>[te,me])),ve=new Map([["",0],["",1],["",2]]),He=new Intl.Collator("ja",{numeric:!0,sensitivity:"base"});return m.filter(te=>_===""?!0:te.progress===_).filter(te=>E===""?!0:te.payment===E).filter(te=>G?`${te.id} ${te.ticket} ${te.callNumber} ${te.items}`.toLowerCase().includes(G):!0).sort((te,me)=>{const we=(Se,$e)=>Se-$e,Ce=(Se,$e)=>He.compare(Se,$e);let be=0;switch(k){case"createdAt":{const Se=te.createdAtDate?.getTime()??0,$e=me.createdAtDate?.getTime()??0;be=we(Se,$e);break}case"id":be=Ce(te.id,me.id);break;case"callNumber":be=we(te.callNumber??0,me.callNumber??0);break;case"ticket":be=Ce(te.ticket,me.ticket);break;case"items":be=Ce(te.items,me.items);break;case"total":be=we(te.total,me.total);break;case"payment":be=we(ve.get(te.payment)??0,ve.get(me.payment)??0);break;case"progress":be=we(le.get(te.progress)??0,le.get(me.progress)??0);break;default:be=0}if(be===0){const Se=te.createdAtDate?.getTime()??0,$e=me.createdAtDate?.getTime()??0;be=we(Se,$e)}return U==="asc"?be:-be})},[D,E,_,m,U,k]),R=[{key:"createdAt",label:""},{key:"id",label:""},{key:"callNumber",label:""},{key:"ticket",label:""},{key:"items",label:""},{key:"total",label:""},{key:"payment",label:""},{key:"progress",label:""}],L=G=>{q(le=>k===G?le==="asc"?"desc":"asc":"desc"),V(G)},j=(G,le)=>{const ve=k===le,He=ve?U==="asc"?"":"":"",Y=ve?U==="asc"?"ascending":"descending":"none",te=ve?U==="asc"?"":"":"";return p.jsx("th",{scope:"col","aria-sort":Y,className:`admin-sortable${ve?" is-active":""}`,children:p.jsxs("button",{type:"button",className:`admin-sort-button${ve?" is-active":""}`,onClick:()=>L(le),children:[p.jsx("span",{className:"admin-sort-label",children:G}),p.jsx("span",{"aria-hidden":"true",className:`admin-sort-indicator${ve?` is-${U}`:""}`,children:He}),p.jsx("span",{className:"sr-only",children:te})]})},le)},W=P.useCallback(async G=>{const le=O0(G.progress);if(le){M(G.id),N(null);try{await ya(G.id,G.ticket,{payment:G.payment,progress:le})}catch(ve){console.error("",ve),N("")}finally{M(null)}}},[]),ge=P.useCallback(async G=>{const le=D0(G.progress);if(le){M(G.id),N(null);try{await ya(G.id,G.ticket,{payment:G.payment,progress:le})}catch(ve){console.error("",ve),N("")}finally{M(null)}}},[]),H=P.useCallback(async()=>{N(null);try{await C3()}catch(G){console.error("CSV ",G),N("CSV ")}},[]);return u?p.jsx("p",{children:""}):p.jsxs("div",{children:[p.jsxs("div",{className:"admin-toolbar",role:"region","aria-label":"",children:[p.jsxs("div",{className:"field",children:[p.jsx("label",{htmlFor:"order-date-range-mode",children:""}),p.jsxs("select",{id:"order-date-range-mode",value:n,onChange:G=>e(G.target.value),children:[p.jsx("option",{value:"all",children:""}),p.jsx("option",{value:"custom",children:""})]})]}),n==="custom"&&p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"field",children:[p.jsx("label",{htmlFor:"order-start-date",children:""}),p.jsx("input",{id:"order-start-date",type:"date",value:t,onChange:G=>r(G.target.value),max:kh(new Date)})]}),p.jsxs("div",{className:"field",children:[p.jsx("label",{htmlFor:"order-end-date",children:""}),p.jsx("input",{id:"order-end-date",type:"date",value:i,onChange:G=>a(G.target.value),min:t,max:kh(new Date)})]})]}),p.jsxs("div",{className:"field",children:[p.jsx("label",{htmlFor:"order-progress",children:""}),p.jsxs("select",{id:"order-progress",value:_,onChange:G=>w(G.target.value),children:[p.jsx("option",{value:"",children:""}),IA.map(G=>p.jsx("option",{value:G,children:G},G))]})]}),p.jsxs("div",{className:"field",children:[p.jsx("label",{htmlFor:"order-payment",children:""}),p.jsxs("select",{id:"order-payment",value:E,onChange:G=>S(G.target.value),children:[p.jsx("option",{value:"",children:""}),K9.map(G=>p.jsx("option",{value:G,children:Rc(G,g)},G))]})]}),p.jsxs("div",{className:"field",style:{flex:"1 1 240px"},children:[p.jsx("label",{htmlFor:"order-search",children:""}),p.jsx("input",{id:"order-search",type:"search",placeholder:"",value:D,onChange:G=>C(G.target.value)})]}),p.jsx("button",{type:"button",className:"admin-secondary-button",disabled:I.length===0,onClick:()=>{const G=I[0];G&&W(G).catch(()=>{})},children:""}),p.jsx("button",{type:"button",className:"admin-primary-button",onClick:()=>void H(),disabled:m.length===0,children:"CSV "})]}),d&&p.jsx("p",{className:"admin-error",role:"alert",children:""}),b&&p.jsx("p",{className:"admin-error",role:"alert",children:b}),p.jsx("div",{style:{overflowX:"auto"},children:p.jsxs("table",{className:"admin-table",children:[p.jsx("thead",{children:p.jsxs("tr",{children:[R.map(({label:G,key:le})=>j(G,le)),p.jsx("th",{scope:"col",children:""})]})}),p.jsx("tbody",{children:I.map(G=>p.jsxs("tr",{children:[p.jsx("td",{children:G.createdAt}),p.jsx("td",{children:G.id}),p.jsx("td",{children:G.callNumber}),p.jsx("td",{children:G.ticket}),p.jsx("td",{children:G.items}),p.jsxs("td",{children:[G.total.toLocaleString()," "]}),p.jsx("td",{children:p.jsx("span",{className:G.payment===""?"admin-status-badge success":G.payment===""?"admin-status-badge warning":"admin-status-badge neutral",children:Rc(G.payment,g)})}),p.jsx("td",{children:p.jsx("span",{className:"admin-status-badge",children:G.progress})}),p.jsx("td",{children:p.jsxs("div",{style:{display:"flex",gap:8},children:[p.jsx("button",{type:"button",className:"admin-secondary-button",onClick:()=>W(G),disabled:$===G.id||O0(G.progress)===null,children:""}),p.jsx("button",{type:"button",className:"admin-secondary-button",onClick:()=>ge(G),disabled:$===G.id||D0(G.progress)===null,children:""})]})})]},G.id))})]})}),I.length===0&&p.jsx("p",{style:{marginTop:18,color:"#64748b"},children:""}),p.jsx("p",{style:{marginTop:18,color:"#64748b"},children:"Firestore "})]})}function kP(n,e){return n===0?"is-zero":e==="ready"?"is-complete":"is-pending"}function jf(n){const e=n.raw.items??{},{list:t,map:r}=yo();return t.map(i=>{const a=e[i.key]??0,o=u7(i.key),c=o?n.platingStatus[o]??"ready":"ready",u=kP(a,c);return{key:i.key,label:of(i.key,r[i.key].label),quantity:a,stateClass:u}})}function dv({entries:n,showTotal:e=!0,totalAriaLabel:t="",variant:r="default",className:i}){const a=n.reduce((c,u)=>c+u.quantity,0),o=["admin-order-items-inline",r==="compact"?"compact":null,i].filter(Boolean).join(" ");return p.jsxs("div",{className:o,children:[p.jsx("div",{className:"admin-production-items-card",role:"presentation",children:p.jsx("div",{className:"admin-production-items-grid",children:n.map(c=>p.jsxs("div",{className:"admin-production-item-cell",children:[p.jsx("span",{className:`admin-production-item-label menu-item-${c.key}`,children:c.label}),p.jsx("span",{className:`admin-production-quantity ${c.stateClass} menu-item-${c.key}`,"data-menu-item":c.key,children:c.quantity})]},c.key))})}),e&&p.jsx("div",{className:"admin-production-total-quantity","aria-label":t,children:a})]})}const jP=[{key:"ordered",label:"",hint:"",statuses:[""]},{key:"plating",label:"",hint:"",statuses:[""]}],LP=[{key:"summary",label:"",icon:""},...Hi.map(n=>({key:n.key,label:n.label,icon:n.icon}))];function BP(n){return n?Hi.some(e=>e.key===n):!1}const N3=(n,e)=>`${n}:${e}`;function VP(){const n=P.useMemo(()=>{const b=new Date;b.setHours(0,0,0,0);const N=new Date(b);return N.setDate(N.getDate()+1),{start:b,end:N}},[]),{orders:e,loading:t,error:r}=qc(n),i=P.useMemo(()=>e.map(wp),[e]),[a,o]=P.useState(null),[c,u]=P.useState(null),[d,m]=P.useState(null),[g,_]=Uv(),w=g.get("view"),E=w==="summary"?"summary":BP(w)?w:"summary",S=E==="summary"?null:Hi.find(b=>b.key===E)??null,D=P.useCallback(b=>{m(null),_(N=>{const I=new URLSearchParams(N);return b==="summary"?I.delete("view"):I.set("view",b),I})},[m,_]),C=P.useMemo(()=>jP.map(b=>({...b,orders:i.filter(N=>b.statuses.includes(N.progress)).sort((N,I)=>{const R=N.createdAtDate?.getTime()??0,L=I.createdAtDate?.getTime()??0;return R-L})})),[i]),k=P.useMemo(()=>({ordered:C.find(b=>b.key==="ordered")?.orders.length??0,plating:C.find(b=>b.key==="plating")?.orders.length??0}),[C]),V=P.useMemo(()=>{const b={potaufeu:{pending:[],ready:[]},friedBread:{pending:[],ready:[]}};i.forEach(I=>{if(I.progress==="")return;const R=I.raw.items??{};Hi.forEach(L=>{if(_3(R,L.key)===0)return;const ge=(I.platingStatus[L.key]??"ready")==="ready"?"ready":"pending";b[L.key][ge].push(I)})});const N=(I,R)=>(I.createdAtDate?.getTime()??0)-(R.createdAtDate?.getTime()??0);return Hi.forEach(I=>{b[I.key].pending.sort(N),b[I.key].ready.sort(N)}),b},[i]),U=P.useCallback(async b=>{const N=O0(b.progress);if(N){o(b.id),m(null);try{if(b.progress===""){const I=RA(b,!0);Object.keys(I).length>0&&await X1(b.id,b.ticket,I)}await ya(b.id,b.ticket,{progress:N,payment:b.payment})}catch(I){console.error("",I),m("")}finally{o(null)}}},[]),q=P.useCallback(async b=>{const N=D0(b.progress);if(N){o(b.id),m(null);try{if(b.progress===""&&N===""){const I=RA(b,!1);Object.keys(I).length>0&&await X1(b.id,b.ticket,I)}await ya(b.id,b.ticket,{progress:N,payment:b.payment})}catch(I){console.error("",I),m("")}finally{o(null)}}},[]),$=P.useCallback(async(b,N,I)=>{const R=N3(b.id,N);u(R),m(null);try{await X1(b.id,b.ticket,{[N]:I});const L=b.raw.items??{},j={...b.platingStatus,[N]:I?"ready":"pending"};h7(L,j)&&b.progress===""?await ya(b.id,b.ticket,{progress:"",payment:b.payment}):!I&&b.progress===""&&await ya(b.id,b.ticket,{progress:"",payment:b.payment})}catch(L){console.error("",L),m("")}finally{u(null)}},[m]),M=P.useCallback(async()=>{m(null);try{await C3()}catch(b){console.error("CSV ",b),m("CSV ")}},[]);return t?p.jsx("p",{children:""}):p.jsxs("div",{className:"admin-production-page",children:[p.jsxs("div",{className:"admin-production-toolbar",role:"region","aria-label":"",children:[p.jsxs("div",{className:"admin-production-summary",children:[p.jsx("p",{className:"admin-production-summary-title",children:""}),p.jsxs("p",{className:"admin-production-summary-count",children:[k.ordered,""]}),p.jsx("p",{className:"admin-production-summary-hint",children:""})]}),p.jsxs("div",{className:"admin-production-summary",children:[p.jsx("p",{className:"admin-production-summary-title",children:""}),p.jsxs("p",{className:"admin-production-summary-count",children:[k.plating,""]}),p.jsx("p",{className:"admin-production-summary-hint",children:""})]})]}),p.jsx("nav",{className:"admin-production-view-tabs",role:"tablist","aria-label":"",children:LP.map(b=>{const N=b.key===E,I=b.key!=="summary",R=I?V[b.key].pending.length:0;return p.jsxs("button",{type:"button",role:"tab",className:`admin-production-view-tab${N?" is-active":""}`,"aria-selected":N,onClick:()=>D(b.key),children:[p.jsxs("span",{className:"admin-production-view-tab-label",children:[p.jsx("span",{className:"admin-production-view-tab-icon","aria-hidden":"true",children:b.icon}),p.jsx("span",{className:"admin-production-view-tab-text",children:b.label})]}),I&&R>0&&p.jsx("span",{className:"admin-production-view-tab-count",children:p.jsx("span",{className:"admin-production-badge",children:R})})]},b.key)})}),E==="summary"?p.jsxs("div",{className:"admin-production-table",role:"table","aria-label":"",children:[p.jsx("div",{className:"admin-production-table-header",role:"row",children:C.map(b=>p.jsxs("div",{className:"admin-production-table-header-cell",role:"columnheader",children:[p.jsxs("div",{children:[p.jsx("h2",{children:b.label}),p.jsx("p",{children:b.hint})]}),p.jsx("span",{className:"admin-production-badge",children:b.orders.length})]},b.key))}),p.jsx("div",{className:"admin-production-table-body",children:C.map(b=>p.jsx("section",{className:"admin-production-table-column","aria-label":b.label,role:"rowgroup",children:p.jsxs("div",{className:"admin-production-table-list",children:[b.orders.map(N=>{const I=!!O0(N.progress),R=!!D0(N.progress);return p.jsx(FP,{order:N,onForward:()=>{U(N)},onBack:()=>{q(N)},allowForward:I,allowBack:R,busy:a===N.id},N.id)}),b.orders.length===0&&p.jsx("p",{className:"admin-production-empty",children:""})]})},b.key))})]}):S&&p.jsx(UP,{category:S,orders:V[S.key],busyKey:c,onUpdate:(b,N)=>$(b,S.key,N)}),r&&p.jsx("p",{className:"admin-error",role:"alert",children:""}),d&&p.jsx("p",{className:"admin-error",role:"alert",children:d}),p.jsx("div",{style:{marginTop:16},children:p.jsx("button",{type:"button",className:"admin-secondary-button",onClick:()=>void M(),disabled:i.length===0,children:"CSV "})})]})}function FP({order:n,onForward:e,onBack:t,allowForward:r,allowBack:i,busy:a}){if(n.progress===""||n.progress==="")return p.jsx("article",{className:"admin-production-row admin-production-row--compact",children:p.jsx("div",{className:"admin-production-row-main",children:p.jsxs("div",{className:"admin-production-row-compact",children:[p.jsx("span",{className:"admin-payment-ticket badge admin-production-ticket-compact","aria-label":` ${n.callNumber}`,children:n.callNumber}),p.jsxs("div",{className:"admin-production-row-actions admin-production-row-actions--compact",children:[p.jsx("button",{type:"button",className:"admin-production-button ghost",onClick:t,disabled:!i||a,children:" "}),p.jsx("button",{type:"button",className:"admin-production-button primary",onClick:e,disabled:!r||a,children:" "})]})]})})});const c=jf(n),u=c.reduce((d,m)=>d+m.quantity,0);return p.jsx("article",{className:"admin-production-row",children:p.jsx("div",{className:"admin-production-row-main",children:p.jsxs("div",{className:"admin-production-row-inline",children:[p.jsx("div",{className:"admin-production-ticket-block","aria-label":` ${n.callNumber}`,children:p.jsx("span",{className:"admin-payment-ticket badge",children:n.callNumber})}),p.jsx("div",{className:"admin-production-items-card",role:"presentation",children:p.jsx("div",{className:"admin-production-items-grid",children:c.map(d=>p.jsxs("div",{className:"admin-production-item-cell",children:[p.jsx("span",{className:"admin-production-item-label",children:d.label}),p.jsx("span",{className:`admin-production-quantity ${d.stateClass}`,children:d.quantity})]},d.key))})}),p.jsx("div",{className:"admin-production-total-quantity","aria-label":"",children:u}),p.jsxs("div",{className:"admin-production-row-actions",children:[p.jsx("button",{type:"button",className:"admin-production-button ghost",onClick:t,disabled:!i||a,children:" "}),p.jsx("button",{type:"button",className:"admin-production-button primary",onClick:e,disabled:!r||a,children:" "})]})]})})})}function UP({category:n,orders:e,busyKey:t,onUpdate:r}){const i=`${n.label}`,a=`${n.label}`;return p.jsxs("div",{className:"admin-production-table",role:"table","aria-label":`${n.label}`,children:[p.jsxs("div",{className:"admin-production-table-header",role:"row",children:[p.jsxs("div",{className:"admin-production-table-header-cell",role:"columnheader",children:[p.jsxs("div",{children:[p.jsx("h2",{children:i}),p.jsx("p",{children:""})]}),p.jsx("span",{className:"admin-production-badge",children:e.pending.length})]}),p.jsxs("div",{className:"admin-production-table-header-cell",role:"columnheader",children:[p.jsxs("div",{children:[p.jsx("h2",{children:a}),p.jsx("p",{children:""})]}),p.jsx("span",{className:"admin-production-badge",children:e.ready.length})]})]}),p.jsxs("div",{className:"admin-production-table-body",children:[p.jsx("section",{className:"admin-production-table-column","aria-label":i,role:"rowgroup",children:p.jsxs("div",{className:"admin-production-table-list",children:[e.pending.map(o=>p.jsx(NA,{order:o,category:n,status:"pending",busyKey:t,onUpdate:c=>r(o,c)},o.id)),e.pending.length===0&&p.jsx("p",{className:"admin-production-empty",children:""})]})}),p.jsx("section",{className:"admin-production-table-column","aria-label":a,role:"rowgroup",children:p.jsxs("div",{className:"admin-production-table-list",children:[e.ready.map(o=>p.jsx(NA,{order:o,category:n,status:"ready",busyKey:t,onUpdate:c=>r(o,c)},o.id)),e.ready.length===0&&p.jsx("p",{className:"admin-production-empty",children:""})]})})]})]})}function NA({order:n,category:e,status:t,busyKey:r,onUpdate:i}){const a=r===N3(n.id,e.key);if(t==="ready")return p.jsx("article",{className:"admin-production-row admin-production-row--compact",children:p.jsx("div",{className:"admin-production-row-main",children:p.jsxs("div",{className:"admin-production-row-compact",children:[p.jsx("span",{className:"admin-payment-ticket badge admin-production-ticket-compact","aria-label":` ${n.callNumber}`,children:n.callNumber}),p.jsx("div",{className:"admin-production-row-actions admin-production-row-actions--compact",children:p.jsx("button",{type:"button",className:"admin-production-button ghost",onClick:()=>{i(!1)},disabled:a,children:" "})})]})})});const o=jf(n).filter(u=>e.itemKeys.includes(u.key)),c=o.reduce((u,d)=>u+d.quantity,0);return p.jsx("article",{className:"admin-production-row",children:p.jsx("div",{className:"admin-production-row-main",children:p.jsxs("div",{className:"admin-production-row-inline",children:[p.jsx("div",{className:"admin-production-ticket-block","aria-label":` ${n.callNumber}`,children:p.jsx("span",{className:"admin-payment-ticket badge",children:n.callNumber})}),p.jsx("div",{className:"admin-production-items-card",role:"presentation",children:p.jsx("div",{className:"admin-production-items-grid",children:o.map(u=>p.jsxs("div",{className:"admin-production-item-cell",children:[p.jsx("span",{className:"admin-production-item-label",children:u.label}),p.jsx("span",{className:`admin-production-quantity ${u.stateClass}`,children:u.quantity})]},u.key))})}),p.jsx("div",{className:"admin-production-total-quantity","aria-label":"",children:c}),p.jsx("div",{className:"admin-production-row-actions",children:p.jsx("button",{type:"button",className:"admin-production-button primary",onClick:()=>{i(!0)},disabled:a,children:" "})})]})})})}function RA(n,e){const t=n.raw.items??{},r={};return Hi.forEach(i=>{_3(t,i.key)>0&&(r[i.key]=e)}),r}function zP(n,e){var t=Object.setPrototypeOf;t?t(n,e):n.__proto__=e}function HP(n,e){e===void 0&&(e=n.constructor);var t=Error.captureStackTrace;t&&t(n,e)}var GP=(function(){var n=function(t,r){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(i[o]=a[o])},n(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),qP=(function(n){GP(e,n);function e(t,r){var i=this.constructor,a=n.call(this,t,r)||this;return Object.defineProperty(a,"name",{value:i.name,enumerable:!1,configurable:!0}),zP(a,i.prototype),HP(a),a}return e})(Error),$P=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Ur=(function(n){$P(e,n);function e(t){t===void 0&&(t=void 0);var r=n.call(this,t)||this;return r.message=t,r}return e.prototype.getKind=function(){var t=this.constructor;return t.kind},e.kind="Exception",e})(qP),XP=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),mn=(function(n){XP(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="ArgumentException",e})(Ur),YP=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Be=(function(n){YP(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="IllegalArgumentException",e})(Ur),R3=(function(){function n(e){if(this.binarizer=e,e===null)throw new Be("Binarizer must be non-null.")}return n.prototype.getWidth=function(){return this.binarizer.getWidth()},n.prototype.getHeight=function(){return this.binarizer.getHeight()},n.prototype.getBlackRow=function(e,t){return this.binarizer.getBlackRow(e,t)},n.prototype.getBlackMatrix=function(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix},n.prototype.isCropSupported=function(){return this.binarizer.getLuminanceSource().isCropSupported()},n.prototype.crop=function(e,t,r,i){var a=this.binarizer.getLuminanceSource().crop(e,t,r,i);return new n(this.binarizer.createBinarizer(a))},n.prototype.isRotateSupported=function(){return this.binarizer.getLuminanceSource().isRotateSupported()},n.prototype.rotateCounterClockwise=function(){var e=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new n(this.binarizer.createBinarizer(e))},n.prototype.rotateCounterClockwise45=function(){var e=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new n(this.binarizer.createBinarizer(e))},n.prototype.toString=function(){try{return this.getBlackMatrix().toString()}catch{return""}},n})(),KP=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Tn=(function(n){KP(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.getChecksumInstance=function(){return new e},e.kind="ChecksumException",e})(Ur),WP=(function(){function n(e){this.source=e}return n.prototype.getLuminanceSource=function(){return this.source},n.prototype.getWidth=function(){return this.source.getWidth()},n.prototype.getHeight=function(){return this.source.getHeight()},n})(),Gt=(function(){function n(){}return n.arraycopy=function(e,t,r,i,a){for(;a--;)r[i++]=e[t++]},n.currentTimeMillis=function(){return Date.now()},n})(),QP=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Xy=(function(n){QP(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="IndexOutOfBoundsException",e})(Ur),ZP=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),OA=(function(n){ZP(e,n);function e(t,r){t===void 0&&(t=void 0),r===void 0&&(r=void 0);var i=n.call(this,r)||this;return i.index=t,i.message=r,i}return e.kind="ArrayIndexOutOfBoundsException",e})(Xy),JP=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Pn=(function(){function n(){}return n.fill=function(e,t){for(var r=0,i=e.length;r<i;r++)e[r]=t},n.fillWithin=function(e,t,r,i){n.rangeCheck(e.length,t,r);for(var a=t;a<r;a++)e[a]=i},n.rangeCheck=function(e,t,r){if(t>r)throw new Be("fromIndex("+t+") > toIndex("+r+")");if(t<0)throw new OA(t);if(r>e)throw new OA(r)},n.asList=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e},n.create=function(e,t,r){var i=Array.from({length:e});return i.map(function(a){return Array.from({length:t}).fill(r)})},n.createInt32Array=function(e,t,r){var i=Array.from({length:e});return i.map(function(a){return Int32Array.from({length:t}).fill(r)})},n.equals=function(e,t){if(!e||!t||!e.length||!t.length||e.length!==t.length)return!1;for(var r=0,i=e.length;r<i;r++)if(e[r]!==t[r])return!1;return!0},n.hashCode=function(e){var t,r;if(e===null)return 0;var i=1;try{for(var a=JP(e),o=a.next();!o.done;o=a.next()){var c=o.value;i=31*i+c}}catch(u){t={error:u}}finally{try{o&&!o.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}return i},n.fillUint8Array=function(e,t){for(var r=0;r!==e.length;r++)e[r]=t},n.copyOf=function(e,t){return e.slice(0,t)},n.copyOfUint8Array=function(e,t){if(e.length<=t){var r=new Uint8Array(t);return r.set(e),r}return e.slice(0,t)},n.copyOfRange=function(e,t,r){var i=r-t,a=new Int32Array(i);return Gt.arraycopy(e,t,a,0,i),a},n.binarySearch=function(e,t,r){r===void 0&&(r=n.numberComparator);for(var i=0,a=e.length-1;i<=a;){var o=a+i>>1,c=r(t,e[o]);if(c>0)i=o+1;else if(c<0)a=o-1;else return o}return-i-1},n.numberComparator=function(e,t){return e-t},n})(),it=(function(){function n(){}return n.numberOfTrailingZeros=function(e){var t;if(e===0)return 32;var r=31;return t=e<<16,t!==0&&(r-=16,e=t),t=e<<8,t!==0&&(r-=8,e=t),t=e<<4,t!==0&&(r-=4,e=t),t=e<<2,t!==0&&(r-=2,e=t),r-(e<<1>>>31)},n.numberOfLeadingZeros=function(e){if(e===0)return 32;var t=1;return e>>>16||(t+=16,e<<=16),e>>>24||(t+=8,e<<=8),e>>>28||(t+=4,e<<=4),e>>>30||(t+=2,e<<=2),t-=e>>>31,t},n.toHexString=function(e){return e.toString(16)},n.toBinaryString=function(e){return String(parseInt(String(e),2))},n.bitCount=function(e){return e=e-(e>>>1&1431655765),e=(e&858993459)+(e>>>2&858993459),e=e+(e>>>4)&252645135,e=e+(e>>>8),e=e+(e>>>16),e&63},n.truncDivision=function(e,t){return Math.trunc(e/t)},n.parseInt=function(e,t){return t===void 0&&(t=void 0),parseInt(e,t)},n.MIN_VALUE_32_BITS=-2147483648,n.MAX_VALUE=Number.MAX_SAFE_INTEGER,n})(),Kn=(function(){function n(e,t){e===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=e,t==null?this.bits=n.makeArray(e):this.bits=t)}return n.prototype.getSize=function(){return this.size},n.prototype.getSizeInBytes=function(){return Math.floor((this.size+7)/8)},n.prototype.ensureCapacity=function(e){if(e>this.bits.length*32){var t=n.makeArray(e);Gt.arraycopy(this.bits,0,t,0,this.bits.length),this.bits=t}},n.prototype.get=function(e){return(this.bits[Math.floor(e/32)]&1<<(e&31))!==0},n.prototype.set=function(e){this.bits[Math.floor(e/32)]|=1<<(e&31)},n.prototype.flip=function(e){this.bits[Math.floor(e/32)]^=1<<(e&31)},n.prototype.getNextSet=function(e){var t=this.size;if(e>=t)return t;var r=this.bits,i=Math.floor(e/32),a=r[i];a&=~((1<<(e&31))-1);for(var o=r.length;a===0;){if(++i===o)return t;a=r[i]}var c=i*32+it.numberOfTrailingZeros(a);return c>t?t:c},n.prototype.getNextUnset=function(e){var t=this.size;if(e>=t)return t;var r=this.bits,i=Math.floor(e/32),a=~r[i];a&=~((1<<(e&31))-1);for(var o=r.length;a===0;){if(++i===o)return t;a=~r[i]}var c=i*32+it.numberOfTrailingZeros(a);return c>t?t:c},n.prototype.setBulk=function(e,t){this.bits[Math.floor(e/32)]=t},n.prototype.setRange=function(e,t){if(t<e||e<0||t>this.size)throw new Be;if(t!==e){t--;for(var r=Math.floor(e/32),i=Math.floor(t/32),a=this.bits,o=r;o<=i;o++){var c=o>r?0:e&31,u=o<i?31:t&31,d=(2<<u)-(1<<c);a[o]|=d}}},n.prototype.clear=function(){for(var e=this.bits.length,t=this.bits,r=0;r<e;r++)t[r]=0},n.prototype.isRange=function(e,t,r){if(t<e||e<0||t>this.size)throw new Be;if(t===e)return!0;t--;for(var i=Math.floor(e/32),a=Math.floor(t/32),o=this.bits,c=i;c<=a;c++){var u=c>i?0:e&31,d=c<a?31:t&31,m=(2<<d)-(1<<u)&4294967295;if((o[c]&m)!==(r?m:0))return!1}return!0},n.prototype.appendBit=function(e){this.ensureCapacity(this.size+1),e&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++},n.prototype.appendBits=function(e,t){if(t<0||t>32)throw new Be("Num bits must be between 0 and 32");this.ensureCapacity(this.size+t);for(var r=t;r>0;r--)this.appendBit((e>>r-1&1)===1)},n.prototype.appendBitArray=function(e){var t=e.size;this.ensureCapacity(this.size+t);for(var r=0;r<t;r++)this.appendBit(e.get(r))},n.prototype.xor=function(e){if(this.size!==e.size)throw new Be("Sizes don't match");for(var t=this.bits,r=0,i=t.length;r<i;r++)t[r]^=e.bits[r]},n.prototype.toBytes=function(e,t,r,i){for(var a=0;a<i;a++){for(var o=0,c=0;c<8;c++)this.get(e)&&(o|=1<<7-c),e++;t[r+a]=o}},n.prototype.getBitArray=function(){return this.bits},n.prototype.reverse=function(){for(var e=new Int32Array(this.bits.length),t=Math.floor((this.size-1)/32),r=t+1,i=this.bits,a=0;a<r;a++){var o=i[a];o=o>>1&1431655765|(o&1431655765)<<1,o=o>>2&858993459|(o&858993459)<<2,o=o>>4&252645135|(o&252645135)<<4,o=o>>8&16711935|(o&16711935)<<8,o=o>>16&65535|(o&65535)<<16,e[t-a]=o}if(this.size!==r*32){for(var c=r*32-this.size,u=e[0]>>>c,a=1;a<r;a++){var d=e[a];u|=d<<32-c,e[a-1]=u,u=d>>>c}e[r-1]=u}this.bits=e},n.makeArray=function(e){return new Int32Array(Math.floor((e+31)/32))},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.size===t.size&&Pn.equals(this.bits,t.bits)},n.prototype.hashCode=function(){return 31*this.size+Pn.hashCode(this.bits)},n.prototype.toString=function(){for(var e="",t=0,r=this.size;t<r;t++)(t&7)===0&&(e+=" "),e+=this.get(t)?"X":".";return e},n.prototype.clone=function(){return new n(this.size,this.bits.slice())},n.prototype.toArray=function(){for(var e=[],t=0,r=this.size;t<r;t++)e.push(this.get(t));return e},n})(),hv;(function(n){n[n.OTHER=0]="OTHER",n[n.PURE_BARCODE=1]="PURE_BARCODE",n[n.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",n[n.TRY_HARDER=3]="TRY_HARDER",n[n.CHARACTER_SET=4]="CHARACTER_SET",n[n.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",n[n.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",n[n.ENABLE_CODE_39_EXTENDED_MODE=7]="ENABLE_CODE_39_EXTENDED_MODE",n[n.ASSUME_GS1=8]="ASSUME_GS1",n[n.RETURN_CODABAR_START_END=9]="RETURN_CODABAR_START_END",n[n.NEED_RESULT_POINT_CALLBACK=10]="NEED_RESULT_POINT_CALLBACK",n[n.ALLOWED_EAN_EXTENSIONS=11]="ALLOWED_EAN_EXTENSIONS"})(hv||(hv={}));const qt=hv;var ek=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),_e=(function(n){ek(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.getFormatInstance=function(){return new e},e.kind="FormatException",e})(Ur),tk=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Dt;(function(n){n[n.Cp437=0]="Cp437",n[n.ISO8859_1=1]="ISO8859_1",n[n.ISO8859_2=2]="ISO8859_2",n[n.ISO8859_3=3]="ISO8859_3",n[n.ISO8859_4=4]="ISO8859_4",n[n.ISO8859_5=5]="ISO8859_5",n[n.ISO8859_6=6]="ISO8859_6",n[n.ISO8859_7=7]="ISO8859_7",n[n.ISO8859_8=8]="ISO8859_8",n[n.ISO8859_9=9]="ISO8859_9",n[n.ISO8859_10=10]="ISO8859_10",n[n.ISO8859_11=11]="ISO8859_11",n[n.ISO8859_13=12]="ISO8859_13",n[n.ISO8859_14=13]="ISO8859_14",n[n.ISO8859_15=14]="ISO8859_15",n[n.ISO8859_16=15]="ISO8859_16",n[n.SJIS=16]="SJIS",n[n.Cp1250=17]="Cp1250",n[n.Cp1251=18]="Cp1251",n[n.Cp1252=19]="Cp1252",n[n.Cp1256=20]="Cp1256",n[n.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",n[n.UTF8=22]="UTF8",n[n.ASCII=23]="ASCII",n[n.Big5=24]="Big5",n[n.GB18030=25]="GB18030",n[n.EUC_KR=26]="EUC_KR"})(Dt||(Dt={}));var Mn=(function(){function n(e,t,r){for(var i,a,o=[],c=3;c<arguments.length;c++)o[c-3]=arguments[c];this.valueIdentifier=e,this.name=r,typeof t=="number"?this.values=Int32Array.from([t]):this.values=t,this.otherEncodingNames=o,n.VALUE_IDENTIFIER_TO_ECI.set(e,this),n.NAME_TO_ECI.set(r,this);for(var u=this.values,d=0,m=u.length;d!==m;d++){var g=u[d];n.VALUES_TO_ECI.set(g,this)}try{for(var _=tk(o),w=_.next();!w.done;w=_.next()){var E=w.value;n.NAME_TO_ECI.set(E,this)}}catch(S){i={error:S}}finally{try{w&&!w.done&&(a=_.return)&&a.call(_)}finally{if(i)throw i.error}}}return n.prototype.getValueIdentifier=function(){return this.valueIdentifier},n.prototype.getName=function(){return this.name},n.prototype.getValue=function(){return this.values[0]},n.getCharacterSetECIByValue=function(e){if(e<0||e>=900)throw new _e("incorect value");var t=n.VALUES_TO_ECI.get(e);if(t===void 0)throw new _e("incorect value");return t},n.getCharacterSetECIByName=function(e){var t=n.NAME_TO_ECI.get(e);if(t===void 0)throw new _e("incorect value");return t},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.getName()===t.getName()},n.VALUE_IDENTIFIER_TO_ECI=new Map,n.VALUES_TO_ECI=new Map,n.NAME_TO_ECI=new Map,n.Cp437=new n(Dt.Cp437,Int32Array.from([0,2]),"Cp437"),n.ISO8859_1=new n(Dt.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),n.ISO8859_2=new n(Dt.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),n.ISO8859_3=new n(Dt.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),n.ISO8859_4=new n(Dt.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),n.ISO8859_5=new n(Dt.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),n.ISO8859_6=new n(Dt.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),n.ISO8859_7=new n(Dt.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),n.ISO8859_8=new n(Dt.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),n.ISO8859_9=new n(Dt.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),n.ISO8859_10=new n(Dt.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),n.ISO8859_11=new n(Dt.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),n.ISO8859_13=new n(Dt.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),n.ISO8859_14=new n(Dt.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),n.ISO8859_15=new n(Dt.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),n.ISO8859_16=new n(Dt.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),n.SJIS=new n(Dt.SJIS,20,"SJIS","Shift_JIS"),n.Cp1250=new n(Dt.Cp1250,21,"Cp1250","windows-1250"),n.Cp1251=new n(Dt.Cp1251,22,"Cp1251","windows-1251"),n.Cp1252=new n(Dt.Cp1252,23,"Cp1252","windows-1252"),n.Cp1256=new n(Dt.Cp1256,24,"Cp1256","windows-1256"),n.UnicodeBigUnmarked=new n(Dt.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),n.UTF8=new n(Dt.UTF8,26,"UTF8","UTF-8"),n.ASCII=new n(Dt.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),n.Big5=new n(Dt.Big5,28,"Big5"),n.GB18030=new n(Dt.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),n.EUC_KR=new n(Dt.EUC_KR,30,"EUC_KR","EUC-KR"),n})(),nk=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),t0=(function(n){nk(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="UnsupportedOperationException",e})(Ur),wi=(function(){function n(){}return n.decode=function(e,t){var r=this.encodingName(t);return this.customDecoder?this.customDecoder(e,r):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(r)?this.decodeFallback(e,r):new TextDecoder(r).decode(e)},n.shouldDecodeOnFallback=function(e){return!n.isBrowser()&&e==="ISO-8859-1"},n.encode=function(e,t){var r=this.encodingName(t);return this.customEncoder?this.customEncoder(e,r):typeof TextEncoder>"u"?this.encodeFallback(e):new TextEncoder().encode(e)},n.isBrowser=function(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"},n.encodingName=function(e){return typeof e=="string"?e:e.getName()},n.encodingCharacterSet=function(e){return e instanceof Mn?e:Mn.getCharacterSetECIByName(e)},n.decodeFallback=function(e,t){var r=this.encodingCharacterSet(t);if(n.isDecodeFallbackSupported(r)){for(var i="",a=0,o=e.length;a<o;a++){var c=e[a].toString(16);c.length<2&&(c="0"+c),i+="%"+c}return decodeURIComponent(i)}if(r.equals(Mn.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(e.buffer));throw new t0("Encoding "+this.encodingName(t)+" not supported by fallback.")},n.isDecodeFallbackSupported=function(e){return e.equals(Mn.UTF8)||e.equals(Mn.ISO8859_1)||e.equals(Mn.ASCII)},n.encodeFallback=function(e){for(var t=btoa(unescape(encodeURIComponent(e))),r=t.split(""),i=[],a=0;a<r.length;a++)i.push(r[a].charCodeAt(0));return new Uint8Array(i)},n})(),pt=(function(){function n(){}return n.castAsNonUtf8Char=function(e,t){t===void 0&&(t=null);var r=t?t.getName():this.ISO88591;return wi.decode(new Uint8Array([e]),r)},n.guessEncoding=function(e,t){if(t!=null&&t.get(qt.CHARACTER_SET)!==void 0)return t.get(qt.CHARACTER_SET).toString();for(var r=e.length,i=!0,a=!0,o=!0,c=0,u=0,d=0,m=0,g=0,_=0,w=0,E=0,S=0,D=0,C=0,k=e.length>3&&e[0]===239&&e[1]===187&&e[2]===191,V=0;V<r&&(i||a||o);V++){var U=e[V]&255;o&&(c>0?(U&128)===0?o=!1:c--:(U&128)!==0&&((U&64)===0?o=!1:(c++,(U&32)===0?u++:(c++,(U&16)===0?d++:(c++,(U&8)===0?m++:o=!1))))),i&&(U>127&&U<160?i=!1:U>159&&(U<192||U===215||U===247)&&C++),a&&(g>0?U<64||U===127||U>252?a=!1:g--:U===128||U===160||U>239?a=!1:U>160&&U<224?(_++,E=0,w++,w>S&&(S=w)):U>127?(g++,w=0,E++,E>D&&(D=E)):(w=0,E=0))}return o&&c>0&&(o=!1),a&&g>0&&(a=!1),o&&(k||u+d+m>0)?n.UTF8:a&&(n.ASSUME_SHIFT_JIS||S>=3||D>=3)?n.SHIFT_JIS:i&&a?S===2&&_===2||C*10>=r?n.SHIFT_JIS:n.ISO88591:i?n.ISO88591:a?n.SHIFT_JIS:o?n.UTF8:n.PLATFORM_DEFAULT_ENCODING},n.format=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var i=-1;function a(c,u,d,m,g,_){if(c==="%%")return"%";if(t[++i]!==void 0){c=m?parseInt(m.substr(1)):void 0;var w=g?parseInt(g.substr(1)):void 0,E;switch(_){case"s":E=t[i];break;case"c":E=t[i][0];break;case"f":E=parseFloat(t[i]).toFixed(c);break;case"p":E=parseFloat(t[i]).toPrecision(c);break;case"e":E=parseFloat(t[i]).toExponential(c);break;case"x":E=parseInt(t[i]).toString(w||16);break;case"d":E=parseFloat(parseInt(t[i],w||10).toPrecision(c)).toFixed(0);break}E=typeof E=="object"?JSON.stringify(E):(+E).toString(w);for(var S=parseInt(d),D=d&&d[0]+""=="0"?"0":" ";E.length<S;)E=u!==void 0?E+D:D+E;return E}}var o=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(o,a)},n.getBytes=function(e,t){return wi.encode(e,t)},n.getCharCode=function(e,t){return t===void 0&&(t=0),e.charCodeAt(t)},n.getCharAt=function(e){return String.fromCharCode(e)},n.SHIFT_JIS=Mn.SJIS.getName(),n.GB2312="GB2312",n.ISO88591=Mn.ISO8859_1.getName(),n.EUC_JP="EUC_JP",n.UTF8=Mn.UTF8.getName(),n.PLATFORM_DEFAULT_ENCODING=n.UTF8,n.ASSUME_SHIFT_JIS=!1,n})(),rt=(function(){function n(e){e===void 0&&(e=""),this.value=e}return n.prototype.enableDecoding=function(e){return this.encoding=e,this},n.prototype.append=function(e){return typeof e=="string"?this.value+=e.toString():this.encoding?this.value+=pt.castAsNonUtf8Char(e,this.encoding):this.value+=String.fromCharCode(e),this},n.prototype.appendChars=function(e,t,r){for(var i=t;t<t+r;i++)this.append(e[i]);return this},n.prototype.length=function(){return this.value.length},n.prototype.charAt=function(e){return this.value.charAt(e)},n.prototype.deleteCharAt=function(e){this.value=this.value.substr(0,e)+this.value.substring(e+1)},n.prototype.setCharAt=function(e,t){this.value=this.value.substr(0,e)+t+this.value.substr(e+1)},n.prototype.substring=function(e,t){return this.value.substring(e,t)},n.prototype.setLengthToZero=function(){this.value=""},n.prototype.toString=function(){return this.value},n.prototype.insert=function(e,t){this.value=this.value.substring(0,e)+t+this.value.substring(e)},n})(),Ta=(function(){function n(e,t,r,i){if(this.width=e,this.height=t,this.rowSize=r,this.bits=i,t==null&&(t=e),this.height=t,e<1||t<1)throw new Be("Both dimensions must be greater than 0");r==null&&(r=Math.floor((e+31)/32)),this.rowSize=r,i==null&&(this.bits=new Int32Array(this.rowSize*this.height))}return n.parseFromBooleanArray=function(e){for(var t=e.length,r=e[0].length,i=new n(r,t),a=0;a<t;a++)for(var o=e[a],c=0;c<r;c++)o[c]&&i.set(c,a);return i},n.parseFromString=function(e,t,r){if(e===null)throw new Be("stringRepresentation cannot be null");for(var i=new Array(e.length),a=0,o=0,c=-1,u=0,d=0;d<e.length;)if(e.charAt(d)===`
`||e.charAt(d)==="\r"){if(a>o){if(c===-1)c=a-o;else if(a-o!==c)throw new Be("row lengths do not match");o=a,u++}d++}else if(e.substring(d,d+t.length)===t)d+=t.length,i[a]=!0,a++;else if(e.substring(d,d+r.length)===r)d+=r.length,i[a]=!1,a++;else throw new Be("illegal character encountered: "+e.substring(d));if(a>o){if(c===-1)c=a-o;else if(a-o!==c)throw new Be("row lengths do not match");u++}for(var m=new n(c,u),g=0;g<a;g++)i[g]&&m.set(Math.floor(g%c),Math.floor(g/c));return m},n.prototype.get=function(e,t){var r=t*this.rowSize+Math.floor(e/32);return(this.bits[r]>>>(e&31)&1)!==0},n.prototype.set=function(e,t){var r=t*this.rowSize+Math.floor(e/32);this.bits[r]|=1<<(e&31)&4294967295},n.prototype.unset=function(e,t){var r=t*this.rowSize+Math.floor(e/32);this.bits[r]&=~(1<<(e&31)&4294967295)},n.prototype.flip=function(e,t){var r=t*this.rowSize+Math.floor(e/32);this.bits[r]^=1<<(e&31)&4294967295},n.prototype.xor=function(e){if(this.width!==e.getWidth()||this.height!==e.getHeight()||this.rowSize!==e.getRowSize())throw new Be("input matrix dimensions do not match");for(var t=new Kn(Math.floor(this.width/32)+1),r=this.rowSize,i=this.bits,a=0,o=this.height;a<o;a++)for(var c=a*r,u=e.getRow(a,t).getBitArray(),d=0;d<r;d++)i[c+d]^=u[d]},n.prototype.clear=function(){for(var e=this.bits,t=e.length,r=0;r<t;r++)e[r]=0},n.prototype.setRegion=function(e,t,r,i){if(t<0||e<0)throw new Be("Left and top must be nonnegative");if(i<1||r<1)throw new Be("Height and width must be at least 1");var a=e+r,o=t+i;if(o>this.height||a>this.width)throw new Be("The region must fit inside the matrix");for(var c=this.rowSize,u=this.bits,d=t;d<o;d++)for(var m=d*c,g=e;g<a;g++)u[m+Math.floor(g/32)]|=1<<(g&31)&4294967295},n.prototype.getRow=function(e,t){t==null||t.getSize()<this.width?t=new Kn(this.width):t.clear();for(var r=this.rowSize,i=this.bits,a=e*r,o=0;o<r;o++)t.setBulk(o*32,i[a+o]);return t},n.prototype.setRow=function(e,t){Gt.arraycopy(t.getBitArray(),0,this.bits,e*this.rowSize,this.rowSize)},n.prototype.rotate180=function(){for(var e=this.getWidth(),t=this.getHeight(),r=new Kn(e),i=new Kn(e),a=0,o=Math.floor((t+1)/2);a<o;a++)r=this.getRow(a,r),i=this.getRow(t-1-a,i),r.reverse(),i.reverse(),this.setRow(a,i),this.setRow(t-1-a,r)},n.prototype.getEnclosingRectangle=function(){for(var e=this.width,t=this.height,r=this.rowSize,i=this.bits,a=e,o=t,c=-1,u=-1,d=0;d<t;d++)for(var m=0;m<r;m++){var g=i[d*r+m];if(g!==0){if(d<o&&(o=d),d>u&&(u=d),m*32<a){for(var _=0;(g<<31-_&4294967295)===0;)_++;m*32+_<a&&(a=m*32+_)}if(m*32+31>c){for(var _=31;!(g>>>_);)_--;m*32+_>c&&(c=m*32+_)}}}return c<a||u<o?null:Int32Array.from([a,o,c-a+1,u-o+1])},n.prototype.getTopLeftOnBit=function(){for(var e=this.rowSize,t=this.bits,r=0;r<t.length&&t[r]===0;)r++;if(r===t.length)return null;for(var i=r/e,a=r%e*32,o=t[r],c=0;(o<<31-c&4294967295)===0;)c++;return a+=c,Int32Array.from([a,i])},n.prototype.getBottomRightOnBit=function(){for(var e=this.rowSize,t=this.bits,r=t.length-1;r>=0&&t[r]===0;)r--;if(r<0)return null;for(var i=Math.floor(r/e),a=Math.floor(r%e)*32,o=t[r],c=31;!(o>>>c);)c--;return a+=c,Int32Array.from([a,i])},n.prototype.getWidth=function(){return this.width},n.prototype.getHeight=function(){return this.height},n.prototype.getRowSize=function(){return this.rowSize},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.width===t.width&&this.height===t.height&&this.rowSize===t.rowSize&&Pn.equals(this.bits,t.bits)},n.prototype.hashCode=function(){var e=this.width;return e=31*e+this.width,e=31*e+this.height,e=31*e+this.rowSize,e=31*e+Pn.hashCode(this.bits),e},n.prototype.toString=function(e,t,r){return e===void 0&&(e="X "),t===void 0&&(t="  "),r===void 0&&(r=`
`),this.buildToString(e,t,r)},n.prototype.buildToString=function(e,t,r){for(var i=new rt,a=0,o=this.height;a<o;a++){for(var c=0,u=this.width;c<u;c++)i.append(this.get(c,a)?e:t);i.append(r)}return i.toString()},n.prototype.clone=function(){return new n(this.width,this.height,this.rowSize,this.bits.slice())},n})(),rk=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),oe=(function(n){rk(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.getNotFoundInstance=function(){return new e},e.kind="NotFoundException",e})(Ur),ik=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),ak=(function(n){ik(e,n);function e(t){var r=n.call(this,t)||this;return r.luminances=e.EMPTY,r.buckets=new Int32Array(e.LUMINANCE_BUCKETS),r}return e.prototype.getBlackRow=function(t,r){var i=this.getLuminanceSource(),a=i.getWidth();r==null||r.getSize()<a?r=new Kn(a):r.clear(),this.initArrays(a);for(var o=i.getRow(t,this.luminances),c=this.buckets,u=0;u<a;u++)c[(o[u]&255)>>e.LUMINANCE_SHIFT]++;var d=e.estimateBlackPoint(c);if(a<3)for(var u=0;u<a;u++)(o[u]&255)<d&&r.set(u);else for(var m=o[0]&255,g=o[1]&255,u=1;u<a-1;u++){var _=o[u+1]&255;(g*4-m-_)/2<d&&r.set(u),m=g,g=_}return r},e.prototype.getBlackMatrix=function(){var t=this.getLuminanceSource(),r=t.getWidth(),i=t.getHeight(),a=new Ta(r,i);this.initArrays(r);for(var o=this.buckets,c=1;c<5;c++)for(var u=Math.floor(i*c/5),d=t.getRow(u,this.luminances),m=Math.floor(r*4/5),g=Math.floor(r/5);g<m;g++){var _=d[g]&255;o[_>>e.LUMINANCE_SHIFT]++}for(var w=e.estimateBlackPoint(o),E=t.getMatrix(),c=0;c<i;c++)for(var S=c*r,g=0;g<r;g++){var _=E[S+g]&255;_<w&&a.set(g,c)}return a},e.prototype.createBinarizer=function(t){return new e(t)},e.prototype.initArrays=function(t){this.luminances.length<t&&(this.luminances=new Uint8ClampedArray(t));for(var r=this.buckets,i=0;i<e.LUMINANCE_BUCKETS;i++)r[i]=0},e.estimateBlackPoint=function(t){for(var r=t.length,i=0,a=0,o=0,c=0;c<r;c++)t[c]>o&&(a=c,o=t[c]),t[c]>i&&(i=t[c]);for(var u=0,d=0,c=0;c<r;c++){var m=c-a,g=t[c]*m*m;g>d&&(u=c,d=g)}if(a>u){var _=a;a=u,u=_}if(u-a<=r/16)throw new oe;for(var w=u-1,E=-1,c=u-1;c>a;c--){var S=c-a,g=S*S*(u-c)*(i-t[c]);g>E&&(w=c,E=g)}return w<<e.LUMINANCE_SHIFT},e.LUMINANCE_BITS=5,e.LUMINANCE_SHIFT=8-e.LUMINANCE_BITS,e.LUMINANCE_BUCKETS=1<<e.LUMINANCE_BITS,e.EMPTY=Uint8ClampedArray.from([0]),e})(WP),sk=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),O3=(function(n){sk(e,n);function e(t){var r=n.call(this,t)||this;return r.matrix=null,r}return e.prototype.getBlackMatrix=function(){if(this.matrix!==null)return this.matrix;var t=this.getLuminanceSource(),r=t.getWidth(),i=t.getHeight();if(r>=e.MINIMUM_DIMENSION&&i>=e.MINIMUM_DIMENSION){var a=t.getMatrix(),o=r>>e.BLOCK_SIZE_POWER;(r&e.BLOCK_SIZE_MASK)!==0&&o++;var c=i>>e.BLOCK_SIZE_POWER;(i&e.BLOCK_SIZE_MASK)!==0&&c++;var u=e.calculateBlackPoints(a,o,c,r,i),d=new Ta(r,i);e.calculateThresholdForBlock(a,o,c,r,i,u,d),this.matrix=d}else this.matrix=n.prototype.getBlackMatrix.call(this);return this.matrix},e.prototype.createBinarizer=function(t){return new e(t)},e.calculateThresholdForBlock=function(t,r,i,a,o,c,u){for(var d=o-e.BLOCK_SIZE,m=a-e.BLOCK_SIZE,g=0;g<i;g++){var _=g<<e.BLOCK_SIZE_POWER;_>d&&(_=d);for(var w=e.cap(g,2,i-3),E=0;E<r;E++){var S=E<<e.BLOCK_SIZE_POWER;S>m&&(S=m);for(var D=e.cap(E,2,r-3),C=0,k=-2;k<=2;k++){var V=c[w+k];C+=V[D-2]+V[D-1]+V[D]+V[D+1]+V[D+2]}var U=C/25;e.thresholdBlock(t,S,_,U,a,u)}}},e.cap=function(t,r,i){return t<r?r:t>i?i:t},e.thresholdBlock=function(t,r,i,a,o,c){for(var u=0,d=i*o+r;u<e.BLOCK_SIZE;u++,d+=o)for(var m=0;m<e.BLOCK_SIZE;m++)(t[d+m]&255)<=a&&c.set(r+m,i+u)},e.calculateBlackPoints=function(t,r,i,a,o){for(var c=o-e.BLOCK_SIZE,u=a-e.BLOCK_SIZE,d=new Array(i),m=0;m<i;m++){d[m]=new Int32Array(r);var g=m<<e.BLOCK_SIZE_POWER;g>c&&(g=c);for(var _=0;_<r;_++){var w=_<<e.BLOCK_SIZE_POWER;w>u&&(w=u);for(var E=0,S=255,D=0,C=0,k=g*a+w;C<e.BLOCK_SIZE;C++,k+=a){for(var V=0;V<e.BLOCK_SIZE;V++){var U=t[k+V]&255;E+=U,U<S&&(S=U),U>D&&(D=U)}if(D-S>e.MIN_DYNAMIC_RANGE)for(C++,k+=a;C<e.BLOCK_SIZE;C++,k+=a)for(var V=0;V<e.BLOCK_SIZE;V++)E+=t[k+V]&255}var q=E>>e.BLOCK_SIZE_POWER*2;if(D-S<=e.MIN_DYNAMIC_RANGE&&(q=S/2,m>0&&_>0)){var $=(d[m-1][_]+2*d[m][_-1]+d[m-1][_-1])/4;S<$&&(q=$)}d[m][_]=q}}return d},e.BLOCK_SIZE_POWER=3,e.BLOCK_SIZE=1<<e.BLOCK_SIZE_POWER,e.BLOCK_SIZE_MASK=e.BLOCK_SIZE-1,e.MINIMUM_DIMENSION=e.BLOCK_SIZE*5,e.MIN_DYNAMIC_RANGE=24,e})(ak),ed=(function(){function n(e,t){this.width=e,this.height=t}return n.prototype.getWidth=function(){return this.width},n.prototype.getHeight=function(){return this.height},n.prototype.isCropSupported=function(){return!1},n.prototype.crop=function(e,t,r,i){throw new t0("This luminance source does not support cropping.")},n.prototype.isRotateSupported=function(){return!1},n.prototype.rotateCounterClockwise=function(){throw new t0("This luminance source does not support rotation by 90 degrees.")},n.prototype.rotateCounterClockwise45=function(){throw new t0("This luminance source does not support rotation by 45 degrees.")},n.prototype.toString=function(){for(var e=new Uint8ClampedArray(this.width),t=new rt,r=0;r<this.height;r++){for(var i=this.getRow(r,e),a=0;a<this.width;a++){var o=i[a]&255,c=void 0;o<64?c="#":o<128?c="+":o<192?c=".":c=" ",t.append(c)}t.append(`
`)}return t.toString()},n})(),ok=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Ep=(function(n){ok(e,n);function e(t){var r=n.call(this,t.getWidth(),t.getHeight())||this;return r.delegate=t,r}return e.prototype.getRow=function(t,r){for(var i=this.delegate.getRow(t,r),a=this.getWidth(),o=0;o<a;o++)i[o]=255-(i[o]&255);return i},e.prototype.getMatrix=function(){for(var t=this.delegate.getMatrix(),r=this.getWidth()*this.getHeight(),i=new Uint8ClampedArray(r),a=0;a<r;a++)i[a]=255-(t[a]&255);return i},e.prototype.isCropSupported=function(){return this.delegate.isCropSupported()},e.prototype.crop=function(t,r,i,a){return new e(this.delegate.crop(t,r,i,a))},e.prototype.isRotateSupported=function(){return this.delegate.isRotateSupported()},e.prototype.invert=function(){return this.delegate},e.prototype.rotateCounterClockwise=function(){return new e(this.delegate.rotateCounterClockwise())},e.prototype.rotateCounterClockwise45=function(){return new e(this.delegate.rotateCounterClockwise45())},e})(ed),lk=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),ck=(function(n){lk(e,n);function e(t,r){r===void 0&&(r=!1);var i=n.call(this,t.width,t.height)||this;return i.canvas=t,i.tempCanvasElement=null,i.buffer=e.makeBufferFromCanvasImageData(t,r),i}return e.makeBufferFromCanvasImageData=function(t,r){r===void 0&&(r=!1);var i=t.getContext("2d").getImageData(0,0,t.width,t.height);return e.toGrayscaleBuffer(i.data,t.width,t.height,r)},e.toGrayscaleBuffer=function(t,r,i,a){a===void 0&&(a=!1);var o=new Uint8ClampedArray(r*i);if(e.FRAME_INDEX=!e.FRAME_INDEX,e.FRAME_INDEX||!a)for(var c=0,u=0,d=t.length;c<d;c+=4,u++){var m=void 0,g=t[c+3];if(g===0)m=255;else{var _=t[c],w=t[c+1],E=t[c+2];m=306*_+601*w+117*E+512>>10}o[u]=m}else for(var c=0,u=0,S=t.length;c<S;c+=4,u++){var m=void 0,g=t[c+3];if(g===0)m=255;else{var _=t[c],w=t[c+1],E=t[c+2];m=306*_+601*w+117*E+512>>10}o[u]=255-m}return o},e.prototype.getRow=function(t,r){if(t<0||t>=this.getHeight())throw new Be("Requested row is outside the image: "+t);var i=this.getWidth(),a=t*i;return r===null?r=this.buffer.slice(a,a+i):(r.length<i&&(r=new Uint8ClampedArray(i)),r.set(this.buffer.slice(a,a+i))),r},e.prototype.getMatrix=function(){return this.buffer},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(t,r,i,a){return n.prototype.crop.call(this,t,r,i,a),this},e.prototype.isRotateSupported=function(){return!0},e.prototype.rotateCounterClockwise=function(){return this.rotate(-90),this},e.prototype.rotateCounterClockwise45=function(){return this.rotate(-45),this},e.prototype.getTempCanvasElement=function(){if(this.tempCanvasElement===null){var t=this.canvas.ownerDocument.createElement("canvas");t.width=this.canvas.width,t.height=this.canvas.height,this.tempCanvasElement=t}return this.tempCanvasElement},e.prototype.rotate=function(t){var r=this.getTempCanvasElement(),i=r.getContext("2d"),a=t*e.DEGREE_TO_RADIANS,o=this.canvas.width,c=this.canvas.height,u=Math.ceil(Math.abs(Math.cos(a))*o+Math.abs(Math.sin(a))*c),d=Math.ceil(Math.abs(Math.sin(a))*o+Math.abs(Math.cos(a))*c);return r.width=u,r.height=d,i.translate(u/2,d/2),i.rotate(a),i.drawImage(this.canvas,o/-2,c/-2),this.buffer=e.makeBufferFromCanvasImageData(r),this},e.prototype.invert=function(){return new Ep(this)},e.DEGREE_TO_RADIANS=Math.PI/180,e.FRAME_INDEX=!0,e})(ed),uk=(function(){function n(e,t,r){this.deviceId=e,this.label=t,this.kind="videoinput",this.groupId=r||void 0}return n.prototype.toJSON=function(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}},n})(),Ar=function(n,e,t,r){function i(a){return a instanceof t?a:new t(function(o){o(a)})}return new(t||(t=Promise))(function(a,o){function c(m){try{d(r.next(m))}catch(g){o(g)}}function u(m){try{d(r.throw(m))}catch(g){o(g)}}function d(m){m.done?a(m.value):i(m.value).then(c,u)}d((r=r.apply(n,e||[])).next())})},br=function(n,e){var t={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,i,a,o;return o={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function c(d){return function(m){return u([d,m])}}function u(d){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,i&&(a=d[0]&2?i.return:d[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,d[1])).done)return a;switch(i=0,a&&(d=[d[0]&2,a.value]),d[0]){case 0:case 1:a=d;break;case 4:return t.label++,{value:d[1],done:!1};case 5:t.label++,i=d[1],d=[0];continue;case 7:d=t.ops.pop(),t.trys.pop();continue;default:if(a=t.trys,!(a=a.length>0&&a[a.length-1])&&(d[0]===6||d[0]===2)){t=0;continue}if(d[0]===3&&(!a||d[1]>a[0]&&d[1]<a[3])){t.label=d[1];break}if(d[0]===6&&t.label<a[1]){t.label=a[1],a=d;break}if(a&&t.label<a[2]){t.label=a[2],t.ops.push(d);break}a[2]&&t.ops.pop(),t.trys.pop();continue}d=e.call(n,t)}catch(m){d=[6,m],i=0}finally{r=a=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},fk=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},$c=(function(){function n(e,t,r){t===void 0&&(t=500),this.reader=e,this.timeBetweenScansMillis=t,this._hints=r,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}return Object.defineProperty(n.prototype,"hasNavigator",{get:function(){return typeof navigator<"u"},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isMediaDevicesSuported",{get:function(){return this.hasNavigator&&!!navigator.mediaDevices},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"canEnumerateDevices",{get:function(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"timeBetweenDecodingAttempts",{get:function(){return this._timeBetweenDecodingAttempts},set:function(e){this._timeBetweenDecodingAttempts=e<0?0:e},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"hints",{get:function(){return this._hints},set:function(e){this._hints=e||null},enumerable:!1,configurable:!0}),n.prototype.listVideoInputDevices=function(){return Ar(this,void 0,void 0,function(){var e,t,r,i,a,o,c,u,d,m,g,_;return br(this,function(w){switch(w.label){case 0:if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");return[4,navigator.mediaDevices.enumerateDevices()];case 1:e=w.sent(),t=[];try{for(r=fk(e),i=r.next();!i.done;i=r.next())a=i.value,o=a.kind==="video"?"videoinput":a.kind,o==="videoinput"&&(c=a.deviceId||a.id,u=a.label||"Video device "+(t.length+1),d=a.groupId,m={deviceId:c,label:u,kind:o,groupId:d},t.push(m))}catch(E){g={error:E}}finally{try{i&&!i.done&&(_=r.return)&&_.call(r)}finally{if(g)throw g.error}}return[2,t]}})})},n.prototype.getVideoInputDevices=function(){return Ar(this,void 0,void 0,function(){var e;return br(this,function(t){switch(t.label){case 0:return[4,this.listVideoInputDevices()];case 1:return e=t.sent(),[2,e.map(function(r){return new uk(r.deviceId,r.label)})]}})})},n.prototype.findDeviceById=function(e){return Ar(this,void 0,void 0,function(){var t;return br(this,function(r){switch(r.label){case 0:return[4,this.listVideoInputDevices()];case 1:return t=r.sent(),t?[2,t.find(function(i){return i.deviceId===e})]:[2,null]}})})},n.prototype.decodeFromInputVideoDevice=function(e,t){return Ar(this,void 0,void 0,function(){return br(this,function(r){switch(r.label){case 0:return[4,this.decodeOnceFromVideoDevice(e,t)];case 1:return[2,r.sent()]}})})},n.prototype.decodeOnceFromVideoDevice=function(e,t){return Ar(this,void 0,void 0,function(){var r,i;return br(this,function(a){switch(a.label){case 0:return this.reset(),e?r={deviceId:{exact:e}}:r={facingMode:"environment"},i={video:r},[4,this.decodeOnceFromConstraints(i,t)];case 1:return[2,a.sent()]}})})},n.prototype.decodeOnceFromConstraints=function(e,t){return Ar(this,void 0,void 0,function(){var r;return br(this,function(i){switch(i.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return r=i.sent(),[4,this.decodeOnceFromStream(r,t)];case 2:return[2,i.sent()]}})})},n.prototype.decodeOnceFromStream=function(e,t){return Ar(this,void 0,void 0,function(){var r,i;return br(this,function(a){switch(a.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,t)];case 1:return r=a.sent(),[4,this.decodeOnce(r)];case 2:return i=a.sent(),[2,i]}})})},n.prototype.decodeFromInputVideoDeviceContinuously=function(e,t,r){return Ar(this,void 0,void 0,function(){return br(this,function(i){switch(i.label){case 0:return[4,this.decodeFromVideoDevice(e,t,r)];case 1:return[2,i.sent()]}})})},n.prototype.decodeFromVideoDevice=function(e,t,r){return Ar(this,void 0,void 0,function(){var i,a;return br(this,function(o){switch(o.label){case 0:return e?i={deviceId:{exact:e}}:i={facingMode:"environment"},a={video:i},[4,this.decodeFromConstraints(a,t,r)];case 1:return[2,o.sent()]}})})},n.prototype.decodeFromConstraints=function(e,t,r){return Ar(this,void 0,void 0,function(){var i;return br(this,function(a){switch(a.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return i=a.sent(),[4,this.decodeFromStream(i,t,r)];case 2:return[2,a.sent()]}})})},n.prototype.decodeFromStream=function(e,t,r){return Ar(this,void 0,void 0,function(){var i;return br(this,function(a){switch(a.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,t)];case 1:return i=a.sent(),[4,this.decodeContinuously(i,r)];case 2:return[2,a.sent()]}})})},n.prototype.stopAsyncDecode=function(){this._stopAsyncDecode=!0},n.prototype.stopContinuousDecode=function(){this._stopContinuousDecode=!0},n.prototype.attachStreamToVideo=function(e,t){return Ar(this,void 0,void 0,function(){var r;return br(this,function(i){switch(i.label){case 0:return r=this.prepareVideoElement(t),this.addVideoSource(r,e),this.videoElement=r,this.stream=e,[4,this.playVideoOnLoadAsync(r)];case 1:return i.sent(),[2,r]}})})},n.prototype.playVideoOnLoadAsync=function(e){var t=this;return new Promise(function(r,i){return t.playVideoOnLoad(e,function(){return r()})})},n.prototype.playVideoOnLoad=function(e,t){var r=this;this.videoEndedListener=function(){return r.stopStreams()},this.videoCanPlayListener=function(){return r.tryPlayVideo(e)},e.addEventListener("ended",this.videoEndedListener),e.addEventListener("canplay",this.videoCanPlayListener),e.addEventListener("playing",t),this.tryPlayVideo(e)},n.prototype.isVideoPlaying=function(e){return e.currentTime>0&&!e.paused&&!e.ended&&e.readyState>2},n.prototype.tryPlayVideo=function(e){return Ar(this,void 0,void 0,function(){return br(this,function(t){switch(t.label){case 0:if(this.isVideoPlaying(e))return console.warn("Trying to play video that is already playing."),[2];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,e.play()];case 2:return t.sent(),[3,4];case 3:return t.sent(),console.warn("It was not possible to play the video."),[3,4];case 4:return[2]}})})},n.prototype.getMediaElement=function(e,t){var r=document.getElementById(e);if(!r)throw new mn("element with id '"+e+"' not found");if(r.nodeName.toLowerCase()!==t.toLowerCase())throw new mn("element with id '"+e+"' must be an "+t+" element");return r},n.prototype.decodeFromImage=function(e,t){if(!e&&!t)throw new mn("either imageElement with a src set or an url must be provided");return t&&!e?this.decodeFromImageUrl(t):this.decodeFromImageElement(e)},n.prototype.decodeFromVideo=function(e,t){if(!e&&!t)throw new mn("Either an element with a src set or an URL must be provided");return t&&!e?this.decodeFromVideoUrl(t):this.decodeFromVideoElement(e)},n.prototype.decodeFromVideoContinuously=function(e,t,r){if(e===void 0&&t===void 0)throw new mn("Either an element with a src set or an URL must be provided");return t&&!e?this.decodeFromVideoUrlContinuously(t,r):this.decodeFromVideoElementContinuously(e,r)},n.prototype.decodeFromImageElement=function(e){if(!e)throw new mn("An image element must be provided.");this.reset();var t=this.prepareImageElement(e);this.imageElement=t;var r;return this.isImageLoaded(t)?r=this.decodeOnce(t,!1,!0):r=this._decodeOnLoadImage(t),r},n.prototype.decodeFromVideoElement=function(e){var t=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideo(t)},n.prototype.decodeFromVideoElementContinuously=function(e,t){var r=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideoContinuously(r,t)},n.prototype._decodeFromVideoElementSetup=function(e){if(!e)throw new mn("A video element must be provided.");this.reset();var t=this.prepareVideoElement(e);return this.videoElement=t,t},n.prototype.decodeFromImageUrl=function(e){if(!e)throw new mn("An URL must be provided.");this.reset();var t=this.prepareImageElement();this.imageElement=t;var r=this._decodeOnLoadImage(t);return t.src=e,r},n.prototype.decodeFromVideoUrl=function(e){if(!e)throw new mn("An URL must be provided.");this.reset();var t=this.prepareVideoElement(),r=this.decodeFromVideoElement(t);return t.src=e,r},n.prototype.decodeFromVideoUrlContinuously=function(e,t){if(!e)throw new mn("An URL must be provided.");this.reset();var r=this.prepareVideoElement(),i=this.decodeFromVideoElementContinuously(r,t);return r.src=e,i},n.prototype._decodeOnLoadImage=function(e){var t=this;return new Promise(function(r,i){t.imageLoadedListener=function(){return t.decodeOnce(e,!1,!0).then(r,i)},e.addEventListener("load",t.imageLoadedListener)})},n.prototype._decodeOnLoadVideo=function(e){return Ar(this,void 0,void 0,function(){return br(this,function(t){switch(t.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return t.sent(),[4,this.decodeOnce(e)];case 2:return[2,t.sent()]}})})},n.prototype._decodeOnLoadVideoContinuously=function(e,t){return Ar(this,void 0,void 0,function(){return br(this,function(r){switch(r.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return r.sent(),this.decodeContinuously(e,t),[2]}})})},n.prototype.isImageLoaded=function(e){return!(!e.complete||e.naturalWidth===0)},n.prototype.prepareImageElement=function(e){var t;return typeof e>"u"&&(t=document.createElement("img"),t.width=200,t.height=200),typeof e=="string"&&(t=this.getMediaElement(e,"img")),e instanceof HTMLImageElement&&(t=e),t},n.prototype.prepareVideoElement=function(e){var t;return!e&&typeof document<"u"&&(t=document.createElement("video"),t.width=200,t.height=200),typeof e=="string"&&(t=this.getMediaElement(e,"video")),e instanceof HTMLVideoElement&&(t=e),t.setAttribute("autoplay","true"),t.setAttribute("muted","true"),t.setAttribute("playsinline","true"),t},n.prototype.decodeOnce=function(e,t,r){var i=this;t===void 0&&(t=!0),r===void 0&&(r=!0),this._stopAsyncDecode=!1;var a=function(o,c){if(i._stopAsyncDecode){c(new oe("Video stream has ended before any code could be detected.")),i._stopAsyncDecode=void 0;return}try{var u=i.decode(e);o(u)}catch(_){var d=t&&_ instanceof oe,m=_ instanceof Tn||_ instanceof _e,g=m&&r;if(d||g)return setTimeout(a,i._timeBetweenDecodingAttempts,o,c);c(_)}};return new Promise(function(o,c){return a(o,c)})},n.prototype.decodeContinuously=function(e,t){var r=this;this._stopContinuousDecode=!1;var i=function(){if(r._stopContinuousDecode){r._stopContinuousDecode=void 0;return}try{var a=r.decode(e);t(a,null),setTimeout(i,r.timeBetweenScansMillis)}catch(u){t(null,u);var o=u instanceof Tn||u instanceof _e,c=u instanceof oe;(o||c)&&setTimeout(i,r._timeBetweenDecodingAttempts)}};i()},n.prototype.decode=function(e){var t=this.createBinaryBitmap(e);return this.decodeBitmap(t)},n.prototype.createBinaryBitmap=function(e){this.getCaptureCanvasContext(e);var t=!1;e instanceof HTMLVideoElement?(this.drawFrameOnCanvas(e),t=!0):this.drawImageOnCanvas(e);var r=this.getCaptureCanvas(e),i=new ck(r,t),a=new O3(i);return new R3(a)},n.prototype.getCaptureCanvasContext=function(e){if(!this.captureCanvasContext){var t=this.getCaptureCanvas(e),r=void 0;try{r=t.getContext("2d",{willReadFrequently:!0})}catch{r=t.getContext("2d")}this.captureCanvasContext=r}return this.captureCanvasContext},n.prototype.getCaptureCanvas=function(e){if(!this.captureCanvas){var t=this.createCaptureCanvas(e);this.captureCanvas=t}return this.captureCanvas},n.prototype.drawFrameOnCanvas=function(e,t,r){t===void 0&&(t={sx:0,sy:0,sWidth:e.videoWidth,sHeight:e.videoHeight,dx:0,dy:0,dWidth:e.videoWidth,dHeight:e.videoHeight}),r===void 0&&(r=this.captureCanvasContext),r.drawImage(e,t.sx,t.sy,t.sWidth,t.sHeight,t.dx,t.dy,t.dWidth,t.dHeight)},n.prototype.drawImageOnCanvas=function(e,t,r){t===void 0&&(t={sx:0,sy:0,sWidth:e.naturalWidth,sHeight:e.naturalHeight,dx:0,dy:0,dWidth:e.naturalWidth,dHeight:e.naturalHeight}),r===void 0&&(r=this.captureCanvasContext),r.drawImage(e,t.sx,t.sy,t.sWidth,t.sHeight,t.dx,t.dy,t.dWidth,t.dHeight)},n.prototype.decodeBitmap=function(e){return this.reader.decode(e,this._hints)},n.prototype.createCaptureCanvas=function(e){if(typeof document>"u")return this._destroyCaptureCanvas(),null;var t=document.createElement("canvas"),r,i;return typeof e<"u"&&(e instanceof HTMLVideoElement?(r=e.videoWidth,i=e.videoHeight):e instanceof HTMLImageElement&&(r=e.naturalWidth||e.width,i=e.naturalHeight||e.height)),t.style.width=r+"px",t.style.height=i+"px",t.width=r,t.height=i,t},n.prototype.stopStreams=function(){this.stream&&(this.stream.getVideoTracks().forEach(function(e){return e.stop()}),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()},n.prototype.reset=function(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()},n.prototype._destroyVideoElement=function(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)},n.prototype._destroyImageElement=function(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)},n.prototype._destroyCaptureCanvas=function(){this.captureCanvasContext=void 0,this.captureCanvas=void 0},n.prototype.addVideoSource=function(e,t){try{e.srcObject=t}catch{e.src=URL.createObjectURL(t)}},n.prototype.cleanVideoSource=function(e){try{e.srcObject=null}catch{e.src=""}this.videoElement.removeAttribute("src")},n})(),yr=(function(){function n(e,t,r,i,a,o){r===void 0&&(r=t==null?0:8*t.length),o===void 0&&(o=Gt.currentTimeMillis()),this.text=e,this.rawBytes=t,this.numBits=r,this.resultPoints=i,this.format=a,this.timestamp=o,this.text=e,this.rawBytes=t,r==null?this.numBits=t==null?0:8*t.length:this.numBits=r,this.resultPoints=i,this.format=a,this.resultMetadata=null,o==null?this.timestamp=Gt.currentTimeMillis():this.timestamp=o}return n.prototype.getText=function(){return this.text},n.prototype.getRawBytes=function(){return this.rawBytes},n.prototype.getNumBits=function(){return this.numBits},n.prototype.getResultPoints=function(){return this.resultPoints},n.prototype.getBarcodeFormat=function(){return this.format},n.prototype.getResultMetadata=function(){return this.resultMetadata},n.prototype.putMetadata=function(e,t){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(e,t)},n.prototype.putAllMetadata=function(e){e!==null&&(this.resultMetadata===null?this.resultMetadata=e:this.resultMetadata=new Map(e))},n.prototype.addResultPoints=function(e){var t=this.resultPoints;if(t===null)this.resultPoints=e;else if(e!==null&&e.length>0){var r=new Array(t.length+e.length);Gt.arraycopy(t,0,r,0,t.length),Gt.arraycopy(e,0,r,t.length,e.length),this.resultPoints=r}},n.prototype.getTimestamp=function(){return this.timestamp},n.prototype.toString=function(){return this.text},n})(),pv;(function(n){n[n.AZTEC=0]="AZTEC",n[n.CODABAR=1]="CODABAR",n[n.CODE_39=2]="CODE_39",n[n.CODE_93=3]="CODE_93",n[n.CODE_128=4]="CODE_128",n[n.DATA_MATRIX=5]="DATA_MATRIX",n[n.EAN_8=6]="EAN_8",n[n.EAN_13=7]="EAN_13",n[n.ITF=8]="ITF",n[n.MAXICODE=9]="MAXICODE",n[n.PDF_417=10]="PDF_417",n[n.QR_CODE=11]="QR_CODE",n[n.RSS_14=12]="RSS_14",n[n.RSS_EXPANDED=13]="RSS_EXPANDED",n[n.UPC_A=14]="UPC_A",n[n.UPC_E=15]="UPC_E",n[n.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(pv||(pv={}));const Le=pv;var mv;(function(n){n[n.OTHER=0]="OTHER",n[n.ORIENTATION=1]="ORIENTATION",n[n.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",n[n.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",n[n.ISSUE_NUMBER=4]="ISSUE_NUMBER",n[n.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",n[n.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",n[n.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",n[n.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",n[n.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",n[n.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(mv||(mv={}));const cr=mv;var Ap=(function(){function n(e,t,r,i,a,o){a===void 0&&(a=-1),o===void 0&&(o=-1),this.rawBytes=e,this.text=t,this.byteSegments=r,this.ecLevel=i,this.structuredAppendSequenceNumber=a,this.structuredAppendParity=o,this.numBits=e==null?0:8*e.length}return n.prototype.getRawBytes=function(){return this.rawBytes},n.prototype.getNumBits=function(){return this.numBits},n.prototype.setNumBits=function(e){this.numBits=e},n.prototype.getText=function(){return this.text},n.prototype.getByteSegments=function(){return this.byteSegments},n.prototype.getECLevel=function(){return this.ecLevel},n.prototype.getErrorsCorrected=function(){return this.errorsCorrected},n.prototype.setErrorsCorrected=function(e){this.errorsCorrected=e},n.prototype.getErasures=function(){return this.erasures},n.prototype.setErasures=function(e){this.erasures=e},n.prototype.getOther=function(){return this.other},n.prototype.setOther=function(e){this.other=e},n.prototype.hasStructuredAppend=function(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0},n.prototype.getStructuredAppendParity=function(){return this.structuredAppendParity},n.prototype.getStructuredAppendSequenceNumber=function(){return this.structuredAppendSequenceNumber},n})(),cf=(function(){function n(){}return n.prototype.exp=function(e){return this.expTable[e]},n.prototype.log=function(e){if(e===0)throw new Be;return this.logTable[e]},n.addOrSubtract=function(e,t){return e^t},n})(),no=(function(){function n(e,t){if(t.length===0)throw new Be;this.field=e;var r=t.length;if(r>1&&t[0]===0){for(var i=1;i<r&&t[i]===0;)i++;i===r?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(r-i),Gt.arraycopy(t,i,this.coefficients,0,this.coefficients.length))}else this.coefficients=t}return n.prototype.getCoefficients=function(){return this.coefficients},n.prototype.getDegree=function(){return this.coefficients.length-1},n.prototype.isZero=function(){return this.coefficients[0]===0},n.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},n.prototype.evaluateAt=function(e){if(e===0)return this.getCoefficient(0);var t=this.coefficients,r;if(e===1){r=0;for(var i=0,a=t.length;i!==a;i++){var o=t[i];r=cf.addOrSubtract(r,o)}return r}r=t[0];for(var c=t.length,u=this.field,i=1;i<c;i++)r=cf.addOrSubtract(u.multiply(e,r),t[i]);return r},n.prototype.addOrSubtract=function(e){if(!this.field.equals(e.field))throw new Be("GenericGFPolys do not have same GenericGF field");if(this.isZero())return e;if(e.isZero())return this;var t=this.coefficients,r=e.coefficients;if(t.length>r.length){var i=t;t=r,r=i}var a=new Int32Array(r.length),o=r.length-t.length;Gt.arraycopy(r,0,a,0,o);for(var c=o;c<r.length;c++)a[c]=cf.addOrSubtract(t[c-o],r[c]);return new n(this.field,a)},n.prototype.multiply=function(e){if(!this.field.equals(e.field))throw new Be("GenericGFPolys do not have same GenericGF field");if(this.isZero()||e.isZero())return this.field.getZero();for(var t=this.coefficients,r=t.length,i=e.coefficients,a=i.length,o=new Int32Array(r+a-1),c=this.field,u=0;u<r;u++)for(var d=t[u],m=0;m<a;m++)o[u+m]=cf.addOrSubtract(o[u+m],c.multiply(d,i[m]));return new n(c,o)},n.prototype.multiplyScalar=function(e){if(e===0)return this.field.getZero();if(e===1)return this;for(var t=this.coefficients.length,r=this.field,i=new Int32Array(t),a=this.coefficients,o=0;o<t;o++)i[o]=r.multiply(a[o],e);return new n(r,i)},n.prototype.multiplyByMonomial=function(e,t){if(e<0)throw new Be;if(t===0)return this.field.getZero();for(var r=this.coefficients,i=r.length,a=new Int32Array(i+e),o=this.field,c=0;c<i;c++)a[c]=o.multiply(r[c],t);return new n(o,a)},n.prototype.divide=function(e){if(!this.field.equals(e.field))throw new Be("GenericGFPolys do not have same GenericGF field");if(e.isZero())throw new Be("Divide by 0");for(var t=this.field,r=t.getZero(),i=this,a=e.getCoefficient(e.getDegree()),o=t.inverse(a);i.getDegree()>=e.getDegree()&&!i.isZero();){var c=i.getDegree()-e.getDegree(),u=t.multiply(i.getCoefficient(i.getDegree()),o),d=e.multiplyByMonomial(c,u),m=t.buildMonomial(c,u);r=r.addOrSubtract(m),i=i.addOrSubtract(d)}return[r,i]},n.prototype.toString=function(){for(var e="",t=this.getDegree();t>=0;t--){var r=this.getCoefficient(t);if(r!==0){if(r<0?(e+=" - ",r=-r):e.length>0&&(e+=" + "),t===0||r!==1){var i=this.field.log(r);i===0?e+="1":i===1?e+="a":(e+="a^",e+=i)}t!==0&&(t===1?e+="x":(e+="x^",e+=t))}}return e},n})(),dk=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),D3=(function(n){dk(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="ArithmeticException",e})(Ur),hk=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Br=(function(n){hk(e,n);function e(t,r,i){var a=n.call(this)||this;a.primitive=t,a.size=r,a.generatorBase=i;for(var o=new Int32Array(r),c=1,u=0;u<r;u++)o[u]=c,c*=2,c>=r&&(c^=t,c&=r-1);a.expTable=o;for(var d=new Int32Array(r),u=0;u<r-1;u++)d[o[u]]=u;return a.logTable=d,a.zero=new no(a,Int32Array.from([0])),a.one=new no(a,Int32Array.from([1])),a}return e.prototype.getZero=function(){return this.zero},e.prototype.getOne=function(){return this.one},e.prototype.buildMonomial=function(t,r){if(t<0)throw new Be;if(r===0)return this.zero;var i=new Int32Array(t+1);return i[0]=r,new no(this,i)},e.prototype.inverse=function(t){if(t===0)throw new D3;return this.expTable[this.size-this.logTable[t]-1]},e.prototype.multiply=function(t,r){return t===0||r===0?0:this.expTable[(this.logTable[t]+this.logTable[r])%(this.size-1)]},e.prototype.getSize=function(){return this.size},e.prototype.getGeneratorBase=function(){return this.generatorBase},e.prototype.toString=function(){return"GF(0x"+it.toHexString(this.primitive)+","+this.size+")"},e.prototype.equals=function(t){return t===this},e.AZTEC_DATA_12=new e(4201,4096,1),e.AZTEC_DATA_10=new e(1033,1024,1),e.AZTEC_DATA_6=new e(67,64,1),e.AZTEC_PARAM=new e(19,16,1),e.QR_CODE_FIELD_256=new e(285,256,0),e.DATA_MATRIX_FIELD_256=new e(301,256,1),e.AZTEC_DATA_8=e.DATA_MATRIX_FIELD_256,e.MAXICODE_FIELD_64=e.AZTEC_DATA_6,e})(cf),pk=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),jh=(function(n){pk(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="ReedSolomonException",e})(Ur),mk=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),td=(function(n){mk(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="IllegalStateException",e})(Ur),bp=(function(){function n(e){this.field=e}return n.prototype.decode=function(e,t){for(var r=this.field,i=new no(r,e),a=new Int32Array(t),o=!0,c=0;c<t;c++){var u=i.evaluateAt(r.exp(c+r.getGeneratorBase()));a[a.length-1-c]=u,u!==0&&(o=!1)}if(!o)for(var d=new no(r,a),m=this.runEuclideanAlgorithm(r.buildMonomial(t,1),d,t),g=m[0],_=m[1],w=this.findErrorLocations(g),E=this.findErrorMagnitudes(_,w),c=0;c<w.length;c++){var S=e.length-1-r.log(w[c]);if(S<0)throw new jh("Bad error location");e[S]=Br.addOrSubtract(e[S],E[c])}},n.prototype.runEuclideanAlgorithm=function(e,t,r){if(e.getDegree()<t.getDegree()){var i=e;e=t,t=i}for(var a=this.field,o=e,c=t,u=a.getZero(),d=a.getOne();c.getDegree()>=(r/2|0);){var m=o,g=u;if(o=c,u=d,o.isZero())throw new jh("r_{i-1} was zero");c=m;for(var _=a.getZero(),w=o.getCoefficient(o.getDegree()),E=a.inverse(w);c.getDegree()>=o.getDegree()&&!c.isZero();){var S=c.getDegree()-o.getDegree(),D=a.multiply(c.getCoefficient(c.getDegree()),E);_=_.addOrSubtract(a.buildMonomial(S,D)),c=c.addOrSubtract(o.multiplyByMonomial(S,D))}if(d=_.multiply(u).addOrSubtract(g),c.getDegree()>=o.getDegree())throw new td("Division algorithm failed to reduce polynomial?")}var C=d.getCoefficient(0);if(C===0)throw new jh("sigmaTilde(0) was zero");var k=a.inverse(C),V=d.multiplyScalar(k),U=c.multiplyScalar(k);return[V,U]},n.prototype.findErrorLocations=function(e){var t=e.getDegree();if(t===1)return Int32Array.from([e.getCoefficient(1)]);for(var r=new Int32Array(t),i=0,a=this.field,o=1;o<a.getSize()&&i<t;o++)e.evaluateAt(o)===0&&(r[i]=a.inverse(o),i++);if(i!==t)throw new jh("Error locator degree does not match number of roots");return r},n.prototype.findErrorMagnitudes=function(e,t){for(var r=t.length,i=new Int32Array(r),a=this.field,o=0;o<r;o++){for(var c=a.inverse(t[o]),u=1,d=0;d<r;d++)if(o!==d){var m=a.multiply(t[d],c),g=(m&1)===0?m|1:m&-2;u=a.multiply(u,g)}i[o]=a.multiply(e.evaluateAt(c),a.inverse(u)),a.getGeneratorBase()!==0&&(i[o]=a.multiply(i[o],c))}return i},n})(),ir;(function(n){n[n.UPPER=0]="UPPER",n[n.LOWER=1]="LOWER",n[n.MIXED=2]="MIXED",n[n.DIGIT=3]="DIGIT",n[n.PUNCT=4]="PUNCT",n[n.BINARY=5]="BINARY"})(ir||(ir={}));var DA=(function(){function n(){}return n.prototype.decode=function(e){this.ddata=e;var t=e.getBits(),r=this.extractBits(t),i=this.correctBits(r),a=n.convertBoolArrayToByteArray(i),o=n.getEncodedData(i),c=new Ap(a,o,null,null);return c.setNumBits(i.length),c},n.highLevelDecode=function(e){return this.getEncodedData(e)},n.getEncodedData=function(e){for(var t=e.length,r=ir.UPPER,i=ir.UPPER,a="",o=0;o<t;)if(i===ir.BINARY){if(t-o<5)break;var c=n.readCode(e,o,5);if(o+=5,c===0){if(t-o<11)break;c=n.readCode(e,o,11)+31,o+=11}for(var u=0;u<c;u++){if(t-o<8){o=t;break}var d=n.readCode(e,o,8);a+=pt.castAsNonUtf8Char(d),o+=8}i=r}else{var m=i===ir.DIGIT?4:5;if(t-o<m)break;var d=n.readCode(e,o,m);o+=m;var g=n.getCharacter(i,d);g.startsWith("CTRL_")?(r=i,i=n.getTable(g.charAt(5)),g.charAt(6)==="L"&&(r=i)):(a+=g,i=r)}return a},n.getTable=function(e){switch(e){case"L":return ir.LOWER;case"P":return ir.PUNCT;case"M":return ir.MIXED;case"D":return ir.DIGIT;case"B":return ir.BINARY;case"U":default:return ir.UPPER}},n.getCharacter=function(e,t){switch(e){case ir.UPPER:return n.UPPER_TABLE[t];case ir.LOWER:return n.LOWER_TABLE[t];case ir.MIXED:return n.MIXED_TABLE[t];case ir.PUNCT:return n.PUNCT_TABLE[t];case ir.DIGIT:return n.DIGIT_TABLE[t];default:throw new td("Bad table")}},n.prototype.correctBits=function(e){var t,r;this.ddata.getNbLayers()<=2?(r=6,t=Br.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(r=8,t=Br.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(r=10,t=Br.AZTEC_DATA_10):(r=12,t=Br.AZTEC_DATA_12);var i=this.ddata.getNbDatablocks(),a=e.length/r;if(a<i)throw new _e;for(var o=e.length%r,c=new Int32Array(a),u=0;u<a;u++,o+=r)c[u]=n.readCode(e,o,r);try{var d=new bp(t);d.decode(c,a-i)}catch(D){throw new _e(D)}for(var m=(1<<r)-1,g=0,u=0;u<i;u++){var _=c[u];if(_===0||_===m)throw new _e;(_===1||_===m-1)&&g++}for(var w=new Array(i*r-g),E=0,u=0;u<i;u++){var _=c[u];if(_===1||_===m-1)w.fill(_>1,E,E+r-1),E+=r-1;else for(var S=r-1;S>=0;--S)w[E++]=(_&1<<S)!==0}return w},n.prototype.extractBits=function(e){var t=this.ddata.isCompact(),r=this.ddata.getNbLayers(),i=(t?11:14)+r*4,a=new Int32Array(i),o=new Array(this.totalBitsInLayer(r,t));if(t)for(var c=0;c<a.length;c++)a[c]=c;else for(var u=i+1+2*it.truncDivision(it.truncDivision(i,2)-1,15),d=i/2,m=it.truncDivision(u,2),c=0;c<d;c++){var g=c+it.truncDivision(c,15);a[d-c-1]=m-g-1,a[d+c]=m+g+1}for(var c=0,_=0;c<r;c++){for(var w=(r-c)*4+(t?9:12),E=c*2,S=i-1-E,D=0;D<w;D++)for(var C=D*2,k=0;k<2;k++)o[_+C+k]=e.get(a[E+k],a[E+D]),o[_+2*w+C+k]=e.get(a[E+D],a[S-k]),o[_+4*w+C+k]=e.get(a[S-k],a[S-D]),o[_+6*w+C+k]=e.get(a[S-D],a[E+k]);_+=w*8}return o},n.readCode=function(e,t,r){for(var i=0,a=t;a<t+r;a++)i<<=1,e[a]&&(i|=1);return i},n.readByte=function(e,t){var r=e.length-t;return r>=8?n.readCode(e,t,8):n.readCode(e,t,r)<<8-r},n.convertBoolArrayToByteArray=function(e){for(var t=new Uint8Array((e.length+7)/8),r=0;r<t.length;r++)t[r]=n.readByte(e,8*r);return t},n.prototype.totalBitsInLayer=function(e,t){return((t?88:112)+16*e)*e},n.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],n.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],n.MIXED_TABLE=["CTRL_PS"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~","","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],n.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],n.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"],n})(),wt=(function(){function n(){}return n.round=function(e){return isNaN(e)?0:e<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:e>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:e+(e<0?-.5:.5)|0},n.distance=function(e,t,r,i){var a=e-r,o=t-i;return Math.sqrt(a*a+o*o)},n.sum=function(e){for(var t=0,r=0,i=e.length;r!==i;r++){var a=e[r];t+=a}return t},n})(),gv=(function(){function n(){}return n.floatToIntBits=function(e){return e},n.MAX_VALUE=Number.MAX_SAFE_INTEGER,n})(),Ne=(function(){function n(e,t){this.x=e,this.y=t}return n.prototype.getX=function(){return this.x},n.prototype.getY=function(){return this.y},n.prototype.equals=function(e){if(e instanceof n){var t=e;return this.x===t.x&&this.y===t.y}return!1},n.prototype.hashCode=function(){return 31*gv.floatToIntBits(this.x)+gv.floatToIntBits(this.y)},n.prototype.toString=function(){return"("+this.x+","+this.y+")"},n.orderBestPatterns=function(e){var t=this.distance(e[0],e[1]),r=this.distance(e[1],e[2]),i=this.distance(e[0],e[2]),a,o,c;if(r>=t&&r>=i?(o=e[0],a=e[1],c=e[2]):i>=r&&i>=t?(o=e[1],a=e[0],c=e[2]):(o=e[2],a=e[0],c=e[1]),this.crossProductZ(a,o,c)<0){var u=a;a=c,c=u}e[0]=a,e[1]=o,e[2]=c},n.distance=function(e,t){return wt.distance(e.x,e.y,t.x,t.y)},n.crossProductZ=function(e,t,r){var i=t.x,a=t.y;return(r.x-i)*(e.y-a)-(r.y-a)*(e.x-i)},n})(),Yy=(function(){function n(e,t){this.bits=e,this.points=t}return n.prototype.getBits=function(){return this.bits},n.prototype.getPoints=function(){return this.points},n})(),gk=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),vk=(function(n){gk(e,n);function e(t,r,i,a,o){var c=n.call(this,t,r)||this;return c.compact=i,c.nbDatablocks=a,c.nbLayers=o,c}return e.prototype.getNbLayers=function(){return this.nbLayers},e.prototype.getNbDatablocks=function(){return this.nbDatablocks},e.prototype.isCompact=function(){return this.compact},e})(Yy),vv=(function(){function n(e,t,r,i){this.image=e,this.height=e.getHeight(),this.width=e.getWidth(),t==null&&(t=n.INIT_SIZE),r==null&&(r=e.getWidth()/2|0),i==null&&(i=e.getHeight()/2|0);var a=t/2|0;if(this.leftInit=r-a,this.rightInit=r+a,this.upInit=i-a,this.downInit=i+a,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new oe}return n.prototype.detect=function(){for(var e=this.leftInit,t=this.rightInit,r=this.upInit,i=this.downInit,a=!1,o=!0,c=!1,u=!1,d=!1,m=!1,g=!1,_=this.width,w=this.height;o;){o=!1;for(var E=!0;(E||!u)&&t<_;)E=this.containsBlackPoint(r,i,t,!1),E?(t++,o=!0,u=!0):u||t++;if(t>=_){a=!0;break}for(var S=!0;(S||!d)&&i<w;)S=this.containsBlackPoint(e,t,i,!0),S?(i++,o=!0,d=!0):d||i++;if(i>=w){a=!0;break}for(var D=!0;(D||!m)&&e>=0;)D=this.containsBlackPoint(r,i,e,!1),D?(e--,o=!0,m=!0):m||e--;if(e<0){a=!0;break}for(var C=!0;(C||!g)&&r>=0;)C=this.containsBlackPoint(e,t,r,!0),C?(r--,o=!0,g=!0):g||r--;if(r<0){a=!0;break}o&&(c=!0)}if(!a&&c){for(var k=t-e,V=null,U=1;V===null&&U<k;U++)V=this.getBlackPointOnSegment(e,i-U,e+U,i);if(V==null)throw new oe;for(var q=null,U=1;q===null&&U<k;U++)q=this.getBlackPointOnSegment(e,r+U,e+U,r);if(q==null)throw new oe;for(var $=null,U=1;$===null&&U<k;U++)$=this.getBlackPointOnSegment(t,r+U,t-U,r);if($==null)throw new oe;for(var M=null,U=1;M===null&&U<k;U++)M=this.getBlackPointOnSegment(t,i-U,t-U,i);if(M==null)throw new oe;return this.centerEdges(M,V,$,q)}else throw new oe},n.prototype.getBlackPointOnSegment=function(e,t,r,i){for(var a=wt.round(wt.distance(e,t,r,i)),o=(r-e)/a,c=(i-t)/a,u=this.image,d=0;d<a;d++){var m=wt.round(e+d*o),g=wt.round(t+d*c);if(u.get(m,g))return new Ne(m,g)}return null},n.prototype.centerEdges=function(e,t,r,i){var a=e.getX(),o=e.getY(),c=t.getX(),u=t.getY(),d=r.getX(),m=r.getY(),g=i.getX(),_=i.getY(),w=n.CORR;return a<this.width/2?[new Ne(g-w,_+w),new Ne(c+w,u+w),new Ne(d-w,m-w),new Ne(a+w,o-w)]:[new Ne(g+w,_+w),new Ne(c+w,u-w),new Ne(d-w,m+w),new Ne(a-w,o-w)]},n.prototype.containsBlackPoint=function(e,t,r,i){var a=this.image;if(i){for(var o=e;o<=t;o++)if(a.get(o,r))return!0}else for(var c=e;c<=t;c++)if(a.get(r,c))return!0;return!1},n.INIT_SIZE=10,n.CORR=1,n})(),MA=(function(){function n(){}return n.checkAndNudgePoints=function(e,t){for(var r=e.getWidth(),i=e.getHeight(),a=!0,o=0;o<t.length&&a;o+=2){var c=Math.floor(t[o]),u=Math.floor(t[o+1]);if(c<-1||c>r||u<-1||u>i)throw new oe;a=!1,c===-1?(t[o]=0,a=!0):c===r&&(t[o]=r-1,a=!0),u===-1?(t[o+1]=0,a=!0):u===i&&(t[o+1]=i-1,a=!0)}a=!0;for(var o=t.length-2;o>=0&&a;o-=2){var c=Math.floor(t[o]),u=Math.floor(t[o+1]);if(c<-1||c>r||u<-1||u>i)throw new oe;a=!1,c===-1?(t[o]=0,a=!0):c===r&&(t[o]=r-1,a=!0),u===-1?(t[o+1]=0,a=!0):u===i&&(t[o+1]=i-1,a=!0)}},n})(),M3=(function(){function n(e,t,r,i,a,o,c,u,d){this.a11=e,this.a21=t,this.a31=r,this.a12=i,this.a22=a,this.a32=o,this.a13=c,this.a23=u,this.a33=d}return n.quadrilateralToQuadrilateral=function(e,t,r,i,a,o,c,u,d,m,g,_,w,E,S,D){var C=n.quadrilateralToSquare(e,t,r,i,a,o,c,u),k=n.squareToQuadrilateral(d,m,g,_,w,E,S,D);return k.times(C)},n.prototype.transformPoints=function(e){for(var t=e.length,r=this.a11,i=this.a12,a=this.a13,o=this.a21,c=this.a22,u=this.a23,d=this.a31,m=this.a32,g=this.a33,_=0;_<t;_+=2){var w=e[_],E=e[_+1],S=a*w+u*E+g;e[_]=(r*w+o*E+d)/S,e[_+1]=(i*w+c*E+m)/S}},n.prototype.transformPointsWithValues=function(e,t){for(var r=this.a11,i=this.a12,a=this.a13,o=this.a21,c=this.a22,u=this.a23,d=this.a31,m=this.a32,g=this.a33,_=e.length,w=0;w<_;w++){var E=e[w],S=t[w],D=a*E+u*S+g;e[w]=(r*E+o*S+d)/D,t[w]=(i*E+c*S+m)/D}},n.squareToQuadrilateral=function(e,t,r,i,a,o,c,u){var d=e-r+a-c,m=t-i+o-u;if(d===0&&m===0)return new n(r-e,a-r,e,i-t,o-i,t,0,0,1);var g=r-a,_=c-a,w=i-o,E=u-o,S=g*E-_*w,D=(d*E-_*m)/S,C=(g*m-d*w)/S;return new n(r-e+D*r,c-e+C*c,e,i-t+D*i,u-t+C*u,t,D,C,1)},n.quadrilateralToSquare=function(e,t,r,i,a,o,c,u){return n.squareToQuadrilateral(e,t,r,i,a,o,c,u).buildAdjoint()},n.prototype.buildAdjoint=function(){return new n(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)},n.prototype.times=function(e){return new n(this.a11*e.a11+this.a21*e.a12+this.a31*e.a13,this.a11*e.a21+this.a21*e.a22+this.a31*e.a23,this.a11*e.a31+this.a21*e.a32+this.a31*e.a33,this.a12*e.a11+this.a22*e.a12+this.a32*e.a13,this.a12*e.a21+this.a22*e.a22+this.a32*e.a23,this.a12*e.a31+this.a22*e.a32+this.a32*e.a33,this.a13*e.a11+this.a23*e.a12+this.a33*e.a13,this.a13*e.a21+this.a23*e.a22+this.a33*e.a23,this.a13*e.a31+this.a23*e.a32+this.a33*e.a33)},n})(),yk=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),_k=(function(n){yk(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.sampleGrid=function(t,r,i,a,o,c,u,d,m,g,_,w,E,S,D,C,k,V,U){var q=M3.quadrilateralToQuadrilateral(a,o,c,u,d,m,g,_,w,E,S,D,C,k,V,U);return this.sampleGridWithTransform(t,r,i,q)},e.prototype.sampleGridWithTransform=function(t,r,i,a){if(r<=0||i<=0)throw new oe;for(var o=new Ta(r,i),c=new Float32Array(2*r),u=0;u<i;u++){for(var d=c.length,m=u+.5,g=0;g<d;g+=2)c[g]=g/2+.5,c[g+1]=m;a.transformPoints(c),MA.checkAndNudgePoints(t,c);try{for(var g=0;g<d;g+=2)t.get(Math.floor(c[g]),Math.floor(c[g+1]))&&o.set(g/2,u)}catch{throw new oe}}return o},e})(MA),Ky=(function(){function n(){}return n.setGridSampler=function(e){n.gridSampler=e},n.getInstance=function(){return n.gridSampler},n.gridSampler=new _k,n})(),kr=(function(){function n(e,t){this.x=e,this.y=t}return n.prototype.toResultPoint=function(){return new Ne(this.getX(),this.getY())},n.prototype.getX=function(){return this.x},n.prototype.getY=function(){return this.y},n})(),xk=(function(){function n(e){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=e}return n.prototype.detect=function(){return this.detectMirror(!1)},n.prototype.detectMirror=function(e){var t=this.getMatrixCenter(),r=this.getBullsEyeCorners(t);if(e){var i=r[0];r[0]=r[2],r[2]=i}this.extractParameters(r);var a=this.sampleGrid(this.image,r[this.shift%4],r[(this.shift+1)%4],r[(this.shift+2)%4],r[(this.shift+3)%4]),o=this.getMatrixCornerPoints(r);return new vk(a,o,this.compact,this.nbDataBlocks,this.nbLayers)},n.prototype.extractParameters=function(e){if(!this.isValidPoint(e[0])||!this.isValidPoint(e[1])||!this.isValidPoint(e[2])||!this.isValidPoint(e[3]))throw new oe;var t=2*this.nbCenterLayers,r=new Int32Array([this.sampleLine(e[0],e[1],t),this.sampleLine(e[1],e[2],t),this.sampleLine(e[2],e[3],t),this.sampleLine(e[3],e[0],t)]);this.shift=this.getRotation(r,t);for(var i=0,a=0;a<4;a++){var o=r[(this.shift+a)%4];this.compact?(i<<=7,i+=o>>1&127):(i<<=10,i+=(o>>2&992)+(o>>1&31))}var c=this.getCorrectedParameterData(i,this.compact);this.compact?(this.nbLayers=(c>>6)+1,this.nbDataBlocks=(c&63)+1):(this.nbLayers=(c>>11)+1,this.nbDataBlocks=(c&2047)+1)},n.prototype.getRotation=function(e,t){var r=0;e.forEach(function(a,o,c){var u=(a>>t-2<<1)+(a&1);r=(r<<3)+u}),r=((r&1)<<11)+(r>>1);for(var i=0;i<4;i++)if(it.bitCount(r^this.EXPECTED_CORNER_BITS[i])<=2)return i;throw new oe},n.prototype.getCorrectedParameterData=function(e,t){var r,i;t?(r=7,i=2):(r=10,i=4);for(var a=r-i,o=new Int32Array(r),c=r-1;c>=0;--c)o[c]=e&15,e>>=4;try{var u=new bp(Br.AZTEC_PARAM);u.decode(o,a)}catch{throw new oe}for(var d=0,c=0;c<i;c++)d=(d<<4)+o[c];return d},n.prototype.getBullsEyeCorners=function(e){var t=e,r=e,i=e,a=e,o=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){var c=this.getFirstDifferent(t,o,1,-1),u=this.getFirstDifferent(r,o,1,1),d=this.getFirstDifferent(i,o,-1,1),m=this.getFirstDifferent(a,o,-1,-1);if(this.nbCenterLayers>2){var g=this.distancePoint(m,c)*this.nbCenterLayers/(this.distancePoint(a,t)*(this.nbCenterLayers+2));if(g<.75||g>1.25||!this.isWhiteOrBlackRectangle(c,u,d,m))break}t=c,r=u,i=d,a=m,o=!o}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new oe;this.compact=this.nbCenterLayers===5;var _=new Ne(t.getX()+.5,t.getY()-.5),w=new Ne(r.getX()+.5,r.getY()+.5),E=new Ne(i.getX()-.5,i.getY()+.5),S=new Ne(a.getX()-.5,a.getY()-.5);return this.expandSquare([_,w,E,S],2*this.nbCenterLayers-3,2*this.nbCenterLayers)},n.prototype.getMatrixCenter=function(){var e,t,r,i;try{var a=new vv(this.image).detect();e=a[0],t=a[1],r=a[2],i=a[3]}catch{var o=this.image.getWidth()/2,c=this.image.getHeight()/2;e=this.getFirstDifferent(new kr(o+7,c-7),!1,1,-1).toResultPoint(),t=this.getFirstDifferent(new kr(o+7,c+7),!1,1,1).toResultPoint(),r=this.getFirstDifferent(new kr(o-7,c+7),!1,-1,1).toResultPoint(),i=this.getFirstDifferent(new kr(o-7,c-7),!1,-1,-1).toResultPoint()}var u=wt.round((e.getX()+i.getX()+t.getX()+r.getX())/4),d=wt.round((e.getY()+i.getY()+t.getY()+r.getY())/4);try{var a=new vv(this.image,15,u,d).detect();e=a[0],t=a[1],r=a[2],i=a[3]}catch{e=this.getFirstDifferent(new kr(u+7,d-7),!1,1,-1).toResultPoint(),t=this.getFirstDifferent(new kr(u+7,d+7),!1,1,1).toResultPoint(),r=this.getFirstDifferent(new kr(u-7,d+7),!1,-1,1).toResultPoint(),i=this.getFirstDifferent(new kr(u-7,d-7),!1,-1,-1).toResultPoint()}return u=wt.round((e.getX()+i.getX()+t.getX()+r.getX())/4),d=wt.round((e.getY()+i.getY()+t.getY()+r.getY())/4),new kr(u,d)},n.prototype.getMatrixCornerPoints=function(e){return this.expandSquare(e,2*this.nbCenterLayers,this.getDimension())},n.prototype.sampleGrid=function(e,t,r,i,a){var o=Ky.getInstance(),c=this.getDimension(),u=c/2-this.nbCenterLayers,d=c/2+this.nbCenterLayers;return o.sampleGrid(e,c,c,u,u,d,u,d,d,u,d,t.getX(),t.getY(),r.getX(),r.getY(),i.getX(),i.getY(),a.getX(),a.getY())},n.prototype.sampleLine=function(e,t,r){for(var i=0,a=this.distanceResultPoint(e,t),o=a/r,c=e.getX(),u=e.getY(),d=o*(t.getX()-e.getX())/a,m=o*(t.getY()-e.getY())/a,g=0;g<r;g++)this.image.get(wt.round(c+g*d),wt.round(u+g*m))&&(i|=1<<r-g-1);return i},n.prototype.isWhiteOrBlackRectangle=function(e,t,r,i){var a=3;e=new kr(e.getX()-a,e.getY()+a),t=new kr(t.getX()-a,t.getY()-a),r=new kr(r.getX()+a,r.getY()-a),i=new kr(i.getX()+a,i.getY()+a);var o=this.getColor(i,e);if(o===0)return!1;var c=this.getColor(e,t);return c!==o||(c=this.getColor(t,r),c!==o)?!1:(c=this.getColor(r,i),c===o)},n.prototype.getColor=function(e,t){for(var r=this.distancePoint(e,t),i=(t.getX()-e.getX())/r,a=(t.getY()-e.getY())/r,o=0,c=e.getX(),u=e.getY(),d=this.image.get(e.getX(),e.getY()),m=Math.ceil(r),g=0;g<m;g++)c+=i,u+=a,this.image.get(wt.round(c),wt.round(u))!==d&&o++;var _=o/r;return _>.1&&_<.9?0:_<=.1===d?1:-1},n.prototype.getFirstDifferent=function(e,t,r,i){for(var a=e.getX()+r,o=e.getY()+i;this.isValid(a,o)&&this.image.get(a,o)===t;)a+=r,o+=i;for(a-=r,o-=i;this.isValid(a,o)&&this.image.get(a,o)===t;)a+=r;for(a-=r;this.isValid(a,o)&&this.image.get(a,o)===t;)o+=i;return o-=i,new kr(a,o)},n.prototype.expandSquare=function(e,t,r){var i=r/(2*t),a=e[0].getX()-e[2].getX(),o=e[0].getY()-e[2].getY(),c=(e[0].getX()+e[2].getX())/2,u=(e[0].getY()+e[2].getY())/2,d=new Ne(c+i*a,u+i*o),m=new Ne(c-i*a,u-i*o);a=e[1].getX()-e[3].getX(),o=e[1].getY()-e[3].getY(),c=(e[1].getX()+e[3].getX())/2,u=(e[1].getY()+e[3].getY())/2;var g=new Ne(c+i*a,u+i*o),_=new Ne(c-i*a,u-i*o),w=[d,g,m,_];return w},n.prototype.isValid=function(e,t){return e>=0&&e<this.image.getWidth()&&t>0&&t<this.image.getHeight()},n.prototype.isValidPoint=function(e){var t=wt.round(e.getX()),r=wt.round(e.getY());return this.isValid(t,r)},n.prototype.distancePoint=function(e,t){return wt.distance(e.getX(),e.getY(),t.getX(),t.getY())},n.prototype.distanceResultPoint=function(e,t){return wt.distance(e.getX(),e.getY(),t.getX(),t.getY())},n.prototype.getDimension=function(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(it.truncDivision(this.nbLayers-4,8)+1)+15},n})(),M0=(function(){function n(){}return n.prototype.decode=function(e,t){t===void 0&&(t=null);var r=null,i=new xk(e.getBlackMatrix()),a=null,o=null;try{var c=i.detectMirror(!1);a=c.getPoints(),this.reportFoundResultPoints(t,a),o=new DA().decode(c)}catch(g){r=g}if(o==null)try{var c=i.detectMirror(!0);a=c.getPoints(),this.reportFoundResultPoints(t,a),o=new DA().decode(c)}catch(g){throw r??g}var u=new yr(o.getText(),o.getRawBytes(),o.getNumBits(),a,Le.AZTEC,Gt.currentTimeMillis()),d=o.getByteSegments();d!=null&&u.putMetadata(cr.BYTE_SEGMENTS,d);var m=o.getECLevel();return m!=null&&u.putMetadata(cr.ERROR_CORRECTION_LEVEL,m),u},n.prototype.reportFoundResultPoints=function(e,t){if(e!=null){var r=e.get(qt.NEED_RESULT_POINT_CALLBACK);r!=null&&t.forEach(function(i,a,o){r.foundPossibleResultPoint(i)})}},n.prototype.reset=function(){},n})(),wk=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})();(function(n){wk(e,n);function e(t){return t===void 0&&(t=500),n.call(this,new M0,t)||this}return e})($c);var kn=(function(){function n(){}return n.prototype.decode=function(e,t){try{return this.doDecode(e,t)}catch{var r=t&&t.get(qt.TRY_HARDER)===!0;if(r&&e.isRotateSupported()){var i=e.rotateCounterClockwise(),a=this.doDecode(i,t),o=a.getResultMetadata(),c=270;o!==null&&o.get(cr.ORIENTATION)===!0&&(c=c+o.get(cr.ORIENTATION)%360),a.putMetadata(cr.ORIENTATION,c);var u=a.getResultPoints();if(u!==null)for(var d=i.getHeight(),m=0;m<u.length;m++)u[m]=new Ne(d-u[m].getY()-1,u[m].getX());return a}else throw new oe}},n.prototype.reset=function(){},n.prototype.doDecode=function(e,t){var r=e.getWidth(),i=e.getHeight(),a=new Kn(r),o=t&&t.get(qt.TRY_HARDER)===!0,c=Math.max(1,i>>(o?8:5)),u;o?u=i:u=15;for(var d=Math.trunc(i/2),m=0;m<u;m++){var g=Math.trunc((m+1)/2),_=(m&1)===0,w=d+c*(_?g:-g);if(w<0||w>=i)break;try{a=e.getBlackRow(w,a)}catch{continue}for(var E=function(k){if(k===1&&(a.reverse(),t&&t.get(qt.NEED_RESULT_POINT_CALLBACK)===!0)){var V=new Map;t.forEach(function($,M){return V.set(M,$)}),V.delete(qt.NEED_RESULT_POINT_CALLBACK),t=V}try{var U=S.decodeRow(w,a,t);if(k===1){U.putMetadata(cr.ORIENTATION,180);var q=U.getResultPoints();q!==null&&(q[0]=new Ne(r-q[0].getX()-1,q[0].getY()),q[1]=new Ne(r-q[1].getX()-1,q[1].getY()))}return{value:U}}catch{}},S=this,D=0;D<2;D++){var C=E(D);if(typeof C=="object")return C.value}}throw new oe},n.recordPattern=function(e,t,r){for(var i=r.length,a=0;a<i;a++)r[a]=0;var o=e.getSize();if(t>=o)throw new oe;for(var c=!e.get(t),u=0,d=t;d<o;){if(e.get(d)!==c)r[u]++;else{if(++u===i)break;r[u]=1,c=!c}d++}if(!(u===i||u===i-1&&d===o))throw new oe},n.recordPatternInReverse=function(e,t,r){for(var i=r.length,a=e.get(t);t>0&&i>=0;)e.get(--t)!==a&&(i--,a=!a);if(i>=0)throw new oe;n.recordPattern(e,t+1,r)},n.patternMatchVariance=function(e,t,r){for(var i=e.length,a=0,o=0,c=0;c<i;c++)a+=e[c],o+=t[c];if(a<o)return Number.POSITIVE_INFINITY;var u=a/o;r*=u;for(var d=0,m=0;m<i;m++){var g=e[m],_=t[m]*u,w=g>_?g-_:_-g;if(w>r)return Number.POSITIVE_INFINITY;d+=w}return d/a},n})(),Ek=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),PA=(function(n){Ek(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.findStartPattern=function(t){for(var r=t.getSize(),i=t.getNextSet(0),a=0,o=Int32Array.from([0,0,0,0,0,0]),c=i,u=!1,d=6,m=i;m<r;m++)if(t.get(m)!==u)o[a]++;else{if(a===d-1){for(var g=e.MAX_AVG_VARIANCE,_=-1,w=e.CODE_START_A;w<=e.CODE_START_C;w++){var E=kn.patternMatchVariance(o,e.CODE_PATTERNS[w],e.MAX_INDIVIDUAL_VARIANCE);E<g&&(g=E,_=w)}if(_>=0&&t.isRange(Math.max(0,c-(m-c)/2),c,!1))return Int32Array.from([c,m,_]);c+=o[0]+o[1],o=o.slice(2,o.length),o[a-1]=0,o[a]=0,a--}else a++;o[a]=1,u=!u}throw new oe},e.decodeCode=function(t,r,i){kn.recordPattern(t,i,r);for(var a=e.MAX_AVG_VARIANCE,o=-1,c=0;c<e.CODE_PATTERNS.length;c++){var u=e.CODE_PATTERNS[c],d=this.patternMatchVariance(r,u,e.MAX_INDIVIDUAL_VARIANCE);d<a&&(a=d,o=c)}if(o>=0)return o;throw new oe},e.prototype.decodeRow=function(t,r,i){var a=i&&i.get(qt.ASSUME_GS1)===!0,o=e.findStartPattern(r),c=o[2],u=0,d=new Uint8Array(20);d[u++]=c;var m;switch(c){case e.CODE_START_A:m=e.CODE_CODE_A;break;case e.CODE_START_B:m=e.CODE_CODE_B;break;case e.CODE_START_C:m=e.CODE_CODE_C;break;default:throw new _e}for(var g=!1,_=!1,w="",E=o[0],S=o[1],D=Int32Array.from([0,0,0,0,0,0]),C=0,k=0,V=c,U=0,q=!0,$=!1,M=!1;!g;){var b=_;switch(_=!1,C=k,k=e.decodeCode(r,D,S),d[u++]=k,k!==e.CODE_STOP&&(q=!0),k!==e.CODE_STOP&&(U++,V+=U*k),E=S,S+=D.reduce(function(G,le){return G+le},0),k){case e.CODE_START_A:case e.CODE_START_B:case e.CODE_START_C:throw new _e}switch(m){case e.CODE_CODE_A:if(k<64)M===$?w+=String.fromCharCode(32+k):w+=String.fromCharCode(32+k+128),M=!1;else if(k<96)M===$?w+=String.fromCharCode(k-64):w+=String.fromCharCode(k+64),M=!1;else switch(k!==e.CODE_STOP&&(q=!1),k){case e.CODE_FNC_1:a&&(w.length===0?w+="]C1":w+="");break;case e.CODE_FNC_2:case e.CODE_FNC_3:break;case e.CODE_FNC_4_A:!$&&M?($=!0,M=!1):$&&M?($=!1,M=!1):M=!0;break;case e.CODE_SHIFT:_=!0,m=e.CODE_CODE_B;break;case e.CODE_CODE_B:m=e.CODE_CODE_B;break;case e.CODE_CODE_C:m=e.CODE_CODE_C;break;case e.CODE_STOP:g=!0;break}break;case e.CODE_CODE_B:if(k<96)M===$?w+=String.fromCharCode(32+k):w+=String.fromCharCode(32+k+128),M=!1;else switch(k!==e.CODE_STOP&&(q=!1),k){case e.CODE_FNC_1:a&&(w.length===0?w+="]C1":w+="");break;case e.CODE_FNC_2:case e.CODE_FNC_3:break;case e.CODE_FNC_4_B:!$&&M?($=!0,M=!1):$&&M?($=!1,M=!1):M=!0;break;case e.CODE_SHIFT:_=!0,m=e.CODE_CODE_A;break;case e.CODE_CODE_A:m=e.CODE_CODE_A;break;case e.CODE_CODE_C:m=e.CODE_CODE_C;break;case e.CODE_STOP:g=!0;break}break;case e.CODE_CODE_C:if(k<100)k<10&&(w+="0"),w+=k;else switch(k!==e.CODE_STOP&&(q=!1),k){case e.CODE_FNC_1:a&&(w.length===0?w+="]C1":w+="");break;case e.CODE_CODE_A:m=e.CODE_CODE_A;break;case e.CODE_CODE_B:m=e.CODE_CODE_B;break;case e.CODE_STOP:g=!0;break}break}b&&(m=m===e.CODE_CODE_A?e.CODE_CODE_B:e.CODE_CODE_A)}var N=S-E;if(S=r.getNextUnset(S),!r.isRange(S,Math.min(r.getSize(),S+(S-E)/2),!1))throw new oe;if(V-=U*C,V%103!==C)throw new Tn;var I=w.length;if(I===0)throw new oe;I>0&&q&&(m===e.CODE_CODE_C?w=w.substring(0,I-2):w=w.substring(0,I-1));for(var R=(o[1]+o[0])/2,L=E+N/2,j=d.length,W=new Uint8Array(j),ge=0;ge<j;ge++)W[ge]=d[ge];var H=[new Ne(R,t),new Ne(L,t)];return new yr(w,W,0,H,Le.CODE_128,new Date().getTime())},e.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],e.MAX_AVG_VARIANCE=.25,e.MAX_INDIVIDUAL_VARIANCE=.7,e.CODE_SHIFT=98,e.CODE_CODE_C=99,e.CODE_CODE_B=100,e.CODE_CODE_A=101,e.CODE_FNC_1=102,e.CODE_FNC_2=97,e.CODE_FNC_3=96,e.CODE_FNC_4_A=101,e.CODE_FNC_4_B=100,e.CODE_START_A=103,e.CODE_START_B=104,e.CODE_START_C=105,e.CODE_STOP=106,e})(kn),Ak=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Y1=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},kA=(function(n){Ak(e,n);function e(t,r){t===void 0&&(t=!1),r===void 0&&(r=!1);var i=n.call(this)||this;return i.usingCheckDigit=t,i.extendedMode=r,i.decodeRowResult="",i.counters=new Int32Array(9),i}return e.prototype.decodeRow=function(t,r,i){var a,o,c,u,d=this.counters;d.fill(0),this.decodeRowResult="";var m=e.findAsteriskPattern(r,d),g=r.getNextSet(m[1]),_=r.getSize(),w,E;do{e.recordPattern(r,g,d);var S=e.toNarrowWidePattern(d);if(S<0)throw new oe;w=e.patternToChar(S),this.decodeRowResult+=w,E=g;try{for(var D=(a=void 0,Y1(d)),C=D.next();!C.done;C=D.next()){var k=C.value;g+=k}}catch(j){a={error:j}}finally{try{C&&!C.done&&(o=D.return)&&o.call(D)}finally{if(a)throw a.error}}g=r.getNextSet(g)}while(w!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var V=0;try{for(var U=Y1(d),q=U.next();!q.done;q=U.next()){var k=q.value;V+=k}}catch(j){c={error:j}}finally{try{q&&!q.done&&(u=U.return)&&u.call(U)}finally{if(c)throw c.error}}var $=g-E-V;if(g!==_&&$*2<V)throw new oe;if(this.usingCheckDigit){for(var M=this.decodeRowResult.length-1,b=0,N=0;N<M;N++)b+=e.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(N));if(this.decodeRowResult.charAt(M)!==e.ALPHABET_STRING.charAt(b%43))throw new Tn;this.decodeRowResult=this.decodeRowResult.substring(0,M)}if(this.decodeRowResult.length===0)throw new oe;var I;this.extendedMode?I=e.decodeExtended(this.decodeRowResult):I=this.decodeRowResult;var R=(m[1]+m[0])/2,L=E+V/2;return new yr(I,null,0,[new Ne(R,t),new Ne(L,t)],Le.CODE_39,new Date().getTime())},e.findAsteriskPattern=function(t,r){for(var i=t.getSize(),a=t.getNextSet(0),o=0,c=a,u=!1,d=r.length,m=a;m<i;m++)if(t.get(m)!==u)r[o]++;else{if(o===d-1){if(this.toNarrowWidePattern(r)===e.ASTERISK_ENCODING&&t.isRange(Math.max(0,c-Math.floor((m-c)/2)),c,!1))return[c,m];c+=r[0]+r[1],r.copyWithin(0,2,2+o-1),r[o-1]=0,r[o]=0,o--}else o++;r[o]=1,u=!u}throw new oe},e.toNarrowWidePattern=function(t){var r,i,a=t.length,o=0,c;do{var u=2147483647;try{for(var d=(r=void 0,Y1(t)),m=d.next();!m.done;m=d.next()){var g=m.value;g<u&&g>o&&(u=g)}}catch(S){r={error:S}}finally{try{m&&!m.done&&(i=d.return)&&i.call(d)}finally{if(r)throw r.error}}o=u,c=0;for(var _=0,w=0,E=0;E<a;E++){var g=t[E];g>o&&(w|=1<<a-1-E,c++,_+=g)}if(c===3){for(var E=0;E<a&&c>0;E++){var g=t[E];if(g>o&&(c--,g*2>=_))return-1}return w}}while(c>3);return-1},e.patternToChar=function(t){for(var r=0;r<e.CHARACTER_ENCODINGS.length;r++)if(e.CHARACTER_ENCODINGS[r]===t)return e.ALPHABET_STRING.charAt(r);if(t===e.ASTERISK_ENCODING)return"*";throw new oe},e.decodeExtended=function(t){for(var r=t.length,i="",a=0;a<r;a++){var o=t.charAt(a);if(o==="+"||o==="$"||o==="%"||o==="/"){var c=t.charAt(a+1),u="\0";switch(o){case"+":if(c>="A"&&c<="Z")u=String.fromCharCode(c.charCodeAt(0)+32);else throw new _e;break;case"$":if(c>="A"&&c<="Z")u=String.fromCharCode(c.charCodeAt(0)-64);else throw new _e;break;case"%":if(c>="A"&&c<="E")u=String.fromCharCode(c.charCodeAt(0)-38);else if(c>="F"&&c<="J")u=String.fromCharCode(c.charCodeAt(0)-11);else if(c>="K"&&c<="O")u=String.fromCharCode(c.charCodeAt(0)+16);else if(c>="P"&&c<="T")u=String.fromCharCode(c.charCodeAt(0)+43);else if(c==="U")u="\0";else if(c==="V")u="@";else if(c==="W")u="`";else if(c==="X"||c==="Y"||c==="Z")u="";else throw new _e;break;case"/":if(c>="A"&&c<="O")u=String.fromCharCode(c.charCodeAt(0)-32);else if(c==="Z")u=":";else throw new _e;break}i+=u,a++}else i+=o}return i},e.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",e.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],e.ASTERISK_ENCODING=148,e})(kn),bk=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),K1=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},jA=(function(n){bk(e,n);function e(){var t=n.call(this)||this;return t.decodeRowResult="",t.counters=new Int32Array(6),t}return e.prototype.decodeRow=function(t,r,i){var a,o,c,u,d=this.findAsteriskPattern(r),m=r.getNextSet(d[1]),g=r.getSize(),_=this.counters;_.fill(0),this.decodeRowResult="";var w,E;do{e.recordPattern(r,m,_);var S=this.toPattern(_);if(S<0)throw new oe;w=this.patternToChar(S),this.decodeRowResult+=w,E=m;try{for(var D=(a=void 0,K1(_)),C=D.next();!C.done;C=D.next()){var k=C.value;m+=k}}catch(N){a={error:N}}finally{try{C&&!C.done&&(o=D.return)&&o.call(D)}finally{if(a)throw a.error}}m=r.getNextSet(m)}while(w!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var V=0;try{for(var U=K1(_),q=U.next();!q.done;q=U.next()){var k=q.value;V+=k}}catch(N){c={error:N}}finally{try{q&&!q.done&&(u=U.return)&&u.call(U)}finally{if(c)throw c.error}}if(m===g||!r.get(m))throw new oe;if(this.decodeRowResult.length<2)throw new oe;this.checkChecksums(this.decodeRowResult),this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-2);var $=this.decodeExtended(this.decodeRowResult),M=(d[1]+d[0])/2,b=E+V/2;return new yr($,null,0,[new Ne(M,t),new Ne(b,t)],Le.CODE_93,new Date().getTime())},e.prototype.findAsteriskPattern=function(t){var r=t.getSize(),i=t.getNextSet(0);this.counters.fill(0);for(var a=this.counters,o=i,c=!1,u=a.length,d=0,m=i;m<r;m++)if(t.get(m)!==c)a[d]++;else{if(d===u-1){if(this.toPattern(a)===e.ASTERISK_ENCODING)return new Int32Array([o,m]);o+=a[0]+a[1],a.copyWithin(0,2,2+d-1),a[d-1]=0,a[d]=0,d--}else d++;a[d]=1,c=!c}throw new oe},e.prototype.toPattern=function(t){var r,i,a=0;try{for(var o=K1(t),c=o.next();!c.done;c=o.next()){var u=c.value;a+=u}}catch(E){r={error:E}}finally{try{c&&!c.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}for(var d=0,m=t.length,g=0;g<m;g++){var _=Math.round(t[g]*9/a);if(_<1||_>4)return-1;if((g&1)===0)for(var w=0;w<_;w++)d=d<<1|1;else d<<=_}return d},e.prototype.patternToChar=function(t){for(var r=0;r<e.CHARACTER_ENCODINGS.length;r++)if(e.CHARACTER_ENCODINGS[r]===t)return e.ALPHABET_STRING.charAt(r);throw new oe},e.prototype.decodeExtended=function(t){for(var r=t.length,i="",a=0;a<r;a++){var o=t.charAt(a);if(o>="a"&&o<="d"){if(a>=r-1)throw new _e;var c=t.charAt(a+1),u="\0";switch(o){case"d":if(c>="A"&&c<="Z")u=String.fromCharCode(c.charCodeAt(0)+32);else throw new _e;break;case"a":if(c>="A"&&c<="Z")u=String.fromCharCode(c.charCodeAt(0)-64);else throw new _e;break;case"b":if(c>="A"&&c<="E")u=String.fromCharCode(c.charCodeAt(0)-38);else if(c>="F"&&c<="J")u=String.fromCharCode(c.charCodeAt(0)-11);else if(c>="K"&&c<="O")u=String.fromCharCode(c.charCodeAt(0)+16);else if(c>="P"&&c<="T")u=String.fromCharCode(c.charCodeAt(0)+43);else if(c==="U")u="\0";else if(c==="V")u="@";else if(c==="W")u="`";else if(c>="X"&&c<="Z")u="";else throw new _e;break;case"c":if(c>="A"&&c<="O")u=String.fromCharCode(c.charCodeAt(0)-32);else if(c==="Z")u=":";else throw new _e;break}i+=u,a++}else i+=o}return i},e.prototype.checkChecksums=function(t){var r=t.length;this.checkOneChecksum(t,r-2,20),this.checkOneChecksum(t,r-1,15)},e.prototype.checkOneChecksum=function(t,r,i){for(var a=1,o=0,c=r-1;c>=0;c--)o+=a*e.ALPHABET_STRING.indexOf(t.charAt(c)),++a>i&&(a=1);if(t.charAt(r)!==e.ALPHABET_STRING[o%47])throw new Tn},e.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%abcd*",e.CHARACTER_ENCODINGS=[276,328,324,322,296,292,290,336,274,266,424,420,418,404,402,394,360,356,354,308,282,344,332,326,300,278,436,434,428,422,406,410,364,358,310,314,302,468,466,458,366,374,430,294,474,470,306,350],e.ASTERISK_ENCODING=e.CHARACTER_ENCODINGS[47],e})(kn),Sk=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Ck=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},LA=(function(n){Sk(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.narrowLineWidth=-1,t}return e.prototype.decodeRow=function(t,r,i){var a,o,c=this.decodeStart(r),u=this.decodeEnd(r),d=new rt;e.decodeMiddle(r,c[1],u[0],d);var m=d.toString(),g=null;i!=null&&(g=i.get(qt.ALLOWED_LENGTHS)),g==null&&(g=e.DEFAULT_ALLOWED_LENGTHS);var _=m.length,w=!1,E=0;try{for(var S=Ck(g),D=S.next();!D.done;D=S.next()){var C=D.value;if(_===C){w=!0;break}C>E&&(E=C)}}catch(U){a={error:U}}finally{try{D&&!D.done&&(o=S.return)&&o.call(S)}finally{if(a)throw a.error}}if(!w&&_>E&&(w=!0),!w)throw new _e;var k=[new Ne(c[1],t),new Ne(u[0],t)],V=new yr(m,null,0,k,Le.ITF,new Date().getTime());return V},e.decodeMiddle=function(t,r,i,a){var o=new Int32Array(10),c=new Int32Array(5),u=new Int32Array(5);for(o.fill(0),c.fill(0),u.fill(0);r<i;){kn.recordPattern(t,r,o);for(var d=0;d<5;d++){var m=2*d;c[d]=o[m],u[d]=o[m+1]}var g=e.decodeDigit(c);a.append(g.toString()),g=this.decodeDigit(u),a.append(g.toString()),o.forEach(function(_){r+=_})}},e.prototype.decodeStart=function(t){var r=e.skipWhiteSpace(t),i=e.findGuardPattern(t,r,e.START_PATTERN);return this.narrowLineWidth=(i[1]-i[0])/4,this.validateQuietZone(t,i[0]),i},e.prototype.validateQuietZone=function(t,r){var i=this.narrowLineWidth*10;i=i<r?i:r;for(var a=r-1;i>0&&a>=0&&!t.get(a);a--)i--;if(i!==0)throw new oe},e.skipWhiteSpace=function(t){var r=t.getSize(),i=t.getNextSet(0);if(i===r)throw new oe;return i},e.prototype.decodeEnd=function(t){t.reverse();try{var r=e.skipWhiteSpace(t),i=void 0;try{i=e.findGuardPattern(t,r,e.END_PATTERN_REVERSED[0])}catch(o){o instanceof oe&&(i=e.findGuardPattern(t,r,e.END_PATTERN_REVERSED[1]))}this.validateQuietZone(t,i[0]);var a=i[0];return i[0]=t.getSize()-i[1],i[1]=t.getSize()-a,i}finally{t.reverse()}},e.findGuardPattern=function(t,r,i){var a=i.length,o=new Int32Array(a),c=t.getSize(),u=!1,d=0,m=r;o.fill(0);for(var g=r;g<c;g++)if(t.get(g)!==u)o[d]++;else{if(d===a-1){if(kn.patternMatchVariance(o,i,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return[m,g];m+=o[0]+o[1],Gt.arraycopy(o,2,o,0,d-1),o[d-1]=0,o[d]=0,d--}else d++;o[d]=1,u=!u}throw new oe},e.decodeDigit=function(t){for(var r=e.MAX_AVG_VARIANCE,i=-1,a=e.PATTERNS.length,o=0;o<a;o++){var c=e.PATTERNS[o],u=kn.patternMatchVariance(t,c,e.MAX_INDIVIDUAL_VARIANCE);u<r?(r=u,i=o):u===r&&(i=-1)}if(i>=0)return i%10;throw new oe},e.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],e.MAX_AVG_VARIANCE=.38,e.MAX_INDIVIDUAL_VARIANCE=.5,e.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],e.START_PATTERN=Int32Array.from([1,1,1,1]),e.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])],e})(kn),Tk=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Oc=(function(n){Tk(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.decodeRowStringBuffer="",t}return e.findStartGuardPattern=function(t){for(var r=!1,i,a=0,o=Int32Array.from([0,0,0]);!r;){o=Int32Array.from([0,0,0]),i=e.findGuardPattern(t,a,!1,this.START_END_PATTERN,o);var c=i[0];a=i[1];var u=c-(a-c);u>=0&&(r=t.isRange(u,c,!1))}return i},e.checkChecksum=function(t){return e.checkStandardUPCEANChecksum(t)},e.checkStandardUPCEANChecksum=function(t){var r=t.length;if(r===0)return!1;var i=parseInt(t.charAt(r-1),10);return e.getStandardUPCEANChecksum(t.substring(0,r-1))===i},e.getStandardUPCEANChecksum=function(t){for(var r=t.length,i=0,a=r-1;a>=0;a-=2){var o=t.charAt(a).charCodeAt(0)-48;if(o<0||o>9)throw new _e;i+=o}i*=3;for(var a=r-2;a>=0;a-=2){var o=t.charAt(a).charCodeAt(0)-48;if(o<0||o>9)throw new _e;i+=o}return(1e3-i)%10},e.decodeEnd=function(t,r){return e.findGuardPattern(t,r,!1,e.START_END_PATTERN,new Int32Array(e.START_END_PATTERN.length).fill(0))},e.findGuardPatternWithoutCounters=function(t,r,i,a){return this.findGuardPattern(t,r,i,a,new Int32Array(a.length))},e.findGuardPattern=function(t,r,i,a,o){var c=t.getSize();r=i?t.getNextUnset(r):t.getNextSet(r);for(var u=0,d=r,m=a.length,g=i,_=r;_<c;_++)if(t.get(_)!==g)o[u]++;else{if(u===m-1){if(kn.patternMatchVariance(o,a,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return Int32Array.from([d,_]);d+=o[0]+o[1];for(var w=o.slice(2,o.length),E=0;E<u-1;E++)o[E]=w[E];o[u-1]=0,o[u]=0,u--}else u++;o[u]=1,g=!g}throw new oe},e.decodeDigit=function(t,r,i,a){this.recordPattern(t,i,r);for(var o=this.MAX_AVG_VARIANCE,c=-1,u=a.length,d=0;d<u;d++){var m=a[d],g=kn.patternMatchVariance(r,m,e.MAX_INDIVIDUAL_VARIANCE);g<o&&(o=g,c=d)}if(c>=0)return c;throw new oe},e.MAX_AVG_VARIANCE=.48,e.MAX_INDIVIDUAL_VARIANCE=.7,e.START_END_PATTERN=Int32Array.from([1,1,1]),e.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),e.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),e.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])],e})(kn),Ik=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Nk=(function(){function n(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return n.prototype.decodeRow=function(e,t,r){var i=this.decodeRowStringBuffer,a=this.decodeMiddle(t,r,i),o=i.toString(),c=n.parseExtensionString(o),u=[new Ne((r[0]+r[1])/2,e),new Ne(a,e)],d=new yr(o,null,0,u,Le.UPC_EAN_EXTENSION,new Date().getTime());return c!=null&&d.putAllMetadata(c),d},n.prototype.decodeMiddle=function(e,t,r){var i,a,o=this.decodeMiddleCounters;o[0]=0,o[1]=0,o[2]=0,o[3]=0;for(var c=e.getSize(),u=t[1],d=0,m=0;m<5&&u<c;m++){var g=Oc.decodeDigit(e,o,u,Oc.L_AND_G_PATTERNS);r+=String.fromCharCode(48+g%10);try{for(var _=(i=void 0,Ik(o)),w=_.next();!w.done;w=_.next()){var E=w.value;u+=E}}catch(D){i={error:D}}finally{try{w&&!w.done&&(a=_.return)&&a.call(_)}finally{if(i)throw i.error}}g>=10&&(d|=1<<4-m),m!==4&&(u=e.getNextSet(u),u=e.getNextUnset(u))}if(r.length!==5)throw new oe;var S=this.determineCheckDigit(d);if(n.extensionChecksum(r.toString())!==S)throw new oe;return u},n.extensionChecksum=function(e){for(var t=e.length,r=0,i=t-2;i>=0;i-=2)r+=e.charAt(i).charCodeAt(0)-48;r*=3;for(var i=t-1;i>=0;i-=2)r+=e.charAt(i).charCodeAt(0)-48;return r*=3,r%10},n.prototype.determineCheckDigit=function(e){for(var t=0;t<10;t++)if(e===this.CHECK_DIGIT_ENCODINGS[t])return t;throw new oe},n.parseExtensionString=function(e){if(e.length!==5)return null;var t=n.parseExtension5String(e);return t==null?null:new Map([[cr.SUGGESTED_PRICE,t]])},n.parseExtension5String=function(e){var t;switch(e.charAt(0)){case"0":t="";break;case"5":t="$";break;case"9":switch(e){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}t="";break;default:t="";break}var r=parseInt(e.substring(1)),i=(r/100).toString(),a=r%100,o=a<10?"0"+a:a.toString();return t+i+"."+o},n})(),Rk=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Ok=(function(){function n(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return n.prototype.decodeRow=function(e,t,r){var i=this.decodeRowStringBuffer,a=this.decodeMiddle(t,r,i),o=i.toString(),c=n.parseExtensionString(o),u=[new Ne((r[0]+r[1])/2,e),new Ne(a,e)],d=new yr(o,null,0,u,Le.UPC_EAN_EXTENSION,new Date().getTime());return c!=null&&d.putAllMetadata(c),d},n.prototype.decodeMiddle=function(e,t,r){var i,a,o=this.decodeMiddleCounters;o[0]=0,o[1]=0,o[2]=0,o[3]=0;for(var c=e.getSize(),u=t[1],d=0,m=0;m<2&&u<c;m++){var g=Oc.decodeDigit(e,o,u,Oc.L_AND_G_PATTERNS);r+=String.fromCharCode(48+g%10);try{for(var _=(i=void 0,Rk(o)),w=_.next();!w.done;w=_.next()){var E=w.value;u+=E}}catch(S){i={error:S}}finally{try{w&&!w.done&&(a=_.return)&&a.call(_)}finally{if(i)throw i.error}}g>=10&&(d|=1<<1-m),m!==1&&(u=e.getNextSet(u),u=e.getNextUnset(u))}if(r.length!==2)throw new oe;if(parseInt(r.toString())%4!==d)throw new oe;return u},n.parseExtensionString=function(e){return e.length!==2?null:new Map([[cr.ISSUE_NUMBER,parseInt(e)]])},n})(),Dk=(function(){function n(){}return n.decodeRow=function(e,t,r){var i=Oc.findGuardPattern(t,r,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{var a=new Nk;return a.decodeRow(e,t,i)}catch{var o=new Ok;return o.decodeRow(e,t,i)}},n.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]),n})(),Mk=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Dn=(function(n){Mk(e,n);function e(){var t=n.call(this)||this;t.decodeRowStringBuffer="",e.L_AND_G_PATTERNS=e.L_PATTERNS.map(function(c){return Int32Array.from(c)});for(var r=10;r<20;r++){for(var i=e.L_PATTERNS[r-10],a=new Int32Array(i.length),o=0;o<i.length;o++)a[o]=i[i.length-o-1];e.L_AND_G_PATTERNS[r]=a}return t}return e.prototype.decodeRow=function(t,r,i){var a=e.findStartGuardPattern(r),o=i==null?null:i.get(qt.NEED_RESULT_POINT_CALLBACK);if(o!=null){var c=new Ne((a[0]+a[1])/2,t);o.foundPossibleResultPoint(c)}var u=this.decodeMiddle(r,a,this.decodeRowStringBuffer),d=u.rowOffset,m=u.resultString;if(o!=null){var g=new Ne(d,t);o.foundPossibleResultPoint(g)}var _=e.decodeEnd(r,d);if(o!=null){var w=new Ne((_[0]+_[1])/2,t);o.foundPossibleResultPoint(w)}var E=_[1],S=E+(E-_[0]);if(S>=r.getSize()||!r.isRange(E,S,!1))throw new oe;var D=m.toString();if(D.length<8)throw new _e;if(!e.checkChecksum(D))throw new Tn;var C=(a[1]+a[0])/2,k=(_[1]+_[0])/2,V=this.getBarcodeFormat(),U=[new Ne(C,t),new Ne(k,t)],q=new yr(D,null,0,U,V,new Date().getTime()),$=0;try{var M=Dk.decodeRow(t,r,_[1]);q.putMetadata(cr.UPC_EAN_EXTENSION,M.getText()),q.putAllMetadata(M.getResultMetadata()),q.addResultPoints(M.getResultPoints()),$=M.getText().length}catch{}var b=i==null?null:i.get(qt.ALLOWED_EAN_EXTENSIONS);if(b!=null){var N=!1;for(var I in b)if($.toString()===I){N=!0;break}if(!N)throw new oe}return V===Le.EAN_13||Le.UPC_A,q},e.checkChecksum=function(t){return e.checkStandardUPCEANChecksum(t)},e.checkStandardUPCEANChecksum=function(t){var r=t.length;if(r===0)return!1;var i=parseInt(t.charAt(r-1),10);return e.getStandardUPCEANChecksum(t.substring(0,r-1))===i},e.getStandardUPCEANChecksum=function(t){for(var r=t.length,i=0,a=r-1;a>=0;a-=2){var o=t.charAt(a).charCodeAt(0)-48;if(o<0||o>9)throw new _e;i+=o}i*=3;for(var a=r-2;a>=0;a-=2){var o=t.charAt(a).charCodeAt(0)-48;if(o<0||o>9)throw new _e;i+=o}return(1e3-i)%10},e.decodeEnd=function(t,r){return e.findGuardPattern(t,r,!1,e.START_END_PATTERN,new Int32Array(e.START_END_PATTERN.length).fill(0))},e})(Oc),Pk=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),BA=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},yv=(function(n){Pk(e,n);function e(){var t=n.call(this)||this;return t.decodeMiddleCounters=Int32Array.from([0,0,0,0]),t}return e.prototype.decodeMiddle=function(t,r,i){var a,o,c,u,d=this.decodeMiddleCounters;d[0]=0,d[1]=0,d[2]=0,d[3]=0;for(var m=t.getSize(),g=r[1],_=0,w=0;w<6&&g<m;w++){var E=Dn.decodeDigit(t,d,g,Dn.L_AND_G_PATTERNS);i+=String.fromCharCode(48+E%10);try{for(var S=(a=void 0,BA(d)),D=S.next();!D.done;D=S.next()){var C=D.value;g+=C}}catch(q){a={error:q}}finally{try{D&&!D.done&&(o=S.return)&&o.call(S)}finally{if(a)throw a.error}}E>=10&&(_|=1<<5-w)}i=e.determineFirstDigit(i,_);var k=Dn.findGuardPattern(t,g,!0,Dn.MIDDLE_PATTERN,new Int32Array(Dn.MIDDLE_PATTERN.length).fill(0));g=k[1];for(var w=0;w<6&&g<m;w++){var E=Dn.decodeDigit(t,d,g,Dn.L_PATTERNS);i+=String.fromCharCode(48+E);try{for(var V=(c=void 0,BA(d)),U=V.next();!U.done;U=V.next()){var C=U.value;g+=C}}catch(M){c={error:M}}finally{try{U&&!U.done&&(u=V.return)&&u.call(V)}finally{if(c)throw c.error}}}return{rowOffset:g,resultString:i}},e.prototype.getBarcodeFormat=function(){return Le.EAN_13},e.determineFirstDigit=function(t,r){for(var i=0;i<10;i++)if(r===this.FIRST_DIGIT_ENCODINGS[i])return t=String.fromCharCode(48+i)+t,t;throw new oe},e.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26],e})(Dn),kk=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),VA=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},FA=(function(n){kk(e,n);function e(){var t=n.call(this)||this;return t.decodeMiddleCounters=Int32Array.from([0,0,0,0]),t}return e.prototype.decodeMiddle=function(t,r,i){var a,o,c,u,d=this.decodeMiddleCounters;d[0]=0,d[1]=0,d[2]=0,d[3]=0;for(var m=t.getSize(),g=r[1],_=0;_<4&&g<m;_++){var w=Dn.decodeDigit(t,d,g,Dn.L_PATTERNS);i+=String.fromCharCode(48+w);try{for(var E=(a=void 0,VA(d)),S=E.next();!S.done;S=E.next()){var D=S.value;g+=D}}catch(U){a={error:U}}finally{try{S&&!S.done&&(o=E.return)&&o.call(E)}finally{if(a)throw a.error}}}var C=Dn.findGuardPattern(t,g,!0,Dn.MIDDLE_PATTERN,new Int32Array(Dn.MIDDLE_PATTERN.length).fill(0));g=C[1];for(var _=0;_<4&&g<m;_++){var w=Dn.decodeDigit(t,d,g,Dn.L_PATTERNS);i+=String.fromCharCode(48+w);try{for(var k=(c=void 0,VA(d)),V=k.next();!V.done;V=k.next()){var D=V.value;g+=D}}catch($){c={error:$}}finally{try{V&&!V.done&&(u=k.return)&&u.call(k)}finally{if(c)throw c.error}}}return{rowOffset:g,resultString:i}},e.prototype.getBarcodeFormat=function(){return Le.EAN_8},e})(Dn),jk=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),UA=(function(n){jk(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.ean13Reader=new yv,t}return e.prototype.getBarcodeFormat=function(){return Le.UPC_A},e.prototype.decode=function(t,r){return this.maybeReturnResult(this.ean13Reader.decode(t))},e.prototype.decodeRow=function(t,r,i){return this.maybeReturnResult(this.ean13Reader.decodeRow(t,r,i))},e.prototype.decodeMiddle=function(t,r,i){return this.ean13Reader.decodeMiddle(t,r,i)},e.prototype.maybeReturnResult=function(t){var r=t.getText();if(r.charAt(0)==="0"){var i=new yr(r.substring(1),null,null,t.getResultPoints(),Le.UPC_A);return t.getResultMetadata()!=null&&i.putAllMetadata(t.getResultMetadata()),i}else throw new oe},e.prototype.reset=function(){this.ean13Reader.reset()},e})(Dn),Lk=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Bk=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},zA=(function(n){Lk(e,n);function e(){var t=n.call(this)||this;return t.decodeMiddleCounters=new Int32Array(4),t}return e.prototype.decodeMiddle=function(t,r,i){var a,o,c=this.decodeMiddleCounters.map(function(D){return D});c[0]=0,c[1]=0,c[2]=0,c[3]=0;for(var u=t.getSize(),d=r[1],m=0,g=0;g<6&&d<u;g++){var _=e.decodeDigit(t,c,d,e.L_AND_G_PATTERNS);i+=String.fromCharCode(48+_%10);try{for(var w=(a=void 0,Bk(c)),E=w.next();!E.done;E=w.next()){var S=E.value;d+=S}}catch(D){a={error:D}}finally{try{E&&!E.done&&(o=w.return)&&o.call(w)}finally{if(a)throw a.error}}_>=10&&(m|=1<<5-g)}return e.determineNumSysAndCheckDigit(new rt(i),m),d},e.prototype.decodeEnd=function(t,r){return e.findGuardPatternWithoutCounters(t,r,!0,e.MIDDLE_END_PATTERN)},e.prototype.checkChecksum=function(t){return Dn.checkChecksum(e.convertUPCEtoUPCA(t))},e.determineNumSysAndCheckDigit=function(t,r){for(var i=0;i<=1;i++)for(var a=0;a<10;a++)if(r===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[i][a]){t.insert(0,"0"+i),t.append("0"+a);return}throw oe.getNotFoundInstance()},e.prototype.getBarcodeFormat=function(){return Le.UPC_E},e.convertUPCEtoUPCA=function(t){var r=t.slice(1,7).split("").map(function(o){return o.charCodeAt(0)}),i=new rt;i.append(t.charAt(0));var a=r[5];switch(a){case 0:case 1:case 2:i.appendChars(r,0,2),i.append(a),i.append("0000"),i.appendChars(r,2,3);break;case 3:i.appendChars(r,0,3),i.append("00000"),i.appendChars(r,3,2);break;case 4:i.appendChars(r,0,4),i.append("00000"),i.append(r[4]);break;default:i.appendChars(r,0,5),i.append("0000"),i.append(a);break}return t.length>=8&&i.append(t.charAt(7)),i.toString()},e.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),e.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,1])],e})(Dn),Vk=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),HA=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},W1=(function(n){Vk(e,n);function e(t){var r=n.call(this)||this,i=t==null?null:t.get(qt.POSSIBLE_FORMATS),a=[];return i!=null&&(i.indexOf(Le.EAN_13)>-1&&a.push(new yv),i.indexOf(Le.UPC_A)>-1&&a.push(new UA),i.indexOf(Le.EAN_8)>-1&&a.push(new FA),i.indexOf(Le.UPC_E)>-1&&a.push(new zA)),a.length===0&&(a.push(new yv),a.push(new UA),a.push(new FA),a.push(new zA)),r.readers=a,r}return e.prototype.decodeRow=function(t,r,i){var a,o;try{for(var c=HA(this.readers),u=c.next();!u.done;u=c.next()){var d=u.value;try{var m=d.decodeRow(t,r,i),g=m.getBarcodeFormat()===Le.EAN_13&&m.getText().charAt(0)==="0",_=i==null?null:i.get(qt.POSSIBLE_FORMATS),w=_==null||_.includes(Le.UPC_A);if(g&&w){var E=m.getRawBytes(),S=new yr(m.getText().substring(1),E,E?E.length:null,m.getResultPoints(),Le.UPC_A);return S.putAllMetadata(m.getResultMetadata()),S}return m}catch{}}}catch(D){a={error:D}}finally{try{u&&!u.done&&(o=c.return)&&o.call(c)}finally{if(a)throw a.error}}throw new oe},e.prototype.reset=function(){var t,r;try{for(var i=HA(this.readers),a=i.next();!a.done;a=i.next()){var o=a.value;o.reset()}}catch(c){t={error:c}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}},e})(kn),Fk=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Uk=(function(n){Fk(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.CODA_BAR_CHAR_SET={nnnnnww:"0",nnnnwwn:"1",nnnwnnw:"2",wwnnnnn:"3",nnwnnwn:"4",wnnnnwn:"5",nwnnnnw:"6",nwnnwnn:"7",nwwnnnn:"8",wnnwnnn:"9",nnnwwnn:"-",nnwwnnn:"$",wnnnwnw:":",wnwnnnw:"/",wnwnwnn:".",nnwwwww:"+",nnwwnwn:"A",nwnwnnw:"B",nnnwnww:"C",nnnwwwn:"D"},t}return e.prototype.decodeRow=function(t,r,i){var a=this.getValidRowData(r);if(!a)throw new oe;var o=this.codaBarDecodeRow(a.row);if(!o)throw new oe;return new yr(o,null,0,[new Ne(a.left,t),new Ne(a.right,t)],Le.CODABAR,new Date().getTime())},e.prototype.getValidRowData=function(t){var r=t.toArray(),i=r.indexOf(!0);if(i===-1)return null;var a=r.lastIndexOf(!0);if(a<=i)return null;r=r.slice(i,a+1);for(var o=[],c=r[0],u=1,d=1;d<r.length;d++)r[d]===c?u++:(c=r[d],o.push(u),u=1);return o.push(u),o.length<23&&(o.length+1)%8!==0?null:{row:o,left:i,right:a}},e.prototype.codaBarDecodeRow=function(t){for(var r=[],i=Math.ceil(t.reduce(function(u,d){return(u+d)/2},0));t.length>0;){var a=t.splice(0,8).splice(0,7),o=a.map(function(u){return u<i?"n":"w"}).join("");if(this.CODA_BAR_CHAR_SET[o]===void 0)return null;r.push(this.CODA_BAR_CHAR_SET[o])}var c=r.join("");return this.validCodaBarString(c)?c:null},e.prototype.validCodaBarString=function(t){var r=/^[A-D].{1,}[A-D]$/;return r.test(t)},e})(kn),zk=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Hk=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Wo=(function(n){zk(e,n);function e(){var t=n.call(this)||this;return t.decodeFinderCounters=new Int32Array(4),t.dataCharacterCounters=new Int32Array(8),t.oddRoundingErrors=new Array(4),t.evenRoundingErrors=new Array(4),t.oddCounts=new Array(t.dataCharacterCounters.length/2),t.evenCounts=new Array(t.dataCharacterCounters.length/2),t}return e.prototype.getDecodeFinderCounters=function(){return this.decodeFinderCounters},e.prototype.getDataCharacterCounters=function(){return this.dataCharacterCounters},e.prototype.getOddRoundingErrors=function(){return this.oddRoundingErrors},e.prototype.getEvenRoundingErrors=function(){return this.evenRoundingErrors},e.prototype.getOddCounts=function(){return this.oddCounts},e.prototype.getEvenCounts=function(){return this.evenCounts},e.prototype.parseFinderValue=function(t,r){for(var i=0;i<r.length;i++)if(kn.patternMatchVariance(t,r[i],e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return i;throw new oe},e.count=function(t){return wt.sum(new Int32Array(t))},e.increment=function(t,r){for(var i=0,a=r[0],o=1;o<t.length;o++)r[o]>a&&(a=r[o],i=o);t[i]++},e.decrement=function(t,r){for(var i=0,a=r[0],o=1;o<t.length;o++)r[o]<a&&(a=r[o],i=o);t[i]--},e.isFinderPattern=function(t){var r,i,a=t[0]+t[1],o=a+t[2]+t[3],c=a/o;if(c>=e.MIN_FINDER_PATTERN_RATIO&&c<=e.MAX_FINDER_PATTERN_RATIO){var u=Number.MAX_SAFE_INTEGER,d=Number.MIN_SAFE_INTEGER;try{for(var m=Hk(t),g=m.next();!g.done;g=m.next()){var _=g.value;_>d&&(d=_),_<u&&(u=_)}}catch(w){r={error:w}}finally{try{g&&!g.done&&(i=m.return)&&i.call(m)}finally{if(r)throw r.error}}return d<10*u}return!1},e.MAX_AVG_VARIANCE=.2,e.MAX_INDIVIDUAL_VARIANCE=.45,e.MIN_FINDER_PATTERN_RATIO=9.5/12,e.MAX_FINDER_PATTERN_RATIO=12.5/14,e})(kn),P0=(function(){function n(e,t){this.value=e,this.checksumPortion=t}return n.prototype.getValue=function(){return this.value},n.prototype.getChecksumPortion=function(){return this.checksumPortion},n.prototype.toString=function(){return this.value+"("+this.checksumPortion+")"},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.value===t.value&&this.checksumPortion===t.checksumPortion},n.prototype.hashCode=function(){return this.value^this.checksumPortion},n})(),P3=(function(){function n(e,t,r,i,a){this.value=e,this.startEnd=t,this.value=e,this.startEnd=t,this.resultPoints=new Array,this.resultPoints.push(new Ne(r,a)),this.resultPoints.push(new Ne(i,a))}return n.prototype.getValue=function(){return this.value},n.prototype.getStartEnd=function(){return this.startEnd},n.prototype.getResultPoints=function(){return this.resultPoints},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.value===t.value},n.prototype.hashCode=function(){return this.value},n})(),Gk=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},dc=(function(){function n(){}return n.getRSSvalue=function(e,t,r){var i,a,o=0;try{for(var c=Gk(e),u=c.next();!u.done;u=c.next()){var d=u.value;o+=d}}catch(k){i={error:k}}finally{try{u&&!u.done&&(a=c.return)&&a.call(c)}finally{if(i)throw i.error}}for(var m=0,g=0,_=e.length,w=0;w<_-1;w++){var E=void 0;for(E=1,g|=1<<w;E<e[w];E++,g&=~(1<<w)){var S=n.combins(o-E-1,_-w-2);if(r&&g===0&&o-E-(_-w-1)>=_-w-1&&(S-=n.combins(o-E-(_-w),_-w-2)),_-w-1>1){for(var D=0,C=o-E-(_-w-2);C>t;C--)D+=n.combins(o-E-C-1,_-w-3);S-=D*(_-1-w)}else o-E>t&&S--;m+=S}o-=E}return m},n.combins=function(e,t){var r,i;e-t>t?(i=t,r=e-t):(i=e-t,r=t);for(var a=1,o=1,c=e;c>r;c--)a*=c,o<=i&&(a/=o,o++);for(;o<=i;)a/=o,o++;return a},n})(),qk=(function(){function n(){}return n.buildBitArray=function(e){var t=e.length*2-1;e[e.length-1].getRightChar()==null&&(t-=1);for(var r=12*t,i=new Kn(r),a=0,o=e[0],c=o.getRightChar().getValue(),u=11;u>=0;--u)(c&1<<u)!==0&&i.set(a),a++;for(var u=1;u<e.length;++u){for(var d=e[u],m=d.getLeftChar().getValue(),g=11;g>=0;--g)(m&1<<g)!==0&&i.set(a),a++;if(d.getRightChar()!==null)for(var _=d.getRightChar().getValue(),g=11;g>=0;--g)(_&1<<g)!==0&&i.set(a),a++}return i},n})(),Xo=(function(){function n(e,t){t?this.decodedInformation=null:(this.finished=e,this.decodedInformation=t)}return n.prototype.getDecodedInformation=function(){return this.decodedInformation},n.prototype.isFinished=function(){return this.finished},n})(),Wy=(function(){function n(e){this.newPosition=e}return n.prototype.getNewPosition=function(){return this.newPosition},n})(),$k=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),ki=(function(n){$k(e,n);function e(t,r){var i=n.call(this,t)||this;return i.value=r,i}return e.prototype.getValue=function(){return this.value},e.prototype.isFNC1=function(){return this.value===e.FNC1},e.FNC1="$",e})(Wy),Xk=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Yo=(function(n){Xk(e,n);function e(t,r,i){var a=n.call(this,t)||this;return i?(a.remaining=!0,a.remainingValue=a.remainingValue):(a.remaining=!1,a.remainingValue=0),a.newString=r,a}return e.prototype.getNewString=function(){return this.newString},e.prototype.isRemaining=function(){return this.remaining},e.prototype.getRemainingValue=function(){return this.remainingValue},e})(Wy),Yk=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),tc=(function(n){Yk(e,n);function e(t,r,i){var a=n.call(this,t)||this;if(r<0||r>10||i<0||i>10)throw new _e;return a.firstDigit=r,a.secondDigit=i,a}return e.prototype.getFirstDigit=function(){return this.firstDigit},e.prototype.getSecondDigit=function(){return this.secondDigit},e.prototype.getValue=function(){return this.firstDigit*10+this.secondDigit},e.prototype.isFirstDigitFNC1=function(){return this.firstDigit===e.FNC1},e.prototype.isSecondDigitFNC1=function(){return this.secondDigit===e.FNC1},e.prototype.isAnyFNC1=function(){return this.firstDigit===e.FNC1||this.secondDigit===e.FNC1},e.FNC1=10,e})(Wy),Lh=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Kk=(function(){function n(){}return n.parseFieldsInGeneralPurpose=function(e){var t,r,i,a,o,c,u,d;if(!e)return null;if(e.length<2)throw new oe;var m=e.substring(0,2);try{for(var g=Lh(n.TWO_DIGIT_DATA_LENGTH),_=g.next();!_.done;_=g.next()){var w=_.value;if(w[0]===m)return w[1]===n.VARIABLE_LENGTH?n.processVariableAI(2,w[2],e):n.processFixedAI(2,w[1],e)}}catch($){t={error:$}}finally{try{_&&!_.done&&(r=g.return)&&r.call(g)}finally{if(t)throw t.error}}if(e.length<3)throw new oe;var E=e.substring(0,3);try{for(var S=Lh(n.THREE_DIGIT_DATA_LENGTH),D=S.next();!D.done;D=S.next()){var w=D.value;if(w[0]===E)return w[1]===n.VARIABLE_LENGTH?n.processVariableAI(3,w[2],e):n.processFixedAI(3,w[1],e)}}catch($){i={error:$}}finally{try{D&&!D.done&&(a=S.return)&&a.call(S)}finally{if(i)throw i.error}}try{for(var C=Lh(n.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH),k=C.next();!k.done;k=C.next()){var w=k.value;if(w[0]===E)return w[1]===n.VARIABLE_LENGTH?n.processVariableAI(4,w[2],e):n.processFixedAI(4,w[1],e)}}catch($){o={error:$}}finally{try{k&&!k.done&&(c=C.return)&&c.call(C)}finally{if(o)throw o.error}}if(e.length<4)throw new oe;var V=e.substring(0,4);try{for(var U=Lh(n.FOUR_DIGIT_DATA_LENGTH),q=U.next();!q.done;q=U.next()){var w=q.value;if(w[0]===V)return w[1]===n.VARIABLE_LENGTH?n.processVariableAI(4,w[2],e):n.processFixedAI(4,w[1],e)}}catch($){u={error:$}}finally{try{q&&!q.done&&(d=U.return)&&d.call(U)}finally{if(u)throw u.error}}throw new oe},n.processFixedAI=function(e,t,r){if(r.length<e)throw new oe;var i=r.substring(0,e);if(r.length<e+t)throw new oe;var a=r.substring(e,e+t),o=r.substring(e+t),c="("+i+")"+a,u=n.parseFieldsInGeneralPurpose(o);return u==null?c:c+u},n.processVariableAI=function(e,t,r){var i=r.substring(0,e),a;r.length<e+t?a=r.length:a=e+t;var o=r.substring(e,a),c=r.substring(a),u="("+i+")"+o,d=n.parseFieldsInGeneralPurpose(c);return d==null?u:u+d},n.VARIABLE_LENGTH=[],n.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",n.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",n.VARIABLE_LENGTH,20],["22",n.VARIABLE_LENGTH,29],["30",n.VARIABLE_LENGTH,8],["37",n.VARIABLE_LENGTH,8],["90",n.VARIABLE_LENGTH,30],["91",n.VARIABLE_LENGTH,30],["92",n.VARIABLE_LENGTH,30],["93",n.VARIABLE_LENGTH,30],["94",n.VARIABLE_LENGTH,30],["95",n.VARIABLE_LENGTH,30],["96",n.VARIABLE_LENGTH,30],["97",n.VARIABLE_LENGTH,3],["98",n.VARIABLE_LENGTH,30],["99",n.VARIABLE_LENGTH,30]],n.THREE_DIGIT_DATA_LENGTH=[["240",n.VARIABLE_LENGTH,30],["241",n.VARIABLE_LENGTH,30],["242",n.VARIABLE_LENGTH,6],["250",n.VARIABLE_LENGTH,30],["251",n.VARIABLE_LENGTH,30],["253",n.VARIABLE_LENGTH,17],["254",n.VARIABLE_LENGTH,20],["400",n.VARIABLE_LENGTH,30],["401",n.VARIABLE_LENGTH,30],["402",17],["403",n.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",n.VARIABLE_LENGTH,20],["421",n.VARIABLE_LENGTH,15],["422",3],["423",n.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],n.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",n.VARIABLE_LENGTH,15],["391",n.VARIABLE_LENGTH,18],["392",n.VARIABLE_LENGTH,15],["393",n.VARIABLE_LENGTH,18],["703",n.VARIABLE_LENGTH,30]],n.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",n.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",n.VARIABLE_LENGTH,20],["8003",n.VARIABLE_LENGTH,30],["8004",n.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",n.VARIABLE_LENGTH,30],["8008",n.VARIABLE_LENGTH,12],["8018",18],["8020",n.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",n.VARIABLE_LENGTH,70],["8200",n.VARIABLE_LENGTH,70]],n})(),n0=(function(){function n(e){this.buffer=new rt,this.information=e}return n.prototype.decodeAllCodes=function(e,t){var r=t,i=null;do{var a=this.decodeGeneralPurposeField(r,i),o=Kk.parseFieldsInGeneralPurpose(a.getNewString());if(o!=null&&e.append(o),a.isRemaining()?i=""+a.getRemainingValue():i=null,r===a.getNewPosition())break;r=a.getNewPosition()}while(!0);return e.toString()},n.prototype.isStillNumeric=function(e){if(e+7>this.information.getSize())return e+4<=this.information.getSize();for(var t=e;t<e+3;++t)if(this.information.get(t))return!0;return this.information.get(e+3)},n.prototype.decodeNumeric=function(e){if(e+7>this.information.getSize()){var t=this.extractNumericValueFromBitArray(e,4);return t===0?new tc(this.information.getSize(),tc.FNC1,tc.FNC1):new tc(this.information.getSize(),t-1,tc.FNC1)}var r=this.extractNumericValueFromBitArray(e,7),i=(r-8)/11,a=(r-8)%11;return new tc(e+7,i,a)},n.prototype.extractNumericValueFromBitArray=function(e,t){return n.extractNumericValueFromBitArray(this.information,e,t)},n.extractNumericValueFromBitArray=function(e,t,r){for(var i=0,a=0;a<r;++a)e.get(t+a)&&(i|=1<<r-a-1);return i},n.prototype.decodeGeneralPurposeField=function(e,t){this.buffer.setLengthToZero(),t!=null&&this.buffer.append(t),this.current.setPosition(e);var r=this.parseBlocks();return r!=null&&r.isRemaining()?new Yo(this.current.getPosition(),this.buffer.toString(),r.getRemainingValue()):new Yo(this.current.getPosition(),this.buffer.toString())},n.prototype.parseBlocks=function(){var e,t;do{var r=this.current.getPosition();this.current.isAlpha()?(t=this.parseAlphaBlock(),e=t.isFinished()):this.current.isIsoIec646()?(t=this.parseIsoIec646Block(),e=t.isFinished()):(t=this.parseNumericBlock(),e=t.isFinished());var i=r!==this.current.getPosition();if(!i&&!e)break}while(!e);return t.getDecodedInformation()},n.prototype.parseNumericBlock=function(){for(;this.isStillNumeric(this.current.getPosition());){var e=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFirstDigitFNC1()){var t=void 0;return e.isSecondDigitFNC1()?t=new Yo(this.current.getPosition(),this.buffer.toString()):t=new Yo(this.current.getPosition(),this.buffer.toString(),e.getSecondDigit()),new Xo(!0,t)}if(this.buffer.append(e.getFirstDigit()),e.isSecondDigitFNC1()){var t=new Yo(this.current.getPosition(),this.buffer.toString());return new Xo(!0,t)}this.buffer.append(e.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new Xo(!1)},n.prototype.parseIsoIec646Block=function(){for(;this.isStillIsoIec646(this.current.getPosition());){var e=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var t=new Yo(this.current.getPosition(),this.buffer.toString());return new Xo(!0,t)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new Xo(!1)},n.prototype.parseAlphaBlock=function(){for(;this.isStillAlpha(this.current.getPosition());){var e=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var t=new Yo(this.current.getPosition(),this.buffer.toString());return new Xo(!0,t)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new Xo(!1)},n.prototype.isStillIsoIec646=function(e){if(e+5>this.information.getSize())return!1;var t=this.extractNumericValueFromBitArray(e,5);if(t>=5&&t<16)return!0;if(e+7>this.information.getSize())return!1;var r=this.extractNumericValueFromBitArray(e,7);if(r>=64&&r<116)return!0;if(e+8>this.information.getSize())return!1;var i=this.extractNumericValueFromBitArray(e,8);return i>=232&&i<253},n.prototype.decodeIsoIec646=function(e){var t=this.extractNumericValueFromBitArray(e,5);if(t===15)return new ki(e+5,ki.FNC1);if(t>=5&&t<15)return new ki(e+5,"0"+(t-5));var r=this.extractNumericValueFromBitArray(e,7);if(r>=64&&r<90)return new ki(e+7,""+(r+1));if(r>=90&&r<116)return new ki(e+7,""+(r+7));var i=this.extractNumericValueFromBitArray(e,8),a;switch(i){case 232:a="!";break;case 233:a='"';break;case 234:a="%";break;case 235:a="&";break;case 236:a="'";break;case 237:a="(";break;case 238:a=")";break;case 239:a="*";break;case 240:a="+";break;case 241:a=",";break;case 242:a="-";break;case 243:a=".";break;case 244:a="/";break;case 245:a=":";break;case 246:a=";";break;case 247:a="<";break;case 248:a="=";break;case 249:a=">";break;case 250:a="?";break;case 251:a="_";break;case 252:a=" ";break;default:throw new _e}return new ki(e+8,a)},n.prototype.isStillAlpha=function(e){if(e+5>this.information.getSize())return!1;var t=this.extractNumericValueFromBitArray(e,5);if(t>=5&&t<16)return!0;if(e+6>this.information.getSize())return!1;var r=this.extractNumericValueFromBitArray(e,6);return r>=16&&r<63},n.prototype.decodeAlphanumeric=function(e){var t=this.extractNumericValueFromBitArray(e,5);if(t===15)return new ki(e+5,ki.FNC1);if(t>=5&&t<15)return new ki(e+5,"0"+(t-5));var r=this.extractNumericValueFromBitArray(e,6);if(r>=32&&r<58)return new ki(e+6,""+(r+33));var i;switch(r){case 58:i="*";break;case 59:i=",";break;case 60:i="-";break;case 61:i=".";break;case 62:i="/";break;default:throw new td("Decoding invalid alphanumeric value: "+r)}return new ki(e+6,i)},n.prototype.isAlphaTo646ToAlphaLatch=function(e){if(e+1>this.information.getSize())return!1;for(var t=0;t<5&&t+e<this.information.getSize();++t)if(t===2){if(!this.information.get(e+2))return!1}else if(this.information.get(e+t))return!1;return!0},n.prototype.isAlphaOr646ToNumericLatch=function(e){if(e+3>this.information.getSize())return!1;for(var t=e;t<e+3;++t)if(this.information.get(t))return!1;return!0},n.prototype.isNumericToAlphaNumericLatch=function(e){if(e+1>this.information.getSize())return!1;for(var t=0;t<4&&t+e<this.information.getSize();++t)if(this.information.get(e+t))return!1;return!0},n})(),k3=(function(){function n(e){this.information=e,this.generalDecoder=new n0(e)}return n.prototype.getInformation=function(){return this.information},n.prototype.getGeneralDecoder=function(){return this.generalDecoder},n})(),Wk=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Li=(function(n){Wk(e,n);function e(t){return n.call(this,t)||this}return e.prototype.encodeCompressedGtin=function(t,r){t.append("(01)");var i=t.length();t.append("9"),this.encodeCompressedGtinWithoutAI(t,r,i)},e.prototype.encodeCompressedGtinWithoutAI=function(t,r,i){for(var a=0;a<4;++a){var o=this.getGeneralDecoder().extractNumericValueFromBitArray(r+10*a,10);o/100===0&&t.append("0"),o/10===0&&t.append("0"),t.append(o)}e.appendCheckDigit(t,i)},e.appendCheckDigit=function(t,r){for(var i=0,a=0;a<13;a++){var o=t.charAt(a+r).charCodeAt(0)-48;i+=(a&1)===0?3*o:o}i=10-i%10,i===10&&(i=0),t.append(i)},e.GTIN_SIZE=40,e})(k3),Qk=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Zk=(function(n){Qk(e,n);function e(t){return n.call(this,t)||this}return e.prototype.parseInformation=function(){var t=new rt;t.append("(01)");var r=t.length(),i=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE,4);return t.append(i),this.encodeCompressedGtinWithoutAI(t,e.HEADER_SIZE+4,r),this.getGeneralDecoder().decodeAllCodes(t,e.HEADER_SIZE+44)},e.HEADER_SIZE=4,e})(Li),Jk=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),ej=(function(n){Jk(e,n);function e(t){return n.call(this,t)||this}return e.prototype.parseInformation=function(){var t=new rt;return this.getGeneralDecoder().decodeAllCodes(t,e.HEADER_SIZE)},e.HEADER_SIZE=5,e})(k3),tj=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),r0=(function(n){tj(e,n);function e(t){return n.call(this,t)||this}return e.prototype.encodeCompressedWeight=function(t,r,i){var a=this.getGeneralDecoder().extractNumericValueFromBitArray(r,i);this.addWeightCode(t,a);for(var o=this.checkWeight(a),c=1e5,u=0;u<5;++u)o/c===0&&t.append("0"),c/=10;t.append(o)},e})(Li),nj=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),j3=(function(n){nj(e,n);function e(t){return n.call(this,t)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()!==e.HEADER_SIZE+r0.GTIN_SIZE+e.WEIGHT_SIZE)throw new oe;var t=new rt;return this.encodeCompressedGtin(t,e.HEADER_SIZE),this.encodeCompressedWeight(t,e.HEADER_SIZE+r0.GTIN_SIZE,e.WEIGHT_SIZE),t.toString()},e.HEADER_SIZE=5,e.WEIGHT_SIZE=15,e})(r0),rj=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),ij=(function(n){rj(e,n);function e(t){return n.call(this,t)||this}return e.prototype.addWeightCode=function(t,r){t.append("(3103)")},e.prototype.checkWeight=function(t){return t},e})(j3),aj=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),sj=(function(n){aj(e,n);function e(t){return n.call(this,t)||this}return e.prototype.addWeightCode=function(t,r){r<1e4?t.append("(3202)"):t.append("(3203)")},e.prototype.checkWeight=function(t){return t<1e4?t:t-1e4},e})(j3),oj=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),lj=(function(n){oj(e,n);function e(t){return n.call(this,t)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()<e.HEADER_SIZE+Li.GTIN_SIZE)throw new oe;var t=new rt;this.encodeCompressedGtin(t,e.HEADER_SIZE);var r=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+Li.GTIN_SIZE,e.LAST_DIGIT_SIZE);t.append("(392"),t.append(r),t.append(")");var i=this.getGeneralDecoder().decodeGeneralPurposeField(e.HEADER_SIZE+Li.GTIN_SIZE+e.LAST_DIGIT_SIZE,null);return t.append(i.getNewString()),t.toString()},e.HEADER_SIZE=8,e.LAST_DIGIT_SIZE=2,e})(Li),cj=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),uj=(function(n){cj(e,n);function e(t){return n.call(this,t)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()<e.HEADER_SIZE+Li.GTIN_SIZE)throw new oe;var t=new rt;this.encodeCompressedGtin(t,e.HEADER_SIZE);var r=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+Li.GTIN_SIZE,e.LAST_DIGIT_SIZE);t.append("(393"),t.append(r),t.append(")");var i=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+Li.GTIN_SIZE+e.LAST_DIGIT_SIZE,e.FIRST_THREE_DIGITS_SIZE);i/100===0&&t.append("0"),i/10===0&&t.append("0"),t.append(i);var a=this.getGeneralDecoder().decodeGeneralPurposeField(e.HEADER_SIZE+Li.GTIN_SIZE+e.LAST_DIGIT_SIZE+e.FIRST_THREE_DIGITS_SIZE,null);return t.append(a.getNewString()),t.toString()},e.HEADER_SIZE=8,e.LAST_DIGIT_SIZE=2,e.FIRST_THREE_DIGITS_SIZE=10,e})(Li),fj=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Fs=(function(n){fj(e,n);function e(t,r,i){var a=n.call(this,t)||this;return a.dateCode=i,a.firstAIdigits=r,a}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()!==e.HEADER_SIZE+e.GTIN_SIZE+e.WEIGHT_SIZE+e.DATE_SIZE)throw new oe;var t=new rt;return this.encodeCompressedGtin(t,e.HEADER_SIZE),this.encodeCompressedWeight(t,e.HEADER_SIZE+e.GTIN_SIZE,e.WEIGHT_SIZE),this.encodeCompressedDate(t,e.HEADER_SIZE+e.GTIN_SIZE+e.WEIGHT_SIZE),t.toString()},e.prototype.encodeCompressedDate=function(t,r){var i=this.getGeneralDecoder().extractNumericValueFromBitArray(r,e.DATE_SIZE);if(i!==38400){t.append("("),t.append(this.dateCode),t.append(")");var a=i%32;i/=32;var o=i%12+1;i/=12;var c=i;c/10===0&&t.append("0"),t.append(c),o/10===0&&t.append("0"),t.append(o),a/10===0&&t.append("0"),t.append(a)}},e.prototype.addWeightCode=function(t,r){t.append("("),t.append(this.firstAIdigits),t.append(r/1e5),t.append(")")},e.prototype.checkWeight=function(t){return t%1e5},e.HEADER_SIZE=8,e.WEIGHT_SIZE=20,e.DATE_SIZE=16,e})(r0);function dj(n){try{if(n.get(1))return new Zk(n);if(!n.get(2))return new ej(n);var e=n0.extractNumericValueFromBitArray(n,1,4);switch(e){case 4:return new ij(n);case 5:return new sj(n)}var t=n0.extractNumericValueFromBitArray(n,1,5);switch(t){case 12:return new lj(n);case 13:return new uj(n)}var r=n0.extractNumericValueFromBitArray(n,1,7);switch(r){case 56:return new Fs(n,"310","11");case 57:return new Fs(n,"320","11");case 58:return new Fs(n,"310","13");case 59:return new Fs(n,"320","13");case 60:return new Fs(n,"310","15");case 61:return new Fs(n,"320","15");case 62:return new Fs(n,"310","17");case 63:return new Fs(n,"320","17")}}catch(i){throw console.log(i),new td("unknown decoder: "+n)}}var GA=(function(){function n(e,t,r,i){this.leftchar=e,this.rightchar=t,this.finderpattern=r,this.maybeLast=i}return n.prototype.mayBeLast=function(){return this.maybeLast},n.prototype.getLeftChar=function(){return this.leftchar},n.prototype.getRightChar=function(){return this.rightchar},n.prototype.getFinderPattern=function(){return this.finderpattern},n.prototype.mustBeLast=function(){return this.rightchar==null},n.prototype.toString=function(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"},n.equals=function(e,t){return e instanceof n?n.equalsOrNull(e.leftchar,t.leftchar)&&n.equalsOrNull(e.rightchar,t.rightchar)&&n.equalsOrNull(e.finderpattern,t.finderpattern):!1},n.equalsOrNull=function(e,t){return e===null?t===null:n.equals(e,t)},n.prototype.hashCode=function(){var e=this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue();return e},n})(),hj=(function(){function n(e,t,r){this.pairs=e,this.rowNumber=t,this.wasReversed=r}return n.prototype.getPairs=function(){return this.pairs},n.prototype.getRowNumber=function(){return this.rowNumber},n.prototype.isReversed=function(){return this.wasReversed},n.prototype.isEquivalent=function(e){return this.checkEqualitity(this,e)},n.prototype.toString=function(){return"{ "+this.pairs+" }"},n.prototype.equals=function(e,t){return e instanceof n?this.checkEqualitity(e,t)&&e.wasReversed===t.wasReversed:!1},n.prototype.checkEqualitity=function(e,t){if(!(!e||!t)){var r;return e.forEach(function(i,a){t.forEach(function(o){i.getLeftChar().getValue()===o.getLeftChar().getValue()&&i.getRightChar().getValue()===o.getRightChar().getValue()&&i.getFinderPatter().getValue()===o.getFinderPatter().getValue()&&(r=!0)})}),r}},n})(),pj=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Us=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},mj=(function(n){pj(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.pairs=new Array(e.MAX_PAIRS),t.rows=new Array,t.startEnd=[2],t}return e.prototype.decodeRow=function(t,r,i){this.pairs.length=0,this.startFromEven=!1;try{return e.constructResult(this.decodeRow2pairs(t,r))}catch{}return this.pairs.length=0,this.startFromEven=!0,e.constructResult(this.decodeRow2pairs(t,r))},e.prototype.reset=function(){this.pairs.length=0,this.rows.length=0},e.prototype.decodeRow2pairs=function(t,r){for(var i=!1;!i;)try{this.pairs.push(this.retrieveNextPair(r,this.pairs,t))}catch(c){if(c instanceof oe){if(!this.pairs.length)throw new oe;i=!0}}if(this.checkChecksum())return this.pairs;var a;if(this.rows.length?a=!0:a=!1,this.storeRow(t,!1),a){var o=this.checkRowsBoolean(!1);if(o!=null||(o=this.checkRowsBoolean(!0),o!=null))return o}throw new oe},e.prototype.checkRowsBoolean=function(t){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,t&&(this.rows=this.rows.reverse());var r=null;try{r=this.checkRows(new Array,0)}catch(i){console.log(i)}return t&&(this.rows=this.rows.reverse()),r},e.prototype.checkRows=function(t,r){for(var i,a,o=r;o<this.rows.length;o++){var c=this.rows[o];this.pairs.length=0;try{for(var u=(i=void 0,Us(t)),d=u.next();!d.done;d=u.next()){var m=d.value;this.pairs.push(m.getPairs())}}catch(_){i={error:_}}finally{try{d&&!d.done&&(a=u.return)&&a.call(u)}finally{if(i)throw i.error}}if(this.pairs.push(c.getPairs()),!!e.isValidSequence(this.pairs)){if(this.checkChecksum())return this.pairs;var g=new Array(t);g.push(c);try{return this.checkRows(g,o+1)}catch(_){console.log(_)}}}throw new oe},e.isValidSequence=function(t){var r,i;try{for(var a=Us(e.FINDER_PATTERN_SEQUENCES),o=a.next();!o.done;o=a.next()){var c=o.value;if(!(t.length>c.length)){for(var u=!0,d=0;d<t.length;d++)if(t[d].getFinderPattern().getValue()!==c[d]){u=!1;break}if(u)return!0}}}catch(m){r={error:m}}finally{try{o&&!o.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}return!1},e.prototype.storeRow=function(t,r){for(var i=0,a=!1,o=!1;i<this.rows.length;){var c=this.rows[i];if(c.getRowNumber()>t){o=c.isEquivalent(this.pairs);break}a=c.isEquivalent(this.pairs),i++}o||a||e.isPartialRow(this.pairs,this.rows)||(this.rows.push(i,new hj(this.pairs,t,r)),this.removePartialRows(this.pairs,this.rows))},e.prototype.removePartialRows=function(t,r){var i,a,o,c,u,d;try{for(var m=Us(r),g=m.next();!g.done;g=m.next()){var _=g.value;if(_.getPairs().length!==t.length){var w=!0;try{for(var E=(o=void 0,Us(_.getPairs())),S=E.next();!S.done;S=E.next()){var D=S.value,C=!1;try{for(var k=(u=void 0,Us(t)),V=k.next();!V.done;V=k.next()){var U=V.value;if(GA.equals(D,U)){C=!0;break}}}catch(q){u={error:q}}finally{try{V&&!V.done&&(d=k.return)&&d.call(k)}finally{if(u)throw u.error}}C||(w=!1)}}catch(q){o={error:q}}finally{try{S&&!S.done&&(c=E.return)&&c.call(E)}finally{if(o)throw o.error}}}}}catch(q){i={error:q}}finally{try{g&&!g.done&&(a=m.return)&&a.call(m)}finally{if(i)throw i.error}}},e.isPartialRow=function(t,r){var i,a,o,c,u,d;try{for(var m=Us(r),g=m.next();!g.done;g=m.next()){var _=g.value,w=!0;try{for(var E=(o=void 0,Us(t)),S=E.next();!S.done;S=E.next()){var D=S.value,C=!1;try{for(var k=(u=void 0,Us(_.getPairs())),V=k.next();!V.done;V=k.next()){var U=V.value;if(D.equals(U)){C=!0;break}}}catch(q){u={error:q}}finally{try{V&&!V.done&&(d=k.return)&&d.call(k)}finally{if(u)throw u.error}}if(!C){w=!1;break}}}catch(q){o={error:q}}finally{try{S&&!S.done&&(c=E.return)&&c.call(E)}finally{if(o)throw o.error}}if(w)return!0}}catch(q){i={error:q}}finally{try{g&&!g.done&&(a=m.return)&&a.call(m)}finally{if(i)throw i.error}}return!1},e.prototype.getRows=function(){return this.rows},e.constructResult=function(t){var r=qk.buildBitArray(t),i=dj(r),a=i.parseInformation(),o=t[0].getFinderPattern().getResultPoints(),c=t[t.length-1].getFinderPattern().getResultPoints(),u=[o[0],o[1],c[0],c[1]];return new yr(a,null,null,u,Le.RSS_EXPANDED,null)},e.prototype.checkChecksum=function(){var t=this.pairs.get(0),r=t.getLeftChar(),i=t.getRightChar();if(i===null)return!1;for(var a=i.getChecksumPortion(),o=2,c=1;c<this.pairs.size();++c){var u=this.pairs.get(c);a+=u.getLeftChar().getChecksumPortion(),o++;var d=u.getRightChar();d!=null&&(a+=d.getChecksumPortion(),o++)}a%=211;var m=211*(o-4)+a;return m===r.getValue()},e.getNextSecondBar=function(t,r){var i;return t.get(r)?(i=t.getNextUnset(r),i=t.getNextSet(i)):(i=t.getNextSet(r),i=t.getNextUnset(i)),i},e.prototype.retrieveNextPair=function(t,r,i){var a=r.length%2===0;this.startFromEven&&(a=!a);var o,c=!0,u=-1;do this.findNextPair(t,r,u),o=this.parseFoundFinderPattern(t,i,a),o===null?u=e.getNextSecondBar(t,this.startEnd[0]):c=!1;while(c);var d=this.decodeDataCharacter(t,o,a,!0);if(!this.isEmptyPair(r)&&r[r.length-1].mustBeLast())throw new oe;var m;try{m=this.decodeDataCharacter(t,o,a,!1)}catch(g){m=null,console.log(g)}return new GA(d,m,o,!0)},e.prototype.isEmptyPair=function(t){return t.length===0},e.prototype.findNextPair=function(t,r,i){var a=this.getDecodeFinderCounters();a[0]=0,a[1]=0,a[2]=0,a[3]=0;var o=t.getSize(),c;if(i>=0)c=i;else if(this.isEmptyPair(r))c=0;else{var u=r[r.length-1];c=u.getFinderPattern().getStartEnd()[1]}var d=r.length%2!==0;this.startFromEven&&(d=!d);for(var m=!1;c<o&&(m=!t.get(c),!!m);)c++;for(var g=0,_=c,w=c;w<o;w++)if(t.get(w)!==m)a[g]++;else{if(g===3){if(d&&e.reverseCounters(a),e.isFinderPattern(a)){this.startEnd[0]=_,this.startEnd[1]=w;return}d&&e.reverseCounters(a),_+=a[0]+a[1],a[0]=a[2],a[1]=a[3],a[2]=0,a[3]=0,g--}else g++;a[g]=1,m=!m}throw new oe},e.reverseCounters=function(t){for(var r=t.length,i=0;i<r/2;++i){var a=t[i];t[i]=t[r-i-1],t[r-i-1]=a}},e.prototype.parseFoundFinderPattern=function(t,r,i){var a,o,c;if(i){for(var u=this.startEnd[0]-1;u>=0&&!t.get(u);)u--;u++,a=this.startEnd[0]-u,o=u,c=this.startEnd[1]}else o=this.startEnd[0],c=t.getNextUnset(this.startEnd[1]+1),a=c-this.startEnd[1];var d=this.getDecodeFinderCounters();Gt.arraycopy(d,0,d,1,d.length-1),d[0]=a;var m;try{m=this.parseFinderValue(d,e.FINDER_PATTERNS)}catch{return null}return new P3(m,[o,c],o,c,r)},e.prototype.decodeDataCharacter=function(t,r,i,a){for(var o=this.getDataCharacterCounters(),c=0;c<o.length;c++)o[c]=0;if(a)e.recordPatternInReverse(t,r.getStartEnd()[0],o);else{e.recordPattern(t,r.getStartEnd()[1],o);for(var u=0,d=o.length-1;u<d;u++,d--){var m=o[u];o[u]=o[d],o[d]=m}}var g=17,_=wt.sum(new Int32Array(o))/g,w=(r.getStartEnd()[1]-r.getStartEnd()[0])/15;if(Math.abs(_-w)/w>.3)throw new oe;for(var E=this.getOddCounts(),S=this.getEvenCounts(),D=this.getOddRoundingErrors(),C=this.getEvenRoundingErrors(),u=0;u<o.length;u++){var k=1*o[u]/_,V=k+.5;if(V<1){if(k<.3)throw new oe;V=1}else if(V>8){if(k>8.7)throw new oe;V=8}var U=u/2;(u&1)===0?(E[U]=V,D[U]=k-V):(S[U]=V,C[U]=k-V)}this.adjustOddEvenCounts(g);for(var q=4*r.getValue()+(i?0:2)+(a?0:1)-1,$=0,M=0,u=E.length-1;u>=0;u--){if(e.isNotA1left(r,i,a)){var b=e.WEIGHTS[q][2*u];M+=E[u]*b}$+=E[u]}for(var N=0,u=S.length-1;u>=0;u--)if(e.isNotA1left(r,i,a)){var b=e.WEIGHTS[q][2*u+1];N+=S[u]*b}var I=M+N;if(($&1)!==0||$>13||$<4)throw new oe;var R=(13-$)/2,L=e.SYMBOL_WIDEST[R],j=9-L,W=dc.getRSSvalue(E,L,!0),ge=dc.getRSSvalue(S,j,!1),H=e.EVEN_TOTAL_SUBSET[R],G=e.GSUM[R],le=W*H+ge+G;return new P0(le,I)},e.isNotA1left=function(t,r,i){return!(t.getValue()===0&&r&&i)},e.prototype.adjustOddEvenCounts=function(t){var r=wt.sum(new Int32Array(this.getOddCounts())),i=wt.sum(new Int32Array(this.getEvenCounts())),a=!1,o=!1;r>13?o=!0:r<4&&(a=!0);var c=!1,u=!1;i>13?u=!0:i<4&&(c=!0);var d=r+i-t,m=(r&1)===1,g=(i&1)===0;if(d===1)if(m){if(g)throw new oe;o=!0}else{if(!g)throw new oe;u=!0}else if(d===-1)if(m){if(g)throw new oe;a=!0}else{if(!g)throw new oe;c=!0}else if(d===0){if(m){if(!g)throw new oe;r<i?(a=!0,u=!0):(o=!0,c=!0)}else if(g)throw new oe}else throw new oe;if(a){if(o)throw new oe;e.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(o&&e.decrement(this.getOddCounts(),this.getOddRoundingErrors()),c){if(u)throw new oe;e.increment(this.getEvenCounts(),this.getOddRoundingErrors())}u&&e.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},e.SYMBOL_WIDEST=[7,5,4,3,1],e.EVEN_TOTAL_SUBSET=[4,20,52,104,204],e.GSUM=[0,348,1388,2948,3988],e.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],e.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],e.FINDER_PAT_A=0,e.FINDER_PAT_B=1,e.FINDER_PAT_C=2,e.FINDER_PAT_D=3,e.FINDER_PAT_E=4,e.FINDER_PAT_F=5,e.FINDER_PATTERN_SEQUENCES=[[e.FINDER_PAT_A,e.FINDER_PAT_A],[e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B],[e.FINDER_PAT_A,e.FINDER_PAT_C,e.FINDER_PAT_B,e.FINDER_PAT_D],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_C],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_D,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_D],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_E],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F]],e.MAX_PAIRS=11,e})(Wo),gj=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),vj=(function(n){gj(e,n);function e(t,r,i){var a=n.call(this,t,r)||this;return a.count=0,a.finderPattern=i,a}return e.prototype.getFinderPattern=function(){return this.finderPattern},e.prototype.getCount=function(){return this.count},e.prototype.incrementCount=function(){this.count++},e})(P0),yj=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Q1=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},qA=(function(n){yj(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.possibleLeftPairs=[],t.possibleRightPairs=[],t}return e.prototype.decodeRow=function(t,r,i){var a,o,c,u,d=this.decodePair(r,!1,t,i);e.addOrTally(this.possibleLeftPairs,d),r.reverse();var m=this.decodePair(r,!0,t,i);e.addOrTally(this.possibleRightPairs,m),r.reverse();try{for(var g=Q1(this.possibleLeftPairs),_=g.next();!_.done;_=g.next()){var w=_.value;if(w.getCount()>1)try{for(var E=(c=void 0,Q1(this.possibleRightPairs)),S=E.next();!S.done;S=E.next()){var D=S.value;if(D.getCount()>1&&e.checkChecksum(w,D))return e.constructResult(w,D)}}catch(C){c={error:C}}finally{try{S&&!S.done&&(u=E.return)&&u.call(E)}finally{if(c)throw c.error}}}}catch(C){a={error:C}}finally{try{_&&!_.done&&(o=g.return)&&o.call(g)}finally{if(a)throw a.error}}throw new oe},e.addOrTally=function(t,r){var i,a;if(r!=null){var o=!1;try{for(var c=Q1(t),u=c.next();!u.done;u=c.next()){var d=u.value;if(d.getValue()===r.getValue()){d.incrementCount(),o=!0;break}}}catch(m){i={error:m}}finally{try{u&&!u.done&&(a=c.return)&&a.call(c)}finally{if(i)throw i.error}}o||t.push(r)}},e.prototype.reset=function(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0},e.constructResult=function(t,r){for(var i=4537077*t.getValue()+r.getValue(),a=new String(i).toString(),o=new rt,c=13-a.length;c>0;c--)o.append("0");o.append(a);for(var u=0,c=0;c<13;c++){var d=o.charAt(c).charCodeAt(0)-48;u+=(c&1)===0?3*d:d}u=10-u%10,u===10&&(u=0),o.append(u.toString());var m=t.getFinderPattern().getResultPoints(),g=r.getFinderPattern().getResultPoints();return new yr(o.toString(),null,0,[m[0],m[1],g[0],g[1]],Le.RSS_14,new Date().getTime())},e.checkChecksum=function(t,r){var i=(t.getChecksumPortion()+16*r.getChecksumPortion())%79,a=9*t.getFinderPattern().getValue()+r.getFinderPattern().getValue();return a>72&&a--,a>8&&a--,i===a},e.prototype.decodePair=function(t,r,i,a){try{var o=this.findFinderPattern(t,r),c=this.parseFoundFinderPattern(t,i,r,o),u=a==null?null:a.get(qt.NEED_RESULT_POINT_CALLBACK);if(u!=null){var d=(o[0]+o[1])/2;r&&(d=t.getSize()-1-d),u.foundPossibleResultPoint(new Ne(d,i))}var m=this.decodeDataCharacter(t,c,!0),g=this.decodeDataCharacter(t,c,!1);return new vj(1597*m.getValue()+g.getValue(),m.getChecksumPortion()+4*g.getChecksumPortion(),c)}catch{return null}},e.prototype.decodeDataCharacter=function(t,r,i){for(var a=this.getDataCharacterCounters(),o=0;o<a.length;o++)a[o]=0;if(i)kn.recordPatternInReverse(t,r.getStartEnd()[0],a);else{kn.recordPattern(t,r.getStartEnd()[1]+1,a);for(var c=0,u=a.length-1;c<u;c++,u--){var d=a[c];a[c]=a[u],a[u]=d}}for(var m=i?16:15,g=wt.sum(new Int32Array(a))/m,_=this.getOddCounts(),w=this.getEvenCounts(),E=this.getOddRoundingErrors(),S=this.getEvenRoundingErrors(),c=0;c<a.length;c++){var D=a[c]/g,C=Math.floor(D+.5);C<1?C=1:C>8&&(C=8);var k=Math.floor(c/2);(c&1)===0?(_[k]=C,E[k]=D-C):(w[k]=C,S[k]=D-C)}this.adjustOddEvenCounts(i,m);for(var V=0,U=0,c=_.length-1;c>=0;c--)U*=9,U+=_[c],V+=_[c];for(var q=0,$=0,c=w.length-1;c>=0;c--)q*=9,q+=w[c],$+=w[c];var M=U+3*q;if(i){if((V&1)!==0||V>12||V<4)throw new oe;var b=(12-V)/2,N=e.OUTSIDE_ODD_WIDEST[b],I=9-N,R=dc.getRSSvalue(_,N,!1),L=dc.getRSSvalue(w,I,!0),j=e.OUTSIDE_EVEN_TOTAL_SUBSET[b],W=e.OUTSIDE_GSUM[b];return new P0(R*j+L+W,M)}else{if(($&1)!==0||$>10||$<4)throw new oe;var b=(10-$)/2,N=e.INSIDE_ODD_WIDEST[b],I=9-N,R=dc.getRSSvalue(_,N,!0),L=dc.getRSSvalue(w,I,!1),ge=e.INSIDE_ODD_TOTAL_SUBSET[b],W=e.INSIDE_GSUM[b];return new P0(L*ge+R+W,M)}},e.prototype.findFinderPattern=function(t,r){var i=this.getDecodeFinderCounters();i[0]=0,i[1]=0,i[2]=0,i[3]=0;for(var a=t.getSize(),o=!1,c=0;c<a&&(o=!t.get(c),r!==o);)c++;for(var u=0,d=c,m=c;m<a;m++)if(t.get(m)!==o)i[u]++;else{if(u===3){if(Wo.isFinderPattern(i))return[d,m];d+=i[0]+i[1],i[0]=i[2],i[1]=i[3],i[2]=0,i[3]=0,u--}else u++;i[u]=1,o=!o}throw new oe},e.prototype.parseFoundFinderPattern=function(t,r,i,a){for(var o=t.get(a[0]),c=a[0]-1;c>=0&&o!==t.get(c);)c--;c++;var u=a[0]-c,d=this.getDecodeFinderCounters(),m=new Int32Array(d.length);Gt.arraycopy(d,0,m,1,d.length-1),m[0]=u;var g=this.parseFinderValue(m,e.FINDER_PATTERNS),_=c,w=a[1];return i&&(_=t.getSize()-1-_,w=t.getSize()-1-w),new P3(g,[c,a[1]],_,w,r)},e.prototype.adjustOddEvenCounts=function(t,r){var i=wt.sum(new Int32Array(this.getOddCounts())),a=wt.sum(new Int32Array(this.getEvenCounts())),o=!1,c=!1,u=!1,d=!1;t?(i>12?c=!0:i<4&&(o=!0),a>12?d=!0:a<4&&(u=!0)):(i>11?c=!0:i<5&&(o=!0),a>10?d=!0:a<4&&(u=!0));var m=i+a-r,g=(i&1)===(t?1:0),_=(a&1)===1;if(m===1)if(g){if(_)throw new oe;c=!0}else{if(!_)throw new oe;d=!0}else if(m===-1)if(g){if(_)throw new oe;o=!0}else{if(!_)throw new oe;u=!0}else if(m===0){if(g){if(!_)throw new oe;i<a?(o=!0,d=!0):(c=!0,u=!0)}else if(_)throw new oe}else throw new oe;if(o){if(c)throw new oe;Wo.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(c&&Wo.decrement(this.getOddCounts(),this.getOddRoundingErrors()),u){if(d)throw new oe;Wo.increment(this.getEvenCounts(),this.getOddRoundingErrors())}d&&Wo.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},e.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],e.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],e.OUTSIDE_GSUM=[0,161,961,2015,2715],e.INSIDE_GSUM=[0,336,1036,1516],e.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],e.INSIDE_ODD_WIDEST=[2,4,6,8],e.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])],e})(Wo),_j=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),hc=(function(n){_j(e,n);function e(t){var r=n.call(this)||this;r.readers=[];var i=t?t.get(qt.POSSIBLE_FORMATS):null,a=t&&t.get(qt.ASSUME_CODE_39_CHECK_DIGIT)!==void 0,o=t&&t.get(qt.ENABLE_CODE_39_EXTENDED_MODE)!==void 0;return i&&((i.includes(Le.EAN_13)||i.includes(Le.UPC_A)||i.includes(Le.EAN_8)||i.includes(Le.UPC_E))&&r.readers.push(new W1(t)),i.includes(Le.CODE_39)&&r.readers.push(new kA(a,o)),i.includes(Le.CODE_93)&&r.readers.push(new jA),i.includes(Le.CODE_128)&&r.readers.push(new PA),i.includes(Le.ITF)&&r.readers.push(new LA),i.includes(Le.CODABAR)&&r.readers.push(new Uk),i.includes(Le.RSS_14)&&r.readers.push(new qA),i.includes(Le.RSS_EXPANDED)&&(console.warn("RSS Expanded reader IS NOT ready for production yet! use at your own risk."),r.readers.push(new mj))),r.readers.length===0&&(r.readers.push(new W1(t)),r.readers.push(new kA),r.readers.push(new jA),r.readers.push(new W1(t)),r.readers.push(new PA),r.readers.push(new LA),r.readers.push(new qA)),r}return e.prototype.decodeRow=function(t,r,i){for(var a=0;a<this.readers.length;a++)try{return this.readers[a].decodeRow(t,r,i)}catch{}throw new oe},e.prototype.reset=function(){this.readers.forEach(function(t){return t.reset()})},e})(kn),xj=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})();(function(n){xj(e,n);function e(t,r){return t===void 0&&(t=500),n.call(this,new hc(r),t,r)||this}return e})($c);var $A=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Tt=(function(){function n(e,t,r){this.ecCodewords=e,this.ecBlocks=[t],r&&this.ecBlocks.push(r)}return n.prototype.getECCodewords=function(){return this.ecCodewords},n.prototype.getECBlocks=function(){return this.ecBlocks},n})(),bt=(function(){function n(e,t){this.count=e,this.dataCodewords=t}return n.prototype.getCount=function(){return this.count},n.prototype.getDataCodewords=function(){return this.dataCodewords},n})(),wj=(function(){function n(e,t,r,i,a,o){var c,u;this.versionNumber=e,this.symbolSizeRows=t,this.symbolSizeColumns=r,this.dataRegionSizeRows=i,this.dataRegionSizeColumns=a,this.ecBlocks=o;var d=0,m=o.getECCodewords(),g=o.getECBlocks();try{for(var _=$A(g),w=_.next();!w.done;w=_.next()){var E=w.value;d+=E.getCount()*(E.getDataCodewords()+m)}}catch(S){c={error:S}}finally{try{w&&!w.done&&(u=_.return)&&u.call(_)}finally{if(c)throw c.error}}this.totalCodewords=d}return n.prototype.getVersionNumber=function(){return this.versionNumber},n.prototype.getSymbolSizeRows=function(){return this.symbolSizeRows},n.prototype.getSymbolSizeColumns=function(){return this.symbolSizeColumns},n.prototype.getDataRegionSizeRows=function(){return this.dataRegionSizeRows},n.prototype.getDataRegionSizeColumns=function(){return this.dataRegionSizeColumns},n.prototype.getTotalCodewords=function(){return this.totalCodewords},n.prototype.getECBlocks=function(){return this.ecBlocks},n.getVersionForDimensions=function(e,t){var r,i;if((e&1)!==0||(t&1)!==0)throw new _e;try{for(var a=$A(n.VERSIONS),o=a.next();!o.done;o=a.next()){var c=o.value;if(c.symbolSizeRows===e&&c.symbolSizeColumns===t)return c}}catch(u){r={error:u}}finally{try{o&&!o.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}throw new _e},n.prototype.toString=function(){return""+this.versionNumber},n.buildVersions=function(){return[new n(1,10,10,8,8,new Tt(5,new bt(1,3))),new n(2,12,12,10,10,new Tt(7,new bt(1,5))),new n(3,14,14,12,12,new Tt(10,new bt(1,8))),new n(4,16,16,14,14,new Tt(12,new bt(1,12))),new n(5,18,18,16,16,new Tt(14,new bt(1,18))),new n(6,20,20,18,18,new Tt(18,new bt(1,22))),new n(7,22,22,20,20,new Tt(20,new bt(1,30))),new n(8,24,24,22,22,new Tt(24,new bt(1,36))),new n(9,26,26,24,24,new Tt(28,new bt(1,44))),new n(10,32,32,14,14,new Tt(36,new bt(1,62))),new n(11,36,36,16,16,new Tt(42,new bt(1,86))),new n(12,40,40,18,18,new Tt(48,new bt(1,114))),new n(13,44,44,20,20,new Tt(56,new bt(1,144))),new n(14,48,48,22,22,new Tt(68,new bt(1,174))),new n(15,52,52,24,24,new Tt(42,new bt(2,102))),new n(16,64,64,14,14,new Tt(56,new bt(2,140))),new n(17,72,72,16,16,new Tt(36,new bt(4,92))),new n(18,80,80,18,18,new Tt(48,new bt(4,114))),new n(19,88,88,20,20,new Tt(56,new bt(4,144))),new n(20,96,96,22,22,new Tt(68,new bt(4,174))),new n(21,104,104,24,24,new Tt(56,new bt(6,136))),new n(22,120,120,18,18,new Tt(68,new bt(6,175))),new n(23,132,132,20,20,new Tt(62,new bt(8,163))),new n(24,144,144,22,22,new Tt(62,new bt(8,156),new bt(2,155))),new n(25,8,18,6,16,new Tt(7,new bt(1,5))),new n(26,8,32,6,14,new Tt(11,new bt(1,10))),new n(27,12,26,10,24,new Tt(14,new bt(1,16))),new n(28,12,36,10,16,new Tt(18,new bt(1,22))),new n(29,16,36,14,16,new Tt(24,new bt(1,32))),new n(30,16,48,14,22,new Tt(28,new bt(1,49)))]},n.VERSIONS=n.buildVersions(),n})(),Ej=(function(){function n(e){var t=e.getHeight();if(t<8||t>144||(t&1)!==0)throw new _e;this.version=n.readVersion(e),this.mappingBitMatrix=this.extractDataRegion(e),this.readMappingMatrix=new Ta(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}return n.prototype.getVersion=function(){return this.version},n.readVersion=function(e){var t=e.getHeight(),r=e.getWidth();return wj.getVersionForDimensions(t,r)},n.prototype.readCodewords=function(){var e=new Int8Array(this.version.getTotalCodewords()),t=0,r=4,i=0,a=this.mappingBitMatrix.getHeight(),o=this.mappingBitMatrix.getWidth(),c=!1,u=!1,d=!1,m=!1;do if(r===a&&i===0&&!c)e[t++]=this.readCorner1(a,o)&255,r-=2,i+=2,c=!0;else if(r===a-2&&i===0&&(o&3)!==0&&!u)e[t++]=this.readCorner2(a,o)&255,r-=2,i+=2,u=!0;else if(r===a+4&&i===2&&(o&7)===0&&!d)e[t++]=this.readCorner3(a,o)&255,r-=2,i+=2,d=!0;else if(r===a-2&&i===0&&(o&7)===4&&!m)e[t++]=this.readCorner4(a,o)&255,r-=2,i+=2,m=!0;else{do r<a&&i>=0&&!this.readMappingMatrix.get(i,r)&&(e[t++]=this.readUtah(r,i,a,o)&255),r-=2,i+=2;while(r>=0&&i<o);r+=1,i+=3;do r>=0&&i<o&&!this.readMappingMatrix.get(i,r)&&(e[t++]=this.readUtah(r,i,a,o)&255),r+=2,i-=2;while(r<a&&i>=0);r+=3,i+=1}while(r<a||i<o);if(t!==this.version.getTotalCodewords())throw new _e;return e},n.prototype.readModule=function(e,t,r,i){return e<0&&(e+=r,t+=4-(r+4&7)),t<0&&(t+=i,e+=4-(i+4&7)),this.readMappingMatrix.set(t,e),this.mappingBitMatrix.get(t,e)},n.prototype.readUtah=function(e,t,r,i){var a=0;return this.readModule(e-2,t-2,r,i)&&(a|=1),a<<=1,this.readModule(e-2,t-1,r,i)&&(a|=1),a<<=1,this.readModule(e-1,t-2,r,i)&&(a|=1),a<<=1,this.readModule(e-1,t-1,r,i)&&(a|=1),a<<=1,this.readModule(e-1,t,r,i)&&(a|=1),a<<=1,this.readModule(e,t-2,r,i)&&(a|=1),a<<=1,this.readModule(e,t-1,r,i)&&(a|=1),a<<=1,this.readModule(e,t,r,i)&&(a|=1),a},n.prototype.readCorner1=function(e,t){var r=0;return this.readModule(e-1,0,e,t)&&(r|=1),r<<=1,this.readModule(e-1,1,e,t)&&(r|=1),r<<=1,this.readModule(e-1,2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-1,e,t)&&(r|=1),r<<=1,this.readModule(1,t-1,e,t)&&(r|=1),r<<=1,this.readModule(2,t-1,e,t)&&(r|=1),r<<=1,this.readModule(3,t-1,e,t)&&(r|=1),r},n.prototype.readCorner2=function(e,t){var r=0;return this.readModule(e-3,0,e,t)&&(r|=1),r<<=1,this.readModule(e-2,0,e,t)&&(r|=1),r<<=1,this.readModule(e-1,0,e,t)&&(r|=1),r<<=1,this.readModule(0,t-4,e,t)&&(r|=1),r<<=1,this.readModule(0,t-3,e,t)&&(r|=1),r<<=1,this.readModule(0,t-2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-1,e,t)&&(r|=1),r<<=1,this.readModule(1,t-1,e,t)&&(r|=1),r},n.prototype.readCorner3=function(e,t){var r=0;return this.readModule(e-1,0,e,t)&&(r|=1),r<<=1,this.readModule(e-1,t-1,e,t)&&(r|=1),r<<=1,this.readModule(0,t-3,e,t)&&(r|=1),r<<=1,this.readModule(0,t-2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-1,e,t)&&(r|=1),r<<=1,this.readModule(1,t-3,e,t)&&(r|=1),r<<=1,this.readModule(1,t-2,e,t)&&(r|=1),r<<=1,this.readModule(1,t-1,e,t)&&(r|=1),r},n.prototype.readCorner4=function(e,t){var r=0;return this.readModule(e-3,0,e,t)&&(r|=1),r<<=1,this.readModule(e-2,0,e,t)&&(r|=1),r<<=1,this.readModule(e-1,0,e,t)&&(r|=1),r<<=1,this.readModule(0,t-2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-1,e,t)&&(r|=1),r<<=1,this.readModule(1,t-1,e,t)&&(r|=1),r<<=1,this.readModule(2,t-1,e,t)&&(r|=1),r<<=1,this.readModule(3,t-1,e,t)&&(r|=1),r},n.prototype.extractDataRegion=function(e){var t=this.version.getSymbolSizeRows(),r=this.version.getSymbolSizeColumns();if(e.getHeight()!==t)throw new Be("Dimension of bitMatrix must match the version size");for(var i=this.version.getDataRegionSizeRows(),a=this.version.getDataRegionSizeColumns(),o=t/i|0,c=r/a|0,u=o*i,d=c*a,m=new Ta(d,u),g=0;g<o;++g)for(var _=g*i,w=0;w<c;++w)for(var E=w*a,S=0;S<i;++S)for(var D=g*(i+2)+1+S,C=_+S,k=0;k<a;++k){var V=w*(a+2)+1+k;if(e.get(V,D)){var U=E+k;m.set(U,C)}}return m},n})(),XA=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Aj=(function(){function n(e,t){this.numDataCodewords=e,this.codewords=t}return n.getDataBlocks=function(e,t){var r,i,a,o,c=t.getECBlocks(),u=0,d=c.getECBlocks();try{for(var m=XA(d),g=m.next();!g.done;g=m.next()){var _=g.value;u+=_.getCount()}}catch(W){r={error:W}}finally{try{g&&!g.done&&(i=m.return)&&i.call(m)}finally{if(r)throw r.error}}var w=new Array(u),E=0;try{for(var S=XA(d),D=S.next();!D.done;D=S.next())for(var _=D.value,C=0;C<_.getCount();C++){var k=_.getDataCodewords(),V=c.getECCodewords()+k;w[E++]=new n(k,new Uint8Array(V))}}catch(W){a={error:W}}finally{try{D&&!D.done&&(o=S.return)&&o.call(S)}finally{if(a)throw a.error}}for(var U=w[0].codewords.length,q=U-c.getECCodewords(),$=q-1,M=0,C=0;C<$;C++)for(var b=0;b<E;b++)w[b].codewords[C]=e[M++];for(var N=t.getVersionNumber()===24,I=N?8:E,b=0;b<I;b++)w[b].codewords[q-1]=e[M++];for(var R=w[0].codewords.length,C=q;C<R;C++)for(var b=0;b<E;b++){var L=N?(b+8)%E:b,j=N&&L>7?C-1:C;w[L].codewords[j]=e[M++]}if(M!==e.length)throw new Be;return w},n.prototype.getNumDataCodewords=function(){return this.numDataCodewords},n.prototype.getCodewords=function(){return this.codewords},n})(),L3=(function(){function n(e){this.bytes=e,this.byteOffset=0,this.bitOffset=0}return n.prototype.getBitOffset=function(){return this.bitOffset},n.prototype.getByteOffset=function(){return this.byteOffset},n.prototype.readBits=function(e){if(e<1||e>32||e>this.available())throw new Be(""+e);var t=0,r=this.bitOffset,i=this.byteOffset,a=this.bytes;if(r>0){var o=8-r,c=e<o?e:o,u=o-c,d=255>>8-c<<u;t=(a[i]&d)>>u,e-=c,r+=c,r===8&&(r=0,i++)}if(e>0){for(;e>=8;)t=t<<8|a[i]&255,i++,e-=8;if(e>0){var u=8-e,d=255>>u<<u;t=t<<e|(a[i]&d)>>u,r+=e}}return this.bitOffset=r,this.byteOffset=i,t},n.prototype.available=function(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset},n})(),Rn;(function(n){n[n.PAD_ENCODE=0]="PAD_ENCODE",n[n.ASCII_ENCODE=1]="ASCII_ENCODE",n[n.C40_ENCODE=2]="C40_ENCODE",n[n.TEXT_ENCODE=3]="TEXT_ENCODE",n[n.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",n[n.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",n[n.BASE256_ENCODE=6]="BASE256_ENCODE"})(Rn||(Rn={}));var bj=(function(){function n(){}return n.decode=function(e){var t=new L3(e),r=new rt,i=new rt,a=new Array,o=Rn.ASCII_ENCODE;do if(o===Rn.ASCII_ENCODE)o=this.decodeAsciiSegment(t,r,i);else{switch(o){case Rn.C40_ENCODE:this.decodeC40Segment(t,r);break;case Rn.TEXT_ENCODE:this.decodeTextSegment(t,r);break;case Rn.ANSIX12_ENCODE:this.decodeAnsiX12Segment(t,r);break;case Rn.EDIFACT_ENCODE:this.decodeEdifactSegment(t,r);break;case Rn.BASE256_ENCODE:this.decodeBase256Segment(t,r,a);break;default:throw new _e}o=Rn.ASCII_ENCODE}while(o!==Rn.PAD_ENCODE&&t.available()>0);return i.length()>0&&r.append(i.toString()),new Ap(e,r.toString(),a.length===0?null:a,null)},n.decodeAsciiSegment=function(e,t,r){var i=!1;do{var a=e.readBits(8);if(a===0)throw new _e;if(a<=128)return i&&(a+=128),t.append(String.fromCharCode(a-1)),Rn.ASCII_ENCODE;if(a===129)return Rn.PAD_ENCODE;if(a<=229){var o=a-130;o<10&&t.append("0"),t.append(""+o)}else switch(a){case 230:return Rn.C40_ENCODE;case 231:return Rn.BASE256_ENCODE;case 232:t.append("");break;case 233:case 234:break;case 235:i=!0;break;case 236:t.append("[)>05"),r.insert(0,"");break;case 237:t.append("[)>06"),r.insert(0,"");break;case 238:return Rn.ANSIX12_ENCODE;case 239:return Rn.TEXT_ENCODE;case 240:return Rn.EDIFACT_ENCODE;case 241:break;default:if(a!==254||e.available()!==0)throw new _e;break}}while(e.available()>0);return Rn.ASCII_ENCODE},n.decodeC40Segment=function(e,t){var r=!1,i=[],a=0;do{if(e.available()===8)return;var o=e.readBits(8);if(o===254)return;this.parseTwoBytes(o,e.readBits(8),i);for(var c=0;c<3;c++){var u=i[c];switch(a){case 0:if(u<3)a=u+1;else if(u<this.C40_BASIC_SET_CHARS.length){var d=this.C40_BASIC_SET_CHARS[u];r?(t.append(String.fromCharCode(d.charCodeAt(0)+128)),r=!1):t.append(d)}else throw new _e;break;case 1:r?(t.append(String.fromCharCode(u+128)),r=!1):t.append(String.fromCharCode(u)),a=0;break;case 2:if(u<this.C40_SHIFT2_SET_CHARS.length){var d=this.C40_SHIFT2_SET_CHARS[u];r?(t.append(String.fromCharCode(d.charCodeAt(0)+128)),r=!1):t.append(d)}else switch(u){case 27:t.append("");break;case 30:r=!0;break;default:throw new _e}a=0;break;case 3:r?(t.append(String.fromCharCode(u+224)),r=!1):t.append(String.fromCharCode(u+96)),a=0;break;default:throw new _e}}}while(e.available()>0)},n.decodeTextSegment=function(e,t){var r=!1,i=[],a=0;do{if(e.available()===8)return;var o=e.readBits(8);if(o===254)return;this.parseTwoBytes(o,e.readBits(8),i);for(var c=0;c<3;c++){var u=i[c];switch(a){case 0:if(u<3)a=u+1;else if(u<this.TEXT_BASIC_SET_CHARS.length){var d=this.TEXT_BASIC_SET_CHARS[u];r?(t.append(String.fromCharCode(d.charCodeAt(0)+128)),r=!1):t.append(d)}else throw new _e;break;case 1:r?(t.append(String.fromCharCode(u+128)),r=!1):t.append(String.fromCharCode(u)),a=0;break;case 2:if(u<this.TEXT_SHIFT2_SET_CHARS.length){var d=this.TEXT_SHIFT2_SET_CHARS[u];r?(t.append(String.fromCharCode(d.charCodeAt(0)+128)),r=!1):t.append(d)}else switch(u){case 27:t.append("");break;case 30:r=!0;break;default:throw new _e}a=0;break;case 3:if(u<this.TEXT_SHIFT3_SET_CHARS.length){var d=this.TEXT_SHIFT3_SET_CHARS[u];r?(t.append(String.fromCharCode(d.charCodeAt(0)+128)),r=!1):t.append(d),a=0}else throw new _e;break;default:throw new _e}}}while(e.available()>0)},n.decodeAnsiX12Segment=function(e,t){var r=[];do{if(e.available()===8)return;var i=e.readBits(8);if(i===254)return;this.parseTwoBytes(i,e.readBits(8),r);for(var a=0;a<3;a++){var o=r[a];switch(o){case 0:t.append("\r");break;case 1:t.append("*");break;case 2:t.append(">");break;case 3:t.append(" ");break;default:if(o<14)t.append(String.fromCharCode(o+44));else if(o<40)t.append(String.fromCharCode(o+51));else throw new _e;break}}}while(e.available()>0)},n.parseTwoBytes=function(e,t,r){var i=(e<<8)+t-1,a=Math.floor(i/1600);r[0]=a,i-=a*1600,a=Math.floor(i/40),r[1]=a,r[2]=i-a*40},n.decodeEdifactSegment=function(e,t){do{if(e.available()<=16)return;for(var r=0;r<4;r++){var i=e.readBits(6);if(i===31){var a=8-e.getBitOffset();a!==8&&e.readBits(a);return}(i&32)===0&&(i|=64),t.append(String.fromCharCode(i))}}while(e.available()>0)},n.decodeBase256Segment=function(e,t,r){var i=1+e.getByteOffset(),a=this.unrandomize255State(e.readBits(8),i++),o;if(a===0?o=e.available()/8|0:a<250?o=a:o=250*(a-249)+this.unrandomize255State(e.readBits(8),i++),o<0)throw new _e;for(var c=new Uint8Array(o),u=0;u<o;u++){if(e.available()<8)throw new _e;c[u]=this.unrandomize255State(e.readBits(8),i++)}r.push(c);try{t.append(wi.decode(c,pt.ISO88591))}catch(d){throw new td("Platform does not support required encoding: "+d.message)}},n.unrandomize255State=function(e,t){var r=149*t%255+1,i=e-r;return i>=0?i:i+256},n.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],n.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],n.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],n.TEXT_SHIFT2_SET_CHARS=n.C40_SHIFT2_SET_CHARS,n.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""],n})(),Sj=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Cj=(function(){function n(){this.rsDecoder=new bp(Br.DATA_MATRIX_FIELD_256)}return n.prototype.decode=function(e){var t,r,i=new Ej(e),a=i.getVersion(),o=i.readCodewords(),c=Aj.getDataBlocks(o,a),u=0;try{for(var d=Sj(c),m=d.next();!m.done;m=d.next()){var g=m.value;u+=g.getNumDataCodewords()}}catch(V){t={error:V}}finally{try{m&&!m.done&&(r=d.return)&&r.call(d)}finally{if(t)throw t.error}}for(var _=new Uint8Array(u),w=c.length,E=0;E<w;E++){var S=c[E],D=S.getCodewords(),C=S.getNumDataCodewords();this.correctErrors(D,C);for(var k=0;k<C;k++)_[k*w+E]=D[k]}return bj.decode(_)},n.prototype.correctErrors=function(e,t){var r=new Int32Array(e);try{this.rsDecoder.decode(r,e.length-t)}catch{throw new Tn}for(var i=0;i<t;i++)e[i]=r[i]},n})(),Tj=(function(){function n(e){this.image=e,this.rectangleDetector=new vv(this.image)}return n.prototype.detect=function(){var e=this.rectangleDetector.detect(),t=this.detectSolid1(e);if(t=this.detectSolid2(t),t[3]=this.correctTopRight(t),!t[3])throw new oe;t=this.shiftToModuleCenter(t);var r=t[0],i=t[1],a=t[2],o=t[3],c=this.transitionsBetween(r,o)+1,u=this.transitionsBetween(a,o)+1;(c&1)===1&&(c+=1),(u&1)===1&&(u+=1),4*c<7*u&&4*u<7*c&&(c=u=Math.max(c,u));var d=n.sampleGrid(this.image,r,i,a,o,c,u);return new Yy(d,[r,i,a,o])},n.shiftPoint=function(e,t,r){var i=(t.getX()-e.getX())/(r+1),a=(t.getY()-e.getY())/(r+1);return new Ne(e.getX()+i,e.getY()+a)},n.moveAway=function(e,t,r){var i=e.getX(),a=e.getY();return i<t?i-=1:i+=1,a<r?a-=1:a+=1,new Ne(i,a)},n.prototype.detectSolid1=function(e){var t=e[0],r=e[1],i=e[3],a=e[2],o=this.transitionsBetween(t,r),c=this.transitionsBetween(r,i),u=this.transitionsBetween(i,a),d=this.transitionsBetween(a,t),m=o,g=[a,t,r,i];return m>c&&(m=c,g[0]=t,g[1]=r,g[2]=i,g[3]=a),m>u&&(m=u,g[0]=r,g[1]=i,g[2]=a,g[3]=t),m>d&&(g[0]=i,g[1]=a,g[2]=t,g[3]=r),g},n.prototype.detectSolid2=function(e){var t=e[0],r=e[1],i=e[2],a=e[3],o=this.transitionsBetween(t,a),c=n.shiftPoint(r,i,(o+1)*4),u=n.shiftPoint(i,r,(o+1)*4),d=this.transitionsBetween(c,t),m=this.transitionsBetween(u,a);return d<m?(e[0]=t,e[1]=r,e[2]=i,e[3]=a):(e[0]=r,e[1]=i,e[2]=a,e[3]=t),e},n.prototype.correctTopRight=function(e){var t=e[0],r=e[1],i=e[2],a=e[3],o=this.transitionsBetween(t,a),c=this.transitionsBetween(r,a),u=n.shiftPoint(t,r,(c+1)*4),d=n.shiftPoint(i,r,(o+1)*4);o=this.transitionsBetween(u,a),c=this.transitionsBetween(d,a);var m=new Ne(a.getX()+(i.getX()-r.getX())/(o+1),a.getY()+(i.getY()-r.getY())/(o+1)),g=new Ne(a.getX()+(t.getX()-r.getX())/(c+1),a.getY()+(t.getY()-r.getY())/(c+1));if(!this.isValid(m))return this.isValid(g)?g:null;if(!this.isValid(g))return m;var _=this.transitionsBetween(u,m)+this.transitionsBetween(d,m),w=this.transitionsBetween(u,g)+this.transitionsBetween(d,g);return _>w?m:g},n.prototype.shiftToModuleCenter=function(e){var t=e[0],r=e[1],i=e[2],a=e[3],o=this.transitionsBetween(t,a)+1,c=this.transitionsBetween(i,a)+1,u=n.shiftPoint(t,r,c*4),d=n.shiftPoint(i,r,o*4);o=this.transitionsBetween(u,a)+1,c=this.transitionsBetween(d,a)+1,(o&1)===1&&(o+=1),(c&1)===1&&(c+=1);var m=(t.getX()+r.getX()+i.getX()+a.getX())/4,g=(t.getY()+r.getY()+i.getY()+a.getY())/4;t=n.moveAway(t,m,g),r=n.moveAway(r,m,g),i=n.moveAway(i,m,g),a=n.moveAway(a,m,g);var _,w;return u=n.shiftPoint(t,r,c*4),u=n.shiftPoint(u,a,o*4),_=n.shiftPoint(r,t,c*4),_=n.shiftPoint(_,i,o*4),d=n.shiftPoint(i,a,c*4),d=n.shiftPoint(d,r,o*4),w=n.shiftPoint(a,i,c*4),w=n.shiftPoint(w,t,o*4),[u,_,d,w]},n.prototype.isValid=function(e){return e.getX()>=0&&e.getX()<this.image.getWidth()&&e.getY()>0&&e.getY()<this.image.getHeight()},n.sampleGrid=function(e,t,r,i,a,o,c){var u=Ky.getInstance();return u.sampleGrid(e,o,c,.5,.5,o-.5,.5,o-.5,c-.5,.5,c-.5,t.getX(),t.getY(),a.getX(),a.getY(),i.getX(),i.getY(),r.getX(),r.getY())},n.prototype.transitionsBetween=function(e,t){var r=Math.trunc(e.getX()),i=Math.trunc(e.getY()),a=Math.trunc(t.getX()),o=Math.trunc(t.getY()),c=Math.abs(o-i)>Math.abs(a-r);if(c){var u=r;r=i,i=u,u=a,a=o,o=u}for(var d=Math.abs(a-r),m=Math.abs(o-i),g=-d/2,_=i<o?1:-1,w=r<a?1:-1,E=0,S=this.image.get(c?i:r,c?r:i),D=r,C=i;D!==a;D+=w){var k=this.image.get(c?C:D,c?D:C);if(k!==S&&(E++,S=k),g+=m,g>0){if(C===o)break;C+=_,g-=d}}return E},n})(),k0=(function(){function n(){this.decoder=new Cj}return n.prototype.decode=function(e,t){t===void 0&&(t=null);var r,i;if(t!=null&&t.has(qt.PURE_BARCODE)){var a=n.extractPureBits(e.getBlackMatrix());r=this.decoder.decode(a),i=n.NO_POINTS}else{var o=new Tj(e.getBlackMatrix()).detect();r=this.decoder.decode(o.getBits()),i=o.getPoints()}var c=r.getRawBytes(),u=new yr(r.getText(),c,8*c.length,i,Le.DATA_MATRIX,Gt.currentTimeMillis()),d=r.getByteSegments();d!=null&&u.putMetadata(cr.BYTE_SEGMENTS,d);var m=r.getECLevel();return m!=null&&u.putMetadata(cr.ERROR_CORRECTION_LEVEL,m),u},n.prototype.reset=function(){},n.extractPureBits=function(e){var t=e.getTopLeftOnBit(),r=e.getBottomRightOnBit();if(t==null||r==null)throw new oe;var i=this.moduleSize(t,e),a=t[1],o=r[1],c=t[0],u=r[0],d=(u-c+1)/i,m=(o-a+1)/i;if(d<=0||m<=0)throw new oe;var g=i/2;a+=g,c+=g;for(var _=new Ta(d,m),w=0;w<m;w++)for(var E=a+w*i,S=0;S<d;S++)e.get(c+S*i,E)&&_.set(S,w);return _},n.moduleSize=function(e,t){for(var r=t.getWidth(),i=e[0],a=e[1];i<r&&t.get(i,a);)i++;if(i===r)throw new oe;var o=i-e[0];if(o===0)throw new oe;return o},n.NO_POINTS=[],n})(),Ij=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})();(function(n){Ij(e,n);function e(t){return t===void 0&&(t=500),n.call(this,new k0,t)||this}return e})($c);var pc;(function(n){n[n.L=0]="L",n[n.M=1]="M",n[n.Q=2]="Q",n[n.H=3]="H"})(pc||(pc={}));var Nj=(function(){function n(e,t,r){this.value=e,this.stringValue=t,this.bits=r,n.FOR_BITS.set(r,this),n.FOR_VALUE.set(e,this)}return n.prototype.getValue=function(){return this.value},n.prototype.getBits=function(){return this.bits},n.fromString=function(e){switch(e){case"L":return n.L;case"M":return n.M;case"Q":return n.Q;case"H":return n.H;default:throw new mn(e+"not available")}},n.prototype.toString=function(){return this.stringValue},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.value===t.value},n.forBits=function(e){if(e<0||e>=n.FOR_BITS.size)throw new Be;return n.FOR_BITS.get(e)},n.FOR_BITS=new Map,n.FOR_VALUE=new Map,n.L=new n(pc.L,"L",1),n.M=new n(pc.M,"M",0),n.Q=new n(pc.Q,"Q",3),n.H=new n(pc.H,"H",2),n})(),Rj=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},B3=(function(){function n(e){this.errorCorrectionLevel=Nj.forBits(e>>3&3),this.dataMask=e&7}return n.numBitsDiffering=function(e,t){return it.bitCount(e^t)},n.decodeFormatInformation=function(e,t){var r=n.doDecodeFormatInformation(e,t);return r!==null?r:n.doDecodeFormatInformation(e^n.FORMAT_INFO_MASK_QR,t^n.FORMAT_INFO_MASK_QR)},n.doDecodeFormatInformation=function(e,t){var r,i,a=Number.MAX_SAFE_INTEGER,o=0;try{for(var c=Rj(n.FORMAT_INFO_DECODE_LOOKUP),u=c.next();!u.done;u=c.next()){var d=u.value,m=d[0];if(m===e||m===t)return new n(d[1]);var g=n.numBitsDiffering(e,m);g<a&&(o=d[1],a=g),e!==t&&(g=n.numBitsDiffering(t,m),g<a&&(o=d[1],a=g))}}catch(_){r={error:_}}finally{try{u&&!u.done&&(i=c.return)&&i.call(c)}finally{if(r)throw r.error}}return a<=3?new n(o):null},n.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},n.prototype.getDataMask=function(){return this.dataMask},n.prototype.hashCode=function(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.errorCorrectionLevel===t.errorCorrectionLevel&&this.dataMask===t.dataMask},n.FORMAT_INFO_MASK_QR=21522,n.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])],n})(),Oj=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},J=(function(){function n(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this.ecCodewordsPerBlock=e,this.ecBlocks=t}return n.prototype.getECCodewordsPerBlock=function(){return this.ecCodewordsPerBlock},n.prototype.getNumBlocks=function(){var e,t,r=0,i=this.ecBlocks;try{for(var a=Oj(i),o=a.next();!o.done;o=a.next()){var c=o.value;r+=c.getCount()}}catch(u){e={error:u}}finally{try{o&&!o.done&&(t=a.return)&&t.call(a)}finally{if(e)throw e.error}}return r},n.prototype.getTotalECCodewords=function(){return this.ecCodewordsPerBlock*this.getNumBlocks()},n.prototype.getECBlocks=function(){return this.ecBlocks},n})(),z=(function(){function n(e,t){this.count=e,this.dataCodewords=t}return n.prototype.getCount=function(){return this.count},n.prototype.getDataCodewords=function(){return this.dataCodewords},n})(),Dj=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},tl=(function(){function n(e,t){for(var r,i,a=[],o=2;o<arguments.length;o++)a[o-2]=arguments[o];this.versionNumber=e,this.alignmentPatternCenters=t,this.ecBlocks=a;var c=0,u=a[0].getECCodewordsPerBlock(),d=a[0].getECBlocks();try{for(var m=Dj(d),g=m.next();!g.done;g=m.next()){var _=g.value;c+=_.getCount()*(_.getDataCodewords()+u)}}catch(w){r={error:w}}finally{try{g&&!g.done&&(i=m.return)&&i.call(m)}finally{if(r)throw r.error}}this.totalCodewords=c}return n.prototype.getVersionNumber=function(){return this.versionNumber},n.prototype.getAlignmentPatternCenters=function(){return this.alignmentPatternCenters},n.prototype.getTotalCodewords=function(){return this.totalCodewords},n.prototype.getDimensionForVersion=function(){return 17+4*this.versionNumber},n.prototype.getECBlocksForLevel=function(e){return this.ecBlocks[e.getValue()]},n.getProvisionalVersionForDimension=function(e){if(e%4!==1)throw new _e;try{return this.getVersionForNumber((e-17)/4)}catch{throw new _e}},n.getVersionForNumber=function(e){if(e<1||e>40)throw new Be;return n.VERSIONS[e-1]},n.decodeVersionInformation=function(e){for(var t=Number.MAX_SAFE_INTEGER,r=0,i=0;i<n.VERSION_DECODE_INFO.length;i++){var a=n.VERSION_DECODE_INFO[i];if(a===e)return n.getVersionForNumber(i+7);var o=B3.numBitsDiffering(e,a);o<t&&(r=i+7,t=o)}return t<=3?n.getVersionForNumber(r):null},n.prototype.buildFunctionPattern=function(){var e=this.getDimensionForVersion(),t=new Ta(e);t.setRegion(0,0,9,9),t.setRegion(e-8,0,8,9),t.setRegion(0,e-8,9,8);for(var r=this.alignmentPatternCenters.length,i=0;i<r;i++)for(var a=this.alignmentPatternCenters[i]-2,o=0;o<r;o++)i===0&&(o===0||o===r-1)||i===r-1&&o===0||t.setRegion(this.alignmentPatternCenters[o]-2,a,5,5);return t.setRegion(6,9,1,e-17),t.setRegion(9,6,e-17,1),this.versionNumber>6&&(t.setRegion(e-11,0,3,6),t.setRegion(0,e-11,6,3)),t},n.prototype.toString=function(){return""+this.versionNumber},n.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),n.VERSIONS=[new n(1,new Int32Array(0),new J(7,new z(1,19)),new J(10,new z(1,16)),new J(13,new z(1,13)),new J(17,new z(1,9))),new n(2,Int32Array.from([6,18]),new J(10,new z(1,34)),new J(16,new z(1,28)),new J(22,new z(1,22)),new J(28,new z(1,16))),new n(3,Int32Array.from([6,22]),new J(15,new z(1,55)),new J(26,new z(1,44)),new J(18,new z(2,17)),new J(22,new z(2,13))),new n(4,Int32Array.from([6,26]),new J(20,new z(1,80)),new J(18,new z(2,32)),new J(26,new z(2,24)),new J(16,new z(4,9))),new n(5,Int32Array.from([6,30]),new J(26,new z(1,108)),new J(24,new z(2,43)),new J(18,new z(2,15),new z(2,16)),new J(22,new z(2,11),new z(2,12))),new n(6,Int32Array.from([6,34]),new J(18,new z(2,68)),new J(16,new z(4,27)),new J(24,new z(4,19)),new J(28,new z(4,15))),new n(7,Int32Array.from([6,22,38]),new J(20,new z(2,78)),new J(18,new z(4,31)),new J(18,new z(2,14),new z(4,15)),new J(26,new z(4,13),new z(1,14))),new n(8,Int32Array.from([6,24,42]),new J(24,new z(2,97)),new J(22,new z(2,38),new z(2,39)),new J(22,new z(4,18),new z(2,19)),new J(26,new z(4,14),new z(2,15))),new n(9,Int32Array.from([6,26,46]),new J(30,new z(2,116)),new J(22,new z(3,36),new z(2,37)),new J(20,new z(4,16),new z(4,17)),new J(24,new z(4,12),new z(4,13))),new n(10,Int32Array.from([6,28,50]),new J(18,new z(2,68),new z(2,69)),new J(26,new z(4,43),new z(1,44)),new J(24,new z(6,19),new z(2,20)),new J(28,new z(6,15),new z(2,16))),new n(11,Int32Array.from([6,30,54]),new J(20,new z(4,81)),new J(30,new z(1,50),new z(4,51)),new J(28,new z(4,22),new z(4,23)),new J(24,new z(3,12),new z(8,13))),new n(12,Int32Array.from([6,32,58]),new J(24,new z(2,92),new z(2,93)),new J(22,new z(6,36),new z(2,37)),new J(26,new z(4,20),new z(6,21)),new J(28,new z(7,14),new z(4,15))),new n(13,Int32Array.from([6,34,62]),new J(26,new z(4,107)),new J(22,new z(8,37),new z(1,38)),new J(24,new z(8,20),new z(4,21)),new J(22,new z(12,11),new z(4,12))),new n(14,Int32Array.from([6,26,46,66]),new J(30,new z(3,115),new z(1,116)),new J(24,new z(4,40),new z(5,41)),new J(20,new z(11,16),new z(5,17)),new J(24,new z(11,12),new z(5,13))),new n(15,Int32Array.from([6,26,48,70]),new J(22,new z(5,87),new z(1,88)),new J(24,new z(5,41),new z(5,42)),new J(30,new z(5,24),new z(7,25)),new J(24,new z(11,12),new z(7,13))),new n(16,Int32Array.from([6,26,50,74]),new J(24,new z(5,98),new z(1,99)),new J(28,new z(7,45),new z(3,46)),new J(24,new z(15,19),new z(2,20)),new J(30,new z(3,15),new z(13,16))),new n(17,Int32Array.from([6,30,54,78]),new J(28,new z(1,107),new z(5,108)),new J(28,new z(10,46),new z(1,47)),new J(28,new z(1,22),new z(15,23)),new J(28,new z(2,14),new z(17,15))),new n(18,Int32Array.from([6,30,56,82]),new J(30,new z(5,120),new z(1,121)),new J(26,new z(9,43),new z(4,44)),new J(28,new z(17,22),new z(1,23)),new J(28,new z(2,14),new z(19,15))),new n(19,Int32Array.from([6,30,58,86]),new J(28,new z(3,113),new z(4,114)),new J(26,new z(3,44),new z(11,45)),new J(26,new z(17,21),new z(4,22)),new J(26,new z(9,13),new z(16,14))),new n(20,Int32Array.from([6,34,62,90]),new J(28,new z(3,107),new z(5,108)),new J(26,new z(3,41),new z(13,42)),new J(30,new z(15,24),new z(5,25)),new J(28,new z(15,15),new z(10,16))),new n(21,Int32Array.from([6,28,50,72,94]),new J(28,new z(4,116),new z(4,117)),new J(26,new z(17,42)),new J(28,new z(17,22),new z(6,23)),new J(30,new z(19,16),new z(6,17))),new n(22,Int32Array.from([6,26,50,74,98]),new J(28,new z(2,111),new z(7,112)),new J(28,new z(17,46)),new J(30,new z(7,24),new z(16,25)),new J(24,new z(34,13))),new n(23,Int32Array.from([6,30,54,78,102]),new J(30,new z(4,121),new z(5,122)),new J(28,new z(4,47),new z(14,48)),new J(30,new z(11,24),new z(14,25)),new J(30,new z(16,15),new z(14,16))),new n(24,Int32Array.from([6,28,54,80,106]),new J(30,new z(6,117),new z(4,118)),new J(28,new z(6,45),new z(14,46)),new J(30,new z(11,24),new z(16,25)),new J(30,new z(30,16),new z(2,17))),new n(25,Int32Array.from([6,32,58,84,110]),new J(26,new z(8,106),new z(4,107)),new J(28,new z(8,47),new z(13,48)),new J(30,new z(7,24),new z(22,25)),new J(30,new z(22,15),new z(13,16))),new n(26,Int32Array.from([6,30,58,86,114]),new J(28,new z(10,114),new z(2,115)),new J(28,new z(19,46),new z(4,47)),new J(28,new z(28,22),new z(6,23)),new J(30,new z(33,16),new z(4,17))),new n(27,Int32Array.from([6,34,62,90,118]),new J(30,new z(8,122),new z(4,123)),new J(28,new z(22,45),new z(3,46)),new J(30,new z(8,23),new z(26,24)),new J(30,new z(12,15),new z(28,16))),new n(28,Int32Array.from([6,26,50,74,98,122]),new J(30,new z(3,117),new z(10,118)),new J(28,new z(3,45),new z(23,46)),new J(30,new z(4,24),new z(31,25)),new J(30,new z(11,15),new z(31,16))),new n(29,Int32Array.from([6,30,54,78,102,126]),new J(30,new z(7,116),new z(7,117)),new J(28,new z(21,45),new z(7,46)),new J(30,new z(1,23),new z(37,24)),new J(30,new z(19,15),new z(26,16))),new n(30,Int32Array.from([6,26,52,78,104,130]),new J(30,new z(5,115),new z(10,116)),new J(28,new z(19,47),new z(10,48)),new J(30,new z(15,24),new z(25,25)),new J(30,new z(23,15),new z(25,16))),new n(31,Int32Array.from([6,30,56,82,108,134]),new J(30,new z(13,115),new z(3,116)),new J(28,new z(2,46),new z(29,47)),new J(30,new z(42,24),new z(1,25)),new J(30,new z(23,15),new z(28,16))),new n(32,Int32Array.from([6,34,60,86,112,138]),new J(30,new z(17,115)),new J(28,new z(10,46),new z(23,47)),new J(30,new z(10,24),new z(35,25)),new J(30,new z(19,15),new z(35,16))),new n(33,Int32Array.from([6,30,58,86,114,142]),new J(30,new z(17,115),new z(1,116)),new J(28,new z(14,46),new z(21,47)),new J(30,new z(29,24),new z(19,25)),new J(30,new z(11,15),new z(46,16))),new n(34,Int32Array.from([6,34,62,90,118,146]),new J(30,new z(13,115),new z(6,116)),new J(28,new z(14,46),new z(23,47)),new J(30,new z(44,24),new z(7,25)),new J(30,new z(59,16),new z(1,17))),new n(35,Int32Array.from([6,30,54,78,102,126,150]),new J(30,new z(12,121),new z(7,122)),new J(28,new z(12,47),new z(26,48)),new J(30,new z(39,24),new z(14,25)),new J(30,new z(22,15),new z(41,16))),new n(36,Int32Array.from([6,24,50,76,102,128,154]),new J(30,new z(6,121),new z(14,122)),new J(28,new z(6,47),new z(34,48)),new J(30,new z(46,24),new z(10,25)),new J(30,new z(2,15),new z(64,16))),new n(37,Int32Array.from([6,28,54,80,106,132,158]),new J(30,new z(17,122),new z(4,123)),new J(28,new z(29,46),new z(14,47)),new J(30,new z(49,24),new z(10,25)),new J(30,new z(24,15),new z(46,16))),new n(38,Int32Array.from([6,32,58,84,110,136,162]),new J(30,new z(4,122),new z(18,123)),new J(28,new z(13,46),new z(32,47)),new J(30,new z(48,24),new z(14,25)),new J(30,new z(42,15),new z(32,16))),new n(39,Int32Array.from([6,26,54,82,110,138,166]),new J(30,new z(20,117),new z(4,118)),new J(28,new z(40,47),new z(7,48)),new J(30,new z(43,24),new z(22,25)),new J(30,new z(10,15),new z(67,16))),new n(40,Int32Array.from([6,30,58,86,114,142,170]),new J(30,new z(19,118),new z(6,119)),new J(28,new z(18,47),new z(31,48)),new J(30,new z(34,24),new z(34,25)),new J(30,new z(20,15),new z(61,16)))],n})(),Hn;(function(n){n[n.DATA_MASK_000=0]="DATA_MASK_000",n[n.DATA_MASK_001=1]="DATA_MASK_001",n[n.DATA_MASK_010=2]="DATA_MASK_010",n[n.DATA_MASK_011=3]="DATA_MASK_011",n[n.DATA_MASK_100=4]="DATA_MASK_100",n[n.DATA_MASK_101=5]="DATA_MASK_101",n[n.DATA_MASK_110=6]="DATA_MASK_110",n[n.DATA_MASK_111=7]="DATA_MASK_111"})(Hn||(Hn={}));var YA=(function(){function n(e,t){this.value=e,this.isMasked=t}return n.prototype.unmaskBitMatrix=function(e,t){for(var r=0;r<t;r++)for(var i=0;i<t;i++)this.isMasked(r,i)&&e.flip(i,r)},n.values=new Map([[Hn.DATA_MASK_000,new n(Hn.DATA_MASK_000,function(e,t){return(e+t&1)===0})],[Hn.DATA_MASK_001,new n(Hn.DATA_MASK_001,function(e,t){return(e&1)===0})],[Hn.DATA_MASK_010,new n(Hn.DATA_MASK_010,function(e,t){return t%3===0})],[Hn.DATA_MASK_011,new n(Hn.DATA_MASK_011,function(e,t){return(e+t)%3===0})],[Hn.DATA_MASK_100,new n(Hn.DATA_MASK_100,function(e,t){return(Math.floor(e/2)+Math.floor(t/3)&1)===0})],[Hn.DATA_MASK_101,new n(Hn.DATA_MASK_101,function(e,t){return e*t%6===0})],[Hn.DATA_MASK_110,new n(Hn.DATA_MASK_110,function(e,t){return e*t%6<3})],[Hn.DATA_MASK_111,new n(Hn.DATA_MASK_111,function(e,t){return(e+t+e*t%3&1)===0})]]),n})(),Mj=(function(){function n(e){var t=e.getHeight();if(t<21||(t&3)!==1)throw new _e;this.bitMatrix=e}return n.prototype.readFormatInformation=function(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;for(var e=0,t=0;t<6;t++)e=this.copyBit(t,8,e);e=this.copyBit(7,8,e),e=this.copyBit(8,8,e),e=this.copyBit(8,7,e);for(var r=5;r>=0;r--)e=this.copyBit(8,r,e);for(var i=this.bitMatrix.getHeight(),a=0,o=i-7,r=i-1;r>=o;r--)a=this.copyBit(8,r,a);for(var t=i-8;t<i;t++)a=this.copyBit(t,8,a);if(this.parsedFormatInfo=B3.decodeFormatInformation(e,a),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new _e},n.prototype.readVersion=function(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;var e=this.bitMatrix.getHeight(),t=Math.floor((e-17)/4);if(t<=6)return tl.getVersionForNumber(t);for(var r=0,i=e-11,a=5;a>=0;a--)for(var o=e-9;o>=i;o--)r=this.copyBit(o,a,r);var c=tl.decodeVersionInformation(r);if(c!==null&&c.getDimensionForVersion()===e)return this.parsedVersion=c,c;r=0;for(var o=5;o>=0;o--)for(var a=e-9;a>=i;a--)r=this.copyBit(o,a,r);if(c=tl.decodeVersionInformation(r),c!==null&&c.getDimensionForVersion()===e)return this.parsedVersion=c,c;throw new _e},n.prototype.copyBit=function(e,t,r){var i=this.isMirror?this.bitMatrix.get(t,e):this.bitMatrix.get(e,t);return i?r<<1|1:r<<1},n.prototype.readCodewords=function(){var e=this.readFormatInformation(),t=this.readVersion(),r=YA.values.get(e.getDataMask()),i=this.bitMatrix.getHeight();r.unmaskBitMatrix(this.bitMatrix,i);for(var a=t.buildFunctionPattern(),o=!0,c=new Uint8Array(t.getTotalCodewords()),u=0,d=0,m=0,g=i-1;g>0;g-=2){g===6&&g--;for(var _=0;_<i;_++)for(var w=o?i-1-_:_,E=0;E<2;E++)a.get(g-E,w)||(m++,d<<=1,this.bitMatrix.get(g-E,w)&&(d|=1),m===8&&(c[u++]=d,m=0,d=0));o=!o}if(u!==t.getTotalCodewords())throw new _e;return c},n.prototype.remask=function(){if(this.parsedFormatInfo!==null){var e=YA.values.get(this.parsedFormatInfo.getDataMask()),t=this.bitMatrix.getHeight();e.unmaskBitMatrix(this.bitMatrix,t)}},n.prototype.setMirror=function(e){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=e},n.prototype.mirror=function(){for(var e=this.bitMatrix,t=0,r=e.getWidth();t<r;t++)for(var i=t+1,a=e.getHeight();i<a;i++)e.get(t,i)!==e.get(i,t)&&(e.flip(i,t),e.flip(t,i))},n})(),KA=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Pj=(function(){function n(e,t){this.numDataCodewords=e,this.codewords=t}return n.getDataBlocks=function(e,t,r){var i,a,o,c;if(e.length!==t.getTotalCodewords())throw new Be;var u=t.getECBlocksForLevel(r),d=0,m=u.getECBlocks();try{for(var g=KA(m),_=g.next();!_.done;_=g.next()){var w=_.value;d+=w.getCount()}}catch(j){i={error:j}}finally{try{_&&!_.done&&(a=g.return)&&a.call(g)}finally{if(i)throw i.error}}var E=new Array(d),S=0;try{for(var D=KA(m),C=D.next();!C.done;C=D.next())for(var w=C.value,k=0;k<w.getCount();k++){var V=w.getDataCodewords(),U=u.getECCodewordsPerBlock()+V;E[S++]=new n(V,new Uint8Array(U))}}catch(j){o={error:j}}finally{try{C&&!C.done&&(c=D.return)&&c.call(D)}finally{if(o)throw o.error}}for(var q=E[0].codewords.length,$=E.length-1;$>=0;){var M=E[$].codewords.length;if(M===q)break;$--}$++;for(var b=q-u.getECCodewordsPerBlock(),N=0,k=0;k<b;k++)for(var I=0;I<S;I++)E[I].codewords[k]=e[N++];for(var I=$;I<S;I++)E[I].codewords[b]=e[N++];for(var R=E[0].codewords.length,k=b;k<R;k++)for(var I=0;I<S;I++){var L=I<$?k:k+1;E[I].codewords[L]=e[N++]}return E},n.prototype.getNumDataCodewords=function(){return this.numDataCodewords},n.prototype.getCodewords=function(){return this.codewords},n})(),gi;(function(n){n[n.TERMINATOR=0]="TERMINATOR",n[n.NUMERIC=1]="NUMERIC",n[n.ALPHANUMERIC=2]="ALPHANUMERIC",n[n.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",n[n.BYTE=4]="BYTE",n[n.ECI=5]="ECI",n[n.KANJI=6]="KANJI",n[n.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",n[n.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",n[n.HANZI=9]="HANZI"})(gi||(gi={}));var Zt=(function(){function n(e,t,r,i){this.value=e,this.stringValue=t,this.characterCountBitsForVersions=r,this.bits=i,n.FOR_BITS.set(i,this),n.FOR_VALUE.set(e,this)}return n.forBits=function(e){var t=n.FOR_BITS.get(e);if(t===void 0)throw new Be;return t},n.prototype.getCharacterCountBits=function(e){var t=e.getVersionNumber(),r;return t<=9?r=0:t<=26?r=1:r=2,this.characterCountBitsForVersions[r]},n.prototype.getValue=function(){return this.value},n.prototype.getBits=function(){return this.bits},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.value===t.value},n.prototype.toString=function(){return this.stringValue},n.FOR_BITS=new Map,n.FOR_VALUE=new Map,n.TERMINATOR=new n(gi.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),n.NUMERIC=new n(gi.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),n.ALPHANUMERIC=new n(gi.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),n.STRUCTURED_APPEND=new n(gi.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),n.BYTE=new n(gi.BYTE,"BYTE",Int32Array.from([8,16,16]),4),n.ECI=new n(gi.ECI,"ECI",Int32Array.from([0,0,0]),7),n.KANJI=new n(gi.KANJI,"KANJI",Int32Array.from([8,10,12]),8),n.FNC1_FIRST_POSITION=new n(gi.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),n.FNC1_SECOND_POSITION=new n(gi.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),n.HANZI=new n(gi.HANZI,"HANZI",Int32Array.from([8,10,12]),13),n})(),kj=(function(){function n(){}return n.decode=function(e,t,r,i){var a=new L3(e),o=new rt,c=new Array,u=-1,d=-1;try{var m=null,g=!1,_=void 0;do{if(a.available()<4)_=Zt.TERMINATOR;else{var w=a.readBits(4);_=Zt.forBits(w)}switch(_){case Zt.TERMINATOR:break;case Zt.FNC1_FIRST_POSITION:case Zt.FNC1_SECOND_POSITION:g=!0;break;case Zt.STRUCTURED_APPEND:if(a.available()<16)throw new _e;u=a.readBits(8),d=a.readBits(8);break;case Zt.ECI:var E=n.parseECIValue(a);if(m=Mn.getCharacterSetECIByValue(E),m===null)throw new _e;break;case Zt.HANZI:var S=a.readBits(4),D=a.readBits(_.getCharacterCountBits(t));S===n.GB2312_SUBSET&&n.decodeHanziSegment(a,o,D);break;default:var C=a.readBits(_.getCharacterCountBits(t));switch(_){case Zt.NUMERIC:n.decodeNumericSegment(a,o,C);break;case Zt.ALPHANUMERIC:n.decodeAlphanumericSegment(a,o,C,g);break;case Zt.BYTE:n.decodeByteSegment(a,o,C,m,c,i);break;case Zt.KANJI:n.decodeKanjiSegment(a,o,C);break;default:throw new _e}break}}while(_!==Zt.TERMINATOR)}catch{throw new _e}return new Ap(e,o.toString(),c.length===0?null:c,r===null?null:r.toString(),u,d)},n.decodeHanziSegment=function(e,t,r){if(r*13>e.available())throw new _e;for(var i=new Uint8Array(2*r),a=0;r>0;){var o=e.readBits(13),c=o/96<<8&4294967295|o%96;c<959?c+=41377:c+=42657,i[a]=c>>8&255,i[a+1]=c&255,a+=2,r--}try{t.append(wi.decode(i,pt.GB2312))}catch(u){throw new _e(u)}},n.decodeKanjiSegment=function(e,t,r){if(r*13>e.available())throw new _e;for(var i=new Uint8Array(2*r),a=0;r>0;){var o=e.readBits(13),c=o/192<<8&4294967295|o%192;c<7936?c+=33088:c+=49472,i[a]=c>>8,i[a+1]=c,a+=2,r--}try{t.append(wi.decode(i,pt.SHIFT_JIS))}catch(u){throw new _e(u)}},n.decodeByteSegment=function(e,t,r,i,a,o){if(8*r>e.available())throw new _e;for(var c=new Uint8Array(r),u=0;u<r;u++)c[u]=e.readBits(8);var d;i===null?d=pt.guessEncoding(c,o):d=i.getName();try{t.append(wi.decode(c,d))}catch(m){throw new _e(m)}a.push(c)},n.toAlphaNumericChar=function(e){if(e>=n.ALPHANUMERIC_CHARS.length)throw new _e;return n.ALPHANUMERIC_CHARS[e]},n.decodeAlphanumericSegment=function(e,t,r,i){for(var a=t.length();r>1;){if(e.available()<11)throw new _e;var o=e.readBits(11);t.append(n.toAlphaNumericChar(Math.floor(o/45))),t.append(n.toAlphaNumericChar(o%45)),r-=2}if(r===1){if(e.available()<6)throw new _e;t.append(n.toAlphaNumericChar(e.readBits(6)))}if(i)for(var c=a;c<t.length();c++)t.charAt(c)==="%"&&(c<t.length()-1&&t.charAt(c+1)==="%"?t.deleteCharAt(c+1):t.setCharAt(c,""))},n.decodeNumericSegment=function(e,t,r){for(;r>=3;){if(e.available()<10)throw new _e;var i=e.readBits(10);if(i>=1e3)throw new _e;t.append(n.toAlphaNumericChar(Math.floor(i/100))),t.append(n.toAlphaNumericChar(Math.floor(i/10)%10)),t.append(n.toAlphaNumericChar(i%10)),r-=3}if(r===2){if(e.available()<7)throw new _e;var a=e.readBits(7);if(a>=100)throw new _e;t.append(n.toAlphaNumericChar(Math.floor(a/10))),t.append(n.toAlphaNumericChar(a%10))}else if(r===1){if(e.available()<4)throw new _e;var o=e.readBits(4);if(o>=10)throw new _e;t.append(n.toAlphaNumericChar(o))}},n.parseECIValue=function(e){var t=e.readBits(8);if((t&128)===0)return t&127;if((t&192)===128){var r=e.readBits(8);return(t&63)<<8&4294967295|r}if((t&224)===192){var i=e.readBits(16);return(t&31)<<16&4294967295|i}throw new _e},n.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",n.GB2312_SUBSET=1,n})(),V3=(function(){function n(e){this.mirrored=e}return n.prototype.isMirrored=function(){return this.mirrored},n.prototype.applyMirroredCorrection=function(e){if(!(!this.mirrored||e===null||e.length<3)){var t=e[0];e[0]=e[2],e[2]=t}},n})(),WA=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},jj=(function(){function n(){this.rsDecoder=new bp(Br.QR_CODE_FIELD_256)}return n.prototype.decodeBooleanArray=function(e,t){return this.decodeBitMatrix(Ta.parseFromBooleanArray(e),t)},n.prototype.decodeBitMatrix=function(e,t){var r=new Mj(e),i=null;try{return this.decodeBitMatrixParser(r,t)}catch(o){i=o}try{r.remask(),r.setMirror(!0),r.readVersion(),r.readFormatInformation(),r.mirror();var a=this.decodeBitMatrixParser(r,t);return a.setOther(new V3(!0)),a}catch(o){throw i!==null?i:o}},n.prototype.decodeBitMatrixParser=function(e,t){var r,i,a,o,c=e.readVersion(),u=e.readFormatInformation().getErrorCorrectionLevel(),d=e.readCodewords(),m=Pj.getDataBlocks(d,c,u),g=0;try{for(var _=WA(m),w=_.next();!w.done;w=_.next()){var E=w.value;g+=E.getNumDataCodewords()}}catch($){r={error:$}}finally{try{w&&!w.done&&(i=_.return)&&i.call(_)}finally{if(r)throw r.error}}var S=new Uint8Array(g),D=0;try{for(var C=WA(m),k=C.next();!k.done;k=C.next()){var E=k.value,V=E.getCodewords(),U=E.getNumDataCodewords();this.correctErrors(V,U);for(var q=0;q<U;q++)S[D++]=V[q]}}catch($){a={error:$}}finally{try{k&&!k.done&&(o=C.return)&&o.call(C)}finally{if(a)throw a.error}}return kj.decode(S,c,u,t)},n.prototype.correctErrors=function(e,t){var r=new Int32Array(e);try{this.rsDecoder.decode(r,e.length-t)}catch{throw new Tn}for(var i=0;i<t;i++)e[i]=r[i]},n})(),Lj=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Bj=(function(n){Lj(e,n);function e(t,r,i){var a=n.call(this,t,r)||this;return a.estimatedModuleSize=i,a}return e.prototype.aboutEquals=function(t,r,i){if(Math.abs(r-this.getY())<=t&&Math.abs(i-this.getX())<=t){var a=Math.abs(t-this.estimatedModuleSize);return a<=1||a<=this.estimatedModuleSize}return!1},e.prototype.combineEstimate=function(t,r,i){var a=(this.getX()+r)/2,o=(this.getY()+t)/2,c=(this.estimatedModuleSize+i)/2;return new e(a,o,c)},e})(Ne),Vj=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Fj=(function(){function n(e,t,r,i,a,o,c){this.image=e,this.startX=t,this.startY=r,this.width=i,this.height=a,this.moduleSize=o,this.resultPointCallback=c,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}return n.prototype.find=function(){for(var e=this.startX,t=this.height,r=this.width,i=e+r,a=this.startY+t/2,o=new Int32Array(3),c=this.image,u=0;u<t;u++){var d=a+((u&1)===0?Math.floor((u+1)/2):-Math.floor((u+1)/2));o[0]=0,o[1]=0,o[2]=0;for(var m=e;m<i&&!c.get(m,d);)m++;for(var g=0;m<i;){if(c.get(m,d))if(g===1)o[1]++;else if(g===2){if(this.foundPatternCross(o)){var _=this.handlePossibleCenter(o,d,m);if(_!==null)return _}o[0]=o[2],o[1]=1,o[2]=0,g=1}else o[++g]++;else g===1&&g++,o[g]++;m++}if(this.foundPatternCross(o)){var _=this.handlePossibleCenter(o,d,i);if(_!==null)return _}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new oe},n.centerFromEnd=function(e,t){return t-e[2]-e[1]/2},n.prototype.foundPatternCross=function(e){for(var t=this.moduleSize,r=t/2,i=0;i<3;i++)if(Math.abs(t-e[i])>=r)return!1;return!0},n.prototype.crossCheckVertical=function(e,t,r,i){var a=this.image,o=a.getHeight(),c=this.crossCheckStateCount;c[0]=0,c[1]=0,c[2]=0;for(var u=e;u>=0&&a.get(t,u)&&c[1]<=r;)c[1]++,u--;if(u<0||c[1]>r)return NaN;for(;u>=0&&!a.get(t,u)&&c[0]<=r;)c[0]++,u--;if(c[0]>r)return NaN;for(u=e+1;u<o&&a.get(t,u)&&c[1]<=r;)c[1]++,u++;if(u===o||c[1]>r)return NaN;for(;u<o&&!a.get(t,u)&&c[2]<=r;)c[2]++,u++;if(c[2]>r)return NaN;var d=c[0]+c[1]+c[2];return 5*Math.abs(d-i)>=2*i?NaN:this.foundPatternCross(c)?n.centerFromEnd(c,u):NaN},n.prototype.handlePossibleCenter=function(e,t,r){var i,a,o=e[0]+e[1]+e[2],c=n.centerFromEnd(e,r),u=this.crossCheckVertical(t,c,2*e[1],o);if(!isNaN(u)){var d=(e[0]+e[1]+e[2])/3;try{for(var m=Vj(this.possibleCenters),g=m.next();!g.done;g=m.next()){var _=g.value;if(_.aboutEquals(d,u,c))return _.combineEstimate(u,c,d)}}catch(E){i={error:E}}finally{try{g&&!g.done&&(a=m.return)&&a.call(m)}finally{if(i)throw i.error}}var w=new Bj(c,u,d);this.possibleCenters.push(w),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(w)}return null},n})(),Uj=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),zj=(function(n){Uj(e,n);function e(t,r,i,a){var o=n.call(this,t,r)||this;return o.estimatedModuleSize=i,o.count=a,a===void 0&&(o.count=1),o}return e.prototype.getEstimatedModuleSize=function(){return this.estimatedModuleSize},e.prototype.getCount=function(){return this.count},e.prototype.aboutEquals=function(t,r,i){if(Math.abs(r-this.getY())<=t&&Math.abs(i-this.getX())<=t){var a=Math.abs(t-this.estimatedModuleSize);return a<=1||a<=this.estimatedModuleSize}return!1},e.prototype.combineEstimate=function(t,r,i){var a=this.count+1,o=(this.count*this.getX()+r)/a,c=(this.count*this.getY()+t)/a,u=(this.count*this.estimatedModuleSize+i)/a;return new e(o,c,u,a)},e})(Ne),Hj=(function(){function n(e){this.bottomLeft=e[0],this.topLeft=e[1],this.topRight=e[2]}return n.prototype.getBottomLeft=function(){return this.bottomLeft},n.prototype.getTopLeft=function(){return this.topLeft},n.prototype.getTopRight=function(){return this.topRight},n})(),Qu=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Gj=(function(){function n(e,t){this.image=e,this.resultPointCallback=t,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=t}return n.prototype.getImage=function(){return this.image},n.prototype.getPossibleCenters=function(){return this.possibleCenters},n.prototype.find=function(e){var t=e!=null&&e.get(qt.TRY_HARDER)!==void 0,r=e!=null&&e.get(qt.PURE_BARCODE)!==void 0,i=this.image,a=i.getHeight(),o=i.getWidth(),c=Math.floor(3*a/(4*n.MAX_MODULES));(c<n.MIN_SKIP||t)&&(c=n.MIN_SKIP);for(var u=!1,d=new Int32Array(5),m=c-1;m<a&&!u;m+=c){d[0]=0,d[1]=0,d[2]=0,d[3]=0,d[4]=0;for(var g=0,_=0;_<o;_++)if(i.get(_,m))(g&1)===1&&g++,d[g]++;else if((g&1)===0)if(g===4)if(n.foundPatternCross(d)){var w=this.handlePossibleCenter(d,m,_,r);if(w===!0)if(c=2,this.hasSkipped===!0)u=this.haveMultiplyConfirmedCenters();else{var E=this.findRowSkip();E>d[2]&&(m+=E-d[2]-c,_=o-1)}else{d[0]=d[2],d[1]=d[3],d[2]=d[4],d[3]=1,d[4]=0,g=3;continue}g=0,d[0]=0,d[1]=0,d[2]=0,d[3]=0,d[4]=0}else d[0]=d[2],d[1]=d[3],d[2]=d[4],d[3]=1,d[4]=0,g=3;else d[++g]++;else d[g]++;if(n.foundPatternCross(d)){var w=this.handlePossibleCenter(d,m,o,r);w===!0&&(c=d[0],this.hasSkipped&&(u=this.haveMultiplyConfirmedCenters()))}}var S=this.selectBestPatterns();return Ne.orderBestPatterns(S),new Hj(S)},n.centerFromEnd=function(e,t){return t-e[4]-e[3]-e[2]/2},n.foundPatternCross=function(e){for(var t=0,r=0;r<5;r++){var i=e[r];if(i===0)return!1;t+=i}if(t<7)return!1;var a=t/7,o=a/2;return Math.abs(a-e[0])<o&&Math.abs(a-e[1])<o&&Math.abs(3*a-e[2])<3*o&&Math.abs(a-e[3])<o&&Math.abs(a-e[4])<o},n.prototype.getCrossCheckStateCount=function(){var e=this.crossCheckStateCount;return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e},n.prototype.crossCheckDiagonal=function(e,t,r,i){for(var a=this.getCrossCheckStateCount(),o=0,c=this.image;e>=o&&t>=o&&c.get(t-o,e-o);)a[2]++,o++;if(e<o||t<o)return!1;for(;e>=o&&t>=o&&!c.get(t-o,e-o)&&a[1]<=r;)a[1]++,o++;if(e<o||t<o||a[1]>r)return!1;for(;e>=o&&t>=o&&c.get(t-o,e-o)&&a[0]<=r;)a[0]++,o++;if(a[0]>r)return!1;var u=c.getHeight(),d=c.getWidth();for(o=1;e+o<u&&t+o<d&&c.get(t+o,e+o);)a[2]++,o++;if(e+o>=u||t+o>=d)return!1;for(;e+o<u&&t+o<d&&!c.get(t+o,e+o)&&a[3]<r;)a[3]++,o++;if(e+o>=u||t+o>=d||a[3]>=r)return!1;for(;e+o<u&&t+o<d&&c.get(t+o,e+o)&&a[4]<r;)a[4]++,o++;if(a[4]>=r)return!1;var m=a[0]+a[1]+a[2]+a[3]+a[4];return Math.abs(m-i)<2*i&&n.foundPatternCross(a)},n.prototype.crossCheckVertical=function(e,t,r,i){for(var a=this.image,o=a.getHeight(),c=this.getCrossCheckStateCount(),u=e;u>=0&&a.get(t,u);)c[2]++,u--;if(u<0)return NaN;for(;u>=0&&!a.get(t,u)&&c[1]<=r;)c[1]++,u--;if(u<0||c[1]>r)return NaN;for(;u>=0&&a.get(t,u)&&c[0]<=r;)c[0]++,u--;if(c[0]>r)return NaN;for(u=e+1;u<o&&a.get(t,u);)c[2]++,u++;if(u===o)return NaN;for(;u<o&&!a.get(t,u)&&c[3]<r;)c[3]++,u++;if(u===o||c[3]>=r)return NaN;for(;u<o&&a.get(t,u)&&c[4]<r;)c[4]++,u++;if(c[4]>=r)return NaN;var d=c[0]+c[1]+c[2]+c[3]+c[4];return 5*Math.abs(d-i)>=2*i?NaN:n.foundPatternCross(c)?n.centerFromEnd(c,u):NaN},n.prototype.crossCheckHorizontal=function(e,t,r,i){for(var a=this.image,o=a.getWidth(),c=this.getCrossCheckStateCount(),u=e;u>=0&&a.get(u,t);)c[2]++,u--;if(u<0)return NaN;for(;u>=0&&!a.get(u,t)&&c[1]<=r;)c[1]++,u--;if(u<0||c[1]>r)return NaN;for(;u>=0&&a.get(u,t)&&c[0]<=r;)c[0]++,u--;if(c[0]>r)return NaN;for(u=e+1;u<o&&a.get(u,t);)c[2]++,u++;if(u===o)return NaN;for(;u<o&&!a.get(u,t)&&c[3]<r;)c[3]++,u++;if(u===o||c[3]>=r)return NaN;for(;u<o&&a.get(u,t)&&c[4]<r;)c[4]++,u++;if(c[4]>=r)return NaN;var d=c[0]+c[1]+c[2]+c[3]+c[4];return 5*Math.abs(d-i)>=i?NaN:n.foundPatternCross(c)?n.centerFromEnd(c,u):NaN},n.prototype.handlePossibleCenter=function(e,t,r,i){var a=e[0]+e[1]+e[2]+e[3]+e[4],o=n.centerFromEnd(e,r),c=this.crossCheckVertical(t,Math.floor(o),e[2],a);if(!isNaN(c)&&(o=this.crossCheckHorizontal(Math.floor(o),Math.floor(c),e[2],a),!isNaN(o)&&(!i||this.crossCheckDiagonal(Math.floor(c),Math.floor(o),e[2],a)))){for(var u=a/7,d=!1,m=this.possibleCenters,g=0,_=m.length;g<_;g++){var w=m[g];if(w.aboutEquals(u,c,o)){m[g]=w.combineEstimate(c,o,u),d=!0;break}}if(!d){var E=new zj(o,c,u);m.push(E),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(E)}return!0}return!1},n.prototype.findRowSkip=function(){var e,t,r=this.possibleCenters.length;if(r<=1)return 0;var i=null;try{for(var a=Qu(this.possibleCenters),o=a.next();!o.done;o=a.next()){var c=o.value;if(c.getCount()>=n.CENTER_QUORUM)if(i==null)i=c;else return this.hasSkipped=!0,Math.floor((Math.abs(i.getX()-c.getX())-Math.abs(i.getY()-c.getY()))/2)}}catch(u){e={error:u}}finally{try{o&&!o.done&&(t=a.return)&&t.call(a)}finally{if(e)throw e.error}}return 0},n.prototype.haveMultiplyConfirmedCenters=function(){var e,t,r,i,a=0,o=0,c=this.possibleCenters.length;try{for(var u=Qu(this.possibleCenters),d=u.next();!d.done;d=u.next()){var m=d.value;m.getCount()>=n.CENTER_QUORUM&&(a++,o+=m.getEstimatedModuleSize())}}catch(S){e={error:S}}finally{try{d&&!d.done&&(t=u.return)&&t.call(u)}finally{if(e)throw e.error}}if(a<3)return!1;var g=o/c,_=0;try{for(var w=Qu(this.possibleCenters),E=w.next();!E.done;E=w.next()){var m=E.value;_+=Math.abs(m.getEstimatedModuleSize()-g)}}catch(S){r={error:S}}finally{try{E&&!E.done&&(i=w.return)&&i.call(w)}finally{if(r)throw r.error}}return _<=.05*o},n.prototype.selectBestPatterns=function(){var e,t,r,i,a=this.possibleCenters.length;if(a<3)throw new oe;var o=this.possibleCenters,c;if(a>3){var u=0,d=0;try{for(var m=Qu(this.possibleCenters),g=m.next();!g.done;g=m.next()){var _=g.value,w=_.getEstimatedModuleSize();u+=w,d+=w*w}}catch(q){e={error:q}}finally{try{g&&!g.done&&(t=m.return)&&t.call(m)}finally{if(e)throw e.error}}c=u/a;var E=Math.sqrt(d/a-c*c);o.sort(function(q,$){var M=Math.abs($.getEstimatedModuleSize()-c),b=Math.abs(q.getEstimatedModuleSize()-c);return M<b?-1:M>b?1:0});for(var S=Math.max(.2*c,E),D=0;D<o.length&&o.length>3;D++){var C=o[D];Math.abs(C.getEstimatedModuleSize()-c)>S&&(o.splice(D,1),D--)}}if(o.length>3){var u=0;try{for(var k=Qu(o),V=k.next();!V.done;V=k.next()){var U=V.value;u+=U.getEstimatedModuleSize()}}catch($){r={error:$}}finally{try{V&&!V.done&&(i=k.return)&&i.call(k)}finally{if(r)throw r.error}}c=u/o.length,o.sort(function($,M){if(M.getCount()===$.getCount()){var b=Math.abs(M.getEstimatedModuleSize()-c),N=Math.abs($.getEstimatedModuleSize()-c);return b<N?1:b>N?-1:0}else return M.getCount()-$.getCount()}),o.splice(3)}return[o[0],o[1],o[2]]},n.CENTER_QUORUM=2,n.MIN_SKIP=3,n.MAX_MODULES=57,n})(),qj=(function(){function n(e){this.image=e}return n.prototype.getImage=function(){return this.image},n.prototype.getResultPointCallback=function(){return this.resultPointCallback},n.prototype.detect=function(e){this.resultPointCallback=e==null?null:e.get(qt.NEED_RESULT_POINT_CALLBACK);var t=new Gj(this.image,this.resultPointCallback),r=t.find(e);return this.processFinderPatternInfo(r)},n.prototype.processFinderPatternInfo=function(e){var t=e.getTopLeft(),r=e.getTopRight(),i=e.getBottomLeft(),a=this.calculateModuleSize(t,r,i);if(a<1)throw new oe("No pattern found in proccess finder.");var o=n.computeDimension(t,r,i,a),c=tl.getProvisionalVersionForDimension(o),u=c.getDimensionForVersion()-7,d=null;if(c.getAlignmentPatternCenters().length>0)for(var m=r.getX()-t.getX()+i.getX(),g=r.getY()-t.getY()+i.getY(),_=1-3/u,w=Math.floor(t.getX()+_*(m-t.getX())),E=Math.floor(t.getY()+_*(g-t.getY())),S=4;S<=16;S<<=1)try{d=this.findAlignmentInRegion(a,w,E,S);break}catch(V){if(!(V instanceof oe))throw V}var D=n.createTransform(t,r,i,d,o),C=n.sampleGrid(this.image,D,o),k;return d===null?k=[i,t,r]:k=[i,t,r,d],new Yy(C,k)},n.createTransform=function(e,t,r,i,a){var o=a-3.5,c,u,d,m;return i!==null?(c=i.getX(),u=i.getY(),d=o-3,m=d):(c=t.getX()-e.getX()+r.getX(),u=t.getY()-e.getY()+r.getY(),d=o,m=o),M3.quadrilateralToQuadrilateral(3.5,3.5,o,3.5,d,m,3.5,o,e.getX(),e.getY(),t.getX(),t.getY(),c,u,r.getX(),r.getY())},n.sampleGrid=function(e,t,r){var i=Ky.getInstance();return i.sampleGridWithTransform(e,r,r,t)},n.computeDimension=function(e,t,r,i){var a=wt.round(Ne.distance(e,t)/i),o=wt.round(Ne.distance(e,r)/i),c=Math.floor((a+o)/2)+7;switch(c&3){case 0:c++;break;case 2:c--;break;case 3:throw new oe("Dimensions could be not found.")}return c},n.prototype.calculateModuleSize=function(e,t,r){return(this.calculateModuleSizeOneWay(e,t)+this.calculateModuleSizeOneWay(e,r))/2},n.prototype.calculateModuleSizeOneWay=function(e,t){var r=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(e.getX()),Math.floor(e.getY()),Math.floor(t.getX()),Math.floor(t.getY())),i=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(t.getX()),Math.floor(t.getY()),Math.floor(e.getX()),Math.floor(e.getY()));return isNaN(r)?i/7:isNaN(i)?r/7:(r+i)/14},n.prototype.sizeOfBlackWhiteBlackRunBothWays=function(e,t,r,i){var a=this.sizeOfBlackWhiteBlackRun(e,t,r,i),o=1,c=e-(r-e);c<0?(o=e/(e-c),c=0):c>=this.image.getWidth()&&(o=(this.image.getWidth()-1-e)/(c-e),c=this.image.getWidth()-1);var u=Math.floor(t-(i-t)*o);return o=1,u<0?(o=t/(t-u),u=0):u>=this.image.getHeight()&&(o=(this.image.getHeight()-1-t)/(u-t),u=this.image.getHeight()-1),c=Math.floor(e+(c-e)*o),a+=this.sizeOfBlackWhiteBlackRun(e,t,c,u),a-1},n.prototype.sizeOfBlackWhiteBlackRun=function(e,t,r,i){var a=Math.abs(i-t)>Math.abs(r-e);if(a){var o=e;e=t,t=o,o=r,r=i,i=o}for(var c=Math.abs(r-e),u=Math.abs(i-t),d=-c/2,m=e<r?1:-1,g=t<i?1:-1,_=0,w=r+m,E=e,S=t;E!==w;E+=m){var D=a?S:E,C=a?E:S;if(_===1===this.image.get(D,C)){if(_===2)return wt.distance(E,S,e,t);_++}if(d+=u,d>0){if(S===i)break;S+=g,d-=c}}return _===2?wt.distance(r+m,i,e,t):NaN},n.prototype.findAlignmentInRegion=function(e,t,r,i){var a=Math.floor(i*e),o=Math.max(0,t-a),c=Math.min(this.image.getWidth()-1,t+a);if(c-o<e*3)throw new oe("Alignment top exceeds estimated module size.");var u=Math.max(0,r-a),d=Math.min(this.image.getHeight()-1,r+a);if(d-u<e*3)throw new oe("Alignment bottom exceeds estimated module size.");var m=new Fj(this.image,o,u,c-o,d-u,e,this.resultPointCallback);return m.find()},n})(),j0=(function(){function n(){this.decoder=new jj}return n.prototype.getDecoder=function(){return this.decoder},n.prototype.decode=function(e,t){var r,i;if(t!=null&&t.get(qt.PURE_BARCODE)!==void 0){var a=n.extractPureBits(e.getBlackMatrix());r=this.decoder.decodeBitMatrix(a,t),i=n.NO_POINTS}else{var o=new qj(e.getBlackMatrix()).detect(t);r=this.decoder.decodeBitMatrix(o.getBits(),t),i=o.getPoints()}r.getOther()instanceof V3&&r.getOther().applyMirroredCorrection(i);var c=new yr(r.getText(),r.getRawBytes(),void 0,i,Le.QR_CODE,void 0),u=r.getByteSegments();u!==null&&c.putMetadata(cr.BYTE_SEGMENTS,u);var d=r.getECLevel();return d!==null&&c.putMetadata(cr.ERROR_CORRECTION_LEVEL,d),r.hasStructuredAppend()&&(c.putMetadata(cr.STRUCTURED_APPEND_SEQUENCE,r.getStructuredAppendSequenceNumber()),c.putMetadata(cr.STRUCTURED_APPEND_PARITY,r.getStructuredAppendParity())),c},n.prototype.reset=function(){},n.extractPureBits=function(e){var t=e.getTopLeftOnBit(),r=e.getBottomRightOnBit();if(t===null||r===null)throw new oe;var i=this.moduleSize(t,e),a=t[1],o=r[1],c=t[0],u=r[0];if(c>=u||a>=o)throw new oe;if(o-a!==u-c&&(u=c+(o-a),u>=e.getWidth()))throw new oe;var d=Math.round((u-c+1)/i),m=Math.round((o-a+1)/i);if(d<=0||m<=0)throw new oe;if(m!==d)throw new oe;var g=Math.floor(i/2);a+=g,c+=g;var _=c+Math.floor((d-1)*i)-u;if(_>0){if(_>g)throw new oe;c-=_}var w=a+Math.floor((m-1)*i)-o;if(w>0){if(w>g)throw new oe;a-=w}for(var E=new Ta(d,m),S=0;S<m;S++)for(var D=a+Math.floor(S*i),C=0;C<d;C++)e.get(c+Math.floor(C*i),D)&&E.set(C,S);return E},n.moduleSize=function(e,t){for(var r=t.getHeight(),i=t.getWidth(),a=e[0],o=e[1],c=!0,u=0;a<i&&o<r;){if(c!==t.get(a,o)){if(++u===5)break;c=!c}a++,o++}if(a===i||o===r)throw new oe;return(a-e[0])/7},n.NO_POINTS=new Array,n})(),$j=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},gt=(function(){function n(){}return n.prototype.PDF417Common=function(){},n.getBitCountSum=function(e){return wt.sum(e)},n.toIntArray=function(e){var t,r;if(e==null||!e.length)return n.EMPTY_INT_ARRAY;var i=new Int32Array(e.length),a=0;try{for(var o=$j(e),c=o.next();!c.done;c=o.next()){var u=c.value;i[a++]=u}}catch(d){t={error:d}}finally{try{c&&!c.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}return i},n.getCodeword=function(e){var t=Pn.binarySearch(n.SYMBOL_TABLE,e&262143);return t<0?-1:(n.CODEWORD_TABLE[t]-1)%n.NUMBER_OF_CODEWORDS},n.NUMBER_OF_CODEWORDS=929,n.MAX_CODEWORDS_IN_BARCODE=n.NUMBER_OF_CODEWORDS-1,n.MIN_ROWS_IN_BARCODE=3,n.MAX_ROWS_IN_BARCODE=90,n.MODULES_IN_CODEWORD=17,n.MODULES_IN_STOP_PATTERN=18,n.BARS_IN_MODULE=8,n.EMPTY_INT_ARRAY=new Int32Array([]),n.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),n.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]),n})(),Xj=(function(){function n(e,t){this.bits=e,this.points=t}return n.prototype.getBits=function(){return this.bits},n.prototype.getPoints=function(){return this.points},n})(),Yj=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Kj=(function(){function n(){}return n.detectMultiple=function(e,t,r){var i=e.getBlackMatrix(),a=n.detect(r,i);return a.length||(i=i.clone(),i.rotate180(),a=n.detect(r,i)),new Xj(i,a)},n.detect=function(e,t){for(var r,i,a=new Array,o=0,c=0,u=!1;o<t.getHeight();){var d=n.findVertices(t,o,c);if(d[0]==null&&d[3]==null){if(!u)break;u=!1,c=0;try{for(var m=(r=void 0,Yj(a)),g=m.next();!g.done;g=m.next()){var _=g.value;_[1]!=null&&(o=Math.trunc(Math.max(o,_[1].getY()))),_[3]!=null&&(o=Math.max(o,Math.trunc(_[3].getY())))}}catch(w){r={error:w}}finally{try{g&&!g.done&&(i=m.return)&&i.call(m)}finally{if(r)throw r.error}}o+=n.ROW_STEP;continue}if(u=!0,a.push(d),!e)break;d[2]!=null?(c=Math.trunc(d[2].getX()),o=Math.trunc(d[2].getY())):(c=Math.trunc(d[4].getX()),o=Math.trunc(d[4].getY()))}return a},n.findVertices=function(e,t,r){var i=e.getHeight(),a=e.getWidth(),o=new Array(8);return n.copyToResult(o,n.findRowsWithPattern(e,i,a,t,r,n.START_PATTERN),n.INDEXES_START_PATTERN),o[4]!=null&&(r=Math.trunc(o[4].getX()),t=Math.trunc(o[4].getY())),n.copyToResult(o,n.findRowsWithPattern(e,i,a,t,r,n.STOP_PATTERN),n.INDEXES_STOP_PATTERN),o},n.copyToResult=function(e,t,r){for(var i=0;i<r.length;i++)e[r[i]]=t[i]},n.findRowsWithPattern=function(e,t,r,i,a,o){for(var c=new Array(4),u=!1,d=new Int32Array(o.length);i<t;i+=n.ROW_STEP){var m=n.findGuardPattern(e,a,i,r,!1,o,d);if(m!=null){for(;i>0;){var g=n.findGuardPattern(e,a,--i,r,!1,o,d);if(g!=null)m=g;else{i++;break}}c[0]=new Ne(m[0],i),c[1]=new Ne(m[1],i),u=!0;break}}var _=i+1;if(u){for(var w=0,g=Int32Array.from([Math.trunc(c[0].getX()),Math.trunc(c[1].getX())]);_<t;_++){var m=n.findGuardPattern(e,g[0],_,r,!1,o,d);if(m!=null&&Math.abs(g[0]-m[0])<n.MAX_PATTERN_DRIFT&&Math.abs(g[1]-m[1])<n.MAX_PATTERN_DRIFT)g=m,w=0;else{if(w>n.SKIPPED_ROW_COUNT_MAX)break;w++}}_-=w+1,c[2]=new Ne(g[0],_),c[3]=new Ne(g[1],_)}return _-i<n.BARCODE_MIN_HEIGHT&&Pn.fill(c,null),c},n.findGuardPattern=function(e,t,r,i,a,o,c){Pn.fillWithin(c,0,c.length,0);for(var u=t,d=0;e.get(u,r)&&u>0&&d++<n.MAX_PIXEL_DRIFT;)u--;for(var m=u,g=0,_=o.length,w=a;m<i;m++){var E=e.get(m,r);if(E!==w)c[g]++;else{if(g===_-1){if(n.patternMatchVariance(c,o,n.MAX_INDIVIDUAL_VARIANCE)<n.MAX_AVG_VARIANCE)return new Int32Array([u,m]);u+=c[0]+c[1],Gt.arraycopy(c,2,c,0,g-1),c[g-1]=0,c[g]=0,g--}else g++;c[g]=1,w=!w}}return g===_-1&&n.patternMatchVariance(c,o,n.MAX_INDIVIDUAL_VARIANCE)<n.MAX_AVG_VARIANCE?new Int32Array([u,m-1]):null},n.patternMatchVariance=function(e,t,r){for(var i=e.length,a=0,o=0,c=0;c<i;c++)a+=e[c],o+=t[c];if(a<o)return 1/0;var u=a/o;r*=u;for(var d=0,m=0;m<i;m++){var g=e[m],_=t[m]*u,w=g>_?g-_:_-g;if(w>r)return 1/0;d+=w}return d/a},n.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),n.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),n.MAX_AVG_VARIANCE=.42,n.MAX_INDIVIDUAL_VARIANCE=.8,n.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),n.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),n.MAX_PIXEL_DRIFT=3,n.MAX_PATTERN_DRIFT=5,n.SKIPPED_ROW_COUNT_MAX=25,n.ROW_STEP=5,n.BARCODE_MIN_HEIGHT=10,n})(),Wj=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Jo=(function(){function n(e,t){if(t.length===0)throw new Be;this.field=e;var r=t.length;if(r>1&&t[0]===0){for(var i=1;i<r&&t[i]===0;)i++;i===r?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(r-i),Gt.arraycopy(t,i,this.coefficients,0,this.coefficients.length))}else this.coefficients=t}return n.prototype.getCoefficients=function(){return this.coefficients},n.prototype.getDegree=function(){return this.coefficients.length-1},n.prototype.isZero=function(){return this.coefficients[0]===0},n.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},n.prototype.evaluateAt=function(e){var t,r;if(e===0)return this.getCoefficient(0);if(e===1){var i=0;try{for(var a=Wj(this.coefficients),o=a.next();!o.done;o=a.next()){var c=o.value;i=this.field.add(i,c)}}catch(g){t={error:g}}finally{try{o&&!o.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}return i}for(var u=this.coefficients[0],d=this.coefficients.length,m=1;m<d;m++)u=this.field.add(this.field.multiply(e,u),this.coefficients[m]);return u},n.prototype.add=function(e){if(!this.field.equals(e.field))throw new Be("ModulusPolys do not have same ModulusGF field");if(this.isZero())return e;if(e.isZero())return this;var t=this.coefficients,r=e.coefficients;if(t.length>r.length){var i=t;t=r,r=i}var a=new Int32Array(r.length),o=r.length-t.length;Gt.arraycopy(r,0,a,0,o);for(var c=o;c<r.length;c++)a[c]=this.field.add(t[c-o],r[c]);return new n(this.field,a)},n.prototype.subtract=function(e){if(!this.field.equals(e.field))throw new Be("ModulusPolys do not have same ModulusGF field");return e.isZero()?this:this.add(e.negative())},n.prototype.multiply=function(e){return e instanceof n?this.multiplyOther(e):this.multiplyScalar(e)},n.prototype.multiplyOther=function(e){if(!this.field.equals(e.field))throw new Be("ModulusPolys do not have same ModulusGF field");if(this.isZero()||e.isZero())return new n(this.field,new Int32Array([0]));for(var t=this.coefficients,r=t.length,i=e.coefficients,a=i.length,o=new Int32Array(r+a-1),c=0;c<r;c++)for(var u=t[c],d=0;d<a;d++)o[c+d]=this.field.add(o[c+d],this.field.multiply(u,i[d]));return new n(this.field,o)},n.prototype.negative=function(){for(var e=this.coefficients.length,t=new Int32Array(e),r=0;r<e;r++)t[r]=this.field.subtract(0,this.coefficients[r]);return new n(this.field,t)},n.prototype.multiplyScalar=function(e){if(e===0)return new n(this.field,new Int32Array([0]));if(e===1)return this;for(var t=this.coefficients.length,r=new Int32Array(t),i=0;i<t;i++)r[i]=this.field.multiply(this.coefficients[i],e);return new n(this.field,r)},n.prototype.multiplyByMonomial=function(e,t){if(e<0)throw new Be;if(t===0)return new n(this.field,new Int32Array([0]));for(var r=this.coefficients.length,i=new Int32Array(r+e),a=0;a<r;a++)i[a]=this.field.multiply(this.coefficients[a],t);return new n(this.field,i)},n.prototype.toString=function(){for(var e=new rt,t=this.getDegree();t>=0;t--){var r=this.getCoefficient(t);r!==0&&(r<0?(e.append(" - "),r=-r):e.length()>0&&e.append(" + "),(t===0||r!==1)&&e.append(r),t!==0&&(t===1?e.append("x"):(e.append("x^"),e.append(t))))}return e.toString()},n})(),Qj=(function(){function n(){}return n.prototype.add=function(e,t){return(e+t)%this.modulus},n.prototype.subtract=function(e,t){return(this.modulus+e-t)%this.modulus},n.prototype.exp=function(e){return this.expTable[e]},n.prototype.log=function(e){if(e===0)throw new Be;return this.logTable[e]},n.prototype.inverse=function(e){if(e===0)throw new D3;return this.expTable[this.modulus-this.logTable[e]-1]},n.prototype.multiply=function(e,t){return e===0||t===0?0:this.expTable[(this.logTable[e]+this.logTable[t])%(this.modulus-1)]},n.prototype.getSize=function(){return this.modulus},n.prototype.equals=function(e){return e===this},n})(),Zj=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Jj=(function(n){Zj(e,n);function e(t,r){var i=n.call(this)||this;i.modulus=t,i.expTable=new Int32Array(t),i.logTable=new Int32Array(t);for(var a=1,o=0;o<t;o++)i.expTable[o]=a,a=a*r%t;for(var o=0;o<t-1;o++)i.logTable[i.expTable[o]]=o;return i.zero=new Jo(i,new Int32Array([0])),i.one=new Jo(i,new Int32Array([1])),i}return e.prototype.getZero=function(){return this.zero},e.prototype.getOne=function(){return this.one},e.prototype.buildMonomial=function(t,r){if(t<0)throw new Be;if(r===0)return this.zero;var i=new Int32Array(t+1);return i[0]=r,new Jo(this,i)},e.PDF417_GF=new e(gt.NUMBER_OF_CODEWORDS,3),e})(Qj),eL=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},tL=(function(){function n(){this.field=Jj.PDF417_GF}return n.prototype.decode=function(e,t,r){for(var i,a,o=new Jo(this.field,e),c=new Int32Array(t),u=!1,d=t;d>0;d--){var m=o.evaluateAt(this.field.exp(d));c[t-d]=m,m!==0&&(u=!0)}if(!u)return 0;var g=this.field.getOne();if(r!=null)try{for(var _=eL(r),w=_.next();!w.done;w=_.next()){var E=w.value,S=this.field.exp(e.length-1-E),D=new Jo(this.field,new Int32Array([this.field.subtract(0,S),1]));g=g.multiply(D)}}catch(b){i={error:b}}finally{try{w&&!w.done&&(a=_.return)&&a.call(_)}finally{if(i)throw i.error}}for(var C=new Jo(this.field,c),k=this.runEuclideanAlgorithm(this.field.buildMonomial(t,1),C,t),V=k[0],U=k[1],q=this.findErrorLocations(V),$=this.findErrorMagnitudes(U,V,q),d=0;d<q.length;d++){var M=e.length-1-this.field.log(q[d]);if(M<0)throw Tn.getChecksumInstance();e[M]=this.field.subtract(e[M],$[d])}return q.length},n.prototype.runEuclideanAlgorithm=function(e,t,r){if(e.getDegree()<t.getDegree()){var i=e;e=t,t=i}for(var a=e,o=t,c=this.field.getZero(),u=this.field.getOne();o.getDegree()>=Math.round(r/2);){var d=a,m=c;if(a=o,c=u,a.isZero())throw Tn.getChecksumInstance();o=d;for(var g=this.field.getZero(),_=a.getCoefficient(a.getDegree()),w=this.field.inverse(_);o.getDegree()>=a.getDegree()&&!o.isZero();){var E=o.getDegree()-a.getDegree(),S=this.field.multiply(o.getCoefficient(o.getDegree()),w);g=g.add(this.field.buildMonomial(E,S)),o=o.subtract(a.multiplyByMonomial(E,S))}u=g.multiply(c).subtract(m).negative()}var D=u.getCoefficient(0);if(D===0)throw Tn.getChecksumInstance();var C=this.field.inverse(D),k=u.multiply(C),V=o.multiply(C);return[k,V]},n.prototype.findErrorLocations=function(e){for(var t=e.getDegree(),r=new Int32Array(t),i=0,a=1;a<this.field.getSize()&&i<t;a++)e.evaluateAt(a)===0&&(r[i]=this.field.inverse(a),i++);if(i!==t)throw Tn.getChecksumInstance();return r},n.prototype.findErrorMagnitudes=function(e,t,r){for(var i=t.getDegree(),a=new Int32Array(i),o=1;o<=i;o++)a[i-o]=this.field.multiply(o,t.getCoefficient(o));for(var c=new Jo(this.field,a),u=r.length,d=new Int32Array(u),o=0;o<u;o++){var m=this.field.inverse(r[o]),g=this.field.subtract(0,e.evaluateAt(m)),_=this.field.inverse(c.evaluateAt(m));d[o]=this.field.multiply(g,_)}return d},n})(),_v=(function(){function n(e,t,r,i,a){e instanceof n?this.constructor_2(e):this.constructor_1(e,t,r,i,a)}return n.prototype.constructor_1=function(e,t,r,i,a){var o=t==null||r==null,c=i==null||a==null;if(o&&c)throw new oe;o?(t=new Ne(0,i.getY()),r=new Ne(0,a.getY())):c&&(i=new Ne(e.getWidth()-1,t.getY()),a=new Ne(e.getWidth()-1,r.getY())),this.image=e,this.topLeft=t,this.bottomLeft=r,this.topRight=i,this.bottomRight=a,this.minX=Math.trunc(Math.min(t.getX(),r.getX())),this.maxX=Math.trunc(Math.max(i.getX(),a.getX())),this.minY=Math.trunc(Math.min(t.getY(),i.getY())),this.maxY=Math.trunc(Math.max(r.getY(),a.getY()))},n.prototype.constructor_2=function(e){this.image=e.image,this.topLeft=e.getTopLeft(),this.bottomLeft=e.getBottomLeft(),this.topRight=e.getTopRight(),this.bottomRight=e.getBottomRight(),this.minX=e.getMinX(),this.maxX=e.getMaxX(),this.minY=e.getMinY(),this.maxY=e.getMaxY()},n.merge=function(e,t){return e==null?t:t==null?e:new n(e.image,e.topLeft,e.bottomLeft,t.topRight,t.bottomRight)},n.prototype.addMissingRows=function(e,t,r){var i=this.topLeft,a=this.bottomLeft,o=this.topRight,c=this.bottomRight;if(e>0){var u=r?this.topLeft:this.topRight,d=Math.trunc(u.getY()-e);d<0&&(d=0);var m=new Ne(u.getX(),d);r?i=m:o=m}if(t>0){var g=r?this.bottomLeft:this.bottomRight,_=Math.trunc(g.getY()+t);_>=this.image.getHeight()&&(_=this.image.getHeight()-1);var w=new Ne(g.getX(),_);r?a=w:c=w}return new n(this.image,i,a,o,c)},n.prototype.getMinX=function(){return this.minX},n.prototype.getMaxX=function(){return this.maxX},n.prototype.getMinY=function(){return this.minY},n.prototype.getMaxY=function(){return this.maxY},n.prototype.getTopLeft=function(){return this.topLeft},n.prototype.getTopRight=function(){return this.topRight},n.prototype.getBottomLeft=function(){return this.bottomLeft},n.prototype.getBottomRight=function(){return this.bottomRight},n})(),nL=(function(){function n(e,t,r,i){this.columnCount=e,this.errorCorrectionLevel=i,this.rowCountUpperPart=t,this.rowCountLowerPart=r,this.rowCount=t+r}return n.prototype.getColumnCount=function(){return this.columnCount},n.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},n.prototype.getRowCount=function(){return this.rowCount},n.prototype.getRowCountUpperPart=function(){return this.rowCountUpperPart},n.prototype.getRowCountLowerPart=function(){return this.rowCountLowerPart},n})(),Qy=(function(){function n(){this.buffer=""}return n.form=function(e,t){var r=-1;function i(o,c,u,d,m,g){if(o==="%%")return"%";if(t[++r]!==void 0){o=d?parseInt(d.substr(1)):void 0;var _=m?parseInt(m.substr(1)):void 0,w;switch(g){case"s":w=t[r];break;case"c":w=t[r][0];break;case"f":w=parseFloat(t[r]).toFixed(o);break;case"p":w=parseFloat(t[r]).toPrecision(o);break;case"e":w=parseFloat(t[r]).toExponential(o);break;case"x":w=parseInt(t[r]).toString(_||16);break;case"d":w=parseFloat(parseInt(t[r],_||10).toPrecision(o)).toFixed(0);break}w=typeof w=="object"?JSON.stringify(w):(+w).toString(_);for(var E=parseInt(u),S=u&&u[0]+""=="0"?"0":" ";w.length<E;)w=c!==void 0?w+S:S+w;return w}}var a=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(a,i)},n.prototype.format=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this.buffer+=n.form(e,t)},n.prototype.toString=function(){return this.buffer},n})(),rL=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},F3=(function(){function n(e){this.boundingBox=new _v(e),this.codewords=new Array(e.getMaxY()-e.getMinY()+1)}return n.prototype.getCodewordNearby=function(e){var t=this.getCodeword(e);if(t!=null)return t;for(var r=1;r<n.MAX_NEARBY_DISTANCE;r++){var i=this.imageRowToCodewordIndex(e)-r;if(i>=0&&(t=this.codewords[i],t!=null)||(i=this.imageRowToCodewordIndex(e)+r,i<this.codewords.length&&(t=this.codewords[i],t!=null)))return t}return null},n.prototype.imageRowToCodewordIndex=function(e){return e-this.boundingBox.getMinY()},n.prototype.setCodeword=function(e,t){this.codewords[this.imageRowToCodewordIndex(e)]=t},n.prototype.getCodeword=function(e){return this.codewords[this.imageRowToCodewordIndex(e)]},n.prototype.getBoundingBox=function(){return this.boundingBox},n.prototype.getCodewords=function(){return this.codewords},n.prototype.toString=function(){var e,t,r=new Qy,i=0;try{for(var a=rL(this.codewords),o=a.next();!o.done;o=a.next()){var c=o.value;if(c==null){r.format("%3d:    |   %n",i++);continue}r.format("%3d: %3d|%3d%n",i++,c.getRowNumber(),c.getValue())}}catch(u){e={error:u}}finally{try{o&&!o.done&&(t=a.return)&&t.call(a)}finally{if(e)throw e.error}}return r.toString()},n.MAX_NEARBY_DISTANCE=5,n})(),iL=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},aL=function(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,a=[],o;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(c){o={error:c}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(o)throw o.error}}return a},uf=(function(){function n(){this.values=new Map}return n.prototype.setValue=function(e){e=Math.trunc(e);var t=this.values.get(e);t==null&&(t=0),t++,this.values.set(e,t)},n.prototype.getValue=function(){var e,t,r=-1,i=new Array,a=function(g,_){var w={getKey:function(){return g},getValue:function(){return _}};w.getValue()>r?(r=w.getValue(),i=[],i.push(w.getKey())):w.getValue()===r&&i.push(w.getKey())};try{for(var o=iL(this.values.entries()),c=o.next();!c.done;c=o.next()){var u=aL(c.value,2),d=u[0],m=u[1];a(d,m)}}catch(g){e={error:g}}finally{try{c&&!c.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}return gt.toIntArray(i)},n.prototype.getConfidence=function(e){return this.values.get(e)},n})(),sL=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Z1=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},QA=(function(n){sL(e,n);function e(t,r){var i=n.call(this,t)||this;return i._isLeft=r,i}return e.prototype.setRowNumbers=function(){var t,r;try{for(var i=Z1(this.getCodewords()),a=i.next();!a.done;a=i.next()){var o=a.value;o?.setRowNumberAsRowIndicatorColumn()}}catch(c){t={error:c}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}},e.prototype.adjustCompleteIndicatorColumnRowNumbers=function(t){var r=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(r,t);for(var i=this.getBoundingBox(),a=this._isLeft?i.getTopLeft():i.getTopRight(),o=this._isLeft?i.getBottomLeft():i.getBottomRight(),c=this.imageRowToCodewordIndex(Math.trunc(a.getY())),u=this.imageRowToCodewordIndex(Math.trunc(o.getY())),d=-1,m=1,g=0,_=c;_<u;_++)if(r[_]!=null){var w=r[_],E=w.getRowNumber()-d;if(E===0)g++;else if(E===1)m=Math.max(m,g),g=1,d=w.getRowNumber();else if(E<0||w.getRowNumber()>=t.getRowCount()||E>_)r[_]=null;else{var S=void 0;m>2?S=(m-2)*E:S=E;for(var D=S>=_,C=1;C<=S&&!D;C++)D=r[_-C]!=null;D?r[_]=null:(d=w.getRowNumber(),g=1)}}},e.prototype.getRowHeights=function(){var t,r,i=this.getBarcodeMetadata();if(i==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(i);var a=new Int32Array(i.getRowCount());try{for(var o=Z1(this.getCodewords()),c=o.next();!c.done;c=o.next()){var u=c.value;if(u!=null){var d=u.getRowNumber();if(d>=a.length)continue;a[d]++}}}catch(m){t={error:m}}finally{try{c&&!c.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}return a},e.prototype.adjustIncompleteIndicatorColumnRowNumbers=function(t){for(var r=this.getBoundingBox(),i=this._isLeft?r.getTopLeft():r.getTopRight(),a=this._isLeft?r.getBottomLeft():r.getBottomRight(),o=this.imageRowToCodewordIndex(Math.trunc(i.getY())),c=this.imageRowToCodewordIndex(Math.trunc(a.getY())),u=this.getCodewords(),d=-1,m=o;m<c;m++)if(u[m]!=null){var g=u[m];g.setRowNumberAsRowIndicatorColumn();var _=g.getRowNumber()-d;_===0||(_===1?d=g.getRowNumber():g.getRowNumber()>=t.getRowCount()?u[m]=null:d=g.getRowNumber())}},e.prototype.getBarcodeMetadata=function(){var t,r,i=this.getCodewords(),a=new uf,o=new uf,c=new uf,u=new uf;try{for(var d=Z1(i),m=d.next();!m.done;m=d.next()){var g=m.value;if(g!=null){g.setRowNumberAsRowIndicatorColumn();var _=g.getValue()%30,w=g.getRowNumber();switch(this._isLeft||(w+=2),w%3){case 0:o.setValue(_*3+1);break;case 1:u.setValue(_/3),c.setValue(_%3);break;case 2:a.setValue(_+1);break}}}}catch(S){t={error:S}}finally{try{m&&!m.done&&(r=d.return)&&r.call(d)}finally{if(t)throw t.error}}if(a.getValue().length===0||o.getValue().length===0||c.getValue().length===0||u.getValue().length===0||a.getValue()[0]<1||o.getValue()[0]+c.getValue()[0]<gt.MIN_ROWS_IN_BARCODE||o.getValue()[0]+c.getValue()[0]>gt.MAX_ROWS_IN_BARCODE)return null;var E=new nL(a.getValue()[0],o.getValue()[0],c.getValue()[0],u.getValue()[0]);return this.removeIncorrectCodewords(i,E),E},e.prototype.removeIncorrectCodewords=function(t,r){for(var i=0;i<t.length;i++){var a=t[i];if(t[i]!=null){var o=a.getValue()%30,c=a.getRowNumber();if(c>r.getRowCount()){t[i]=null;continue}switch(this._isLeft||(c+=2),c%3){case 0:o*3+1!==r.getRowCountUpperPart()&&(t[i]=null);break;case 1:(Math.trunc(o/3)!==r.getErrorCorrectionLevel()||o%3!==r.getRowCountLowerPart())&&(t[i]=null);break;case 2:o+1!==r.getColumnCount()&&(t[i]=null);break}}}},e.prototype.isLeft=function(){return this._isLeft},e.prototype.toString=function(){return"IsLeft: "+this._isLeft+`
`+n.prototype.toString.call(this)},e})(F3),oL=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},lL=(function(){function n(e,t){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=e,this.barcodeColumnCount=e.getColumnCount(),this.boundingBox=t,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}return n.prototype.getDetectionResultColumns=function(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);var e=gt.MAX_CODEWORDS_IN_BARCODE,t;do t=e,e=this.adjustRowNumbersAndGetCount();while(e>0&&e<t);return this.detectionResultColumns},n.prototype.adjustIndicatorColumnRowNumbers=function(e){e?.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)},n.prototype.adjustRowNumbersAndGetCount=function(){var e=this.adjustRowNumbersByRow();if(e===0)return 0;for(var t=1;t<this.barcodeColumnCount+1;t++)for(var r=this.detectionResultColumns[t].getCodewords(),i=0;i<r.length;i++)r[i]!=null&&(r[i].hasValidRowNumber()||this.adjustRowNumbers(t,i,r));return e},n.prototype.adjustRowNumbersByRow=function(){this.adjustRowNumbersFromBothRI();var e=this.adjustRowNumbersFromLRI();return e+this.adjustRowNumbersFromRRI()},n.prototype.adjustRowNumbersFromBothRI=function(){if(!(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)){for(var e=this.detectionResultColumns[0].getCodewords(),t=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),r=0;r<e.length;r++)if(e[r]!=null&&t[r]!=null&&e[r].getRowNumber()===t[r].getRowNumber())for(var i=1;i<=this.barcodeColumnCount;i++){var a=this.detectionResultColumns[i].getCodewords()[r];a!=null&&(a.setRowNumber(e[r].getRowNumber()),a.hasValidRowNumber()||(this.detectionResultColumns[i].getCodewords()[r]=null))}}},n.prototype.adjustRowNumbersFromRRI=function(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;for(var e=0,t=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),r=0;r<t.length;r++)if(t[r]!=null)for(var i=t[r].getRowNumber(),a=0,o=this.barcodeColumnCount+1;o>0&&a<this.ADJUST_ROW_NUMBER_SKIP;o--){var c=this.detectionResultColumns[o].getCodewords()[r];c!=null&&(a=n.adjustRowNumberIfValid(i,a,c),c.hasValidRowNumber()||e++)}return e},n.prototype.adjustRowNumbersFromLRI=function(){if(this.detectionResultColumns[0]==null)return 0;for(var e=0,t=this.detectionResultColumns[0].getCodewords(),r=0;r<t.length;r++)if(t[r]!=null)for(var i=t[r].getRowNumber(),a=0,o=1;o<this.barcodeColumnCount+1&&a<this.ADJUST_ROW_NUMBER_SKIP;o++){var c=this.detectionResultColumns[o].getCodewords()[r];c!=null&&(a=n.adjustRowNumberIfValid(i,a,c),c.hasValidRowNumber()||e++)}return e},n.adjustRowNumberIfValid=function(e,t,r){return r==null||r.hasValidRowNumber()||(r.isValidRowNumber(e)?(r.setRowNumber(e),t=0):++t),t},n.prototype.adjustRowNumbers=function(e,t,r){var i,a;if(this.detectionResultColumns[e-1]!=null){var o=r[t],c=this.detectionResultColumns[e-1].getCodewords(),u=c;this.detectionResultColumns[e+1]!=null&&(u=this.detectionResultColumns[e+1].getCodewords());var d=new Array(14);d[2]=c[t],d[3]=u[t],t>0&&(d[0]=r[t-1],d[4]=c[t-1],d[5]=u[t-1]),t>1&&(d[8]=r[t-2],d[10]=c[t-2],d[11]=u[t-2]),t<r.length-1&&(d[1]=r[t+1],d[6]=c[t+1],d[7]=u[t+1]),t<r.length-2&&(d[9]=r[t+2],d[12]=c[t+2],d[13]=u[t+2]);try{for(var m=oL(d),g=m.next();!g.done;g=m.next()){var _=g.value;if(n.adjustRowNumber(o,_))return}}catch(w){i={error:w}}finally{try{g&&!g.done&&(a=m.return)&&a.call(m)}finally{if(i)throw i.error}}}},n.adjustRowNumber=function(e,t){return t==null?!1:t.hasValidRowNumber()&&t.getBucket()===e.getBucket()?(e.setRowNumber(t.getRowNumber()),!0):!1},n.prototype.getBarcodeColumnCount=function(){return this.barcodeColumnCount},n.prototype.getBarcodeRowCount=function(){return this.barcodeMetadata.getRowCount()},n.prototype.getBarcodeECLevel=function(){return this.barcodeMetadata.getErrorCorrectionLevel()},n.prototype.setBoundingBox=function(e){this.boundingBox=e},n.prototype.getBoundingBox=function(){return this.boundingBox},n.prototype.setDetectionResultColumn=function(e,t){this.detectionResultColumns[e]=t},n.prototype.getDetectionResultColumn=function(e){return this.detectionResultColumns[e]},n.prototype.toString=function(){var e=this.detectionResultColumns[0];e==null&&(e=this.detectionResultColumns[this.barcodeColumnCount+1]);for(var t=new Qy,r=0;r<e.getCodewords().length;r++){t.format("CW %3d:",r);for(var i=0;i<this.barcodeColumnCount+2;i++){if(this.detectionResultColumns[i]==null){t.format("    |   ");continue}var a=this.detectionResultColumns[i].getCodewords()[r];if(a==null){t.format("    |   ");continue}t.format(" %3d|%3d",a.getRowNumber(),a.getValue())}t.format("%n")}return t.toString()},n})(),cL=(function(){function n(e,t,r,i){this.rowNumber=n.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(e),this.endX=Math.trunc(t),this.bucket=Math.trunc(r),this.value=Math.trunc(i)}return n.prototype.hasValidRowNumber=function(){return this.isValidRowNumber(this.rowNumber)},n.prototype.isValidRowNumber=function(e){return e!==n.BARCODE_ROW_UNKNOWN&&this.bucket===e%3*3},n.prototype.setRowNumberAsRowIndicatorColumn=function(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))},n.prototype.getWidth=function(){return this.endX-this.startX},n.prototype.getStartX=function(){return this.startX},n.prototype.getEndX=function(){return this.endX},n.prototype.getBucket=function(){return this.bucket},n.prototype.getValue=function(){return this.value},n.prototype.getRowNumber=function(){return this.rowNumber},n.prototype.setRowNumber=function(e){this.rowNumber=e},n.prototype.toString=function(){return this.rowNumber+"|"+this.value},n.BARCODE_ROW_UNKNOWN=-1,n})(),uL=(function(){function n(){}return n.initialize=function(){for(var e=0;e<gt.SYMBOL_TABLE.length;e++)for(var t=gt.SYMBOL_TABLE[e],r=t&1,i=0;i<gt.BARS_IN_MODULE;i++){for(var a=0;(t&1)===r;)a+=1,t>>=1;r=t&1,n.RATIOS_TABLE[e]||(n.RATIOS_TABLE[e]=new Array(gt.BARS_IN_MODULE)),n.RATIOS_TABLE[e][gt.BARS_IN_MODULE-i-1]=Math.fround(a/gt.MODULES_IN_CODEWORD)}this.bSymbolTableReady=!0},n.getDecodedValue=function(e){var t=n.getDecodedCodewordValue(n.sampleBitCounts(e));return t!==-1?t:n.getClosestDecodedValue(e)},n.sampleBitCounts=function(e){for(var t=wt.sum(e),r=new Int32Array(gt.BARS_IN_MODULE),i=0,a=0,o=0;o<gt.MODULES_IN_CODEWORD;o++){var c=t/(2*gt.MODULES_IN_CODEWORD)+o*t/gt.MODULES_IN_CODEWORD;a+e[i]<=c&&(a+=e[i],i++),r[i]++}return r},n.getDecodedCodewordValue=function(e){var t=n.getBitValue(e);return gt.getCodeword(t)===-1?-1:t},n.getBitValue=function(e){for(var t=0,r=0;r<e.length;r++)for(var i=0;i<e[r];i++)t=t<<1|(r%2===0?1:0);return Math.trunc(t)},n.getClosestDecodedValue=function(e){var t=wt.sum(e),r=new Array(gt.BARS_IN_MODULE);if(t>1)for(var i=0;i<r.length;i++)r[i]=Math.fround(e[i]/t);var a=gv.MAX_VALUE,o=-1;this.bSymbolTableReady||n.initialize();for(var c=0;c<n.RATIOS_TABLE.length;c++){for(var u=0,d=n.RATIOS_TABLE[c],m=0;m<gt.BARS_IN_MODULE;m++){var g=Math.fround(d[m]-r[m]);if(u+=Math.fround(g*g),u>=a)break}u<a&&(a=u,o=gt.SYMBOL_TABLE[c])}return o},n.bSymbolTableReady=!1,n.RATIOS_TABLE=new Array(gt.SYMBOL_TABLE.length).map(function(e){return new Array(gt.BARS_IN_MODULE)}),n})(),fL=(function(){function n(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}return n.prototype.getSegmentIndex=function(){return this.segmentIndex},n.prototype.setSegmentIndex=function(e){this.segmentIndex=e},n.prototype.getFileId=function(){return this.fileId},n.prototype.setFileId=function(e){this.fileId=e},n.prototype.getOptionalData=function(){return this.optionalData},n.prototype.setOptionalData=function(e){this.optionalData=e},n.prototype.isLastSegment=function(){return this.lastSegment},n.prototype.setLastSegment=function(e){this.lastSegment=e},n.prototype.getSegmentCount=function(){return this.segmentCount},n.prototype.setSegmentCount=function(e){this.segmentCount=e},n.prototype.getSender=function(){return this.sender||null},n.prototype.setSender=function(e){this.sender=e},n.prototype.getAddressee=function(){return this.addressee||null},n.prototype.setAddressee=function(e){this.addressee=e},n.prototype.getFileName=function(){return this.fileName},n.prototype.setFileName=function(e){this.fileName=e},n.prototype.getFileSize=function(){return this.fileSize},n.prototype.setFileSize=function(e){this.fileSize=e},n.prototype.getChecksum=function(){return this.checksum},n.prototype.setChecksum=function(e){this.checksum=e},n.prototype.getTimestamp=function(){return this.timestamp},n.prototype.setTimestamp=function(e){this.timestamp=e},n})(),ZA=(function(){function n(){}return n.parseLong=function(e,t){return t===void 0&&(t=void 0),parseInt(e,t)},n})(),dL=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),hL=(function(n){dL(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="NullPointerException",e})(Ur),pL=(function(){function n(){}return n.prototype.writeBytes=function(e){this.writeBytesOffset(e,0,e.length)},n.prototype.writeBytesOffset=function(e,t,r){if(e==null)throw new hL;if(t<0||t>e.length||r<0||t+r>e.length||t+r<0)throw new Xy;if(r===0)return;for(var i=0;i<r;i++)this.write(e[t+i])},n.prototype.flush=function(){},n.prototype.close=function(){},n})(),mL=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),gL=(function(n){mL(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e})(Ur),vL=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),yL=(function(n){vL(e,n);function e(t){t===void 0&&(t=32);var r=n.call(this)||this;if(r.count=0,t<0)throw new Be("Negative initial size: "+t);return r.buf=new Uint8Array(t),r}return e.prototype.ensureCapacity=function(t){t-this.buf.length>0&&this.grow(t)},e.prototype.grow=function(t){var r=this.buf.length,i=r<<1;if(i-t<0&&(i=t),i<0){if(t<0)throw new gL;i=it.MAX_VALUE}this.buf=Pn.copyOfUint8Array(this.buf,i)},e.prototype.write=function(t){this.ensureCapacity(this.count+1),this.buf[this.count]=t,this.count+=1},e.prototype.writeBytesOffset=function(t,r,i){if(r<0||r>t.length||i<0||r+i-t.length>0)throw new Xy;this.ensureCapacity(this.count+i),Gt.arraycopy(t,r,this.buf,this.count,i),this.count+=i},e.prototype.writeTo=function(t){t.writeBytesOffset(this.buf,0,this.count)},e.prototype.reset=function(){this.count=0},e.prototype.toByteArray=function(){return Pn.copyOfUint8Array(this.buf,this.count)},e.prototype.size=function(){return this.count},e.prototype.toString=function(t){return t?typeof t=="string"?this.toString_string(t):this.toString_number(t):this.toString_void()},e.prototype.toString_void=function(){return new String(this.buf).toString()},e.prototype.toString_string=function(t){return new String(this.buf).toString()},e.prototype.toString_number=function(t){return new String(this.buf).toString()},e.prototype.close=function(){},e})(pL),Ft;(function(n){n[n.ALPHA=0]="ALPHA",n[n.LOWER=1]="LOWER",n[n.MIXED=2]="MIXED",n[n.PUNCT=3]="PUNCT",n[n.ALPHA_SHIFT=4]="ALPHA_SHIFT",n[n.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(Ft||(Ft={}));function U3(){if(typeof window<"u")return window.BigInt||null;if(typeof global<"u")return global.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}var Bh;function Hs(n){if(typeof Bh>"u"&&(Bh=U3()),Bh===null)throw new Error("BigInt is not supported!");return Bh(n)}function _L(){var n=[];n[0]=Hs(1);var e=Hs(900);n[1]=e;for(var t=2;t<16;t++)n[t]=n[t-1]*e;return n}var xL=(function(){function n(){}return n.decode=function(e,t){var r=new rt(""),i=Mn.ISO8859_1;r.enableDecoding(i);for(var a=1,o=e[a++],c=new fL;a<e[0];){switch(o){case n.TEXT_COMPACTION_MODE_LATCH:a=n.textCompaction(e,a,r);break;case n.BYTE_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:a=n.byteCompaction(o,e,i,a,r);break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(e[a++]);break;case n.NUMERIC_COMPACTION_MODE_LATCH:a=n.numericCompaction(e,a,r);break;case n.ECI_CHARSET:Mn.getCharacterSetECIByValue(e[a++]);break;case n.ECI_GENERAL_PURPOSE:a+=2;break;case n.ECI_USER_DEFINED:a++;break;case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:a=n.decodeMacroBlock(e,a,c);break;case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:throw new _e;default:a--,a=n.textCompaction(e,a,r);break}if(a<e.length)o=e[a++];else throw _e.getFormatInstance()}if(r.length()===0)throw _e.getFormatInstance();var u=new Ap(null,r.toString(),null,t);return u.setOther(c),u},n.decodeMacroBlock=function(e,t,r){if(t+n.NUMBER_OF_SEQUENCE_CODEWORDS>e[0])throw _e.getFormatInstance();for(var i=new Int32Array(n.NUMBER_OF_SEQUENCE_CODEWORDS),a=0;a<n.NUMBER_OF_SEQUENCE_CODEWORDS;a++,t++)i[a]=e[t];r.setSegmentIndex(it.parseInt(n.decodeBase900toBase10(i,n.NUMBER_OF_SEQUENCE_CODEWORDS)));var o=new rt;t=n.textCompaction(e,t,o),r.setFileId(o.toString());var c=-1;for(e[t]===n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(c=t+1);t<e[0];)switch(e[t]){case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(t++,e[t]){case n.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:var u=new rt;t=n.textCompaction(e,t+1,u),r.setFileName(u.toString());break;case n.MACRO_PDF417_OPTIONAL_FIELD_SENDER:var d=new rt;t=n.textCompaction(e,t+1,d),r.setSender(d.toString());break;case n.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:var m=new rt;t=n.textCompaction(e,t+1,m),r.setAddressee(m.toString());break;case n.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:var g=new rt;t=n.numericCompaction(e,t+1,g),r.setSegmentCount(it.parseInt(g.toString()));break;case n.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:var _=new rt;t=n.numericCompaction(e,t+1,_),r.setTimestamp(ZA.parseLong(_.toString()));break;case n.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:var w=new rt;t=n.numericCompaction(e,t+1,w),r.setChecksum(it.parseInt(w.toString()));break;case n.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:var E=new rt;t=n.numericCompaction(e,t+1,E),r.setFileSize(ZA.parseLong(E.toString()));break;default:throw _e.getFormatInstance()}break;case n.MACRO_PDF417_TERMINATOR:t++,r.setLastSegment(!0);break;default:throw _e.getFormatInstance()}if(c!==-1){var S=t-c;r.isLastSegment()&&S--,r.setOptionalData(Pn.copyOfRange(e,c,c+S))}return t},n.textCompaction=function(e,t,r){for(var i=new Int32Array((e[0]-t)*2),a=new Int32Array((e[0]-t)*2),o=0,c=!1;t<e[0]&&!c;){var u=e[t++];if(u<n.TEXT_COMPACTION_MODE_LATCH)i[o]=u/30,i[o+1]=u%30,o+=2;else switch(u){case n.TEXT_COMPACTION_MODE_LATCH:i[o++]=n.TEXT_COMPACTION_MODE_LATCH;break;case n.BYTE_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:case n.NUMERIC_COMPACTION_MODE_LATCH:case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:t--,c=!0;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i[o]=n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,u=e[t++],a[o]=u,o++;break}}return n.decodeTextCompaction(i,a,o,r),t},n.decodeTextCompaction=function(e,t,r,i){for(var a=Ft.ALPHA,o=Ft.ALPHA,c=0;c<r;){var u=e[c],d="";switch(a){case Ft.ALPHA:if(u<26)d=String.fromCharCode(65+u);else switch(u){case 26:d=" ";break;case n.LL:a=Ft.LOWER;break;case n.ML:a=Ft.MIXED;break;case n.PS:o=a,a=Ft.PUNCT_SHIFT;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[c]);break;case n.TEXT_COMPACTION_MODE_LATCH:a=Ft.ALPHA;break}break;case Ft.LOWER:if(u<26)d=String.fromCharCode(97+u);else switch(u){case 26:d=" ";break;case n.AS:o=a,a=Ft.ALPHA_SHIFT;break;case n.ML:a=Ft.MIXED;break;case n.PS:o=a,a=Ft.PUNCT_SHIFT;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[c]);break;case n.TEXT_COMPACTION_MODE_LATCH:a=Ft.ALPHA;break}break;case Ft.MIXED:if(u<n.PL)d=n.MIXED_CHARS[u];else switch(u){case n.PL:a=Ft.PUNCT;break;case 26:d=" ";break;case n.LL:a=Ft.LOWER;break;case n.AL:a=Ft.ALPHA;break;case n.PS:o=a,a=Ft.PUNCT_SHIFT;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[c]);break;case n.TEXT_COMPACTION_MODE_LATCH:a=Ft.ALPHA;break}break;case Ft.PUNCT:if(u<n.PAL)d=n.PUNCT_CHARS[u];else switch(u){case n.PAL:a=Ft.ALPHA;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[c]);break;case n.TEXT_COMPACTION_MODE_LATCH:a=Ft.ALPHA;break}break;case Ft.ALPHA_SHIFT:if(a=o,u<26)d=String.fromCharCode(65+u);else switch(u){case 26:d=" ";break;case n.TEXT_COMPACTION_MODE_LATCH:a=Ft.ALPHA;break}break;case Ft.PUNCT_SHIFT:if(a=o,u<n.PAL)d=n.PUNCT_CHARS[u];else switch(u){case n.PAL:a=Ft.ALPHA;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[c]);break;case n.TEXT_COMPACTION_MODE_LATCH:a=Ft.ALPHA;break}break}d!==""&&i.append(d),c++}},n.byteCompaction=function(e,t,r,i,a){var o=new yL,c=0,u=0,d=!1;switch(e){case n.BYTE_COMPACTION_MODE_LATCH:for(var m=new Int32Array(6),g=t[i++];i<t[0]&&!d;)switch(m[c++]=g,u=900*u+g,g=t[i++],g){case n.TEXT_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH:case n.NUMERIC_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:i--,d=!0;break;default:if(c%5===0&&c>0){for(var _=0;_<6;++_)o.write(Number(Hs(u)>>Hs(8*(5-_))));u=0,c=0}break}i===t[0]&&g<n.TEXT_COMPACTION_MODE_LATCH&&(m[c++]=g);for(var w=0;w<c;w++)o.write(m[w]);break;case n.BYTE_COMPACTION_MODE_LATCH_6:for(;i<t[0]&&!d;){var E=t[i++];if(E<n.TEXT_COMPACTION_MODE_LATCH)c++,u=900*u+E;else switch(E){case n.TEXT_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH:case n.NUMERIC_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:i--,d=!0;break}if(c%5===0&&c>0){for(var _=0;_<6;++_)o.write(Number(Hs(u)>>Hs(8*(5-_))));u=0,c=0}}break}return a.append(wi.decode(o.toByteArray(),r)),i},n.numericCompaction=function(e,t,r){for(var i=0,a=!1,o=new Int32Array(n.MAX_NUMERIC_CODEWORDS);t<e[0]&&!a;){var c=e[t++];if(t===e[0]&&(a=!0),c<n.TEXT_COMPACTION_MODE_LATCH)o[i]=c,i++;else switch(c){case n.TEXT_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:t--,a=!0;break}(i%n.MAX_NUMERIC_CODEWORDS===0||c===n.NUMERIC_COMPACTION_MODE_LATCH||a)&&i>0&&(r.append(n.decodeBase900toBase10(o,i)),i=0)}return t},n.decodeBase900toBase10=function(e,t){for(var r=Hs(0),i=0;i<t;i++)r+=n.EXP900[t-i-1]*Hs(e[i]);var a=r.toString();if(a.charAt(0)!=="1")throw new _e;return a.substring(1)},n.TEXT_COMPACTION_MODE_LATCH=900,n.BYTE_COMPACTION_MODE_LATCH=901,n.NUMERIC_COMPACTION_MODE_LATCH=902,n.BYTE_COMPACTION_MODE_LATCH_6=924,n.ECI_USER_DEFINED=925,n.ECI_GENERAL_PURPOSE=926,n.ECI_CHARSET=927,n.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,n.MACRO_PDF417_TERMINATOR=922,n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,n.MAX_NUMERIC_CODEWORDS=15,n.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,n.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,n.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,n.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,n.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,n.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,n.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,n.PL=25,n.LL=27,n.AS=27,n.ML=28,n.AL=28,n.PS=29,n.PAL=29,n.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,n.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",n.EXP900=U3()?_L():[],n.NUMBER_OF_SEQUENCE_CODEWORDS=2,n})(),Zu=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},wL=(function(){function n(){}return n.decode=function(e,t,r,i,a,o,c){for(var u=new _v(e,t,r,i,a),d=null,m=null,g,_=!0;;_=!1){if(t!=null&&(d=n.getRowIndicatorColumn(e,u,t,!0,o,c)),i!=null&&(m=n.getRowIndicatorColumn(e,u,i,!1,o,c)),g=n.merge(d,m),g==null)throw oe.getNotFoundInstance();var w=g.getBoundingBox();if(_&&w!=null&&(w.getMinY()<u.getMinY()||w.getMaxY()>u.getMaxY()))u=w;else break}g.setBoundingBox(u);var E=g.getBarcodeColumnCount()+1;g.setDetectionResultColumn(0,d),g.setDetectionResultColumn(E,m);for(var S=d!=null,D=1;D<=E;D++){var C=S?D:E-D;if(g.getDetectionResultColumn(C)===void 0){var k=void 0;C===0||C===E?k=new QA(u,C===0):k=new F3(u),g.setDetectionResultColumn(C,k);for(var V=-1,U=V,q=u.getMinY();q<=u.getMaxY();q++){if(V=n.getStartColumn(g,C,q,S),V<0||V>u.getMaxX()){if(U===-1)continue;V=U}var $=n.detectCodeword(e,u.getMinX(),u.getMaxX(),S,V,q,o,c);$!=null&&(k.setCodeword(q,$),U=V,o=Math.min(o,$.getWidth()),c=Math.max(c,$.getWidth()))}}}return n.createDecoderResult(g)},n.merge=function(e,t){if(e==null&&t==null)return null;var r=n.getBarcodeMetadata(e,t);if(r==null)return null;var i=_v.merge(n.adjustBoundingBox(e),n.adjustBoundingBox(t));return new lL(r,i)},n.adjustBoundingBox=function(e){var t,r;if(e==null)return null;var i=e.getRowHeights();if(i==null)return null;var a=n.getMax(i),o=0;try{for(var c=Zu(i),u=c.next();!u.done;u=c.next()){var d=u.value;if(o+=a-d,d>0)break}}catch(w){t={error:w}}finally{try{u&&!u.done&&(r=c.return)&&r.call(c)}finally{if(t)throw t.error}}for(var m=e.getCodewords(),g=0;o>0&&m[g]==null;g++)o--;for(var _=0,g=i.length-1;g>=0&&(_+=a-i[g],!(i[g]>0));g--);for(var g=m.length-1;_>0&&m[g]==null;g--)_--;return e.getBoundingBox().addMissingRows(o,_,e.isLeft())},n.getMax=function(e){var t,r,i=-1;try{for(var a=Zu(e),o=a.next();!o.done;o=a.next()){var c=o.value;i=Math.max(i,c)}}catch(u){t={error:u}}finally{try{o&&!o.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}return i},n.getBarcodeMetadata=function(e,t){var r;if(e==null||(r=e.getBarcodeMetadata())==null)return t==null?null:t.getBarcodeMetadata();var i;return t==null||(i=t.getBarcodeMetadata())==null?r:r.getColumnCount()!==i.getColumnCount()&&r.getErrorCorrectionLevel()!==i.getErrorCorrectionLevel()&&r.getRowCount()!==i.getRowCount()?null:r},n.getRowIndicatorColumn=function(e,t,r,i,a,o){for(var c=new QA(t,i),u=0;u<2;u++)for(var d=u===0?1:-1,m=Math.trunc(Math.trunc(r.getX())),g=Math.trunc(Math.trunc(r.getY()));g<=t.getMaxY()&&g>=t.getMinY();g+=d){var _=n.detectCodeword(e,0,e.getWidth(),i,m,g,a,o);_!=null&&(c.setCodeword(g,_),i?m=_.getStartX():m=_.getEndX())}return c},n.adjustCodewordCount=function(e,t){var r=t[0][1],i=r.getValue(),a=e.getBarcodeColumnCount()*e.getBarcodeRowCount()-n.getNumberOfECCodeWords(e.getBarcodeECLevel());if(i.length===0){if(a<1||a>gt.MAX_CODEWORDS_IN_BARCODE)throw oe.getNotFoundInstance();r.setValue(a)}else i[0]!==a&&r.setValue(a)},n.createDecoderResult=function(e){var t=n.createBarcodeMatrix(e);n.adjustCodewordCount(e,t);for(var r=new Array,i=new Int32Array(e.getBarcodeRowCount()*e.getBarcodeColumnCount()),a=[],o=new Array,c=0;c<e.getBarcodeRowCount();c++)for(var u=0;u<e.getBarcodeColumnCount();u++){var d=t[c][u+1].getValue(),m=c*e.getBarcodeColumnCount()+u;d.length===0?r.push(m):d.length===1?i[m]=d[0]:(o.push(m),a.push(d))}for(var g=new Array(a.length),_=0;_<g.length;_++)g[_]=a[_];return n.createDecoderResultFromAmbiguousValues(e.getBarcodeECLevel(),i,gt.toIntArray(r),gt.toIntArray(o),g)},n.createDecoderResultFromAmbiguousValues=function(e,t,r,i,a){for(var o=new Int32Array(i.length),c=100;c-- >0;){for(var u=0;u<o.length;u++)t[i[u]]=a[u][o[u]];try{return n.decodeCodewords(t,e,r)}catch(m){var d=m instanceof Tn;if(!d)throw m}if(o.length===0)throw Tn.getChecksumInstance();for(var u=0;u<o.length;u++)if(o[u]<a[u].length-1){o[u]++;break}else if(o[u]=0,u===o.length-1)throw Tn.getChecksumInstance()}throw Tn.getChecksumInstance()},n.createBarcodeMatrix=function(e){for(var t,r,i,a,o=Array.from({length:e.getBarcodeRowCount()},function(){return new Array(e.getBarcodeColumnCount()+2)}),c=0;c<o.length;c++)for(var u=0;u<o[c].length;u++)o[c][u]=new uf;var d=0;try{for(var m=Zu(e.getDetectionResultColumns()),g=m.next();!g.done;g=m.next()){var _=g.value;if(_!=null)try{for(var w=(i=void 0,Zu(_.getCodewords())),E=w.next();!E.done;E=w.next()){var S=E.value;if(S!=null){var D=S.getRowNumber();if(D>=0){if(D>=o.length)continue;o[D][d].setValue(S.getValue())}}}}catch(C){i={error:C}}finally{try{E&&!E.done&&(a=w.return)&&a.call(w)}finally{if(i)throw i.error}}d++}}catch(C){t={error:C}}finally{try{g&&!g.done&&(r=m.return)&&r.call(m)}finally{if(t)throw t.error}}return o},n.isValidBarcodeColumn=function(e,t){return t>=0&&t<=e.getBarcodeColumnCount()+1},n.getStartColumn=function(e,t,r,i){var a,o,c=i?1:-1,u=null;if(n.isValidBarcodeColumn(e,t-c)&&(u=e.getDetectionResultColumn(t-c).getCodeword(r)),u!=null)return i?u.getEndX():u.getStartX();if(u=e.getDetectionResultColumn(t).getCodewordNearby(r),u!=null)return i?u.getStartX():u.getEndX();if(n.isValidBarcodeColumn(e,t-c)&&(u=e.getDetectionResultColumn(t-c).getCodewordNearby(r)),u!=null)return i?u.getEndX():u.getStartX();for(var d=0;n.isValidBarcodeColumn(e,t-c);){t-=c;try{for(var m=(a=void 0,Zu(e.getDetectionResultColumn(t).getCodewords())),g=m.next();!g.done;g=m.next()){var _=g.value;if(_!=null)return(i?_.getEndX():_.getStartX())+c*d*(_.getEndX()-_.getStartX())}}catch(w){a={error:w}}finally{try{g&&!g.done&&(o=m.return)&&o.call(m)}finally{if(a)throw a.error}}d++}return i?e.getBoundingBox().getMinX():e.getBoundingBox().getMaxX()},n.detectCodeword=function(e,t,r,i,a,o,c,u){a=n.adjustCodewordStartColumn(e,t,r,i,a,o);var d=n.getModuleBitCount(e,t,r,i,a,o);if(d==null)return null;var m,g=wt.sum(d);if(i)m=a+g;else{for(var _=0;_<d.length/2;_++){var w=d[_];d[_]=d[d.length-1-_],d[d.length-1-_]=w}m=a,a=m-g}if(!n.checkCodewordSkew(g,c,u))return null;var E=uL.getDecodedValue(d),S=gt.getCodeword(E);return S===-1?null:new cL(a,m,n.getCodewordBucketNumber(E),S)},n.getModuleBitCount=function(e,t,r,i,a,o){for(var c=a,u=new Int32Array(8),d=0,m=i?1:-1,g=i;(i?c<r:c>=t)&&d<u.length;)e.get(c,o)===g?(u[d]++,c+=m):(d++,g=!g);return d===u.length||c===(i?r:t)&&d===u.length-1?u:null},n.getNumberOfECCodeWords=function(e){return 2<<e},n.adjustCodewordStartColumn=function(e,t,r,i,a,o){for(var c=a,u=i?-1:1,d=0;d<2;d++){for(;(i?c>=t:c<r)&&i===e.get(c,o);){if(Math.abs(a-c)>n.CODEWORD_SKEW_SIZE)return a;c+=u}u=-u,i=!i}return c},n.checkCodewordSkew=function(e,t,r){return t-n.CODEWORD_SKEW_SIZE<=e&&e<=r+n.CODEWORD_SKEW_SIZE},n.decodeCodewords=function(e,t,r){if(e.length===0)throw _e.getFormatInstance();var i=1<<t+1,a=n.correctErrors(e,r,i);n.verifyCodewordCount(e,i);var o=xL.decode(e,""+t);return o.setErrorsCorrected(a),o.setErasures(r.length),o},n.correctErrors=function(e,t,r){if(t!=null&&t.length>r/2+n.MAX_ERRORS||r<0||r>n.MAX_EC_CODEWORDS)throw Tn.getChecksumInstance();return n.errorCorrection.decode(e,r,t)},n.verifyCodewordCount=function(e,t){if(e.length<4)throw _e.getFormatInstance();var r=e[0];if(r>e.length)throw _e.getFormatInstance();if(r===0)if(t<e.length)e[0]=e.length-t;else throw _e.getFormatInstance()},n.getBitCountForCodeword=function(e){for(var t=new Int32Array(8),r=0,i=t.length-1;!((e&1)!==r&&(r=e&1,i--,i<0));)t[i]++,e>>=1;return t},n.getCodewordBucketNumber=function(e){return e instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(e):this.getCodewordBucketNumber_number(e)},n.getCodewordBucketNumber_number=function(e){return n.getCodewordBucketNumber(n.getBitCountForCodeword(e))},n.getCodewordBucketNumber_Int32Array=function(e){return(e[0]-e[2]+e[4]-e[6]+9)%9},n.toString=function(e){for(var t=new Qy,r=0;r<e.length;r++){t.format("Row %2d: ",r);for(var i=0;i<e[r].length;i++){var a=e[r][i];a.getValue().length===0?t.format("        ",null):t.format("%4d(%2d)",a.getValue()[0],a.getConfidence(a.getValue()[0]))}t.format("%n")}return t.toString()},n.CODEWORD_SKEW_SIZE=2,n.MAX_ERRORS=3,n.MAX_EC_CODEWORDS=512,n.errorCorrection=new tL,n})(),EL=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},L0=(function(){function n(){}return n.prototype.decode=function(e,t){t===void 0&&(t=null);var r=n.decode(e,t,!1);if(r==null||r.length===0||r[0]==null)throw oe.getNotFoundInstance();return r[0]},n.prototype.decodeMultiple=function(e,t){t===void 0&&(t=null);try{return n.decode(e,t,!0)}catch(r){throw r instanceof _e||r instanceof Tn?oe.getNotFoundInstance():r}},n.decode=function(e,t,r){var i,a,o=new Array,c=Kj.detectMultiple(e,t,r);try{for(var u=EL(c.getPoints()),d=u.next();!d.done;d=u.next()){var m=d.value,g=wL.decode(c.getBits(),m[4],m[5],m[6],m[7],n.getMinCodewordWidth(m),n.getMaxCodewordWidth(m)),_=new yr(g.getText(),g.getRawBytes(),void 0,m,Le.PDF_417);_.putMetadata(cr.ERROR_CORRECTION_LEVEL,g.getECLevel());var w=g.getOther();w!=null&&_.putMetadata(cr.PDF417_EXTRA_METADATA,w),o.push(_)}}catch(E){i={error:E}}finally{try{d&&!d.done&&(a=u.return)&&a.call(u)}finally{if(i)throw i.error}}return o.map(function(E){return E})},n.getMaxWidth=function(e,t){return e==null||t==null?0:Math.trunc(Math.abs(e.getX()-t.getX()))},n.getMinWidth=function(e,t){return e==null||t==null?it.MAX_VALUE:Math.trunc(Math.abs(e.getX()-t.getX()))},n.getMaxCodewordWidth=function(e){return Math.floor(Math.max(Math.max(n.getMaxWidth(e[0],e[4]),n.getMaxWidth(e[6],e[2])*gt.MODULES_IN_CODEWORD/gt.MODULES_IN_STOP_PATTERN),Math.max(n.getMaxWidth(e[1],e[5]),n.getMaxWidth(e[7],e[3])*gt.MODULES_IN_CODEWORD/gt.MODULES_IN_STOP_PATTERN)))},n.getMinCodewordWidth=function(e){return Math.floor(Math.min(Math.min(n.getMinWidth(e[0],e[4]),n.getMinWidth(e[6],e[2])*gt.MODULES_IN_CODEWORD/gt.MODULES_IN_STOP_PATTERN),Math.min(n.getMinWidth(e[1],e[5]),n.getMinWidth(e[7],e[3])*gt.MODULES_IN_CODEWORD/gt.MODULES_IN_STOP_PATTERN)))},n.prototype.reset=function(){},n})(),AL=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),JA=(function(n){AL(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="ReaderException",e})(Ur),eb=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},z3=(function(){function n(){}return n.prototype.decode=function(e,t){return this.setHints(t),this.decodeInternal(e)},n.prototype.decodeWithState=function(e){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(e)},n.prototype.setHints=function(e){this.hints=e;var t=e!=null&&e.get(qt.TRY_HARDER)!==void 0,r=e==null?null:e.get(qt.POSSIBLE_FORMATS),i=new Array;if(r!=null){var a=r.some(function(o){return o===Le.UPC_A||o===Le.UPC_E||o===Le.EAN_13||o===Le.EAN_8||o===Le.CODABAR||o===Le.CODE_39||o===Le.CODE_93||o===Le.CODE_128||o===Le.ITF||o===Le.RSS_14||o===Le.RSS_EXPANDED});a&&!t&&i.push(new hc(e)),r.includes(Le.QR_CODE)&&i.push(new j0),r.includes(Le.DATA_MATRIX)&&i.push(new k0),r.includes(Le.AZTEC)&&i.push(new M0),r.includes(Le.PDF_417)&&i.push(new L0),a&&t&&i.push(new hc(e))}i.length===0&&(t||i.push(new hc(e)),i.push(new j0),i.push(new k0),i.push(new M0),i.push(new L0),t&&i.push(new hc(e))),this.readers=i},n.prototype.reset=function(){var e,t;if(this.readers!==null)try{for(var r=eb(this.readers),i=r.next();!i.done;i=r.next()){var a=i.value;a.reset()}}catch(o){e={error:o}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}},n.prototype.decodeInternal=function(e){var t,r;if(this.readers===null)throw new JA("No readers where selected, nothing can be read.");try{for(var i=eb(this.readers),a=i.next();!a.done;a=i.next()){var o=a.value;try{return o.decode(e,this.hints)}catch(c){if(c instanceof JA)continue}}}catch(c){t={error:c}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}throw new oe("No MultiFormat Readers were able to detect the code.")},n})(),bL=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})();(function(n){bL(e,n);function e(t,r){t===void 0&&(t=null),r===void 0&&(r=500);var i=this,a=new z3;return a.setHints(t),i=n.call(this,a,r)||this,i}return e.prototype.decodeBitmap=function(t){return this.reader.decodeWithState(t)},e})($c);var SL=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})();(function(n){SL(e,n);function e(t){return t===void 0&&(t=500),n.call(this,new L0,t)||this}return e})($c);var CL=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})();(function(n){CL(e,n);function e(t){return t===void 0&&(t=500),n.call(this,new j0,t)||this}return e})($c);var xv;(function(n){n[n.ERROR_CORRECTION=0]="ERROR_CORRECTION",n[n.CHARACTER_SET=1]="CHARACTER_SET",n[n.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",n[n.DATA_MATRIX_COMPACT=3]="DATA_MATRIX_COMPACT",n[n.MIN_SIZE=4]="MIN_SIZE",n[n.MAX_SIZE=5]="MAX_SIZE",n[n.MARGIN=6]="MARGIN",n[n.PDF417_COMPACT=7]="PDF417_COMPACT",n[n.PDF417_COMPACTION=8]="PDF417_COMPACTION",n[n.PDF417_DIMENSIONS=9]="PDF417_DIMENSIONS",n[n.AZTEC_LAYERS=10]="AZTEC_LAYERS",n[n.QR_VERSION=11]="QR_VERSION",n[n.GS1_FORMAT=12]="GS1_FORMAT",n[n.FORCE_C40=13]="FORCE_C40"})(xv||(xv={}));const Vh=xv;var H3=(function(){function n(e){this.field=e,this.cachedGenerators=[],this.cachedGenerators.push(new no(e,Int32Array.from([1])))}return n.prototype.buildGenerator=function(e){var t=this.cachedGenerators;if(e>=t.length)for(var r=t[t.length-1],i=this.field,a=t.length;a<=e;a++){var o=r.multiply(new no(i,Int32Array.from([1,i.exp(a-1+i.getGeneratorBase())])));t.push(o),r=o}return t[e]},n.prototype.encode=function(e,t){if(t===0)throw new Be("No error correction bytes");var r=e.length-t;if(r<=0)throw new Be("No data bytes provided");var i=this.buildGenerator(t),a=new Int32Array(r);Gt.arraycopy(e,0,a,0,r);var o=new no(this.field,a);o=o.multiplyByMonomial(t,1);for(var c=o.divide(i)[1],u=c.getCoefficients(),d=t-u.length,m=0;m<d;m++)e[r+m]=0;Gt.arraycopy(u,0,e,r+d,u.length)},n})(),ff=(function(){function n(){}return n.applyMaskPenaltyRule1=function(e){return n.applyMaskPenaltyRule1Internal(e,!0)+n.applyMaskPenaltyRule1Internal(e,!1)},n.applyMaskPenaltyRule2=function(e){for(var t=0,r=e.getArray(),i=e.getWidth(),a=e.getHeight(),o=0;o<a-1;o++)for(var c=r[o],u=0;u<i-1;u++){var d=c[u];d===c[u+1]&&d===r[o+1][u]&&d===r[o+1][u+1]&&t++}return n.N2*t},n.applyMaskPenaltyRule3=function(e){for(var t=0,r=e.getArray(),i=e.getWidth(),a=e.getHeight(),o=0;o<a;o++)for(var c=0;c<i;c++){var u=r[o];c+6<i&&u[c]===1&&u[c+1]===0&&u[c+2]===1&&u[c+3]===1&&u[c+4]===1&&u[c+5]===0&&u[c+6]===1&&(n.isWhiteHorizontal(u,c-4,c)||n.isWhiteHorizontal(u,c+7,c+11))&&t++,o+6<a&&r[o][c]===1&&r[o+1][c]===0&&r[o+2][c]===1&&r[o+3][c]===1&&r[o+4][c]===1&&r[o+5][c]===0&&r[o+6][c]===1&&(n.isWhiteVertical(r,c,o-4,o)||n.isWhiteVertical(r,c,o+7,o+11))&&t++}return t*n.N3},n.isWhiteHorizontal=function(e,t,r){t=Math.max(t,0),r=Math.min(r,e.length);for(var i=t;i<r;i++)if(e[i]===1)return!1;return!0},n.isWhiteVertical=function(e,t,r,i){r=Math.max(r,0),i=Math.min(i,e.length);for(var a=r;a<i;a++)if(e[a][t]===1)return!1;return!0},n.applyMaskPenaltyRule4=function(e){for(var t=0,r=e.getArray(),i=e.getWidth(),a=e.getHeight(),o=0;o<a;o++)for(var c=r[o],u=0;u<i;u++)c[u]===1&&t++;var d=e.getHeight()*e.getWidth(),m=Math.floor(Math.abs(t*2-d)*10/d);return m*n.N4},n.getDataMaskBit=function(e,t,r){var i,a;switch(e){case 0:i=r+t&1;break;case 1:i=r&1;break;case 2:i=t%3;break;case 3:i=(r+t)%3;break;case 4:i=Math.floor(r/2)+Math.floor(t/3)&1;break;case 5:a=r*t,i=(a&1)+a%3;break;case 6:a=r*t,i=(a&1)+a%3&1;break;case 7:a=r*t,i=a%3+(r+t&1)&1;break;default:throw new Be("Invalid mask pattern: "+e)}return i===0},n.applyMaskPenaltyRule1Internal=function(e,t){for(var r=0,i=t?e.getHeight():e.getWidth(),a=t?e.getWidth():e.getHeight(),o=e.getArray(),c=0;c<i;c++){for(var u=0,d=-1,m=0;m<a;m++){var g=t?o[c][m]:o[m][c];g===d?u++:(u>=5&&(r+=n.N1+(u-5)),u=1,d=g)}u>=5&&(r+=n.N1+(u-5))}return r},n.N1=3,n.N2=3,n.N3=40,n.N4=10,n})(),TL=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},IL=(function(){function n(e,t){this.width=e,this.height=t;for(var r=new Array(t),i=0;i!==t;i++)r[i]=new Uint8Array(e);this.bytes=r}return n.prototype.getHeight=function(){return this.height},n.prototype.getWidth=function(){return this.width},n.prototype.get=function(e,t){return this.bytes[t][e]},n.prototype.getArray=function(){return this.bytes},n.prototype.setNumber=function(e,t,r){this.bytes[t][e]=r},n.prototype.setBoolean=function(e,t,r){this.bytes[t][e]=r?1:0},n.prototype.clear=function(e){var t,r;try{for(var i=TL(this.bytes),a=i.next();!a.done;a=i.next()){var o=a.value;Pn.fill(o,e)}}catch(c){t={error:c}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;if(this.width!==t.width||this.height!==t.height)return!1;for(var r=0,i=this.height;r<i;++r)for(var a=this.bytes[r],o=t.bytes[r],c=0,u=this.width;c<u;++c)if(a[c]!==o[c])return!1;return!0},n.prototype.toString=function(){for(var e=new rt,t=0,r=this.height;t<r;++t){for(var i=this.bytes[t],a=0,o=this.width;a<o;++a)switch(i[a]){case 0:e.append(" 0");break;case 1:e.append(" 1");break;default:e.append("  ");break}e.append(`
`)}return e.toString()},n})(),wv=(function(){function n(){this.maskPattern=-1}return n.prototype.getMode=function(){return this.mode},n.prototype.getECLevel=function(){return this.ecLevel},n.prototype.getVersion=function(){return this.version},n.prototype.getMaskPattern=function(){return this.maskPattern},n.prototype.getMatrix=function(){return this.matrix},n.prototype.toString=function(){var e=new rt;return e.append(`<<
`),e.append(" mode: "),e.append(this.mode?this.mode.toString():"null"),e.append(`
 ecLevel: `),e.append(this.ecLevel?this.ecLevel.toString():"null"),e.append(`
 version: `),e.append(this.version?this.version.toString():"null"),e.append(`
 maskPattern: `),e.append(this.maskPattern.toString()),this.matrix?(e.append(`
 matrix:
`),e.append(this.matrix.toString())):e.append(`
 matrix: null
`),e.append(`>>
`),e.toString()},n.prototype.setMode=function(e){this.mode=e},n.prototype.setECLevel=function(e){this.ecLevel=e},n.prototype.setVersion=function(e){this.version=e},n.prototype.setMaskPattern=function(e){this.maskPattern=e},n.prototype.setMatrix=function(e){this.matrix=e},n.isValidMaskPattern=function(e){return e>=0&&e<n.NUM_MASK_PATTERNS},n.NUM_MASK_PATTERNS=8,n})(),NL=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Wt=(function(n){NL(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="WriterException",e})(Ur),tb=(function(){function n(){}return n.clearMatrix=function(e){e.clear(255)},n.buildMatrix=function(e,t,r,i,a){n.clearMatrix(a),n.embedBasicPatterns(r,a),n.embedTypeInfo(t,i,a),n.maybeEmbedVersionInfo(r,a),n.embedDataBits(e,i,a)},n.embedBasicPatterns=function(e,t){n.embedPositionDetectionPatternsAndSeparators(t),n.embedDarkDotAtLeftBottomCorner(t),n.maybeEmbedPositionAdjustmentPatterns(e,t),n.embedTimingPatterns(t)},n.embedTypeInfo=function(e,t,r){var i=new Kn;n.makeTypeInfoBits(e,t,i);for(var a=0,o=i.getSize();a<o;++a){var c=i.get(i.getSize()-1-a),u=n.TYPE_INFO_COORDINATES[a],d=u[0],m=u[1];if(r.setBoolean(d,m,c),a<8){var g=r.getWidth()-a-1,_=8;r.setBoolean(g,_,c)}else{var g=8,_=r.getHeight()-7+(a-8);r.setBoolean(g,_,c)}}},n.maybeEmbedVersionInfo=function(e,t){if(!(e.getVersionNumber()<7)){var r=new Kn;n.makeVersionInfoBits(e,r);for(var i=17,a=0;a<6;++a)for(var o=0;o<3;++o){var c=r.get(i);i--,t.setBoolean(a,t.getHeight()-11+o,c),t.setBoolean(t.getHeight()-11+o,a,c)}}},n.embedDataBits=function(e,t,r){for(var i=0,a=-1,o=r.getWidth()-1,c=r.getHeight()-1;o>0;){for(o===6&&(o-=1);c>=0&&c<r.getHeight();){for(var u=0;u<2;++u){var d=o-u;if(n.isEmpty(r.get(d,c))){var m=void 0;i<e.getSize()?(m=e.get(i),++i):m=!1,t!==255&&ff.getDataMaskBit(t,d,c)&&(m=!m),r.setBoolean(d,c,m)}}c+=a}a=-a,c+=a,o-=2}if(i!==e.getSize())throw new Wt("Not all bits consumed: "+i+"/"+e.getSize())},n.findMSBSet=function(e){return 32-it.numberOfLeadingZeros(e)},n.calculateBCHCode=function(e,t){if(t===0)throw new Be("0 polynomial");var r=n.findMSBSet(t);for(e<<=r-1;n.findMSBSet(e)>=r;)e^=t<<n.findMSBSet(e)-r;return e},n.makeTypeInfoBits=function(e,t,r){if(!wv.isValidMaskPattern(t))throw new Wt("Invalid mask pattern");var i=e.getBits()<<3|t;r.appendBits(i,5);var a=n.calculateBCHCode(i,n.TYPE_INFO_POLY);r.appendBits(a,10);var o=new Kn;if(o.appendBits(n.TYPE_INFO_MASK_PATTERN,15),r.xor(o),r.getSize()!==15)throw new Wt("should not happen but we got: "+r.getSize())},n.makeVersionInfoBits=function(e,t){t.appendBits(e.getVersionNumber(),6);var r=n.calculateBCHCode(e.getVersionNumber(),n.VERSION_INFO_POLY);if(t.appendBits(r,12),t.getSize()!==18)throw new Wt("should not happen but we got: "+t.getSize())},n.isEmpty=function(e){return e===255},n.embedTimingPatterns=function(e){for(var t=8;t<e.getWidth()-8;++t){var r=(t+1)%2;n.isEmpty(e.get(t,6))&&e.setNumber(t,6,r),n.isEmpty(e.get(6,t))&&e.setNumber(6,t,r)}},n.embedDarkDotAtLeftBottomCorner=function(e){if(e.get(8,e.getHeight()-8)===0)throw new Wt;e.setNumber(8,e.getHeight()-8,1)},n.embedHorizontalSeparationPattern=function(e,t,r){for(var i=0;i<8;++i){if(!n.isEmpty(r.get(e+i,t)))throw new Wt;r.setNumber(e+i,t,0)}},n.embedVerticalSeparationPattern=function(e,t,r){for(var i=0;i<7;++i){if(!n.isEmpty(r.get(e,t+i)))throw new Wt;r.setNumber(e,t+i,0)}},n.embedPositionAdjustmentPattern=function(e,t,r){for(var i=0;i<5;++i)for(var a=n.POSITION_ADJUSTMENT_PATTERN[i],o=0;o<5;++o)r.setNumber(e+o,t+i,a[o])},n.embedPositionDetectionPattern=function(e,t,r){for(var i=0;i<7;++i)for(var a=n.POSITION_DETECTION_PATTERN[i],o=0;o<7;++o)r.setNumber(e+o,t+i,a[o])},n.embedPositionDetectionPatternsAndSeparators=function(e){var t=n.POSITION_DETECTION_PATTERN[0].length;n.embedPositionDetectionPattern(0,0,e),n.embedPositionDetectionPattern(e.getWidth()-t,0,e),n.embedPositionDetectionPattern(0,e.getWidth()-t,e);var r=8;n.embedHorizontalSeparationPattern(0,r-1,e),n.embedHorizontalSeparationPattern(e.getWidth()-r,r-1,e),n.embedHorizontalSeparationPattern(0,e.getWidth()-r,e);var i=7;n.embedVerticalSeparationPattern(i,0,e),n.embedVerticalSeparationPattern(e.getHeight()-i-1,0,e),n.embedVerticalSeparationPattern(i,e.getHeight()-i,e)},n.maybeEmbedPositionAdjustmentPatterns=function(e,t){if(!(e.getVersionNumber()<2))for(var r=e.getVersionNumber()-1,i=n.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[r],a=0,o=i.length;a!==o;a++){var c=i[a];if(c>=0)for(var u=0;u!==o;u++){var d=i[u];d>=0&&n.isEmpty(t.get(d,c))&&n.embedPositionAdjustmentPattern(d-2,c-2,t)}}},n.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),n.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),n.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),n.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),n.VERSION_INFO_POLY=7973,n.TYPE_INFO_POLY=1335,n.TYPE_INFO_MASK_PATTERN=21522,n})(),RL=(function(){function n(e,t){this.dataBytes=e,this.errorCorrectionBytes=t}return n.prototype.getDataBytes=function(){return this.dataBytes},n.prototype.getErrorCorrectionBytes=function(){return this.errorCorrectionBytes},n})(),nb=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};(function(){function n(){}return n.calculateMaskPenalty=function(e){return ff.applyMaskPenaltyRule1(e)+ff.applyMaskPenaltyRule2(e)+ff.applyMaskPenaltyRule3(e)+ff.applyMaskPenaltyRule4(e)},n.encode=function(e,t,r){r===void 0&&(r=null);var i=n.DEFAULT_BYTE_MODE_ENCODING,a=r!==null&&r.get(Vh.CHARACTER_SET)!==void 0;a&&(i=r.get(Vh.CHARACTER_SET).toString());var o=this.chooseMode(e,i),c=new Kn;if(o===Zt.BYTE&&(a||n.DEFAULT_BYTE_MODE_ENCODING!==i)){var u=Mn.getCharacterSetECIByName(i);u!==void 0&&this.appendECI(u,c)}this.appendModeInfo(o,c);var d=new Kn;this.appendBytes(e,o,d,i);var m;if(r!==null&&r.get(Vh.QR_VERSION)!==void 0){var g=Number.parseInt(r.get(Vh.QR_VERSION).toString(),10);m=tl.getVersionForNumber(g);var _=this.calculateBitsNeeded(o,c,d,m);if(!this.willFit(_,m,t))throw new Wt("Data too big for requested version")}else m=this.recommendVersion(t,o,c,d);var w=new Kn;w.appendBitArray(c);var E=o===Zt.BYTE?d.getSizeInBytes():e.length;this.appendLengthInfo(E,m,o,w),w.appendBitArray(d);var S=m.getECBlocksForLevel(t),D=m.getTotalCodewords()-S.getTotalECCodewords();this.terminateBits(D,w);var C=this.interleaveWithECBytes(w,m.getTotalCodewords(),D,S.getNumBlocks()),k=new wv;k.setECLevel(t),k.setMode(o),k.setVersion(m);var V=m.getDimensionForVersion(),U=new IL(V,V),q=this.chooseMaskPattern(C,t,m,U);return k.setMaskPattern(q),tb.buildMatrix(C,t,m,q,U),k.setMatrix(U),k},n.recommendVersion=function(e,t,r,i){var a=this.calculateBitsNeeded(t,r,i,tl.getVersionForNumber(1)),o=this.chooseVersion(a,e),c=this.calculateBitsNeeded(t,r,i,o);return this.chooseVersion(c,e)},n.calculateBitsNeeded=function(e,t,r,i){return t.getSize()+e.getCharacterCountBits(i)+r.getSize()},n.getAlphanumericCode=function(e){return e<n.ALPHANUMERIC_TABLE.length?n.ALPHANUMERIC_TABLE[e]:-1},n.chooseMode=function(e,t){if(t===void 0&&(t=null),Mn.SJIS.getName()===t&&this.isOnlyDoubleByteKanji(e))return Zt.KANJI;for(var r=!1,i=!1,a=0,o=e.length;a<o;++a){var c=e.charAt(a);if(n.isDigit(c))r=!0;else if(this.getAlphanumericCode(c.charCodeAt(0))!==-1)i=!0;else return Zt.BYTE}return i?Zt.ALPHANUMERIC:r?Zt.NUMERIC:Zt.BYTE},n.isOnlyDoubleByteKanji=function(e){var t;try{t=wi.encode(e,Mn.SJIS)}catch{return!1}var r=t.length;if(r%2!==0)return!1;for(var i=0;i<r;i+=2){var a=t[i]&255;if((a<129||a>159)&&(a<224||a>235))return!1}return!0},n.chooseMaskPattern=function(e,t,r,i){for(var a=Number.MAX_SAFE_INTEGER,o=-1,c=0;c<wv.NUM_MASK_PATTERNS;c++){tb.buildMatrix(e,t,r,c,i);var u=this.calculateMaskPenalty(i);u<a&&(a=u,o=c)}return o},n.chooseVersion=function(e,t){for(var r=1;r<=40;r++){var i=tl.getVersionForNumber(r);if(n.willFit(e,i,t))return i}throw new Wt("Data too big")},n.willFit=function(e,t,r){var i=t.getTotalCodewords(),a=t.getECBlocksForLevel(r),o=a.getTotalECCodewords(),c=i-o,u=(e+7)/8;return c>=u},n.terminateBits=function(e,t){var r=e*8;if(t.getSize()>r)throw new Wt("data bits cannot fit in the QR Code"+t.getSize()+" > "+r);for(var i=0;i<4&&t.getSize()<r;++i)t.appendBit(!1);var a=t.getSize()&7;if(a>0)for(var i=a;i<8;i++)t.appendBit(!1);for(var o=e-t.getSizeInBytes(),i=0;i<o;++i)t.appendBits((i&1)===0?236:17,8);if(t.getSize()!==r)throw new Wt("Bits size does not equal capacity")},n.getNumDataBytesAndNumECBytesForBlockID=function(e,t,r,i,a,o){if(i>=r)throw new Wt("Block ID too large");var c=e%r,u=r-c,d=Math.floor(e/r),m=d+1,g=Math.floor(t/r),_=g+1,w=d-g,E=m-_;if(w!==E)throw new Wt("EC bytes mismatch");if(r!==u+c)throw new Wt("RS blocks mismatch");if(e!==(g+w)*u+(_+E)*c)throw new Wt("Total bytes mismatch");i<u?(a[0]=g,o[0]=w):(a[0]=_,o[0]=E)},n.interleaveWithECBytes=function(e,t,r,i){var a,o,c,u;if(e.getSizeInBytes()!==r)throw new Wt("Number of bits and data bytes does not match");for(var d=0,m=0,g=0,_=new Array,w=0;w<i;++w){var E=new Int32Array(1),S=new Int32Array(1);n.getNumDataBytesAndNumECBytesForBlockID(t,r,i,w,E,S);var D=E[0],C=new Uint8Array(D);e.toBytes(8*d,C,0,D);var k=n.generateECBytes(C,S[0]);_.push(new RL(C,k)),m=Math.max(m,D),g=Math.max(g,k.length),d+=E[0]}if(r!==d)throw new Wt("Data bytes does not match offset");for(var V=new Kn,w=0;w<m;++w)try{for(var U=(a=void 0,nb(_)),q=U.next();!q.done;q=U.next()){var $=q.value,C=$.getDataBytes();w<C.length&&V.appendBits(C[w],8)}}catch(I){a={error:I}}finally{try{q&&!q.done&&(o=U.return)&&o.call(U)}finally{if(a)throw a.error}}for(var w=0;w<g;++w)try{for(var M=(c=void 0,nb(_)),b=M.next();!b.done;b=M.next()){var $=b.value,k=$.getErrorCorrectionBytes();w<k.length&&V.appendBits(k[w],8)}}catch(I){c={error:I}}finally{try{b&&!b.done&&(u=M.return)&&u.call(M)}finally{if(c)throw c.error}}if(t!==V.getSizeInBytes())throw new Wt("Interleaving error: "+t+" and "+V.getSizeInBytes()+" differ.");return V},n.generateECBytes=function(e,t){for(var r=e.length,i=new Int32Array(r+t),a=0;a<r;a++)i[a]=e[a]&255;new H3(Br.QR_CODE_FIELD_256).encode(i,t);for(var o=new Uint8Array(t),a=0;a<t;a++)o[a]=i[r+a];return o},n.appendModeInfo=function(e,t){t.appendBits(e.getBits(),4)},n.appendLengthInfo=function(e,t,r,i){var a=r.getCharacterCountBits(t);if(e>=1<<a)throw new Wt(e+" is bigger than "+((1<<a)-1));i.appendBits(e,a)},n.appendBytes=function(e,t,r,i){switch(t){case Zt.NUMERIC:n.appendNumericBytes(e,r);break;case Zt.ALPHANUMERIC:n.appendAlphanumericBytes(e,r);break;case Zt.BYTE:n.append8BitBytes(e,r,i);break;case Zt.KANJI:n.appendKanjiBytes(e,r);break;default:throw new Wt("Invalid mode: "+t)}},n.getDigit=function(e){return e.charCodeAt(0)-48},n.isDigit=function(e){var t=n.getDigit(e);return t>=0&&t<=9},n.appendNumericBytes=function(e,t){for(var r=e.length,i=0;i<r;){var a=n.getDigit(e.charAt(i));if(i+2<r){var o=n.getDigit(e.charAt(i+1)),c=n.getDigit(e.charAt(i+2));t.appendBits(a*100+o*10+c,10),i+=3}else if(i+1<r){var o=n.getDigit(e.charAt(i+1));t.appendBits(a*10+o,7),i+=2}else t.appendBits(a,4),i++}},n.appendAlphanumericBytes=function(e,t){for(var r=e.length,i=0;i<r;){var a=n.getAlphanumericCode(e.charCodeAt(i));if(a===-1)throw new Wt;if(i+1<r){var o=n.getAlphanumericCode(e.charCodeAt(i+1));if(o===-1)throw new Wt;t.appendBits(a*45+o,11),i+=2}else t.appendBits(a,6),i++}},n.append8BitBytes=function(e,t,r){var i;try{i=wi.encode(e,r)}catch(u){throw new Wt(u)}for(var a=0,o=i.length;a!==o;a++){var c=i[a];t.appendBits(c,8)}},n.appendKanjiBytes=function(e,t){var r;try{r=wi.encode(e,Mn.SJIS)}catch(g){throw new Wt(g)}for(var i=r.length,a=0;a<i;a+=2){var o=r[a]&255,c=r[a+1]&255,u=o<<8&4294967295|c,d=-1;if(u>=33088&&u<=40956?d=u-33088:u>=57408&&u<=60351&&(d=u-49472),d===-1)throw new Wt("Invalid byte sequence");var m=(d>>8)*192+(d&255);t.appendBits(m,13)}},n.appendECI=function(e,t){t.appendBits(Zt.ECI.getBits(),4),t.appendBits(e.getValue(),8)},n.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),n.DEFAULT_BYTE_MODE_ENCODING=Mn.UTF8.getName(),n})();var OL=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})();(function(n){OL(e,n);function e(t,r,i,a,o,c,u,d){var m=n.call(this,c,u)||this;if(m.yuvData=t,m.dataWidth=r,m.dataHeight=i,m.left=a,m.top=o,a+c>r||o+u>i)throw new Be("Crop rectangle does not fit within image data.");return d&&m.reverseHorizontal(c,u),m}return e.prototype.getRow=function(t,r){if(t<0||t>=this.getHeight())throw new Be("Requested row is outside the image: "+t);var i=this.getWidth();(r==null||r.length<i)&&(r=new Uint8ClampedArray(i));var a=(t+this.top)*this.dataWidth+this.left;return Gt.arraycopy(this.yuvData,a,r,0,i),r},e.prototype.getMatrix=function(){var t=this.getWidth(),r=this.getHeight();if(t===this.dataWidth&&r===this.dataHeight)return this.yuvData;var i=t*r,a=new Uint8ClampedArray(i),o=this.top*this.dataWidth+this.left;if(t===this.dataWidth)return Gt.arraycopy(this.yuvData,o,a,0,i),a;for(var c=0;c<r;c++){var u=c*t;Gt.arraycopy(this.yuvData,o,a,u,t),o+=this.dataWidth}return a},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(t,r,i,a){return new e(this.yuvData,this.dataWidth,this.dataHeight,this.left+t,this.top+r,i,a,!1)},e.prototype.renderThumbnail=function(){for(var t=this.getWidth()/e.THUMBNAIL_SCALE_FACTOR,r=this.getHeight()/e.THUMBNAIL_SCALE_FACTOR,i=new Int32Array(t*r),a=this.yuvData,o=this.top*this.dataWidth+this.left,c=0;c<r;c++){for(var u=c*t,d=0;d<t;d++){var m=a[o+d*e.THUMBNAIL_SCALE_FACTOR]&255;i[u+d]=4278190080|m*65793}o+=this.dataWidth*e.THUMBNAIL_SCALE_FACTOR}return i},e.prototype.getThumbnailWidth=function(){return this.getWidth()/e.THUMBNAIL_SCALE_FACTOR},e.prototype.getThumbnailHeight=function(){return this.getHeight()/e.THUMBNAIL_SCALE_FACTOR},e.prototype.reverseHorizontal=function(t,r){for(var i=this.yuvData,a=0,o=this.top*this.dataWidth+this.left;a<r;a++,o+=this.dataWidth)for(var c=o+t/2,u=o,d=o+t-1;u<c;u++,d--){var m=i[u];i[u]=i[d],i[d]=m}},e.prototype.invert=function(){return new Ep(this)},e.THUMBNAIL_SCALE_FACTOR=2,e})(ed);var DL=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})();(function(n){DL(e,n);function e(t,r,i,a,o,c,u){var d=n.call(this,r,i)||this;if(d.dataWidth=a,d.dataHeight=o,d.left=c,d.top=u,t.BYTES_PER_ELEMENT===4){for(var m=r*i,g=new Uint8ClampedArray(m),_=0;_<m;_++){var w=t[_],E=w>>16&255,S=w>>7&510,D=w&255;g[_]=(E+S+D)/4&255}d.luminances=g}else d.luminances=t;if(a===void 0&&(d.dataWidth=r),o===void 0&&(d.dataHeight=i),c===void 0&&(d.left=0),u===void 0&&(d.top=0),d.left+r>d.dataWidth||d.top+i>d.dataHeight)throw new Be("Crop rectangle does not fit within image data.");return d}return e.prototype.getRow=function(t,r){if(t<0||t>=this.getHeight())throw new Be("Requested row is outside the image: "+t);var i=this.getWidth();(r==null||r.length<i)&&(r=new Uint8ClampedArray(i));var a=(t+this.top)*this.dataWidth+this.left;return Gt.arraycopy(this.luminances,a,r,0,i),r},e.prototype.getMatrix=function(){var t=this.getWidth(),r=this.getHeight();if(t===this.dataWidth&&r===this.dataHeight)return this.luminances;var i=t*r,a=new Uint8ClampedArray(i),o=this.top*this.dataWidth+this.left;if(t===this.dataWidth)return Gt.arraycopy(this.luminances,o,a,0,i),a;for(var c=0;c<r;c++){var u=c*t;Gt.arraycopy(this.luminances,o,a,u,t),o+=this.dataWidth}return a},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(t,r,i,a){return new e(this.luminances,i,a,this.dataWidth,this.dataHeight,this.left+t,this.top+r)},e.prototype.invert=function(){return new Ep(this)},e})(ed);var ML=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),PL=(function(n){ML(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.forName=function(t){return this.getCharacterSetECIByName(t)},e})(Mn),kL=(function(){function n(){}return n.ISO_8859_1=Mn.ISO8859_1,n})(),Ev,jL=301,LL=function(n,e){for(var t=1,r=0;r<255;r++)e[r]=t,n[t]=r,t*=2,t>=256&&(t^=jL);return{LOG:n,ALOG:e}};Ev=LL([],[]),Ev.LOG;Ev.ALOG;var rb;(function(n){n[n.FORCE_NONE=0]="FORCE_NONE",n[n.FORCE_SQUARE=1]="FORCE_SQUARE",n[n.FORCE_RECTANGLE=2]="FORCE_RECTANGLE"})(rb||(rb={}));var ib=129,G3=230,BL=231,VL=235,FL=236,UL=237,zL=238,HL=239,GL=240,J1=254,qL=254,ab="[)>05",sb="[)>06",ob="",Mt=0,ar=1,Sr=2,On=3,Gn=4,mr=5,$L=(function(){function n(){}return n.prototype.getEncodingMode=function(){return Mt},n.prototype.encode=function(e){var t=Bi.determineConsecutiveDigitCount(e.getMessage(),e.pos);if(t>=2)e.writeCodeword(this.encodeASCIIDigits(e.getMessage().charCodeAt(e.pos),e.getMessage().charCodeAt(e.pos+1))),e.pos+=2;else{var r=e.getCurrentChar(),i=Bi.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(i!==this.getEncodingMode())switch(i){case mr:e.writeCodeword(BL),e.signalEncoderChange(mr);return;case ar:e.writeCodeword(G3),e.signalEncoderChange(ar);return;case On:e.writeCodeword(zL),e.signalEncoderChange(On);break;case Sr:e.writeCodeword(HL),e.signalEncoderChange(Sr);break;case Gn:e.writeCodeword(GL),e.signalEncoderChange(Gn);break;default:throw new Error("Illegal mode: "+i)}else Bi.isExtendedASCII(r)?(e.writeCodeword(VL),e.writeCodeword(r-128+1),e.pos++):(e.writeCodeword(r+1),e.pos++)}},n.prototype.encodeASCIIDigits=function(e,t){if(Bi.isDigit(e)&&Bi.isDigit(t)){var r=(e-48)*10+(t-48);return r+130}throw new Error("not digits: "+e+t)},n})(),XL=(function(){function n(){}return n.prototype.getEncodingMode=function(){return mr},n.prototype.encode=function(e){var t=new rt;for(t.append(0);e.hasMoreCharacters();){var r=e.getCurrentChar();t.append(r),e.pos++;var i=Bi.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(i!==this.getEncodingMode()){e.signalEncoderChange(Mt);break}}var a=t.length()-1,o=1,c=e.getCodewordCount()+a+o;e.updateSymbolInfo(c);var u=e.getSymbolInfo().getDataCapacity()-c>0;if(e.hasMoreCharacters()||u)if(a<=249)t.setCharAt(0,pt.getCharAt(a));else if(a<=1555)t.setCharAt(0,pt.getCharAt(Math.floor(a/250)+249)),t.insert(1,pt.getCharAt(a%250));else throw new Error("Message length not in valid ranges: "+a);for(var d=0,r=t.length();d<r;d++)e.writeCodeword(this.randomize255State(t.charAt(d).charCodeAt(0),e.getCodewordCount()+1))},n.prototype.randomize255State=function(e,t){var r=149*t%255+1,i=e+r;return i<=255?i:i-256},n})(),Zy=(function(){function n(){}return n.prototype.getEncodingMode=function(){return ar},n.prototype.encodeMaximal=function(e){for(var t=new rt,r=0,i=e.pos,a=0;e.hasMoreCharacters();){var o=e.getCurrentChar();e.pos++,r=this.encodeChar(o,t),t.length()%3===0&&(i=e.pos,a=t.length())}if(a!==t.length()){var c=Math.floor(t.length()/3*2),u=Math.floor(e.getCodewordCount()+c+1);e.updateSymbolInfo(u);var d=e.getSymbolInfo().getDataCapacity()-u,m=Math.floor(t.length()%3);(m===2&&d!==2||m===1&&(r>3||d!==1))&&(e.pos=i)}t.length()>0&&e.writeCodeword(G3),this.handleEOD(e,t)},n.prototype.encode=function(e){for(var t=new rt;e.hasMoreCharacters();){var r=e.getCurrentChar();e.pos++;var i=this.encodeChar(r,t),a=Math.floor(t.length()/3)*2,o=e.getCodewordCount()+a;e.updateSymbolInfo(o);var c=e.getSymbolInfo().getDataCapacity()-o;if(!e.hasMoreCharacters()){var u=new rt;for(t.length()%3===2&&c!==2&&(i=this.backtrackOneCharacter(e,t,u,i));t.length()%3===1&&(i>3||c!==1);)i=this.backtrackOneCharacter(e,t,u,i);break}var d=t.length();if(d%3===0){var m=Bi.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(m!==this.getEncodingMode()){e.signalEncoderChange(Mt);break}}}this.handleEOD(e,t)},n.prototype.backtrackOneCharacter=function(e,t,r,i){var a=t.length(),o=t.toString().substring(0,a-i);t.setLengthToZero(),t.append(o),e.pos--;var c=e.getCurrentChar();return i=this.encodeChar(c,r),e.resetSymbolInfo(),i},n.prototype.writeNextTriplet=function(e,t){e.writeCodewords(this.encodeToCodewords(t.toString()));var r=t.toString().substring(3);t.setLengthToZero(),t.append(r)},n.prototype.handleEOD=function(e,t){var r=Math.floor(t.length()/3*2),i=t.length()%3,a=e.getCodewordCount()+r;e.updateSymbolInfo(a);var o=e.getSymbolInfo().getDataCapacity()-a;if(i===2){for(t.append("\0");t.length()>=3;)this.writeNextTriplet(e,t);e.hasMoreCharacters()&&e.writeCodeword(J1)}else if(o===1&&i===1){for(;t.length()>=3;)this.writeNextTriplet(e,t);e.hasMoreCharacters()&&e.writeCodeword(J1),e.pos--}else if(i===0){for(;t.length()>=3;)this.writeNextTriplet(e,t);(o>0||e.hasMoreCharacters())&&e.writeCodeword(J1)}else throw new Error("Unexpected case. Please report!");e.signalEncoderChange(Mt)},n.prototype.encodeChar=function(e,t){if(e===32)return t.append(3),1;if(e>=48&&e<=57)return t.append(e-48+4),1;if(e>=65&&e<=90)return t.append(e-65+14),1;if(e<32)return t.append(0),t.append(e),2;if(e<=47)return t.append(1),t.append(e-33),2;if(e<=64)return t.append(1),t.append(e-58+15),2;if(e<=95)return t.append(1),t.append(e-91+22),2;if(e<=127)return t.append(2),t.append(e-96),2;t.append("1");var r=2;return r+=this.encodeChar(e-128,t),r},n.prototype.encodeToCodewords=function(e){var t=1600*e.charCodeAt(0)+40*e.charCodeAt(1)+e.charCodeAt(2)+1,r=t/256,i=t%256,a=new rt;return a.append(r),a.append(i),a.toString()},n})(),YL=(function(){function n(){}return n.prototype.getEncodingMode=function(){return Gn},n.prototype.encode=function(e){for(var t=new rt;e.hasMoreCharacters();){var r=e.getCurrentChar();this.encodeChar(r,t),e.pos++;var i=t.length();if(i>=4){e.writeCodewords(this.encodeToCodewords(t.toString()));var a=t.toString().substring(4);t.setLengthToZero(),t.append(a);var o=Bi.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(o!==this.getEncodingMode()){e.signalEncoderChange(Mt);break}}}t.append(pt.getCharAt(31)),this.handleEOD(e,t)},n.prototype.handleEOD=function(e,t){try{var r=t.length();if(r===0)return;if(r===1){e.updateSymbolInfo();var i=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount(),a=e.getRemainingCharacters();if(a>i&&(e.updateSymbolInfo(e.getCodewordCount()+1),i=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount()),a<=i&&i<=2)return}if(r>4)throw new Error("Count must not exceed 4");var o=r-1,c=this.encodeToCodewords(t.toString()),u=!e.hasMoreCharacters(),d=u&&o<=2;if(o<=2){e.updateSymbolInfo(e.getCodewordCount()+o);var i=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount();i>=3&&(d=!1,e.updateSymbolInfo(e.getCodewordCount()+c.length))}d?(e.resetSymbolInfo(),e.pos-=o):e.writeCodewords(c)}finally{e.signalEncoderChange(Mt)}},n.prototype.encodeChar=function(e,t){e>=32&&e<=63?t.append(e):e>=64&&e<=94?t.append(pt.getCharAt(e-64)):Bi.illegalCharacter(pt.getCharAt(e))},n.prototype.encodeToCodewords=function(e){var t=e.length;if(t===0)throw new Error("StringBuilder must not be empty");var r=e.charAt(0).charCodeAt(0),i=t>=2?e.charAt(1).charCodeAt(0):0,a=t>=3?e.charAt(2).charCodeAt(0):0,o=t>=4?e.charAt(3).charCodeAt(0):0,c=(r<<18)+(i<<12)+(a<<6)+o,u=c>>16&255,d=c>>8&255,m=c&255,g=new rt;return g.append(u),t>=2&&g.append(d),t>=3&&g.append(m),g.toString()},n})(),KL=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),WL=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},St=(function(){function n(e,t,r,i,a,o,c,u){c===void 0&&(c=0),u===void 0&&(u=0),this.rectangular=e,this.dataCapacity=t,this.errorCodewords=r,this.matrixWidth=i,this.matrixHeight=a,this.dataRegions=o,this.rsBlockData=c,this.rsBlockError=u}return n.lookup=function(e,t,r,i,a){var o,c;t===void 0&&(t=0),r===void 0&&(r=null),i===void 0&&(i=null),a===void 0&&(a=!0);try{for(var u=WL(ZL),d=u.next();!d.done;d=u.next()){var m=d.value;if(!(t===1&&m.rectangular)&&!(t===2&&!m.rectangular)&&!(r!=null&&(m.getSymbolWidth()<r.getWidth()||m.getSymbolHeight()<r.getHeight()))&&!(i!=null&&(m.getSymbolWidth()>i.getWidth()||m.getSymbolHeight()>i.getHeight()))&&e<=m.dataCapacity)return m}}catch(g){o={error:g}}finally{try{d&&!d.done&&(c=u.return)&&c.call(u)}finally{if(o)throw o.error}}if(a)throw new Error("Can't find a symbol arrangement that matches the message. Data codewords: "+e);return null},n.prototype.getHorizontalDataRegions=function(){switch(this.dataRegions){case 1:return 1;case 2:case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},n.prototype.getVerticalDataRegions=function(){switch(this.dataRegions){case 1:case 2:return 1;case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},n.prototype.getSymbolDataWidth=function(){return this.getHorizontalDataRegions()*this.matrixWidth},n.prototype.getSymbolDataHeight=function(){return this.getVerticalDataRegions()*this.matrixHeight},n.prototype.getSymbolWidth=function(){return this.getSymbolDataWidth()+this.getHorizontalDataRegions()*2},n.prototype.getSymbolHeight=function(){return this.getSymbolDataHeight()+this.getVerticalDataRegions()*2},n.prototype.getCodewordCount=function(){return this.dataCapacity+this.errorCodewords},n.prototype.getInterleavedBlockCount=function(){return this.rsBlockData?this.dataCapacity/this.rsBlockData:1},n.prototype.getDataCapacity=function(){return this.dataCapacity},n.prototype.getErrorCodewords=function(){return this.errorCodewords},n.prototype.getDataLengthForInterleavedBlock=function(e){return this.rsBlockData},n.prototype.getErrorLengthForInterleavedBlock=function(e){return this.rsBlockError},n})(),QL=(function(n){KL(e,n);function e(){return n.call(this,!1,1558,620,22,22,36,-1,62)||this}return e.prototype.getInterleavedBlockCount=function(){return 10},e.prototype.getDataLengthForInterleavedBlock=function(t){return t<=8?156:155},e})(St),ZL=[new St(!1,3,5,8,8,1),new St(!1,5,7,10,10,1),new St(!0,5,7,16,6,1),new St(!1,8,10,12,12,1),new St(!0,10,11,14,6,2),new St(!1,12,12,14,14,1),new St(!0,16,14,24,10,1),new St(!1,18,14,16,16,1),new St(!1,22,18,18,18,1),new St(!0,22,18,16,10,2),new St(!1,30,20,20,20,1),new St(!0,32,24,16,14,2),new St(!1,36,24,22,22,1),new St(!1,44,28,24,24,1),new St(!0,49,28,22,14,2),new St(!1,62,36,14,14,4),new St(!1,86,42,16,16,4),new St(!1,114,48,18,18,4),new St(!1,144,56,20,20,4),new St(!1,174,68,22,22,4),new St(!1,204,84,24,24,4,102,42),new St(!1,280,112,14,14,16,140,56),new St(!1,368,144,16,16,16,92,36),new St(!1,456,192,18,18,16,114,48),new St(!1,576,224,20,20,16,144,56),new St(!1,696,272,22,22,16,174,68),new St(!1,816,336,24,24,16,136,56),new St(!1,1050,408,18,18,36,175,68),new St(!1,1304,496,20,20,36,163,62),new QL],JL=(function(){function n(e){this.msg=e,this.pos=0,this.skipAtEnd=0;for(var t=e.split("").map(function(c){return c.charCodeAt(0)}),r=new rt,i=0,a=t.length;i<a;i++){var o=String.fromCharCode(t[i]&255);if(o==="?"&&e.charAt(i)!=="?")throw new Error("Message contains characters outside ISO-8859-1 encoding.");r.append(o)}this.msg=r.toString(),this.shape=0,this.codewords=new rt,this.newEncoding=-1}return n.prototype.setSymbolShape=function(e){this.shape=e},n.prototype.setSizeConstraints=function(e,t){this.minSize=e,this.maxSize=t},n.prototype.getMessage=function(){return this.msg},n.prototype.setSkipAtEnd=function(e){this.skipAtEnd=e},n.prototype.getCurrentChar=function(){return this.msg.charCodeAt(this.pos)},n.prototype.getCurrent=function(){return this.msg.charCodeAt(this.pos)},n.prototype.getCodewords=function(){return this.codewords},n.prototype.writeCodewords=function(e){this.codewords.append(e)},n.prototype.writeCodeword=function(e){this.codewords.append(e)},n.prototype.getCodewordCount=function(){return this.codewords.length()},n.prototype.getNewEncoding=function(){return this.newEncoding},n.prototype.signalEncoderChange=function(e){this.newEncoding=e},n.prototype.resetEncoderSignal=function(){this.newEncoding=-1},n.prototype.hasMoreCharacters=function(){return this.pos<this.getTotalMessageCharCount()},n.prototype.getTotalMessageCharCount=function(){return this.msg.length-this.skipAtEnd},n.prototype.getRemainingCharacters=function(){return this.getTotalMessageCharCount()-this.pos},n.prototype.getSymbolInfo=function(){return this.symbolInfo},n.prototype.updateSymbolInfo=function(e){e===void 0&&(e=this.getCodewordCount()),(this.symbolInfo==null||e>this.symbolInfo.getDataCapacity())&&(this.symbolInfo=St.lookup(e,this.shape,this.minSize,this.maxSize,!0))},n.prototype.resetSymbolInfo=function(){this.symbolInfo=null},n})(),eB=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),tB=(function(n){eB(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getEncodingMode=function(){return On},e.prototype.encode=function(t){for(var r=new rt;t.hasMoreCharacters();){var i=t.getCurrentChar();t.pos++,this.encodeChar(i,r);var a=r.length();if(a%3===0){this.writeNextTriplet(t,r);var o=Bi.lookAheadTest(t.getMessage(),t.pos,this.getEncodingMode());if(o!==this.getEncodingMode()){t.signalEncoderChange(Mt);break}}}this.handleEOD(t,r)},e.prototype.encodeChar=function(t,r){switch(t){case 13:r.append(0);break;case 42:r.append(1);break;case 62:r.append(2);break;case 32:r.append(3);break;default:t>=48&&t<=57?r.append(t-48+4):t>=65&&t<=90?r.append(t-65+14):Bi.illegalCharacter(pt.getCharAt(t));break}return 1},e.prototype.handleEOD=function(t,r){t.updateSymbolInfo();var i=t.getSymbolInfo().getDataCapacity()-t.getCodewordCount(),a=r.length();t.pos-=a,(t.getRemainingCharacters()>1||i>1||t.getRemainingCharacters()!==i)&&t.writeCodeword(qL),t.getNewEncoding()<0&&t.signalEncoderChange(Mt)},e})(Zy),nB=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),rB=(function(n){nB(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getEncodingMode=function(){return Sr},e.prototype.encodeChar=function(t,r){if(t===32)return r.append(3),1;if(t>=48&&t<=57)return r.append(t-48+4),1;if(t>=97&&t<=122)return r.append(t-97+14),1;if(t<32)return r.append(0),r.append(t),2;if(t<=47)return r.append(1),r.append(t-33),2;if(t<=64)return r.append(1),r.append(t-58+15),2;if(t>=91&&t<=95)return r.append(1),r.append(t-91+22),2;if(t===96)return r.append(2),r.append(0),2;if(t<=90)return r.append(2),r.append(t-65+1),2;if(t<=127)return r.append(2),r.append(t-123+27),2;r.append("1");var i=2;return i+=this.encodeChar(t-128,r),i},e})(Zy),Bi=(function(){function n(){}return n.randomize253State=function(e){var t=149*e%253+1,r=ib+t;return r<=254?r:r-254},n.encodeHighLevel=function(e,t,r,i,a){t===void 0&&(t=0),r===void 0&&(r=null),i===void 0&&(i=null),a===void 0&&(a=!1);var o=new Zy,c=[new $L,o,new rB,new tB,new YL,new XL],u=new JL(e);u.setSymbolShape(t),u.setSizeConstraints(r,i),e.startsWith(ab)&&e.endsWith(ob)?(u.writeCodeword(FL),u.setSkipAtEnd(2),u.pos+=ab.length):e.startsWith(sb)&&e.endsWith(ob)&&(u.writeCodeword(UL),u.setSkipAtEnd(2),u.pos+=sb.length);var d=Mt;for(a&&(o.encodeMaximal(u),d=u.getNewEncoding(),u.resetEncoderSignal());u.hasMoreCharacters();)c[d].encode(u),u.getNewEncoding()>=0&&(d=u.getNewEncoding(),u.resetEncoderSignal());var m=u.getCodewordCount();u.updateSymbolInfo();var g=u.getSymbolInfo().getDataCapacity();m<g&&d!==Mt&&d!==mr&&d!==Gn&&u.writeCodeword("");var _=u.getCodewords();for(_.length()<g&&_.append(ib);_.length()<g;)_.append(this.randomize253State(_.length()+1));return u.getCodewords().toString()},n.lookAheadTest=function(e,t,r){var i=this.lookAheadTestIntern(e,t,r);if(r===On&&i===On){for(var a=Math.min(t+3,e.length),o=t;o<a;o++)if(!this.isNativeX12(e.charCodeAt(o)))return Mt}else if(r===Gn&&i===Gn){for(var a=Math.min(t+4,e.length),o=t;o<a;o++)if(!this.isNativeEDIFACT(e.charCodeAt(o)))return Mt}return i},n.lookAheadTestIntern=function(e,t,r){if(t>=e.length)return r;var i;r===Mt?i=[0,1,1,1,1,1.25]:(i=[1,2,2,2,2,2.25],i[r]=0);for(var a=0,o=new Uint8Array(6),c=[];;){if(t+a===e.length){Pn.fill(o,0),Pn.fill(c,0);var u=this.findMinimums(i,c,it.MAX_VALUE,o),d=this.getMinimumCount(o);if(c[Mt]===u)return Mt;if(d===1){if(o[mr]>0)return mr;if(o[Gn]>0)return Gn;if(o[Sr]>0)return Sr;if(o[On]>0)return On}return ar}var m=e.charCodeAt(t+a);if(a++,this.isDigit(m)?i[Mt]+=.5:this.isExtendedASCII(m)?(i[Mt]=Math.ceil(i[Mt]),i[Mt]+=2):(i[Mt]=Math.ceil(i[Mt]),i[Mt]++),this.isNativeC40(m)?i[ar]+=2/3:this.isExtendedASCII(m)?i[ar]+=8/3:i[ar]+=4/3,this.isNativeText(m)?i[Sr]+=2/3:this.isExtendedASCII(m)?i[Sr]+=8/3:i[Sr]+=4/3,this.isNativeX12(m)?i[On]+=2/3:this.isExtendedASCII(m)?i[On]+=13/3:i[On]+=10/3,this.isNativeEDIFACT(m)?i[Gn]+=3/4:this.isExtendedASCII(m)?i[Gn]+=17/4:i[Gn]+=13/4,this.isSpecialB256(m)?i[mr]+=4:i[mr]++,a>=4){if(Pn.fill(o,0),Pn.fill(c,0),this.findMinimums(i,c,it.MAX_VALUE,o),c[Mt]<this.min(c[mr],c[ar],c[Sr],c[On],c[Gn]))return Mt;if(c[mr]<c[Mt]||c[mr]+1<this.min(c[ar],c[Sr],c[On],c[Gn]))return mr;if(c[Gn]+1<this.min(c[mr],c[ar],c[Sr],c[On],c[Mt]))return Gn;if(c[Sr]+1<this.min(c[mr],c[ar],c[Gn],c[On],c[Mt]))return Sr;if(c[On]+1<this.min(c[mr],c[ar],c[Gn],c[Sr],c[Mt]))return On;if(c[ar]+1<this.min(c[Mt],c[mr],c[Gn],c[Sr])){if(c[ar]<c[On])return ar;if(c[ar]===c[On]){for(var g=t+a+1;g<e.length;){var _=e.charCodeAt(g);if(this.isX12TermSep(_))return On;if(!this.isNativeX12(_))break;g++}return ar}}}}},n.min=function(e,t,r,i,a){var o=Math.min(e,Math.min(t,Math.min(r,i)));return a===void 0?o:Math.min(o,a)},n.findMinimums=function(e,t,r,i){for(var a=0;a<6;a++){var o=t[a]=Math.ceil(e[a]);r>o&&(r=o,Pn.fill(i,0)),r===o&&(i[a]=i[a]+1)}return r},n.getMinimumCount=function(e){for(var t=0,r=0;r<6;r++)t+=e[r];return t||0},n.isDigit=function(e){return e>=48&&e<=57},n.isExtendedASCII=function(e){return e>=128&&e<=255},n.isNativeC40=function(e){return e===32||e>=48&&e<=57||e>=65&&e<=90},n.isNativeText=function(e){return e===32||e>=48&&e<=57||e>=97&&e<=122},n.isNativeX12=function(e){return this.isX12TermSep(e)||e===32||e>=48&&e<=57||e>=65&&e<=90},n.isX12TermSep=function(e){return e===13||e===42||e===62},n.isNativeEDIFACT=function(e){return e>=32&&e<=94},n.isSpecialB256=function(e){return!1},n.determineConsecutiveDigitCount=function(e,t){t===void 0&&(t=0);for(var r=e.length,i=t;i<r&&this.isDigit(e.charCodeAt(i));)i++;return i-t},n.illegalCharacter=function(e){var t=it.toHexString(e.charCodeAt(0));throw t="0000".substring(0,4-t.length)+t,new Error("Illegal character: "+e+" (0x"+t+")")},n})(),eg=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},lb=(function(){function n(e){this.charset=e,this.name=e.name}return n.prototype.canEncode=function(e){try{return wi.encode(e,this.charset)!=null}catch{return!1}},n})(),iB=(function(){function n(e,t,r){var i,a,o,c,u,d;this.ENCODERS=["IBM437","ISO-8859-2","ISO-8859-3","ISO-8859-4","ISO-8859-5","ISO-8859-6","ISO-8859-7","ISO-8859-8","ISO-8859-9","ISO-8859-10","ISO-8859-11","ISO-8859-13","ISO-8859-14","ISO-8859-15","ISO-8859-16","windows-1250","windows-1251","windows-1252","windows-1256","Shift_JIS"].map(function(N){return new lb(PL.forName(N))}),this.encoders=[];var m=[];m.push(new lb(kL.ISO_8859_1));for(var g=t!=null&&t.name.startsWith("UTF"),_=0;_<e.length;_++){var w=!1;try{for(var E=(i=void 0,eg(m)),S=E.next();!S.done;S=E.next()){var D=S.value,C=e.charAt(_),k=C.charCodeAt(0);if(k===r||D.canEncode(C)){w=!0;break}}}catch(N){i={error:N}}finally{try{S&&!S.done&&(a=E.return)&&a.call(E)}finally{if(i)throw i.error}}if(!w)try{for(var V=(o=void 0,eg(this.ENCODERS)),U=V.next();!U.done;U=V.next()){var D=U.value;if(D.canEncode(e.charAt(_))){m.push(D),w=!0;break}}}catch(N){o={error:N}}finally{try{U&&!U.done&&(c=V.return)&&c.call(V)}finally{if(o)throw o.error}}w||(g=!0)}if(m.length===1&&!g)this.encoders=[m[0]];else{this.encoders=[];var q=0;try{for(var $=eg(m),M=$.next();!M.done;M=$.next()){var D=M.value;this.encoders[q++]=D}}catch(N){u={error:N}}finally{try{M&&!M.done&&(d=$.return)&&d.call($)}finally{if(u)throw u.error}}}var b=-1;if(t!=null){for(var _=0;_<this.encoders.length;_++)if(this.encoders[_]!=null&&t.name===this.encoders[_].name){b=_;break}}this.priorityEncoderIndex=b}return n.prototype.length=function(){return this.encoders.length},n.prototype.getCharsetName=function(e){if(!(e<this.length()))throw new Error("index must be less than length");return this.encoders[e].name},n.prototype.getCharset=function(e){if(!(e<this.length()))throw new Error("index must be less than length");return this.encoders[e].charset},n.prototype.getECIValue=function(e){return this.encoders[e].charset.getValueIdentifier()},n.prototype.getPriorityEncoderIndex=function(){return this.priorityEncoderIndex},n.prototype.canEncode=function(e,t){if(!(t<this.length()))throw new Error("index must be less than length");return!0},n.prototype.encode=function(e,t){if(!(t<this.length()))throw new Error("index must be less than length");return wi.encode(pt.getCharAt(e),this.encoders[t].name)},n})(),aB=3,sB=(function(){function n(e,t,r){this.fnc1=r;var i=new iB(e,t,r);if(i.length()===1)for(var a=0;a<this.bytes.length;a++){var o=e.charAt(a).charCodeAt(0);this.bytes[a]=o===r?1e3:o}else this.bytes=this.encodeMinimally(e,i,r)}return n.prototype.getFNC1Character=function(){return this.fnc1},n.prototype.length=function(){return this.bytes.length},n.prototype.haveNCharacters=function(e,t){if(e+t-1>=this.bytes.length)return!1;for(var r=0;r<t;r++)if(this.isECI(e+r))return!1;return!0},n.prototype.charAt=function(e){if(e<0||e>=this.length())throw new Error(""+e);if(this.isECI(e))throw new Error("value at "+e+" is not a character but an ECI");return this.isFNC1(e)?this.fnc1:this.bytes[e]},n.prototype.subSequence=function(e,t){if(e<0||e>t||t>this.length())throw new Error(""+e);for(var r=new rt,i=e;i<t;i++){if(this.isECI(i))throw new Error("value at "+i+" is not a character but an ECI");r.append(this.charAt(i))}return r.toString()},n.prototype.isECI=function(e){if(e<0||e>=this.length())throw new Error(""+e);return this.bytes[e]>255&&this.bytes[e]<=999},n.prototype.isFNC1=function(e){if(e<0||e>=this.length())throw new Error(""+e);return this.bytes[e]===1e3},n.prototype.getECIValue=function(e){if(e<0||e>=this.length())throw new Error(""+e);if(!this.isECI(e))throw new Error("value at "+e+" is not an ECI but a character");return this.bytes[e]-256},n.prototype.addEdge=function(e,t,r){(e[t][r.encoderIndex]==null||e[t][r.encoderIndex].cachedTotalSize>r.cachedTotalSize)&&(e[t][r.encoderIndex]=r)},n.prototype.addEdges=function(e,t,r,i,a,o){var c=e.charAt(i).charCodeAt(0),u=0,d=t.length();t.getPriorityEncoderIndex()>=0&&(c===o||t.canEncode(c,t.getPriorityEncoderIndex()))&&(u=t.getPriorityEncoderIndex(),d=u+1);for(var m=u;m<d;m++)(c===o||t.canEncode(c,m))&&this.addEdge(r,i+1,new cb(c,t,m,a,o))},n.prototype.encodeMinimally=function(e,t,r){var i=e.length,a=new cb[i+1][t.length()];this.addEdges(e,t,a,0,null,r);for(var o=1;o<=i;o++){for(var c=0;c<t.length();c++)a[o][c]!=null&&o<i&&this.addEdges(e,t,a,o,a[o][c],r);for(var c=0;c<t.length();c++)a[o-1][c]=null}for(var u=-1,d=it.MAX_VALUE,c=0;c<t.length();c++)if(a[i][c]!=null){var m=a[i][c];m.cachedTotalSize<d&&(d=m.cachedTotalSize,u=c)}if(u<0)throw new Error('Failed to encode "'+e+'"');for(var g=[],_=a[i][u];_!=null;){if(_.isFNC1())g.unshift(1e3);else for(var w=t.encode(_.c,_.encoderIndex),o=w.length-1;o>=0;o--)g.unshift(w[o]&255);var E=_.previous===null?0:_.previous.encoderIndex;E!==_.encoderIndex&&g.unshift(256+t.getECIValue(_.encoderIndex)),_=_.previous}for(var S=[],o=0;o<S.length;o++)S[o]=g[o];return S},n})(),cb=(function(){function n(e,t,r,i,a){this.c=e,this.encoderSet=t,this.encoderIndex=r,this.previous=i,this.fnc1=a,this.c=e===a?1e3:e;var o=this.isFNC1()?1:t.encode(e,r).length,c=i===null?0:i.encoderIndex;c!==r&&(o+=aB),i!=null&&(o+=i.cachedTotalSize),this.cachedTotalSize=o}return n.prototype.isFNC1=function(){return this.c===1e3},n})(),oB=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})();var ub;(function(n){n[n.ASCII=0]="ASCII",n[n.C40=1]="C40",n[n.TEXT=2]="TEXT",n[n.X12=3]="X12",n[n.EDF=4]="EDF",n[n.B256=5]="B256"})(ub||(ub={}));(function(n){oB(e,n);function e(t,r,i,a,o){var c=n.call(this,t,r,i)||this;return c.shape=a,c.macroId=o,c}return e.prototype.getMacroId=function(){return this.macroId},e.prototype.getShapeHint=function(){return this.shape},e})(sB);var lB=(function(){function n(){}return n.prototype.isCompact=function(){return this.compact},n.prototype.setCompact=function(e){this.compact=e},n.prototype.getSize=function(){return this.size},n.prototype.setSize=function(e){this.size=e},n.prototype.getLayers=function(){return this.layers},n.prototype.setLayers=function(e){this.layers=e},n.prototype.getCodeWords=function(){return this.codeWords},n.prototype.setCodeWords=function(e){this.codeWords=e},n.prototype.getMatrix=function(){return this.matrix},n.prototype.setMatrix=function(e){this.matrix=e},n})(),fb=(function(){function n(){}return n.singletonList=function(e){return[e]},n.min=function(e,t){return e.sort(t)[0]},n})(),cB=(function(){function n(e){this.previous=e}return n.prototype.getPrevious=function(){return this.previous},n})(),uB=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Jy=(function(n){uB(e,n);function e(t,r,i){var a=n.call(this,t)||this;return a.value=r,a.bitCount=i,a}return e.prototype.appendTo=function(t,r){t.appendBits(this.value,this.bitCount)},e.prototype.add=function(t,r){return new e(this,t,r)},e.prototype.addBinaryShift=function(t,r){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new e(this,t,r)},e.prototype.toString=function(){var t=this.value&(1<<this.bitCount)-1;return t|=1<<this.bitCount,"<"+it.toBinaryString(t|1<<this.bitCount).substring(1)+">"},e})(cB),fB=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),dB=(function(n){fB(e,n);function e(t,r,i){var a=n.call(this,t,0,0)||this;return a.binaryShiftStart=r,a.binaryShiftByteCount=i,a}return e.prototype.appendTo=function(t,r){for(var i=0;i<this.binaryShiftByteCount;i++)(i===0||i===31&&this.binaryShiftByteCount<=62)&&(t.appendBits(31,5),this.binaryShiftByteCount>62?t.appendBits(this.binaryShiftByteCount-31,16):i===0?t.appendBits(Math.min(this.binaryShiftByteCount,31),5):t.appendBits(this.binaryShiftByteCount-31,5)),t.appendBits(r[this.binaryShiftStart+i],8)},e.prototype.addBinaryShift=function(t,r){return new e(this,t,r)},e.prototype.toString=function(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"},e})(Jy);function hB(n,e,t){return new dB(n,e,t)}function Ju(n,e,t){return new Jy(n,e,t)}var pB=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],ro=0,B0=1,_i=2,q3=3,_a=4,mB=new Jy(null,0,0),tg=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])],gB=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};function vB(n){var e,t;try{for(var r=gB(n),i=r.next();!i.done;i=r.next()){var a=i.value;Pn.fill(a,-1)}}catch(o){e={error:o}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}return n[ro][_a]=0,n[B0][_a]=0,n[B0][ro]=28,n[q3][_a]=0,n[_i][_a]=0,n[_i][ro]=15,n}var $3=vB(Pn.createInt32Array(6,6)),yB=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},_B=(function(){function n(e,t,r,i){this.token=e,this.mode=t,this.binaryShiftByteCount=r,this.bitCount=i}return n.prototype.getMode=function(){return this.mode},n.prototype.getToken=function(){return this.token},n.prototype.getBinaryShiftByteCount=function(){return this.binaryShiftByteCount},n.prototype.getBitCount=function(){return this.bitCount},n.prototype.latchAndAppend=function(e,t){var r=this.bitCount,i=this.token;if(e!==this.mode){var a=tg[this.mode][e];i=Ju(i,a&65535,a>>16),r+=a>>16}var o=e===_i?4:5;return i=Ju(i,t,o),new n(i,e,0,r+o)},n.prototype.shiftAndAppend=function(e,t){var r=this.token,i=this.mode===_i?4:5;return r=Ju(r,$3[this.mode][e],i),r=Ju(r,t,5),new n(r,this.mode,0,this.bitCount+i+5)},n.prototype.addBinaryShiftChar=function(e){var t=this.token,r=this.mode,i=this.bitCount;if(this.mode===_a||this.mode===_i){var a=tg[r][ro];t=Ju(t,a&65535,a>>16),i+=a>>16,r=ro}var o=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,c=new n(t,r,this.binaryShiftByteCount+1,i+o);return c.binaryShiftByteCount===2078&&(c=c.endBinaryShift(e+1)),c},n.prototype.endBinaryShift=function(e){if(this.binaryShiftByteCount===0)return this;var t=this.token;return t=hB(t,e-this.binaryShiftByteCount,this.binaryShiftByteCount),new n(t,this.mode,0,this.bitCount)},n.prototype.isBetterThanOrEqualTo=function(e){var t=this.bitCount+(tg[this.mode][e.mode]>>16);return this.binaryShiftByteCount<e.binaryShiftByteCount?t+=n.calculateBinaryShiftCost(e)-n.calculateBinaryShiftCost(this):this.binaryShiftByteCount>e.binaryShiftByteCount&&e.binaryShiftByteCount>0&&(t+=10),t<=e.bitCount},n.prototype.toBitArray=function(e){for(var t,r,i=[],a=this.endBinaryShift(e.length).token;a!==null;a=a.getPrevious())i.unshift(a);var o=new Kn;try{for(var c=yB(i),u=c.next();!u.done;u=c.next()){var d=u.value;d.appendTo(o,e)}}catch(m){t={error:m}}finally{try{u&&!u.done&&(r=c.return)&&r.call(c)}finally{if(t)throw t.error}}return o},n.prototype.toString=function(){return pt.format("%s bits=%d bytes=%d",pB[this.mode],this.bitCount,this.binaryShiftByteCount)},n.calculateBinaryShiftCost=function(e){return e.binaryShiftByteCount>62?21:e.binaryShiftByteCount>31?20:e.binaryShiftByteCount>0?10:0},n.INITIAL_STATE=new n(mB,ro,0,0),n})();function xB(n){var e=pt.getCharCode(" "),t=pt.getCharCode("."),r=pt.getCharCode(",");n[ro][e]=1;for(var i=pt.getCharCode("Z"),a=pt.getCharCode("A"),o=a;o<=i;o++)n[ro][o]=o-a+2;n[B0][e]=1;for(var c=pt.getCharCode("z"),u=pt.getCharCode("a"),o=u;o<=c;o++)n[B0][o]=o-u+2;n[_i][e]=1;for(var d=pt.getCharCode("9"),m=pt.getCharCode("0"),o=m;o<=d;o++)n[_i][o]=o-m+2;n[_i][r]=12,n[_i][t]=13;for(var g=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""],_=0;_<g.length;_++)n[q3][pt.getCharCode(g[_])]=_;for(var w=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"],_=0;_<w.length;_++)pt.getCharCode(w[_])>0&&(n[_a][pt.getCharCode(w[_])]=_);return n}var ng=xB(Pn.createInt32Array(5,256)),Fh=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},wB=(function(){function n(e){this.text=e}return n.prototype.encode=function(){for(var e=pt.getCharCode(" "),t=pt.getCharCode(`
`),r=fb.singletonList(_B.INITIAL_STATE),i=0;i<this.text.length;i++){var a=void 0,o=i+1<this.text.length?this.text[i+1]:0;switch(this.text[i]){case pt.getCharCode("\r"):a=o===t?2:0;break;case pt.getCharCode("."):a=o===e?3:0;break;case pt.getCharCode(","):a=o===e?4:0;break;case pt.getCharCode(":"):a=o===e?5:0;break;default:a=0}a>0?(r=n.updateStateListForPair(r,i,a),i++):r=this.updateStateListForChar(r,i)}var c=fb.min(r,function(u,d){return u.getBitCount()-d.getBitCount()});return c.toBitArray(this.text)},n.prototype.updateStateListForChar=function(e,t){var r,i,a=[];try{for(var o=Fh(e),c=o.next();!c.done;c=o.next()){var u=c.value;this.updateStateForChar(u,t,a)}}catch(d){r={error:d}}finally{try{c&&!c.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}return n.simplifyStates(a)},n.prototype.updateStateForChar=function(e,t,r){for(var i=this.text[t]&255,a=ng[e.getMode()][i]>0,o=null,c=0;c<=_a;c++){var u=ng[c][i];if(u>0){if(o==null&&(o=e.endBinaryShift(t)),!a||c===e.getMode()||c===_i){var d=o.latchAndAppend(c,u);r.push(d)}if(!a&&$3[e.getMode()][c]>=0){var m=o.shiftAndAppend(c,u);r.push(m)}}}if(e.getBinaryShiftByteCount()>0||ng[e.getMode()][i]===0){var g=e.addBinaryShiftChar(t);r.push(g)}},n.updateStateListForPair=function(e,t,r){var i,a,o=[];try{for(var c=Fh(e),u=c.next();!u.done;u=c.next()){var d=u.value;this.updateStateForPair(d,t,r,o)}}catch(m){i={error:m}}finally{try{u&&!u.done&&(a=c.return)&&a.call(c)}finally{if(i)throw i.error}}return this.simplifyStates(o)},n.updateStateForPair=function(e,t,r,i){var a=e.endBinaryShift(t);if(i.push(a.latchAndAppend(_a,r)),e.getMode()!==_a&&i.push(a.shiftAndAppend(_a,r)),r===3||r===4){var o=a.latchAndAppend(_i,16-r).latchAndAppend(_i,1);i.push(o)}if(e.getBinaryShiftByteCount()>0){var c=e.addBinaryShiftChar(t).addBinaryShiftChar(t+1);i.push(c)}},n.simplifyStates=function(e){var t,r,i,a,o=[];try{for(var c=Fh(e),u=c.next();!u.done;u=c.next()){var d=u.value,m=!0,g=function(D){if(D.isBetterThanOrEqualTo(d))return m=!1,"break";d.isBetterThanOrEqualTo(D)&&(o=o.filter(function(C){return C!==D}))};try{for(var _=(i=void 0,Fh(o)),w=_.next();!w.done;w=_.next()){var E=w.value,S=g(E);if(S==="break")break}}catch(D){i={error:D}}finally{try{w&&!w.done&&(a=_.return)&&a.call(_)}finally{if(i)throw i.error}}m&&o.push(d)}}catch(D){t={error:D}}finally{try{u&&!u.done&&(r=c.return)&&r.call(c)}finally{if(t)throw t.error}}return o},n})(),EB=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};(function(){function n(){}return n.encodeBytes=function(e){return n.encode(e,n.DEFAULT_EC_PERCENT,n.DEFAULT_AZTEC_LAYERS)},n.encode=function(e,t,r){var i=new wB(e).encode(),a=it.truncDivision(i.getSize()*t,100)+11,o=i.getSize()+a,c,u,d,m,g;if(r!==n.DEFAULT_AZTEC_LAYERS){if(c=r<0,u=Math.abs(r),u>(c?n.MAX_NB_BITS_COMPACT:n.MAX_NB_BITS))throw new Be(pt.format("Illegal value %s for layers",r));d=n.totalBitsInLayer(u,c),m=n.WORD_SIZE[u];var _=d-d%m;if(g=n.stuffBits(i,m),g.getSize()+a>_)throw new Be("Data to large for user specified layer");if(c&&g.getSize()>m*64)throw new Be("Data to large for user specified layer")}else{m=0,g=null;for(var w=0;;w++){if(w>n.MAX_NB_BITS)throw new Be("Data too large for an Aztec code");if(c=w<=3,u=c?w+1:w,d=n.totalBitsInLayer(u,c),!(o>d)){(g==null||m!==n.WORD_SIZE[u])&&(m=n.WORD_SIZE[u],g=n.stuffBits(i,m));var _=d-d%m;if(!(c&&g.getSize()>m*64)&&g.getSize()+a<=_)break}}}var E=n.generateCheckWords(g,d,m),S=g.getSize()/m,D=n.generateModeMessage(c,u,S),C=(c?11:14)+u*4,k=new Int32Array(C),V;if(c){V=C;for(var w=0;w<k.length;w++)k[w]=w}else{V=C+1+2*it.truncDivision(it.truncDivision(C,2)-1,15);for(var U=it.truncDivision(C,2),q=it.truncDivision(V,2),w=0;w<U;w++){var $=w+it.truncDivision(w,15);k[U-w-1]=q-$-1,k[U+w]=q+$+1}}for(var M=new Ta(V),w=0,b=0;w<u;w++){for(var N=(u-w)*4+(c?9:12),I=0;I<N;I++)for(var R=I*2,L=0;L<2;L++)E.get(b+R+L)&&M.set(k[w*2+L],k[w*2+I]),E.get(b+N*2+R+L)&&M.set(k[w*2+I],k[C-1-w*2-L]),E.get(b+N*4+R+L)&&M.set(k[C-1-w*2-L],k[C-1-w*2-I]),E.get(b+N*6+R+L)&&M.set(k[C-1-w*2-I],k[w*2+L]);b+=N*8}if(n.drawModeMessage(M,c,V,D),c)n.drawBullsEye(M,it.truncDivision(V,2),5);else{n.drawBullsEye(M,it.truncDivision(V,2),7);for(var w=0,I=0;w<it.truncDivision(C,2)-1;w+=15,I+=16)for(var L=it.truncDivision(V,2)&1;L<V;L+=2)M.set(it.truncDivision(V,2)-I,L),M.set(it.truncDivision(V,2)+I,L),M.set(L,it.truncDivision(V,2)-I),M.set(L,it.truncDivision(V,2)+I)}var j=new lB;return j.setCompact(c),j.setSize(V),j.setLayers(u),j.setCodeWords(S),j.setMatrix(M),j},n.drawBullsEye=function(e,t,r){for(var i=0;i<r;i+=2)for(var a=t-i;a<=t+i;a++)e.set(a,t-i),e.set(a,t+i),e.set(t-i,a),e.set(t+i,a);e.set(t-r,t-r),e.set(t-r+1,t-r),e.set(t-r,t-r+1),e.set(t+r,t-r),e.set(t+r,t-r+1),e.set(t+r,t+r-1)},n.generateModeMessage=function(e,t,r){var i=new Kn;return e?(i.appendBits(t-1,2),i.appendBits(r-1,6),i=n.generateCheckWords(i,28,4)):(i.appendBits(t-1,5),i.appendBits(r-1,11),i=n.generateCheckWords(i,40,4)),i},n.drawModeMessage=function(e,t,r,i){var a=it.truncDivision(r,2);if(t)for(var o=0;o<7;o++){var c=a-3+o;i.get(o)&&e.set(c,a-5),i.get(o+7)&&e.set(a+5,c),i.get(20-o)&&e.set(c,a+5),i.get(27-o)&&e.set(a-5,c)}else for(var o=0;o<10;o++){var c=a-5+o+it.truncDivision(o,5);i.get(o)&&e.set(c,a-7),i.get(o+10)&&e.set(a+7,c),i.get(29-o)&&e.set(c,a+7),i.get(39-o)&&e.set(a-7,c)}},n.generateCheckWords=function(e,t,r){var i,a,o=e.getSize()/r,c=new H3(n.getGF(r)),u=it.truncDivision(t,r),d=n.bitsToWords(e,r,u);c.encode(d,u-o);var m=t%r,g=new Kn;g.appendBits(0,m);try{for(var _=EB(Array.from(d)),w=_.next();!w.done;w=_.next()){var E=w.value;g.appendBits(E,r)}}catch(S){i={error:S}}finally{try{w&&!w.done&&(a=_.return)&&a.call(_)}finally{if(i)throw i.error}}return g},n.bitsToWords=function(e,t,r){var i=new Int32Array(r),a,o;for(a=0,o=e.getSize()/t;a<o;a++){for(var c=0,u=0;u<t;u++)c|=e.get(a*t+u)?1<<t-u-1:0;i[a]=c}return i},n.getGF=function(e){switch(e){case 4:return Br.AZTEC_PARAM;case 6:return Br.AZTEC_DATA_6;case 8:return Br.AZTEC_DATA_8;case 10:return Br.AZTEC_DATA_10;case 12:return Br.AZTEC_DATA_12;default:throw new Be("Unsupported word size "+e)}},n.stuffBits=function(e,t){for(var r=new Kn,i=e.getSize(),a=(1<<t)-2,o=0;o<i;o+=t){for(var c=0,u=0;u<t;u++)(o+u>=i||e.get(o+u))&&(c|=1<<t-1-u);(c&a)===a?(r.appendBits(c&a,t),o--):(c&a)===0?(r.appendBits(c|1,t),o--):r.appendBits(c,t)}return r},n.totalBitsInLayer=function(e,t){return((t?88:112)+16*e)*e},n.DEFAULT_EC_PERCENT=33,n.DEFAULT_AZTEC_LAYERS=0,n.MAX_NB_BITS=32,n.MAX_NB_BITS_COMPACT=4,n.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]),n})();var AB=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),bB=(function(n){AB(e,n);function e(t){var r=n.call(this,t.width,t.height)||this;return r.canvas=t,r.tempCanvasElement=null,r.buffer=e.makeBufferFromCanvasImageData(t),r}return e.makeBufferFromCanvasImageData=function(t){var r;try{r=t.getContext("2d",{willReadFrequently:!0})}catch{r=t.getContext("2d")}if(!r)throw new Error("Couldn't get canvas context.");var i=r.getImageData(0,0,t.width,t.height);return e.toGrayscaleBuffer(i.data,t.width,t.height)},e.toGrayscaleBuffer=function(t,r,i){for(var a=new Uint8ClampedArray(r*i),o=0,c=0,u=t.length;o<u;o+=4,c++){var d=void 0,m=t[o+3];if(m===0)d=255;else{var g=t[o],_=t[o+1],w=t[o+2];d=306*g+601*_+117*w+512>>10}a[c]=d}return a},e.prototype.getRow=function(t,r){if(t<0||t>=this.getHeight())throw new Be("Requested row is outside the image: "+t);var i=this.getWidth(),a=t*i;return r===null?r=this.buffer.slice(a,a+i):(r.length<i&&(r=new Uint8ClampedArray(i)),r.set(this.buffer.slice(a,a+i))),r},e.prototype.getMatrix=function(){return this.buffer},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(t,r,i,a){return n.prototype.crop.call(this,t,r,i,a),this},e.prototype.isRotateSupported=function(){return!0},e.prototype.rotateCounterClockwise=function(){return this.rotate(-90),this},e.prototype.rotateCounterClockwise45=function(){return this.rotate(-45),this},e.prototype.invert=function(){return new Ep(this)},e.prototype.getTempCanvasElement=function(){if(this.tempCanvasElement===null){var t=this.canvas.ownerDocument.createElement("canvas");t.width=this.canvas.width,t.height=this.canvas.height,this.tempCanvasElement=t}return this.tempCanvasElement},e.prototype.rotate=function(t){var r=this.getTempCanvasElement();if(!r)throw new Error("Could not create a Canvas element.");var i=t*e.DEGREE_TO_RADIANS,a=this.canvas.width,o=this.canvas.height,c=Math.ceil(Math.abs(Math.cos(i))*a+Math.abs(Math.sin(i))*o),u=Math.ceil(Math.abs(Math.sin(i))*a+Math.abs(Math.cos(i))*o);r.width=c,r.height=u;var d=r.getContext("2d");if(!d)throw new Error("Could not create a Canvas Context element.");return d.translate(c/2,u/2),d.rotate(i),d.drawImage(this.canvas,a/-2,o/-2),this.buffer=e.makeBufferFromCanvasImageData(r),this},e.DEGREE_TO_RADIANS=Math.PI/180,e})(ed);function X3(){return typeof navigator<"u"}function SB(){return X3()&&!!navigator.mediaDevices}function CB(){return!!(SB()&&navigator.mediaDevices.enumerateDevices)}var mc=function(){return mc=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},mc.apply(this,arguments)},sn=function(n,e,t,r){function i(a){return a instanceof t?a:new t(function(o){o(a)})}return new(t||(t=Promise))(function(a,o){function c(m){try{d(r.next(m))}catch(g){o(g)}}function u(m){try{d(r.throw(m))}catch(g){o(g)}}function d(m){m.done?a(m.value):i(m.value).then(c,u)}d((r=r.apply(n,e||[])).next())})},on=function(n,e){var t={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,i,a,o;return o={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function c(d){return function(m){return u([d,m])}}function u(d){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,i&&(a=d[0]&2?i.return:d[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,d[1])).done)return a;switch(i=0,a&&(d=[d[0]&2,a.value]),d[0]){case 0:case 1:a=d;break;case 4:return t.label++,{value:d[1],done:!1};case 5:t.label++,i=d[1],d=[0];continue;case 7:d=t.ops.pop(),t.trys.pop();continue;default:if(a=t.trys,!(a=a.length>0&&a[a.length-1])&&(d[0]===6||d[0]===2)){t=0;continue}if(d[0]===3&&(!a||d[1]>a[0]&&d[1]<a[3])){t.label=d[1];break}if(d[0]===6&&t.label<a[1]){t.label=a[1],a=d;break}if(a&&t.label<a[2]){t.label=a[2],t.ops.push(d);break}a[2]&&t.ops.pop(),t.trys.pop();continue}d=e.call(n,t)}catch(m){d=[6,m],i=0}finally{r=a=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},rg=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},TB={delayBetweenScanAttempts:500,delayBetweenScanSuccess:500,tryPlayVideoTimeout:5e3},Xc=(function(){function n(e,t,r){t===void 0&&(t=new Map),r===void 0&&(r={}),this.reader=e,this.hints=t,this.options=mc(mc({},TB),r)}return Object.defineProperty(n.prototype,"possibleFormats",{set:function(e){this.hints.set(qt.POSSIBLE_FORMATS,e)},enumerable:!1,configurable:!0}),n.addVideoSource=function(e,t){try{e.srcObject=t}catch{console.error("got interrupted by new loading request")}},n.mediaStreamSetTorch=function(e,t){return sn(this,void 0,void 0,function(){return on(this,function(r){switch(r.label){case 0:return[4,e.applyConstraints({advanced:[{fillLightMode:t?"flash":"off",torch:!!t}]})];case 1:return r.sent(),[2]}})})},n.mediaStreamIsTorchCompatible=function(e){var t,r,i=e.getVideoTracks();try{for(var a=rg(i),o=a.next();!o.done;o=a.next()){var c=o.value;if(n.mediaStreamIsTorchCompatibleTrack(c))return!0}}catch(u){t={error:u}}finally{try{o&&!o.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}return!1},n.mediaStreamIsTorchCompatibleTrack=function(e){try{var t=e.getCapabilities();return"torch"in t}catch(r){return console.error(r),console.warn("Your browser may be not fully compatible with WebRTC and/or ImageCapture specs. Torch will not be available."),!1}},n.isVideoPlaying=function(e){return e.currentTime>0&&!e.paused&&e.readyState>2},n.getMediaElement=function(e,t){var r=document.getElementById(e);if(!r)throw new mn("element with id '".concat(e,"' not found"));if(r.nodeName.toLowerCase()!==t.toLowerCase())throw new mn("element with id '".concat(e,"' must be an ").concat(t," element"));return r},n.createVideoElement=function(e){if(e instanceof HTMLVideoElement)return e;if(typeof e=="string")return n.getMediaElement(e,"video");if(!e&&typeof document<"u"){var t=document.createElement("video");return t.width=200,t.height=200,t}throw new Error("Couldn't get videoElement from videoSource!")},n.prepareImageElement=function(e){if(e instanceof HTMLImageElement)return e;if(typeof e=="string")return n.getMediaElement(e,"img");if(typeof e>"u"){var t=document.createElement("img");return t.width=200,t.height=200,t}throw new Error("Couldn't get imageElement from imageSource!")},n.prepareVideoElement=function(e){var t=n.createVideoElement(e);return t.setAttribute("autoplay","true"),t.setAttribute("muted","true"),t.setAttribute("playsinline","true"),t},n.isImageLoaded=function(e){return!(!e.complete||e.naturalWidth===0)},n.createBinaryBitmapFromCanvas=function(e){var t=new bB(e),r=new O3(t);return new R3(r)},n.drawImageOnCanvas=function(e,t){e.drawImage(t,0,0)},n.getMediaElementDimensions=function(e){if(e instanceof HTMLVideoElement)return{height:e.videoHeight,width:e.videoWidth};if(e instanceof HTMLImageElement)return{height:e.naturalHeight||e.height,width:e.naturalWidth||e.width};throw new Error("Couldn't find the Source's dimensions!")},n.createCaptureCanvas=function(e){if(!e)throw new mn("Cannot create a capture canvas without a media element.");if(typeof document>"u")throw new Error(`The page "Document" is undefined, make sure you're running in a browser.`);var t=document.createElement("canvas"),r=n.getMediaElementDimensions(e),i=r.width,a=r.height;return t.style.width=i+"px",t.style.height=a+"px",t.width=i,t.height=a,t},n.tryPlayVideo=function(e){return sn(this,void 0,void 0,function(){var t;return on(this,function(r){switch(r.label){case 0:if(e?.ended)return console.error("Trying to play video that has ended."),[2,!1];if(n.isVideoPlaying(e))return console.warn("Trying to play video that is already playing."),[2,!0];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,e.play()];case 2:return r.sent(),[2,!0];case 3:return t=r.sent(),console.warn("It was not possible to play the video.",t),[2,!1];case 4:return[2]}})})},n.createCanvasFromMediaElement=function(e){var t=n.createCaptureCanvas(e),r=t.getContext("2d");if(!r)throw new Error("Couldn't find Canvas 2D Context.");return n.drawImageOnCanvas(r,e),t},n.createBinaryBitmapFromMediaElem=function(e){var t=n.createCanvasFromMediaElement(e);return n.createBinaryBitmapFromCanvas(t)},n.destroyImageElement=function(e){e.src="",e.removeAttribute("src"),e=void 0},n.listVideoInputDevices=function(){return sn(this,void 0,void 0,function(){var e,t,r,i,a,o,c,u,d,m,g,_;return on(this,function(w){switch(w.label){case 0:if(!X3())throw new Error("Can't enumerate devices, navigator is not present.");if(!CB())throw new Error("Can't enumerate devices, method not supported.");return[4,navigator.mediaDevices.enumerateDevices()];case 1:e=w.sent(),t=[];try{for(r=rg(e),i=r.next();!i.done;i=r.next())a=i.value,o=a.kind==="video"?"videoinput":a.kind,o==="videoinput"&&(c=a.deviceId||a.id,u=a.label||"Video device ".concat(t.length+1),d=a.groupId,m={deviceId:c,label:u,kind:o,groupId:d},t.push(m))}catch(E){g={error:E}}finally{try{i&&!i.done&&(_=r.return)&&_.call(r)}finally{if(g)throw g.error}}return[2,t]}})})},n.findDeviceById=function(e){return sn(this,void 0,void 0,function(){var t;return on(this,function(r){switch(r.label){case 0:return[4,n.listVideoInputDevices()];case 1:return t=r.sent(),t?[2,t.find(function(i){return i.deviceId===e})]:[2]}})})},n.cleanVideoSource=function(e){if(e){try{e.srcObject=null}catch{e.src=""}e&&e.removeAttribute("src")}},n.releaseAllStreams=function(){n.streamTracker.length!==0&&n.streamTracker.forEach(function(e){e.getTracks().forEach(function(t){return t.stop()})}),n.streamTracker=[]},n.playVideoOnLoadAsync=function(e,t){return sn(this,void 0,void 0,function(){var r;return on(this,function(i){switch(i.label){case 0:return[4,n.tryPlayVideo(e)];case 1:return r=i.sent(),r?[2,!0]:[2,new Promise(function(a,o){var c=setTimeout(function(){n.isVideoPlaying(e)||(o(!1),e.removeEventListener("canplay",u))},t),u=function(){n.tryPlayVideo(e).then(function(d){clearTimeout(c),e.removeEventListener("canplay",u),a(d)})};e.addEventListener("canplay",u)})]}})})},n.attachStreamToVideo=function(e,t,r){return r===void 0&&(r=5e3),sn(this,void 0,void 0,function(){var i;return on(this,function(a){switch(a.label){case 0:return i=n.prepareVideoElement(t),n.addVideoSource(i,e),[4,n.playVideoOnLoadAsync(i,r)];case 1:return a.sent(),[2,i]}})})},n._waitImageLoad=function(e){return new Promise(function(t,r){var i=1e4,a=setTimeout(function(){n.isImageLoaded(e)||(e.removeEventListener("load",o),r())},i),o=function(){clearTimeout(a),e.removeEventListener("load",o),t()};e.addEventListener("load",o)})},n.checkCallbackFnOrThrow=function(e){if(!e)throw new mn("`callbackFn` is a required parameter, you cannot capture results without it.")},n.disposeMediaStream=function(e){e.getVideoTracks().forEach(function(t){return t.stop()}),e=void 0},n.prototype.decode=function(e){var t=n.createCanvasFromMediaElement(e);return this.decodeFromCanvas(t)},n.prototype.decodeBitmap=function(e){return this.reader.decode(e,this.hints)},n.prototype.decodeFromCanvas=function(e){var t=n.createBinaryBitmapFromCanvas(e);return this.decodeBitmap(t)},n.prototype.decodeFromImageElement=function(e){return sn(this,void 0,void 0,function(){var t;return on(this,function(r){switch(r.label){case 0:if(!e)throw new mn("An image element must be provided.");return t=n.prepareImageElement(e),[4,this._decodeOnLoadImage(t)];case 1:return[2,r.sent()]}})})},n.prototype.decodeFromImageUrl=function(e){return sn(this,void 0,void 0,function(){var t;return on(this,function(r){switch(r.label){case 0:if(!e)throw new mn("An URL must be provided.");t=n.prepareImageElement(),t.src=e,r.label=1;case 1:return r.trys.push([1,,3,4]),[4,this.decodeFromImageElement(t)];case 2:return[2,r.sent()];case 3:return n.destroyImageElement(t),[7];case 4:return[2]}})})},n.prototype.decodeFromConstraints=function(e,t,r){return sn(this,void 0,void 0,function(){var i,a;return on(this,function(o){switch(o.label){case 0:return n.checkCallbackFnOrThrow(r),[4,this.getUserMedia(e)];case 1:i=o.sent(),o.label=2;case 2:return o.trys.push([2,4,,5]),[4,this.decodeFromStream(i,t,r)];case 3:return[2,o.sent()];case 4:throw a=o.sent(),n.disposeMediaStream(i),a;case 5:return[2]}})})},n.prototype.decodeFromStream=function(e,t,r){return sn(this,void 0,void 0,function(){var i,a,o,c,u,d,m,g,_,w=this;return on(this,function(E){switch(E.label){case 0:return n.checkCallbackFnOrThrow(r),i=this.options.tryPlayVideoTimeout,[4,n.attachStreamToVideo(e,t,i)];case 1:return a=E.sent(),o=function(){n.disposeMediaStream(e),n.cleanVideoSource(a)},c=this.scan(a,r,o),u=e.getVideoTracks(),d=mc(mc({},c),{stop:function(){c.stop()},streamVideoConstraintsApply:function(S,D){return sn(this,void 0,void 0,function(){var C,k,V,U,q,$,M;return on(this,function(b){switch(b.label){case 0:C=D?u.filter(D):u,b.label=1;case 1:b.trys.push([1,6,7,8]),k=rg(C),V=k.next(),b.label=2;case 2:return V.done?[3,5]:(U=V.value,[4,U.applyConstraints(S)]);case 3:b.sent(),b.label=4;case 4:return V=k.next(),[3,2];case 5:return[3,8];case 6:return q=b.sent(),$={error:q},[3,8];case 7:try{V&&!V.done&&(M=k.return)&&M.call(k)}finally{if($)throw $.error}return[7];case 8:return[2]}})})},streamVideoConstraintsGet:function(S){return u.find(S).getConstraints()},streamVideoSettingsGet:function(S){return u.find(S).getSettings()},streamVideoCapabilitiesGet:function(S){return u.find(S).getCapabilities()}}),m=n.mediaStreamIsTorchCompatible(e),m&&(g=u?.find(function(S){return n.mediaStreamIsTorchCompatibleTrack(S)}),_=function(S){return sn(w,void 0,void 0,function(){return on(this,function(D){switch(D.label){case 0:return[4,n.mediaStreamSetTorch(g,S)];case 1:return D.sent(),[2]}})})},d.switchTorch=_,d.stop=function(){return sn(w,void 0,void 0,function(){return on(this,function(S){switch(S.label){case 0:return c.stop(),[4,_(!1)];case 1:return S.sent(),[2]}})})}),[2,d]}})})},n.prototype.decodeFromVideoDevice=function(e,t,r){return sn(this,void 0,void 0,function(){var i,a;return on(this,function(o){switch(o.label){case 0:return n.checkCallbackFnOrThrow(r),e?i={deviceId:{exact:e}}:i={facingMode:"environment"},a={video:i},[4,this.decodeFromConstraints(a,t,r)];case 1:return[2,o.sent()]}})})},n.prototype.decodeFromVideoElement=function(e,t){return sn(this,void 0,void 0,function(){var r,i;return on(this,function(a){switch(a.label){case 0:if(n.checkCallbackFnOrThrow(t),!e)throw new mn("A video element must be provided.");return r=n.prepareVideoElement(e),i=this.options.tryPlayVideoTimeout,[4,n.playVideoOnLoadAsync(r,i)];case 1:return a.sent(),[2,this.scan(r,t)]}})})},n.prototype.decodeFromVideoUrl=function(e,t){return sn(this,void 0,void 0,function(){var r,i,a,o;return on(this,function(c){switch(c.label){case 0:if(n.checkCallbackFnOrThrow(t),!e)throw new mn("An URL must be provided.");return r=n.prepareVideoElement(),r.src=e,i=function(){n.cleanVideoSource(r)},a=this.options.tryPlayVideoTimeout,[4,n.playVideoOnLoadAsync(r,a)];case 1:return c.sent(),o=this.scan(r,t,i),[2,o]}})})},n.prototype.decodeOnceFromConstraints=function(e,t){return sn(this,void 0,void 0,function(){var r;return on(this,function(i){switch(i.label){case 0:return[4,this.getUserMedia(e)];case 1:return r=i.sent(),[4,this.decodeOnceFromStream(r,t)];case 2:return[2,i.sent()]}})})},n.prototype.decodeOnceFromStream=function(e,t){return sn(this,void 0,void 0,function(){var r,i,a;return on(this,function(o){switch(o.label){case 0:return r=!!t,[4,n.attachStreamToVideo(e,t)];case 1:i=o.sent(),o.label=2;case 2:return o.trys.push([2,,4,5]),[4,this.scanOneResult(i)];case 3:return a=o.sent(),[2,a];case 4:return r||n.cleanVideoSource(i),[7];case 5:return[2]}})})},n.prototype.decodeOnceFromVideoDevice=function(e,t){return sn(this,void 0,void 0,function(){var r,i;return on(this,function(a){switch(a.label){case 0:return e?r={deviceId:{exact:e}}:r={facingMode:"environment"},i={video:r},[4,this.decodeOnceFromConstraints(i,t)];case 1:return[2,a.sent()]}})})},n.prototype.decodeOnceFromVideoElement=function(e){return sn(this,void 0,void 0,function(){var t,r;return on(this,function(i){switch(i.label){case 0:if(!e)throw new mn("A video element must be provided.");return t=n.prepareVideoElement(e),r=this.options.tryPlayVideoTimeout,[4,n.playVideoOnLoadAsync(t,r)];case 1:return i.sent(),[4,this.scanOneResult(t)];case 2:return[2,i.sent()]}})})},n.prototype.decodeOnceFromVideoUrl=function(e){return sn(this,void 0,void 0,function(){var t,r;return on(this,function(i){switch(i.label){case 0:if(!e)throw new mn("An URL must be provided.");t=n.prepareVideoElement(),t.src=e,r=this.decodeOnceFromVideoElement(t),i.label=1;case 1:return i.trys.push([1,,3,4]),[4,r];case 2:return[2,i.sent()];case 3:return n.cleanVideoSource(t),[7];case 4:return[2]}})})},n.prototype.scanOneResult=function(e,t,r,i){var a=this;return t===void 0&&(t=!0),r===void 0&&(r=!0),i===void 0&&(i=!0),new Promise(function(o,c){a.scan(e,function(u,d,m){if(u){o(u),m.stop();return}if(d){if(d instanceof oe&&t||d instanceof Tn&&r||d instanceof _e&&i)return;m.stop(),c(d)}})})},n.prototype.scan=function(e,t,r){var i=this;n.checkCallbackFnOrThrow(t);var a=n.createCaptureCanvas(e),o;try{o=a.getContext("2d",{willReadFrequently:!0})}catch{o=a.getContext("2d")}if(!o)throw new Error("Couldn't create canvas for visual element scan.");var c=function(){o=void 0,a=void 0},u=!1,d,m=function(){u=!0,clearTimeout(d),c(),r&&r()},g={stop:m},_=function(){if(!u)try{n.drawImageOnCanvas(o,e);var w=i.decodeFromCanvas(a);t(w,void 0,g),d=setTimeout(_,i.options.delayBetweenScanSuccess)}catch(C){t(void 0,C,g);var E=C instanceof Tn,S=C instanceof _e,D=C instanceof oe;if(E||S||D){d=setTimeout(_,i.options.delayBetweenScanAttempts);return}c(),r&&r(C)}};return _(),g},n.prototype._decodeOnLoadImage=function(e){return sn(this,void 0,void 0,function(){var t;return on(this,function(r){switch(r.label){case 0:return t=n.isImageLoaded(e),t?[3,2]:[4,n._waitImageLoad(e)];case 1:r.sent(),r.label=2;case 2:return[2,this.decode(e)]}})})},n.prototype.getUserMedia=function(e){return sn(this,void 0,void 0,function(){var t;return on(this,function(r){switch(r.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return t=r.sent(),n.streamTracker.push(t),[2,t]}})})},n.streamTracker=[],n})(),IB=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})();(function(n){IB(e,n);function e(t,r){return n.call(this,new M0,t,r)||this}return e})(Xc);var NB=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})();(function(n){NB(e,n);function e(t,r){return n.call(this,new hc(t),t,r)||this}return e})(Xc);var RB=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})();(function(n){RB(e,n);function e(t,r){return n.call(this,new k0,t,r)||this}return e})(Xc);var OB=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),DB=(function(n){OB(e,n);function e(t,r){var i=this,a=new z3;return a.setHints(t),i=n.call(this,a,t,r)||this,i.reader=a,i}return Object.defineProperty(e.prototype,"possibleFormats",{set:function(t){this.hints.set(qt.POSSIBLE_FORMATS,t),this.reader.setHints(this.hints)},enumerable:!1,configurable:!0}),e.prototype.decodeBitmap=function(t){return this.reader.decodeWithState(t)},e.prototype.setHints=function(t){this.hints=t,this.reader.setHints(this.hints)},e})(Xc),MB=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})();(function(n){MB(e,n);function e(t,r){return n.call(this,new L0,t,r)||this}return e})(Xc);var PB=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),kB=(function(n){PB(e,n);function e(t,r){return n.call(this,new j0,t,r)||this}return e})(Xc);const Sp=[{value:"open",label:""},{value:"middle",label:""},{value:"close",label:""}],jB=Sp.reduce((n,e)=>(n[e.value]=e.label,n),{}),df=50,gc=100,Lr=50,LB="admin-cash-audit-vouchers-",BB="admin-cash-audit-voucher-usage-",VB="admin-cash-audit-janken-adjustment-",Av="admin-cash-audit:voucher-usage-updated",bv="admin-cash-audit:janken-adjustment-updated",i0={open:0,middle:0,close:0},V0={plus:Lr,minus:-Lr};function e2(n){return n==="plus"||n==="minus"}function t2(n){const e=n.getFullYear(),t=String(n.getMonth()+1).padStart(2,"0"),r=String(n.getDate()).padStart(2,"0");return`${e}-${t}-${r}`}function es(n){const e=Number(n);return!Number.isFinite(e)||e<=0?0:Math.floor(e)}function Y3(n){return`${LB}${t2(n??new Date)}`}function F0(n){return`${BB}${t2(n??new Date)}`}function U0(n){return`${VB}${t2(n??new Date)}`}function n2(n){if(typeof window>"u")return null;try{return window.localStorage.getItem(n)}catch(e){return console.warn("",e),null}}function Lf(n,e){if(!(typeof window>"u"))try{e===null?window.localStorage.removeItem(n):window.localStorage.setItem(n,e)}catch(t){console.warn("",t)}}function FB(n){const e=n2(Y3(n));if(!e)return{...i0};try{const t=JSON.parse(e);return Sp.reduce((r,i)=>(r[i.value]=es(t?.[i.value]),r),{...i0})}catch(t){return console.warn("",t),{...i0}}}function db(n,e){const t=Sp.reduce((r,i)=>(r[i.value]=es(n?.[i.value]),r),{...i0});Lf(Y3(e),JSON.stringify(t))}function UB(n){return typeof n=="object"&&n!==null&&"count50"in n&&"count100"in n?{count50:es(n.count50),count100:es(n.count100)}:{count50:0,count100:es(n)}}function Yc(n){const e=n2(F0(n));if(!e)return{};try{const r=JSON.parse(e)?.entries??{};return Object.entries(r).reduce((i,[a,o])=>{const c=UB(o);return(c.count50>0||c.count100>0)&&(i[a]=c),i},{})}catch(t){return console.warn("",t),{}}}function Sv(n,e){const t=Object.entries(n).reduce((r,[i,a])=>{const o={count50:es(a.count50),count100:es(a.count100)};return(o.count50>0||o.count100>0)&&(r[i]=o),r},{});if(Object.keys(t).length===0)Lf(F0(e),null);else{const r={entries:t};Lf(F0(e),JSON.stringify(r))}}function Cp(n){const e=n2(U0(n));if(!e)return{};try{const r=JSON.parse(e)?.entries??{};return Object.entries(r).reduce((i,[a,o])=>(e2(o)&&(i[a]=o),i),{})}catch(t){return console.warn("",t),{}}}function Cv(n,e){const t=Object.entries(n).reduce((r,[i,a])=>(e2(a)&&(r[i]=a),r),{});if(Object.keys(t).length===0)Lf(U0(e),null);else{const r={entries:t};Lf(U0(e),JSON.stringify(r))}}function Tv(){typeof window>"u"||window.dispatchEvent(new CustomEvent(Av))}function Iv(){typeof window>"u"||window.dispatchEvent(new CustomEvent(bv))}function hb(n){const e=Yc(n);return Object.values(e).reduce((t,r)=>t+r.count50+r.count100,0)}function pb(n){const e=Yc(n);return Object.values(e).reduce((t,r)=>t+r.count50,0)}function mb(n){const e=Yc(n);return Object.values(e).reduce((t,r)=>t+r.count100,0)}function gb(n,e){return n?Yc(e)[n]??{count50:0,count100:0}:{count50:0,count100:0}}function zB(n,e,t){if(!n)return;const r={count50:es(e.count50),count100:es(e.count100)},i=Yc(t);if(r.count50===0&&r.count100===0){n in i&&(delete i[n],Sv(i,t),Tv());return}const a=i[n];a&&a.count50===r.count50&&a.count100===r.count100||(i[n]=r,Sv(i,t),Tv())}function vb(n,e){if(!n)return;const t=Yc(e);n in t&&(delete t[n],Sv(t,e),Tv())}function HB(n){return n==="plus"?V0.plus:n==="minus"?V0.minus:0}function yb(n,e){return n?Cp(e)[n]??"none":"none"}function GB(n,e,t){if(!n)return;const r=Cp(t);if(!e2(e)){n in r&&(delete r[n],Cv(r,t),Iv());return}r[n]!==e&&(r[n]=e,Cv(r,t),Iv())}function _b(n,e){if(!n)return;const t=Cp(e);n in t&&(delete t[n],Cv(t,e),Iv())}function xb(n){const e=Cp(n);return Object.values(e).reduce((t,r)=>(r==="plus"?(t.totalAmount+=V0.plus,t.plusCount+=1):r==="minus"&&(t.totalAmount+=V0.minus,t.minusCount+=1),t),{totalAmount:0,plusCount:0,minusCount:0})}function qB(n){return U0(n)}function $B(n){return F0(n)}function vi(n){return`${n.toLocaleString()}`}function ig(n){const e=vi(Math.abs(n));return n>0?`+${e}`:n<0?`-${e}`:e}const wb=["drink_hojicha","drink_cocoa","drink_coffee","drink_milkcoffee"],XB=[{value:"none",label:"0",description:"",delta:0,tone:"neutral"},{value:"plus",label:`+${vi(Lr)}`,description:"50",delta:Lr,tone:"positive"},{value:"minus",label:`-${vi(Lr)}`,description:"50",delta:-Lr,tone:"negative"}],YB={:"",:"",:""},KB={:"warning",:"success",:"neutral"};function WB(){const n=P.useMemo(()=>{const se=new Date;se.setHours(0,0,0,0);const Ee=new Date(se);return Ee.setDate(Ee.getDate()+1),{start:se,end:Ee}},[]),{orders:e,loading:t,error:r}=qc(n),{language:i}=Ki(),a=P.useMemo(()=>e.map(wp),[e]),[o,c]=P.useState(""),[u,d]=P.useState(null),[m,g]=P.useState(!1),[_,w]=P.useState(!1),[E,S]=P.useState(null),[D,C]=P.useState(null),[k,V]=P.useState({}),[U,q]=P.useState(null),[$,M]=P.useState(null),[b,N]=P.useState({count50:0,count100:0}),[I,R]=P.useState("none"),L=P.useRef(null),j=P.useRef(null),W=P.useRef({}),ge=P.useMemo(()=>a.filter(se=>se.payment==="").sort((se,Ee)=>{const ke=se.createdAtDate?.getTime()??0,Ct=Ee.createdAtDate?.getTime()??0;return ke-Ct}),[a]),H=P.useMemo(()=>{if(!o.trim())return ge;const se=o.trim().toLowerCase();return ge.filter(Ee=>`${Ee.ticket} ${Ee.id} ${Ee.callNumber} ${Ee.items} ${ji(Ee.id)}`.toLowerCase().includes(se))},[o,ge]),G=P.useMemo(()=>{const se=H.find(ke=>ke.id===u);if(se)return se;const Ee=a.find(ke=>ke.id===u);return Ee||(H[0]??null)},[H,u,a]),le=P.useMemo(()=>u?[...k[u]??[]].reverse():[],[k,u]),ve=P.useMemo(()=>G?jf(G):[],[G]),He=P.useMemo(()=>G?ji(G.id):"----",[G]);P.useEffect(()=>{!G&&H.length>0&&d(H[0].id)},[H,G]),P.useEffect(()=>{if(!G)return;const se=W.current[G.id];se&&se.scrollIntoView({block:"nearest",behavior:"smooth"})},[G]);const Y=P.useMemo(()=>G?Math.floor(G.total/df):0,[G]),te=P.useMemo(()=>G?Math.floor(G.total/gc):0,[G]);P.useEffect(()=>{if(!G){N({count50:0,count100:0});return}const Ee=G.raw.adjustments?.voucherUsage??gb(G.id),ke={count50:Math.min(Math.max(0,Ee.count50),Y),count100:Math.min(Math.max(0,Ee.count100),te)};N(ke)},[G,Y,te]),P.useEffect(()=>{if(!G){R("none");return}const se=G.raw.items??{};if(!wb.some(de=>(se[de]??0)>0)){R("none");return}const Ct=G.raw.adjustments?.jankenOutcome??yb(G.id);R(Ct)},[G]);const me=P.useMemo(()=>b.count50*df+b.count100*gc,[b]),we=P.useMemo(()=>b.count50+b.count100,[b]),Ce=P.useMemo(()=>{if(!G)return!1;const se=G.raw.items??{};return wb.some(Ee=>(se[Ee]??0)>0)},[G]),be=P.useMemo(()=>Ce?HB(I):0,[I,Ce]),Se=P.useMemo(()=>{if(!G)return 0;const se=G.total,Ee=Ce?se+be:se;return Ee<0?0:Ee},[G,Ce,be]),$e=P.useMemo(()=>Math.max(Se-me,0),[Se,me]),tt=Ce?"":"",Xe=G?.payment!=="",et=P.useCallback(se=>{N(Ee=>{const ke=Ee.count50+se,Ct=Math.min(Math.max(0,ke),Y);return{...Ee,count50:Ct}})},[Y]),Wn=P.useCallback(se=>{N(Ee=>{const ke=Ee.count100+se,Ct=Math.min(Math.max(0,ke),te);return{...Ee,count100:Ct}})},[te]),Qn=P.useCallback(se=>{const Ee=se.currentTarget.value;R(Ee)},[]),Jt=P.useMemo(()=>a.filter(se=>se.payment==="").sort((se,Ee)=>{const ke=se.createdAtDate?.getTime()??0;return(Ee.createdAtDate?.getTime()??0)-ke}).slice(0,6),[a]),It=P.useMemo(()=>({waiting:ge.length,totalDue:ge.reduce((se,Ee)=>se+Ee.total,0),settledToday:Jt.length}),[ge,Jt]),fr=P.useCallback(se=>se?(d(se.id),c(""),!0):!1,[c,d]),_r=P.useCallback((se,Ee)=>{V(ke=>{const Ct=[...ke[se]??[],{status:Ee,time:new Date().toISOString()}];return{...ke,[se]:Ct}})},[]),Zn=P.useCallback(async(se,Ee,ke)=>{q(se.id),M(null);try{await ya(se.id,se.ticket,{payment:Ee,progress:se.progress,adjustments:ke?{voucherUsage:ke.voucherUsage,jankenOutcome:ke.jankenOutcome}:void 0}),_r(se.id,Ee)}catch(Ct){throw console.error("",Ct),M(""),Ct}finally{q(null)}},[_r]),kt=P.useCallback(async se=>{try{const Ee=G?.id===se.id?b:gb(se.id),ke=Math.max(0,Math.floor(se.total/df)),Ct=Math.max(0,Math.floor(se.total/gc)),de={count50:Math.min(Math.max(0,Ee.count50),ke),count100:Math.min(Math.max(0,Ee.count100),Ct)},Oe=G?.id===se.id?Ce?I:"none":yb(se.id);await Zn(se,"",{voucherUsage:de,jankenOutcome:Oe}),zB(se.id,de),GB(se.id,Oe),u===se.id&&(S(""),R("none"),d(null))}catch{}},[I,Zn,u,G?.id,Ce,b]),vt=P.useCallback(async se=>{const Ee=` ${se.callNumber}`;if(window.confirm(`${Ee} 
`))try{await Zn(se,"",{voucherUsage:{count50:0,count100:0},jankenOutcome:"none"}),vb(se.id),_b(se.id),u===se.id&&(N({count50:0,count100:0}),S(""),R("none"),d(null))}catch{}},[Zn,u]),Ln=P.useCallback(async se=>{try{const Ee=se.progress===""?"":se.progress;q(se.id),M(null);try{await ya(se.id,se.ticket,{payment:"",progress:Ee,adjustments:{voucherUsage:{count50:0,count100:0},jankenOutcome:"none"}}),_r(se.id,"")}catch(ke){throw console.error("",ke),M(""),ke}finally{q(null)}vb(se.id),_b(se.id),u===se.id&&(N({count50:0,count100:0}),R("none")),d(se.id),S(se.progress===""?"":"")}catch{}},[u,_r]),Bn=P.useCallback(()=>{if(j.current?.stop(),j.current=null,L.current){const se=L.current.srcObject;se instanceof MediaStream&&se.getTracks().forEach(Ee=>Ee.stop()),L.current.srcObject=null}w(!1)},[j,w,L]);P.useEffect(()=>()=>Bn(),[Bn]);const dr=P.useCallback(se=>{const Ee=se.trim();if(!Ee)return null;const ke=Ee.toLowerCase(),Ct=ke.match(/t[-_ ]?(\w{3,})/),de=ke.match(/#(\d{3,})/),Oe=ke.match(/(?:no\.?|call||#)?\s*(\d{1,4})$/),De=a.find(Ue=>ji(Ue.id).toLowerCase()===ke);if(De)return De;const Me=Ct?`T-${Ct[1]}`:null,nt=de?`#${de[1]}`:null,ye=Oe?Number.parseInt(Oe[1],10):null;if(Me){const Ue=a.find(Fe=>Fe.ticket.toLowerCase()===Me.toLowerCase());if(Ue)return Ue}if(nt){const Ue=a.find(Fe=>Fe.id.toLowerCase()===nt.toLowerCase());if(Ue)return Ue}if(ye){const Ue=a.find(Fe=>Fe.callNumber===ye);if(Ue)return Ue}return a.find(Ue=>Ue.ticket.toLowerCase()===ke)??a.find(Ue=>Ue.id.toLowerCase()===ke)??a.find(Ue=>Ue.callNumber.toString()===ke)??null},[a]),zt=P.useCallback(se=>{const Ee=dr(se);Ee?(fr(Ee),S(` ${Ee.ticket}  ${Ee.callNumber} ${ji(Ee.id)}`),C(null),g(!1)):(S(`QR${se}`),C(""))},[dr,fr]);P.useEffect(()=>{if(!m){Bn();return}let se=!1;return(async()=>{if(L.current){w(!0),C(null),S("");try{const Ct=await new kB(void 0,{delayBetweenScanAttempts:200}).decodeFromVideoDevice(void 0,L.current,(de,Oe,De)=>{if(se){De.stop();return}de?(zt(de.getText()),De.stop()):Oe&&!(Oe instanceof oe)&&C(Oe.message)});if(se){Ct.stop();return}j.current=Ct,S("QR")}catch(ke){if(se)return;console.error(ke),C(ke instanceof Error?ke.message:""),g(!1)}}})(),()=>{se=!0,Bn()}},[zt,m,Bn]);const xr=P.useCallback(()=>{C(null),S(null),g(!0)},[]),zr=P.useCallback(()=>{g(!1),Bn()},[Bn]);return t?p.jsx("p",{children:""}):p.jsxs("div",{className:"admin-payment-page",children:[m&&p.jsx("div",{className:"admin-payment-scanner-overlay",role:"dialog","aria-modal":"true",children:p.jsxs("div",{className:"admin-payment-scanner-dialog",children:[p.jsxs("header",{className:"admin-payment-scanner-header",children:[p.jsx("h2",{children:"QR"}),p.jsx("button",{type:"button",className:"admin-payment-scanner-close",onClick:zr,children:""})]}),p.jsx("video",{ref:L,className:"admin-payment-scanner-video",autoPlay:!0,muted:!0,playsInline:!0}),p.jsxs("footer",{className:"admin-payment-scanner-footer",children:[p.jsx("span",{className:"admin-payment-scan-status",children:_?E??"":E??""}),p.jsxs("div",{className:"admin-payment-scanner-actions",children:[D&&p.jsx("p",{className:"admin-payment-scan-error",role:"alert",children:D}),p.jsx("button",{type:"button",className:"admin-payment-stop",onClick:zr,children:""})]})]})]})}),p.jsxs("section",{className:"admin-payment-summary","aria-label":"",children:[p.jsxs("div",{className:"admin-payment-summary-card",children:[p.jsx("p",{className:"admin-payment-summary-title",children:""}),p.jsxs("p",{className:"admin-payment-summary-value",children:[It.waiting,""]})]}),p.jsxs("div",{className:"admin-payment-summary-card",children:[p.jsx("p",{className:"admin-payment-summary-title",children:""}),p.jsx("p",{className:"admin-payment-summary-value",children:vi(It.totalDue)})]}),p.jsxs("div",{className:"admin-payment-summary-card",children:[p.jsx("p",{className:"admin-payment-summary-title",children:""}),p.jsxs("p",{className:"admin-payment-summary-value",children:[It.settledToday,""]})]})]}),r&&p.jsx("p",{className:"admin-error",role:"alert",children:""}),$&&p.jsx("p",{className:"admin-error",role:"alert",children:$}),p.jsxs("div",{className:"admin-payment-shell",children:[p.jsxs("aside",{className:"admin-payment-sidebar","aria-label":"",children:[p.jsxs("div",{className:"admin-payment-sidebar-header",children:[p.jsx("h2",{children:""}),p.jsxs("div",{className:"field",children:[p.jsx("label",{htmlFor:"payment-search",children:""}),p.jsx("input",{id:"payment-search",type:"search",placeholder:"",value:o,onChange:se=>c(se.target.value)})]}),p.jsx("button",{type:"button",className:"admin-payment-qr-button",onClick:xr,children:"QR"})]}),E&&!m&&p.jsx("p",{className:"admin-payment-scan-message",children:E}),D&&!m&&p.jsx("p",{className:"admin-payment-scan-error",role:"alert",children:D}),p.jsxs("div",{className:"admin-payment-list",children:[H.map(se=>p.jsx("button",{type:"button",className:`admin-payment-list-item${G?.id===se.id?" active":""}`,onClick:()=>d(se.id),ref:Ee=>{W.current[se.id]=Ee},"aria-pressed":G?.id===se.id,children:p.jsx("p",{className:"admin-payment-ticket","aria-label":` ${se.callNumber}`,children:se.callNumber})},se.id)),H.length===0&&p.jsx("p",{className:"admin-payment-empty",children:""})]})]}),p.jsxs("section",{className:"admin-payment-main","aria-live":"polite",children:[G?p.jsxs("article",{className:"admin-payment-detail-card",children:[p.jsxs("div",{className:"admin-payment-detail-header",children:[p.jsxs("div",{className:"admin-payment-identifiers",children:[p.jsx("p",{className:"admin-payment-ticket large","aria-label":` ${G.callNumber}`,children:G.callNumber}),p.jsxs("p",{className:"admin-payment-order",children:[" ",He]}),p.jsxs("p",{className:"admin-payment-order subtle",children:[" ",G.id]}),p.jsxs("p",{className:"admin-payment-order subtle",children:[" ",G.ticket]})]}),p.jsxs("div",{className:"admin-payment-total-box",children:[p.jsxs("section",{className:"admin-payment-breakdown-panel","aria-label":"",children:[p.jsxs("div",{className:"admin-payment-breakdown-row prominent",children:[p.jsx("p",{className:"admin-payment-breakdown-label",children:""}),p.jsx("p",{className:"admin-payment-cash-due","aria-live":"polite",children:vi($e)})]}),p.jsxs("div",{className:"admin-payment-breakdown-row",children:[p.jsx("p",{className:"admin-payment-breakdown-label",children:"50"}),p.jsxs("div",{className:"admin-payment-voucher-control","aria-label":"50",children:[p.jsx("button",{type:"button",className:"admin-payment-adjust",onClick:()=>et(-1),disabled:b.count50===0,"aria-label":"501",children:"-"}),p.jsxs("span",{className:"admin-payment-voucher-count","aria-live":"polite",children:[b.count50," ",vi(b.count50*df),""]}),p.jsx("button",{type:"button",className:"admin-payment-adjust",onClick:()=>et(1),disabled:b.count50>=Y,"aria-label":"501",children:"+"})]})]}),p.jsxs("div",{className:"admin-payment-breakdown-row",children:[p.jsx("p",{className:"admin-payment-breakdown-label",children:"100"}),p.jsxs("div",{className:"admin-payment-voucher-control","aria-label":"100",children:[p.jsx("button",{type:"button",className:"admin-payment-adjust",onClick:()=>Wn(-1),disabled:b.count100===0,"aria-label":"1001",children:"-"}),p.jsxs("span",{className:"admin-payment-voucher-count","aria-live":"polite",children:[b.count100," ",vi(b.count100*gc),""]}),p.jsx("button",{type:"button",className:"admin-payment-adjust",onClick:()=>Wn(1),disabled:b.count100>=te,"aria-label":"1001",children:"+"})]})]}),Ce&&p.jsxs("div",{className:"admin-payment-breakdown-row",children:[p.jsx("p",{className:"admin-payment-breakdown-label",children:""}),p.jsx("p",{className:`admin-payment-janken-value${be>0?" is-plus":be<0?" is-minus":""}`,children:ig(be)})]}),p.jsx("hr",{className:"admin-payment-breakdown-divider"}),p.jsxs("p",{className:"admin-payment-breakdown-total","aria-live":"polite",children:[tt," ",vi(Se)]}),Ce&&p.jsxs("p",{className:"admin-payment-breakdown-note",children:[" ",vi(G.total)]})]}),Ce&&p.jsxs("section",{className:"admin-payment-janken-panel","aria-label":"",children:[p.jsx("p",{className:"admin-payment-janken-title",children:""}),p.jsxs("fieldset",{className:"admin-payment-janken-fieldset","aria-disabled":Xe,children:[p.jsx("legend",{className:"sr-only",children:""}),p.jsx("div",{className:"admin-payment-janken-options",children:XB.map(se=>{const Ee=se.delta===0?`${vi(0)}`:ig(se.delta),ke=`admin-payment-janken-option${I===se.value?" is-active":""}${Xe?" is-disabled":""}`;return p.jsxs("label",{className:ke,"data-tone":se.tone,children:[p.jsx("input",{type:"radio",name:"admin-payment-janken",value:se.value,checked:I===se.value,onChange:Qn,disabled:Xe}),p.jsxs("span",{className:"admin-payment-janken-option-header",children:[p.jsx("span",{className:`admin-payment-janken-badge ${se.tone}`,"aria-hidden":"true",children:Ee}),p.jsx("span",{className:"admin-payment-janken-label",children:se.label})]}),p.jsx("span",{className:"admin-payment-janken-description",children:se.description})]},se.value)})})]}),p.jsxs("div",{className:"admin-payment-janken-footer",children:[p.jsxs("div",{className:"admin-payment-janken-summary","aria-live":"polite",children:[p.jsx("span",{className:"admin-payment-janken-summary-label",children:""}),p.jsx("span",{className:`admin-payment-janken-value${be>0?" is-plus":be<0?" is-minus":""}`,children:ig(be)})]}),p.jsx("span",{className:"admin-payment-janken-helper",children:""})]})]}),p.jsxs("div",{className:"admin-payment-voucher-summary","aria-live":"polite",children:[p.jsx("p",{className:"admin-payment-voucher-summary-label",children:""}),p.jsxs("p",{className:"admin-payment-voucher-summary-value",children:[we," ",p.jsxs("span",{className:"admin-payment-voucher-summary-amount",children:["",vi(me),""]})]}),b.count50>0&&p.jsxs("p",{className:"admin-payment-voucher-summary-detail",children:["50: ",b.count50,"100: ",b.count100,""]})]}),p.jsxs("div",{className:"admin-payment-actions",children:[G.payment===""&&p.jsxs(p.Fragment,{children:[p.jsx("button",{type:"button",className:"admin-payment-action",onClick:()=>kt(G),disabled:U===G.id,children:""}),p.jsx("button",{type:"button",className:"admin-payment-inline-button",onClick:()=>vt(G),disabled:U===G.id,children:""})]}),(G.payment===""||G.payment==="")&&p.jsx("button",{type:"button",className:"admin-payment-action admin-payment-action--ghost",onClick:()=>Ln(G),disabled:U===G.id,children:""})]})]})]}),p.jsxs("div",{className:"admin-payment-detail-body",children:[p.jsxs("section",{className:"admin-payment-detail-items",children:[p.jsx("h3",{children:""}),ve.length>0?p.jsx(dv,{entries:ve,totalAriaLabel:"",variant:"compact",className:"admin-payment-items-inline"}):p.jsx("p",{className:"admin-payment-detail-placeholder",children:""})]}),p.jsxs("section",{className:"admin-payment-detail-meta",children:[p.jsxs("dl",{children:[p.jsxs("div",{children:[p.jsx("dt",{children:""}),p.jsx("dd",{children:p.jsx("span",{className:`admin-payment-chip ${KB[G.payment]}`,children:Rc(G.payment,i)})})]}),p.jsxs("div",{children:[p.jsx("dt",{children:""}),p.jsx("dd",{children:G.createdAt})]}),p.jsxs("div",{children:[p.jsx("dt",{children:""}),p.jsx("dd",{children:He})]}),p.jsxs("div",{children:[p.jsx("dt",{children:""}),p.jsx("dd",{children:G.ticket})]})]}),p.jsx("p",{className:"admin-payment-hint",children:""})]})]})]}):p.jsx("div",{className:"admin-payment-detail-placeholder",children:p.jsx("p",{className:"admin-payment-empty",children:""})}),p.jsxs("section",{className:"admin-payment-history","aria-label":"",children:[p.jsx("header",{children:p.jsx("h3",{children:""})}),G?le.length>0?p.jsx("ul",{children:le.map((se,Ee)=>p.jsxs("li",{children:[p.jsx("span",{children:new Date(se.time).toLocaleString()}),p.jsx("span",{children:YB[se.status]})]},`${se.time}-${Ee}`))}):p.jsx("p",{className:"admin-payment-history-empty",children:""}):p.jsx("p",{className:"admin-payment-history-empty",children:""})]}),p.jsxs("section",{className:"admin-payment-recent","aria-label":"",children:[p.jsxs("header",{className:"admin-payment-recent-header",children:[p.jsx("h3",{children:""}),p.jsx("p",{className:"admin-payment-recent-sub",children:""})]}),p.jsxs("ul",{children:[Jt.map(se=>{const Ee=ji(se.id),ke=se.items.replace(//g,"");return p.jsx("li",{children:p.jsxs("article",{className:"admin-payment-recent-card",children:[p.jsxs("div",{className:"admin-payment-recent-top",children:[p.jsxs("span",{className:"admin-payment-recent-ticket","aria-label":` ${se.callNumber}`,children:[" ",se.callNumber]}),p.jsxs("div",{className:"admin-payment-recent-meta",children:[p.jsx("span",{className:"admin-payment-recent-total",children:vi(se.total)}),p.jsx("time",{dateTime:se.createdAt,className:"admin-payment-time",children:se.createdAt})]})]}),p.jsx("p",{className:"admin-payment-recent-items","aria-label":"",children:ke}),p.jsxs("dl",{className:"admin-payment-recent-identifiers",children:[p.jsxs("div",{children:[p.jsx("dt",{children:""}),p.jsx("dd",{children:Ee})]}),p.jsxs("div",{children:[p.jsx("dt",{children:""}),p.jsx("dd",{children:se.id})]}),p.jsxs("div",{children:[p.jsx("dt",{children:""}),p.jsx("dd",{children:se.ticket})]})]}),p.jsx("div",{className:"admin-payment-recent-actions",children:p.jsx("button",{type:"button",className:"admin-payment-revert",onClick:()=>Ln(se),disabled:U===se.id,children:""})})]})},se.id)}),Jt.length===0&&p.jsx("li",{className:"admin-payment-recent-empty",children:""})]})]})]})]})]})}function QB(){const[n,e]=P.useState(!0),[t,r]=P.useState(""),[i,a]=P.useState(new Date),o=()=>{e(u=>{const d=!u;return a(new Date),d})},c=()=>{a(new Date)};return p.jsxs("div",{className:"admin-grid",style:{gap:"24px",maxWidth:720},children:[p.jsxs("section",{className:"admin-card",children:[p.jsx("h3",{children:""}),p.jsx("p",{children:""}),p.jsxs("div",{className:"admin-toggle",role:"switch","aria-checked":n,children:[p.jsx("input",{type:"checkbox",checked:n,onChange:o}),p.jsx("span",{children:n?"":""})]}),p.jsx("p",{style:{color:"#64748b"},children:n?"":""}),p.jsx("div",{className:"admin-divider"}),p.jsxs("div",{className:"admin-list",children:[p.jsx("label",{htmlFor:"reception-memo",children:""}),p.jsx("textarea",{id:"reception-memo",rows:4,style:{borderRadius:12,border:"1px solid #cbd5f5",padding:"12px 16px",fontSize:"1rem",resize:"vertical"},placeholder:":  30 ",value:t,onChange:u=>r(u.target.value)}),p.jsx("button",{type:"button",className:"admin-primary-button",onClick:c,children:""}),i&&p.jsxs("small",{style:{color:"#64748b"},children:[": ",i.toLocaleString("ja-JP")]})]})]}),p.jsxs("section",{className:"admin-card",children:[p.jsx("h3",{children:""}),p.jsx("p",{children:" Slack / LINE WORKS Webhook URL "}),p.jsxs("div",{className:"admin-list",children:[p.jsx("label",{htmlFor:"reception-webhook",children:"Webhook URL"}),p.jsx("input",{id:"reception-webhook",placeholder:"https://hooks.slack.com/...",style:{borderRadius:12,border:"1px solid #cbd5f5",padding:"10px 14px",fontSize:"1rem"}}),p.jsx("button",{type:"button",className:"admin-secondary-button",children:""})]})]})]})}function ZB(n,e){const t=n.match(/^(\d{1,2}):(\d{2})$/);if(!t)return null;const[,r,i]=t,a=Number.parseInt(r,10),o=Number.parseInt(i,10);if(Number.isNaN(a)||Number.isNaN(o))return null;const c=new Date(e);return c.setHours(a,o,0,0),c.getTime()>e.getTime()&&c.setDate(c.getDate()-1),c}function JB(n,e){const t=ZB(n,e);if(!t)return null;const r=e.getTime()-t.getTime();if(r<0)return null;const i=Math.floor(r/6e4);if(i<1)return"1";const a=Math.floor(i/60),o=i%60;return a===0?`${i}`:o===0?`${a}`:`${a}${o}`}function eV(){const n=P.useMemo(()=>{const H=new Date;H.setHours(0,0,0,0);const G=new Date(H);return G.setDate(G.getDate()+1),{start:H,end:G}},[]),{orders:e,loading:t,error:r}=qc(n),{language:i}=Ki(),a=P.useMemo(()=>e.map(wp),[e]),[o,c]=P.useState(""),[u,d]=P.useState(!1),[m,g]=P.useState(null),[_,w]=P.useState(null),[E,S]=P.useState(()=>new Date),[D,C]=P.useState(null),[k,V]=P.useState(null),U=o.trim().toLowerCase(),q=P.useMemo(()=>U?a.filter(H=>[H.callNumber.toString(),H.ticket,H.id,H.items,H.progress,H.payment,Rc(H.payment,i),ji(H.id)].filter(le=>typeof le=="string").some(le=>le.toLowerCase().includes(U))):a,[a,U,i]),$=P.useMemo(()=>q.filter(H=>H.progress==="").sort((H,G)=>{const le=H.createdAtDate?.getTime()??0,ve=G.createdAtDate?.getTime()??0;return le-ve}),[q]),M=P.useMemo(()=>q.filter(H=>H.progress==="").sort((H,G)=>{const le=H.createdAtDate?.getTime()??0;return(G.createdAtDate?.getTime()??0)-le}),[q]),b=P.useMemo(()=>q.filter(H=>H.progress==="").sort((H,G)=>{const le=H.createdAtDate?.getTime()??0,ve=G.createdAtDate?.getTime()??0;return le-ve}),[q]),N=P.useMemo(()=>({ready:$.length,delivered:M.length,upcoming:b.length}),[$,M,b]),I=P.useCallback(async H=>{C(H.id),V(null);try{await ya(H.id,H.ticket,{progress:"",payment:H.payment})}catch(G){console.error("",G),V("")}finally{C(null)}},[]),R=P.useCallback(async H=>{C(H.id),V(null);try{await ya(H.id,H.ticket,{progress:"",payment:H.payment})}catch(G){console.error("",G),V("")}finally{C(null)}},[]);P.useEffect(()=>{const H=window.setInterval(()=>{S(new Date)},6e4);return()=>{window.clearInterval(H)}},[]),P.useEffect(()=>{if(!U){w(null);return}const H=q[0];w(H?.id??null)},[q,U]),P.useEffect(()=>{if(!_||typeof document>"u")return;const H=document.querySelector(`[data-order-id="${_}"]`);H&&H.scrollIntoView({behavior:"smooth",block:"center"})},[_,$.length,M.length,b.length]);const L=H=>{c(H.target.value),g(null)},j=()=>{c(""),w(null),g(null)},W=P.useCallback(H=>JB(H,E),[E]),ge=H=>{const G=H.trim();if(!G)return;const le=a.find(ve=>ve.ticket.toLowerCase()===G.toLowerCase()||ve.id.toLowerCase()===G.toLowerCase()||ji(ve.id).toLowerCase()===G.toLowerCase()||ve.callNumber.toString()===G);c(G),w(le?.id??null),g(le?null:`${G}`),d(!1)};return t?p.jsx("p",{children:""}):p.jsxs("div",{className:"admin-serving-page",children:[p.jsxs("section",{className:"admin-serving-controls","aria-label":"",children:[p.jsxs("div",{className:"admin-serving-search",children:[p.jsx("label",{htmlFor:"serving-search-input",children:""}),p.jsxs("div",{className:"admin-serving-search-input",children:[p.jsx("input",{id:"serving-search-input",type:"search",value:o,onChange:L,placeholder:"","aria-describedby":"serving-search-hint"}),o&&p.jsx("button",{type:"button",className:"admin-serving-search-clear",onClick:j,children:""})]}),p.jsx("p",{id:"serving-search-hint",className:"admin-serving-search-hint",children:""})]}),p.jsxs("div",{className:"admin-serving-controls-actions",children:[p.jsx("button",{type:"button",className:"admin-serving-button ghost",onClick:()=>{g(null),d(!0)},children:"QR"}),m&&p.jsx("p",{className:"admin-serving-scanner-error",children:m})]})]}),p.jsxs("section",{className:"admin-serving-summary","aria-label":"",children:[p.jsxs("div",{className:"admin-serving-summary-card",children:[p.jsx("p",{className:"admin-serving-summary-title",children:""}),p.jsxs("p",{className:"admin-serving-summary-value",children:[N.ready,""]})]}),p.jsxs("div",{className:"admin-serving-summary-card",children:[p.jsx("p",{className:"admin-serving-summary-title",children:""}),p.jsxs("p",{className:"admin-serving-summary-value",children:[N.upcoming,""]})]}),p.jsxs("div",{className:"admin-serving-summary-card",children:[p.jsx("p",{className:"admin-serving-summary-title",children:""}),p.jsxs("p",{className:"admin-serving-summary-value",children:[N.delivered,""]})]})]}),r&&p.jsx("p",{className:"admin-error",role:"alert",children:""}),k&&p.jsx("p",{className:"admin-error",role:"alert",children:k}),o&&q.length===0&&p.jsxs("p",{className:"admin-serving-search-empty",role:"status",children:["",o,""]}),p.jsxs("div",{className:"admin-serving-columns",children:[p.jsxs("section",{className:"admin-serving-section","aria-label":"",children:[p.jsxs("header",{className:"admin-serving-section-header",children:[p.jsx("h2",{children:""}),p.jsx("p",{children:""})]}),p.jsxs("div",{className:"admin-serving-list",children:[$.map(H=>{const G=ji(H.id),le=W(H.createdAt),ve=jf(H);return p.jsxs("article",{className:`admin-serving-card${H.id===_?" highlight":""}`,"data-order-id":H.id,children:[p.jsxs("header",{className:"admin-serving-card-header-inline",children:[p.jsxs("div",{className:"admin-serving-header-primary",children:[p.jsx("span",{className:"admin-serving-ticket","aria-label":` ${H.callNumber}`,children:p.jsx("span",{className:"admin-payment-ticket badge",children:H.callNumber})}),p.jsxs("span",{className:"admin-serving-code",children:[" ",G]}),p.jsxs("span",{className:"admin-serving-progress-code",children:[" ",H.ticket]})]}),p.jsxs("div",{className:"admin-serving-header-meta",children:[p.jsx("time",{dateTime:H.createdAt,className:"admin-serving-time",children:H.createdAt}),le&&p.jsx("span",{className:"admin-serving-elapsed",children:le})]})]}),ve.length>0&&p.jsx(dv,{entries:ve,totalAriaLabel:"",variant:"compact",className:"admin-serving-items-inline"}),p.jsxs("footer",{children:[p.jsxs("div",{className:"admin-serving-meta",children:[p.jsx("span",{className:`admin-serving-payment ${H.payment===""?"paid":"unpaid"}`,children:Rc(H.payment,i)}),p.jsxs("span",{className:"admin-serving-total",children:["",H.total.toLocaleString()]})]}),p.jsx("div",{className:"admin-serving-actions",children:p.jsx("button",{type:"button",className:"admin-serving-button primary",onClick:()=>I(H),disabled:D===H.id,children:""})})]})]},H.id)}),$.length===0&&p.jsx("p",{className:"admin-serving-empty",children:""})]})]}),p.jsxs("aside",{className:"admin-serving-side",children:[p.jsxs("section",{className:"admin-serving-section","aria-label":"",children:[p.jsxs("header",{className:"admin-serving-section-header",children:[p.jsx("h2",{children:""}),p.jsx("p",{children:""})]}),p.jsxs("div",{className:"admin-serving-list compact",children:[b.map(H=>{const G=ji(H.id),le=W(H.createdAt),ve=jf(H);return p.jsxs("article",{className:`admin-serving-mini-card${H.id===_?" highlight":""}`,"data-order-id":H.id,children:[p.jsxs("div",{className:"admin-serving-mini-header",children:[p.jsx("span",{className:"admin-serving-ticket","aria-label":` ${H.callNumber}`,children:p.jsx("span",{className:"admin-payment-ticket badge small",children:H.callNumber})}),p.jsxs("span",{className:"admin-serving-code",children:[" ",G]}),p.jsxs("span",{className:"admin-serving-progress-code",children:[" ",H.ticket]})]}),ve.length>0&&p.jsx(dv,{entries:ve,showTotal:!1,variant:"compact",className:"admin-serving-items-inline"}),p.jsxs("div",{className:"admin-serving-time-group",children:[p.jsx("time",{dateTime:H.createdAt,className:"admin-serving-time",children:H.createdAt}),le&&p.jsx("span",{className:"admin-serving-elapsed",children:le})]}),p.jsx("div",{className:"admin-serving-mini-actions",children:p.jsx("button",{type:"button",className:"admin-serving-button primary small",onClick:()=>I(H),disabled:D===H.id,children:""})})]},H.id)}),b.length===0&&p.jsx("p",{className:"admin-serving-empty",children:""})]})]}),p.jsxs("section",{className:"admin-serving-section","aria-label":"",children:[p.jsxs("header",{className:"admin-serving-section-header",children:[p.jsx("h2",{children:""}),p.jsx("p",{children:""})]}),p.jsxs("div",{className:"admin-serving-list compact",children:[M.map(H=>{const G=ji(H.id),le=W(H.createdAt);return p.jsxs("article",{className:`admin-serving-mini-card${H.id===_?" highlight":""}`,"data-order-id":H.id,children:[p.jsxs("div",{children:[p.jsx("p",{className:"admin-serving-ticket","aria-label":` ${H.callNumber}`,children:p.jsx("span",{className:"admin-payment-ticket badge small",children:H.callNumber})}),p.jsxs("p",{className:"admin-serving-code",children:[" ",G]}),p.jsxs("p",{className:"admin-serving-progress-code",children:[" ",H.ticket]})]}),p.jsxs("div",{className:"admin-serving-time-group",children:[p.jsx("time",{dateTime:H.createdAt,className:"admin-serving-time",children:H.createdAt}),le&&p.jsx("span",{className:"admin-serving-elapsed",children:le})]}),p.jsx("button",{type:"button",className:"admin-serving-button ghost",onClick:()=>R(H),disabled:D===H.id,children:""})]},H.id)}),M.length===0&&p.jsx("p",{className:"admin-serving-empty",children:""})]})]})]})]}),u&&p.jsx(tV,{onDetected:ge,onCancel:()=>{d(!1),g(null)},onCameraError:H=>g(H)})]})}function tV({onDetected:n,onCancel:e,onCameraError:t}){const r=P.useRef(null),[i,a]=P.useState(!0),[o,c]=P.useState(null),u=P.useRef(!1);return P.useEffect(()=>{const d=new DB;let m;return u.current=!1,(async()=>{const _=r.current??void 0;if(!_){const w="";c(w),t(w);return}try{m=await d.decodeFromVideoDevice(void 0,_,(w,E,S)=>{if(w&&!u.current&&(u.current=!0,S.stop(),n(w.getText())),E&&!(E instanceof Error&&E.name==="NotFoundException")){const D=E instanceof Error?E.message:String(E);c(D)}}),a(!1)}catch(w){const E=w instanceof Error?w.message:"";c(E),t(E)}})(),()=>{m?.stop()}},[n,t]),P.useEffect(()=>{o&&t(o)},[o,t]),p.jsx("div",{className:"admin-serving-scanner-overlay",role:"dialog","aria-modal":"true","aria-label":"QR",children:p.jsxs("div",{className:"admin-serving-scanner-dialog",children:[p.jsxs("header",{className:"admin-serving-scanner-header",children:[p.jsx("h2",{children:"QR"}),p.jsx("button",{type:"button",className:"admin-serving-button ghost",onClick:e,children:""})]}),p.jsx("p",{className:"admin-serving-scanner-hint",children:"QR"}),p.jsxs("div",{className:"admin-serving-scanner-video-wrap",children:[p.jsx("video",{ref:r,className:"admin-serving-scanner-video",autoPlay:!0,muted:!0,playsInline:!0}),i&&p.jsx("span",{className:"admin-serving-scanner-status",children:""})]}),o&&p.jsx("p",{className:"admin-serving-scanner-error",children:o})]})})}const Nv="app:kitchen-toast-test";function nV(n={}){if(typeof window>"u")return;const e={orderId:n.orderId??"TEST-ORDER",callNumber:n.callNumber??Math.floor(Math.random()*900+100),total:n.total??1500,itemSummary:n.itemSummary??":  1 /  1",createdAt:n.createdAt??new Date().toISOString()},t=new CustomEvent(Nv,{detail:e});window.dispatchEvent(t)}function rV(n){if(typeof window>"u")return()=>{};const e=t=>{n(t.detail)};return window.addEventListener(Nv,e),()=>{window.removeEventListener(Nv,e)}}const iV=[{id:"system",label:""},{id:"light",label:""},{id:"dark",label:""}],aV=[{id:"admin",label:"",enabled:!0},{id:"kitchen",label:"",enabled:!0},{id:"staff",label:"",enabled:!1}];function sV(){const[n,e]=P.useState("system"),[t,r]=P.useState(!0),[i,a]=P.useState(!0),{menuItems:o,baseMenuItemMap:c,overrides:u,updateMenuItem:d,resetMenuItem:m,resetAllMenuItems:g}=dl(),_=()=>Object.entries(c).reduce((R,[L,j])=>(R[L]={label:j.label,price:String(j.price)},R),{}),w=()=>Object.keys(c).reduce((R,L)=>(R[L]=null,R),{}),[E,S]=P.useState(()=>_()),[D,C]=P.useState(()=>w()),[k,V]=P.useState(null),[U,q]=P.useState({});P.useEffect(()=>{S(_()),C(w())},[]),P.useEffect(()=>{S(R=>{const L={...R};let j=!1;return o.forEach(W=>{const ge=R[W.key],H=String(W.price),G=W.label;if(!ge){L[W.key]={label:G,price:H},j=!0;return}const le=ge.price!==H,ve=ge.label!==G;!le&&!ve||(!le&&ge.price!==H&&(L[W.key]={...ge,price:H},j=!0),!ve&&ge.label!==G&&(L[W.key]={...ge,label:G},j=!0))}),j?L:R})},[o]);const $=(R,L,j)=>{S(W=>({...W,[R]:{...W[R],[L]:j}})),C(W=>({...W,[R]:null})),V(null)},M=async R=>{const L=E[R];if(!L)return;const j=L.label.trim();if(!j){C(H=>({...H,[R]:{type:"error",message:""}}));return}if(j.length>40){C(H=>({...H,[R]:{type:"error",message:"40"}}));return}const W=Number(L.price);if(!Number.isFinite(W)||W<0){C(H=>({...H,[R]:{type:"error",message:"0"}}));return}const ge=Math.round(W);try{await d(R,{label:j,price:ge}),S(H=>({...H,[R]:{label:j,price:String(ge)}})),C(H=>({...H,[R]:{type:"success",message:""}})),V(null)}catch(H){console.error("",H),C(G=>({...G,[R]:{type:"error",message:""}}))}},b=async(R,L)=>{V(null),C(j=>({...j,[R]:null})),q(j=>({...j,[R]:!0}));try{await d(R,{soldOut:L}),C(j=>({...j,[R]:{type:"success",message:L?"":""}}))}catch(j){console.error("",j),C(W=>({...W,[R]:{type:"error",message:""}}))}finally{q(j=>{const W={...j};return delete W[R],W})}},N=async R=>{if(V(null),!!!u[R]){const j=o.find(W=>W.key===R);if(!j)return;S(W=>({...W,[R]:{label:j.label,price:String(j.price)}})),C(W=>({...W,[R]:{type:"success",message:""}}));return}try{await m(R);const j=c[R];S(W=>({...W,[R]:{label:j.label,price:String(j.price)}})),C(W=>({...W,[R]:{type:"success",message:""}}))}catch(j){console.error("",j),C(W=>({...W,[R]:{type:"error",message:""}}))}},I=async()=>{if(V(null),!(Object.keys(u).length>0)){V({type:"success",message:""});return}try{await g(),S(_()),C(w()),V({type:"success",message:""})}catch(L){console.error("",L),V({type:"error",message:""})}};return p.jsxs("div",{className:"admin-grid",style:{gap:"24px",maxWidth:720},children:[p.jsxs("section",{className:"admin-card",children:[p.jsxs("header",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:"1rem",flexWrap:"wrap"},children:[p.jsxs("div",{children:[p.jsx("h3",{style:{margin:0},children:""}),p.jsx("p",{style:{margin:"4px 0 0",color:"#475569"},children:""})]}),p.jsx("button",{type:"button",className:"admin-secondary-button",onClick:()=>{I()},children:""})]}),k&&p.jsx("p",{role:"status",style:{marginTop:"12px",padding:"8px 12px",borderRadius:8,backgroundColor:k.type==="success"?"#ecfdf5":"#fee2e2",color:k.type==="success"?"#047857":"#b91c1c"},children:k.message}),p.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"16px",marginTop:"16px"},children:o.map(R=>{const L=E[R.key],j=c[R.key],W=D[R.key],ge=String(R.price),H=L?L.label!==R.label||L.price!==ge:!1,G=!!u[R.key];return p.jsxs("article",{style:{border:"1px solid #e2e8f0",borderRadius:12,padding:"16px",backgroundColor:"#f8fafc",display:"flex",flexDirection:"column",gap:"12px"},children:[p.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:"0.75rem",flexWrap:"wrap"},children:[p.jsxs("div",{children:[p.jsx("h4",{style:{margin:0},children:R.label}),p.jsxs("p",{style:{margin:"4px 0 0",color:"#64748b"},children:["ID: ",R.key]})]}),G&&p.jsx("span",{style:{display:"inline-flex",alignItems:"center",gap:"0.25rem",padding:"4px 10px",borderRadius:999,backgroundColor:"#1e40af",color:"#eff6ff",fontSize:"0.85rem"},children:""})]}),p.jsxs("div",{style:{display:"grid",gap:"12px",gridTemplateColumns:"repeat(auto-fit, minmax(180px, 1fr))"},children:[p.jsxs("label",{style:{display:"flex",flexDirection:"column",gap:"6px"},children:[p.jsx("span",{style:{fontWeight:600},children:""}),p.jsx("input",{type:"text",value:L?.label??"",onChange:le=>$(R.key,"label",le.target.value),placeholder:j.label,style:{borderRadius:8,border:"1px solid #cbd5f5",padding:"10px 12px",fontSize:"1rem"}})]}),p.jsxs("label",{style:{display:"flex",flexDirection:"column",gap:"6px"},children:[p.jsx("span",{style:{fontWeight:600},children:" ()"}),p.jsx("input",{type:"number",min:0,inputMode:"numeric",value:L?.price??"",onChange:le=>$(R.key,"price",le.target.value),style:{borderRadius:8,border:"1px solid #cbd5f5",padding:"10px 12px",fontSize:"1rem"}})]})]}),p.jsxs("div",{className:"admin-menu-soldout-control",children:[p.jsxs("label",{className:"admin-menu-soldout-toggle",children:[p.jsx("input",{type:"checkbox",checked:R.soldOut,onChange:le=>{b(R.key,le.target.checked)},disabled:!!U[R.key]}),p.jsx("span",{children:R.soldOut?"":""})]}),p.jsx("p",{className:"admin-menu-soldout-helper",children:""})]}),p.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"8px"},children:[p.jsx("button",{type:"button",className:"admin-primary-button",onClick:()=>{M(R.key)},disabled:!H,children:""}),p.jsx("button",{type:"button",className:"admin-secondary-button",onClick:()=>{N(R.key)},children:G?"":""}),p.jsxs("span",{style:{color:"#64748b",alignSelf:"center",fontSize:"0.9rem"},children:[": ",j.label,"",j.price.toLocaleString(),""]})]}),W&&p.jsx("p",{role:"status",style:{margin:0,padding:"8px 12px",borderRadius:8,backgroundColor:W.type==="success"?"#ecfdf5":"#fee2e2",color:W.type==="success"?"#047857":"#b91c1c"},children:W.message})]},R.key)})})]}),p.jsxs("section",{className:"admin-card",children:[p.jsx("h3",{children:""}),p.jsx("p",{children:""}),p.jsx("div",{className:"admin-list",children:iV.map(R=>p.jsxs("label",{style:{display:"flex",gap:12,alignItems:"center"},children:[p.jsx("input",{type:"radio",name:"theme",value:R.id,checked:n===R.id,onChange:()=>e(R.id)}),R.label]},R.id))})]}),p.jsxs("section",{className:"admin-card",children:[p.jsx("h3",{children:""}),p.jsxs("div",{className:"admin-list",children:[p.jsxs("label",{style:{display:"flex",alignItems:"center",gap:12},children:[p.jsx("input",{type:"checkbox",checked:t,onChange:R=>r(R.target.checked)}),""]}),p.jsxs("label",{style:{display:"flex",alignItems:"center",gap:12},children:[p.jsx("input",{type:"checkbox",checked:i,onChange:R=>a(R.target.checked)}),""]}),p.jsx("button",{type:"button",className:"admin-secondary-button",onClick:()=>nV(),children:""})]})]}),p.jsxs("section",{className:"admin-card",children:[p.jsx("h3",{children:""}),p.jsx("p",{children:"Firestore "}),p.jsx("ul",{className:"admin-list",style:{margin:0},children:aV.map(R=>p.jsxs("li",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[p.jsxs("div",{children:[p.jsx("p",{style:{margin:0},children:R.label}),p.jsxs("small",{style:{color:"#64748b"},children:["ID: ",R.id]})]}),p.jsxs("label",{style:{display:"flex",alignItems:"center",gap:10},children:[p.jsx("input",{type:"checkbox",defaultChecked:R.enabled})," "]})]},R.id))})]})]})}function oV(n,e){if(n.match(/^[a-z]+:\/\//i))return n;if(n.match(/^\/\//))return window.location.protocol+n;if(n.match(/^[a-z]+:/i))return n;const t=document.implementation.createHTMLDocument(),r=t.createElement("base"),i=t.createElement("a");return t.head.appendChild(r),t.body.appendChild(i),e&&(r.href=e),i.href=n,i.href}const lV=(()=>{let n=0;const e=()=>`0000${(Math.random()*36**4<<0).toString(36)}`.slice(-4);return()=>(n+=1,`u${e()}${n}`)})();function io(n){const e=[];for(let t=0,r=n.length;t<r;t++)e.push(n[t]);return e}let nc=null;function K3(n={}){return nc||(n.includeStyleProperties?(nc=n.includeStyleProperties,nc):(nc=io(window.getComputedStyle(document.documentElement)),nc))}function z0(n,e){const r=(n.ownerDocument.defaultView||window).getComputedStyle(n).getPropertyValue(e);return r?parseFloat(r.replace("px","")):0}function cV(n){const e=z0(n,"border-left-width"),t=z0(n,"border-right-width");return n.clientWidth+e+t}function uV(n){const e=z0(n,"border-top-width"),t=z0(n,"border-bottom-width");return n.clientHeight+e+t}function W3(n,e={}){const t=e.width||cV(n),r=e.height||uV(n);return{width:t,height:r}}function fV(){let n,e;try{e=process}catch{}const t=e&&e.env?e.env.devicePixelRatio:null;return t&&(n=parseInt(t,10),Number.isNaN(n)&&(n=1)),n||window.devicePixelRatio||1}const Zr=16384;function dV(n){(n.width>Zr||n.height>Zr)&&(n.width>Zr&&n.height>Zr?n.width>n.height?(n.height*=Zr/n.width,n.width=Zr):(n.width*=Zr/n.height,n.height=Zr):n.width>Zr?(n.height*=Zr/n.width,n.width=Zr):(n.width*=Zr/n.height,n.height=Zr))}function H0(n){return new Promise((e,t)=>{const r=new Image;r.onload=()=>{r.decode().then(()=>{requestAnimationFrame(()=>e(r))})},r.onerror=t,r.crossOrigin="anonymous",r.decoding="async",r.src=n})}async function hV(n){return Promise.resolve().then(()=>new XMLSerializer().serializeToString(n)).then(encodeURIComponent).then(e=>`data:image/svg+xml;charset=utf-8,${e}`)}async function pV(n,e,t){const r="http://www.w3.org/2000/svg",i=document.createElementNS(r,"svg"),a=document.createElementNS(r,"foreignObject");return i.setAttribute("width",`${e}`),i.setAttribute("height",`${t}`),i.setAttribute("viewBox",`0 0 ${e} ${t}`),a.setAttribute("width","100%"),a.setAttribute("height","100%"),a.setAttribute("x","0"),a.setAttribute("y","0"),a.setAttribute("externalResourcesRequired","true"),i.appendChild(a),a.appendChild(n),hV(i)}const Vr=(n,e)=>{if(n instanceof e)return!0;const t=Object.getPrototypeOf(n);return t===null?!1:t.constructor.name===e.name||Vr(t,e)};function mV(n){const e=n.getPropertyValue("content");return`${n.cssText} content: '${e.replace(/'|"/g,"")}';`}function gV(n,e){return K3(e).map(t=>{const r=n.getPropertyValue(t),i=n.getPropertyPriority(t);return`${t}: ${r}${i?" !important":""};`}).join(" ")}function vV(n,e,t,r){const i=`.${n}:${e}`,a=t.cssText?mV(t):gV(t,r);return document.createTextNode(`${i}{${a}}`)}function Eb(n,e,t,r){const i=window.getComputedStyle(n,t),a=i.getPropertyValue("content");if(a===""||a==="none")return;const o=lV();try{e.className=`${e.className} ${o}`}catch{return}const c=document.createElement("style");c.appendChild(vV(o,t,i,r)),e.appendChild(c)}function yV(n,e,t){Eb(n,e,":before",t),Eb(n,e,":after",t)}const Ab="application/font-woff",bb="image/jpeg",_V={woff:Ab,woff2:Ab,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:bb,jpeg:bb,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml",webp:"image/webp"};function xV(n){const e=/\.([^./]*?)$/g.exec(n);return e?e[1]:""}function r2(n){const e=xV(n).toLowerCase();return _V[e]||""}function wV(n){return n.split(/,/)[1]}function Rv(n){return n.search(/^(data:)/)!==-1}function EV(n,e){return`data:${e};base64,${n}`}async function Q3(n,e,t){const r=await fetch(n,e);if(r.status===404)throw new Error(`Resource "${r.url}" not found`);const i=await r.blob();return new Promise((a,o)=>{const c=new FileReader;c.onerror=o,c.onloadend=()=>{try{a(t({res:r,result:c.result}))}catch(u){o(u)}},c.readAsDataURL(i)})}const ag={};function AV(n,e,t){let r=n.replace(/\?.*/,"");return t&&(r=n),/ttf|otf|eot|woff2?/i.test(r)&&(r=r.replace(/.*\//,"")),e?`[${e}]${r}`:r}async function i2(n,e,t){const r=AV(n,e,t.includeQueryParams);if(ag[r]!=null)return ag[r];t.cacheBust&&(n+=(/\?/.test(n)?"&":"?")+new Date().getTime());let i;try{const a=await Q3(n,t.fetchRequestInit,({res:o,result:c})=>(e||(e=o.headers.get("Content-Type")||""),wV(c)));i=EV(a,e)}catch(a){i=t.imagePlaceholder||"";let o=`Failed to fetch resource: ${n}`;a&&(o=typeof a=="string"?a:a.message),o&&console.warn(o)}return ag[r]=i,i}async function bV(n){const e=n.toDataURL();return e==="data:,"?n.cloneNode(!1):H0(e)}async function SV(n,e){if(n.currentSrc){const a=document.createElement("canvas"),o=a.getContext("2d");a.width=n.clientWidth,a.height=n.clientHeight,o?.drawImage(n,0,0,a.width,a.height);const c=a.toDataURL();return H0(c)}const t=n.poster,r=r2(t),i=await i2(t,r,e);return H0(i)}async function CV(n,e){var t;try{if(!((t=n?.contentDocument)===null||t===void 0)&&t.body)return await Tp(n.contentDocument.body,e,!0)}catch{}return n.cloneNode(!1)}async function TV(n,e){return Vr(n,HTMLCanvasElement)?bV(n):Vr(n,HTMLVideoElement)?SV(n,e):Vr(n,HTMLIFrameElement)?CV(n,e):n.cloneNode(Z3(n))}const IV=n=>n.tagName!=null&&n.tagName.toUpperCase()==="SLOT",Z3=n=>n.tagName!=null&&n.tagName.toUpperCase()==="SVG";async function NV(n,e,t){var r,i;if(Z3(e))return e;let a=[];return IV(n)&&n.assignedNodes?a=io(n.assignedNodes()):Vr(n,HTMLIFrameElement)&&(!((r=n.contentDocument)===null||r===void 0)&&r.body)?a=io(n.contentDocument.body.childNodes):a=io(((i=n.shadowRoot)!==null&&i!==void 0?i:n).childNodes),a.length===0||Vr(n,HTMLVideoElement)||await a.reduce((o,c)=>o.then(()=>Tp(c,t)).then(u=>{u&&e.appendChild(u)}),Promise.resolve()),e}function RV(n,e,t){const r=e.style;if(!r)return;const i=window.getComputedStyle(n);i.cssText?(r.cssText=i.cssText,r.transformOrigin=i.transformOrigin):K3(t).forEach(a=>{let o=i.getPropertyValue(a);a==="font-size"&&o.endsWith("px")&&(o=`${Math.floor(parseFloat(o.substring(0,o.length-2)))-.1}px`),Vr(n,HTMLIFrameElement)&&a==="display"&&o==="inline"&&(o="block"),a==="d"&&e.getAttribute("d")&&(o=`path(${e.getAttribute("d")})`),r.setProperty(a,o,i.getPropertyPriority(a))})}function OV(n,e){Vr(n,HTMLTextAreaElement)&&(e.innerHTML=n.value),Vr(n,HTMLInputElement)&&e.setAttribute("value",n.value)}function DV(n,e){if(Vr(n,HTMLSelectElement)){const t=e,r=Array.from(t.children).find(i=>n.value===i.getAttribute("value"));r&&r.setAttribute("selected","")}}function MV(n,e,t){return Vr(e,Element)&&(RV(n,e,t),yV(n,e,t),OV(n,e),DV(n,e)),e}async function PV(n,e){const t=n.querySelectorAll?n.querySelectorAll("use"):[];if(t.length===0)return n;const r={};for(let a=0;a<t.length;a++){const c=t[a].getAttribute("xlink:href");if(c){const u=n.querySelector(c),d=document.querySelector(c);!u&&d&&!r[c]&&(r[c]=await Tp(d,e,!0))}}const i=Object.values(r);if(i.length){const a="http://www.w3.org/1999/xhtml",o=document.createElementNS(a,"svg");o.setAttribute("xmlns",a),o.style.position="absolute",o.style.width="0",o.style.height="0",o.style.overflow="hidden",o.style.display="none";const c=document.createElementNS(a,"defs");o.appendChild(c);for(let u=0;u<i.length;u++)c.appendChild(i[u]);n.appendChild(o)}return n}async function Tp(n,e,t){return!t&&e.filter&&!e.filter(n)?null:Promise.resolve(n).then(r=>TV(r,e)).then(r=>NV(n,r,e)).then(r=>MV(n,r,e)).then(r=>PV(r,e))}const J3=/url\((['"]?)([^'"]+?)\1\)/g,kV=/url\([^)]+\)\s*format\((["']?)([^"']+)\1\)/g,jV=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;function LV(n){const e=n.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1");return new RegExp(`(url\\(['"]?)(${e})(['"]?\\))`,"g")}function BV(n){const e=[];return n.replace(J3,(t,r,i)=>(e.push(i),t)),e.filter(t=>!Rv(t))}async function VV(n,e,t,r,i){try{const a=t?oV(e,t):e,o=r2(e);let c;return i||(c=await i2(a,o,r)),n.replace(LV(e),`$1${c}$3`)}catch{}return n}function FV(n,{preferredFontFormat:e}){return e?n.replace(jV,t=>{for(;;){const[r,,i]=kV.exec(t)||[];if(!i)return"";if(i===e)return`src: ${r};`}}):n}function eI(n){return n.search(J3)!==-1}async function tI(n,e,t){if(!eI(n))return n;const r=FV(n,t);return BV(r).reduce((a,o)=>a.then(c=>VV(c,o,e,t)),Promise.resolve(r))}async function rc(n,e,t){var r;const i=(r=e.style)===null||r===void 0?void 0:r.getPropertyValue(n);if(i){const a=await tI(i,null,t);return e.style.setProperty(n,a,e.style.getPropertyPriority(n)),!0}return!1}async function UV(n,e){await rc("background",n,e)||await rc("background-image",n,e),await rc("mask",n,e)||await rc("-webkit-mask",n,e)||await rc("mask-image",n,e)||await rc("-webkit-mask-image",n,e)}async function zV(n,e){const t=Vr(n,HTMLImageElement);if(!(t&&!Rv(n.src))&&!(Vr(n,SVGImageElement)&&!Rv(n.href.baseVal)))return;const r=t?n.src:n.href.baseVal,i=await i2(r,r2(r),e);await new Promise((a,o)=>{n.onload=a,n.onerror=e.onImageErrorHandler?(...u)=>{try{a(e.onImageErrorHandler(...u))}catch(d){o(d)}}:o;const c=n;c.decode&&(c.decode=a),c.loading==="lazy"&&(c.loading="eager"),t?(n.srcset="",n.src=i):n.href.baseVal=i})}async function HV(n,e){const r=io(n.childNodes).map(i=>nI(i,e));await Promise.all(r).then(()=>n)}async function nI(n,e){Vr(n,Element)&&(await UV(n,e),await zV(n,e),await HV(n,e))}function GV(n,e){const{style:t}=n;e.backgroundColor&&(t.backgroundColor=e.backgroundColor),e.width&&(t.width=`${e.width}px`),e.height&&(t.height=`${e.height}px`);const r=e.style;return r!=null&&Object.keys(r).forEach(i=>{t[i]=r[i]}),n}const Sb={};async function Cb(n){let e=Sb[n];if(e!=null)return e;const r=await(await fetch(n)).text();return e={url:n,cssText:r},Sb[n]=e,e}async function Tb(n,e){let t=n.cssText;const r=/url\(["']?([^"')]+)["']?\)/g,a=(t.match(/url\([^)]+\)/g)||[]).map(async o=>{let c=o.replace(r,"$1");return c.startsWith("https://")||(c=new URL(c,n.url).href),Q3(c,e.fetchRequestInit,({result:u})=>(t=t.replace(o,`url(${u})`),[o,u]))});return Promise.all(a).then(()=>t)}function Ib(n){if(n==null)return[];const e=[],t=/(\/\*[\s\S]*?\*\/)/gi;let r=n.replace(t,"");const i=new RegExp("((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})","gi");for(;;){const u=i.exec(r);if(u===null)break;e.push(u[0])}r=r.replace(i,"");const a=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi,o="((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})",c=new RegExp(o,"gi");for(;;){let u=a.exec(r);if(u===null){if(u=c.exec(r),u===null)break;a.lastIndex=c.lastIndex}else c.lastIndex=a.lastIndex;e.push(u[0])}return e}async function qV(n,e){const t=[],r=[];return n.forEach(i=>{if("cssRules"in i)try{io(i.cssRules||[]).forEach((a,o)=>{if(a.type===CSSRule.IMPORT_RULE){let c=o+1;const u=a.href,d=Cb(u).then(m=>Tb(m,e)).then(m=>Ib(m).forEach(g=>{try{i.insertRule(g,g.startsWith("@import")?c+=1:i.cssRules.length)}catch(_){console.error("Error inserting rule from remote css",{rule:g,error:_})}})).catch(m=>{console.error("Error loading remote css",m.toString())});r.push(d)}})}catch(a){const o=n.find(c=>c.href==null)||document.styleSheets[0];i.href!=null&&r.push(Cb(i.href).then(c=>Tb(c,e)).then(c=>Ib(c).forEach(u=>{o.insertRule(u,o.cssRules.length)})).catch(c=>{console.error("Error loading remote stylesheet",c)})),console.error("Error inlining remote css file",a)}}),Promise.all(r).then(()=>(n.forEach(i=>{if("cssRules"in i)try{io(i.cssRules||[]).forEach(a=>{t.push(a)})}catch(a){console.error(`Error while reading CSS rules from ${i.href}`,a)}}),t))}function $V(n){return n.filter(e=>e.type===CSSRule.FONT_FACE_RULE).filter(e=>eI(e.style.getPropertyValue("src")))}async function XV(n,e){if(n.ownerDocument==null)throw new Error("Provided element is not within a Document");const t=io(n.ownerDocument.styleSheets),r=await qV(t,e);return $V(r)}function rI(n){return n.trim().replace(/["']/g,"")}function YV(n){const e=new Set;function t(r){(r.style.fontFamily||getComputedStyle(r).fontFamily).split(",").forEach(a=>{e.add(rI(a))}),Array.from(r.children).forEach(a=>{a instanceof HTMLElement&&t(a)})}return t(n),e}async function KV(n,e){const t=await XV(n,e),r=YV(n);return(await Promise.all(t.filter(a=>r.has(rI(a.style.fontFamily))).map(a=>{const o=a.parentStyleSheet?a.parentStyleSheet.href:null;return tI(a.cssText,o,e)}))).join(`
`)}async function WV(n,e){const t=e.fontEmbedCSS!=null?e.fontEmbedCSS:e.skipFonts?null:await KV(n,e);if(t){const r=document.createElement("style"),i=document.createTextNode(t);r.appendChild(i),n.firstChild?n.insertBefore(r,n.firstChild):n.appendChild(r)}}async function QV(n,e={}){const{width:t,height:r}=W3(n,e),i=await Tp(n,e,!0);return await WV(i,e),await nI(i,e),GV(i,e),await pV(i,t,r)}async function ZV(n,e={}){const{width:t,height:r}=W3(n,e),i=await QV(n,e),a=await H0(i),o=document.createElement("canvas"),c=o.getContext("2d"),u=e.pixelRatio||fV(),d=e.canvasWidth||t,m=e.canvasHeight||r;return o.width=d*u,o.height=m*u,e.skipAutoScale||dV(o),o.style.width=`${d}`,o.style.height=`${m}`,e.backgroundColor&&(c.fillStyle=e.backgroundColor,c.fillRect(0,0,o.width,o.height)),c.drawImage(a,0,0,o.width,o.height),o}async function Nb(n,e={}){return(await ZV(n,e)).toDataURL()}const JV=[{value:1e4,label:"10,000",kind:"bill"},{value:5e3,label:"5,000",kind:"bill"},{value:2e3,label:"2,000",kind:"bill"},{value:1e3,label:"1,000",kind:"bill"}],eF=[{value:500,label:"500",kind:"coin"},{value:100,label:"100",kind:"coin"},{value:50,label:"50",kind:"coin"},{value:10,label:"10",kind:"coin"},{value:5,label:"5",kind:"coin"},{value:1,label:"1",kind:"coin"}],a0=[...JV,...eF],Rb=["middle","close"],Ye=new Intl.NumberFormat("ja-JP",{style:"currency",currency:"JPY",maximumFractionDigits:0}),xt=new Intl.NumberFormat("ja-JP",{maximumFractionDigits:0}),Ob=new Intl.DateTimeFormat("ja-JP",{dateStyle:"medium",timeStyle:"short"});function Jr(n){const e=Ye.format(Math.abs(n));return n>0?`+${e}`:n<0?`-${e}`:e}function sg(){return a0.reduce((n,e)=>(n[e.value]=0,n),{})}function tF(){const[n]=P.useState(()=>new Date),e=P.useCallback(()=>{const de=FB(n),Oe=hb(n),De={...de},Me={open:"manual",middle:"manual",close:"manual"};let nt=!1;return Oe>0&&Rb.forEach(ye=>{De[ye]<=0&&(De[ye]=Oe,Me[ye]="auto",nt=!0)}),{presets:De,source:Me,shouldPersist:nt,usageTotal:Oe}},[n]),t=P.useMemo(()=>e(),[e]),[r,i]=P.useState(()=>sg()),[a,o]=P.useState(""),[c,u]=P.useState(!1),[d,m]=P.useState(null),[g,_]=P.useState(null),[w,E]=P.useState(()=>{if(typeof window>"u")return"open";try{const de=`cash-audit-open-image-${n.toISOString().split("T")[0]}`;return localStorage.getItem(de)!==null?"middle":"open"}catch{return"open"}}),[S,D]=P.useState(()=>t.presets),[C,k]=P.useState(()=>t.source),[V,U]=P.useState(()=>t.presets.open),[q,$]=P.useState(()=>t.usageTotal),[M,b]=P.useState(()=>pb(n)),[N,I]=P.useState(()=>mb(n)),[R,L]=P.useState(()=>xb(n)),j=P.useRef(null);P.useRef(null);const W=P.useRef(C),ge=P.useCallback(()=>`cash-audit-open-image-${n.toISOString().split("T")[0]}`,[n]),H=P.useCallback(()=>`cash-audit-open-total-${n.toISOString().split("T")[0]}`,[n]),[G,le]=P.useState(()=>{if(typeof window>"u")return null;try{return localStorage.getItem(ge())??null}catch{return null}}),[ve,He]=P.useState(()=>{if(typeof window>"u")return null;try{const de=localStorage.getItem(H());return de?Number(de):null}catch{return null}}),Y=P.useCallback(async()=>{if(!(!j.current||w!=="open")){u(!0),m(null);try{const de=await Nb(j.current,{cacheBust:!0,pixelRatio:2,backgroundColor:"#ffffff"}),Oe=a0.filter(Xt=>Xt.kind==="bill").reduce((Xt,Vn)=>Xt+(r[Vn.value]??0)*Vn.value,0),De=a0.filter(Xt=>Xt.kind==="coin").reduce((Xt,Vn)=>Xt+(r[Vn.value]??0)*Vn.value,0),Me=Oe+De,nt=document.createElement("a"),ye=n.toISOString().split("T")[0],Ue=new Date().toISOString().replace(/[:.]/g,"-");nt.download=`cash-audit-open-${ye}-${Ue}.png`,nt.href=de,nt.click();const Fe=ge(),$t=H();localStorage.setItem(Fe,de),localStorage.setItem($t,String(Me)),le(de),He(Me),_(new Date)}catch(de){console.error("Failed to save open shift image",de),m("")}finally{u(!1)}}},[w,ge,H,r,n]),te=P.useMemo(()=>{const de=new Date(n);return de.setHours(0,0,0,0),de},[n]),me=P.useMemo(()=>{const de=new Date(te);return de.setDate(de.getDate()+1),de},[te]),we=P.useMemo(()=>({start:te,end:me}),[te,me]),{orders:Ce}=qc(we),be=P.useMemo(()=>{const de=te.getTime(),Oe=me.getTime();let De=0,Me=0,nt=0,ye=0,Ue=0;return Ce.forEach(Fe=>{const $t=Fe.createdAt??Fe.updatedAt;if(!$t)return;const Xt=$t.getTime();Xt<de||Xt>=Oe||Fe.payment===""&&Fe.adjustments&&(Fe.adjustments.voucherUsage&&(De+=Fe.adjustments.voucherUsage.count50,Me+=Fe.adjustments.voucherUsage.count100),Fe.adjustments.jankenOutcome==="plus"?(nt+=1,Ue+=Lr):Fe.adjustments.jankenOutcome==="minus"&&(ye+=1,Ue-=Lr))}),{voucherTotal50:De,voucherTotal100:Me,voucherTotal:De+Me,jankenSummary:{totalAmount:Ue,plusCount:nt,minusCount:ye}}},[Ce,te,me]),Se=P.useMemo(()=>{const de=te.getTime(),Oe=me.getTime();return Ce.reduce((De,Me)=>{const nt=Me.createdAt??Me.updatedAt;if(!nt)return De;const ye=nt.getTime();return ye<de||ye>=Oe||(Me.payment===""?(De.paidTotal+=Me.total,De.paidCount+=1):Me.payment===""&&(De.unpaidTotal+=Me.total,De.unpaidCount+=1)),De},{paidTotal:0,unpaidTotal:0,paidCount:0,unpaidCount:0})},[Ce,te,me]);P.useEffect(()=>{W.current=C},[C]),P.useEffect(()=>{t.shouldPersist&&(db(t.presets,n),$(t.usageTotal))},[n,t]);const $e=P.useCallback(de=>{db(de,n)},[n]),tt=P.useCallback((de,Oe,De="manual")=>{D(Me=>{if(Me[de]===Oe)return Me;const nt={...Me,[de]:Oe};return $e(nt),nt}),k(Me=>Me[de]===De?Me:{...Me,[de]:De})},[$e]);P.useEffect(()=>{U(S[w])},[w,S]),P.useEffect(()=>{if(typeof window>"u")return;const de=()=>{const ye=be.voucherTotal||hb(n),Ue=be.voucherTotal50||pb(n),Fe=be.voucherTotal100||mb(n);$(ye),b(Ue),I(Fe),D($t=>{const Xt=W.current;let Vn=$t,en=!1;return Rb.forEach(Tr=>{Xt[Tr]==="auto"&&$t[Tr]!==ye&&(en||(Vn={...$t},en=!0),Vn[Tr]=ye)}),en?($e(Vn),Vn):$t})},Oe=()=>{const ye=be.jankenSummary.totalAmount!==0||be.jankenSummary.plusCount!==0||be.jankenSummary.minusCount!==0?be.jankenSummary:xb(n);L(ye)};de(),Oe();const De=$B(n),Me=qB(n),nt=ye=>{ye.key===De?de():ye.key===Me&&Oe()};return window.addEventListener(Av,de),window.addEventListener(bv,Oe),window.addEventListener("storage",nt),()=>{window.removeEventListener(Av,de),window.removeEventListener(bv,Oe),window.removeEventListener("storage",nt)}},[n,$e,be]);const Xe=P.useMemo(()=>{const de=a0.map(Fe=>{const $t=r[Fe.value]??0,Xt=Fe.value*$t;return{...Fe,count:$t,subtotal:Xt}}),Oe=de.filter(Fe=>Fe.kind==="bill"),De=de.filter(Fe=>Fe.kind==="coin"),Me=Oe.reduce((Fe,$t)=>Fe+$t.subtotal,0),nt=De.reduce((Fe,$t)=>Fe+$t.subtotal,0),ye=Oe.reduce((Fe,$t)=>Fe+$t.count,0),Ue=De.reduce((Fe,$t)=>Fe+$t.count,0);return{billItems:Oe,coinItems:De,billTotal:Me,coinTotal:nt,grandTotal:Me+nt,totalBills:ye,totalCoins:Ue,totalPieces:ye+Ue}},[r]),et=jB[w],Wn=P.useMemo(()=>V*gc,[V]),Qn=P.useMemo(()=>M*df,[M]),Jt=P.useMemo(()=>N*gc,[N]),It=P.useMemo(()=>Qn+Jt,[Qn,Jt]),fr=P.useMemo(()=>R.plusCount*Lr,[R.plusCount]),_r=P.useMemo(()=>-R.minusCount*Lr,[R.minusCount]),Zn=P.useMemo(()=>R.plusCount+R.minusCount,[R.plusCount,R.minusCount]),kt=P.useMemo(()=>Jr(R.totalAmount),[R.totalAmount]),vt=P.useMemo(()=>{if(!ve||w==="open")return null;const de=ve+Se.paidTotal-It+R.totalAmount,Oe=Xe.grandTotal,De=Oe-de,Me=Math.abs(De)<=1;return{openTotal:ve,paidTotal:Se.paidTotal,voucherAmount:It,jankenAmount:R.totalAmount,expectedAmount:de,actualAmount:Oe,difference:De,isMatched:Me}},[ve,Xe.grandTotal,Se.paidTotal,It,R.totalAmount,w]),Ln=P.useMemo(()=>{const de=Se.paidTotal,Oe=It,De=R.totalAmount;return(ve??0)+de-Oe+De},[Se.paidTotal,It,R.totalAmount,ve]),Bn=P.useMemo(()=>Xe.grandTotal,[Xe.grandTotal]),dr=P.useMemo(()=>Bn-Ln,[Bn,Ln]),zt=P.useMemo(()=>Math.abs(dr)<=1,[dr]),xr=P.useMemo(()=>new Date,[r,a,w,V,R]),zr=de=>Oe=>{const De=Oe.currentTarget.valueAsNumber;i(Me=>({...Me,[de]:Number.isNaN(De)||De<0?0:Math.floor(De)}))},se=de=>{const Oe=de.currentTarget.value;E(Oe),U(S[Oe]??0),Oe==="open"&&(i(sg()),o(""))},Ee=de=>{const Oe=de.currentTarget.valueAsNumber,De=Number.isNaN(Oe)||Oe<0?0:Math.floor(Oe);U(De),tt(w,De,"manual")},ke=()=>{i(sg()),m(null);const de=e();D(de.presets),k(de.source);const Oe=de.presets[w];U(Oe),$(de.usageTotal),$e(de.presets)},Ct=async()=>{if(j.current){u(!0),m(null);try{const de=await Nb(j.current,{cacheBust:!0,pixelRatio:2,backgroundColor:"#ffffff"}),Oe=document.createElement("a"),De=new Date().toISOString().replace(/[:.]/g,"-");Oe.download=`cash-audit-${De}.png`,Oe.href=de,Oe.click(),_(new Date)}catch(de){console.error("Failed to save cash audit as image",de),m("")}finally{u(!1)}}};return p.jsxs("div",{className:"admin-grid admin-cash-audit-layout",children:[p.jsxs("div",{className:"admin-cash-audit-input-column",children:[p.jsxs("section",{className:"admin-card admin-cash-audit-config",children:[p.jsx("header",{className:"admin-card-header",children:p.jsxs("div",{children:[p.jsx("h3",{children:""}),p.jsx("p",{children:""})]})}),p.jsxs("fieldset",{className:"admin-cash-audit-shift-group",children:[p.jsx("legend",{children:""}),p.jsx("div",{className:"admin-cash-audit-shift-options",children:Sp.map(de=>p.jsxs("label",{className:`admin-cash-audit-shift-option${w===de.value?" is-active":""}`,children:[p.jsx("input",{type:"radio",name:"cash-audit-shift",value:de.value,checked:w===de.value,onChange:se}),p.jsx("span",{children:de.label})]},de.value))})]}),p.jsxs("div",{className:"admin-cash-audit-voucher-field",children:[p.jsx("label",{htmlFor:"cash-audit-voucher-count",children:""}),p.jsxs("div",{className:"admin-cash-audit-count-input",children:[p.jsx("input",{id:"cash-audit-voucher-count",className:"admin-input admin-input--compact",type:"number",min:0,step:1,inputMode:"numeric",pattern:"[0-9]*",value:V,onChange:Ee}),p.jsx("span",{className:"admin-cash-audit-count-suffix",children:""})]}),p.jsx("p",{className:"admin-cash-audit-helper",children:""}),p.jsxs("div",{className:"admin-cash-audit-voucher-total",children:[p.jsx("span",{children:"100"}),p.jsx("strong",{children:Ye.format(Wn)})]}),p.jsxs("div",{className:"admin-cash-audit-voucher-usage",children:[p.jsx("span",{children:""}),p.jsxs("strong",{children:[xt.format(q)," "]}),p.jsxs("span",{className:"admin-cash-audit-voucher-usage-amount",children:[" ",Ye.format(It)]})]}),p.jsxs("div",{className:"admin-cash-audit-voucher-usage-breakdown",children:[p.jsxs("div",{className:"admin-cash-audit-voucher-usage-item",children:[p.jsx("span",{children:"50"}),p.jsxs("strong",{children:[xt.format(M)," "]}),p.jsx("span",{className:"admin-cash-audit-voucher-usage-amount",children:Ye.format(Qn)})]}),p.jsxs("div",{className:"admin-cash-audit-voucher-usage-item",children:[p.jsx("span",{children:"100"}),p.jsxs("strong",{children:[xt.format(N)," "]}),p.jsx("span",{className:"admin-cash-audit-voucher-usage-amount",children:Ye.format(Jt)})]})]}),w!=="open"&&p.jsxs("div",{className:"admin-cash-audit-balance-check","aria-live":"polite",children:[p.jsxs("div",{className:"admin-cash-audit-balance-header",children:[p.jsx("span",{className:"admin-cash-audit-balance-label",children:""}),p.jsx("span",{className:`admin-cash-audit-balance-status${zt?" is-balanced":" is-unbalanced"}`,children:zt?" ":" "})]}),p.jsxs("div",{className:"admin-cash-audit-balance-details",children:[p.jsxs("div",{className:"admin-cash-audit-balance-row",children:[p.jsx("span",{children:""}),p.jsx("strong",{children:Ye.format(Ln)})]}),p.jsxs("div",{className:"admin-cash-audit-balance-row",children:[p.jsx("span",{children:""}),p.jsx("strong",{children:Ye.format(Bn)})]}),p.jsxs("div",{className:"admin-cash-audit-balance-row",children:[p.jsx("span",{children:""}),p.jsxs("div",{className:"admin-cash-audit-balance-breakdown",children:[ve&&p.jsxs("span",{children:[": ",Ye.format(ve)]}),p.jsxs("span",{children:[": ",Ye.format(Se.paidTotal)]}),p.jsxs("span",{children:[": -",Ye.format(It)]}),p.jsxs("span",{children:[": ",Jr(R.totalAmount)]})]})]}),p.jsx("hr",{className:"admin-cash-audit-balance-divider"}),p.jsxs("div",{className:`admin-cash-audit-balance-difference${zt?"":" is-unbalanced"}`,children:[p.jsx("span",{children:""}),p.jsx("strong",{className:dr>0?" is-plus":dr<0?" is-minus":"",children:Jr(dr)})]})]})]}),p.jsxs("div",{className:"admin-cash-audit-janken-summary","aria-live":"polite",children:[p.jsxs("div",{className:"admin-cash-audit-janken-header",children:[p.jsx("span",{className:"admin-cash-audit-janken-label",children:""}),p.jsx("span",{className:`admin-cash-audit-janken-total${R.totalAmount>0?" is-plus":R.totalAmount<0?" is-minus":""}`,children:kt})]}),p.jsxs("div",{className:"admin-cash-audit-janken-details",children:[p.jsxs("span",{className:"admin-cash-audit-janken-pill positive",children:[Jr(Lr),"  ",xt.format(R.plusCount)," "]}),p.jsxs("span",{className:"admin-cash-audit-janken-pill negative",children:[Jr(-Lr),"  ",xt.format(R.minusCount)," "]}),p.jsxs("span",{className:"admin-cash-audit-janken-pill neutral",children:[" ",xt.format(Zn)," "]})]}),p.jsx("span",{className:"admin-cash-audit-janken-note",children:""})]})]}),(w==="middle"||w==="close")&&p.jsxs("div",{className:"admin-cash-audit-shift-summary",children:[p.jsxs("div",{className:"admin-cash-audit-summary-item paid",children:[p.jsx("span",{className:"admin-cash-audit-summary-label",children:""}),p.jsx("strong",{className:"admin-cash-audit-summary-amount",children:Ye.format(Se.paidTotal)}),p.jsxs("span",{className:"admin-cash-audit-summary-meta",children:[xt.format(Se.paidCount)," "]})]}),p.jsxs("div",{className:"admin-cash-audit-summary-item unpaid",children:[p.jsx("span",{className:"admin-cash-audit-summary-label",children:""}),p.jsx("strong",{className:"admin-cash-audit-summary-amount",children:Ye.format(Se.unpaidTotal)}),p.jsxs("span",{className:"admin-cash-audit-summary-meta",children:[xt.format(Se.unpaidCount)," "]})]})]})]}),p.jsxs("section",{className:"admin-card",children:[p.jsxs("header",{className:"admin-card-header",children:[p.jsxs("div",{children:[p.jsx("h3",{children:""}),p.jsx("p",{children:""})]}),p.jsxs("dl",{className:"admin-cash-audit-group-summary",children:[p.jsxs("div",{children:[p.jsx("dt",{children:""}),p.jsxs("dd",{children:[xt.format(Xe.totalBills)," "]})]}),p.jsxs("div",{children:[p.jsx("dt",{children:""}),p.jsx("dd",{children:Ye.format(Xe.billTotal)})]})]})]}),p.jsxs("table",{className:"admin-table admin-cash-audit-table",children:[p.jsx("thead",{children:p.jsxs("tr",{children:[p.jsx("th",{scope:"col",children:""}),p.jsx("th",{scope:"col",children:""}),p.jsx("th",{scope:"col",children:""})]})}),p.jsx("tbody",{children:Xe.billItems.map(de=>p.jsxs("tr",{children:[p.jsx("th",{scope:"row",children:de.label}),p.jsxs("td",{children:[p.jsxs("label",{className:"sr-only",htmlFor:`denomination-${de.value}`,children:[de.label,""]}),p.jsxs("div",{className:"admin-cash-audit-count-input",children:[p.jsx("input",{id:`denomination-${de.value}`,className:"admin-input admin-input--compact",type:"number",min:0,step:1,inputMode:"numeric",pattern:"[0-9]*",value:de.count,onChange:zr(de.value)}),p.jsx("span",{className:"admin-cash-audit-count-suffix",children:""})]})]}),p.jsx("td",{className:"admin-text-right admin-cash-audit-value",children:Ye.format(de.subtotal)})]},`bill-${de.value}`))}),p.jsx("tfoot",{children:p.jsxs("tr",{children:[p.jsx("th",{scope:"row",children:""}),p.jsx("td",{children:p.jsxs("span",{className:"admin-cash-audit-total-chip",children:[xt.format(Xe.totalBills)," "]})}),p.jsx("td",{className:"admin-text-right admin-cash-audit-value",children:Ye.format(Xe.billTotal)})]})})]})]}),p.jsxs("section",{className:"admin-card",children:[p.jsxs("header",{className:"admin-card-header",children:[p.jsxs("div",{children:[p.jsx("h3",{children:""}),p.jsx("p",{children:""})]}),p.jsxs("dl",{className:"admin-cash-audit-group-summary",children:[p.jsxs("div",{children:[p.jsx("dt",{children:""}),p.jsxs("dd",{children:[xt.format(Xe.totalCoins)," "]})]}),p.jsxs("div",{children:[p.jsx("dt",{children:""}),p.jsx("dd",{children:Ye.format(Xe.coinTotal)})]})]})]}),p.jsxs("table",{className:"admin-table admin-cash-audit-table",children:[p.jsx("thead",{children:p.jsxs("tr",{children:[p.jsx("th",{scope:"col",children:""}),p.jsx("th",{scope:"col",children:""}),p.jsx("th",{scope:"col",children:""})]})}),p.jsx("tbody",{children:Xe.coinItems.map(de=>p.jsxs("tr",{children:[p.jsx("th",{scope:"row",children:de.label}),p.jsxs("td",{children:[p.jsxs("label",{className:"sr-only",htmlFor:`denomination-${de.value}`,children:[de.label,""]}),p.jsxs("div",{className:"admin-cash-audit-count-input",children:[p.jsx("input",{id:`denomination-${de.value}`,className:"admin-input admin-input--compact",type:"number",min:0,step:1,inputMode:"numeric",pattern:"[0-9]*",value:de.count,onChange:zr(de.value)}),p.jsx("span",{className:"admin-cash-audit-count-suffix",children:""})]})]}),p.jsx("td",{className:"admin-text-right admin-cash-audit-value",children:Ye.format(de.subtotal)})]},`coin-${de.value}`))}),p.jsx("tfoot",{children:p.jsxs("tr",{children:[p.jsx("th",{scope:"row",children:""}),p.jsx("td",{children:p.jsxs("span",{className:"admin-cash-audit-total-chip",children:[xt.format(Xe.totalCoins)," "]})}),p.jsx("td",{className:"admin-text-right admin-cash-audit-value",children:Ye.format(Xe.coinTotal)})]})})]})]}),p.jsxs("section",{className:"admin-card admin-cash-audit-actions",children:[p.jsx("header",{className:"admin-card-header",children:p.jsxs("div",{children:[p.jsx("h3",{children:""}),p.jsx("p",{children:""})]})}),p.jsxs("div",{className:"admin-cash-audit-note-field",children:[p.jsx("label",{htmlFor:"cash-audit-note",children:""}),p.jsx("textarea",{id:"cash-audit-note",className:"admin-textarea",value:a,maxLength:400,placeholder:": 15:30 :  100",onChange:de=>o(de.target.value)})]}),p.jsxs("div",{className:"admin-cash-audit-buttons",children:[p.jsx("button",{type:"button",className:"admin-secondary-button",onClick:ke,children:""}),w==="open"?p.jsx("button",{type:"button",className:"admin-primary-button",onClick:Y,disabled:c,children:c?"":""}):p.jsx("button",{type:"button",className:"admin-primary-button",onClick:Ct,disabled:c,children:c?"":""})]}),p.jsxs("div",{className:"admin-cash-audit-feedback",children:[p.jsxs("span",{children:[" ",Ye.format(Xe.grandTotal)," / ",Xe.totalPieces," "]}),p.jsxs("span",{className:"admin-cash-audit-feedback-muted",children:[" ",xt.format(V)," ",Ye.format(Wn),""]}),p.jsxs("span",{className:"admin-cash-audit-feedback-muted",children:[" ",kt,"+",xt.format(R.plusCount)," / -",xt.format(R.minusCount)," "]}),p.jsxs("span",{className:"admin-cash-audit-feedback-muted",children:[" ",et]}),g&&p.jsxs("span",{className:"admin-cash-audit-feedback-muted",children:[": ",Ob.format(g)]})]}),d&&p.jsx("p",{className:"admin-cash-audit-error",children:d})]})]}),p.jsxs("section",{className:"admin-card admin-cash-audit-report",ref:j,children:[p.jsxs("header",{className:"admin-cash-audit-report-header",children:[p.jsx("p",{className:"admin-content-overline",children:""}),p.jsx("h3",{children:Ye.format(Xe.grandTotal)}),p.jsxs("div",{className:"admin-cash-audit-report-meta",children:[p.jsxs("span",{children:[" ",Ye.format(Xe.billTotal)]}),p.jsxs("span",{children:[" ",Ye.format(Xe.coinTotal)]}),p.jsxs("span",{children:[" ",xt.format(V)," ",Ye.format(Wn),""]}),p.jsxs("span",{children:[" ",kt,"+",xt.format(R.plusCount)," / -",xt.format(R.minusCount)," "]}),p.jsxs("span",{children:[" ",xt.format(Xe.totalPieces)," "]}),p.jsxs("span",{children:[" ",xt.format(q)," ",Ye.format(It),""]}),p.jsxs("span",{children:["50 ",xt.format(M)," ",Ye.format(Qn)," 100 ",xt.format(N)," ",Ye.format(Jt),""]}),(w==="middle"||w==="close")&&p.jsxs(p.Fragment,{children:[p.jsxs("span",{className:"admin-cash-audit-report-summary-item paid",children:[": ",Ye.format(Se.paidTotal),"",xt.format(Se.paidCount)," "]}),p.jsxs("span",{className:"admin-cash-audit-report-summary-item unpaid",children:[": ",Ye.format(Se.unpaidTotal),"",xt.format(Se.unpaidCount)," "]}),p.jsxs("span",{className:zt?"admin-cash-audit-balance-status-balanced":"admin-cash-audit-balance-status-unbalanced",children:[": ",zt?" ":" ",": ",Jr(dr),""]}),p.jsxs("span",{children:[": ",Ye.format(Ln),ve&&`: ${Ye.format(ve)} + : ${Ye.format(Se.paidTotal)} - : ${Ye.format(It)} + : ${Jr(R.totalAmount)}`,!ve&&`: ${Ye.format(Se.paidTotal)} - : ${Ye.format(It)} + : ${Jr(R.totalAmount)}`]})]})]}),p.jsxs("p",{className:"admin-cash-audit-timestamp",children:[": ",Ob.format(xr)]}),p.jsxs("p",{className:"admin-cash-audit-shift-label",children:[": ",et]})]}),p.jsxs("div",{className:"admin-cash-audit-report-grid",children:[p.jsxs("article",{children:[p.jsx("h4",{children:""}),p.jsxs("table",{children:[p.jsx("thead",{children:p.jsxs("tr",{children:[p.jsx("th",{scope:"col",children:""}),p.jsx("th",{scope:"col",children:""}),p.jsx("th",{scope:"col",children:""})]})}),p.jsx("tbody",{children:Xe.billItems.map(de=>p.jsxs("tr",{children:[p.jsx("td",{children:de.label}),p.jsxs("td",{children:[xt.format(de.count)," "]}),p.jsx("td",{children:Ye.format(de.subtotal)})]},`report-bill-${de.value}`))})]})]}),p.jsxs("article",{children:[p.jsx("h4",{children:""}),p.jsxs("table",{children:[p.jsx("thead",{children:p.jsxs("tr",{children:[p.jsx("th",{scope:"col",children:""}),p.jsx("th",{scope:"col",children:""}),p.jsx("th",{scope:"col",children:""})]})}),p.jsx("tbody",{children:Xe.coinItems.map(de=>p.jsxs("tr",{children:[p.jsx("td",{children:de.label}),p.jsxs("td",{children:[xt.format(de.count)," "]}),p.jsx("td",{children:Ye.format(de.subtotal)})]},`report-coin-${de.value}`))})]})]}),p.jsxs("article",{children:[p.jsx("h4",{children:""}),p.jsxs("table",{children:[p.jsx("thead",{children:p.jsxs("tr",{children:[p.jsx("th",{scope:"col",children:""}),p.jsx("th",{scope:"col",children:""}),p.jsx("th",{scope:"col",children:""})]})}),p.jsxs("tbody",{children:[p.jsxs("tr",{children:[p.jsx("td",{children:"50"}),p.jsxs("td",{children:[xt.format(M)," "]}),p.jsx("td",{children:Ye.format(Qn)})]}),p.jsxs("tr",{children:[p.jsx("td",{children:"100"}),p.jsxs("td",{children:[xt.format(N)," "]}),p.jsx("td",{children:Ye.format(Jt)})]}),p.jsxs("tr",{children:[p.jsx("td",{children:""}),p.jsxs("td",{children:[xt.format(q)," "]}),p.jsx("td",{children:Ye.format(It)})]})]})]})]}),p.jsxs("article",{children:[p.jsx("h4",{children:""}),p.jsxs("table",{children:[p.jsx("thead",{children:p.jsxs("tr",{children:[p.jsx("th",{scope:"col",children:""}),p.jsx("th",{scope:"col",children:""}),p.jsx("th",{scope:"col",children:""})]})}),p.jsxs("tbody",{children:[p.jsxs("tr",{children:[p.jsxs("td",{children:["+",Ye.format(Lr)]}),p.jsxs("td",{children:[xt.format(R.plusCount)," "]}),p.jsx("td",{children:Jr(fr)})]}),p.jsxs("tr",{children:[p.jsxs("td",{children:["-",Ye.format(Lr)]}),p.jsxs("td",{children:[xt.format(R.minusCount)," "]}),p.jsx("td",{children:Jr(_r)})]}),p.jsxs("tr",{children:[p.jsx("td",{children:""}),p.jsxs("td",{children:[xt.format(Zn)," "]}),p.jsx("td",{children:Jr(R.totalAmount)})]})]})]})]})]}),p.jsxs("div",{className:"admin-cash-audit-note-preview",children:[p.jsx("h4",{children:""}),p.jsx("p",{children:a||""})]}),(w==="middle"||w==="close")&&p.jsxs("div",{className:"admin-cash-audit-report-adjustment",children:[p.jsx("h4",{children:""}),p.jsxs("div",{className:"admin-cash-audit-adjustment-breakdown",children:[p.jsxs("div",{className:"admin-cash-audit-adjustment-row",children:[p.jsx("span",{children:""}),p.jsx("strong",{children:vt?Ye.format(vt.openTotal):""})]}),p.jsxs("div",{className:"admin-cash-audit-adjustment-row",children:[p.jsx("span",{children:""}),p.jsxs("strong",{children:["+",Ye.format(Se.paidTotal)]})]}),p.jsxs("div",{className:"admin-cash-audit-adjustment-row",children:[p.jsx("span",{children:""}),p.jsxs("strong",{children:["-",Ye.format(It)]})]}),p.jsxs("div",{className:"admin-cash-audit-adjustment-row",children:[p.jsx("span",{children:""}),p.jsx("strong",{children:Jr(R.totalAmount)})]}),p.jsx("hr",{className:"admin-cash-audit-adjustment-divider"}),p.jsxs("div",{className:"admin-cash-audit-adjustment-row admin-cash-audit-adjustment-total",children:[p.jsx("span",{children:""}),p.jsx("strong",{children:vt?Ye.format(vt.expectedAmount):""})]}),p.jsx("hr",{className:"admin-cash-audit-adjustment-divider"}),p.jsxs("div",{className:"admin-cash-audit-adjustment-row",children:[p.jsx("span",{children:""}),p.jsx("strong",{children:Ye.format(Xe.grandTotal)})]}),vt&&p.jsxs("div",{className:`admin-cash-audit-adjustment-row admin-cash-audit-adjustment-comparison ${vt.isMatched?"is-matched":"is-unmatched"}`,children:[p.jsx("span",{children:""}),p.jsxs("strong",{children:[vt.isMatched?" ":" ","",Jr(vt.difference),""]})]})]})]})]})]})}const Db=[{id:"dashboard",label:"",path:"/admin/dashboard",icon:"",allowedRoles:["admin"]},{id:"orders",label:"",path:"/admin/orders",icon:"",allowedRoles:["admin"]},{id:"production",label:"",path:"/admin/production",icon:"",allowedRoles:["admin","staff"]},{id:"serving",label:"",path:"/admin/serving",icon:"",allowedRoles:["admin","staff"]},{id:"payments",label:"",path:"/admin/payments",icon:"",allowedRoles:["admin","staff"]},{id:"cash-audit",label:"",path:"/admin/cash-audit",icon:"",allowedRoles:["admin"]},{id:"reception",label:"",path:"/admin/reception",icon:"",allowedRoles:["admin"]},{id:"export",label:"",path:"/admin/export",icon:"",allowedRoles:["admin"]},{id:"settings",label:"",path:"/admin/settings",icon:"",allowedRoles:["admin"]}];function nF(){const[n,e]=P.useState(!1),[t,r]=P.useState(!0),i=Yi(),a=ol(),{roles:o,signOut:c}=xp(),u=P.useCallback(C=>C.some(k=>o.includes(k)),[o]),d=P.useMemo(()=>Db.filter(C=>u(C.allowedRoles)),[u]),m=d[0]?.path??"/admin";P.useEffect(()=>{e(!1)},[i.pathname]);const g=P.useMemo(()=>{const C=d.find(k=>i.pathname.startsWith(k.path));return C||(Db.find(k=>i.pathname.startsWith(k.path))??null)},[d,i.pathname]);P.useEffect(()=>{g&&!u(g.allowedRoles)&&d.length>0&&a(d[0].path,{replace:!0})},[g,d,u,a]);const _=t||n,w=()=>{r(C=>!C),e(!1)},E=()=>{c()},S=["admin","kitchen","staff"],D=["admin-shell",t?"sidebar-pinned":"",n?"sidebar-open":""].filter(Boolean).join(" ");return p.jsxs("div",{className:D,children:[p.jsxs("button",{type:"button",className:"admin-hamburger","aria-controls":"admin-sidebar","aria-expanded":n,onClick:()=>e(C=>!C),children:[p.jsx("span",{className:"admin-hamburger-bar"}),p.jsx("span",{className:"admin-hamburger-bar"}),p.jsx("span",{className:"admin-hamburger-bar"}),p.jsx("span",{className:"sr-only",children:""})]}),p.jsxs("aside",{id:"admin-sidebar",className:`admin-sidebar${_?" open":""}${t?" pinned":""}`,children:[p.jsx("div",{className:"admin-sidebar-header",children:p.jsxs("div",{children:[p.jsx("p",{className:"admin-sidebar-title",children:""}),p.jsx("p",{className:"admin-sidebar-subtitle",children:""})]})}),p.jsx("nav",{"aria-label":"",className:"admin-sidebar-nav",children:p.jsx("ul",{children:d.map(C=>{const k=g?.id===C.id;return p.jsx("li",{children:p.jsxs("button",{type:"button",className:`admin-nav-button${k?" active":""}`,onClick:()=>a(C.path),children:[p.jsx("span",{"aria-hidden":!0,className:"admin-nav-icon",children:C.icon}),p.jsx("span",{children:C.label})]})},C.id)})})}),p.jsxs("div",{className:"admin-sidebar-footer",children:[p.jsxs("button",{type:"button",className:"admin-logout-button",onClick:E,children:[p.jsx("span",{"aria-hidden":!0,className:"admin-nav-icon",children:""}),p.jsx("span",{children:""})]}),p.jsxs("p",{className:"admin-roles",children:[":"," ",S.map(C=>{const k=o.includes(C);return p.jsx("span",{className:`admin-badge${k?"":" muted"}`,children:C},C)})]})]})]}),p.jsxs("div",{className:"admin-content",children:[p.jsxs("header",{className:"admin-content-header",children:[p.jsxs("div",{children:[p.jsxs("p",{className:"admin-content-overline",children:[g?.label??"",""]}),p.jsx("h1",{children:g?.label??""})]}),p.jsx("div",{className:"admin-header-actions",children:p.jsxs("button",{type:"button",className:`admin-sidebar-toggle${t?"":" is-collapsed"}`,onClick:w,children:[p.jsx("span",{className:"dot","aria-hidden":!0}),t?"":""]})})]}),p.jsx("section",{className:"admin-content-main",children:p.jsxs(bS,{children:[p.jsx(rn,{index:!0,element:p.jsx(mi,{to:m,replace:!0})}),p.jsx(rn,{path:"dashboard",element:u(["admin"])?p.jsx(CA,{}):p.jsx(mi,{to:m,replace:!0})}),p.jsx(rn,{path:"orders",element:u(["admin"])?p.jsx(PP,{}):p.jsx(mi,{to:m,replace:!0})}),p.jsx(rn,{path:"production",element:u(["admin","staff"])?p.jsx(VP,{}):p.jsx(mi,{to:m,replace:!0})}),p.jsx(rn,{path:"serving",element:u(["admin","staff"])?p.jsx(eV,{}):p.jsx(mi,{to:m,replace:!0})}),p.jsx(rn,{path:"payments",element:u(["admin","staff"])?p.jsx(WB,{}):p.jsx(mi,{to:m,replace:!0})}),p.jsx(rn,{path:"cash-audit",element:u(["admin"])?p.jsx(tF,{}):p.jsx(mi,{to:m,replace:!0})}),p.jsx(rn,{path:"reception",element:u(["admin"])?p.jsx(QB,{}):p.jsx(mi,{to:m,replace:!0})}),p.jsx(rn,{path:"export",element:u(["admin"])?p.jsx(CA,{mode:"export"}):p.jsx(mi,{to:m,replace:!0})}),p.jsx(rn,{path:"settings",element:u(["admin"])?p.jsx(sV,{}):p.jsx(mi,{to:m,replace:!0})}),p.jsx(rn,{path:"*",element:p.jsx(mi,{to:m,replace:!0})})]})})]})]})}const a2="order-history.v1",rF=20,Ov=new Set,s2=()=>typeof window<"u"&&typeof window.localStorage<"u",iI=()=>{if(!s2())return[];try{const n=window.localStorage.getItem(a2);if(!n)return[];const e=JSON.parse(n);return Array.isArray(e)?e.filter(t=>t&&typeof t=="object"&&"orderId"in t&&"ticket"in t).map(t=>{const r=typeof t.createdAt=="string"||t.createdAt instanceof Date?new Date(t.createdAt):void 0,i=r&&!Number.isNaN(r.getTime())?r:void 0;return{...t,callNumber:typeof t.callNumber=="number"&&Number.isFinite(t.callNumber)?t.callNumber:0,createdAt:i}}):[]}catch(n){return console.warn("Failed to parse order history from storage",n),[]}},aI=n=>{if(s2())try{window.localStorage.setItem(a2,JSON.stringify(n))}catch(e){console.warn("Failed to write order history to storage",e)}},o2=()=>{Ov.forEach(n=>n())},iF=()=>iI(),aF=n=>{const e=iI(),r=[{...n,callNumber:typeof n.callNumber=="number"&&Number.isFinite(n.callNumber)?n.callNumber:0,savedAt:new Date().toISOString()},...e.filter(i=>i.orderId!==n.orderId&&i.ticket!==n.ticket)].slice(0,rF);return aI(r),o2(),r},sF=()=>{aI([]),o2()},oF=n=>(Ov.add(n),()=>{Ov.delete(n)});s2()&&window.addEventListener("storage",n=>{n.key===a2&&o2()});const Mb=()=>iF();function lF(){return P.useSyncExternalStore(oF,Mb,Mb)}function cF(){const n=lF(),{language:e}=Ki(),t=ss[e].status,r=()=>{(typeof window>"u"||window.confirm(t.historyClearConfirm))&&sF()};return p.jsxs("div",{className:"content-container",children:[p.jsxs("section",{className:"content-card",children:[p.jsx("h1",{className:"section-title",children:t.title}),p.jsx("p",{className:"section-description",children:t.descriptionLead}),p.jsx("p",{className:"section-description",children:t.descriptionFollow})]}),n.length>0&&p.jsxs("section",{className:"content-card history-card","aria-live":"polite",children:[p.jsxs("div",{className:"history-header",children:[p.jsx("h2",{className:"section-title",children:t.historyTitle}),p.jsx("button",{type:"button",className:"history-clear",onClick:r,children:t.historyClear})]}),p.jsx("p",{className:"history-description",children:t.historyDescription}),p.jsx("ul",{className:"order-history-list",children:n.map(i=>p.jsxs("li",{className:"order-history-item","aria-live":"polite",children:[p.jsx("div",{className:"order-history-row",children:p.jsx("span",{className:"order-history-date",children:new Date(i.savedAt).toLocaleString()})}),p.jsxs("div",{className:"order-history-row meta",children:[p.jsxs("span",{children:[t.historyCallNumberLabel,":"," ",i.callNumber>0?i.callNumber:t.historyPendingCallNumber]}),p.jsxs("span",{children:[t.historyOrderIdLabel,": ",i.orderId]})]}),p.jsx("div",{className:"order-history-row meta",children:p.jsxs("span",{children:[t.historyTotalLabel,": ",i.total.toLocaleString()]})})]},i.orderId))})]})]})}var ic={},og,Pb;function uF(){return Pb||(Pb=1,og=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then}),og}var lg={},zs={},kb;function hl(){if(kb)return zs;kb=1;let n;const e=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];return zs.getSymbolSize=function(r){if(!r)throw new Error('"version" cannot be null or undefined');if(r<1||r>40)throw new Error('"version" should be in range from 1 to 40');return r*4+17},zs.getSymbolTotalCodewords=function(r){return e[r]},zs.getBCHDigit=function(t){let r=0;for(;t!==0;)r++,t>>>=1;return r},zs.setToSJISFunction=function(r){if(typeof r!="function")throw new Error('"toSJISFunc" is not a valid function.');n=r},zs.isKanjiModeEnabled=function(){return typeof n<"u"},zs.toSJIS=function(r){return n(r)},zs}var cg={},jb;function l2(){return jb||(jb=1,(function(n){n.L={bit:1},n.M={bit:0},n.Q={bit:3},n.H={bit:2};function e(t){if(typeof t!="string")throw new Error("Param is not a string");switch(t.toLowerCase()){case"l":case"low":return n.L;case"m":case"medium":return n.M;case"q":case"quartile":return n.Q;case"h":case"high":return n.H;default:throw new Error("Unknown EC Level: "+t)}}n.isValid=function(r){return r&&typeof r.bit<"u"&&r.bit>=0&&r.bit<4},n.from=function(r,i){if(n.isValid(r))return r;try{return e(r)}catch{return i}}})(cg)),cg}var ug,Lb;function fF(){if(Lb)return ug;Lb=1;function n(){this.buffer=[],this.length=0}return n.prototype={get:function(e){const t=Math.floor(e/8);return(this.buffer[t]>>>7-e%8&1)===1},put:function(e,t){for(let r=0;r<t;r++)this.putBit((e>>>t-r-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(e){const t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}},ug=n,ug}var fg,Bb;function dF(){if(Bb)return fg;Bb=1;function n(e){if(!e||e<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=e,this.data=new Uint8Array(e*e),this.reservedBit=new Uint8Array(e*e)}return n.prototype.set=function(e,t,r,i){const a=e*this.size+t;this.data[a]=r,i&&(this.reservedBit[a]=!0)},n.prototype.get=function(e,t){return this.data[e*this.size+t]},n.prototype.xor=function(e,t,r){this.data[e*this.size+t]^=r},n.prototype.isReserved=function(e,t){return this.reservedBit[e*this.size+t]},fg=n,fg}var dg={},Vb;function hF(){return Vb||(Vb=1,(function(n){const e=hl().getSymbolSize;n.getRowColCoords=function(r){if(r===1)return[];const i=Math.floor(r/7)+2,a=e(r),o=a===145?26:Math.ceil((a-13)/(2*i-2))*2,c=[a-7];for(let u=1;u<i-1;u++)c[u]=c[u-1]-o;return c.push(6),c.reverse()},n.getPositions=function(r){const i=[],a=n.getRowColCoords(r),o=a.length;for(let c=0;c<o;c++)for(let u=0;u<o;u++)c===0&&u===0||c===0&&u===o-1||c===o-1&&u===0||i.push([a[c],a[u]]);return i}})(dg)),dg}var hg={},Fb;function pF(){if(Fb)return hg;Fb=1;const n=hl().getSymbolSize,e=7;return hg.getPositions=function(r){const i=n(r);return[[0,0],[i-e,0],[0,i-e]]},hg}var pg={},Ub;function mF(){return Ub||(Ub=1,(function(n){n.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const e={N1:3,N2:3,N3:40,N4:10};n.isValid=function(i){return i!=null&&i!==""&&!isNaN(i)&&i>=0&&i<=7},n.from=function(i){return n.isValid(i)?parseInt(i,10):void 0},n.getPenaltyN1=function(i){const a=i.size;let o=0,c=0,u=0,d=null,m=null;for(let g=0;g<a;g++){c=u=0,d=m=null;for(let _=0;_<a;_++){let w=i.get(g,_);w===d?c++:(c>=5&&(o+=e.N1+(c-5)),d=w,c=1),w=i.get(_,g),w===m?u++:(u>=5&&(o+=e.N1+(u-5)),m=w,u=1)}c>=5&&(o+=e.N1+(c-5)),u>=5&&(o+=e.N1+(u-5))}return o},n.getPenaltyN2=function(i){const a=i.size;let o=0;for(let c=0;c<a-1;c++)for(let u=0;u<a-1;u++){const d=i.get(c,u)+i.get(c,u+1)+i.get(c+1,u)+i.get(c+1,u+1);(d===4||d===0)&&o++}return o*e.N2},n.getPenaltyN3=function(i){const a=i.size;let o=0,c=0,u=0;for(let d=0;d<a;d++){c=u=0;for(let m=0;m<a;m++)c=c<<1&2047|i.get(d,m),m>=10&&(c===1488||c===93)&&o++,u=u<<1&2047|i.get(m,d),m>=10&&(u===1488||u===93)&&o++}return o*e.N3},n.getPenaltyN4=function(i){let a=0;const o=i.data.length;for(let u=0;u<o;u++)a+=i.data[u];return Math.abs(Math.ceil(a*100/o/5)-10)*e.N4};function t(r,i,a){switch(r){case n.Patterns.PATTERN000:return(i+a)%2===0;case n.Patterns.PATTERN001:return i%2===0;case n.Patterns.PATTERN010:return a%3===0;case n.Patterns.PATTERN011:return(i+a)%3===0;case n.Patterns.PATTERN100:return(Math.floor(i/2)+Math.floor(a/3))%2===0;case n.Patterns.PATTERN101:return i*a%2+i*a%3===0;case n.Patterns.PATTERN110:return(i*a%2+i*a%3)%2===0;case n.Patterns.PATTERN111:return(i*a%3+(i+a)%2)%2===0;default:throw new Error("bad maskPattern:"+r)}}n.applyMask=function(i,a){const o=a.size;for(let c=0;c<o;c++)for(let u=0;u<o;u++)a.isReserved(u,c)||a.xor(u,c,t(i,u,c))},n.getBestMask=function(i,a){const o=Object.keys(n.Patterns).length;let c=0,u=1/0;for(let d=0;d<o;d++){a(d),n.applyMask(d,i);const m=n.getPenaltyN1(i)+n.getPenaltyN2(i)+n.getPenaltyN3(i)+n.getPenaltyN4(i);n.applyMask(d,i),m<u&&(u=m,c=d)}return c}})(pg)),pg}var Uh={},zb;function sI(){if(zb)return Uh;zb=1;const n=l2(),e=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],t=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];return Uh.getBlocksCount=function(i,a){switch(a){case n.L:return e[(i-1)*4+0];case n.M:return e[(i-1)*4+1];case n.Q:return e[(i-1)*4+2];case n.H:return e[(i-1)*4+3];default:return}},Uh.getTotalCodewordsCount=function(i,a){switch(a){case n.L:return t[(i-1)*4+0];case n.M:return t[(i-1)*4+1];case n.Q:return t[(i-1)*4+2];case n.H:return t[(i-1)*4+3];default:return}},Uh}var mg={},ef={},Hb;function gF(){if(Hb)return ef;Hb=1;const n=new Uint8Array(512),e=new Uint8Array(256);return(function(){let r=1;for(let i=0;i<255;i++)n[i]=r,e[r]=i,r<<=1,r&256&&(r^=285);for(let i=255;i<512;i++)n[i]=n[i-255]})(),ef.log=function(r){if(r<1)throw new Error("log("+r+")");return e[r]},ef.exp=function(r){return n[r]},ef.mul=function(r,i){return r===0||i===0?0:n[e[r]+e[i]]},ef}var Gb;function vF(){return Gb||(Gb=1,(function(n){const e=gF();n.mul=function(r,i){const a=new Uint8Array(r.length+i.length-1);for(let o=0;o<r.length;o++)for(let c=0;c<i.length;c++)a[o+c]^=e.mul(r[o],i[c]);return a},n.mod=function(r,i){let a=new Uint8Array(r);for(;a.length-i.length>=0;){const o=a[0];for(let u=0;u<i.length;u++)a[u]^=e.mul(i[u],o);let c=0;for(;c<a.length&&a[c]===0;)c++;a=a.slice(c)}return a},n.generateECPolynomial=function(r){let i=new Uint8Array([1]);for(let a=0;a<r;a++)i=n.mul(i,new Uint8Array([1,e.exp(a)]));return i}})(mg)),mg}var gg,qb;function yF(){if(qb)return gg;qb=1;const n=vF();function e(t){this.genPoly=void 0,this.degree=t,this.degree&&this.initialize(this.degree)}return e.prototype.initialize=function(r){this.degree=r,this.genPoly=n.generateECPolynomial(this.degree)},e.prototype.encode=function(r){if(!this.genPoly)throw new Error("Encoder not initialized");const i=new Uint8Array(r.length+this.degree);i.set(r);const a=n.mod(i,this.genPoly),o=this.degree-a.length;if(o>0){const c=new Uint8Array(this.degree);return c.set(a,o),c}return a},gg=e,gg}var vg={},yg={},_g={},$b;function oI(){return $b||($b=1,_g.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40}),_g}var ga={},Xb;function lI(){if(Xb)return ga;Xb=1;const n="[0-9]+",e="[A-Z $%*+\\-./:]+";let t="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";t=t.replace(/u/g,"\\u");const r="(?:(?![A-Z0-9 $%*+\\-./:]|"+t+`)(?:.|[\r
]))+`;ga.KANJI=new RegExp(t,"g"),ga.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),ga.BYTE=new RegExp(r,"g"),ga.NUMERIC=new RegExp(n,"g"),ga.ALPHANUMERIC=new RegExp(e,"g");const i=new RegExp("^"+t+"$"),a=new RegExp("^"+n+"$"),o=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");return ga.testKanji=function(u){return i.test(u)},ga.testNumeric=function(u){return a.test(u)},ga.testAlphanumeric=function(u){return o.test(u)},ga}var Yb;function pl(){return Yb||(Yb=1,(function(n){const e=oI(),t=lI();n.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},n.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},n.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},n.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},n.MIXED={bit:-1},n.getCharCountIndicator=function(a,o){if(!a.ccBits)throw new Error("Invalid mode: "+a);if(!e.isValid(o))throw new Error("Invalid version: "+o);return o>=1&&o<10?a.ccBits[0]:o<27?a.ccBits[1]:a.ccBits[2]},n.getBestModeForData=function(a){return t.testNumeric(a)?n.NUMERIC:t.testAlphanumeric(a)?n.ALPHANUMERIC:t.testKanji(a)?n.KANJI:n.BYTE},n.toString=function(a){if(a&&a.id)return a.id;throw new Error("Invalid mode")},n.isValid=function(a){return a&&a.bit&&a.ccBits};function r(i){if(typeof i!="string")throw new Error("Param is not a string");switch(i.toLowerCase()){case"numeric":return n.NUMERIC;case"alphanumeric":return n.ALPHANUMERIC;case"kanji":return n.KANJI;case"byte":return n.BYTE;default:throw new Error("Unknown mode: "+i)}}n.from=function(a,o){if(n.isValid(a))return a;try{return r(a)}catch{return o}}})(yg)),yg}var Kb;function _F(){return Kb||(Kb=1,(function(n){const e=hl(),t=sI(),r=l2(),i=pl(),a=oI(),o=7973,c=e.getBCHDigit(o);function u(_,w,E){for(let S=1;S<=40;S++)if(w<=n.getCapacity(S,E,_))return S}function d(_,w){return i.getCharCountIndicator(_,w)+4}function m(_,w){let E=0;return _.forEach(function(S){const D=d(S.mode,w);E+=D+S.getBitsLength()}),E}function g(_,w){for(let E=1;E<=40;E++)if(m(_,E)<=n.getCapacity(E,w,i.MIXED))return E}n.from=function(w,E){return a.isValid(w)?parseInt(w,10):E},n.getCapacity=function(w,E,S){if(!a.isValid(w))throw new Error("Invalid QR Code version");typeof S>"u"&&(S=i.BYTE);const D=e.getSymbolTotalCodewords(w),C=t.getTotalCodewordsCount(w,E),k=(D-C)*8;if(S===i.MIXED)return k;const V=k-d(S,w);switch(S){case i.NUMERIC:return Math.floor(V/10*3);case i.ALPHANUMERIC:return Math.floor(V/11*2);case i.KANJI:return Math.floor(V/13);case i.BYTE:default:return Math.floor(V/8)}},n.getBestVersionForData=function(w,E){let S;const D=r.from(E,r.M);if(Array.isArray(w)){if(w.length>1)return g(w,D);if(w.length===0)return 1;S=w[0]}else S=w;return u(S.mode,S.getLength(),D)},n.getEncodedBits=function(w){if(!a.isValid(w)||w<7)throw new Error("Invalid QR Code version");let E=w<<12;for(;e.getBCHDigit(E)-c>=0;)E^=o<<e.getBCHDigit(E)-c;return w<<12|E}})(vg)),vg}var xg={},Wb;function xF(){if(Wb)return xg;Wb=1;const n=hl(),e=1335,t=21522,r=n.getBCHDigit(e);return xg.getEncodedBits=function(a,o){const c=a.bit<<3|o;let u=c<<10;for(;n.getBCHDigit(u)-r>=0;)u^=e<<n.getBCHDigit(u)-r;return(c<<10|u)^t},xg}var wg={},Eg,Qb;function wF(){if(Qb)return Eg;Qb=1;const n=pl();function e(t){this.mode=n.NUMERIC,this.data=t.toString()}return e.getBitsLength=function(r){return 10*Math.floor(r/3)+(r%3?r%3*3+1:0)},e.prototype.getLength=function(){return this.data.length},e.prototype.getBitsLength=function(){return e.getBitsLength(this.data.length)},e.prototype.write=function(r){let i,a,o;for(i=0;i+3<=this.data.length;i+=3)a=this.data.substr(i,3),o=parseInt(a,10),r.put(o,10);const c=this.data.length-i;c>0&&(a=this.data.substr(i),o=parseInt(a,10),r.put(o,c*3+1))},Eg=e,Eg}var Ag,Zb;function EF(){if(Zb)return Ag;Zb=1;const n=pl(),e=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function t(r){this.mode=n.ALPHANUMERIC,this.data=r}return t.getBitsLength=function(i){return 11*Math.floor(i/2)+6*(i%2)},t.prototype.getLength=function(){return this.data.length},t.prototype.getBitsLength=function(){return t.getBitsLength(this.data.length)},t.prototype.write=function(i){let a;for(a=0;a+2<=this.data.length;a+=2){let o=e.indexOf(this.data[a])*45;o+=e.indexOf(this.data[a+1]),i.put(o,11)}this.data.length%2&&i.put(e.indexOf(this.data[a]),6)},Ag=t,Ag}var bg,Jb;function AF(){if(Jb)return bg;Jb=1;const n=pl();function e(t){this.mode=n.BYTE,typeof t=="string"?this.data=new TextEncoder().encode(t):this.data=new Uint8Array(t)}return e.getBitsLength=function(r){return r*8},e.prototype.getLength=function(){return this.data.length},e.prototype.getBitsLength=function(){return e.getBitsLength(this.data.length)},e.prototype.write=function(t){for(let r=0,i=this.data.length;r<i;r++)t.put(this.data[r],8)},bg=e,bg}var Sg,eS;function bF(){if(eS)return Sg;eS=1;const n=pl(),e=hl();function t(r){this.mode=n.KANJI,this.data=r}return t.getBitsLength=function(i){return i*13},t.prototype.getLength=function(){return this.data.length},t.prototype.getBitsLength=function(){return t.getBitsLength(this.data.length)},t.prototype.write=function(r){let i;for(i=0;i<this.data.length;i++){let a=e.toSJIS(this.data[i]);if(a>=33088&&a<=40956)a-=33088;else if(a>=57408&&a<=60351)a-=49472;else throw new Error("Invalid SJIS character: "+this.data[i]+`
Make sure your charset is UTF-8`);a=(a>>>8&255)*192+(a&255),r.put(a,13)}},Sg=t,Sg}var Cg={exports:{}},tS;function SF(){return tS||(tS=1,(function(n){var e={single_source_shortest_paths:function(t,r,i){var a={},o={};o[r]=0;var c=e.PriorityQueue.make();c.push(r,0);for(var u,d,m,g,_,w,E,S,D;!c.empty();){u=c.pop(),d=u.value,g=u.cost,_=t[d]||{};for(m in _)_.hasOwnProperty(m)&&(w=_[m],E=g+w,S=o[m],D=typeof o[m]>"u",(D||S>E)&&(o[m]=E,c.push(m,E),a[m]=d))}if(typeof i<"u"&&typeof o[i]>"u"){var C=["Could not find a path from ",r," to ",i,"."].join("");throw new Error(C)}return a},extract_shortest_path_from_predecessor_list:function(t,r){for(var i=[],a=r;a;)i.push(a),t[a],a=t[a];return i.reverse(),i},find_path:function(t,r,i){var a=e.single_source_shortest_paths(t,r,i);return e.extract_shortest_path_from_predecessor_list(a,i)},PriorityQueue:{make:function(t){var r=e.PriorityQueue,i={},a;t=t||{};for(a in r)r.hasOwnProperty(a)&&(i[a]=r[a]);return i.queue=[],i.sorter=t.sorter||r.default_sorter,i},default_sorter:function(t,r){return t.cost-r.cost},push:function(t,r){var i={value:t,cost:r};this.queue.push(i),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};n.exports=e})(Cg)),Cg.exports}var nS;function CF(){return nS||(nS=1,(function(n){const e=pl(),t=wF(),r=EF(),i=AF(),a=bF(),o=lI(),c=hl(),u=SF();function d(C){return unescape(encodeURIComponent(C)).length}function m(C,k,V){const U=[];let q;for(;(q=C.exec(V))!==null;)U.push({data:q[0],index:q.index,mode:k,length:q[0].length});return U}function g(C){const k=m(o.NUMERIC,e.NUMERIC,C),V=m(o.ALPHANUMERIC,e.ALPHANUMERIC,C);let U,q;return c.isKanjiModeEnabled()?(U=m(o.BYTE,e.BYTE,C),q=m(o.KANJI,e.KANJI,C)):(U=m(o.BYTE_KANJI,e.BYTE,C),q=[]),k.concat(V,U,q).sort(function(M,b){return M.index-b.index}).map(function(M){return{data:M.data,mode:M.mode,length:M.length}})}function _(C,k){switch(k){case e.NUMERIC:return t.getBitsLength(C);case e.ALPHANUMERIC:return r.getBitsLength(C);case e.KANJI:return a.getBitsLength(C);case e.BYTE:return i.getBitsLength(C)}}function w(C){return C.reduce(function(k,V){const U=k.length-1>=0?k[k.length-1]:null;return U&&U.mode===V.mode?(k[k.length-1].data+=V.data,k):(k.push(V),k)},[])}function E(C){const k=[];for(let V=0;V<C.length;V++){const U=C[V];switch(U.mode){case e.NUMERIC:k.push([U,{data:U.data,mode:e.ALPHANUMERIC,length:U.length},{data:U.data,mode:e.BYTE,length:U.length}]);break;case e.ALPHANUMERIC:k.push([U,{data:U.data,mode:e.BYTE,length:U.length}]);break;case e.KANJI:k.push([U,{data:U.data,mode:e.BYTE,length:d(U.data)}]);break;case e.BYTE:k.push([{data:U.data,mode:e.BYTE,length:d(U.data)}])}}return k}function S(C,k){const V={},U={start:{}};let q=["start"];for(let $=0;$<C.length;$++){const M=C[$],b=[];for(let N=0;N<M.length;N++){const I=M[N],R=""+$+N;b.push(R),V[R]={node:I,lastCount:0},U[R]={};for(let L=0;L<q.length;L++){const j=q[L];V[j]&&V[j].node.mode===I.mode?(U[j][R]=_(V[j].lastCount+I.length,I.mode)-_(V[j].lastCount,I.mode),V[j].lastCount+=I.length):(V[j]&&(V[j].lastCount=I.length),U[j][R]=_(I.length,I.mode)+4+e.getCharCountIndicator(I.mode,k))}}q=b}for(let $=0;$<q.length;$++)U[q[$]].end=0;return{map:U,table:V}}function D(C,k){let V;const U=e.getBestModeForData(C);if(V=e.from(k,U),V!==e.BYTE&&V.bit<U.bit)throw new Error('"'+C+'" cannot be encoded with mode '+e.toString(V)+`.
 Suggested mode is: `+e.toString(U));switch(V===e.KANJI&&!c.isKanjiModeEnabled()&&(V=e.BYTE),V){case e.NUMERIC:return new t(C);case e.ALPHANUMERIC:return new r(C);case e.KANJI:return new a(C);case e.BYTE:return new i(C)}}n.fromArray=function(k){return k.reduce(function(V,U){return typeof U=="string"?V.push(D(U,null)):U.data&&V.push(D(U.data,U.mode)),V},[])},n.fromString=function(k,V){const U=g(k,c.isKanjiModeEnabled()),q=E(U),$=S(q,V),M=u.find_path($.map,"start","end"),b=[];for(let N=1;N<M.length-1;N++)b.push($.table[M[N]].node);return n.fromArray(w(b))},n.rawSplit=function(k){return n.fromArray(g(k,c.isKanjiModeEnabled()))}})(wg)),wg}var rS;function TF(){if(rS)return lg;rS=1;const n=hl(),e=l2(),t=fF(),r=dF(),i=hF(),a=pF(),o=mF(),c=sI(),u=yF(),d=_F(),m=xF(),g=pl(),_=CF();function w($,M){const b=$.size,N=a.getPositions(M);for(let I=0;I<N.length;I++){const R=N[I][0],L=N[I][1];for(let j=-1;j<=7;j++)if(!(R+j<=-1||b<=R+j))for(let W=-1;W<=7;W++)L+W<=-1||b<=L+W||(j>=0&&j<=6&&(W===0||W===6)||W>=0&&W<=6&&(j===0||j===6)||j>=2&&j<=4&&W>=2&&W<=4?$.set(R+j,L+W,!0,!0):$.set(R+j,L+W,!1,!0))}}function E($){const M=$.size;for(let b=8;b<M-8;b++){const N=b%2===0;$.set(b,6,N,!0),$.set(6,b,N,!0)}}function S($,M){const b=i.getPositions(M);for(let N=0;N<b.length;N++){const I=b[N][0],R=b[N][1];for(let L=-2;L<=2;L++)for(let j=-2;j<=2;j++)L===-2||L===2||j===-2||j===2||L===0&&j===0?$.set(I+L,R+j,!0,!0):$.set(I+L,R+j,!1,!0)}}function D($,M){const b=$.size,N=d.getEncodedBits(M);let I,R,L;for(let j=0;j<18;j++)I=Math.floor(j/3),R=j%3+b-8-3,L=(N>>j&1)===1,$.set(I,R,L,!0),$.set(R,I,L,!0)}function C($,M,b){const N=$.size,I=m.getEncodedBits(M,b);let R,L;for(R=0;R<15;R++)L=(I>>R&1)===1,R<6?$.set(R,8,L,!0):R<8?$.set(R+1,8,L,!0):$.set(N-15+R,8,L,!0),R<8?$.set(8,N-R-1,L,!0):R<9?$.set(8,15-R-1+1,L,!0):$.set(8,15-R-1,L,!0);$.set(N-8,8,1,!0)}function k($,M){const b=$.size;let N=-1,I=b-1,R=7,L=0;for(let j=b-1;j>0;j-=2)for(j===6&&j--;;){for(let W=0;W<2;W++)if(!$.isReserved(I,j-W)){let ge=!1;L<M.length&&(ge=(M[L]>>>R&1)===1),$.set(I,j-W,ge),R--,R===-1&&(L++,R=7)}if(I+=N,I<0||b<=I){I-=N,N=-N;break}}}function V($,M,b){const N=new t;b.forEach(function(W){N.put(W.mode.bit,4),N.put(W.getLength(),g.getCharCountIndicator(W.mode,$)),W.write(N)});const I=n.getSymbolTotalCodewords($),R=c.getTotalCodewordsCount($,M),L=(I-R)*8;for(N.getLengthInBits()+4<=L&&N.put(0,4);N.getLengthInBits()%8!==0;)N.putBit(0);const j=(L-N.getLengthInBits())/8;for(let W=0;W<j;W++)N.put(W%2?17:236,8);return U(N,$,M)}function U($,M,b){const N=n.getSymbolTotalCodewords(M),I=c.getTotalCodewordsCount(M,b),R=N-I,L=c.getBlocksCount(M,b),j=N%L,W=L-j,ge=Math.floor(N/L),H=Math.floor(R/L),G=H+1,le=ge-H,ve=new u(le);let He=0;const Y=new Array(L),te=new Array(L);let me=0;const we=new Uint8Array($.buffer);for(let tt=0;tt<L;tt++){const Xe=tt<W?H:G;Y[tt]=we.slice(He,He+Xe),te[tt]=ve.encode(Y[tt]),He+=Xe,me=Math.max(me,Xe)}const Ce=new Uint8Array(N);let be=0,Se,$e;for(Se=0;Se<me;Se++)for($e=0;$e<L;$e++)Se<Y[$e].length&&(Ce[be++]=Y[$e][Se]);for(Se=0;Se<le;Se++)for($e=0;$e<L;$e++)Ce[be++]=te[$e][Se];return Ce}function q($,M,b,N){let I;if(Array.isArray($))I=_.fromArray($);else if(typeof $=="string"){let ge=M;if(!ge){const H=_.rawSplit($);ge=d.getBestVersionForData(H,b)}I=_.fromString($,ge||40)}else throw new Error("Invalid data");const R=d.getBestVersionForData(I,b);if(!R)throw new Error("The amount of data is too big to be stored in a QR Code");if(!M)M=R;else if(M<R)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+R+`.
`);const L=V(M,b,I),j=n.getSymbolSize(M),W=new r(j);return w(W,M),E(W),S(W,M),C(W,b,0),M>=7&&D(W,M),k(W,L),isNaN(N)&&(N=o.getBestMask(W,C.bind(null,W,b))),o.applyMask(N,W),C(W,b,N),{modules:W,version:M,errorCorrectionLevel:b,maskPattern:N,segments:I}}return lg.create=function(M,b){if(typeof M>"u"||M==="")throw new Error("No input text");let N=e.M,I,R;return typeof b<"u"&&(N=e.from(b.errorCorrectionLevel,e.M),I=d.from(b.version),R=o.from(b.maskPattern),b.toSJISFunc&&n.setToSJISFunction(b.toSJISFunc)),q(M,I,N,R)},lg}var Tg={},Ig={},iS;function cI(){return iS||(iS=1,(function(n){function e(t){if(typeof t=="number"&&(t=t.toString()),typeof t!="string")throw new Error("Color should be defined as hex string");let r=t.slice().replace("#","").split("");if(r.length<3||r.length===5||r.length>8)throw new Error("Invalid hex color: "+t);(r.length===3||r.length===4)&&(r=Array.prototype.concat.apply([],r.map(function(a){return[a,a]}))),r.length===6&&r.push("F","F");const i=parseInt(r.join(""),16);return{r:i>>24&255,g:i>>16&255,b:i>>8&255,a:i&255,hex:"#"+r.slice(0,6).join("")}}n.getOptions=function(r){r||(r={}),r.color||(r.color={});const i=typeof r.margin>"u"||r.margin===null||r.margin<0?4:r.margin,a=r.width&&r.width>=21?r.width:void 0,o=r.scale||4;return{width:a,scale:a?4:o,margin:i,color:{dark:e(r.color.dark||"#000000ff"),light:e(r.color.light||"#ffffffff")},type:r.type,rendererOpts:r.rendererOpts||{}}},n.getScale=function(r,i){return i.width&&i.width>=r+i.margin*2?i.width/(r+i.margin*2):i.scale},n.getImageWidth=function(r,i){const a=n.getScale(r,i);return Math.floor((r+i.margin*2)*a)},n.qrToImageData=function(r,i,a){const o=i.modules.size,c=i.modules.data,u=n.getScale(o,a),d=Math.floor((o+a.margin*2)*u),m=a.margin*u,g=[a.color.light,a.color.dark];for(let _=0;_<d;_++)for(let w=0;w<d;w++){let E=(_*d+w)*4,S=a.color.light;if(_>=m&&w>=m&&_<d-m&&w<d-m){const D=Math.floor((_-m)/u),C=Math.floor((w-m)/u);S=g[c[D*o+C]?1:0]}r[E++]=S.r,r[E++]=S.g,r[E++]=S.b,r[E]=S.a}}})(Ig)),Ig}var aS;function IF(){return aS||(aS=1,(function(n){const e=cI();function t(i,a,o){i.clearRect(0,0,a.width,a.height),a.style||(a.style={}),a.height=o,a.width=o,a.style.height=o+"px",a.style.width=o+"px"}function r(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}n.render=function(a,o,c){let u=c,d=o;typeof u>"u"&&(!o||!o.getContext)&&(u=o,o=void 0),o||(d=r()),u=e.getOptions(u);const m=e.getImageWidth(a.modules.size,u),g=d.getContext("2d"),_=g.createImageData(m,m);return e.qrToImageData(_.data,a,u),t(g,d,m),g.putImageData(_,0,0),d},n.renderToDataURL=function(a,o,c){let u=c;typeof u>"u"&&(!o||!o.getContext)&&(u=o,o=void 0),u||(u={});const d=n.render(a,o,u),m=u.type||"image/png",g=u.rendererOpts||{};return d.toDataURL(m,g.quality)}})(Tg)),Tg}var Ng={},sS;function NF(){if(sS)return Ng;sS=1;const n=cI();function e(i,a){const o=i.a/255,c=a+'="'+i.hex+'"';return o<1?c+" "+a+'-opacity="'+o.toFixed(2).slice(1)+'"':c}function t(i,a,o){let c=i+a;return typeof o<"u"&&(c+=" "+o),c}function r(i,a,o){let c="",u=0,d=!1,m=0;for(let g=0;g<i.length;g++){const _=Math.floor(g%a),w=Math.floor(g/a);!_&&!d&&(d=!0),i[g]?(m++,g>0&&_>0&&i[g-1]||(c+=d?t("M",_+o,.5+w+o):t("m",u,0),u=0,d=!1),_+1<a&&i[g+1]||(c+=t("h",m),m=0)):u++}return c}return Ng.render=function(a,o,c){const u=n.getOptions(o),d=a.modules.size,m=a.modules.data,g=d+u.margin*2,_=u.color.light.a?"<path "+e(u.color.light,"fill")+' d="M0 0h'+g+"v"+g+'H0z"/>':"",w="<path "+e(u.color.dark,"stroke")+' d="'+r(m,d,u.margin)+'"/>',E='viewBox="0 0 '+g+" "+g+'"',D='<svg xmlns="http://www.w3.org/2000/svg" '+(u.width?'width="'+u.width+'" height="'+u.width+'" ':"")+E+' shape-rendering="crispEdges">'+_+w+`</svg>
`;return typeof c=="function"&&c(null,D),D},Ng}var oS;function RF(){if(oS)return ic;oS=1;const n=uF(),e=TF(),t=IF(),r=NF();function i(a,o,c,u,d){const m=[].slice.call(arguments,1),g=m.length,_=typeof m[g-1]=="function";if(!_&&!n())throw new Error("Callback required as last argument");if(_){if(g<2)throw new Error("Too few arguments provided");g===2?(d=c,c=o,o=u=void 0):g===3&&(o.getContext&&typeof d>"u"?(d=u,u=void 0):(d=u,u=c,c=o,o=void 0))}else{if(g<1)throw new Error("Too few arguments provided");return g===1?(c=o,o=u=void 0):g===2&&!o.getContext&&(u=c,c=o,o=void 0),new Promise(function(w,E){try{const S=e.create(c,u);w(a(S,o,u))}catch(S){E(S)}})}try{const w=e.create(c,u);d(null,a(w,o,u))}catch(w){d(w)}}return ic.create=e.create,ic.toCanvas=i.bind(null,t.render),ic.toDataURL=i.bind(null,t.renderToDataURL),ic.toString=i.bind(null,function(a,o,c){return r.render(a,c)}),ic}var OF=RF();const DF=$4(OF),MF=n=>{const e=n.replace(/^\/+/,"").replace(/\/+$/,"");return e?`/${e}`:""},PF=()=>{const n=MF("/Ichinikai/");return typeof window<"u"&&window.location?.origin?`${window.location.origin}${n}`.replace(/\/+$/,""):(n?`https://example.com${n}`:"https://example.com").replace(/\/+$/,"")},uI=n=>`${PF()}/progress/${encodeURIComponent(n)}`,wf=n=>{if(!n)return"";const e=n.trim();if(!e)return"";try{const t=new URL(e),r=t.pathname.match(/\/(?:order\/complete|progress)\/([^/]+)$/i);if(r&&r[1])return decodeURIComponent(r[1]).replace(/[^0-9a-z]/gi,"").toUpperCase();const i=t.searchParams.get("ticket");if(i)return i.replace(/[^0-9a-z]/gi,"").toUpperCase()}catch{}return e.replace(/[^0-9a-z]/gi,"").toUpperCase()},kF=n=>Number.isInteger(n)&&n!==null&&n!==void 0&&n>0?n:0,zh=n=>{const e=n.items??{};return{orderId:n.orderId,ticket:n.ticket,callNumber:kF(n.callNumber),total:n.total,items:e,payment:n.payment,progress:n.progress,plating:Fr(e,n.plating),createdAt:n.createdAt?new Date(n.createdAt):void 0}},lS=n=>n instanceof Ia&&n.code==="permission-denied",fI=P.createContext(void 0),cS=()=>Object.keys(Gc).reduce((n,e)=>(n[e]=0,n),{});function jF({children:n}){const{menuItems:e}=dl(),[t,r]=P.useState(cS),[i,a]=P.useState(!1),[o,c]=P.useState(null),[u,d]=P.useState(null),m=P.useCallback((M,b)=>{r(N=>({...N,[M]:Math.max(0,Number.isFinite(b)?Math.floor(b):0)}))},[]),g=P.useCallback(()=>{r(cS())},[]),_=P.useMemo(()=>e.map(M=>({item:M,quantity:t[M.key],subtotal:t[M.key]*M.price})).filter(({quantity:M})=>M>0),[t,e]),w=P.useMemo(()=>_.reduce((M,b)=>M+b.subtotal,0),[_]),E=_.length>0;P.useEffect(()=>{r(M=>{let b=!1;const N={...M};return e.forEach(I=>{I.soldOut&&N[I.key]>0&&(N[I.key]=0,b=!0)}),b?N:M})},[e]);const S=P.useCallback(async M=>{const b=uI(M.ticket),N=await DF.toDataURL(b,{width:256,margin:1});return{summary:M,qrCode:N,progressUrl:b}},[]),D=P.useCallback(async()=>{if(i)return null;if(!E)return c("EMPTY_CART"),null;a(!0),c(null),d(null);try{const M=await oP(t),b=zh(M),N=await S(b);d(N);try{aF(b)}catch(I){console.warn("",I)}return b}catch(M){return console.error(M),c("ORDER_FAILED"),null}finally{a(!1)}},[S,E,t,i]),C=P.useCallback(()=>{d(null)},[]),k=P.useCallback(()=>{g(),C(),c(null)},[C,g]),V=P.useCallback(async()=>{if(!u)return null;try{const M=await bA(u.summary.ticket);if(!M)return d(null),null;let b=null;try{b=await SA(M.orderId)}catch(I){if(!lS(I))throw I;console.info("orders  orderLookup ",I)}const N=zh(b??M);return d(I=>I&&{...I,summary:N}),N}catch(M){throw console.error("",M),M}},[u]),U=P.useCallback(async M=>{const b=wf(M);if(!b)return null;try{const N=await bA(b);if(!N)return d(null),null;let I=null;try{I=await SA(N.orderId)}catch(j){if(!lS(j))throw j;console.info("orders  orderLookup ",j)}const R=zh(I??N),L=await S(R);return d(L),R}catch(N){throw console.error("",N),N}},[S]),q=u?.summary.ticket??"";P.useEffect(()=>{if(!q)return;let M=!1;const b=fP(q,N=>{if(!N){d(null);return}const I=zh(N);d(R=>{if(!R)return R;const L=R.summary;return L.progress!==I.progress||L.payment!==I.payment||L.callNumber!==I.callNumber||L.total!==I.total||L.orderId!==I.orderId?(I.progress===""&&!M&&(M=!0,b()),{...R,summary:I}):R})});return()=>{M||b()}},[q]);const $=P.useMemo(()=>({items:t,updateQuantity:m,resetItems:g,cartItems:_,total:w,hasItems:E,loading:i,error:o,setError:c,confirmOrder:D,orderResult:u,clearOrderResult:C,startNewOrder:k,refreshOrderResult:V,loadOrderByTicket:U}),[t,m,g,_,w,E,i,o,D,u,C,k,V,U]);return p.jsx(fI.Provider,{value:$,children:n})}function c2(){const n=P.useContext(fI);if(!n)throw new Error("useOrderFlow must be used within an OrderFlowProvider");return n}const dI=P.createContext(void 0),LF=6e3;function BF(n,e){const t=Object.entries(e.items).filter(([,r])=>r>0).map(([r,i])=>`${n[r]?.label??r} ${i}`).join(" / ");return{id:`${e.orderId}-${Date.now()}`,orderId:e.orderId,callNumber:e.callNumber??0,total:e.total,itemSummary:t||"",createdAt:e.createdAt??e.updatedAt??new Date,source:"new-order"}}function VF(n){return{id:`test-${Date.now()}`,orderId:n.orderId??"TEST-ORDER",callNumber:n.callNumber??0,total:n.total??0,itemSummary:n.itemSummary??": ",createdAt:n.createdAt?new Date(n.createdAt):new Date,source:"test"}}function FF({children:n}){const[e,t]=P.useState([]),r=P.useRef(new Map),i=P.useRef(new Set),{status:a,hasRole:o}=xp(),{menuItemMap:c}=dl(),u=a==="signed-in"&&o(["admin","staff","kitchen"]),d=P.useCallback(D=>{i.current.forEach(C=>{try{C(D)}catch(k){console.error("OrderToast listener failed",k)}})},[]),m=P.useCallback(D=>{t(k=>k.filter(V=>V.id!==D));const C=r.current.get(D);C&&(window.clearTimeout(C),r.current.delete(D))},[]),g=P.useCallback(D=>{const C=r.current.get(D);C&&window.clearTimeout(C);const k=window.setTimeout(()=>m(D),LF);r.current.set(D,k)},[m]),_=P.useCallback((D,C)=>{t(V=>[...V,D]),g(D.id);const k=C?{...C,toast:D}:{type:D.source,toast:D};return d(k),D},[d,g]),w=P.useCallback((D,C)=>{const k=D.id??`${D.orderId}-${Date.now()}`,V={...D,id:k,source:D.source??"custom"};return _(V,C)},[_]);P.useEffect(()=>{const D=r.current;return()=>{D.forEach(C=>window.clearTimeout(C)),D.clear()}},[]),P.useEffect(()=>{if(!u)return;const D=cP(C=>{const k=BF(c,C);_(k,{type:"new-order",order:C})});return()=>{D?.()}},[u,_,c]),P.useEffect(()=>{const D=rV(C=>{const k=VF(C);_(k,{type:"test"})});return()=>{D?.()}},[_]);const E=P.useCallback(D=>(i.current.add(D),()=>{i.current.delete(D)}),[]),S=P.useMemo(()=>({toasts:e,removeToast:m,addToast:w,registerListener:E}),[w,E,m,e]);return p.jsx(dI.Provider,{value:S,children:n})}function hI(){const n=P.useContext(dI);if(!n)throw new Error("useOrderToasts must be used within an OrderToastProvider");return n}function u2(){const[n,e]=P.useState(!1),[t,r]=P.useState(null);return P.useEffect(()=>{if(Ka){e(!0),r(null);return}const i=pC(Fi,async a=>{try{a||await fC(Fi),e(!0)}catch(o){console.error("",o),r("ANON_SIGNIN_FAILED")}});return()=>i()},[]),{ready:n,error:t}}const UF=P.memo(function({value:e,min:t=0,max:r,onChange:i,ariaLabel:a,decreaseLabel:o,increaseLabel:c,disabled:u=!1}){const d=()=>{if(u)return;const _=e-1;_<t||i(_)},m=()=>{if(u)return;const _=e+1;typeof r=="number"&&_>r||i(_)},g=`quantity-stepper${u?" disabled":""}`;return p.jsxs("div",{className:g,role:"group","aria-label":a,"aria-disabled":u,children:[p.jsx("button",{type:"button",className:"quantity-button decrease",onClick:d,"aria-label":o??"1",disabled:u||e<=t,children:""}),p.jsx("div",{className:"quantity-value","aria-live":"polite",children:e}),p.jsx("button",{type:"button",className:"quantity-button increase",onClick:m,"aria-label":c??"1",disabled:u||typeof r=="number"&&e>=r,children:""})]})});function zF(){const n=ol(),{ready:e,error:t}=u2(),{menuItems:r}=dl(),{items:i,updateQuantity:a,resetItems:o,total:c,hasItems:u,clearOrderResult:d,setError:m}=c2(),{language:g}=Ki(),_=ss[g],[w,E]=P.useState(null),[S,D]=P.useState("drink"),[C,k]=P.useState(!1);P.useEffect(()=>{d(),m(null)},[d,m]);const V=q=>{if(q&&q.preventDefault(),E(null),!!e){if(!u){E("EMPTY_CART");return}n("/order/review")}},U=P.useMemo(()=>r.filter(q=>{const $=q.key.startsWith("drink_");return S==="drink"?$:!$}),[r,S]);return p.jsxs("div",{className:"content-container",children:[p.jsxs("section",{className:"content-card",style:{paddingBottom:"0"},children:[p.jsx("h1",{className:"section-title",children:_.orderInput.title}),p.jsx("p",{className:"section-description",style:{marginBottom:"1rem"},children:_.menu.imageNote}),p.jsxs("div",{className:"allergy-warning-container",children:[p.jsxs("div",{className:"allergy-warning-header",onClick:()=>k(!C),role:"button","aria-expanded":C,children:[p.jsx("span",{children:_.orderInput.descriptionLead}),p.jsx("span",{children:C?"":""})]}),C&&p.jsx("div",{className:"allergy-warning-content",children:_.orderInput.descriptionFollow})]}),!e&&!t&&p.jsx("p",{children:_.auth.signingIn}),t&&p.jsx("p",{className:"error-message",children:_.auth.error}),p.jsxs("div",{className:"category-tabs",children:[p.jsx("button",{type:"button",className:`category-tab ${S==="food"?"active":""}`,onClick:()=>D("food"),children:_.orderInput.categories.food}),p.jsx("button",{type:"button",className:`category-tab ${S==="drink"?"active":""}`,onClick:()=>D("drink"),children:_.orderInput.categories.drink})]}),p.jsxs("form",{className:"form-grid",onSubmit:V,style:{paddingBottom:"2rem"},children:[U.map(q=>{const $=$y(q,g),M=SP(q,g),b=q.soldOut,N=i[q.key]??0,I=N>0,R=`menu-card${b?" sold-out":""}${I?" selected":""}`;return p.jsxs("article",{className:R,"aria-disabled":b,children:[p.jsx("div",{className:"menu-card-media",children:p.jsx("img",{src:q.image,alt:_.menu.imageAlt($),loading:"lazy",decoding:"async",width:320,height:200})}),p.jsxs("div",{className:"menu-card-body",children:[p.jsxs("header",{className:"menu-card-header",children:[p.jsxs("div",{className:"menu-card-title-group",children:[p.jsx("h2",{className:"menu-card-title",children:$}),q.allergens.length>0&&p.jsx("ul",{className:"menu-card-allergens","aria-label":_.menu.allergensLabel($),children:q.allergens.map(L=>{const j=H9[L],W=CP(j.key,g);return p.jsx("li",{className:"menu-card-allergen",title:W,"aria-label":W,children:p.jsx("span",{className:"menu-card-allergen-icon","aria-hidden":"true",children:p.jsx("img",{src:j.icon,alt:W,loading:"lazy",decoding:"async",width:32,height:32})})},j.key)})})]}),p.jsxs("div",{className:"menu-card-status",children:[p.jsxs("span",{className:"menu-card-price",children:["",q.price.toLocaleString()]}),b&&p.jsx("span",{className:"menu-card-badge",role:"status",children:_.menu.soldOutBadge})]})]}),p.jsx("p",{className:"menu-card-description",children:M}),b&&p.jsx("p",{className:"menu-card-soldout-note",children:_.menu.soldOutMessage}),p.jsx("div",{className:"menu-card-footer",children:p.jsx(UF,{value:N,disabled:b,onChange:L=>{b||(a(q.key,L),w&&E(null))},ariaLabel:_.menu.quantityLabel($),decreaseLabel:_.quantityStepper.decrease,increaseLabel:_.quantityStepper.increase})})]})]},q.key)}),w&&p.jsx("p",{style:{color:"#dc2626",margin:0},children:_.errors[w]}),p.jsx("div",{style:{height:"80px",gridColumn:"1 / -1"}})]})]}),p.jsxs("div",{className:"fixed-footer",children:[p.jsxs("div",{className:"fixed-footer-total",children:[p.jsx("span",{className:"fixed-footer-total-label",children:_.orderInput.totalLabel}),p.jsxs("span",{className:"fixed-footer-total-amount",children:["",c.toLocaleString()]})]}),p.jsx("button",{type:"button",className:"button primary fixed-footer-button",onClick:()=>V(),disabled:!e||!u,children:_.orderInput.reviewButton})]})]})}const HF=Qt("trash.webp");function GF(){const n=ol(),{ready:e,error:t}=u2(),{cartItems:r,total:i,hasItems:a,loading:o,error:c,setError:u,confirmOrder:d}=c2(),[m,g]=P.useState(null),[_,w]=P.useState(null),[E,S]=P.useState(!1),[D,C]=P.useState(!1),[k,V]=P.useState(null),{language:U}=Ki(),q=ss[U];P.useEffect(()=>{a||n("/order",{replace:!0})},[a,n]),P.useEffect(()=>{u(null)},[u]);const $=async()=>{const N=await d();if(N){g(N.ticket),w(N.callNumber);const I=uI(N.ticket);V(I),C(!0)}},M=async()=>{if(k)try{await navigator.clipboard.writeText(k)}catch(N){console.error("URL",N)}C(!1),m&&S(!0)},b=()=>{if(!m){S(!1);return}n(`/order/complete/${m}`,{replace:!0})};return p.jsx("div",{className:"content-container",children:p.jsxs("section",{className:"content-card",children:[p.jsx("h1",{className:"section-title",children:q.orderReview.title}),p.jsxs("p",{className:"section-description",children:[q.orderReview.descriptionLead,p.jsx("br",{}),q.orderReview.descriptionFollow]}),!e&&!t&&p.jsx("p",{children:q.auth.signingIn}),t&&p.jsx("p",{className:"error-message",children:q.auth.error}),p.jsxs("div",{className:"receipt-card",children:[p.jsxs("div",{className:"receipt-header",children:[p.jsx("span",{children:q.orderReview.tableHeaders.item}),p.jsx("span",{children:q.orderReview.tableHeaders.quantity}),p.jsx("span",{children:q.orderReview.tableHeaders.subtotal})]}),p.jsx("div",{className:"receipt-divider","aria-hidden":"true"}),p.jsx("div",{className:"receipt-items",children:r.map(({item:N,quantity:I,subtotal:R})=>p.jsxs("div",{className:"receipt-row",children:[p.jsx("div",{className:"receipt-item-info",children:p.jsx("span",{className:"receipt-item-name",children:$y(N,U)})}),p.jsxs("span",{className:"receipt-item-qty",children:["",I]}),p.jsxs("span",{className:"receipt-item-subtotal",children:["",R.toLocaleString()]})]},N.key))}),p.jsx("div",{className:"receipt-divider","aria-hidden":"true"}),p.jsxs("div",{className:"receipt-total",children:[p.jsx("span",{children:q.orderReview.totalLabel}),p.jsxs("span",{children:["",i.toLocaleString()]})]}),D&&k&&p.jsx("div",{className:"url-copy-modal-backdrop",role:"dialog","aria-modal":"true","aria-labelledby":"url-copy-modal-title",children:p.jsxs("div",{className:"url-copy-modal",children:[_!==null&&_>0&&p.jsxs("div",{className:"url-copy-modal-order-id",children:[p.jsx("span",{className:"url-copy-modal-order-id-label",children:q.orderComplete.callNumberLabel}),p.jsx("span",{className:"url-copy-modal-order-id-value",children:_})]}),p.jsx("h2",{id:"url-copy-modal-title",children:q.orderReview.urlCopyModal.title}),p.jsx("p",{children:q.orderReview.urlCopyModal.description}),p.jsx("div",{className:"url-copy-modal-url",children:p.jsx("code",{className:"url-copy-modal-url-text",children:k})}),p.jsx("div",{className:"url-copy-modal-actions",children:p.jsx("button",{type:"button",className:"button primary",onClick:M,children:q.orderReview.urlCopyModal.copyButton})})]})}),E&&p.jsx("div",{className:"waste-guide-modal-backdrop",role:"presentation",children:p.jsxs("div",{className:"waste-guide-modal",role:"dialog","aria-modal":"true","aria-labelledby":"waste-guide-title","aria-describedby":"waste-guide-description",children:[p.jsx("h2",{id:"waste-guide-title",children:q.wasteGuide.title}),p.jsx("p",{id:"waste-guide-description",children:q.wasteGuide.description}),p.jsx("div",{className:"waste-guide-visual","aria-hidden":"true",children:p.jsx("img",{src:HF,alt:q.wasteGuide.placeholder,style:{width:"100%",height:"auto",borderRadius:"14px"}})}),p.jsx("div",{className:"waste-guide-actions",children:p.jsx("button",{type:"button",className:"button primary",onClick:b,children:q.wasteGuide.confirm})})]})})]}),c&&p.jsx("p",{style:{color:"#dc2626",marginTop:0},children:q.errors[c]}),p.jsxs("div",{className:"button-row",children:[p.jsx("button",{type:"button",className:"button primary",onClick:$,disabled:!e||o,children:o?q.orderReview.confirming:q.orderReview.confirmButton}),p.jsx("button",{type:"button",className:"button secondary",onClick:()=>n("/order"),disabled:o,children:q.orderReview.changeButton})]})]})})}const qF=Qt("Thank_You_banner.png"),uS=[{key:"received",matches:[""]},{key:"ready",matches:[""]},{key:"completed",matches:[""]}];function Dv(n={}){const{enableTicketSearch:e=!1,ticketNavigationBase:t="/order/complete",fallbackPath:r="/status",titleOverride:i,descriptionOverride:a}=n,o=ol(),{ticket:c}=DN(),[u]=Uv(),d=u.get("ticket"),m=u.get("previewReady"),g=P.useMemo(()=>c?wf(c):d?wf(d):"",[d,c]),_=P.useMemo(()=>{const ye=t||"/order/complete";return ye.endsWith("/")?ye.slice(0,-1):ye},[t]),{ready:w,error:E}=u2(),{language:S}=Ki(),D=ss[S],C=D.orderComplete,k=D.auth,V=D.copy,{orderResult:U,startNewOrder:q,refreshOrderResult:$,loadOrderByTicket:M,clearOrderResult:b}=c2(),[N,I]=P.useState(!1),[R,L]=P.useState(null),[j,W]=P.useState(0),[ge,H]=P.useState(0),G=5e3,[le,ve]=P.useState(!1),[He,Y]=P.useState(null),[te,me]=P.useState(""),[we,Ce]=P.useState(null),[be,Se]=P.useState(!1),$e=P.useRef(!1);P.useEffect(()=>{e&&(me(g),Ce(null))},[e,g]);const tt=U?.summary.ticket.toUpperCase(),Xe=U&&(!g||tt===g)?U:null,et=Xe?.summary,Wn=e,Qn=Xe?.qrCode??"",Jt=Xe?.progressUrl??"",It=et?.progress??"",fr=It==="",_r=It==="",Zn=P.useMemo(()=>m==="1"||m==="true",[m]),kt=!!(et&&(fr||Zn)),{menuItemMap:vt}=dl();P.useEffect(()=>{_r&&et&&!$e.current&&($e.current=!0,Se(!0))},[_r,et]);const Ln=()=>{Se(!1),b()},Bn=et?.callNumber&&et.callNumber>0?et.callNumber:null,dr=Bn?C.readyInstructionWithCallNumber(Bn):C.readyInstructionWait,zt=P.useMemo(()=>et?et.progress===""?{label:C.paymentState.complete,tone:"complete"}:et.payment===""&&et.progress===""?{label:C.paymentState.ready,tone:"ready"}:et.payment===""?{label:C.paymentState.paid,tone:"paid"}:{label:C.paymentState.unpaid,tone:"unpaid"}:{label:"",tone:"unpaid"},[C,et]),xr=P.useMemo(()=>{if(!et?.createdAt)return{display:"",iso:""};const ye=new Date(et.createdAt);return Number.isNaN(ye.getTime())?{display:"",iso:""}:{display:new Intl.DateTimeFormat(S==="ja"?"ja-JP":"en-US",{dateStyle:"medium",timeStyle:"short"}).format(ye),iso:ye.toISOString()}},[S,et?.createdAt]),zr=P.useMemo(()=>TP(It,S),[It,S]),se=P.useMemo(()=>{const ye=uS.findIndex(Ue=>Ue.matches.includes(It));return ye>=0?ye:0},[It]);P.useEffect(()=>{Xe&&Y(null)},[Xe]),P.useEffect(()=>{if(!g){!U&&!e&&o(r,{replace:!0});return}if(U&&tt===g)return;let ye=!0;return ve(!0),Y(null),M(g).then(Ue=>{ye&&(Ue||o(`/order/not-found?ticket=${encodeURIComponent(g)}`,{replace:!0}))}).catch(Ue=>{console.error(Ue),ye&&Y("loadFailed")}).finally(()=>{ye&&ve(!1)}),()=>{ye=!1}},[tt,e,r,M,o,g,U]),P.useEffect(()=>{!Xe&&!le&&!g&&U&&o(`${_}/${U.summary.ticket}`,{replace:!0})},[le,o,g,U,Xe,_]),P.useEffect(()=>{if(!j){H(0);return}const ye=()=>{const Fe=j-Date.now();H(Fe>0?Math.ceil(Fe/1e3):0)};ye();const Ue=window.setInterval(ye,500);return()=>window.clearInterval(Ue)},[j]);const Ee=ye=>{ye.preventDefault();const Ue=wf(te);if(!Ue){Ce("required");return}Ce(null),me(Ue),o(`${_}/${Ue}`)},ke=e?p.jsxs("section",{className:"content-card","aria-label":C.ticketSearch.regionLabel,children:[p.jsx("h2",{className:"section-title",children:C.ticketSearch.title}),p.jsx("p",{className:"section-description",children:C.ticketSearch.description}),p.jsxs("form",{className:"form-grid",onSubmit:Ee,children:[p.jsxs("div",{className:"field",children:[p.jsx("label",{htmlFor:"progress-ticket",children:C.ticketSearch.label}),p.jsx("input",{id:"progress-ticket",type:"text",inputMode:"text",value:te,onChange:ye=>me(ye.target.value.toUpperCase()),placeholder:C.ticketSearch.placeholder,maxLength:24})]}),p.jsx("div",{className:"button-row",children:p.jsx("button",{type:"submit",className:"button primary",children:C.ticketSearch.button})})]}),we&&p.jsx("p",{className:"error-message",children:C.ticketSearch.error})]}):null;if(!et)return le?p.jsxs("div",{className:"content-container",children:[ke,p.jsxs("section",{className:"content-card order-complete-card","aria-live":"polite",children:[p.jsx("h1",{className:"section-title",children:C.loadingTitle}),p.jsx("p",{className:"section-description",children:C.loadingDescription})]})]}):He?p.jsxs("div",{className:"content-container",children:[ke,p.jsxs("section",{className:"content-card order-complete-card","aria-live":"polite",children:[p.jsx("h1",{className:"section-title",children:C.loadErrorTitle}),p.jsx("p",{className:"section-description",children:C.loadErrorDescription}),p.jsx("div",{className:"button-row",children:p.jsx("button",{type:"button",className:"button secondary",onClick:()=>o(r),children:C.loadErrorAction})})]})]}):e?p.jsxs("div",{className:"content-container",children:[ke,p.jsxs("section",{className:"content-card order-complete-card","aria-live":"polite",children:[p.jsx("h1",{className:"section-title",children:C.inviteTitle}),p.jsx("p",{className:"section-description",children:C.inviteDescription})]})]}):null;const Ct=i??C.title,de=a??(Wn?C.description.progressOnly:C.description.default),Oe=async()=>{if(!(N||Date.now()<j||ge>0)){I(!0),L(null);try{await $()||L("refreshFailed")}catch(ye){console.error(ye),L("refreshFailed")}finally{I(!1),W(Date.now()+G)}}},De=async()=>{try{await navigator.clipboard.writeText(et.ticket),alert(V.progressCodeSuccess)}catch(ye){console.error(ye),alert(V.progressCodeFailure)}},Me=async()=>{try{await navigator.clipboard.writeText(Jt),alert(V.progressLinkSuccess)}catch(ye){console.error(ye),alert(V.progressLinkFailure)}},nt=()=>{q(),o("/order")};return p.jsxs("div",{className:"content-container",children:[ke,p.jsxs("section",{className:"content-card order-complete-card","aria-live":"polite",children:[p.jsx("h1",{className:"section-title",children:Ct}),p.jsx("p",{className:"section-description",children:de}),!w&&!E&&p.jsx("p",{children:k.signingIn}),E&&p.jsx("p",{className:"error-message",children:k.error}),p.jsxs("div",{className:"completion-order-info",children:[p.jsxs("div",{className:"completion-status-card",children:[p.jsxs("div",{className:"completion-call-number-block","aria-live":"polite",children:[p.jsx("span",{className:"completion-label",children:C.callNumberLabel}),p.jsx("span",{className:"completion-call-number",children:et.callNumber>0?et.callNumber:C.callNumberPending})]}),p.jsx("div",{className:"payment-state",children:p.jsx("span",{className:`payment-state-badge ${zt.tone}`,children:zt.label})}),p.jsxs("div",{className:"completion-status-header",children:[p.jsx("span",{className:"completion-label",children:C.statusHeading}),p.jsx("button",{type:"button",className:"button secondary completion-refresh-button",onClick:Oe,disabled:N||ge>0,children:N?C.refresh.refreshing:ge>0?C.refresh.cooldown(ge):C.refresh.action})]}),R&&p.jsx("p",{className:"completion-refresh-error",children:C.refresh.error}),p.jsx("div",{className:"completion-progress",role:"list",children:uS.map((ye,Ue)=>{const Fe=["completion-progress-step",Ue<se?"done":"",Ue===se?"current":""].filter(Boolean).join(" ");return p.jsxs("div",{className:Fe,role:"listitem",children:[p.jsx("div",{className:"completion-progress-node","aria-hidden":"true"}),p.jsx("span",{className:"completion-progress-label",children:IP(ye.key,S)})]},ye.key)})}),kt&&et&&p.jsxs("div",{className:`completion-ready-notice${Zn&&!fr?" preview":""}`,role:"status","aria-live":"assertive",children:[p.jsx("div",{className:"completion-ready-icon","aria-hidden":"true",children:p.jsx("svg",{viewBox:"0 0 24 24",focusable:"false","aria-hidden":"true",children:p.jsx("path",{d:"M9.5 16.25 5.75 12.5l1.5-1.5 2.25 2.25 6-6 1.5 1.5-7.5 7.5Z",fill:"currentColor"})})}),p.jsxs("div",{className:"completion-ready-copy",children:[p.jsx("p",{className:"completion-ready-title",children:C.readyTitle}),p.jsx("p",{className:"completion-ready-message",children:dr}),Zn&&!fr&&p.jsx("span",{className:"completion-ready-preview-tag",children:C.readyPreviewTag})]})]})]}),p.jsxs("div",{className:"completion-meta",children:[p.jsx("h2",{className:"completion-subheading",children:C.metaHeading}),p.jsxs("dl",{className:"completion-meta-list",children:[p.jsxs("div",{children:[p.jsx("dt",{children:C.meta.total}),p.jsxs("dd",{children:["",et.total.toLocaleString()]})]}),p.jsxs("div",{children:[p.jsx("dt",{children:C.meta.payment}),p.jsx("dd",{children:Rc(et.payment,S)})]}),p.jsxs("div",{children:[p.jsx("dt",{children:C.meta.progress}),p.jsx("dd",{children:zr})]}),p.jsxs("div",{children:[p.jsx("dt",{children:C.meta.orderedAt}),p.jsx("dd",{children:xr.display?p.jsx("time",{dateTime:xr.iso,children:xr.display}):""})]})]})]})]}),be&&p.jsx("div",{className:"thank-you-modal-backdrop",role:"dialog","aria-modal":"true","aria-labelledby":"thank-you-modal-title",children:p.jsxs("div",{className:"thank-you-modal",children:[p.jsx("img",{src:qF,alt:C.thankYouImageAlt,className:"thank-you-modal-image",loading:"lazy"}),p.jsxs("div",{className:"thank-you-modal-copy",children:[p.jsx("h2",{id:"thank-you-modal-title",className:"thank-you-modal-title",children:C.thankYouTitle}),p.jsx("p",{className:"thank-you-modal-message",children:C.thankYouMessage})]}),p.jsx("div",{className:"thank-you-modal-actions",children:p.jsx("button",{type:"button",className:"button primary",onClick:Ln,children:C.thankYouCloseButton})})]})}),Qn&&p.jsxs("div",{className:"completion-qr-block",children:[p.jsx("img",{src:Qn,alt:C.qrAlt}),p.jsx("span",{className:"completion-qr-caption",children:C.qrCaption})]}),p.jsxs("div",{className:"completion-identifiers",children:[p.jsxs("div",{className:"completion-order-id completion-identifier-card",children:[p.jsx("span",{className:"completion-label",children:C.identifiers.orderId}),p.jsx("span",{className:"completion-order-id-value",children:et.orderId})]}),Wn&&p.jsxs("div",{className:"completion-order-id completion-identifier-card",children:[p.jsx("span",{className:"completion-label",children:C.identifiers.ticket}),p.jsx("span",{className:"completion-order-id-value",style:{wordBreak:"break-all"},children:et.ticket})]})]}),p.jsxs("div",{className:"completion-items",children:[p.jsx("h2",{className:"completion-subheading",children:C.itemsHeading}),p.jsxs("table",{className:"completion-items-table",children:[p.jsx("thead",{children:p.jsxs("tr",{children:[p.jsx("th",{scope:"col",children:C.itemsTable.item}),p.jsx("th",{scope:"col",children:C.itemsTable.quantity}),p.jsx("th",{scope:"col",children:C.itemsTable.price}),p.jsx("th",{scope:"col",children:C.itemsTable.subtotal})]})}),p.jsxs("tbody",{children:[Object.entries(et.items).map(([ye,Ue])=>{const Fe=vt[ye];return Fe?p.jsxs("tr",{children:[p.jsx("td",{children:$y(Fe,S)}),p.jsx("td",{className:"numeric",children:Ue}),p.jsxs("td",{className:"numeric",children:["",Fe.price.toLocaleString()]}),p.jsxs("td",{className:"numeric",children:["",(Fe.price*Ue).toLocaleString()]})]},ye):null}),p.jsxs("tr",{className:"completion-items-total",children:[p.jsx("td",{colSpan:3,children:C.itemsTable.total}),p.jsxs("td",{className:"numeric",children:["",et.total.toLocaleString()]})]})]})]})]}),p.jsxs("div",{className:"button-row completion-actions",children:[p.jsx("button",{type:"button",className:"button primary",onClick:Me,children:C.actions.copyLink}),Wn&&Jt&&p.jsx("button",{type:"button",className:"button secondary",onClick:De,children:C.actions.copyCode}),p.jsx("button",{type:"button",className:"button secondary",onClick:nt,children:C.actions.startNew})]})]})]})}function fS(){const{language:n}=Ki(),t=ss[n].orderProgress;return p.jsx(Dv,{enableTicketSearch:!0,ticketNavigationBase:"/progress",fallbackPath:"/progress",titleOverride:t.title,descriptionOverride:t.description})}function $F(){const[n]=Uv(),e=n.get("ticket")??"",t=wf(e),{language:r}=Ki(),i=ss[r].ticketNotFound;return p.jsx("div",{className:"content-container",children:p.jsxs("section",{className:"content-card order-complete-card","aria-live":"polite",children:[p.jsx("h1",{className:"section-title",children:i.title}),p.jsx("p",{className:"section-description",children:t?i.descriptionKnown(t):i.descriptionUnknown}),p.jsxs("div",{className:"button-row",children:[p.jsx(o0,{className:"button primary",to:"/status",children:i.retry}),p.jsx(o0,{className:"button secondary",to:"/order",children:i.newOrder})]})]})})}const Rg=3600*1e3,pI=()=>{const{list:n}=yo();return n.reduce((e,t)=>(e[t.key]=0,e),{})},dS=n=>`${n.getHours().toString().padStart(2,"0")}:00`,XF=n=>n.createdAt??n.updatedAt;function YF(n,e,t=24){const r=e.getTime(),i=Array.from({length:t},(a,o)=>{const c=new Date(r+o*Rg),u=new Date(c.getTime()+Rg);return{slotStart:c,slotEnd:u,label:`${dS(c)} - ${dS(u)}`,totals:pI(),orderCount:0,totalItems:0}});return n.forEach(a=>{const o=XF(a);if(!o)return;const c=o.getTime()-r;if(c<0)return;const u=Math.floor(c/Rg);if(u<0||u>=t)return;const d=i[u];let m=!1;Object.entries(a.items).forEach(([g,_])=>{const w=Number(_);if(!Number.isFinite(w)||w<=0)return;const E=g;d.totals[E]=(d.totals[E]??0)+w,d.totalItems+=w,m=!0}),m&&(d.orderCount+=1)}),i}function KF(n){const e=pI(),t={:0,:0,:0};let r=0;return n.forEach(i=>{t[i.progress]=(t[i.progress]??0)+1,i.progress!==""&&(r+=1,Object.entries(i.items).forEach(([a,o])=>{const c=Number(o);if(!Number.isFinite(c)||c<=0)return;const u=a;e[u]=(e[u]??0)+c}))}),{orderCount:r,totals:e,statusCounts:t}}const WF=6e4,hS=n=>n.toISOString().slice(0,10),QF=n=>{const e=n.getHours().toString().padStart(2,"0"),t=n.getMinutes().toString().padStart(2,"0"),r=n.getSeconds().toString().padStart(2,"0");return`${e}:${t}:${r}`},ZF=n=>{const e=new Date(n);return e.setDate(e.getDate()+1),e};function JF(){const[n,e]=P.useState(()=>hS(new Date)),[t,r]=P.useState([]),[i,a]=P.useState(!1),[o,c]=P.useState(null),[u,d]=P.useState(null),{registerListener:m}=hI(),{signOut:g}=xp(),{menuItems:_}=dl(),w=P.useMemo(()=>{const b=new Date(`${n}T00:00:00`);return b.setHours(0,0,0,0),b},[n]),E=P.useMemo(()=>ZF(w),[w]),S=P.useCallback(async b=>{if(!b?.aborted){a(!0),c(null);try{const N=await lP({start:w,end:E});if(b?.aborted)return;r(N),d(new Date)}catch(N){if(b?.aborted)return;console.error(N);const I=N instanceof Error?N.message:"";c(I)}finally{b?.aborted||a(!1)}}},[w,E]),D=P.useRef(S);P.useEffect(()=>{D.current=S},[S]),P.useEffect(()=>{const b=new AbortController;return S(b.signal),()=>b.abort()},[S]),P.useEffect(()=>{const b=new AbortController,N=window.setInterval(()=>{S(b.signal)},WF);return()=>{b.abort(),window.clearInterval(N)}},[S]),P.useEffect(()=>{const b=m(N=>{N.type==="new-order"&&D.current()});return()=>{b()}},[m]);const C=P.useMemo(()=>YF(t,w,24),[t,w]),k=P.useMemo(()=>KF(t),[t]),V=P.useMemo(()=>C.filter(b=>b.totalItems>0),[C]),U=P.useMemo(()=>{const b=_.reduce((R,L)=>(R[L.key]=C.reduce((j,W)=>j+(W.totals[L.key]??0),0),R),{}),N=Object.values(b).reduce((R,L)=>R+L,0),I=C.reduce((R,L)=>R+L.orderCount,0);return{totals:b,totalItems:N,totalOrders:I}},[C,_]),q=b=>{e(b.target.value)},$=()=>{d(null),S()},M=()=>{g()};return p.jsxs("div",{className:"kitchen-page",children:[p.jsxs("header",{className:"kitchen-header",children:[p.jsxs("div",{children:[p.jsx("p",{className:"kitchen-overline",children:""}),p.jsx("h1",{children:""}),p.jsx("p",{className:"kitchen-description",children:""})]}),p.jsxs("div",{className:"kitchen-controls",role:"group","aria-label":"",children:[p.jsxs("label",{className:"kitchen-date-control",children:[p.jsx("span",{children:""}),p.jsx("input",{type:"date",value:n,onChange:q,max:hS(new Date)})]}),p.jsx("button",{type:"button",className:"button secondary",onClick:$,disabled:i,children:""}),p.jsx("button",{type:"button",className:"button secondary",onClick:M,children:""}),p.jsxs("p",{className:"kitchen-last-updated",children:[": ",u?QF(u):""]})]})]}),o&&p.jsx("div",{className:"kitchen-alert error",children:o}),i&&p.jsx("p",{className:"kitchen-loading",children:""}),p.jsxs("section",{className:"kitchen-section","aria-labelledby":"kitchen-current-orders",children:[p.jsxs("div",{className:"kitchen-section-header",children:[p.jsx("h2",{id:"kitchen-current-orders",children:""}),p.jsx("p",{children:""})]}),p.jsx("div",{className:"kitchen-summary-grid",children:_.map(b=>p.jsxs("article",{className:"kitchen-summary-card",children:[p.jsx("h3",{children:b.label}),p.jsxs("p",{className:"kitchen-summary-count",children:[k.totals[b.key],""]})]},b.key))}),p.jsxs("div",{className:"kitchen-status-chips",role:"list",children:[p.jsxs("span",{role:"listitem",className:"kitchen-status-chip",children:[" ",k.statusCounts.,""]}),p.jsxs("span",{role:"listitem",className:"kitchen-status-chip highlight",children:[" ",k.statusCounts.,""]}),p.jsxs("span",{role:"listitem",className:"kitchen-status-chip muted",children:[" ",k.statusCounts.,""]}),p.jsxs("span",{role:"listitem",className:"kitchen-status-chip total",children:[" ",k.orderCount,""]})]})]}),p.jsxs("section",{className:"kitchen-section","aria-labelledby":"kitchen-hourly-sales",children:[p.jsxs("div",{className:"kitchen-section-header",children:[p.jsx("h2",{id:"kitchen-hourly-sales",children:"1"}),p.jsx("p",{children:": 60"})]}),V.length===0?p.jsx("p",{className:"kitchen-empty",children:""}):p.jsx("div",{className:"kitchen-table-wrapper",children:p.jsxs("table",{className:"kitchen-table",children:[p.jsx("thead",{children:p.jsxs("tr",{children:[p.jsx("th",{scope:"col",children:""}),_.map(b=>p.jsx("th",{scope:"col",children:b.label},b.key)),p.jsx("th",{scope:"col",children:""}),p.jsx("th",{scope:"col",children:""})]})}),p.jsx("tbody",{children:V.map(b=>p.jsxs("tr",{children:[p.jsx("th",{scope:"row",children:b.label}),_.map(N=>p.jsx("td",{children:b.totals[N.key]>0?b.totals[N.key]:""},N.key)),p.jsx("td",{children:b.totalItems>0?b.totalItems:""}),p.jsx("td",{children:b.orderCount>0?b.orderCount:""})]},b.label))}),p.jsx("tfoot",{children:p.jsxs("tr",{children:[p.jsx("th",{scope:"row",children:""}),_.map(b=>p.jsx("td",{children:U.totals[b.key]||""},b.key)),p.jsx("td",{children:U.totalItems||""}),p.jsx("td",{children:U.totalOrders||""})]})})]})})]})]})}const eU={"new-order":"",test:"",custom:""},tU={hour:"2-digit",minute:"2-digit"};function nU(n){return n?n.toLocaleTimeString([],tU):""}function rU(n){if(!n)return;if(n instanceof Date)return n;const e=new Date(n);return Number.isNaN(e.getTime())?void 0:e}function iU(n){return n&&n>0?` ${n}`:""}const mI=P.memo(({ariaLabel:n="",className:e,hideWhenEmpty:t=!0,titleBySource:r,variant:i="dark"})=>{const{toasts:a,removeToast:o}=hI();if(t&&a.length===0)return null;const c=["order-toast-container",e].filter(Boolean).join(" ");return p.jsx("div",{className:c,role:"status","aria-live":"polite","aria-label":n,children:a.map(u=>{const d=r?.[u.source]??eU[u.source],m=rU(u.createdAt),g=nU(m),_=iU(u.callNumber),w=i==="light"?"order-toast--light":"";return p.jsxs("div",{className:`order-toast ${w}`,children:[p.jsx("button",{type:"button",className:"order-toast-close",onClick:()=>o(u.id),"aria-label":"",children:""}),p.jsxs("div",{className:"order-toast-content",children:[p.jsx("p",{className:"order-toast-title",children:d}),p.jsxs("p",{className:"order-toast-meta",children:[_,"   ",u.total.toLocaleString()]}),p.jsx("p",{className:"order-toast-message",children:u.itemSummary}),g&&p.jsxs("p",{className:"order-toast-meta",children:[" ",g]})]})]},u.id)})})});mI.displayName="OrderToastViewport";function pS({children:n,required:e,title:t,description:r}){const{status:i,error:a,signIn:o,signOut:c,hasRole:u}=xp(),d=P.useMemo(()=>Array.isArray(e)?e:[e],[e]),[m,g]=P.useState(""),[_,w]=P.useState(""),[E,S]=P.useState(!1),[D,C]=P.useState(null),k=P.useMemo(()=>({admin:"",kitchen:"",staff:""}),[]),V=P.useMemo(()=>d.map($=>k[$]).join(", "),[d,k]);P.useEffect(()=>{i==="signed-out"&&(g(""),w(""),S(!1),C(null))},[i]);const U=async $=>{if($.preventDefault(),!m||!_){C("");return}C(null),S(!0);try{await o({email:m,password:_})}catch(M){const b=M instanceof Error?M.message:"";C(b)}finally{S(!1)}},q=P.useMemo(()=>u(d),[u,d]);return i==="loading"?p.jsx("div",{className:"role-guard",children:p.jsx("div",{className:"role-guard-card",children:p.jsx("p",{className:"role-guard-status",children:""})})}):i==="signed-out"?p.jsx("div",{className:"role-guard",children:p.jsxs("div",{className:"role-guard-card",children:[p.jsx("h1",{children:t??""}),p.jsx("p",{className:"role-guard-description",children:r??` ${V} `}),p.jsxs("form",{className:"role-guard-form",onSubmit:U,children:[p.jsxs("label",{className:"role-guard-field",children:[p.jsx("span",{children:""}),p.jsx("input",{type:"email",autoComplete:"email",value:m,onChange:$=>g($.target.value),required:!0,placeholder:"admin@example.com"})]}),p.jsxs("label",{className:"role-guard-field",children:[p.jsx("span",{children:""}),p.jsx("input",{type:"password",autoComplete:"current-password",value:_,onChange:$=>w($.target.value),required:!0,placeholder:""})]}),(D||a)&&p.jsx("p",{className:"role-guard-error",children:D??a}),p.jsx("button",{type:"submit",className:"button primary",disabled:E,children:E?"":""})]})]})}):q?p.jsx(p.Fragment,{children:n}):p.jsx("div",{className:"role-guard",children:p.jsxs("div",{className:"role-guard-card",children:[p.jsx("h1",{children:""}),p.jsxs("p",{className:"role-guard-description",children:[V," "]}),(D||a)&&p.jsx("p",{className:"role-guard-error",children:D??a}),p.jsx("button",{type:"button",className:"button secondary",onClick:()=>c(),children:""})]})})}const aU=Qt("WebP/header/header.webp");function sU(){const{language:n}=Ki(),e=ss[n];return p.jsxs("div",{className:"not-found",children:[p.jsx("h1",{children:e.notFound.title}),p.jsx("p",{children:e.notFound.description})]})}function oU(){const n=Yi(),{language:e,setLanguage:t}=Ki(),r=n.pathname.startsWith("/admin"),i=n.pathname.startsWith("/kitchen"),a=r||i,o=r||i?"ja":e,c=ss[o],u=ss[e].languageToggle,d=["app-shell",r?"app-shell--wide":""].filter(Boolean).join(" "),m=r?"light":"dark",g=!r&&!i,_=g,w=o==="en"?"Mobile ordering system":"",E=e==="ja"?"en":"ja",S=()=>{t(E)};return p.jsx(FF,{children:p.jsxs(jF,{children:[p.jsxs("div",{className:d,children:[p.jsx("header",{className:["app-header",_?"app-header--public":"app-header--internal"].filter(Boolean).join(" "),children:_?p.jsxs("div",{className:"header-row",children:[p.jsx("img",{className:"header-combined-image",src:aU,alt:c.header.titleAlt}),g&&p.jsx("button",{type:"button",className:"language-switch",onClick:S,"aria-label":u.buttonAria(E),children:u.buttonText})]}):p.jsx("div",{className:"header-internal",children:p.jsxs("div",{className:"brand",children:[p.jsx("span",{"aria-hidden":"true",className:"brand-icon",children:""}),p.jsxs("div",{className:"brand-text",children:[p.jsx("span",{className:"brand-title",children:""}),p.jsx("span",{className:"brand-subtitle",children:w})]})]})})}),p.jsx("main",{className:"app-main",children:p.jsxs(bS,{children:[p.jsx(rn,{path:"/",element:p.jsx(mi,{to:"/order",replace:!0})}),p.jsx(rn,{path:"/order",element:p.jsx(zF,{})}),p.jsx(rn,{path:"/order/review",element:p.jsx(GF,{})}),p.jsx(rn,{path:"/order/complete",element:p.jsx(Dv,{})}),p.jsx(rn,{path:"/order/complete/:ticket",element:p.jsx(Dv,{})}),p.jsx(rn,{path:"/order/not-found",element:p.jsx($F,{})}),p.jsx(rn,{path:"/status",element:p.jsx(cF,{})}),p.jsx(rn,{path:"/progress",element:p.jsx(fS,{})}),p.jsx(rn,{path:"/progress/:ticket",element:p.jsx(fS,{})}),p.jsx(rn,{path:"/kitchen",element:p.jsx(pS,{required:"kitchen",title:"",description:"",children:p.jsx(JF,{})})}),p.jsx(rn,{path:"/admin/*",element:p.jsx(pS,{required:["admin","staff"],title:"",description:"",children:p.jsx(nF,{})})}),p.jsx(rn,{path:"*",element:p.jsx(sU,{})})]})}),p.jsx("footer",{className:"app-footer",children:p.jsxs("p",{children:[" ",new Date().getFullYear()," Hakuto Tanaka and Haruto Otsuka. All rights reserved."]})})]}),a&&p.jsx(mI,{variant:m,ariaLabel:""})]})})}const lU="/Ichinikai/";nN.createRoot(document.getElementById("root")).render(p.jsx(P.StrictMode,{children:p.jsx(gR,{basename:lU,children:p.jsx(z9,{children:p.jsx(wP,{children:p.jsx(oU,{})})})})}));
