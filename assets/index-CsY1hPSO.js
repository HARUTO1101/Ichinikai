(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=t(i);fetch(i.href,a)}})();function q4(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Em={exports:{}},Xu={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Nw;function $4(){if(Nw)return Xu;Nw=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(r,i,a){var o=null;if(a!==void 0&&(o=""+a),i.key!==void 0&&(o=""+i.key),"key"in i){a={};for(var c in i)c!=="key"&&(a[c]=i[c])}else a=i;return i=a.ref,{$$typeof:n,type:r,key:o,ref:i!==void 0?i:null,props:a}}return Xu.Fragment=e,Xu.jsx=t,Xu.jsxs=t,Xu}var Rw;function X4(){return Rw||(Rw=1,Em.exports=$4()),Em.exports}var p=X4(),Am={exports:{}},Ke={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ow;function Y4(){if(Ow)return Ke;Ow=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),o=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),g=Symbol.for("react.activity"),_=Symbol.iterator;function w(Y){return Y===null||typeof Y!="object"?null:(Y=_&&Y[_]||Y["@@iterator"],typeof Y=="function"?Y:null)}var A={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,D={};function C(Y,ne,me){this.props=Y,this.context=ne,this.refs=D,this.updater=me||A}C.prototype.isReactComponent={},C.prototype.setState=function(Y,ne){if(typeof Y!="object"&&typeof Y!="function"&&Y!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Y,ne,"setState")},C.prototype.forceUpdate=function(Y){this.updater.enqueueForceUpdate(this,Y,"forceUpdate")};function k(){}k.prototype=C.prototype;function V(Y,ne,me){this.props=Y,this.context=ne,this.refs=D,this.updater=me||A}var z=V.prototype=new k;z.constructor=V,S(z,C.prototype),z.isPureReactComponent=!0;var q=Array.isArray;function $(){}var M={H:null,A:null,T:null,S:null},b=Object.prototype.hasOwnProperty;function R(Y,ne,me){var we=me.ref;return{$$typeof:n,type:Y,key:ne,ref:we!==void 0?we:null,props:me}}function I(Y,ne){return R(Y.type,ne,Y.props)}function O(Y){return typeof Y=="object"&&Y!==null&&Y.$$typeof===n}function L(Y){var ne={"=":"=0",":":"=2"};return"$"+Y.replace(/[=:]/g,function(me){return ne[me]})}var j=/\/+/g;function W(Y,ne){return typeof Y=="object"&&Y!==null&&Y.key!=null?L(""+Y.key):ne.toString(36)}function ge(Y){switch(Y.status){case"fulfilled":return Y.value;case"rejected":throw Y.reason;default:switch(typeof Y.status=="string"?Y.then($,$):(Y.status="pending",Y.then(function(ne){Y.status==="pending"&&(Y.status="fulfilled",Y.value=ne)},function(ne){Y.status==="pending"&&(Y.status="rejected",Y.reason=ne)})),Y.status){case"fulfilled":return Y.value;case"rejected":throw Y.reason}}throw Y}function H(Y,ne,me,we,be){var ye=typeof Y;(ye==="undefined"||ye==="boolean")&&(Y=null);var Te=!1;if(Y===null)Te=!0;else switch(ye){case"bigint":case"string":case"number":Te=!0;break;case"object":switch(Y.$$typeof){case n:case e:Te=!0;break;case m:return Te=Y._init,H(Te(Y._payload),ne,me,we,be)}}if(Te)return be=be(Y),Te=we===""?"."+W(Y,0):we,q(be)?(me="",Te!=null&&(me=Te.replace(j,"$&/")+"/"),H(be,ne,me,"",function(zt){return zt})):be!=null&&(O(be)&&(be=I(be,me+(be.key==null||Y&&Y.key===be.key?"":(""+be.key).replace(j,"$&/")+"/")+Te)),ne.push(be)),1;Te=0;var Ye=we===""?".":we+":";if(q(Y))for(var Re=0;Re<Y.length;Re++)we=Y[Re],ye=Ye+W(we,Re),Te+=H(we,ne,me,ye,be);else if(Re=w(Y),typeof Re=="function")for(Y=Re.call(Y),Re=0;!(we=Y.next()).done;)we=we.value,ye=Ye+W(we,Re++),Te+=H(we,ne,me,ye,be);else if(ye==="object"){if(typeof Y.then=="function")return H(ge(Y),ne,me,we,be);throw ne=String(Y),Error("Objects are not valid as a React child (found: "+(ne==="[object Object]"?"object with keys {"+Object.keys(Y).join(", ")+"}":ne)+"). If you meant to render a collection of children, use an array instead.")}return Te}function G(Y,ne,me){if(Y==null)return Y;var we=[],be=0;return H(Y,we,"","",function(ye){return ne.call(me,ye,be++)}),we}function le(Y){if(Y._status===-1){var ne=Y._result;ne=ne(),ne.then(function(me){(Y._status===0||Y._status===-1)&&(Y._status=1,Y._result=me)},function(me){(Y._status===0||Y._status===-1)&&(Y._status=2,Y._result=me)}),Y._status===-1&&(Y._status=0,Y._result=ne)}if(Y._status===1)return Y._result.default;throw Y._result}var ve=typeof reportError=="function"?reportError:function(Y){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ne=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof Y=="object"&&Y!==null&&typeof Y.message=="string"?String(Y.message):String(Y),error:Y});if(!window.dispatchEvent(ne))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",Y);return}console.error(Y)},He={map:G,forEach:function(Y,ne,me){G(Y,function(){ne.apply(this,arguments)},me)},count:function(Y){var ne=0;return G(Y,function(){ne++}),ne},toArray:function(Y){return G(Y,function(ne){return ne})||[]},only:function(Y){if(!O(Y))throw Error("React.Children.only expected to receive a single React element child.");return Y}};return Ke.Activity=g,Ke.Children=He,Ke.Component=C,Ke.Fragment=t,Ke.Profiler=i,Ke.PureComponent=V,Ke.StrictMode=r,Ke.Suspense=u,Ke.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=M,Ke.__COMPILER_RUNTIME={__proto__:null,c:function(Y){return M.H.useMemoCache(Y)}},Ke.cache=function(Y){return function(){return Y.apply(null,arguments)}},Ke.cacheSignal=function(){return null},Ke.cloneElement=function(Y,ne,me){if(Y==null)throw Error("The argument must be a React element, but you passed "+Y+".");var we=S({},Y.props),be=Y.key;if(ne!=null)for(ye in ne.key!==void 0&&(be=""+ne.key),ne)!b.call(ne,ye)||ye==="key"||ye==="__self"||ye==="__source"||ye==="ref"&&ne.ref===void 0||(we[ye]=ne[ye]);var ye=arguments.length-2;if(ye===1)we.children=me;else if(1<ye){for(var Te=Array(ye),Ye=0;Ye<ye;Ye++)Te[Ye]=arguments[Ye+2];we.children=Te}return R(Y.type,be,we)},Ke.createContext=function(Y){return Y={$$typeof:o,_currentValue:Y,_currentValue2:Y,_threadCount:0,Provider:null,Consumer:null},Y.Provider=Y,Y.Consumer={$$typeof:a,_context:Y},Y},Ke.createElement=function(Y,ne,me){var we,be={},ye=null;if(ne!=null)for(we in ne.key!==void 0&&(ye=""+ne.key),ne)b.call(ne,we)&&we!=="key"&&we!=="__self"&&we!=="__source"&&(be[we]=ne[we]);var Te=arguments.length-2;if(Te===1)be.children=me;else if(1<Te){for(var Ye=Array(Te),Re=0;Re<Te;Re++)Ye[Re]=arguments[Re+2];be.children=Ye}if(Y&&Y.defaultProps)for(we in Te=Y.defaultProps,Te)be[we]===void 0&&(be[we]=Te[we]);return R(Y,ye,be)},Ke.createRef=function(){return{current:null}},Ke.forwardRef=function(Y){return{$$typeof:c,render:Y}},Ke.isValidElement=O,Ke.lazy=function(Y){return{$$typeof:m,_payload:{_status:-1,_result:Y},_init:le}},Ke.memo=function(Y,ne){return{$$typeof:d,type:Y,compare:ne===void 0?null:ne}},Ke.startTransition=function(Y){var ne=M.T,me={};M.T=me;try{var we=Y(),be=M.S;be!==null&&be(me,we),typeof we=="object"&&we!==null&&typeof we.then=="function"&&we.then($,ve)}catch(ye){ve(ye)}finally{ne!==null&&me.types!==null&&(ne.types=me.types),M.T=ne}},Ke.unstable_useCacheRefresh=function(){return M.H.useCacheRefresh()},Ke.use=function(Y){return M.H.use(Y)},Ke.useActionState=function(Y,ne,me){return M.H.useActionState(Y,ne,me)},Ke.useCallback=function(Y,ne){return M.H.useCallback(Y,ne)},Ke.useContext=function(Y){return M.H.useContext(Y)},Ke.useDebugValue=function(){},Ke.useDeferredValue=function(Y,ne){return M.H.useDeferredValue(Y,ne)},Ke.useEffect=function(Y,ne){return M.H.useEffect(Y,ne)},Ke.useEffectEvent=function(Y){return M.H.useEffectEvent(Y)},Ke.useId=function(){return M.H.useId()},Ke.useImperativeHandle=function(Y,ne,me){return M.H.useImperativeHandle(Y,ne,me)},Ke.useInsertionEffect=function(Y,ne){return M.H.useInsertionEffect(Y,ne)},Ke.useLayoutEffect=function(Y,ne){return M.H.useLayoutEffect(Y,ne)},Ke.useMemo=function(Y,ne){return M.H.useMemo(Y,ne)},Ke.useOptimistic=function(Y,ne){return M.H.useOptimistic(Y,ne)},Ke.useReducer=function(Y,ne,me){return M.H.useReducer(Y,ne,me)},Ke.useRef=function(Y){return M.H.useRef(Y)},Ke.useState=function(Y){return M.H.useState(Y)},Ke.useSyncExternalStore=function(Y,ne,me){return M.H.useSyncExternalStore(Y,ne,me)},Ke.useTransition=function(){return M.H.useTransition()},Ke.version="19.2.0",Ke}var Dw;function Ov(){return Dw||(Dw=1,Am.exports=Y4()),Am.exports}var P=Ov(),bm={exports:{}},Yu={},Sm={exports:{}},Cm={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mw;function K4(){return Mw||(Mw=1,(function(n){function e(H,G){var le=H.length;H.push(G);e:for(;0<le;){var ve=le-1>>>1,He=H[ve];if(0<i(He,G))H[ve]=G,H[le]=He,le=ve;else break e}}function t(H){return H.length===0?null:H[0]}function r(H){if(H.length===0)return null;var G=H[0],le=H.pop();if(le!==G){H[0]=le;e:for(var ve=0,He=H.length,Y=He>>>1;ve<Y;){var ne=2*(ve+1)-1,me=H[ne],we=ne+1,be=H[we];if(0>i(me,le))we<He&&0>i(be,me)?(H[ve]=be,H[we]=le,ve=we):(H[ve]=me,H[ne]=le,ve=ne);else if(we<He&&0>i(be,le))H[ve]=be,H[we]=le,ve=we;else break e}}return G}function i(H,G){var le=H.sortIndex-G.sortIndex;return le!==0?le:H.id-G.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var o=Date,c=o.now();n.unstable_now=function(){return o.now()-c}}var u=[],d=[],m=1,g=null,_=3,w=!1,A=!1,S=!1,D=!1,C=typeof setTimeout=="function"?setTimeout:null,k=typeof clearTimeout=="function"?clearTimeout:null,V=typeof setImmediate<"u"?setImmediate:null;function z(H){for(var G=t(d);G!==null;){if(G.callback===null)r(d);else if(G.startTime<=H)r(d),G.sortIndex=G.expirationTime,e(u,G);else break;G=t(d)}}function q(H){if(S=!1,z(H),!A)if(t(u)!==null)A=!0,$||($=!0,L());else{var G=t(d);G!==null&&ge(q,G.startTime-H)}}var $=!1,M=-1,b=5,R=-1;function I(){return D?!0:!(n.unstable_now()-R<b)}function O(){if(D=!1,$){var H=n.unstable_now();R=H;var G=!0;try{e:{A=!1,S&&(S=!1,k(M),M=-1),w=!0;var le=_;try{t:{for(z(H),g=t(u);g!==null&&!(g.expirationTime>H&&I());){var ve=g.callback;if(typeof ve=="function"){g.callback=null,_=g.priorityLevel;var He=ve(g.expirationTime<=H);if(H=n.unstable_now(),typeof He=="function"){g.callback=He,z(H),G=!0;break t}g===t(u)&&r(u),z(H)}else r(u);g=t(u)}if(g!==null)G=!0;else{var Y=t(d);Y!==null&&ge(q,Y.startTime-H),G=!1}}break e}finally{g=null,_=le,w=!1}G=void 0}}finally{G?L():$=!1}}}var L;if(typeof V=="function")L=function(){V(O)};else if(typeof MessageChannel<"u"){var j=new MessageChannel,W=j.port2;j.port1.onmessage=O,L=function(){W.postMessage(null)}}else L=function(){C(O,0)};function ge(H,G){M=C(function(){H(n.unstable_now())},G)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(H){H.callback=null},n.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):b=0<H?Math.floor(1e3/H):5},n.unstable_getCurrentPriorityLevel=function(){return _},n.unstable_next=function(H){switch(_){case 1:case 2:case 3:var G=3;break;default:G=_}var le=_;_=G;try{return H()}finally{_=le}},n.unstable_requestPaint=function(){D=!0},n.unstable_runWithPriority=function(H,G){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var le=_;_=H;try{return G()}finally{_=le}},n.unstable_scheduleCallback=function(H,G,le){var ve=n.unstable_now();switch(typeof le=="object"&&le!==null?(le=le.delay,le=typeof le=="number"&&0<le?ve+le:ve):le=ve,H){case 1:var He=-1;break;case 2:He=250;break;case 5:He=1073741823;break;case 4:He=1e4;break;default:He=5e3}return He=le+He,H={id:m++,callback:G,priorityLevel:H,startTime:le,expirationTime:He,sortIndex:-1},le>ve?(H.sortIndex=le,e(d,H),t(u)===null&&H===t(d)&&(S?(k(M),M=-1):S=!0,ge(q,le-ve))):(H.sortIndex=He,e(u,H),A||w||(A=!0,$||($=!0,L()))),H},n.unstable_shouldYield=I,n.unstable_wrapCallback=function(H){var G=_;return function(){var le=_;_=G;try{return H.apply(this,arguments)}finally{_=le}}}})(Cm)),Cm}var Pw;function W4(){return Pw||(Pw=1,Sm.exports=K4()),Sm.exports}var Tm={exports:{}},hr={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kw;function Q4(){if(kw)return hr;kw=1;var n=Ov();function e(u){var d="https://react.dev/errors/"+u;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)d+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+u+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var r={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},i=Symbol.for("react.portal");function a(u,d,m){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:g==null?null:""+g,children:u,containerInfo:d,implementation:m}}var o=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(u,d){if(u==="font")return"";if(typeof d=="string")return d==="use-credentials"?d:""}return hr.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,hr.createPortal=function(u,d){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)throw Error(e(299));return a(u,d,null,m)},hr.flushSync=function(u){var d=o.T,m=r.p;try{if(o.T=null,r.p=2,u)return u()}finally{o.T=d,r.p=m,r.d.f()}},hr.preconnect=function(u,d){typeof u=="string"&&(d?(d=d.crossOrigin,d=typeof d=="string"?d==="use-credentials"?d:"":void 0):d=null,r.d.C(u,d))},hr.prefetchDNS=function(u){typeof u=="string"&&r.d.D(u)},hr.preinit=function(u,d){if(typeof u=="string"&&d&&typeof d.as=="string"){var m=d.as,g=c(m,d.crossOrigin),_=typeof d.integrity=="string"?d.integrity:void 0,w=typeof d.fetchPriority=="string"?d.fetchPriority:void 0;m==="style"?r.d.S(u,typeof d.precedence=="string"?d.precedence:void 0,{crossOrigin:g,integrity:_,fetchPriority:w}):m==="script"&&r.d.X(u,{crossOrigin:g,integrity:_,fetchPriority:w,nonce:typeof d.nonce=="string"?d.nonce:void 0})}},hr.preinitModule=function(u,d){if(typeof u=="string")if(typeof d=="object"&&d!==null){if(d.as==null||d.as==="script"){var m=c(d.as,d.crossOrigin);r.d.M(u,{crossOrigin:m,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0})}}else d==null&&r.d.M(u)},hr.preload=function(u,d){if(typeof u=="string"&&typeof d=="object"&&d!==null&&typeof d.as=="string"){var m=d.as,g=c(m,d.crossOrigin);r.d.L(u,m,{crossOrigin:g,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0,type:typeof d.type=="string"?d.type:void 0,fetchPriority:typeof d.fetchPriority=="string"?d.fetchPriority:void 0,referrerPolicy:typeof d.referrerPolicy=="string"?d.referrerPolicy:void 0,imageSrcSet:typeof d.imageSrcSet=="string"?d.imageSrcSet:void 0,imageSizes:typeof d.imageSizes=="string"?d.imageSizes:void 0,media:typeof d.media=="string"?d.media:void 0})}},hr.preloadModule=function(u,d){if(typeof u=="string")if(d){var m=c(d.as,d.crossOrigin);r.d.m(u,{as:typeof d.as=="string"&&d.as!=="script"?d.as:void 0,crossOrigin:m,integrity:typeof d.integrity=="string"?d.integrity:void 0})}else r.d.m(u)},hr.requestFormReset=function(u){r.d.r(u)},hr.unstable_batchedUpdates=function(u,d){return u(d)},hr.useFormState=function(u,d,m){return o.H.useFormState(u,d,m)},hr.useFormStatus=function(){return o.H.useHostTransitionStatus()},hr.version="19.2.0",hr}var jw;function Z4(){if(jw)return Tm.exports;jw=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Tm.exports=Q4(),Tm.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lw;function J4(){if(Lw)return Yu;Lw=1;var n=W4(),e=Ov(),t=Z4();function r(s){var l="https://react.dev/errors/"+s;if(1<arguments.length){l+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)l+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+s+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function a(s){var l=s,f=s;if(s.alternate)for(;l.return;)l=l.return;else{s=l;do l=s,(l.flags&4098)!==0&&(f=l.return),s=l.return;while(s)}return l.tag===3?f:null}function o(s){if(s.tag===13){var l=s.memoizedState;if(l===null&&(s=s.alternate,s!==null&&(l=s.memoizedState)),l!==null)return l.dehydrated}return null}function c(s){if(s.tag===31){var l=s.memoizedState;if(l===null&&(s=s.alternate,s!==null&&(l=s.memoizedState)),l!==null)return l.dehydrated}return null}function u(s){if(a(s)!==s)throw Error(r(188))}function d(s){var l=s.alternate;if(!l){if(l=a(s),l===null)throw Error(r(188));return l!==s?null:s}for(var f=s,h=l;;){var y=f.return;if(y===null)break;var x=y.alternate;if(x===null){if(h=y.return,h!==null){f=h;continue}break}if(y.child===x.child){for(x=y.child;x;){if(x===f)return u(y),s;if(x===h)return u(y),l;x=x.sibling}throw Error(r(188))}if(f.return!==h.return)f=y,h=x;else{for(var T=!1,B=y.child;B;){if(B===f){T=!0,f=y,h=x;break}if(B===h){T=!0,h=y,f=x;break}B=B.sibling}if(!T){for(B=x.child;B;){if(B===f){T=!0,f=x,h=y;break}if(B===h){T=!0,h=x,f=y;break}B=B.sibling}if(!T)throw Error(r(189))}}if(f.alternate!==h)throw Error(r(190))}if(f.tag!==3)throw Error(r(188));return f.stateNode.current===f?s:l}function m(s){var l=s.tag;if(l===5||l===26||l===27||l===6)return s;for(s=s.child;s!==null;){if(l=m(s),l!==null)return l;s=s.sibling}return null}var g=Object.assign,_=Symbol.for("react.element"),w=Symbol.for("react.transitional.element"),A=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),D=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),k=Symbol.for("react.consumer"),V=Symbol.for("react.context"),z=Symbol.for("react.forward_ref"),q=Symbol.for("react.suspense"),$=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),R=Symbol.for("react.activity"),I=Symbol.for("react.memo_cache_sentinel"),O=Symbol.iterator;function L(s){return s===null||typeof s!="object"?null:(s=O&&s[O]||s["@@iterator"],typeof s=="function"?s:null)}var j=Symbol.for("react.client.reference");function W(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===j?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case S:return"Fragment";case C:return"Profiler";case D:return"StrictMode";case q:return"Suspense";case $:return"SuspenseList";case R:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case A:return"Portal";case V:return s.displayName||"Context";case k:return(s._context.displayName||"Context")+".Consumer";case z:var l=s.render;return s=s.displayName,s||(s=l.displayName||l.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case M:return l=s.displayName||null,l!==null?l:W(s.type)||"Memo";case b:l=s._payload,s=s._init;try{return W(s(l))}catch{}}return null}var ge=Array.isArray,H=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,G=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,le={pending:!1,data:null,method:null,action:null},ve=[],He=-1;function Y(s){return{current:s}}function ne(s){0>He||(s.current=ve[He],ve[He]=null,He--)}function me(s,l){He++,ve[He]=s.current,s.current=l}var we=Y(null),be=Y(null),ye=Y(null),Te=Y(null);function Ye(s,l){switch(me(ye,l),me(be,s),me(we,null),l.nodeType){case 9:case 11:s=(s=l.documentElement)&&(s=s.namespaceURI)?Zx(s):0;break;default:if(s=l.tagName,l=l.namespaceURI)l=Zx(l),s=Jx(l,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}ne(we),me(we,s)}function Re(){ne(we),ne(be),ne(ye)}function zt(s){s.memoizedState!==null&&me(Te,s);var l=we.current,f=Jx(l,s.type);l!==f&&(me(be,s),me(we,f))}function Ze(s){be.current===s&&(ne(we),ne(be)),Te.current===s&&(ne(Te),Hu._currentValue=le)}var In,Kn;function Et(s){if(In===void 0)try{throw Error()}catch(f){var l=f.stack.trim().match(/\n( *(at )?)/);In=l&&l[1]||"",Kn=-1<f.stack.indexOf(`
    at`)?" (<anonymous>)":-1<f.stack.indexOf("@")?"@unknown:0:0":""}return`
`+In+s+Kn}var Ln=!1;function cr(s,l){if(!s||Ln)return"";Ln=!0;var f=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var h={DetermineComponentFrameRoot:function(){try{if(l){var he=function(){throw Error()};if(Object.defineProperty(he.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(he,[])}catch(se){var re=se}Reflect.construct(s,[],he)}else{try{he.call()}catch(se){re=se}s.call(he.prototype)}}else{try{throw Error()}catch(se){re=se}(he=s())&&typeof he.catch=="function"&&he.catch(function(){})}}catch(se){if(se&&re&&typeof se.stack=="string")return[se.stack,re.stack]}return[null,null]}};h.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var y=Object.getOwnPropertyDescriptor(h.DetermineComponentFrameRoot,"name");y&&y.configurable&&Object.defineProperty(h.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var x=h.DetermineComponentFrameRoot(),T=x[0],B=x[1];if(T&&B){var X=T.split(`
`),te=B.split(`
`);for(y=h=0;h<X.length&&!X[h].includes("DetermineComponentFrameRoot");)h++;for(;y<te.length&&!te[y].includes("DetermineComponentFrameRoot");)y++;if(h===X.length||y===te.length)for(h=X.length-1,y=te.length-1;1<=h&&0<=y&&X[h]!==te[y];)y--;for(;1<=h&&0<=y;h--,y--)if(X[h]!==te[y]){if(h!==1||y!==1)do if(h--,y--,0>y||X[h]!==te[y]){var ce=`
`+X[h].replace(" at new "," at ");return s.displayName&&ce.includes("<anonymous>")&&(ce=ce.replace("<anonymous>",s.displayName)),ce}while(1<=h&&0<=y);break}}}finally{Ln=!1,Error.prepareStackTrace=f}return(f=s?s.displayName||s.name:"")?Et(f):""}function ur(s,l){switch(s.tag){case 26:case 27:case 5:return Et(s.type);case 16:return Et("Lazy");case 13:return s.child!==l&&l!==null?Et("Suspense Fallback"):Et("Suspense");case 19:return Et("SuspenseList");case 0:case 15:return cr(s.type,!1);case 11:return cr(s.type.render,!1);case 1:return cr(s.type,!0);case 31:return Et("Activity");default:return""}}function Bn(s){try{var l="",f=null;do l+=ur(s,f),f=s,s=s.return;while(s);return l}catch(h){return`
Error generating stack: `+h.message+`
`+h.stack}}var gt=Object.prototype.hasOwnProperty,Pt=n.unstable_scheduleCallback,Wn=n.unstable_cancelCallback,cn=n.unstable_shouldYield,_r=n.unstable_requestPaint,tn=n.unstable_now,fr=n.unstable_getCurrentPriorityLevel,Jr=n.unstable_ImmediatePriority,ae=n.unstable_UserBlockingPriority,Ae=n.unstable_NormalPriority,je=n.unstable_LowPriority,fe=n.unstable_IdlePriority,Pe=n.log,Fe=n.unstable_setDisableYieldValue,ze=null,Je=null;function rt(s){if(typeof Pe=="function"&&Fe(s),Je&&typeof Je.setStrictMode=="function")try{Je.setStrictMode(ze,s)}catch{}}var Ce=Math.clz32?Math.clz32:dr,De=Math.log,tt=Math.LN2;function dr(s){return s>>>=0,s===0?32:31-(De(s)/tt|0)|0}var un=256,Ei=262144,Kt=4194304;function Ki(s){var l=s&42;if(l!==0)return l;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return s&261888;case 262144:case 524288:case 1048576:case 2097152:return s&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function Wi(s,l,f){var h=s.pendingLanes;if(h===0)return 0;var y=0,x=s.suspendedLanes,T=s.pingedLanes;s=s.warmLanes;var B=h&134217727;return B!==0?(h=B&~x,h!==0?y=Ki(h):(T&=B,T!==0?y=Ki(T):f||(f=B&~s,f!==0&&(y=Ki(f))))):(B=h&~x,B!==0?y=Ki(B):T!==0?y=Ki(T):f||(f=h&~s,f!==0&&(y=Ki(f)))),y===0?0:l!==0&&l!==y&&(l&x)===0&&(x=y&-y,f=l&-l,x>=f||x===32&&(f&4194048)!==0)?l:y}function Ai(s,l){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&l)===0}function Cp(s,l){switch(s){case 1:case 2:case 4:case 8:case 64:return l+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ed(){var s=Kt;return Kt<<=1,(Kt&62914560)===0&&(Kt=4194304),s}function Qi(s){for(var l=[],f=0;31>f;f++)l.push(s);return l}function _o(s,l){s.pendingLanes|=l,l!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function Tp(s,l,f,h,y,x){var T=s.pendingLanes;s.pendingLanes=f,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=f,s.entangledLanes&=f,s.errorRecoveryDisabledLanes&=f,s.shellSuspendCounter=0;var B=s.entanglements,X=s.expirationTimes,te=s.hiddenUpdates;for(f=T&~f;0<f;){var ce=31-Ce(f),he=1<<ce;B[ce]=0,X[ce]=-1;var re=te[ce];if(re!==null)for(te[ce]=null,ce=0;ce<re.length;ce++){var se=re[ce];se!==null&&(se.lane&=-536870913)}f&=~he}h!==0&&xo(s,h,0),x!==0&&y===0&&s.tag!==0&&(s.suspendedLanes|=x&~(T&~l))}function xo(s,l,f){s.pendingLanes|=l,s.suspendedLanes&=~l;var h=31-Ce(l);s.entangledLanes|=l,s.entanglements[h]=s.entanglements[h]|1073741824|f&261930}function Yc(s,l){var f=s.entangledLanes|=l;for(s=s.entanglements;f;){var h=31-Ce(f),y=1<<h;y&l|s[h]&l&&(s[h]|=l),f&=~y}}function Kc(s,l){var f=l&-l;return f=(f&42)!==0?1:wo(f),(f&(s.suspendedLanes|l))!==0?0:f}function wo(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function Ra(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function td(){var s=G.p;return s!==0?s:(s=window.event,s===void 0?32:Ew(s.type))}function bi(s,l){var f=G.p;try{return G.p=s,l()}finally{G.p=f}}var Si=Math.random().toString(36).slice(2),vn="__reactFiber$"+Si,Vn="__reactProps$"+Si,Zi="__reactContainer$"+Si,pl="__reactEvents$"+Si,Ip="__reactListeners$"+Si,nd="__reactHandles$"+Si,rd="__reactResources$"+Si,Ji="__reactMarker$"+Si;function ml(s){delete s[vn],delete s[Vn],delete s[pl],delete s[Ip],delete s[nd]}function ea(s){var l=s[vn];if(l)return l;for(var f=s.parentNode;f;){if(l=f[Zi]||f[vn]){if(f=l.alternate,l.child!==null||f!==null&&f.child!==null)for(s=sw(s);s!==null;){if(f=s[vn])return f;s=sw(s)}return l}s=f,f=s.parentNode}return null}function ei(s){if(s=s[vn]||s[Zi]){var l=s.tag;if(l===5||l===6||l===13||l===31||l===26||l===27||l===3)return s}return null}function Vr(s){var l=s.tag;if(l===5||l===26||l===27||l===6)return s.stateNode;throw Error(r(33))}function ta(s){var l=s[rd];return l||(l=s[rd]={hoistableStyles:new Map,hoistableScripts:new Map}),l}function yn(s){s[Ji]=!0}var Wc=new Set,Qc={};function na(s,l){ra(s,l),ra(s+"Capture",l)}function ra(s,l){for(Qc[s]=l,s=0;s<l.length;s++)Wc.add(l[s])}var Zc=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Jc={},eu={};function id(s){return gt.call(eu,s)?!0:gt.call(Jc,s)?!1:Zc.test(s)?eu[s]=!0:(Jc[s]=!0,!1)}function gl(s,l,f){if(id(l))if(f===null)s.removeAttribute(l);else{switch(typeof f){case"undefined":case"function":case"symbol":s.removeAttribute(l);return;case"boolean":var h=l.toLowerCase().slice(0,5);if(h!=="data-"&&h!=="aria-"){s.removeAttribute(l);return}}s.setAttribute(l,""+f)}}function Fr(s,l,f){if(f===null)s.removeAttribute(l);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(l);return}s.setAttribute(l,""+f)}}function _n(s,l,f,h){if(h===null)s.removeAttribute(f);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(f);return}s.setAttributeNS(l,f,""+h)}}function Fn(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function ls(s){var l=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function tu(s,l,f){var h=Object.getOwnPropertyDescriptor(s.constructor.prototype,l);if(!s.hasOwnProperty(l)&&typeof h<"u"&&typeof h.get=="function"&&typeof h.set=="function"){var y=h.get,x=h.set;return Object.defineProperty(s,l,{configurable:!0,get:function(){return y.call(this)},set:function(T){f=""+T,x.call(this,T)}}),Object.defineProperty(s,l,{enumerable:h.enumerable}),{getValue:function(){return f},setValue:function(T){f=""+T},stopTracking:function(){s._valueTracker=null,delete s[l]}}}}function It(s){if(!s._valueTracker){var l=ls(s)?"checked":"value";s._valueTracker=tu(s,l,""+s[l])}}function Eo(s){if(!s)return!1;var l=s._valueTracker;if(!l)return!0;var f=l.getValue(),h="";return s&&(h=ls(s)?s.checked?"true":"false":s.value),s=h,s!==f?(l.setValue(s),!0):!1}function ia(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var Ao=/[\n"\\]/g;function Cr(s){return s.replace(Ao,function(l){return"\\"+l.charCodeAt(0).toString(16)+" "})}function vl(s,l,f,h,y,x,T,B){s.name="",T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?s.type=T:s.removeAttribute("type"),l!=null?T==="number"?(l===0&&s.value===""||s.value!=l)&&(s.value=""+Fn(l)):s.value!==""+Fn(l)&&(s.value=""+Fn(l)):T!=="submit"&&T!=="reset"||s.removeAttribute("value"),l!=null?nu(s,T,Fn(l)):f!=null?nu(s,T,Fn(f)):h!=null&&s.removeAttribute("value"),y==null&&x!=null&&(s.defaultChecked=!!x),y!=null&&(s.checked=y&&typeof y!="function"&&typeof y!="symbol"),B!=null&&typeof B!="function"&&typeof B!="symbol"&&typeof B!="boolean"?s.name=""+Fn(B):s.removeAttribute("name")}function ad(s,l,f,h,y,x,T,B){if(x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"&&(s.type=x),l!=null||f!=null){if(!(x!=="submit"&&x!=="reset"||l!=null)){It(s);return}f=f!=null?""+Fn(f):"",l=l!=null?""+Fn(l):f,B||l===s.value||(s.value=l),s.defaultValue=l}h=h??y,h=typeof h!="function"&&typeof h!="symbol"&&!!h,s.checked=B?s.checked:!!h,s.defaultChecked=!!h,T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(s.name=T),It(s)}function nu(s,l,f){l==="number"&&ia(s.ownerDocument)===s||s.defaultValue===""+f||(s.defaultValue=""+f)}function cs(s,l,f,h){if(s=s.options,l){l={};for(var y=0;y<f.length;y++)l["$"+f[y]]=!0;for(f=0;f<s.length;f++)y=l.hasOwnProperty("$"+s[f].value),s[f].selected!==y&&(s[f].selected=y),y&&h&&(s[f].defaultSelected=!0)}else{for(f=""+Fn(f),l=null,y=0;y<s.length;y++){if(s[y].value===f){s[y].selected=!0,h&&(s[y].defaultSelected=!0);return}l!==null||s[y].disabled||(l=s[y])}l!==null&&(l.selected=!0)}}function sd(s,l,f){if(l!=null&&(l=""+Fn(l),l!==s.value&&(s.value=l),f==null)){s.defaultValue!==l&&(s.defaultValue=l);return}s.defaultValue=f!=null?""+Fn(f):""}function us(s,l,f,h){if(l==null){if(h!=null){if(f!=null)throw Error(r(92));if(ge(h)){if(1<h.length)throw Error(r(93));h=h[0]}f=h}f==null&&(f=""),l=f}f=Fn(l),s.defaultValue=f,h=s.textContent,h===f&&h!==""&&h!==null&&(s.value=h),It(s)}function Tr(s,l){if(l){var f=s.firstChild;if(f&&f===s.lastChild&&f.nodeType===3){f.nodeValue=l;return}}s.textContent=l}var od=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function ru(s,l,f){var h=l.indexOf("--")===0;f==null||typeof f=="boolean"||f===""?h?s.setProperty(l,""):l==="float"?s.cssFloat="":s[l]="":h?s.setProperty(l,f):typeof f!="number"||f===0||od.has(l)?l==="float"?s.cssFloat=f:s[l]=(""+f).trim():s[l]=f+"px"}function iu(s,l,f){if(l!=null&&typeof l!="object")throw Error(r(62));if(s=s.style,f!=null){for(var h in f)!f.hasOwnProperty(h)||l!=null&&l.hasOwnProperty(h)||(h.indexOf("--")===0?s.setProperty(h,""):h==="float"?s.cssFloat="":s[h]="");for(var y in l)h=l[y],l.hasOwnProperty(y)&&f[y]!==h&&ru(s,y,h)}else for(var x in l)l.hasOwnProperty(x)&&ru(s,x,l[x])}function yl(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ld=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),fs=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function _l(s){return fs.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}function Ci(){}var au=null;function ti(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var ds=null,aa=null;function bo(s){var l=ei(s);if(l&&(s=l.stateNode)){var f=s[Vn]||null;e:switch(s=l.stateNode,l.type){case"input":if(vl(s,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name),l=f.name,f.type==="radio"&&l!=null){for(f=s;f.parentNode;)f=f.parentNode;for(f=f.querySelectorAll('input[name="'+Cr(""+l)+'"][type="radio"]'),l=0;l<f.length;l++){var h=f[l];if(h!==s&&h.form===s.form){var y=h[Vn]||null;if(!y)throw Error(r(90));vl(h,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name)}}for(l=0;l<f.length;l++)h=f[l],h.form===s.form&&Eo(h)}break e;case"textarea":sd(s,f.value,f.defaultValue);break e;case"select":l=f.value,l!=null&&cs(s,!!f.multiple,l,!1)}}}var xl=!1;function hs(s,l,f){if(xl)return s(l,f);xl=!0;try{var h=s(l);return h}finally{if(xl=!1,(ds!==null||aa!==null)&&(th(),ds&&(l=ds,s=aa,aa=ds=null,bo(l),s)))for(l=0;l<s.length;l++)bo(s[l])}}function Ti(s,l){var f=s.stateNode;if(f===null)return null;var h=f[Vn]||null;if(h===null)return null;f=h[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(s=s.type,h=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!h;break e;default:s=!1}if(s)return null;if(f&&typeof f!="function")throw Error(r(231,l,typeof f));return f}var ni=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),So=!1;if(ni)try{var kt={};Object.defineProperty(kt,"passive",{get:function(){So=!0}}),window.addEventListener("test",kt,kt),window.removeEventListener("test",kt,kt)}catch{So=!1}var sa=null,su=null,Co=null;function ou(){if(Co)return Co;var s,l=su,f=l.length,h,y="value"in sa?sa.value:sa.textContent,x=y.length;for(s=0;s<f&&l[s]===y[s];s++);var T=f-s;for(h=1;h<=T&&l[f-h]===y[x-h];h++);return Co=y.slice(s,1<h?1-h:void 0)}function To(s){var l=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&l===13&&(s=13)):s=l,s===10&&(s=13),32<=s||s===13?s:0}function Oa(){return!0}function Ii(){return!1}function Qn(s){function l(f,h,y,x,T){this._reactName=f,this._targetInst=y,this.type=h,this.nativeEvent=x,this.target=T,this.currentTarget=null;for(var B in s)s.hasOwnProperty(B)&&(f=s[B],this[B]=f?f(x):x[B]);return this.isDefaultPrevented=(x.defaultPrevented!=null?x.defaultPrevented:x.returnValue===!1)?Oa:Ii,this.isPropagationStopped=Ii,this}return g(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var f=this.nativeEvent;f&&(f.preventDefault?f.preventDefault():typeof f.returnValue!="unknown"&&(f.returnValue=!1),this.isDefaultPrevented=Oa)},stopPropagation:function(){var f=this.nativeEvent;f&&(f.stopPropagation?f.stopPropagation():typeof f.cancelBubble!="unknown"&&(f.cancelBubble=!0),this.isPropagationStopped=Oa)},persist:function(){},isPersistent:Oa}),l}var Da={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},oa=Qn(Da),ps=g({},Da,{view:0,detail:0}),lu=Qn(ps),ms,wl,la,El=g({},ps,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:gs,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==la&&(la&&s.type==="mousemove"?(ms=s.screenX-la.screenX,wl=s.screenY-la.screenY):wl=ms=0,la=s),ms)},movementY:function(s){return"movementY"in s?s.movementY:wl}}),cu=Qn(El),Io=g({},El,{dataTransfer:0}),cd=Qn(Io),ud=g({},ps,{relatedTarget:0}),No=Qn(ud),uu=g({},Da,{animationName:0,elapsedTime:0,pseudoElement:0}),fd=Qn(uu),Al=g({},Da,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),dd=Qn(Al),hd=g({},Da,{data:0}),ca=Qn(hd),pd={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},md={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},gd={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function vd(s){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(s):(s=gd[s])?!!l[s]:!1}function gs(){return vd}var xr=g({},ps,{key:function(s){if(s.key){var l=pd[s.key]||s.key;if(l!=="Unidentified")return l}return s.type==="keypress"?(s=To(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?md[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:gs,charCode:function(s){return s.type==="keypress"?To(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?To(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),yd=Qn(xr),_d=g({},El,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ma=Qn(_d),v=g({},ps,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:gs}),E=Qn(v),N=g({},Da,{propertyName:0,elapsedTime:0,pseudoElement:0}),F=Qn(N),Z=g({},El,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),ie=Qn(Z),xe=g({},Da,{newState:0,oldState:0}),We=Qn(xe),fn=[9,13,27,32],At=ni&&"CompositionEvent"in window,Wt=null;ni&&"documentMode"in document&&(Wt=document.documentMode);var ri=ni&&"TextEvent"in window&&!Wt,ua=ni&&(!At||Wt&&8<Wt&&11>=Wt),Ni=" ",Ri=!1;function Ro(s,l){switch(s){case"keyup":return fn.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function bl(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var Sl=!1;function mI(s,l){switch(s){case"compositionend":return bl(l);case"keypress":return l.which!==32?null:(Ri=!0,Ni);case"textInput":return s=l.data,s===Ni&&Ri?null:s;default:return null}}function gI(s,l){if(Sl)return s==="compositionend"||!At&&Ro(s,l)?(s=ou(),Co=su=sa=null,Sl=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return ua&&l.locale!=="ko"?null:l.data;default:return null}}var vI={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function c2(s){var l=s&&s.nodeName&&s.nodeName.toLowerCase();return l==="input"?!!vI[s.type]:l==="textarea"}function u2(s,l,f,h){ds?aa?aa.push(h):aa=[h]:ds=h,l=lh(l,"onChange"),0<l.length&&(f=new oa("onChange","change",null,f,h),s.push({event:f,listeners:l}))}var fu=null,du=null;function yI(s){$x(s,0)}function xd(s){var l=Vr(s);if(Eo(l))return s}function f2(s,l){if(s==="change")return l}var d2=!1;if(ni){var Np;if(ni){var Rp="oninput"in document;if(!Rp){var h2=document.createElement("div");h2.setAttribute("oninput","return;"),Rp=typeof h2.oninput=="function"}Np=Rp}else Np=!1;d2=Np&&(!document.documentMode||9<document.documentMode)}function p2(){fu&&(fu.detachEvent("onpropertychange",m2),du=fu=null)}function m2(s){if(s.propertyName==="value"&&xd(du)){var l=[];u2(l,du,s,ti(s)),hs(yI,l)}}function _I(s,l,f){s==="focusin"?(p2(),fu=l,du=f,fu.attachEvent("onpropertychange",m2)):s==="focusout"&&p2()}function xI(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return xd(du)}function wI(s,l){if(s==="click")return xd(l)}function EI(s,l){if(s==="input"||s==="change")return xd(l)}function AI(s,l){return s===l&&(s!==0||1/s===1/l)||s!==s&&l!==l}var Ur=typeof Object.is=="function"?Object.is:AI;function hu(s,l){if(Ur(s,l))return!0;if(typeof s!="object"||s===null||typeof l!="object"||l===null)return!1;var f=Object.keys(s),h=Object.keys(l);if(f.length!==h.length)return!1;for(h=0;h<f.length;h++){var y=f[h];if(!gt.call(l,y)||!Ur(s[y],l[y]))return!1}return!0}function g2(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function v2(s,l){var f=g2(s);s=0;for(var h;f;){if(f.nodeType===3){if(h=s+f.textContent.length,s<=l&&h>=l)return{node:f,offset:l-s};s=h}e:{for(;f;){if(f.nextSibling){f=f.nextSibling;break e}f=f.parentNode}f=void 0}f=g2(f)}}function y2(s,l){return s&&l?s===l?!0:s&&s.nodeType===3?!1:l&&l.nodeType===3?y2(s,l.parentNode):"contains"in s?s.contains(l):s.compareDocumentPosition?!!(s.compareDocumentPosition(l)&16):!1:!1}function _2(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var l=ia(s.document);l instanceof s.HTMLIFrameElement;){try{var f=typeof l.contentWindow.location.href=="string"}catch{f=!1}if(f)s=l.contentWindow;else break;l=ia(s.document)}return l}function Op(s){var l=s&&s.nodeName&&s.nodeName.toLowerCase();return l&&(l==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||l==="textarea"||s.contentEditable==="true")}var bI=ni&&"documentMode"in document&&11>=document.documentMode,Cl=null,Dp=null,pu=null,Mp=!1;function x2(s,l,f){var h=f.window===f?f.document:f.nodeType===9?f:f.ownerDocument;Mp||Cl==null||Cl!==ia(h)||(h=Cl,"selectionStart"in h&&Op(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),pu&&hu(pu,h)||(pu=h,h=lh(Dp,"onSelect"),0<h.length&&(l=new oa("onSelect","select",null,l,f),s.push({event:l,listeners:h}),l.target=Cl)))}function Oo(s,l){var f={};return f[s.toLowerCase()]=l.toLowerCase(),f["Webkit"+s]="webkit"+l,f["Moz"+s]="moz"+l,f}var Tl={animationend:Oo("Animation","AnimationEnd"),animationiteration:Oo("Animation","AnimationIteration"),animationstart:Oo("Animation","AnimationStart"),transitionrun:Oo("Transition","TransitionRun"),transitionstart:Oo("Transition","TransitionStart"),transitioncancel:Oo("Transition","TransitionCancel"),transitionend:Oo("Transition","TransitionEnd")},Pp={},w2={};ni&&(w2=document.createElement("div").style,"AnimationEvent"in window||(delete Tl.animationend.animation,delete Tl.animationiteration.animation,delete Tl.animationstart.animation),"TransitionEvent"in window||delete Tl.transitionend.transition);function Do(s){if(Pp[s])return Pp[s];if(!Tl[s])return s;var l=Tl[s],f;for(f in l)if(l.hasOwnProperty(f)&&f in w2)return Pp[s]=l[f];return s}var E2=Do("animationend"),A2=Do("animationiteration"),b2=Do("animationstart"),SI=Do("transitionrun"),CI=Do("transitionstart"),TI=Do("transitioncancel"),S2=Do("transitionend"),C2=new Map,kp="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");kp.push("scrollEnd");function Oi(s,l){C2.set(s,l),na(l,[s])}var wd=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var l=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(l))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)},ii=[],Il=0,jp=0;function Ed(){for(var s=Il,l=jp=Il=0;l<s;){var f=ii[l];ii[l++]=null;var h=ii[l];ii[l++]=null;var y=ii[l];ii[l++]=null;var x=ii[l];if(ii[l++]=null,h!==null&&y!==null){var T=h.pending;T===null?y.next=y:(y.next=T.next,T.next=y),h.pending=y}x!==0&&T2(f,y,x)}}function Ad(s,l,f,h){ii[Il++]=s,ii[Il++]=l,ii[Il++]=f,ii[Il++]=h,jp|=h,s.lanes|=h,s=s.alternate,s!==null&&(s.lanes|=h)}function Lp(s,l,f,h){return Ad(s,l,f,h),bd(s)}function Mo(s,l){return Ad(s,null,null,l),bd(s)}function T2(s,l,f){s.lanes|=f;var h=s.alternate;h!==null&&(h.lanes|=f);for(var y=!1,x=s.return;x!==null;)x.childLanes|=f,h=x.alternate,h!==null&&(h.childLanes|=f),x.tag===22&&(s=x.stateNode,s===null||s._visibility&1||(y=!0)),s=x,x=x.return;return s.tag===3?(x=s.stateNode,y&&l!==null&&(y=31-Ce(f),s=x.hiddenUpdates,h=s[y],h===null?s[y]=[l]:h.push(l),l.lane=f|536870912),x):null}function bd(s){if(50<ju)throw ju=0,$1=null,Error(r(185));for(var l=s.return;l!==null;)s=l,l=s.return;return s.tag===3?s.stateNode:null}var Nl={};function II(s,l,f,h){this.tag=s,this.key=f,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function zr(s,l,f,h){return new II(s,l,f,h)}function Bp(s){return s=s.prototype,!(!s||!s.isReactComponent)}function Pa(s,l){var f=s.alternate;return f===null?(f=zr(s.tag,l,s.key,s.mode),f.elementType=s.elementType,f.type=s.type,f.stateNode=s.stateNode,f.alternate=s,s.alternate=f):(f.pendingProps=l,f.type=s.type,f.flags=0,f.subtreeFlags=0,f.deletions=null),f.flags=s.flags&65011712,f.childLanes=s.childLanes,f.lanes=s.lanes,f.child=s.child,f.memoizedProps=s.memoizedProps,f.memoizedState=s.memoizedState,f.updateQueue=s.updateQueue,l=s.dependencies,f.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},f.sibling=s.sibling,f.index=s.index,f.ref=s.ref,f.refCleanup=s.refCleanup,f}function I2(s,l){s.flags&=65011714;var f=s.alternate;return f===null?(s.childLanes=0,s.lanes=l,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=f.childLanes,s.lanes=f.lanes,s.child=f.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=f.memoizedProps,s.memoizedState=f.memoizedState,s.updateQueue=f.updateQueue,s.type=f.type,l=f.dependencies,s.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext}),s}function Sd(s,l,f,h,y,x){var T=0;if(h=s,typeof s=="function")Bp(s)&&(T=1);else if(typeof s=="string")T=M4(s,f,we.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case R:return s=zr(31,f,l,y),s.elementType=R,s.lanes=x,s;case S:return Po(f.children,y,x,l);case D:T=8,y|=24;break;case C:return s=zr(12,f,l,y|2),s.elementType=C,s.lanes=x,s;case q:return s=zr(13,f,l,y),s.elementType=q,s.lanes=x,s;case $:return s=zr(19,f,l,y),s.elementType=$,s.lanes=x,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case V:T=10;break e;case k:T=9;break e;case z:T=11;break e;case M:T=14;break e;case b:T=16,h=null;break e}T=29,f=Error(r(130,s===null?"null":typeof s,"")),h=null}return l=zr(T,f,l,y),l.elementType=s,l.type=h,l.lanes=x,l}function Po(s,l,f,h){return s=zr(7,s,h,l),s.lanes=f,s}function Vp(s,l,f){return s=zr(6,s,null,l),s.lanes=f,s}function N2(s){var l=zr(18,null,null,0);return l.stateNode=s,l}function Fp(s,l,f){return l=zr(4,s.children!==null?s.children:[],s.key,l),l.lanes=f,l.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},l}var R2=new WeakMap;function ai(s,l){if(typeof s=="object"&&s!==null){var f=R2.get(s);return f!==void 0?f:(l={value:s,source:l,stack:Bn(l)},R2.set(s,l),l)}return{value:s,source:l,stack:Bn(l)}}var Rl=[],Ol=0,Cd=null,mu=0,si=[],oi=0,vs=null,fa=1,da="";function ka(s,l){Rl[Ol++]=mu,Rl[Ol++]=Cd,Cd=s,mu=l}function O2(s,l,f){si[oi++]=fa,si[oi++]=da,si[oi++]=vs,vs=s;var h=fa;s=da;var y=32-Ce(h)-1;h&=~(1<<y),f+=1;var x=32-Ce(l)+y;if(30<x){var T=y-y%5;x=(h&(1<<T)-1).toString(32),h>>=T,y-=T,fa=1<<32-Ce(l)+y|f<<y|h,da=x+s}else fa=1<<x|f<<y|h,da=s}function Up(s){s.return!==null&&(ka(s,1),O2(s,1,0))}function zp(s){for(;s===Cd;)Cd=Rl[--Ol],Rl[Ol]=null,mu=Rl[--Ol],Rl[Ol]=null;for(;s===vs;)vs=si[--oi],si[oi]=null,da=si[--oi],si[oi]=null,fa=si[--oi],si[oi]=null}function D2(s,l){si[oi++]=fa,si[oi++]=da,si[oi++]=vs,fa=l.id,da=l.overflow,vs=s}var Zn=null,qt=null,dt=!1,ys=null,li=!1,Hp=Error(r(519));function _s(s){var l=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw gu(ai(l,s)),Hp}function M2(s){var l=s.stateNode,f=s.type,h=s.memoizedProps;switch(l[vn]=s,l[Vn]=h,f){case"dialog":st("cancel",l),st("close",l);break;case"iframe":case"object":case"embed":st("load",l);break;case"video":case"audio":for(f=0;f<Bu.length;f++)st(Bu[f],l);break;case"source":st("error",l);break;case"img":case"image":case"link":st("error",l),st("load",l);break;case"details":st("toggle",l);break;case"input":st("invalid",l),ad(l,h.value,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name,!0);break;case"select":st("invalid",l);break;case"textarea":st("invalid",l),us(l,h.value,h.defaultValue,h.children)}f=h.children,typeof f!="string"&&typeof f!="number"&&typeof f!="bigint"||l.textContent===""+f||h.suppressHydrationWarning===!0||Wx(l.textContent,f)?(h.popover!=null&&(st("beforetoggle",l),st("toggle",l)),h.onScroll!=null&&st("scroll",l),h.onScrollEnd!=null&&st("scrollend",l),h.onClick!=null&&(l.onclick=Ci),l=!0):l=!1,l||_s(s,!0)}function P2(s){for(Zn=s.return;Zn;)switch(Zn.tag){case 5:case 31:case 13:li=!1;return;case 27:case 3:li=!0;return;default:Zn=Zn.return}}function Dl(s){if(s!==Zn)return!1;if(!dt)return P2(s),dt=!0,!1;var l=s.tag,f;if((f=l!==3&&l!==27)&&((f=l===5)&&(f=s.type,f=!(f!=="form"&&f!=="button")||om(s.type,s.memoizedProps)),f=!f),f&&qt&&_s(s),P2(s),l===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(317));qt=aw(s)}else if(l===31){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(317));qt=aw(s)}else l===27?(l=qt,Ms(s.type)?(s=dm,dm=null,qt=s):qt=l):qt=Zn?ui(s.stateNode.nextSibling):null;return!0}function ko(){qt=Zn=null,dt=!1}function Gp(){var s=ys;return s!==null&&(Or===null?Or=s:Or.push.apply(Or,s),ys=null),s}function gu(s){ys===null?ys=[s]:ys.push(s)}var qp=Y(null),jo=null,ja=null;function xs(s,l,f){me(qp,l._currentValue),l._currentValue=f}function La(s){s._currentValue=qp.current,ne(qp)}function $p(s,l,f){for(;s!==null;){var h=s.alternate;if((s.childLanes&l)!==l?(s.childLanes|=l,h!==null&&(h.childLanes|=l)):h!==null&&(h.childLanes&l)!==l&&(h.childLanes|=l),s===f)break;s=s.return}}function Xp(s,l,f,h){var y=s.child;for(y!==null&&(y.return=s);y!==null;){var x=y.dependencies;if(x!==null){var T=y.child;x=x.firstContext;e:for(;x!==null;){var B=x;x=y;for(var X=0;X<l.length;X++)if(B.context===l[X]){x.lanes|=f,B=x.alternate,B!==null&&(B.lanes|=f),$p(x.return,f,s),h||(T=null);break e}x=B.next}}else if(y.tag===18){if(T=y.return,T===null)throw Error(r(341));T.lanes|=f,x=T.alternate,x!==null&&(x.lanes|=f),$p(T,f,s),T=null}else T=y.child;if(T!==null)T.return=y;else for(T=y;T!==null;){if(T===s){T=null;break}if(y=T.sibling,y!==null){y.return=T.return,T=y;break}T=T.return}y=T}}function Ml(s,l,f,h){s=null;for(var y=l,x=!1;y!==null;){if(!x){if((y.flags&524288)!==0)x=!0;else if((y.flags&262144)!==0)break}if(y.tag===10){var T=y.alternate;if(T===null)throw Error(r(387));if(T=T.memoizedProps,T!==null){var B=y.type;Ur(y.pendingProps.value,T.value)||(s!==null?s.push(B):s=[B])}}else if(y===Te.current){if(T=y.alternate,T===null)throw Error(r(387));T.memoizedState.memoizedState!==y.memoizedState.memoizedState&&(s!==null?s.push(Hu):s=[Hu])}y=y.return}s!==null&&Xp(l,s,f,h),l.flags|=262144}function Td(s){for(s=s.firstContext;s!==null;){if(!Ur(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function Lo(s){jo=s,ja=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function Jn(s){return k2(jo,s)}function Id(s,l){return jo===null&&Lo(s),k2(s,l)}function k2(s,l){var f=l._currentValue;if(l={context:l,memoizedValue:f,next:null},ja===null){if(s===null)throw Error(r(308));ja=l,s.dependencies={lanes:0,firstContext:l},s.flags|=524288}else ja=ja.next=l;return f}var NI=typeof AbortController<"u"?AbortController:function(){var s=[],l=this.signal={aborted:!1,addEventListener:function(f,h){s.push(h)}};this.abort=function(){l.aborted=!0,s.forEach(function(f){return f()})}},RI=n.unstable_scheduleCallback,OI=n.unstable_NormalPriority,xn={$$typeof:V,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Yp(){return{controller:new NI,data:new Map,refCount:0}}function vu(s){s.refCount--,s.refCount===0&&RI(OI,function(){s.controller.abort()})}var yu=null,Kp=0,Pl=0,kl=null;function DI(s,l){if(yu===null){var f=yu=[];Kp=0,Pl=Z1(),kl={status:"pending",value:void 0,then:function(h){f.push(h)}}}return Kp++,l.then(j2,j2),l}function j2(){if(--Kp===0&&yu!==null){kl!==null&&(kl.status="fulfilled");var s=yu;yu=null,Pl=0,kl=null;for(var l=0;l<s.length;l++)(0,s[l])()}}function MI(s,l){var f=[],h={status:"pending",value:null,reason:null,then:function(y){f.push(y)}};return s.then(function(){h.status="fulfilled",h.value=l;for(var y=0;y<f.length;y++)(0,f[y])(l)},function(y){for(h.status="rejected",h.reason=y,y=0;y<f.length;y++)(0,f[y])(void 0)}),h}var L2=H.S;H.S=function(s,l){xx=tn(),typeof l=="object"&&l!==null&&typeof l.then=="function"&&DI(s,l),L2!==null&&L2(s,l)};var Bo=Y(null);function Wp(){var s=Bo.current;return s!==null?s:Ut.pooledCache}function Nd(s,l){l===null?me(Bo,Bo.current):me(Bo,l.pool)}function B2(){var s=Wp();return s===null?null:{parent:xn._currentValue,pool:s}}var jl=Error(r(460)),Qp=Error(r(474)),Rd=Error(r(542)),Od={then:function(){}};function V2(s){return s=s.status,s==="fulfilled"||s==="rejected"}function F2(s,l,f){switch(f=s[f],f===void 0?s.push(l):f!==l&&(l.then(Ci,Ci),l=f),l.status){case"fulfilled":return l.value;case"rejected":throw s=l.reason,z2(s),s;default:if(typeof l.status=="string")l.then(Ci,Ci);else{if(s=Ut,s!==null&&100<s.shellSuspendCounter)throw Error(r(482));s=l,s.status="pending",s.then(function(h){if(l.status==="pending"){var y=l;y.status="fulfilled",y.value=h}},function(h){if(l.status==="pending"){var y=l;y.status="rejected",y.reason=h}})}switch(l.status){case"fulfilled":return l.value;case"rejected":throw s=l.reason,z2(s),s}throw Fo=l,jl}}function Vo(s){try{var l=s._init;return l(s._payload)}catch(f){throw f!==null&&typeof f=="object"&&typeof f.then=="function"?(Fo=f,jl):f}}var Fo=null;function U2(){if(Fo===null)throw Error(r(459));var s=Fo;return Fo=null,s}function z2(s){if(s===jl||s===Rd)throw Error(r(483))}var Ll=null,_u=0;function Dd(s){var l=_u;return _u+=1,Ll===null&&(Ll=[]),F2(Ll,s,l)}function xu(s,l){l=l.props.ref,s.ref=l!==void 0?l:null}function Md(s,l){throw l.$$typeof===_?Error(r(525)):(s=Object.prototype.toString.call(l),Error(r(31,s==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":s)))}function H2(s){function l(Q,K){if(s){var ee=Q.deletions;ee===null?(Q.deletions=[K],Q.flags|=16):ee.push(K)}}function f(Q,K){if(!s)return null;for(;K!==null;)l(Q,K),K=K.sibling;return null}function h(Q){for(var K=new Map;Q!==null;)Q.key!==null?K.set(Q.key,Q):K.set(Q.index,Q),Q=Q.sibling;return K}function y(Q,K){return Q=Pa(Q,K),Q.index=0,Q.sibling=null,Q}function x(Q,K,ee){return Q.index=ee,s?(ee=Q.alternate,ee!==null?(ee=ee.index,ee<K?(Q.flags|=67108866,K):ee):(Q.flags|=67108866,K)):(Q.flags|=1048576,K)}function T(Q){return s&&Q.alternate===null&&(Q.flags|=67108866),Q}function B(Q,K,ee,de){return K===null||K.tag!==6?(K=Vp(ee,Q.mode,de),K.return=Q,K):(K=y(K,ee),K.return=Q,K)}function X(Q,K,ee,de){var ke=ee.type;return ke===S?ce(Q,K,ee.props.children,de,ee.key):K!==null&&(K.elementType===ke||typeof ke=="object"&&ke!==null&&ke.$$typeof===b&&Vo(ke)===K.type)?(K=y(K,ee.props),xu(K,ee),K.return=Q,K):(K=Sd(ee.type,ee.key,ee.props,null,Q.mode,de),xu(K,ee),K.return=Q,K)}function te(Q,K,ee,de){return K===null||K.tag!==4||K.stateNode.containerInfo!==ee.containerInfo||K.stateNode.implementation!==ee.implementation?(K=Fp(ee,Q.mode,de),K.return=Q,K):(K=y(K,ee.children||[]),K.return=Q,K)}function ce(Q,K,ee,de,ke){return K===null||K.tag!==7?(K=Po(ee,Q.mode,de,ke),K.return=Q,K):(K=y(K,ee),K.return=Q,K)}function he(Q,K,ee){if(typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint")return K=Vp(""+K,Q.mode,ee),K.return=Q,K;if(typeof K=="object"&&K!==null){switch(K.$$typeof){case w:return ee=Sd(K.type,K.key,K.props,null,Q.mode,ee),xu(ee,K),ee.return=Q,ee;case A:return K=Fp(K,Q.mode,ee),K.return=Q,K;case b:return K=Vo(K),he(Q,K,ee)}if(ge(K)||L(K))return K=Po(K,Q.mode,ee,null),K.return=Q,K;if(typeof K.then=="function")return he(Q,Dd(K),ee);if(K.$$typeof===V)return he(Q,Id(Q,K),ee);Md(Q,K)}return null}function re(Q,K,ee,de){var ke=K!==null?K.key:null;if(typeof ee=="string"&&ee!==""||typeof ee=="number"||typeof ee=="bigint")return ke!==null?null:B(Q,K,""+ee,de);if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case w:return ee.key===ke?X(Q,K,ee,de):null;case A:return ee.key===ke?te(Q,K,ee,de):null;case b:return ee=Vo(ee),re(Q,K,ee,de)}if(ge(ee)||L(ee))return ke!==null?null:ce(Q,K,ee,de,null);if(typeof ee.then=="function")return re(Q,K,Dd(ee),de);if(ee.$$typeof===V)return re(Q,K,Id(Q,ee),de);Md(Q,ee)}return null}function se(Q,K,ee,de,ke){if(typeof de=="string"&&de!==""||typeof de=="number"||typeof de=="bigint")return Q=Q.get(ee)||null,B(K,Q,""+de,ke);if(typeof de=="object"&&de!==null){switch(de.$$typeof){case w:return Q=Q.get(de.key===null?ee:de.key)||null,X(K,Q,de,ke);case A:return Q=Q.get(de.key===null?ee:de.key)||null,te(K,Q,de,ke);case b:return de=Vo(de),se(Q,K,ee,de,ke)}if(ge(de)||L(de))return Q=Q.get(ee)||null,ce(K,Q,de,ke,null);if(typeof de.then=="function")return se(Q,K,ee,Dd(de),ke);if(de.$$typeof===V)return se(Q,K,ee,Id(K,de),ke);Md(K,de)}return null}function Ie(Q,K,ee,de){for(var ke=null,yt=null,Oe=K,et=K=0,lt=null;Oe!==null&&et<ee.length;et++){Oe.index>et?(lt=Oe,Oe=null):lt=Oe.sibling;var _t=re(Q,Oe,ee[et],de);if(_t===null){Oe===null&&(Oe=lt);break}s&&Oe&&_t.alternate===null&&l(Q,Oe),K=x(_t,K,et),yt===null?ke=_t:yt.sibling=_t,yt=_t,Oe=lt}if(et===ee.length)return f(Q,Oe),dt&&ka(Q,et),ke;if(Oe===null){for(;et<ee.length;et++)Oe=he(Q,ee[et],de),Oe!==null&&(K=x(Oe,K,et),yt===null?ke=Oe:yt.sibling=Oe,yt=Oe);return dt&&ka(Q,et),ke}for(Oe=h(Oe);et<ee.length;et++)lt=se(Oe,Q,et,ee[et],de),lt!==null&&(s&&lt.alternate!==null&&Oe.delete(lt.key===null?et:lt.key),K=x(lt,K,et),yt===null?ke=lt:yt.sibling=lt,yt=lt);return s&&Oe.forEach(function(Bs){return l(Q,Bs)}),dt&&ka(Q,et),ke}function Ue(Q,K,ee,de){if(ee==null)throw Error(r(151));for(var ke=null,yt=null,Oe=K,et=K=0,lt=null,_t=ee.next();Oe!==null&&!_t.done;et++,_t=ee.next()){Oe.index>et?(lt=Oe,Oe=null):lt=Oe.sibling;var Bs=re(Q,Oe,_t.value,de);if(Bs===null){Oe===null&&(Oe=lt);break}s&&Oe&&Bs.alternate===null&&l(Q,Oe),K=x(Bs,K,et),yt===null?ke=Bs:yt.sibling=Bs,yt=Bs,Oe=lt}if(_t.done)return f(Q,Oe),dt&&ka(Q,et),ke;if(Oe===null){for(;!_t.done;et++,_t=ee.next())_t=he(Q,_t.value,de),_t!==null&&(K=x(_t,K,et),yt===null?ke=_t:yt.sibling=_t,yt=_t);return dt&&ka(Q,et),ke}for(Oe=h(Oe);!_t.done;et++,_t=ee.next())_t=se(Oe,Q,et,_t.value,de),_t!==null&&(s&&_t.alternate!==null&&Oe.delete(_t.key===null?et:_t.key),K=x(_t,K,et),yt===null?ke=_t:yt.sibling=_t,yt=_t);return s&&Oe.forEach(function(G4){return l(Q,G4)}),dt&&ka(Q,et),ke}function Bt(Q,K,ee,de){if(typeof ee=="object"&&ee!==null&&ee.type===S&&ee.key===null&&(ee=ee.props.children),typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case w:e:{for(var ke=ee.key;K!==null;){if(K.key===ke){if(ke=ee.type,ke===S){if(K.tag===7){f(Q,K.sibling),de=y(K,ee.props.children),de.return=Q,Q=de;break e}}else if(K.elementType===ke||typeof ke=="object"&&ke!==null&&ke.$$typeof===b&&Vo(ke)===K.type){f(Q,K.sibling),de=y(K,ee.props),xu(de,ee),de.return=Q,Q=de;break e}f(Q,K);break}else l(Q,K);K=K.sibling}ee.type===S?(de=Po(ee.props.children,Q.mode,de,ee.key),de.return=Q,Q=de):(de=Sd(ee.type,ee.key,ee.props,null,Q.mode,de),xu(de,ee),de.return=Q,Q=de)}return T(Q);case A:e:{for(ke=ee.key;K!==null;){if(K.key===ke)if(K.tag===4&&K.stateNode.containerInfo===ee.containerInfo&&K.stateNode.implementation===ee.implementation){f(Q,K.sibling),de=y(K,ee.children||[]),de.return=Q,Q=de;break e}else{f(Q,K);break}else l(Q,K);K=K.sibling}de=Fp(ee,Q.mode,de),de.return=Q,Q=de}return T(Q);case b:return ee=Vo(ee),Bt(Q,K,ee,de)}if(ge(ee))return Ie(Q,K,ee,de);if(L(ee)){if(ke=L(ee),typeof ke!="function")throw Error(r(150));return ee=ke.call(ee),Ue(Q,K,ee,de)}if(typeof ee.then=="function")return Bt(Q,K,Dd(ee),de);if(ee.$$typeof===V)return Bt(Q,K,Id(Q,ee),de);Md(Q,ee)}return typeof ee=="string"&&ee!==""||typeof ee=="number"||typeof ee=="bigint"?(ee=""+ee,K!==null&&K.tag===6?(f(Q,K.sibling),de=y(K,ee),de.return=Q,Q=de):(f(Q,K),de=Vp(ee,Q.mode,de),de.return=Q,Q=de),T(Q)):f(Q,K)}return function(Q,K,ee,de){try{_u=0;var ke=Bt(Q,K,ee,de);return Ll=null,ke}catch(Oe){if(Oe===jl||Oe===Rd)throw Oe;var yt=zr(29,Oe,null,Q.mode);return yt.lanes=de,yt.return=Q,yt}finally{}}}var Uo=H2(!0),G2=H2(!1),ws=!1;function Zp(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Jp(s,l){s=s.updateQueue,l.updateQueue===s&&(l.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function Es(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function As(s,l,f){var h=s.updateQueue;if(h===null)return null;if(h=h.shared,(bt&2)!==0){var y=h.pending;return y===null?l.next=l:(l.next=y.next,y.next=l),h.pending=l,l=bd(s),T2(s,null,f),l}return Ad(s,h,l,f),bd(s)}function wu(s,l,f){if(l=l.updateQueue,l!==null&&(l=l.shared,(f&4194048)!==0)){var h=l.lanes;h&=s.pendingLanes,f|=h,l.lanes=f,Yc(s,f)}}function e1(s,l){var f=s.updateQueue,h=s.alternate;if(h!==null&&(h=h.updateQueue,f===h)){var y=null,x=null;if(f=f.firstBaseUpdate,f!==null){do{var T={lane:f.lane,tag:f.tag,payload:f.payload,callback:null,next:null};x===null?y=x=T:x=x.next=T,f=f.next}while(f!==null);x===null?y=x=l:x=x.next=l}else y=x=l;f={baseState:h.baseState,firstBaseUpdate:y,lastBaseUpdate:x,shared:h.shared,callbacks:h.callbacks},s.updateQueue=f;return}s=f.lastBaseUpdate,s===null?f.firstBaseUpdate=l:s.next=l,f.lastBaseUpdate=l}var t1=!1;function Eu(){if(t1){var s=kl;if(s!==null)throw s}}function Au(s,l,f,h){t1=!1;var y=s.updateQueue;ws=!1;var x=y.firstBaseUpdate,T=y.lastBaseUpdate,B=y.shared.pending;if(B!==null){y.shared.pending=null;var X=B,te=X.next;X.next=null,T===null?x=te:T.next=te,T=X;var ce=s.alternate;ce!==null&&(ce=ce.updateQueue,B=ce.lastBaseUpdate,B!==T&&(B===null?ce.firstBaseUpdate=te:B.next=te,ce.lastBaseUpdate=X))}if(x!==null){var he=y.baseState;T=0,ce=te=X=null,B=x;do{var re=B.lane&-536870913,se=re!==B.lane;if(se?(ot&re)===re:(h&re)===re){re!==0&&re===Pl&&(t1=!0),ce!==null&&(ce=ce.next={lane:0,tag:B.tag,payload:B.payload,callback:null,next:null});e:{var Ie=s,Ue=B;re=l;var Bt=f;switch(Ue.tag){case 1:if(Ie=Ue.payload,typeof Ie=="function"){he=Ie.call(Bt,he,re);break e}he=Ie;break e;case 3:Ie.flags=Ie.flags&-65537|128;case 0:if(Ie=Ue.payload,re=typeof Ie=="function"?Ie.call(Bt,he,re):Ie,re==null)break e;he=g({},he,re);break e;case 2:ws=!0}}re=B.callback,re!==null&&(s.flags|=64,se&&(s.flags|=8192),se=y.callbacks,se===null?y.callbacks=[re]:se.push(re))}else se={lane:re,tag:B.tag,payload:B.payload,callback:B.callback,next:null},ce===null?(te=ce=se,X=he):ce=ce.next=se,T|=re;if(B=B.next,B===null){if(B=y.shared.pending,B===null)break;se=B,B=se.next,se.next=null,y.lastBaseUpdate=se,y.shared.pending=null}}while(!0);ce===null&&(X=he),y.baseState=X,y.firstBaseUpdate=te,y.lastBaseUpdate=ce,x===null&&(y.shared.lanes=0),Is|=T,s.lanes=T,s.memoizedState=he}}function q2(s,l){if(typeof s!="function")throw Error(r(191,s));s.call(l)}function $2(s,l){var f=s.callbacks;if(f!==null)for(s.callbacks=null,s=0;s<f.length;s++)q2(f[s],l)}var Bl=Y(null),Pd=Y(0);function X2(s,l){s=$a,me(Pd,s),me(Bl,l),$a=s|l.baseLanes}function n1(){me(Pd,$a),me(Bl,Bl.current)}function r1(){$a=Pd.current,ne(Bl),ne(Pd)}var Hr=Y(null),ci=null;function bs(s){var l=s.alternate;me(dn,dn.current&1),me(Hr,s),ci===null&&(l===null||Bl.current!==null||l.memoizedState!==null)&&(ci=s)}function i1(s){me(dn,dn.current),me(Hr,s),ci===null&&(ci=s)}function Y2(s){s.tag===22?(me(dn,dn.current),me(Hr,s),ci===null&&(ci=s)):Ss()}function Ss(){me(dn,dn.current),me(Hr,Hr.current)}function Gr(s){ne(Hr),ci===s&&(ci=null),ne(dn)}var dn=Y(0);function kd(s){for(var l=s;l!==null;){if(l.tag===13){var f=l.memoizedState;if(f!==null&&(f=f.dehydrated,f===null||um(f)||fm(f)))return l}else if(l.tag===19&&(l.memoizedProps.revealOrder==="forwards"||l.memoizedProps.revealOrder==="backwards"||l.memoizedProps.revealOrder==="unstable_legacy-backwards"||l.memoizedProps.revealOrder==="together")){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===s)break;for(;l.sibling===null;){if(l.return===null||l.return===s)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}var Ba=0,Qe=null,jt=null,wn=null,jd=!1,Vl=!1,zo=!1,Ld=0,bu=0,Fl=null,PI=0;function sn(){throw Error(r(321))}function a1(s,l){if(l===null)return!1;for(var f=0;f<l.length&&f<s.length;f++)if(!Ur(s[f],l[f]))return!1;return!0}function s1(s,l,f,h,y,x){return Ba=x,Qe=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,H.H=s===null||s.memoizedState===null?O_:w1,zo=!1,x=f(h,y),zo=!1,Vl&&(x=W2(l,f,h,y)),K2(s),x}function K2(s){H.H=Tu;var l=jt!==null&&jt.next!==null;if(Ba=0,wn=jt=Qe=null,jd=!1,bu=0,Fl=null,l)throw Error(r(300));s===null||En||(s=s.dependencies,s!==null&&Td(s)&&(En=!0))}function W2(s,l,f,h){Qe=s;var y=0;do{if(Vl&&(Fl=null),bu=0,Vl=!1,25<=y)throw Error(r(301));if(y+=1,wn=jt=null,s.updateQueue!=null){var x=s.updateQueue;x.lastEffect=null,x.events=null,x.stores=null,x.memoCache!=null&&(x.memoCache.index=0)}H.H=D_,x=l(f,h)}while(Vl);return x}function kI(){var s=H.H,l=s.useState()[0];return l=typeof l.then=="function"?Su(l):l,s=s.useState()[0],(jt!==null?jt.memoizedState:null)!==s&&(Qe.flags|=1024),l}function o1(){var s=Ld!==0;return Ld=0,s}function l1(s,l,f){l.updateQueue=s.updateQueue,l.flags&=-2053,s.lanes&=~f}function c1(s){if(jd){for(s=s.memoizedState;s!==null;){var l=s.queue;l!==null&&(l.pending=null),s=s.next}jd=!1}Ba=0,wn=jt=Qe=null,Vl=!1,bu=Ld=0,Fl=null}function wr(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return wn===null?Qe.memoizedState=wn=s:wn=wn.next=s,wn}function hn(){if(jt===null){var s=Qe.alternate;s=s!==null?s.memoizedState:null}else s=jt.next;var l=wn===null?Qe.memoizedState:wn.next;if(l!==null)wn=l,jt=s;else{if(s===null)throw Qe.alternate===null?Error(r(467)):Error(r(310));jt=s,s={memoizedState:jt.memoizedState,baseState:jt.baseState,baseQueue:jt.baseQueue,queue:jt.queue,next:null},wn===null?Qe.memoizedState=wn=s:wn=wn.next=s}return wn}function Bd(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Su(s){var l=bu;return bu+=1,Fl===null&&(Fl=[]),s=F2(Fl,s,l),l=Qe,(wn===null?l.memoizedState:wn.next)===null&&(l=l.alternate,H.H=l===null||l.memoizedState===null?O_:w1),s}function Vd(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return Su(s);if(s.$$typeof===V)return Jn(s)}throw Error(r(438,String(s)))}function u1(s){var l=null,f=Qe.updateQueue;if(f!==null&&(l=f.memoCache),l==null){var h=Qe.alternate;h!==null&&(h=h.updateQueue,h!==null&&(h=h.memoCache,h!=null&&(l={data:h.data.map(function(y){return y.slice()}),index:0})))}if(l==null&&(l={data:[],index:0}),f===null&&(f=Bd(),Qe.updateQueue=f),f.memoCache=l,f=l.data[l.index],f===void 0)for(f=l.data[l.index]=Array(s),h=0;h<s;h++)f[h]=I;return l.index++,f}function Va(s,l){return typeof l=="function"?l(s):l}function Fd(s){var l=hn();return f1(l,jt,s)}function f1(s,l,f){var h=s.queue;if(h===null)throw Error(r(311));h.lastRenderedReducer=f;var y=s.baseQueue,x=h.pending;if(x!==null){if(y!==null){var T=y.next;y.next=x.next,x.next=T}l.baseQueue=y=x,h.pending=null}if(x=s.baseState,y===null)s.memoizedState=x;else{l=y.next;var B=T=null,X=null,te=l,ce=!1;do{var he=te.lane&-536870913;if(he!==te.lane?(ot&he)===he:(Ba&he)===he){var re=te.revertLane;if(re===0)X!==null&&(X=X.next={lane:0,revertLane:0,gesture:null,action:te.action,hasEagerState:te.hasEagerState,eagerState:te.eagerState,next:null}),he===Pl&&(ce=!0);else if((Ba&re)===re){te=te.next,re===Pl&&(ce=!0);continue}else he={lane:0,revertLane:te.revertLane,gesture:null,action:te.action,hasEagerState:te.hasEagerState,eagerState:te.eagerState,next:null},X===null?(B=X=he,T=x):X=X.next=he,Qe.lanes|=re,Is|=re;he=te.action,zo&&f(x,he),x=te.hasEagerState?te.eagerState:f(x,he)}else re={lane:he,revertLane:te.revertLane,gesture:te.gesture,action:te.action,hasEagerState:te.hasEagerState,eagerState:te.eagerState,next:null},X===null?(B=X=re,T=x):X=X.next=re,Qe.lanes|=he,Is|=he;te=te.next}while(te!==null&&te!==l);if(X===null?T=x:X.next=B,!Ur(x,s.memoizedState)&&(En=!0,ce&&(f=kl,f!==null)))throw f;s.memoizedState=x,s.baseState=T,s.baseQueue=X,h.lastRenderedState=x}return y===null&&(h.lanes=0),[s.memoizedState,h.dispatch]}function d1(s){var l=hn(),f=l.queue;if(f===null)throw Error(r(311));f.lastRenderedReducer=s;var h=f.dispatch,y=f.pending,x=l.memoizedState;if(y!==null){f.pending=null;var T=y=y.next;do x=s(x,T.action),T=T.next;while(T!==y);Ur(x,l.memoizedState)||(En=!0),l.memoizedState=x,l.baseQueue===null&&(l.baseState=x),f.lastRenderedState=x}return[x,h]}function Q2(s,l,f){var h=Qe,y=hn(),x=dt;if(x){if(f===void 0)throw Error(r(407));f=f()}else f=l();var T=!Ur((jt||y).memoizedState,f);if(T&&(y.memoizedState=f,En=!0),y=y.queue,m1(e_.bind(null,h,y,s),[s]),y.getSnapshot!==l||T||wn!==null&&wn.memoizedState.tag&1){if(h.flags|=2048,Ul(9,{destroy:void 0},J2.bind(null,h,y,f,l),null),Ut===null)throw Error(r(349));x||(Ba&127)!==0||Z2(h,l,f)}return f}function Z2(s,l,f){s.flags|=16384,s={getSnapshot:l,value:f},l=Qe.updateQueue,l===null?(l=Bd(),Qe.updateQueue=l,l.stores=[s]):(f=l.stores,f===null?l.stores=[s]:f.push(s))}function J2(s,l,f,h){l.value=f,l.getSnapshot=h,t_(l)&&n_(s)}function e_(s,l,f){return f(function(){t_(l)&&n_(s)})}function t_(s){var l=s.getSnapshot;s=s.value;try{var f=l();return!Ur(s,f)}catch{return!0}}function n_(s){var l=Mo(s,2);l!==null&&Dr(l,s,2)}function h1(s){var l=wr();if(typeof s=="function"){var f=s;if(s=f(),zo){rt(!0);try{f()}finally{rt(!1)}}}return l.memoizedState=l.baseState=s,l.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Va,lastRenderedState:s},l}function r_(s,l,f,h){return s.baseState=f,f1(s,jt,typeof h=="function"?h:Va)}function jI(s,l,f,h,y){if(Hd(s))throw Error(r(485));if(s=l.action,s!==null){var x={payload:y,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(T){x.listeners.push(T)}};H.T!==null?f(!0):x.isTransition=!1,h(x),f=l.pending,f===null?(x.next=l.pending=x,i_(l,x)):(x.next=f.next,l.pending=f.next=x)}}function i_(s,l){var f=l.action,h=l.payload,y=s.state;if(l.isTransition){var x=H.T,T={};H.T=T;try{var B=f(y,h),X=H.S;X!==null&&X(T,B),a_(s,l,B)}catch(te){p1(s,l,te)}finally{x!==null&&T.types!==null&&(x.types=T.types),H.T=x}}else try{x=f(y,h),a_(s,l,x)}catch(te){p1(s,l,te)}}function a_(s,l,f){f!==null&&typeof f=="object"&&typeof f.then=="function"?f.then(function(h){s_(s,l,h)},function(h){return p1(s,l,h)}):s_(s,l,f)}function s_(s,l,f){l.status="fulfilled",l.value=f,o_(l),s.state=f,l=s.pending,l!==null&&(f=l.next,f===l?s.pending=null:(f=f.next,l.next=f,i_(s,f)))}function p1(s,l,f){var h=s.pending;if(s.pending=null,h!==null){h=h.next;do l.status="rejected",l.reason=f,o_(l),l=l.next;while(l!==h)}s.action=null}function o_(s){s=s.listeners;for(var l=0;l<s.length;l++)(0,s[l])()}function l_(s,l){return l}function c_(s,l){if(dt){var f=Ut.formState;if(f!==null){e:{var h=Qe;if(dt){if(qt){t:{for(var y=qt,x=li;y.nodeType!==8;){if(!x){y=null;break t}if(y=ui(y.nextSibling),y===null){y=null;break t}}x=y.data,y=x==="F!"||x==="F"?y:null}if(y){qt=ui(y.nextSibling),h=y.data==="F!";break e}}_s(h)}h=!1}h&&(l=f[0])}}return f=wr(),f.memoizedState=f.baseState=l,h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:l_,lastRenderedState:l},f.queue=h,f=I_.bind(null,Qe,h),h.dispatch=f,h=h1(!1),x=x1.bind(null,Qe,!1,h.queue),h=wr(),y={state:l,dispatch:null,action:s,pending:null},h.queue=y,f=jI.bind(null,Qe,y,x,f),y.dispatch=f,h.memoizedState=s,[l,f,!1]}function u_(s){var l=hn();return f_(l,jt,s)}function f_(s,l,f){if(l=f1(s,l,l_)[0],s=Fd(Va)[0],typeof l=="object"&&l!==null&&typeof l.then=="function")try{var h=Su(l)}catch(T){throw T===jl?Rd:T}else h=l;l=hn();var y=l.queue,x=y.dispatch;return f!==l.memoizedState&&(Qe.flags|=2048,Ul(9,{destroy:void 0},LI.bind(null,y,f),null)),[h,x,s]}function LI(s,l){s.action=l}function d_(s){var l=hn(),f=jt;if(f!==null)return f_(l,f,s);hn(),l=l.memoizedState,f=hn();var h=f.queue.dispatch;return f.memoizedState=s,[l,h,!1]}function Ul(s,l,f,h){return s={tag:s,create:f,deps:h,inst:l,next:null},l=Qe.updateQueue,l===null&&(l=Bd(),Qe.updateQueue=l),f=l.lastEffect,f===null?l.lastEffect=s.next=s:(h=f.next,f.next=s,s.next=h,l.lastEffect=s),s}function h_(){return hn().memoizedState}function Ud(s,l,f,h){var y=wr();Qe.flags|=s,y.memoizedState=Ul(1|l,{destroy:void 0},f,h===void 0?null:h)}function zd(s,l,f,h){var y=hn();h=h===void 0?null:h;var x=y.memoizedState.inst;jt!==null&&h!==null&&a1(h,jt.memoizedState.deps)?y.memoizedState=Ul(l,x,f,h):(Qe.flags|=s,y.memoizedState=Ul(1|l,x,f,h))}function p_(s,l){Ud(8390656,8,s,l)}function m1(s,l){zd(2048,8,s,l)}function BI(s){Qe.flags|=4;var l=Qe.updateQueue;if(l===null)l=Bd(),Qe.updateQueue=l,l.events=[s];else{var f=l.events;f===null?l.events=[s]:f.push(s)}}function m_(s){var l=hn().memoizedState;return BI({ref:l,nextImpl:s}),function(){if((bt&2)!==0)throw Error(r(440));return l.impl.apply(void 0,arguments)}}function g_(s,l){return zd(4,2,s,l)}function v_(s,l){return zd(4,4,s,l)}function y_(s,l){if(typeof l=="function"){s=s();var f=l(s);return function(){typeof f=="function"?f():l(null)}}if(l!=null)return s=s(),l.current=s,function(){l.current=null}}function __(s,l,f){f=f!=null?f.concat([s]):null,zd(4,4,y_.bind(null,l,s),f)}function g1(){}function x_(s,l){var f=hn();l=l===void 0?null:l;var h=f.memoizedState;return l!==null&&a1(l,h[1])?h[0]:(f.memoizedState=[s,l],s)}function w_(s,l){var f=hn();l=l===void 0?null:l;var h=f.memoizedState;if(l!==null&&a1(l,h[1]))return h[0];if(h=s(),zo){rt(!0);try{s()}finally{rt(!1)}}return f.memoizedState=[h,l],h}function v1(s,l,f){return f===void 0||(Ba&1073741824)!==0&&(ot&261930)===0?s.memoizedState=l:(s.memoizedState=f,s=Ex(),Qe.lanes|=s,Is|=s,f)}function E_(s,l,f,h){return Ur(f,l)?f:Bl.current!==null?(s=v1(s,f,h),Ur(s,l)||(En=!0),s):(Ba&42)===0||(Ba&1073741824)!==0&&(ot&261930)===0?(En=!0,s.memoizedState=f):(s=Ex(),Qe.lanes|=s,Is|=s,l)}function A_(s,l,f,h,y){var x=G.p;G.p=x!==0&&8>x?x:8;var T=H.T,B={};H.T=B,x1(s,!1,l,f);try{var X=y(),te=H.S;if(te!==null&&te(B,X),X!==null&&typeof X=="object"&&typeof X.then=="function"){var ce=MI(X,h);Cu(s,l,ce,Xr(s))}else Cu(s,l,h,Xr(s))}catch(he){Cu(s,l,{then:function(){},status:"rejected",reason:he},Xr())}finally{G.p=x,T!==null&&B.types!==null&&(T.types=B.types),H.T=T}}function VI(){}function y1(s,l,f,h){if(s.tag!==5)throw Error(r(476));var y=b_(s).queue;A_(s,y,l,le,f===null?VI:function(){return S_(s),f(h)})}function b_(s){var l=s.memoizedState;if(l!==null)return l;l={memoizedState:le,baseState:le,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Va,lastRenderedState:le},next:null};var f={};return l.next={memoizedState:f,baseState:f,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Va,lastRenderedState:f},next:null},s.memoizedState=l,s=s.alternate,s!==null&&(s.memoizedState=l),l}function S_(s){var l=b_(s);l.next===null&&(l=s.alternate.memoizedState),Cu(s,l.next.queue,{},Xr())}function _1(){return Jn(Hu)}function C_(){return hn().memoizedState}function T_(){return hn().memoizedState}function FI(s){for(var l=s.return;l!==null;){switch(l.tag){case 24:case 3:var f=Xr();s=Es(f);var h=As(l,s,f);h!==null&&(Dr(h,l,f),wu(h,l,f)),l={cache:Yp()},s.payload=l;return}l=l.return}}function UI(s,l,f){var h=Xr();f={lane:h,revertLane:0,gesture:null,action:f,hasEagerState:!1,eagerState:null,next:null},Hd(s)?N_(l,f):(f=Lp(s,l,f,h),f!==null&&(Dr(f,s,h),R_(f,l,h)))}function I_(s,l,f){var h=Xr();Cu(s,l,f,h)}function Cu(s,l,f,h){var y={lane:h,revertLane:0,gesture:null,action:f,hasEagerState:!1,eagerState:null,next:null};if(Hd(s))N_(l,y);else{var x=s.alternate;if(s.lanes===0&&(x===null||x.lanes===0)&&(x=l.lastRenderedReducer,x!==null))try{var T=l.lastRenderedState,B=x(T,f);if(y.hasEagerState=!0,y.eagerState=B,Ur(B,T))return Ad(s,l,y,0),Ut===null&&Ed(),!1}catch{}finally{}if(f=Lp(s,l,y,h),f!==null)return Dr(f,s,h),R_(f,l,h),!0}return!1}function x1(s,l,f,h){if(h={lane:2,revertLane:Z1(),gesture:null,action:h,hasEagerState:!1,eagerState:null,next:null},Hd(s)){if(l)throw Error(r(479))}else l=Lp(s,f,h,2),l!==null&&Dr(l,s,2)}function Hd(s){var l=s.alternate;return s===Qe||l!==null&&l===Qe}function N_(s,l){Vl=jd=!0;var f=s.pending;f===null?l.next=l:(l.next=f.next,f.next=l),s.pending=l}function R_(s,l,f){if((f&4194048)!==0){var h=l.lanes;h&=s.pendingLanes,f|=h,l.lanes=f,Yc(s,f)}}var Tu={readContext:Jn,use:Vd,useCallback:sn,useContext:sn,useEffect:sn,useImperativeHandle:sn,useLayoutEffect:sn,useInsertionEffect:sn,useMemo:sn,useReducer:sn,useRef:sn,useState:sn,useDebugValue:sn,useDeferredValue:sn,useTransition:sn,useSyncExternalStore:sn,useId:sn,useHostTransitionStatus:sn,useFormState:sn,useActionState:sn,useOptimistic:sn,useMemoCache:sn,useCacheRefresh:sn};Tu.useEffectEvent=sn;var O_={readContext:Jn,use:Vd,useCallback:function(s,l){return wr().memoizedState=[s,l===void 0?null:l],s},useContext:Jn,useEffect:p_,useImperativeHandle:function(s,l,f){f=f!=null?f.concat([s]):null,Ud(4194308,4,y_.bind(null,l,s),f)},useLayoutEffect:function(s,l){return Ud(4194308,4,s,l)},useInsertionEffect:function(s,l){Ud(4,2,s,l)},useMemo:function(s,l){var f=wr();l=l===void 0?null:l;var h=s();if(zo){rt(!0);try{s()}finally{rt(!1)}}return f.memoizedState=[h,l],h},useReducer:function(s,l,f){var h=wr();if(f!==void 0){var y=f(l);if(zo){rt(!0);try{f(l)}finally{rt(!1)}}}else y=l;return h.memoizedState=h.baseState=y,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:y},h.queue=s,s=s.dispatch=UI.bind(null,Qe,s),[h.memoizedState,s]},useRef:function(s){var l=wr();return s={current:s},l.memoizedState=s},useState:function(s){s=h1(s);var l=s.queue,f=I_.bind(null,Qe,l);return l.dispatch=f,[s.memoizedState,f]},useDebugValue:g1,useDeferredValue:function(s,l){var f=wr();return v1(f,s,l)},useTransition:function(){var s=h1(!1);return s=A_.bind(null,Qe,s.queue,!0,!1),wr().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,l,f){var h=Qe,y=wr();if(dt){if(f===void 0)throw Error(r(407));f=f()}else{if(f=l(),Ut===null)throw Error(r(349));(ot&127)!==0||Z2(h,l,f)}y.memoizedState=f;var x={value:f,getSnapshot:l};return y.queue=x,p_(e_.bind(null,h,x,s),[s]),h.flags|=2048,Ul(9,{destroy:void 0},J2.bind(null,h,x,f,l),null),f},useId:function(){var s=wr(),l=Ut.identifierPrefix;if(dt){var f=da,h=fa;f=(h&~(1<<32-Ce(h)-1)).toString(32)+f,l="_"+l+"R_"+f,f=Ld++,0<f&&(l+="H"+f.toString(32)),l+="_"}else f=PI++,l="_"+l+"r_"+f.toString(32)+"_";return s.memoizedState=l},useHostTransitionStatus:_1,useFormState:c_,useActionState:c_,useOptimistic:function(s){var l=wr();l.memoizedState=l.baseState=s;var f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return l.queue=f,l=x1.bind(null,Qe,!0,f),f.dispatch=l,[s,l]},useMemoCache:u1,useCacheRefresh:function(){return wr().memoizedState=FI.bind(null,Qe)},useEffectEvent:function(s){var l=wr(),f={impl:s};return l.memoizedState=f,function(){if((bt&2)!==0)throw Error(r(440));return f.impl.apply(void 0,arguments)}}},w1={readContext:Jn,use:Vd,useCallback:x_,useContext:Jn,useEffect:m1,useImperativeHandle:__,useInsertionEffect:g_,useLayoutEffect:v_,useMemo:w_,useReducer:Fd,useRef:h_,useState:function(){return Fd(Va)},useDebugValue:g1,useDeferredValue:function(s,l){var f=hn();return E_(f,jt.memoizedState,s,l)},useTransition:function(){var s=Fd(Va)[0],l=hn().memoizedState;return[typeof s=="boolean"?s:Su(s),l]},useSyncExternalStore:Q2,useId:C_,useHostTransitionStatus:_1,useFormState:u_,useActionState:u_,useOptimistic:function(s,l){var f=hn();return r_(f,jt,s,l)},useMemoCache:u1,useCacheRefresh:T_};w1.useEffectEvent=m_;var D_={readContext:Jn,use:Vd,useCallback:x_,useContext:Jn,useEffect:m1,useImperativeHandle:__,useInsertionEffect:g_,useLayoutEffect:v_,useMemo:w_,useReducer:d1,useRef:h_,useState:function(){return d1(Va)},useDebugValue:g1,useDeferredValue:function(s,l){var f=hn();return jt===null?v1(f,s,l):E_(f,jt.memoizedState,s,l)},useTransition:function(){var s=d1(Va)[0],l=hn().memoizedState;return[typeof s=="boolean"?s:Su(s),l]},useSyncExternalStore:Q2,useId:C_,useHostTransitionStatus:_1,useFormState:d_,useActionState:d_,useOptimistic:function(s,l){var f=hn();return jt!==null?r_(f,jt,s,l):(f.baseState=s,[s,f.queue.dispatch])},useMemoCache:u1,useCacheRefresh:T_};D_.useEffectEvent=m_;function E1(s,l,f,h){l=s.memoizedState,f=f(h,l),f=f==null?l:g({},l,f),s.memoizedState=f,s.lanes===0&&(s.updateQueue.baseState=f)}var A1={enqueueSetState:function(s,l,f){s=s._reactInternals;var h=Xr(),y=Es(h);y.payload=l,f!=null&&(y.callback=f),l=As(s,y,h),l!==null&&(Dr(l,s,h),wu(l,s,h))},enqueueReplaceState:function(s,l,f){s=s._reactInternals;var h=Xr(),y=Es(h);y.tag=1,y.payload=l,f!=null&&(y.callback=f),l=As(s,y,h),l!==null&&(Dr(l,s,h),wu(l,s,h))},enqueueForceUpdate:function(s,l){s=s._reactInternals;var f=Xr(),h=Es(f);h.tag=2,l!=null&&(h.callback=l),l=As(s,h,f),l!==null&&(Dr(l,s,f),wu(l,s,f))}};function M_(s,l,f,h,y,x,T){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(h,x,T):l.prototype&&l.prototype.isPureReactComponent?!hu(f,h)||!hu(y,x):!0}function P_(s,l,f,h){s=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(f,h),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(f,h),l.state!==s&&A1.enqueueReplaceState(l,l.state,null)}function Ho(s,l){var f=l;if("ref"in l){f={};for(var h in l)h!=="ref"&&(f[h]=l[h])}if(s=s.defaultProps){f===l&&(f=g({},f));for(var y in s)f[y]===void 0&&(f[y]=s[y])}return f}function k_(s){wd(s)}function j_(s){console.error(s)}function L_(s){wd(s)}function Gd(s,l){try{var f=s.onUncaughtError;f(l.value,{componentStack:l.stack})}catch(h){setTimeout(function(){throw h})}}function B_(s,l,f){try{var h=s.onCaughtError;h(f.value,{componentStack:f.stack,errorBoundary:l.tag===1?l.stateNode:null})}catch(y){setTimeout(function(){throw y})}}function b1(s,l,f){return f=Es(f),f.tag=3,f.payload={element:null},f.callback=function(){Gd(s,l)},f}function V_(s){return s=Es(s),s.tag=3,s}function F_(s,l,f,h){var y=f.type.getDerivedStateFromError;if(typeof y=="function"){var x=h.value;s.payload=function(){return y(x)},s.callback=function(){B_(l,f,h)}}var T=f.stateNode;T!==null&&typeof T.componentDidCatch=="function"&&(s.callback=function(){B_(l,f,h),typeof y!="function"&&(Ns===null?Ns=new Set([this]):Ns.add(this));var B=h.stack;this.componentDidCatch(h.value,{componentStack:B!==null?B:""})})}function zI(s,l,f,h,y){if(f.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){if(l=f.alternate,l!==null&&Ml(l,f,y,!0),f=Hr.current,f!==null){switch(f.tag){case 31:case 13:return ci===null?nh():f.alternate===null&&on===0&&(on=3),f.flags&=-257,f.flags|=65536,f.lanes=y,h===Od?f.flags|=16384:(l=f.updateQueue,l===null?f.updateQueue=new Set([h]):l.add(h),K1(s,h,y)),!1;case 22:return f.flags|=65536,h===Od?f.flags|=16384:(l=f.updateQueue,l===null?(l={transitions:null,markerInstances:null,retryQueue:new Set([h])},f.updateQueue=l):(f=l.retryQueue,f===null?l.retryQueue=new Set([h]):f.add(h)),K1(s,h,y)),!1}throw Error(r(435,f.tag))}return K1(s,h,y),nh(),!1}if(dt)return l=Hr.current,l!==null?((l.flags&65536)===0&&(l.flags|=256),l.flags|=65536,l.lanes=y,h!==Hp&&(s=Error(r(422),{cause:h}),gu(ai(s,f)))):(h!==Hp&&(l=Error(r(423),{cause:h}),gu(ai(l,f))),s=s.current.alternate,s.flags|=65536,y&=-y,s.lanes|=y,h=ai(h,f),y=b1(s.stateNode,h,y),e1(s,y),on!==4&&(on=2)),!1;var x=Error(r(520),{cause:h});if(x=ai(x,f),ku===null?ku=[x]:ku.push(x),on!==4&&(on=2),l===null)return!0;h=ai(h,f),f=l;do{switch(f.tag){case 3:return f.flags|=65536,s=y&-y,f.lanes|=s,s=b1(f.stateNode,h,s),e1(f,s),!1;case 1:if(l=f.type,x=f.stateNode,(f.flags&128)===0&&(typeof l.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(Ns===null||!Ns.has(x))))return f.flags|=65536,y&=-y,f.lanes|=y,y=V_(y),F_(y,s,f,h),e1(f,y),!1}f=f.return}while(f!==null);return!1}var S1=Error(r(461)),En=!1;function er(s,l,f,h){l.child=s===null?G2(l,null,f,h):Uo(l,s.child,f,h)}function U_(s,l,f,h,y){f=f.render;var x=l.ref;if("ref"in h){var T={};for(var B in h)B!=="ref"&&(T[B]=h[B])}else T=h;return Lo(l),h=s1(s,l,f,T,x,y),B=o1(),s!==null&&!En?(l1(s,l,y),Fa(s,l,y)):(dt&&B&&Up(l),l.flags|=1,er(s,l,h,y),l.child)}function z_(s,l,f,h,y){if(s===null){var x=f.type;return typeof x=="function"&&!Bp(x)&&x.defaultProps===void 0&&f.compare===null?(l.tag=15,l.type=x,H_(s,l,x,h,y)):(s=Sd(f.type,null,h,l,l.mode,y),s.ref=l.ref,s.return=l,l.child=s)}if(x=s.child,!M1(s,y)){var T=x.memoizedProps;if(f=f.compare,f=f!==null?f:hu,f(T,h)&&s.ref===l.ref)return Fa(s,l,y)}return l.flags|=1,s=Pa(x,h),s.ref=l.ref,s.return=l,l.child=s}function H_(s,l,f,h,y){if(s!==null){var x=s.memoizedProps;if(hu(x,h)&&s.ref===l.ref)if(En=!1,l.pendingProps=h=x,M1(s,y))(s.flags&131072)!==0&&(En=!0);else return l.lanes=s.lanes,Fa(s,l,y)}return C1(s,l,f,h,y)}function G_(s,l,f,h){var y=h.children,x=s!==null?s.memoizedState:null;if(s===null&&l.stateNode===null&&(l.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),h.mode==="hidden"){if((l.flags&128)!==0){if(x=x!==null?x.baseLanes|f:f,s!==null){for(h=l.child=s.child,y=0;h!==null;)y=y|h.lanes|h.childLanes,h=h.sibling;h=y&~x}else h=0,l.child=null;return q_(s,l,x,f,h)}if((f&536870912)!==0)l.memoizedState={baseLanes:0,cachePool:null},s!==null&&Nd(l,x!==null?x.cachePool:null),x!==null?X2(l,x):n1(),Y2(l);else return h=l.lanes=536870912,q_(s,l,x!==null?x.baseLanes|f:f,f,h)}else x!==null?(Nd(l,x.cachePool),X2(l,x),Ss(),l.memoizedState=null):(s!==null&&Nd(l,null),n1(),Ss());return er(s,l,y,f),l.child}function Iu(s,l){return s!==null&&s.tag===22||l.stateNode!==null||(l.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.sibling}function q_(s,l,f,h,y){var x=Wp();return x=x===null?null:{parent:xn._currentValue,pool:x},l.memoizedState={baseLanes:f,cachePool:x},s!==null&&Nd(l,null),n1(),Y2(l),s!==null&&Ml(s,l,h,!0),l.childLanes=y,null}function qd(s,l){return l=Xd({mode:l.mode,children:l.children},s.mode),l.ref=s.ref,s.child=l,l.return=s,l}function $_(s,l,f){return Uo(l,s.child,null,f),s=qd(l,l.pendingProps),s.flags|=2,Gr(l),l.memoizedState=null,s}function HI(s,l,f){var h=l.pendingProps,y=(l.flags&128)!==0;if(l.flags&=-129,s===null){if(dt){if(h.mode==="hidden")return s=qd(l,h),l.lanes=536870912,Iu(null,s);if(i1(l),(s=qt)?(s=iw(s,li),s=s!==null&&s.data==="&"?s:null,s!==null&&(l.memoizedState={dehydrated:s,treeContext:vs!==null?{id:fa,overflow:da}:null,retryLane:536870912,hydrationErrors:null},f=N2(s),f.return=l,l.child=f,Zn=l,qt=null)):s=null,s===null)throw _s(l);return l.lanes=536870912,null}return qd(l,h)}var x=s.memoizedState;if(x!==null){var T=x.dehydrated;if(i1(l),y)if(l.flags&256)l.flags&=-257,l=$_(s,l,f);else if(l.memoizedState!==null)l.child=s.child,l.flags|=128,l=null;else throw Error(r(558));else if(En||Ml(s,l,f,!1),y=(f&s.childLanes)!==0,En||y){if(h=Ut,h!==null&&(T=Kc(h,f),T!==0&&T!==x.retryLane))throw x.retryLane=T,Mo(s,T),Dr(h,s,T),S1;nh(),l=$_(s,l,f)}else s=x.treeContext,qt=ui(T.nextSibling),Zn=l,dt=!0,ys=null,li=!1,s!==null&&D2(l,s),l=qd(l,h),l.flags|=4096;return l}return s=Pa(s.child,{mode:h.mode,children:h.children}),s.ref=l.ref,l.child=s,s.return=l,s}function $d(s,l){var f=l.ref;if(f===null)s!==null&&s.ref!==null&&(l.flags|=4194816);else{if(typeof f!="function"&&typeof f!="object")throw Error(r(284));(s===null||s.ref!==f)&&(l.flags|=4194816)}}function C1(s,l,f,h,y){return Lo(l),f=s1(s,l,f,h,void 0,y),h=o1(),s!==null&&!En?(l1(s,l,y),Fa(s,l,y)):(dt&&h&&Up(l),l.flags|=1,er(s,l,f,y),l.child)}function X_(s,l,f,h,y,x){return Lo(l),l.updateQueue=null,f=W2(l,h,f,y),K2(s),h=o1(),s!==null&&!En?(l1(s,l,x),Fa(s,l,x)):(dt&&h&&Up(l),l.flags|=1,er(s,l,f,x),l.child)}function Y_(s,l,f,h,y){if(Lo(l),l.stateNode===null){var x=Nl,T=f.contextType;typeof T=="object"&&T!==null&&(x=Jn(T)),x=new f(h,x),l.memoizedState=x.state!==null&&x.state!==void 0?x.state:null,x.updater=A1,l.stateNode=x,x._reactInternals=l,x=l.stateNode,x.props=h,x.state=l.memoizedState,x.refs={},Zp(l),T=f.contextType,x.context=typeof T=="object"&&T!==null?Jn(T):Nl,x.state=l.memoizedState,T=f.getDerivedStateFromProps,typeof T=="function"&&(E1(l,f,T,h),x.state=l.memoizedState),typeof f.getDerivedStateFromProps=="function"||typeof x.getSnapshotBeforeUpdate=="function"||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(T=x.state,typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount(),T!==x.state&&A1.enqueueReplaceState(x,x.state,null),Au(l,h,x,y),Eu(),x.state=l.memoizedState),typeof x.componentDidMount=="function"&&(l.flags|=4194308),h=!0}else if(s===null){x=l.stateNode;var B=l.memoizedProps,X=Ho(f,B);x.props=X;var te=x.context,ce=f.contextType;T=Nl,typeof ce=="object"&&ce!==null&&(T=Jn(ce));var he=f.getDerivedStateFromProps;ce=typeof he=="function"||typeof x.getSnapshotBeforeUpdate=="function",B=l.pendingProps!==B,ce||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(B||te!==T)&&P_(l,x,h,T),ws=!1;var re=l.memoizedState;x.state=re,Au(l,h,x,y),Eu(),te=l.memoizedState,B||re!==te||ws?(typeof he=="function"&&(E1(l,f,he,h),te=l.memoizedState),(X=ws||M_(l,f,X,h,re,te,T))?(ce||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount()),typeof x.componentDidMount=="function"&&(l.flags|=4194308)):(typeof x.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=h,l.memoizedState=te),x.props=h,x.state=te,x.context=T,h=X):(typeof x.componentDidMount=="function"&&(l.flags|=4194308),h=!1)}else{x=l.stateNode,Jp(s,l),T=l.memoizedProps,ce=Ho(f,T),x.props=ce,he=l.pendingProps,re=x.context,te=f.contextType,X=Nl,typeof te=="object"&&te!==null&&(X=Jn(te)),B=f.getDerivedStateFromProps,(te=typeof B=="function"||typeof x.getSnapshotBeforeUpdate=="function")||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(T!==he||re!==X)&&P_(l,x,h,X),ws=!1,re=l.memoizedState,x.state=re,Au(l,h,x,y),Eu();var se=l.memoizedState;T!==he||re!==se||ws||s!==null&&s.dependencies!==null&&Td(s.dependencies)?(typeof B=="function"&&(E1(l,f,B,h),se=l.memoizedState),(ce=ws||M_(l,f,ce,h,re,se,X)||s!==null&&s.dependencies!==null&&Td(s.dependencies))?(te||typeof x.UNSAFE_componentWillUpdate!="function"&&typeof x.componentWillUpdate!="function"||(typeof x.componentWillUpdate=="function"&&x.componentWillUpdate(h,se,X),typeof x.UNSAFE_componentWillUpdate=="function"&&x.UNSAFE_componentWillUpdate(h,se,X)),typeof x.componentDidUpdate=="function"&&(l.flags|=4),typeof x.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof x.componentDidUpdate!="function"||T===s.memoizedProps&&re===s.memoizedState||(l.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||T===s.memoizedProps&&re===s.memoizedState||(l.flags|=1024),l.memoizedProps=h,l.memoizedState=se),x.props=h,x.state=se,x.context=X,h=ce):(typeof x.componentDidUpdate!="function"||T===s.memoizedProps&&re===s.memoizedState||(l.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||T===s.memoizedProps&&re===s.memoizedState||(l.flags|=1024),h=!1)}return x=h,$d(s,l),h=(l.flags&128)!==0,x||h?(x=l.stateNode,f=h&&typeof f.getDerivedStateFromError!="function"?null:x.render(),l.flags|=1,s!==null&&h?(l.child=Uo(l,s.child,null,y),l.child=Uo(l,null,f,y)):er(s,l,f,y),l.memoizedState=x.state,s=l.child):s=Fa(s,l,y),s}function K_(s,l,f,h){return ko(),l.flags|=256,er(s,l,f,h),l.child}var T1={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function I1(s){return{baseLanes:s,cachePool:B2()}}function N1(s,l,f){return s=s!==null?s.childLanes&~f:0,l&&(s|=$r),s}function W_(s,l,f){var h=l.pendingProps,y=!1,x=(l.flags&128)!==0,T;if((T=x)||(T=s!==null&&s.memoizedState===null?!1:(dn.current&2)!==0),T&&(y=!0,l.flags&=-129),T=(l.flags&32)!==0,l.flags&=-33,s===null){if(dt){if(y?bs(l):Ss(),(s=qt)?(s=iw(s,li),s=s!==null&&s.data!=="&"?s:null,s!==null&&(l.memoizedState={dehydrated:s,treeContext:vs!==null?{id:fa,overflow:da}:null,retryLane:536870912,hydrationErrors:null},f=N2(s),f.return=l,l.child=f,Zn=l,qt=null)):s=null,s===null)throw _s(l);return fm(s)?l.lanes=32:l.lanes=536870912,null}var B=h.children;return h=h.fallback,y?(Ss(),y=l.mode,B=Xd({mode:"hidden",children:B},y),h=Po(h,y,f,null),B.return=l,h.return=l,B.sibling=h,l.child=B,h=l.child,h.memoizedState=I1(f),h.childLanes=N1(s,T,f),l.memoizedState=T1,Iu(null,h)):(bs(l),R1(l,B))}var X=s.memoizedState;if(X!==null&&(B=X.dehydrated,B!==null)){if(x)l.flags&256?(bs(l),l.flags&=-257,l=O1(s,l,f)):l.memoizedState!==null?(Ss(),l.child=s.child,l.flags|=128,l=null):(Ss(),B=h.fallback,y=l.mode,h=Xd({mode:"visible",children:h.children},y),B=Po(B,y,f,null),B.flags|=2,h.return=l,B.return=l,h.sibling=B,l.child=h,Uo(l,s.child,null,f),h=l.child,h.memoizedState=I1(f),h.childLanes=N1(s,T,f),l.memoizedState=T1,l=Iu(null,h));else if(bs(l),fm(B)){if(T=B.nextSibling&&B.nextSibling.dataset,T)var te=T.dgst;T=te,h=Error(r(419)),h.stack="",h.digest=T,gu({value:h,source:null,stack:null}),l=O1(s,l,f)}else if(En||Ml(s,l,f,!1),T=(f&s.childLanes)!==0,En||T){if(T=Ut,T!==null&&(h=Kc(T,f),h!==0&&h!==X.retryLane))throw X.retryLane=h,Mo(s,h),Dr(T,s,h),S1;um(B)||nh(),l=O1(s,l,f)}else um(B)?(l.flags|=192,l.child=s.child,l=null):(s=X.treeContext,qt=ui(B.nextSibling),Zn=l,dt=!0,ys=null,li=!1,s!==null&&D2(l,s),l=R1(l,h.children),l.flags|=4096);return l}return y?(Ss(),B=h.fallback,y=l.mode,X=s.child,te=X.sibling,h=Pa(X,{mode:"hidden",children:h.children}),h.subtreeFlags=X.subtreeFlags&65011712,te!==null?B=Pa(te,B):(B=Po(B,y,f,null),B.flags|=2),B.return=l,h.return=l,h.sibling=B,l.child=h,Iu(null,h),h=l.child,B=s.child.memoizedState,B===null?B=I1(f):(y=B.cachePool,y!==null?(X=xn._currentValue,y=y.parent!==X?{parent:X,pool:X}:y):y=B2(),B={baseLanes:B.baseLanes|f,cachePool:y}),h.memoizedState=B,h.childLanes=N1(s,T,f),l.memoizedState=T1,Iu(s.child,h)):(bs(l),f=s.child,s=f.sibling,f=Pa(f,{mode:"visible",children:h.children}),f.return=l,f.sibling=null,s!==null&&(T=l.deletions,T===null?(l.deletions=[s],l.flags|=16):T.push(s)),l.child=f,l.memoizedState=null,f)}function R1(s,l){return l=Xd({mode:"visible",children:l},s.mode),l.return=s,s.child=l}function Xd(s,l){return s=zr(22,s,null,l),s.lanes=0,s}function O1(s,l,f){return Uo(l,s.child,null,f),s=R1(l,l.pendingProps.children),s.flags|=2,l.memoizedState=null,s}function Q_(s,l,f){s.lanes|=l;var h=s.alternate;h!==null&&(h.lanes|=l),$p(s.return,l,f)}function D1(s,l,f,h,y,x){var T=s.memoizedState;T===null?s.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:h,tail:f,tailMode:y,treeForkCount:x}:(T.isBackwards=l,T.rendering=null,T.renderingStartTime=0,T.last=h,T.tail=f,T.tailMode=y,T.treeForkCount=x)}function Z_(s,l,f){var h=l.pendingProps,y=h.revealOrder,x=h.tail;h=h.children;var T=dn.current,B=(T&2)!==0;if(B?(T=T&1|2,l.flags|=128):T&=1,me(dn,T),er(s,l,h,f),h=dt?mu:0,!B&&s!==null&&(s.flags&128)!==0)e:for(s=l.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&Q_(s,f,l);else if(s.tag===19)Q_(s,f,l);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===l)break e;for(;s.sibling===null;){if(s.return===null||s.return===l)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}switch(y){case"forwards":for(f=l.child,y=null;f!==null;)s=f.alternate,s!==null&&kd(s)===null&&(y=f),f=f.sibling;f=y,f===null?(y=l.child,l.child=null):(y=f.sibling,f.sibling=null),D1(l,!1,y,f,x,h);break;case"backwards":case"unstable_legacy-backwards":for(f=null,y=l.child,l.child=null;y!==null;){if(s=y.alternate,s!==null&&kd(s)===null){l.child=y;break}s=y.sibling,y.sibling=f,f=y,y=s}D1(l,!0,f,null,x,h);break;case"together":D1(l,!1,null,null,void 0,h);break;default:l.memoizedState=null}return l.child}function Fa(s,l,f){if(s!==null&&(l.dependencies=s.dependencies),Is|=l.lanes,(f&l.childLanes)===0)if(s!==null){if(Ml(s,l,f,!1),(f&l.childLanes)===0)return null}else return null;if(s!==null&&l.child!==s.child)throw Error(r(153));if(l.child!==null){for(s=l.child,f=Pa(s,s.pendingProps),l.child=f,f.return=l;s.sibling!==null;)s=s.sibling,f=f.sibling=Pa(s,s.pendingProps),f.return=l;f.sibling=null}return l.child}function M1(s,l){return(s.lanes&l)!==0?!0:(s=s.dependencies,!!(s!==null&&Td(s)))}function GI(s,l,f){switch(l.tag){case 3:Ye(l,l.stateNode.containerInfo),xs(l,xn,s.memoizedState.cache),ko();break;case 27:case 5:zt(l);break;case 4:Ye(l,l.stateNode.containerInfo);break;case 10:xs(l,l.type,l.memoizedProps.value);break;case 31:if(l.memoizedState!==null)return l.flags|=128,i1(l),null;break;case 13:var h=l.memoizedState;if(h!==null)return h.dehydrated!==null?(bs(l),l.flags|=128,null):(f&l.child.childLanes)!==0?W_(s,l,f):(bs(l),s=Fa(s,l,f),s!==null?s.sibling:null);bs(l);break;case 19:var y=(s.flags&128)!==0;if(h=(f&l.childLanes)!==0,h||(Ml(s,l,f,!1),h=(f&l.childLanes)!==0),y){if(h)return Z_(s,l,f);l.flags|=128}if(y=l.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),me(dn,dn.current),h)break;return null;case 22:return l.lanes=0,G_(s,l,f,l.pendingProps);case 24:xs(l,xn,s.memoizedState.cache)}return Fa(s,l,f)}function J_(s,l,f){if(s!==null)if(s.memoizedProps!==l.pendingProps)En=!0;else{if(!M1(s,f)&&(l.flags&128)===0)return En=!1,GI(s,l,f);En=(s.flags&131072)!==0}else En=!1,dt&&(l.flags&1048576)!==0&&O2(l,mu,l.index);switch(l.lanes=0,l.tag){case 16:e:{var h=l.pendingProps;if(s=Vo(l.elementType),l.type=s,typeof s=="function")Bp(s)?(h=Ho(s,h),l.tag=1,l=Y_(null,l,s,h,f)):(l.tag=0,l=C1(null,l,s,h,f));else{if(s!=null){var y=s.$$typeof;if(y===z){l.tag=11,l=U_(null,l,s,h,f);break e}else if(y===M){l.tag=14,l=z_(null,l,s,h,f);break e}}throw l=W(s)||s,Error(r(306,l,""))}}return l;case 0:return C1(s,l,l.type,l.pendingProps,f);case 1:return h=l.type,y=Ho(h,l.pendingProps),Y_(s,l,h,y,f);case 3:e:{if(Ye(l,l.stateNode.containerInfo),s===null)throw Error(r(387));h=l.pendingProps;var x=l.memoizedState;y=x.element,Jp(s,l),Au(l,h,null,f);var T=l.memoizedState;if(h=T.cache,xs(l,xn,h),h!==x.cache&&Xp(l,[xn],f,!0),Eu(),h=T.element,x.isDehydrated)if(x={element:h,isDehydrated:!1,cache:T.cache},l.updateQueue.baseState=x,l.memoizedState=x,l.flags&256){l=K_(s,l,h,f);break e}else if(h!==y){y=ai(Error(r(424)),l),gu(y),l=K_(s,l,h,f);break e}else{switch(s=l.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(qt=ui(s.firstChild),Zn=l,dt=!0,ys=null,li=!0,f=G2(l,null,h,f),l.child=f;f;)f.flags=f.flags&-3|4096,f=f.sibling}else{if(ko(),h===y){l=Fa(s,l,f);break e}er(s,l,h,f)}l=l.child}return l;case 26:return $d(s,l),s===null?(f=uw(l.type,null,l.pendingProps,null))?l.memoizedState=f:dt||(f=l.type,s=l.pendingProps,h=ch(ye.current).createElement(f),h[vn]=l,h[Vn]=s,tr(h,f,s),yn(h),l.stateNode=h):l.memoizedState=uw(l.type,s.memoizedProps,l.pendingProps,s.memoizedState),null;case 27:return zt(l),s===null&&dt&&(h=l.stateNode=ow(l.type,l.pendingProps,ye.current),Zn=l,li=!0,y=qt,Ms(l.type)?(dm=y,qt=ui(h.firstChild)):qt=y),er(s,l,l.pendingProps.children,f),$d(s,l),s===null&&(l.flags|=4194304),l.child;case 5:return s===null&&dt&&((y=h=qt)&&(h=x4(h,l.type,l.pendingProps,li),h!==null?(l.stateNode=h,Zn=l,qt=ui(h.firstChild),li=!1,y=!0):y=!1),y||_s(l)),zt(l),y=l.type,x=l.pendingProps,T=s!==null?s.memoizedProps:null,h=x.children,om(y,x)?h=null:T!==null&&om(y,T)&&(l.flags|=32),l.memoizedState!==null&&(y=s1(s,l,kI,null,null,f),Hu._currentValue=y),$d(s,l),er(s,l,h,f),l.child;case 6:return s===null&&dt&&((s=f=qt)&&(f=w4(f,l.pendingProps,li),f!==null?(l.stateNode=f,Zn=l,qt=null,s=!0):s=!1),s||_s(l)),null;case 13:return W_(s,l,f);case 4:return Ye(l,l.stateNode.containerInfo),h=l.pendingProps,s===null?l.child=Uo(l,null,h,f):er(s,l,h,f),l.child;case 11:return U_(s,l,l.type,l.pendingProps,f);case 7:return er(s,l,l.pendingProps,f),l.child;case 8:return er(s,l,l.pendingProps.children,f),l.child;case 12:return er(s,l,l.pendingProps.children,f),l.child;case 10:return h=l.pendingProps,xs(l,l.type,h.value),er(s,l,h.children,f),l.child;case 9:return y=l.type._context,h=l.pendingProps.children,Lo(l),y=Jn(y),h=h(y),l.flags|=1,er(s,l,h,f),l.child;case 14:return z_(s,l,l.type,l.pendingProps,f);case 15:return H_(s,l,l.type,l.pendingProps,f);case 19:return Z_(s,l,f);case 31:return HI(s,l,f);case 22:return G_(s,l,f,l.pendingProps);case 24:return Lo(l),h=Jn(xn),s===null?(y=Wp(),y===null&&(y=Ut,x=Yp(),y.pooledCache=x,x.refCount++,x!==null&&(y.pooledCacheLanes|=f),y=x),l.memoizedState={parent:h,cache:y},Zp(l),xs(l,xn,y)):((s.lanes&f)!==0&&(Jp(s,l),Au(l,null,null,f),Eu()),y=s.memoizedState,x=l.memoizedState,y.parent!==h?(y={parent:h,cache:h},l.memoizedState=y,l.lanes===0&&(l.memoizedState=l.updateQueue.baseState=y),xs(l,xn,h)):(h=x.cache,xs(l,xn,h),h!==y.cache&&Xp(l,[xn],f,!0))),er(s,l,l.pendingProps.children,f),l.child;case 29:throw l.pendingProps}throw Error(r(156,l.tag))}function Ua(s){s.flags|=4}function P1(s,l,f,h,y){if((l=(s.mode&32)!==0)&&(l=!1),l){if(s.flags|=16777216,(y&335544128)===y)if(s.stateNode.complete)s.flags|=8192;else if(Cx())s.flags|=8192;else throw Fo=Od,Qp}else s.flags&=-16777217}function ex(s,l){if(l.type!=="stylesheet"||(l.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!mw(l))if(Cx())s.flags|=8192;else throw Fo=Od,Qp}function Yd(s,l){l!==null&&(s.flags|=4),s.flags&16384&&(l=s.tag!==22?ed():536870912,s.lanes|=l,ql|=l)}function Nu(s,l){if(!dt)switch(s.tailMode){case"hidden":l=s.tail;for(var f=null;l!==null;)l.alternate!==null&&(f=l),l=l.sibling;f===null?s.tail=null:f.sibling=null;break;case"collapsed":f=s.tail;for(var h=null;f!==null;)f.alternate!==null&&(h=f),f=f.sibling;h===null?l||s.tail===null?s.tail=null:s.tail.sibling=null:h.sibling=null}}function $t(s){var l=s.alternate!==null&&s.alternate.child===s.child,f=0,h=0;if(l)for(var y=s.child;y!==null;)f|=y.lanes|y.childLanes,h|=y.subtreeFlags&65011712,h|=y.flags&65011712,y.return=s,y=y.sibling;else for(y=s.child;y!==null;)f|=y.lanes|y.childLanes,h|=y.subtreeFlags,h|=y.flags,y.return=s,y=y.sibling;return s.subtreeFlags|=h,s.childLanes=f,l}function qI(s,l,f){var h=l.pendingProps;switch(zp(l),l.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return $t(l),null;case 1:return $t(l),null;case 3:return f=l.stateNode,h=null,s!==null&&(h=s.memoizedState.cache),l.memoizedState.cache!==h&&(l.flags|=2048),La(xn),Re(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(s===null||s.child===null)&&(Dl(l)?Ua(l):s===null||s.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,Gp())),$t(l),null;case 26:var y=l.type,x=l.memoizedState;return s===null?(Ua(l),x!==null?($t(l),ex(l,x)):($t(l),P1(l,y,null,h,f))):x?x!==s.memoizedState?(Ua(l),$t(l),ex(l,x)):($t(l),l.flags&=-16777217):(s=s.memoizedProps,s!==h&&Ua(l),$t(l),P1(l,y,s,h,f)),null;case 27:if(Ze(l),f=ye.current,y=l.type,s!==null&&l.stateNode!=null)s.memoizedProps!==h&&Ua(l);else{if(!h){if(l.stateNode===null)throw Error(r(166));return $t(l),null}s=we.current,Dl(l)?M2(l):(s=ow(y,h,f),l.stateNode=s,Ua(l))}return $t(l),null;case 5:if(Ze(l),y=l.type,s!==null&&l.stateNode!=null)s.memoizedProps!==h&&Ua(l);else{if(!h){if(l.stateNode===null)throw Error(r(166));return $t(l),null}if(x=we.current,Dl(l))M2(l);else{var T=ch(ye.current);switch(x){case 1:x=T.createElementNS("http://www.w3.org/2000/svg",y);break;case 2:x=T.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;default:switch(y){case"svg":x=T.createElementNS("http://www.w3.org/2000/svg",y);break;case"math":x=T.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;case"script":x=T.createElement("div"),x.innerHTML="<script><\/script>",x=x.removeChild(x.firstChild);break;case"select":x=typeof h.is=="string"?T.createElement("select",{is:h.is}):T.createElement("select"),h.multiple?x.multiple=!0:h.size&&(x.size=h.size);break;default:x=typeof h.is=="string"?T.createElement(y,{is:h.is}):T.createElement(y)}}x[vn]=l,x[Vn]=h;e:for(T=l.child;T!==null;){if(T.tag===5||T.tag===6)x.appendChild(T.stateNode);else if(T.tag!==4&&T.tag!==27&&T.child!==null){T.child.return=T,T=T.child;continue}if(T===l)break e;for(;T.sibling===null;){if(T.return===null||T.return===l)break e;T=T.return}T.sibling.return=T.return,T=T.sibling}l.stateNode=x;e:switch(tr(x,y,h),y){case"button":case"input":case"select":case"textarea":h=!!h.autoFocus;break e;case"img":h=!0;break e;default:h=!1}h&&Ua(l)}}return $t(l),P1(l,l.type,s===null?null:s.memoizedProps,l.pendingProps,f),null;case 6:if(s&&l.stateNode!=null)s.memoizedProps!==h&&Ua(l);else{if(typeof h!="string"&&l.stateNode===null)throw Error(r(166));if(s=ye.current,Dl(l)){if(s=l.stateNode,f=l.memoizedProps,h=null,y=Zn,y!==null)switch(y.tag){case 27:case 5:h=y.memoizedProps}s[vn]=l,s=!!(s.nodeValue===f||h!==null&&h.suppressHydrationWarning===!0||Wx(s.nodeValue,f)),s||_s(l,!0)}else s=ch(s).createTextNode(h),s[vn]=l,l.stateNode=s}return $t(l),null;case 31:if(f=l.memoizedState,s===null||s.memoizedState!==null){if(h=Dl(l),f!==null){if(s===null){if(!h)throw Error(r(318));if(s=l.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(557));s[vn]=l}else ko(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;$t(l),s=!1}else f=Gp(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=f),s=!0;if(!s)return l.flags&256?(Gr(l),l):(Gr(l),null);if((l.flags&128)!==0)throw Error(r(558))}return $t(l),null;case 13:if(h=l.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(y=Dl(l),h!==null&&h.dehydrated!==null){if(s===null){if(!y)throw Error(r(318));if(y=l.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(r(317));y[vn]=l}else ko(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;$t(l),y=!1}else y=Gp(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=y),y=!0;if(!y)return l.flags&256?(Gr(l),l):(Gr(l),null)}return Gr(l),(l.flags&128)!==0?(l.lanes=f,l):(f=h!==null,s=s!==null&&s.memoizedState!==null,f&&(h=l.child,y=null,h.alternate!==null&&h.alternate.memoizedState!==null&&h.alternate.memoizedState.cachePool!==null&&(y=h.alternate.memoizedState.cachePool.pool),x=null,h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(x=h.memoizedState.cachePool.pool),x!==y&&(h.flags|=2048)),f!==s&&f&&(l.child.flags|=8192),Yd(l,l.updateQueue),$t(l),null);case 4:return Re(),s===null&&nm(l.stateNode.containerInfo),$t(l),null;case 10:return La(l.type),$t(l),null;case 19:if(ne(dn),h=l.memoizedState,h===null)return $t(l),null;if(y=(l.flags&128)!==0,x=h.rendering,x===null)if(y)Nu(h,!1);else{if(on!==0||s!==null&&(s.flags&128)!==0)for(s=l.child;s!==null;){if(x=kd(s),x!==null){for(l.flags|=128,Nu(h,!1),s=x.updateQueue,l.updateQueue=s,Yd(l,s),l.subtreeFlags=0,s=f,f=l.child;f!==null;)I2(f,s),f=f.sibling;return me(dn,dn.current&1|2),dt&&ka(l,h.treeForkCount),l.child}s=s.sibling}h.tail!==null&&tn()>Jd&&(l.flags|=128,y=!0,Nu(h,!1),l.lanes=4194304)}else{if(!y)if(s=kd(x),s!==null){if(l.flags|=128,y=!0,s=s.updateQueue,l.updateQueue=s,Yd(l,s),Nu(h,!0),h.tail===null&&h.tailMode==="hidden"&&!x.alternate&&!dt)return $t(l),null}else 2*tn()-h.renderingStartTime>Jd&&f!==536870912&&(l.flags|=128,y=!0,Nu(h,!1),l.lanes=4194304);h.isBackwards?(x.sibling=l.child,l.child=x):(s=h.last,s!==null?s.sibling=x:l.child=x,h.last=x)}return h.tail!==null?(s=h.tail,h.rendering=s,h.tail=s.sibling,h.renderingStartTime=tn(),s.sibling=null,f=dn.current,me(dn,y?f&1|2:f&1),dt&&ka(l,h.treeForkCount),s):($t(l),null);case 22:case 23:return Gr(l),r1(),h=l.memoizedState!==null,s!==null?s.memoizedState!==null!==h&&(l.flags|=8192):h&&(l.flags|=8192),h?(f&536870912)!==0&&(l.flags&128)===0&&($t(l),l.subtreeFlags&6&&(l.flags|=8192)):$t(l),f=l.updateQueue,f!==null&&Yd(l,f.retryQueue),f=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(f=s.memoizedState.cachePool.pool),h=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(h=l.memoizedState.cachePool.pool),h!==f&&(l.flags|=2048),s!==null&&ne(Bo),null;case 24:return f=null,s!==null&&(f=s.memoizedState.cache),l.memoizedState.cache!==f&&(l.flags|=2048),La(xn),$t(l),null;case 25:return null;case 30:return null}throw Error(r(156,l.tag))}function $I(s,l){switch(zp(l),l.tag){case 1:return s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 3:return La(xn),Re(),s=l.flags,(s&65536)!==0&&(s&128)===0?(l.flags=s&-65537|128,l):null;case 26:case 27:case 5:return Ze(l),null;case 31:if(l.memoizedState!==null){if(Gr(l),l.alternate===null)throw Error(r(340));ko()}return s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 13:if(Gr(l),s=l.memoizedState,s!==null&&s.dehydrated!==null){if(l.alternate===null)throw Error(r(340));ko()}return s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 19:return ne(dn),null;case 4:return Re(),null;case 10:return La(l.type),null;case 22:case 23:return Gr(l),r1(),s!==null&&ne(Bo),s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 24:return La(xn),null;case 25:return null;default:return null}}function tx(s,l){switch(zp(l),l.tag){case 3:La(xn),Re();break;case 26:case 27:case 5:Ze(l);break;case 4:Re();break;case 31:l.memoizedState!==null&&Gr(l);break;case 13:Gr(l);break;case 19:ne(dn);break;case 10:La(l.type);break;case 22:case 23:Gr(l),r1(),s!==null&&ne(Bo);break;case 24:La(xn)}}function Ru(s,l){try{var f=l.updateQueue,h=f!==null?f.lastEffect:null;if(h!==null){var y=h.next;f=y;do{if((f.tag&s)===s){h=void 0;var x=f.create,T=f.inst;h=x(),T.destroy=h}f=f.next}while(f!==y)}}catch(B){Rt(l,l.return,B)}}function Cs(s,l,f){try{var h=l.updateQueue,y=h!==null?h.lastEffect:null;if(y!==null){var x=y.next;h=x;do{if((h.tag&s)===s){var T=h.inst,B=T.destroy;if(B!==void 0){T.destroy=void 0,y=l;var X=f,te=B;try{te()}catch(ce){Rt(y,X,ce)}}}h=h.next}while(h!==x)}}catch(ce){Rt(l,l.return,ce)}}function nx(s){var l=s.updateQueue;if(l!==null){var f=s.stateNode;try{$2(l,f)}catch(h){Rt(s,s.return,h)}}}function rx(s,l,f){f.props=Ho(s.type,s.memoizedProps),f.state=s.memoizedState;try{f.componentWillUnmount()}catch(h){Rt(s,l,h)}}function Ou(s,l){try{var f=s.ref;if(f!==null){switch(s.tag){case 26:case 27:case 5:var h=s.stateNode;break;case 30:h=s.stateNode;break;default:h=s.stateNode}typeof f=="function"?s.refCleanup=f(h):f.current=h}}catch(y){Rt(s,l,y)}}function ha(s,l){var f=s.ref,h=s.refCleanup;if(f!==null)if(typeof h=="function")try{h()}catch(y){Rt(s,l,y)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof f=="function")try{f(null)}catch(y){Rt(s,l,y)}else f.current=null}function ix(s){var l=s.type,f=s.memoizedProps,h=s.stateNode;try{e:switch(l){case"button":case"input":case"select":case"textarea":f.autoFocus&&h.focus();break e;case"img":f.src?h.src=f.src:f.srcSet&&(h.srcset=f.srcSet)}}catch(y){Rt(s,s.return,y)}}function k1(s,l,f){try{var h=s.stateNode;p4(h,s.type,f,l),h[Vn]=l}catch(y){Rt(s,s.return,y)}}function ax(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&Ms(s.type)||s.tag===4}function j1(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||ax(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&Ms(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function L1(s,l,f){var h=s.tag;if(h===5||h===6)s=s.stateNode,l?(f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f).insertBefore(s,l):(l=f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f,l.appendChild(s),f=f._reactRootContainer,f!=null||l.onclick!==null||(l.onclick=Ci));else if(h!==4&&(h===27&&Ms(s.type)&&(f=s.stateNode,l=null),s=s.child,s!==null))for(L1(s,l,f),s=s.sibling;s!==null;)L1(s,l,f),s=s.sibling}function Kd(s,l,f){var h=s.tag;if(h===5||h===6)s=s.stateNode,l?f.insertBefore(s,l):f.appendChild(s);else if(h!==4&&(h===27&&Ms(s.type)&&(f=s.stateNode),s=s.child,s!==null))for(Kd(s,l,f),s=s.sibling;s!==null;)Kd(s,l,f),s=s.sibling}function sx(s){var l=s.stateNode,f=s.memoizedProps;try{for(var h=s.type,y=l.attributes;y.length;)l.removeAttributeNode(y[0]);tr(l,h,f),l[vn]=s,l[Vn]=f}catch(x){Rt(s,s.return,x)}}var za=!1,An=!1,B1=!1,ox=typeof WeakSet=="function"?WeakSet:Set,Un=null;function XI(s,l){if(s=s.containerInfo,am=gh,s=_2(s),Op(s)){if("selectionStart"in s)var f={start:s.selectionStart,end:s.selectionEnd};else e:{f=(f=s.ownerDocument)&&f.defaultView||window;var h=f.getSelection&&f.getSelection();if(h&&h.rangeCount!==0){f=h.anchorNode;var y=h.anchorOffset,x=h.focusNode;h=h.focusOffset;try{f.nodeType,x.nodeType}catch{f=null;break e}var T=0,B=-1,X=-1,te=0,ce=0,he=s,re=null;t:for(;;){for(var se;he!==f||y!==0&&he.nodeType!==3||(B=T+y),he!==x||h!==0&&he.nodeType!==3||(X=T+h),he.nodeType===3&&(T+=he.nodeValue.length),(se=he.firstChild)!==null;)re=he,he=se;for(;;){if(he===s)break t;if(re===f&&++te===y&&(B=T),re===x&&++ce===h&&(X=T),(se=he.nextSibling)!==null)break;he=re,re=he.parentNode}he=se}f=B===-1||X===-1?null:{start:B,end:X}}else f=null}f=f||{start:0,end:0}}else f=null;for(sm={focusedElem:s,selectionRange:f},gh=!1,Un=l;Un!==null;)if(l=Un,s=l.child,(l.subtreeFlags&1028)!==0&&s!==null)s.return=l,Un=s;else for(;Un!==null;){switch(l=Un,x=l.alternate,s=l.flags,l.tag){case 0:if((s&4)!==0&&(s=l.updateQueue,s=s!==null?s.events:null,s!==null))for(f=0;f<s.length;f++)y=s[f],y.ref.impl=y.nextImpl;break;case 11:case 15:break;case 1:if((s&1024)!==0&&x!==null){s=void 0,f=l,y=x.memoizedProps,x=x.memoizedState,h=f.stateNode;try{var Ie=Ho(f.type,y);s=h.getSnapshotBeforeUpdate(Ie,x),h.__reactInternalSnapshotBeforeUpdate=s}catch(Ue){Rt(f,f.return,Ue)}}break;case 3:if((s&1024)!==0){if(s=l.stateNode.containerInfo,f=s.nodeType,f===9)cm(s);else if(f===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":cm(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(r(163))}if(s=l.sibling,s!==null){s.return=l.return,Un=s;break}Un=l.return}}function lx(s,l,f){var h=f.flags;switch(f.tag){case 0:case 11:case 15:Ga(s,f),h&4&&Ru(5,f);break;case 1:if(Ga(s,f),h&4)if(s=f.stateNode,l===null)try{s.componentDidMount()}catch(T){Rt(f,f.return,T)}else{var y=Ho(f.type,l.memoizedProps);l=l.memoizedState;try{s.componentDidUpdate(y,l,s.__reactInternalSnapshotBeforeUpdate)}catch(T){Rt(f,f.return,T)}}h&64&&nx(f),h&512&&Ou(f,f.return);break;case 3:if(Ga(s,f),h&64&&(s=f.updateQueue,s!==null)){if(l=null,f.child!==null)switch(f.child.tag){case 27:case 5:l=f.child.stateNode;break;case 1:l=f.child.stateNode}try{$2(s,l)}catch(T){Rt(f,f.return,T)}}break;case 27:l===null&&h&4&&sx(f);case 26:case 5:Ga(s,f),l===null&&h&4&&ix(f),h&512&&Ou(f,f.return);break;case 12:Ga(s,f);break;case 31:Ga(s,f),h&4&&fx(s,f);break;case 13:Ga(s,f),h&4&&dx(s,f),h&64&&(s=f.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(f=n4.bind(null,f),E4(s,f))));break;case 22:if(h=f.memoizedState!==null||za,!h){l=l!==null&&l.memoizedState!==null||An,y=za;var x=An;za=h,(An=l)&&!x?qa(s,f,(f.subtreeFlags&8772)!==0):Ga(s,f),za=y,An=x}break;case 30:break;default:Ga(s,f)}}function cx(s){var l=s.alternate;l!==null&&(s.alternate=null,cx(l)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(l=s.stateNode,l!==null&&ml(l)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var Qt=null,Ir=!1;function Ha(s,l,f){for(f=f.child;f!==null;)ux(s,l,f),f=f.sibling}function ux(s,l,f){if(Je&&typeof Je.onCommitFiberUnmount=="function")try{Je.onCommitFiberUnmount(ze,f)}catch{}switch(f.tag){case 26:An||ha(f,l),Ha(s,l,f),f.memoizedState?f.memoizedState.count--:f.stateNode&&(f=f.stateNode,f.parentNode.removeChild(f));break;case 27:An||ha(f,l);var h=Qt,y=Ir;Ms(f.type)&&(Qt=f.stateNode,Ir=!1),Ha(s,l,f),Fu(f.stateNode),Qt=h,Ir=y;break;case 5:An||ha(f,l);case 6:if(h=Qt,y=Ir,Qt=null,Ha(s,l,f),Qt=h,Ir=y,Qt!==null)if(Ir)try{(Qt.nodeType===9?Qt.body:Qt.nodeName==="HTML"?Qt.ownerDocument.body:Qt).removeChild(f.stateNode)}catch(x){Rt(f,l,x)}else try{Qt.removeChild(f.stateNode)}catch(x){Rt(f,l,x)}break;case 18:Qt!==null&&(Ir?(s=Qt,nw(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,f.stateNode),Jl(s)):nw(Qt,f.stateNode));break;case 4:h=Qt,y=Ir,Qt=f.stateNode.containerInfo,Ir=!0,Ha(s,l,f),Qt=h,Ir=y;break;case 0:case 11:case 14:case 15:Cs(2,f,l),An||Cs(4,f,l),Ha(s,l,f);break;case 1:An||(ha(f,l),h=f.stateNode,typeof h.componentWillUnmount=="function"&&rx(f,l,h)),Ha(s,l,f);break;case 21:Ha(s,l,f);break;case 22:An=(h=An)||f.memoizedState!==null,Ha(s,l,f),An=h;break;default:Ha(s,l,f)}}function fx(s,l){if(l.memoizedState===null&&(s=l.alternate,s!==null&&(s=s.memoizedState,s!==null))){s=s.dehydrated;try{Jl(s)}catch(f){Rt(l,l.return,f)}}}function dx(s,l){if(l.memoizedState===null&&(s=l.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{Jl(s)}catch(f){Rt(l,l.return,f)}}function YI(s){switch(s.tag){case 31:case 13:case 19:var l=s.stateNode;return l===null&&(l=s.stateNode=new ox),l;case 22:return s=s.stateNode,l=s._retryCache,l===null&&(l=s._retryCache=new ox),l;default:throw Error(r(435,s.tag))}}function Wd(s,l){var f=YI(s);l.forEach(function(h){if(!f.has(h)){f.add(h);var y=r4.bind(null,s,h);h.then(y,y)}})}function Nr(s,l){var f=l.deletions;if(f!==null)for(var h=0;h<f.length;h++){var y=f[h],x=s,T=l,B=T;e:for(;B!==null;){switch(B.tag){case 27:if(Ms(B.type)){Qt=B.stateNode,Ir=!1;break e}break;case 5:Qt=B.stateNode,Ir=!1;break e;case 3:case 4:Qt=B.stateNode.containerInfo,Ir=!0;break e}B=B.return}if(Qt===null)throw Error(r(160));ux(x,T,y),Qt=null,Ir=!1,x=y.alternate,x!==null&&(x.return=null),y.return=null}if(l.subtreeFlags&13886)for(l=l.child;l!==null;)hx(l,s),l=l.sibling}var Di=null;function hx(s,l){var f=s.alternate,h=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:Nr(l,s),Rr(s),h&4&&(Cs(3,s,s.return),Ru(3,s),Cs(5,s,s.return));break;case 1:Nr(l,s),Rr(s),h&512&&(An||f===null||ha(f,f.return)),h&64&&za&&(s=s.updateQueue,s!==null&&(h=s.callbacks,h!==null&&(f=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=f===null?h:f.concat(h))));break;case 26:var y=Di;if(Nr(l,s),Rr(s),h&512&&(An||f===null||ha(f,f.return)),h&4){var x=f!==null?f.memoizedState:null;if(h=s.memoizedState,f===null)if(h===null)if(s.stateNode===null){e:{h=s.type,f=s.memoizedProps,y=y.ownerDocument||y;t:switch(h){case"title":x=y.getElementsByTagName("title")[0],(!x||x[Ji]||x[vn]||x.namespaceURI==="http://www.w3.org/2000/svg"||x.hasAttribute("itemprop"))&&(x=y.createElement(h),y.head.insertBefore(x,y.querySelector("head > title"))),tr(x,h,f),x[vn]=s,yn(x),h=x;break e;case"link":var T=hw("link","href",y).get(h+(f.href||""));if(T){for(var B=0;B<T.length;B++)if(x=T[B],x.getAttribute("href")===(f.href==null||f.href===""?null:f.href)&&x.getAttribute("rel")===(f.rel==null?null:f.rel)&&x.getAttribute("title")===(f.title==null?null:f.title)&&x.getAttribute("crossorigin")===(f.crossOrigin==null?null:f.crossOrigin)){T.splice(B,1);break t}}x=y.createElement(h),tr(x,h,f),y.head.appendChild(x);break;case"meta":if(T=hw("meta","content",y).get(h+(f.content||""))){for(B=0;B<T.length;B++)if(x=T[B],x.getAttribute("content")===(f.content==null?null:""+f.content)&&x.getAttribute("name")===(f.name==null?null:f.name)&&x.getAttribute("property")===(f.property==null?null:f.property)&&x.getAttribute("http-equiv")===(f.httpEquiv==null?null:f.httpEquiv)&&x.getAttribute("charset")===(f.charSet==null?null:f.charSet)){T.splice(B,1);break t}}x=y.createElement(h),tr(x,h,f),y.head.appendChild(x);break;default:throw Error(r(468,h))}x[vn]=s,yn(x),h=x}s.stateNode=h}else pw(y,s.type,s.stateNode);else s.stateNode=dw(y,h,s.memoizedProps);else x!==h?(x===null?f.stateNode!==null&&(f=f.stateNode,f.parentNode.removeChild(f)):x.count--,h===null?pw(y,s.type,s.stateNode):dw(y,h,s.memoizedProps)):h===null&&s.stateNode!==null&&k1(s,s.memoizedProps,f.memoizedProps)}break;case 27:Nr(l,s),Rr(s),h&512&&(An||f===null||ha(f,f.return)),f!==null&&h&4&&k1(s,s.memoizedProps,f.memoizedProps);break;case 5:if(Nr(l,s),Rr(s),h&512&&(An||f===null||ha(f,f.return)),s.flags&32){y=s.stateNode;try{Tr(y,"")}catch(Ie){Rt(s,s.return,Ie)}}h&4&&s.stateNode!=null&&(y=s.memoizedProps,k1(s,y,f!==null?f.memoizedProps:y)),h&1024&&(B1=!0);break;case 6:if(Nr(l,s),Rr(s),h&4){if(s.stateNode===null)throw Error(r(162));h=s.memoizedProps,f=s.stateNode;try{f.nodeValue=h}catch(Ie){Rt(s,s.return,Ie)}}break;case 3:if(dh=null,y=Di,Di=uh(l.containerInfo),Nr(l,s),Di=y,Rr(s),h&4&&f!==null&&f.memoizedState.isDehydrated)try{Jl(l.containerInfo)}catch(Ie){Rt(s,s.return,Ie)}B1&&(B1=!1,px(s));break;case 4:h=Di,Di=uh(s.stateNode.containerInfo),Nr(l,s),Rr(s),Di=h;break;case 12:Nr(l,s),Rr(s);break;case 31:Nr(l,s),Rr(s),h&4&&(h=s.updateQueue,h!==null&&(s.updateQueue=null,Wd(s,h)));break;case 13:Nr(l,s),Rr(s),s.child.flags&8192&&s.memoizedState!==null!=(f!==null&&f.memoizedState!==null)&&(Zd=tn()),h&4&&(h=s.updateQueue,h!==null&&(s.updateQueue=null,Wd(s,h)));break;case 22:y=s.memoizedState!==null;var X=f!==null&&f.memoizedState!==null,te=za,ce=An;if(za=te||y,An=ce||X,Nr(l,s),An=ce,za=te,Rr(s),h&8192)e:for(l=s.stateNode,l._visibility=y?l._visibility&-2:l._visibility|1,y&&(f===null||X||za||An||Go(s)),f=null,l=s;;){if(l.tag===5||l.tag===26){if(f===null){X=f=l;try{if(x=X.stateNode,y)T=x.style,typeof T.setProperty=="function"?T.setProperty("display","none","important"):T.display="none";else{B=X.stateNode;var he=X.memoizedProps.style,re=he!=null&&he.hasOwnProperty("display")?he.display:null;B.style.display=re==null||typeof re=="boolean"?"":(""+re).trim()}}catch(Ie){Rt(X,X.return,Ie)}}}else if(l.tag===6){if(f===null){X=l;try{X.stateNode.nodeValue=y?"":X.memoizedProps}catch(Ie){Rt(X,X.return,Ie)}}}else if(l.tag===18){if(f===null){X=l;try{var se=X.stateNode;y?rw(se,!0):rw(X.stateNode,!1)}catch(Ie){Rt(X,X.return,Ie)}}}else if((l.tag!==22&&l.tag!==23||l.memoizedState===null||l===s)&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===s)break e;for(;l.sibling===null;){if(l.return===null||l.return===s)break e;f===l&&(f=null),l=l.return}f===l&&(f=null),l.sibling.return=l.return,l=l.sibling}h&4&&(h=s.updateQueue,h!==null&&(f=h.retryQueue,f!==null&&(h.retryQueue=null,Wd(s,f))));break;case 19:Nr(l,s),Rr(s),h&4&&(h=s.updateQueue,h!==null&&(s.updateQueue=null,Wd(s,h)));break;case 30:break;case 21:break;default:Nr(l,s),Rr(s)}}function Rr(s){var l=s.flags;if(l&2){try{for(var f,h=s.return;h!==null;){if(ax(h)){f=h;break}h=h.return}if(f==null)throw Error(r(160));switch(f.tag){case 27:var y=f.stateNode,x=j1(s);Kd(s,x,y);break;case 5:var T=f.stateNode;f.flags&32&&(Tr(T,""),f.flags&=-33);var B=j1(s);Kd(s,B,T);break;case 3:case 4:var X=f.stateNode.containerInfo,te=j1(s);L1(s,te,X);break;default:throw Error(r(161))}}catch(ce){Rt(s,s.return,ce)}s.flags&=-3}l&4096&&(s.flags&=-4097)}function px(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var l=s;px(l),l.tag===5&&l.flags&1024&&l.stateNode.reset(),s=s.sibling}}function Ga(s,l){if(l.subtreeFlags&8772)for(l=l.child;l!==null;)lx(s,l.alternate,l),l=l.sibling}function Go(s){for(s=s.child;s!==null;){var l=s;switch(l.tag){case 0:case 11:case 14:case 15:Cs(4,l,l.return),Go(l);break;case 1:ha(l,l.return);var f=l.stateNode;typeof f.componentWillUnmount=="function"&&rx(l,l.return,f),Go(l);break;case 27:Fu(l.stateNode);case 26:case 5:ha(l,l.return),Go(l);break;case 22:l.memoizedState===null&&Go(l);break;case 30:Go(l);break;default:Go(l)}s=s.sibling}}function qa(s,l,f){for(f=f&&(l.subtreeFlags&8772)!==0,l=l.child;l!==null;){var h=l.alternate,y=s,x=l,T=x.flags;switch(x.tag){case 0:case 11:case 15:qa(y,x,f),Ru(4,x);break;case 1:if(qa(y,x,f),h=x,y=h.stateNode,typeof y.componentDidMount=="function")try{y.componentDidMount()}catch(te){Rt(h,h.return,te)}if(h=x,y=h.updateQueue,y!==null){var B=h.stateNode;try{var X=y.shared.hiddenCallbacks;if(X!==null)for(y.shared.hiddenCallbacks=null,y=0;y<X.length;y++)q2(X[y],B)}catch(te){Rt(h,h.return,te)}}f&&T&64&&nx(x),Ou(x,x.return);break;case 27:sx(x);case 26:case 5:qa(y,x,f),f&&h===null&&T&4&&ix(x),Ou(x,x.return);break;case 12:qa(y,x,f);break;case 31:qa(y,x,f),f&&T&4&&fx(y,x);break;case 13:qa(y,x,f),f&&T&4&&dx(y,x);break;case 22:x.memoizedState===null&&qa(y,x,f),Ou(x,x.return);break;case 30:break;default:qa(y,x,f)}l=l.sibling}}function V1(s,l){var f=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(f=s.memoizedState.cachePool.pool),s=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(s=l.memoizedState.cachePool.pool),s!==f&&(s!=null&&s.refCount++,f!=null&&vu(f))}function F1(s,l){s=null,l.alternate!==null&&(s=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==s&&(l.refCount++,s!=null&&vu(s))}function Mi(s,l,f,h){if(l.subtreeFlags&10256)for(l=l.child;l!==null;)mx(s,l,f,h),l=l.sibling}function mx(s,l,f,h){var y=l.flags;switch(l.tag){case 0:case 11:case 15:Mi(s,l,f,h),y&2048&&Ru(9,l);break;case 1:Mi(s,l,f,h);break;case 3:Mi(s,l,f,h),y&2048&&(s=null,l.alternate!==null&&(s=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==s&&(l.refCount++,s!=null&&vu(s)));break;case 12:if(y&2048){Mi(s,l,f,h),s=l.stateNode;try{var x=l.memoizedProps,T=x.id,B=x.onPostCommit;typeof B=="function"&&B(T,l.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(X){Rt(l,l.return,X)}}else Mi(s,l,f,h);break;case 31:Mi(s,l,f,h);break;case 13:Mi(s,l,f,h);break;case 23:break;case 22:x=l.stateNode,T=l.alternate,l.memoizedState!==null?x._visibility&2?Mi(s,l,f,h):Du(s,l):x._visibility&2?Mi(s,l,f,h):(x._visibility|=2,zl(s,l,f,h,(l.subtreeFlags&10256)!==0||!1)),y&2048&&V1(T,l);break;case 24:Mi(s,l,f,h),y&2048&&F1(l.alternate,l);break;default:Mi(s,l,f,h)}}function zl(s,l,f,h,y){for(y=y&&((l.subtreeFlags&10256)!==0||!1),l=l.child;l!==null;){var x=s,T=l,B=f,X=h,te=T.flags;switch(T.tag){case 0:case 11:case 15:zl(x,T,B,X,y),Ru(8,T);break;case 23:break;case 22:var ce=T.stateNode;T.memoizedState!==null?ce._visibility&2?zl(x,T,B,X,y):Du(x,T):(ce._visibility|=2,zl(x,T,B,X,y)),y&&te&2048&&V1(T.alternate,T);break;case 24:zl(x,T,B,X,y),y&&te&2048&&F1(T.alternate,T);break;default:zl(x,T,B,X,y)}l=l.sibling}}function Du(s,l){if(l.subtreeFlags&10256)for(l=l.child;l!==null;){var f=s,h=l,y=h.flags;switch(h.tag){case 22:Du(f,h),y&2048&&V1(h.alternate,h);break;case 24:Du(f,h),y&2048&&F1(h.alternate,h);break;default:Du(f,h)}l=l.sibling}}var Mu=8192;function Hl(s,l,f){if(s.subtreeFlags&Mu)for(s=s.child;s!==null;)gx(s,l,f),s=s.sibling}function gx(s,l,f){switch(s.tag){case 26:Hl(s,l,f),s.flags&Mu&&s.memoizedState!==null&&P4(f,Di,s.memoizedState,s.memoizedProps);break;case 5:Hl(s,l,f);break;case 3:case 4:var h=Di;Di=uh(s.stateNode.containerInfo),Hl(s,l,f),Di=h;break;case 22:s.memoizedState===null&&(h=s.alternate,h!==null&&h.memoizedState!==null?(h=Mu,Mu=16777216,Hl(s,l,f),Mu=h):Hl(s,l,f));break;default:Hl(s,l,f)}}function vx(s){var l=s.alternate;if(l!==null&&(s=l.child,s!==null)){l.child=null;do l=s.sibling,s.sibling=null,s=l;while(s!==null)}}function Pu(s){var l=s.deletions;if((s.flags&16)!==0){if(l!==null)for(var f=0;f<l.length;f++){var h=l[f];Un=h,_x(h,s)}vx(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)yx(s),s=s.sibling}function yx(s){switch(s.tag){case 0:case 11:case 15:Pu(s),s.flags&2048&&Cs(9,s,s.return);break;case 3:Pu(s);break;case 12:Pu(s);break;case 22:var l=s.stateNode;s.memoizedState!==null&&l._visibility&2&&(s.return===null||s.return.tag!==13)?(l._visibility&=-3,Qd(s)):Pu(s);break;default:Pu(s)}}function Qd(s){var l=s.deletions;if((s.flags&16)!==0){if(l!==null)for(var f=0;f<l.length;f++){var h=l[f];Un=h,_x(h,s)}vx(s)}for(s=s.child;s!==null;){switch(l=s,l.tag){case 0:case 11:case 15:Cs(8,l,l.return),Qd(l);break;case 22:f=l.stateNode,f._visibility&2&&(f._visibility&=-3,Qd(l));break;default:Qd(l)}s=s.sibling}}function _x(s,l){for(;Un!==null;){var f=Un;switch(f.tag){case 0:case 11:case 15:Cs(8,f,l);break;case 23:case 22:if(f.memoizedState!==null&&f.memoizedState.cachePool!==null){var h=f.memoizedState.cachePool.pool;h!=null&&h.refCount++}break;case 24:vu(f.memoizedState.cache)}if(h=f.child,h!==null)h.return=f,Un=h;else e:for(f=s;Un!==null;){h=Un;var y=h.sibling,x=h.return;if(cx(h),h===f){Un=null;break e}if(y!==null){y.return=x,Un=y;break e}Un=x}}}var KI={getCacheForType:function(s){var l=Jn(xn),f=l.data.get(s);return f===void 0&&(f=s(),l.data.set(s,f)),f},cacheSignal:function(){return Jn(xn).controller.signal}},WI=typeof WeakMap=="function"?WeakMap:Map,bt=0,Ut=null,at=null,ot=0,Nt=0,qr=null,Ts=!1,Gl=!1,U1=!1,$a=0,on=0,Is=0,qo=0,z1=0,$r=0,ql=0,ku=null,Or=null,H1=!1,Zd=0,xx=0,Jd=1/0,eh=null,Ns=null,Nn=0,Rs=null,$l=null,Xa=0,G1=0,q1=null,wx=null,ju=0,$1=null;function Xr(){return(bt&2)!==0&&ot!==0?ot&-ot:H.T!==null?Z1():td()}function Ex(){if($r===0)if((ot&536870912)===0||dt){var s=Ei;Ei<<=1,(Ei&3932160)===0&&(Ei=262144),$r=s}else $r=536870912;return s=Hr.current,s!==null&&(s.flags|=32),$r}function Dr(s,l,f){(s===Ut&&(Nt===2||Nt===9)||s.cancelPendingCommit!==null)&&(Xl(s,0),Os(s,ot,$r,!1)),_o(s,f),((bt&2)===0||s!==Ut)&&(s===Ut&&((bt&2)===0&&(qo|=f),on===4&&Os(s,ot,$r,!1)),pa(s))}function Ax(s,l,f){if((bt&6)!==0)throw Error(r(327));var h=!f&&(l&127)===0&&(l&s.expiredLanes)===0||Ai(s,l),y=h?JI(s,l):Y1(s,l,!0),x=h;do{if(y===0){Gl&&!h&&Os(s,l,0,!1);break}else{if(f=s.current.alternate,x&&!QI(f)){y=Y1(s,l,!1),x=!1;continue}if(y===2){if(x=l,s.errorRecoveryDisabledLanes&x)var T=0;else T=s.pendingLanes&-536870913,T=T!==0?T:T&536870912?536870912:0;if(T!==0){l=T;e:{var B=s;y=ku;var X=B.current.memoizedState.isDehydrated;if(X&&(Xl(B,T).flags|=256),T=Y1(B,T,!1),T!==2){if(U1&&!X){B.errorRecoveryDisabledLanes|=x,qo|=x,y=4;break e}x=Or,Or=y,x!==null&&(Or===null?Or=x:Or.push.apply(Or,x))}y=T}if(x=!1,y!==2)continue}}if(y===1){Xl(s,0),Os(s,l,0,!0);break}e:{switch(h=s,x=y,x){case 0:case 1:throw Error(r(345));case 4:if((l&4194048)!==l)break;case 6:Os(h,l,$r,!Ts);break e;case 2:Or=null;break;case 3:case 5:break;default:throw Error(r(329))}if((l&62914560)===l&&(y=Zd+300-tn(),10<y)){if(Os(h,l,$r,!Ts),Wi(h,0,!0)!==0)break e;Xa=l,h.timeoutHandle=ew(bx.bind(null,h,f,Or,eh,H1,l,$r,qo,ql,Ts,x,"Throttled",-0,0),y);break e}bx(h,f,Or,eh,H1,l,$r,qo,ql,Ts,x,null,-0,0)}}break}while(!0);pa(s)}function bx(s,l,f,h,y,x,T,B,X,te,ce,he,re,se){if(s.timeoutHandle=-1,he=l.subtreeFlags,he&8192||(he&16785408)===16785408){he={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Ci},gx(l,x,he);var Ie=(x&62914560)===x?Zd-tn():(x&4194048)===x?xx-tn():0;if(Ie=k4(he,Ie),Ie!==null){Xa=x,s.cancelPendingCommit=Ie(Dx.bind(null,s,l,x,f,h,y,T,B,X,ce,he,null,re,se)),Os(s,x,T,!te);return}}Dx(s,l,x,f,h,y,T,B,X)}function QI(s){for(var l=s;;){var f=l.tag;if((f===0||f===11||f===15)&&l.flags&16384&&(f=l.updateQueue,f!==null&&(f=f.stores,f!==null)))for(var h=0;h<f.length;h++){var y=f[h],x=y.getSnapshot;y=y.value;try{if(!Ur(x(),y))return!1}catch{return!1}}if(f=l.child,l.subtreeFlags&16384&&f!==null)f.return=l,l=f;else{if(l===s)break;for(;l.sibling===null;){if(l.return===null||l.return===s)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function Os(s,l,f,h){l&=~z1,l&=~qo,s.suspendedLanes|=l,s.pingedLanes&=~l,h&&(s.warmLanes|=l),h=s.expirationTimes;for(var y=l;0<y;){var x=31-Ce(y),T=1<<x;h[x]=-1,y&=~T}f!==0&&xo(s,f,l)}function th(){return(bt&6)===0?(Lu(0),!1):!0}function X1(){if(at!==null){if(Nt===0)var s=at.return;else s=at,ja=jo=null,c1(s),Ll=null,_u=0,s=at;for(;s!==null;)tx(s.alternate,s),s=s.return;at=null}}function Xl(s,l){var f=s.timeoutHandle;f!==-1&&(s.timeoutHandle=-1,v4(f)),f=s.cancelPendingCommit,f!==null&&(s.cancelPendingCommit=null,f()),Xa=0,X1(),Ut=s,at=f=Pa(s.current,null),ot=l,Nt=0,qr=null,Ts=!1,Gl=Ai(s,l),U1=!1,ql=$r=z1=qo=Is=on=0,Or=ku=null,H1=!1,(l&8)!==0&&(l|=l&32);var h=s.entangledLanes;if(h!==0)for(s=s.entanglements,h&=l;0<h;){var y=31-Ce(h),x=1<<y;l|=s[y],h&=~x}return $a=l,Ed(),f}function Sx(s,l){Qe=null,H.H=Tu,l===jl||l===Rd?(l=U2(),Nt=3):l===Qp?(l=U2(),Nt=4):Nt=l===S1?8:l!==null&&typeof l=="object"&&typeof l.then=="function"?6:1,qr=l,at===null&&(on=1,Gd(s,ai(l,s.current)))}function Cx(){var s=Hr.current;return s===null?!0:(ot&4194048)===ot?ci===null:(ot&62914560)===ot||(ot&536870912)!==0?s===ci:!1}function Tx(){var s=H.H;return H.H=Tu,s===null?Tu:s}function Ix(){var s=H.A;return H.A=KI,s}function nh(){on=4,Ts||(ot&4194048)!==ot&&Hr.current!==null||(Gl=!0),(Is&134217727)===0&&(qo&134217727)===0||Ut===null||Os(Ut,ot,$r,!1)}function Y1(s,l,f){var h=bt;bt|=2;var y=Tx(),x=Ix();(Ut!==s||ot!==l)&&(eh=null,Xl(s,l)),l=!1;var T=on;e:do try{if(Nt!==0&&at!==null){var B=at,X=qr;switch(Nt){case 8:X1(),T=6;break e;case 3:case 2:case 9:case 6:Hr.current===null&&(l=!0);var te=Nt;if(Nt=0,qr=null,Yl(s,B,X,te),f&&Gl){T=0;break e}break;default:te=Nt,Nt=0,qr=null,Yl(s,B,X,te)}}ZI(),T=on;break}catch(ce){Sx(s,ce)}while(!0);return l&&s.shellSuspendCounter++,ja=jo=null,bt=h,H.H=y,H.A=x,at===null&&(Ut=null,ot=0,Ed()),T}function ZI(){for(;at!==null;)Nx(at)}function JI(s,l){var f=bt;bt|=2;var h=Tx(),y=Ix();Ut!==s||ot!==l?(eh=null,Jd=tn()+500,Xl(s,l)):Gl=Ai(s,l);e:do try{if(Nt!==0&&at!==null){l=at;var x=qr;t:switch(Nt){case 1:Nt=0,qr=null,Yl(s,l,x,1);break;case 2:case 9:if(V2(x)){Nt=0,qr=null,Rx(l);break}l=function(){Nt!==2&&Nt!==9||Ut!==s||(Nt=7),pa(s)},x.then(l,l);break e;case 3:Nt=7;break e;case 4:Nt=5;break e;case 7:V2(x)?(Nt=0,qr=null,Rx(l)):(Nt=0,qr=null,Yl(s,l,x,7));break;case 5:var T=null;switch(at.tag){case 26:T=at.memoizedState;case 5:case 27:var B=at;if(T?mw(T):B.stateNode.complete){Nt=0,qr=null;var X=B.sibling;if(X!==null)at=X;else{var te=B.return;te!==null?(at=te,rh(te)):at=null}break t}}Nt=0,qr=null,Yl(s,l,x,5);break;case 6:Nt=0,qr=null,Yl(s,l,x,6);break;case 8:X1(),on=6;break e;default:throw Error(r(462))}}e4();break}catch(ce){Sx(s,ce)}while(!0);return ja=jo=null,H.H=h,H.A=y,bt=f,at!==null?0:(Ut=null,ot=0,Ed(),on)}function e4(){for(;at!==null&&!cn();)Nx(at)}function Nx(s){var l=J_(s.alternate,s,$a);s.memoizedProps=s.pendingProps,l===null?rh(s):at=l}function Rx(s){var l=s,f=l.alternate;switch(l.tag){case 15:case 0:l=X_(f,l,l.pendingProps,l.type,void 0,ot);break;case 11:l=X_(f,l,l.pendingProps,l.type.render,l.ref,ot);break;case 5:c1(l);default:tx(f,l),l=at=I2(l,$a),l=J_(f,l,$a)}s.memoizedProps=s.pendingProps,l===null?rh(s):at=l}function Yl(s,l,f,h){ja=jo=null,c1(l),Ll=null,_u=0;var y=l.return;try{if(zI(s,y,l,f,ot)){on=1,Gd(s,ai(f,s.current)),at=null;return}}catch(x){if(y!==null)throw at=y,x;on=1,Gd(s,ai(f,s.current)),at=null;return}l.flags&32768?(dt||h===1?s=!0:Gl||(ot&536870912)!==0?s=!1:(Ts=s=!0,(h===2||h===9||h===3||h===6)&&(h=Hr.current,h!==null&&h.tag===13&&(h.flags|=16384))),Ox(l,s)):rh(l)}function rh(s){var l=s;do{if((l.flags&32768)!==0){Ox(l,Ts);return}s=l.return;var f=qI(l.alternate,l,$a);if(f!==null){at=f;return}if(l=l.sibling,l!==null){at=l;return}at=l=s}while(l!==null);on===0&&(on=5)}function Ox(s,l){do{var f=$I(s.alternate,s);if(f!==null){f.flags&=32767,at=f;return}if(f=s.return,f!==null&&(f.flags|=32768,f.subtreeFlags=0,f.deletions=null),!l&&(s=s.sibling,s!==null)){at=s;return}at=s=f}while(s!==null);on=6,at=null}function Dx(s,l,f,h,y,x,T,B,X){s.cancelPendingCommit=null;do ih();while(Nn!==0);if((bt&6)!==0)throw Error(r(327));if(l!==null){if(l===s.current)throw Error(r(177));if(x=l.lanes|l.childLanes,x|=jp,Tp(s,f,x,T,B,X),s===Ut&&(at=Ut=null,ot=0),$l=l,Rs=s,Xa=f,G1=x,q1=y,wx=h,(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,i4(Ae,function(){return Lx(),null})):(s.callbackNode=null,s.callbackPriority=0),h=(l.flags&13878)!==0,(l.subtreeFlags&13878)!==0||h){h=H.T,H.T=null,y=G.p,G.p=2,T=bt,bt|=4;try{XI(s,l,f)}finally{bt=T,G.p=y,H.T=h}}Nn=1,Mx(),Px(),kx()}}function Mx(){if(Nn===1){Nn=0;var s=Rs,l=$l,f=(l.flags&13878)!==0;if((l.subtreeFlags&13878)!==0||f){f=H.T,H.T=null;var h=G.p;G.p=2;var y=bt;bt|=4;try{hx(l,s);var x=sm,T=_2(s.containerInfo),B=x.focusedElem,X=x.selectionRange;if(T!==B&&B&&B.ownerDocument&&y2(B.ownerDocument.documentElement,B)){if(X!==null&&Op(B)){var te=X.start,ce=X.end;if(ce===void 0&&(ce=te),"selectionStart"in B)B.selectionStart=te,B.selectionEnd=Math.min(ce,B.value.length);else{var he=B.ownerDocument||document,re=he&&he.defaultView||window;if(re.getSelection){var se=re.getSelection(),Ie=B.textContent.length,Ue=Math.min(X.start,Ie),Bt=X.end===void 0?Ue:Math.min(X.end,Ie);!se.extend&&Ue>Bt&&(T=Bt,Bt=Ue,Ue=T);var Q=v2(B,Ue),K=v2(B,Bt);if(Q&&K&&(se.rangeCount!==1||se.anchorNode!==Q.node||se.anchorOffset!==Q.offset||se.focusNode!==K.node||se.focusOffset!==K.offset)){var ee=he.createRange();ee.setStart(Q.node,Q.offset),se.removeAllRanges(),Ue>Bt?(se.addRange(ee),se.extend(K.node,K.offset)):(ee.setEnd(K.node,K.offset),se.addRange(ee))}}}}for(he=[],se=B;se=se.parentNode;)se.nodeType===1&&he.push({element:se,left:se.scrollLeft,top:se.scrollTop});for(typeof B.focus=="function"&&B.focus(),B=0;B<he.length;B++){var de=he[B];de.element.scrollLeft=de.left,de.element.scrollTop=de.top}}gh=!!am,sm=am=null}finally{bt=y,G.p=h,H.T=f}}s.current=l,Nn=2}}function Px(){if(Nn===2){Nn=0;var s=Rs,l=$l,f=(l.flags&8772)!==0;if((l.subtreeFlags&8772)!==0||f){f=H.T,H.T=null;var h=G.p;G.p=2;var y=bt;bt|=4;try{lx(s,l.alternate,l)}finally{bt=y,G.p=h,H.T=f}}Nn=3}}function kx(){if(Nn===4||Nn===3){Nn=0,_r();var s=Rs,l=$l,f=Xa,h=wx;(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?Nn=5:(Nn=0,$l=Rs=null,jx(s,s.pendingLanes));var y=s.pendingLanes;if(y===0&&(Ns=null),Ra(f),l=l.stateNode,Je&&typeof Je.onCommitFiberRoot=="function")try{Je.onCommitFiberRoot(ze,l,void 0,(l.current.flags&128)===128)}catch{}if(h!==null){l=H.T,y=G.p,G.p=2,H.T=null;try{for(var x=s.onRecoverableError,T=0;T<h.length;T++){var B=h[T];x(B.value,{componentStack:B.stack})}}finally{H.T=l,G.p=y}}(Xa&3)!==0&&ih(),pa(s),y=s.pendingLanes,(f&261930)!==0&&(y&42)!==0?s===$1?ju++:(ju=0,$1=s):ju=0,Lu(0)}}function jx(s,l){(s.pooledCacheLanes&=l)===0&&(l=s.pooledCache,l!=null&&(s.pooledCache=null,vu(l)))}function ih(){return Mx(),Px(),kx(),Lx()}function Lx(){if(Nn!==5)return!1;var s=Rs,l=G1;G1=0;var f=Ra(Xa),h=H.T,y=G.p;try{G.p=32>f?32:f,H.T=null,f=q1,q1=null;var x=Rs,T=Xa;if(Nn=0,$l=Rs=null,Xa=0,(bt&6)!==0)throw Error(r(331));var B=bt;if(bt|=4,yx(x.current),mx(x,x.current,T,f),bt=B,Lu(0,!1),Je&&typeof Je.onPostCommitFiberRoot=="function")try{Je.onPostCommitFiberRoot(ze,x)}catch{}return!0}finally{G.p=y,H.T=h,jx(s,l)}}function Bx(s,l,f){l=ai(f,l),l=b1(s.stateNode,l,2),s=As(s,l,2),s!==null&&(_o(s,2),pa(s))}function Rt(s,l,f){if(s.tag===3)Bx(s,s,f);else for(;l!==null;){if(l.tag===3){Bx(l,s,f);break}else if(l.tag===1){var h=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(Ns===null||!Ns.has(h))){s=ai(f,s),f=V_(2),h=As(l,f,2),h!==null&&(F_(f,h,l,s),_o(h,2),pa(h));break}}l=l.return}}function K1(s,l,f){var h=s.pingCache;if(h===null){h=s.pingCache=new WI;var y=new Set;h.set(l,y)}else y=h.get(l),y===void 0&&(y=new Set,h.set(l,y));y.has(f)||(U1=!0,y.add(f),s=t4.bind(null,s,l,f),l.then(s,s))}function t4(s,l,f){var h=s.pingCache;h!==null&&h.delete(l),s.pingedLanes|=s.suspendedLanes&f,s.warmLanes&=~f,Ut===s&&(ot&f)===f&&(on===4||on===3&&(ot&62914560)===ot&&300>tn()-Zd?(bt&2)===0&&Xl(s,0):z1|=f,ql===ot&&(ql=0)),pa(s)}function Vx(s,l){l===0&&(l=ed()),s=Mo(s,l),s!==null&&(_o(s,l),pa(s))}function n4(s){var l=s.memoizedState,f=0;l!==null&&(f=l.retryLane),Vx(s,f)}function r4(s,l){var f=0;switch(s.tag){case 31:case 13:var h=s.stateNode,y=s.memoizedState;y!==null&&(f=y.retryLane);break;case 19:h=s.stateNode;break;case 22:h=s.stateNode._retryCache;break;default:throw Error(r(314))}h!==null&&h.delete(l),Vx(s,f)}function i4(s,l){return Pt(s,l)}var ah=null,Kl=null,W1=!1,sh=!1,Q1=!1,Ds=0;function pa(s){s!==Kl&&s.next===null&&(Kl===null?ah=Kl=s:Kl=Kl.next=s),sh=!0,W1||(W1=!0,s4())}function Lu(s,l){if(!Q1&&sh){Q1=!0;do for(var f=!1,h=ah;h!==null;){if(s!==0){var y=h.pendingLanes;if(y===0)var x=0;else{var T=h.suspendedLanes,B=h.pingedLanes;x=(1<<31-Ce(42|s)+1)-1,x&=y&~(T&~B),x=x&201326741?x&201326741|1:x?x|2:0}x!==0&&(f=!0,Hx(h,x))}else x=ot,x=Wi(h,h===Ut?x:0,h.cancelPendingCommit!==null||h.timeoutHandle!==-1),(x&3)===0||Ai(h,x)||(f=!0,Hx(h,x));h=h.next}while(f);Q1=!1}}function a4(){Fx()}function Fx(){sh=W1=!1;var s=0;Ds!==0&&g4()&&(s=Ds);for(var l=tn(),f=null,h=ah;h!==null;){var y=h.next,x=Ux(h,l);x===0?(h.next=null,f===null?ah=y:f.next=y,y===null&&(Kl=f)):(f=h,(s!==0||(x&3)!==0)&&(sh=!0)),h=y}Nn!==0&&Nn!==5||Lu(s),Ds!==0&&(Ds=0)}function Ux(s,l){for(var f=s.suspendedLanes,h=s.pingedLanes,y=s.expirationTimes,x=s.pendingLanes&-62914561;0<x;){var T=31-Ce(x),B=1<<T,X=y[T];X===-1?((B&f)===0||(B&h)!==0)&&(y[T]=Cp(B,l)):X<=l&&(s.expiredLanes|=B),x&=~B}if(l=Ut,f=ot,f=Wi(s,s===l?f:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),h=s.callbackNode,f===0||s===l&&(Nt===2||Nt===9)||s.cancelPendingCommit!==null)return h!==null&&h!==null&&Wn(h),s.callbackNode=null,s.callbackPriority=0;if((f&3)===0||Ai(s,f)){if(l=f&-f,l===s.callbackPriority)return l;switch(h!==null&&Wn(h),Ra(f)){case 2:case 8:f=ae;break;case 32:f=Ae;break;case 268435456:f=fe;break;default:f=Ae}return h=zx.bind(null,s),f=Pt(f,h),s.callbackPriority=l,s.callbackNode=f,l}return h!==null&&h!==null&&Wn(h),s.callbackPriority=2,s.callbackNode=null,2}function zx(s,l){if(Nn!==0&&Nn!==5)return s.callbackNode=null,s.callbackPriority=0,null;var f=s.callbackNode;if(ih()&&s.callbackNode!==f)return null;var h=ot;return h=Wi(s,s===Ut?h:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),h===0?null:(Ax(s,h,l),Ux(s,tn()),s.callbackNode!=null&&s.callbackNode===f?zx.bind(null,s):null)}function Hx(s,l){if(ih())return null;Ax(s,l,!0)}function s4(){y4(function(){(bt&6)!==0?Pt(Jr,a4):Fx()})}function Z1(){if(Ds===0){var s=Pl;s===0&&(s=un,un<<=1,(un&261888)===0&&(un=256)),Ds=s}return Ds}function Gx(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:_l(""+s)}function qx(s,l){var f=l.ownerDocument.createElement("input");return f.name=l.name,f.value=l.value,s.id&&f.setAttribute("form",s.id),l.parentNode.insertBefore(f,l),s=new FormData(s),f.parentNode.removeChild(f),s}function o4(s,l,f,h,y){if(l==="submit"&&f&&f.stateNode===y){var x=Gx((y[Vn]||null).action),T=h.submitter;T&&(l=(l=T[Vn]||null)?Gx(l.formAction):T.getAttribute("formAction"),l!==null&&(x=l,T=null));var B=new oa("action","action",null,h,y);s.push({event:B,listeners:[{instance:null,listener:function(){if(h.defaultPrevented){if(Ds!==0){var X=T?qx(y,T):new FormData(y);y1(f,{pending:!0,data:X,method:y.method,action:x},null,X)}}else typeof x=="function"&&(B.preventDefault(),X=T?qx(y,T):new FormData(y),y1(f,{pending:!0,data:X,method:y.method,action:x},x,X))},currentTarget:y}]})}}for(var J1=0;J1<kp.length;J1++){var em=kp[J1],l4=em.toLowerCase(),c4=em[0].toUpperCase()+em.slice(1);Oi(l4,"on"+c4)}Oi(E2,"onAnimationEnd"),Oi(A2,"onAnimationIteration"),Oi(b2,"onAnimationStart"),Oi("dblclick","onDoubleClick"),Oi("focusin","onFocus"),Oi("focusout","onBlur"),Oi(SI,"onTransitionRun"),Oi(CI,"onTransitionStart"),Oi(TI,"onTransitionCancel"),Oi(S2,"onTransitionEnd"),ra("onMouseEnter",["mouseout","mouseover"]),ra("onMouseLeave",["mouseout","mouseover"]),ra("onPointerEnter",["pointerout","pointerover"]),ra("onPointerLeave",["pointerout","pointerover"]),na("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),na("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),na("onBeforeInput",["compositionend","keypress","textInput","paste"]),na("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),na("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),na("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Bu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),u4=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Bu));function $x(s,l){l=(l&4)!==0;for(var f=0;f<s.length;f++){var h=s[f],y=h.event;h=h.listeners;e:{var x=void 0;if(l)for(var T=h.length-1;0<=T;T--){var B=h[T],X=B.instance,te=B.currentTarget;if(B=B.listener,X!==x&&y.isPropagationStopped())break e;x=B,y.currentTarget=te;try{x(y)}catch(ce){wd(ce)}y.currentTarget=null,x=X}else for(T=0;T<h.length;T++){if(B=h[T],X=B.instance,te=B.currentTarget,B=B.listener,X!==x&&y.isPropagationStopped())break e;x=B,y.currentTarget=te;try{x(y)}catch(ce){wd(ce)}y.currentTarget=null,x=X}}}}function st(s,l){var f=l[pl];f===void 0&&(f=l[pl]=new Set);var h=s+"__bubble";f.has(h)||(Xx(l,s,2,!1),f.add(h))}function tm(s,l,f){var h=0;l&&(h|=4),Xx(f,s,h,l)}var oh="_reactListening"+Math.random().toString(36).slice(2);function nm(s){if(!s[oh]){s[oh]=!0,Wc.forEach(function(f){f!=="selectionchange"&&(u4.has(f)||tm(f,!1,s),tm(f,!0,s))});var l=s.nodeType===9?s:s.ownerDocument;l===null||l[oh]||(l[oh]=!0,tm("selectionchange",!1,l))}}function Xx(s,l,f,h){switch(Ew(l)){case 2:var y=B4;break;case 8:y=V4;break;default:y=vm}f=y.bind(null,l,f,s),y=void 0,!So||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(y=!0),h?y!==void 0?s.addEventListener(l,f,{capture:!0,passive:y}):s.addEventListener(l,f,!0):y!==void 0?s.addEventListener(l,f,{passive:y}):s.addEventListener(l,f,!1)}function rm(s,l,f,h,y){var x=h;if((l&1)===0&&(l&2)===0&&h!==null)e:for(;;){if(h===null)return;var T=h.tag;if(T===3||T===4){var B=h.stateNode.containerInfo;if(B===y)break;if(T===4)for(T=h.return;T!==null;){var X=T.tag;if((X===3||X===4)&&T.stateNode.containerInfo===y)return;T=T.return}for(;B!==null;){if(T=ea(B),T===null)return;if(X=T.tag,X===5||X===6||X===26||X===27){h=x=T;continue e}B=B.parentNode}}h=h.return}hs(function(){var te=x,ce=ti(f),he=[];e:{var re=C2.get(s);if(re!==void 0){var se=oa,Ie=s;switch(s){case"keypress":if(To(f)===0)break e;case"keydown":case"keyup":se=yd;break;case"focusin":Ie="focus",se=No;break;case"focusout":Ie="blur",se=No;break;case"beforeblur":case"afterblur":se=No;break;case"click":if(f.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":se=cu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":se=cd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":se=E;break;case E2:case A2:case b2:se=fd;break;case S2:se=F;break;case"scroll":case"scrollend":se=lu;break;case"wheel":se=ie;break;case"copy":case"cut":case"paste":se=dd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":se=Ma;break;case"toggle":case"beforetoggle":se=We}var Ue=(l&4)!==0,Bt=!Ue&&(s==="scroll"||s==="scrollend"),Q=Ue?re!==null?re+"Capture":null:re;Ue=[];for(var K=te,ee;K!==null;){var de=K;if(ee=de.stateNode,de=de.tag,de!==5&&de!==26&&de!==27||ee===null||Q===null||(de=Ti(K,Q),de!=null&&Ue.push(Vu(K,de,ee))),Bt)break;K=K.return}0<Ue.length&&(re=new se(re,Ie,null,f,ce),he.push({event:re,listeners:Ue}))}}if((l&7)===0){e:{if(re=s==="mouseover"||s==="pointerover",se=s==="mouseout"||s==="pointerout",re&&f!==au&&(Ie=f.relatedTarget||f.fromElement)&&(ea(Ie)||Ie[Zi]))break e;if((se||re)&&(re=ce.window===ce?ce:(re=ce.ownerDocument)?re.defaultView||re.parentWindow:window,se?(Ie=f.relatedTarget||f.toElement,se=te,Ie=Ie?ea(Ie):null,Ie!==null&&(Bt=a(Ie),Ue=Ie.tag,Ie!==Bt||Ue!==5&&Ue!==27&&Ue!==6)&&(Ie=null)):(se=null,Ie=te),se!==Ie)){if(Ue=cu,de="onMouseLeave",Q="onMouseEnter",K="mouse",(s==="pointerout"||s==="pointerover")&&(Ue=Ma,de="onPointerLeave",Q="onPointerEnter",K="pointer"),Bt=se==null?re:Vr(se),ee=Ie==null?re:Vr(Ie),re=new Ue(de,K+"leave",se,f,ce),re.target=Bt,re.relatedTarget=ee,de=null,ea(ce)===te&&(Ue=new Ue(Q,K+"enter",Ie,f,ce),Ue.target=ee,Ue.relatedTarget=Bt,de=Ue),Bt=de,se&&Ie)t:{for(Ue=f4,Q=se,K=Ie,ee=0,de=Q;de;de=Ue(de))ee++;de=0;for(var ke=K;ke;ke=Ue(ke))de++;for(;0<ee-de;)Q=Ue(Q),ee--;for(;0<de-ee;)K=Ue(K),de--;for(;ee--;){if(Q===K||K!==null&&Q===K.alternate){Ue=Q;break t}Q=Ue(Q),K=Ue(K)}Ue=null}else Ue=null;se!==null&&Yx(he,re,se,Ue,!1),Ie!==null&&Bt!==null&&Yx(he,Bt,Ie,Ue,!0)}}e:{if(re=te?Vr(te):window,se=re.nodeName&&re.nodeName.toLowerCase(),se==="select"||se==="input"&&re.type==="file")var yt=f2;else if(c2(re))if(d2)yt=EI;else{yt=xI;var Oe=_I}else se=re.nodeName,!se||se.toLowerCase()!=="input"||re.type!=="checkbox"&&re.type!=="radio"?te&&yl(te.elementType)&&(yt=f2):yt=wI;if(yt&&(yt=yt(s,te))){u2(he,yt,f,ce);break e}Oe&&Oe(s,re,te),s==="focusout"&&te&&re.type==="number"&&te.memoizedProps.value!=null&&nu(re,"number",re.value)}switch(Oe=te?Vr(te):window,s){case"focusin":(c2(Oe)||Oe.contentEditable==="true")&&(Cl=Oe,Dp=te,pu=null);break;case"focusout":pu=Dp=Cl=null;break;case"mousedown":Mp=!0;break;case"contextmenu":case"mouseup":case"dragend":Mp=!1,x2(he,f,ce);break;case"selectionchange":if(bI)break;case"keydown":case"keyup":x2(he,f,ce)}var et;if(At)e:{switch(s){case"compositionstart":var lt="onCompositionStart";break e;case"compositionend":lt="onCompositionEnd";break e;case"compositionupdate":lt="onCompositionUpdate";break e}lt=void 0}else Sl?Ro(s,f)&&(lt="onCompositionEnd"):s==="keydown"&&f.keyCode===229&&(lt="onCompositionStart");lt&&(ua&&f.locale!=="ko"&&(Sl||lt!=="onCompositionStart"?lt==="onCompositionEnd"&&Sl&&(et=ou()):(sa=ce,su="value"in sa?sa.value:sa.textContent,Sl=!0)),Oe=lh(te,lt),0<Oe.length&&(lt=new ca(lt,s,null,f,ce),he.push({event:lt,listeners:Oe}),et?lt.data=et:(et=bl(f),et!==null&&(lt.data=et)))),(et=ri?mI(s,f):gI(s,f))&&(lt=lh(te,"onBeforeInput"),0<lt.length&&(Oe=new ca("onBeforeInput","beforeinput",null,f,ce),he.push({event:Oe,listeners:lt}),Oe.data=et)),o4(he,s,te,f,ce)}$x(he,l)})}function Vu(s,l,f){return{instance:s,listener:l,currentTarget:f}}function lh(s,l){for(var f=l+"Capture",h=[];s!==null;){var y=s,x=y.stateNode;if(y=y.tag,y!==5&&y!==26&&y!==27||x===null||(y=Ti(s,f),y!=null&&h.unshift(Vu(s,y,x)),y=Ti(s,l),y!=null&&h.push(Vu(s,y,x))),s.tag===3)return h;s=s.return}return[]}function f4(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function Yx(s,l,f,h,y){for(var x=l._reactName,T=[];f!==null&&f!==h;){var B=f,X=B.alternate,te=B.stateNode;if(B=B.tag,X!==null&&X===h)break;B!==5&&B!==26&&B!==27||te===null||(X=te,y?(te=Ti(f,x),te!=null&&T.unshift(Vu(f,te,X))):y||(te=Ti(f,x),te!=null&&T.push(Vu(f,te,X)))),f=f.return}T.length!==0&&s.push({event:l,listeners:T})}var d4=/\r\n?/g,h4=/\u0000|\uFFFD/g;function Kx(s){return(typeof s=="string"?s:""+s).replace(d4,`
`).replace(h4,"")}function Wx(s,l){return l=Kx(l),Kx(s)===l}function Lt(s,l,f,h,y,x){switch(f){case"children":typeof h=="string"?l==="body"||l==="textarea"&&h===""||Tr(s,h):(typeof h=="number"||typeof h=="bigint")&&l!=="body"&&Tr(s,""+h);break;case"className":Fr(s,"class",h);break;case"tabIndex":Fr(s,"tabindex",h);break;case"dir":case"role":case"viewBox":case"width":case"height":Fr(s,f,h);break;case"style":iu(s,h,x);break;case"data":if(l!=="object"){Fr(s,"data",h);break}case"src":case"href":if(h===""&&(l!=="a"||f!=="href")){s.removeAttribute(f);break}if(h==null||typeof h=="function"||typeof h=="symbol"||typeof h=="boolean"){s.removeAttribute(f);break}h=_l(""+h),s.setAttribute(f,h);break;case"action":case"formAction":if(typeof h=="function"){s.setAttribute(f,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof x=="function"&&(f==="formAction"?(l!=="input"&&Lt(s,l,"name",y.name,y,null),Lt(s,l,"formEncType",y.formEncType,y,null),Lt(s,l,"formMethod",y.formMethod,y,null),Lt(s,l,"formTarget",y.formTarget,y,null)):(Lt(s,l,"encType",y.encType,y,null),Lt(s,l,"method",y.method,y,null),Lt(s,l,"target",y.target,y,null)));if(h==null||typeof h=="symbol"||typeof h=="boolean"){s.removeAttribute(f);break}h=_l(""+h),s.setAttribute(f,h);break;case"onClick":h!=null&&(s.onclick=Ci);break;case"onScroll":h!=null&&st("scroll",s);break;case"onScrollEnd":h!=null&&st("scrollend",s);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(r(61));if(f=h.__html,f!=null){if(y.children!=null)throw Error(r(60));s.innerHTML=f}}break;case"multiple":s.multiple=h&&typeof h!="function"&&typeof h!="symbol";break;case"muted":s.muted=h&&typeof h!="function"&&typeof h!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(h==null||typeof h=="function"||typeof h=="boolean"||typeof h=="symbol"){s.removeAttribute("xlink:href");break}f=_l(""+h),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",f);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":h!=null&&typeof h!="function"&&typeof h!="symbol"?s.setAttribute(f,""+h):s.removeAttribute(f);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":h&&typeof h!="function"&&typeof h!="symbol"?s.setAttribute(f,""):s.removeAttribute(f);break;case"capture":case"download":h===!0?s.setAttribute(f,""):h!==!1&&h!=null&&typeof h!="function"&&typeof h!="symbol"?s.setAttribute(f,h):s.removeAttribute(f);break;case"cols":case"rows":case"size":case"span":h!=null&&typeof h!="function"&&typeof h!="symbol"&&!isNaN(h)&&1<=h?s.setAttribute(f,h):s.removeAttribute(f);break;case"rowSpan":case"start":h==null||typeof h=="function"||typeof h=="symbol"||isNaN(h)?s.removeAttribute(f):s.setAttribute(f,h);break;case"popover":st("beforetoggle",s),st("toggle",s),gl(s,"popover",h);break;case"xlinkActuate":_n(s,"http://www.w3.org/1999/xlink","xlink:actuate",h);break;case"xlinkArcrole":_n(s,"http://www.w3.org/1999/xlink","xlink:arcrole",h);break;case"xlinkRole":_n(s,"http://www.w3.org/1999/xlink","xlink:role",h);break;case"xlinkShow":_n(s,"http://www.w3.org/1999/xlink","xlink:show",h);break;case"xlinkTitle":_n(s,"http://www.w3.org/1999/xlink","xlink:title",h);break;case"xlinkType":_n(s,"http://www.w3.org/1999/xlink","xlink:type",h);break;case"xmlBase":_n(s,"http://www.w3.org/XML/1998/namespace","xml:base",h);break;case"xmlLang":_n(s,"http://www.w3.org/XML/1998/namespace","xml:lang",h);break;case"xmlSpace":_n(s,"http://www.w3.org/XML/1998/namespace","xml:space",h);break;case"is":gl(s,"is",h);break;case"innerText":case"textContent":break;default:(!(2<f.length)||f[0]!=="o"&&f[0]!=="O"||f[1]!=="n"&&f[1]!=="N")&&(f=ld.get(f)||f,gl(s,f,h))}}function im(s,l,f,h,y,x){switch(f){case"style":iu(s,h,x);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(r(61));if(f=h.__html,f!=null){if(y.children!=null)throw Error(r(60));s.innerHTML=f}}break;case"children":typeof h=="string"?Tr(s,h):(typeof h=="number"||typeof h=="bigint")&&Tr(s,""+h);break;case"onScroll":h!=null&&st("scroll",s);break;case"onScrollEnd":h!=null&&st("scrollend",s);break;case"onClick":h!=null&&(s.onclick=Ci);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Qc.hasOwnProperty(f))e:{if(f[0]==="o"&&f[1]==="n"&&(y=f.endsWith("Capture"),l=f.slice(2,y?f.length-7:void 0),x=s[Vn]||null,x=x!=null?x[f]:null,typeof x=="function"&&s.removeEventListener(l,x,y),typeof h=="function")){typeof x!="function"&&x!==null&&(f in s?s[f]=null:s.hasAttribute(f)&&s.removeAttribute(f)),s.addEventListener(l,h,y);break e}f in s?s[f]=h:h===!0?s.setAttribute(f,""):gl(s,f,h)}}}function tr(s,l,f){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":st("error",s),st("load",s);var h=!1,y=!1,x;for(x in f)if(f.hasOwnProperty(x)){var T=f[x];if(T!=null)switch(x){case"src":h=!0;break;case"srcSet":y=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,l));default:Lt(s,l,x,T,f,null)}}y&&Lt(s,l,"srcSet",f.srcSet,f,null),h&&Lt(s,l,"src",f.src,f,null);return;case"input":st("invalid",s);var B=x=T=y=null,X=null,te=null;for(h in f)if(f.hasOwnProperty(h)){var ce=f[h];if(ce!=null)switch(h){case"name":y=ce;break;case"type":T=ce;break;case"checked":X=ce;break;case"defaultChecked":te=ce;break;case"value":x=ce;break;case"defaultValue":B=ce;break;case"children":case"dangerouslySetInnerHTML":if(ce!=null)throw Error(r(137,l));break;default:Lt(s,l,h,ce,f,null)}}ad(s,x,B,X,te,T,y,!1);return;case"select":st("invalid",s),h=T=x=null;for(y in f)if(f.hasOwnProperty(y)&&(B=f[y],B!=null))switch(y){case"value":x=B;break;case"defaultValue":T=B;break;case"multiple":h=B;default:Lt(s,l,y,B,f,null)}l=x,f=T,s.multiple=!!h,l!=null?cs(s,!!h,l,!1):f!=null&&cs(s,!!h,f,!0);return;case"textarea":st("invalid",s),x=y=h=null;for(T in f)if(f.hasOwnProperty(T)&&(B=f[T],B!=null))switch(T){case"value":h=B;break;case"defaultValue":y=B;break;case"children":x=B;break;case"dangerouslySetInnerHTML":if(B!=null)throw Error(r(91));break;default:Lt(s,l,T,B,f,null)}us(s,h,y,x);return;case"option":for(X in f)if(f.hasOwnProperty(X)&&(h=f[X],h!=null))switch(X){case"selected":s.selected=h&&typeof h!="function"&&typeof h!="symbol";break;default:Lt(s,l,X,h,f,null)}return;case"dialog":st("beforetoggle",s),st("toggle",s),st("cancel",s),st("close",s);break;case"iframe":case"object":st("load",s);break;case"video":case"audio":for(h=0;h<Bu.length;h++)st(Bu[h],s);break;case"image":st("error",s),st("load",s);break;case"details":st("toggle",s);break;case"embed":case"source":case"link":st("error",s),st("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(te in f)if(f.hasOwnProperty(te)&&(h=f[te],h!=null))switch(te){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,l));default:Lt(s,l,te,h,f,null)}return;default:if(yl(l)){for(ce in f)f.hasOwnProperty(ce)&&(h=f[ce],h!==void 0&&im(s,l,ce,h,f,void 0));return}}for(B in f)f.hasOwnProperty(B)&&(h=f[B],h!=null&&Lt(s,l,B,h,f,null))}function p4(s,l,f,h){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var y=null,x=null,T=null,B=null,X=null,te=null,ce=null;for(se in f){var he=f[se];if(f.hasOwnProperty(se)&&he!=null)switch(se){case"checked":break;case"value":break;case"defaultValue":X=he;default:h.hasOwnProperty(se)||Lt(s,l,se,null,h,he)}}for(var re in h){var se=h[re];if(he=f[re],h.hasOwnProperty(re)&&(se!=null||he!=null))switch(re){case"type":x=se;break;case"name":y=se;break;case"checked":te=se;break;case"defaultChecked":ce=se;break;case"value":T=se;break;case"defaultValue":B=se;break;case"children":case"dangerouslySetInnerHTML":if(se!=null)throw Error(r(137,l));break;default:se!==he&&Lt(s,l,re,se,h,he)}}vl(s,T,B,X,te,ce,x,y);return;case"select":se=T=B=re=null;for(x in f)if(X=f[x],f.hasOwnProperty(x)&&X!=null)switch(x){case"value":break;case"multiple":se=X;default:h.hasOwnProperty(x)||Lt(s,l,x,null,h,X)}for(y in h)if(x=h[y],X=f[y],h.hasOwnProperty(y)&&(x!=null||X!=null))switch(y){case"value":re=x;break;case"defaultValue":B=x;break;case"multiple":T=x;default:x!==X&&Lt(s,l,y,x,h,X)}l=B,f=T,h=se,re!=null?cs(s,!!f,re,!1):!!h!=!!f&&(l!=null?cs(s,!!f,l,!0):cs(s,!!f,f?[]:"",!1));return;case"textarea":se=re=null;for(B in f)if(y=f[B],f.hasOwnProperty(B)&&y!=null&&!h.hasOwnProperty(B))switch(B){case"value":break;case"children":break;default:Lt(s,l,B,null,h,y)}for(T in h)if(y=h[T],x=f[T],h.hasOwnProperty(T)&&(y!=null||x!=null))switch(T){case"value":re=y;break;case"defaultValue":se=y;break;case"children":break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(r(91));break;default:y!==x&&Lt(s,l,T,y,h,x)}sd(s,re,se);return;case"option":for(var Ie in f)if(re=f[Ie],f.hasOwnProperty(Ie)&&re!=null&&!h.hasOwnProperty(Ie))switch(Ie){case"selected":s.selected=!1;break;default:Lt(s,l,Ie,null,h,re)}for(X in h)if(re=h[X],se=f[X],h.hasOwnProperty(X)&&re!==se&&(re!=null||se!=null))switch(X){case"selected":s.selected=re&&typeof re!="function"&&typeof re!="symbol";break;default:Lt(s,l,X,re,h,se)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ue in f)re=f[Ue],f.hasOwnProperty(Ue)&&re!=null&&!h.hasOwnProperty(Ue)&&Lt(s,l,Ue,null,h,re);for(te in h)if(re=h[te],se=f[te],h.hasOwnProperty(te)&&re!==se&&(re!=null||se!=null))switch(te){case"children":case"dangerouslySetInnerHTML":if(re!=null)throw Error(r(137,l));break;default:Lt(s,l,te,re,h,se)}return;default:if(yl(l)){for(var Bt in f)re=f[Bt],f.hasOwnProperty(Bt)&&re!==void 0&&!h.hasOwnProperty(Bt)&&im(s,l,Bt,void 0,h,re);for(ce in h)re=h[ce],se=f[ce],!h.hasOwnProperty(ce)||re===se||re===void 0&&se===void 0||im(s,l,ce,re,h,se);return}}for(var Q in f)re=f[Q],f.hasOwnProperty(Q)&&re!=null&&!h.hasOwnProperty(Q)&&Lt(s,l,Q,null,h,re);for(he in h)re=h[he],se=f[he],!h.hasOwnProperty(he)||re===se||re==null&&se==null||Lt(s,l,he,re,h,se)}function Qx(s){switch(s){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function m4(){if(typeof performance.getEntriesByType=="function"){for(var s=0,l=0,f=performance.getEntriesByType("resource"),h=0;h<f.length;h++){var y=f[h],x=y.transferSize,T=y.initiatorType,B=y.duration;if(x&&B&&Qx(T)){for(T=0,B=y.responseEnd,h+=1;h<f.length;h++){var X=f[h],te=X.startTime;if(te>B)break;var ce=X.transferSize,he=X.initiatorType;ce&&Qx(he)&&(X=X.responseEnd,T+=ce*(X<B?1:(B-te)/(X-te)))}if(--h,l+=8*(x+T)/(y.duration/1e3),s++,10<s)break}}if(0<s)return l/s/1e6}return navigator.connection&&(s=navigator.connection.downlink,typeof s=="number")?s:5}var am=null,sm=null;function ch(s){return s.nodeType===9?s:s.ownerDocument}function Zx(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Jx(s,l){if(s===0)switch(l){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&l==="foreignObject"?0:s}function om(s,l){return s==="textarea"||s==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.children=="bigint"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var lm=null;function g4(){var s=window.event;return s&&s.type==="popstate"?s===lm?!1:(lm=s,!0):(lm=null,!1)}var ew=typeof setTimeout=="function"?setTimeout:void 0,v4=typeof clearTimeout=="function"?clearTimeout:void 0,tw=typeof Promise=="function"?Promise:void 0,y4=typeof queueMicrotask=="function"?queueMicrotask:typeof tw<"u"?function(s){return tw.resolve(null).then(s).catch(_4)}:ew;function _4(s){setTimeout(function(){throw s})}function Ms(s){return s==="head"}function nw(s,l){var f=l,h=0;do{var y=f.nextSibling;if(s.removeChild(f),y&&y.nodeType===8)if(f=y.data,f==="/$"||f==="/&"){if(h===0){s.removeChild(y),Jl(l);return}h--}else if(f==="$"||f==="$?"||f==="$~"||f==="$!"||f==="&")h++;else if(f==="html")Fu(s.ownerDocument.documentElement);else if(f==="head"){f=s.ownerDocument.head,Fu(f);for(var x=f.firstChild;x;){var T=x.nextSibling,B=x.nodeName;x[Ji]||B==="SCRIPT"||B==="STYLE"||B==="LINK"&&x.rel.toLowerCase()==="stylesheet"||f.removeChild(x),x=T}}else f==="body"&&Fu(s.ownerDocument.body);f=y}while(f);Jl(l)}function rw(s,l){var f=s;s=0;do{var h=f.nextSibling;if(f.nodeType===1?l?(f._stashedDisplay=f.style.display,f.style.display="none"):(f.style.display=f._stashedDisplay||"",f.getAttribute("style")===""&&f.removeAttribute("style")):f.nodeType===3&&(l?(f._stashedText=f.nodeValue,f.nodeValue=""):f.nodeValue=f._stashedText||""),h&&h.nodeType===8)if(f=h.data,f==="/$"){if(s===0)break;s--}else f!=="$"&&f!=="$?"&&f!=="$~"&&f!=="$!"||s++;f=h}while(f)}function cm(s){var l=s.firstChild;for(l&&l.nodeType===10&&(l=l.nextSibling);l;){var f=l;switch(l=l.nextSibling,f.nodeName){case"HTML":case"HEAD":case"BODY":cm(f),ml(f);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(f.rel.toLowerCase()==="stylesheet")continue}s.removeChild(f)}}function x4(s,l,f,h){for(;s.nodeType===1;){var y=f;if(s.nodeName.toLowerCase()!==l.toLowerCase()){if(!h&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(h){if(!s[Ji])switch(l){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(x=s.getAttribute("rel"),x==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(x!==y.rel||s.getAttribute("href")!==(y.href==null||y.href===""?null:y.href)||s.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin)||s.getAttribute("title")!==(y.title==null?null:y.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(x=s.getAttribute("src"),(x!==(y.src==null?null:y.src)||s.getAttribute("type")!==(y.type==null?null:y.type)||s.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin))&&x&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(l==="input"&&s.type==="hidden"){var x=y.name==null?null:""+y.name;if(y.type==="hidden"&&s.getAttribute("name")===x)return s}else return s;if(s=ui(s.nextSibling),s===null)break}return null}function w4(s,l,f){if(l==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!f||(s=ui(s.nextSibling),s===null))return null;return s}function iw(s,l){for(;s.nodeType!==8;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!l||(s=ui(s.nextSibling),s===null))return null;return s}function um(s){return s.data==="$?"||s.data==="$~"}function fm(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState!=="loading"}function E4(s,l){var f=s.ownerDocument;if(s.data==="$~")s._reactRetry=l;else if(s.data!=="$?"||f.readyState!=="loading")l();else{var h=function(){l(),f.removeEventListener("DOMContentLoaded",h)};f.addEventListener("DOMContentLoaded",h),s._reactRetry=h}}function ui(s){for(;s!=null;s=s.nextSibling){var l=s.nodeType;if(l===1||l===3)break;if(l===8){if(l=s.data,l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"||l==="F!"||l==="F")break;if(l==="/$"||l==="/&")return null}}return s}var dm=null;function aw(s){s=s.nextSibling;for(var l=0;s;){if(s.nodeType===8){var f=s.data;if(f==="/$"||f==="/&"){if(l===0)return ui(s.nextSibling);l--}else f!=="$"&&f!=="$!"&&f!=="$?"&&f!=="$~"&&f!=="&"||l++}s=s.nextSibling}return null}function sw(s){s=s.previousSibling;for(var l=0;s;){if(s.nodeType===8){var f=s.data;if(f==="$"||f==="$!"||f==="$?"||f==="$~"||f==="&"){if(l===0)return s;l--}else f!=="/$"&&f!=="/&"||l++}s=s.previousSibling}return null}function ow(s,l,f){switch(l=ch(f),s){case"html":if(s=l.documentElement,!s)throw Error(r(452));return s;case"head":if(s=l.head,!s)throw Error(r(453));return s;case"body":if(s=l.body,!s)throw Error(r(454));return s;default:throw Error(r(451))}}function Fu(s){for(var l=s.attributes;l.length;)s.removeAttributeNode(l[0]);ml(s)}var fi=new Map,lw=new Set;function uh(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var Ya=G.d;G.d={f:A4,r:b4,D:S4,C:C4,L:T4,m:I4,X:R4,S:N4,M:O4};function A4(){var s=Ya.f(),l=th();return s||l}function b4(s){var l=ei(s);l!==null&&l.tag===5&&l.type==="form"?S_(l):Ya.r(s)}var Wl=typeof document>"u"?null:document;function cw(s,l,f){var h=Wl;if(h&&typeof l=="string"&&l){var y=Cr(l);y='link[rel="'+s+'"][href="'+y+'"]',typeof f=="string"&&(y+='[crossorigin="'+f+'"]'),lw.has(y)||(lw.add(y),s={rel:s,crossOrigin:f,href:l},h.querySelector(y)===null&&(l=h.createElement("link"),tr(l,"link",s),yn(l),h.head.appendChild(l)))}}function S4(s){Ya.D(s),cw("dns-prefetch",s,null)}function C4(s,l){Ya.C(s,l),cw("preconnect",s,l)}function T4(s,l,f){Ya.L(s,l,f);var h=Wl;if(h&&s&&l){var y='link[rel="preload"][as="'+Cr(l)+'"]';l==="image"&&f&&f.imageSrcSet?(y+='[imagesrcset="'+Cr(f.imageSrcSet)+'"]',typeof f.imageSizes=="string"&&(y+='[imagesizes="'+Cr(f.imageSizes)+'"]')):y+='[href="'+Cr(s)+'"]';var x=y;switch(l){case"style":x=Ql(s);break;case"script":x=Zl(s)}fi.has(x)||(s=g({rel:"preload",href:l==="image"&&f&&f.imageSrcSet?void 0:s,as:l},f),fi.set(x,s),h.querySelector(y)!==null||l==="style"&&h.querySelector(Uu(x))||l==="script"&&h.querySelector(zu(x))||(l=h.createElement("link"),tr(l,"link",s),yn(l),h.head.appendChild(l)))}}function I4(s,l){Ya.m(s,l);var f=Wl;if(f&&s){var h=l&&typeof l.as=="string"?l.as:"script",y='link[rel="modulepreload"][as="'+Cr(h)+'"][href="'+Cr(s)+'"]',x=y;switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":x=Zl(s)}if(!fi.has(x)&&(s=g({rel:"modulepreload",href:s},l),fi.set(x,s),f.querySelector(y)===null)){switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(f.querySelector(zu(x)))return}h=f.createElement("link"),tr(h,"link",s),yn(h),f.head.appendChild(h)}}}function N4(s,l,f){Ya.S(s,l,f);var h=Wl;if(h&&s){var y=ta(h).hoistableStyles,x=Ql(s);l=l||"default";var T=y.get(x);if(!T){var B={loading:0,preload:null};if(T=h.querySelector(Uu(x)))B.loading=5;else{s=g({rel:"stylesheet",href:s,"data-precedence":l},f),(f=fi.get(x))&&hm(s,f);var X=T=h.createElement("link");yn(X),tr(X,"link",s),X._p=new Promise(function(te,ce){X.onload=te,X.onerror=ce}),X.addEventListener("load",function(){B.loading|=1}),X.addEventListener("error",function(){B.loading|=2}),B.loading|=4,fh(T,l,h)}T={type:"stylesheet",instance:T,count:1,state:B},y.set(x,T)}}}function R4(s,l){Ya.X(s,l);var f=Wl;if(f&&s){var h=ta(f).hoistableScripts,y=Zl(s),x=h.get(y);x||(x=f.querySelector(zu(y)),x||(s=g({src:s,async:!0},l),(l=fi.get(y))&&pm(s,l),x=f.createElement("script"),yn(x),tr(x,"link",s),f.head.appendChild(x)),x={type:"script",instance:x,count:1,state:null},h.set(y,x))}}function O4(s,l){Ya.M(s,l);var f=Wl;if(f&&s){var h=ta(f).hoistableScripts,y=Zl(s),x=h.get(y);x||(x=f.querySelector(zu(y)),x||(s=g({src:s,async:!0,type:"module"},l),(l=fi.get(y))&&pm(s,l),x=f.createElement("script"),yn(x),tr(x,"link",s),f.head.appendChild(x)),x={type:"script",instance:x,count:1,state:null},h.set(y,x))}}function uw(s,l,f,h){var y=(y=ye.current)?uh(y):null;if(!y)throw Error(r(446));switch(s){case"meta":case"title":return null;case"style":return typeof f.precedence=="string"&&typeof f.href=="string"?(l=Ql(f.href),f=ta(y).hoistableStyles,h=f.get(l),h||(h={type:"style",instance:null,count:0,state:null},f.set(l,h)),h):{type:"void",instance:null,count:0,state:null};case"link":if(f.rel==="stylesheet"&&typeof f.href=="string"&&typeof f.precedence=="string"){s=Ql(f.href);var x=ta(y).hoistableStyles,T=x.get(s);if(T||(y=y.ownerDocument||y,T={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},x.set(s,T),(x=y.querySelector(Uu(s)))&&!x._p&&(T.instance=x,T.state.loading=5),fi.has(s)||(f={rel:"preload",as:"style",href:f.href,crossOrigin:f.crossOrigin,integrity:f.integrity,media:f.media,hrefLang:f.hrefLang,referrerPolicy:f.referrerPolicy},fi.set(s,f),x||D4(y,s,f,T.state))),l&&h===null)throw Error(r(528,""));return T}if(l&&h!==null)throw Error(r(529,""));return null;case"script":return l=f.async,f=f.src,typeof f=="string"&&l&&typeof l!="function"&&typeof l!="symbol"?(l=Zl(f),f=ta(y).hoistableScripts,h=f.get(l),h||(h={type:"script",instance:null,count:0,state:null},f.set(l,h)),h):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,s))}}function Ql(s){return'href="'+Cr(s)+'"'}function Uu(s){return'link[rel="stylesheet"]['+s+"]"}function fw(s){return g({},s,{"data-precedence":s.precedence,precedence:null})}function D4(s,l,f,h){s.querySelector('link[rel="preload"][as="style"]['+l+"]")?h.loading=1:(l=s.createElement("link"),h.preload=l,l.addEventListener("load",function(){return h.loading|=1}),l.addEventListener("error",function(){return h.loading|=2}),tr(l,"link",f),yn(l),s.head.appendChild(l))}function Zl(s){return'[src="'+Cr(s)+'"]'}function zu(s){return"script[async]"+s}function dw(s,l,f){if(l.count++,l.instance===null)switch(l.type){case"style":var h=s.querySelector('style[data-href~="'+Cr(f.href)+'"]');if(h)return l.instance=h,yn(h),h;var y=g({},f,{"data-href":f.href,"data-precedence":f.precedence,href:null,precedence:null});return h=(s.ownerDocument||s).createElement("style"),yn(h),tr(h,"style",y),fh(h,f.precedence,s),l.instance=h;case"stylesheet":y=Ql(f.href);var x=s.querySelector(Uu(y));if(x)return l.state.loading|=4,l.instance=x,yn(x),x;h=fw(f),(y=fi.get(y))&&hm(h,y),x=(s.ownerDocument||s).createElement("link"),yn(x);var T=x;return T._p=new Promise(function(B,X){T.onload=B,T.onerror=X}),tr(x,"link",h),l.state.loading|=4,fh(x,f.precedence,s),l.instance=x;case"script":return x=Zl(f.src),(y=s.querySelector(zu(x)))?(l.instance=y,yn(y),y):(h=f,(y=fi.get(x))&&(h=g({},f),pm(h,y)),s=s.ownerDocument||s,y=s.createElement("script"),yn(y),tr(y,"link",h),s.head.appendChild(y),l.instance=y);case"void":return null;default:throw Error(r(443,l.type))}else l.type==="stylesheet"&&(l.state.loading&4)===0&&(h=l.instance,l.state.loading|=4,fh(h,f.precedence,s));return l.instance}function fh(s,l,f){for(var h=f.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),y=h.length?h[h.length-1]:null,x=y,T=0;T<h.length;T++){var B=h[T];if(B.dataset.precedence===l)x=B;else if(x!==y)break}x?x.parentNode.insertBefore(s,x.nextSibling):(l=f.nodeType===9?f.head:f,l.insertBefore(s,l.firstChild))}function hm(s,l){s.crossOrigin==null&&(s.crossOrigin=l.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=l.referrerPolicy),s.title==null&&(s.title=l.title)}function pm(s,l){s.crossOrigin==null&&(s.crossOrigin=l.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=l.referrerPolicy),s.integrity==null&&(s.integrity=l.integrity)}var dh=null;function hw(s,l,f){if(dh===null){var h=new Map,y=dh=new Map;y.set(f,h)}else y=dh,h=y.get(f),h||(h=new Map,y.set(f,h));if(h.has(s))return h;for(h.set(s,null),f=f.getElementsByTagName(s),y=0;y<f.length;y++){var x=f[y];if(!(x[Ji]||x[vn]||s==="link"&&x.getAttribute("rel")==="stylesheet")&&x.namespaceURI!=="http://www.w3.org/2000/svg"){var T=x.getAttribute(l)||"";T=s+T;var B=h.get(T);B?B.push(x):h.set(T,[x])}}return h}function pw(s,l,f){s=s.ownerDocument||s,s.head.insertBefore(f,l==="title"?s.querySelector("head > title"):null)}function M4(s,l,f){if(f===1||l.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof l.precedence!="string"||typeof l.href!="string"||l.href==="")break;return!0;case"link":if(typeof l.rel!="string"||typeof l.href!="string"||l.href===""||l.onLoad||l.onError)break;switch(l.rel){case"stylesheet":return s=l.disabled,typeof l.precedence=="string"&&s==null;default:return!0}case"script":if(l.async&&typeof l.async!="function"&&typeof l.async!="symbol"&&!l.onLoad&&!l.onError&&l.src&&typeof l.src=="string")return!0}return!1}function mw(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}function P4(s,l,f,h){if(f.type==="stylesheet"&&(typeof h.media!="string"||matchMedia(h.media).matches!==!1)&&(f.state.loading&4)===0){if(f.instance===null){var y=Ql(h.href),x=l.querySelector(Uu(y));if(x){l=x._p,l!==null&&typeof l=="object"&&typeof l.then=="function"&&(s.count++,s=hh.bind(s),l.then(s,s)),f.state.loading|=4,f.instance=x,yn(x);return}x=l.ownerDocument||l,h=fw(h),(y=fi.get(y))&&hm(h,y),x=x.createElement("link"),yn(x);var T=x;T._p=new Promise(function(B,X){T.onload=B,T.onerror=X}),tr(x,"link",h),f.instance=x}s.stylesheets===null&&(s.stylesheets=new Map),s.stylesheets.set(f,l),(l=f.state.preload)&&(f.state.loading&3)===0&&(s.count++,f=hh.bind(s),l.addEventListener("load",f),l.addEventListener("error",f))}}var mm=0;function k4(s,l){return s.stylesheets&&s.count===0&&mh(s,s.stylesheets),0<s.count||0<s.imgCount?function(f){var h=setTimeout(function(){if(s.stylesheets&&mh(s,s.stylesheets),s.unsuspend){var x=s.unsuspend;s.unsuspend=null,x()}},6e4+l);0<s.imgBytes&&mm===0&&(mm=62500*m4());var y=setTimeout(function(){if(s.waitingForImages=!1,s.count===0&&(s.stylesheets&&mh(s,s.stylesheets),s.unsuspend)){var x=s.unsuspend;s.unsuspend=null,x()}},(s.imgBytes>mm?50:800)+l);return s.unsuspend=f,function(){s.unsuspend=null,clearTimeout(h),clearTimeout(y)}}:null}function hh(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)mh(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var ph=null;function mh(s,l){s.stylesheets=null,s.unsuspend!==null&&(s.count++,ph=new Map,l.forEach(j4,s),ph=null,hh.call(s))}function j4(s,l){if(!(l.state.loading&4)){var f=ph.get(s);if(f)var h=f.get(null);else{f=new Map,ph.set(s,f);for(var y=s.querySelectorAll("link[data-precedence],style[data-precedence]"),x=0;x<y.length;x++){var T=y[x];(T.nodeName==="LINK"||T.getAttribute("media")!=="not all")&&(f.set(T.dataset.precedence,T),h=T)}h&&f.set(null,h)}y=l.instance,T=y.getAttribute("data-precedence"),x=f.get(T)||h,x===h&&f.set(null,y),f.set(T,y),this.count++,h=hh.bind(this),y.addEventListener("load",h),y.addEventListener("error",h),x?x.parentNode.insertBefore(y,x.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(y,s.firstChild)),l.state.loading|=4}}var Hu={$$typeof:V,Provider:null,Consumer:null,_currentValue:le,_currentValue2:le,_threadCount:0};function L4(s,l,f,h,y,x,T,B,X){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Qi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Qi(0),this.hiddenUpdates=Qi(null),this.identifierPrefix=h,this.onUncaughtError=y,this.onCaughtError=x,this.onRecoverableError=T,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=X,this.incompleteTransitions=new Map}function gw(s,l,f,h,y,x,T,B,X,te,ce,he){return s=new L4(s,l,f,T,X,te,ce,he,B),l=1,x===!0&&(l|=24),x=zr(3,null,null,l),s.current=x,x.stateNode=s,l=Yp(),l.refCount++,s.pooledCache=l,l.refCount++,x.memoizedState={element:h,isDehydrated:f,cache:l},Zp(x),s}function vw(s){return s?(s=Nl,s):Nl}function yw(s,l,f,h,y,x){y=vw(y),h.context===null?h.context=y:h.pendingContext=y,h=Es(l),h.payload={element:f},x=x===void 0?null:x,x!==null&&(h.callback=x),f=As(s,h,l),f!==null&&(Dr(f,s,l),wu(f,s,l))}function _w(s,l){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var f=s.retryLane;s.retryLane=f!==0&&f<l?f:l}}function gm(s,l){_w(s,l),(s=s.alternate)&&_w(s,l)}function xw(s){if(s.tag===13||s.tag===31){var l=Mo(s,67108864);l!==null&&Dr(l,s,67108864),gm(s,67108864)}}function ww(s){if(s.tag===13||s.tag===31){var l=Xr();l=wo(l);var f=Mo(s,l);f!==null&&Dr(f,s,l),gm(s,l)}}var gh=!0;function B4(s,l,f,h){var y=H.T;H.T=null;var x=G.p;try{G.p=2,vm(s,l,f,h)}finally{G.p=x,H.T=y}}function V4(s,l,f,h){var y=H.T;H.T=null;var x=G.p;try{G.p=8,vm(s,l,f,h)}finally{G.p=x,H.T=y}}function vm(s,l,f,h){if(gh){var y=ym(h);if(y===null)rm(s,l,h,vh,f),Aw(s,h);else if(U4(y,s,l,f,h))h.stopPropagation();else if(Aw(s,h),l&4&&-1<F4.indexOf(s)){for(;y!==null;){var x=ei(y);if(x!==null)switch(x.tag){case 3:if(x=x.stateNode,x.current.memoizedState.isDehydrated){var T=Ki(x.pendingLanes);if(T!==0){var B=x;for(B.pendingLanes|=2,B.entangledLanes|=2;T;){var X=1<<31-Ce(T);B.entanglements[1]|=X,T&=~X}pa(x),(bt&6)===0&&(Jd=tn()+500,Lu(0))}}break;case 31:case 13:B=Mo(x,2),B!==null&&Dr(B,x,2),th(),gm(x,2)}if(x=ym(h),x===null&&rm(s,l,h,vh,f),x===y)break;y=x}y!==null&&h.stopPropagation()}else rm(s,l,h,null,f)}}function ym(s){return s=ti(s),_m(s)}var vh=null;function _m(s){if(vh=null,s=ea(s),s!==null){var l=a(s);if(l===null)s=null;else{var f=l.tag;if(f===13){if(s=o(l),s!==null)return s;s=null}else if(f===31){if(s=c(l),s!==null)return s;s=null}else if(f===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;s=null}else l!==s&&(s=null)}}return vh=s,null}function Ew(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(fr()){case Jr:return 2;case ae:return 8;case Ae:case je:return 32;case fe:return 268435456;default:return 32}default:return 32}}var xm=!1,Ps=null,ks=null,js=null,Gu=new Map,qu=new Map,Ls=[],F4="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Aw(s,l){switch(s){case"focusin":case"focusout":Ps=null;break;case"dragenter":case"dragleave":ks=null;break;case"mouseover":case"mouseout":js=null;break;case"pointerover":case"pointerout":Gu.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":qu.delete(l.pointerId)}}function $u(s,l,f,h,y,x){return s===null||s.nativeEvent!==x?(s={blockedOn:l,domEventName:f,eventSystemFlags:h,nativeEvent:x,targetContainers:[y]},l!==null&&(l=ei(l),l!==null&&xw(l)),s):(s.eventSystemFlags|=h,l=s.targetContainers,y!==null&&l.indexOf(y)===-1&&l.push(y),s)}function U4(s,l,f,h,y){switch(l){case"focusin":return Ps=$u(Ps,s,l,f,h,y),!0;case"dragenter":return ks=$u(ks,s,l,f,h,y),!0;case"mouseover":return js=$u(js,s,l,f,h,y),!0;case"pointerover":var x=y.pointerId;return Gu.set(x,$u(Gu.get(x)||null,s,l,f,h,y)),!0;case"gotpointercapture":return x=y.pointerId,qu.set(x,$u(qu.get(x)||null,s,l,f,h,y)),!0}return!1}function bw(s){var l=ea(s.target);if(l!==null){var f=a(l);if(f!==null){if(l=f.tag,l===13){if(l=o(f),l!==null){s.blockedOn=l,bi(s.priority,function(){ww(f)});return}}else if(l===31){if(l=c(f),l!==null){s.blockedOn=l,bi(s.priority,function(){ww(f)});return}}else if(l===3&&f.stateNode.current.memoizedState.isDehydrated){s.blockedOn=f.tag===3?f.stateNode.containerInfo:null;return}}}s.blockedOn=null}function yh(s){if(s.blockedOn!==null)return!1;for(var l=s.targetContainers;0<l.length;){var f=ym(s.nativeEvent);if(f===null){f=s.nativeEvent;var h=new f.constructor(f.type,f);au=h,f.target.dispatchEvent(h),au=null}else return l=ei(f),l!==null&&xw(l),s.blockedOn=f,!1;l.shift()}return!0}function Sw(s,l,f){yh(s)&&f.delete(l)}function z4(){xm=!1,Ps!==null&&yh(Ps)&&(Ps=null),ks!==null&&yh(ks)&&(ks=null),js!==null&&yh(js)&&(js=null),Gu.forEach(Sw),qu.forEach(Sw)}function _h(s,l){s.blockedOn===l&&(s.blockedOn=null,xm||(xm=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,z4)))}var xh=null;function Cw(s){xh!==s&&(xh=s,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){xh===s&&(xh=null);for(var l=0;l<s.length;l+=3){var f=s[l],h=s[l+1],y=s[l+2];if(typeof h!="function"){if(_m(h||f)===null)continue;break}var x=ei(f);x!==null&&(s.splice(l,3),l-=3,y1(x,{pending:!0,data:y,method:f.method,action:h},h,y))}}))}function Jl(s){function l(X){return _h(X,s)}Ps!==null&&_h(Ps,s),ks!==null&&_h(ks,s),js!==null&&_h(js,s),Gu.forEach(l),qu.forEach(l);for(var f=0;f<Ls.length;f++){var h=Ls[f];h.blockedOn===s&&(h.blockedOn=null)}for(;0<Ls.length&&(f=Ls[0],f.blockedOn===null);)bw(f),f.blockedOn===null&&Ls.shift();if(f=(s.ownerDocument||s).$$reactFormReplay,f!=null)for(h=0;h<f.length;h+=3){var y=f[h],x=f[h+1],T=y[Vn]||null;if(typeof x=="function")T||Cw(f);else if(T){var B=null;if(x&&x.hasAttribute("formAction")){if(y=x,T=x[Vn]||null)B=T.formAction;else if(_m(y)!==null)continue}else B=T.action;typeof B=="function"?f[h+1]=B:(f.splice(h,3),h-=3),Cw(f)}}}function Tw(){function s(x){x.canIntercept&&x.info==="react-transition"&&x.intercept({handler:function(){return new Promise(function(T){return y=T})},focusReset:"manual",scroll:"manual"})}function l(){y!==null&&(y(),y=null),h||setTimeout(f,20)}function f(){if(!h&&!navigation.transition){var x=navigation.currentEntry;x&&x.url!=null&&navigation.navigate(x.url,{state:x.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var h=!1,y=null;return navigation.addEventListener("navigate",s),navigation.addEventListener("navigatesuccess",l),navigation.addEventListener("navigateerror",l),setTimeout(f,100),function(){h=!0,navigation.removeEventListener("navigate",s),navigation.removeEventListener("navigatesuccess",l),navigation.removeEventListener("navigateerror",l),y!==null&&(y(),y=null)}}}function wm(s){this._internalRoot=s}wh.prototype.render=wm.prototype.render=function(s){var l=this._internalRoot;if(l===null)throw Error(r(409));var f=l.current,h=Xr();yw(f,h,s,l,null,null)},wh.prototype.unmount=wm.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var l=s.containerInfo;yw(s.current,2,null,s,null,null),th(),l[Zi]=null}};function wh(s){this._internalRoot=s}wh.prototype.unstable_scheduleHydration=function(s){if(s){var l=td();s={blockedOn:null,target:s,priority:l};for(var f=0;f<Ls.length&&l!==0&&l<Ls[f].priority;f++);Ls.splice(f,0,s),f===0&&bw(s)}};var Iw=e.version;if(Iw!=="19.2.0")throw Error(r(527,Iw,"19.2.0"));G.findDOMNode=function(s){var l=s._reactInternals;if(l===void 0)throw typeof s.render=="function"?Error(r(188)):(s=Object.keys(s).join(","),Error(r(268,s)));return s=d(l),s=s!==null?m(s):null,s=s===null?null:s.stateNode,s};var H4={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:H,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Eh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Eh.isDisabled&&Eh.supportsFiber)try{ze=Eh.inject(H4),Je=Eh}catch{}}return Yu.createRoot=function(s,l){if(!i(s))throw Error(r(299));var f=!1,h="",y=k_,x=j_,T=L_;return l!=null&&(l.unstable_strictMode===!0&&(f=!0),l.identifierPrefix!==void 0&&(h=l.identifierPrefix),l.onUncaughtError!==void 0&&(y=l.onUncaughtError),l.onCaughtError!==void 0&&(x=l.onCaughtError),l.onRecoverableError!==void 0&&(T=l.onRecoverableError)),l=gw(s,1,!1,null,null,f,h,null,y,x,T,Tw),s[Zi]=l.current,nm(s),new wm(l)},Yu.hydrateRoot=function(s,l,f){if(!i(s))throw Error(r(299));var h=!1,y="",x=k_,T=j_,B=L_,X=null;return f!=null&&(f.unstable_strictMode===!0&&(h=!0),f.identifierPrefix!==void 0&&(y=f.identifierPrefix),f.onUncaughtError!==void 0&&(x=f.onUncaughtError),f.onCaughtError!==void 0&&(T=f.onCaughtError),f.onRecoverableError!==void 0&&(B=f.onRecoverableError),f.formState!==void 0&&(X=f.formState)),l=gw(s,1,!0,l,f??null,h,y,X,x,T,B,Tw),l.context=vw(null),f=l.current,h=Xr(),h=wo(h),y=Es(h),y.callback=null,As(f,y,h),f=h,l.current.lanes=f,_o(l,f),pa(l),s[Zi]=l.current,nm(s),new wh(l)},Yu.version="19.2.0",Yu}var Bw;function eN(){if(Bw)return bm.exports;Bw=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),bm.exports=J4(),bm.exports}var tN=eN();/**
 * react-router v7.9.4
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Vw="popstate";function nN(n={}){function e(r,i){let{pathname:a,search:o,hash:c}=r.location;return Ng("",{pathname:a,search:o,hash:c},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function t(r,i){return typeof i=="string"?i:wf(i)}return iN(e,t,null,n)}function en(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function xi(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function rN(){return Math.random().toString(36).substring(2,10)}function Fw(n,e){return{usr:n.state,key:n.key,idx:e}}function Ng(n,e,t=null,r){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?Oc(e):e,state:t,key:e&&e.key||r||rN()}}function wf({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function Oc(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substring(r),n=n.substring(0,r)),n&&(e.pathname=n)}return e}function iN(n,e,t,r={}){let{window:i=document.defaultView,v5Compat:a=!1}=r,o=i.history,c="POP",u=null,d=m();d==null&&(d=0,o.replaceState({...o.state,idx:d},""));function m(){return(o.state||{idx:null}).idx}function g(){c="POP";let D=m(),C=D==null?null:D-d;d=D,u&&u({action:c,location:S.location,delta:C})}function _(D,C){c="PUSH";let k=Ng(S.location,D,C);d=m()+1;let V=Fw(k,d),z=S.createHref(k);try{o.pushState(V,"",z)}catch(q){if(q instanceof DOMException&&q.name==="DataCloneError")throw q;i.location.assign(z)}a&&u&&u({action:c,location:S.location,delta:1})}function w(D,C){c="REPLACE";let k=Ng(S.location,D,C);d=m();let V=Fw(k,d),z=S.createHref(k);o.replaceState(V,"",z),a&&u&&u({action:c,location:S.location,delta:0})}function A(D){return aN(D)}let S={get action(){return c},get location(){return n(i,o)},listen(D){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(Vw,g),u=D,()=>{i.removeEventListener(Vw,g),u=null}},createHref(D){return e(i,D)},createURL:A,encodeLocation(D){let C=A(D);return{pathname:C.pathname,search:C.search,hash:C.hash}},push:_,replace:w,go(D){return o.go(D)}};return S}function aN(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),en(t,"No window.location.(origin|href) available to create URL");let r=typeof n=="string"?n:wf(n);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=t+r),new URL(r,t)}function hS(n,e,t="/"){return sN(n,e,t,!1)}function sN(n,e,t,r){let i=typeof e=="string"?Oc(e):e,a=ts(i.pathname||"/",t);if(a==null)return null;let o=pS(n);oN(o);let c=null;for(let u=0;c==null&&u<o.length;++u){let d=yN(a);c=gN(o[u],d,r)}return c}function pS(n,e=[],t=[],r="",i=!1){let a=(o,c,u=i,d)=>{let m={relativePath:d===void 0?o.path||"":d,caseSensitive:o.caseSensitive===!0,childrenIndex:c,route:o};if(m.relativePath.startsWith("/")){if(!m.relativePath.startsWith(r)&&u)return;en(m.relativePath.startsWith(r),`Absolute route path "${m.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),m.relativePath=m.relativePath.slice(r.length)}let g=Za([r,m.relativePath]),_=t.concat(m);o.children&&o.children.length>0&&(en(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${g}".`),pS(o.children,e,_,g,u)),!(o.path==null&&!o.index)&&e.push({path:g,score:pN(g,o.index),routesMeta:_})};return n.forEach((o,c)=>{if(o.path===""||!o.path?.includes("?"))a(o,c);else for(let u of mS(o.path))a(o,c,!0,u)}),e}function mS(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,i=t.endsWith("?"),a=t.replace(/\?$/,"");if(r.length===0)return i?[a,""]:[a];let o=mS(r.join("/")),c=[];return c.push(...o.map(u=>u===""?a:[a,u].join("/"))),i&&c.push(...o),c.map(u=>n.startsWith("/")&&u===""?"/":u)}function oN(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:mN(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}var lN=/^:[\w-]+$/,cN=3,uN=2,fN=1,dN=10,hN=-2,Uw=n=>n==="*";function pN(n,e){let t=n.split("/"),r=t.length;return t.some(Uw)&&(r+=hN),e&&(r+=uN),t.filter(i=>!Uw(i)).reduce((i,a)=>i+(lN.test(a)?cN:a===""?fN:dN),r)}function mN(n,e){return n.length===e.length&&n.slice(0,-1).every((r,i)=>r===e[i])?n[n.length-1]-e[e.length-1]:0}function gN(n,e,t=!1){let{routesMeta:r}=n,i={},a="/",o=[];for(let c=0;c<r.length;++c){let u=r[c],d=c===r.length-1,m=a==="/"?e:e.slice(a.length)||"/",g=i0({path:u.relativePath,caseSensitive:u.caseSensitive,end:d},m),_=u.route;if(!g&&d&&t&&!r[r.length-1].route.index&&(g=i0({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},m)),!g)return null;Object.assign(i,g.params),o.push({params:i,pathname:Za([a,g.pathname]),pathnameBase:EN(Za([a,g.pathnameBase])),route:_}),g.pathnameBase!=="/"&&(a=Za([a,g.pathnameBase]))}return o}function i0(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=vN(n.path,n.caseSensitive,n.end),i=e.match(t);if(!i)return null;let a=i[0],o=a.replace(/(.)\/+$/,"$1"),c=i.slice(1);return{params:r.reduce((d,{paramName:m,isOptional:g},_)=>{if(m==="*"){let A=c[_]||"";o=a.slice(0,a.length-A.length).replace(/(.)\/+$/,"$1")}const w=c[_];return g&&!w?d[m]=void 0:d[m]=(w||"").replace(/%2F/g,"/"),d},{}),pathname:a,pathnameBase:o,pattern:n}}function vN(n,e=!1,t=!0){xi(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let r=[],i="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,c,u)=>(r.push({paramName:c,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return n.endsWith("*")?(r.push({paramName:"*"}),i+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?i+="\\/*$":n!==""&&n!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function yN(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return xi(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function ts(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}function _N(n,e="/"){let{pathname:t,search:r="",hash:i=""}=typeof n=="string"?Oc(n):n;return{pathname:t?t.startsWith("/")?t:xN(t,e):e,search:AN(r),hash:bN(i)}}function xN(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(i=>{i===".."?t.length>1&&t.pop():i!=="."&&t.push(i)}),t.length>1?t.join("/"):"/"}function Im(n,e,t,r){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function wN(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function Dv(n){let e=wN(n);return e.map((t,r)=>r===e.length-1?t.pathname:t.pathnameBase)}function Mv(n,e,t,r=!1){let i;typeof n=="string"?i=Oc(n):(i={...n},en(!i.pathname||!i.pathname.includes("?"),Im("?","pathname","search",i)),en(!i.pathname||!i.pathname.includes("#"),Im("#","pathname","hash",i)),en(!i.search||!i.search.includes("#"),Im("#","search","hash",i)));let a=n===""||i.pathname==="",o=a?"/":i.pathname,c;if(o==null)c=t;else{let g=e.length-1;if(!r&&o.startsWith("..")){let _=o.split("/");for(;_[0]==="..";)_.shift(),g-=1;i.pathname=_.join("/")}c=g>=0?e[g]:"/"}let u=_N(i,c),d=o&&o!=="/"&&o.endsWith("/"),m=(a||o===".")&&t.endsWith("/");return!u.pathname.endsWith("/")&&(d||m)&&(u.pathname+="/"),u}var Za=n=>n.join("/").replace(/\/\/+/g,"/"),EN=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),AN=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,bN=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function SN(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}var gS=["POST","PUT","PATCH","DELETE"];new Set(gS);var CN=["GET",...gS];new Set(CN);var Dc=P.createContext(null);Dc.displayName="DataRouter";var z0=P.createContext(null);z0.displayName="DataRouterState";P.createContext(!1);var vS=P.createContext({isTransitioning:!1});vS.displayName="ViewTransition";var TN=P.createContext(new Map);TN.displayName="Fetchers";var IN=P.createContext(null);IN.displayName="Await";var qi=P.createContext(null);qi.displayName="Navigation";var jf=P.createContext(null);jf.displayName="Location";var $i=P.createContext({outlet:null,matches:[],isDataRoute:!1});$i.displayName="Route";var Pv=P.createContext(null);Pv.displayName="RouteError";function NN(n,{relative:e}={}){en(Mc(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:r}=P.useContext(qi),{hash:i,pathname:a,search:o}=Lf(n,{relative:e}),c=a;return t!=="/"&&(c=a==="/"?t:Za([t,a])),r.createHref({pathname:c,search:o,hash:i})}function Mc(){return P.useContext(jf)!=null}function Xi(){return en(Mc(),"useLocation() may be used only in the context of a <Router> component."),P.useContext(jf).location}var yS="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function _S(n){P.useContext(qi).static||P.useLayoutEffect(n)}function ol(){let{isDataRoute:n}=P.useContext($i);return n?HN():RN()}function RN(){en(Mc(),"useNavigate() may be used only in the context of a <Router> component.");let n=P.useContext(Dc),{basename:e,navigator:t}=P.useContext(qi),{matches:r}=P.useContext($i),{pathname:i}=Xi(),a=JSON.stringify(Dv(r)),o=P.useRef(!1);return _S(()=>{o.current=!0}),P.useCallback((u,d={})=>{if(xi(o.current,yS),!o.current)return;if(typeof u=="number"){t.go(u);return}let m=Mv(u,JSON.parse(a),i,d.relative==="path");n==null&&e!=="/"&&(m.pathname=m.pathname==="/"?e:Za([e,m.pathname])),(d.replace?t.replace:t.push)(m,d.state,d)},[e,t,a,i,n])}P.createContext(null);function ON(){let{matches:n}=P.useContext($i),e=n[n.length-1];return e?e.params:{}}function Lf(n,{relative:e}={}){let{matches:t}=P.useContext($i),{pathname:r}=Xi(),i=JSON.stringify(Dv(t));return P.useMemo(()=>Mv(n,JSON.parse(i),r,e==="path"),[n,i,r,e])}function DN(n,e){return xS(n,e)}function xS(n,e,t,r,i){en(Mc(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=P.useContext(qi),{matches:o}=P.useContext($i),c=o[o.length-1],u=c?c.params:{},d=c?c.pathname:"/",m=c?c.pathnameBase:"/",g=c&&c.route;{let k=g&&g.path||"";wS(d,!g||k.endsWith("*")||k.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${d}" (under <Route path="${k}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${k}"> to <Route path="${k==="/"?"*":`${k}/*`}">.`)}let _=Xi(),w;if(e){let k=typeof e=="string"?Oc(e):e;en(m==="/"||k.pathname?.startsWith(m),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${m}" but pathname "${k.pathname}" was given in the \`location\` prop.`),w=k}else w=_;let A=w.pathname||"/",S=A;if(m!=="/"){let k=m.replace(/^\//,"").split("/");S="/"+A.replace(/^\//,"").split("/").slice(k.length).join("/")}let D=hS(n,{pathname:S});xi(g||D!=null,`No routes matched location "${w.pathname}${w.search}${w.hash}" `),xi(D==null||D[D.length-1].route.element!==void 0||D[D.length-1].route.Component!==void 0||D[D.length-1].route.lazy!==void 0,`Matched leaf route at location "${w.pathname}${w.search}${w.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let C=LN(D&&D.map(k=>Object.assign({},k,{params:Object.assign({},u,k.params),pathname:Za([m,a.encodeLocation?a.encodeLocation(k.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:k.pathname]),pathnameBase:k.pathnameBase==="/"?m:Za([m,a.encodeLocation?a.encodeLocation(k.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:k.pathnameBase])})),o,t,r,i);return e&&C?P.createElement(jf.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...w},navigationType:"POP"}},C):C}function MN(){let n=zN(),e=SN(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},a={padding:"2px 4px",backgroundColor:r},o=null;return console.error("Error handled by React Router default ErrorBoundary:",n),o=P.createElement(P.Fragment,null,P.createElement("p",null," Hey developer "),P.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",P.createElement("code",{style:a},"ErrorBoundary")," or"," ",P.createElement("code",{style:a},"errorElement")," prop on your route.")),P.createElement(P.Fragment,null,P.createElement("h2",null,"Unexpected Application Error!"),P.createElement("h3",{style:{fontStyle:"italic"}},e),t?P.createElement("pre",{style:i},t):null,o)}var PN=P.createElement(MN,null),kN=class extends P.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){this.props.unstable_onError?this.props.unstable_onError(n,e):console.error("React Router caught the following error during render",n)}render(){return this.state.error!==void 0?P.createElement($i.Provider,{value:this.props.routeContext},P.createElement(Pv.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function jN({routeContext:n,match:e,children:t}){let r=P.useContext(Dc);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),P.createElement($i.Provider,{value:n},t)}function LN(n,e=[],t=null,r=null,i=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let a=n,o=t?.errors;if(o!=null){let d=a.findIndex(m=>m.route.id&&o?.[m.route.id]!==void 0);en(d>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),a=a.slice(0,Math.min(a.length,d+1))}let c=!1,u=-1;if(t)for(let d=0;d<a.length;d++){let m=a[d];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(u=d),m.route.id){let{loaderData:g,errors:_}=t,w=m.route.loader&&!g.hasOwnProperty(m.route.id)&&(!_||_[m.route.id]===void 0);if(m.route.lazy||w){c=!0,u>=0?a=a.slice(0,u+1):a=[a[0]];break}}}return a.reduceRight((d,m,g)=>{let _,w=!1,A=null,S=null;t&&(_=o&&m.route.id?o[m.route.id]:void 0,A=m.route.errorElement||PN,c&&(u<0&&g===0?(wS("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),w=!0,S=null):u===g&&(w=!0,S=m.route.hydrateFallbackElement||null)));let D=e.concat(a.slice(0,g+1)),C=()=>{let k;return _?k=A:w?k=S:m.route.Component?k=P.createElement(m.route.Component,null):m.route.element?k=m.route.element:k=d,P.createElement(jN,{match:m,routeContext:{outlet:d,matches:D,isDataRoute:t!=null},children:k})};return t&&(m.route.ErrorBoundary||m.route.errorElement||g===0)?P.createElement(kN,{location:t.location,revalidation:t.revalidation,component:A,error:_,children:C(),routeContext:{outlet:null,matches:D,isDataRoute:!0},unstable_onError:r}):C()},null)}function kv(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function BN(n){let e=P.useContext(Dc);return en(e,kv(n)),e}function VN(n){let e=P.useContext(z0);return en(e,kv(n)),e}function FN(n){let e=P.useContext($i);return en(e,kv(n)),e}function jv(n){let e=FN(n),t=e.matches[e.matches.length-1];return en(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function UN(){return jv("useRouteId")}function zN(){let n=P.useContext(Pv),e=VN("useRouteError"),t=jv("useRouteError");return n!==void 0?n:e.errors?.[t]}function HN(){let{router:n}=BN("useNavigate"),e=jv("useNavigate"),t=P.useRef(!1);return _S(()=>{t.current=!0}),P.useCallback(async(i,a={})=>{xi(t.current,yS),t.current&&(typeof i=="number"?n.navigate(i):await n.navigate(i,{fromRouteId:e,...a}))},[n,e])}var zw={};function wS(n,e,t){!e&&!zw[n]&&(zw[n]=!0,xi(!1,t))}P.memo(GN);function GN({routes:n,future:e,state:t,unstable_onError:r}){return xS(n,void 0,t,r,e)}function di({to:n,replace:e,state:t,relative:r}){en(Mc(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=P.useContext(qi);xi(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:a}=P.useContext($i),{pathname:o}=Xi(),c=ol(),u=Mv(n,Dv(a),o,r==="path"),d=JSON.stringify(u);return P.useEffect(()=>{c(JSON.parse(d),{replace:e,state:t,relative:r})},[c,d,r,e,t]),null}function Jt(n){en(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function qN({basename:n="/",children:e=null,location:t,navigationType:r="POP",navigator:i,static:a=!1}){en(!Mc(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=n.replace(/^\/*/,"/"),c=P.useMemo(()=>({basename:o,navigator:i,static:a,future:{}}),[o,i,a]);typeof t=="string"&&(t=Oc(t));let{pathname:u="/",search:d="",hash:m="",state:g=null,key:_="default"}=t,w=P.useMemo(()=>{let A=ts(u,o);return A==null?null:{location:{pathname:A,search:d,hash:m,state:g,key:_},navigationType:r}},[o,u,d,m,g,_,r]);return xi(w!=null,`<Router basename="${o}"> is not able to match the URL "${u}${d}${m}" because it does not start with the basename, so the <Router> won't render anything.`),w==null?null:P.createElement(qi.Provider,{value:c},P.createElement(jf.Provider,{children:e,value:w}))}function ES({children:n,location:e}){return DN(Rg(n),e)}function Rg(n,e=[]){let t=[];return P.Children.forEach(n,(r,i)=>{if(!P.isValidElement(r))return;let a=[...e,i];if(r.type===P.Fragment){t.push.apply(t,Rg(r.props.children,a));return}en(r.type===Jt,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),en(!r.props.index||!r.props.children,"An index route cannot have child routes.");let o={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Rg(r.props.children,a)),t.push(o)}),t}var Uh="get",zh="application/x-www-form-urlencoded";function H0(n){return n!=null&&typeof n.tagName=="string"}function $N(n){return H0(n)&&n.tagName.toLowerCase()==="button"}function XN(n){return H0(n)&&n.tagName.toLowerCase()==="form"}function YN(n){return H0(n)&&n.tagName.toLowerCase()==="input"}function KN(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function WN(n,e){return n.button===0&&(!e||e==="_self")&&!KN(n)}function Og(n=""){return new URLSearchParams(typeof n=="string"||Array.isArray(n)||n instanceof URLSearchParams?n:Object.keys(n).reduce((e,t)=>{let r=n[t];return e.concat(Array.isArray(r)?r.map(i=>[t,i]):[[t,r]])},[]))}function QN(n,e){let t=Og(n);return e&&e.forEach((r,i)=>{t.has(i)||e.getAll(i).forEach(a=>{t.append(i,a)})}),t}var Ah=null;function ZN(){if(Ah===null)try{new FormData(document.createElement("form"),0),Ah=!1}catch{Ah=!0}return Ah}var JN=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Nm(n){return n!=null&&!JN.has(n)?(xi(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${zh}"`),null):n}function eR(n,e){let t,r,i,a,o;if(XN(n)){let c=n.getAttribute("action");r=c?ts(c,e):null,t=n.getAttribute("method")||Uh,i=Nm(n.getAttribute("enctype"))||zh,a=new FormData(n)}else if($N(n)||YN(n)&&(n.type==="submit"||n.type==="image")){let c=n.form;if(c==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let u=n.getAttribute("formaction")||c.getAttribute("action");if(r=u?ts(u,e):null,t=n.getAttribute("formmethod")||c.getAttribute("method")||Uh,i=Nm(n.getAttribute("formenctype"))||Nm(c.getAttribute("enctype"))||zh,a=new FormData(c,n),!ZN()){let{name:d,type:m,value:g}=n;if(m==="image"){let _=d?`${d}.`:"";a.append(`${_}x`,"0"),a.append(`${_}y`,"0")}else d&&a.append(d,g)}}else{if(H0(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Uh,r=null,i=zh,o=n}return a&&i==="text/plain"&&(o=a,a=void 0),{action:r,method:t.toLowerCase(),encType:i,formData:a,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Lv(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function tR(n,e,t){let r=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return r.pathname==="/"?r.pathname=`_root.${t}`:e&&ts(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.${t}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${t}`,r}async function nR(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function rR(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function iR(n,e,t){let r=await Promise.all(n.map(async i=>{let a=e.routes[i.route.id];if(a){let o=await nR(a,t);return o.links?o.links():[]}return[]}));return lR(r.flat(1).filter(rR).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function Hw(n,e,t,r,i,a){let o=(u,d)=>t[d]?u.route.id!==t[d].route.id:!0,c=(u,d)=>t[d].pathname!==u.pathname||t[d].route.path?.endsWith("*")&&t[d].params["*"]!==u.params["*"];return a==="assets"?e.filter((u,d)=>o(u,d)||c(u,d)):a==="data"?e.filter((u,d)=>{let m=r.routes[u.route.id];if(!m||!m.hasLoader)return!1;if(o(u,d)||c(u,d))return!0;if(u.route.shouldRevalidate){let g=u.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:t[0]?.params||{},nextUrl:new URL(n,window.origin),nextParams:u.params,defaultShouldRevalidate:!0});if(typeof g=="boolean")return g}return!0}):[]}function aR(n,e,{includeHydrateFallback:t}={}){return sR(n.map(r=>{let i=e.routes[r.route.id];if(!i)return[];let a=[i.module];return i.clientActionModule&&(a=a.concat(i.clientActionModule)),i.clientLoaderModule&&(a=a.concat(i.clientLoaderModule)),t&&i.hydrateFallbackModule&&(a=a.concat(i.hydrateFallbackModule)),i.imports&&(a=a.concat(i.imports)),a}).flat(1))}function sR(n){return[...new Set(n)]}function oR(n){let e={},t=Object.keys(n).sort();for(let r of t)e[r]=n[r];return e}function lR(n,e){let t=new Set;return new Set(e),n.reduce((r,i)=>{let a=JSON.stringify(oR(i));return t.has(a)||(t.add(a),r.push({key:a,link:i})),r},[])}function AS(){let n=P.useContext(Dc);return Lv(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function cR(){let n=P.useContext(z0);return Lv(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var Bv=P.createContext(void 0);Bv.displayName="FrameworkContext";function bS(){let n=P.useContext(Bv);return Lv(n,"You must render this element inside a <HydratedRouter> element"),n}function uR(n,e){let t=P.useContext(Bv),[r,i]=P.useState(!1),[a,o]=P.useState(!1),{onFocus:c,onBlur:u,onMouseEnter:d,onMouseLeave:m,onTouchStart:g}=e,_=P.useRef(null);P.useEffect(()=>{if(n==="render"&&o(!0),n==="viewport"){let S=C=>{C.forEach(k=>{o(k.isIntersecting)})},D=new IntersectionObserver(S,{threshold:.5});return _.current&&D.observe(_.current),()=>{D.disconnect()}}},[n]),P.useEffect(()=>{if(r){let S=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(S)}}},[r]);let w=()=>{i(!0)},A=()=>{i(!1),o(!1)};return t?n!=="intent"?[a,_,{}]:[a,_,{onFocus:Ku(c,w),onBlur:Ku(u,A),onMouseEnter:Ku(d,w),onMouseLeave:Ku(m,A),onTouchStart:Ku(g,w)}]:[!1,_,{}]}function Ku(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function fR({page:n,...e}){let{router:t}=AS(),r=P.useMemo(()=>hS(t.routes,n,t.basename),[t.routes,n,t.basename]);return r?P.createElement(hR,{page:n,matches:r,...e}):null}function dR(n){let{manifest:e,routeModules:t}=bS(),[r,i]=P.useState([]);return P.useEffect(()=>{let a=!1;return iR(n,e,t).then(o=>{a||i(o)}),()=>{a=!0}},[n,e,t]),r}function hR({page:n,matches:e,...t}){let r=Xi(),{manifest:i,routeModules:a}=bS(),{basename:o}=AS(),{loaderData:c,matches:u}=cR(),d=P.useMemo(()=>Hw(n,e,u,i,r,"data"),[n,e,u,i,r]),m=P.useMemo(()=>Hw(n,e,u,i,r,"assets"),[n,e,u,i,r]),g=P.useMemo(()=>{if(n===r.pathname+r.search+r.hash)return[];let A=new Set,S=!1;if(e.forEach(C=>{let k=i.routes[C.route.id];!k||!k.hasLoader||(!d.some(V=>V.route.id===C.route.id)&&C.route.id in c&&a[C.route.id]?.shouldRevalidate||k.hasClientLoader?S=!0:A.add(C.route.id))}),A.size===0)return[];let D=tR(n,o,"data");return S&&A.size>0&&D.searchParams.set("_routes",e.filter(C=>A.has(C.route.id)).map(C=>C.route.id).join(",")),[D.pathname+D.search]},[o,c,r,i,d,e,n,a]),_=P.useMemo(()=>aR(m,i),[m,i]),w=dR(m);return P.createElement(P.Fragment,null,g.map(A=>P.createElement("link",{key:A,rel:"prefetch",as:"fetch",href:A,...t})),_.map(A=>P.createElement("link",{key:A,rel:"modulepreload",href:A,...t})),w.map(({key:A,link:S})=>P.createElement("link",{key:A,nonce:t.nonce,...S})))}function pR(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var SS=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{SS&&(window.__reactRouterVersion="7.9.4")}catch{}function mR({basename:n,children:e,window:t}){let r=P.useRef();r.current==null&&(r.current=nN({window:t,v5Compat:!0}));let i=r.current,[a,o]=P.useState({action:i.action,location:i.location}),c=P.useCallback(u=>{P.startTransition(()=>o(u))},[o]);return P.useLayoutEffect(()=>i.listen(c),[i,c]),P.createElement(qN,{basename:n,children:e,location:a.location,navigationType:a.action,navigator:i})}var CS=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,a0=P.forwardRef(function({onClick:e,discover:t="render",prefetch:r="none",relative:i,reloadDocument:a,replace:o,state:c,target:u,to:d,preventScrollReset:m,viewTransition:g,..._},w){let{basename:A}=P.useContext(qi),S=typeof d=="string"&&CS.test(d),D,C=!1;if(typeof d=="string"&&S&&(D=d,SS))try{let R=new URL(window.location.href),I=d.startsWith("//")?new URL(R.protocol+d):new URL(d),O=ts(I.pathname,A);I.origin===R.origin&&O!=null?d=O+I.search+I.hash:C=!0}catch{xi(!1,`<Link to="${d}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let k=NN(d,{relative:i}),[V,z,q]=uR(r,_),$=_R(d,{replace:o,state:c,target:u,preventScrollReset:m,relative:i,viewTransition:g});function M(R){e&&e(R),R.defaultPrevented||$(R)}let b=P.createElement("a",{..._,...q,href:D||k,onClick:C||a?e:M,ref:pR(w,z),target:u,"data-discover":!S&&t==="render"?"true":void 0});return V&&!S?P.createElement(P.Fragment,null,b,P.createElement(fR,{page:k})):b});a0.displayName="Link";var gR=P.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:i=!1,style:a,to:o,viewTransition:c,children:u,...d},m){let g=Lf(o,{relative:d.relative}),_=Xi(),w=P.useContext(z0),{navigator:A,basename:S}=P.useContext(qi),D=w!=null&&bR(g)&&c===!0,C=A.encodeLocation?A.encodeLocation(g).pathname:g.pathname,k=_.pathname,V=w&&w.navigation&&w.navigation.location?w.navigation.location.pathname:null;t||(k=k.toLowerCase(),V=V?V.toLowerCase():null,C=C.toLowerCase()),V&&S&&(V=ts(V,S)||V);const z=C!=="/"&&C.endsWith("/")?C.length-1:C.length;let q=k===C||!i&&k.startsWith(C)&&k.charAt(z)==="/",$=V!=null&&(V===C||!i&&V.startsWith(C)&&V.charAt(C.length)==="/"),M={isActive:q,isPending:$,isTransitioning:D},b=q?e:void 0,R;typeof r=="function"?R=r(M):R=[r,q?"active":null,$?"pending":null,D?"transitioning":null].filter(Boolean).join(" ");let I=typeof a=="function"?a(M):a;return P.createElement(a0,{...d,"aria-current":b,className:R,ref:m,style:I,to:o,viewTransition:c},typeof u=="function"?u(M):u)});gR.displayName="NavLink";var vR=P.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:r,replace:i,state:a,method:o=Uh,action:c,onSubmit:u,relative:d,preventScrollReset:m,viewTransition:g,..._},w)=>{let A=ER(),S=AR(c,{relative:d}),D=o.toLowerCase()==="get"?"get":"post",C=typeof c=="string"&&CS.test(c),k=V=>{if(u&&u(V),V.defaultPrevented)return;V.preventDefault();let z=V.nativeEvent.submitter,q=z?.getAttribute("formmethod")||o;A(z||V.currentTarget,{fetcherKey:e,method:q,navigate:t,replace:i,state:a,relative:d,preventScrollReset:m,viewTransition:g})};return P.createElement("form",{ref:w,method:D,action:S,onSubmit:r?u:k,..._,"data-discover":!C&&n==="render"?"true":void 0})});vR.displayName="Form";function yR(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function TS(n){let e=P.useContext(Dc);return en(e,yR(n)),e}function _R(n,{target:e,replace:t,state:r,preventScrollReset:i,relative:a,viewTransition:o}={}){let c=ol(),u=Xi(),d=Lf(n,{relative:a});return P.useCallback(m=>{if(WN(m,e)){m.preventDefault();let g=t!==void 0?t:wf(u)===wf(d);c(n,{replace:g,state:r,preventScrollReset:i,relative:a,viewTransition:o})}},[u,c,d,t,r,e,n,i,a,o])}function Vv(n){xi(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=P.useRef(Og(n)),t=P.useRef(!1),r=Xi(),i=P.useMemo(()=>QN(r.search,t.current?null:e.current),[r.search]),a=ol(),o=P.useCallback((c,u)=>{const d=Og(typeof c=="function"?c(new URLSearchParams(i)):c);t.current=!0,a("?"+d,u)},[a,i]);return[i,o]}var xR=0,wR=()=>`__${String(++xR)}__`;function ER(){let{router:n}=TS("useSubmit"),{basename:e}=P.useContext(qi),t=UN();return P.useCallback(async(r,i={})=>{let{action:a,method:o,encType:c,formData:u,body:d}=eR(r,e);if(i.navigate===!1){let m=i.fetcherKey||wR();await n.fetch(m,t,i.action||a,{preventScrollReset:i.preventScrollReset,formData:u,body:d,formMethod:i.method||o,formEncType:i.encType||c,flushSync:i.flushSync})}else await n.navigate(i.action||a,{preventScrollReset:i.preventScrollReset,formData:u,body:d,formMethod:i.method||o,formEncType:i.encType||c,replace:i.replace,state:i.state,fromRouteId:t,flushSync:i.flushSync,viewTransition:i.viewTransition})},[n,e,t])}function AR(n,{relative:e}={}){let{basename:t}=P.useContext(qi),r=P.useContext($i);en(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),a={...Lf(n||".",{relative:e})},o=Xi();if(n==null){a.search=o.search;let c=new URLSearchParams(a.search),u=c.getAll("index");if(u.some(m=>m==="")){c.delete("index"),u.filter(g=>g).forEach(g=>c.append("index",g));let m=c.toString();a.search=m?`?${m}`:""}}return(!n||n===".")&&i.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(a.pathname=a.pathname==="/"?t:Za([t,a.pathname])),wf(a)}function bR(n,{relative:e}={}){let t=P.useContext(vS);en(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=TS("useViewTransitionState"),i=Lf(n,{relative:e});if(!t.isTransitioning)return!1;let a=ts(t.currentLocation.pathname,r)||t.currentLocation.pathname,o=ts(t.nextLocation.pathname,r)||t.nextLocation.pathname;return i0(i.pathname,o)!=null||i0(i.pathname,a)!=null}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SR=()=>{};var Gw={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IS=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},CR=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const a=n[t++];e[r++]=String.fromCharCode((i&31)<<6|a&63)}else if(i>239&&i<365){const a=n[t++],o=n[t++],c=n[t++],u=((i&7)<<18|(a&63)<<12|(o&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const a=n[t++],o=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(a&63)<<6|o&63)}}return e.join("")},NS={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const a=n[i],o=i+1<n.length,c=o?n[i+1]:0,u=i+2<n.length,d=u?n[i+2]:0,m=a>>2,g=(a&3)<<4|c>>4;let _=(c&15)<<2|d>>6,w=d&63;u||(w=64,o||(_=64)),r.push(t[m],t[g],t[_],t[w])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(IS(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):CR(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const a=t[n.charAt(i++)],c=i<n.length?t[n.charAt(i)]:0;++i;const d=i<n.length?t[n.charAt(i)]:64;++i;const g=i<n.length?t[n.charAt(i)]:64;if(++i,a==null||c==null||d==null||g==null)throw new TR;const _=a<<2|c>>4;if(r.push(_),d!==64){const w=c<<4&240|d>>2;if(r.push(w),g!==64){const A=d<<6&192|g;r.push(A)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class TR extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const IR=function(n){const e=IS(n);return NS.encodeByteArray(e,!0)},s0=function(n){return IR(n).replace(/\./g,"")},RS=function(n){try{return NS.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NR(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RR=()=>NR().__FIREBASE_DEFAULTS__,OR=()=>{if(typeof process>"u"||typeof Gw>"u")return;const n=Gw.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},DR=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&RS(n[1]);return e&&JSON.parse(e)},G0=()=>{try{return SR()||RR()||OR()||DR()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},OS=n=>G0()?.emulatorHosts?.[n],MR=n=>{const e=OS(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},DS=()=>G0()?.config,MS=n=>G0()?.[`_${n}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PR{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pc(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function PS(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kR(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,a=n.sub||n.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}},...n};return[s0(JSON.stringify(t)),s0(JSON.stringify(o)),""].join(".")}const df={};function jR(){const n={prod:[],emulator:[]};for(const e of Object.keys(df))df[e]?n.emulator.push(e):n.prod.push(e);return n}function LR(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let qw=!1;function kS(n,e){if(typeof window>"u"||typeof document>"u"||!Pc(window.location.host)||df[n]===e||df[n]||qw)return;df[n]=e;function t(_){return`__firebase__banner__${_}`}const r="__firebase__banner",a=jR().prod.length>0;function o(){const _=document.getElementById(r);_&&_.remove()}function c(_){_.style.display="flex",_.style.background="#7faaf0",_.style.position="fixed",_.style.bottom="5px",_.style.left="5px",_.style.padding=".5em",_.style.borderRadius="5px",_.style.alignItems="center"}function u(_,w){_.setAttribute("width","24"),_.setAttribute("id",w),_.setAttribute("height","24"),_.setAttribute("viewBox","0 0 24 24"),_.setAttribute("fill","none"),_.style.marginLeft="-6px"}function d(){const _=document.createElement("span");return _.style.cursor="pointer",_.style.marginLeft="16px",_.style.fontSize="24px",_.innerHTML=" &times;",_.onclick=()=>{qw=!0,o()},_}function m(_,w){_.setAttribute("id",w),_.innerText="Learn more",_.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",_.setAttribute("target","__blank"),_.style.paddingLeft="5px",_.style.textDecoration="underline"}function g(){const _=LR(r),w=t("text"),A=document.getElementById(w)||document.createElement("span"),S=t("learnmore"),D=document.getElementById(S)||document.createElement("a"),C=t("preprendIcon"),k=document.getElementById(C)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(_.created){const V=_.element;c(V),m(D,S);const z=d();u(k,C),V.append(k,A,D,z),document.body.appendChild(V)}a?(A.innerText="Preview backend disconnected.",k.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(k.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,A.innerText="Preview backend running in this workspace."),A.setAttribute("id",w)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",g):g()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vr(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function BR(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(vr())}function VR(){const n=G0()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function FR(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function UR(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function zR(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function HR(){const n=vr();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function GR(){return!VR()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function qR(){try{return typeof indexedDB=="object"}catch{return!1}}function $R(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XR="FirebaseError";class Ia extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=XR,Object.setPrototypeOf(this,Ia.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Bf.prototype.create)}}class Bf{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},i=`${this.service}/${e}`,a=this.errors[e],o=a?YR(a,r):"Error",c=`${this.serviceName}: ${o} (${i}).`;return new Ia(i,c,r)}}function YR(n,e){return n.replace(KR,(t,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const KR=/\{\$([^}]+)}/g;function WR(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function nl(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const i of t){if(!r.includes(i))return!1;const a=n[i],o=e[i];if($w(a)&&$w(o)){if(!nl(a,o))return!1}else if(a!==o)return!1}for(const i of r)if(!t.includes(i))return!1;return!0}function $w(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vf(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function ef(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,a]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(a)}}),e}function tf(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function QR(n,e){const t=new ZR(n,e);return t.subscribe.bind(t)}class ZR{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");JR(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=Rm),i.error===void 0&&(i.error=Rm),i.complete===void 0&&(i.complete=Rm);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function JR(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Rm(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gn(n){return n&&n._delegate?n._delegate:n}class rl{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ko="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e8{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new PR;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(n8(e))try{this.getOrInitializeService({instanceIdentifier:Ko})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const a=this.getOrInitializeService({instanceIdentifier:i});r.resolve(a)}catch{}}}}clearInstance(e=Ko){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ko){return this.instances.has(e)}getOptions(e=Ko){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[a,o]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(a);r===c&&o.resolve(i)}return i}onInit(e,t){const r=this.normalizeInstanceIdentifier(t),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const a=this.instances.get(r);return a&&e(a,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:t8(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Ko){return this.component?this.component.multipleInstances?e:Ko:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function t8(n){return n===Ko?void 0:n}function n8(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r8{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new e8(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ct;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(ct||(ct={}));const i8={debug:ct.DEBUG,verbose:ct.VERBOSE,info:ct.INFO,warn:ct.WARN,error:ct.ERROR,silent:ct.SILENT},a8=ct.INFO,s8={[ct.DEBUG]:"log",[ct.VERBOSE]:"log",[ct.INFO]:"info",[ct.WARN]:"warn",[ct.ERROR]:"error"},o8=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),i=s8[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Fv{constructor(e){this.name=e,this._logLevel=a8,this._logHandler=o8,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ct))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?i8[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ct.DEBUG,...e),this._logHandler(this,ct.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ct.VERBOSE,...e),this._logHandler(this,ct.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ct.INFO,...e),this._logHandler(this,ct.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ct.WARN,...e),this._logHandler(this,ct.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ct.ERROR,...e),this._logHandler(this,ct.ERROR,...e)}}const l8=(n,e)=>e.some(t=>n instanceof t);let Xw,Yw;function c8(){return Xw||(Xw=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function u8(){return Yw||(Yw=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const jS=new WeakMap,Dg=new WeakMap,LS=new WeakMap,Om=new WeakMap,Uv=new WeakMap;function f8(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",a),n.removeEventListener("error",o)},a=()=>{t(Ws(n.result)),i()},o=()=>{r(n.error),i()};n.addEventListener("success",a),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&jS.set(t,n)}).catch(()=>{}),Uv.set(e,n),e}function d8(n){if(Dg.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",a),n.removeEventListener("error",o),n.removeEventListener("abort",o)},a=()=>{t(),i()},o=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",a),n.addEventListener("error",o),n.addEventListener("abort",o)});Dg.set(n,e)}let Mg={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Dg.get(n);if(e==="objectStoreNames")return n.objectStoreNames||LS.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Ws(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function h8(n){Mg=n(Mg)}function p8(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(Dm(this),e,...t);return LS.set(r,e.sort?e.sort():[e]),Ws(r)}:u8().includes(n)?function(...e){return n.apply(Dm(this),e),Ws(jS.get(this))}:function(...e){return Ws(n.apply(Dm(this),e))}}function m8(n){return typeof n=="function"?p8(n):(n instanceof IDBTransaction&&d8(n),l8(n,c8())?new Proxy(n,Mg):n)}function Ws(n){if(n instanceof IDBRequest)return f8(n);if(Om.has(n))return Om.get(n);const e=m8(n);return e!==n&&(Om.set(n,e),Uv.set(e,n)),e}const Dm=n=>Uv.get(n);function g8(n,e,{blocked:t,upgrade:r,blocking:i,terminated:a}={}){const o=indexedDB.open(n,e),c=Ws(o);return r&&o.addEventListener("upgradeneeded",u=>{r(Ws(o.result),u.oldVersion,u.newVersion,Ws(o.transaction),u)}),t&&o.addEventListener("blocked",u=>t(u.oldVersion,u.newVersion,u)),c.then(u=>{a&&u.addEventListener("close",()=>a()),i&&u.addEventListener("versionchange",d=>i(d.oldVersion,d.newVersion,d))}).catch(()=>{}),c}const v8=["get","getKey","getAll","getAllKeys","count"],y8=["put","add","delete","clear"],Mm=new Map;function Kw(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Mm.get(e))return Mm.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=y8.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||v8.includes(t)))return;const a=async function(o,...c){const u=this.transaction(o,i?"readwrite":"readonly");let d=u.store;return r&&(d=d.index(c.shift())),(await Promise.all([d[t](...c),i&&u.done]))[0]};return Mm.set(e,a),a}h8(n=>({...n,get:(e,t,r)=>Kw(e,t)||n.get(e,t,r),has:(e,t)=>!!Kw(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _8{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(x8(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function x8(n){return n.getComponent()?.type==="VERSION"}const Pg="@firebase/app",Ww="0.14.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ns=new Fv("@firebase/app"),w8="@firebase/app-compat",E8="@firebase/analytics-compat",A8="@firebase/analytics",b8="@firebase/app-check-compat",S8="@firebase/app-check",C8="@firebase/auth",T8="@firebase/auth-compat",I8="@firebase/database",N8="@firebase/data-connect",R8="@firebase/database-compat",O8="@firebase/functions",D8="@firebase/functions-compat",M8="@firebase/installations",P8="@firebase/installations-compat",k8="@firebase/messaging",j8="@firebase/messaging-compat",L8="@firebase/performance",B8="@firebase/performance-compat",V8="@firebase/remote-config",F8="@firebase/remote-config-compat",U8="@firebase/storage",z8="@firebase/storage-compat",H8="@firebase/firestore",G8="@firebase/ai",q8="@firebase/firestore-compat",$8="firebase",X8="12.3.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kg="[DEFAULT]",Y8={[Pg]:"fire-core",[w8]:"fire-core-compat",[A8]:"fire-analytics",[E8]:"fire-analytics-compat",[S8]:"fire-app-check",[b8]:"fire-app-check-compat",[C8]:"fire-auth",[T8]:"fire-auth-compat",[I8]:"fire-rtdb",[N8]:"fire-data-connect",[R8]:"fire-rtdb-compat",[O8]:"fire-fn",[D8]:"fire-fn-compat",[M8]:"fire-iid",[P8]:"fire-iid-compat",[k8]:"fire-fcm",[j8]:"fire-fcm-compat",[L8]:"fire-perf",[B8]:"fire-perf-compat",[V8]:"fire-rc",[F8]:"fire-rc-compat",[U8]:"fire-gcs",[z8]:"fire-gcs-compat",[H8]:"fire-fst",[q8]:"fire-fst-compat",[G8]:"fire-vertex","fire-js":"fire-js",[$8]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ef=new Map,K8=new Map,jg=new Map;function Qw(n,e){try{n.container.addComponent(e)}catch(t){ns.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function wc(n){const e=n.name;if(jg.has(e))return ns.debug(`There were multiple attempts to register component ${e}.`),!1;jg.set(e,n);for(const t of Ef.values())Qw(t,n);for(const t of K8.values())Qw(t,n);return!0}function zv(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function gi(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W8={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Qs=new Bf("app","Firebase",W8);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q8{constructor(e,t,r){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new rl("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Qs.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kc=X8;function BS(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r={name:kg,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw Qs.create("bad-app-name",{appName:String(i)});if(t||(t=DS()),!t)throw Qs.create("no-options");const a=Ef.get(i);if(a){if(nl(t,a.options)&&nl(r,a.config))return a;throw Qs.create("duplicate-app",{appName:i})}const o=new r8(i);for(const u of jg.values())o.addComponent(u);const c=new Q8(t,r,o);return Ef.set(i,c),c}function VS(n=kg){const e=Ef.get(n);if(!e&&n===kg&&DS())return BS();if(!e)throw Qs.create("no-app",{appName:n});return e}function Zw(){return Array.from(Ef.values())}function Zs(n,e,t){let r=Y8[n]??n;t&&(r+=`-${t}`);const i=r.match(/\s|\//),a=e.match(/\s|\//);if(i||a){const o=[`Unable to register library "${r}" with version "${e}":`];i&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&a&&o.push("and"),a&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ns.warn(o.join(" "));return}wc(new rl(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z8="firebase-heartbeat-database",J8=1,Af="firebase-heartbeat-store";let Pm=null;function FS(){return Pm||(Pm=g8(Z8,J8,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Af)}catch(t){console.warn(t)}}}}).catch(n=>{throw Qs.create("idb-open",{originalErrorMessage:n.message})})),Pm}async function e6(n){try{const t=(await FS()).transaction(Af),r=await t.objectStore(Af).get(US(n));return await t.done,r}catch(e){if(e instanceof Ia)ns.warn(e.message);else{const t=Qs.create("idb-get",{originalErrorMessage:e?.message});ns.warn(t.message)}}}async function Jw(n,e){try{const r=(await FS()).transaction(Af,"readwrite");await r.objectStore(Af).put(e,US(n)),await r.done}catch(t){if(t instanceof Ia)ns.warn(t.message);else{const r=Qs.create("idb-set",{originalErrorMessage:t?.message});ns.warn(r.message)}}}function US(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t6=1024,n6=30;class r6{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new a6(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=eE();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:t}),this._heartbeatsCache.heartbeats.length>n6){const i=s6(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){ns.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=eE(),{heartbeatsToSend:t,unsentEntries:r}=i6(this._heartbeatsCache.heartbeats),i=s0(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return ns.warn(e),""}}}function eE(){return new Date().toISOString().substring(0,10)}function i6(n,e=t6){const t=[];let r=n.slice();for(const i of n){const a=t.find(o=>o.agent===i.agent);if(a){if(a.dates.push(i.date),tE(t)>e){a.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),tE(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class a6{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return qR()?$R().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await e6(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Jw(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Jw(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function tE(n){return s0(JSON.stringify({version:2,heartbeats:n})).length}function s6(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o6(n){wc(new rl("platform-logger",e=>new _8(e),"PRIVATE")),wc(new rl("heartbeat",e=>new r6(e),"PRIVATE")),Zs(Pg,Ww,n),Zs(Pg,Ww,"esm2020"),Zs("fire-js","")}o6("");function zS(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const l6=zS,HS=new Bf("auth","Firebase",zS());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o0=new Fv("@firebase/auth");function c6(n,...e){o0.logLevel<=ct.WARN&&o0.warn(`Auth (${kc}): ${n}`,...e)}function Hh(n,...e){o0.logLevel<=ct.ERROR&&o0.error(`Auth (${kc}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hi(n,...e){throw Hv(n,...e)}function xa(n,...e){return Hv(n,...e)}function GS(n,e,t){const r={...l6(),[e]:t};return new Bf("auth","Firebase",r).create(e,{appName:n.name})}function Ja(n){return GS(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Hv(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return HS.create(n,...e)}function qe(n,e,...t){if(!n)throw Hv(e,...t)}function Wa(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Hh(e),new Error(e)}function rs(n,e){n||Wa(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lg(){return typeof self<"u"&&self.location?.href||""}function u6(){return nE()==="http:"||nE()==="https:"}function nE(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f6(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(u6()||UR()||"connection"in navigator)?navigator.onLine:!0}function d6(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ff{constructor(e,t){this.shortDelay=e,this.longDelay=t,rs(t>e,"Short delay should be less than long delay!"),this.isMobile=BR()||zR()}get(){return f6()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gv(n,e){rs(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qS{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Wa("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Wa("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Wa("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h6={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p6=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],m6=new Ff(3e4,6e4);function po(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function mo(n,e,t,r,i={}){return $S(n,i,async()=>{let a={},o={};r&&(e==="GET"?o=r:a={body:JSON.stringify(r)});const c=Vf({key:n.config.apiKey,...o}).slice(1),u=await n._getAdditionalHeaders();u["Content-Type"]="application/json",n.languageCode&&(u["X-Firebase-Locale"]=n.languageCode);const d={method:e,headers:u,...a};return FR()||(d.referrerPolicy="no-referrer"),n.emulatorConfig&&Pc(n.emulatorConfig.host)&&(d.credentials="include"),qS.fetch()(await XS(n,n.config.apiHost,t,c),d)})}async function $S(n,e,t){n._canInitEmulator=!1;const r={...h6,...e};try{const i=new v6(n),a=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();const o=await a.json();if("needConfirmation"in o)throw bh(n,"account-exists-with-different-credential",o);if(a.ok&&!("errorMessage"in o))return o;{const c=a.ok?o.errorMessage:o.error.message,[u,d]=c.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw bh(n,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw bh(n,"email-already-in-use",o);if(u==="USER_DISABLED")throw bh(n,"user-disabled",o);const m=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw GS(n,m,d);Hi(n,m)}}catch(i){if(i instanceof Ia)throw i;Hi(n,"network-request-failed",{message:String(i)})}}async function Uf(n,e,t,r,i={}){const a=await mo(n,e,t,r,i);return"mfaPendingCredential"in a&&Hi(n,"multi-factor-auth-required",{_serverResponse:a}),a}async function XS(n,e,t,r){const i=`${e}${t}?${r}`,a=n,o=a.config.emulator?Gv(n.config,i):`${n.config.apiScheme}://${i}`;return p6.includes(t)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(o).toString():o}function g6(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class v6{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(xa(this.auth,"network-request-failed")),m6.get())})}}function bh(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=xa(n,e,r);return i.customData._tokenResponse=t,i}function rE(n){return n!==void 0&&n.enterprise!==void 0}class y6{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return g6(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function _6(n,e){return mo(n,"GET","/v2/recaptchaConfig",po(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function x6(n,e){return mo(n,"POST","/v1/accounts:delete",e)}async function l0(n,e){return mo(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hf(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function w6(n,e=!1){const t=gn(n),r=await t.getIdToken(e),i=qv(r);qe(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const a=typeof i.firebase=="object"?i.firebase:void 0,o=a?.sign_in_provider;return{claims:i,token:r,authTime:hf(km(i.auth_time)),issuedAtTime:hf(km(i.iat)),expirationTime:hf(km(i.exp)),signInProvider:o||null,signInSecondFactor:a?.sign_in_second_factor||null}}function km(n){return Number(n)*1e3}function qv(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Hh("JWT malformed, contained fewer than 3 sections"),null;try{const i=RS(t);return i?JSON.parse(i):(Hh("Failed to decode base64 JWT payload"),null)}catch(i){return Hh("Caught error parsing JWT payload as JSON",i?.toString()),null}}function iE(n){const e=qv(n);return qe(e,"internal-error"),qe(typeof e.exp<"u","internal-error"),qe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bf(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof Ia&&E6(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function E6({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A6{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bg{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=hf(this.lastLoginAt),this.creationTime=hf(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function c0(n){const e=n.auth,t=await n.getIdToken(),r=await bf(n,l0(e,{idToken:t}));qe(r?.users.length,e,"internal-error");const i=r.users[0];n._notifyReloadListener(i);const a=i.providerUserInfo?.length?YS(i.providerUserInfo):[],o=S6(n.providerData,a),c=n.isAnonymous,u=!(n.email&&i.passwordHash)&&!o?.length,d=c?u:!1,m={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Bg(i.createdAt,i.lastLoginAt),isAnonymous:d};Object.assign(n,m)}async function b6(n){const e=gn(n);await c0(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function S6(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function YS(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function C6(n,e){const t=await $S(n,{},async()=>{const r=Vf({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:a}=n.config,o=await XS(n,i,"/v1/token",`key=${a}`),c=await n._getAdditionalHeaders();c["Content-Type"]="application/x-www-form-urlencoded";const u={method:"POST",headers:c,body:r};return n.emulatorConfig&&Pc(n.emulatorConfig.host)&&(u.credentials="include"),qS.fetch()(o,u)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function T6(n,e){return mo(n,"POST","/v2/accounts:revokeToken",po(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gc{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){qe(e.idToken,"internal-error"),qe(typeof e.idToken<"u","internal-error"),qe(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):iE(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){qe(e.length!==0,"internal-error");const t=iE(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(qe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:i,expiresIn:a}=await C6(e,t);this.updateTokensAndExpiration(r,i,Number(a))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:a}=t,o=new gc;return r&&(qe(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(qe(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),a&&(qe(typeof a=="number","internal-error",{appName:e}),o.expirationTime=a),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new gc,this.toJSON())}_performRefresh(){return Wa("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vs(n,e){qe(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Bi{constructor({uid:e,auth:t,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new A6(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Bg(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await bf(this,this.stsTokenManager.getToken(this.auth,e));return qe(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return w6(this,e)}reload(){return b6(this)}_assign(e){this!==e&&(qe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Bi({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){qe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await c0(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(gi(this.auth.app))return Promise.reject(Ja(this.auth));const e=await this.getIdToken();return await bf(this,x6(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const r=t.displayName??void 0,i=t.email??void 0,a=t.phoneNumber??void 0,o=t.photoURL??void 0,c=t.tenantId??void 0,u=t._redirectEventId??void 0,d=t.createdAt??void 0,m=t.lastLoginAt??void 0,{uid:g,emailVerified:_,isAnonymous:w,providerData:A,stsTokenManager:S}=t;qe(g&&S,e,"internal-error");const D=gc.fromJSON(this.name,S);qe(typeof g=="string",e,"internal-error"),Vs(r,e.name),Vs(i,e.name),qe(typeof _=="boolean",e,"internal-error"),qe(typeof w=="boolean",e,"internal-error"),Vs(a,e.name),Vs(o,e.name),Vs(c,e.name),Vs(u,e.name),Vs(d,e.name),Vs(m,e.name);const C=new Bi({uid:g,auth:e,email:i,emailVerified:_,displayName:r,isAnonymous:w,photoURL:o,phoneNumber:a,tenantId:c,stsTokenManager:D,createdAt:d,lastLoginAt:m});return A&&Array.isArray(A)&&(C.providerData=A.map(k=>({...k}))),u&&(C._redirectEventId=u),C}static async _fromIdTokenResponse(e,t,r=!1){const i=new gc;i.updateFromServerResponse(t);const a=new Bi({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await c0(a),a}static async _fromGetAccountInfoResponse(e,t,r){const i=t.users[0];qe(i.localId!==void 0,"internal-error");const a=i.providerUserInfo!==void 0?YS(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!a?.length,c=new gc;c.updateFromIdToken(r);const u=new Bi({uid:i.localId,auth:e,stsTokenManager:c,isAnonymous:o}),d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new Bg(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!a?.length};return Object.assign(u,d),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aE=new Map;function Qa(n){rs(n instanceof Function,"Expected a class definition");let e=aE.get(n);return e?(rs(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,aE.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KS{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}KS.type="NONE";const sE=KS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gh(n,e,t){return`firebase:${n}:${e}:${t}`}class vc{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:a}=this.auth;this.fullUserKey=Gh(this.userKey,i.apiKey,a),this.fullPersistenceKey=Gh("persistence",i.apiKey,a),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await l0(this.auth,{idToken:e}).catch(()=>{});return t?Bi._fromGetAccountInfoResponse(this.auth,t,e):null}return Bi._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new vc(Qa(sE),e,r);const i=(await Promise.all(t.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let a=i[0]||Qa(sE);const o=Gh(r,e.config.apiKey,e.name);let c=null;for(const d of t)try{const m=await d._get(o);if(m){let g;if(typeof m=="string"){const _=await l0(e,{idToken:m}).catch(()=>{});if(!_)break;g=await Bi._fromGetAccountInfoResponse(e,_,m)}else g=Bi._fromJSON(e,m);d!==a&&(c=g),a=d;break}}catch{}const u=i.filter(d=>d._shouldAllowMigration);return!a._shouldAllowMigration||!u.length?new vc(a,e,r):(a=u[0],c&&await a._set(o,c.toJSON()),await Promise.all(t.map(async d=>{if(d!==a)try{await d._remove(o)}catch{}})),new vc(a,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oE(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(JS(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(WS(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(tC(e))return"Blackberry";if(nC(e))return"Webos";if(QS(e))return"Safari";if((e.includes("chrome/")||ZS(e))&&!e.includes("edge/"))return"Chrome";if(eC(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function WS(n=vr()){return/firefox\//i.test(n)}function QS(n=vr()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function ZS(n=vr()){return/crios\//i.test(n)}function JS(n=vr()){return/iemobile/i.test(n)}function eC(n=vr()){return/android/i.test(n)}function tC(n=vr()){return/blackberry/i.test(n)}function nC(n=vr()){return/webos/i.test(n)}function $v(n=vr()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function I6(n=vr()){return $v(n)&&!!window.navigator?.standalone}function N6(){return HR()&&document.documentMode===10}function rC(n=vr()){return $v(n)||eC(n)||nC(n)||tC(n)||/windows phone/i.test(n)||JS(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iC(n,e=[]){let t;switch(n){case"Browser":t=oE(vr());break;case"Worker":t=`${oE(vr())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${kc}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R6{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=a=>new Promise((o,c)=>{try{const u=e(a);o(u)}catch(u){c(u)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function O6(n,e={}){return mo(n,"GET","/v2/passwordPolicy",po(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D6=6;class M6{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??D6,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P6{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new lE(this),this.idTokenSubscription=new lE(this),this.beforeStateQueue=new R6(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=HS,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Qa(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await vc.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await l0(this,{idToken:e}),r=await Bi._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(gi(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(o,o))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let r=t,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=this.redirectUser?._redirectEventId,o=r?._redirectEventId,c=await this.tryRedirectSignIn(e);(!a||a===o)&&c?.user&&(r=c.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(a){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return qe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await c0(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=d6()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(gi(this.app))return Promise.reject(Ja(this));const t=e?gn(e):null;return t&&qe(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&qe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return gi(this.app)?Promise.reject(Ja(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return gi(this.app)?Promise.reject(Ja(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Qa(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await O6(this),t=new M6(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Bf("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await T6(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Qa(e)||this._popupRedirectResolver;qe(t,this,"argument-error"),this.redirectPersistenceManager=await vc.create(this,[Qa(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const a=typeof t=="function"?t:t.next.bind(t);let o=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(qe(c,this,"internal-error"),c.then(()=>{o||a(this.currentUser)}),typeof t=="function"){const u=e.addObserver(t,r,i);return()=>{o=!0,u()}}else{const u=e.addObserver(t);return()=>{o=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return qe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=iC(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(gi(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&c6(`Error while retrieving App Check token: ${e.error}`),e?.token}}function ll(n){return gn(n)}class lE{constructor(e){this.auth=e,this.observer=null,this.addObserver=QR(t=>this.observer=t)}get next(){return qe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let q0={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function k6(n){q0=n}function aC(n){return q0.loadJS(n)}function j6(){return q0.recaptchaEnterpriseScript}function L6(){return q0.gapiScript}function B6(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class V6{constructor(){this.enterprise=new F6}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class F6{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const U6="recaptcha-enterprise",sC="NO_RECAPTCHA";class z6{constructor(e){this.type=U6,this.auth=ll(e)}async verify(e="verify",t=!1){async function r(a){if(!t){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(o,c)=>{_6(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{const d=new y6(u);return a.tenantId==null?a._agentRecaptchaConfig=d:a._tenantRecaptchaConfigs[a.tenantId]=d,o(d.siteKey)}}).catch(u=>{c(u)})})}function i(a,o,c){const u=window.grecaptcha;rE(u)?u.enterprise.ready(()=>{u.enterprise.execute(a,{action:e}).then(d=>{o(d)}).catch(()=>{o(sC)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new V6().execute("siteKey",{action:"verify"}):new Promise((a,o)=>{r(this.auth).then(c=>{if(!t&&rE(window.grecaptcha))i(c,a,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let u=j6();u.length!==0&&(u+=c),aC(u).then(()=>{i(c,a,o)}).catch(d=>{o(d)})}}).catch(c=>{o(c)})})}}async function cE(n,e,t,r=!1,i=!1){const a=new z6(n);let o;if(i)o=sC;else try{o=await a.verify(t)}catch{o=await a.verify(t,!0)}const c={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in c){const u=c.phoneEnrollmentInfo.phoneNumber,d=c.phoneEnrollmentInfo.recaptchaToken;Object.assign(c,{phoneEnrollmentInfo:{phoneNumber:u,recaptchaToken:d,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in c){const u=c.phoneSignInInfo.recaptchaToken;Object.assign(c,{phoneSignInInfo:{recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return c}return r?Object.assign(c,{captchaResp:o}):Object.assign(c,{captchaResponse:o}),Object.assign(c,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(c,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),c}async function uE(n,e,t,r,i){if(n._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await cE(n,e,t,t==="getOobCode");return r(n,a)}else return r(n,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await cE(n,e,t,t==="getOobCode");return r(n,o)}else return Promise.reject(a)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H6(n,e){const t=zv(n,"auth");if(t.isInitialized()){const i=t.getImmediate(),a=t.getOptions();if(nl(a,e??{}))return i;Hi(i,"already-initialized")}return t.initialize({options:e})}function G6(n,e){const t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(Qa);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function q6(n,e,t){const r=ll(n);qe(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,a=oC(e),{host:o,port:c}=$6(e),u=c===null?"":`:${c}`,d={url:`${a}//${o}${u}/`},m=Object.freeze({host:o,port:c,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){qe(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),qe(nl(d,r.config.emulator)&&nl(m,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=d,r.emulatorConfig=m,r.settings.appVerificationDisabledForTesting=!0,Pc(o)?(PS(`${a}//${o}${u}`),kS("Auth",!0)):X6()}function oC(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function $6(n){const e=oC(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const a=i[1];return{host:a,port:fE(r.substr(a.length+1))}}else{const[a,o]=r.split(":");return{host:a,port:fE(o)}}}function fE(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function X6(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xv{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Wa("not implemented")}_getIdTokenResponse(e){return Wa("not implemented")}_linkToIdToken(e,t){return Wa("not implemented")}_getReauthenticationResolver(e){return Wa("not implemented")}}async function Y6(n,e){return mo(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function K6(n,e){return Uf(n,"POST","/v1/accounts:signInWithPassword",po(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function W6(n,e){return Uf(n,"POST","/v1/accounts:signInWithEmailLink",po(n,e))}async function Q6(n,e){return Uf(n,"POST","/v1/accounts:signInWithEmailLink",po(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sf extends Xv{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new Sf(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new Sf(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return uE(e,t,"signInWithPassword",K6);case"emailLink":return W6(e,{email:this._email,oobCode:this._password});default:Hi(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return uE(e,r,"signUpPassword",Y6);case"emailLink":return Q6(e,{idToken:t,email:this._email,oobCode:this._password});default:Hi(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yc(n,e){return Uf(n,"POST","/v1/accounts:signInWithIdp",po(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z6="http://localhost";class il extends Xv{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new il(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Hi("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,...a}=t;if(!r||!i)return null;const o=new il(r,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}_getIdTokenResponse(e){const t=this.buildRequest();return yc(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,yc(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,yc(e,t)}buildRequest(){const e={requestUri:Z6,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Vf(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J6(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function eO(n){const e=ef(tf(n)).link,t=e?ef(tf(e)).deep_link_id:null,r=ef(tf(n)).deep_link_id;return(r?ef(tf(r)).link:null)||r||t||e||n}class Yv{constructor(e){const t=ef(tf(e)),r=t.apiKey??null,i=t.oobCode??null,a=J6(t.mode??null);qe(r&&i&&a,"argument-error"),this.apiKey=r,this.operation=a,this.code=i,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=eO(e);try{return new Yv(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jc{constructor(){this.providerId=jc.PROVIDER_ID}static credential(e,t){return Sf._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=Yv.parseLink(t);return qe(r,"argument-error"),Sf._fromEmailAndCode(e,r.code,r.tenantId)}}jc.PROVIDER_ID="password";jc.EMAIL_PASSWORD_SIGN_IN_METHOD="password";jc.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lC{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zf extends lC{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gs extends zf{constructor(){super("facebook.com")}static credential(e){return il._fromParams({providerId:Gs.PROVIDER_ID,signInMethod:Gs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Gs.credentialFromTaggedObject(e)}static credentialFromError(e){return Gs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Gs.credential(e.oauthAccessToken)}catch{return null}}}Gs.FACEBOOK_SIGN_IN_METHOD="facebook.com";Gs.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qs extends zf{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return il._fromParams({providerId:qs.PROVIDER_ID,signInMethod:qs.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return qs.credentialFromTaggedObject(e)}static credentialFromError(e){return qs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return qs.credential(t,r)}catch{return null}}}qs.GOOGLE_SIGN_IN_METHOD="google.com";qs.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $s extends zf{constructor(){super("github.com")}static credential(e){return il._fromParams({providerId:$s.PROVIDER_ID,signInMethod:$s.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return $s.credentialFromTaggedObject(e)}static credentialFromError(e){return $s.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return $s.credential(e.oauthAccessToken)}catch{return null}}}$s.GITHUB_SIGN_IN_METHOD="github.com";$s.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xs extends zf{constructor(){super("twitter.com")}static credential(e,t){return il._fromParams({providerId:Xs.PROVIDER_ID,signInMethod:Xs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Xs.credentialFromTaggedObject(e)}static credentialFromError(e){return Xs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return Xs.credential(t,r)}catch{return null}}}Xs.TWITTER_SIGN_IN_METHOD="twitter.com";Xs.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tO(n,e){return Uf(n,"POST","/v1/accounts:signUp",po(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ao{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,i=!1){const a=await Bi._fromIdTokenResponse(e,r,i),o=dE(r);return new ao({user:a,providerId:o,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const i=dE(r);return new ao({user:e,providerId:i,_tokenResponse:r,operationType:t})}}function dE(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cC(n){if(gi(n.app))return Promise.reject(Ja(n));const e=ll(n);if(await e._initializationPromise,e.currentUser?.isAnonymous)return new ao({user:e.currentUser,providerId:null,operationType:"signIn"});const t=await tO(e,{returnSecureToken:!0}),r=await ao._fromIdTokenResponse(e,"signIn",t,!0);return await e._updateCurrentUser(r.user),r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u0 extends Ia{constructor(e,t,r,i){super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,u0.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new u0(e,t,r,i)}}function uC(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?u0._fromErrorAndOperation(n,a,e,r):a})}async function nO(n,e,t=!1){const r=await bf(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return ao._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rO(n,e,t=!1){const{auth:r}=n;if(gi(r.app))return Promise.reject(Ja(r));const i="reauthenticate";try{const a=await bf(n,uC(r,i,e,n),t);qe(a.idToken,r,"internal-error");const o=qv(a.idToken);qe(o,r,"internal-error");const{sub:c}=o;return qe(n.uid===c,r,"user-mismatch"),ao._forOperation(n,i,a)}catch(a){throw a?.code==="auth/user-not-found"&&Hi(r,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fC(n,e,t=!1){if(gi(n.app))return Promise.reject(Ja(n));const r="signIn",i=await uC(n,r,e),a=await ao._fromIdTokenResponse(n,r,i);return t||await n._updateCurrentUser(a.user),a}async function iO(n,e){return fC(ll(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aO(n){const e=ll(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function sO(n,e,t){return gi(n.app)?Promise.reject(Ja(n)):iO(gn(n),jc.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&aO(n),r})}function oO(n,e,t,r){return gn(n).onIdTokenChanged(e,t,r)}function lO(n,e,t){return gn(n).beforeAuthStateChanged(e,t)}function dC(n,e,t,r){return gn(n).onAuthStateChanged(e,t,r)}function cO(n){return gn(n).signOut()}const f0="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hC{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(f0,"1"),this.storage.removeItem(f0),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uO=1e3,fO=10;class pC extends hC{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=rC(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),i=this.localCache[t];r!==i&&e(t,i,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((o,c,u)=>{this.notifyListeners(o,u)});return}const r=e.key;t?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!t&&this.localCache[r]===o||this.notifyListeners(r,o)},a=this.storage.getItem(r);N6()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,fO):i()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},uO)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}pC.type="LOCAL";const dO=pC;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mC extends hC{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}mC.type="SESSION";const gC=mC;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hO(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $0{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(i=>i.isListeningto(e));if(t)return t;const r=new $0(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:i,data:a}=t.data,o=this.handlersMap[i];if(!o?.size)return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const c=Array.from(o).map(async d=>d(t.origin,a)),u=await hO(c);t.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:u})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}$0.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kv(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pO{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let a,o;return new Promise((c,u)=>{const d=Kv("",20);i.port1.start();const m=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(g){const _=g;if(_.data.eventId===d)switch(_.data.status){case"ack":clearTimeout(m),a=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),c(_.data.response);break;default:clearTimeout(m),clearTimeout(a),u(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:d,data:t},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wa(){return window}function mO(n){wa().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vC(){return typeof wa().WorkerGlobalScope<"u"&&typeof wa().importScripts=="function"}async function gO(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function vO(){return navigator?.serviceWorker?.controller||null}function yO(){return vC()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yC="firebaseLocalStorageDb",_O=1,d0="firebaseLocalStorage",_C="fbase_key";class Hf{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function X0(n,e){return n.transaction([d0],e?"readwrite":"readonly").objectStore(d0)}function xO(){const n=indexedDB.deleteDatabase(yC);return new Hf(n).toPromise()}function Vg(){const n=indexedDB.open(yC,_O);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(d0,{keyPath:_C})}catch(i){t(i)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(d0)?e(r):(r.close(),await xO(),e(await Vg()))})})}async function hE(n,e,t){const r=X0(n,!0).put({[_C]:e,value:t});return new Hf(r).toPromise()}async function wO(n,e){const t=X0(n,!1).get(e),r=await new Hf(t).toPromise();return r===void 0?null:r.value}function pE(n,e){const t=X0(n,!0).delete(e);return new Hf(t).toPromise()}const EO=800,AO=3;class xC{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Vg(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>AO)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return vC()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=$0._getInstance(yO()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await gO(),!this.activeServiceWorker)return;this.sender=new pO(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||vO()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Vg();return await hE(e,f0,"1"),await pE(e,f0),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>hE(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>wO(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>pE(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const a=X0(i,!1).getAll();return new Hf(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:a}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(a)&&(this.notifyListeners(i,a),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),EO)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}xC.type="LOCAL";const bO=xC;new Ff(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SO(n,e){return e?Qa(e):(qe(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wv extends Xv{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return yc(e,this._buildIdpRequest())}_linkToIdToken(e,t){return yc(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return yc(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function CO(n){return fC(n.auth,new Wv(n),n.bypassAuthState)}function TO(n){const{auth:e,user:t}=n;return qe(t,e,"internal-error"),rO(t,new Wv(n),n.bypassAuthState)}async function IO(n){const{auth:e,user:t}=n;return qe(t,e,"internal-error"),nO(t,new Wv(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wC{constructor(e,t,r,i,a=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:i,tenantId:a,error:o,type:c}=e;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:t,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(u))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return CO;case"linkViaPopup":case"linkViaRedirect":return IO;case"reauthViaPopup":case"reauthViaRedirect":return TO;default:Hi(this.auth,"internal-error")}}resolve(e){rs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){rs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NO=new Ff(2e3,1e4);class lc extends wC{constructor(e,t,r,i,a){super(e,t,i,a),this.provider=r,this.authWindow=null,this.pollId=null,lc.currentPopupAction&&lc.currentPopupAction.cancel(),lc.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return qe(e,this.auth,"internal-error"),e}async onExecution(){rs(this.filter.length===1,"Popup operations only handle one event");const e=Kv();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(xa(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(xa(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,lc.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(xa(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,NO.get())};e()}}lc.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RO="pendingRedirect",qh=new Map;class OO extends wC{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=qh.get(this.auth._key());if(!e){try{const r=await DO(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}qh.set(this.auth._key(),e)}return this.bypassAuthState||qh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function DO(n,e){const t=kO(e),r=PO(n);if(!await r._isAvailable())return!1;const i=await r._get(t)==="true";return await r._remove(t),i}function MO(n,e){qh.set(n._key(),e)}function PO(n){return Qa(n._redirectPersistence)}function kO(n){return Gh(RO,n.config.apiKey,n.name)}async function jO(n,e,t=!1){if(gi(n.app))return Promise.reject(Ja(n));const r=ll(n),i=SO(r,e),o=await new OO(r,i,t).execute();return o&&!t&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LO=600*1e3;class BO{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!VO(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!EC(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";t.onError(xa(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=LO&&this.cachedEventUids.clear(),this.cachedEventUids.has(mE(e))}saveEventToCache(e){this.cachedEventUids.add(mE(e)),this.lastProcessedEventTime=Date.now()}}function mE(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function EC({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function VO(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return EC(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FO(n,e={}){return mo(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UO=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,zO=/^https?/;async function HO(n){if(n.config.emulator)return;const{authorizedDomains:e}=await FO(n);for(const t of e)try{if(GO(t))return}catch{}Hi(n,"unauthorized-domain")}function GO(n){const e=Lg(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const o=new URL(n);return o.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&o.hostname===r}if(!zO.test(t))return!1;if(UO.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qO=new Ff(3e4,6e4);function gE(){const n=wa().___jsl;if(n?.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function $O(n){return new Promise((e,t)=>{function r(){gE(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{gE(),t(xa(n,"network-request-failed"))},timeout:qO.get()})}if(wa().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(wa().gapi?.load)r();else{const i=B6("iframefcb");return wa()[i]=()=>{gapi.load?r():t(xa(n,"network-request-failed"))},aC(`${L6()}?onload=${i}`).catch(a=>t(a))}}).catch(e=>{throw $h=null,e})}let $h=null;function XO(n){return $h=$h||$O(n),$h}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YO=new Ff(5e3,15e3),KO="__/auth/iframe",WO="emulator/auth/iframe",QO={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ZO=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function JO(n){const e=n.config;qe(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Gv(e,WO):`https://${n.config.authDomain}/${KO}`,r={apiKey:e.apiKey,appName:n.name,v:kc},i=ZO.get(n.config.apiHost);i&&(r.eid=i);const a=n._getFrameworks();return a.length&&(r.fw=a.join(",")),`${t}?${Vf(r).slice(1)}`}async function eD(n){const e=await XO(n),t=wa().gapi;return qe(t,n,"internal-error"),e.open({where:document.body,url:JO(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:QO,dontclear:!0},r=>new Promise(async(i,a)=>{await r.restyle({setHideOnLeave:!1});const o=xa(n,"network-request-failed"),c=wa().setTimeout(()=>{a(o)},YO.get());function u(){wa().clearTimeout(c),i(r)}r.ping(u).then(u,()=>{a(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tD={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},nD=500,rD=600,iD="_blank",aD="http://localhost";class vE{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function sD(n,e,t,r=nD,i=rD){const a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let c="";const u={...tD,width:r.toString(),height:i.toString(),top:a,left:o},d=vr().toLowerCase();t&&(c=ZS(d)?iD:t),WS(d)&&(e=e||aD,u.scrollbars="yes");const m=Object.entries(u).reduce((_,[w,A])=>`${_}${w}=${A},`,"");if(I6(d)&&c!=="_self")return oD(e||"",c),new vE(null);const g=window.open(e||"",c,m);qe(g,n,"popup-blocked");try{g.focus()}catch{}return new vE(g)}function oD(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lD="__/auth/handler",cD="emulator/auth/handler",uD=encodeURIComponent("fac");async function yE(n,e,t,r,i,a){qe(n.config.authDomain,n,"auth-domain-config-required"),qe(n.config.apiKey,n,"invalid-api-key");const o={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:kc,eventId:i};if(e instanceof lC){e.setDefaultLanguage(n.languageCode),o.providerId=e.providerId||"",WR(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[m,g]of Object.entries({}))o[m]=g}if(e instanceof zf){const m=e.getScopes().filter(g=>g!=="");m.length>0&&(o.scopes=m.join(","))}n.tenantId&&(o.tid=n.tenantId);const c=o;for(const m of Object.keys(c))c[m]===void 0&&delete c[m];const u=await n._getAppCheckToken(),d=u?`#${uD}=${encodeURIComponent(u)}`:"";return`${fD(n)}?${Vf(c).slice(1)}${d}`}function fD({config:n}){return n.emulator?Gv(n,cD):`https://${n.authDomain}/${lD}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jm="webStorageSupport";class dD{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=gC,this._completeRedirectFn=jO,this._overrideRedirectResult=MO}async _openPopup(e,t,r,i){rs(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const a=await yE(e,t,r,Lg(),i);return sD(e,a,Kv())}async _openRedirect(e,t,r,i){await this._originValidation(e);const a=await yE(e,t,r,Lg(),i);return mO(a),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:a}=this.eventManagers[t];return i?Promise.resolve(i):(rs(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await eD(e),r=new BO(e);return t.register("authEvent",i=>(qe(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(jm,{type:jm},i=>{const a=i?.[0]?.[jm];a!==void 0&&t(!!a),Hi(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=HO(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return rC()||QS()||$v()}}const hD=dD;var _E="@firebase/auth",xE="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pD{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){qe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mD(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function gD(n){wc(new rl("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:o,authDomain:c}=r.options;qe(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:c,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:iC(n)},d=new P6(r,i,a,u);return G6(d,t),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),wc(new rl("auth-internal",e=>{const t=ll(e.getProvider("auth").getImmediate());return(r=>new pD(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Zs(_E,xE,mD(n)),Zs(_E,xE,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vD=300,yD=MS("authIdTokenMaxAge")||vD;let wE=null;const _D=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>yD)return;const i=t?.token;wE!==i&&(wE=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function xD(n=VS()){const e=zv(n,"auth");if(e.isInitialized())return e.getImmediate();const t=H6(n,{popupRedirectResolver:hD,persistence:[bO,dO,gC]}),r=MS("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(r,location.origin);if(location.origin===a.origin){const o=_D(a.toString());lO(t,o,()=>o(t.currentUser)),oO(t,c=>o(c))}}const i=OS("auth");return i&&q6(t,`http://${i}`),t}function wD(){return document.getElementsByTagName("head")?.[0]??document}k6({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{const a=xa("internal-error");a.customData=i,t(a)},r.type="text/javascript",r.charset="UTF-8",wD().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});gD("Browser");var ED="firebase",AD="12.3.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Zs(ED,AD,"app");var EE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Js,AC;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(M,b){function R(){}R.prototype=b.prototype,M.F=b.prototype,M.prototype=new R,M.prototype.constructor=M,M.D=function(I,O,L){for(var j=Array(arguments.length-2),W=2;W<arguments.length;W++)j[W-2]=arguments[W];return b.prototype[O].apply(I,j)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(M,b,R){R||(R=0);const I=Array(16);if(typeof b=="string")for(var O=0;O<16;++O)I[O]=b.charCodeAt(R++)|b.charCodeAt(R++)<<8|b.charCodeAt(R++)<<16|b.charCodeAt(R++)<<24;else for(O=0;O<16;++O)I[O]=b[R++]|b[R++]<<8|b[R++]<<16|b[R++]<<24;b=M.g[0],R=M.g[1],O=M.g[2];let L=M.g[3],j;j=b+(L^R&(O^L))+I[0]+3614090360&4294967295,b=R+(j<<7&4294967295|j>>>25),j=L+(O^b&(R^O))+I[1]+3905402710&4294967295,L=b+(j<<12&4294967295|j>>>20),j=O+(R^L&(b^R))+I[2]+606105819&4294967295,O=L+(j<<17&4294967295|j>>>15),j=R+(b^O&(L^b))+I[3]+3250441966&4294967295,R=O+(j<<22&4294967295|j>>>10),j=b+(L^R&(O^L))+I[4]+4118548399&4294967295,b=R+(j<<7&4294967295|j>>>25),j=L+(O^b&(R^O))+I[5]+1200080426&4294967295,L=b+(j<<12&4294967295|j>>>20),j=O+(R^L&(b^R))+I[6]+2821735955&4294967295,O=L+(j<<17&4294967295|j>>>15),j=R+(b^O&(L^b))+I[7]+4249261313&4294967295,R=O+(j<<22&4294967295|j>>>10),j=b+(L^R&(O^L))+I[8]+1770035416&4294967295,b=R+(j<<7&4294967295|j>>>25),j=L+(O^b&(R^O))+I[9]+2336552879&4294967295,L=b+(j<<12&4294967295|j>>>20),j=O+(R^L&(b^R))+I[10]+4294925233&4294967295,O=L+(j<<17&4294967295|j>>>15),j=R+(b^O&(L^b))+I[11]+2304563134&4294967295,R=O+(j<<22&4294967295|j>>>10),j=b+(L^R&(O^L))+I[12]+1804603682&4294967295,b=R+(j<<7&4294967295|j>>>25),j=L+(O^b&(R^O))+I[13]+4254626195&4294967295,L=b+(j<<12&4294967295|j>>>20),j=O+(R^L&(b^R))+I[14]+2792965006&4294967295,O=L+(j<<17&4294967295|j>>>15),j=R+(b^O&(L^b))+I[15]+1236535329&4294967295,R=O+(j<<22&4294967295|j>>>10),j=b+(O^L&(R^O))+I[1]+4129170786&4294967295,b=R+(j<<5&4294967295|j>>>27),j=L+(R^O&(b^R))+I[6]+3225465664&4294967295,L=b+(j<<9&4294967295|j>>>23),j=O+(b^R&(L^b))+I[11]+643717713&4294967295,O=L+(j<<14&4294967295|j>>>18),j=R+(L^b&(O^L))+I[0]+3921069994&4294967295,R=O+(j<<20&4294967295|j>>>12),j=b+(O^L&(R^O))+I[5]+3593408605&4294967295,b=R+(j<<5&4294967295|j>>>27),j=L+(R^O&(b^R))+I[10]+38016083&4294967295,L=b+(j<<9&4294967295|j>>>23),j=O+(b^R&(L^b))+I[15]+3634488961&4294967295,O=L+(j<<14&4294967295|j>>>18),j=R+(L^b&(O^L))+I[4]+3889429448&4294967295,R=O+(j<<20&4294967295|j>>>12),j=b+(O^L&(R^O))+I[9]+568446438&4294967295,b=R+(j<<5&4294967295|j>>>27),j=L+(R^O&(b^R))+I[14]+3275163606&4294967295,L=b+(j<<9&4294967295|j>>>23),j=O+(b^R&(L^b))+I[3]+4107603335&4294967295,O=L+(j<<14&4294967295|j>>>18),j=R+(L^b&(O^L))+I[8]+1163531501&4294967295,R=O+(j<<20&4294967295|j>>>12),j=b+(O^L&(R^O))+I[13]+2850285829&4294967295,b=R+(j<<5&4294967295|j>>>27),j=L+(R^O&(b^R))+I[2]+4243563512&4294967295,L=b+(j<<9&4294967295|j>>>23),j=O+(b^R&(L^b))+I[7]+1735328473&4294967295,O=L+(j<<14&4294967295|j>>>18),j=R+(L^b&(O^L))+I[12]+2368359562&4294967295,R=O+(j<<20&4294967295|j>>>12),j=b+(R^O^L)+I[5]+4294588738&4294967295,b=R+(j<<4&4294967295|j>>>28),j=L+(b^R^O)+I[8]+2272392833&4294967295,L=b+(j<<11&4294967295|j>>>21),j=O+(L^b^R)+I[11]+1839030562&4294967295,O=L+(j<<16&4294967295|j>>>16),j=R+(O^L^b)+I[14]+4259657740&4294967295,R=O+(j<<23&4294967295|j>>>9),j=b+(R^O^L)+I[1]+2763975236&4294967295,b=R+(j<<4&4294967295|j>>>28),j=L+(b^R^O)+I[4]+1272893353&4294967295,L=b+(j<<11&4294967295|j>>>21),j=O+(L^b^R)+I[7]+4139469664&4294967295,O=L+(j<<16&4294967295|j>>>16),j=R+(O^L^b)+I[10]+3200236656&4294967295,R=O+(j<<23&4294967295|j>>>9),j=b+(R^O^L)+I[13]+681279174&4294967295,b=R+(j<<4&4294967295|j>>>28),j=L+(b^R^O)+I[0]+3936430074&4294967295,L=b+(j<<11&4294967295|j>>>21),j=O+(L^b^R)+I[3]+3572445317&4294967295,O=L+(j<<16&4294967295|j>>>16),j=R+(O^L^b)+I[6]+76029189&4294967295,R=O+(j<<23&4294967295|j>>>9),j=b+(R^O^L)+I[9]+3654602809&4294967295,b=R+(j<<4&4294967295|j>>>28),j=L+(b^R^O)+I[12]+3873151461&4294967295,L=b+(j<<11&4294967295|j>>>21),j=O+(L^b^R)+I[15]+530742520&4294967295,O=L+(j<<16&4294967295|j>>>16),j=R+(O^L^b)+I[2]+3299628645&4294967295,R=O+(j<<23&4294967295|j>>>9),j=b+(O^(R|~L))+I[0]+4096336452&4294967295,b=R+(j<<6&4294967295|j>>>26),j=L+(R^(b|~O))+I[7]+1126891415&4294967295,L=b+(j<<10&4294967295|j>>>22),j=O+(b^(L|~R))+I[14]+2878612391&4294967295,O=L+(j<<15&4294967295|j>>>17),j=R+(L^(O|~b))+I[5]+4237533241&4294967295,R=O+(j<<21&4294967295|j>>>11),j=b+(O^(R|~L))+I[12]+1700485571&4294967295,b=R+(j<<6&4294967295|j>>>26),j=L+(R^(b|~O))+I[3]+2399980690&4294967295,L=b+(j<<10&4294967295|j>>>22),j=O+(b^(L|~R))+I[10]+4293915773&4294967295,O=L+(j<<15&4294967295|j>>>17),j=R+(L^(O|~b))+I[1]+2240044497&4294967295,R=O+(j<<21&4294967295|j>>>11),j=b+(O^(R|~L))+I[8]+1873313359&4294967295,b=R+(j<<6&4294967295|j>>>26),j=L+(R^(b|~O))+I[15]+4264355552&4294967295,L=b+(j<<10&4294967295|j>>>22),j=O+(b^(L|~R))+I[6]+2734768916&4294967295,O=L+(j<<15&4294967295|j>>>17),j=R+(L^(O|~b))+I[13]+1309151649&4294967295,R=O+(j<<21&4294967295|j>>>11),j=b+(O^(R|~L))+I[4]+4149444226&4294967295,b=R+(j<<6&4294967295|j>>>26),j=L+(R^(b|~O))+I[11]+3174756917&4294967295,L=b+(j<<10&4294967295|j>>>22),j=O+(b^(L|~R))+I[2]+718787259&4294967295,O=L+(j<<15&4294967295|j>>>17),j=R+(L^(O|~b))+I[9]+3951481745&4294967295,M.g[0]=M.g[0]+b&4294967295,M.g[1]=M.g[1]+(O+(j<<21&4294967295|j>>>11))&4294967295,M.g[2]=M.g[2]+O&4294967295,M.g[3]=M.g[3]+L&4294967295}r.prototype.v=function(M,b){b===void 0&&(b=M.length);const R=b-this.blockSize,I=this.C;let O=this.h,L=0;for(;L<b;){if(O==0)for(;L<=R;)i(this,M,L),L+=this.blockSize;if(typeof M=="string"){for(;L<b;)if(I[O++]=M.charCodeAt(L++),O==this.blockSize){i(this,I),O=0;break}}else for(;L<b;)if(I[O++]=M[L++],O==this.blockSize){i(this,I),O=0;break}}this.h=O,this.o+=b},r.prototype.A=function(){var M=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);M[0]=128;for(var b=1;b<M.length-8;++b)M[b]=0;b=this.o*8;for(var R=M.length-8;R<M.length;++R)M[R]=b&255,b/=256;for(this.v(M),M=Array(16),b=0,R=0;R<4;++R)for(let I=0;I<32;I+=8)M[b++]=this.g[R]>>>I&255;return M};function a(M,b){var R=c;return Object.prototype.hasOwnProperty.call(R,M)?R[M]:R[M]=b(M)}function o(M,b){this.h=b;const R=[];let I=!0;for(let O=M.length-1;O>=0;O--){const L=M[O]|0;I&&L==b||(R[O]=L,I=!1)}this.g=R}var c={};function u(M){return-128<=M&&M<128?a(M,function(b){return new o([b|0],b<0?-1:0)}):new o([M|0],M<0?-1:0)}function d(M){if(isNaN(M)||!isFinite(M))return g;if(M<0)return D(d(-M));const b=[];let R=1;for(let I=0;M>=R;I++)b[I]=M/R|0,R*=4294967296;return new o(b,0)}function m(M,b){if(M.length==0)throw Error("number format error: empty string");if(b=b||10,b<2||36<b)throw Error("radix out of range: "+b);if(M.charAt(0)=="-")return D(m(M.substring(1),b));if(M.indexOf("-")>=0)throw Error('number format error: interior "-" character');const R=d(Math.pow(b,8));let I=g;for(let L=0;L<M.length;L+=8){var O=Math.min(8,M.length-L);const j=parseInt(M.substring(L,L+O),b);O<8?(O=d(Math.pow(b,O)),I=I.j(O).add(d(j))):(I=I.j(R),I=I.add(d(j)))}return I}var g=u(0),_=u(1),w=u(16777216);n=o.prototype,n.m=function(){if(S(this))return-D(this).m();let M=0,b=1;for(let R=0;R<this.g.length;R++){const I=this.i(R);M+=(I>=0?I:4294967296+I)*b,b*=4294967296}return M},n.toString=function(M){if(M=M||10,M<2||36<M)throw Error("radix out of range: "+M);if(A(this))return"0";if(S(this))return"-"+D(this).toString(M);const b=d(Math.pow(M,6));var R=this;let I="";for(;;){const O=z(R,b).g;R=C(R,O.j(b));let L=((R.g.length>0?R.g[0]:R.h)>>>0).toString(M);if(R=O,A(R))return L+I;for(;L.length<6;)L="0"+L;I=L+I}},n.i=function(M){return M<0?0:M<this.g.length?this.g[M]:this.h};function A(M){if(M.h!=0)return!1;for(let b=0;b<M.g.length;b++)if(M.g[b]!=0)return!1;return!0}function S(M){return M.h==-1}n.l=function(M){return M=C(this,M),S(M)?-1:A(M)?0:1};function D(M){const b=M.g.length,R=[];for(let I=0;I<b;I++)R[I]=~M.g[I];return new o(R,~M.h).add(_)}n.abs=function(){return S(this)?D(this):this},n.add=function(M){const b=Math.max(this.g.length,M.g.length),R=[];let I=0;for(let O=0;O<=b;O++){let L=I+(this.i(O)&65535)+(M.i(O)&65535),j=(L>>>16)+(this.i(O)>>>16)+(M.i(O)>>>16);I=j>>>16,L&=65535,j&=65535,R[O]=j<<16|L}return new o(R,R[R.length-1]&-2147483648?-1:0)};function C(M,b){return M.add(D(b))}n.j=function(M){if(A(this)||A(M))return g;if(S(this))return S(M)?D(this).j(D(M)):D(D(this).j(M));if(S(M))return D(this.j(D(M)));if(this.l(w)<0&&M.l(w)<0)return d(this.m()*M.m());const b=this.g.length+M.g.length,R=[];for(var I=0;I<2*b;I++)R[I]=0;for(I=0;I<this.g.length;I++)for(let O=0;O<M.g.length;O++){const L=this.i(I)>>>16,j=this.i(I)&65535,W=M.i(O)>>>16,ge=M.i(O)&65535;R[2*I+2*O]+=j*ge,k(R,2*I+2*O),R[2*I+2*O+1]+=L*ge,k(R,2*I+2*O+1),R[2*I+2*O+1]+=j*W,k(R,2*I+2*O+1),R[2*I+2*O+2]+=L*W,k(R,2*I+2*O+2)}for(M=0;M<b;M++)R[M]=R[2*M+1]<<16|R[2*M];for(M=b;M<2*b;M++)R[M]=0;return new o(R,0)};function k(M,b){for(;(M[b]&65535)!=M[b];)M[b+1]+=M[b]>>>16,M[b]&=65535,b++}function V(M,b){this.g=M,this.h=b}function z(M,b){if(A(b))throw Error("division by zero");if(A(M))return new V(g,g);if(S(M))return b=z(D(M),b),new V(D(b.g),D(b.h));if(S(b))return b=z(M,D(b)),new V(D(b.g),b.h);if(M.g.length>30){if(S(M)||S(b))throw Error("slowDivide_ only works with positive integers.");for(var R=_,I=b;I.l(M)<=0;)R=q(R),I=q(I);var O=$(R,1),L=$(I,1);for(I=$(I,2),R=$(R,2);!A(I);){var j=L.add(I);j.l(M)<=0&&(O=O.add(R),L=j),I=$(I,1),R=$(R,1)}return b=C(M,O.j(b)),new V(O,b)}for(O=g;M.l(b)>=0;){for(R=Math.max(1,Math.floor(M.m()/b.m())),I=Math.ceil(Math.log(R)/Math.LN2),I=I<=48?1:Math.pow(2,I-48),L=d(R),j=L.j(b);S(j)||j.l(M)>0;)R-=I,L=d(R),j=L.j(b);A(L)&&(L=_),O=O.add(L),M=C(M,j)}return new V(O,M)}n.B=function(M){return z(this,M).h},n.and=function(M){const b=Math.max(this.g.length,M.g.length),R=[];for(let I=0;I<b;I++)R[I]=this.i(I)&M.i(I);return new o(R,this.h&M.h)},n.or=function(M){const b=Math.max(this.g.length,M.g.length),R=[];for(let I=0;I<b;I++)R[I]=this.i(I)|M.i(I);return new o(R,this.h|M.h)},n.xor=function(M){const b=Math.max(this.g.length,M.g.length),R=[];for(let I=0;I<b;I++)R[I]=this.i(I)^M.i(I);return new o(R,this.h^M.h)};function q(M){const b=M.g.length+1,R=[];for(let I=0;I<b;I++)R[I]=M.i(I)<<1|M.i(I-1)>>>31;return new o(R,M.h)}function $(M,b){const R=b>>5;b%=32;const I=M.g.length-R,O=[];for(let L=0;L<I;L++)O[L]=b>0?M.i(L+R)>>>b|M.i(L+R+1)<<32-b:M.i(L+R);return new o(O,M.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,AC=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=m,Js=o}).apply(typeof EE<"u"?EE:typeof self<"u"?self:typeof window<"u"?window:{});var Sh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var bC,nf,SC,Xh,Fg,CC,TC,IC;(function(){var n,e=Object.defineProperty;function t(v){v=[typeof globalThis=="object"&&globalThis,v,typeof window=="object"&&window,typeof self=="object"&&self,typeof Sh=="object"&&Sh];for(var E=0;E<v.length;++E){var N=v[E];if(N&&N.Math==Math)return N}throw Error("Cannot find global object")}var r=t(this);function i(v,E){if(E)e:{var N=r;v=v.split(".");for(var F=0;F<v.length-1;F++){var Z=v[F];if(!(Z in N))break e;N=N[Z]}v=v[v.length-1],F=N[v],E=E(F),E!=F&&E!=null&&e(N,v,{configurable:!0,writable:!0,value:E})}}i("Symbol.dispose",function(v){return v||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(v){return v||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(v){return v||function(E){var N=[],F;for(F in E)Object.prototype.hasOwnProperty.call(E,F)&&N.push([F,E[F]]);return N}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},o=this||self;function c(v){var E=typeof v;return E=="object"&&v!=null||E=="function"}function u(v,E,N){return v.call.apply(v.bind,arguments)}function d(v,E,N){return d=u,d.apply(null,arguments)}function m(v,E){var N=Array.prototype.slice.call(arguments,1);return function(){var F=N.slice();return F.push.apply(F,arguments),v.apply(this,F)}}function g(v,E){function N(){}N.prototype=E.prototype,v.Z=E.prototype,v.prototype=new N,v.prototype.constructor=v,v.Ob=function(F,Z,ie){for(var xe=Array(arguments.length-2),We=2;We<arguments.length;We++)xe[We-2]=arguments[We];return E.prototype[Z].apply(F,xe)}}var _=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?v=>v&&AsyncContext.Snapshot.wrap(v):v=>v;function w(v){const E=v.length;if(E>0){const N=Array(E);for(let F=0;F<E;F++)N[F]=v[F];return N}return[]}function A(v,E){for(let F=1;F<arguments.length;F++){const Z=arguments[F];var N=typeof Z;if(N=N!="object"?N:Z?Array.isArray(Z)?"array":N:"null",N=="array"||N=="object"&&typeof Z.length=="number"){N=v.length||0;const ie=Z.length||0;v.length=N+ie;for(let xe=0;xe<ie;xe++)v[N+xe]=Z[xe]}else v.push(Z)}}class S{constructor(E,N){this.i=E,this.j=N,this.h=0,this.g=null}get(){let E;return this.h>0?(this.h--,E=this.g,this.g=E.next,E.next=null):E=this.i(),E}}function D(v){o.setTimeout(()=>{throw v},0)}function C(){var v=M;let E=null;return v.g&&(E=v.g,v.g=v.g.next,v.g||(v.h=null),E.next=null),E}class k{constructor(){this.h=this.g=null}add(E,N){const F=V.get();F.set(E,N),this.h?this.h.next=F:this.g=F,this.h=F}}var V=new S(()=>new z,v=>v.reset());class z{constructor(){this.next=this.g=this.h=null}set(E,N){this.h=E,this.g=N,this.next=null}reset(){this.next=this.g=this.h=null}}let q,$=!1,M=new k,b=()=>{const v=Promise.resolve(void 0);q=()=>{v.then(R)}};function R(){for(var v;v=C();){try{v.h.call(v.g)}catch(N){D(N)}var E=V;E.j(v),E.h<100&&(E.h++,v.next=E.g,E.g=v)}$=!1}function I(){this.u=this.u,this.C=this.C}I.prototype.u=!1,I.prototype.dispose=function(){this.u||(this.u=!0,this.N())},I.prototype[Symbol.dispose]=function(){this.dispose()},I.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function O(v,E){this.type=v,this.g=this.target=E,this.defaultPrevented=!1}O.prototype.h=function(){this.defaultPrevented=!0};var L=(function(){if(!o.addEventListener||!Object.defineProperty)return!1;var v=!1,E=Object.defineProperty({},"passive",{get:function(){v=!0}});try{const N=()=>{};o.addEventListener("test",N,E),o.removeEventListener("test",N,E)}catch{}return v})();function j(v){return/^[\s\xa0]*$/.test(v)}function W(v,E){O.call(this,v?v.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,v&&this.init(v,E)}g(W,O),W.prototype.init=function(v,E){const N=this.type=v.type,F=v.changedTouches&&v.changedTouches.length?v.changedTouches[0]:null;this.target=v.target||v.srcElement,this.g=E,E=v.relatedTarget,E||(N=="mouseover"?E=v.fromElement:N=="mouseout"&&(E=v.toElement)),this.relatedTarget=E,F?(this.clientX=F.clientX!==void 0?F.clientX:F.pageX,this.clientY=F.clientY!==void 0?F.clientY:F.pageY,this.screenX=F.screenX||0,this.screenY=F.screenY||0):(this.clientX=v.clientX!==void 0?v.clientX:v.pageX,this.clientY=v.clientY!==void 0?v.clientY:v.pageY,this.screenX=v.screenX||0,this.screenY=v.screenY||0),this.button=v.button,this.key=v.key||"",this.ctrlKey=v.ctrlKey,this.altKey=v.altKey,this.shiftKey=v.shiftKey,this.metaKey=v.metaKey,this.pointerId=v.pointerId||0,this.pointerType=v.pointerType,this.state=v.state,this.i=v,v.defaultPrevented&&W.Z.h.call(this)},W.prototype.h=function(){W.Z.h.call(this);const v=this.i;v.preventDefault?v.preventDefault():v.returnValue=!1};var ge="closure_listenable_"+(Math.random()*1e6|0),H=0;function G(v,E,N,F,Z){this.listener=v,this.proxy=null,this.src=E,this.type=N,this.capture=!!F,this.ha=Z,this.key=++H,this.da=this.fa=!1}function le(v){v.da=!0,v.listener=null,v.proxy=null,v.src=null,v.ha=null}function ve(v,E,N){for(const F in v)E.call(N,v[F],F,v)}function He(v,E){for(const N in v)E.call(void 0,v[N],N,v)}function Y(v){const E={};for(const N in v)E[N]=v[N];return E}const ne="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function me(v,E){let N,F;for(let Z=1;Z<arguments.length;Z++){F=arguments[Z];for(N in F)v[N]=F[N];for(let ie=0;ie<ne.length;ie++)N=ne[ie],Object.prototype.hasOwnProperty.call(F,N)&&(v[N]=F[N])}}function we(v){this.src=v,this.g={},this.h=0}we.prototype.add=function(v,E,N,F,Z){const ie=v.toString();v=this.g[ie],v||(v=this.g[ie]=[],this.h++);const xe=ye(v,E,F,Z);return xe>-1?(E=v[xe],N||(E.fa=!1)):(E=new G(E,this.src,ie,!!F,Z),E.fa=N,v.push(E)),E};function be(v,E){const N=E.type;if(N in v.g){var F=v.g[N],Z=Array.prototype.indexOf.call(F,E,void 0),ie;(ie=Z>=0)&&Array.prototype.splice.call(F,Z,1),ie&&(le(E),v.g[N].length==0&&(delete v.g[N],v.h--))}}function ye(v,E,N,F){for(let Z=0;Z<v.length;++Z){const ie=v[Z];if(!ie.da&&ie.listener==E&&ie.capture==!!N&&ie.ha==F)return Z}return-1}var Te="closure_lm_"+(Math.random()*1e6|0),Ye={};function Re(v,E,N,F,Z){if(Array.isArray(E)){for(let ie=0;ie<E.length;ie++)Re(v,E[ie],N,F,Z);return null}return N=Bn(N),v&&v[ge]?v.J(E,N,c(F)?!!F.capture:!1,Z):zt(v,E,N,!1,F,Z)}function zt(v,E,N,F,Z,ie){if(!E)throw Error("Invalid event type");const xe=c(Z)?!!Z.capture:!!Z;let We=cr(v);if(We||(v[Te]=We=new we(v)),N=We.add(E,N,F,xe,ie),N.proxy)return N;if(F=Ze(),N.proxy=F,F.src=v,F.listener=N,v.addEventListener)L||(Z=xe),Z===void 0&&(Z=!1),v.addEventListener(E.toString(),F,Z);else if(v.attachEvent)v.attachEvent(Et(E.toString()),F);else if(v.addListener&&v.removeListener)v.addListener(F);else throw Error("addEventListener and attachEvent are unavailable.");return N}function Ze(){function v(N){return E.call(v.src,v.listener,N)}const E=Ln;return v}function In(v,E,N,F,Z){if(Array.isArray(E))for(var ie=0;ie<E.length;ie++)In(v,E[ie],N,F,Z);else F=c(F)?!!F.capture:!!F,N=Bn(N),v&&v[ge]?(v=v.i,ie=String(E).toString(),ie in v.g&&(E=v.g[ie],N=ye(E,N,F,Z),N>-1&&(le(E[N]),Array.prototype.splice.call(E,N,1),E.length==0&&(delete v.g[ie],v.h--)))):v&&(v=cr(v))&&(E=v.g[E.toString()],v=-1,E&&(v=ye(E,N,F,Z)),(N=v>-1?E[v]:null)&&Kn(N))}function Kn(v){if(typeof v!="number"&&v&&!v.da){var E=v.src;if(E&&E[ge])be(E.i,v);else{var N=v.type,F=v.proxy;E.removeEventListener?E.removeEventListener(N,F,v.capture):E.detachEvent?E.detachEvent(Et(N),F):E.addListener&&E.removeListener&&E.removeListener(F),(N=cr(E))?(be(N,v),N.h==0&&(N.src=null,E[Te]=null)):le(v)}}}function Et(v){return v in Ye?Ye[v]:Ye[v]="on"+v}function Ln(v,E){if(v.da)v=!0;else{E=new W(E,this);const N=v.listener,F=v.ha||v.src;v.fa&&Kn(v),v=N.call(F,E)}return v}function cr(v){return v=v[Te],v instanceof we?v:null}var ur="__closure_events_fn_"+(Math.random()*1e9>>>0);function Bn(v){return typeof v=="function"?v:(v[ur]||(v[ur]=function(E){return v.handleEvent(E)}),v[ur])}function gt(){I.call(this),this.i=new we(this),this.M=this,this.G=null}g(gt,I),gt.prototype[ge]=!0,gt.prototype.removeEventListener=function(v,E,N,F){In(this,v,E,N,F)};function Pt(v,E){var N,F=v.G;if(F)for(N=[];F;F=F.G)N.push(F);if(v=v.M,F=E.type||E,typeof E=="string")E=new O(E,v);else if(E instanceof O)E.target=E.target||v;else{var Z=E;E=new O(F,v),me(E,Z)}Z=!0;let ie,xe;if(N)for(xe=N.length-1;xe>=0;xe--)ie=E.g=N[xe],Z=Wn(ie,F,!0,E)&&Z;if(ie=E.g=v,Z=Wn(ie,F,!0,E)&&Z,Z=Wn(ie,F,!1,E)&&Z,N)for(xe=0;xe<N.length;xe++)ie=E.g=N[xe],Z=Wn(ie,F,!1,E)&&Z}gt.prototype.N=function(){if(gt.Z.N.call(this),this.i){var v=this.i;for(const E in v.g){const N=v.g[E];for(let F=0;F<N.length;F++)le(N[F]);delete v.g[E],v.h--}}this.G=null},gt.prototype.J=function(v,E,N,F){return this.i.add(String(v),E,!1,N,F)},gt.prototype.K=function(v,E,N,F){return this.i.add(String(v),E,!0,N,F)};function Wn(v,E,N,F){if(E=v.i.g[String(E)],!E)return!0;E=E.concat();let Z=!0;for(let ie=0;ie<E.length;++ie){const xe=E[ie];if(xe&&!xe.da&&xe.capture==N){const We=xe.listener,fn=xe.ha||xe.src;xe.fa&&be(v.i,xe),Z=We.call(fn,F)!==!1&&Z}}return Z&&!F.defaultPrevented}function cn(v,E){if(typeof v!="function")if(v&&typeof v.handleEvent=="function")v=d(v.handleEvent,v);else throw Error("Invalid listener argument");return Number(E)>2147483647?-1:o.setTimeout(v,E||0)}function _r(v){v.g=cn(()=>{v.g=null,v.i&&(v.i=!1,_r(v))},v.l);const E=v.h;v.h=null,v.m.apply(null,E)}class tn extends I{constructor(E,N){super(),this.m=E,this.l=N,this.h=null,this.i=!1,this.g=null}j(E){this.h=arguments,this.g?this.i=!0:_r(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function fr(v){I.call(this),this.h=v,this.g={}}g(fr,I);var Jr=[];function ae(v){ve(v.g,function(E,N){this.g.hasOwnProperty(N)&&Kn(E)},v),v.g={}}fr.prototype.N=function(){fr.Z.N.call(this),ae(this)},fr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ae=o.JSON.stringify,je=o.JSON.parse,fe=class{stringify(v){return o.JSON.stringify(v,void 0)}parse(v){return o.JSON.parse(v,void 0)}};function Pe(){}function Fe(){}var ze={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Je(){O.call(this,"d")}g(Je,O);function rt(){O.call(this,"c")}g(rt,O);var Ce={},De=null;function tt(){return De=De||new gt}Ce.Ia="serverreachability";function dr(v){O.call(this,Ce.Ia,v)}g(dr,O);function un(v){const E=tt();Pt(E,new dr(E))}Ce.STAT_EVENT="statevent";function Ei(v,E){O.call(this,Ce.STAT_EVENT,v),this.stat=E}g(Ei,O);function Kt(v){const E=tt();Pt(E,new Ei(E,v))}Ce.Ja="timingevent";function Ki(v,E){O.call(this,Ce.Ja,v),this.size=E}g(Ki,O);function Wi(v,E){if(typeof v!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){v()},E)}function Ai(){this.g=!0}Ai.prototype.ua=function(){this.g=!1};function Cp(v,E,N,F,Z,ie){v.info(function(){if(v.g)if(ie){var xe="",We=ie.split("&");for(let At=0;At<We.length;At++){var fn=We[At].split("=");if(fn.length>1){const Wt=fn[0];fn=fn[1];const ri=Wt.split("_");xe=ri.length>=2&&ri[1]=="type"?xe+(Wt+"="+fn+"&"):xe+(Wt+"=redacted&")}}}else xe=null;else xe=ie;return"XMLHTTP REQ ("+F+") [attempt "+Z+"]: "+E+`
`+N+`
`+xe})}function ed(v,E,N,F,Z,ie,xe){v.info(function(){return"XMLHTTP RESP ("+F+") [ attempt "+Z+"]: "+E+`
`+N+`
`+ie+" "+xe})}function Qi(v,E,N,F){v.info(function(){return"XMLHTTP TEXT ("+E+"): "+Tp(v,N)+(F?" "+F:"")})}function _o(v,E){v.info(function(){return"TIMEOUT: "+E})}Ai.prototype.info=function(){};function Tp(v,E){if(!v.g)return E;if(!E)return null;try{const ie=JSON.parse(E);if(ie){for(v=0;v<ie.length;v++)if(Array.isArray(ie[v])){var N=ie[v];if(!(N.length<2)){var F=N[1];if(Array.isArray(F)&&!(F.length<1)){var Z=F[0];if(Z!="noop"&&Z!="stop"&&Z!="close")for(let xe=1;xe<F.length;xe++)F[xe]=""}}}}return Ae(ie)}catch{return E}}var xo={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Yc={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Kc;function wo(){}g(wo,Pe),wo.prototype.g=function(){return new XMLHttpRequest},Kc=new wo;function Ra(v){return encodeURIComponent(String(v))}function td(v){var E=1;v=v.split(":");const N=[];for(;E>0&&v.length;)N.push(v.shift()),E--;return v.length&&N.push(v.join(":")),N}function bi(v,E,N,F){this.j=v,this.i=E,this.l=N,this.S=F||1,this.V=new fr(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Si}function Si(){this.i=null,this.g="",this.h=!1}var vn={},Vn={};function Zi(v,E,N){v.M=1,v.A=Eo(_n(E)),v.u=N,v.R=!0,pl(v,null)}function pl(v,E){v.F=Date.now(),Ji(v),v.B=_n(v.A);var N=v.B,F=v.S;Array.isArray(F)||(F=[String(F)]),yl(N.i,"t",F),v.C=0,N=v.j.L,v.h=new Si,v.g=gd(v.j,N?E:null,!v.u),v.P>0&&(v.O=new tn(d(v.Y,v,v.g),v.P)),E=v.V,N=v.g,F=v.ba;var Z="readystatechange";Array.isArray(Z)||(Z&&(Jr[0]=Z.toString()),Z=Jr);for(let ie=0;ie<Z.length;ie++){const xe=Re(N,Z[ie],F||E.handleEvent,!1,E.h||E);if(!xe)break;E.g[xe.key]=xe}E=v.J?Y(v.J):{},v.u?(v.v||(v.v="POST"),E["Content-Type"]="application/x-www-form-urlencoded",v.g.ea(v.B,v.v,v.u,E)):(v.v="GET",v.g.ea(v.B,v.v,null,E)),un(),Cp(v.i,v.v,v.B,v.l,v.S,v.u)}bi.prototype.ba=function(v){v=v.target;const E=this.O;E&&Ii(v)==3?E.j():this.Y(v)},bi.prototype.Y=function(v){try{if(v==this.g)e:{const We=Ii(this.g),fn=this.g.ya(),At=this.g.ca();if(!(We<3)&&(We!=3||this.g&&(this.h.h||this.g.la()||Qn(this.g)))){this.K||We!=4||fn==7||(fn==8||At<=0?un(3):un(2)),ea(this);var E=this.g.ca();this.X=E;var N=Ip(this);if(this.o=E==200,ed(this.i,this.v,this.B,this.l,this.S,We,E),this.o){if(this.U&&!this.L){t:{if(this.g){var F,Z=this.g;if((F=Z.g?Z.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!j(F)){var ie=F;break t}}ie=null}if(v=ie)Qi(this.i,this.l,v,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,ta(this,v);else{this.o=!1,this.m=3,Kt(12),Vr(this),ei(this);break e}}if(this.R){v=!0;let Wt;for(;!this.K&&this.C<N.length;)if(Wt=rd(this,N),Wt==Vn){We==4&&(this.m=4,Kt(14),v=!1),Qi(this.i,this.l,null,"[Incomplete Response]");break}else if(Wt==vn){this.m=4,Kt(15),Qi(this.i,this.l,N,"[Invalid Chunk]"),v=!1;break}else Qi(this.i,this.l,Wt,null),ta(this,Wt);if(nd(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),We!=4||N.length!=0||this.h.h||(this.m=1,Kt(16),v=!1),this.o=this.o&&v,!v)Qi(this.i,this.l,N,"[Invalid Chunked Response]"),Vr(this),ei(this);else if(N.length>0&&!this.W){this.W=!0;var xe=this.j;xe.g==this&&xe.aa&&!xe.P&&(xe.j.info("Great, no buffering proxy detected. Bytes received: "+N.length),uu(xe),xe.P=!0,Kt(11))}}else Qi(this.i,this.l,N,null),ta(this,N);We==4&&Vr(this),this.o&&!this.K&&(We==4?dd(this.j,this):(this.o=!1,Ji(this)))}else Da(this.g),E==400&&N.indexOf("Unknown SID")>0?(this.m=3,Kt(12)):(this.m=0,Kt(13)),Vr(this),ei(this)}}}catch{}finally{}};function Ip(v){if(!nd(v))return v.g.la();const E=Qn(v.g);if(E==="")return"";let N="";const F=E.length,Z=Ii(v.g)==4;if(!v.h.i){if(typeof TextDecoder>"u")return Vr(v),ei(v),"";v.h.i=new o.TextDecoder}for(let ie=0;ie<F;ie++)v.h.h=!0,N+=v.h.i.decode(E[ie],{stream:!(Z&&ie==F-1)});return E.length=0,v.h.g+=N,v.C=0,v.h.g}function nd(v){return v.g?v.v=="GET"&&v.M!=2&&v.j.Aa:!1}function rd(v,E){var N=v.C,F=E.indexOf(`
`,N);return F==-1?Vn:(N=Number(E.substring(N,F)),isNaN(N)?vn:(F+=1,F+N>E.length?Vn:(E=E.slice(F,F+N),v.C=F+N,E)))}bi.prototype.cancel=function(){this.K=!0,Vr(this)};function Ji(v){v.T=Date.now()+v.H,ml(v,v.H)}function ml(v,E){if(v.D!=null)throw Error("WatchDog timer not null");v.D=Wi(d(v.aa,v),E)}function ea(v){v.D&&(o.clearTimeout(v.D),v.D=null)}bi.prototype.aa=function(){this.D=null;const v=Date.now();v-this.T>=0?(_o(this.i,this.B),this.M!=2&&(un(),Kt(17)),Vr(this),this.m=2,ei(this)):ml(this,this.T-v)};function ei(v){v.j.I==0||v.K||dd(v.j,v)}function Vr(v){ea(v);var E=v.O;E&&typeof E.dispose=="function"&&E.dispose(),v.O=null,ae(v.V),v.g&&(E=v.g,v.g=null,E.abort(),E.dispose())}function ta(v,E){try{var N=v.j;if(N.I!=0&&(N.g==v||ra(N.h,v))){if(!v.L&&ra(N.h,v)&&N.I==3){try{var F=N.Ba.g.parse(E)}catch{F=null}if(Array.isArray(F)&&F.length==3){var Z=F;if(Z[0]==0){e:if(!N.v){if(N.g)if(N.g.F+3e3<v.F)Al(N),ms(N);else break e;No(N),Kt(18)}}else N.xa=Z[1],0<N.xa-N.K&&Z[2]<37500&&N.F&&N.A==0&&!N.C&&(N.C=Wi(d(N.Va,N),6e3));na(N.h)<=1&&N.ta&&(N.ta=void 0)}else ca(N,11)}else if((v.L||N.g==v)&&Al(N),!j(E))for(Z=N.Ba.g.parse(E),E=0;E<Z.length;E++){let At=Z[E];const Wt=At[0];if(!(Wt<=N.K))if(N.K=Wt,At=At[1],N.I==2)if(At[0]=="c"){N.M=At[1],N.ba=At[2];const ri=At[3];ri!=null&&(N.ka=ri,N.j.info("VER="+N.ka));const ua=At[4];ua!=null&&(N.za=ua,N.j.info("SVER="+N.za));const Ni=At[5];Ni!=null&&typeof Ni=="number"&&Ni>0&&(F=1.5*Ni,N.O=F,N.j.info("backChannelRequestTimeoutMs_="+F)),F=N;const Ri=v.g;if(Ri){const Ro=Ri.g?Ri.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ro){var ie=F.h;ie.g||Ro.indexOf("spdy")==-1&&Ro.indexOf("quic")==-1&&Ro.indexOf("h2")==-1||(ie.j=ie.l,ie.g=new Set,ie.h&&(Zc(ie,ie.h),ie.h=null))}if(F.G){const bl=Ri.g?Ri.g.getResponseHeader("X-HTTP-Session-Id"):null;bl&&(F.wa=bl,It(F.J,F.G,bl))}}N.I=3,N.l&&N.l.ra(),N.aa&&(N.T=Date.now()-v.F,N.j.info("Handshake RTT: "+N.T+"ms")),F=N;var xe=v;if(F.na=md(F,F.L?F.ba:null,F.W),xe.L){Jc(F.h,xe);var We=xe,fn=F.O;fn&&(We.H=fn),We.D&&(ea(We),Ji(We)),F.g=xe}else ud(F);N.i.length>0&&la(N)}else At[0]!="stop"&&At[0]!="close"||ca(N,7);else N.I==3&&(At[0]=="stop"||At[0]=="close"?At[0]=="stop"?ca(N,7):lu(N):At[0]!="noop"&&N.l&&N.l.qa(At),N.A=0)}}un(4)}catch{}}var yn=class{constructor(v,E){this.g=v,this.map=E}};function Wc(v){this.l=v||10,o.PerformanceNavigationTiming?(v=o.performance.getEntriesByType("navigation"),v=v.length>0&&(v[0].nextHopProtocol=="hq"||v[0].nextHopProtocol=="h2")):v=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=v?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Qc(v){return v.h?!0:v.g?v.g.size>=v.j:!1}function na(v){return v.h?1:v.g?v.g.size:0}function ra(v,E){return v.h?v.h==E:v.g?v.g.has(E):!1}function Zc(v,E){v.g?v.g.add(E):v.h=E}function Jc(v,E){v.h&&v.h==E?v.h=null:v.g&&v.g.has(E)&&v.g.delete(E)}Wc.prototype.cancel=function(){if(this.i=eu(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const v of this.g.values())v.cancel();this.g.clear()}};function eu(v){if(v.h!=null)return v.i.concat(v.h.G);if(v.g!=null&&v.g.size!==0){let E=v.i;for(const N of v.g.values())E=E.concat(N.G);return E}return w(v.i)}var id=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function gl(v,E){if(v){v=v.split("&");for(let N=0;N<v.length;N++){const F=v[N].indexOf("=");let Z,ie=null;F>=0?(Z=v[N].substring(0,F),ie=v[N].substring(F+1)):Z=v[N],E(Z,ie?decodeURIComponent(ie.replace(/\+/g," ")):"")}}}function Fr(v){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let E;v instanceof Fr?(this.l=v.l,Fn(this,v.j),this.o=v.o,this.g=v.g,ls(this,v.u),this.h=v.h,tu(this,ld(v.i)),this.m=v.m):v&&(E=String(v).match(id))?(this.l=!1,Fn(this,E[1]||"",!0),this.o=ia(E[2]||""),this.g=ia(E[3]||"",!0),ls(this,E[4]),this.h=ia(E[5]||"",!0),tu(this,E[6]||"",!0),this.m=ia(E[7]||"")):(this.l=!1,this.i=new us(null,this.l))}Fr.prototype.toString=function(){const v=[];var E=this.j;E&&v.push(Ao(E,vl,!0),":");var N=this.g;return(N||E=="file")&&(v.push("//"),(E=this.o)&&v.push(Ao(E,vl,!0),"@"),v.push(Ra(N).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),N=this.u,N!=null&&v.push(":",String(N))),(N=this.h)&&(this.g&&N.charAt(0)!="/"&&v.push("/"),v.push(Ao(N,N.charAt(0)=="/"?nu:ad,!0))),(N=this.i.toString())&&v.push("?",N),(N=this.m)&&v.push("#",Ao(N,sd)),v.join("")},Fr.prototype.resolve=function(v){const E=_n(this);let N=!!v.j;N?Fn(E,v.j):N=!!v.o,N?E.o=v.o:N=!!v.g,N?E.g=v.g:N=v.u!=null;var F=v.h;if(N)ls(E,v.u);else if(N=!!v.h){if(F.charAt(0)!="/")if(this.g&&!this.h)F="/"+F;else{var Z=E.h.lastIndexOf("/");Z!=-1&&(F=E.h.slice(0,Z+1)+F)}if(Z=F,Z==".."||Z==".")F="";else if(Z.indexOf("./")!=-1||Z.indexOf("/.")!=-1){F=Z.lastIndexOf("/",0)==0,Z=Z.split("/");const ie=[];for(let xe=0;xe<Z.length;){const We=Z[xe++];We=="."?F&&xe==Z.length&&ie.push(""):We==".."?((ie.length>1||ie.length==1&&ie[0]!="")&&ie.pop(),F&&xe==Z.length&&ie.push("")):(ie.push(We),F=!0)}F=ie.join("/")}else F=Z}return N?E.h=F:N=v.i.toString()!=="",N?tu(E,ld(v.i)):N=!!v.m,N&&(E.m=v.m),E};function _n(v){return new Fr(v)}function Fn(v,E,N){v.j=N?ia(E,!0):E,v.j&&(v.j=v.j.replace(/:$/,""))}function ls(v,E){if(E){if(E=Number(E),isNaN(E)||E<0)throw Error("Bad port number "+E);v.u=E}else v.u=null}function tu(v,E,N){E instanceof us?(v.i=E,_l(v.i,v.l)):(N||(E=Ao(E,cs)),v.i=new us(E,v.l))}function It(v,E,N){v.i.set(E,N)}function Eo(v){return It(v,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),v}function ia(v,E){return v?E?decodeURI(v.replace(/%25/g,"%2525")):decodeURIComponent(v):""}function Ao(v,E,N){return typeof v=="string"?(v=encodeURI(v).replace(E,Cr),N&&(v=v.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v):null}function Cr(v){return v=v.charCodeAt(0),"%"+(v>>4&15).toString(16)+(v&15).toString(16)}var vl=/[#\/\?@]/g,ad=/[#\?:]/g,nu=/[#\?]/g,cs=/[#\?@]/g,sd=/#/g;function us(v,E){this.h=this.g=null,this.i=v||null,this.j=!!E}function Tr(v){v.g||(v.g=new Map,v.h=0,v.i&&gl(v.i,function(E,N){v.add(decodeURIComponent(E.replace(/\+/g," ")),N)}))}n=us.prototype,n.add=function(v,E){Tr(this),this.i=null,v=fs(this,v);let N=this.g.get(v);return N||this.g.set(v,N=[]),N.push(E),this.h+=1,this};function od(v,E){Tr(v),E=fs(v,E),v.g.has(E)&&(v.i=null,v.h-=v.g.get(E).length,v.g.delete(E))}function ru(v,E){return Tr(v),E=fs(v,E),v.g.has(E)}n.forEach=function(v,E){Tr(this),this.g.forEach(function(N,F){N.forEach(function(Z){v.call(E,Z,F,this)},this)},this)};function iu(v,E){Tr(v);let N=[];if(typeof E=="string")ru(v,E)&&(N=N.concat(v.g.get(fs(v,E))));else for(v=Array.from(v.g.values()),E=0;E<v.length;E++)N=N.concat(v[E]);return N}n.set=function(v,E){return Tr(this),this.i=null,v=fs(this,v),ru(this,v)&&(this.h-=this.g.get(v).length),this.g.set(v,[E]),this.h+=1,this},n.get=function(v,E){return v?(v=iu(this,v),v.length>0?String(v[0]):E):E};function yl(v,E,N){od(v,E),N.length>0&&(v.i=null,v.g.set(fs(v,E),w(N)),v.h+=N.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const v=[],E=Array.from(this.g.keys());for(let F=0;F<E.length;F++){var N=E[F];const Z=Ra(N);N=iu(this,N);for(let ie=0;ie<N.length;ie++){let xe=Z;N[ie]!==""&&(xe+="="+Ra(N[ie])),v.push(xe)}}return this.i=v.join("&")};function ld(v){const E=new us;return E.i=v.i,v.g&&(E.g=new Map(v.g),E.h=v.h),E}function fs(v,E){return E=String(E),v.j&&(E=E.toLowerCase()),E}function _l(v,E){E&&!v.j&&(Tr(v),v.i=null,v.g.forEach(function(N,F){const Z=F.toLowerCase();F!=Z&&(od(this,F),yl(this,Z,N))},v)),v.j=E}function Ci(v,E){const N=new Ai;if(o.Image){const F=new Image;F.onload=m(ti,N,"TestLoadImage: loaded",!0,E,F),F.onerror=m(ti,N,"TestLoadImage: error",!1,E,F),F.onabort=m(ti,N,"TestLoadImage: abort",!1,E,F),F.ontimeout=m(ti,N,"TestLoadImage: timeout",!1,E,F),o.setTimeout(function(){F.ontimeout&&F.ontimeout()},1e4),F.src=v}else E(!1)}function au(v,E){const N=new Ai,F=new AbortController,Z=setTimeout(()=>{F.abort(),ti(N,"TestPingServer: timeout",!1,E)},1e4);fetch(v,{signal:F.signal}).then(ie=>{clearTimeout(Z),ie.ok?ti(N,"TestPingServer: ok",!0,E):ti(N,"TestPingServer: server error",!1,E)}).catch(()=>{clearTimeout(Z),ti(N,"TestPingServer: error",!1,E)})}function ti(v,E,N,F,Z){try{Z&&(Z.onload=null,Z.onerror=null,Z.onabort=null,Z.ontimeout=null),F(N)}catch{}}function ds(){this.g=new fe}function aa(v){this.i=v.Sb||null,this.h=v.ab||!1}g(aa,Pe),aa.prototype.g=function(){return new bo(this.i,this.h)};function bo(v,E){gt.call(this),this.H=v,this.o=E,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}g(bo,gt),n=bo.prototype,n.open=function(v,E){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=v,this.D=E,this.readyState=1,Ti(this)},n.send=function(v){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const E={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};v&&(E.body=v),(this.H||o).fetch(new Request(this.D,E)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,hs(this)),this.readyState=0},n.Pa=function(v){if(this.g&&(this.l=v,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=v.headers,this.readyState=2,Ti(this)),this.g&&(this.readyState=3,Ti(this),this.g)))if(this.responseType==="arraybuffer")v.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in v){if(this.j=v.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;xl(this)}else v.text().then(this.Oa.bind(this),this.ga.bind(this))};function xl(v){v.j.read().then(v.Ma.bind(v)).catch(v.ga.bind(v))}n.Ma=function(v){if(this.g){if(this.o&&v.value)this.response.push(v.value);else if(!this.o){var E=v.value?v.value:new Uint8Array(0);(E=this.B.decode(E,{stream:!v.done}))&&(this.response=this.responseText+=E)}v.done?hs(this):Ti(this),this.readyState==3&&xl(this)}},n.Oa=function(v){this.g&&(this.response=this.responseText=v,hs(this))},n.Na=function(v){this.g&&(this.response=v,hs(this))},n.ga=function(){this.g&&hs(this)};function hs(v){v.readyState=4,v.l=null,v.j=null,v.B=null,Ti(v)}n.setRequestHeader=function(v,E){this.A.append(v,E)},n.getResponseHeader=function(v){return this.h&&this.h.get(v.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const v=[],E=this.h.entries();for(var N=E.next();!N.done;)N=N.value,v.push(N[0]+": "+N[1]),N=E.next();return v.join(`\r
`)};function Ti(v){v.onreadystatechange&&v.onreadystatechange.call(v)}Object.defineProperty(bo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(v){this.m=v?"include":"same-origin"}});function ni(v){let E="";return ve(v,function(N,F){E+=F,E+=":",E+=N,E+=`\r
`}),E}function So(v,E,N){e:{for(F in N){var F=!1;break e}F=!0}F||(N=ni(N),typeof v=="string"?N!=null&&Ra(N):It(v,E,N))}function kt(v){gt.call(this),this.headers=new Map,this.L=v||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}g(kt,gt);var sa=/^https?$/i,su=["POST","PUT"];n=kt.prototype,n.Fa=function(v){this.H=v},n.ea=function(v,E,N,F){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+v);E=E?E.toUpperCase():"GET",this.D=v,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Kc.g(),this.g.onreadystatechange=_(d(this.Ca,this));try{this.B=!0,this.g.open(E,String(v),!0),this.B=!1}catch(ie){Co(this,ie);return}if(v=N||"",N=new Map(this.headers),F)if(Object.getPrototypeOf(F)===Object.prototype)for(var Z in F)N.set(Z,F[Z]);else if(typeof F.keys=="function"&&typeof F.get=="function")for(const ie of F.keys())N.set(ie,F.get(ie));else throw Error("Unknown input type for opt_headers: "+String(F));F=Array.from(N.keys()).find(ie=>ie.toLowerCase()=="content-type"),Z=o.FormData&&v instanceof o.FormData,!(Array.prototype.indexOf.call(su,E,void 0)>=0)||F||Z||N.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ie,xe]of N)this.g.setRequestHeader(ie,xe);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(v),this.v=!1}catch(ie){Co(this,ie)}};function Co(v,E){v.h=!1,v.g&&(v.j=!0,v.g.abort(),v.j=!1),v.l=E,v.o=5,ou(v),Oa(v)}function ou(v){v.A||(v.A=!0,Pt(v,"complete"),Pt(v,"error"))}n.abort=function(v){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=v||7,Pt(this,"complete"),Pt(this,"abort"),Oa(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Oa(this,!0)),kt.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?To(this):this.Xa())},n.Xa=function(){To(this)};function To(v){if(v.h&&typeof a<"u"){if(v.v&&Ii(v)==4)setTimeout(v.Ca.bind(v),0);else if(Pt(v,"readystatechange"),Ii(v)==4){v.h=!1;try{const ie=v.ca();e:switch(ie){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var E=!0;break e;default:E=!1}var N;if(!(N=E)){var F;if(F=ie===0){let xe=String(v.D).match(id)[1]||null;!xe&&o.self&&o.self.location&&(xe=o.self.location.protocol.slice(0,-1)),F=!sa.test(xe?xe.toLowerCase():"")}N=F}if(N)Pt(v,"complete"),Pt(v,"success");else{v.o=6;try{var Z=Ii(v)>2?v.g.statusText:""}catch{Z=""}v.l=Z+" ["+v.ca()+"]",ou(v)}}finally{Oa(v)}}}}function Oa(v,E){if(v.g){v.m&&(clearTimeout(v.m),v.m=null);const N=v.g;v.g=null,E||Pt(v,"ready");try{N.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function Ii(v){return v.g?v.g.readyState:0}n.ca=function(){try{return Ii(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(v){if(this.g){var E=this.g.responseText;return v&&E.indexOf(v)==0&&(E=E.substring(v.length)),je(E)}};function Qn(v){try{if(!v.g)return null;if("response"in v.g)return v.g.response;switch(v.F){case"":case"text":return v.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in v.g)return v.g.mozResponseArrayBuffer}return null}catch{return null}}function Da(v){const E={};v=(v.g&&Ii(v)>=2&&v.g.getAllResponseHeaders()||"").split(`\r
`);for(let F=0;F<v.length;F++){if(j(v[F]))continue;var N=td(v[F]);const Z=N[0];if(N=N[1],typeof N!="string")continue;N=N.trim();const ie=E[Z]||[];E[Z]=ie,ie.push(N)}He(E,function(F){return F.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function oa(v,E,N){return N&&N.internalChannelParams&&N.internalChannelParams[v]||E}function ps(v){this.za=0,this.i=[],this.j=new Ai,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=oa("failFast",!1,v),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=oa("baseRetryDelayMs",5e3,v),this.Za=oa("retryDelaySeedMs",1e4,v),this.Ta=oa("forwardChannelMaxRetries",2,v),this.va=oa("forwardChannelRequestTimeoutMs",2e4,v),this.ma=v&&v.xmlHttpFactory||void 0,this.Ua=v&&v.Rb||void 0,this.Aa=v&&v.useFetchStreams||!1,this.O=void 0,this.L=v&&v.supportsCrossDomainXhr||!1,this.M="",this.h=new Wc(v&&v.concurrentRequestLimit),this.Ba=new ds,this.S=v&&v.fastHandshake||!1,this.R=v&&v.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=v&&v.Pb||!1,v&&v.ua&&this.j.ua(),v&&v.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&v&&v.detectBufferingProxy||!1,this.ia=void 0,v&&v.longPollingTimeout&&v.longPollingTimeout>0&&(this.ia=v.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=ps.prototype,n.ka=8,n.I=1,n.connect=function(v,E,N,F){Kt(0),this.W=v,this.H=E||{},N&&F!==void 0&&(this.H.OSID=N,this.H.OAID=F),this.F=this.X,this.J=md(this,null,this.W),la(this)};function lu(v){if(wl(v),v.I==3){var E=v.V++,N=_n(v.J);if(It(N,"SID",v.M),It(N,"RID",E),It(N,"TYPE","terminate"),Io(v,N),E=new bi(v,v.j,E),E.M=2,E.A=Eo(_n(N)),N=!1,o.navigator&&o.navigator.sendBeacon)try{N=o.navigator.sendBeacon(E.A.toString(),"")}catch{}!N&&o.Image&&(new Image().src=E.A,N=!0),N||(E.g=gd(E.j,null),E.g.ea(E.A)),E.F=Date.now(),Ji(E)}pd(v)}function ms(v){v.g&&(uu(v),v.g.cancel(),v.g=null)}function wl(v){ms(v),v.v&&(o.clearTimeout(v.v),v.v=null),Al(v),v.h.cancel(),v.m&&(typeof v.m=="number"&&o.clearTimeout(v.m),v.m=null)}function la(v){if(!Qc(v.h)&&!v.m){v.m=!0;var E=v.Ea;q||b(),$||(q(),$=!0),M.add(E,v),v.D=0}}function El(v,E){return na(v.h)>=v.h.j-(v.m?1:0)?!1:v.m?(v.i=E.G.concat(v.i),!0):v.I==1||v.I==2||v.D>=(v.Sa?0:v.Ta)?!1:(v.m=Wi(d(v.Ea,v,E),hd(v,v.D)),v.D++,!0)}n.Ea=function(v){if(this.m)if(this.m=null,this.I==1){if(!v){this.V=Math.floor(Math.random()*1e5),v=this.V++;const Z=new bi(this,this.j,v);let ie=this.o;if(this.U&&(ie?(ie=Y(ie),me(ie,this.U)):ie=this.U),this.u!==null||this.R||(Z.J=ie,ie=null),this.S)e:{for(var E=0,N=0;N<this.i.length;N++){t:{var F=this.i[N];if("__data__"in F.map&&(F=F.map.__data__,typeof F=="string")){F=F.length;break t}F=void 0}if(F===void 0)break;if(E+=F,E>4096){E=N;break e}if(E===4096||N===this.i.length-1){E=N+1;break e}}E=1e3}else E=1e3;E=cd(this,Z,E),N=_n(this.J),It(N,"RID",v),It(N,"CVER",22),this.G&&It(N,"X-HTTP-Session-Id",this.G),Io(this,N),ie&&(this.R?E="headers="+Ra(ni(ie))+"&"+E:this.u&&So(N,this.u,ie)),Zc(this.h,Z),this.Ra&&It(N,"TYPE","init"),this.S?(It(N,"$req",E),It(N,"SID","null"),Z.U=!0,Zi(Z,N,null)):Zi(Z,N,E),this.I=2}}else this.I==3&&(v?cu(this,v):this.i.length==0||Qc(this.h)||cu(this))};function cu(v,E){var N;E?N=E.l:N=v.V++;const F=_n(v.J);It(F,"SID",v.M),It(F,"RID",N),It(F,"AID",v.K),Io(v,F),v.u&&v.o&&So(F,v.u,v.o),N=new bi(v,v.j,N,v.D+1),v.u===null&&(N.J=v.o),E&&(v.i=E.G.concat(v.i)),E=cd(v,N,1e3),N.H=Math.round(v.va*.5)+Math.round(v.va*.5*Math.random()),Zc(v.h,N),Zi(N,F,E)}function Io(v,E){v.H&&ve(v.H,function(N,F){It(E,F,N)}),v.l&&ve({},function(N,F){It(E,F,N)})}function cd(v,E,N){N=Math.min(v.i.length,N);const F=v.l?d(v.l.Ka,v.l,v):null;e:{var Z=v.i;let We=-1;for(;;){const fn=["count="+N];We==-1?N>0?(We=Z[0].g,fn.push("ofs="+We)):We=0:fn.push("ofs="+We);let At=!0;for(let Wt=0;Wt<N;Wt++){var ie=Z[Wt].g;const ri=Z[Wt].map;if(ie-=We,ie<0)We=Math.max(0,Z[Wt].g-100),At=!1;else try{ie="req"+ie+"_"||"";try{var xe=ri instanceof Map?ri:Object.entries(ri);for(const[ua,Ni]of xe){let Ri=Ni;c(Ni)&&(Ri=Ae(Ni)),fn.push(ie+ua+"="+encodeURIComponent(Ri))}}catch(ua){throw fn.push(ie+"type="+encodeURIComponent("_badmap")),ua}}catch{F&&F(ri)}}if(At){xe=fn.join("&");break e}}xe=void 0}return v=v.i.splice(0,N),E.G=v,xe}function ud(v){if(!v.g&&!v.v){v.Y=1;var E=v.Da;q||b(),$||(q(),$=!0),M.add(E,v),v.A=0}}function No(v){return v.g||v.v||v.A>=3?!1:(v.Y++,v.v=Wi(d(v.Da,v),hd(v,v.A)),v.A++,!0)}n.Da=function(){if(this.v=null,fd(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var v=4*this.T;this.j.info("BP detection timer enabled: "+v),this.B=Wi(d(this.Wa,this),v)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Kt(10),ms(this),fd(this))};function uu(v){v.B!=null&&(o.clearTimeout(v.B),v.B=null)}function fd(v){v.g=new bi(v,v.j,"rpc",v.Y),v.u===null&&(v.g.J=v.o),v.g.P=0;var E=_n(v.na);It(E,"RID","rpc"),It(E,"SID",v.M),It(E,"AID",v.K),It(E,"CI",v.F?"0":"1"),!v.F&&v.ia&&It(E,"TO",v.ia),It(E,"TYPE","xmlhttp"),Io(v,E),v.u&&v.o&&So(E,v.u,v.o),v.O&&(v.g.H=v.O);var N=v.g;v=v.ba,N.M=1,N.A=Eo(_n(E)),N.u=null,N.R=!0,pl(N,v)}n.Va=function(){this.C!=null&&(this.C=null,ms(this),No(this),Kt(19))};function Al(v){v.C!=null&&(o.clearTimeout(v.C),v.C=null)}function dd(v,E){var N=null;if(v.g==E){Al(v),uu(v),v.g=null;var F=2}else if(ra(v.h,E))N=E.G,Jc(v.h,E),F=1;else return;if(v.I!=0){if(E.o)if(F==1){N=E.u?E.u.length:0,E=Date.now()-E.F;var Z=v.D;F=tt(),Pt(F,new Ki(F,N)),la(v)}else ud(v);else if(Z=E.m,Z==3||Z==0&&E.X>0||!(F==1&&El(v,E)||F==2&&No(v)))switch(N&&N.length>0&&(E=v.h,E.i=E.i.concat(N)),Z){case 1:ca(v,5);break;case 4:ca(v,10);break;case 3:ca(v,6);break;default:ca(v,2)}}}function hd(v,E){let N=v.Qa+Math.floor(Math.random()*v.Za);return v.isActive()||(N*=2),N*E}function ca(v,E){if(v.j.info("Error code "+E),E==2){var N=d(v.bb,v),F=v.Ua;const Z=!F;F=new Fr(F||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||Fn(F,"https"),Eo(F),Z?Ci(F.toString(),N):au(F.toString(),N)}else Kt(2);v.I=0,v.l&&v.l.pa(E),pd(v),wl(v)}n.bb=function(v){v?(this.j.info("Successfully pinged google.com"),Kt(2)):(this.j.info("Failed to ping google.com"),Kt(1))};function pd(v){if(v.I=0,v.ja=[],v.l){const E=eu(v.h);(E.length!=0||v.i.length!=0)&&(A(v.ja,E),A(v.ja,v.i),v.h.i.length=0,w(v.i),v.i.length=0),v.l.oa()}}function md(v,E,N){var F=N instanceof Fr?_n(N):new Fr(N);if(F.g!="")E&&(F.g=E+"."+F.g),ls(F,F.u);else{var Z=o.location;F=Z.protocol,E=E?E+"."+Z.hostname:Z.hostname,Z=+Z.port;const ie=new Fr(null);F&&Fn(ie,F),E&&(ie.g=E),Z&&ls(ie,Z),N&&(ie.h=N),F=ie}return N=v.G,E=v.wa,N&&E&&It(F,N,E),It(F,"VER",v.ka),Io(v,F),F}function gd(v,E,N){if(E&&!v.L)throw Error("Can't create secondary domain capable XhrIo object.");return E=v.Aa&&!v.ma?new kt(new aa({ab:N})):new kt(v.ma),E.Fa(v.L),E}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function vd(){}n=vd.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function gs(){}gs.prototype.g=function(v,E){return new xr(v,E)};function xr(v,E){gt.call(this),this.g=new ps(E),this.l=v,this.h=E&&E.messageUrlParams||null,v=E&&E.messageHeaders||null,E&&E.clientProtocolHeaderRequired&&(v?v["X-Client-Protocol"]="webchannel":v={"X-Client-Protocol":"webchannel"}),this.g.o=v,v=E&&E.initMessageHeaders||null,E&&E.messageContentType&&(v?v["X-WebChannel-Content-Type"]=E.messageContentType:v={"X-WebChannel-Content-Type":E.messageContentType}),E&&E.sa&&(v?v["X-WebChannel-Client-Profile"]=E.sa:v={"X-WebChannel-Client-Profile":E.sa}),this.g.U=v,(v=E&&E.Qb)&&!j(v)&&(this.g.u=v),this.A=E&&E.supportsCrossDomainXhr||!1,this.v=E&&E.sendRawJson||!1,(E=E&&E.httpSessionIdParam)&&!j(E)&&(this.g.G=E,v=this.h,v!==null&&E in v&&(v=this.h,E in v&&delete v[E])),this.j=new Ma(this)}g(xr,gt),xr.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},xr.prototype.close=function(){lu(this.g)},xr.prototype.o=function(v){var E=this.g;if(typeof v=="string"){var N={};N.__data__=v,v=N}else this.v&&(N={},N.__data__=Ae(v),v=N);E.i.push(new yn(E.Ya++,v)),E.I==3&&la(E)},xr.prototype.N=function(){this.g.l=null,delete this.j,lu(this.g),delete this.g,xr.Z.N.call(this)};function yd(v){Je.call(this),v.__headers__&&(this.headers=v.__headers__,this.statusCode=v.__status__,delete v.__headers__,delete v.__status__);var E=v.__sm__;if(E){e:{for(const N in E){v=N;break e}v=void 0}(this.i=v)&&(v=this.i,E=E!==null&&v in E?E[v]:void 0),this.data=E}else this.data=v}g(yd,Je);function _d(){rt.call(this),this.status=1}g(_d,rt);function Ma(v){this.g=v}g(Ma,vd),Ma.prototype.ra=function(){Pt(this.g,"a")},Ma.prototype.qa=function(v){Pt(this.g,new yd(v))},Ma.prototype.pa=function(v){Pt(this.g,new _d)},Ma.prototype.oa=function(){Pt(this.g,"b")},gs.prototype.createWebChannel=gs.prototype.g,xr.prototype.send=xr.prototype.o,xr.prototype.open=xr.prototype.m,xr.prototype.close=xr.prototype.close,IC=function(){return new gs},TC=function(){return tt()},CC=Ce,Fg={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},xo.NO_ERROR=0,xo.TIMEOUT=8,xo.HTTP_ERROR=6,Xh=xo,Yc.COMPLETE="complete",SC=Yc,Fe.EventType=ze,ze.OPEN="a",ze.CLOSE="b",ze.ERROR="c",ze.MESSAGE="d",gt.prototype.listen=gt.prototype.J,nf=Fe,kt.prototype.listenOnce=kt.prototype.K,kt.prototype.getLastError=kt.prototype.Ha,kt.prototype.getLastErrorCode=kt.prototype.ya,kt.prototype.getStatus=kt.prototype.ca,kt.prototype.getResponseJson=kt.prototype.La,kt.prototype.getResponseText=kt.prototype.la,kt.prototype.send=kt.prototype.ea,kt.prototype.setWithCredentials=kt.prototype.Fa,bC=kt}).apply(typeof Sh<"u"?Sh:typeof self<"u"?self:typeof window<"u"?window:{});const AE="@firebase/firestore",bE="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gr{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}gr.UNAUTHENTICATED=new gr(null),gr.GOOGLE_CREDENTIALS=new gr("google-credentials-uid"),gr.FIRST_PARTY=new gr("first-party-uid"),gr.MOCK_USER=new gr("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Lc="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const al=new Fv("@firebase/firestore");function ic(){return al.logLevel}function Se(n,...e){if(al.logLevel<=ct.DEBUG){const t=e.map(Qv);al.debug(`Firestore (${Lc}): ${n}`,...t)}}function is(n,...e){if(al.logLevel<=ct.ERROR){const t=e.map(Qv);al.error(`Firestore (${Lc}): ${n}`,...t)}}function Ec(n,...e){if(al.logLevel<=ct.WARN){const t=e.map(Qv);al.warn(`Firestore (${Lc}): ${n}`,...t)}}function Qv(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ve(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,NC(n,r,t)}function NC(n,e,t){let r=`FIRESTORE (${Lc}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw is(r),new Error(r)}function mt(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||NC(e,i,r)}function Xe(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ue={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ee extends Ia{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ea{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RC{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class bD{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(gr.UNAUTHENTICATED)))}shutdown(){}}class SD{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class CD{constructor(e){this.t=e,this.currentUser=gr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){mt(this.o===void 0,42304);let r=this.i;const i=u=>this.i!==r?(r=this.i,t(u)):Promise.resolve();let a=new Ea;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new Ea,e.enqueueRetryable((()=>i(this.currentUser)))};const o=()=>{const u=a;e.enqueueRetryable((async()=>{await u.promise,await i(this.currentUser)}))},c=u=>{Se("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit((u=>c(u))),setTimeout((()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?c(u):(Se("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Ea)}}),0),o()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((r=>this.i!==e?(Se("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(mt(typeof r.accessToken=="string",31837,{l:r}),new RC(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return mt(e===null||typeof e=="string",2055,{h:e}),new gr(e)}}class TD{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=gr.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class ID{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new TD(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(gr.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class SE{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class ND{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,gi(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){mt(this.o===void 0,3512);const r=a=>{a.error!=null&&Se("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const o=a.token!==this.m;return this.m=a.token,Se("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable((()=>r(a)))};const i=a=>{Se("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((a=>i(a))),setTimeout((()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?i(a):Se("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new SE(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(mt(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new SE(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RD(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zv{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=RD(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<t&&(r+=e.charAt(i[a]%62))}return r}}function ut(n,e){return n<e?-1:n>e?1:0}function Ug(n,e){const t=Math.min(n.length,e.length);for(let r=0;r<t;r++){const i=n.charAt(r),a=e.charAt(r);if(i!==a)return Lm(i)===Lm(a)?ut(i,a):Lm(i)?1:-1}return ut(n.length,e.length)}const OD=55296,DD=57343;function Lm(n){const e=n.charCodeAt(0);return e>=OD&&e<=DD}function Ac(n,e,t){return n.length===e.length&&n.every(((r,i)=>t(r,e[i])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CE="__name__";class va{constructor(e,t,r){t===void 0?t=0:t>e.length&&Ve(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&Ve(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return va.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof va?e.forEach((r=>{t.push(r)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const a=va.compareSegments(e.get(i),t.get(i));if(a!==0)return a}return ut(e.length,t.length)}static compareSegments(e,t){const r=va.isNumericId(e),i=va.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?va.extractNumericId(e).compare(va.extractNumericId(t)):Ug(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Js.fromString(e.substring(4,e.length-2))}}class Ft extends va{construct(e,t,r){return new Ft(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ee(ue.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter((i=>i.length>0)))}return new Ft(t)}static emptyPath(){return new Ft([])}}const MD=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ar extends va{construct(e,t,r){return new ar(e,t,r)}static isValidIdentifier(e){return MD.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ar.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===CE}static keyField(){return new ar([CE])}static fromServerFormat(e){const t=[];let r="",i=0;const a=()=>{if(r.length===0)throw new Ee(ue.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let o=!1;for(;i<e.length;){const c=e[i];if(c==="\\"){if(i+1===e.length)throw new Ee(ue.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new Ee(ue.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else c==="`"?(o=!o,i++):c!=="."||o?(r+=c,i++):(a(),i++)}if(a(),o)throw new Ee(ue.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ar(t)}static emptyPath(){return new ar([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Me{constructor(e){this.path=e}static fromPath(e){return new Me(Ft.fromString(e))}static fromName(e){return new Me(Ft.fromString(e).popFirst(5))}static empty(){return new Me(Ft.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ft.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Ft.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Me(new Ft(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OC(n,e,t){if(!t)throw new Ee(ue.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function PD(n,e,t,r){if(e===!0&&r===!0)throw new Ee(ue.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function TE(n){if(!Me.isDocumentKey(n))throw new Ee(ue.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function IE(n){if(Me.isDocumentKey(n))throw new Ee(ue.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function DC(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Y0(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Ve(12329,{type:typeof n})}function yi(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Ee(ue.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Y0(n);throw new Ee(ue.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function kD(n,e){if(e<=0)throw new Ee(ue.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tn(n,e){const t={typeString:n};return e&&(t.value=e),t}function Gf(n,e){if(!DC(n))throw new Ee(ue.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const i=e[r].typeString,a="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}const o=n[r];if(i&&typeof o!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(a!==void 0&&o!==a.value){t=`Expected '${r}' field to equal '${a.value}'`;break}}if(t)throw new Ee(ue.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NE=-62135596800,RE=1e6;class Mt{static now(){return Mt.fromMillis(Date.now())}static fromDate(e){return Mt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*RE);return new Mt(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ee(ue.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ee(ue.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<NE)throw new Ee(ue.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ee(ue.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/RE}_compareTo(e){return this.seconds===e.seconds?ut(this.nanoseconds,e.nanoseconds):ut(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Mt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Gf(e,Mt._jsonSchema))return new Mt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-NE;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Mt._jsonSchemaVersion="firestore/timestamp/1.0",Mt._jsonSchema={type:Tn("string",Mt._jsonSchemaVersion),seconds:Tn("number"),nanoseconds:Tn("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ge{static fromTimestamp(e){return new Ge(e)}static min(){return new Ge(new Mt(0,0))}static max(){return new Ge(new Mt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cf=-1;function jD(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Ge.fromTimestamp(r===1e9?new Mt(t+1,0):new Mt(t,r));return new so(i,Me.empty(),e)}function LD(n){return new so(n.readTime,n.key,Cf)}class so{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new so(Ge.min(),Me.empty(),Cf)}static max(){return new so(Ge.max(),Me.empty(),Cf)}}function BD(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Me.comparator(n.documentKey,e.documentKey),t!==0?t:ut(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VD="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class FD{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bc(n){if(n.code!==ue.FAILED_PRECONDITION||n.message!==VD)throw n;Se("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ve(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new pe(((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,i)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof pe?t:pe.resolve(t)}catch(t){return pe.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):pe.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):pe.reject(t)}static resolve(e){return new pe(((t,r)=>{t(e)}))}static reject(e){return new pe(((t,r)=>{r(e)}))}static waitFor(e){return new pe(((t,r)=>{let i=0,a=0,o=!1;e.forEach((c=>{++i,c.next((()=>{++a,o&&a===i&&t()}),(u=>r(u)))})),o=!0,a===i&&t()}))}static or(e){let t=pe.resolve(!1);for(const r of e)t=t.next((i=>i?pe.resolve(i):r()));return t}static forEach(e,t){const r=[];return e.forEach(((i,a)=>{r.push(t.call(this,i,a))})),this.waitFor(r)}static mapArray(e,t){return new pe(((r,i)=>{const a=e.length,o=new Array(a);let c=0;for(let u=0;u<a;u++){const d=u;t(e[d]).next((m=>{o[d]=m,++c,c===a&&r(o)}),(m=>i(m)))}}))}static doWhile(e,t){return new pe(((r,i)=>{const a=()=>{e()===!0?t().next((()=>{a()}),i):r()};a()}))}}function UD(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Vc(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K0{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>t.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}K0.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jv=-1;function qf(n){return n==null}function h0(n){return n===0&&1/n==-1/0}function zD(n){return typeof n=="number"&&Number.isInteger(n)&&!h0(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MC="";function HD(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=OE(e)),e=GD(n.get(t),e);return OE(e)}function GD(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const a=n.charAt(i);switch(a){case"\0":t+="";break;case MC:t+="";break;default:t+=a}}return t}function OE(n){return n+MC+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DE(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function go(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function PC(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class an{constructor(e,t){this.comparator=e,this.root=t||ir.EMPTY}insert(e,t){return new an(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ir.BLACK,null,null))}remove(e){return new an(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ir.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,r)=>(e(t,r),!1)))}toString(){const e=[];return this.inorderTraversal(((t,r)=>(e.push(`${t}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ch(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ch(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ch(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ch(this.root,e,this.comparator,!0)}}class Ch{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,t&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ir{constructor(e,t,r,i,a){this.key=e,this.value=t,this.color=r??ir.RED,this.left=i??ir.EMPTY,this.right=a??ir.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,a){return new ir(e??this.key,t??this.value,r??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,t,r),null):a===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return ir.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return ir.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ir.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ir.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ve(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ve(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ve(27949);return e+(this.isRed()?0:1)}}ir.EMPTY=null,ir.RED=!0,ir.BLACK=!1;ir.EMPTY=new class{constructor(){this.size=0}get key(){throw Ve(57766)}get value(){throw Ve(16141)}get color(){throw Ve(16727)}get left(){throw Ve(29726)}get right(){throw Ve(36894)}copy(e,t,r,i,a){return this}insert(e,t,r){return new ir(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jn{constructor(e){this.comparator=e,this.data=new an(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,r)=>(e(t),!1)))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new ME(this.data.getIterator())}getIteratorFrom(e){return new ME(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((r=>{t=t.add(r)})),t}isEqual(e){if(!(e instanceof jn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(this.comparator(i,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new jn(this.comparator);return t.data=e,t}}class ME{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qr{constructor(e){this.fields=e,e.sort(ar.comparator)}static empty(){return new Qr([])}unionWith(e){let t=new jn(ar.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Qr(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ac(this.fields,e.fields,((t,r)=>t.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kC extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(i){try{return atob(i)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new kC("Invalid base64 string: "+a):a}})(e);return new lr(t)}static fromUint8Array(e){const t=(function(i){let a="";for(let o=0;o<i.length;++o)a+=String.fromCharCode(i[o]);return a})(e);return new lr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ut(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}lr.EMPTY_BYTE_STRING=new lr("");const qD=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function oo(n){if(mt(!!n,39018),typeof n=="string"){let e=0;const t=qD.exec(n);if(mt(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:mn(n.seconds),nanos:mn(n.nanos)}}function mn(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function lo(n){return typeof n=="string"?lr.fromBase64String(n):lr.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jC="server_timestamp",LC="__type__",BC="__previous_value__",VC="__local_write_time__";function ey(n){return(n?.mapValue?.fields||{})[LC]?.stringValue===jC}function W0(n){const e=n.mapValue.fields[BC];return ey(e)?W0(e):e}function Tf(n){const e=oo(n.mapValue.fields[VC].timestampValue);return new Mt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $D{constructor(e,t,r,i,a,o,c,u,d,m){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=c,this.longPollingOptions=u,this.useFetchStreams=d,this.isUsingEmulator=m}}const p0="(default)";class If{constructor(e,t){this.projectId=e,this.database=t||p0}static empty(){return new If("","")}get isDefaultDatabase(){return this.database===p0}isEqual(e){return e instanceof If&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FC="__type__",XD="__max__",Th={mapValue:{}},UC="__vector__",m0="value";function co(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?ey(n)?4:KD(n)?9007199254740991:YD(n)?10:11:Ve(28295,{value:n})}function Ca(n,e){if(n===e)return!0;const t=co(n);if(t!==co(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Tf(n).isEqual(Tf(e));case 3:return(function(i,a){if(typeof i.timestampValue=="string"&&typeof a.timestampValue=="string"&&i.timestampValue.length===a.timestampValue.length)return i.timestampValue===a.timestampValue;const o=oo(i.timestampValue),c=oo(a.timestampValue);return o.seconds===c.seconds&&o.nanos===c.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(i,a){return lo(i.bytesValue).isEqual(lo(a.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(i,a){return mn(i.geoPointValue.latitude)===mn(a.geoPointValue.latitude)&&mn(i.geoPointValue.longitude)===mn(a.geoPointValue.longitude)})(n,e);case 2:return(function(i,a){if("integerValue"in i&&"integerValue"in a)return mn(i.integerValue)===mn(a.integerValue);if("doubleValue"in i&&"doubleValue"in a){const o=mn(i.doubleValue),c=mn(a.doubleValue);return o===c?h0(o)===h0(c):isNaN(o)&&isNaN(c)}return!1})(n,e);case 9:return Ac(n.arrayValue.values||[],e.arrayValue.values||[],Ca);case 10:case 11:return(function(i,a){const o=i.mapValue.fields||{},c=a.mapValue.fields||{};if(DE(o)!==DE(c))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(c[u]===void 0||!Ca(o[u],c[u])))return!1;return!0})(n,e);default:return Ve(52216,{left:n})}}function Nf(n,e){return(n.values||[]).find((t=>Ca(t,e)))!==void 0}function bc(n,e){if(n===e)return 0;const t=co(n),r=co(e);if(t!==r)return ut(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return ut(n.booleanValue,e.booleanValue);case 2:return(function(a,o){const c=mn(a.integerValue||a.doubleValue),u=mn(o.integerValue||o.doubleValue);return c<u?-1:c>u?1:c===u?0:isNaN(c)?isNaN(u)?0:-1:1})(n,e);case 3:return PE(n.timestampValue,e.timestampValue);case 4:return PE(Tf(n),Tf(e));case 5:return Ug(n.stringValue,e.stringValue);case 6:return(function(a,o){const c=lo(a),u=lo(o);return c.compareTo(u)})(n.bytesValue,e.bytesValue);case 7:return(function(a,o){const c=a.split("/"),u=o.split("/");for(let d=0;d<c.length&&d<u.length;d++){const m=ut(c[d],u[d]);if(m!==0)return m}return ut(c.length,u.length)})(n.referenceValue,e.referenceValue);case 8:return(function(a,o){const c=ut(mn(a.latitude),mn(o.latitude));return c!==0?c:ut(mn(a.longitude),mn(o.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return kE(n.arrayValue,e.arrayValue);case 10:return(function(a,o){const c=a.fields||{},u=o.fields||{},d=c[m0]?.arrayValue,m=u[m0]?.arrayValue,g=ut(d?.values?.length||0,m?.values?.length||0);return g!==0?g:kE(d,m)})(n.mapValue,e.mapValue);case 11:return(function(a,o){if(a===Th.mapValue&&o===Th.mapValue)return 0;if(a===Th.mapValue)return 1;if(o===Th.mapValue)return-1;const c=a.fields||{},u=Object.keys(c),d=o.fields||{},m=Object.keys(d);u.sort(),m.sort();for(let g=0;g<u.length&&g<m.length;++g){const _=Ug(u[g],m[g]);if(_!==0)return _;const w=bc(c[u[g]],d[m[g]]);if(w!==0)return w}return ut(u.length,m.length)})(n.mapValue,e.mapValue);default:throw Ve(23264,{he:t})}}function PE(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return ut(n,e);const t=oo(n),r=oo(e),i=ut(t.seconds,r.seconds);return i!==0?i:ut(t.nanos,r.nanos)}function kE(n,e){const t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){const a=bc(t[i],r[i]);if(a)return a}return ut(t.length,r.length)}function Sc(n){return zg(n)}function zg(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const r=oo(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return lo(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return Me.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",i=!0;for(const a of t.values||[])i?i=!1:r+=",",r+=zg(a);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){const r=Object.keys(t.fields||{}).sort();let i="{",a=!0;for(const o of r)a?a=!1:i+=",",i+=`${o}:${zg(t.fields[o])}`;return i+"}"})(n.mapValue):Ve(61005,{value:n})}function Yh(n){switch(co(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=W0(n);return e?16+Yh(e):16;case 5:return 2*n.stringValue.length;case 6:return lo(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((i,a)=>i+Yh(a)),0)})(n.arrayValue);case 10:case 11:return(function(r){let i=0;return go(r.fields,((a,o)=>{i+=a.length+Yh(o)})),i})(n.mapValue);default:throw Ve(13486,{value:n})}}function jE(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Hg(n){return!!n&&"integerValue"in n}function ty(n){return!!n&&"arrayValue"in n}function LE(n){return!!n&&"nullValue"in n}function BE(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Kh(n){return!!n&&"mapValue"in n}function YD(n){return(n?.mapValue?.fields||{})[FC]?.stringValue===UC}function pf(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return go(n.mapValue.fields,((t,r)=>e.mapValue.fields[t]=pf(r))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=pf(n.arrayValue.values[t]);return e}return{...n}}function KD(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===XD}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sr{constructor(e){this.value=e}static empty(){return new Sr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Kh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=pf(t)}setAll(e){let t=ar.emptyPath(),r={},i=[];e.forEach(((o,c)=>{if(!t.isImmediateParentOf(c)){const u=this.getFieldsMap(t);this.applyChanges(u,r,i),r={},i=[],t=c.popLast()}o?r[c.lastSegment()]=pf(o):i.push(c.lastSegment())}));const a=this.getFieldsMap(t);this.applyChanges(a,r,i)}delete(e){const t=this.field(e.popLast());Kh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ca(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Kh(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){go(t,((i,a)=>e[i]=a));for(const i of r)delete e[i]}clone(){return new Sr(pf(this.value))}}function zC(n){const e=[];return go(n.fields,((t,r)=>{const i=new ar([t]);if(Kh(r)){const a=zC(r.mapValue).fields;if(a.length===0)e.push(i);else for(const o of a)e.push(i.child(o))}else e.push(i)})),new Qr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qn{constructor(e,t,r,i,a,o,c){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=a,this.data=o,this.documentState=c}static newInvalidDocument(e){return new qn(e,0,Ge.min(),Ge.min(),Ge.min(),Sr.empty(),0)}static newFoundDocument(e,t,r,i){return new qn(e,1,t,Ge.min(),r,i,0)}static newNoDocument(e,t){return new qn(e,2,t,Ge.min(),Ge.min(),Sr.empty(),0)}static newUnknownDocument(e,t){return new qn(e,3,t,Ge.min(),Ge.min(),Sr.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ge.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Sr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Sr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ge.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof qn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new qn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g0{constructor(e,t){this.position=e,this.inclusive=t}}function VE(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const a=e[i],o=n.position[i];if(a.field.isKeyField()?r=Me.comparator(Me.fromName(o.referenceValue),t.key):r=bc(o,t.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function FE(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Ca(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rf{constructor(e,t="asc"){this.field=e,this.dir=t}}function WD(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HC{}class Sn extends HC{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new ZD(e,t,r):t==="array-contains"?new t5(e,r):t==="in"?new n5(e,r):t==="not-in"?new r5(e,r):t==="array-contains-any"?new i5(e,r):new Sn(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new JD(e,r):new e5(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(bc(t,this.value)):t!==null&&co(this.value)===co(t)&&this.matchesComparison(bc(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ve(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Gi extends HC{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Gi(e,t)}matches(e){return GC(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function GC(n){return n.op==="and"}function qC(n){return QD(n)&&GC(n)}function QD(n){for(const e of n.filters)if(e instanceof Gi)return!1;return!0}function Gg(n){if(n instanceof Sn)return n.field.canonicalString()+n.op.toString()+Sc(n.value);if(qC(n))return n.filters.map((e=>Gg(e))).join(",");{const e=n.filters.map((t=>Gg(t))).join(",");return`${n.op}(${e})`}}function $C(n,e){return n instanceof Sn?(function(r,i){return i instanceof Sn&&r.op===i.op&&r.field.isEqual(i.field)&&Ca(r.value,i.value)})(n,e):n instanceof Gi?(function(r,i){return i instanceof Gi&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce(((a,o,c)=>a&&$C(o,i.filters[c])),!0):!1})(n,e):void Ve(19439)}function XC(n){return n instanceof Sn?(function(t){return`${t.field.canonicalString()} ${t.op} ${Sc(t.value)}`})(n):n instanceof Gi?(function(t){return t.op.toString()+" {"+t.getFilters().map(XC).join(" ,")+"}"})(n):"Filter"}class ZD extends Sn{constructor(e,t,r){super(e,t,r),this.key=Me.fromName(r.referenceValue)}matches(e){const t=Me.comparator(e.key,this.key);return this.matchesComparison(t)}}class JD extends Sn{constructor(e,t){super(e,"in",t),this.keys=YC("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class e5 extends Sn{constructor(e,t){super(e,"not-in",t),this.keys=YC("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function YC(n,e){return(e.arrayValue?.values||[]).map((t=>Me.fromName(t.referenceValue)))}class t5 extends Sn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return ty(t)&&Nf(t.arrayValue,this.value)}}class n5 extends Sn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Nf(this.value.arrayValue,t)}}class r5 extends Sn{constructor(e,t){super(e,"not-in",t)}matches(e){if(Nf(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Nf(this.value.arrayValue,t)}}class i5 extends Sn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!ty(t)||!t.arrayValue.values)&&t.arrayValue.values.some((r=>Nf(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a5{constructor(e,t=null,r=[],i=[],a=null,o=null,c=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=c,this.Te=null}}function UE(n,e=null,t=[],r=[],i=null,a=null,o=null){return new a5(n,e,t,r,i,a,o)}function ny(n){const e=Xe(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((r=>Gg(r))).join(","),t+="|ob:",t+=e.orderBy.map((r=>(function(a){return a.field.canonicalString()+a.dir})(r))).join(","),qf(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((r=>Sc(r))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((r=>Sc(r))).join(",")),e.Te=t}return e.Te}function ry(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!WD(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!$C(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!FE(n.startAt,e.startAt)&&FE(n.endAt,e.endAt)}function qg(n){return Me.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fc{constructor(e,t=null,r=[],i=[],a=null,o="F",c=null,u=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=c,this.endAt=u,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function s5(n,e,t,r,i,a,o,c){return new Fc(n,e,t,r,i,a,o,c)}function Q0(n){return new Fc(n)}function zE(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function KC(n){return n.collectionGroup!==null}function mf(n){const e=Xe(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const a of e.explicitOrderBy)e.Ie.push(a),t.add(a.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let c=new jn(ar.comparator);return o.filters.forEach((u=>{u.getFlattenedFilters().forEach((d=>{d.isInequality()&&(c=c.add(d.field))}))})),c})(e).forEach((a=>{t.has(a.canonicalString())||a.isKeyField()||e.Ie.push(new Rf(a,r))})),t.has(ar.keyField().canonicalString())||e.Ie.push(new Rf(ar.keyField(),r))}return e.Ie}function Aa(n){const e=Xe(n);return e.Ee||(e.Ee=o5(e,mf(n))),e.Ee}function o5(n,e){if(n.limitType==="F")return UE(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((i=>{const a=i.dir==="desc"?"asc":"desc";return new Rf(i.field,a)}));const t=n.endAt?new g0(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new g0(n.startAt.position,n.startAt.inclusive):null;return UE(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function $g(n,e){const t=n.filters.concat([e]);return new Fc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function v0(n,e,t){return new Fc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Z0(n,e){return ry(Aa(n),Aa(e))&&n.limitType===e.limitType}function WC(n){return`${ny(Aa(n))}|lt:${n.limitType}`}function ac(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map((i=>XC(i))).join(", ")}]`),qf(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map((i=>(function(o){return`${o.field.canonicalString()} (${o.dir})`})(i))).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map((i=>Sc(i))).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map((i=>Sc(i))).join(",")),`Target(${r})`})(Aa(n))}; limitType=${n.limitType})`}function J0(n,e){return e.isFoundDocument()&&(function(r,i){const a=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):Me.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)})(n,e)&&(function(r,i){for(const a of mf(r))if(!a.field.isKeyField()&&i.data.field(a.field)===null)return!1;return!0})(n,e)&&(function(r,i){for(const a of r.filters)if(!a.matches(i))return!1;return!0})(n,e)&&(function(r,i){return!(r.startAt&&!(function(o,c,u){const d=VE(o,c,u);return o.inclusive?d<=0:d<0})(r.startAt,mf(r),i)||r.endAt&&!(function(o,c,u){const d=VE(o,c,u);return o.inclusive?d>=0:d>0})(r.endAt,mf(r),i))})(n,e)}function l5(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function QC(n){return(e,t)=>{let r=!1;for(const i of mf(n)){const a=c5(i,e,t);if(a!==0)return a;r=r||i.field.isKeyField()}return 0}}function c5(n,e,t){const r=n.field.isKeyField()?Me.comparator(e.key,t.key):(function(a,o,c){const u=o.data.field(a),d=c.data.field(a);return u!==null&&d!==null?bc(u,d):Ve(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Ve(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cl{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[i,a]of r)if(this.equalsFn(i,e))return a}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){go(this.inner,((t,r)=>{for(const[i,a]of r)e(i,a)}))}isEmpty(){return PC(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u5=new an(Me.comparator);function as(){return u5}const ZC=new an(Me.comparator);function rf(...n){let e=ZC;for(const t of n)e=e.insert(t.key,t);return e}function JC(n){let e=ZC;return n.forEach(((t,r)=>e=e.insert(t,r.overlayedDocument))),e}function Zo(){return gf()}function eT(){return gf()}function gf(){return new cl((n=>n.toString()),((n,e)=>n.isEqual(e)))}const f5=new an(Me.comparator),d5=new jn(Me.comparator);function ft(...n){let e=d5;for(const t of n)e=e.add(t);return e}const h5=new jn(ut);function p5(){return h5}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iy(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:h0(e)?"-0":e}}function tT(n){return{integerValue:""+n}}function m5(n,e){return zD(e)?tT(e):iy(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ep{constructor(){this._=void 0}}function g5(n,e,t){return n instanceof Of?(function(i,a){const o={fields:{[LC]:{stringValue:jC},[VC]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return a&&ey(a)&&(a=W0(a)),a&&(o.fields[BC]=a),{mapValue:o}})(t,e):n instanceof Df?rT(n,e):n instanceof Mf?iT(n,e):(function(i,a){const o=nT(i,a),c=HE(o)+HE(i.Ae);return Hg(o)&&Hg(i.Ae)?tT(c):iy(i.serializer,c)})(n,e)}function v5(n,e,t){return n instanceof Df?rT(n,e):n instanceof Mf?iT(n,e):t}function nT(n,e){return n instanceof y0?(function(r){return Hg(r)||(function(a){return!!a&&"doubleValue"in a})(r)})(e)?e:{integerValue:0}:null}class Of extends ep{}class Df extends ep{constructor(e){super(),this.elements=e}}function rT(n,e){const t=aT(e);for(const r of n.elements)t.some((i=>Ca(i,r)))||t.push(r);return{arrayValue:{values:t}}}class Mf extends ep{constructor(e){super(),this.elements=e}}function iT(n,e){let t=aT(e);for(const r of n.elements)t=t.filter((i=>!Ca(i,r)));return{arrayValue:{values:t}}}class y0 extends ep{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function HE(n){return mn(n.integerValue||n.doubleValue)}function aT(n){return ty(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y5{constructor(e,t){this.field=e,this.transform=t}}function _5(n,e){return n.field.isEqual(e.field)&&(function(r,i){return r instanceof Df&&i instanceof Df||r instanceof Mf&&i instanceof Mf?Ac(r.elements,i.elements,Ca):r instanceof y0&&i instanceof y0?Ca(r.Ae,i.Ae):r instanceof Of&&i instanceof Of})(n.transform,e.transform)}class x5{constructor(e,t){this.version=e,this.transformResults=t}}class sr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new sr}static exists(e){return new sr(void 0,e)}static updateTime(e){return new sr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Wh(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class tp{}function sT(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new np(n.key,sr.none()):new $f(n.key,n.data,sr.none());{const t=n.data,r=Sr.empty();let i=new jn(ar.comparator);for(let a of e.fields)if(!i.has(a)){let o=t.field(a);o===null&&a.length>1&&(a=a.popLast(),o=t.field(a)),o===null?r.delete(a):r.set(a,o),i=i.add(a)}return new vo(n.key,r,new Qr(i.toArray()),sr.none())}}function w5(n,e,t){n instanceof $f?(function(i,a,o){const c=i.value.clone(),u=qE(i.fieldTransforms,a,o.transformResults);c.setAll(u),a.convertToFoundDocument(o.version,c).setHasCommittedMutations()})(n,e,t):n instanceof vo?(function(i,a,o){if(!Wh(i.precondition,a))return void a.convertToUnknownDocument(o.version);const c=qE(i.fieldTransforms,a,o.transformResults),u=a.data;u.setAll(oT(i)),u.setAll(c),a.convertToFoundDocument(o.version,u).setHasCommittedMutations()})(n,e,t):(function(i,a,o){a.convertToNoDocument(o.version).setHasCommittedMutations()})(0,e,t)}function vf(n,e,t,r){return n instanceof $f?(function(a,o,c,u){if(!Wh(a.precondition,o))return c;const d=a.value.clone(),m=$E(a.fieldTransforms,u,o);return d.setAll(m),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null})(n,e,t,r):n instanceof vo?(function(a,o,c,u){if(!Wh(a.precondition,o))return c;const d=$E(a.fieldTransforms,u,o),m=o.data;return m.setAll(oT(a)),m.setAll(d),o.convertToFoundDocument(o.version,m).setHasLocalMutations(),c===null?null:c.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map((g=>g.field)))})(n,e,t,r):(function(a,o,c){return Wh(a.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):c})(n,e,t)}function E5(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),a=nT(r.transform,i||null);a!=null&&(t===null&&(t=Sr.empty()),t.set(r.field,a))}return t||null}function GE(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Ac(r,i,((a,o)=>_5(a,o)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class $f extends tp{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class vo extends tp{constructor(e,t,r,i,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function oT(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}})),e}function qE(n,e,t){const r=new Map;mt(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let i=0;i<t.length;i++){const a=n[i],o=a.transform,c=e.data.field(a.field);r.set(a.field,v5(o,c,t[i]))}return r}function $E(n,e,t){const r=new Map;for(const i of n){const a=i.transform,o=t.data.field(i.field);r.set(i.field,g5(a,o,e))}return r}class np extends tp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class lT extends tp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A5{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&w5(a,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=vf(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=vf(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=eT();return this.mutations.forEach((i=>{const a=e.get(i.key),o=a.overlayedDocument;let c=this.applyToLocalView(o,a.mutatedFields);c=t.has(i.key)?null:c;const u=sT(o,c);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(Ge.min())})),r}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),ft())}isEqual(e){return this.batchId===e.batchId&&Ac(this.mutations,e.mutations,((t,r)=>GE(t,r)))&&Ac(this.baseMutations,e.baseMutations,((t,r)=>GE(t,r)))}}class ay{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){mt(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=(function(){return f5})();const a=e.mutations;for(let o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new ay(e,t,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b5{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S5{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var bn,ht;function cT(n){switch(n){case ue.OK:return Ve(64938);case ue.CANCELLED:case ue.UNKNOWN:case ue.DEADLINE_EXCEEDED:case ue.RESOURCE_EXHAUSTED:case ue.INTERNAL:case ue.UNAVAILABLE:case ue.UNAUTHENTICATED:return!1;case ue.INVALID_ARGUMENT:case ue.NOT_FOUND:case ue.ALREADY_EXISTS:case ue.PERMISSION_DENIED:case ue.FAILED_PRECONDITION:case ue.ABORTED:case ue.OUT_OF_RANGE:case ue.UNIMPLEMENTED:case ue.DATA_LOSS:return!0;default:return Ve(15467,{code:n})}}function uT(n){if(n===void 0)return is("GRPC error has no .code"),ue.UNKNOWN;switch(n){case bn.OK:return ue.OK;case bn.CANCELLED:return ue.CANCELLED;case bn.UNKNOWN:return ue.UNKNOWN;case bn.DEADLINE_EXCEEDED:return ue.DEADLINE_EXCEEDED;case bn.RESOURCE_EXHAUSTED:return ue.RESOURCE_EXHAUSTED;case bn.INTERNAL:return ue.INTERNAL;case bn.UNAVAILABLE:return ue.UNAVAILABLE;case bn.UNAUTHENTICATED:return ue.UNAUTHENTICATED;case bn.INVALID_ARGUMENT:return ue.INVALID_ARGUMENT;case bn.NOT_FOUND:return ue.NOT_FOUND;case bn.ALREADY_EXISTS:return ue.ALREADY_EXISTS;case bn.PERMISSION_DENIED:return ue.PERMISSION_DENIED;case bn.FAILED_PRECONDITION:return ue.FAILED_PRECONDITION;case bn.ABORTED:return ue.ABORTED;case bn.OUT_OF_RANGE:return ue.OUT_OF_RANGE;case bn.UNIMPLEMENTED:return ue.UNIMPLEMENTED;case bn.DATA_LOSS:return ue.DATA_LOSS;default:return Ve(39323,{code:n})}}(ht=bn||(bn={}))[ht.OK=0]="OK",ht[ht.CANCELLED=1]="CANCELLED",ht[ht.UNKNOWN=2]="UNKNOWN",ht[ht.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ht[ht.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ht[ht.NOT_FOUND=5]="NOT_FOUND",ht[ht.ALREADY_EXISTS=6]="ALREADY_EXISTS",ht[ht.PERMISSION_DENIED=7]="PERMISSION_DENIED",ht[ht.UNAUTHENTICATED=16]="UNAUTHENTICATED",ht[ht.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ht[ht.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ht[ht.ABORTED=10]="ABORTED",ht[ht.OUT_OF_RANGE=11]="OUT_OF_RANGE",ht[ht.UNIMPLEMENTED=12]="UNIMPLEMENTED",ht[ht.INTERNAL=13]="INTERNAL",ht[ht.UNAVAILABLE=14]="UNAVAILABLE",ht[ht.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C5(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T5=new Js([4294967295,4294967295],0);function XE(n){const e=C5().encode(n),t=new AC;return t.update(e),new Uint8Array(t.digest())}function YE(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new Js([t,r],0),new Js([i,a],0)]}class sy{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new af(`Invalid padding: ${t}`);if(r<0)throw new af(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new af(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new af(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Js.fromNumber(this.ge)}ye(e,t,r){let i=e.add(t.multiply(Js.fromNumber(r)));return i.compare(T5)===1&&(i=new Js([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=XE(e),[r,i]=YE(t);for(let a=0;a<this.hashCount;a++){const o=this.ye(r,i,a);if(!this.we(o))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),o=new sy(a,i,t);return r.forEach((c=>o.insert(c))),o}insert(e){if(this.ge===0)return;const t=XE(e),[r,i]=YE(t);for(let a=0;a<this.hashCount;a++){const o=this.ye(r,i,a);this.Se(o)}}Se(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class af extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rp{constructor(e,t,r,i,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,Xf.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new rp(Ge.min(),i,new an(ut),as(),ft())}}class Xf{constructor(e,t,r,i,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Xf(r,t,ft(),ft(),ft())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qh{constructor(e,t,r,i){this.be=e,this.removedTargetIds=t,this.key=r,this.De=i}}class fT{constructor(e,t){this.targetId=e,this.Ce=t}}class dT{constructor(e,t,r=lr.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class KE{constructor(){this.ve=0,this.Fe=WE(),this.Me=lr.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ft(),t=ft(),r=ft();return this.Fe.forEach(((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:Ve(38017,{changeType:a})}})),new Xf(this.Me,this.xe,e,t,r)}qe(){this.Oe=!1,this.Fe=WE()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,mt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class I5{constructor(e){this.Ge=e,this.ze=new Map,this.je=as(),this.Je=Ih(),this.He=Ih(),this.Ye=new an(ut)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:Ve(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((r,i)=>{this.rt(i)&&t(i)}))}st(e){const t=e.targetId,r=e.Ce.count,i=this.ot(t);if(i){const a=i.target;if(qg(a))if(r===0){const o=new Me(a.path);this.et(t,o,qn.newNoDocument(o,Ge.min()))}else mt(r===1,20013,{expectedCount:r});else{const o=this._t(t);if(o!==r){const c=this.ut(e),u=c?this.ct(c,e,o):1;if(u!==0){this.it(t);const d=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,d)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:a=0}=t;let o,c;try{o=lo(r).toUint8Array()}catch(u){if(u instanceof kC)return Ec("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{c=new sy(o,i,a)}catch(u){return Ec(u instanceof af?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return c.ge===0?null:c}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){const r=this.Ge.getRemoteKeysForTarget(t);let i=0;return r.forEach((a=>{const o=this.Ge.ht(),c=`projects/${o.projectId}/databases/${o.database}/documents/${a.path.canonicalString()}`;e.mightContain(c)||(this.et(t,a,null),i++)})),i}Tt(e){const t=new Map;this.ze.forEach(((a,o)=>{const c=this.ot(o);if(c){if(a.current&&qg(c.target)){const u=new Me(c.target.path);this.It(u).has(o)||this.Et(o,u)||this.et(o,u,qn.newNoDocument(u,e))}a.Be&&(t.set(o,a.ke()),a.qe())}}));let r=ft();this.He.forEach(((a,o)=>{let c=!0;o.forEachWhile((u=>{const d=this.ot(u);return!d||d.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)})),c&&(r=r.add(a))})),this.je.forEach(((a,o)=>o.setReadTime(e)));const i=new rp(e,t,this.Ye,this.je,r);return this.je=as(),this.Je=Ih(),this.He=Ih(),this.Ye=new an(ut),i}Xe(e,t){if(!this.rt(e))return;const r=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,r),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,t)?i.Qe(t,1):i.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new KE,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new jn(ut),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new jn(ut),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||Se("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new KE),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Ih(){return new an(Me.comparator)}function WE(){return new an(Me.comparator)}const N5={asc:"ASCENDING",desc:"DESCENDING"},R5={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},O5={and:"AND",or:"OR"};class D5{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Xg(n,e){return n.useProto3Json||qf(e)?e:{value:e}}function _0(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function hT(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function M5(n,e){return _0(n,e.toTimestamp())}function Zr(n){return mt(!!n,49232),Ge.fromTimestamp((function(t){const r=oo(t);return new Mt(r.seconds,r.nanos)})(n))}function oy(n,e){return Yg(n,e).canonicalString()}function Yg(n,e){const t=(function(i){return new Ft(["projects",i.projectId,"databases",i.database])})(n).child("documents");return e===void 0?t:t.child(e)}function pT(n){const e=Ft.fromString(n);return mt(xT(e),10190,{key:e.toString()}),e}function x0(n,e){return oy(n.databaseId,e.path)}function yf(n,e){const t=pT(e);if(t.get(1)!==n.databaseId.projectId)throw new Ee(ue.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Ee(ue.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Me(gT(t))}function mT(n,e){return oy(n.databaseId,e)}function P5(n){const e=pT(n);return e.length===4?Ft.emptyPath():gT(e)}function Kg(n){return new Ft(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function gT(n){return mt(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function QE(n,e,t){return{name:x0(n,e),fields:t.value.mapValue.fields}}function k5(n,e){return"found"in e?(function(r,i){mt(!!i.found,43571),i.found.name,i.found.updateTime;const a=yf(r,i.found.name),o=Zr(i.found.updateTime),c=i.found.createTime?Zr(i.found.createTime):Ge.min(),u=new Sr({mapValue:{fields:i.found.fields}});return qn.newFoundDocument(a,o,c,u)})(n,e):"missing"in e?(function(r,i){mt(!!i.missing,3894),mt(!!i.readTime,22933);const a=yf(r,i.missing),o=Zr(i.readTime);return qn.newNoDocument(a,o)})(n,e):Ve(7234,{result:e})}function j5(n,e){let t;if("targetChange"in e){e.targetChange;const r=(function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:Ve(39313,{state:d})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],a=(function(d,m){return d.useProto3Json?(mt(m===void 0||typeof m=="string",58123),lr.fromBase64String(m||"")):(mt(m===void 0||m instanceof Buffer||m instanceof Uint8Array,16193),lr.fromUint8Array(m||new Uint8Array))})(n,e.targetChange.resumeToken),o=e.targetChange.cause,c=o&&(function(d){const m=d.code===void 0?ue.UNKNOWN:uT(d.code);return new Ee(m,d.message||"")})(o);t=new dT(r,i,a,c||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=yf(n,r.document.name),a=Zr(r.document.updateTime),o=r.document.createTime?Zr(r.document.createTime):Ge.min(),c=new Sr({mapValue:{fields:r.document.fields}}),u=qn.newFoundDocument(i,a,o,c),d=r.targetIds||[],m=r.removedTargetIds||[];t=new Qh(d,m,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=yf(n,r.document),a=r.readTime?Zr(r.readTime):Ge.min(),o=qn.newNoDocument(i,a),c=r.removedTargetIds||[];t=new Qh([],c,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=yf(n,r.document),a=r.removedTargetIds||[];t=new Qh([],a,i,null)}else{if(!("filter"in e))return Ve(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:a}=r,o=new S5(i,a),c=r.targetId;t=new fT(c,o)}}return t}function vT(n,e){let t;if(e instanceof $f)t={update:QE(n,e.key,e.value)};else if(e instanceof np)t={delete:x0(n,e.key)};else if(e instanceof vo)t={update:QE(n,e.key,e.data),updateMask:q5(e.fieldMask)};else{if(!(e instanceof lT))return Ve(16599,{Vt:e.type});t={verify:x0(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((r=>(function(a,o){const c=o.transform;if(c instanceof Of)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Df)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Mf)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof y0)return{fieldPath:o.field.canonicalString(),increment:c.Ae};throw Ve(20930,{transform:o.transform})})(0,r)))),e.precondition.isNone||(t.currentDocument=(function(i,a){return a.updateTime!==void 0?{updateTime:M5(i,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:Ve(27497)})(n,e.precondition)),t}function L5(n,e){return n&&n.length>0?(mt(e!==void 0,14353),n.map((t=>(function(i,a){let o=i.updateTime?Zr(i.updateTime):Zr(a);return o.isEqual(Ge.min())&&(o=Zr(a)),new x5(o,i.transformResults||[])})(t,e)))):[]}function B5(n,e){return{documents:[mT(n,e.path)]}}function V5(n,e){const t={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=mT(n,i);const a=(function(d){if(d.length!==0)return _T(Gi.create(d,"and"))})(e.filters);a&&(t.structuredQuery.where=a);const o=(function(d){if(d.length!==0)return d.map((m=>(function(_){return{field:sc(_.field),direction:z5(_.dir)}})(m)))})(e.orderBy);o&&(t.structuredQuery.orderBy=o);const c=Xg(n,e.limit);return c!==null&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt=(function(d){return{before:d.inclusive,values:d.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(d){return{before:!d.inclusive,values:d.position}})(e.endAt)),{ft:t,parent:i}}function F5(n){let e=P5(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){mt(r===1,65062);const m=t.from[0];m.allDescendants?i=m.collectionId:e=e.child(m.collectionId)}let a=[];t.where&&(a=(function(g){const _=yT(g);return _ instanceof Gi&&qC(_)?_.getFilters():[_]})(t.where));let o=[];t.orderBy&&(o=(function(g){return g.map((_=>(function(A){return new Rf(oc(A.field),(function(D){switch(D){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(A.direction))})(_)))})(t.orderBy));let c=null;t.limit&&(c=(function(g){let _;return _=typeof g=="object"?g.value:g,qf(_)?null:_})(t.limit));let u=null;t.startAt&&(u=(function(g){const _=!!g.before,w=g.values||[];return new g0(w,_)})(t.startAt));let d=null;return t.endAt&&(d=(function(g){const _=!g.before,w=g.values||[];return new g0(w,_)})(t.endAt)),s5(e,i,o,a,c,"F",u,d)}function U5(n,e){const t=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ve(28987,{purpose:i})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function yT(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=oc(t.unaryFilter.field);return Sn.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=oc(t.unaryFilter.field);return Sn.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=oc(t.unaryFilter.field);return Sn.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=oc(t.unaryFilter.field);return Sn.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ve(61313);default:return Ve(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Sn.create(oc(t.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ve(58110);default:return Ve(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return Gi.create(t.compositeFilter.filters.map((r=>yT(r))),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Ve(1026)}})(t.compositeFilter.op))})(n):Ve(30097,{filter:n})}function z5(n){return N5[n]}function H5(n){return R5[n]}function G5(n){return O5[n]}function sc(n){return{fieldPath:n.canonicalString()}}function oc(n){return ar.fromServerFormat(n.fieldPath)}function _T(n){return n instanceof Sn?(function(t){if(t.op==="=="){if(BE(t.value))return{unaryFilter:{field:sc(t.field),op:"IS_NAN"}};if(LE(t.value))return{unaryFilter:{field:sc(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(BE(t.value))return{unaryFilter:{field:sc(t.field),op:"IS_NOT_NAN"}};if(LE(t.value))return{unaryFilter:{field:sc(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:sc(t.field),op:H5(t.op),value:t.value}}})(n):n instanceof Gi?(function(t){const r=t.getFilters().map((i=>_T(i)));return r.length===1?r[0]:{compositeFilter:{op:G5(t.op),filters:r}}})(n):Ve(54877,{filter:n})}function q5(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function xT(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ys{constructor(e,t,r,i,a=Ge.min(),o=Ge.min(),c=lr.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=c,this.expectedCount=u}withSequenceNumber(e){return new Ys(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Ys(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ys(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ys(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $5{constructor(e){this.yt=e}}function X5(n){const e=F5({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?v0(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y5{constructor(){this.Cn=new K5}addToCollectionParentIndex(e,t){return this.Cn.add(t),pe.resolve()}getCollectionParents(e,t){return pe.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return pe.resolve()}deleteFieldIndex(e,t){return pe.resolve()}deleteAllFieldIndexes(e){return pe.resolve()}createTargetIndexes(e,t){return pe.resolve()}getDocumentsMatchingTarget(e,t){return pe.resolve(null)}getIndexType(e,t){return pe.resolve(0)}getFieldIndexes(e,t){return pe.resolve([])}getNextCollectionGroupToUpdate(e){return pe.resolve(null)}getMinOffset(e,t){return pe.resolve(so.min())}getMinOffsetFromCollectionGroup(e,t){return pe.resolve(so.min())}updateCollectionGroup(e,t,r){return pe.resolve()}updateIndexEntries(e,t){return pe.resolve()}}class K5{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new jn(Ft.comparator),a=!i.has(r);return this.index[t]=i.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new jn(Ft.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},wT=41943040;class Pr{static withCacheSize(e){return new Pr(e,Pr.DEFAULT_COLLECTION_PERCENTILE,Pr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Pr.DEFAULT_COLLECTION_PERCENTILE=10,Pr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Pr.DEFAULT=new Pr(wT,Pr.DEFAULT_COLLECTION_PERCENTILE,Pr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Pr.DISABLED=new Pr(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cc{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Cc(0)}static cr(){return new Cc(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JE="LruGarbageCollector",W5=1048576;function eA([n,e],[t,r]){const i=ut(n,t);return i===0?ut(e,r):i}class Q5{constructor(e){this.Ir=e,this.buffer=new jn(eA),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();eA(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Z5{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Se(JE,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Vc(t)?Se(JE,"Ignoring IndexedDB error during garbage collection: ",t):await Bc(t)}await this.Vr(3e5)}))}}class J5{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((r=>Math.floor(t/100*r)))}nthSequenceNumber(e,t){if(t===0)return pe.resolve(K0.ce);const r=new Q5(t);return this.mr.forEachTarget(e,(i=>r.Ar(i.sequenceNumber))).next((()=>this.mr.pr(e,(i=>r.Ar(i))))).next((()=>r.maxValue))}removeTargets(e,t,r){return this.mr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(Se("LruGarbageCollector","Garbage collection skipped; disabled"),pe.resolve(ZE)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(Se("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),ZE):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let r,i,a,o,c,u,d;const m=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((g=>(g>this.params.maximumSequenceNumbersToCollect?(Se("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${g}`),i=this.params.maximumSequenceNumbersToCollect):i=g,o=Date.now(),this.nthSequenceNumber(e,i)))).next((g=>(r=g,c=Date.now(),this.removeTargets(e,r,t)))).next((g=>(a=g,u=Date.now(),this.removeOrphanedDocuments(e,r)))).next((g=>(d=Date.now(),ic()<=ct.DEBUG&&Se("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-m}ms
	Determined least recently used ${i} in `+(c-o)+`ms
	Removed ${a} targets in `+(u-c)+`ms
	Removed ${g} documents in `+(d-u)+`ms
Total Duration: ${d-m}ms`),pe.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:g}))))}}function eM(n,e){return new J5(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tM{constructor(){this.changes=new cl((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,qn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?pe.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nM{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rM{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next((i=>(r=i,this.remoteDocumentCache.getEntry(e,t)))).next((i=>(r!==null&&vf(r.mutation,i,Qr.empty(),Mt.now()),i)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.getLocalViewOfDocuments(e,r,ft()).next((()=>r))))}getLocalViewOfDocuments(e,t,r=ft()){const i=Zo();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,r).next((a=>{let o=rf();return a.forEach(((c,u)=>{o=o.insert(c,u.overlayedDocument)})),o}))))}getOverlayedDocuments(e,t){const r=Zo();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,ft())))}populateOverlays(e,t,r){const i=[];return r.forEach((a=>{t.has(a)||i.push(a)})),this.documentOverlayCache.getOverlays(e,i).next((a=>{a.forEach(((o,c)=>{t.set(o,c)}))}))}computeViews(e,t,r,i){let a=as();const o=gf(),c=(function(){return gf()})();return t.forEach(((u,d)=>{const m=r.get(d.key);i.has(d.key)&&(m===void 0||m.mutation instanceof vo)?a=a.insert(d.key,d):m!==void 0?(o.set(d.key,m.mutation.getFieldMask()),vf(m.mutation,d,m.mutation.getFieldMask(),Mt.now())):o.set(d.key,Qr.empty())})),this.recalculateAndSaveOverlays(e,a).next((u=>(u.forEach(((d,m)=>o.set(d,m))),t.forEach(((d,m)=>c.set(d,new nM(m,o.get(d)??null)))),c)))}recalculateAndSaveOverlays(e,t){const r=gf();let i=new an(((o,c)=>o-c)),a=ft();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((o=>{for(const c of o)c.keys().forEach((u=>{const d=t.get(u);if(d===null)return;let m=r.get(u)||Qr.empty();m=c.applyToLocalView(d,m),r.set(u,m);const g=(i.get(c.batchId)||ft()).add(u);i=i.insert(c.batchId,g)}))})).next((()=>{const o=[],c=i.getReverseIterator();for(;c.hasNext();){const u=c.getNext(),d=u.key,m=u.value,g=eT();m.forEach((_=>{if(!a.has(_)){const w=sT(t.get(_),r.get(_));w!==null&&g.set(_,w),a=a.add(_)}})),o.push(this.documentOverlayCache.saveOverlays(e,d,g))}return pe.waitFor(o)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,t,r,i){return(function(o){return Me.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):KC(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next((a=>{const o=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-a.size):pe.resolve(Zo());let c=Cf,u=a;return o.next((d=>pe.forEach(d,((m,g)=>(c<g.largestBatchId&&(c=g.largestBatchId),a.get(m)?pe.resolve():this.remoteDocumentCache.getEntry(e,m).next((_=>{u=u.insert(m,_)}))))).next((()=>this.populateOverlays(e,d,a))).next((()=>this.computeViews(e,u,d,ft()))).next((m=>({batchId:c,changes:JC(m)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Me(t)).next((r=>{let i=rf();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i}))}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const a=t.collectionGroup;let o=rf();return this.indexManager.getCollectionParents(e,a).next((c=>pe.forEach(c,(u=>{const d=(function(g,_){return new Fc(_,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)})(t,u.child(a));return this.getDocumentsMatchingCollectionQuery(e,d,r,i).next((m=>{m.forEach(((g,_)=>{o=o.insert(g,_)}))}))})).next((()=>o))))}getDocumentsMatchingCollectionQuery(e,t,r,i){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next((o=>(a=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,a,i)))).next((o=>{a.forEach(((u,d)=>{const m=d.getKey();o.get(m)===null&&(o=o.insert(m,qn.newInvalidDocument(m)))}));let c=rf();return o.forEach(((u,d)=>{const m=a.get(u);m!==void 0&&vf(m.mutation,d,Qr.empty(),Mt.now()),J0(t,d)&&(c=c.insert(u,d))})),c}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iM{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return pe.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(i){return{id:i.id,version:i.version,createTime:Zr(i.createTime)}})(t)),pe.resolve()}getNamedQuery(e,t){return pe.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(i){return{name:i.name,query:X5(i.bundledQuery),readTime:Zr(i.readTime)}})(t)),pe.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aM{constructor(){this.overlays=new an(Me.comparator),this.qr=new Map}getOverlay(e,t){return pe.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Zo();return pe.forEach(t,(i=>this.getOverlay(e,i).next((a=>{a!==null&&r.set(i,a)})))).next((()=>r))}saveOverlays(e,t,r){return r.forEach(((i,a)=>{this.St(e,t,a)})),pe.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.qr.get(r);return i!==void 0&&(i.forEach((a=>this.overlays=this.overlays.remove(a))),this.qr.delete(r)),pe.resolve()}getOverlaysForCollection(e,t,r){const i=Zo(),a=t.length+1,o=new Me(t.child("")),c=this.overlays.getIteratorFrom(o);for(;c.hasNext();){const u=c.getNext().value,d=u.getKey();if(!t.isPrefixOf(d.path))break;d.path.length===a&&u.largestBatchId>r&&i.set(u.getKey(),u)}return pe.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let a=new an(((d,m)=>d-m));const o=this.overlays.getIterator();for(;o.hasNext();){const d=o.getNext().value;if(d.getKey().getCollectionGroup()===t&&d.largestBatchId>r){let m=a.get(d.largestBatchId);m===null&&(m=Zo(),a=a.insert(d.largestBatchId,m)),m.set(d.getKey(),d)}}const c=Zo(),u=a.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach(((d,m)=>c.set(d,m))),!(c.size()>=i)););return pe.resolve(c)}St(e,t,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new b5(t,r));let a=this.qr.get(t);a===void 0&&(a=ft(),this.qr.set(t,a)),this.qr.set(t,a.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sM{constructor(){this.sessionToken=lr.EMPTY_BYTE_STRING}getSessionToken(e){return pe.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,pe.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ly{constructor(){this.Qr=new jn(Gn.$r),this.Ur=new jn(Gn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const r=new Gn(e,t);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,t){e.forEach((r=>this.addReference(r,t)))}removeReference(e,t){this.Gr(new Gn(e,t))}zr(e,t){e.forEach((r=>this.removeReference(r,t)))}jr(e){const t=new Me(new Ft([])),r=new Gn(t,e),i=new Gn(t,e+1),a=[];return this.Ur.forEachInRange([r,i],(o=>{this.Gr(o),a.push(o.key)})),a}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new Me(new Ft([])),r=new Gn(t,e),i=new Gn(t,e+1);let a=ft();return this.Ur.forEachInRange([r,i],(o=>{a=a.add(o.key)})),a}containsKey(e){const t=new Gn(e,0),r=this.Qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class Gn{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return Me.comparator(e.key,t.key)||ut(e.Yr,t.Yr)}static Kr(e,t){return ut(e.Yr,t.Yr)||Me.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oM{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new jn(Gn.$r)}checkEmpty(e){return pe.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){const a=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new A5(a,t,r,i);this.mutationQueue.push(o);for(const c of i)this.Zr=this.Zr.add(new Gn(c.key,a)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return pe.resolve(o)}lookupMutationBatch(e,t){return pe.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=this.ei(r),a=i<0?0:i;return pe.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return pe.resolve(this.mutationQueue.length===0?Jv:this.tr-1)}getAllMutationBatches(e){return pe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Gn(t,0),i=new Gn(t,Number.POSITIVE_INFINITY),a=[];return this.Zr.forEachInRange([r,i],(o=>{const c=this.Xr(o.Yr);a.push(c)})),pe.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new jn(ut);return t.forEach((i=>{const a=new Gn(i,0),o=new Gn(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([a,o],(c=>{r=r.add(c.Yr)}))})),pe.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let a=r;Me.isDocumentKey(a)||(a=a.child(""));const o=new Gn(new Me(a),0);let c=new jn(ut);return this.Zr.forEachWhile((u=>{const d=u.key.path;return!!r.isPrefixOf(d)&&(d.length===i&&(c=c.add(u.Yr)),!0)}),o),pe.resolve(this.ti(c))}ti(e){const t=[];return e.forEach((r=>{const i=this.Xr(r);i!==null&&t.push(i)})),t}removeMutationBatch(e,t){mt(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return pe.forEach(t.mutations,(i=>{const a=new Gn(i.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,t){const r=new Gn(t,0),i=this.Zr.firstAfterOrEqual(r);return pe.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,pe.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lM{constructor(e){this.ri=e,this.docs=(function(){return new an(Me.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),a=i?i.size:0,o=this.ri(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return pe.resolve(r?r.document.mutableCopy():qn.newInvalidDocument(t))}getEntries(e,t){let r=as();return t.forEach((i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():qn.newInvalidDocument(i))})),pe.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let a=as();const o=t.path,c=new Me(o.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(c);for(;u.hasNext();){const{key:d,value:{document:m}}=u.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||BD(LD(m),r)<=0||(i.has(m.key)||J0(t,m))&&(a=a.insert(m.key,m.mutableCopy()))}return pe.resolve(a)}getAllFromCollectionGroup(e,t,r,i){Ve(9500)}ii(e,t){return pe.forEach(this.docs,(r=>t(r)))}newChangeBuffer(e){return new cM(this)}getSize(e){return pe.resolve(this.size)}}class cM extends tM{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((r,i)=>{i.isValidDocument()?t.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)})),pe.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uM{constructor(e){this.persistence=e,this.si=new cl((t=>ny(t)),ry),this.lastRemoteSnapshotVersion=Ge.min(),this.highestTargetId=0,this.oi=0,this._i=new ly,this.targetCount=0,this.ai=Cc.ur()}forEachTarget(e,t){return this.si.forEach(((r,i)=>t(i))),pe.resolve()}getLastRemoteSnapshotVersion(e){return pe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return pe.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),pe.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.oi&&(this.oi=t),pe.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Cc(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,pe.resolve()}updateTargetData(e,t){return this.Pr(t),pe.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,pe.resolve()}removeTargets(e,t,r){let i=0;const a=[];return this.si.forEach(((o,c)=>{c.sequenceNumber<=t&&r.get(c.targetId)===null&&(this.si.delete(o),a.push(this.removeMatchingKeysForTargetId(e,c.targetId)),i++)})),pe.waitFor(a).next((()=>i))}getTargetCount(e){return pe.resolve(this.targetCount)}getTargetData(e,t){const r=this.si.get(t)||null;return pe.resolve(r)}addMatchingKeys(e,t,r){return this._i.Wr(t,r),pe.resolve()}removeMatchingKeys(e,t,r){this._i.zr(t,r);const i=this.persistence.referenceDelegate,a=[];return i&&t.forEach((o=>{a.push(i.markPotentiallyOrphaned(e,o))})),pe.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),pe.resolve()}getMatchingKeysForTargetId(e,t){const r=this._i.Hr(t);return pe.resolve(r)}containsKey(e,t){return pe.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ET{constructor(e,t){this.ui={},this.overlays={},this.ci=new K0(0),this.li=!1,this.li=!0,this.hi=new sM,this.referenceDelegate=e(this),this.Pi=new uM(this),this.indexManager=new Y5,this.remoteDocumentCache=(function(i){return new lM(i)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new $5(t),this.Ii=new iM(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new aM,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ui[e.toKey()];return r||(r=new oM(t,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,r){Se("MemoryPersistence","Starting transaction:",e);const i=new fM(this.ci.next());return this.referenceDelegate.Ei(),r(i).next((a=>this.referenceDelegate.di(i).next((()=>a)))).toPromise().then((a=>(i.raiseOnCommittedEvent(),a)))}Ai(e,t){return pe.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,t))))}}class fM extends FD{constructor(e){super(),this.currentSequenceNumber=e}}class cy{constructor(e){this.persistence=e,this.Ri=new ly,this.Vi=null}static mi(e){return new cy(e)}get fi(){if(this.Vi)return this.Vi;throw Ve(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.fi.delete(r.toString()),pe.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.fi.add(r.toString()),pe.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),pe.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((i=>this.fi.add(i.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((i=>{i.forEach((a=>this.fi.add(a.toString())))})).next((()=>r.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return pe.forEach(this.fi,(r=>{const i=Me.fromPath(r);return this.gi(e,i).next((a=>{a||t.removeEntry(i,Ge.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((r=>{r?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return pe.or([()=>pe.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class w0{constructor(e,t){this.persistence=e,this.pi=new cl((r=>HD(r.path)),((r,i)=>r.isEqual(i))),this.garbageCollector=eM(this,t)}static mi(e,t){return new w0(e,t)}Ei(){}di(e){return pe.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>t.next((i=>r+i))))}wr(e){let t=0;return this.pr(e,(r=>{t++})).next((()=>t))}pr(e,t){return pe.forEach(this.pi,((r,i)=>this.br(e,r,i).next((a=>a?pe.resolve():t(i)))))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const i=this.persistence.getRemoteDocumentCache(),a=i.newChangeBuffer();return i.ii(e,(o=>this.br(e,o,t).next((c=>{c||(r++,a.removeEntry(o,Ge.min()))})))).next((()=>a.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),pe.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),pe.resolve()}removeReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),pe.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),pe.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Yh(e.data.value)),t}br(e,t,r){return pe.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const i=this.pi.get(t);return pe.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uy{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Es=r,this.ds=i}static As(e,t){let r=ft(),i=ft();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new uy(e,t.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dM{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hM{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return GR()?8:UD(vr())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,i){const a={result:null};return this.ys(e,t).next((o=>{a.result=o})).next((()=>{if(!a.result)return this.ws(e,t,i,r).next((o=>{a.result=o}))})).next((()=>{if(a.result)return;const o=new dM;return this.Ss(e,t,o).next((c=>{if(a.result=c,this.Vs)return this.bs(e,t,o,c.size)}))})).next((()=>a.result))}bs(e,t,r,i){return r.documentReadCount<this.fs?(ic()<=ct.DEBUG&&Se("QueryEngine","SDK will not create cache indexes for query:",ac(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),pe.resolve()):(ic()<=ct.DEBUG&&Se("QueryEngine","Query:",ac(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(ic()<=ct.DEBUG&&Se("QueryEngine","The SDK decides to create cache indexes for query:",ac(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Aa(t))):pe.resolve())}ys(e,t){if(zE(t))return pe.resolve(null);let r=Aa(t);return this.indexManager.getIndexType(e,r).next((i=>i===0?null:(t.limit!==null&&i===1&&(t=v0(t,null,"F"),r=Aa(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next((a=>{const o=ft(...a);return this.ps.getDocuments(e,o).next((c=>this.indexManager.getMinOffset(e,r).next((u=>{const d=this.Ds(t,c);return this.Cs(t,d,o,u.readTime)?this.ys(e,v0(t,null,"F")):this.vs(e,d,t,u)}))))})))))}ws(e,t,r,i){return zE(t)||i.isEqual(Ge.min())?pe.resolve(null):this.ps.getDocuments(e,r).next((a=>{const o=this.Ds(t,a);return this.Cs(t,o,r,i)?pe.resolve(null):(ic()<=ct.DEBUG&&Se("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),ac(t)),this.vs(e,o,t,jD(i,Cf)).next((c=>c)))}))}Ds(e,t){let r=new jn(QC(e));return t.forEach(((i,a)=>{J0(e,a)&&(r=r.add(a))})),r}Cs(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const a=e.limitType==="F"?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Ss(e,t,r){return ic()<=ct.DEBUG&&Se("QueryEngine","Using full collection scan to execute query:",ac(t)),this.ps.getDocumentsMatchingQuery(e,t,so.min(),r)}vs(e,t,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next((a=>(t.forEach((o=>{a=a.insert(o.key,o)})),a)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fy="LocalStore",pM=3e8;class mM{constructor(e,t,r,i){this.persistence=e,this.Fs=t,this.serializer=i,this.Ms=new an(ut),this.xs=new cl((a=>ny(a)),ry),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new rM(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function gM(n,e,t,r){return new mM(n,e,t,r)}async function AT(n,e){const t=Xe(n);return await t.persistence.runTransaction("Handle user change","readonly",(r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next((a=>(i=a,t.Bs(e),t.mutationQueue.getAllMutationBatches(r)))).next((a=>{const o=[],c=[];let u=ft();for(const d of i){o.push(d.batchId);for(const m of d.mutations)u=u.add(m.key)}for(const d of a){c.push(d.batchId);for(const m of d.mutations)u=u.add(m.key)}return t.localDocuments.getDocuments(r,u).next((d=>({Ls:d,removedBatchIds:o,addedBatchIds:c})))}))}))}function vM(n,e){const t=Xe(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const i=e.batch.keys(),a=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(c,u,d,m){const g=d.batch,_=g.keys();let w=pe.resolve();return _.forEach((A=>{w=w.next((()=>m.getEntry(u,A))).next((S=>{const D=d.docVersions.get(A);mt(D!==null,48541),S.version.compareTo(D)<0&&(g.applyToRemoteDocument(S,d),S.isValidDocument()&&(S.setReadTime(d.commitVersion),m.addEntry(S)))}))})),w.next((()=>c.mutationQueue.removeMutationBatch(u,g)))})(t,r,e,a).next((()=>a.apply(r))).next((()=>t.mutationQueue.performConsistencyCheck(r))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(c){let u=ft();for(let d=0;d<c.mutationResults.length;++d)c.mutationResults[d].transformResults.length>0&&(u=u.add(c.batch.mutations[d].key));return u})(e)))).next((()=>t.localDocuments.getDocuments(r,i)))}))}function bT(n){const e=Xe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function yM(n,e){const t=Xe(n),r=e.snapshotVersion;let i=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(a=>{const o=t.Ns.newChangeBuffer({trackRemovals:!0});i=t.Ms;const c=[];e.targetChanges.forEach(((m,g)=>{const _=i.get(g);if(!_)return;c.push(t.Pi.removeMatchingKeys(a,m.removedDocuments,g).next((()=>t.Pi.addMatchingKeys(a,m.addedDocuments,g))));let w=_.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(g)!==null?w=w.withResumeToken(lr.EMPTY_BYTE_STRING,Ge.min()).withLastLimboFreeSnapshotVersion(Ge.min()):m.resumeToken.approximateByteSize()>0&&(w=w.withResumeToken(m.resumeToken,r)),i=i.insert(g,w),(function(S,D,C){return S.resumeToken.approximateByteSize()===0||D.snapshotVersion.toMicroseconds()-S.snapshotVersion.toMicroseconds()>=pM?!0:C.addedDocuments.size+C.modifiedDocuments.size+C.removedDocuments.size>0})(_,w,m)&&c.push(t.Pi.updateTargetData(a,w))}));let u=as(),d=ft();if(e.documentUpdates.forEach((m=>{e.resolvedLimboDocuments.has(m)&&c.push(t.persistence.referenceDelegate.updateLimboDocument(a,m))})),c.push(_M(a,o,e.documentUpdates).next((m=>{u=m.ks,d=m.qs}))),!r.isEqual(Ge.min())){const m=t.Pi.getLastRemoteSnapshotVersion(a).next((g=>t.Pi.setTargetsMetadata(a,a.currentSequenceNumber,r)));c.push(m)}return pe.waitFor(c).next((()=>o.apply(a))).next((()=>t.localDocuments.getLocalViewOfDocuments(a,u,d))).next((()=>u))})).then((a=>(t.Ms=i,a)))}function _M(n,e,t){let r=ft(),i=ft();return t.forEach((a=>r=r.add(a))),e.getEntries(n,r).next((a=>{let o=as();return t.forEach(((c,u)=>{const d=a.get(c);u.isFoundDocument()!==d.isFoundDocument()&&(i=i.add(c)),u.isNoDocument()&&u.version.isEqual(Ge.min())?(e.removeEntry(c,u.readTime),o=o.insert(c,u)):!d.isValidDocument()||u.version.compareTo(d.version)>0||u.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(u),o=o.insert(c,u)):Se(fy,"Ignoring outdated watch update for ",c,". Current version:",d.version," Watch version:",u.version)})),{ks:o,qs:i}}))}function xM(n,e){const t=Xe(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=Jv),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function wM(n,e){const t=Xe(n);return t.persistence.runTransaction("Allocate target","readwrite",(r=>{let i;return t.Pi.getTargetData(r,e).next((a=>a?(i=a,pe.resolve(i)):t.Pi.allocateTargetId(r).next((o=>(i=new Ys(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.Pi.addTargetData(r,i).next((()=>i)))))))})).then((r=>{const i=t.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(r.targetId,r),t.xs.set(e,r.targetId)),r}))}async function Wg(n,e,t){const r=Xe(n),i=r.Ms.get(e),a=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",a,(o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!Vc(o))throw o;Se(fy,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)}function tA(n,e,t){const r=Xe(n);let i=Ge.min(),a=ft();return r.persistence.runTransaction("Execute query","readwrite",(o=>(function(u,d,m){const g=Xe(u),_=g.xs.get(m);return _!==void 0?pe.resolve(g.Ms.get(_)):g.Pi.getTargetData(d,m)})(r,o,Aa(e)).next((c=>{if(c)return i=c.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(o,c.targetId).next((u=>{a=u}))})).next((()=>r.Fs.getDocumentsMatchingQuery(o,e,t?i:Ge.min(),t?a:ft()))).next((c=>(EM(r,l5(e),c),{documents:c,Qs:a})))))}function EM(n,e,t){let r=n.Os.get(e)||Ge.min();t.forEach(((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)})),n.Os.set(e,r)}class nA{constructor(){this.activeTargetIds=p5()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class AM{constructor(){this.Mo=new nA,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,r){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new nA,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bM{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rA="ConnectivityMonitor";class iA{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Se(rA,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Se(rA,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Nh=null;function Qg(){return Nh===null?Nh=(function(){return 268435456+Math.round(2147483648*Math.random())})():Nh++,"0x"+Nh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bm="RestConnection",SM={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class CM{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===p0?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,t,r,i,a){const o=Qg(),c=this.zo(e,t.toUriEncodedString());Se(Bm,`Sending RPC '${e}' ${o}:`,c,r);const u={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(u,i,a);const{host:d}=new URL(c),m=Pc(d);return this.Jo(e,c,u,r,m).then((g=>(Se(Bm,`Received RPC '${e}' ${o}: `,g),g)),(g=>{throw Ec(Bm,`RPC '${e}' ${o} failed with error: `,g,"url: ",c,"request:",r),g}))}Ho(e,t,r,i,a,o){return this.Go(e,t,r,i,a)}jo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Lc})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((i,a)=>e[a]=i)),r&&r.headers.forEach(((i,a)=>e[a]=i))}zo(e,t){const r=SM[e];return`${this.Uo}/v1/${t}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TM{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pr="WebChannelConnection";class IM extends CM{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,i,a){const o=Qg();return new Promise(((c,u)=>{const d=new bC;d.setWithCredentials(!0),d.listenOnce(SC.COMPLETE,(()=>{try{switch(d.getLastErrorCode()){case Xh.NO_ERROR:const g=d.getResponseJson();Se(pr,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(g)),c(g);break;case Xh.TIMEOUT:Se(pr,`RPC '${e}' ${o} timed out`),u(new Ee(ue.DEADLINE_EXCEEDED,"Request time out"));break;case Xh.HTTP_ERROR:const _=d.getStatus();if(Se(pr,`RPC '${e}' ${o} failed with status:`,_,"response text:",d.getResponseText()),_>0){let w=d.getResponseJson();Array.isArray(w)&&(w=w[0]);const A=w?.error;if(A&&A.status&&A.message){const S=(function(C){const k=C.toLowerCase().replace(/_/g,"-");return Object.values(ue).indexOf(k)>=0?k:ue.UNKNOWN})(A.status);u(new Ee(S,A.message))}else u(new Ee(ue.UNKNOWN,"Server responded with status "+d.getStatus()))}else u(new Ee(ue.UNAVAILABLE,"Connection failed."));break;default:Ve(9055,{l_:e,streamId:o,h_:d.getLastErrorCode(),P_:d.getLastError()})}}finally{Se(pr,`RPC '${e}' ${o} completed.`)}}));const m=JSON.stringify(i);Se(pr,`RPC '${e}' ${o} sending request:`,i),d.send(t,"POST",m,r,15)}))}T_(e,t,r){const i=Qg(),a=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=IC(),c=TC(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(u.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(u.useFetchStreams=!0),this.jo(u.initMessageHeaders,t,r),u.encodeInitMessageHeaders=!0;const m=a.join("");Se(pr,`Creating RPC '${e}' stream ${i}: ${m}`,u);const g=o.createWebChannel(m,u);this.I_(g);let _=!1,w=!1;const A=new TM({Yo:D=>{w?Se(pr,`Not sending because RPC '${e}' stream ${i} is closed:`,D):(_||(Se(pr,`Opening RPC '${e}' stream ${i} transport.`),g.open(),_=!0),Se(pr,`RPC '${e}' stream ${i} sending:`,D),g.send(D))},Zo:()=>g.close()}),S=(D,C,k)=>{D.listen(C,(V=>{try{k(V)}catch(z){setTimeout((()=>{throw z}),0)}}))};return S(g,nf.EventType.OPEN,(()=>{w||(Se(pr,`RPC '${e}' stream ${i} transport opened.`),A.o_())})),S(g,nf.EventType.CLOSE,(()=>{w||(w=!0,Se(pr,`RPC '${e}' stream ${i} transport closed`),A.a_(),this.E_(g))})),S(g,nf.EventType.ERROR,(D=>{w||(w=!0,Ec(pr,`RPC '${e}' stream ${i} transport errored. Name:`,D.name,"Message:",D.message),A.a_(new Ee(ue.UNAVAILABLE,"The operation could not be completed")))})),S(g,nf.EventType.MESSAGE,(D=>{if(!w){const C=D.data[0];mt(!!C,16349);const k=C,V=k?.error||k[0]?.error;if(V){Se(pr,`RPC '${e}' stream ${i} received error:`,V);const z=V.status;let q=(function(b){const R=bn[b];if(R!==void 0)return uT(R)})(z),$=V.message;q===void 0&&(q=ue.INTERNAL,$="Unknown error status: "+z+" with message "+V.message),w=!0,A.a_(new Ee(q,$)),g.close()}else Se(pr,`RPC '${e}' stream ${i} received:`,C),A.u_(C)}})),S(c,CC.STAT_EVENT,(D=>{D.stat===Fg.PROXY?Se(pr,`RPC '${e}' stream ${i} detected buffering proxy`):D.stat===Fg.NOPROXY&&Se(pr,`RPC '${e}' stream ${i} detected no buffering proxy`)})),setTimeout((()=>{A.__()}),0),A}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function Vm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ip(n){return new D5(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dy{constructor(e,t,r=1e3,i=1.5,a=6e4){this.Mi=e,this.timerId=t,this.d_=r,this.A_=i,this.R_=a,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,t-r);i>0&&Se("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aA="PersistentStream";class ST{constructor(e,t,r,i,a,o,c,u){this.Mi=e,this.S_=r,this.b_=i,this.connection=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=c,this.listener=u,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new dy(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===ue.RESOURCE_EXHAUSTED?(is(t.toString()),is("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===ue.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,i])=>{this.D_===t&&this.G_(r,i)}),(r=>{e((()=>{const i=new Ee(ue.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)}))}))}G_(e,t){const r=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((i=>{r((()=>this.z_(i)))})),this.stream.onMessage((i=>{r((()=>++this.F_==1?this.J_(i):this.onNext(i)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Se(aA,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(Se(aA,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class NM extends ST{constructor(e,t,r,i,a,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,o),this.serializer=a}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=j5(this.serializer,e),r=(function(a){if(!("targetChange"in a))return Ge.min();const o=a.targetChange;return o.targetIds&&o.targetIds.length?Ge.min():o.readTime?Zr(o.readTime):Ge.min()})(e);return this.listener.H_(t,r)}Y_(e){const t={};t.database=Kg(this.serializer),t.addTarget=(function(a,o){let c;const u=o.target;if(c=qg(u)?{documents:B5(a,u)}:{query:V5(a,u).ft},c.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){c.resumeToken=hT(a,o.resumeToken);const d=Xg(a,o.expectedCount);d!==null&&(c.expectedCount=d)}else if(o.snapshotVersion.compareTo(Ge.min())>0){c.readTime=_0(a,o.snapshotVersion.toTimestamp());const d=Xg(a,o.expectedCount);d!==null&&(c.expectedCount=d)}return c})(this.serializer,e);const r=U5(this.serializer,e);r&&(t.labels=r),this.q_(t)}Z_(e){const t={};t.database=Kg(this.serializer),t.removeTarget=e,this.q_(t)}}class RM extends ST{constructor(e,t,r,i,a,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,o),this.serializer=a}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return mt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,mt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){mt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=L5(e.writeResults,e.commitTime),r=Zr(e.commitTime);return this.listener.na(r,t)}ra(){const e={};e.database=Kg(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((r=>vT(this.serializer,r)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OM{}class DM extends OM{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new Ee(ue.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,o])=>this.connection.Go(e,Yg(t,r),i,a,o))).catch((a=>{throw a.name==="FirebaseError"?(a.code===ue.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Ee(ue.UNKNOWN,a.toString())}))}Ho(e,t,r,i,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,c])=>this.connection.Ho(e,Yg(t,r),i,o,c,a))).catch((o=>{throw o.name==="FirebaseError"?(o.code===ue.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Ee(ue.UNKNOWN,o.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class MM{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(is(t),this.aa=!1):Se("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sl="RemoteStore";class PM{constructor(e,t,r,i,a){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=a,this.Aa.Oo((o=>{r.enqueueAndForget((async()=>{ul(this)&&(Se(sl,"Restarting streams for network reachability change."),await(async function(u){const d=Xe(u);d.Ea.add(4),await Yf(d),d.Ra.set("Unknown"),d.Ea.delete(4),await ap(d)})(this))}))})),this.Ra=new MM(r,i)}}async function ap(n){if(ul(n))for(const e of n.da)await e(!0)}async function Yf(n){for(const e of n.da)await e(!1)}function CT(n,e){const t=Xe(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),gy(t)?my(t):Uc(t).O_()&&py(t,e))}function hy(n,e){const t=Xe(n),r=Uc(t);t.Ia.delete(e),r.O_()&&TT(t,e),t.Ia.size===0&&(r.O_()?r.L_():ul(t)&&t.Ra.set("Unknown"))}function py(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ge.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Uc(n).Y_(e)}function TT(n,e){n.Va.Ue(e),Uc(n).Z_(e)}function my(n){n.Va=new I5({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),Uc(n).start(),n.Ra.ua()}function gy(n){return ul(n)&&!Uc(n).x_()&&n.Ia.size>0}function ul(n){return Xe(n).Ea.size===0}function IT(n){n.Va=void 0}async function kM(n){n.Ra.set("Online")}async function jM(n){n.Ia.forEach(((e,t)=>{py(n,e)}))}async function LM(n,e){IT(n),gy(n)?(n.Ra.ha(e),my(n)):n.Ra.set("Unknown")}async function BM(n,e,t){if(n.Ra.set("Online"),e instanceof dT&&e.state===2&&e.cause)try{await(async function(i,a){const o=a.cause;for(const c of a.targetIds)i.Ia.has(c)&&(await i.remoteSyncer.rejectListen(c,o),i.Ia.delete(c),i.Va.removeTarget(c))})(n,e)}catch(r){Se(sl,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await E0(n,r)}else if(e instanceof Qh?n.Va.Ze(e):e instanceof fT?n.Va.st(e):n.Va.tt(e),!t.isEqual(Ge.min()))try{const r=await bT(n.localStore);t.compareTo(r)>=0&&await(function(a,o){const c=a.Va.Tt(o);return c.targetChanges.forEach(((u,d)=>{if(u.resumeToken.approximateByteSize()>0){const m=a.Ia.get(d);m&&a.Ia.set(d,m.withResumeToken(u.resumeToken,o))}})),c.targetMismatches.forEach(((u,d)=>{const m=a.Ia.get(u);if(!m)return;a.Ia.set(u,m.withResumeToken(lr.EMPTY_BYTE_STRING,m.snapshotVersion)),TT(a,u);const g=new Ys(m.target,u,d,m.sequenceNumber);py(a,g)})),a.remoteSyncer.applyRemoteEvent(c)})(n,t)}catch(r){Se(sl,"Failed to raise snapshot:",r),await E0(n,r)}}async function E0(n,e,t){if(!Vc(e))throw e;n.Ea.add(1),await Yf(n),n.Ra.set("Offline"),t||(t=()=>bT(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{Se(sl,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await ap(n)}))}function NT(n,e){return e().catch((t=>E0(n,t,e)))}async function sp(n){const e=Xe(n),t=uo(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Jv;for(;VM(e);)try{const i=await xM(e.localStore,r);if(i===null){e.Ta.length===0&&t.L_();break}r=i.batchId,FM(e,i)}catch(i){await E0(e,i)}RT(e)&&OT(e)}function VM(n){return ul(n)&&n.Ta.length<10}function FM(n,e){n.Ta.push(e);const t=uo(n);t.O_()&&t.X_&&t.ea(e.mutations)}function RT(n){return ul(n)&&!uo(n).x_()&&n.Ta.length>0}function OT(n){uo(n).start()}async function UM(n){uo(n).ra()}async function zM(n){const e=uo(n);for(const t of n.Ta)e.ea(t.mutations)}async function HM(n,e,t){const r=n.Ta.shift(),i=ay.from(r,e,t);await NT(n,(()=>n.remoteSyncer.applySuccessfulWrite(i))),await sp(n)}async function GM(n,e){e&&uo(n).X_&&await(async function(r,i){if((function(o){return cT(o)&&o!==ue.ABORTED})(i.code)){const a=r.Ta.shift();uo(r).B_(),await NT(r,(()=>r.remoteSyncer.rejectFailedWrite(a.batchId,i))),await sp(r)}})(n,e),RT(n)&&OT(n)}async function sA(n,e){const t=Xe(n);t.asyncQueue.verifyOperationInProgress(),Se(sl,"RemoteStore received new credentials");const r=ul(t);t.Ea.add(3),await Yf(t),r&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await ap(t)}async function qM(n,e){const t=Xe(n);e?(t.Ea.delete(2),await ap(t)):e||(t.Ea.add(2),await Yf(t),t.Ra.set("Unknown"))}function Uc(n){return n.ma||(n.ma=(function(t,r,i){const a=Xe(t);return a.sa(),new NM(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)})(n.datastore,n.asyncQueue,{Xo:kM.bind(null,n),t_:jM.bind(null,n),r_:LM.bind(null,n),H_:BM.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),gy(n)?my(n):n.Ra.set("Unknown")):(await n.ma.stop(),IT(n))}))),n.ma}function uo(n){return n.fa||(n.fa=(function(t,r,i){const a=Xe(t);return a.sa(),new RM(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:UM.bind(null,n),r_:GM.bind(null,n),ta:zM.bind(null,n),na:HM.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await sp(n)):(await n.fa.stop(),n.Ta.length>0&&(Se(sl,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vy{constructor(e,t,r,i,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new Ea,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((o=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,a){const o=Date.now()+r,c=new vy(e,t,o,i,a);return c.start(r),c}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ee(ue.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function yy(n,e){if(is("AsyncQueue",`${e}: ${n}`),Vc(n))return new Ee(ue.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _c{static emptySet(e){return new _c(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||Me.comparator(t.key,r.key):(t,r)=>Me.comparator(t.key,r.key),this.keyedMap=rf(),this.sortedSet=new an(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,r)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof _c)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new _c;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oA{constructor(){this.ga=new an(Me.comparator)}track(e){const t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Ve(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,r)=>{e.push(r)})),e}}class Tc{constructor(e,t,r,i,a,o,c,u,d){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=c,this.excludesMetadataChanges=u,this.hasCachedResults=d}static fromInitialDocuments(e,t,r,i,a){const o=[];return t.forEach((c=>{o.push({type:0,doc:c})})),new Tc(e,t,_c.emptySet(t),o,r,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Z0(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $M{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class XM{constructor(){this.queries=lA(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){const i=Xe(t),a=i.queries;i.queries=lA(),a.forEach(((o,c)=>{for(const u of c.Sa)u.onError(r)}))})(this,new Ee(ue.ABORTED,"Firestore shutting down"))}}function lA(){return new cl((n=>WC(n)),Z0)}async function _y(n,e){const t=Xe(n);let r=3;const i=e.query;let a=t.queries.get(i);a?!a.ba()&&e.Da()&&(r=2):(a=new $M,r=e.Da()?0:1);try{switch(r){case 0:a.wa=await t.onListen(i,!0);break;case 1:a.wa=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(o){const c=yy(o,`Initialization of query '${ac(e.query)}' failed`);return void e.onError(c)}t.queries.set(i,a),a.Sa.push(e),e.va(t.onlineState),a.wa&&e.Fa(a.wa)&&wy(t)}async function xy(n,e){const t=Xe(n),r=e.query;let i=3;const a=t.queries.get(r);if(a){const o=a.Sa.indexOf(e);o>=0&&(a.Sa.splice(o,1),a.Sa.length===0?i=e.Da()?0:1:!a.ba()&&e.Da()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function YM(n,e){const t=Xe(n);let r=!1;for(const i of e){const a=i.query,o=t.queries.get(a);if(o){for(const c of o.Sa)c.Fa(i)&&(r=!0);o.wa=i}}r&&wy(t)}function KM(n,e,t){const r=Xe(n),i=r.queries.get(e);if(i)for(const a of i.Sa)a.onError(t);r.queries.delete(e)}function wy(n){n.Ca.forEach((e=>{e.next()}))}var Zg,cA;(cA=Zg||(Zg={})).Ma="default",cA.Cache="cache";class Ey{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Tc(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const r=t!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Tc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Zg.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DT{constructor(e){this.key=e}}class MT{constructor(e){this.key=e}}class WM{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=ft(),this.mutatedKeys=ft(),this.eu=QC(e),this.tu=new _c(this.eu)}get nu(){return this.Ya}ru(e,t){const r=t?t.iu:new oA,i=t?t.tu:this.tu;let a=t?t.mutatedKeys:this.mutatedKeys,o=i,c=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,d=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal(((m,g)=>{const _=i.get(m),w=J0(this.query,g)?g:null,A=!!_&&this.mutatedKeys.has(_.key),S=!!w&&(w.hasLocalMutations||this.mutatedKeys.has(w.key)&&w.hasCommittedMutations);let D=!1;_&&w?_.data.isEqual(w.data)?A!==S&&(r.track({type:3,doc:w}),D=!0):this.su(_,w)||(r.track({type:2,doc:w}),D=!0,(u&&this.eu(w,u)>0||d&&this.eu(w,d)<0)&&(c=!0)):!_&&w?(r.track({type:0,doc:w}),D=!0):_&&!w&&(r.track({type:1,doc:_}),D=!0,(u||d)&&(c=!0)),D&&(w?(o=o.add(w),a=S?a.add(m):a.delete(m)):(o=o.delete(m),a=a.delete(m)))})),this.query.limit!==null)for(;o.size>this.query.limit;){const m=this.query.limitType==="F"?o.last():o.first();o=o.delete(m.key),a=a.delete(m.key),r.track({type:1,doc:m})}return{tu:o,iu:r,Cs:c,mutatedKeys:a}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const a=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort(((m,g)=>(function(w,A){const S=D=>{switch(D){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ve(20277,{Rt:D})}};return S(w)-S(A)})(m.type,g.type)||this.eu(m.doc,g.doc))),this.ou(r),i=i??!1;const c=t&&!i?this._u():[],u=this.Xa.size===0&&this.current&&!i?1:0,d=u!==this.Za;return this.Za=u,o.length!==0||d?{snapshot:new Tc(this.query,e.tu,a,o,e.mutatedKeys,u===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:c}:{au:c}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new oA,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=ft(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const t=[];return e.forEach((r=>{this.Xa.has(r)||t.push(new MT(r))})),this.Xa.forEach((r=>{e.has(r)||t.push(new DT(r))})),t}cu(e){this.Ya=e.Qs,this.Xa=ft();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Tc.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Ay="SyncEngine";class QM{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class ZM{constructor(e){this.key=e,this.hu=!1}}class JM{constructor(e,t,r,i,a,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new cl((c=>WC(c)),Z0),this.Iu=new Map,this.Eu=new Set,this.du=new an(Me.comparator),this.Au=new Map,this.Ru=new ly,this.Vu={},this.mu=new Map,this.fu=Cc.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function e9(n,e,t=!0){const r=VT(n);let i;const a=r.Tu.get(e);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),i=a.view.lu()):i=await PT(r,e,t,!0),i}async function t9(n,e){const t=VT(n);await PT(t,e,!0,!1)}async function PT(n,e,t,r){const i=await wM(n.localStore,Aa(e)),a=i.targetId,o=n.sharedClientState.addLocalQueryTarget(a,t);let c;return r&&(c=await n9(n,e,a,o==="current",i.resumeToken)),n.isPrimaryClient&&t&&CT(n.remoteStore,i),c}async function n9(n,e,t,r,i){n.pu=(g,_,w)=>(async function(S,D,C,k){let V=D.view.ru(C);V.Cs&&(V=await tA(S.localStore,D.query,!1).then((({documents:M})=>D.view.ru(M,V))));const z=k&&k.targetChanges.get(D.targetId),q=k&&k.targetMismatches.get(D.targetId)!=null,$=D.view.applyChanges(V,S.isPrimaryClient,z,q);return fA(S,D.targetId,$.au),$.snapshot})(n,g,_,w);const a=await tA(n.localStore,e,!0),o=new WM(e,a.Qs),c=o.ru(a.documents),u=Xf.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),d=o.applyChanges(c,n.isPrimaryClient,u);fA(n,t,d.au);const m=new QM(e,t,o);return n.Tu.set(e,m),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),d.snapshot}async function r9(n,e,t){const r=Xe(n),i=r.Tu.get(e),a=r.Iu.get(i.targetId);if(a.length>1)return r.Iu.set(i.targetId,a.filter((o=>!Z0(o,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Wg(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),t&&hy(r.remoteStore,i.targetId),Jg(r,i.targetId)})).catch(Bc)):(Jg(r,i.targetId),await Wg(r.localStore,i.targetId,!0))}async function i9(n,e){const t=Xe(n),r=t.Tu.get(e),i=t.Iu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),hy(t.remoteStore,r.targetId))}async function a9(n,e,t){const r=d9(n);try{const i=await(function(o,c){const u=Xe(o),d=Mt.now(),m=c.reduce(((w,A)=>w.add(A.key)),ft());let g,_;return u.persistence.runTransaction("Locally write mutations","readwrite",(w=>{let A=as(),S=ft();return u.Ns.getEntries(w,m).next((D=>{A=D,A.forEach(((C,k)=>{k.isValidDocument()||(S=S.add(C))}))})).next((()=>u.localDocuments.getOverlayedDocuments(w,A))).next((D=>{g=D;const C=[];for(const k of c){const V=E5(k,g.get(k.key).overlayedDocument);V!=null&&C.push(new vo(k.key,V,zC(V.value.mapValue),sr.exists(!0)))}return u.mutationQueue.addMutationBatch(w,d,C,c)})).next((D=>{_=D;const C=D.applyToLocalDocumentSet(g,S);return u.documentOverlayCache.saveOverlays(w,D.batchId,C)}))})).then((()=>({batchId:_.batchId,changes:JC(g)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(o,c,u){let d=o.Vu[o.currentUser.toKey()];d||(d=new an(ut)),d=d.insert(c,u),o.Vu[o.currentUser.toKey()]=d})(r,i.batchId,t),await Kf(r,i.changes),await sp(r.remoteStore)}catch(i){const a=yy(i,"Failed to persist write");t.reject(a)}}async function kT(n,e){const t=Xe(n);try{const r=await yM(t.localStore,e);e.targetChanges.forEach(((i,a)=>{const o=t.Au.get(a);o&&(mt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?o.hu=!0:i.modifiedDocuments.size>0?mt(o.hu,14607):i.removedDocuments.size>0&&(mt(o.hu,42227),o.hu=!1))})),await Kf(t,r,e)}catch(r){await Bc(r)}}function uA(n,e,t){const r=Xe(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const i=[];r.Tu.forEach(((a,o)=>{const c=o.view.va(e);c.snapshot&&i.push(c.snapshot)})),(function(o,c){const u=Xe(o);u.onlineState=c;let d=!1;u.queries.forEach(((m,g)=>{for(const _ of g.Sa)_.va(c)&&(d=!0)})),d&&wy(u)})(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function s9(n,e,t){const r=Xe(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Au.get(e),a=i&&i.key;if(a){let o=new an(Me.comparator);o=o.insert(a,qn.newNoDocument(a,Ge.min()));const c=ft().add(a),u=new rp(Ge.min(),new Map,new an(ut),o,c);await kT(r,u),r.du=r.du.remove(a),r.Au.delete(e),by(r)}else await Wg(r.localStore,e,!1).then((()=>Jg(r,e,t))).catch(Bc)}async function o9(n,e){const t=Xe(n),r=e.batch.batchId;try{const i=await vM(t.localStore,e);LT(t,r,null),jT(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await Kf(t,i)}catch(i){await Bc(i)}}async function l9(n,e,t){const r=Xe(n);try{const i=await(function(o,c){const u=Xe(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",(d=>{let m;return u.mutationQueue.lookupMutationBatch(d,c).next((g=>(mt(g!==null,37113),m=g.keys(),u.mutationQueue.removeMutationBatch(d,g)))).next((()=>u.mutationQueue.performConsistencyCheck(d))).next((()=>u.documentOverlayCache.removeOverlaysForBatchId(d,m,c))).next((()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,m))).next((()=>u.localDocuments.getDocuments(d,m)))}))})(r.localStore,e);LT(r,e,t),jT(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await Kf(r,i)}catch(i){await Bc(i)}}function jT(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function LT(n,e,t){const r=Xe(n);let i=r.Vu[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(t?a.reject(t):a.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function Jg(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Iu.get(e))n.Tu.delete(r),t&&n.Pu.yu(r,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((r=>{n.Ru.containsKey(r)||BT(n,r)}))}function BT(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(hy(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),by(n))}function fA(n,e,t){for(const r of t)r instanceof DT?(n.Ru.addReference(r.key,e),c9(n,r)):r instanceof MT?(Se(Ay,"Document no longer in limbo: "+r.key),n.Ru.removeReference(r.key,e),n.Ru.containsKey(r.key)||BT(n,r.key)):Ve(19791,{wu:r})}function c9(n,e){const t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Eu.has(r)||(Se(Ay,"New document in limbo: "+t),n.Eu.add(r),by(n))}function by(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new Me(Ft.fromString(e)),r=n.fu.next();n.Au.set(r,new ZM(t)),n.du=n.du.insert(t,r),CT(n.remoteStore,new Ys(Aa(Q0(t.path)),r,"TargetPurposeLimboResolution",K0.ce))}}async function Kf(n,e,t){const r=Xe(n),i=[],a=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach(((c,u)=>{o.push(r.pu(u,e,t).then((d=>{if((d||t)&&r.isPrimaryClient){const m=d?!d.fromCache:t?.targetChanges.get(u.targetId)?.current;r.sharedClientState.updateQueryState(u.targetId,m?"current":"not-current")}if(d){i.push(d);const m=uy.As(u.targetId,d);a.push(m)}})))})),await Promise.all(o),r.Pu.H_(i),await(async function(u,d){const m=Xe(u);try{await m.persistence.runTransaction("notifyLocalViewChanges","readwrite",(g=>pe.forEach(d,(_=>pe.forEach(_.Es,(w=>m.persistence.referenceDelegate.addReference(g,_.targetId,w))).next((()=>pe.forEach(_.ds,(w=>m.persistence.referenceDelegate.removeReference(g,_.targetId,w)))))))))}catch(g){if(!Vc(g))throw g;Se(fy,"Failed to update sequence numbers: "+g)}for(const g of d){const _=g.targetId;if(!g.fromCache){const w=m.Ms.get(_),A=w.snapshotVersion,S=w.withLastLimboFreeSnapshotVersion(A);m.Ms=m.Ms.insert(_,S)}}})(r.localStore,a))}async function u9(n,e){const t=Xe(n);if(!t.currentUser.isEqual(e)){Se(Ay,"User change. New user:",e.toKey());const r=await AT(t.localStore,e);t.currentUser=e,(function(a,o){a.mu.forEach((c=>{c.forEach((u=>{u.reject(new Ee(ue.CANCELLED,o))}))})),a.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Kf(t,r.Ls)}}function f9(n,e){const t=Xe(n),r=t.Au.get(e);if(r&&r.hu)return ft().add(r.key);{let i=ft();const a=t.Iu.get(e);if(!a)return i;for(const o of a){const c=t.Tu.get(o);i=i.unionWith(c.view.nu)}return i}}function VT(n){const e=Xe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=kT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=f9.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=s9.bind(null,e),e.Pu.H_=YM.bind(null,e.eventManager),e.Pu.yu=KM.bind(null,e.eventManager),e}function d9(n){const e=Xe(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=o9.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=l9.bind(null,e),e}class A0{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=ip(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return gM(this.persistence,new hM,e.initialUser,this.serializer)}Cu(e){return new ET(cy.mi,this.serializer)}Du(e){return new AM}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}A0.provider={build:()=>new A0};class h9 extends A0{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){mt(this.persistence.referenceDelegate instanceof w0,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new Z5(r,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Pr.withCacheSize(this.cacheSizeBytes):Pr.DEFAULT;return new ET((r=>w0.mi(r,t)),this.serializer)}}class ev{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>uA(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=u9.bind(null,this.syncEngine),await qM(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new XM})()}createDatastore(e){const t=ip(e.databaseInfo.databaseId),r=(function(a){return new IM(a)})(e.databaseInfo);return(function(a,o,c,u){return new DM(a,o,c,u)})(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return(function(r,i,a,o,c){return new PM(r,i,a,o,c)})(this.localStore,this.datastore,e.asyncQueue,(t=>uA(this.syncEngine,t,0)),(function(){return iA.v()?new iA:new bM})())}createSyncEngine(e,t){return(function(i,a,o,c,u,d,m){const g=new JM(i,a,o,c,u,d);return m&&(g.gu=!0),g})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const r=Xe(t);Se(sl,"RemoteStore shutting down."),r.Ea.add(5),await Yf(r),r.Aa.shutdown(),r.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}ev.provider={build:()=>new ev};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sy{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):is("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p9{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new Ee(ue.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await(async function(i,a){const o=Xe(i),c={documents:a.map((g=>x0(o.serializer,g)))},u=await o.Ho("BatchGetDocuments",o.serializer.databaseId,Ft.emptyPath(),c,a.length),d=new Map;u.forEach((g=>{const _=k5(o.serializer,g);d.set(_.key.toString(),_)}));const m=[];return a.forEach((g=>{const _=d.get(g.toString());mt(!!_,55234,{key:g}),m.push(_)})),m})(this.datastore,e);return t.forEach((r=>this.recordVersion(r))),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new np(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((t=>{e.delete(t.key.toString())})),e.forEach(((t,r)=>{const i=Me.fromPath(r);this.mutations.push(new lT(i,this.precondition(i)))})),await(async function(r,i){const a=Xe(r),o={writes:i.map((c=>vT(a.serializer,c)))};await a.Go("Commit",a.serializer.databaseId,Ft.emptyPath(),o)})(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Ve(50498,{Gu:e.constructor.name});t=Ge.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Ee(ue.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Ge.min())?sr.exists(!1):sr.updateTime(t):sr.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Ge.min()))throw new Ee(ue.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return sr.updateTime(t)}return sr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m9{constructor(e,t,r,i,a){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=a,this.zu=r.maxAttempts,this.M_=new dy(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Ju()}Ju(){this.M_.p_((async()=>{const e=new p9(this.datastore),t=this.Hu(e);t&&t.then((r=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(r)})).catch((i=>{this.Yu(i)}))))})).catch((r=>{this.Yu(r)}))}))}Hu(e){try{const t=this.updateFunction(e);return!qf(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Yu(e){this.zu>0&&this.Zu(e)?(this.zu-=1,this.asyncQueue.enqueueAndForget((()=>(this.Ju(),Promise.resolve())))):this.deferred.reject(e)}Zu(e){if(e?.name==="FirebaseError"){const t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!cT(t)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fo="FirestoreClient";class g9{constructor(e,t,r,i,a){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=gr.UNAUTHENTICATED,this.clientId=Zv.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,(async o=>{Se(fo,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(r,(o=>(Se(fo,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ea;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=yy(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function Fm(n,e){n.asyncQueue.verifyOperationInProgress(),Se(fo,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener((async i=>{r.isEqual(i)||(await AT(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function dA(n,e){n.asyncQueue.verifyOperationInProgress();const t=await v9(n);Se(fo,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((r=>sA(e.remoteStore,r))),n.setAppCheckTokenChangeListener(((r,i)=>sA(e.remoteStore,i))),n._onlineComponents=e}async function v9(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Se(fo,"Using user provided OfflineComponentProvider");try{await Fm(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(i){return i.name==="FirebaseError"?i.code===ue.FAILED_PRECONDITION||i.code===ue.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(t))throw t;Ec("Error using user provided cache. Falling back to memory cache: "+t),await Fm(n,new A0)}}else Se(fo,"Using default OfflineComponentProvider"),await Fm(n,new h9(void 0));return n._offlineComponents}async function Cy(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Se(fo,"Using user provided OnlineComponentProvider"),await dA(n,n._uninitializedComponentsProvider._online)):(Se(fo,"Using default OnlineComponentProvider"),await dA(n,new ev))),n._onlineComponents}function y9(n){return Cy(n).then((e=>e.syncEngine))}function _9(n){return Cy(n).then((e=>e.datastore))}async function b0(n){const e=await Cy(n),t=e.eventManager;return t.onListen=e9.bind(null,e.syncEngine),t.onUnlisten=r9.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=t9.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=i9.bind(null,e.syncEngine),t}function x9(n,e,t={}){const r=new Ea;return n.asyncQueue.enqueueAndForget((async()=>(function(a,o,c,u,d){const m=new Sy({next:_=>{m.Nu(),o.enqueueAndForget((()=>xy(a,g)));const w=_.docs.has(c);!w&&_.fromCache?d.reject(new Ee(ue.UNAVAILABLE,"Failed to get document because the client is offline.")):w&&_.fromCache&&u&&u.source==="server"?d.reject(new Ee(ue.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(_)},error:_=>d.reject(_)}),g=new Ey(Q0(c.path),m,{includeMetadataChanges:!0,qa:!0});return _y(a,g)})(await b0(n),n.asyncQueue,e,t,r))),r.promise}function w9(n,e,t={}){const r=new Ea;return n.asyncQueue.enqueueAndForget((async()=>(function(a,o,c,u,d){const m=new Sy({next:_=>{m.Nu(),o.enqueueAndForget((()=>xy(a,g))),_.fromCache&&u.source==="server"?d.reject(new Ee(ue.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(_)},error:_=>d.reject(_)}),g=new Ey(c,m,{includeMetadataChanges:!0,qa:!0});return _y(a,g)})(await b0(n),n.asyncQueue,e,t,r))),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FT(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hA=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UT="firestore.googleapis.com",pA=!0;class mA{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Ee(ue.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=UT,this.ssl=pA}else this.host=e.host,this.ssl=e.ssl??pA;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=wT;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<W5)throw new Ee(ue.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}PD("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=FT(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new Ee(ue.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new Ee(ue.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new Ee(ue.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class op{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new mA({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ee(ue.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ee(ue.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new mA(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new bD;switch(r.type){case"firstParty":return new ID(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Ee(ue.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const r=hA.get(t);r&&(Se("ComponentProvider","Removing Datastore"),hA.delete(t),r.terminate())})(this),Promise.resolve()}}function E9(n,e,t,r={}){n=yi(n,op);const i=Pc(e),a=n._getSettings(),o={...a,emulatorOptions:n._getEmulatorOptions()},c=`${e}:${t}`;i&&(PS(`https://${c}`),kS("Firestore",!0)),a.host!==UT&&a.host!==c&&Ec("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u={...a,host:c,ssl:i,emulatorOptions:r};if(!nl(u,o)&&(n._setSettings(u),r.mockUserToken)){let d,m;if(typeof r.mockUserToken=="string")d=r.mockUserToken,m=gr.MOCK_USER;else{d=kR(r.mockUserToken,n._app?.options.projectId);const g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new Ee(ue.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new gr(g)}n._authCredentials=new SD(new RC(d,m))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class os{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new os(this.firestore,e,this._query)}}class ln{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new eo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ln(this.firestore,e,this._key)}toJSON(){return{type:ln._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(Gf(t,ln._jsonSchema))return new ln(e,r||null,new Me(Ft.fromString(t.referencePath)))}}ln._jsonSchemaVersion="firestore/documentReference/1.0",ln._jsonSchema={type:Tn("string",ln._jsonSchemaVersion),referencePath:Tn("string")};class eo extends os{constructor(e,t,r){super(e,t,Q0(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ln(this.firestore,null,new Me(e))}withConverter(e){return new eo(this.firestore,e,this._path)}}function lp(n,e,...t){if(n=gn(n),OC("collection","path",e),n instanceof op){const r=Ft.fromString(e,...t);return IE(r),new eo(n,null,r)}{if(!(n instanceof ln||n instanceof eo))throw new Ee(ue.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Ft.fromString(e,...t));return IE(r),new eo(n.firestore,null,r)}}function Ui(n,e,...t){if(n=gn(n),arguments.length===1&&(e=Zv.newId()),OC("doc","path",e),n instanceof op){const r=Ft.fromString(e,...t);return TE(r),new ln(n,null,new Me(r))}{if(!(n instanceof ln||n instanceof eo))throw new Ee(ue.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Ft.fromString(e,...t));return TE(r),new ln(n.firestore,n instanceof eo?n.converter:null,new Me(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gA="AsyncQueue";class vA{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new dy(this,"async_queue_retry"),this._c=()=>{const r=Vm();r&&Se(gA,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const t=Vm();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Vm();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Ea;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Vc(e))throw e;Se(gA,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,is("INTERNAL UNHANDLED ERROR: ",yA(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const i=vy.createAndSchedule(this,e,t,r,(a=>this.hc(a)));return this.tc.push(i),i}uc(){this.nc&&Ve(47125,{Pc:yA(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,r)=>t.targetTimeMs-r.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function yA(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _A(n){return(function(t,r){if(typeof t!="object"||t===null)return!1;const i=t;for(const a of r)if(a in i&&typeof i[a]=="function")return!0;return!1})(n,["next","error","complete"])}class ho extends op{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new vA,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new vA(e),this._firestoreClient=void 0,await e}}}function A9(n,e){const t=typeof n=="object"?n:VS(),r=typeof n=="string"?n:p0,i=zv(t,"firestore").getImmediate({identifier:r});if(!i._initialized){const a=MR("firestore");a&&E9(i,...a)}return i}function zc(n){if(n._terminated)throw new Ee(ue.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||b9(n),n._firestoreClient}function b9(n){const e=n._freezeSettings(),t=(function(i,a,o,c){return new $D(i,a,o,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,FT(c.experimentalLongPollingOptions),c.useFetchStreams,c.isUsingEmulator)})(n._databaseId,n._app?.options.appId||"",n._persistenceKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new g9(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(i){const a=i?._online.build();return{_offline:i?._offline.build(a),_online:a}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Wr(lr.fromBase64String(e))}catch(t){throw new Ee(ue.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Wr(lr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Wr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Gf(e,Wr._jsonSchema))return Wr.fromBase64String(e.bytes)}}Wr._jsonSchemaVersion="firestore/bytes/1.0",Wr._jsonSchema={type:Tn("string",Wr._jsonSchemaVersion),bytes:Tn("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wf{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Ee(ue.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ar(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cp{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ba{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ee(ue.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ee(ue.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ut(this._lat,e._lat)||ut(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:ba._jsonSchemaVersion}}static fromJSON(e){if(Gf(e,ba._jsonSchema))return new ba(e.latitude,e.longitude)}}ba._jsonSchemaVersion="firestore/geoPoint/1.0",ba._jsonSchema={type:Tn("string",ba._jsonSchemaVersion),latitude:Tn("number"),longitude:Tn("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sa{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==i[a])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Sa._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Gf(e,Sa._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Sa(e.vectorValues);throw new Ee(ue.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Sa._jsonSchemaVersion="firestore/vectorValue/1.0",Sa._jsonSchema={type:Tn("string",Sa._jsonSchemaVersion),vectorValues:Tn("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S9=/^__.*__$/;class C9{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new vo(e,this.data,this.fieldMask,t,this.fieldTransforms):new $f(e,this.data,t,this.fieldTransforms)}}class zT{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new vo(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function HT(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ve(40011,{Ac:n})}}class Ty{constructor(e,t,r,i,a,o){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,a===void 0&&this.Rc(),this.fieldTransforms=a||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Ty({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.gc(e),r}yc(e){const t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return S0(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(HT(this.Ac)&&S9.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class T9{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||ip(e)}Cc(e,t,r,i=!1){return new Ty({Ac:e,methodName:t,Dc:r,path:ar.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function up(n){const e=n._freezeSettings(),t=ip(n._databaseId);return new T9(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Iy(n,e,t,r,i,a={}){const o=n.Cc(a.merge||a.mergeFields?2:0,e,t,i);Ry("Data must be an object, but it was:",o,r);const c=$T(r,o);let u,d;if(a.merge)u=new Qr(o.fieldMask),d=o.fieldTransforms;else if(a.mergeFields){const m=[];for(const g of a.mergeFields){const _=tv(e,g,t);if(!o.contains(_))throw new Ee(ue.INVALID_ARGUMENT,`Field '${_}' is specified in your field mask but missing from your input data.`);YT(m,_)||m.push(_)}u=new Qr(m),d=o.fieldTransforms.filter((g=>u.covers(g.field)))}else u=null,d=o.fieldTransforms;return new C9(new Sr(c),u,d)}class fp extends cp{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof fp}}class Ny extends cp{_toFieldTransform(e){return new y5(e.path,new Of)}isEqual(e){return e instanceof Ny}}function GT(n,e,t,r){const i=n.Cc(1,e,t);Ry("Data must be an object, but it was:",i,r);const a=[],o=Sr.empty();go(r,((u,d)=>{const m=Oy(e,u,t);d=gn(d);const g=i.yc(m);if(d instanceof fp)a.push(m);else{const _=Qf(d,g);_!=null&&(a.push(m),o.set(m,_))}}));const c=new Qr(a);return new zT(o,c,i.fieldTransforms)}function qT(n,e,t,r,i,a){const o=n.Cc(1,e,t),c=[tv(e,r,t)],u=[i];if(a.length%2!=0)throw new Ee(ue.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let _=0;_<a.length;_+=2)c.push(tv(e,a[_])),u.push(a[_+1]);const d=[],m=Sr.empty();for(let _=c.length-1;_>=0;--_)if(!YT(d,c[_])){const w=c[_];let A=u[_];A=gn(A);const S=o.yc(w);if(A instanceof fp)d.push(w);else{const D=Qf(A,S);D!=null&&(d.push(w),m.set(w,D))}}const g=new Qr(d);return new zT(m,g,o.fieldTransforms)}function I9(n,e,t,r=!1){return Qf(t,n.Cc(r?4:3,e))}function Qf(n,e){if(XT(n=gn(n)))return Ry("Unsupported field value:",e,n),$T(n,e);if(n instanceof cp)return(function(r,i){if(!HT(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(i);a&&i.fieldTransforms.push(a)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,i){const a=[];let o=0;for(const c of r){let u=Qf(c,i.wc(o));u==null&&(u={nullValue:"NULL_VALUE"}),a.push(u),o++}return{arrayValue:{values:a}}})(n,e)}return(function(r,i){if((r=gn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return m5(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=Mt.fromDate(r);return{timestampValue:_0(i.serializer,a)}}if(r instanceof Mt){const a=new Mt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:_0(i.serializer,a)}}if(r instanceof ba)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Wr)return{bytesValue:hT(i.serializer,r._byteString)};if(r instanceof ln){const a=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(a))throw i.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:oy(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Sa)return(function(o,c){return{mapValue:{fields:{[FC]:{stringValue:UC},[m0]:{arrayValue:{values:o.toArray().map((d=>{if(typeof d!="number")throw c.Sc("VectorValues must only contain numeric values.");return iy(c.serializer,d)}))}}}}}})(r,i);throw i.Sc(`Unsupported field value: ${Y0(r)}`)})(n,e)}function $T(n,e){const t={};return PC(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):go(n,((r,i)=>{const a=Qf(i,e.mc(r));a!=null&&(t[r]=a)})),{mapValue:{fields:t}}}function XT(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Mt||n instanceof ba||n instanceof Wr||n instanceof ln||n instanceof cp||n instanceof Sa)}function Ry(n,e,t){if(!XT(t)||!DC(t)){const r=Y0(t);throw r==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+r)}}function tv(n,e,t){if((e=gn(e))instanceof Wf)return e._internalPath;if(typeof e=="string")return Oy(n,e);throw S0("Field path arguments must be of type string or ",n,!1,void 0,t)}const N9=new RegExp("[~\\*/\\[\\]]");function Oy(n,e,t){if(e.search(N9)>=0)throw S0(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Wf(...e.split("."))._internalPath}catch{throw S0(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function S0(n,e,t,r,i){const a=r&&!r.isEmpty(),o=i!==void 0;let c=`Function ${e}() called with invalid data`;t&&(c+=" (via `toFirestore()`)"),c+=". ";let u="";return(a||o)&&(u+=" (found",a&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new Ee(ue.INVALID_ARGUMENT,c+n+u)}function YT(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C0{constructor(e,t,r,i,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new ln(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new R9(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(dp("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class R9 extends C0{data(){return super.data()}}function dp(n,e){return typeof e=="string"?Oy(n,e):e instanceof Wf?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KT(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new Ee(ue.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Dy{}class My extends Dy{}function hp(n,e,...t){let r=[];e instanceof Dy&&r.push(e),r=r.concat(t),(function(a){const o=a.filter((u=>u instanceof Py)).length,c=a.filter((u=>u instanceof pp)).length;if(o>1||o>0&&c>0)throw new Ee(ue.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const i of r)n=i._apply(n);return n}class pp extends My{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new pp(e,t,r)}_apply(e){const t=this._parse(e);return QT(e._query,t),new os(e.firestore,e.converter,$g(e._query,t))}_parse(e){const t=up(e.firestore);return(function(a,o,c,u,d,m,g){let _;if(d.isKeyField()){if(m==="array-contains"||m==="array-contains-any")throw new Ee(ue.INVALID_ARGUMENT,`Invalid Query. You can't perform '${m}' queries on documentId().`);if(m==="in"||m==="not-in"){wA(g,m);const A=[];for(const S of g)A.push(xA(u,a,S));_={arrayValue:{values:A}}}else _=xA(u,a,g)}else m!=="in"&&m!=="not-in"&&m!=="array-contains-any"||wA(g,m),_=I9(c,o,g,m==="in"||m==="not-in");return Sn.create(d,m,_)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function T0(n,e,t){const r=e,i=dp("where",n);return pp._create(i,r,t)}class Py extends Dy{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Py(e,t)}_parse(e){const t=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return t.length===1?t[0]:Gi.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(i,a){let o=i;const c=a.getFlattenedFilters();for(const u of c)QT(o,u),o=$g(o,u)})(e._query,t),new os(e.firestore,e.converter,$g(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class ky extends My{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new ky(e,t)}_apply(e){const t=(function(i,a,o){if(i.startAt!==null)throw new Ee(ue.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new Ee(ue.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Rf(a,o)})(e._query,this._field,this._direction);return new os(e.firestore,e.converter,(function(i,a){const o=i.explicitOrderBy.concat([a]);return new Fc(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)})(e._query,t))}}function mp(n,e="asc"){const t=e,r=dp("orderBy",n);return ky._create(r,t)}class jy extends My{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new jy(e,t,r)}_apply(e){return new os(e.firestore,e.converter,v0(e._query,this._limit,this._limitType))}}function WT(n){return kD("limit",n),jy._create("limit",n,"F")}function xA(n,e,t){if(typeof(t=gn(t))=="string"){if(t==="")throw new Ee(ue.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!KC(e)&&t.indexOf("/")!==-1)throw new Ee(ue.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Ft.fromString(t));if(!Me.isDocumentKey(r))throw new Ee(ue.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return jE(n,new Me(r))}if(t instanceof ln)return jE(n,t._key);throw new Ee(ue.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Y0(t)}.`)}function wA(n,e){if(!Array.isArray(n)||n.length===0)throw new Ee(ue.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function QT(n,e){const t=(function(i,a){for(const o of i)for(const c of o.getFlattenedFilters())if(a.indexOf(c.op)>=0)return c.op;return null})(n.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new Ee(ue.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Ee(ue.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class ZT{convertValue(e,t="none"){switch(co(e)){case 0:return null;case 1:return e.booleanValue;case 2:return mn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(lo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ve(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return go(e,((i,a)=>{r[i]=this.convertValue(a,t)})),r}convertVectorValue(e){const t=e.fields?.[m0].arrayValue?.values?.map((r=>mn(r.doubleValue)));return new Sa(t)}convertGeoPoint(e){return new ba(mn(e.latitude),mn(e.longitude))}convertArray(e,t){return(e.values||[]).map((r=>this.convertValue(r,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const r=W0(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Tf(e));default:return null}}convertTimestamp(e){const t=oo(e);return new Mt(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Ft.fromString(e);mt(xT(r),9688,{name:e});const i=new If(r.get(1),r.get(3)),a=new Me(r.popFirst(5));return i.isEqual(t)||is(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ly(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class O9 extends ZT{constructor(e){super(),this.firestore=e}convertBytes(e){return new Wr(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ln(this.firestore,null,t)}}class cc{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class to extends C0{constructor(e,t,r,i,a,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Zh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(dp("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Ee(ue.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=to._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}to._jsonSchemaVersion="firestore/documentSnapshot/1.0",to._jsonSchema={type:Tn("string",to._jsonSchemaVersion),bundleSource:Tn("string","DocumentSnapshot"),bundleName:Tn("string"),bundle:Tn("string")};class Zh extends to{data(e={}){return super.data(e)}}class el{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new cc(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((r=>{e.call(t,new Zh(this._firestore,this._userDataWriter,r.key,r,new cc(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ee(ue.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(i,a){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map((c=>{const u=new Zh(i._firestore,i._userDataWriter,c.doc.key,c.doc,new cc(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);return c.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}}))}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter((c=>a||c.type!==3)).map((c=>{const u=new Zh(i._firestore,i._userDataWriter,c.doc.key,c.doc,new cc(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);let d=-1,m=-1;return c.type!==0&&(d=o.indexOf(c.doc.key),o=o.delete(c.doc.key)),c.type!==1&&(o=o.add(c.doc),m=o.indexOf(c.doc.key)),{type:D9(c.type),doc:u,oldIndex:d,newIndex:m}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Ee(ue.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=el._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Zv.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],i=[];return this.docs.forEach((a=>{a._document!==null&&(t.push(a._document),r.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),i.push(a.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function D9(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ve(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function By(n){n=yi(n,ln);const e=yi(n.firestore,ho);return x9(zc(e),n._key).then((t=>t3(e,n,t)))}el._jsonSchemaVersion="firestore/querySnapshot/1.0",el._jsonSchema={type:Tn("string",el._jsonSchemaVersion),bundleSource:Tn("string","QuerySnapshot"),bundleName:Tn("string"),bundle:Tn("string")};class gp extends ZT{constructor(e){super(),this.firestore=e}convertBytes(e){return new Wr(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ln(this.firestore,null,t)}}function JT(n){n=yi(n,os);const e=yi(n.firestore,ho),t=zc(e),r=new gp(e);return KT(n._query),w9(t,n._query).then((i=>new el(e,r,n,i)))}function M9(n,e,t){n=yi(n,ln);const r=yi(n.firestore,ho),i=Ly(n.converter,e,t);return e3(r,[Iy(up(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,sr.none())])}function vp(n,...e){n=gn(n);let t={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||_A(e[r])||(t=e[r++]);const i={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(_A(e[r])){const u=e[r];e[r]=u.next?.bind(u),e[r+1]=u.error?.bind(u),e[r+2]=u.complete?.bind(u)}let a,o,c;if(n instanceof ln)o=yi(n.firestore,ho),c=Q0(n._key.path),a={next:u=>{e[r]&&e[r](t3(o,n,u))},error:e[r+1],complete:e[r+2]};else{const u=yi(n,os);o=yi(u.firestore,ho),c=u._query;const d=new gp(o);a={next:m=>{e[r]&&e[r](new el(o,d,u,m))},error:e[r+1],complete:e[r+2]},KT(n._query)}return(function(d,m,g,_){const w=new Sy(_),A=new Ey(m,w,g);return d.asyncQueue.enqueueAndForget((async()=>_y(await b0(d),A))),()=>{w.Nu(),d.asyncQueue.enqueueAndForget((async()=>xy(await b0(d),A)))}})(zc(o),c,i,a)}function e3(n,e){return(function(r,i){const a=new Ea;return r.asyncQueue.enqueueAndForget((async()=>a9(await y9(r),i,a))),a.promise})(zc(n),e)}function t3(n,e,t){const r=t.docs.get(e._key),i=new gp(n);return new to(n,i,e._key,r,new cc(t.hasPendingWrites,t.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P9={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k9{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=up(e)}set(e,t,r){this._verifyNotCommitted();const i=Ks(e,this._firestore),a=Ly(i.converter,t,r),o=Iy(this._dataReader,"WriteBatch.set",i._key,a,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,sr.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const a=Ks(e,this._firestore);let o;return o=typeof(t=gn(t))=="string"||t instanceof Wf?qT(this._dataReader,"WriteBatch.update",a._key,t,r,i):GT(this._dataReader,"WriteBatch.update",a._key,t),this._mutations.push(o.toMutation(a._key,sr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Ks(e,this._firestore);return this._mutations=this._mutations.concat(new np(t._key,sr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ee(ue.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Ks(n,e){if((n=gn(n)).firestore!==e)throw new Ee(ue.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j9{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=up(e)}get(e){const t=Ks(e,this._firestore),r=new O9(this._firestore);return this._transaction.lookup([t._key]).then((i=>{if(!i||i.length!==1)return Ve(24041);const a=i[0];if(a.isFoundDocument())return new C0(this._firestore,r,a.key,a,t.converter);if(a.isNoDocument())return new C0(this._firestore,r,t._key,null,t.converter);throw Ve(18433,{doc:a})}))}set(e,t,r){const i=Ks(e,this._firestore),a=Ly(i.converter,t,r),o=Iy(this._dataReader,"Transaction.set",i._key,a,i.converter!==null,r);return this._transaction.set(i._key,o),this}update(e,t,r,...i){const a=Ks(e,this._firestore);let o;return o=typeof(t=gn(t))=="string"||t instanceof Wf?qT(this._dataReader,"Transaction.update",a._key,t,r,i):GT(this._dataReader,"Transaction.update",a._key,t),this._transaction.update(a._key,o),this}delete(e){const t=Ks(e,this._firestore);return this._transaction.delete(t._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L9 extends j9{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Ks(e,this._firestore),r=new gp(this._firestore);return super.get(e).then((i=>new to(this._firestore,r,t._key,i._document,new cc(!1,!1),t.converter)))}}function B9(n,e,t){n=yi(n,ho);const r={...P9,...t};return(function(a){if(a.maxAttempts<1)throw new Ee(ue.INVALID_ARGUMENT,"Max attempts must be at least 1")})(r),(function(a,o,c){const u=new Ea;return a.asyncQueue.enqueueAndForget((async()=>{const d=await _9(a);new m9(a.asyncQueue,d,c,o,u).ju()})),u.promise})(zc(n),(i=>e(new L9(n,i))),r)}function Ic(){return new Ny("serverTimestamp")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n3(n){return zc(n=yi(n,ho)),new k9(n,(e=>e3(n,e)))}(function(e,t=!0){(function(i){Lc=i})(kc),wc(new rl("firestore",((r,{instanceIdentifier:i,options:a})=>{const o=r.getProvider("app").getImmediate(),c=new ho(new CD(r.getProvider("auth-internal")),new ND(o,r.getProvider("app-check-internal")),(function(d,m){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new Ee(ue.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new If(d.options.projectId,m)})(o,i),o);return a={useFetchStreams:t,...a},c._setSettings(a),c}),"PUBLIC").setMultipleInstances(!0)),Zs(AE,bE,e),Zs(AE,bE,"esm2020")})();const nv={apiKey:"AIzaSyAaAHxUEayt4oM_GKqv-Bl9ryEhQ0SdC2k",authDomain:"pfes2025-ichinikai-order.firebaseapp.com",projectId:"pfes2025-ichinikai-order",storageBucket:"pfes2025-ichinikai-order.firebasestorage.app",messagingSenderId:"1047778685960",appId:"1:1047778685960:web:61b378c5e254840d914dbd"};function V9(n){const e=Object.entries(n).filter(([,t])=>typeof t>"u").map(([t])=>t);if(e.length>0)throw new Error(`Firebase: ${e.join(", ")}. Vite.env`)}const r3=Object.entries(nv).filter(([,n])=>!n||n==="undefined").map(([n])=>n),i3=r3.length>0,Vy=i3,Ka=Vy;let Um=null,rv,iv;if(!Vy)V9(nv),Um=Zw().length?Zw()[0]:BS(nv),rv=xD(Um),iv=A9(Um);else{const n=i3?`Firebase: ${r3.join(", ")}`:"";console.info(`Firebase initialization skipped: ${n}`),rv={currentUser:null},iv={}}const Vi=rv,$n=iv;async function a3(){if(!Vy){if(!Vi.currentUser){await(await cC(Vi)).user.getIdToken(!0);return}Vi.currentUser.isAnonymous&&await Vi.currentUser.getIdToken(!0)}}const s3=P.createContext(void 0),zm=["admin","kitchen","staff"];function F9(n){const e=[];return n.admin&&e.push("admin"),n.kitchen&&e.push("kitchen"),n.staff&&e.push("staff"),e}function U9({children:n}){const[e,t]=P.useState(()=>Ka?"signed-in":"loading"),[r,i]=P.useState(null),[a,o]=P.useState(()=>Ka?zm:[]),[c,u]=P.useState(null);P.useEffect(()=>{if(Ka){t("signed-in"),i(null),o(zm),u(null);return}const w=dC(Vi,async A=>{if(!A){i(null),o([]),t("signed-out");return}try{const S=await A.getIdTokenResult(!0),D=F9(S.claims);i(A),o(D),t("signed-in"),u(null)}catch(S){console.error("Failed to refresh token claims",S),i(A),o([]),t("signed-in"),u("")}});return()=>w()},[]);const d=P.useCallback(async({email:w,password:A})=>{if(u(null),Ka){t("signed-in"),i(null),o(zm);return}try{await sO(Vi,w,A)}catch(S){console.error("Failed to sign in",S);const D=S instanceof Error?S.message:"";throw u(D),S}},[]),m=P.useCallback(async()=>{if(u(null),Ka){t("signed-out"),i(null),o([]);return}await cO(Vi)},[]),g=P.useCallback(w=>{const A=Array.isArray(w)?w:[w];return A.length===0||Ka?!0:A.some(S=>a.includes(S))},[a]),_=P.useMemo(()=>({status:e,user:r,roles:a,error:c,signIn:d,signOut:m,hasRole:g}),[c,g,a,d,m,e,r]);return p.jsx(s3.Provider,{value:_,children:n})}function yp(){const n=P.useContext(s3);if(!n)throw new Error("useAuth must be used within an AuthProvider");return n}const Zt=n=>{const e="/Ichinikai/",t=e.endsWith("/")?e:`${e}/`,r=n.replace(/^\/+/u,"");return`${t}${r}`},z9={wheat:{key:"wheat",label:"",icon:Zt("WebP/Allergie_icons/Wheat_result.webp")},egg:{key:"egg",label:"",icon:Zt("WebP/Allergie_icons/Egg_result.webp")},soy:{key:"soy",label:"",icon:Zt("WebP/Allergie_icons/Soy_result.webp")},milk:{key:"milk",label:"",icon:Zt("WebP/Allergie_icons/Milk_result.webp")},beef:{key:"beef",label:"",icon:Zt("WebP/Allergie_icons/Beef_result.webp")},chicken:{key:"chicken",label:"",icon:Zt("WebP/Allergie_icons/Chicken_result.webp")},pork:{key:"pork",label:"",icon:Zt("WebP/Allergie_icons/Pork_result.webp")},gelatin:{key:"gelatin",label:"",icon:Zt("WebP/Allergie_icons/Gelatin_result.webp")}},o3={potaufeu:{key:"potaufeu",label:"",description:"",price:250,image:Zt("WebP/menu/soup/minestrone_result.webp"),allergens:["egg","milk","soy","gelatin","pork","beef","chicken"],soldOut:!1},plain:{key:"plain",label:"()",description:"",price:200,image:Zt("WebP/menu/bread/Suger_result.webp"),allergens:["wheat","egg","milk","soy"],soldOut:!1},cocoa:{key:"cocoa",label:"()",description:"",price:200,image:Zt("WebP/menu/bread/Cocoa_result.webp"),allergens:["wheat","egg","milk","soy"],soldOut:!1},kinako:{key:"kinako",label:"()",description:"",price:200,image:Zt("WebP/menu/bread/Kinako_result.webp"),allergens:["wheat","egg","milk","soy"],soldOut:!1},garlic:{key:"garlic",label:"()",description:"",price:200,image:Zt("WebP/menu/bread/Garlic_result.webp"),allergens:["wheat","egg","milk","soy"],soldOut:!1},drink_hojicha:{key:"drink_hojicha",label:"()",description:"",price:120,image:Zt("WebP/menu/drink/ocha.webp"),allergens:[],soldOut:!1},drink_cocoa:{key:"drink_cocoa",label:"()",description:"",price:150,image:Zt("WebP/menu/drink/cocoa.webp"),allergens:["milk"],soldOut:!1},drink_coffee:{key:"drink_coffee",label:"()",description:"",price:120,image:Zt("WebP/menu/drink/coffee.webp"),allergens:["milk"],soldOut:!1},drink_milkcoffee:{key:"drink_milkcoffee",label:"()",description:"",price:150,image:Zt("WebP/menu/drink/milk_coffee.webp"),allergens:["milk"],soldOut:!1},minestrone:{key:"minestrone",label:"",description:" ",price:250,image:Zt("WebP/menu/soup/minestrone_result.webp"),allergens:["wheat","milk","soy","pork","beef","chicken"],soldOut:!1},strawberry:{key:"strawberry",label:"()3",description:" ",price:250,image:Zt("WebP/menu/smore/Strawberry_result.webp"),allergens:["wheat","soy","gelatin"],soldOut:!1},blueberry:{key:"blueberry",label:"()3",description:" ",price:250,image:Zt("WebP/menu/smore/Blueberry_result.webp"),allergens:["wheat","soy","gelatin"],soldOut:!1},chocolate:{key:"chocolate",label:"()2",description:"",price:250,image:Zt("WebP/menu/smore/Chocolate_result.webp"),allergens:["wheat","milk","soy","gelatin"],soldOut:!1},honey:{key:"honey",label:"()2",description:" ",price:250,image:Zt("WebP/menu/smore/Honey_result.webp"),allergens:["wheat","milk","soy","gelatin"],soldOut:!1}},H9={potaufeu:"",minestrone:"",plain:"",cocoa:"",kinako:"",garlic:"",strawberry:"",blueberry:"",chocolate:"",honey:"",drink_hojicha:"",drink_cocoa:"()",drink_coffee:"",drink_milkcoffee:""},sf=(n,e)=>H9[n]??e,G9={day12:["potaufeu","plain","cocoa","kinako","garlic","drink_hojicha","drink_cocoa","drink_coffee","drink_milkcoffee"],day34:["minestrone","strawberry","blueberry","chocolate","honey","drink_hojicha","drink_cocoa","drink_coffee","drink_milkcoffee"]},q9="day12",$9=n=>n==="day12"||n==="day34",Hm="day12".toLowerCase(),l3=Hm&&$9(Hm)?Hm:q9,X9=l3,c3=G9[l3],Hc=c3.reduce((n,e)=>(n[e]=o3[e],n),{});c3.map(n=>o3[n]);const Y9=["","",""],u3="order-app.menu-overrides.v1",K9="config",W9="menuOverrides",f3=Ka;let Xn={};const av=new Set;let Fy;const d3=typeof window<"u",xc=Ka?null:Ui($n,K9,W9),h3=(n,e)=>{if(typeof n!="string")return;const t=n.trim();if(!(!t||t===e))return t},p3=(n,e)=>{if(!Number.isFinite(n))return;const t=Math.max(0,Math.round(n));if(t!==e)return t},m3=(n,e)=>{if(typeof n=="boolean")return n===e?void 0:n},sv=n=>!n||typeof n!="object"?{}:Object.entries(n).reduce((e,[t,r])=>{if(!g3(t)||!r||typeof r!="object")return e;const i=Hc[t],a=h3(r.label,i.label),o=p3(r.price,i.price),c=m3(r.soldOut,i.soldOut);if(!a&&!Number.isFinite(o)&&typeof c!="boolean")return e;const u={};return a&&(u.label=a),Number.isFinite(o)&&(u.price=o),typeof c=="boolean"&&(u.soldOut=c),e[t]=u,e},{}),Q9=()=>{if(!d3)return{};try{const n=window.localStorage.getItem(u3);if(!n)return{};const e=JSON.parse(n);return sv(e)}catch(n){return console.warn("[menuConfigStore] Failed to load overrides",n),{}}},Z9=n=>{if(d3)try{const e=JSON.stringify(n);window.localStorage.setItem(u3,e)}catch(e){console.warn("[menuConfigStore] Failed to persist overrides",e)}},g3=n=>n in Hc,v3=()=>{const n=Object.entries(Hc).reduce((e,[t,r])=>{const i=t,a=Xn[i]??{},o=a.label??r.label,c=a.price??r.price,u=a.soldOut??r.soldOut;return e[i]={...r,label:o,price:c,soldOut:u},e},{});return{map:n,list:Object.values(n)}},of=(n,e)=>{const t=Object.keys(n),r=Object.keys(e);return t.length!==r.length?!1:t.every(i=>{if(!g3(i))return!1;const a=n[i],o=e[i];return!a&&!o?!0:!a||!o?!1:a.label===o.label&&a.price===o.price&&a.soldOut===o.soldOut})},uc=(n,e={})=>{const{persist:t=!0}=e;Xn=n,Fy=v3(),f3&&t&&Z9(n),av.forEach(r=>r())},J9=async n=>{xc&&await M9(xc,{overrides:n,updatedAt:Ic(),updatedBy:Vi.currentUser?.uid??null},{merge:!0})},I0=async n=>{if(of(n,Xn))return;const e=Xn;if(uc(n),xc)try{await J9(n)}catch(t){throw console.error("[menuConfigStore] Failed to sync overrides to Firestore",t),uc(e,{persist:!1}),t}},e7=()=>{xc&&((async()=>{try{await a3();const n=await By(xc);if(!n.exists()){of(Xn,{})||uc({},{persist:!1});return}const e=n.data(),t=sv(e?.overrides);of(t,Xn)||uc(t,{persist:!1})}catch(n){console.error("[menuConfigStore] Failed to load menu overrides from Firestore",n)}})(),vp(xc,n=>{if(n.metadata.hasPendingWrites)return;if(!n.exists()){of(Xn,{})||uc({},{persist:!1});return}const e=n.data(),t=sv(e?.overrides);of(t,Xn)||uc(t,{persist:!1})},n=>{console.error("[menuConfigStore] Failed to subscribe to menu overrides",n)}))},yo=()=>Fy,t7=n=>(av.add(n),()=>{av.delete(n)}),n7=async(n,e)=>{const t=Hc[n];if(!t)throw new Error(`Unknown menu item key: ${n}`);const i={...Xn[n]??{}};let a=!1;if(Object.prototype.hasOwnProperty.call(e,"label")){const m=h3(e.label,t.label);typeof m=="string"?i.label!==m&&(i.label=m,a=!0):i.label!==void 0&&(delete i.label,a=!0)}if(Object.prototype.hasOwnProperty.call(e,"price")){const m=p3(e.price,t.price);typeof m=="number"?i.price!==m&&(i.price=m,a=!0):i.price!==void 0&&(delete i.price,a=!0)}if(Object.prototype.hasOwnProperty.call(e,"soldOut")){const m=m3(e.soldOut,t.soldOut);typeof m=="boolean"?i.soldOut!==m&&(i.soldOut=m,a=!0):i.soldOut!==void 0&&(delete i.soldOut,a=!0)}if(!a)return;if(Object.keys(i).length===0){if(!Xn[n])return;const m={...Xn};delete m[n],await I0(m);return}const d={...Xn,[n]:i};await I0(d)},r7=async n=>{if(!Xn[n])return;const e={...Xn};delete e[n],await I0(e)},i7=async()=>{Object.keys(Xn).length!==0&&await I0({})},a7=()=>Hc,s7=()=>Xn;f3?Xn=Q9():(Xn={},e7());Fy=v3();const o7={day12:[{key:"potaufeu",label:"",icon:"",itemKeys:["potaufeu"]},{key:"friedBread",label:"",icon:"",itemKeys:["plain","cocoa","kinako","garlic"]}],day34:[{key:"potaufeu",label:"",icon:"",itemKeys:["minestrone"]},{key:"friedBread",label:"",icon:"",itemKeys:["strawberry","blueberry","chocolate","honey"]}]},zi=o7[X9],l7=new Map(zi.flatMap(n=>n.itemKeys.map(e=>[e,n.key])));function c7(n){return l7.get(n)??null}function u7(n){const e=zi.reduce((t,r)=>(t[r.key]=0,t),{potaufeu:0,friedBread:0});return zi.reduce((t,r)=>(t[r.key]=r.itemKeys.reduce((i,a)=>i+(n[a]??0),0),t),e)}function Lr(n,e){const t=u7(n);return{potaufeu:e?.potaufeu??t.potaufeu===0,friedBread:e?.friedBread??t.friedBread===0}}function Uy(n){return Lr(n,null)}function f7(n,e){const t=Lr(n,e);return{potaufeu:t.potaufeu?"ready":"pending",friedBread:t.friedBread?"ready":"pending"}}function y3(n,e){const t=zi.find(r=>r.key===e);return t?t.itemKeys.reduce((r,i)=>r+(n[i]??0),0):0}function d7(n,e){return zi.every(t=>t.itemKeys.reduce((i,a)=>i+(n[a]??0),0)===0?!0:e[t.key]==="ready")}function h7(n){const e=d=>d.toString().padStart(2,"0"),t=n.getFullYear(),r=e(n.getMonth()+1),i=e(n.getDate()),a=e(n.getHours()),o=e(n.getMinutes()),c=e(n.getSeconds()),u=Array.from({length:4},()=>String.fromCharCode(65+Math.floor(Math.random()*26))).join("");return`ORD-${t}${r}${i}${a}${o}${c}-${u}`}function p7(){const n="ABCDEFGHJKLMNPQRSTUVWXYZ23456789";return Array.from({length:16},()=>n.charAt(Math.floor(Math.random()*n.length))).join("")}function m7(n){return Object.entries(n).reduce((e,[t,r])=>{const i=Number.isFinite(r)?Math.max(0,Math.floor(r)):0;return i>0&&(e[t]=i),e},{})}function g7(n){const{map:e}=yo();return Object.entries(n).reduce((t,[r,i])=>{const o=e[r]?.price??0;return t+o*i},0)}function wi(n){return n?n.toDate():void 0}const v7=20;async function y7(n){await a3();const e=m7(n);if(!Object.values(e).some(A=>A>0))throw new Error("1");const r=new Date,i=h7(r),a=p7(),o=g7(e),c="",u="",d=Uy(e),m=Ui($n,"orders",i),g=Ui($n,"orderLookup",a),_=Ui($n,"metadata","counters"),w=await B9($n,async A=>{const C=((await A.get(_)).data()?.lastCallNumber??0)+1;A.set(_,{lastCallNumber:C,updatedAt:Ic()},{merge:!0});const k=Ic();return A.set(m,{orderId:i,ticket:a,callNumber:C,createdBy:Vi.currentUser?.uid??null,items:e,total:o,payment:c,progress:u,plating:d,createdAt:k,updatedAt:k}),A.set(g,{orderId:i,ticket:a,callNumber:C,items:e,total:o,payment:c,progress:u,plating:d,createdAt:k,updatedAt:k}),C});return{orderId:i,ticket:a,callNumber:w,total:o,items:e,payment:c,progress:u,plating:d,createdAt:r}}async function _7(n){const e=n.trim().toUpperCase();if(!e)return null;const t=Ui($n,"orderLookup",e),r=await By(t);if(!r.exists())return null;const i=r.data(),a=i.items??{},o=Lr(a,i.plating);return{orderId:i.orderId,ticket:e,callNumber:i.callNumber??0,total:i.total,items:a,payment:i.payment,progress:i.progress,plating:o,updatedAt:wi(i.updatedAt),createdAt:wi(i.createdAt)}}async function x7(n){const e=Ui($n,"orders",n),t=await By(e);if(!t.exists())return null;const r=t.data(),i=r.items??{};return{orderId:r.orderId,ticket:r.ticket,callNumber:r.callNumber??0,items:i,total:r.total,payment:r.payment,progress:r.progress,plating:Lr(i,r.plating),createdAt:wi(r.createdAt),updatedAt:wi(r.updatedAt),createdBy:r.createdBy??null}}async function w7(n,e,t){const r=n3($n),i=Ui($n,"orders",n),a=Ui($n,"orderLookup",e);r.update(i,{payment:t.payment,progress:t.progress,updatedAt:Ic()}),r.update(a,{payment:t.payment,progress:t.progress,updatedAt:Ic()}),await r.commit()}async function E7(n,e,t){const r=Object.entries(t).filter(([,u])=>typeof u=="boolean");if(r.length===0)return;const i=n3($n),a=Ui($n,"orders",n),o=Ui($n,"orderLookup",e),c={updatedAt:Ic()};r.forEach(([u,d])=>{c[`plating.${u}`]=d}),i.update(a,c),i.update(o,c),await i.commit()}async function A7(n={}){const{start:e,end:t}=n,r=lp($n,"orders"),i=[mp("createdAt","asc")];return e&&i.push(T0("createdAt",">=",Mt.fromDate(e))),t&&i.push(T0("createdAt","<",Mt.fromDate(t))),(await JT(hp(r,...i))).docs.map(o=>{const c=o.data(),u=c.items??{};return{orderId:c.orderId,ticket:c.ticket,callNumber:c.callNumber??0,items:u,total:c.total,payment:c.payment,progress:c.progress,plating:Lr(u,c.plating),createdAt:wi(c.createdAt),updatedAt:wi(c.updatedAt),createdBy:c.createdBy??null}})}function b7(n,e={}){const t=lp($n,"orders"),r=hp(t,mp("createdAt","desc"),WT(v7)),i=new Set;let a=!1;return vp(r,c=>{if(!a){c.docs.forEach(u=>i.add(u.id)),a=!0;return}c.docChanges().filter(u=>u.type==="added").forEach(u=>{const d=u.doc.id;if(i.has(d))return;i.add(d);const m=u.doc.data(),g=m.items??{};n({orderId:m.orderId,ticket:m.ticket,callNumber:m.callNumber??0,items:g,total:m.total,payment:m.payment,progress:m.progress,plating:Lr(g,m.plating),createdAt:wi(m.createdAt),updatedAt:wi(m.updatedAt),createdBy:m.createdBy??null})})},c=>{console.error("Failed to subscribe new orders",c),e.onError?.(c)})}function S7(n,e={}){const t=lp($n,"orders"),r=[mp("createdAt","desc")],i=e.start;i&&!Number.isNaN(i.getTime())&&r.push(T0("createdAt",">=",Mt.fromDate(i)));const a=e.end;a&&!Number.isNaN(a.getTime())&&r.push(T0("createdAt","<",Mt.fromDate(a)));const o=e.limit;typeof o=="number"&&Number.isFinite(o)&&o>0&&r.push(WT(Math.floor(o)));const c=hp(t,...r);return vp(c,d=>{const m=d.docs.map(g=>{const _=g.data(),w=_.items??{};return{orderId:_.orderId??g.id,ticket:_.ticket,callNumber:_.callNumber??0,items:w,total:_.total,payment:_.payment,progress:_.progress,plating:Lr(w,_.plating),createdAt:wi(_.createdAt),updatedAt:wi(_.updatedAt),createdBy:_.createdBy??null}});n(m)},d=>{console.error("Failed to subscribe orders collection",d),e.onError?.(d)})}function C7(n,e,t={}){const r=n.trim().toUpperCase();if(!r)return e(null),()=>{};const i=Ui($n,"orderLookup",r);return vp(i,o=>{if(!o.exists()){e(null);return}const c=o.data(),u=c.items??{};e({orderId:c.orderId??r,ticket:r,callNumber:c.callNumber??0,total:c.total,items:u,payment:c.payment,progress:c.progress,plating:Lr(u,c.plating),updatedAt:wi(c.updatedAt),createdAt:wi(c.createdAt)})},o=>{console.error("Failed to subscribe order lookup",o),t.onError?.(o)})}function T7(n){if(n===null||typeof n>"u")return"";const e=String(n);return e.includes(",")||e.includes('"')||e.includes(`
`)?`"${e.replace(/"/g,'""')}"`:e}async function I7(){const n=lp($n,"orders"),e=await JT(hp(n,mp("createdAt","asc"))),t=["orderId","callNumber","ticket","total","payment","progress","items","createdAt","updatedAt"],{map:r}=yo(),i=e.docs.map(d=>{const m=d.data(),g=m.items,_=Object.entries(g).map(([w,A])=>`${r[w]?.label??w}:${A}`).join(" | ");return[m.orderId,m.callNumber??"",m.ticket,m.total,m.payment,m.progress,_,m.createdAt?.toDate()?.toISOString()??"",m.updatedAt?.toDate()?.toISOString()??""].map(T7).join(",")}),a=[t.join(","),...i].join(`
`),o=new Blob([a],{type:"text/csv"}),c=URL.createObjectURL(o),u=document.createElement("a");u.href=c,u.download=`orders-${new Date().toISOString().slice(0,10)}.csv`,u.click(),URL.revokeObjectURL(c)}const _3="mock-orders-state-v1",ov=new Set,lv=new Set,Qo=new Map;function N7(n){ov.forEach(e=>{try{e({...n})}catch(t){console.error("",t)}})}function R7(){const n=Fi.orders.map(e=>x3(e));lv.forEach(e=>{try{e(n)}catch(t){console.error("",t)}})}function x3(n){return{...n,items:{...n.items},plating:Lr(n.items,n.plating),createdAt:n.createdAt?new Date(n.createdAt):void 0,updatedAt:n.updatedAt?new Date(n.updatedAt):void 0}}function w3(n){return{orderId:n.orderId,ticket:n.ticket,callNumber:n.callNumber??0,items:{...n.items},total:n.total,payment:n.payment,progress:n.progress,plating:Lr(n.items,n.plating),createdAt:n.createdAt,updatedAt:n.updatedAt}}function E3(n){const e=n.trim().toUpperCase();if(!e)return;const t=Qo.get(e);if(!t||t.size===0)return;const r=Hy(e),i=r?w3(r):null;t.forEach(a=>{try{a(i)}catch(o){console.error("",o)}})}function O7(){Array.from(Qo.keys()).forEach(n=>E3(n))}function D7(n){if(!n||typeof n!="object")return _f;const e=n,t=(e.orders??[]).map(i=>{const a=i.createdAt?new Date(i.createdAt):void 0,o=i.updatedAt?new Date(i.updatedAt):void 0;return{...i,createdAt:a,updatedAt:o}});if(t.length===0)return _f;const r=Number.isFinite(e.lastCallNumber)?Number(e.lastCallNumber):Math.max(0,...t.map(i=>i.callNumber??0));return{orders:t,lastCallNumber:r}}function M7(){if(typeof window>"u")return _f;try{const n=window.localStorage.getItem(_3);return n?D7(JSON.parse(n)):_f}catch(n){return console.warn("",n),_f}}function P7(n){if(!(typeof window>"u"))try{const e={orders:n.orders.map(t=>({...t,createdAt:t.createdAt?.toISOString()??null,updatedAt:t.updatedAt?.toISOString()??null})),lastCallNumber:n.lastCallNumber};window.localStorage.setItem(_3,JSON.stringify(e))}catch(e){console.warn("",e)}}function A3(n){return Object.entries(n).reduce((e,[t,r])=>{const i=Number.isFinite(r)?Math.max(0,Math.floor(r)):0;return i>0&&(e[t]=i),e},{})}function b3(n){const{map:e}=yo();return Object.entries(n).reduce((t,[r,i])=>{const o=e[r]?.price??0;return t+o*i},0)}function k7(n){const e=d=>d.toString().padStart(2,"0"),t=n.getFullYear(),r=e(n.getMonth()+1),i=e(n.getDate()),a=e(n.getHours()),o=e(n.getMinutes()),c=e(n.getSeconds()),u=Array.from({length:4},()=>String.fromCharCode(65+Math.floor(Math.random()*26))).join("");return`ORD-${t}${r}${i}${a}${o}${c}-${u}`}function j7(){const n="ABCDEFGHJKLMNPQRSTUVWXYZ23456789";return Array.from({length:16},()=>n.charAt(Math.floor(Math.random()*n.length))).join("")}const Gm=A3({plain:2,cocoa:1}),_f={orders:[{orderId:"ORD-20251009090000-DEMO",ticket:"MOCKTICKET123456",callNumber:1,items:Gm,total:b3(Gm),payment:"",progress:"",plating:Uy(Gm),createdAt:new Date,updatedAt:new Date,createdBy:"mock-user"}],lastCallNumber:1};let Fi=M7();function zy(n){const e={orders:Fi.orders.map(t=>({...t})),lastCallNumber:Fi.lastCallNumber};n(e),Fi=e,P7(Fi),R7(),O7()}function Hy(n){const e=n.trim().toUpperCase();return e?Fi.orders.find(t=>t.ticket===e)??null:null}async function L7(n){const e=A3(n);if(!Object.values(e).some(g=>g>0))throw new Error("1");const r=new Date,i=k7(r),a=j7(),o=b3(e),c="",u="",d=Fi.lastCallNumber+1,m={orderId:i,ticket:a,callNumber:d,items:e,total:o,payment:c,progress:u,plating:Uy(e),createdAt:r,updatedAt:r,createdBy:"mock-user"};return zy(g=>{g.orders.push(m),g.lastCallNumber=d}),N7(m),E3(m.ticket),{orderId:i,ticket:a,callNumber:d,total:o,items:e,payment:c,progress:u,plating:m.plating,createdAt:r}}async function B7(n){const e=Hy(n);return e?{orderId:e.orderId,ticket:e.ticket,callNumber:e.callNumber,items:e.items,total:e.total,payment:e.payment,progress:e.progress,plating:Lr(e.items,e.plating),updatedAt:e.updatedAt,createdAt:e.createdAt}:null}async function V7(n){const e=n.trim().toUpperCase();if(!e)return null;const t=Fi.orders.find(r=>r.orderId===e);return t?{...t}:null}async function F7(n,e,t){zy(r=>{r.orders=r.orders.map(i=>i.orderId!==n&&i.ticket!==e?i:{...i,payment:t.payment,progress:t.progress,updatedAt:new Date})})}async function U7(n,e,t){const r=Object.entries(t).filter(([,i])=>typeof i=="boolean");r.length!==0&&zy(i=>{i.orders=i.orders.map(a=>{if(a.orderId!==n&&a.ticket!==e)return a;const o=Lr(a.items,{...a.plating,...Object.fromEntries(r)});return{...a,plating:o,updatedAt:new Date}})})}async function z7(n={}){const{start:e,end:t}=n,r=e?.getTime(),i=t?.getTime();return Fi.orders.filter(a=>{const o=a.createdAt??a.updatedAt;if(!o)return!r&&!i;const c=o.getTime();return!(typeof r=="number"&&c<r||typeof i=="number"&&c>=i)}).sort((a,o)=>{const c=(a.createdAt??a.updatedAt??new Date(0)).getTime(),u=(o.createdAt??o.updatedAt??new Date(0)).getTime();return c-u}).map(a=>({...a}))}async function H7(){const n=["orderId","callNumber","ticket","total","payment","progress","items","createdAt","updatedAt"],{map:e}=yo(),t=Fi.orders.map(o=>{const c=Object.entries(o.items).map(([u,d])=>`${e[u]?.label??u}:${d}`).join(" | ");return[o.orderId,o.callNumber??"",o.ticket,o.total,o.payment,o.progress,c,o.createdAt?.toISOString()??"",o.updatedAt?.toISOString()??""].map(u=>{const d=String(u);return d.includes(",")||d.includes('"')||d.includes(`
`)?`"${d.replace(/"/g,'""')}"`:d}).join(",")}),r=new Blob([[n.join(","),...t].join(`
`)],{type:"text/csv"}),i=URL.createObjectURL(r),a=document.createElement("a");a.href=i,a.download=`orders-mock-${new Date().toISOString().slice(0,10)}.csv`,a.click(),URL.revokeObjectURL(i)}function G7(n){return ov.add(n),()=>{ov.delete(n)}}function q7(n,e={}){const t=e.start?.getTime(),r=e.end?.getTime(),i=e.limit&&Number.isFinite(e.limit)&&e.limit>0?Math.floor(e.limit):null,a=c=>{const d=c.filter(g=>{const _=g.createdAt??g.updatedAt;if(!_)return!(t!=null||r!=null);const w=_.getTime();return!(Number.isNaN(w)||t!=null&&w<t||r!=null&&w>=r)}).sort((g,_)=>{const w=g.createdAt?.getTime()??0;return(_.createdAt?.getTime()??0)-w});return(i?d.slice(0,i):d).map(g=>({...g,items:{...g.items},plating:Lr(g.items,g.plating),createdAt:g.createdAt?new Date(g.createdAt):void 0,updatedAt:g.updatedAt?new Date(g.updatedAt):void 0}))},o=c=>{try{n(a(c))}catch(u){console.error("",u)}};return lv.add(o),o(Fi.orders.map(c=>x3(c))),()=>{lv.delete(o)}}function $7(n,e){const t=n.trim().toUpperCase();if(!t)return e(null),()=>{};const r=Qo.get(t)??new Set;Qo.has(t)||Qo.set(t,r),r.add(e);const i=Hy(t);return e(i?w3(i):null),()=>{const a=Qo.get(t);a&&(a.delete(e),a.size===0&&Qo.delete(t))}}const X7=["AIzaSyAaAHxUEayt4oM_GKqv-Bl9ryEhQ0SdC2k","pfes2025-ichinikai-order.firebaseapp.com","pfes2025-ichinikai-order","pfes2025-ichinikai-order.firebasestorage.app","1047778685960","1:1047778685960:web:61b378c5e254840d914dbd"],Y7=X7.some(n=>!n||n==="undefined"),Na=Y7,K7=Na?L7:y7,W7=Na?B7:_7,Q7=Na?V7:x7,Z7=Na?F7:w7,J7=Na?U7:E7,eP=Na?H7:I7,tP=Na?z7:A7,nP=Na?G7:b7,rP=Na?q7:S7,iP=Na?$7:C7,aP=K7,EA=W7,AA=Q7,ya=Z7,qm=J7,S3=eP,sP=tP,oP=nP,lP=rP,cP=iP;function Gc(n={}){const[e,t]=P.useState([]),[r,i]=P.useState(!0),[a,o]=P.useState(null),{autoStopWhen:c,...u}=n,d=u.start?.getTime(),m=typeof d=="number"&&!Number.isNaN(d)?d:null,g=u.end?.getTime(),_=typeof g=="number"&&!Number.isNaN(g)?g:null,w=typeof u.limit=="number"&&Number.isFinite(u.limit)&&u.limit>0?Math.floor(u.limit):null;return P.useEffect(()=>{let A=!0,S=!1,D=null;const C=()=>{D&&(D(),D=null)};i(!0),o(null);const k={...m!=null&&u.start?{start:u.start}:{},..._!=null&&u.end?{end:u.end}:{},...w!=null?{limit:w}:{},onError:V=>{A&&(console.error("",V),o(V instanceof Error?V:new Error("")),i(!1))}};return D=lP(V=>{A&&(t(V),i(!1),!S&&c?.(V)&&(S=!0,A=!1,C()))},k),()=>{A=!1,C()}},[c,_,w,m]),{orders:e,loading:r,error:a}}function fl(){const n=P.useSyncExternalStore(t7,yo);return P.useMemo(()=>({menuItems:n.list,menuItemMap:n.map,baseMenuItemMap:a7(),overrides:s7(),updateMenuItem:n7,resetMenuItem:r7,resetAllMenuItems:i7}),[n])}const uP={soup:"",friedBread:"",smore:"",drink:""},fP=["soup","friedBread","smore","drink"],dP={potaufeu:"soup",minestrone:"soup",plain:"friedBread",cocoa:"friedBread",kinako:"friedBread",garlic:"friedBread",strawberry:"smore",blueberry:"smore",chocolate:"smore",honey:"smore",drink_hojicha:"drink",drink_cocoa:"drink",drink_coffee:"drink",drink_milkcoffee:"drink"},hP=[{value:"today",label:""},{value:"yesterday",label:""},{value:"7days",label:"7"},{value:"custom",label:""}],Rh=n=>{const e=n.getFullYear(),t=String(n.getMonth()+1).padStart(2,"0"),r=String(n.getDate()).padStart(2,"0");return`${e}-${t}-${r}`},pP=n=>{const e=new Date(n);return e.setHours(0,0,0,0),e},mP=n=>{const e=new Date(n);return e.setHours(23,59,59,999),e},gP=[" 24  CSV ","Google "," 10 "],$o=new Intl.NumberFormat("ja-JP",{style:"currency",currency:"JPY",maximumFractionDigits:0}),ma=new Intl.NumberFormat("ja-JP",{maximumFractionDigits:0});function bA({mode:n="default"}){const[e,t]=P.useState("today"),[r,i]=P.useState(()=>Rh(new Date)),[a,o]=P.useState(()=>Rh(new Date)),{menuItems:c}=fl(),{start:u,end:d}=P.useMemo(()=>{if(e==="custom"){const I=new Date(`${r}T00:00:00`),O=new Date(`${a}T00:00:00`);return{start:pP(I),end:mP(O)}}return vP(e)},[e,r,a]),m=P.useMemo(()=>({start:u,end:d,autoStopWhen:e==="today"?void 0:O=>O.length>0}),[d,u,e]),{orders:g,loading:_,error:w}=Gc(m),A=P.useMemo(()=>{const I=Array.from({length:24},(j,W)=>({hour:W,orderCount:0,revenue:0,cumulativeRevenue:0}));if(g.length===0)return I;g.map(j=>({order:j,timestamp:SA(j)})).filter(j=>j.timestamp!=null).sort((j,W)=>j.timestamp.getTime()-W.timestamp.getTime()).forEach(({order:j,timestamp:W})=>{if(j.payment==="")return;const ge=W.getHours();if(ge<0||ge>=I.length)return;const H=Number.isFinite(j.total)?j.total:0;I[ge].orderCount+=1,I[ge].revenue+=H});let L=0;return I.forEach(j=>{L+=j.revenue,j.cumulativeRevenue=L}),I},[g]),S=P.useMemo(()=>{if(g.length===0)return{totalOrders:0,paidOrders:0,totalRevenue:0,averageOrderValue:0};let I=0,O=0,L=0;g.forEach(W=>{if(W.payment==="")return;I+=1,W.payment===""&&(O+=1);const ge=Number.isFinite(W.total)?W.total:0;L+=ge});const j=I>0?L/I:0;return{totalOrders:I,paidOrders:O,totalRevenue:L,averageOrderValue:j}},[g]),D=P.useMemo(()=>A.reduce((I,O)=>Math.max(I,O.revenue),0),[A]),C=P.useMemo(()=>c.map(I=>{const O=sf(I.key,I.label),L=Array.from({length:24},()=>({count:0,revenue:0}));let j=0,W=0;g.forEach(G=>{if(G.payment==="")return;const le=SA(G);if(!le)return;const ve=G.items[I.key]??0;if(ve<=0)return;const He=le.getHours();if(He<0||He>=L.length)return;const Y=ve*I.price;L[He].count+=ve,L[He].revenue+=Y,j+=ve,W+=Y});const ge=L.reduce((G,le,ve)=>le.count>G.count?{count:le.count,hour:ve}:G,{count:0,hour:-1}),H=L.map((G,le)=>({hour:le,count:G.count,revenue:G.revenue})).filter(G=>G.count>0);return{key:I.key,label:O,totalCount:j,totalRevenue:W,peakHour:ge.count>0?ge.hour:null,hourlyBreakdown:H}}),[g,c]),k=P.useMemo(()=>C.filter(I=>I.totalCount>0),[C]),V=P.useMemo(()=>new Map(c.map(I=>[I.key,I])),[c]),z=P.useMemo(()=>Array.from({length:24},(I,O)=>{const L=c.map(({key:W})=>{const H=C.find(G=>G.key===W)?.hourlyBreakdown.find(G=>G.hour===O);return{key:W,count:H?.count??0}}),j=L.reduce((W,ge)=>W+ge.count,0);return{hour:O,total:j,segments:L}}),[c,C]),q=P.useMemo(()=>z.filter(I=>I.total>0),[z]),$=P.useMemo(()=>new Map(z.map(I=>[I.hour,I])),[z]),M=P.useMemo(()=>z.reduce((I,O)=>Math.max(I,O.total),0),[z]),b=g.length>0,R=P.useMemo(()=>yP(u,d),[u,d]);return n==="export"?p.jsxs("div",{className:"admin-grid",style:{gap:"28px"},children:[p.jsxs("section",{className:"admin-card",children:[p.jsx("h3",{children:""}),p.jsx("p",{children:" CSV "}),p.jsxs("div",{className:"admin-toolbar",children:[p.jsxs("div",{className:"field",children:[p.jsx("label",{htmlFor:"export-range",children:""}),p.jsxs("select",{id:"export-range",defaultValue:"today",children:[p.jsx("option",{value:"today",children:""}),p.jsx("option",{value:"yesterday",children:""}),p.jsx("option",{value:"week",children:" 7 "}),p.jsx("option",{value:"custom",children:""})]})]}),p.jsxs("div",{className:"field",children:[p.jsx("label",{htmlFor:"export-status",children:""}),p.jsxs("select",{id:"export-status",defaultValue:"all",children:[p.jsx("option",{value:"all",children:""}),p.jsx("option",{value:"open",children:""}),p.jsx("option",{value:"ready",children:""}),p.jsx("option",{value:"closed",children:""})]})]})]}),p.jsx("button",{type:"button",className:"admin-primary-button",style:{width:"fit-content"},children:""})]}),p.jsxs("section",{className:"admin-card",children:[p.jsx("h3",{children:""}),p.jsx("ul",{className:"admin-list",children:gP.map(I=>p.jsx("li",{children:I},I))})]})]}):p.jsxs("div",{className:"admin-grid",style:{gap:"28px"},children:[p.jsxs("section",{className:"admin-card admin-dashboard-controls",children:[p.jsxs("div",{children:[p.jsx("p",{className:"admin-content-overline",children:""}),p.jsx("h3",{children:R})]}),p.jsxs("div",{className:"admin-toolbar",style:{marginBottom:0},children:[p.jsxs("div",{className:"field",children:[p.jsx("label",{htmlFor:"dashboard-range",children:""}),p.jsx("select",{id:"dashboard-range",value:e,onChange:I=>t(I.target.value),children:hP.map(I=>p.jsx("option",{value:I.value,children:I.label},I.value))})]}),e==="custom"&&p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"field",children:[p.jsx("label",{htmlFor:"dashboard-start-date",children:""}),p.jsx("input",{id:"dashboard-start-date",type:"date",value:r,onChange:I=>i(I.target.value),max:Rh(new Date)})]}),p.jsxs("div",{className:"field",children:[p.jsx("label",{htmlFor:"dashboard-end-date",children:""}),p.jsx("input",{id:"dashboard-end-date",type:"date",value:a,onChange:I=>o(I.target.value),min:r,max:Rh(new Date)})]})]})]})]}),_?p.jsx("section",{className:"admin-card admin-empty-state",children:p.jsx("p",{children:""})}):w?p.jsxs("section",{className:"admin-card admin-empty-state",children:[p.jsx("p",{children:""}),p.jsx("small",{children:w.message})]}):p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"admin-grid admin-metric-cards",children:[p.jsxs("article",{className:"admin-card admin-metric-card",children:[p.jsx("p",{className:"admin-content-overline",children:""}),p.jsx("h3",{className:"admin-metric-card-value",children:$o.format(S.totalRevenue)}),p.jsx("p",{className:"admin-metric-card-helper",children:""})]}),p.jsxs("article",{className:"admin-card admin-metric-card",children:[p.jsx("p",{className:"admin-content-overline",children:""}),p.jsxs("h3",{className:"admin-metric-card-value",children:[ma.format(S.totalOrders)," "]}),p.jsxs("p",{className:"admin-metric-card-helper",children:[" ",ma.format(S.paidOrders)," "]})]}),p.jsxs("article",{className:"admin-card admin-metric-card",children:[p.jsx("p",{className:"admin-content-overline",children:""}),p.jsx("h3",{className:"admin-metric-card-value",children:$o.format(S.averageOrderValue||0)}),p.jsx("p",{className:"admin-metric-card-helper",children:""})]})]}),b&&p.jsxs("section",{className:"admin-card admin-product-total-card",children:[p.jsx("header",{className:"admin-card-header",children:p.jsxs("div",{children:[p.jsx("h3",{children:""}),p.jsx("p",{children:""})]})}),k.length>0?p.jsx("div",{className:"admin-product-total-grid",children:k.map(I=>p.jsxs("article",{className:`admin-product-total-item menu-item-${I.key}`,children:[p.jsx("span",{className:"admin-product-total-label",children:I.label}),p.jsxs("span",{className:"admin-product-total-count",children:[ma.format(I.totalCount)," "]}),p.jsx("span",{className:"admin-product-total-revenue",children:$o.format(I.totalRevenue)})]},I.key))}):p.jsx("p",{className:"admin-empty-inline",children:""})]}),p.jsxs("section",{className:"admin-card",children:[p.jsx("header",{className:"admin-card-header",children:p.jsxs("div",{children:[p.jsx("h3",{children:""}),p.jsx("p",{children:" 1 "})]})}),b?p.jsxs("table",{className:"admin-table admin-hourly-table",children:[p.jsx("thead",{children:p.jsxs("tr",{children:[p.jsx("th",{scope:"col",children:""}),p.jsx("th",{scope:"col",children:""}),p.jsx("th",{scope:"col",children:""}),p.jsx("th",{scope:"col",children:""})]})}),p.jsx("tbody",{children:A.map(I=>{const L=$.get(I.hour)?.segments??[],j={soup:0,friedBread:0,smore:0,drink:0};return L.forEach(W=>{if(!W||W.count===0)return;const ge=dP[W.key];j[ge]+=W.count}),p.jsxs("tr",{children:[p.jsx("td",{children:Dh(I.hour)}),p.jsx("td",{children:p.jsxs("div",{className:"admin-hourly-volume",children:[p.jsxs("span",{className:"admin-hourly-volume-count",children:[ma.format(I.orderCount)," "]}),p.jsx("div",{className:"admin-hourly-volume-bar","aria-hidden":I.orderCount===0,children:L.map(W=>{if(!W||W.count===0)return null;const ge=M>0?W.count/M*100:0;if(ge<=0)return null;const H=ge<4?"6px":void 0,G=ge<8,le=V.get(W.key);return p.jsx("span",{className:`admin-product-sales-segment menu-item-${W.key}`,style:{width:`${ge}%`,flexBasis:`${ge}%`,minWidth:H},"data-compact":G?"true":void 0,title:`${sf(W.key,le?.label??W.key)}: ${ma.format(W.count)}`,children:p.jsx("span",{className:"admin-product-sales-count",children:W.count})},W.key)})}),p.jsx("div",{className:"admin-hourly-volume-category","aria-hidden":I.orderCount===0,children:fP.map(W=>{const ge=j[W];return p.jsxs("span",{"data-muted":ge===0?"true":void 0,children:[uP[W]," ",ma.format(ge)," "]},W)})})]})}),p.jsxs("td",{children:[$o.format(I.revenue),p.jsx("div",{className:"admin-trend-bar revenue",children:p.jsx("span",{style:{width:`${D>0?I.revenue/D*100:0}%`}})})]}),p.jsx("td",{children:$o.format(I.cumulativeRevenue)})]},I.hour)})})]}):p.jsx("p",{className:"admin-empty-inline",children:""})]}),p.jsxs("section",{className:"admin-card",children:[p.jsx("header",{className:"admin-card-header",children:p.jsxs("div",{children:[p.jsx("h3",{children:""}),p.jsx("p",{children:""})]})}),b?p.jsxs(p.Fragment,{children:[p.jsxs("table",{className:"admin-table admin-product-table",children:[p.jsx("thead",{children:p.jsxs("tr",{children:[p.jsx("th",{scope:"col",children:""}),p.jsx("th",{scope:"col",children:""}),p.jsx("th",{scope:"col",children:""}),p.jsx("th",{scope:"col",children:""})]})}),p.jsx("tbody",{children:C.map(I=>p.jsxs("tr",{className:`menu-item-${I.key}`,children:[p.jsx("td",{className:"admin-product-name",children:I.label}),p.jsxs("td",{children:[ma.format(I.totalCount)," "]}),p.jsx("td",{children:$o.format(I.totalRevenue)}),p.jsx("td",{children:I.peakHour!=null?Dh(I.peakHour):""})]},I.key))})]}),q.length>0&&p.jsxs("div",{className:"admin-product-sales-chart",role:"img","aria-label":"",children:[p.jsxs("div",{className:"admin-product-sales-header",children:[p.jsx("h4",{children:" "}),p.jsx("div",{className:"admin-product-sales-legend","aria-hidden":"true",children:c.map(I=>p.jsxs("span",{className:`admin-product-sales-legend-item menu-item-${I.key}`,children:[p.jsx("span",{className:"admin-product-sales-legend-swatch"}),sf(I.key,I.label)]},I.key))})]}),p.jsx("div",{className:"admin-product-sales-rows",children:q.map(I=>p.jsxs("div",{className:"admin-product-sales-row",children:[p.jsx("div",{className:"admin-product-sales-hour",children:Dh(I.hour)}),p.jsx("div",{className:"admin-product-sales-bar","aria-hidden":I.total===0,children:I.segments.map(O=>{if(O.count===0)return null;const L=O.count/I.total*100,j=L<6?"6px":void 0,W=V.get(O.key);return p.jsx("span",{className:`admin-product-sales-segment menu-item-${O.key}`,style:{width:`${L}%`,flexBasis:`${L}%`,minWidth:j},title:`${sf(O.key,W?.label??O.key)}: ${ma.format(O.count)}`,children:p.jsx("span",{className:"admin-product-sales-count",children:O.count})},O.key)})}),p.jsxs("div",{className:"admin-product-sales-total",children:[ma.format(I.total)," "]})]},I.hour))})]}),p.jsx("div",{className:"admin-product-breakdown",children:C.every(I=>I.hourlyBreakdown.length===0)?p.jsx("p",{className:"admin-empty-inline",children:""}):C.filter(I=>I.hourlyBreakdown.length>0).map(I=>p.jsxs("details",{className:`admin-product-breakdown-item menu-item-${I.key}`,children:[p.jsxs("summary",{children:[I.label," "]}),p.jsxs("table",{children:[p.jsx("thead",{children:p.jsxs("tr",{children:[p.jsx("th",{scope:"col",children:""}),p.jsx("th",{scope:"col",children:""}),p.jsx("th",{scope:"col",children:""})]})}),p.jsx("tbody",{children:I.hourlyBreakdown.map(O=>p.jsxs("tr",{children:[p.jsx("td",{children:Dh(O.hour)}),p.jsxs("td",{children:[ma.format(O.count)," "]}),p.jsx("td",{children:$o.format(O.revenue)})]},`${I.key}-${O.hour}`))})]})]},I.key))})]}):p.jsx("p",{className:"admin-empty-inline",children:""})]})]})]})}function vP(n){const e=new Date,t=new Date(e.getFullYear(),e.getMonth(),e.getDate());return n==="today"?{start:t,end:Oh(t,1)}:n==="yesterday"?{start:Oh(t,-1),end:t}:{start:Oh(t,-6),end:Oh(t,1)}}function Oh(n,e){const t=new Date(n);return t.setDate(t.getDate()+e),t}function SA(n){const e=n.createdAt,t=n.updatedAt;return e instanceof Date?e:typeof e=="string"?new Date(e):t instanceof Date?t:typeof t=="string"?new Date(t):null}function Dh(n){const e=`${n.toString().padStart(2,"0")}:00`,t=n===23?"23:59":`${(n+1).toString().padStart(2,"0")}:00`;return`${e} - ${t}`}function yP(n,e){const t=new Intl.DateTimeFormat("ja-JP",{month:"numeric",day:"numeric",hour:"2-digit",minute:"2-digit"}),r=t.format(n),i=new Date(e.getTime()-1),a=t.format(i);return`${r}  ${a}`}const C3=P.createContext(void 0);function _P({children:n}){const[e,t]=P.useState(()=>typeof window>"u"?"ja":window.localStorage.getItem("app.language")==="en"?"en":"ja"),r=P.useCallback(o=>{t(o),typeof window<"u"&&window.localStorage.setItem("app.language",o)},[]),i=P.useCallback(()=>{r(e==="ja"?"en":"ja")},[e,r]),a=P.useMemo(()=>({language:e,setLanguage:r,toggleLanguage:i}),[e,r,i]);return p.jsx(C3.Provider,{value:a,children:n})}function Yi(){const n=P.useContext(C3);if(!n)throw new Error("useLanguage must be used within a LanguageProvider");return n}const T3={potaufeu:{label:"Pot-au-feu",description:"Packed with fresh ginger to warm you from the inside out. Take a sip and let this hearty soup comfort you."},plain:{label:"Fried Bread (Plain)",description:"The timeless classic. Get ready to fall into the world of fried breadsimple, irresistible, and unforgettable."},cocoa:{label:"Fried Bread (Cocoa)",description:"Fried bread meets cocoatheres no way this could go wrong. One bite and youll be hooked."},kinako:{label:"Fried Bread (Kinako)",description:"A nostalgic taste straight from Japanese school lunches. The beloved kinako fried bread is back."},garlic:{label:"Fried Bread (Garlic)",description:"Who said fried bread has to be sweet? This savory twist will change the way you think about it."},drink_hojicha:{label:"Roasted Green Tea (Hot)",description:"Fragrant hojicha to warm you up."},drink_cocoa:{label:"Hot Cocoa",description:"Sweet and velvety cocoa."},drink_coffee:{label:"Hot Coffee",description:"Aromatic freshly brewed coffee."},drink_milkcoffee:{label:"Iced Coffee Milk",description:"Creamy coffee with plenty of milk, served cold."},minestrone:{label:"Minestrone",description:"A hearty Italian classic, brimming with vegetables and warmth. Enjoy the full goodness of tomatoesnatures own beauty elixir."},strawberry:{label:"S'more (Strawberry Jam)",description:"Love probably tastes like thissweet, slightly tart, and a little bit nostalgic."},blueberry:{label:"S'more (Blueberry Jam)",description:"A refreshing mix of sweetness and tanginess to wake you upperfect for beating that post-lunch slump."},chocolate:{label:"S'more (Chocolate)",description:"When in doubt, go with chocolate. In life and in smores, chocolate never fails."},honey:{label:"S'more (Honey)",description:"A sweet little rescue for your tired self. Even the bees would be jealous."}},xP={ja:{wheat:"",egg:"",soy:"",milk:"",beef:"",chicken:"",pork:"",gelatin:""},en:{wheat:"Wheat",egg:"Egg",soy:"Soy",milk:"Milk",beef:"Beef",chicken:"Chicken",pork:"Pork",gelatin:"Gelatin"}},wP={ja:{:"",:"",:""},en:{:"Unpaid",:"Paid",:"Cancelled"}},EP={ja:{:"",:`
OK`,:""},en:{:"order confirmed",:"Ready for pickup",:"Picked up"}},cv={ja:{received:"",ready:`
OK`,completed:""},en:{received:"order confirmed",ready:"Ready for pickup",completed:"Picked up"}},ss={ja:{languageToggle:{label:"",japanese:"",english:"English",buttonText:" / English",buttonAria:n=>`${n==="ja"?"":"English"}`},header:{orderAction:"",orderActionAria:"",characterAlt:"",titleAlt:""},auth:{signingIn:"",error:""},errors:{EMPTY_CART:"1",ORDER_FAILED:""},orderInput:{title:"",descriptionLead:"",descriptionFollow:`
 
 `,totalLabel:"",totalNote:"",reviewButton:"",resetButton:"",categories:{food:"",drink:""}},quantityStepper:{decrease:"1",increase:"1"},menu:{imageAlt:n=>`${n}`,imageNote:"",allergensLabel:n=>`${n}`,quantityLabel:n=>`${n}`,soldOutBadge:"",soldOutMessage:""},orderReview:{title:"",descriptionLead:"",descriptionFollow:"",tableHeaders:{item:"",quantity:"",subtotal:""},totalLabel:"",confirmButton:"",changeButton:"",confirming:"",urlCopyModal:{title:"",description:"URL",copyButton:"URL"}},wasteGuide:{title:"",description:"",placeholder:"",confirm:""},orderComplete:{title:"",description:{default:"QR",progressOnly:"QR"},readyTitle:"",readyPreviewTag:"",readyInstructionWithCallNumber:n=>` ${n} `,readyInstructionWait:"",statusHeading:"",metaHeading:"",meta:{total:"",payment:"",progress:"",orderedAt:""},qrAlt:"QR",qrCaption:"QR",identifiers:{orderId:"",ticket:""},itemsHeading:"",itemsTable:{item:"",quantity:"",price:"",subtotal:"",total:""},actions:{copyLink:"",copyCode:"",startNew:""},ticketSearch:{regionLabel:"",title:"",description:"",label:"",placeholder:": AB12CD34EF56GH78",button:"",error:""},loadingTitle:"",loadingDescription:"",loadErrorTitle:"",loadErrorDescription:"",loadErrorAction:"",inviteTitle:"",inviteDescription:"",paymentState:{complete:"",paid:"",ready:"",unpaid:""},thankYouTitle:"",thankYouMessage:"",thankYouImageAlt:"Thank you ",thankYouCloseButton:"",progressSteps:cv.ja,refresh:{refreshing:"",cooldown:n=>` ${n} `,action:"",error:""},callNumberLabel:"",callNumberPending:""},orderProgress:{title:"",description:""},status:{title:"",descriptionLead:"",descriptionFollow:"",historyTitle:"",historyClear:"",historyDescription:"",historyCallNumberLabel:"",historyOrderIdLabel:"",historyTotalLabel:"",historyPendingCallNumber:" / ",historyClearConfirm:""},ticketNotFound:{title:"",descriptionKnown:n=>`${n}`,descriptionUnknown:"",retry:"",newOrder:""},notFound:{title:"",description:"URL"},copy:{progressCodeSuccess:"",progressCodeFailure:"",progressLinkSuccess:"",progressLinkFailure:""}},en:{languageToggle:{label:"Language",japanese:"",english:"English",buttonText:" / English",buttonAria:n=>`Change language to ${n==="ja"?"Japanese":"English"}`},header:{orderAction:"Order now",orderActionAria:"Order actions",characterAlt:"Character illustration",titleAlt:"Header title illustration"},auth:{signingIn:"Signing in anonymously...",error:"Anonymous sign-in failed. Please try again later."},errors:{EMPTY_CART:"Please add at least one item to your order.",ORDER_FAILED:"We could not process your order. Please check your connection and try again."},orderInput:{title:"Place your order",descriptionLead:"[Allergy Information]",descriptionFollow:"We display major allergy information for the food provided at this booth. However, there is a possibility of shared or mixed cooking environments with food provided at other booths within the school festival. Therefore, we cannot guarantee that the food is completely free of allergens. If you have severe allergies, please consult with our staff in advance.",totalLabel:"Total",totalNote:"Tax included. Please pay at pickup.",reviewButton:"Review order",resetButton:"Reset selections",categories:{food:"Food",drink:"Drink"}},quantityStepper:{decrease:"Decrease quantity by 1",increase:"Increase quantity by 1"},menu:{imageAlt:n=>`Image of ${n}`,imageNote:"Product image for illustration purposes only. Actual product may vary.",allergensLabel:n=>`Allergen information for ${n}`,quantityLabel:n=>`Quantity for ${n}`,soldOutBadge:"Sold out",soldOutMessage:"Currently unavailable."},orderReview:{title:"Review your order",descriptionLead:"Check the quantities and total. When ready, place your order.",descriptionFollow:"Need changes? Go back to adjust the items.",tableHeaders:{item:"Item",quantity:"Qty",subtotal:"Subtotal"},totalLabel:"Total",confirmButton:"Place order",changeButton:"Modify quantities",confirming:"Submitting...",urlCopyModal:{title:"Order confirmed",description:"Please copy the progress check URL",copyButton:"Copy URL and close"}},wasteGuide:{title:"Waste sorting reminder",description:"Replace this placeholder with the final sorting rules and drop-off locations when they are ready.",placeholder:"Place the waste sorting guide image here.",confirm:"I have read the sorting rules"},orderComplete:{title:"Order confirmed!",description:{default:"Show the call number and QR code at pickup. Keep this screen until you receive your order.",progressOnly:"Show the call number or the QR code at pickup. Keep this screen handy until completion."},readyTitle:"Your order is ready",readyPreviewTag:"Preview (remove later)",readyInstructionWithCallNumber:n=>`Please check call number ${n} and follow staff instructions to receive your order.`,readyInstructionWait:"Please wait nearby until staff call your number.",statusHeading:"Current status",metaHeading:"Order details",meta:{total:"Total",payment:"Payment",progress:"Status",orderedAt:"Order time"},qrAlt:"QR code for progress tracking",qrCaption:"Scan this code to open the progress page. Show it at the register or when staff ask.",identifiers:{orderId:"Order ID",ticket:"Progress code"},itemsHeading:"Items",itemsTable:{item:"Item",quantity:"Qty",price:"Unit price",subtotal:"Subtotal",total:"Total"},actions:{copyLink:"Copy progress link",copyCode:"Copy progress code",startNew:"Start a new order"},ticketSearch:{regionLabel:"Search by progress code",title:"Show by progress code",description:"Enter the customer progress code to view the status here.",label:"Progress code",placeholder:"e.g., AB12CD34EF56GH78",button:"Show status",error:"Enter a progress code."},loadingTitle:"Loading your order...",loadingDescription:"Please wait a moment.",loadErrorTitle:"We could not load the order",loadErrorDescription:"We could not retrieve your order. Please try again later.",loadErrorAction:"Enter the code again",inviteTitle:"Enter a progress code",inviteDescription:"Enter the progress code to check the latest status.",paymentState:{complete:"Picked up",paid:"Paid",ready:"Awaiting pickup",unpaid:"Unpaid"},thankYouTitle:"Thank you so much!",thankYouMessage:"Your pickup is complete. Enjoy the rest of your time at the event!",thankYouImageAlt:"Decorative thank-you banner",thankYouCloseButton:"Close",progressSteps:cv.en,refresh:{refreshing:"Refreshing...",cooldown:n=>`Try again in ${n} sec`,action:"Refresh status",error:"Failed to refresh the order. Please try again."},callNumberLabel:"Call number",callNumberPending:"Pending"},orderProgress:{title:"Tracking your order",description:"Check the current status and pickup steps for the code you entered."},status:{title:"How to check your order status",descriptionLead:"We only share the call number with customers. Please keep the number shown on the completion screen until staff call you.",descriptionFollow:"Our staff track progress internally. If the situation changes, we will inform you at the booth.",historyTitle:"Order history on this device",historyClear:"Clear history",historyDescription:"Recent confirmed orders from this device appear here. Keeping the call number and order ID handy speeds up pickup.",historyCallNumberLabel:"Call number",historyOrderIdLabel:"Order ID",historyTotalLabel:"Total",historyPendingCallNumber:"Pending / Not assigned",historyClearConfirm:"Remove all saved orders from this device?"},ticketNotFound:{title:"Order not found",descriptionKnown:n=>`We could not find an order for progress code "${n}". Please check the code and try again.`,descriptionUnknown:"We could not confirm an order for the provided progress code. Please check the code and try again.",retry:"Re-enter progress code",newOrder:"Start a new order"},notFound:{title:"Page not found",description:"Please check the URL and use the navigation links."},copy:{progressCodeSuccess:"Progress code copied to clipboard.",progressCodeFailure:"Copy failed. Please note it manually.",progressLinkSuccess:"Progress link copied to clipboard.",progressLinkFailure:"Copy failed. Please note it manually."}}};function Gy(n,e){return e==="en"?T3[n.key]?.label??n.label:n.label}function AP(n,e){return e==="en"?T3[n.key]?.description??n.description:n.description}function bP(n,e){return xP[e][n]}function Nc(n,e){return wP[e][n]}function SP(n,e){return EP[e][n]}function CP(n,e){return cv[e][n]}const TP=new Intl.DateTimeFormat("ja-JP",{hour:"2-digit",minute:"2-digit"}),CA=["","",""];function IP(n){const{map:e}=yo();return Object.entries(n).filter(([,r])=>r>0).map(([r,i])=>`${e[r]?.label??r}${i}`).join("")||""}function NP(n){return n?TP.format(n):"--:--"}function _p(n){const e=n.createdAt??n.updatedAt??null,t=n.updatedAt??null;return{id:n.orderId,callNumber:n.callNumber??0,ticket:n.ticket,items:IP(n.items??{}),total:n.total,payment:n.payment,progress:n.progress,createdAt:NP(e),createdAtDate:e,updatedAtDate:t,confirmationCode:ki(n.orderId),raw:n,platingStatus:f7(n.items??{},n.plating)}}function ki(n){if(!n)return"----";const e=(n.match(/[A-Za-z]/g)??[]).map(r=>r.toUpperCase());return e.length===0?"----":e.length>=4?e.slice(-4).join(""):e.join("").repeat(Math.ceil(4/e.length)).slice(-4)}function N0(n){return n===""?"":n===""?"":null}function R0(n){return n===""?"":n===""?"":null}const Mh=n=>{const e=n.getFullYear(),t=String(n.getMonth()+1).padStart(2,"0"),r=String(n.getDate()).padStart(2,"0");return`${e}-${t}-${r}`},RP=n=>{const e=new Date(n);return e.setHours(0,0,0,0),e},OP=n=>{const e=new Date(n);return e.setHours(23,59,59,999),e};function DP(){const[n,e]=P.useState("all"),[t,r]=P.useState(()=>Mh(new Date)),[i,a]=P.useState(()=>Mh(new Date)),o=P.useMemo(()=>{if(n==="all")return{};const G=new Date(`${t}T00:00:00`),le=new Date(`${i}T00:00:00`);return{start:RP(G),end:OP(le),autoStopWhen:()=>!0}},[n,t,i]),{orders:c,loading:u,error:d}=Gc(o),m=P.useMemo(()=>c.map(_p),[c]),{language:g}=Yi(),[_,w]=P.useState(""),[A,S]=P.useState(""),[D,C]=P.useState(""),[k,V]=P.useState("createdAt"),[z,q]=P.useState("desc"),[$,M]=P.useState(null),[b,R]=P.useState(null),I=P.useMemo(()=>{const G=D.trim().toLowerCase(),le=new Map(CA.map((ne,me)=>[ne,me])),ve=new Map([["",0],["",1],["",2]]),He=new Intl.Collator("ja",{numeric:!0,sensitivity:"base"});return m.filter(ne=>_===""?!0:ne.progress===_).filter(ne=>A===""?!0:ne.payment===A).filter(ne=>G?`${ne.id} ${ne.ticket} ${ne.callNumber} ${ne.items}`.toLowerCase().includes(G):!0).sort((ne,me)=>{const we=(Te,Ye)=>Te-Ye,be=(Te,Ye)=>He.compare(Te,Ye);let ye=0;switch(k){case"createdAt":{const Te=ne.createdAtDate?.getTime()??0,Ye=me.createdAtDate?.getTime()??0;ye=we(Te,Ye);break}case"id":ye=be(ne.id,me.id);break;case"callNumber":ye=we(ne.callNumber??0,me.callNumber??0);break;case"ticket":ye=be(ne.ticket,me.ticket);break;case"items":ye=be(ne.items,me.items);break;case"total":ye=we(ne.total,me.total);break;case"payment":ye=we(ve.get(ne.payment)??0,ve.get(me.payment)??0);break;case"progress":ye=we(le.get(ne.progress)??0,le.get(me.progress)??0);break;default:ye=0}if(ye===0){const Te=ne.createdAtDate?.getTime()??0,Ye=me.createdAtDate?.getTime()??0;ye=we(Te,Ye)}return z==="asc"?ye:-ye})},[D,A,_,m,z,k]),O=[{key:"createdAt",label:""},{key:"id",label:""},{key:"callNumber",label:""},{key:"ticket",label:""},{key:"items",label:""},{key:"total",label:""},{key:"payment",label:""},{key:"progress",label:""}],L=G=>{q(le=>k===G?le==="asc"?"desc":"asc":"desc"),V(G)},j=(G,le)=>{const ve=k===le,He=ve?z==="asc"?"":"":"",Y=ve?z==="asc"?"ascending":"descending":"none",ne=ve?z==="asc"?"":"":"";return p.jsx("th",{scope:"col","aria-sort":Y,className:`admin-sortable${ve?" is-active":""}`,children:p.jsxs("button",{type:"button",className:`admin-sort-button${ve?" is-active":""}`,onClick:()=>L(le),children:[p.jsx("span",{className:"admin-sort-label",children:G}),p.jsx("span",{"aria-hidden":"true",className:`admin-sort-indicator${ve?` is-${z}`:""}`,children:He}),p.jsx("span",{className:"sr-only",children:ne})]})},le)},W=P.useCallback(async G=>{const le=N0(G.progress);if(le){M(G.id),R(null);try{await ya(G.id,G.ticket,{payment:G.payment,progress:le})}catch(ve){console.error("",ve),R("")}finally{M(null)}}},[]),ge=P.useCallback(async G=>{const le=R0(G.progress);if(le){M(G.id),R(null);try{await ya(G.id,G.ticket,{payment:G.payment,progress:le})}catch(ve){console.error("",ve),R("")}finally{M(null)}}},[]),H=P.useCallback(async()=>{R(null);try{await S3()}catch(G){console.error("CSV ",G),R("CSV ")}},[]);return u?p.jsx("p",{children:""}):p.jsxs("div",{children:[p.jsxs("div",{className:"admin-toolbar",role:"region","aria-label":"",children:[p.jsxs("div",{className:"field",children:[p.jsx("label",{htmlFor:"order-date-range-mode",children:""}),p.jsxs("select",{id:"order-date-range-mode",value:n,onChange:G=>e(G.target.value),children:[p.jsx("option",{value:"all",children:""}),p.jsx("option",{value:"custom",children:""})]})]}),n==="custom"&&p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"field",children:[p.jsx("label",{htmlFor:"order-start-date",children:""}),p.jsx("input",{id:"order-start-date",type:"date",value:t,onChange:G=>r(G.target.value),max:Mh(new Date)})]}),p.jsxs("div",{className:"field",children:[p.jsx("label",{htmlFor:"order-end-date",children:""}),p.jsx("input",{id:"order-end-date",type:"date",value:i,onChange:G=>a(G.target.value),min:t,max:Mh(new Date)})]})]}),p.jsxs("div",{className:"field",children:[p.jsx("label",{htmlFor:"order-progress",children:""}),p.jsxs("select",{id:"order-progress",value:_,onChange:G=>w(G.target.value),children:[p.jsx("option",{value:"",children:""}),CA.map(G=>p.jsx("option",{value:G,children:G},G))]})]}),p.jsxs("div",{className:"field",children:[p.jsx("label",{htmlFor:"order-payment",children:""}),p.jsxs("select",{id:"order-payment",value:A,onChange:G=>S(G.target.value),children:[p.jsx("option",{value:"",children:""}),Y9.map(G=>p.jsx("option",{value:G,children:Nc(G,g)},G))]})]}),p.jsxs("div",{className:"field",style:{flex:"1 1 240px"},children:[p.jsx("label",{htmlFor:"order-search",children:""}),p.jsx("input",{id:"order-search",type:"search",placeholder:"",value:D,onChange:G=>C(G.target.value)})]}),p.jsx("button",{type:"button",className:"admin-secondary-button",disabled:I.length===0,onClick:()=>{const G=I[0];G&&W(G).catch(()=>{})},children:""}),p.jsx("button",{type:"button",className:"admin-primary-button",onClick:()=>void H(),disabled:m.length===0,children:"CSV "})]}),d&&p.jsx("p",{className:"admin-error",role:"alert",children:""}),b&&p.jsx("p",{className:"admin-error",role:"alert",children:b}),p.jsx("div",{style:{overflowX:"auto"},children:p.jsxs("table",{className:"admin-table",children:[p.jsx("thead",{children:p.jsxs("tr",{children:[O.map(({label:G,key:le})=>j(G,le)),p.jsx("th",{scope:"col",children:""})]})}),p.jsx("tbody",{children:I.map(G=>p.jsxs("tr",{children:[p.jsx("td",{children:G.createdAt}),p.jsx("td",{children:G.id}),p.jsx("td",{children:G.callNumber}),p.jsx("td",{children:G.ticket}),p.jsx("td",{children:G.items}),p.jsxs("td",{children:[G.total.toLocaleString()," "]}),p.jsx("td",{children:p.jsx("span",{className:G.payment===""?"admin-status-badge success":G.payment===""?"admin-status-badge warning":"admin-status-badge neutral",children:Nc(G.payment,g)})}),p.jsx("td",{children:p.jsx("span",{className:"admin-status-badge",children:G.progress})}),p.jsx("td",{children:p.jsxs("div",{style:{display:"flex",gap:8},children:[p.jsx("button",{type:"button",className:"admin-secondary-button",onClick:()=>W(G),disabled:$===G.id||N0(G.progress)===null,children:""}),p.jsx("button",{type:"button",className:"admin-secondary-button",onClick:()=>ge(G),disabled:$===G.id||R0(G.progress)===null,children:""})]})})]},G.id))})]})}),I.length===0&&p.jsx("p",{style:{marginTop:18,color:"#64748b"},children:""}),p.jsx("p",{style:{marginTop:18,color:"#64748b"},children:"Firestore "})]})}function MP(n,e){return n===0?"is-zero":e==="ready"?"is-complete":"is-pending"}function Pf(n){const e=n.raw.items??{},{list:t,map:r}=yo();return t.map(i=>{const a=e[i.key]??0,o=c7(i.key),c=o?n.platingStatus[o]??"ready":"ready",u=MP(a,c);return{key:i.key,label:sf(i.key,r[i.key].label),quantity:a,stateClass:u}})}function uv({entries:n,showTotal:e=!0,totalAriaLabel:t="",variant:r="default",className:i}){const a=n.reduce((c,u)=>c+u.quantity,0),o=["admin-order-items-inline",r==="compact"?"compact":null,i].filter(Boolean).join(" ");return p.jsxs("div",{className:o,children:[p.jsx("div",{className:"admin-production-items-card",role:"presentation",children:p.jsx("div",{className:"admin-production-items-grid",children:n.map(c=>p.jsxs("div",{className:"admin-production-item-cell",children:[p.jsx("span",{className:`admin-production-item-label menu-item-${c.key}`,children:c.label}),p.jsx("span",{className:`admin-production-quantity ${c.stateClass} menu-item-${c.key}`,"data-menu-item":c.key,children:c.quantity})]},c.key))})}),e&&p.jsx("div",{className:"admin-production-total-quantity","aria-label":t,children:a})]})}const PP=[{key:"ordered",label:"",hint:"",statuses:[""]},{key:"plating",label:"",hint:"",statuses:[""]}],kP=[{key:"summary",label:"",icon:""},...zi.map(n=>({key:n.key,label:n.label,icon:n.icon}))];function jP(n){return n?zi.some(e=>e.key===n):!1}const I3=(n,e)=>`${n}:${e}`;function LP(){const n=P.useMemo(()=>{const b=new Date;b.setHours(0,0,0,0);const R=new Date(b);return R.setDate(R.getDate()+1),{start:b,end:R}},[]),{orders:e,loading:t,error:r}=Gc(n),i=P.useMemo(()=>e.map(_p),[e]),[a,o]=P.useState(null),[c,u]=P.useState(null),[d,m]=P.useState(null),[g,_]=Vv(),w=g.get("view"),A=w==="summary"?"summary":jP(w)?w:"summary",S=A==="summary"?null:zi.find(b=>b.key===A)??null,D=P.useCallback(b=>{m(null),_(R=>{const I=new URLSearchParams(R);return b==="summary"?I.delete("view"):I.set("view",b),I})},[m,_]),C=P.useMemo(()=>PP.map(b=>({...b,orders:i.filter(R=>b.statuses.includes(R.progress)).sort((R,I)=>{const O=R.createdAtDate?.getTime()??0,L=I.createdAtDate?.getTime()??0;return O-L})})),[i]),k=P.useMemo(()=>({ordered:C.find(b=>b.key==="ordered")?.orders.length??0,plating:C.find(b=>b.key==="plating")?.orders.length??0}),[C]),V=P.useMemo(()=>{const b={potaufeu:{pending:[],ready:[]},friedBread:{pending:[],ready:[]}};i.forEach(I=>{if(I.progress==="")return;const O=I.raw.items??{};zi.forEach(L=>{if(y3(O,L.key)===0)return;const ge=(I.platingStatus[L.key]??"ready")==="ready"?"ready":"pending";b[L.key][ge].push(I)})});const R=(I,O)=>(I.createdAtDate?.getTime()??0)-(O.createdAtDate?.getTime()??0);return zi.forEach(I=>{b[I.key].pending.sort(R),b[I.key].ready.sort(R)}),b},[i]),z=P.useCallback(async b=>{const R=N0(b.progress);if(R){o(b.id),m(null);try{if(b.progress===""){const I=IA(b,!0);Object.keys(I).length>0&&await qm(b.id,b.ticket,I)}await ya(b.id,b.ticket,{progress:R,payment:b.payment})}catch(I){console.error("",I),m("")}finally{o(null)}}},[]),q=P.useCallback(async b=>{const R=R0(b.progress);if(R){o(b.id),m(null);try{if(b.progress===""&&R===""){const I=IA(b,!1);Object.keys(I).length>0&&await qm(b.id,b.ticket,I)}await ya(b.id,b.ticket,{progress:R,payment:b.payment})}catch(I){console.error("",I),m("")}finally{o(null)}}},[]),$=P.useCallback(async(b,R,I)=>{const O=I3(b.id,R);u(O),m(null);try{await qm(b.id,b.ticket,{[R]:I});const L=b.raw.items??{},j={...b.platingStatus,[R]:I?"ready":"pending"};d7(L,j)&&b.progress===""?await ya(b.id,b.ticket,{progress:"",payment:b.payment}):!I&&b.progress===""&&await ya(b.id,b.ticket,{progress:"",payment:b.payment})}catch(L){console.error("",L),m("")}finally{u(null)}},[m]),M=P.useCallback(async()=>{m(null);try{await S3()}catch(b){console.error("CSV ",b),m("CSV ")}},[]);return t?p.jsx("p",{children:""}):p.jsxs("div",{className:"admin-production-page",children:[p.jsxs("div",{className:"admin-production-toolbar",role:"region","aria-label":"",children:[p.jsxs("div",{className:"admin-production-summary",children:[p.jsx("p",{className:"admin-production-summary-title",children:""}),p.jsxs("p",{className:"admin-production-summary-count",children:[k.ordered,""]}),p.jsx("p",{className:"admin-production-summary-hint",children:""})]}),p.jsxs("div",{className:"admin-production-summary",children:[p.jsx("p",{className:"admin-production-summary-title",children:""}),p.jsxs("p",{className:"admin-production-summary-count",children:[k.plating,""]}),p.jsx("p",{className:"admin-production-summary-hint",children:""})]})]}),p.jsx("nav",{className:"admin-production-view-tabs",role:"tablist","aria-label":"",children:kP.map(b=>{const R=b.key===A,I=b.key!=="summary",O=I?V[b.key].pending.length:0;return p.jsxs("button",{type:"button",role:"tab",className:`admin-production-view-tab${R?" is-active":""}`,"aria-selected":R,onClick:()=>D(b.key),children:[p.jsxs("span",{className:"admin-production-view-tab-label",children:[p.jsx("span",{className:"admin-production-view-tab-icon","aria-hidden":"true",children:b.icon}),p.jsx("span",{className:"admin-production-view-tab-text",children:b.label})]}),I&&O>0&&p.jsx("span",{className:"admin-production-view-tab-count",children:p.jsx("span",{className:"admin-production-badge",children:O})})]},b.key)})}),A==="summary"?p.jsxs("div",{className:"admin-production-table",role:"table","aria-label":"",children:[p.jsx("div",{className:"admin-production-table-header",role:"row",children:C.map(b=>p.jsxs("div",{className:"admin-production-table-header-cell",role:"columnheader",children:[p.jsxs("div",{children:[p.jsx("h2",{children:b.label}),p.jsx("p",{children:b.hint})]}),p.jsx("span",{className:"admin-production-badge",children:b.orders.length})]},b.key))}),p.jsx("div",{className:"admin-production-table-body",children:C.map(b=>p.jsx("section",{className:"admin-production-table-column","aria-label":b.label,role:"rowgroup",children:p.jsxs("div",{className:"admin-production-table-list",children:[b.orders.map(R=>{const I=!!N0(R.progress),O=!!R0(R.progress);return p.jsx(BP,{order:R,onForward:()=>{z(R)},onBack:()=>{q(R)},allowForward:I,allowBack:O,busy:a===R.id},R.id)}),b.orders.length===0&&p.jsx("p",{className:"admin-production-empty",children:""})]})},b.key))})]}):S&&p.jsx(VP,{category:S,orders:V[S.key],busyKey:c,onUpdate:(b,R)=>$(b,S.key,R)}),r&&p.jsx("p",{className:"admin-error",role:"alert",children:""}),d&&p.jsx("p",{className:"admin-error",role:"alert",children:d}),p.jsx("div",{style:{marginTop:16},children:p.jsx("button",{type:"button",className:"admin-secondary-button",onClick:()=>void M(),disabled:i.length===0,children:"CSV "})})]})}function BP({order:n,onForward:e,onBack:t,allowForward:r,allowBack:i,busy:a}){if(n.progress===""||n.progress==="")return p.jsx("article",{className:"admin-production-row admin-production-row--compact",children:p.jsx("div",{className:"admin-production-row-main",children:p.jsxs("div",{className:"admin-production-row-compact",children:[p.jsx("span",{className:"admin-payment-ticket badge admin-production-ticket-compact","aria-label":` ${n.callNumber}`,children:n.callNumber}),p.jsxs("div",{className:"admin-production-row-actions admin-production-row-actions--compact",children:[p.jsx("button",{type:"button",className:"admin-production-button ghost",onClick:t,disabled:!i||a,children:" "}),p.jsx("button",{type:"button",className:"admin-production-button primary",onClick:e,disabled:!r||a,children:" "})]})]})})});const c=Pf(n),u=c.reduce((d,m)=>d+m.quantity,0);return p.jsx("article",{className:"admin-production-row",children:p.jsx("div",{className:"admin-production-row-main",children:p.jsxs("div",{className:"admin-production-row-inline",children:[p.jsx("div",{className:"admin-production-ticket-block","aria-label":` ${n.callNumber}`,children:p.jsx("span",{className:"admin-payment-ticket badge",children:n.callNumber})}),p.jsx("div",{className:"admin-production-items-card",role:"presentation",children:p.jsx("div",{className:"admin-production-items-grid",children:c.map(d=>p.jsxs("div",{className:"admin-production-item-cell",children:[p.jsx("span",{className:"admin-production-item-label",children:d.label}),p.jsx("span",{className:`admin-production-quantity ${d.stateClass}`,children:d.quantity})]},d.key))})}),p.jsx("div",{className:"admin-production-total-quantity","aria-label":"",children:u}),p.jsxs("div",{className:"admin-production-row-actions",children:[p.jsx("button",{type:"button",className:"admin-production-button ghost",onClick:t,disabled:!i||a,children:" "}),p.jsx("button",{type:"button",className:"admin-production-button primary",onClick:e,disabled:!r||a,children:" "})]})]})})})}function VP({category:n,orders:e,busyKey:t,onUpdate:r}){const i=`${n.label}`,a=`${n.label}`;return p.jsxs("div",{className:"admin-production-table",role:"table","aria-label":`${n.label}`,children:[p.jsxs("div",{className:"admin-production-table-header",role:"row",children:[p.jsxs("div",{className:"admin-production-table-header-cell",role:"columnheader",children:[p.jsxs("div",{children:[p.jsx("h2",{children:i}),p.jsx("p",{children:""})]}),p.jsx("span",{className:"admin-production-badge",children:e.pending.length})]}),p.jsxs("div",{className:"admin-production-table-header-cell",role:"columnheader",children:[p.jsxs("div",{children:[p.jsx("h2",{children:a}),p.jsx("p",{children:""})]}),p.jsx("span",{className:"admin-production-badge",children:e.ready.length})]})]}),p.jsxs("div",{className:"admin-production-table-body",children:[p.jsx("section",{className:"admin-production-table-column","aria-label":i,role:"rowgroup",children:p.jsxs("div",{className:"admin-production-table-list",children:[e.pending.map(o=>p.jsx(TA,{order:o,category:n,status:"pending",busyKey:t,onUpdate:c=>r(o,c)},o.id)),e.pending.length===0&&p.jsx("p",{className:"admin-production-empty",children:""})]})}),p.jsx("section",{className:"admin-production-table-column","aria-label":a,role:"rowgroup",children:p.jsxs("div",{className:"admin-production-table-list",children:[e.ready.map(o=>p.jsx(TA,{order:o,category:n,status:"ready",busyKey:t,onUpdate:c=>r(o,c)},o.id)),e.ready.length===0&&p.jsx("p",{className:"admin-production-empty",children:""})]})})]})]})}function TA({order:n,category:e,status:t,busyKey:r,onUpdate:i}){const a=r===I3(n.id,e.key);if(t==="ready")return p.jsx("article",{className:"admin-production-row admin-production-row--compact",children:p.jsx("div",{className:"admin-production-row-main",children:p.jsxs("div",{className:"admin-production-row-compact",children:[p.jsx("span",{className:"admin-payment-ticket badge admin-production-ticket-compact","aria-label":` ${n.callNumber}`,children:n.callNumber}),p.jsx("div",{className:"admin-production-row-actions admin-production-row-actions--compact",children:p.jsx("button",{type:"button",className:"admin-production-button ghost",onClick:()=>{i(!1)},disabled:a,children:" "})})]})})});const o=Pf(n).filter(u=>e.itemKeys.includes(u.key)),c=o.reduce((u,d)=>u+d.quantity,0);return p.jsx("article",{className:"admin-production-row",children:p.jsx("div",{className:"admin-production-row-main",children:p.jsxs("div",{className:"admin-production-row-inline",children:[p.jsx("div",{className:"admin-production-ticket-block","aria-label":` ${n.callNumber}`,children:p.jsx("span",{className:"admin-payment-ticket badge",children:n.callNumber})}),p.jsx("div",{className:"admin-production-items-card",role:"presentation",children:p.jsx("div",{className:"admin-production-items-grid",children:o.map(u=>p.jsxs("div",{className:"admin-production-item-cell",children:[p.jsx("span",{className:"admin-production-item-label",children:u.label}),p.jsx("span",{className:`admin-production-quantity ${u.stateClass}`,children:u.quantity})]},u.key))})}),p.jsx("div",{className:"admin-production-total-quantity","aria-label":"",children:c}),p.jsx("div",{className:"admin-production-row-actions",children:p.jsx("button",{type:"button",className:"admin-production-button primary",onClick:()=>{i(!0)},disabled:a,children:" "})})]})})})}function IA(n,e){const t=n.raw.items??{},r={};return zi.forEach(i=>{y3(t,i.key)>0&&(r[i.key]=e)}),r}function FP(n,e){var t=Object.setPrototypeOf;t?t(n,e):n.__proto__=e}function UP(n,e){e===void 0&&(e=n.constructor);var t=Error.captureStackTrace;t&&t(n,e)}var zP=(function(){var n=function(t,r){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(i[o]=a[o])},n(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),HP=(function(n){zP(e,n);function e(t,r){var i=this.constructor,a=n.call(this,t,r)||this;return Object.defineProperty(a,"name",{value:i.name,enumerable:!1,configurable:!0}),FP(a,i.prototype),UP(a),a}return e})(Error),GP=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Br=(function(n){GP(e,n);function e(t){t===void 0&&(t=void 0);var r=n.call(this,t)||this;return r.message=t,r}return e.prototype.getKind=function(){var t=this.constructor;return t.kind},e.kind="Exception",e})(HP),qP=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),pn=(function(n){qP(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="ArgumentException",e})(Br),$P=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Be=(function(n){$P(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="IllegalArgumentException",e})(Br),N3=(function(){function n(e){if(this.binarizer=e,e===null)throw new Be("Binarizer must be non-null.")}return n.prototype.getWidth=function(){return this.binarizer.getWidth()},n.prototype.getHeight=function(){return this.binarizer.getHeight()},n.prototype.getBlackRow=function(e,t){return this.binarizer.getBlackRow(e,t)},n.prototype.getBlackMatrix=function(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix},n.prototype.isCropSupported=function(){return this.binarizer.getLuminanceSource().isCropSupported()},n.prototype.crop=function(e,t,r,i){var a=this.binarizer.getLuminanceSource().crop(e,t,r,i);return new n(this.binarizer.createBinarizer(a))},n.prototype.isRotateSupported=function(){return this.binarizer.getLuminanceSource().isRotateSupported()},n.prototype.rotateCounterClockwise=function(){var e=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new n(this.binarizer.createBinarizer(e))},n.prototype.rotateCounterClockwise45=function(){var e=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new n(this.binarizer.createBinarizer(e))},n.prototype.toString=function(){try{return this.getBlackMatrix().toString()}catch{return""}},n})(),XP=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Cn=(function(n){XP(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.getChecksumInstance=function(){return new e},e.kind="ChecksumException",e})(Br),YP=(function(){function n(e){this.source=e}return n.prototype.getLuminanceSource=function(){return this.source},n.prototype.getWidth=function(){return this.source.getWidth()},n.prototype.getHeight=function(){return this.source.getHeight()},n})(),Ht=(function(){function n(){}return n.arraycopy=function(e,t,r,i,a){for(;a--;)r[i++]=e[t++]},n.currentTimeMillis=function(){return Date.now()},n})(),KP=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),qy=(function(n){KP(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="IndexOutOfBoundsException",e})(Br),WP=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),NA=(function(n){WP(e,n);function e(t,r){t===void 0&&(t=void 0),r===void 0&&(r=void 0);var i=n.call(this,r)||this;return i.index=t,i.message=r,i}return e.kind="ArrayIndexOutOfBoundsException",e})(qy),QP=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Pn=(function(){function n(){}return n.fill=function(e,t){for(var r=0,i=e.length;r<i;r++)e[r]=t},n.fillWithin=function(e,t,r,i){n.rangeCheck(e.length,t,r);for(var a=t;a<r;a++)e[a]=i},n.rangeCheck=function(e,t,r){if(t>r)throw new Be("fromIndex("+t+") > toIndex("+r+")");if(t<0)throw new NA(t);if(r>e)throw new NA(r)},n.asList=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e},n.create=function(e,t,r){var i=Array.from({length:e});return i.map(function(a){return Array.from({length:t}).fill(r)})},n.createInt32Array=function(e,t,r){var i=Array.from({length:e});return i.map(function(a){return Int32Array.from({length:t}).fill(r)})},n.equals=function(e,t){if(!e||!t||!e.length||!t.length||e.length!==t.length)return!1;for(var r=0,i=e.length;r<i;r++)if(e[r]!==t[r])return!1;return!0},n.hashCode=function(e){var t,r;if(e===null)return 0;var i=1;try{for(var a=QP(e),o=a.next();!o.done;o=a.next()){var c=o.value;i=31*i+c}}catch(u){t={error:u}}finally{try{o&&!o.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}return i},n.fillUint8Array=function(e,t){for(var r=0;r!==e.length;r++)e[r]=t},n.copyOf=function(e,t){return e.slice(0,t)},n.copyOfUint8Array=function(e,t){if(e.length<=t){var r=new Uint8Array(t);return r.set(e),r}return e.slice(0,t)},n.copyOfRange=function(e,t,r){var i=r-t,a=new Int32Array(i);return Ht.arraycopy(e,t,a,0,i),a},n.binarySearch=function(e,t,r){r===void 0&&(r=n.numberComparator);for(var i=0,a=e.length-1;i<=a;){var o=a+i>>1,c=r(t,e[o]);if(c>0)i=o+1;else if(c<0)a=o-1;else return o}return-i-1},n.numberComparator=function(e,t){return e-t},n})(),it=(function(){function n(){}return n.numberOfTrailingZeros=function(e){var t;if(e===0)return 32;var r=31;return t=e<<16,t!==0&&(r-=16,e=t),t=e<<8,t!==0&&(r-=8,e=t),t=e<<4,t!==0&&(r-=4,e=t),t=e<<2,t!==0&&(r-=2,e=t),r-(e<<1>>>31)},n.numberOfLeadingZeros=function(e){if(e===0)return 32;var t=1;return e>>>16||(t+=16,e<<=16),e>>>24||(t+=8,e<<=8),e>>>28||(t+=4,e<<=4),e>>>30||(t+=2,e<<=2),t-=e>>>31,t},n.toHexString=function(e){return e.toString(16)},n.toBinaryString=function(e){return String(parseInt(String(e),2))},n.bitCount=function(e){return e=e-(e>>>1&1431655765),e=(e&858993459)+(e>>>2&858993459),e=e+(e>>>4)&252645135,e=e+(e>>>8),e=e+(e>>>16),e&63},n.truncDivision=function(e,t){return Math.trunc(e/t)},n.parseInt=function(e,t){return t===void 0&&(t=void 0),parseInt(e,t)},n.MIN_VALUE_32_BITS=-2147483648,n.MAX_VALUE=Number.MAX_SAFE_INTEGER,n})(),Yn=(function(){function n(e,t){e===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=e,t==null?this.bits=n.makeArray(e):this.bits=t)}return n.prototype.getSize=function(){return this.size},n.prototype.getSizeInBytes=function(){return Math.floor((this.size+7)/8)},n.prototype.ensureCapacity=function(e){if(e>this.bits.length*32){var t=n.makeArray(e);Ht.arraycopy(this.bits,0,t,0,this.bits.length),this.bits=t}},n.prototype.get=function(e){return(this.bits[Math.floor(e/32)]&1<<(e&31))!==0},n.prototype.set=function(e){this.bits[Math.floor(e/32)]|=1<<(e&31)},n.prototype.flip=function(e){this.bits[Math.floor(e/32)]^=1<<(e&31)},n.prototype.getNextSet=function(e){var t=this.size;if(e>=t)return t;var r=this.bits,i=Math.floor(e/32),a=r[i];a&=~((1<<(e&31))-1);for(var o=r.length;a===0;){if(++i===o)return t;a=r[i]}var c=i*32+it.numberOfTrailingZeros(a);return c>t?t:c},n.prototype.getNextUnset=function(e){var t=this.size;if(e>=t)return t;var r=this.bits,i=Math.floor(e/32),a=~r[i];a&=~((1<<(e&31))-1);for(var o=r.length;a===0;){if(++i===o)return t;a=~r[i]}var c=i*32+it.numberOfTrailingZeros(a);return c>t?t:c},n.prototype.setBulk=function(e,t){this.bits[Math.floor(e/32)]=t},n.prototype.setRange=function(e,t){if(t<e||e<0||t>this.size)throw new Be;if(t!==e){t--;for(var r=Math.floor(e/32),i=Math.floor(t/32),a=this.bits,o=r;o<=i;o++){var c=o>r?0:e&31,u=o<i?31:t&31,d=(2<<u)-(1<<c);a[o]|=d}}},n.prototype.clear=function(){for(var e=this.bits.length,t=this.bits,r=0;r<e;r++)t[r]=0},n.prototype.isRange=function(e,t,r){if(t<e||e<0||t>this.size)throw new Be;if(t===e)return!0;t--;for(var i=Math.floor(e/32),a=Math.floor(t/32),o=this.bits,c=i;c<=a;c++){var u=c>i?0:e&31,d=c<a?31:t&31,m=(2<<d)-(1<<u)&4294967295;if((o[c]&m)!==(r?m:0))return!1}return!0},n.prototype.appendBit=function(e){this.ensureCapacity(this.size+1),e&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++},n.prototype.appendBits=function(e,t){if(t<0||t>32)throw new Be("Num bits must be between 0 and 32");this.ensureCapacity(this.size+t);for(var r=t;r>0;r--)this.appendBit((e>>r-1&1)===1)},n.prototype.appendBitArray=function(e){var t=e.size;this.ensureCapacity(this.size+t);for(var r=0;r<t;r++)this.appendBit(e.get(r))},n.prototype.xor=function(e){if(this.size!==e.size)throw new Be("Sizes don't match");for(var t=this.bits,r=0,i=t.length;r<i;r++)t[r]^=e.bits[r]},n.prototype.toBytes=function(e,t,r,i){for(var a=0;a<i;a++){for(var o=0,c=0;c<8;c++)this.get(e)&&(o|=1<<7-c),e++;t[r+a]=o}},n.prototype.getBitArray=function(){return this.bits},n.prototype.reverse=function(){for(var e=new Int32Array(this.bits.length),t=Math.floor((this.size-1)/32),r=t+1,i=this.bits,a=0;a<r;a++){var o=i[a];o=o>>1&1431655765|(o&1431655765)<<1,o=o>>2&858993459|(o&858993459)<<2,o=o>>4&252645135|(o&252645135)<<4,o=o>>8&16711935|(o&16711935)<<8,o=o>>16&65535|(o&65535)<<16,e[t-a]=o}if(this.size!==r*32){for(var c=r*32-this.size,u=e[0]>>>c,a=1;a<r;a++){var d=e[a];u|=d<<32-c,e[a-1]=u,u=d>>>c}e[r-1]=u}this.bits=e},n.makeArray=function(e){return new Int32Array(Math.floor((e+31)/32))},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.size===t.size&&Pn.equals(this.bits,t.bits)},n.prototype.hashCode=function(){return 31*this.size+Pn.hashCode(this.bits)},n.prototype.toString=function(){for(var e="",t=0,r=this.size;t<r;t++)(t&7)===0&&(e+=" "),e+=this.get(t)?"X":".";return e},n.prototype.clone=function(){return new n(this.size,this.bits.slice())},n.prototype.toArray=function(){for(var e=[],t=0,r=this.size;t<r;t++)e.push(this.get(t));return e},n})(),fv;(function(n){n[n.OTHER=0]="OTHER",n[n.PURE_BARCODE=1]="PURE_BARCODE",n[n.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",n[n.TRY_HARDER=3]="TRY_HARDER",n[n.CHARACTER_SET=4]="CHARACTER_SET",n[n.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",n[n.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",n[n.ENABLE_CODE_39_EXTENDED_MODE=7]="ENABLE_CODE_39_EXTENDED_MODE",n[n.ASSUME_GS1=8]="ASSUME_GS1",n[n.RETURN_CODABAR_START_END=9]="RETURN_CODABAR_START_END",n[n.NEED_RESULT_POINT_CALLBACK=10]="NEED_RESULT_POINT_CALLBACK",n[n.ALLOWED_EAN_EXTENSIONS=11]="ALLOWED_EAN_EXTENSIONS"})(fv||(fv={}));const Gt=fv;var ZP=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),_e=(function(n){ZP(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.getFormatInstance=function(){return new e},e.kind="FormatException",e})(Br),JP=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Ot;(function(n){n[n.Cp437=0]="Cp437",n[n.ISO8859_1=1]="ISO8859_1",n[n.ISO8859_2=2]="ISO8859_2",n[n.ISO8859_3=3]="ISO8859_3",n[n.ISO8859_4=4]="ISO8859_4",n[n.ISO8859_5=5]="ISO8859_5",n[n.ISO8859_6=6]="ISO8859_6",n[n.ISO8859_7=7]="ISO8859_7",n[n.ISO8859_8=8]="ISO8859_8",n[n.ISO8859_9=9]="ISO8859_9",n[n.ISO8859_10=10]="ISO8859_10",n[n.ISO8859_11=11]="ISO8859_11",n[n.ISO8859_13=12]="ISO8859_13",n[n.ISO8859_14=13]="ISO8859_14",n[n.ISO8859_15=14]="ISO8859_15",n[n.ISO8859_16=15]="ISO8859_16",n[n.SJIS=16]="SJIS",n[n.Cp1250=17]="Cp1250",n[n.Cp1251=18]="Cp1251",n[n.Cp1252=19]="Cp1252",n[n.Cp1256=20]="Cp1256",n[n.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",n[n.UTF8=22]="UTF8",n[n.ASCII=23]="ASCII",n[n.Big5=24]="Big5",n[n.GB18030=25]="GB18030",n[n.EUC_KR=26]="EUC_KR"})(Ot||(Ot={}));var Mn=(function(){function n(e,t,r){for(var i,a,o=[],c=3;c<arguments.length;c++)o[c-3]=arguments[c];this.valueIdentifier=e,this.name=r,typeof t=="number"?this.values=Int32Array.from([t]):this.values=t,this.otherEncodingNames=o,n.VALUE_IDENTIFIER_TO_ECI.set(e,this),n.NAME_TO_ECI.set(r,this);for(var u=this.values,d=0,m=u.length;d!==m;d++){var g=u[d];n.VALUES_TO_ECI.set(g,this)}try{for(var _=JP(o),w=_.next();!w.done;w=_.next()){var A=w.value;n.NAME_TO_ECI.set(A,this)}}catch(S){i={error:S}}finally{try{w&&!w.done&&(a=_.return)&&a.call(_)}finally{if(i)throw i.error}}}return n.prototype.getValueIdentifier=function(){return this.valueIdentifier},n.prototype.getName=function(){return this.name},n.prototype.getValue=function(){return this.values[0]},n.getCharacterSetECIByValue=function(e){if(e<0||e>=900)throw new _e("incorect value");var t=n.VALUES_TO_ECI.get(e);if(t===void 0)throw new _e("incorect value");return t},n.getCharacterSetECIByName=function(e){var t=n.NAME_TO_ECI.get(e);if(t===void 0)throw new _e("incorect value");return t},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.getName()===t.getName()},n.VALUE_IDENTIFIER_TO_ECI=new Map,n.VALUES_TO_ECI=new Map,n.NAME_TO_ECI=new Map,n.Cp437=new n(Ot.Cp437,Int32Array.from([0,2]),"Cp437"),n.ISO8859_1=new n(Ot.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),n.ISO8859_2=new n(Ot.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),n.ISO8859_3=new n(Ot.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),n.ISO8859_4=new n(Ot.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),n.ISO8859_5=new n(Ot.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),n.ISO8859_6=new n(Ot.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),n.ISO8859_7=new n(Ot.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),n.ISO8859_8=new n(Ot.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),n.ISO8859_9=new n(Ot.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),n.ISO8859_10=new n(Ot.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),n.ISO8859_11=new n(Ot.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),n.ISO8859_13=new n(Ot.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),n.ISO8859_14=new n(Ot.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),n.ISO8859_15=new n(Ot.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),n.ISO8859_16=new n(Ot.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),n.SJIS=new n(Ot.SJIS,20,"SJIS","Shift_JIS"),n.Cp1250=new n(Ot.Cp1250,21,"Cp1250","windows-1250"),n.Cp1251=new n(Ot.Cp1251,22,"Cp1251","windows-1251"),n.Cp1252=new n(Ot.Cp1252,23,"Cp1252","windows-1252"),n.Cp1256=new n(Ot.Cp1256,24,"Cp1256","windows-1256"),n.UnicodeBigUnmarked=new n(Ot.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),n.UTF8=new n(Ot.UTF8,26,"UTF8","UTF-8"),n.ASCII=new n(Ot.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),n.Big5=new n(Ot.Big5,28,"Big5"),n.GB18030=new n(Ot.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),n.EUC_KR=new n(Ot.EUC_KR,30,"EUC_KR","EUC-KR"),n})(),ek=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Jh=(function(n){ek(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="UnsupportedOperationException",e})(Br),_i=(function(){function n(){}return n.decode=function(e,t){var r=this.encodingName(t);return this.customDecoder?this.customDecoder(e,r):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(r)?this.decodeFallback(e,r):new TextDecoder(r).decode(e)},n.shouldDecodeOnFallback=function(e){return!n.isBrowser()&&e==="ISO-8859-1"},n.encode=function(e,t){var r=this.encodingName(t);return this.customEncoder?this.customEncoder(e,r):typeof TextEncoder>"u"?this.encodeFallback(e):new TextEncoder().encode(e)},n.isBrowser=function(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"},n.encodingName=function(e){return typeof e=="string"?e:e.getName()},n.encodingCharacterSet=function(e){return e instanceof Mn?e:Mn.getCharacterSetECIByName(e)},n.decodeFallback=function(e,t){var r=this.encodingCharacterSet(t);if(n.isDecodeFallbackSupported(r)){for(var i="",a=0,o=e.length;a<o;a++){var c=e[a].toString(16);c.length<2&&(c="0"+c),i+="%"+c}return decodeURIComponent(i)}if(r.equals(Mn.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(e.buffer));throw new Jh("Encoding "+this.encodingName(t)+" not supported by fallback.")},n.isDecodeFallbackSupported=function(e){return e.equals(Mn.UTF8)||e.equals(Mn.ISO8859_1)||e.equals(Mn.ASCII)},n.encodeFallback=function(e){for(var t=btoa(unescape(encodeURIComponent(e))),r=t.split(""),i=[],a=0;a<r.length;a++)i.push(r[a].charCodeAt(0));return new Uint8Array(i)},n})(),pt=(function(){function n(){}return n.castAsNonUtf8Char=function(e,t){t===void 0&&(t=null);var r=t?t.getName():this.ISO88591;return _i.decode(new Uint8Array([e]),r)},n.guessEncoding=function(e,t){if(t!=null&&t.get(Gt.CHARACTER_SET)!==void 0)return t.get(Gt.CHARACTER_SET).toString();for(var r=e.length,i=!0,a=!0,o=!0,c=0,u=0,d=0,m=0,g=0,_=0,w=0,A=0,S=0,D=0,C=0,k=e.length>3&&e[0]===239&&e[1]===187&&e[2]===191,V=0;V<r&&(i||a||o);V++){var z=e[V]&255;o&&(c>0?(z&128)===0?o=!1:c--:(z&128)!==0&&((z&64)===0?o=!1:(c++,(z&32)===0?u++:(c++,(z&16)===0?d++:(c++,(z&8)===0?m++:o=!1))))),i&&(z>127&&z<160?i=!1:z>159&&(z<192||z===215||z===247)&&C++),a&&(g>0?z<64||z===127||z>252?a=!1:g--:z===128||z===160||z>239?a=!1:z>160&&z<224?(_++,A=0,w++,w>S&&(S=w)):z>127?(g++,w=0,A++,A>D&&(D=A)):(w=0,A=0))}return o&&c>0&&(o=!1),a&&g>0&&(a=!1),o&&(k||u+d+m>0)?n.UTF8:a&&(n.ASSUME_SHIFT_JIS||S>=3||D>=3)?n.SHIFT_JIS:i&&a?S===2&&_===2||C*10>=r?n.SHIFT_JIS:n.ISO88591:i?n.ISO88591:a?n.SHIFT_JIS:o?n.UTF8:n.PLATFORM_DEFAULT_ENCODING},n.format=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var i=-1;function a(c,u,d,m,g,_){if(c==="%%")return"%";if(t[++i]!==void 0){c=m?parseInt(m.substr(1)):void 0;var w=g?parseInt(g.substr(1)):void 0,A;switch(_){case"s":A=t[i];break;case"c":A=t[i][0];break;case"f":A=parseFloat(t[i]).toFixed(c);break;case"p":A=parseFloat(t[i]).toPrecision(c);break;case"e":A=parseFloat(t[i]).toExponential(c);break;case"x":A=parseInt(t[i]).toString(w||16);break;case"d":A=parseFloat(parseInt(t[i],w||10).toPrecision(c)).toFixed(0);break}A=typeof A=="object"?JSON.stringify(A):(+A).toString(w);for(var S=parseInt(d),D=d&&d[0]+""=="0"?"0":" ";A.length<S;)A=u!==void 0?A+D:D+A;return A}}var o=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(o,a)},n.getBytes=function(e,t){return _i.encode(e,t)},n.getCharCode=function(e,t){return t===void 0&&(t=0),e.charCodeAt(t)},n.getCharAt=function(e){return String.fromCharCode(e)},n.SHIFT_JIS=Mn.SJIS.getName(),n.GB2312="GB2312",n.ISO88591=Mn.ISO8859_1.getName(),n.EUC_JP="EUC_JP",n.UTF8=Mn.UTF8.getName(),n.PLATFORM_DEFAULT_ENCODING=n.UTF8,n.ASSUME_SHIFT_JIS=!1,n})(),nt=(function(){function n(e){e===void 0&&(e=""),this.value=e}return n.prototype.enableDecoding=function(e){return this.encoding=e,this},n.prototype.append=function(e){return typeof e=="string"?this.value+=e.toString():this.encoding?this.value+=pt.castAsNonUtf8Char(e,this.encoding):this.value+=String.fromCharCode(e),this},n.prototype.appendChars=function(e,t,r){for(var i=t;t<t+r;i++)this.append(e[i]);return this},n.prototype.length=function(){return this.value.length},n.prototype.charAt=function(e){return this.value.charAt(e)},n.prototype.deleteCharAt=function(e){this.value=this.value.substr(0,e)+this.value.substring(e+1)},n.prototype.setCharAt=function(e,t){this.value=this.value.substr(0,e)+t+this.value.substr(e+1)},n.prototype.substring=function(e,t){return this.value.substring(e,t)},n.prototype.setLengthToZero=function(){this.value=""},n.prototype.toString=function(){return this.value},n.prototype.insert=function(e,t){this.value=this.value.substring(0,e)+t+this.value.substring(e)},n})(),Ta=(function(){function n(e,t,r,i){if(this.width=e,this.height=t,this.rowSize=r,this.bits=i,t==null&&(t=e),this.height=t,e<1||t<1)throw new Be("Both dimensions must be greater than 0");r==null&&(r=Math.floor((e+31)/32)),this.rowSize=r,i==null&&(this.bits=new Int32Array(this.rowSize*this.height))}return n.parseFromBooleanArray=function(e){for(var t=e.length,r=e[0].length,i=new n(r,t),a=0;a<t;a++)for(var o=e[a],c=0;c<r;c++)o[c]&&i.set(c,a);return i},n.parseFromString=function(e,t,r){if(e===null)throw new Be("stringRepresentation cannot be null");for(var i=new Array(e.length),a=0,o=0,c=-1,u=0,d=0;d<e.length;)if(e.charAt(d)===`
`||e.charAt(d)==="\r"){if(a>o){if(c===-1)c=a-o;else if(a-o!==c)throw new Be("row lengths do not match");o=a,u++}d++}else if(e.substring(d,d+t.length)===t)d+=t.length,i[a]=!0,a++;else if(e.substring(d,d+r.length)===r)d+=r.length,i[a]=!1,a++;else throw new Be("illegal character encountered: "+e.substring(d));if(a>o){if(c===-1)c=a-o;else if(a-o!==c)throw new Be("row lengths do not match");u++}for(var m=new n(c,u),g=0;g<a;g++)i[g]&&m.set(Math.floor(g%c),Math.floor(g/c));return m},n.prototype.get=function(e,t){var r=t*this.rowSize+Math.floor(e/32);return(this.bits[r]>>>(e&31)&1)!==0},n.prototype.set=function(e,t){var r=t*this.rowSize+Math.floor(e/32);this.bits[r]|=1<<(e&31)&4294967295},n.prototype.unset=function(e,t){var r=t*this.rowSize+Math.floor(e/32);this.bits[r]&=~(1<<(e&31)&4294967295)},n.prototype.flip=function(e,t){var r=t*this.rowSize+Math.floor(e/32);this.bits[r]^=1<<(e&31)&4294967295},n.prototype.xor=function(e){if(this.width!==e.getWidth()||this.height!==e.getHeight()||this.rowSize!==e.getRowSize())throw new Be("input matrix dimensions do not match");for(var t=new Yn(Math.floor(this.width/32)+1),r=this.rowSize,i=this.bits,a=0,o=this.height;a<o;a++)for(var c=a*r,u=e.getRow(a,t).getBitArray(),d=0;d<r;d++)i[c+d]^=u[d]},n.prototype.clear=function(){for(var e=this.bits,t=e.length,r=0;r<t;r++)e[r]=0},n.prototype.setRegion=function(e,t,r,i){if(t<0||e<0)throw new Be("Left and top must be nonnegative");if(i<1||r<1)throw new Be("Height and width must be at least 1");var a=e+r,o=t+i;if(o>this.height||a>this.width)throw new Be("The region must fit inside the matrix");for(var c=this.rowSize,u=this.bits,d=t;d<o;d++)for(var m=d*c,g=e;g<a;g++)u[m+Math.floor(g/32)]|=1<<(g&31)&4294967295},n.prototype.getRow=function(e,t){t==null||t.getSize()<this.width?t=new Yn(this.width):t.clear();for(var r=this.rowSize,i=this.bits,a=e*r,o=0;o<r;o++)t.setBulk(o*32,i[a+o]);return t},n.prototype.setRow=function(e,t){Ht.arraycopy(t.getBitArray(),0,this.bits,e*this.rowSize,this.rowSize)},n.prototype.rotate180=function(){for(var e=this.getWidth(),t=this.getHeight(),r=new Yn(e),i=new Yn(e),a=0,o=Math.floor((t+1)/2);a<o;a++)r=this.getRow(a,r),i=this.getRow(t-1-a,i),r.reverse(),i.reverse(),this.setRow(a,i),this.setRow(t-1-a,r)},n.prototype.getEnclosingRectangle=function(){for(var e=this.width,t=this.height,r=this.rowSize,i=this.bits,a=e,o=t,c=-1,u=-1,d=0;d<t;d++)for(var m=0;m<r;m++){var g=i[d*r+m];if(g!==0){if(d<o&&(o=d),d>u&&(u=d),m*32<a){for(var _=0;(g<<31-_&4294967295)===0;)_++;m*32+_<a&&(a=m*32+_)}if(m*32+31>c){for(var _=31;!(g>>>_);)_--;m*32+_>c&&(c=m*32+_)}}}return c<a||u<o?null:Int32Array.from([a,o,c-a+1,u-o+1])},n.prototype.getTopLeftOnBit=function(){for(var e=this.rowSize,t=this.bits,r=0;r<t.length&&t[r]===0;)r++;if(r===t.length)return null;for(var i=r/e,a=r%e*32,o=t[r],c=0;(o<<31-c&4294967295)===0;)c++;return a+=c,Int32Array.from([a,i])},n.prototype.getBottomRightOnBit=function(){for(var e=this.rowSize,t=this.bits,r=t.length-1;r>=0&&t[r]===0;)r--;if(r<0)return null;for(var i=Math.floor(r/e),a=Math.floor(r%e)*32,o=t[r],c=31;!(o>>>c);)c--;return a+=c,Int32Array.from([a,i])},n.prototype.getWidth=function(){return this.width},n.prototype.getHeight=function(){return this.height},n.prototype.getRowSize=function(){return this.rowSize},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.width===t.width&&this.height===t.height&&this.rowSize===t.rowSize&&Pn.equals(this.bits,t.bits)},n.prototype.hashCode=function(){var e=this.width;return e=31*e+this.width,e=31*e+this.height,e=31*e+this.rowSize,e=31*e+Pn.hashCode(this.bits),e},n.prototype.toString=function(e,t,r){return e===void 0&&(e="X "),t===void 0&&(t="  "),r===void 0&&(r=`
`),this.buildToString(e,t,r)},n.prototype.buildToString=function(e,t,r){for(var i=new nt,a=0,o=this.height;a<o;a++){for(var c=0,u=this.width;c<u;c++)i.append(this.get(c,a)?e:t);i.append(r)}return i.toString()},n.prototype.clone=function(){return new n(this.width,this.height,this.rowSize,this.bits.slice())},n})(),tk=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),oe=(function(n){tk(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.getNotFoundInstance=function(){return new e},e.kind="NotFoundException",e})(Br),nk=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),rk=(function(n){nk(e,n);function e(t){var r=n.call(this,t)||this;return r.luminances=e.EMPTY,r.buckets=new Int32Array(e.LUMINANCE_BUCKETS),r}return e.prototype.getBlackRow=function(t,r){var i=this.getLuminanceSource(),a=i.getWidth();r==null||r.getSize()<a?r=new Yn(a):r.clear(),this.initArrays(a);for(var o=i.getRow(t,this.luminances),c=this.buckets,u=0;u<a;u++)c[(o[u]&255)>>e.LUMINANCE_SHIFT]++;var d=e.estimateBlackPoint(c);if(a<3)for(var u=0;u<a;u++)(o[u]&255)<d&&r.set(u);else for(var m=o[0]&255,g=o[1]&255,u=1;u<a-1;u++){var _=o[u+1]&255;(g*4-m-_)/2<d&&r.set(u),m=g,g=_}return r},e.prototype.getBlackMatrix=function(){var t=this.getLuminanceSource(),r=t.getWidth(),i=t.getHeight(),a=new Ta(r,i);this.initArrays(r);for(var o=this.buckets,c=1;c<5;c++)for(var u=Math.floor(i*c/5),d=t.getRow(u,this.luminances),m=Math.floor(r*4/5),g=Math.floor(r/5);g<m;g++){var _=d[g]&255;o[_>>e.LUMINANCE_SHIFT]++}for(var w=e.estimateBlackPoint(o),A=t.getMatrix(),c=0;c<i;c++)for(var S=c*r,g=0;g<r;g++){var _=A[S+g]&255;_<w&&a.set(g,c)}return a},e.prototype.createBinarizer=function(t){return new e(t)},e.prototype.initArrays=function(t){this.luminances.length<t&&(this.luminances=new Uint8ClampedArray(t));for(var r=this.buckets,i=0;i<e.LUMINANCE_BUCKETS;i++)r[i]=0},e.estimateBlackPoint=function(t){for(var r=t.length,i=0,a=0,o=0,c=0;c<r;c++)t[c]>o&&(a=c,o=t[c]),t[c]>i&&(i=t[c]);for(var u=0,d=0,c=0;c<r;c++){var m=c-a,g=t[c]*m*m;g>d&&(u=c,d=g)}if(a>u){var _=a;a=u,u=_}if(u-a<=r/16)throw new oe;for(var w=u-1,A=-1,c=u-1;c>a;c--){var S=c-a,g=S*S*(u-c)*(i-t[c]);g>A&&(w=c,A=g)}return w<<e.LUMINANCE_SHIFT},e.LUMINANCE_BITS=5,e.LUMINANCE_SHIFT=8-e.LUMINANCE_BITS,e.LUMINANCE_BUCKETS=1<<e.LUMINANCE_BITS,e.EMPTY=Uint8ClampedArray.from([0]),e})(YP),ik=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),R3=(function(n){ik(e,n);function e(t){var r=n.call(this,t)||this;return r.matrix=null,r}return e.prototype.getBlackMatrix=function(){if(this.matrix!==null)return this.matrix;var t=this.getLuminanceSource(),r=t.getWidth(),i=t.getHeight();if(r>=e.MINIMUM_DIMENSION&&i>=e.MINIMUM_DIMENSION){var a=t.getMatrix(),o=r>>e.BLOCK_SIZE_POWER;(r&e.BLOCK_SIZE_MASK)!==0&&o++;var c=i>>e.BLOCK_SIZE_POWER;(i&e.BLOCK_SIZE_MASK)!==0&&c++;var u=e.calculateBlackPoints(a,o,c,r,i),d=new Ta(r,i);e.calculateThresholdForBlock(a,o,c,r,i,u,d),this.matrix=d}else this.matrix=n.prototype.getBlackMatrix.call(this);return this.matrix},e.prototype.createBinarizer=function(t){return new e(t)},e.calculateThresholdForBlock=function(t,r,i,a,o,c,u){for(var d=o-e.BLOCK_SIZE,m=a-e.BLOCK_SIZE,g=0;g<i;g++){var _=g<<e.BLOCK_SIZE_POWER;_>d&&(_=d);for(var w=e.cap(g,2,i-3),A=0;A<r;A++){var S=A<<e.BLOCK_SIZE_POWER;S>m&&(S=m);for(var D=e.cap(A,2,r-3),C=0,k=-2;k<=2;k++){var V=c[w+k];C+=V[D-2]+V[D-1]+V[D]+V[D+1]+V[D+2]}var z=C/25;e.thresholdBlock(t,S,_,z,a,u)}}},e.cap=function(t,r,i){return t<r?r:t>i?i:t},e.thresholdBlock=function(t,r,i,a,o,c){for(var u=0,d=i*o+r;u<e.BLOCK_SIZE;u++,d+=o)for(var m=0;m<e.BLOCK_SIZE;m++)(t[d+m]&255)<=a&&c.set(r+m,i+u)},e.calculateBlackPoints=function(t,r,i,a,o){for(var c=o-e.BLOCK_SIZE,u=a-e.BLOCK_SIZE,d=new Array(i),m=0;m<i;m++){d[m]=new Int32Array(r);var g=m<<e.BLOCK_SIZE_POWER;g>c&&(g=c);for(var _=0;_<r;_++){var w=_<<e.BLOCK_SIZE_POWER;w>u&&(w=u);for(var A=0,S=255,D=0,C=0,k=g*a+w;C<e.BLOCK_SIZE;C++,k+=a){for(var V=0;V<e.BLOCK_SIZE;V++){var z=t[k+V]&255;A+=z,z<S&&(S=z),z>D&&(D=z)}if(D-S>e.MIN_DYNAMIC_RANGE)for(C++,k+=a;C<e.BLOCK_SIZE;C++,k+=a)for(var V=0;V<e.BLOCK_SIZE;V++)A+=t[k+V]&255}var q=A>>e.BLOCK_SIZE_POWER*2;if(D-S<=e.MIN_DYNAMIC_RANGE&&(q=S/2,m>0&&_>0)){var $=(d[m-1][_]+2*d[m][_-1]+d[m-1][_-1])/4;S<$&&(q=$)}d[m][_]=q}}return d},e.BLOCK_SIZE_POWER=3,e.BLOCK_SIZE=1<<e.BLOCK_SIZE_POWER,e.BLOCK_SIZE_MASK=e.BLOCK_SIZE-1,e.MINIMUM_DIMENSION=e.BLOCK_SIZE*5,e.MIN_DYNAMIC_RANGE=24,e})(rk),Zf=(function(){function n(e,t){this.width=e,this.height=t}return n.prototype.getWidth=function(){return this.width},n.prototype.getHeight=function(){return this.height},n.prototype.isCropSupported=function(){return!1},n.prototype.crop=function(e,t,r,i){throw new Jh("This luminance source does not support cropping.")},n.prototype.isRotateSupported=function(){return!1},n.prototype.rotateCounterClockwise=function(){throw new Jh("This luminance source does not support rotation by 90 degrees.")},n.prototype.rotateCounterClockwise45=function(){throw new Jh("This luminance source does not support rotation by 45 degrees.")},n.prototype.toString=function(){for(var e=new Uint8ClampedArray(this.width),t=new nt,r=0;r<this.height;r++){for(var i=this.getRow(r,e),a=0;a<this.width;a++){var o=i[a]&255,c=void 0;o<64?c="#":o<128?c="+":o<192?c=".":c=" ",t.append(c)}t.append(`
`)}return t.toString()},n})(),ak=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),xp=(function(n){ak(e,n);function e(t){var r=n.call(this,t.getWidth(),t.getHeight())||this;return r.delegate=t,r}return e.prototype.getRow=function(t,r){for(var i=this.delegate.getRow(t,r),a=this.getWidth(),o=0;o<a;o++)i[o]=255-(i[o]&255);return i},e.prototype.getMatrix=function(){for(var t=this.delegate.getMatrix(),r=this.getWidth()*this.getHeight(),i=new Uint8ClampedArray(r),a=0;a<r;a++)i[a]=255-(t[a]&255);return i},e.prototype.isCropSupported=function(){return this.delegate.isCropSupported()},e.prototype.crop=function(t,r,i,a){return new e(this.delegate.crop(t,r,i,a))},e.prototype.isRotateSupported=function(){return this.delegate.isRotateSupported()},e.prototype.invert=function(){return this.delegate},e.prototype.rotateCounterClockwise=function(){return new e(this.delegate.rotateCounterClockwise())},e.prototype.rotateCounterClockwise45=function(){return new e(this.delegate.rotateCounterClockwise45())},e})(Zf),sk=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),ok=(function(n){sk(e,n);function e(t,r){r===void 0&&(r=!1);var i=n.call(this,t.width,t.height)||this;return i.canvas=t,i.tempCanvasElement=null,i.buffer=e.makeBufferFromCanvasImageData(t,r),i}return e.makeBufferFromCanvasImageData=function(t,r){r===void 0&&(r=!1);var i=t.getContext("2d").getImageData(0,0,t.width,t.height);return e.toGrayscaleBuffer(i.data,t.width,t.height,r)},e.toGrayscaleBuffer=function(t,r,i,a){a===void 0&&(a=!1);var o=new Uint8ClampedArray(r*i);if(e.FRAME_INDEX=!e.FRAME_INDEX,e.FRAME_INDEX||!a)for(var c=0,u=0,d=t.length;c<d;c+=4,u++){var m=void 0,g=t[c+3];if(g===0)m=255;else{var _=t[c],w=t[c+1],A=t[c+2];m=306*_+601*w+117*A+512>>10}o[u]=m}else for(var c=0,u=0,S=t.length;c<S;c+=4,u++){var m=void 0,g=t[c+3];if(g===0)m=255;else{var _=t[c],w=t[c+1],A=t[c+2];m=306*_+601*w+117*A+512>>10}o[u]=255-m}return o},e.prototype.getRow=function(t,r){if(t<0||t>=this.getHeight())throw new Be("Requested row is outside the image: "+t);var i=this.getWidth(),a=t*i;return r===null?r=this.buffer.slice(a,a+i):(r.length<i&&(r=new Uint8ClampedArray(i)),r.set(this.buffer.slice(a,a+i))),r},e.prototype.getMatrix=function(){return this.buffer},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(t,r,i,a){return n.prototype.crop.call(this,t,r,i,a),this},e.prototype.isRotateSupported=function(){return!0},e.prototype.rotateCounterClockwise=function(){return this.rotate(-90),this},e.prototype.rotateCounterClockwise45=function(){return this.rotate(-45),this},e.prototype.getTempCanvasElement=function(){if(this.tempCanvasElement===null){var t=this.canvas.ownerDocument.createElement("canvas");t.width=this.canvas.width,t.height=this.canvas.height,this.tempCanvasElement=t}return this.tempCanvasElement},e.prototype.rotate=function(t){var r=this.getTempCanvasElement(),i=r.getContext("2d"),a=t*e.DEGREE_TO_RADIANS,o=this.canvas.width,c=this.canvas.height,u=Math.ceil(Math.abs(Math.cos(a))*o+Math.abs(Math.sin(a))*c),d=Math.ceil(Math.abs(Math.sin(a))*o+Math.abs(Math.cos(a))*c);return r.width=u,r.height=d,i.translate(u/2,d/2),i.rotate(a),i.drawImage(this.canvas,o/-2,c/-2),this.buffer=e.makeBufferFromCanvasImageData(r),this},e.prototype.invert=function(){return new xp(this)},e.DEGREE_TO_RADIANS=Math.PI/180,e.FRAME_INDEX=!0,e})(Zf),lk=(function(){function n(e,t,r){this.deviceId=e,this.label=t,this.kind="videoinput",this.groupId=r||void 0}return n.prototype.toJSON=function(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}},n})(),Er=function(n,e,t,r){function i(a){return a instanceof t?a:new t(function(o){o(a)})}return new(t||(t=Promise))(function(a,o){function c(m){try{d(r.next(m))}catch(g){o(g)}}function u(m){try{d(r.throw(m))}catch(g){o(g)}}function d(m){m.done?a(m.value):i(m.value).then(c,u)}d((r=r.apply(n,e||[])).next())})},Ar=function(n,e){var t={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,i,a,o;return o={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function c(d){return function(m){return u([d,m])}}function u(d){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,i&&(a=d[0]&2?i.return:d[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,d[1])).done)return a;switch(i=0,a&&(d=[d[0]&2,a.value]),d[0]){case 0:case 1:a=d;break;case 4:return t.label++,{value:d[1],done:!1};case 5:t.label++,i=d[1],d=[0];continue;case 7:d=t.ops.pop(),t.trys.pop();continue;default:if(a=t.trys,!(a=a.length>0&&a[a.length-1])&&(d[0]===6||d[0]===2)){t=0;continue}if(d[0]===3&&(!a||d[1]>a[0]&&d[1]<a[3])){t.label=d[1];break}if(d[0]===6&&t.label<a[1]){t.label=a[1],a=d;break}if(a&&t.label<a[2]){t.label=a[2],t.ops.push(d);break}a[2]&&t.ops.pop(),t.trys.pop();continue}d=e.call(n,t)}catch(m){d=[6,m],i=0}finally{r=a=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},ck=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},qc=(function(){function n(e,t,r){t===void 0&&(t=500),this.reader=e,this.timeBetweenScansMillis=t,this._hints=r,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}return Object.defineProperty(n.prototype,"hasNavigator",{get:function(){return typeof navigator<"u"},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isMediaDevicesSuported",{get:function(){return this.hasNavigator&&!!navigator.mediaDevices},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"canEnumerateDevices",{get:function(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"timeBetweenDecodingAttempts",{get:function(){return this._timeBetweenDecodingAttempts},set:function(e){this._timeBetweenDecodingAttempts=e<0?0:e},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"hints",{get:function(){return this._hints},set:function(e){this._hints=e||null},enumerable:!1,configurable:!0}),n.prototype.listVideoInputDevices=function(){return Er(this,void 0,void 0,function(){var e,t,r,i,a,o,c,u,d,m,g,_;return Ar(this,function(w){switch(w.label){case 0:if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");return[4,navigator.mediaDevices.enumerateDevices()];case 1:e=w.sent(),t=[];try{for(r=ck(e),i=r.next();!i.done;i=r.next())a=i.value,o=a.kind==="video"?"videoinput":a.kind,o==="videoinput"&&(c=a.deviceId||a.id,u=a.label||"Video device "+(t.length+1),d=a.groupId,m={deviceId:c,label:u,kind:o,groupId:d},t.push(m))}catch(A){g={error:A}}finally{try{i&&!i.done&&(_=r.return)&&_.call(r)}finally{if(g)throw g.error}}return[2,t]}})})},n.prototype.getVideoInputDevices=function(){return Er(this,void 0,void 0,function(){var e;return Ar(this,function(t){switch(t.label){case 0:return[4,this.listVideoInputDevices()];case 1:return e=t.sent(),[2,e.map(function(r){return new lk(r.deviceId,r.label)})]}})})},n.prototype.findDeviceById=function(e){return Er(this,void 0,void 0,function(){var t;return Ar(this,function(r){switch(r.label){case 0:return[4,this.listVideoInputDevices()];case 1:return t=r.sent(),t?[2,t.find(function(i){return i.deviceId===e})]:[2,null]}})})},n.prototype.decodeFromInputVideoDevice=function(e,t){return Er(this,void 0,void 0,function(){return Ar(this,function(r){switch(r.label){case 0:return[4,this.decodeOnceFromVideoDevice(e,t)];case 1:return[2,r.sent()]}})})},n.prototype.decodeOnceFromVideoDevice=function(e,t){return Er(this,void 0,void 0,function(){var r,i;return Ar(this,function(a){switch(a.label){case 0:return this.reset(),e?r={deviceId:{exact:e}}:r={facingMode:"environment"},i={video:r},[4,this.decodeOnceFromConstraints(i,t)];case 1:return[2,a.sent()]}})})},n.prototype.decodeOnceFromConstraints=function(e,t){return Er(this,void 0,void 0,function(){var r;return Ar(this,function(i){switch(i.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return r=i.sent(),[4,this.decodeOnceFromStream(r,t)];case 2:return[2,i.sent()]}})})},n.prototype.decodeOnceFromStream=function(e,t){return Er(this,void 0,void 0,function(){var r,i;return Ar(this,function(a){switch(a.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,t)];case 1:return r=a.sent(),[4,this.decodeOnce(r)];case 2:return i=a.sent(),[2,i]}})})},n.prototype.decodeFromInputVideoDeviceContinuously=function(e,t,r){return Er(this,void 0,void 0,function(){return Ar(this,function(i){switch(i.label){case 0:return[4,this.decodeFromVideoDevice(e,t,r)];case 1:return[2,i.sent()]}})})},n.prototype.decodeFromVideoDevice=function(e,t,r){return Er(this,void 0,void 0,function(){var i,a;return Ar(this,function(o){switch(o.label){case 0:return e?i={deviceId:{exact:e}}:i={facingMode:"environment"},a={video:i},[4,this.decodeFromConstraints(a,t,r)];case 1:return[2,o.sent()]}})})},n.prototype.decodeFromConstraints=function(e,t,r){return Er(this,void 0,void 0,function(){var i;return Ar(this,function(a){switch(a.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return i=a.sent(),[4,this.decodeFromStream(i,t,r)];case 2:return[2,a.sent()]}})})},n.prototype.decodeFromStream=function(e,t,r){return Er(this,void 0,void 0,function(){var i;return Ar(this,function(a){switch(a.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,t)];case 1:return i=a.sent(),[4,this.decodeContinuously(i,r)];case 2:return[2,a.sent()]}})})},n.prototype.stopAsyncDecode=function(){this._stopAsyncDecode=!0},n.prototype.stopContinuousDecode=function(){this._stopContinuousDecode=!0},n.prototype.attachStreamToVideo=function(e,t){return Er(this,void 0,void 0,function(){var r;return Ar(this,function(i){switch(i.label){case 0:return r=this.prepareVideoElement(t),this.addVideoSource(r,e),this.videoElement=r,this.stream=e,[4,this.playVideoOnLoadAsync(r)];case 1:return i.sent(),[2,r]}})})},n.prototype.playVideoOnLoadAsync=function(e){var t=this;return new Promise(function(r,i){return t.playVideoOnLoad(e,function(){return r()})})},n.prototype.playVideoOnLoad=function(e,t){var r=this;this.videoEndedListener=function(){return r.stopStreams()},this.videoCanPlayListener=function(){return r.tryPlayVideo(e)},e.addEventListener("ended",this.videoEndedListener),e.addEventListener("canplay",this.videoCanPlayListener),e.addEventListener("playing",t),this.tryPlayVideo(e)},n.prototype.isVideoPlaying=function(e){return e.currentTime>0&&!e.paused&&!e.ended&&e.readyState>2},n.prototype.tryPlayVideo=function(e){return Er(this,void 0,void 0,function(){return Ar(this,function(t){switch(t.label){case 0:if(this.isVideoPlaying(e))return console.warn("Trying to play video that is already playing."),[2];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,e.play()];case 2:return t.sent(),[3,4];case 3:return t.sent(),console.warn("It was not possible to play the video."),[3,4];case 4:return[2]}})})},n.prototype.getMediaElement=function(e,t){var r=document.getElementById(e);if(!r)throw new pn("element with id '"+e+"' not found");if(r.nodeName.toLowerCase()!==t.toLowerCase())throw new pn("element with id '"+e+"' must be an "+t+" element");return r},n.prototype.decodeFromImage=function(e,t){if(!e&&!t)throw new pn("either imageElement with a src set or an url must be provided");return t&&!e?this.decodeFromImageUrl(t):this.decodeFromImageElement(e)},n.prototype.decodeFromVideo=function(e,t){if(!e&&!t)throw new pn("Either an element with a src set or an URL must be provided");return t&&!e?this.decodeFromVideoUrl(t):this.decodeFromVideoElement(e)},n.prototype.decodeFromVideoContinuously=function(e,t,r){if(e===void 0&&t===void 0)throw new pn("Either an element with a src set or an URL must be provided");return t&&!e?this.decodeFromVideoUrlContinuously(t,r):this.decodeFromVideoElementContinuously(e,r)},n.prototype.decodeFromImageElement=function(e){if(!e)throw new pn("An image element must be provided.");this.reset();var t=this.prepareImageElement(e);this.imageElement=t;var r;return this.isImageLoaded(t)?r=this.decodeOnce(t,!1,!0):r=this._decodeOnLoadImage(t),r},n.prototype.decodeFromVideoElement=function(e){var t=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideo(t)},n.prototype.decodeFromVideoElementContinuously=function(e,t){var r=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideoContinuously(r,t)},n.prototype._decodeFromVideoElementSetup=function(e){if(!e)throw new pn("A video element must be provided.");this.reset();var t=this.prepareVideoElement(e);return this.videoElement=t,t},n.prototype.decodeFromImageUrl=function(e){if(!e)throw new pn("An URL must be provided.");this.reset();var t=this.prepareImageElement();this.imageElement=t;var r=this._decodeOnLoadImage(t);return t.src=e,r},n.prototype.decodeFromVideoUrl=function(e){if(!e)throw new pn("An URL must be provided.");this.reset();var t=this.prepareVideoElement(),r=this.decodeFromVideoElement(t);return t.src=e,r},n.prototype.decodeFromVideoUrlContinuously=function(e,t){if(!e)throw new pn("An URL must be provided.");this.reset();var r=this.prepareVideoElement(),i=this.decodeFromVideoElementContinuously(r,t);return r.src=e,i},n.prototype._decodeOnLoadImage=function(e){var t=this;return new Promise(function(r,i){t.imageLoadedListener=function(){return t.decodeOnce(e,!1,!0).then(r,i)},e.addEventListener("load",t.imageLoadedListener)})},n.prototype._decodeOnLoadVideo=function(e){return Er(this,void 0,void 0,function(){return Ar(this,function(t){switch(t.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return t.sent(),[4,this.decodeOnce(e)];case 2:return[2,t.sent()]}})})},n.prototype._decodeOnLoadVideoContinuously=function(e,t){return Er(this,void 0,void 0,function(){return Ar(this,function(r){switch(r.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return r.sent(),this.decodeContinuously(e,t),[2]}})})},n.prototype.isImageLoaded=function(e){return!(!e.complete||e.naturalWidth===0)},n.prototype.prepareImageElement=function(e){var t;return typeof e>"u"&&(t=document.createElement("img"),t.width=200,t.height=200),typeof e=="string"&&(t=this.getMediaElement(e,"img")),e instanceof HTMLImageElement&&(t=e),t},n.prototype.prepareVideoElement=function(e){var t;return!e&&typeof document<"u"&&(t=document.createElement("video"),t.width=200,t.height=200),typeof e=="string"&&(t=this.getMediaElement(e,"video")),e instanceof HTMLVideoElement&&(t=e),t.setAttribute("autoplay","true"),t.setAttribute("muted","true"),t.setAttribute("playsinline","true"),t},n.prototype.decodeOnce=function(e,t,r){var i=this;t===void 0&&(t=!0),r===void 0&&(r=!0),this._stopAsyncDecode=!1;var a=function(o,c){if(i._stopAsyncDecode){c(new oe("Video stream has ended before any code could be detected.")),i._stopAsyncDecode=void 0;return}try{var u=i.decode(e);o(u)}catch(_){var d=t&&_ instanceof oe,m=_ instanceof Cn||_ instanceof _e,g=m&&r;if(d||g)return setTimeout(a,i._timeBetweenDecodingAttempts,o,c);c(_)}};return new Promise(function(o,c){return a(o,c)})},n.prototype.decodeContinuously=function(e,t){var r=this;this._stopContinuousDecode=!1;var i=function(){if(r._stopContinuousDecode){r._stopContinuousDecode=void 0;return}try{var a=r.decode(e);t(a,null),setTimeout(i,r.timeBetweenScansMillis)}catch(u){t(null,u);var o=u instanceof Cn||u instanceof _e,c=u instanceof oe;(o||c)&&setTimeout(i,r._timeBetweenDecodingAttempts)}};i()},n.prototype.decode=function(e){var t=this.createBinaryBitmap(e);return this.decodeBitmap(t)},n.prototype.createBinaryBitmap=function(e){this.getCaptureCanvasContext(e);var t=!1;e instanceof HTMLVideoElement?(this.drawFrameOnCanvas(e),t=!0):this.drawImageOnCanvas(e);var r=this.getCaptureCanvas(e),i=new ok(r,t),a=new R3(i);return new N3(a)},n.prototype.getCaptureCanvasContext=function(e){if(!this.captureCanvasContext){var t=this.getCaptureCanvas(e),r=void 0;try{r=t.getContext("2d",{willReadFrequently:!0})}catch{r=t.getContext("2d")}this.captureCanvasContext=r}return this.captureCanvasContext},n.prototype.getCaptureCanvas=function(e){if(!this.captureCanvas){var t=this.createCaptureCanvas(e);this.captureCanvas=t}return this.captureCanvas},n.prototype.drawFrameOnCanvas=function(e,t,r){t===void 0&&(t={sx:0,sy:0,sWidth:e.videoWidth,sHeight:e.videoHeight,dx:0,dy:0,dWidth:e.videoWidth,dHeight:e.videoHeight}),r===void 0&&(r=this.captureCanvasContext),r.drawImage(e,t.sx,t.sy,t.sWidth,t.sHeight,t.dx,t.dy,t.dWidth,t.dHeight)},n.prototype.drawImageOnCanvas=function(e,t,r){t===void 0&&(t={sx:0,sy:0,sWidth:e.naturalWidth,sHeight:e.naturalHeight,dx:0,dy:0,dWidth:e.naturalWidth,dHeight:e.naturalHeight}),r===void 0&&(r=this.captureCanvasContext),r.drawImage(e,t.sx,t.sy,t.sWidth,t.sHeight,t.dx,t.dy,t.dWidth,t.dHeight)},n.prototype.decodeBitmap=function(e){return this.reader.decode(e,this._hints)},n.prototype.createCaptureCanvas=function(e){if(typeof document>"u")return this._destroyCaptureCanvas(),null;var t=document.createElement("canvas"),r,i;return typeof e<"u"&&(e instanceof HTMLVideoElement?(r=e.videoWidth,i=e.videoHeight):e instanceof HTMLImageElement&&(r=e.naturalWidth||e.width,i=e.naturalHeight||e.height)),t.style.width=r+"px",t.style.height=i+"px",t.width=r,t.height=i,t},n.prototype.stopStreams=function(){this.stream&&(this.stream.getVideoTracks().forEach(function(e){return e.stop()}),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()},n.prototype.reset=function(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()},n.prototype._destroyVideoElement=function(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)},n.prototype._destroyImageElement=function(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)},n.prototype._destroyCaptureCanvas=function(){this.captureCanvasContext=void 0,this.captureCanvas=void 0},n.prototype.addVideoSource=function(e,t){try{e.srcObject=t}catch{e.src=URL.createObjectURL(t)}},n.prototype.cleanVideoSource=function(e){try{e.srcObject=null}catch{e.src=""}this.videoElement.removeAttribute("src")},n})(),yr=(function(){function n(e,t,r,i,a,o){r===void 0&&(r=t==null?0:8*t.length),o===void 0&&(o=Ht.currentTimeMillis()),this.text=e,this.rawBytes=t,this.numBits=r,this.resultPoints=i,this.format=a,this.timestamp=o,this.text=e,this.rawBytes=t,r==null?this.numBits=t==null?0:8*t.length:this.numBits=r,this.resultPoints=i,this.format=a,this.resultMetadata=null,o==null?this.timestamp=Ht.currentTimeMillis():this.timestamp=o}return n.prototype.getText=function(){return this.text},n.prototype.getRawBytes=function(){return this.rawBytes},n.prototype.getNumBits=function(){return this.numBits},n.prototype.getResultPoints=function(){return this.resultPoints},n.prototype.getBarcodeFormat=function(){return this.format},n.prototype.getResultMetadata=function(){return this.resultMetadata},n.prototype.putMetadata=function(e,t){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(e,t)},n.prototype.putAllMetadata=function(e){e!==null&&(this.resultMetadata===null?this.resultMetadata=e:this.resultMetadata=new Map(e))},n.prototype.addResultPoints=function(e){var t=this.resultPoints;if(t===null)this.resultPoints=e;else if(e!==null&&e.length>0){var r=new Array(t.length+e.length);Ht.arraycopy(t,0,r,0,t.length),Ht.arraycopy(e,0,r,t.length,e.length),this.resultPoints=r}},n.prototype.getTimestamp=function(){return this.timestamp},n.prototype.toString=function(){return this.text},n})(),dv;(function(n){n[n.AZTEC=0]="AZTEC",n[n.CODABAR=1]="CODABAR",n[n.CODE_39=2]="CODE_39",n[n.CODE_93=3]="CODE_93",n[n.CODE_128=4]="CODE_128",n[n.DATA_MATRIX=5]="DATA_MATRIX",n[n.EAN_8=6]="EAN_8",n[n.EAN_13=7]="EAN_13",n[n.ITF=8]="ITF",n[n.MAXICODE=9]="MAXICODE",n[n.PDF_417=10]="PDF_417",n[n.QR_CODE=11]="QR_CODE",n[n.RSS_14=12]="RSS_14",n[n.RSS_EXPANDED=13]="RSS_EXPANDED",n[n.UPC_A=14]="UPC_A",n[n.UPC_E=15]="UPC_E",n[n.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(dv||(dv={}));const Le=dv;var hv;(function(n){n[n.OTHER=0]="OTHER",n[n.ORIENTATION=1]="ORIENTATION",n[n.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",n[n.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",n[n.ISSUE_NUMBER=4]="ISSUE_NUMBER",n[n.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",n[n.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",n[n.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",n[n.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",n[n.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",n[n.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(hv||(hv={}));const or=hv;var wp=(function(){function n(e,t,r,i,a,o){a===void 0&&(a=-1),o===void 0&&(o=-1),this.rawBytes=e,this.text=t,this.byteSegments=r,this.ecLevel=i,this.structuredAppendSequenceNumber=a,this.structuredAppendParity=o,this.numBits=e==null?0:8*e.length}return n.prototype.getRawBytes=function(){return this.rawBytes},n.prototype.getNumBits=function(){return this.numBits},n.prototype.setNumBits=function(e){this.numBits=e},n.prototype.getText=function(){return this.text},n.prototype.getByteSegments=function(){return this.byteSegments},n.prototype.getECLevel=function(){return this.ecLevel},n.prototype.getErrorsCorrected=function(){return this.errorsCorrected},n.prototype.setErrorsCorrected=function(e){this.errorsCorrected=e},n.prototype.getErasures=function(){return this.erasures},n.prototype.setErasures=function(e){this.erasures=e},n.prototype.getOther=function(){return this.other},n.prototype.setOther=function(e){this.other=e},n.prototype.hasStructuredAppend=function(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0},n.prototype.getStructuredAppendParity=function(){return this.structuredAppendParity},n.prototype.getStructuredAppendSequenceNumber=function(){return this.structuredAppendSequenceNumber},n})(),lf=(function(){function n(){}return n.prototype.exp=function(e){return this.expTable[e]},n.prototype.log=function(e){if(e===0)throw new Be;return this.logTable[e]},n.addOrSubtract=function(e,t){return e^t},n})(),no=(function(){function n(e,t){if(t.length===0)throw new Be;this.field=e;var r=t.length;if(r>1&&t[0]===0){for(var i=1;i<r&&t[i]===0;)i++;i===r?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(r-i),Ht.arraycopy(t,i,this.coefficients,0,this.coefficients.length))}else this.coefficients=t}return n.prototype.getCoefficients=function(){return this.coefficients},n.prototype.getDegree=function(){return this.coefficients.length-1},n.prototype.isZero=function(){return this.coefficients[0]===0},n.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},n.prototype.evaluateAt=function(e){if(e===0)return this.getCoefficient(0);var t=this.coefficients,r;if(e===1){r=0;for(var i=0,a=t.length;i!==a;i++){var o=t[i];r=lf.addOrSubtract(r,o)}return r}r=t[0];for(var c=t.length,u=this.field,i=1;i<c;i++)r=lf.addOrSubtract(u.multiply(e,r),t[i]);return r},n.prototype.addOrSubtract=function(e){if(!this.field.equals(e.field))throw new Be("GenericGFPolys do not have same GenericGF field");if(this.isZero())return e;if(e.isZero())return this;var t=this.coefficients,r=e.coefficients;if(t.length>r.length){var i=t;t=r,r=i}var a=new Int32Array(r.length),o=r.length-t.length;Ht.arraycopy(r,0,a,0,o);for(var c=o;c<r.length;c++)a[c]=lf.addOrSubtract(t[c-o],r[c]);return new n(this.field,a)},n.prototype.multiply=function(e){if(!this.field.equals(e.field))throw new Be("GenericGFPolys do not have same GenericGF field");if(this.isZero()||e.isZero())return this.field.getZero();for(var t=this.coefficients,r=t.length,i=e.coefficients,a=i.length,o=new Int32Array(r+a-1),c=this.field,u=0;u<r;u++)for(var d=t[u],m=0;m<a;m++)o[u+m]=lf.addOrSubtract(o[u+m],c.multiply(d,i[m]));return new n(c,o)},n.prototype.multiplyScalar=function(e){if(e===0)return this.field.getZero();if(e===1)return this;for(var t=this.coefficients.length,r=this.field,i=new Int32Array(t),a=this.coefficients,o=0;o<t;o++)i[o]=r.multiply(a[o],e);return new n(r,i)},n.prototype.multiplyByMonomial=function(e,t){if(e<0)throw new Be;if(t===0)return this.field.getZero();for(var r=this.coefficients,i=r.length,a=new Int32Array(i+e),o=this.field,c=0;c<i;c++)a[c]=o.multiply(r[c],t);return new n(o,a)},n.prototype.divide=function(e){if(!this.field.equals(e.field))throw new Be("GenericGFPolys do not have same GenericGF field");if(e.isZero())throw new Be("Divide by 0");for(var t=this.field,r=t.getZero(),i=this,a=e.getCoefficient(e.getDegree()),o=t.inverse(a);i.getDegree()>=e.getDegree()&&!i.isZero();){var c=i.getDegree()-e.getDegree(),u=t.multiply(i.getCoefficient(i.getDegree()),o),d=e.multiplyByMonomial(c,u),m=t.buildMonomial(c,u);r=r.addOrSubtract(m),i=i.addOrSubtract(d)}return[r,i]},n.prototype.toString=function(){for(var e="",t=this.getDegree();t>=0;t--){var r=this.getCoefficient(t);if(r!==0){if(r<0?(e+=" - ",r=-r):e.length>0&&(e+=" + "),t===0||r!==1){var i=this.field.log(r);i===0?e+="1":i===1?e+="a":(e+="a^",e+=i)}t!==0&&(t===1?e+="x":(e+="x^",e+=t))}}return e},n})(),uk=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),O3=(function(n){uk(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="ArithmeticException",e})(Br),fk=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),kr=(function(n){fk(e,n);function e(t,r,i){var a=n.call(this)||this;a.primitive=t,a.size=r,a.generatorBase=i;for(var o=new Int32Array(r),c=1,u=0;u<r;u++)o[u]=c,c*=2,c>=r&&(c^=t,c&=r-1);a.expTable=o;for(var d=new Int32Array(r),u=0;u<r-1;u++)d[o[u]]=u;return a.logTable=d,a.zero=new no(a,Int32Array.from([0])),a.one=new no(a,Int32Array.from([1])),a}return e.prototype.getZero=function(){return this.zero},e.prototype.getOne=function(){return this.one},e.prototype.buildMonomial=function(t,r){if(t<0)throw new Be;if(r===0)return this.zero;var i=new Int32Array(t+1);return i[0]=r,new no(this,i)},e.prototype.inverse=function(t){if(t===0)throw new O3;return this.expTable[this.size-this.logTable[t]-1]},e.prototype.multiply=function(t,r){return t===0||r===0?0:this.expTable[(this.logTable[t]+this.logTable[r])%(this.size-1)]},e.prototype.getSize=function(){return this.size},e.prototype.getGeneratorBase=function(){return this.generatorBase},e.prototype.toString=function(){return"GF(0x"+it.toHexString(this.primitive)+","+this.size+")"},e.prototype.equals=function(t){return t===this},e.AZTEC_DATA_12=new e(4201,4096,1),e.AZTEC_DATA_10=new e(1033,1024,1),e.AZTEC_DATA_6=new e(67,64,1),e.AZTEC_PARAM=new e(19,16,1),e.QR_CODE_FIELD_256=new e(285,256,0),e.DATA_MATRIX_FIELD_256=new e(301,256,1),e.AZTEC_DATA_8=e.DATA_MATRIX_FIELD_256,e.MAXICODE_FIELD_64=e.AZTEC_DATA_6,e})(lf),dk=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Ph=(function(n){dk(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="ReedSolomonException",e})(Br),hk=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Jf=(function(n){hk(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="IllegalStateException",e})(Br),Ep=(function(){function n(e){this.field=e}return n.prototype.decode=function(e,t){for(var r=this.field,i=new no(r,e),a=new Int32Array(t),o=!0,c=0;c<t;c++){var u=i.evaluateAt(r.exp(c+r.getGeneratorBase()));a[a.length-1-c]=u,u!==0&&(o=!1)}if(!o)for(var d=new no(r,a),m=this.runEuclideanAlgorithm(r.buildMonomial(t,1),d,t),g=m[0],_=m[1],w=this.findErrorLocations(g),A=this.findErrorMagnitudes(_,w),c=0;c<w.length;c++){var S=e.length-1-r.log(w[c]);if(S<0)throw new Ph("Bad error location");e[S]=kr.addOrSubtract(e[S],A[c])}},n.prototype.runEuclideanAlgorithm=function(e,t,r){if(e.getDegree()<t.getDegree()){var i=e;e=t,t=i}for(var a=this.field,o=e,c=t,u=a.getZero(),d=a.getOne();c.getDegree()>=(r/2|0);){var m=o,g=u;if(o=c,u=d,o.isZero())throw new Ph("r_{i-1} was zero");c=m;for(var _=a.getZero(),w=o.getCoefficient(o.getDegree()),A=a.inverse(w);c.getDegree()>=o.getDegree()&&!c.isZero();){var S=c.getDegree()-o.getDegree(),D=a.multiply(c.getCoefficient(c.getDegree()),A);_=_.addOrSubtract(a.buildMonomial(S,D)),c=c.addOrSubtract(o.multiplyByMonomial(S,D))}if(d=_.multiply(u).addOrSubtract(g),c.getDegree()>=o.getDegree())throw new Jf("Division algorithm failed to reduce polynomial?")}var C=d.getCoefficient(0);if(C===0)throw new Ph("sigmaTilde(0) was zero");var k=a.inverse(C),V=d.multiplyScalar(k),z=c.multiplyScalar(k);return[V,z]},n.prototype.findErrorLocations=function(e){var t=e.getDegree();if(t===1)return Int32Array.from([e.getCoefficient(1)]);for(var r=new Int32Array(t),i=0,a=this.field,o=1;o<a.getSize()&&i<t;o++)e.evaluateAt(o)===0&&(r[i]=a.inverse(o),i++);if(i!==t)throw new Ph("Error locator degree does not match number of roots");return r},n.prototype.findErrorMagnitudes=function(e,t){for(var r=t.length,i=new Int32Array(r),a=this.field,o=0;o<r;o++){for(var c=a.inverse(t[o]),u=1,d=0;d<r;d++)if(o!==d){var m=a.multiply(t[d],c),g=(m&1)===0?m|1:m&-2;u=a.multiply(u,g)}i[o]=a.multiply(e.evaluateAt(c),a.inverse(u)),a.getGeneratorBase()!==0&&(i[o]=a.multiply(i[o],c))}return i},n})(),nr;(function(n){n[n.UPPER=0]="UPPER",n[n.LOWER=1]="LOWER",n[n.MIXED=2]="MIXED",n[n.DIGIT=3]="DIGIT",n[n.PUNCT=4]="PUNCT",n[n.BINARY=5]="BINARY"})(nr||(nr={}));var RA=(function(){function n(){}return n.prototype.decode=function(e){this.ddata=e;var t=e.getBits(),r=this.extractBits(t),i=this.correctBits(r),a=n.convertBoolArrayToByteArray(i),o=n.getEncodedData(i),c=new wp(a,o,null,null);return c.setNumBits(i.length),c},n.highLevelDecode=function(e){return this.getEncodedData(e)},n.getEncodedData=function(e){for(var t=e.length,r=nr.UPPER,i=nr.UPPER,a="",o=0;o<t;)if(i===nr.BINARY){if(t-o<5)break;var c=n.readCode(e,o,5);if(o+=5,c===0){if(t-o<11)break;c=n.readCode(e,o,11)+31,o+=11}for(var u=0;u<c;u++){if(t-o<8){o=t;break}var d=n.readCode(e,o,8);a+=pt.castAsNonUtf8Char(d),o+=8}i=r}else{var m=i===nr.DIGIT?4:5;if(t-o<m)break;var d=n.readCode(e,o,m);o+=m;var g=n.getCharacter(i,d);g.startsWith("CTRL_")?(r=i,i=n.getTable(g.charAt(5)),g.charAt(6)==="L"&&(r=i)):(a+=g,i=r)}return a},n.getTable=function(e){switch(e){case"L":return nr.LOWER;case"P":return nr.PUNCT;case"M":return nr.MIXED;case"D":return nr.DIGIT;case"B":return nr.BINARY;case"U":default:return nr.UPPER}},n.getCharacter=function(e,t){switch(e){case nr.UPPER:return n.UPPER_TABLE[t];case nr.LOWER:return n.LOWER_TABLE[t];case nr.MIXED:return n.MIXED_TABLE[t];case nr.PUNCT:return n.PUNCT_TABLE[t];case nr.DIGIT:return n.DIGIT_TABLE[t];default:throw new Jf("Bad table")}},n.prototype.correctBits=function(e){var t,r;this.ddata.getNbLayers()<=2?(r=6,t=kr.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(r=8,t=kr.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(r=10,t=kr.AZTEC_DATA_10):(r=12,t=kr.AZTEC_DATA_12);var i=this.ddata.getNbDatablocks(),a=e.length/r;if(a<i)throw new _e;for(var o=e.length%r,c=new Int32Array(a),u=0;u<a;u++,o+=r)c[u]=n.readCode(e,o,r);try{var d=new Ep(t);d.decode(c,a-i)}catch(D){throw new _e(D)}for(var m=(1<<r)-1,g=0,u=0;u<i;u++){var _=c[u];if(_===0||_===m)throw new _e;(_===1||_===m-1)&&g++}for(var w=new Array(i*r-g),A=0,u=0;u<i;u++){var _=c[u];if(_===1||_===m-1)w.fill(_>1,A,A+r-1),A+=r-1;else for(var S=r-1;S>=0;--S)w[A++]=(_&1<<S)!==0}return w},n.prototype.extractBits=function(e){var t=this.ddata.isCompact(),r=this.ddata.getNbLayers(),i=(t?11:14)+r*4,a=new Int32Array(i),o=new Array(this.totalBitsInLayer(r,t));if(t)for(var c=0;c<a.length;c++)a[c]=c;else for(var u=i+1+2*it.truncDivision(it.truncDivision(i,2)-1,15),d=i/2,m=it.truncDivision(u,2),c=0;c<d;c++){var g=c+it.truncDivision(c,15);a[d-c-1]=m-g-1,a[d+c]=m+g+1}for(var c=0,_=0;c<r;c++){for(var w=(r-c)*4+(t?9:12),A=c*2,S=i-1-A,D=0;D<w;D++)for(var C=D*2,k=0;k<2;k++)o[_+C+k]=e.get(a[A+k],a[A+D]),o[_+2*w+C+k]=e.get(a[A+D],a[S-k]),o[_+4*w+C+k]=e.get(a[S-k],a[S-D]),o[_+6*w+C+k]=e.get(a[S-D],a[A+k]);_+=w*8}return o},n.readCode=function(e,t,r){for(var i=0,a=t;a<t+r;a++)i<<=1,e[a]&&(i|=1);return i},n.readByte=function(e,t){var r=e.length-t;return r>=8?n.readCode(e,t,8):n.readCode(e,t,r)<<8-r},n.convertBoolArrayToByteArray=function(e){for(var t=new Uint8Array((e.length+7)/8),r=0;r<t.length;r++)t[r]=n.readByte(e,8*r);return t},n.prototype.totalBitsInLayer=function(e,t){return((t?88:112)+16*e)*e},n.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],n.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],n.MIXED_TABLE=["CTRL_PS"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~","","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],n.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],n.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"],n})(),wt=(function(){function n(){}return n.round=function(e){return isNaN(e)?0:e<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:e>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:e+(e<0?-.5:.5)|0},n.distance=function(e,t,r,i){var a=e-r,o=t-i;return Math.sqrt(a*a+o*o)},n.sum=function(e){for(var t=0,r=0,i=e.length;r!==i;r++){var a=e[r];t+=a}return t},n})(),pv=(function(){function n(){}return n.floatToIntBits=function(e){return e},n.MAX_VALUE=Number.MAX_SAFE_INTEGER,n})(),Ne=(function(){function n(e,t){this.x=e,this.y=t}return n.prototype.getX=function(){return this.x},n.prototype.getY=function(){return this.y},n.prototype.equals=function(e){if(e instanceof n){var t=e;return this.x===t.x&&this.y===t.y}return!1},n.prototype.hashCode=function(){return 31*pv.floatToIntBits(this.x)+pv.floatToIntBits(this.y)},n.prototype.toString=function(){return"("+this.x+","+this.y+")"},n.orderBestPatterns=function(e){var t=this.distance(e[0],e[1]),r=this.distance(e[1],e[2]),i=this.distance(e[0],e[2]),a,o,c;if(r>=t&&r>=i?(o=e[0],a=e[1],c=e[2]):i>=r&&i>=t?(o=e[1],a=e[0],c=e[2]):(o=e[2],a=e[0],c=e[1]),this.crossProductZ(a,o,c)<0){var u=a;a=c,c=u}e[0]=a,e[1]=o,e[2]=c},n.distance=function(e,t){return wt.distance(e.x,e.y,t.x,t.y)},n.crossProductZ=function(e,t,r){var i=t.x,a=t.y;return(r.x-i)*(e.y-a)-(r.y-a)*(e.x-i)},n})(),$y=(function(){function n(e,t){this.bits=e,this.points=t}return n.prototype.getBits=function(){return this.bits},n.prototype.getPoints=function(){return this.points},n})(),pk=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),mk=(function(n){pk(e,n);function e(t,r,i,a,o){var c=n.call(this,t,r)||this;return c.compact=i,c.nbDatablocks=a,c.nbLayers=o,c}return e.prototype.getNbLayers=function(){return this.nbLayers},e.prototype.getNbDatablocks=function(){return this.nbDatablocks},e.prototype.isCompact=function(){return this.compact},e})($y),mv=(function(){function n(e,t,r,i){this.image=e,this.height=e.getHeight(),this.width=e.getWidth(),t==null&&(t=n.INIT_SIZE),r==null&&(r=e.getWidth()/2|0),i==null&&(i=e.getHeight()/2|0);var a=t/2|0;if(this.leftInit=r-a,this.rightInit=r+a,this.upInit=i-a,this.downInit=i+a,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new oe}return n.prototype.detect=function(){for(var e=this.leftInit,t=this.rightInit,r=this.upInit,i=this.downInit,a=!1,o=!0,c=!1,u=!1,d=!1,m=!1,g=!1,_=this.width,w=this.height;o;){o=!1;for(var A=!0;(A||!u)&&t<_;)A=this.containsBlackPoint(r,i,t,!1),A?(t++,o=!0,u=!0):u||t++;if(t>=_){a=!0;break}for(var S=!0;(S||!d)&&i<w;)S=this.containsBlackPoint(e,t,i,!0),S?(i++,o=!0,d=!0):d||i++;if(i>=w){a=!0;break}for(var D=!0;(D||!m)&&e>=0;)D=this.containsBlackPoint(r,i,e,!1),D?(e--,o=!0,m=!0):m||e--;if(e<0){a=!0;break}for(var C=!0;(C||!g)&&r>=0;)C=this.containsBlackPoint(e,t,r,!0),C?(r--,o=!0,g=!0):g||r--;if(r<0){a=!0;break}o&&(c=!0)}if(!a&&c){for(var k=t-e,V=null,z=1;V===null&&z<k;z++)V=this.getBlackPointOnSegment(e,i-z,e+z,i);if(V==null)throw new oe;for(var q=null,z=1;q===null&&z<k;z++)q=this.getBlackPointOnSegment(e,r+z,e+z,r);if(q==null)throw new oe;for(var $=null,z=1;$===null&&z<k;z++)$=this.getBlackPointOnSegment(t,r+z,t-z,r);if($==null)throw new oe;for(var M=null,z=1;M===null&&z<k;z++)M=this.getBlackPointOnSegment(t,i-z,t-z,i);if(M==null)throw new oe;return this.centerEdges(M,V,$,q)}else throw new oe},n.prototype.getBlackPointOnSegment=function(e,t,r,i){for(var a=wt.round(wt.distance(e,t,r,i)),o=(r-e)/a,c=(i-t)/a,u=this.image,d=0;d<a;d++){var m=wt.round(e+d*o),g=wt.round(t+d*c);if(u.get(m,g))return new Ne(m,g)}return null},n.prototype.centerEdges=function(e,t,r,i){var a=e.getX(),o=e.getY(),c=t.getX(),u=t.getY(),d=r.getX(),m=r.getY(),g=i.getX(),_=i.getY(),w=n.CORR;return a<this.width/2?[new Ne(g-w,_+w),new Ne(c+w,u+w),new Ne(d-w,m-w),new Ne(a+w,o-w)]:[new Ne(g+w,_+w),new Ne(c+w,u-w),new Ne(d-w,m+w),new Ne(a-w,o-w)]},n.prototype.containsBlackPoint=function(e,t,r,i){var a=this.image;if(i){for(var o=e;o<=t;o++)if(a.get(o,r))return!0}else for(var c=e;c<=t;c++)if(a.get(r,c))return!0;return!1},n.INIT_SIZE=10,n.CORR=1,n})(),OA=(function(){function n(){}return n.checkAndNudgePoints=function(e,t){for(var r=e.getWidth(),i=e.getHeight(),a=!0,o=0;o<t.length&&a;o+=2){var c=Math.floor(t[o]),u=Math.floor(t[o+1]);if(c<-1||c>r||u<-1||u>i)throw new oe;a=!1,c===-1?(t[o]=0,a=!0):c===r&&(t[o]=r-1,a=!0),u===-1?(t[o+1]=0,a=!0):u===i&&(t[o+1]=i-1,a=!0)}a=!0;for(var o=t.length-2;o>=0&&a;o-=2){var c=Math.floor(t[o]),u=Math.floor(t[o+1]);if(c<-1||c>r||u<-1||u>i)throw new oe;a=!1,c===-1?(t[o]=0,a=!0):c===r&&(t[o]=r-1,a=!0),u===-1?(t[o+1]=0,a=!0):u===i&&(t[o+1]=i-1,a=!0)}},n})(),D3=(function(){function n(e,t,r,i,a,o,c,u,d){this.a11=e,this.a21=t,this.a31=r,this.a12=i,this.a22=a,this.a32=o,this.a13=c,this.a23=u,this.a33=d}return n.quadrilateralToQuadrilateral=function(e,t,r,i,a,o,c,u,d,m,g,_,w,A,S,D){var C=n.quadrilateralToSquare(e,t,r,i,a,o,c,u),k=n.squareToQuadrilateral(d,m,g,_,w,A,S,D);return k.times(C)},n.prototype.transformPoints=function(e){for(var t=e.length,r=this.a11,i=this.a12,a=this.a13,o=this.a21,c=this.a22,u=this.a23,d=this.a31,m=this.a32,g=this.a33,_=0;_<t;_+=2){var w=e[_],A=e[_+1],S=a*w+u*A+g;e[_]=(r*w+o*A+d)/S,e[_+1]=(i*w+c*A+m)/S}},n.prototype.transformPointsWithValues=function(e,t){for(var r=this.a11,i=this.a12,a=this.a13,o=this.a21,c=this.a22,u=this.a23,d=this.a31,m=this.a32,g=this.a33,_=e.length,w=0;w<_;w++){var A=e[w],S=t[w],D=a*A+u*S+g;e[w]=(r*A+o*S+d)/D,t[w]=(i*A+c*S+m)/D}},n.squareToQuadrilateral=function(e,t,r,i,a,o,c,u){var d=e-r+a-c,m=t-i+o-u;if(d===0&&m===0)return new n(r-e,a-r,e,i-t,o-i,t,0,0,1);var g=r-a,_=c-a,w=i-o,A=u-o,S=g*A-_*w,D=(d*A-_*m)/S,C=(g*m-d*w)/S;return new n(r-e+D*r,c-e+C*c,e,i-t+D*i,u-t+C*u,t,D,C,1)},n.quadrilateralToSquare=function(e,t,r,i,a,o,c,u){return n.squareToQuadrilateral(e,t,r,i,a,o,c,u).buildAdjoint()},n.prototype.buildAdjoint=function(){return new n(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)},n.prototype.times=function(e){return new n(this.a11*e.a11+this.a21*e.a12+this.a31*e.a13,this.a11*e.a21+this.a21*e.a22+this.a31*e.a23,this.a11*e.a31+this.a21*e.a32+this.a31*e.a33,this.a12*e.a11+this.a22*e.a12+this.a32*e.a13,this.a12*e.a21+this.a22*e.a22+this.a32*e.a23,this.a12*e.a31+this.a22*e.a32+this.a32*e.a33,this.a13*e.a11+this.a23*e.a12+this.a33*e.a13,this.a13*e.a21+this.a23*e.a22+this.a33*e.a23,this.a13*e.a31+this.a23*e.a32+this.a33*e.a33)},n})(),gk=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),vk=(function(n){gk(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.sampleGrid=function(t,r,i,a,o,c,u,d,m,g,_,w,A,S,D,C,k,V,z){var q=D3.quadrilateralToQuadrilateral(a,o,c,u,d,m,g,_,w,A,S,D,C,k,V,z);return this.sampleGridWithTransform(t,r,i,q)},e.prototype.sampleGridWithTransform=function(t,r,i,a){if(r<=0||i<=0)throw new oe;for(var o=new Ta(r,i),c=new Float32Array(2*r),u=0;u<i;u++){for(var d=c.length,m=u+.5,g=0;g<d;g+=2)c[g]=g/2+.5,c[g+1]=m;a.transformPoints(c),OA.checkAndNudgePoints(t,c);try{for(var g=0;g<d;g+=2)t.get(Math.floor(c[g]),Math.floor(c[g+1]))&&o.set(g/2,u)}catch{throw new oe}}return o},e})(OA),Xy=(function(){function n(){}return n.setGridSampler=function(e){n.gridSampler=e},n.getInstance=function(){return n.gridSampler},n.gridSampler=new vk,n})(),Mr=(function(){function n(e,t){this.x=e,this.y=t}return n.prototype.toResultPoint=function(){return new Ne(this.getX(),this.getY())},n.prototype.getX=function(){return this.x},n.prototype.getY=function(){return this.y},n})(),yk=(function(){function n(e){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=e}return n.prototype.detect=function(){return this.detectMirror(!1)},n.prototype.detectMirror=function(e){var t=this.getMatrixCenter(),r=this.getBullsEyeCorners(t);if(e){var i=r[0];r[0]=r[2],r[2]=i}this.extractParameters(r);var a=this.sampleGrid(this.image,r[this.shift%4],r[(this.shift+1)%4],r[(this.shift+2)%4],r[(this.shift+3)%4]),o=this.getMatrixCornerPoints(r);return new mk(a,o,this.compact,this.nbDataBlocks,this.nbLayers)},n.prototype.extractParameters=function(e){if(!this.isValidPoint(e[0])||!this.isValidPoint(e[1])||!this.isValidPoint(e[2])||!this.isValidPoint(e[3]))throw new oe;var t=2*this.nbCenterLayers,r=new Int32Array([this.sampleLine(e[0],e[1],t),this.sampleLine(e[1],e[2],t),this.sampleLine(e[2],e[3],t),this.sampleLine(e[3],e[0],t)]);this.shift=this.getRotation(r,t);for(var i=0,a=0;a<4;a++){var o=r[(this.shift+a)%4];this.compact?(i<<=7,i+=o>>1&127):(i<<=10,i+=(o>>2&992)+(o>>1&31))}var c=this.getCorrectedParameterData(i,this.compact);this.compact?(this.nbLayers=(c>>6)+1,this.nbDataBlocks=(c&63)+1):(this.nbLayers=(c>>11)+1,this.nbDataBlocks=(c&2047)+1)},n.prototype.getRotation=function(e,t){var r=0;e.forEach(function(a,o,c){var u=(a>>t-2<<1)+(a&1);r=(r<<3)+u}),r=((r&1)<<11)+(r>>1);for(var i=0;i<4;i++)if(it.bitCount(r^this.EXPECTED_CORNER_BITS[i])<=2)return i;throw new oe},n.prototype.getCorrectedParameterData=function(e,t){var r,i;t?(r=7,i=2):(r=10,i=4);for(var a=r-i,o=new Int32Array(r),c=r-1;c>=0;--c)o[c]=e&15,e>>=4;try{var u=new Ep(kr.AZTEC_PARAM);u.decode(o,a)}catch{throw new oe}for(var d=0,c=0;c<i;c++)d=(d<<4)+o[c];return d},n.prototype.getBullsEyeCorners=function(e){var t=e,r=e,i=e,a=e,o=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){var c=this.getFirstDifferent(t,o,1,-1),u=this.getFirstDifferent(r,o,1,1),d=this.getFirstDifferent(i,o,-1,1),m=this.getFirstDifferent(a,o,-1,-1);if(this.nbCenterLayers>2){var g=this.distancePoint(m,c)*this.nbCenterLayers/(this.distancePoint(a,t)*(this.nbCenterLayers+2));if(g<.75||g>1.25||!this.isWhiteOrBlackRectangle(c,u,d,m))break}t=c,r=u,i=d,a=m,o=!o}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new oe;this.compact=this.nbCenterLayers===5;var _=new Ne(t.getX()+.5,t.getY()-.5),w=new Ne(r.getX()+.5,r.getY()+.5),A=new Ne(i.getX()-.5,i.getY()+.5),S=new Ne(a.getX()-.5,a.getY()-.5);return this.expandSquare([_,w,A,S],2*this.nbCenterLayers-3,2*this.nbCenterLayers)},n.prototype.getMatrixCenter=function(){var e,t,r,i;try{var a=new mv(this.image).detect();e=a[0],t=a[1],r=a[2],i=a[3]}catch{var o=this.image.getWidth()/2,c=this.image.getHeight()/2;e=this.getFirstDifferent(new Mr(o+7,c-7),!1,1,-1).toResultPoint(),t=this.getFirstDifferent(new Mr(o+7,c+7),!1,1,1).toResultPoint(),r=this.getFirstDifferent(new Mr(o-7,c+7),!1,-1,1).toResultPoint(),i=this.getFirstDifferent(new Mr(o-7,c-7),!1,-1,-1).toResultPoint()}var u=wt.round((e.getX()+i.getX()+t.getX()+r.getX())/4),d=wt.round((e.getY()+i.getY()+t.getY()+r.getY())/4);try{var a=new mv(this.image,15,u,d).detect();e=a[0],t=a[1],r=a[2],i=a[3]}catch{e=this.getFirstDifferent(new Mr(u+7,d-7),!1,1,-1).toResultPoint(),t=this.getFirstDifferent(new Mr(u+7,d+7),!1,1,1).toResultPoint(),r=this.getFirstDifferent(new Mr(u-7,d+7),!1,-1,1).toResultPoint(),i=this.getFirstDifferent(new Mr(u-7,d-7),!1,-1,-1).toResultPoint()}return u=wt.round((e.getX()+i.getX()+t.getX()+r.getX())/4),d=wt.round((e.getY()+i.getY()+t.getY()+r.getY())/4),new Mr(u,d)},n.prototype.getMatrixCornerPoints=function(e){return this.expandSquare(e,2*this.nbCenterLayers,this.getDimension())},n.prototype.sampleGrid=function(e,t,r,i,a){var o=Xy.getInstance(),c=this.getDimension(),u=c/2-this.nbCenterLayers,d=c/2+this.nbCenterLayers;return o.sampleGrid(e,c,c,u,u,d,u,d,d,u,d,t.getX(),t.getY(),r.getX(),r.getY(),i.getX(),i.getY(),a.getX(),a.getY())},n.prototype.sampleLine=function(e,t,r){for(var i=0,a=this.distanceResultPoint(e,t),o=a/r,c=e.getX(),u=e.getY(),d=o*(t.getX()-e.getX())/a,m=o*(t.getY()-e.getY())/a,g=0;g<r;g++)this.image.get(wt.round(c+g*d),wt.round(u+g*m))&&(i|=1<<r-g-1);return i},n.prototype.isWhiteOrBlackRectangle=function(e,t,r,i){var a=3;e=new Mr(e.getX()-a,e.getY()+a),t=new Mr(t.getX()-a,t.getY()-a),r=new Mr(r.getX()+a,r.getY()-a),i=new Mr(i.getX()+a,i.getY()+a);var o=this.getColor(i,e);if(o===0)return!1;var c=this.getColor(e,t);return c!==o||(c=this.getColor(t,r),c!==o)?!1:(c=this.getColor(r,i),c===o)},n.prototype.getColor=function(e,t){for(var r=this.distancePoint(e,t),i=(t.getX()-e.getX())/r,a=(t.getY()-e.getY())/r,o=0,c=e.getX(),u=e.getY(),d=this.image.get(e.getX(),e.getY()),m=Math.ceil(r),g=0;g<m;g++)c+=i,u+=a,this.image.get(wt.round(c),wt.round(u))!==d&&o++;var _=o/r;return _>.1&&_<.9?0:_<=.1===d?1:-1},n.prototype.getFirstDifferent=function(e,t,r,i){for(var a=e.getX()+r,o=e.getY()+i;this.isValid(a,o)&&this.image.get(a,o)===t;)a+=r,o+=i;for(a-=r,o-=i;this.isValid(a,o)&&this.image.get(a,o)===t;)a+=r;for(a-=r;this.isValid(a,o)&&this.image.get(a,o)===t;)o+=i;return o-=i,new Mr(a,o)},n.prototype.expandSquare=function(e,t,r){var i=r/(2*t),a=e[0].getX()-e[2].getX(),o=e[0].getY()-e[2].getY(),c=(e[0].getX()+e[2].getX())/2,u=(e[0].getY()+e[2].getY())/2,d=new Ne(c+i*a,u+i*o),m=new Ne(c-i*a,u-i*o);a=e[1].getX()-e[3].getX(),o=e[1].getY()-e[3].getY(),c=(e[1].getX()+e[3].getX())/2,u=(e[1].getY()+e[3].getY())/2;var g=new Ne(c+i*a,u+i*o),_=new Ne(c-i*a,u-i*o),w=[d,g,m,_];return w},n.prototype.isValid=function(e,t){return e>=0&&e<this.image.getWidth()&&t>0&&t<this.image.getHeight()},n.prototype.isValidPoint=function(e){var t=wt.round(e.getX()),r=wt.round(e.getY());return this.isValid(t,r)},n.prototype.distancePoint=function(e,t){return wt.distance(e.getX(),e.getY(),t.getX(),t.getY())},n.prototype.distanceResultPoint=function(e,t){return wt.distance(e.getX(),e.getY(),t.getX(),t.getY())},n.prototype.getDimension=function(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(it.truncDivision(this.nbLayers-4,8)+1)+15},n})(),O0=(function(){function n(){}return n.prototype.decode=function(e,t){t===void 0&&(t=null);var r=null,i=new yk(e.getBlackMatrix()),a=null,o=null;try{var c=i.detectMirror(!1);a=c.getPoints(),this.reportFoundResultPoints(t,a),o=new RA().decode(c)}catch(g){r=g}if(o==null)try{var c=i.detectMirror(!0);a=c.getPoints(),this.reportFoundResultPoints(t,a),o=new RA().decode(c)}catch(g){throw r??g}var u=new yr(o.getText(),o.getRawBytes(),o.getNumBits(),a,Le.AZTEC,Ht.currentTimeMillis()),d=o.getByteSegments();d!=null&&u.putMetadata(or.BYTE_SEGMENTS,d);var m=o.getECLevel();return m!=null&&u.putMetadata(or.ERROR_CORRECTION_LEVEL,m),u},n.prototype.reportFoundResultPoints=function(e,t){if(e!=null){var r=e.get(Gt.NEED_RESULT_POINT_CALLBACK);r!=null&&t.forEach(function(i,a,o){r.foundPossibleResultPoint(i)})}},n.prototype.reset=function(){},n})(),_k=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})();(function(n){_k(e,n);function e(t){return t===void 0&&(t=500),n.call(this,new O0,t)||this}return e})(qc);var kn=(function(){function n(){}return n.prototype.decode=function(e,t){try{return this.doDecode(e,t)}catch{var r=t&&t.get(Gt.TRY_HARDER)===!0;if(r&&e.isRotateSupported()){var i=e.rotateCounterClockwise(),a=this.doDecode(i,t),o=a.getResultMetadata(),c=270;o!==null&&o.get(or.ORIENTATION)===!0&&(c=c+o.get(or.ORIENTATION)%360),a.putMetadata(or.ORIENTATION,c);var u=a.getResultPoints();if(u!==null)for(var d=i.getHeight(),m=0;m<u.length;m++)u[m]=new Ne(d-u[m].getY()-1,u[m].getX());return a}else throw new oe}},n.prototype.reset=function(){},n.prototype.doDecode=function(e,t){var r=e.getWidth(),i=e.getHeight(),a=new Yn(r),o=t&&t.get(Gt.TRY_HARDER)===!0,c=Math.max(1,i>>(o?8:5)),u;o?u=i:u=15;for(var d=Math.trunc(i/2),m=0;m<u;m++){var g=Math.trunc((m+1)/2),_=(m&1)===0,w=d+c*(_?g:-g);if(w<0||w>=i)break;try{a=e.getBlackRow(w,a)}catch{continue}for(var A=function(k){if(k===1&&(a.reverse(),t&&t.get(Gt.NEED_RESULT_POINT_CALLBACK)===!0)){var V=new Map;t.forEach(function($,M){return V.set(M,$)}),V.delete(Gt.NEED_RESULT_POINT_CALLBACK),t=V}try{var z=S.decodeRow(w,a,t);if(k===1){z.putMetadata(or.ORIENTATION,180);var q=z.getResultPoints();q!==null&&(q[0]=new Ne(r-q[0].getX()-1,q[0].getY()),q[1]=new Ne(r-q[1].getX()-1,q[1].getY()))}return{value:z}}catch{}},S=this,D=0;D<2;D++){var C=A(D);if(typeof C=="object")return C.value}}throw new oe},n.recordPattern=function(e,t,r){for(var i=r.length,a=0;a<i;a++)r[a]=0;var o=e.getSize();if(t>=o)throw new oe;for(var c=!e.get(t),u=0,d=t;d<o;){if(e.get(d)!==c)r[u]++;else{if(++u===i)break;r[u]=1,c=!c}d++}if(!(u===i||u===i-1&&d===o))throw new oe},n.recordPatternInReverse=function(e,t,r){for(var i=r.length,a=e.get(t);t>0&&i>=0;)e.get(--t)!==a&&(i--,a=!a);if(i>=0)throw new oe;n.recordPattern(e,t+1,r)},n.patternMatchVariance=function(e,t,r){for(var i=e.length,a=0,o=0,c=0;c<i;c++)a+=e[c],o+=t[c];if(a<o)return Number.POSITIVE_INFINITY;var u=a/o;r*=u;for(var d=0,m=0;m<i;m++){var g=e[m],_=t[m]*u,w=g>_?g-_:_-g;if(w>r)return Number.POSITIVE_INFINITY;d+=w}return d/a},n})(),xk=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),DA=(function(n){xk(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.findStartPattern=function(t){for(var r=t.getSize(),i=t.getNextSet(0),a=0,o=Int32Array.from([0,0,0,0,0,0]),c=i,u=!1,d=6,m=i;m<r;m++)if(t.get(m)!==u)o[a]++;else{if(a===d-1){for(var g=e.MAX_AVG_VARIANCE,_=-1,w=e.CODE_START_A;w<=e.CODE_START_C;w++){var A=kn.patternMatchVariance(o,e.CODE_PATTERNS[w],e.MAX_INDIVIDUAL_VARIANCE);A<g&&(g=A,_=w)}if(_>=0&&t.isRange(Math.max(0,c-(m-c)/2),c,!1))return Int32Array.from([c,m,_]);c+=o[0]+o[1],o=o.slice(2,o.length),o[a-1]=0,o[a]=0,a--}else a++;o[a]=1,u=!u}throw new oe},e.decodeCode=function(t,r,i){kn.recordPattern(t,i,r);for(var a=e.MAX_AVG_VARIANCE,o=-1,c=0;c<e.CODE_PATTERNS.length;c++){var u=e.CODE_PATTERNS[c],d=this.patternMatchVariance(r,u,e.MAX_INDIVIDUAL_VARIANCE);d<a&&(a=d,o=c)}if(o>=0)return o;throw new oe},e.prototype.decodeRow=function(t,r,i){var a=i&&i.get(Gt.ASSUME_GS1)===!0,o=e.findStartPattern(r),c=o[2],u=0,d=new Uint8Array(20);d[u++]=c;var m;switch(c){case e.CODE_START_A:m=e.CODE_CODE_A;break;case e.CODE_START_B:m=e.CODE_CODE_B;break;case e.CODE_START_C:m=e.CODE_CODE_C;break;default:throw new _e}for(var g=!1,_=!1,w="",A=o[0],S=o[1],D=Int32Array.from([0,0,0,0,0,0]),C=0,k=0,V=c,z=0,q=!0,$=!1,M=!1;!g;){var b=_;switch(_=!1,C=k,k=e.decodeCode(r,D,S),d[u++]=k,k!==e.CODE_STOP&&(q=!0),k!==e.CODE_STOP&&(z++,V+=z*k),A=S,S+=D.reduce(function(G,le){return G+le},0),k){case e.CODE_START_A:case e.CODE_START_B:case e.CODE_START_C:throw new _e}switch(m){case e.CODE_CODE_A:if(k<64)M===$?w+=String.fromCharCode(32+k):w+=String.fromCharCode(32+k+128),M=!1;else if(k<96)M===$?w+=String.fromCharCode(k-64):w+=String.fromCharCode(k+64),M=!1;else switch(k!==e.CODE_STOP&&(q=!1),k){case e.CODE_FNC_1:a&&(w.length===0?w+="]C1":w+="");break;case e.CODE_FNC_2:case e.CODE_FNC_3:break;case e.CODE_FNC_4_A:!$&&M?($=!0,M=!1):$&&M?($=!1,M=!1):M=!0;break;case e.CODE_SHIFT:_=!0,m=e.CODE_CODE_B;break;case e.CODE_CODE_B:m=e.CODE_CODE_B;break;case e.CODE_CODE_C:m=e.CODE_CODE_C;break;case e.CODE_STOP:g=!0;break}break;case e.CODE_CODE_B:if(k<96)M===$?w+=String.fromCharCode(32+k):w+=String.fromCharCode(32+k+128),M=!1;else switch(k!==e.CODE_STOP&&(q=!1),k){case e.CODE_FNC_1:a&&(w.length===0?w+="]C1":w+="");break;case e.CODE_FNC_2:case e.CODE_FNC_3:break;case e.CODE_FNC_4_B:!$&&M?($=!0,M=!1):$&&M?($=!1,M=!1):M=!0;break;case e.CODE_SHIFT:_=!0,m=e.CODE_CODE_A;break;case e.CODE_CODE_A:m=e.CODE_CODE_A;break;case e.CODE_CODE_C:m=e.CODE_CODE_C;break;case e.CODE_STOP:g=!0;break}break;case e.CODE_CODE_C:if(k<100)k<10&&(w+="0"),w+=k;else switch(k!==e.CODE_STOP&&(q=!1),k){case e.CODE_FNC_1:a&&(w.length===0?w+="]C1":w+="");break;case e.CODE_CODE_A:m=e.CODE_CODE_A;break;case e.CODE_CODE_B:m=e.CODE_CODE_B;break;case e.CODE_STOP:g=!0;break}break}b&&(m=m===e.CODE_CODE_A?e.CODE_CODE_B:e.CODE_CODE_A)}var R=S-A;if(S=r.getNextUnset(S),!r.isRange(S,Math.min(r.getSize(),S+(S-A)/2),!1))throw new oe;if(V-=z*C,V%103!==C)throw new Cn;var I=w.length;if(I===0)throw new oe;I>0&&q&&(m===e.CODE_CODE_C?w=w.substring(0,I-2):w=w.substring(0,I-1));for(var O=(o[1]+o[0])/2,L=A+R/2,j=d.length,W=new Uint8Array(j),ge=0;ge<j;ge++)W[ge]=d[ge];var H=[new Ne(O,t),new Ne(L,t)];return new yr(w,W,0,H,Le.CODE_128,new Date().getTime())},e.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],e.MAX_AVG_VARIANCE=.25,e.MAX_INDIVIDUAL_VARIANCE=.7,e.CODE_SHIFT=98,e.CODE_CODE_C=99,e.CODE_CODE_B=100,e.CODE_CODE_A=101,e.CODE_FNC_1=102,e.CODE_FNC_2=97,e.CODE_FNC_3=96,e.CODE_FNC_4_A=101,e.CODE_FNC_4_B=100,e.CODE_START_A=103,e.CODE_START_B=104,e.CODE_START_C=105,e.CODE_STOP=106,e})(kn),wk=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),$m=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},MA=(function(n){wk(e,n);function e(t,r){t===void 0&&(t=!1),r===void 0&&(r=!1);var i=n.call(this)||this;return i.usingCheckDigit=t,i.extendedMode=r,i.decodeRowResult="",i.counters=new Int32Array(9),i}return e.prototype.decodeRow=function(t,r,i){var a,o,c,u,d=this.counters;d.fill(0),this.decodeRowResult="";var m=e.findAsteriskPattern(r,d),g=r.getNextSet(m[1]),_=r.getSize(),w,A;do{e.recordPattern(r,g,d);var S=e.toNarrowWidePattern(d);if(S<0)throw new oe;w=e.patternToChar(S),this.decodeRowResult+=w,A=g;try{for(var D=(a=void 0,$m(d)),C=D.next();!C.done;C=D.next()){var k=C.value;g+=k}}catch(j){a={error:j}}finally{try{C&&!C.done&&(o=D.return)&&o.call(D)}finally{if(a)throw a.error}}g=r.getNextSet(g)}while(w!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var V=0;try{for(var z=$m(d),q=z.next();!q.done;q=z.next()){var k=q.value;V+=k}}catch(j){c={error:j}}finally{try{q&&!q.done&&(u=z.return)&&u.call(z)}finally{if(c)throw c.error}}var $=g-A-V;if(g!==_&&$*2<V)throw new oe;if(this.usingCheckDigit){for(var M=this.decodeRowResult.length-1,b=0,R=0;R<M;R++)b+=e.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(R));if(this.decodeRowResult.charAt(M)!==e.ALPHABET_STRING.charAt(b%43))throw new Cn;this.decodeRowResult=this.decodeRowResult.substring(0,M)}if(this.decodeRowResult.length===0)throw new oe;var I;this.extendedMode?I=e.decodeExtended(this.decodeRowResult):I=this.decodeRowResult;var O=(m[1]+m[0])/2,L=A+V/2;return new yr(I,null,0,[new Ne(O,t),new Ne(L,t)],Le.CODE_39,new Date().getTime())},e.findAsteriskPattern=function(t,r){for(var i=t.getSize(),a=t.getNextSet(0),o=0,c=a,u=!1,d=r.length,m=a;m<i;m++)if(t.get(m)!==u)r[o]++;else{if(o===d-1){if(this.toNarrowWidePattern(r)===e.ASTERISK_ENCODING&&t.isRange(Math.max(0,c-Math.floor((m-c)/2)),c,!1))return[c,m];c+=r[0]+r[1],r.copyWithin(0,2,2+o-1),r[o-1]=0,r[o]=0,o--}else o++;r[o]=1,u=!u}throw new oe},e.toNarrowWidePattern=function(t){var r,i,a=t.length,o=0,c;do{var u=2147483647;try{for(var d=(r=void 0,$m(t)),m=d.next();!m.done;m=d.next()){var g=m.value;g<u&&g>o&&(u=g)}}catch(S){r={error:S}}finally{try{m&&!m.done&&(i=d.return)&&i.call(d)}finally{if(r)throw r.error}}o=u,c=0;for(var _=0,w=0,A=0;A<a;A++){var g=t[A];g>o&&(w|=1<<a-1-A,c++,_+=g)}if(c===3){for(var A=0;A<a&&c>0;A++){var g=t[A];if(g>o&&(c--,g*2>=_))return-1}return w}}while(c>3);return-1},e.patternToChar=function(t){for(var r=0;r<e.CHARACTER_ENCODINGS.length;r++)if(e.CHARACTER_ENCODINGS[r]===t)return e.ALPHABET_STRING.charAt(r);if(t===e.ASTERISK_ENCODING)return"*";throw new oe},e.decodeExtended=function(t){for(var r=t.length,i="",a=0;a<r;a++){var o=t.charAt(a);if(o==="+"||o==="$"||o==="%"||o==="/"){var c=t.charAt(a+1),u="\0";switch(o){case"+":if(c>="A"&&c<="Z")u=String.fromCharCode(c.charCodeAt(0)+32);else throw new _e;break;case"$":if(c>="A"&&c<="Z")u=String.fromCharCode(c.charCodeAt(0)-64);else throw new _e;break;case"%":if(c>="A"&&c<="E")u=String.fromCharCode(c.charCodeAt(0)-38);else if(c>="F"&&c<="J")u=String.fromCharCode(c.charCodeAt(0)-11);else if(c>="K"&&c<="O")u=String.fromCharCode(c.charCodeAt(0)+16);else if(c>="P"&&c<="T")u=String.fromCharCode(c.charCodeAt(0)+43);else if(c==="U")u="\0";else if(c==="V")u="@";else if(c==="W")u="`";else if(c==="X"||c==="Y"||c==="Z")u="";else throw new _e;break;case"/":if(c>="A"&&c<="O")u=String.fromCharCode(c.charCodeAt(0)-32);else if(c==="Z")u=":";else throw new _e;break}i+=u,a++}else i+=o}return i},e.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",e.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],e.ASTERISK_ENCODING=148,e})(kn),Ek=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Xm=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},PA=(function(n){Ek(e,n);function e(){var t=n.call(this)||this;return t.decodeRowResult="",t.counters=new Int32Array(6),t}return e.prototype.decodeRow=function(t,r,i){var a,o,c,u,d=this.findAsteriskPattern(r),m=r.getNextSet(d[1]),g=r.getSize(),_=this.counters;_.fill(0),this.decodeRowResult="";var w,A;do{e.recordPattern(r,m,_);var S=this.toPattern(_);if(S<0)throw new oe;w=this.patternToChar(S),this.decodeRowResult+=w,A=m;try{for(var D=(a=void 0,Xm(_)),C=D.next();!C.done;C=D.next()){var k=C.value;m+=k}}catch(R){a={error:R}}finally{try{C&&!C.done&&(o=D.return)&&o.call(D)}finally{if(a)throw a.error}}m=r.getNextSet(m)}while(w!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var V=0;try{for(var z=Xm(_),q=z.next();!q.done;q=z.next()){var k=q.value;V+=k}}catch(R){c={error:R}}finally{try{q&&!q.done&&(u=z.return)&&u.call(z)}finally{if(c)throw c.error}}if(m===g||!r.get(m))throw new oe;if(this.decodeRowResult.length<2)throw new oe;this.checkChecksums(this.decodeRowResult),this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-2);var $=this.decodeExtended(this.decodeRowResult),M=(d[1]+d[0])/2,b=A+V/2;return new yr($,null,0,[new Ne(M,t),new Ne(b,t)],Le.CODE_93,new Date().getTime())},e.prototype.findAsteriskPattern=function(t){var r=t.getSize(),i=t.getNextSet(0);this.counters.fill(0);for(var a=this.counters,o=i,c=!1,u=a.length,d=0,m=i;m<r;m++)if(t.get(m)!==c)a[d]++;else{if(d===u-1){if(this.toPattern(a)===e.ASTERISK_ENCODING)return new Int32Array([o,m]);o+=a[0]+a[1],a.copyWithin(0,2,2+d-1),a[d-1]=0,a[d]=0,d--}else d++;a[d]=1,c=!c}throw new oe},e.prototype.toPattern=function(t){var r,i,a=0;try{for(var o=Xm(t),c=o.next();!c.done;c=o.next()){var u=c.value;a+=u}}catch(A){r={error:A}}finally{try{c&&!c.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}for(var d=0,m=t.length,g=0;g<m;g++){var _=Math.round(t[g]*9/a);if(_<1||_>4)return-1;if((g&1)===0)for(var w=0;w<_;w++)d=d<<1|1;else d<<=_}return d},e.prototype.patternToChar=function(t){for(var r=0;r<e.CHARACTER_ENCODINGS.length;r++)if(e.CHARACTER_ENCODINGS[r]===t)return e.ALPHABET_STRING.charAt(r);throw new oe},e.prototype.decodeExtended=function(t){for(var r=t.length,i="",a=0;a<r;a++){var o=t.charAt(a);if(o>="a"&&o<="d"){if(a>=r-1)throw new _e;var c=t.charAt(a+1),u="\0";switch(o){case"d":if(c>="A"&&c<="Z")u=String.fromCharCode(c.charCodeAt(0)+32);else throw new _e;break;case"a":if(c>="A"&&c<="Z")u=String.fromCharCode(c.charCodeAt(0)-64);else throw new _e;break;case"b":if(c>="A"&&c<="E")u=String.fromCharCode(c.charCodeAt(0)-38);else if(c>="F"&&c<="J")u=String.fromCharCode(c.charCodeAt(0)-11);else if(c>="K"&&c<="O")u=String.fromCharCode(c.charCodeAt(0)+16);else if(c>="P"&&c<="T")u=String.fromCharCode(c.charCodeAt(0)+43);else if(c==="U")u="\0";else if(c==="V")u="@";else if(c==="W")u="`";else if(c>="X"&&c<="Z")u="";else throw new _e;break;case"c":if(c>="A"&&c<="O")u=String.fromCharCode(c.charCodeAt(0)-32);else if(c==="Z")u=":";else throw new _e;break}i+=u,a++}else i+=o}return i},e.prototype.checkChecksums=function(t){var r=t.length;this.checkOneChecksum(t,r-2,20),this.checkOneChecksum(t,r-1,15)},e.prototype.checkOneChecksum=function(t,r,i){for(var a=1,o=0,c=r-1;c>=0;c--)o+=a*e.ALPHABET_STRING.indexOf(t.charAt(c)),++a>i&&(a=1);if(t.charAt(r)!==e.ALPHABET_STRING[o%47])throw new Cn},e.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%abcd*",e.CHARACTER_ENCODINGS=[276,328,324,322,296,292,290,336,274,266,424,420,418,404,402,394,360,356,354,308,282,344,332,326,300,278,436,434,428,422,406,410,364,358,310,314,302,468,466,458,366,374,430,294,474,470,306,350],e.ASTERISK_ENCODING=e.CHARACTER_ENCODINGS[47],e})(kn),Ak=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),bk=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},kA=(function(n){Ak(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.narrowLineWidth=-1,t}return e.prototype.decodeRow=function(t,r,i){var a,o,c=this.decodeStart(r),u=this.decodeEnd(r),d=new nt;e.decodeMiddle(r,c[1],u[0],d);var m=d.toString(),g=null;i!=null&&(g=i.get(Gt.ALLOWED_LENGTHS)),g==null&&(g=e.DEFAULT_ALLOWED_LENGTHS);var _=m.length,w=!1,A=0;try{for(var S=bk(g),D=S.next();!D.done;D=S.next()){var C=D.value;if(_===C){w=!0;break}C>A&&(A=C)}}catch(z){a={error:z}}finally{try{D&&!D.done&&(o=S.return)&&o.call(S)}finally{if(a)throw a.error}}if(!w&&_>A&&(w=!0),!w)throw new _e;var k=[new Ne(c[1],t),new Ne(u[0],t)],V=new yr(m,null,0,k,Le.ITF,new Date().getTime());return V},e.decodeMiddle=function(t,r,i,a){var o=new Int32Array(10),c=new Int32Array(5),u=new Int32Array(5);for(o.fill(0),c.fill(0),u.fill(0);r<i;){kn.recordPattern(t,r,o);for(var d=0;d<5;d++){var m=2*d;c[d]=o[m],u[d]=o[m+1]}var g=e.decodeDigit(c);a.append(g.toString()),g=this.decodeDigit(u),a.append(g.toString()),o.forEach(function(_){r+=_})}},e.prototype.decodeStart=function(t){var r=e.skipWhiteSpace(t),i=e.findGuardPattern(t,r,e.START_PATTERN);return this.narrowLineWidth=(i[1]-i[0])/4,this.validateQuietZone(t,i[0]),i},e.prototype.validateQuietZone=function(t,r){var i=this.narrowLineWidth*10;i=i<r?i:r;for(var a=r-1;i>0&&a>=0&&!t.get(a);a--)i--;if(i!==0)throw new oe},e.skipWhiteSpace=function(t){var r=t.getSize(),i=t.getNextSet(0);if(i===r)throw new oe;return i},e.prototype.decodeEnd=function(t){t.reverse();try{var r=e.skipWhiteSpace(t),i=void 0;try{i=e.findGuardPattern(t,r,e.END_PATTERN_REVERSED[0])}catch(o){o instanceof oe&&(i=e.findGuardPattern(t,r,e.END_PATTERN_REVERSED[1]))}this.validateQuietZone(t,i[0]);var a=i[0];return i[0]=t.getSize()-i[1],i[1]=t.getSize()-a,i}finally{t.reverse()}},e.findGuardPattern=function(t,r,i){var a=i.length,o=new Int32Array(a),c=t.getSize(),u=!1,d=0,m=r;o.fill(0);for(var g=r;g<c;g++)if(t.get(g)!==u)o[d]++;else{if(d===a-1){if(kn.patternMatchVariance(o,i,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return[m,g];m+=o[0]+o[1],Ht.arraycopy(o,2,o,0,d-1),o[d-1]=0,o[d]=0,d--}else d++;o[d]=1,u=!u}throw new oe},e.decodeDigit=function(t){for(var r=e.MAX_AVG_VARIANCE,i=-1,a=e.PATTERNS.length,o=0;o<a;o++){var c=e.PATTERNS[o],u=kn.patternMatchVariance(t,c,e.MAX_INDIVIDUAL_VARIANCE);u<r?(r=u,i=o):u===r&&(i=-1)}if(i>=0)return i%10;throw new oe},e.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],e.MAX_AVG_VARIANCE=.38,e.MAX_INDIVIDUAL_VARIANCE=.5,e.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],e.START_PATTERN=Int32Array.from([1,1,1,1]),e.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])],e})(kn),Sk=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Rc=(function(n){Sk(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.decodeRowStringBuffer="",t}return e.findStartGuardPattern=function(t){for(var r=!1,i,a=0,o=Int32Array.from([0,0,0]);!r;){o=Int32Array.from([0,0,0]),i=e.findGuardPattern(t,a,!1,this.START_END_PATTERN,o);var c=i[0];a=i[1];var u=c-(a-c);u>=0&&(r=t.isRange(u,c,!1))}return i},e.checkChecksum=function(t){return e.checkStandardUPCEANChecksum(t)},e.checkStandardUPCEANChecksum=function(t){var r=t.length;if(r===0)return!1;var i=parseInt(t.charAt(r-1),10);return e.getStandardUPCEANChecksum(t.substring(0,r-1))===i},e.getStandardUPCEANChecksum=function(t){for(var r=t.length,i=0,a=r-1;a>=0;a-=2){var o=t.charAt(a).charCodeAt(0)-48;if(o<0||o>9)throw new _e;i+=o}i*=3;for(var a=r-2;a>=0;a-=2){var o=t.charAt(a).charCodeAt(0)-48;if(o<0||o>9)throw new _e;i+=o}return(1e3-i)%10},e.decodeEnd=function(t,r){return e.findGuardPattern(t,r,!1,e.START_END_PATTERN,new Int32Array(e.START_END_PATTERN.length).fill(0))},e.findGuardPatternWithoutCounters=function(t,r,i,a){return this.findGuardPattern(t,r,i,a,new Int32Array(a.length))},e.findGuardPattern=function(t,r,i,a,o){var c=t.getSize();r=i?t.getNextUnset(r):t.getNextSet(r);for(var u=0,d=r,m=a.length,g=i,_=r;_<c;_++)if(t.get(_)!==g)o[u]++;else{if(u===m-1){if(kn.patternMatchVariance(o,a,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return Int32Array.from([d,_]);d+=o[0]+o[1];for(var w=o.slice(2,o.length),A=0;A<u-1;A++)o[A]=w[A];o[u-1]=0,o[u]=0,u--}else u++;o[u]=1,g=!g}throw new oe},e.decodeDigit=function(t,r,i,a){this.recordPattern(t,i,r);for(var o=this.MAX_AVG_VARIANCE,c=-1,u=a.length,d=0;d<u;d++){var m=a[d],g=kn.patternMatchVariance(r,m,e.MAX_INDIVIDUAL_VARIANCE);g<o&&(o=g,c=d)}if(c>=0)return c;throw new oe},e.MAX_AVG_VARIANCE=.48,e.MAX_INDIVIDUAL_VARIANCE=.7,e.START_END_PATTERN=Int32Array.from([1,1,1]),e.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),e.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),e.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])],e})(kn),Ck=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Tk=(function(){function n(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return n.prototype.decodeRow=function(e,t,r){var i=this.decodeRowStringBuffer,a=this.decodeMiddle(t,r,i),o=i.toString(),c=n.parseExtensionString(o),u=[new Ne((r[0]+r[1])/2,e),new Ne(a,e)],d=new yr(o,null,0,u,Le.UPC_EAN_EXTENSION,new Date().getTime());return c!=null&&d.putAllMetadata(c),d},n.prototype.decodeMiddle=function(e,t,r){var i,a,o=this.decodeMiddleCounters;o[0]=0,o[1]=0,o[2]=0,o[3]=0;for(var c=e.getSize(),u=t[1],d=0,m=0;m<5&&u<c;m++){var g=Rc.decodeDigit(e,o,u,Rc.L_AND_G_PATTERNS);r+=String.fromCharCode(48+g%10);try{for(var _=(i=void 0,Ck(o)),w=_.next();!w.done;w=_.next()){var A=w.value;u+=A}}catch(D){i={error:D}}finally{try{w&&!w.done&&(a=_.return)&&a.call(_)}finally{if(i)throw i.error}}g>=10&&(d|=1<<4-m),m!==4&&(u=e.getNextSet(u),u=e.getNextUnset(u))}if(r.length!==5)throw new oe;var S=this.determineCheckDigit(d);if(n.extensionChecksum(r.toString())!==S)throw new oe;return u},n.extensionChecksum=function(e){for(var t=e.length,r=0,i=t-2;i>=0;i-=2)r+=e.charAt(i).charCodeAt(0)-48;r*=3;for(var i=t-1;i>=0;i-=2)r+=e.charAt(i).charCodeAt(0)-48;return r*=3,r%10},n.prototype.determineCheckDigit=function(e){for(var t=0;t<10;t++)if(e===this.CHECK_DIGIT_ENCODINGS[t])return t;throw new oe},n.parseExtensionString=function(e){if(e.length!==5)return null;var t=n.parseExtension5String(e);return t==null?null:new Map([[or.SUGGESTED_PRICE,t]])},n.parseExtension5String=function(e){var t;switch(e.charAt(0)){case"0":t="";break;case"5":t="$";break;case"9":switch(e){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}t="";break;default:t="";break}var r=parseInt(e.substring(1)),i=(r/100).toString(),a=r%100,o=a<10?"0"+a:a.toString();return t+i+"."+o},n})(),Ik=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Nk=(function(){function n(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return n.prototype.decodeRow=function(e,t,r){var i=this.decodeRowStringBuffer,a=this.decodeMiddle(t,r,i),o=i.toString(),c=n.parseExtensionString(o),u=[new Ne((r[0]+r[1])/2,e),new Ne(a,e)],d=new yr(o,null,0,u,Le.UPC_EAN_EXTENSION,new Date().getTime());return c!=null&&d.putAllMetadata(c),d},n.prototype.decodeMiddle=function(e,t,r){var i,a,o=this.decodeMiddleCounters;o[0]=0,o[1]=0,o[2]=0,o[3]=0;for(var c=e.getSize(),u=t[1],d=0,m=0;m<2&&u<c;m++){var g=Rc.decodeDigit(e,o,u,Rc.L_AND_G_PATTERNS);r+=String.fromCharCode(48+g%10);try{for(var _=(i=void 0,Ik(o)),w=_.next();!w.done;w=_.next()){var A=w.value;u+=A}}catch(S){i={error:S}}finally{try{w&&!w.done&&(a=_.return)&&a.call(_)}finally{if(i)throw i.error}}g>=10&&(d|=1<<1-m),m!==1&&(u=e.getNextSet(u),u=e.getNextUnset(u))}if(r.length!==2)throw new oe;if(parseInt(r.toString())%4!==d)throw new oe;return u},n.parseExtensionString=function(e){return e.length!==2?null:new Map([[or.ISSUE_NUMBER,parseInt(e)]])},n})(),Rk=(function(){function n(){}return n.decodeRow=function(e,t,r){var i=Rc.findGuardPattern(t,r,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{var a=new Tk;return a.decodeRow(e,t,i)}catch{var o=new Nk;return o.decodeRow(e,t,i)}},n.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]),n})(),Ok=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Dn=(function(n){Ok(e,n);function e(){var t=n.call(this)||this;t.decodeRowStringBuffer="",e.L_AND_G_PATTERNS=e.L_PATTERNS.map(function(c){return Int32Array.from(c)});for(var r=10;r<20;r++){for(var i=e.L_PATTERNS[r-10],a=new Int32Array(i.length),o=0;o<i.length;o++)a[o]=i[i.length-o-1];e.L_AND_G_PATTERNS[r]=a}return t}return e.prototype.decodeRow=function(t,r,i){var a=e.findStartGuardPattern(r),o=i==null?null:i.get(Gt.NEED_RESULT_POINT_CALLBACK);if(o!=null){var c=new Ne((a[0]+a[1])/2,t);o.foundPossibleResultPoint(c)}var u=this.decodeMiddle(r,a,this.decodeRowStringBuffer),d=u.rowOffset,m=u.resultString;if(o!=null){var g=new Ne(d,t);o.foundPossibleResultPoint(g)}var _=e.decodeEnd(r,d);if(o!=null){var w=new Ne((_[0]+_[1])/2,t);o.foundPossibleResultPoint(w)}var A=_[1],S=A+(A-_[0]);if(S>=r.getSize()||!r.isRange(A,S,!1))throw new oe;var D=m.toString();if(D.length<8)throw new _e;if(!e.checkChecksum(D))throw new Cn;var C=(a[1]+a[0])/2,k=(_[1]+_[0])/2,V=this.getBarcodeFormat(),z=[new Ne(C,t),new Ne(k,t)],q=new yr(D,null,0,z,V,new Date().getTime()),$=0;try{var M=Rk.decodeRow(t,r,_[1]);q.putMetadata(or.UPC_EAN_EXTENSION,M.getText()),q.putAllMetadata(M.getResultMetadata()),q.addResultPoints(M.getResultPoints()),$=M.getText().length}catch{}var b=i==null?null:i.get(Gt.ALLOWED_EAN_EXTENSIONS);if(b!=null){var R=!1;for(var I in b)if($.toString()===I){R=!0;break}if(!R)throw new oe}return V===Le.EAN_13||Le.UPC_A,q},e.checkChecksum=function(t){return e.checkStandardUPCEANChecksum(t)},e.checkStandardUPCEANChecksum=function(t){var r=t.length;if(r===0)return!1;var i=parseInt(t.charAt(r-1),10);return e.getStandardUPCEANChecksum(t.substring(0,r-1))===i},e.getStandardUPCEANChecksum=function(t){for(var r=t.length,i=0,a=r-1;a>=0;a-=2){var o=t.charAt(a).charCodeAt(0)-48;if(o<0||o>9)throw new _e;i+=o}i*=3;for(var a=r-2;a>=0;a-=2){var o=t.charAt(a).charCodeAt(0)-48;if(o<0||o>9)throw new _e;i+=o}return(1e3-i)%10},e.decodeEnd=function(t,r){return e.findGuardPattern(t,r,!1,e.START_END_PATTERN,new Int32Array(e.START_END_PATTERN.length).fill(0))},e})(Rc),Dk=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),jA=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},gv=(function(n){Dk(e,n);function e(){var t=n.call(this)||this;return t.decodeMiddleCounters=Int32Array.from([0,0,0,0]),t}return e.prototype.decodeMiddle=function(t,r,i){var a,o,c,u,d=this.decodeMiddleCounters;d[0]=0,d[1]=0,d[2]=0,d[3]=0;for(var m=t.getSize(),g=r[1],_=0,w=0;w<6&&g<m;w++){var A=Dn.decodeDigit(t,d,g,Dn.L_AND_G_PATTERNS);i+=String.fromCharCode(48+A%10);try{for(var S=(a=void 0,jA(d)),D=S.next();!D.done;D=S.next()){var C=D.value;g+=C}}catch(q){a={error:q}}finally{try{D&&!D.done&&(o=S.return)&&o.call(S)}finally{if(a)throw a.error}}A>=10&&(_|=1<<5-w)}i=e.determineFirstDigit(i,_);var k=Dn.findGuardPattern(t,g,!0,Dn.MIDDLE_PATTERN,new Int32Array(Dn.MIDDLE_PATTERN.length).fill(0));g=k[1];for(var w=0;w<6&&g<m;w++){var A=Dn.decodeDigit(t,d,g,Dn.L_PATTERNS);i+=String.fromCharCode(48+A);try{for(var V=(c=void 0,jA(d)),z=V.next();!z.done;z=V.next()){var C=z.value;g+=C}}catch(M){c={error:M}}finally{try{z&&!z.done&&(u=V.return)&&u.call(V)}finally{if(c)throw c.error}}}return{rowOffset:g,resultString:i}},e.prototype.getBarcodeFormat=function(){return Le.EAN_13},e.determineFirstDigit=function(t,r){for(var i=0;i<10;i++)if(r===this.FIRST_DIGIT_ENCODINGS[i])return t=String.fromCharCode(48+i)+t,t;throw new oe},e.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26],e})(Dn),Mk=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),LA=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},BA=(function(n){Mk(e,n);function e(){var t=n.call(this)||this;return t.decodeMiddleCounters=Int32Array.from([0,0,0,0]),t}return e.prototype.decodeMiddle=function(t,r,i){var a,o,c,u,d=this.decodeMiddleCounters;d[0]=0,d[1]=0,d[2]=0,d[3]=0;for(var m=t.getSize(),g=r[1],_=0;_<4&&g<m;_++){var w=Dn.decodeDigit(t,d,g,Dn.L_PATTERNS);i+=String.fromCharCode(48+w);try{for(var A=(a=void 0,LA(d)),S=A.next();!S.done;S=A.next()){var D=S.value;g+=D}}catch(z){a={error:z}}finally{try{S&&!S.done&&(o=A.return)&&o.call(A)}finally{if(a)throw a.error}}}var C=Dn.findGuardPattern(t,g,!0,Dn.MIDDLE_PATTERN,new Int32Array(Dn.MIDDLE_PATTERN.length).fill(0));g=C[1];for(var _=0;_<4&&g<m;_++){var w=Dn.decodeDigit(t,d,g,Dn.L_PATTERNS);i+=String.fromCharCode(48+w);try{for(var k=(c=void 0,LA(d)),V=k.next();!V.done;V=k.next()){var D=V.value;g+=D}}catch($){c={error:$}}finally{try{V&&!V.done&&(u=k.return)&&u.call(k)}finally{if(c)throw c.error}}}return{rowOffset:g,resultString:i}},e.prototype.getBarcodeFormat=function(){return Le.EAN_8},e})(Dn),Pk=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),VA=(function(n){Pk(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.ean13Reader=new gv,t}return e.prototype.getBarcodeFormat=function(){return Le.UPC_A},e.prototype.decode=function(t,r){return this.maybeReturnResult(this.ean13Reader.decode(t))},e.prototype.decodeRow=function(t,r,i){return this.maybeReturnResult(this.ean13Reader.decodeRow(t,r,i))},e.prototype.decodeMiddle=function(t,r,i){return this.ean13Reader.decodeMiddle(t,r,i)},e.prototype.maybeReturnResult=function(t){var r=t.getText();if(r.charAt(0)==="0"){var i=new yr(r.substring(1),null,null,t.getResultPoints(),Le.UPC_A);return t.getResultMetadata()!=null&&i.putAllMetadata(t.getResultMetadata()),i}else throw new oe},e.prototype.reset=function(){this.ean13Reader.reset()},e})(Dn),kk=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),jk=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},FA=(function(n){kk(e,n);function e(){var t=n.call(this)||this;return t.decodeMiddleCounters=new Int32Array(4),t}return e.prototype.decodeMiddle=function(t,r,i){var a,o,c=this.decodeMiddleCounters.map(function(D){return D});c[0]=0,c[1]=0,c[2]=0,c[3]=0;for(var u=t.getSize(),d=r[1],m=0,g=0;g<6&&d<u;g++){var _=e.decodeDigit(t,c,d,e.L_AND_G_PATTERNS);i+=String.fromCharCode(48+_%10);try{for(var w=(a=void 0,jk(c)),A=w.next();!A.done;A=w.next()){var S=A.value;d+=S}}catch(D){a={error:D}}finally{try{A&&!A.done&&(o=w.return)&&o.call(w)}finally{if(a)throw a.error}}_>=10&&(m|=1<<5-g)}return e.determineNumSysAndCheckDigit(new nt(i),m),d},e.prototype.decodeEnd=function(t,r){return e.findGuardPatternWithoutCounters(t,r,!0,e.MIDDLE_END_PATTERN)},e.prototype.checkChecksum=function(t){return Dn.checkChecksum(e.convertUPCEtoUPCA(t))},e.determineNumSysAndCheckDigit=function(t,r){for(var i=0;i<=1;i++)for(var a=0;a<10;a++)if(r===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[i][a]){t.insert(0,"0"+i),t.append("0"+a);return}throw oe.getNotFoundInstance()},e.prototype.getBarcodeFormat=function(){return Le.UPC_E},e.convertUPCEtoUPCA=function(t){var r=t.slice(1,7).split("").map(function(o){return o.charCodeAt(0)}),i=new nt;i.append(t.charAt(0));var a=r[5];switch(a){case 0:case 1:case 2:i.appendChars(r,0,2),i.append(a),i.append("0000"),i.appendChars(r,2,3);break;case 3:i.appendChars(r,0,3),i.append("00000"),i.appendChars(r,3,2);break;case 4:i.appendChars(r,0,4),i.append("00000"),i.append(r[4]);break;default:i.appendChars(r,0,5),i.append("0000"),i.append(a);break}return t.length>=8&&i.append(t.charAt(7)),i.toString()},e.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),e.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,1])],e})(Dn),Lk=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),UA=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Ym=(function(n){Lk(e,n);function e(t){var r=n.call(this)||this,i=t==null?null:t.get(Gt.POSSIBLE_FORMATS),a=[];return i!=null&&(i.indexOf(Le.EAN_13)>-1&&a.push(new gv),i.indexOf(Le.UPC_A)>-1&&a.push(new VA),i.indexOf(Le.EAN_8)>-1&&a.push(new BA),i.indexOf(Le.UPC_E)>-1&&a.push(new FA)),a.length===0&&(a.push(new gv),a.push(new VA),a.push(new BA),a.push(new FA)),r.readers=a,r}return e.prototype.decodeRow=function(t,r,i){var a,o;try{for(var c=UA(this.readers),u=c.next();!u.done;u=c.next()){var d=u.value;try{var m=d.decodeRow(t,r,i),g=m.getBarcodeFormat()===Le.EAN_13&&m.getText().charAt(0)==="0",_=i==null?null:i.get(Gt.POSSIBLE_FORMATS),w=_==null||_.includes(Le.UPC_A);if(g&&w){var A=m.getRawBytes(),S=new yr(m.getText().substring(1),A,A?A.length:null,m.getResultPoints(),Le.UPC_A);return S.putAllMetadata(m.getResultMetadata()),S}return m}catch{}}}catch(D){a={error:D}}finally{try{u&&!u.done&&(o=c.return)&&o.call(c)}finally{if(a)throw a.error}}throw new oe},e.prototype.reset=function(){var t,r;try{for(var i=UA(this.readers),a=i.next();!a.done;a=i.next()){var o=a.value;o.reset()}}catch(c){t={error:c}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}},e})(kn),Bk=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Vk=(function(n){Bk(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.CODA_BAR_CHAR_SET={nnnnnww:"0",nnnnwwn:"1",nnnwnnw:"2",wwnnnnn:"3",nnwnnwn:"4",wnnnnwn:"5",nwnnnnw:"6",nwnnwnn:"7",nwwnnnn:"8",wnnwnnn:"9",nnnwwnn:"-",nnwwnnn:"$",wnnnwnw:":",wnwnnnw:"/",wnwnwnn:".",nnwwwww:"+",nnwwnwn:"A",nwnwnnw:"B",nnnwnww:"C",nnnwwwn:"D"},t}return e.prototype.decodeRow=function(t,r,i){var a=this.getValidRowData(r);if(!a)throw new oe;var o=this.codaBarDecodeRow(a.row);if(!o)throw new oe;return new yr(o,null,0,[new Ne(a.left,t),new Ne(a.right,t)],Le.CODABAR,new Date().getTime())},e.prototype.getValidRowData=function(t){var r=t.toArray(),i=r.indexOf(!0);if(i===-1)return null;var a=r.lastIndexOf(!0);if(a<=i)return null;r=r.slice(i,a+1);for(var o=[],c=r[0],u=1,d=1;d<r.length;d++)r[d]===c?u++:(c=r[d],o.push(u),u=1);return o.push(u),o.length<23&&(o.length+1)%8!==0?null:{row:o,left:i,right:a}},e.prototype.codaBarDecodeRow=function(t){for(var r=[],i=Math.ceil(t.reduce(function(u,d){return(u+d)/2},0));t.length>0;){var a=t.splice(0,8).splice(0,7),o=a.map(function(u){return u<i?"n":"w"}).join("");if(this.CODA_BAR_CHAR_SET[o]===void 0)return null;r.push(this.CODA_BAR_CHAR_SET[o])}var c=r.join("");return this.validCodaBarString(c)?c:null},e.prototype.validCodaBarString=function(t){var r=/^[A-D].{1,}[A-D]$/;return r.test(t)},e})(kn),Fk=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Uk=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Wo=(function(n){Fk(e,n);function e(){var t=n.call(this)||this;return t.decodeFinderCounters=new Int32Array(4),t.dataCharacterCounters=new Int32Array(8),t.oddRoundingErrors=new Array(4),t.evenRoundingErrors=new Array(4),t.oddCounts=new Array(t.dataCharacterCounters.length/2),t.evenCounts=new Array(t.dataCharacterCounters.length/2),t}return e.prototype.getDecodeFinderCounters=function(){return this.decodeFinderCounters},e.prototype.getDataCharacterCounters=function(){return this.dataCharacterCounters},e.prototype.getOddRoundingErrors=function(){return this.oddRoundingErrors},e.prototype.getEvenRoundingErrors=function(){return this.evenRoundingErrors},e.prototype.getOddCounts=function(){return this.oddCounts},e.prototype.getEvenCounts=function(){return this.evenCounts},e.prototype.parseFinderValue=function(t,r){for(var i=0;i<r.length;i++)if(kn.patternMatchVariance(t,r[i],e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return i;throw new oe},e.count=function(t){return wt.sum(new Int32Array(t))},e.increment=function(t,r){for(var i=0,a=r[0],o=1;o<t.length;o++)r[o]>a&&(a=r[o],i=o);t[i]++},e.decrement=function(t,r){for(var i=0,a=r[0],o=1;o<t.length;o++)r[o]<a&&(a=r[o],i=o);t[i]--},e.isFinderPattern=function(t){var r,i,a=t[0]+t[1],o=a+t[2]+t[3],c=a/o;if(c>=e.MIN_FINDER_PATTERN_RATIO&&c<=e.MAX_FINDER_PATTERN_RATIO){var u=Number.MAX_SAFE_INTEGER,d=Number.MIN_SAFE_INTEGER;try{for(var m=Uk(t),g=m.next();!g.done;g=m.next()){var _=g.value;_>d&&(d=_),_<u&&(u=_)}}catch(w){r={error:w}}finally{try{g&&!g.done&&(i=m.return)&&i.call(m)}finally{if(r)throw r.error}}return d<10*u}return!1},e.MAX_AVG_VARIANCE=.2,e.MAX_INDIVIDUAL_VARIANCE=.45,e.MIN_FINDER_PATTERN_RATIO=9.5/12,e.MAX_FINDER_PATTERN_RATIO=12.5/14,e})(kn),D0=(function(){function n(e,t){this.value=e,this.checksumPortion=t}return n.prototype.getValue=function(){return this.value},n.prototype.getChecksumPortion=function(){return this.checksumPortion},n.prototype.toString=function(){return this.value+"("+this.checksumPortion+")"},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.value===t.value&&this.checksumPortion===t.checksumPortion},n.prototype.hashCode=function(){return this.value^this.checksumPortion},n})(),M3=(function(){function n(e,t,r,i,a){this.value=e,this.startEnd=t,this.value=e,this.startEnd=t,this.resultPoints=new Array,this.resultPoints.push(new Ne(r,a)),this.resultPoints.push(new Ne(i,a))}return n.prototype.getValue=function(){return this.value},n.prototype.getStartEnd=function(){return this.startEnd},n.prototype.getResultPoints=function(){return this.resultPoints},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.value===t.value},n.prototype.hashCode=function(){return this.value},n})(),zk=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},fc=(function(){function n(){}return n.getRSSvalue=function(e,t,r){var i,a,o=0;try{for(var c=zk(e),u=c.next();!u.done;u=c.next()){var d=u.value;o+=d}}catch(k){i={error:k}}finally{try{u&&!u.done&&(a=c.return)&&a.call(c)}finally{if(i)throw i.error}}for(var m=0,g=0,_=e.length,w=0;w<_-1;w++){var A=void 0;for(A=1,g|=1<<w;A<e[w];A++,g&=~(1<<w)){var S=n.combins(o-A-1,_-w-2);if(r&&g===0&&o-A-(_-w-1)>=_-w-1&&(S-=n.combins(o-A-(_-w),_-w-2)),_-w-1>1){for(var D=0,C=o-A-(_-w-2);C>t;C--)D+=n.combins(o-A-C-1,_-w-3);S-=D*(_-1-w)}else o-A>t&&S--;m+=S}o-=A}return m},n.combins=function(e,t){var r,i;e-t>t?(i=t,r=e-t):(i=e-t,r=t);for(var a=1,o=1,c=e;c>r;c--)a*=c,o<=i&&(a/=o,o++);for(;o<=i;)a/=o,o++;return a},n})(),Hk=(function(){function n(){}return n.buildBitArray=function(e){var t=e.length*2-1;e[e.length-1].getRightChar()==null&&(t-=1);for(var r=12*t,i=new Yn(r),a=0,o=e[0],c=o.getRightChar().getValue(),u=11;u>=0;--u)(c&1<<u)!==0&&i.set(a),a++;for(var u=1;u<e.length;++u){for(var d=e[u],m=d.getLeftChar().getValue(),g=11;g>=0;--g)(m&1<<g)!==0&&i.set(a),a++;if(d.getRightChar()!==null)for(var _=d.getRightChar().getValue(),g=11;g>=0;--g)(_&1<<g)!==0&&i.set(a),a++}return i},n})(),Xo=(function(){function n(e,t){t?this.decodedInformation=null:(this.finished=e,this.decodedInformation=t)}return n.prototype.getDecodedInformation=function(){return this.decodedInformation},n.prototype.isFinished=function(){return this.finished},n})(),Yy=(function(){function n(e){this.newPosition=e}return n.prototype.getNewPosition=function(){return this.newPosition},n})(),Gk=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Pi=(function(n){Gk(e,n);function e(t,r){var i=n.call(this,t)||this;return i.value=r,i}return e.prototype.getValue=function(){return this.value},e.prototype.isFNC1=function(){return this.value===e.FNC1},e.FNC1="$",e})(Yy),qk=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Yo=(function(n){qk(e,n);function e(t,r,i){var a=n.call(this,t)||this;return i?(a.remaining=!0,a.remainingValue=a.remainingValue):(a.remaining=!1,a.remainingValue=0),a.newString=r,a}return e.prototype.getNewString=function(){return this.newString},e.prototype.isRemaining=function(){return this.remaining},e.prototype.getRemainingValue=function(){return this.remainingValue},e})(Yy),$k=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),ec=(function(n){$k(e,n);function e(t,r,i){var a=n.call(this,t)||this;if(r<0||r>10||i<0||i>10)throw new _e;return a.firstDigit=r,a.secondDigit=i,a}return e.prototype.getFirstDigit=function(){return this.firstDigit},e.prototype.getSecondDigit=function(){return this.secondDigit},e.prototype.getValue=function(){return this.firstDigit*10+this.secondDigit},e.prototype.isFirstDigitFNC1=function(){return this.firstDigit===e.FNC1},e.prototype.isSecondDigitFNC1=function(){return this.secondDigit===e.FNC1},e.prototype.isAnyFNC1=function(){return this.firstDigit===e.FNC1||this.secondDigit===e.FNC1},e.FNC1=10,e})(Yy),kh=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Xk=(function(){function n(){}return n.parseFieldsInGeneralPurpose=function(e){var t,r,i,a,o,c,u,d;if(!e)return null;if(e.length<2)throw new oe;var m=e.substring(0,2);try{for(var g=kh(n.TWO_DIGIT_DATA_LENGTH),_=g.next();!_.done;_=g.next()){var w=_.value;if(w[0]===m)return w[1]===n.VARIABLE_LENGTH?n.processVariableAI(2,w[2],e):n.processFixedAI(2,w[1],e)}}catch($){t={error:$}}finally{try{_&&!_.done&&(r=g.return)&&r.call(g)}finally{if(t)throw t.error}}if(e.length<3)throw new oe;var A=e.substring(0,3);try{for(var S=kh(n.THREE_DIGIT_DATA_LENGTH),D=S.next();!D.done;D=S.next()){var w=D.value;if(w[0]===A)return w[1]===n.VARIABLE_LENGTH?n.processVariableAI(3,w[2],e):n.processFixedAI(3,w[1],e)}}catch($){i={error:$}}finally{try{D&&!D.done&&(a=S.return)&&a.call(S)}finally{if(i)throw i.error}}try{for(var C=kh(n.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH),k=C.next();!k.done;k=C.next()){var w=k.value;if(w[0]===A)return w[1]===n.VARIABLE_LENGTH?n.processVariableAI(4,w[2],e):n.processFixedAI(4,w[1],e)}}catch($){o={error:$}}finally{try{k&&!k.done&&(c=C.return)&&c.call(C)}finally{if(o)throw o.error}}if(e.length<4)throw new oe;var V=e.substring(0,4);try{for(var z=kh(n.FOUR_DIGIT_DATA_LENGTH),q=z.next();!q.done;q=z.next()){var w=q.value;if(w[0]===V)return w[1]===n.VARIABLE_LENGTH?n.processVariableAI(4,w[2],e):n.processFixedAI(4,w[1],e)}}catch($){u={error:$}}finally{try{q&&!q.done&&(d=z.return)&&d.call(z)}finally{if(u)throw u.error}}throw new oe},n.processFixedAI=function(e,t,r){if(r.length<e)throw new oe;var i=r.substring(0,e);if(r.length<e+t)throw new oe;var a=r.substring(e,e+t),o=r.substring(e+t),c="("+i+")"+a,u=n.parseFieldsInGeneralPurpose(o);return u==null?c:c+u},n.processVariableAI=function(e,t,r){var i=r.substring(0,e),a;r.length<e+t?a=r.length:a=e+t;var o=r.substring(e,a),c=r.substring(a),u="("+i+")"+o,d=n.parseFieldsInGeneralPurpose(c);return d==null?u:u+d},n.VARIABLE_LENGTH=[],n.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",n.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",n.VARIABLE_LENGTH,20],["22",n.VARIABLE_LENGTH,29],["30",n.VARIABLE_LENGTH,8],["37",n.VARIABLE_LENGTH,8],["90",n.VARIABLE_LENGTH,30],["91",n.VARIABLE_LENGTH,30],["92",n.VARIABLE_LENGTH,30],["93",n.VARIABLE_LENGTH,30],["94",n.VARIABLE_LENGTH,30],["95",n.VARIABLE_LENGTH,30],["96",n.VARIABLE_LENGTH,30],["97",n.VARIABLE_LENGTH,3],["98",n.VARIABLE_LENGTH,30],["99",n.VARIABLE_LENGTH,30]],n.THREE_DIGIT_DATA_LENGTH=[["240",n.VARIABLE_LENGTH,30],["241",n.VARIABLE_LENGTH,30],["242",n.VARIABLE_LENGTH,6],["250",n.VARIABLE_LENGTH,30],["251",n.VARIABLE_LENGTH,30],["253",n.VARIABLE_LENGTH,17],["254",n.VARIABLE_LENGTH,20],["400",n.VARIABLE_LENGTH,30],["401",n.VARIABLE_LENGTH,30],["402",17],["403",n.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",n.VARIABLE_LENGTH,20],["421",n.VARIABLE_LENGTH,15],["422",3],["423",n.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],n.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",n.VARIABLE_LENGTH,15],["391",n.VARIABLE_LENGTH,18],["392",n.VARIABLE_LENGTH,15],["393",n.VARIABLE_LENGTH,18],["703",n.VARIABLE_LENGTH,30]],n.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",n.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",n.VARIABLE_LENGTH,20],["8003",n.VARIABLE_LENGTH,30],["8004",n.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",n.VARIABLE_LENGTH,30],["8008",n.VARIABLE_LENGTH,12],["8018",18],["8020",n.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",n.VARIABLE_LENGTH,70],["8200",n.VARIABLE_LENGTH,70]],n})(),e0=(function(){function n(e){this.buffer=new nt,this.information=e}return n.prototype.decodeAllCodes=function(e,t){var r=t,i=null;do{var a=this.decodeGeneralPurposeField(r,i),o=Xk.parseFieldsInGeneralPurpose(a.getNewString());if(o!=null&&e.append(o),a.isRemaining()?i=""+a.getRemainingValue():i=null,r===a.getNewPosition())break;r=a.getNewPosition()}while(!0);return e.toString()},n.prototype.isStillNumeric=function(e){if(e+7>this.information.getSize())return e+4<=this.information.getSize();for(var t=e;t<e+3;++t)if(this.information.get(t))return!0;return this.information.get(e+3)},n.prototype.decodeNumeric=function(e){if(e+7>this.information.getSize()){var t=this.extractNumericValueFromBitArray(e,4);return t===0?new ec(this.information.getSize(),ec.FNC1,ec.FNC1):new ec(this.information.getSize(),t-1,ec.FNC1)}var r=this.extractNumericValueFromBitArray(e,7),i=(r-8)/11,a=(r-8)%11;return new ec(e+7,i,a)},n.prototype.extractNumericValueFromBitArray=function(e,t){return n.extractNumericValueFromBitArray(this.information,e,t)},n.extractNumericValueFromBitArray=function(e,t,r){for(var i=0,a=0;a<r;++a)e.get(t+a)&&(i|=1<<r-a-1);return i},n.prototype.decodeGeneralPurposeField=function(e,t){this.buffer.setLengthToZero(),t!=null&&this.buffer.append(t),this.current.setPosition(e);var r=this.parseBlocks();return r!=null&&r.isRemaining()?new Yo(this.current.getPosition(),this.buffer.toString(),r.getRemainingValue()):new Yo(this.current.getPosition(),this.buffer.toString())},n.prototype.parseBlocks=function(){var e,t;do{var r=this.current.getPosition();this.current.isAlpha()?(t=this.parseAlphaBlock(),e=t.isFinished()):this.current.isIsoIec646()?(t=this.parseIsoIec646Block(),e=t.isFinished()):(t=this.parseNumericBlock(),e=t.isFinished());var i=r!==this.current.getPosition();if(!i&&!e)break}while(!e);return t.getDecodedInformation()},n.prototype.parseNumericBlock=function(){for(;this.isStillNumeric(this.current.getPosition());){var e=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFirstDigitFNC1()){var t=void 0;return e.isSecondDigitFNC1()?t=new Yo(this.current.getPosition(),this.buffer.toString()):t=new Yo(this.current.getPosition(),this.buffer.toString(),e.getSecondDigit()),new Xo(!0,t)}if(this.buffer.append(e.getFirstDigit()),e.isSecondDigitFNC1()){var t=new Yo(this.current.getPosition(),this.buffer.toString());return new Xo(!0,t)}this.buffer.append(e.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new Xo(!1)},n.prototype.parseIsoIec646Block=function(){for(;this.isStillIsoIec646(this.current.getPosition());){var e=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var t=new Yo(this.current.getPosition(),this.buffer.toString());return new Xo(!0,t)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new Xo(!1)},n.prototype.parseAlphaBlock=function(){for(;this.isStillAlpha(this.current.getPosition());){var e=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var t=new Yo(this.current.getPosition(),this.buffer.toString());return new Xo(!0,t)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new Xo(!1)},n.prototype.isStillIsoIec646=function(e){if(e+5>this.information.getSize())return!1;var t=this.extractNumericValueFromBitArray(e,5);if(t>=5&&t<16)return!0;if(e+7>this.information.getSize())return!1;var r=this.extractNumericValueFromBitArray(e,7);if(r>=64&&r<116)return!0;if(e+8>this.information.getSize())return!1;var i=this.extractNumericValueFromBitArray(e,8);return i>=232&&i<253},n.prototype.decodeIsoIec646=function(e){var t=this.extractNumericValueFromBitArray(e,5);if(t===15)return new Pi(e+5,Pi.FNC1);if(t>=5&&t<15)return new Pi(e+5,"0"+(t-5));var r=this.extractNumericValueFromBitArray(e,7);if(r>=64&&r<90)return new Pi(e+7,""+(r+1));if(r>=90&&r<116)return new Pi(e+7,""+(r+7));var i=this.extractNumericValueFromBitArray(e,8),a;switch(i){case 232:a="!";break;case 233:a='"';break;case 234:a="%";break;case 235:a="&";break;case 236:a="'";break;case 237:a="(";break;case 238:a=")";break;case 239:a="*";break;case 240:a="+";break;case 241:a=",";break;case 242:a="-";break;case 243:a=".";break;case 244:a="/";break;case 245:a=":";break;case 246:a=";";break;case 247:a="<";break;case 248:a="=";break;case 249:a=">";break;case 250:a="?";break;case 251:a="_";break;case 252:a=" ";break;default:throw new _e}return new Pi(e+8,a)},n.prototype.isStillAlpha=function(e){if(e+5>this.information.getSize())return!1;var t=this.extractNumericValueFromBitArray(e,5);if(t>=5&&t<16)return!0;if(e+6>this.information.getSize())return!1;var r=this.extractNumericValueFromBitArray(e,6);return r>=16&&r<63},n.prototype.decodeAlphanumeric=function(e){var t=this.extractNumericValueFromBitArray(e,5);if(t===15)return new Pi(e+5,Pi.FNC1);if(t>=5&&t<15)return new Pi(e+5,"0"+(t-5));var r=this.extractNumericValueFromBitArray(e,6);if(r>=32&&r<58)return new Pi(e+6,""+(r+33));var i;switch(r){case 58:i="*";break;case 59:i=",";break;case 60:i="-";break;case 61:i=".";break;case 62:i="/";break;default:throw new Jf("Decoding invalid alphanumeric value: "+r)}return new Pi(e+6,i)},n.prototype.isAlphaTo646ToAlphaLatch=function(e){if(e+1>this.information.getSize())return!1;for(var t=0;t<5&&t+e<this.information.getSize();++t)if(t===2){if(!this.information.get(e+2))return!1}else if(this.information.get(e+t))return!1;return!0},n.prototype.isAlphaOr646ToNumericLatch=function(e){if(e+3>this.information.getSize())return!1;for(var t=e;t<e+3;++t)if(this.information.get(t))return!1;return!0},n.prototype.isNumericToAlphaNumericLatch=function(e){if(e+1>this.information.getSize())return!1;for(var t=0;t<4&&t+e<this.information.getSize();++t)if(this.information.get(e+t))return!1;return!0},n})(),P3=(function(){function n(e){this.information=e,this.generalDecoder=new e0(e)}return n.prototype.getInformation=function(){return this.information},n.prototype.getGeneralDecoder=function(){return this.generalDecoder},n})(),Yk=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),ji=(function(n){Yk(e,n);function e(t){return n.call(this,t)||this}return e.prototype.encodeCompressedGtin=function(t,r){t.append("(01)");var i=t.length();t.append("9"),this.encodeCompressedGtinWithoutAI(t,r,i)},e.prototype.encodeCompressedGtinWithoutAI=function(t,r,i){for(var a=0;a<4;++a){var o=this.getGeneralDecoder().extractNumericValueFromBitArray(r+10*a,10);o/100===0&&t.append("0"),o/10===0&&t.append("0"),t.append(o)}e.appendCheckDigit(t,i)},e.appendCheckDigit=function(t,r){for(var i=0,a=0;a<13;a++){var o=t.charAt(a+r).charCodeAt(0)-48;i+=(a&1)===0?3*o:o}i=10-i%10,i===10&&(i=0),t.append(i)},e.GTIN_SIZE=40,e})(P3),Kk=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Wk=(function(n){Kk(e,n);function e(t){return n.call(this,t)||this}return e.prototype.parseInformation=function(){var t=new nt;t.append("(01)");var r=t.length(),i=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE,4);return t.append(i),this.encodeCompressedGtinWithoutAI(t,e.HEADER_SIZE+4,r),this.getGeneralDecoder().decodeAllCodes(t,e.HEADER_SIZE+44)},e.HEADER_SIZE=4,e})(ji),Qk=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Zk=(function(n){Qk(e,n);function e(t){return n.call(this,t)||this}return e.prototype.parseInformation=function(){var t=new nt;return this.getGeneralDecoder().decodeAllCodes(t,e.HEADER_SIZE)},e.HEADER_SIZE=5,e})(P3),Jk=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),t0=(function(n){Jk(e,n);function e(t){return n.call(this,t)||this}return e.prototype.encodeCompressedWeight=function(t,r,i){var a=this.getGeneralDecoder().extractNumericValueFromBitArray(r,i);this.addWeightCode(t,a);for(var o=this.checkWeight(a),c=1e5,u=0;u<5;++u)o/c===0&&t.append("0"),c/=10;t.append(o)},e})(ji),ej=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),k3=(function(n){ej(e,n);function e(t){return n.call(this,t)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()!==e.HEADER_SIZE+t0.GTIN_SIZE+e.WEIGHT_SIZE)throw new oe;var t=new nt;return this.encodeCompressedGtin(t,e.HEADER_SIZE),this.encodeCompressedWeight(t,e.HEADER_SIZE+t0.GTIN_SIZE,e.WEIGHT_SIZE),t.toString()},e.HEADER_SIZE=5,e.WEIGHT_SIZE=15,e})(t0),tj=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),nj=(function(n){tj(e,n);function e(t){return n.call(this,t)||this}return e.prototype.addWeightCode=function(t,r){t.append("(3103)")},e.prototype.checkWeight=function(t){return t},e})(k3),rj=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),ij=(function(n){rj(e,n);function e(t){return n.call(this,t)||this}return e.prototype.addWeightCode=function(t,r){r<1e4?t.append("(3202)"):t.append("(3203)")},e.prototype.checkWeight=function(t){return t<1e4?t:t-1e4},e})(k3),aj=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),sj=(function(n){aj(e,n);function e(t){return n.call(this,t)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()<e.HEADER_SIZE+ji.GTIN_SIZE)throw new oe;var t=new nt;this.encodeCompressedGtin(t,e.HEADER_SIZE);var r=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+ji.GTIN_SIZE,e.LAST_DIGIT_SIZE);t.append("(392"),t.append(r),t.append(")");var i=this.getGeneralDecoder().decodeGeneralPurposeField(e.HEADER_SIZE+ji.GTIN_SIZE+e.LAST_DIGIT_SIZE,null);return t.append(i.getNewString()),t.toString()},e.HEADER_SIZE=8,e.LAST_DIGIT_SIZE=2,e})(ji),oj=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),lj=(function(n){oj(e,n);function e(t){return n.call(this,t)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()<e.HEADER_SIZE+ji.GTIN_SIZE)throw new oe;var t=new nt;this.encodeCompressedGtin(t,e.HEADER_SIZE);var r=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+ji.GTIN_SIZE,e.LAST_DIGIT_SIZE);t.append("(393"),t.append(r),t.append(")");var i=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+ji.GTIN_SIZE+e.LAST_DIGIT_SIZE,e.FIRST_THREE_DIGITS_SIZE);i/100===0&&t.append("0"),i/10===0&&t.append("0"),t.append(i);var a=this.getGeneralDecoder().decodeGeneralPurposeField(e.HEADER_SIZE+ji.GTIN_SIZE+e.LAST_DIGIT_SIZE+e.FIRST_THREE_DIGITS_SIZE,null);return t.append(a.getNewString()),t.toString()},e.HEADER_SIZE=8,e.LAST_DIGIT_SIZE=2,e.FIRST_THREE_DIGITS_SIZE=10,e})(ji),cj=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Fs=(function(n){cj(e,n);function e(t,r,i){var a=n.call(this,t)||this;return a.dateCode=i,a.firstAIdigits=r,a}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()!==e.HEADER_SIZE+e.GTIN_SIZE+e.WEIGHT_SIZE+e.DATE_SIZE)throw new oe;var t=new nt;return this.encodeCompressedGtin(t,e.HEADER_SIZE),this.encodeCompressedWeight(t,e.HEADER_SIZE+e.GTIN_SIZE,e.WEIGHT_SIZE),this.encodeCompressedDate(t,e.HEADER_SIZE+e.GTIN_SIZE+e.WEIGHT_SIZE),t.toString()},e.prototype.encodeCompressedDate=function(t,r){var i=this.getGeneralDecoder().extractNumericValueFromBitArray(r,e.DATE_SIZE);if(i!==38400){t.append("("),t.append(this.dateCode),t.append(")");var a=i%32;i/=32;var o=i%12+1;i/=12;var c=i;c/10===0&&t.append("0"),t.append(c),o/10===0&&t.append("0"),t.append(o),a/10===0&&t.append("0"),t.append(a)}},e.prototype.addWeightCode=function(t,r){t.append("("),t.append(this.firstAIdigits),t.append(r/1e5),t.append(")")},e.prototype.checkWeight=function(t){return t%1e5},e.HEADER_SIZE=8,e.WEIGHT_SIZE=20,e.DATE_SIZE=16,e})(t0);function uj(n){try{if(n.get(1))return new Wk(n);if(!n.get(2))return new Zk(n);var e=e0.extractNumericValueFromBitArray(n,1,4);switch(e){case 4:return new nj(n);case 5:return new ij(n)}var t=e0.extractNumericValueFromBitArray(n,1,5);switch(t){case 12:return new sj(n);case 13:return new lj(n)}var r=e0.extractNumericValueFromBitArray(n,1,7);switch(r){case 56:return new Fs(n,"310","11");case 57:return new Fs(n,"320","11");case 58:return new Fs(n,"310","13");case 59:return new Fs(n,"320","13");case 60:return new Fs(n,"310","15");case 61:return new Fs(n,"320","15");case 62:return new Fs(n,"310","17");case 63:return new Fs(n,"320","17")}}catch(i){throw console.log(i),new Jf("unknown decoder: "+n)}}var zA=(function(){function n(e,t,r,i){this.leftchar=e,this.rightchar=t,this.finderpattern=r,this.maybeLast=i}return n.prototype.mayBeLast=function(){return this.maybeLast},n.prototype.getLeftChar=function(){return this.leftchar},n.prototype.getRightChar=function(){return this.rightchar},n.prototype.getFinderPattern=function(){return this.finderpattern},n.prototype.mustBeLast=function(){return this.rightchar==null},n.prototype.toString=function(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"},n.equals=function(e,t){return e instanceof n?n.equalsOrNull(e.leftchar,t.leftchar)&&n.equalsOrNull(e.rightchar,t.rightchar)&&n.equalsOrNull(e.finderpattern,t.finderpattern):!1},n.equalsOrNull=function(e,t){return e===null?t===null:n.equals(e,t)},n.prototype.hashCode=function(){var e=this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue();return e},n})(),fj=(function(){function n(e,t,r){this.pairs=e,this.rowNumber=t,this.wasReversed=r}return n.prototype.getPairs=function(){return this.pairs},n.prototype.getRowNumber=function(){return this.rowNumber},n.prototype.isReversed=function(){return this.wasReversed},n.prototype.isEquivalent=function(e){return this.checkEqualitity(this,e)},n.prototype.toString=function(){return"{ "+this.pairs+" }"},n.prototype.equals=function(e,t){return e instanceof n?this.checkEqualitity(e,t)&&e.wasReversed===t.wasReversed:!1},n.prototype.checkEqualitity=function(e,t){if(!(!e||!t)){var r;return e.forEach(function(i,a){t.forEach(function(o){i.getLeftChar().getValue()===o.getLeftChar().getValue()&&i.getRightChar().getValue()===o.getRightChar().getValue()&&i.getFinderPatter().getValue()===o.getFinderPatter().getValue()&&(r=!0)})}),r}},n})(),dj=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Us=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},hj=(function(n){dj(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.pairs=new Array(e.MAX_PAIRS),t.rows=new Array,t.startEnd=[2],t}return e.prototype.decodeRow=function(t,r,i){this.pairs.length=0,this.startFromEven=!1;try{return e.constructResult(this.decodeRow2pairs(t,r))}catch{}return this.pairs.length=0,this.startFromEven=!0,e.constructResult(this.decodeRow2pairs(t,r))},e.prototype.reset=function(){this.pairs.length=0,this.rows.length=0},e.prototype.decodeRow2pairs=function(t,r){for(var i=!1;!i;)try{this.pairs.push(this.retrieveNextPair(r,this.pairs,t))}catch(c){if(c instanceof oe){if(!this.pairs.length)throw new oe;i=!0}}if(this.checkChecksum())return this.pairs;var a;if(this.rows.length?a=!0:a=!1,this.storeRow(t,!1),a){var o=this.checkRowsBoolean(!1);if(o!=null||(o=this.checkRowsBoolean(!0),o!=null))return o}throw new oe},e.prototype.checkRowsBoolean=function(t){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,t&&(this.rows=this.rows.reverse());var r=null;try{r=this.checkRows(new Array,0)}catch(i){console.log(i)}return t&&(this.rows=this.rows.reverse()),r},e.prototype.checkRows=function(t,r){for(var i,a,o=r;o<this.rows.length;o++){var c=this.rows[o];this.pairs.length=0;try{for(var u=(i=void 0,Us(t)),d=u.next();!d.done;d=u.next()){var m=d.value;this.pairs.push(m.getPairs())}}catch(_){i={error:_}}finally{try{d&&!d.done&&(a=u.return)&&a.call(u)}finally{if(i)throw i.error}}if(this.pairs.push(c.getPairs()),!!e.isValidSequence(this.pairs)){if(this.checkChecksum())return this.pairs;var g=new Array(t);g.push(c);try{return this.checkRows(g,o+1)}catch(_){console.log(_)}}}throw new oe},e.isValidSequence=function(t){var r,i;try{for(var a=Us(e.FINDER_PATTERN_SEQUENCES),o=a.next();!o.done;o=a.next()){var c=o.value;if(!(t.length>c.length)){for(var u=!0,d=0;d<t.length;d++)if(t[d].getFinderPattern().getValue()!==c[d]){u=!1;break}if(u)return!0}}}catch(m){r={error:m}}finally{try{o&&!o.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}return!1},e.prototype.storeRow=function(t,r){for(var i=0,a=!1,o=!1;i<this.rows.length;){var c=this.rows[i];if(c.getRowNumber()>t){o=c.isEquivalent(this.pairs);break}a=c.isEquivalent(this.pairs),i++}o||a||e.isPartialRow(this.pairs,this.rows)||(this.rows.push(i,new fj(this.pairs,t,r)),this.removePartialRows(this.pairs,this.rows))},e.prototype.removePartialRows=function(t,r){var i,a,o,c,u,d;try{for(var m=Us(r),g=m.next();!g.done;g=m.next()){var _=g.value;if(_.getPairs().length!==t.length){var w=!0;try{for(var A=(o=void 0,Us(_.getPairs())),S=A.next();!S.done;S=A.next()){var D=S.value,C=!1;try{for(var k=(u=void 0,Us(t)),V=k.next();!V.done;V=k.next()){var z=V.value;if(zA.equals(D,z)){C=!0;break}}}catch(q){u={error:q}}finally{try{V&&!V.done&&(d=k.return)&&d.call(k)}finally{if(u)throw u.error}}C||(w=!1)}}catch(q){o={error:q}}finally{try{S&&!S.done&&(c=A.return)&&c.call(A)}finally{if(o)throw o.error}}}}}catch(q){i={error:q}}finally{try{g&&!g.done&&(a=m.return)&&a.call(m)}finally{if(i)throw i.error}}},e.isPartialRow=function(t,r){var i,a,o,c,u,d;try{for(var m=Us(r),g=m.next();!g.done;g=m.next()){var _=g.value,w=!0;try{for(var A=(o=void 0,Us(t)),S=A.next();!S.done;S=A.next()){var D=S.value,C=!1;try{for(var k=(u=void 0,Us(_.getPairs())),V=k.next();!V.done;V=k.next()){var z=V.value;if(D.equals(z)){C=!0;break}}}catch(q){u={error:q}}finally{try{V&&!V.done&&(d=k.return)&&d.call(k)}finally{if(u)throw u.error}}if(!C){w=!1;break}}}catch(q){o={error:q}}finally{try{S&&!S.done&&(c=A.return)&&c.call(A)}finally{if(o)throw o.error}}if(w)return!0}}catch(q){i={error:q}}finally{try{g&&!g.done&&(a=m.return)&&a.call(m)}finally{if(i)throw i.error}}return!1},e.prototype.getRows=function(){return this.rows},e.constructResult=function(t){var r=Hk.buildBitArray(t),i=uj(r),a=i.parseInformation(),o=t[0].getFinderPattern().getResultPoints(),c=t[t.length-1].getFinderPattern().getResultPoints(),u=[o[0],o[1],c[0],c[1]];return new yr(a,null,null,u,Le.RSS_EXPANDED,null)},e.prototype.checkChecksum=function(){var t=this.pairs.get(0),r=t.getLeftChar(),i=t.getRightChar();if(i===null)return!1;for(var a=i.getChecksumPortion(),o=2,c=1;c<this.pairs.size();++c){var u=this.pairs.get(c);a+=u.getLeftChar().getChecksumPortion(),o++;var d=u.getRightChar();d!=null&&(a+=d.getChecksumPortion(),o++)}a%=211;var m=211*(o-4)+a;return m===r.getValue()},e.getNextSecondBar=function(t,r){var i;return t.get(r)?(i=t.getNextUnset(r),i=t.getNextSet(i)):(i=t.getNextSet(r),i=t.getNextUnset(i)),i},e.prototype.retrieveNextPair=function(t,r,i){var a=r.length%2===0;this.startFromEven&&(a=!a);var o,c=!0,u=-1;do this.findNextPair(t,r,u),o=this.parseFoundFinderPattern(t,i,a),o===null?u=e.getNextSecondBar(t,this.startEnd[0]):c=!1;while(c);var d=this.decodeDataCharacter(t,o,a,!0);if(!this.isEmptyPair(r)&&r[r.length-1].mustBeLast())throw new oe;var m;try{m=this.decodeDataCharacter(t,o,a,!1)}catch(g){m=null,console.log(g)}return new zA(d,m,o,!0)},e.prototype.isEmptyPair=function(t){return t.length===0},e.prototype.findNextPair=function(t,r,i){var a=this.getDecodeFinderCounters();a[0]=0,a[1]=0,a[2]=0,a[3]=0;var o=t.getSize(),c;if(i>=0)c=i;else if(this.isEmptyPair(r))c=0;else{var u=r[r.length-1];c=u.getFinderPattern().getStartEnd()[1]}var d=r.length%2!==0;this.startFromEven&&(d=!d);for(var m=!1;c<o&&(m=!t.get(c),!!m);)c++;for(var g=0,_=c,w=c;w<o;w++)if(t.get(w)!==m)a[g]++;else{if(g===3){if(d&&e.reverseCounters(a),e.isFinderPattern(a)){this.startEnd[0]=_,this.startEnd[1]=w;return}d&&e.reverseCounters(a),_+=a[0]+a[1],a[0]=a[2],a[1]=a[3],a[2]=0,a[3]=0,g--}else g++;a[g]=1,m=!m}throw new oe},e.reverseCounters=function(t){for(var r=t.length,i=0;i<r/2;++i){var a=t[i];t[i]=t[r-i-1],t[r-i-1]=a}},e.prototype.parseFoundFinderPattern=function(t,r,i){var a,o,c;if(i){for(var u=this.startEnd[0]-1;u>=0&&!t.get(u);)u--;u++,a=this.startEnd[0]-u,o=u,c=this.startEnd[1]}else o=this.startEnd[0],c=t.getNextUnset(this.startEnd[1]+1),a=c-this.startEnd[1];var d=this.getDecodeFinderCounters();Ht.arraycopy(d,0,d,1,d.length-1),d[0]=a;var m;try{m=this.parseFinderValue(d,e.FINDER_PATTERNS)}catch{return null}return new M3(m,[o,c],o,c,r)},e.prototype.decodeDataCharacter=function(t,r,i,a){for(var o=this.getDataCharacterCounters(),c=0;c<o.length;c++)o[c]=0;if(a)e.recordPatternInReverse(t,r.getStartEnd()[0],o);else{e.recordPattern(t,r.getStartEnd()[1],o);for(var u=0,d=o.length-1;u<d;u++,d--){var m=o[u];o[u]=o[d],o[d]=m}}var g=17,_=wt.sum(new Int32Array(o))/g,w=(r.getStartEnd()[1]-r.getStartEnd()[0])/15;if(Math.abs(_-w)/w>.3)throw new oe;for(var A=this.getOddCounts(),S=this.getEvenCounts(),D=this.getOddRoundingErrors(),C=this.getEvenRoundingErrors(),u=0;u<o.length;u++){var k=1*o[u]/_,V=k+.5;if(V<1){if(k<.3)throw new oe;V=1}else if(V>8){if(k>8.7)throw new oe;V=8}var z=u/2;(u&1)===0?(A[z]=V,D[z]=k-V):(S[z]=V,C[z]=k-V)}this.adjustOddEvenCounts(g);for(var q=4*r.getValue()+(i?0:2)+(a?0:1)-1,$=0,M=0,u=A.length-1;u>=0;u--){if(e.isNotA1left(r,i,a)){var b=e.WEIGHTS[q][2*u];M+=A[u]*b}$+=A[u]}for(var R=0,u=S.length-1;u>=0;u--)if(e.isNotA1left(r,i,a)){var b=e.WEIGHTS[q][2*u+1];R+=S[u]*b}var I=M+R;if(($&1)!==0||$>13||$<4)throw new oe;var O=(13-$)/2,L=e.SYMBOL_WIDEST[O],j=9-L,W=fc.getRSSvalue(A,L,!0),ge=fc.getRSSvalue(S,j,!1),H=e.EVEN_TOTAL_SUBSET[O],G=e.GSUM[O],le=W*H+ge+G;return new D0(le,I)},e.isNotA1left=function(t,r,i){return!(t.getValue()===0&&r&&i)},e.prototype.adjustOddEvenCounts=function(t){var r=wt.sum(new Int32Array(this.getOddCounts())),i=wt.sum(new Int32Array(this.getEvenCounts())),a=!1,o=!1;r>13?o=!0:r<4&&(a=!0);var c=!1,u=!1;i>13?u=!0:i<4&&(c=!0);var d=r+i-t,m=(r&1)===1,g=(i&1)===0;if(d===1)if(m){if(g)throw new oe;o=!0}else{if(!g)throw new oe;u=!0}else if(d===-1)if(m){if(g)throw new oe;a=!0}else{if(!g)throw new oe;c=!0}else if(d===0){if(m){if(!g)throw new oe;r<i?(a=!0,u=!0):(o=!0,c=!0)}else if(g)throw new oe}else throw new oe;if(a){if(o)throw new oe;e.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(o&&e.decrement(this.getOddCounts(),this.getOddRoundingErrors()),c){if(u)throw new oe;e.increment(this.getEvenCounts(),this.getOddRoundingErrors())}u&&e.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},e.SYMBOL_WIDEST=[7,5,4,3,1],e.EVEN_TOTAL_SUBSET=[4,20,52,104,204],e.GSUM=[0,348,1388,2948,3988],e.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],e.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],e.FINDER_PAT_A=0,e.FINDER_PAT_B=1,e.FINDER_PAT_C=2,e.FINDER_PAT_D=3,e.FINDER_PAT_E=4,e.FINDER_PAT_F=5,e.FINDER_PATTERN_SEQUENCES=[[e.FINDER_PAT_A,e.FINDER_PAT_A],[e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B],[e.FINDER_PAT_A,e.FINDER_PAT_C,e.FINDER_PAT_B,e.FINDER_PAT_D],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_C],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_D,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_D],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_E],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F]],e.MAX_PAIRS=11,e})(Wo),pj=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),mj=(function(n){pj(e,n);function e(t,r,i){var a=n.call(this,t,r)||this;return a.count=0,a.finderPattern=i,a}return e.prototype.getFinderPattern=function(){return this.finderPattern},e.prototype.getCount=function(){return this.count},e.prototype.incrementCount=function(){this.count++},e})(D0),gj=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Km=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},HA=(function(n){gj(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.possibleLeftPairs=[],t.possibleRightPairs=[],t}return e.prototype.decodeRow=function(t,r,i){var a,o,c,u,d=this.decodePair(r,!1,t,i);e.addOrTally(this.possibleLeftPairs,d),r.reverse();var m=this.decodePair(r,!0,t,i);e.addOrTally(this.possibleRightPairs,m),r.reverse();try{for(var g=Km(this.possibleLeftPairs),_=g.next();!_.done;_=g.next()){var w=_.value;if(w.getCount()>1)try{for(var A=(c=void 0,Km(this.possibleRightPairs)),S=A.next();!S.done;S=A.next()){var D=S.value;if(D.getCount()>1&&e.checkChecksum(w,D))return e.constructResult(w,D)}}catch(C){c={error:C}}finally{try{S&&!S.done&&(u=A.return)&&u.call(A)}finally{if(c)throw c.error}}}}catch(C){a={error:C}}finally{try{_&&!_.done&&(o=g.return)&&o.call(g)}finally{if(a)throw a.error}}throw new oe},e.addOrTally=function(t,r){var i,a;if(r!=null){var o=!1;try{for(var c=Km(t),u=c.next();!u.done;u=c.next()){var d=u.value;if(d.getValue()===r.getValue()){d.incrementCount(),o=!0;break}}}catch(m){i={error:m}}finally{try{u&&!u.done&&(a=c.return)&&a.call(c)}finally{if(i)throw i.error}}o||t.push(r)}},e.prototype.reset=function(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0},e.constructResult=function(t,r){for(var i=4537077*t.getValue()+r.getValue(),a=new String(i).toString(),o=new nt,c=13-a.length;c>0;c--)o.append("0");o.append(a);for(var u=0,c=0;c<13;c++){var d=o.charAt(c).charCodeAt(0)-48;u+=(c&1)===0?3*d:d}u=10-u%10,u===10&&(u=0),o.append(u.toString());var m=t.getFinderPattern().getResultPoints(),g=r.getFinderPattern().getResultPoints();return new yr(o.toString(),null,0,[m[0],m[1],g[0],g[1]],Le.RSS_14,new Date().getTime())},e.checkChecksum=function(t,r){var i=(t.getChecksumPortion()+16*r.getChecksumPortion())%79,a=9*t.getFinderPattern().getValue()+r.getFinderPattern().getValue();return a>72&&a--,a>8&&a--,i===a},e.prototype.decodePair=function(t,r,i,a){try{var o=this.findFinderPattern(t,r),c=this.parseFoundFinderPattern(t,i,r,o),u=a==null?null:a.get(Gt.NEED_RESULT_POINT_CALLBACK);if(u!=null){var d=(o[0]+o[1])/2;r&&(d=t.getSize()-1-d),u.foundPossibleResultPoint(new Ne(d,i))}var m=this.decodeDataCharacter(t,c,!0),g=this.decodeDataCharacter(t,c,!1);return new mj(1597*m.getValue()+g.getValue(),m.getChecksumPortion()+4*g.getChecksumPortion(),c)}catch{return null}},e.prototype.decodeDataCharacter=function(t,r,i){for(var a=this.getDataCharacterCounters(),o=0;o<a.length;o++)a[o]=0;if(i)kn.recordPatternInReverse(t,r.getStartEnd()[0],a);else{kn.recordPattern(t,r.getStartEnd()[1]+1,a);for(var c=0,u=a.length-1;c<u;c++,u--){var d=a[c];a[c]=a[u],a[u]=d}}for(var m=i?16:15,g=wt.sum(new Int32Array(a))/m,_=this.getOddCounts(),w=this.getEvenCounts(),A=this.getOddRoundingErrors(),S=this.getEvenRoundingErrors(),c=0;c<a.length;c++){var D=a[c]/g,C=Math.floor(D+.5);C<1?C=1:C>8&&(C=8);var k=Math.floor(c/2);(c&1)===0?(_[k]=C,A[k]=D-C):(w[k]=C,S[k]=D-C)}this.adjustOddEvenCounts(i,m);for(var V=0,z=0,c=_.length-1;c>=0;c--)z*=9,z+=_[c],V+=_[c];for(var q=0,$=0,c=w.length-1;c>=0;c--)q*=9,q+=w[c],$+=w[c];var M=z+3*q;if(i){if((V&1)!==0||V>12||V<4)throw new oe;var b=(12-V)/2,R=e.OUTSIDE_ODD_WIDEST[b],I=9-R,O=fc.getRSSvalue(_,R,!1),L=fc.getRSSvalue(w,I,!0),j=e.OUTSIDE_EVEN_TOTAL_SUBSET[b],W=e.OUTSIDE_GSUM[b];return new D0(O*j+L+W,M)}else{if(($&1)!==0||$>10||$<4)throw new oe;var b=(10-$)/2,R=e.INSIDE_ODD_WIDEST[b],I=9-R,O=fc.getRSSvalue(_,R,!0),L=fc.getRSSvalue(w,I,!1),ge=e.INSIDE_ODD_TOTAL_SUBSET[b],W=e.INSIDE_GSUM[b];return new D0(L*ge+O+W,M)}},e.prototype.findFinderPattern=function(t,r){var i=this.getDecodeFinderCounters();i[0]=0,i[1]=0,i[2]=0,i[3]=0;for(var a=t.getSize(),o=!1,c=0;c<a&&(o=!t.get(c),r!==o);)c++;for(var u=0,d=c,m=c;m<a;m++)if(t.get(m)!==o)i[u]++;else{if(u===3){if(Wo.isFinderPattern(i))return[d,m];d+=i[0]+i[1],i[0]=i[2],i[1]=i[3],i[2]=0,i[3]=0,u--}else u++;i[u]=1,o=!o}throw new oe},e.prototype.parseFoundFinderPattern=function(t,r,i,a){for(var o=t.get(a[0]),c=a[0]-1;c>=0&&o!==t.get(c);)c--;c++;var u=a[0]-c,d=this.getDecodeFinderCounters(),m=new Int32Array(d.length);Ht.arraycopy(d,0,m,1,d.length-1),m[0]=u;var g=this.parseFinderValue(m,e.FINDER_PATTERNS),_=c,w=a[1];return i&&(_=t.getSize()-1-_,w=t.getSize()-1-w),new M3(g,[c,a[1]],_,w,r)},e.prototype.adjustOddEvenCounts=function(t,r){var i=wt.sum(new Int32Array(this.getOddCounts())),a=wt.sum(new Int32Array(this.getEvenCounts())),o=!1,c=!1,u=!1,d=!1;t?(i>12?c=!0:i<4&&(o=!0),a>12?d=!0:a<4&&(u=!0)):(i>11?c=!0:i<5&&(o=!0),a>10?d=!0:a<4&&(u=!0));var m=i+a-r,g=(i&1)===(t?1:0),_=(a&1)===1;if(m===1)if(g){if(_)throw new oe;c=!0}else{if(!_)throw new oe;d=!0}else if(m===-1)if(g){if(_)throw new oe;o=!0}else{if(!_)throw new oe;u=!0}else if(m===0){if(g){if(!_)throw new oe;i<a?(o=!0,d=!0):(c=!0,u=!0)}else if(_)throw new oe}else throw new oe;if(o){if(c)throw new oe;Wo.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(c&&Wo.decrement(this.getOddCounts(),this.getOddRoundingErrors()),u){if(d)throw new oe;Wo.increment(this.getEvenCounts(),this.getOddRoundingErrors())}d&&Wo.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},e.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],e.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],e.OUTSIDE_GSUM=[0,161,961,2015,2715],e.INSIDE_GSUM=[0,336,1036,1516],e.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],e.INSIDE_ODD_WIDEST=[2,4,6,8],e.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])],e})(Wo),vj=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),dc=(function(n){vj(e,n);function e(t){var r=n.call(this)||this;r.readers=[];var i=t?t.get(Gt.POSSIBLE_FORMATS):null,a=t&&t.get(Gt.ASSUME_CODE_39_CHECK_DIGIT)!==void 0,o=t&&t.get(Gt.ENABLE_CODE_39_EXTENDED_MODE)!==void 0;return i&&((i.includes(Le.EAN_13)||i.includes(Le.UPC_A)||i.includes(Le.EAN_8)||i.includes(Le.UPC_E))&&r.readers.push(new Ym(t)),i.includes(Le.CODE_39)&&r.readers.push(new MA(a,o)),i.includes(Le.CODE_93)&&r.readers.push(new PA),i.includes(Le.CODE_128)&&r.readers.push(new DA),i.includes(Le.ITF)&&r.readers.push(new kA),i.includes(Le.CODABAR)&&r.readers.push(new Vk),i.includes(Le.RSS_14)&&r.readers.push(new HA),i.includes(Le.RSS_EXPANDED)&&(console.warn("RSS Expanded reader IS NOT ready for production yet! use at your own risk."),r.readers.push(new hj))),r.readers.length===0&&(r.readers.push(new Ym(t)),r.readers.push(new MA),r.readers.push(new PA),r.readers.push(new Ym(t)),r.readers.push(new DA),r.readers.push(new kA),r.readers.push(new HA)),r}return e.prototype.decodeRow=function(t,r,i){for(var a=0;a<this.readers.length;a++)try{return this.readers[a].decodeRow(t,r,i)}catch{}throw new oe},e.prototype.reset=function(){this.readers.forEach(function(t){return t.reset()})},e})(kn),yj=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})();(function(n){yj(e,n);function e(t,r){return t===void 0&&(t=500),n.call(this,new dc(r),t,r)||this}return e})(qc);var GA=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Tt=(function(){function n(e,t,r){this.ecCodewords=e,this.ecBlocks=[t],r&&this.ecBlocks.push(r)}return n.prototype.getECCodewords=function(){return this.ecCodewords},n.prototype.getECBlocks=function(){return this.ecBlocks},n})(),St=(function(){function n(e,t){this.count=e,this.dataCodewords=t}return n.prototype.getCount=function(){return this.count},n.prototype.getDataCodewords=function(){return this.dataCodewords},n})(),_j=(function(){function n(e,t,r,i,a,o){var c,u;this.versionNumber=e,this.symbolSizeRows=t,this.symbolSizeColumns=r,this.dataRegionSizeRows=i,this.dataRegionSizeColumns=a,this.ecBlocks=o;var d=0,m=o.getECCodewords(),g=o.getECBlocks();try{for(var _=GA(g),w=_.next();!w.done;w=_.next()){var A=w.value;d+=A.getCount()*(A.getDataCodewords()+m)}}catch(S){c={error:S}}finally{try{w&&!w.done&&(u=_.return)&&u.call(_)}finally{if(c)throw c.error}}this.totalCodewords=d}return n.prototype.getVersionNumber=function(){return this.versionNumber},n.prototype.getSymbolSizeRows=function(){return this.symbolSizeRows},n.prototype.getSymbolSizeColumns=function(){return this.symbolSizeColumns},n.prototype.getDataRegionSizeRows=function(){return this.dataRegionSizeRows},n.prototype.getDataRegionSizeColumns=function(){return this.dataRegionSizeColumns},n.prototype.getTotalCodewords=function(){return this.totalCodewords},n.prototype.getECBlocks=function(){return this.ecBlocks},n.getVersionForDimensions=function(e,t){var r,i;if((e&1)!==0||(t&1)!==0)throw new _e;try{for(var a=GA(n.VERSIONS),o=a.next();!o.done;o=a.next()){var c=o.value;if(c.symbolSizeRows===e&&c.symbolSizeColumns===t)return c}}catch(u){r={error:u}}finally{try{o&&!o.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}throw new _e},n.prototype.toString=function(){return""+this.versionNumber},n.buildVersions=function(){return[new n(1,10,10,8,8,new Tt(5,new St(1,3))),new n(2,12,12,10,10,new Tt(7,new St(1,5))),new n(3,14,14,12,12,new Tt(10,new St(1,8))),new n(4,16,16,14,14,new Tt(12,new St(1,12))),new n(5,18,18,16,16,new Tt(14,new St(1,18))),new n(6,20,20,18,18,new Tt(18,new St(1,22))),new n(7,22,22,20,20,new Tt(20,new St(1,30))),new n(8,24,24,22,22,new Tt(24,new St(1,36))),new n(9,26,26,24,24,new Tt(28,new St(1,44))),new n(10,32,32,14,14,new Tt(36,new St(1,62))),new n(11,36,36,16,16,new Tt(42,new St(1,86))),new n(12,40,40,18,18,new Tt(48,new St(1,114))),new n(13,44,44,20,20,new Tt(56,new St(1,144))),new n(14,48,48,22,22,new Tt(68,new St(1,174))),new n(15,52,52,24,24,new Tt(42,new St(2,102))),new n(16,64,64,14,14,new Tt(56,new St(2,140))),new n(17,72,72,16,16,new Tt(36,new St(4,92))),new n(18,80,80,18,18,new Tt(48,new St(4,114))),new n(19,88,88,20,20,new Tt(56,new St(4,144))),new n(20,96,96,22,22,new Tt(68,new St(4,174))),new n(21,104,104,24,24,new Tt(56,new St(6,136))),new n(22,120,120,18,18,new Tt(68,new St(6,175))),new n(23,132,132,20,20,new Tt(62,new St(8,163))),new n(24,144,144,22,22,new Tt(62,new St(8,156),new St(2,155))),new n(25,8,18,6,16,new Tt(7,new St(1,5))),new n(26,8,32,6,14,new Tt(11,new St(1,10))),new n(27,12,26,10,24,new Tt(14,new St(1,16))),new n(28,12,36,10,16,new Tt(18,new St(1,22))),new n(29,16,36,14,16,new Tt(24,new St(1,32))),new n(30,16,48,14,22,new Tt(28,new St(1,49)))]},n.VERSIONS=n.buildVersions(),n})(),xj=(function(){function n(e){var t=e.getHeight();if(t<8||t>144||(t&1)!==0)throw new _e;this.version=n.readVersion(e),this.mappingBitMatrix=this.extractDataRegion(e),this.readMappingMatrix=new Ta(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}return n.prototype.getVersion=function(){return this.version},n.readVersion=function(e){var t=e.getHeight(),r=e.getWidth();return _j.getVersionForDimensions(t,r)},n.prototype.readCodewords=function(){var e=new Int8Array(this.version.getTotalCodewords()),t=0,r=4,i=0,a=this.mappingBitMatrix.getHeight(),o=this.mappingBitMatrix.getWidth(),c=!1,u=!1,d=!1,m=!1;do if(r===a&&i===0&&!c)e[t++]=this.readCorner1(a,o)&255,r-=2,i+=2,c=!0;else if(r===a-2&&i===0&&(o&3)!==0&&!u)e[t++]=this.readCorner2(a,o)&255,r-=2,i+=2,u=!0;else if(r===a+4&&i===2&&(o&7)===0&&!d)e[t++]=this.readCorner3(a,o)&255,r-=2,i+=2,d=!0;else if(r===a-2&&i===0&&(o&7)===4&&!m)e[t++]=this.readCorner4(a,o)&255,r-=2,i+=2,m=!0;else{do r<a&&i>=0&&!this.readMappingMatrix.get(i,r)&&(e[t++]=this.readUtah(r,i,a,o)&255),r-=2,i+=2;while(r>=0&&i<o);r+=1,i+=3;do r>=0&&i<o&&!this.readMappingMatrix.get(i,r)&&(e[t++]=this.readUtah(r,i,a,o)&255),r+=2,i-=2;while(r<a&&i>=0);r+=3,i+=1}while(r<a||i<o);if(t!==this.version.getTotalCodewords())throw new _e;return e},n.prototype.readModule=function(e,t,r,i){return e<0&&(e+=r,t+=4-(r+4&7)),t<0&&(t+=i,e+=4-(i+4&7)),this.readMappingMatrix.set(t,e),this.mappingBitMatrix.get(t,e)},n.prototype.readUtah=function(e,t,r,i){var a=0;return this.readModule(e-2,t-2,r,i)&&(a|=1),a<<=1,this.readModule(e-2,t-1,r,i)&&(a|=1),a<<=1,this.readModule(e-1,t-2,r,i)&&(a|=1),a<<=1,this.readModule(e-1,t-1,r,i)&&(a|=1),a<<=1,this.readModule(e-1,t,r,i)&&(a|=1),a<<=1,this.readModule(e,t-2,r,i)&&(a|=1),a<<=1,this.readModule(e,t-1,r,i)&&(a|=1),a<<=1,this.readModule(e,t,r,i)&&(a|=1),a},n.prototype.readCorner1=function(e,t){var r=0;return this.readModule(e-1,0,e,t)&&(r|=1),r<<=1,this.readModule(e-1,1,e,t)&&(r|=1),r<<=1,this.readModule(e-1,2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-1,e,t)&&(r|=1),r<<=1,this.readModule(1,t-1,e,t)&&(r|=1),r<<=1,this.readModule(2,t-1,e,t)&&(r|=1),r<<=1,this.readModule(3,t-1,e,t)&&(r|=1),r},n.prototype.readCorner2=function(e,t){var r=0;return this.readModule(e-3,0,e,t)&&(r|=1),r<<=1,this.readModule(e-2,0,e,t)&&(r|=1),r<<=1,this.readModule(e-1,0,e,t)&&(r|=1),r<<=1,this.readModule(0,t-4,e,t)&&(r|=1),r<<=1,this.readModule(0,t-3,e,t)&&(r|=1),r<<=1,this.readModule(0,t-2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-1,e,t)&&(r|=1),r<<=1,this.readModule(1,t-1,e,t)&&(r|=1),r},n.prototype.readCorner3=function(e,t){var r=0;return this.readModule(e-1,0,e,t)&&(r|=1),r<<=1,this.readModule(e-1,t-1,e,t)&&(r|=1),r<<=1,this.readModule(0,t-3,e,t)&&(r|=1),r<<=1,this.readModule(0,t-2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-1,e,t)&&(r|=1),r<<=1,this.readModule(1,t-3,e,t)&&(r|=1),r<<=1,this.readModule(1,t-2,e,t)&&(r|=1),r<<=1,this.readModule(1,t-1,e,t)&&(r|=1),r},n.prototype.readCorner4=function(e,t){var r=0;return this.readModule(e-3,0,e,t)&&(r|=1),r<<=1,this.readModule(e-2,0,e,t)&&(r|=1),r<<=1,this.readModule(e-1,0,e,t)&&(r|=1),r<<=1,this.readModule(0,t-2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-1,e,t)&&(r|=1),r<<=1,this.readModule(1,t-1,e,t)&&(r|=1),r<<=1,this.readModule(2,t-1,e,t)&&(r|=1),r<<=1,this.readModule(3,t-1,e,t)&&(r|=1),r},n.prototype.extractDataRegion=function(e){var t=this.version.getSymbolSizeRows(),r=this.version.getSymbolSizeColumns();if(e.getHeight()!==t)throw new Be("Dimension of bitMatrix must match the version size");for(var i=this.version.getDataRegionSizeRows(),a=this.version.getDataRegionSizeColumns(),o=t/i|0,c=r/a|0,u=o*i,d=c*a,m=new Ta(d,u),g=0;g<o;++g)for(var _=g*i,w=0;w<c;++w)for(var A=w*a,S=0;S<i;++S)for(var D=g*(i+2)+1+S,C=_+S,k=0;k<a;++k){var V=w*(a+2)+1+k;if(e.get(V,D)){var z=A+k;m.set(z,C)}}return m},n})(),qA=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},wj=(function(){function n(e,t){this.numDataCodewords=e,this.codewords=t}return n.getDataBlocks=function(e,t){var r,i,a,o,c=t.getECBlocks(),u=0,d=c.getECBlocks();try{for(var m=qA(d),g=m.next();!g.done;g=m.next()){var _=g.value;u+=_.getCount()}}catch(W){r={error:W}}finally{try{g&&!g.done&&(i=m.return)&&i.call(m)}finally{if(r)throw r.error}}var w=new Array(u),A=0;try{for(var S=qA(d),D=S.next();!D.done;D=S.next())for(var _=D.value,C=0;C<_.getCount();C++){var k=_.getDataCodewords(),V=c.getECCodewords()+k;w[A++]=new n(k,new Uint8Array(V))}}catch(W){a={error:W}}finally{try{D&&!D.done&&(o=S.return)&&o.call(S)}finally{if(a)throw a.error}}for(var z=w[0].codewords.length,q=z-c.getECCodewords(),$=q-1,M=0,C=0;C<$;C++)for(var b=0;b<A;b++)w[b].codewords[C]=e[M++];for(var R=t.getVersionNumber()===24,I=R?8:A,b=0;b<I;b++)w[b].codewords[q-1]=e[M++];for(var O=w[0].codewords.length,C=q;C<O;C++)for(var b=0;b<A;b++){var L=R?(b+8)%A:b,j=R&&L>7?C-1:C;w[L].codewords[j]=e[M++]}if(M!==e.length)throw new Be;return w},n.prototype.getNumDataCodewords=function(){return this.numDataCodewords},n.prototype.getCodewords=function(){return this.codewords},n})(),j3=(function(){function n(e){this.bytes=e,this.byteOffset=0,this.bitOffset=0}return n.prototype.getBitOffset=function(){return this.bitOffset},n.prototype.getByteOffset=function(){return this.byteOffset},n.prototype.readBits=function(e){if(e<1||e>32||e>this.available())throw new Be(""+e);var t=0,r=this.bitOffset,i=this.byteOffset,a=this.bytes;if(r>0){var o=8-r,c=e<o?e:o,u=o-c,d=255>>8-c<<u;t=(a[i]&d)>>u,e-=c,r+=c,r===8&&(r=0,i++)}if(e>0){for(;e>=8;)t=t<<8|a[i]&255,i++,e-=8;if(e>0){var u=8-e,d=255>>u<<u;t=t<<e|(a[i]&d)>>u,r+=e}}return this.bitOffset=r,this.byteOffset=i,t},n.prototype.available=function(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset},n})(),Rn;(function(n){n[n.PAD_ENCODE=0]="PAD_ENCODE",n[n.ASCII_ENCODE=1]="ASCII_ENCODE",n[n.C40_ENCODE=2]="C40_ENCODE",n[n.TEXT_ENCODE=3]="TEXT_ENCODE",n[n.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",n[n.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",n[n.BASE256_ENCODE=6]="BASE256_ENCODE"})(Rn||(Rn={}));var Ej=(function(){function n(){}return n.decode=function(e){var t=new j3(e),r=new nt,i=new nt,a=new Array,o=Rn.ASCII_ENCODE;do if(o===Rn.ASCII_ENCODE)o=this.decodeAsciiSegment(t,r,i);else{switch(o){case Rn.C40_ENCODE:this.decodeC40Segment(t,r);break;case Rn.TEXT_ENCODE:this.decodeTextSegment(t,r);break;case Rn.ANSIX12_ENCODE:this.decodeAnsiX12Segment(t,r);break;case Rn.EDIFACT_ENCODE:this.decodeEdifactSegment(t,r);break;case Rn.BASE256_ENCODE:this.decodeBase256Segment(t,r,a);break;default:throw new _e}o=Rn.ASCII_ENCODE}while(o!==Rn.PAD_ENCODE&&t.available()>0);return i.length()>0&&r.append(i.toString()),new wp(e,r.toString(),a.length===0?null:a,null)},n.decodeAsciiSegment=function(e,t,r){var i=!1;do{var a=e.readBits(8);if(a===0)throw new _e;if(a<=128)return i&&(a+=128),t.append(String.fromCharCode(a-1)),Rn.ASCII_ENCODE;if(a===129)return Rn.PAD_ENCODE;if(a<=229){var o=a-130;o<10&&t.append("0"),t.append(""+o)}else switch(a){case 230:return Rn.C40_ENCODE;case 231:return Rn.BASE256_ENCODE;case 232:t.append("");break;case 233:case 234:break;case 235:i=!0;break;case 236:t.append("[)>05"),r.insert(0,"");break;case 237:t.append("[)>06"),r.insert(0,"");break;case 238:return Rn.ANSIX12_ENCODE;case 239:return Rn.TEXT_ENCODE;case 240:return Rn.EDIFACT_ENCODE;case 241:break;default:if(a!==254||e.available()!==0)throw new _e;break}}while(e.available()>0);return Rn.ASCII_ENCODE},n.decodeC40Segment=function(e,t){var r=!1,i=[],a=0;do{if(e.available()===8)return;var o=e.readBits(8);if(o===254)return;this.parseTwoBytes(o,e.readBits(8),i);for(var c=0;c<3;c++){var u=i[c];switch(a){case 0:if(u<3)a=u+1;else if(u<this.C40_BASIC_SET_CHARS.length){var d=this.C40_BASIC_SET_CHARS[u];r?(t.append(String.fromCharCode(d.charCodeAt(0)+128)),r=!1):t.append(d)}else throw new _e;break;case 1:r?(t.append(String.fromCharCode(u+128)),r=!1):t.append(String.fromCharCode(u)),a=0;break;case 2:if(u<this.C40_SHIFT2_SET_CHARS.length){var d=this.C40_SHIFT2_SET_CHARS[u];r?(t.append(String.fromCharCode(d.charCodeAt(0)+128)),r=!1):t.append(d)}else switch(u){case 27:t.append("");break;case 30:r=!0;break;default:throw new _e}a=0;break;case 3:r?(t.append(String.fromCharCode(u+224)),r=!1):t.append(String.fromCharCode(u+96)),a=0;break;default:throw new _e}}}while(e.available()>0)},n.decodeTextSegment=function(e,t){var r=!1,i=[],a=0;do{if(e.available()===8)return;var o=e.readBits(8);if(o===254)return;this.parseTwoBytes(o,e.readBits(8),i);for(var c=0;c<3;c++){var u=i[c];switch(a){case 0:if(u<3)a=u+1;else if(u<this.TEXT_BASIC_SET_CHARS.length){var d=this.TEXT_BASIC_SET_CHARS[u];r?(t.append(String.fromCharCode(d.charCodeAt(0)+128)),r=!1):t.append(d)}else throw new _e;break;case 1:r?(t.append(String.fromCharCode(u+128)),r=!1):t.append(String.fromCharCode(u)),a=0;break;case 2:if(u<this.TEXT_SHIFT2_SET_CHARS.length){var d=this.TEXT_SHIFT2_SET_CHARS[u];r?(t.append(String.fromCharCode(d.charCodeAt(0)+128)),r=!1):t.append(d)}else switch(u){case 27:t.append("");break;case 30:r=!0;break;default:throw new _e}a=0;break;case 3:if(u<this.TEXT_SHIFT3_SET_CHARS.length){var d=this.TEXT_SHIFT3_SET_CHARS[u];r?(t.append(String.fromCharCode(d.charCodeAt(0)+128)),r=!1):t.append(d),a=0}else throw new _e;break;default:throw new _e}}}while(e.available()>0)},n.decodeAnsiX12Segment=function(e,t){var r=[];do{if(e.available()===8)return;var i=e.readBits(8);if(i===254)return;this.parseTwoBytes(i,e.readBits(8),r);for(var a=0;a<3;a++){var o=r[a];switch(o){case 0:t.append("\r");break;case 1:t.append("*");break;case 2:t.append(">");break;case 3:t.append(" ");break;default:if(o<14)t.append(String.fromCharCode(o+44));else if(o<40)t.append(String.fromCharCode(o+51));else throw new _e;break}}}while(e.available()>0)},n.parseTwoBytes=function(e,t,r){var i=(e<<8)+t-1,a=Math.floor(i/1600);r[0]=a,i-=a*1600,a=Math.floor(i/40),r[1]=a,r[2]=i-a*40},n.decodeEdifactSegment=function(e,t){do{if(e.available()<=16)return;for(var r=0;r<4;r++){var i=e.readBits(6);if(i===31){var a=8-e.getBitOffset();a!==8&&e.readBits(a);return}(i&32)===0&&(i|=64),t.append(String.fromCharCode(i))}}while(e.available()>0)},n.decodeBase256Segment=function(e,t,r){var i=1+e.getByteOffset(),a=this.unrandomize255State(e.readBits(8),i++),o;if(a===0?o=e.available()/8|0:a<250?o=a:o=250*(a-249)+this.unrandomize255State(e.readBits(8),i++),o<0)throw new _e;for(var c=new Uint8Array(o),u=0;u<o;u++){if(e.available()<8)throw new _e;c[u]=this.unrandomize255State(e.readBits(8),i++)}r.push(c);try{t.append(_i.decode(c,pt.ISO88591))}catch(d){throw new Jf("Platform does not support required encoding: "+d.message)}},n.unrandomize255State=function(e,t){var r=149*t%255+1,i=e-r;return i>=0?i:i+256},n.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],n.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],n.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],n.TEXT_SHIFT2_SET_CHARS=n.C40_SHIFT2_SET_CHARS,n.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""],n})(),Aj=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},bj=(function(){function n(){this.rsDecoder=new Ep(kr.DATA_MATRIX_FIELD_256)}return n.prototype.decode=function(e){var t,r,i=new xj(e),a=i.getVersion(),o=i.readCodewords(),c=wj.getDataBlocks(o,a),u=0;try{for(var d=Aj(c),m=d.next();!m.done;m=d.next()){var g=m.value;u+=g.getNumDataCodewords()}}catch(V){t={error:V}}finally{try{m&&!m.done&&(r=d.return)&&r.call(d)}finally{if(t)throw t.error}}for(var _=new Uint8Array(u),w=c.length,A=0;A<w;A++){var S=c[A],D=S.getCodewords(),C=S.getNumDataCodewords();this.correctErrors(D,C);for(var k=0;k<C;k++)_[k*w+A]=D[k]}return Ej.decode(_)},n.prototype.correctErrors=function(e,t){var r=new Int32Array(e);try{this.rsDecoder.decode(r,e.length-t)}catch{throw new Cn}for(var i=0;i<t;i++)e[i]=r[i]},n})(),Sj=(function(){function n(e){this.image=e,this.rectangleDetector=new mv(this.image)}return n.prototype.detect=function(){var e=this.rectangleDetector.detect(),t=this.detectSolid1(e);if(t=this.detectSolid2(t),t[3]=this.correctTopRight(t),!t[3])throw new oe;t=this.shiftToModuleCenter(t);var r=t[0],i=t[1],a=t[2],o=t[3],c=this.transitionsBetween(r,o)+1,u=this.transitionsBetween(a,o)+1;(c&1)===1&&(c+=1),(u&1)===1&&(u+=1),4*c<7*u&&4*u<7*c&&(c=u=Math.max(c,u));var d=n.sampleGrid(this.image,r,i,a,o,c,u);return new $y(d,[r,i,a,o])},n.shiftPoint=function(e,t,r){var i=(t.getX()-e.getX())/(r+1),a=(t.getY()-e.getY())/(r+1);return new Ne(e.getX()+i,e.getY()+a)},n.moveAway=function(e,t,r){var i=e.getX(),a=e.getY();return i<t?i-=1:i+=1,a<r?a-=1:a+=1,new Ne(i,a)},n.prototype.detectSolid1=function(e){var t=e[0],r=e[1],i=e[3],a=e[2],o=this.transitionsBetween(t,r),c=this.transitionsBetween(r,i),u=this.transitionsBetween(i,a),d=this.transitionsBetween(a,t),m=o,g=[a,t,r,i];return m>c&&(m=c,g[0]=t,g[1]=r,g[2]=i,g[3]=a),m>u&&(m=u,g[0]=r,g[1]=i,g[2]=a,g[3]=t),m>d&&(g[0]=i,g[1]=a,g[2]=t,g[3]=r),g},n.prototype.detectSolid2=function(e){var t=e[0],r=e[1],i=e[2],a=e[3],o=this.transitionsBetween(t,a),c=n.shiftPoint(r,i,(o+1)*4),u=n.shiftPoint(i,r,(o+1)*4),d=this.transitionsBetween(c,t),m=this.transitionsBetween(u,a);return d<m?(e[0]=t,e[1]=r,e[2]=i,e[3]=a):(e[0]=r,e[1]=i,e[2]=a,e[3]=t),e},n.prototype.correctTopRight=function(e){var t=e[0],r=e[1],i=e[2],a=e[3],o=this.transitionsBetween(t,a),c=this.transitionsBetween(r,a),u=n.shiftPoint(t,r,(c+1)*4),d=n.shiftPoint(i,r,(o+1)*4);o=this.transitionsBetween(u,a),c=this.transitionsBetween(d,a);var m=new Ne(a.getX()+(i.getX()-r.getX())/(o+1),a.getY()+(i.getY()-r.getY())/(o+1)),g=new Ne(a.getX()+(t.getX()-r.getX())/(c+1),a.getY()+(t.getY()-r.getY())/(c+1));if(!this.isValid(m))return this.isValid(g)?g:null;if(!this.isValid(g))return m;var _=this.transitionsBetween(u,m)+this.transitionsBetween(d,m),w=this.transitionsBetween(u,g)+this.transitionsBetween(d,g);return _>w?m:g},n.prototype.shiftToModuleCenter=function(e){var t=e[0],r=e[1],i=e[2],a=e[3],o=this.transitionsBetween(t,a)+1,c=this.transitionsBetween(i,a)+1,u=n.shiftPoint(t,r,c*4),d=n.shiftPoint(i,r,o*4);o=this.transitionsBetween(u,a)+1,c=this.transitionsBetween(d,a)+1,(o&1)===1&&(o+=1),(c&1)===1&&(c+=1);var m=(t.getX()+r.getX()+i.getX()+a.getX())/4,g=(t.getY()+r.getY()+i.getY()+a.getY())/4;t=n.moveAway(t,m,g),r=n.moveAway(r,m,g),i=n.moveAway(i,m,g),a=n.moveAway(a,m,g);var _,w;return u=n.shiftPoint(t,r,c*4),u=n.shiftPoint(u,a,o*4),_=n.shiftPoint(r,t,c*4),_=n.shiftPoint(_,i,o*4),d=n.shiftPoint(i,a,c*4),d=n.shiftPoint(d,r,o*4),w=n.shiftPoint(a,i,c*4),w=n.shiftPoint(w,t,o*4),[u,_,d,w]},n.prototype.isValid=function(e){return e.getX()>=0&&e.getX()<this.image.getWidth()&&e.getY()>0&&e.getY()<this.image.getHeight()},n.sampleGrid=function(e,t,r,i,a,o,c){var u=Xy.getInstance();return u.sampleGrid(e,o,c,.5,.5,o-.5,.5,o-.5,c-.5,.5,c-.5,t.getX(),t.getY(),a.getX(),a.getY(),i.getX(),i.getY(),r.getX(),r.getY())},n.prototype.transitionsBetween=function(e,t){var r=Math.trunc(e.getX()),i=Math.trunc(e.getY()),a=Math.trunc(t.getX()),o=Math.trunc(t.getY()),c=Math.abs(o-i)>Math.abs(a-r);if(c){var u=r;r=i,i=u,u=a,a=o,o=u}for(var d=Math.abs(a-r),m=Math.abs(o-i),g=-d/2,_=i<o?1:-1,w=r<a?1:-1,A=0,S=this.image.get(c?i:r,c?r:i),D=r,C=i;D!==a;D+=w){var k=this.image.get(c?C:D,c?D:C);if(k!==S&&(A++,S=k),g+=m,g>0){if(C===o)break;C+=_,g-=d}}return A},n})(),M0=(function(){function n(){this.decoder=new bj}return n.prototype.decode=function(e,t){t===void 0&&(t=null);var r,i;if(t!=null&&t.has(Gt.PURE_BARCODE)){var a=n.extractPureBits(e.getBlackMatrix());r=this.decoder.decode(a),i=n.NO_POINTS}else{var o=new Sj(e.getBlackMatrix()).detect();r=this.decoder.decode(o.getBits()),i=o.getPoints()}var c=r.getRawBytes(),u=new yr(r.getText(),c,8*c.length,i,Le.DATA_MATRIX,Ht.currentTimeMillis()),d=r.getByteSegments();d!=null&&u.putMetadata(or.BYTE_SEGMENTS,d);var m=r.getECLevel();return m!=null&&u.putMetadata(or.ERROR_CORRECTION_LEVEL,m),u},n.prototype.reset=function(){},n.extractPureBits=function(e){var t=e.getTopLeftOnBit(),r=e.getBottomRightOnBit();if(t==null||r==null)throw new oe;var i=this.moduleSize(t,e),a=t[1],o=r[1],c=t[0],u=r[0],d=(u-c+1)/i,m=(o-a+1)/i;if(d<=0||m<=0)throw new oe;var g=i/2;a+=g,c+=g;for(var _=new Ta(d,m),w=0;w<m;w++)for(var A=a+w*i,S=0;S<d;S++)e.get(c+S*i,A)&&_.set(S,w);return _},n.moduleSize=function(e,t){for(var r=t.getWidth(),i=e[0],a=e[1];i<r&&t.get(i,a);)i++;if(i===r)throw new oe;var o=i-e[0];if(o===0)throw new oe;return o},n.NO_POINTS=[],n})(),Cj=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})();(function(n){Cj(e,n);function e(t){return t===void 0&&(t=500),n.call(this,new M0,t)||this}return e})(qc);var hc;(function(n){n[n.L=0]="L",n[n.M=1]="M",n[n.Q=2]="Q",n[n.H=3]="H"})(hc||(hc={}));var Tj=(function(){function n(e,t,r){this.value=e,this.stringValue=t,this.bits=r,n.FOR_BITS.set(r,this),n.FOR_VALUE.set(e,this)}return n.prototype.getValue=function(){return this.value},n.prototype.getBits=function(){return this.bits},n.fromString=function(e){switch(e){case"L":return n.L;case"M":return n.M;case"Q":return n.Q;case"H":return n.H;default:throw new pn(e+"not available")}},n.prototype.toString=function(){return this.stringValue},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.value===t.value},n.forBits=function(e){if(e<0||e>=n.FOR_BITS.size)throw new Be;return n.FOR_BITS.get(e)},n.FOR_BITS=new Map,n.FOR_VALUE=new Map,n.L=new n(hc.L,"L",1),n.M=new n(hc.M,"M",0),n.Q=new n(hc.Q,"Q",3),n.H=new n(hc.H,"H",2),n})(),Ij=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},L3=(function(){function n(e){this.errorCorrectionLevel=Tj.forBits(e>>3&3),this.dataMask=e&7}return n.numBitsDiffering=function(e,t){return it.bitCount(e^t)},n.decodeFormatInformation=function(e,t){var r=n.doDecodeFormatInformation(e,t);return r!==null?r:n.doDecodeFormatInformation(e^n.FORMAT_INFO_MASK_QR,t^n.FORMAT_INFO_MASK_QR)},n.doDecodeFormatInformation=function(e,t){var r,i,a=Number.MAX_SAFE_INTEGER,o=0;try{for(var c=Ij(n.FORMAT_INFO_DECODE_LOOKUP),u=c.next();!u.done;u=c.next()){var d=u.value,m=d[0];if(m===e||m===t)return new n(d[1]);var g=n.numBitsDiffering(e,m);g<a&&(o=d[1],a=g),e!==t&&(g=n.numBitsDiffering(t,m),g<a&&(o=d[1],a=g))}}catch(_){r={error:_}}finally{try{u&&!u.done&&(i=c.return)&&i.call(c)}finally{if(r)throw r.error}}return a<=3?new n(o):null},n.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},n.prototype.getDataMask=function(){return this.dataMask},n.prototype.hashCode=function(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.errorCorrectionLevel===t.errorCorrectionLevel&&this.dataMask===t.dataMask},n.FORMAT_INFO_MASK_QR=21522,n.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])],n})(),Nj=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},J=(function(){function n(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this.ecCodewordsPerBlock=e,this.ecBlocks=t}return n.prototype.getECCodewordsPerBlock=function(){return this.ecCodewordsPerBlock},n.prototype.getNumBlocks=function(){var e,t,r=0,i=this.ecBlocks;try{for(var a=Nj(i),o=a.next();!o.done;o=a.next()){var c=o.value;r+=c.getCount()}}catch(u){e={error:u}}finally{try{o&&!o.done&&(t=a.return)&&t.call(a)}finally{if(e)throw e.error}}return r},n.prototype.getTotalECCodewords=function(){return this.ecCodewordsPerBlock*this.getNumBlocks()},n.prototype.getECBlocks=function(){return this.ecBlocks},n})(),U=(function(){function n(e,t){this.count=e,this.dataCodewords=t}return n.prototype.getCount=function(){return this.count},n.prototype.getDataCodewords=function(){return this.dataCodewords},n})(),Rj=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},tl=(function(){function n(e,t){for(var r,i,a=[],o=2;o<arguments.length;o++)a[o-2]=arguments[o];this.versionNumber=e,this.alignmentPatternCenters=t,this.ecBlocks=a;var c=0,u=a[0].getECCodewordsPerBlock(),d=a[0].getECBlocks();try{for(var m=Rj(d),g=m.next();!g.done;g=m.next()){var _=g.value;c+=_.getCount()*(_.getDataCodewords()+u)}}catch(w){r={error:w}}finally{try{g&&!g.done&&(i=m.return)&&i.call(m)}finally{if(r)throw r.error}}this.totalCodewords=c}return n.prototype.getVersionNumber=function(){return this.versionNumber},n.prototype.getAlignmentPatternCenters=function(){return this.alignmentPatternCenters},n.prototype.getTotalCodewords=function(){return this.totalCodewords},n.prototype.getDimensionForVersion=function(){return 17+4*this.versionNumber},n.prototype.getECBlocksForLevel=function(e){return this.ecBlocks[e.getValue()]},n.getProvisionalVersionForDimension=function(e){if(e%4!==1)throw new _e;try{return this.getVersionForNumber((e-17)/4)}catch{throw new _e}},n.getVersionForNumber=function(e){if(e<1||e>40)throw new Be;return n.VERSIONS[e-1]},n.decodeVersionInformation=function(e){for(var t=Number.MAX_SAFE_INTEGER,r=0,i=0;i<n.VERSION_DECODE_INFO.length;i++){var a=n.VERSION_DECODE_INFO[i];if(a===e)return n.getVersionForNumber(i+7);var o=L3.numBitsDiffering(e,a);o<t&&(r=i+7,t=o)}return t<=3?n.getVersionForNumber(r):null},n.prototype.buildFunctionPattern=function(){var e=this.getDimensionForVersion(),t=new Ta(e);t.setRegion(0,0,9,9),t.setRegion(e-8,0,8,9),t.setRegion(0,e-8,9,8);for(var r=this.alignmentPatternCenters.length,i=0;i<r;i++)for(var a=this.alignmentPatternCenters[i]-2,o=0;o<r;o++)i===0&&(o===0||o===r-1)||i===r-1&&o===0||t.setRegion(this.alignmentPatternCenters[o]-2,a,5,5);return t.setRegion(6,9,1,e-17),t.setRegion(9,6,e-17,1),this.versionNumber>6&&(t.setRegion(e-11,0,3,6),t.setRegion(0,e-11,6,3)),t},n.prototype.toString=function(){return""+this.versionNumber},n.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),n.VERSIONS=[new n(1,new Int32Array(0),new J(7,new U(1,19)),new J(10,new U(1,16)),new J(13,new U(1,13)),new J(17,new U(1,9))),new n(2,Int32Array.from([6,18]),new J(10,new U(1,34)),new J(16,new U(1,28)),new J(22,new U(1,22)),new J(28,new U(1,16))),new n(3,Int32Array.from([6,22]),new J(15,new U(1,55)),new J(26,new U(1,44)),new J(18,new U(2,17)),new J(22,new U(2,13))),new n(4,Int32Array.from([6,26]),new J(20,new U(1,80)),new J(18,new U(2,32)),new J(26,new U(2,24)),new J(16,new U(4,9))),new n(5,Int32Array.from([6,30]),new J(26,new U(1,108)),new J(24,new U(2,43)),new J(18,new U(2,15),new U(2,16)),new J(22,new U(2,11),new U(2,12))),new n(6,Int32Array.from([6,34]),new J(18,new U(2,68)),new J(16,new U(4,27)),new J(24,new U(4,19)),new J(28,new U(4,15))),new n(7,Int32Array.from([6,22,38]),new J(20,new U(2,78)),new J(18,new U(4,31)),new J(18,new U(2,14),new U(4,15)),new J(26,new U(4,13),new U(1,14))),new n(8,Int32Array.from([6,24,42]),new J(24,new U(2,97)),new J(22,new U(2,38),new U(2,39)),new J(22,new U(4,18),new U(2,19)),new J(26,new U(4,14),new U(2,15))),new n(9,Int32Array.from([6,26,46]),new J(30,new U(2,116)),new J(22,new U(3,36),new U(2,37)),new J(20,new U(4,16),new U(4,17)),new J(24,new U(4,12),new U(4,13))),new n(10,Int32Array.from([6,28,50]),new J(18,new U(2,68),new U(2,69)),new J(26,new U(4,43),new U(1,44)),new J(24,new U(6,19),new U(2,20)),new J(28,new U(6,15),new U(2,16))),new n(11,Int32Array.from([6,30,54]),new J(20,new U(4,81)),new J(30,new U(1,50),new U(4,51)),new J(28,new U(4,22),new U(4,23)),new J(24,new U(3,12),new U(8,13))),new n(12,Int32Array.from([6,32,58]),new J(24,new U(2,92),new U(2,93)),new J(22,new U(6,36),new U(2,37)),new J(26,new U(4,20),new U(6,21)),new J(28,new U(7,14),new U(4,15))),new n(13,Int32Array.from([6,34,62]),new J(26,new U(4,107)),new J(22,new U(8,37),new U(1,38)),new J(24,new U(8,20),new U(4,21)),new J(22,new U(12,11),new U(4,12))),new n(14,Int32Array.from([6,26,46,66]),new J(30,new U(3,115),new U(1,116)),new J(24,new U(4,40),new U(5,41)),new J(20,new U(11,16),new U(5,17)),new J(24,new U(11,12),new U(5,13))),new n(15,Int32Array.from([6,26,48,70]),new J(22,new U(5,87),new U(1,88)),new J(24,new U(5,41),new U(5,42)),new J(30,new U(5,24),new U(7,25)),new J(24,new U(11,12),new U(7,13))),new n(16,Int32Array.from([6,26,50,74]),new J(24,new U(5,98),new U(1,99)),new J(28,new U(7,45),new U(3,46)),new J(24,new U(15,19),new U(2,20)),new J(30,new U(3,15),new U(13,16))),new n(17,Int32Array.from([6,30,54,78]),new J(28,new U(1,107),new U(5,108)),new J(28,new U(10,46),new U(1,47)),new J(28,new U(1,22),new U(15,23)),new J(28,new U(2,14),new U(17,15))),new n(18,Int32Array.from([6,30,56,82]),new J(30,new U(5,120),new U(1,121)),new J(26,new U(9,43),new U(4,44)),new J(28,new U(17,22),new U(1,23)),new J(28,new U(2,14),new U(19,15))),new n(19,Int32Array.from([6,30,58,86]),new J(28,new U(3,113),new U(4,114)),new J(26,new U(3,44),new U(11,45)),new J(26,new U(17,21),new U(4,22)),new J(26,new U(9,13),new U(16,14))),new n(20,Int32Array.from([6,34,62,90]),new J(28,new U(3,107),new U(5,108)),new J(26,new U(3,41),new U(13,42)),new J(30,new U(15,24),new U(5,25)),new J(28,new U(15,15),new U(10,16))),new n(21,Int32Array.from([6,28,50,72,94]),new J(28,new U(4,116),new U(4,117)),new J(26,new U(17,42)),new J(28,new U(17,22),new U(6,23)),new J(30,new U(19,16),new U(6,17))),new n(22,Int32Array.from([6,26,50,74,98]),new J(28,new U(2,111),new U(7,112)),new J(28,new U(17,46)),new J(30,new U(7,24),new U(16,25)),new J(24,new U(34,13))),new n(23,Int32Array.from([6,30,54,78,102]),new J(30,new U(4,121),new U(5,122)),new J(28,new U(4,47),new U(14,48)),new J(30,new U(11,24),new U(14,25)),new J(30,new U(16,15),new U(14,16))),new n(24,Int32Array.from([6,28,54,80,106]),new J(30,new U(6,117),new U(4,118)),new J(28,new U(6,45),new U(14,46)),new J(30,new U(11,24),new U(16,25)),new J(30,new U(30,16),new U(2,17))),new n(25,Int32Array.from([6,32,58,84,110]),new J(26,new U(8,106),new U(4,107)),new J(28,new U(8,47),new U(13,48)),new J(30,new U(7,24),new U(22,25)),new J(30,new U(22,15),new U(13,16))),new n(26,Int32Array.from([6,30,58,86,114]),new J(28,new U(10,114),new U(2,115)),new J(28,new U(19,46),new U(4,47)),new J(28,new U(28,22),new U(6,23)),new J(30,new U(33,16),new U(4,17))),new n(27,Int32Array.from([6,34,62,90,118]),new J(30,new U(8,122),new U(4,123)),new J(28,new U(22,45),new U(3,46)),new J(30,new U(8,23),new U(26,24)),new J(30,new U(12,15),new U(28,16))),new n(28,Int32Array.from([6,26,50,74,98,122]),new J(30,new U(3,117),new U(10,118)),new J(28,new U(3,45),new U(23,46)),new J(30,new U(4,24),new U(31,25)),new J(30,new U(11,15),new U(31,16))),new n(29,Int32Array.from([6,30,54,78,102,126]),new J(30,new U(7,116),new U(7,117)),new J(28,new U(21,45),new U(7,46)),new J(30,new U(1,23),new U(37,24)),new J(30,new U(19,15),new U(26,16))),new n(30,Int32Array.from([6,26,52,78,104,130]),new J(30,new U(5,115),new U(10,116)),new J(28,new U(19,47),new U(10,48)),new J(30,new U(15,24),new U(25,25)),new J(30,new U(23,15),new U(25,16))),new n(31,Int32Array.from([6,30,56,82,108,134]),new J(30,new U(13,115),new U(3,116)),new J(28,new U(2,46),new U(29,47)),new J(30,new U(42,24),new U(1,25)),new J(30,new U(23,15),new U(28,16))),new n(32,Int32Array.from([6,34,60,86,112,138]),new J(30,new U(17,115)),new J(28,new U(10,46),new U(23,47)),new J(30,new U(10,24),new U(35,25)),new J(30,new U(19,15),new U(35,16))),new n(33,Int32Array.from([6,30,58,86,114,142]),new J(30,new U(17,115),new U(1,116)),new J(28,new U(14,46),new U(21,47)),new J(30,new U(29,24),new U(19,25)),new J(30,new U(11,15),new U(46,16))),new n(34,Int32Array.from([6,34,62,90,118,146]),new J(30,new U(13,115),new U(6,116)),new J(28,new U(14,46),new U(23,47)),new J(30,new U(44,24),new U(7,25)),new J(30,new U(59,16),new U(1,17))),new n(35,Int32Array.from([6,30,54,78,102,126,150]),new J(30,new U(12,121),new U(7,122)),new J(28,new U(12,47),new U(26,48)),new J(30,new U(39,24),new U(14,25)),new J(30,new U(22,15),new U(41,16))),new n(36,Int32Array.from([6,24,50,76,102,128,154]),new J(30,new U(6,121),new U(14,122)),new J(28,new U(6,47),new U(34,48)),new J(30,new U(46,24),new U(10,25)),new J(30,new U(2,15),new U(64,16))),new n(37,Int32Array.from([6,28,54,80,106,132,158]),new J(30,new U(17,122),new U(4,123)),new J(28,new U(29,46),new U(14,47)),new J(30,new U(49,24),new U(10,25)),new J(30,new U(24,15),new U(46,16))),new n(38,Int32Array.from([6,32,58,84,110,136,162]),new J(30,new U(4,122),new U(18,123)),new J(28,new U(13,46),new U(32,47)),new J(30,new U(48,24),new U(14,25)),new J(30,new U(42,15),new U(32,16))),new n(39,Int32Array.from([6,26,54,82,110,138,166]),new J(30,new U(20,117),new U(4,118)),new J(28,new U(40,47),new U(7,48)),new J(30,new U(43,24),new U(22,25)),new J(30,new U(10,15),new U(67,16))),new n(40,Int32Array.from([6,30,58,86,114,142,170]),new J(30,new U(19,118),new U(6,119)),new J(28,new U(18,47),new U(31,48)),new J(30,new U(34,24),new U(34,25)),new J(30,new U(20,15),new U(61,16)))],n})(),zn;(function(n){n[n.DATA_MASK_000=0]="DATA_MASK_000",n[n.DATA_MASK_001=1]="DATA_MASK_001",n[n.DATA_MASK_010=2]="DATA_MASK_010",n[n.DATA_MASK_011=3]="DATA_MASK_011",n[n.DATA_MASK_100=4]="DATA_MASK_100",n[n.DATA_MASK_101=5]="DATA_MASK_101",n[n.DATA_MASK_110=6]="DATA_MASK_110",n[n.DATA_MASK_111=7]="DATA_MASK_111"})(zn||(zn={}));var $A=(function(){function n(e,t){this.value=e,this.isMasked=t}return n.prototype.unmaskBitMatrix=function(e,t){for(var r=0;r<t;r++)for(var i=0;i<t;i++)this.isMasked(r,i)&&e.flip(i,r)},n.values=new Map([[zn.DATA_MASK_000,new n(zn.DATA_MASK_000,function(e,t){return(e+t&1)===0})],[zn.DATA_MASK_001,new n(zn.DATA_MASK_001,function(e,t){return(e&1)===0})],[zn.DATA_MASK_010,new n(zn.DATA_MASK_010,function(e,t){return t%3===0})],[zn.DATA_MASK_011,new n(zn.DATA_MASK_011,function(e,t){return(e+t)%3===0})],[zn.DATA_MASK_100,new n(zn.DATA_MASK_100,function(e,t){return(Math.floor(e/2)+Math.floor(t/3)&1)===0})],[zn.DATA_MASK_101,new n(zn.DATA_MASK_101,function(e,t){return e*t%6===0})],[zn.DATA_MASK_110,new n(zn.DATA_MASK_110,function(e,t){return e*t%6<3})],[zn.DATA_MASK_111,new n(zn.DATA_MASK_111,function(e,t){return(e+t+e*t%3&1)===0})]]),n})(),Oj=(function(){function n(e){var t=e.getHeight();if(t<21||(t&3)!==1)throw new _e;this.bitMatrix=e}return n.prototype.readFormatInformation=function(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;for(var e=0,t=0;t<6;t++)e=this.copyBit(t,8,e);e=this.copyBit(7,8,e),e=this.copyBit(8,8,e),e=this.copyBit(8,7,e);for(var r=5;r>=0;r--)e=this.copyBit(8,r,e);for(var i=this.bitMatrix.getHeight(),a=0,o=i-7,r=i-1;r>=o;r--)a=this.copyBit(8,r,a);for(var t=i-8;t<i;t++)a=this.copyBit(t,8,a);if(this.parsedFormatInfo=L3.decodeFormatInformation(e,a),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new _e},n.prototype.readVersion=function(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;var e=this.bitMatrix.getHeight(),t=Math.floor((e-17)/4);if(t<=6)return tl.getVersionForNumber(t);for(var r=0,i=e-11,a=5;a>=0;a--)for(var o=e-9;o>=i;o--)r=this.copyBit(o,a,r);var c=tl.decodeVersionInformation(r);if(c!==null&&c.getDimensionForVersion()===e)return this.parsedVersion=c,c;r=0;for(var o=5;o>=0;o--)for(var a=e-9;a>=i;a--)r=this.copyBit(o,a,r);if(c=tl.decodeVersionInformation(r),c!==null&&c.getDimensionForVersion()===e)return this.parsedVersion=c,c;throw new _e},n.prototype.copyBit=function(e,t,r){var i=this.isMirror?this.bitMatrix.get(t,e):this.bitMatrix.get(e,t);return i?r<<1|1:r<<1},n.prototype.readCodewords=function(){var e=this.readFormatInformation(),t=this.readVersion(),r=$A.values.get(e.getDataMask()),i=this.bitMatrix.getHeight();r.unmaskBitMatrix(this.bitMatrix,i);for(var a=t.buildFunctionPattern(),o=!0,c=new Uint8Array(t.getTotalCodewords()),u=0,d=0,m=0,g=i-1;g>0;g-=2){g===6&&g--;for(var _=0;_<i;_++)for(var w=o?i-1-_:_,A=0;A<2;A++)a.get(g-A,w)||(m++,d<<=1,this.bitMatrix.get(g-A,w)&&(d|=1),m===8&&(c[u++]=d,m=0,d=0));o=!o}if(u!==t.getTotalCodewords())throw new _e;return c},n.prototype.remask=function(){if(this.parsedFormatInfo!==null){var e=$A.values.get(this.parsedFormatInfo.getDataMask()),t=this.bitMatrix.getHeight();e.unmaskBitMatrix(this.bitMatrix,t)}},n.prototype.setMirror=function(e){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=e},n.prototype.mirror=function(){for(var e=this.bitMatrix,t=0,r=e.getWidth();t<r;t++)for(var i=t+1,a=e.getHeight();i<a;i++)e.get(t,i)!==e.get(i,t)&&(e.flip(i,t),e.flip(t,i))},n})(),XA=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Dj=(function(){function n(e,t){this.numDataCodewords=e,this.codewords=t}return n.getDataBlocks=function(e,t,r){var i,a,o,c;if(e.length!==t.getTotalCodewords())throw new Be;var u=t.getECBlocksForLevel(r),d=0,m=u.getECBlocks();try{for(var g=XA(m),_=g.next();!_.done;_=g.next()){var w=_.value;d+=w.getCount()}}catch(j){i={error:j}}finally{try{_&&!_.done&&(a=g.return)&&a.call(g)}finally{if(i)throw i.error}}var A=new Array(d),S=0;try{for(var D=XA(m),C=D.next();!C.done;C=D.next())for(var w=C.value,k=0;k<w.getCount();k++){var V=w.getDataCodewords(),z=u.getECCodewordsPerBlock()+V;A[S++]=new n(V,new Uint8Array(z))}}catch(j){o={error:j}}finally{try{C&&!C.done&&(c=D.return)&&c.call(D)}finally{if(o)throw o.error}}for(var q=A[0].codewords.length,$=A.length-1;$>=0;){var M=A[$].codewords.length;if(M===q)break;$--}$++;for(var b=q-u.getECCodewordsPerBlock(),R=0,k=0;k<b;k++)for(var I=0;I<S;I++)A[I].codewords[k]=e[R++];for(var I=$;I<S;I++)A[I].codewords[b]=e[R++];for(var O=A[0].codewords.length,k=b;k<O;k++)for(var I=0;I<S;I++){var L=I<$?k:k+1;A[I].codewords[L]=e[R++]}return A},n.prototype.getNumDataCodewords=function(){return this.numDataCodewords},n.prototype.getCodewords=function(){return this.codewords},n})(),hi;(function(n){n[n.TERMINATOR=0]="TERMINATOR",n[n.NUMERIC=1]="NUMERIC",n[n.ALPHANUMERIC=2]="ALPHANUMERIC",n[n.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",n[n.BYTE=4]="BYTE",n[n.ECI=5]="ECI",n[n.KANJI=6]="KANJI",n[n.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",n[n.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",n[n.HANZI=9]="HANZI"})(hi||(hi={}));var Yt=(function(){function n(e,t,r,i){this.value=e,this.stringValue=t,this.characterCountBitsForVersions=r,this.bits=i,n.FOR_BITS.set(i,this),n.FOR_VALUE.set(e,this)}return n.forBits=function(e){var t=n.FOR_BITS.get(e);if(t===void 0)throw new Be;return t},n.prototype.getCharacterCountBits=function(e){var t=e.getVersionNumber(),r;return t<=9?r=0:t<=26?r=1:r=2,this.characterCountBitsForVersions[r]},n.prototype.getValue=function(){return this.value},n.prototype.getBits=function(){return this.bits},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.value===t.value},n.prototype.toString=function(){return this.stringValue},n.FOR_BITS=new Map,n.FOR_VALUE=new Map,n.TERMINATOR=new n(hi.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),n.NUMERIC=new n(hi.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),n.ALPHANUMERIC=new n(hi.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),n.STRUCTURED_APPEND=new n(hi.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),n.BYTE=new n(hi.BYTE,"BYTE",Int32Array.from([8,16,16]),4),n.ECI=new n(hi.ECI,"ECI",Int32Array.from([0,0,0]),7),n.KANJI=new n(hi.KANJI,"KANJI",Int32Array.from([8,10,12]),8),n.FNC1_FIRST_POSITION=new n(hi.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),n.FNC1_SECOND_POSITION=new n(hi.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),n.HANZI=new n(hi.HANZI,"HANZI",Int32Array.from([8,10,12]),13),n})(),Mj=(function(){function n(){}return n.decode=function(e,t,r,i){var a=new j3(e),o=new nt,c=new Array,u=-1,d=-1;try{var m=null,g=!1,_=void 0;do{if(a.available()<4)_=Yt.TERMINATOR;else{var w=a.readBits(4);_=Yt.forBits(w)}switch(_){case Yt.TERMINATOR:break;case Yt.FNC1_FIRST_POSITION:case Yt.FNC1_SECOND_POSITION:g=!0;break;case Yt.STRUCTURED_APPEND:if(a.available()<16)throw new _e;u=a.readBits(8),d=a.readBits(8);break;case Yt.ECI:var A=n.parseECIValue(a);if(m=Mn.getCharacterSetECIByValue(A),m===null)throw new _e;break;case Yt.HANZI:var S=a.readBits(4),D=a.readBits(_.getCharacterCountBits(t));S===n.GB2312_SUBSET&&n.decodeHanziSegment(a,o,D);break;default:var C=a.readBits(_.getCharacterCountBits(t));switch(_){case Yt.NUMERIC:n.decodeNumericSegment(a,o,C);break;case Yt.ALPHANUMERIC:n.decodeAlphanumericSegment(a,o,C,g);break;case Yt.BYTE:n.decodeByteSegment(a,o,C,m,c,i);break;case Yt.KANJI:n.decodeKanjiSegment(a,o,C);break;default:throw new _e}break}}while(_!==Yt.TERMINATOR)}catch{throw new _e}return new wp(e,o.toString(),c.length===0?null:c,r===null?null:r.toString(),u,d)},n.decodeHanziSegment=function(e,t,r){if(r*13>e.available())throw new _e;for(var i=new Uint8Array(2*r),a=0;r>0;){var o=e.readBits(13),c=o/96<<8&4294967295|o%96;c<959?c+=41377:c+=42657,i[a]=c>>8&255,i[a+1]=c&255,a+=2,r--}try{t.append(_i.decode(i,pt.GB2312))}catch(u){throw new _e(u)}},n.decodeKanjiSegment=function(e,t,r){if(r*13>e.available())throw new _e;for(var i=new Uint8Array(2*r),a=0;r>0;){var o=e.readBits(13),c=o/192<<8&4294967295|o%192;c<7936?c+=33088:c+=49472,i[a]=c>>8,i[a+1]=c,a+=2,r--}try{t.append(_i.decode(i,pt.SHIFT_JIS))}catch(u){throw new _e(u)}},n.decodeByteSegment=function(e,t,r,i,a,o){if(8*r>e.available())throw new _e;for(var c=new Uint8Array(r),u=0;u<r;u++)c[u]=e.readBits(8);var d;i===null?d=pt.guessEncoding(c,o):d=i.getName();try{t.append(_i.decode(c,d))}catch(m){throw new _e(m)}a.push(c)},n.toAlphaNumericChar=function(e){if(e>=n.ALPHANUMERIC_CHARS.length)throw new _e;return n.ALPHANUMERIC_CHARS[e]},n.decodeAlphanumericSegment=function(e,t,r,i){for(var a=t.length();r>1;){if(e.available()<11)throw new _e;var o=e.readBits(11);t.append(n.toAlphaNumericChar(Math.floor(o/45))),t.append(n.toAlphaNumericChar(o%45)),r-=2}if(r===1){if(e.available()<6)throw new _e;t.append(n.toAlphaNumericChar(e.readBits(6)))}if(i)for(var c=a;c<t.length();c++)t.charAt(c)==="%"&&(c<t.length()-1&&t.charAt(c+1)==="%"?t.deleteCharAt(c+1):t.setCharAt(c,""))},n.decodeNumericSegment=function(e,t,r){for(;r>=3;){if(e.available()<10)throw new _e;var i=e.readBits(10);if(i>=1e3)throw new _e;t.append(n.toAlphaNumericChar(Math.floor(i/100))),t.append(n.toAlphaNumericChar(Math.floor(i/10)%10)),t.append(n.toAlphaNumericChar(i%10)),r-=3}if(r===2){if(e.available()<7)throw new _e;var a=e.readBits(7);if(a>=100)throw new _e;t.append(n.toAlphaNumericChar(Math.floor(a/10))),t.append(n.toAlphaNumericChar(a%10))}else if(r===1){if(e.available()<4)throw new _e;var o=e.readBits(4);if(o>=10)throw new _e;t.append(n.toAlphaNumericChar(o))}},n.parseECIValue=function(e){var t=e.readBits(8);if((t&128)===0)return t&127;if((t&192)===128){var r=e.readBits(8);return(t&63)<<8&4294967295|r}if((t&224)===192){var i=e.readBits(16);return(t&31)<<16&4294967295|i}throw new _e},n.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",n.GB2312_SUBSET=1,n})(),B3=(function(){function n(e){this.mirrored=e}return n.prototype.isMirrored=function(){return this.mirrored},n.prototype.applyMirroredCorrection=function(e){if(!(!this.mirrored||e===null||e.length<3)){var t=e[0];e[0]=e[2],e[2]=t}},n})(),YA=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Pj=(function(){function n(){this.rsDecoder=new Ep(kr.QR_CODE_FIELD_256)}return n.prototype.decodeBooleanArray=function(e,t){return this.decodeBitMatrix(Ta.parseFromBooleanArray(e),t)},n.prototype.decodeBitMatrix=function(e,t){var r=new Oj(e),i=null;try{return this.decodeBitMatrixParser(r,t)}catch(o){i=o}try{r.remask(),r.setMirror(!0),r.readVersion(),r.readFormatInformation(),r.mirror();var a=this.decodeBitMatrixParser(r,t);return a.setOther(new B3(!0)),a}catch(o){throw i!==null?i:o}},n.prototype.decodeBitMatrixParser=function(e,t){var r,i,a,o,c=e.readVersion(),u=e.readFormatInformation().getErrorCorrectionLevel(),d=e.readCodewords(),m=Dj.getDataBlocks(d,c,u),g=0;try{for(var _=YA(m),w=_.next();!w.done;w=_.next()){var A=w.value;g+=A.getNumDataCodewords()}}catch($){r={error:$}}finally{try{w&&!w.done&&(i=_.return)&&i.call(_)}finally{if(r)throw r.error}}var S=new Uint8Array(g),D=0;try{for(var C=YA(m),k=C.next();!k.done;k=C.next()){var A=k.value,V=A.getCodewords(),z=A.getNumDataCodewords();this.correctErrors(V,z);for(var q=0;q<z;q++)S[D++]=V[q]}}catch($){a={error:$}}finally{try{k&&!k.done&&(o=C.return)&&o.call(C)}finally{if(a)throw a.error}}return Mj.decode(S,c,u,t)},n.prototype.correctErrors=function(e,t){var r=new Int32Array(e);try{this.rsDecoder.decode(r,e.length-t)}catch{throw new Cn}for(var i=0;i<t;i++)e[i]=r[i]},n})(),kj=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),jj=(function(n){kj(e,n);function e(t,r,i){var a=n.call(this,t,r)||this;return a.estimatedModuleSize=i,a}return e.prototype.aboutEquals=function(t,r,i){if(Math.abs(r-this.getY())<=t&&Math.abs(i-this.getX())<=t){var a=Math.abs(t-this.estimatedModuleSize);return a<=1||a<=this.estimatedModuleSize}return!1},e.prototype.combineEstimate=function(t,r,i){var a=(this.getX()+r)/2,o=(this.getY()+t)/2,c=(this.estimatedModuleSize+i)/2;return new e(a,o,c)},e})(Ne),Lj=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Bj=(function(){function n(e,t,r,i,a,o,c){this.image=e,this.startX=t,this.startY=r,this.width=i,this.height=a,this.moduleSize=o,this.resultPointCallback=c,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}return n.prototype.find=function(){for(var e=this.startX,t=this.height,r=this.width,i=e+r,a=this.startY+t/2,o=new Int32Array(3),c=this.image,u=0;u<t;u++){var d=a+((u&1)===0?Math.floor((u+1)/2):-Math.floor((u+1)/2));o[0]=0,o[1]=0,o[2]=0;for(var m=e;m<i&&!c.get(m,d);)m++;for(var g=0;m<i;){if(c.get(m,d))if(g===1)o[1]++;else if(g===2){if(this.foundPatternCross(o)){var _=this.handlePossibleCenter(o,d,m);if(_!==null)return _}o[0]=o[2],o[1]=1,o[2]=0,g=1}else o[++g]++;else g===1&&g++,o[g]++;m++}if(this.foundPatternCross(o)){var _=this.handlePossibleCenter(o,d,i);if(_!==null)return _}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new oe},n.centerFromEnd=function(e,t){return t-e[2]-e[1]/2},n.prototype.foundPatternCross=function(e){for(var t=this.moduleSize,r=t/2,i=0;i<3;i++)if(Math.abs(t-e[i])>=r)return!1;return!0},n.prototype.crossCheckVertical=function(e,t,r,i){var a=this.image,o=a.getHeight(),c=this.crossCheckStateCount;c[0]=0,c[1]=0,c[2]=0;for(var u=e;u>=0&&a.get(t,u)&&c[1]<=r;)c[1]++,u--;if(u<0||c[1]>r)return NaN;for(;u>=0&&!a.get(t,u)&&c[0]<=r;)c[0]++,u--;if(c[0]>r)return NaN;for(u=e+1;u<o&&a.get(t,u)&&c[1]<=r;)c[1]++,u++;if(u===o||c[1]>r)return NaN;for(;u<o&&!a.get(t,u)&&c[2]<=r;)c[2]++,u++;if(c[2]>r)return NaN;var d=c[0]+c[1]+c[2];return 5*Math.abs(d-i)>=2*i?NaN:this.foundPatternCross(c)?n.centerFromEnd(c,u):NaN},n.prototype.handlePossibleCenter=function(e,t,r){var i,a,o=e[0]+e[1]+e[2],c=n.centerFromEnd(e,r),u=this.crossCheckVertical(t,c,2*e[1],o);if(!isNaN(u)){var d=(e[0]+e[1]+e[2])/3;try{for(var m=Lj(this.possibleCenters),g=m.next();!g.done;g=m.next()){var _=g.value;if(_.aboutEquals(d,u,c))return _.combineEstimate(u,c,d)}}catch(A){i={error:A}}finally{try{g&&!g.done&&(a=m.return)&&a.call(m)}finally{if(i)throw i.error}}var w=new jj(c,u,d);this.possibleCenters.push(w),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(w)}return null},n})(),Vj=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Fj=(function(n){Vj(e,n);function e(t,r,i,a){var o=n.call(this,t,r)||this;return o.estimatedModuleSize=i,o.count=a,a===void 0&&(o.count=1),o}return e.prototype.getEstimatedModuleSize=function(){return this.estimatedModuleSize},e.prototype.getCount=function(){return this.count},e.prototype.aboutEquals=function(t,r,i){if(Math.abs(r-this.getY())<=t&&Math.abs(i-this.getX())<=t){var a=Math.abs(t-this.estimatedModuleSize);return a<=1||a<=this.estimatedModuleSize}return!1},e.prototype.combineEstimate=function(t,r,i){var a=this.count+1,o=(this.count*this.getX()+r)/a,c=(this.count*this.getY()+t)/a,u=(this.count*this.estimatedModuleSize+i)/a;return new e(o,c,u,a)},e})(Ne),Uj=(function(){function n(e){this.bottomLeft=e[0],this.topLeft=e[1],this.topRight=e[2]}return n.prototype.getBottomLeft=function(){return this.bottomLeft},n.prototype.getTopLeft=function(){return this.topLeft},n.prototype.getTopRight=function(){return this.topRight},n})(),Wu=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},zj=(function(){function n(e,t){this.image=e,this.resultPointCallback=t,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=t}return n.prototype.getImage=function(){return this.image},n.prototype.getPossibleCenters=function(){return this.possibleCenters},n.prototype.find=function(e){var t=e!=null&&e.get(Gt.TRY_HARDER)!==void 0,r=e!=null&&e.get(Gt.PURE_BARCODE)!==void 0,i=this.image,a=i.getHeight(),o=i.getWidth(),c=Math.floor(3*a/(4*n.MAX_MODULES));(c<n.MIN_SKIP||t)&&(c=n.MIN_SKIP);for(var u=!1,d=new Int32Array(5),m=c-1;m<a&&!u;m+=c){d[0]=0,d[1]=0,d[2]=0,d[3]=0,d[4]=0;for(var g=0,_=0;_<o;_++)if(i.get(_,m))(g&1)===1&&g++,d[g]++;else if((g&1)===0)if(g===4)if(n.foundPatternCross(d)){var w=this.handlePossibleCenter(d,m,_,r);if(w===!0)if(c=2,this.hasSkipped===!0)u=this.haveMultiplyConfirmedCenters();else{var A=this.findRowSkip();A>d[2]&&(m+=A-d[2]-c,_=o-1)}else{d[0]=d[2],d[1]=d[3],d[2]=d[4],d[3]=1,d[4]=0,g=3;continue}g=0,d[0]=0,d[1]=0,d[2]=0,d[3]=0,d[4]=0}else d[0]=d[2],d[1]=d[3],d[2]=d[4],d[3]=1,d[4]=0,g=3;else d[++g]++;else d[g]++;if(n.foundPatternCross(d)){var w=this.handlePossibleCenter(d,m,o,r);w===!0&&(c=d[0],this.hasSkipped&&(u=this.haveMultiplyConfirmedCenters()))}}var S=this.selectBestPatterns();return Ne.orderBestPatterns(S),new Uj(S)},n.centerFromEnd=function(e,t){return t-e[4]-e[3]-e[2]/2},n.foundPatternCross=function(e){for(var t=0,r=0;r<5;r++){var i=e[r];if(i===0)return!1;t+=i}if(t<7)return!1;var a=t/7,o=a/2;return Math.abs(a-e[0])<o&&Math.abs(a-e[1])<o&&Math.abs(3*a-e[2])<3*o&&Math.abs(a-e[3])<o&&Math.abs(a-e[4])<o},n.prototype.getCrossCheckStateCount=function(){var e=this.crossCheckStateCount;return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e},n.prototype.crossCheckDiagonal=function(e,t,r,i){for(var a=this.getCrossCheckStateCount(),o=0,c=this.image;e>=o&&t>=o&&c.get(t-o,e-o);)a[2]++,o++;if(e<o||t<o)return!1;for(;e>=o&&t>=o&&!c.get(t-o,e-o)&&a[1]<=r;)a[1]++,o++;if(e<o||t<o||a[1]>r)return!1;for(;e>=o&&t>=o&&c.get(t-o,e-o)&&a[0]<=r;)a[0]++,o++;if(a[0]>r)return!1;var u=c.getHeight(),d=c.getWidth();for(o=1;e+o<u&&t+o<d&&c.get(t+o,e+o);)a[2]++,o++;if(e+o>=u||t+o>=d)return!1;for(;e+o<u&&t+o<d&&!c.get(t+o,e+o)&&a[3]<r;)a[3]++,o++;if(e+o>=u||t+o>=d||a[3]>=r)return!1;for(;e+o<u&&t+o<d&&c.get(t+o,e+o)&&a[4]<r;)a[4]++,o++;if(a[4]>=r)return!1;var m=a[0]+a[1]+a[2]+a[3]+a[4];return Math.abs(m-i)<2*i&&n.foundPatternCross(a)},n.prototype.crossCheckVertical=function(e,t,r,i){for(var a=this.image,o=a.getHeight(),c=this.getCrossCheckStateCount(),u=e;u>=0&&a.get(t,u);)c[2]++,u--;if(u<0)return NaN;for(;u>=0&&!a.get(t,u)&&c[1]<=r;)c[1]++,u--;if(u<0||c[1]>r)return NaN;for(;u>=0&&a.get(t,u)&&c[0]<=r;)c[0]++,u--;if(c[0]>r)return NaN;for(u=e+1;u<o&&a.get(t,u);)c[2]++,u++;if(u===o)return NaN;for(;u<o&&!a.get(t,u)&&c[3]<r;)c[3]++,u++;if(u===o||c[3]>=r)return NaN;for(;u<o&&a.get(t,u)&&c[4]<r;)c[4]++,u++;if(c[4]>=r)return NaN;var d=c[0]+c[1]+c[2]+c[3]+c[4];return 5*Math.abs(d-i)>=2*i?NaN:n.foundPatternCross(c)?n.centerFromEnd(c,u):NaN},n.prototype.crossCheckHorizontal=function(e,t,r,i){for(var a=this.image,o=a.getWidth(),c=this.getCrossCheckStateCount(),u=e;u>=0&&a.get(u,t);)c[2]++,u--;if(u<0)return NaN;for(;u>=0&&!a.get(u,t)&&c[1]<=r;)c[1]++,u--;if(u<0||c[1]>r)return NaN;for(;u>=0&&a.get(u,t)&&c[0]<=r;)c[0]++,u--;if(c[0]>r)return NaN;for(u=e+1;u<o&&a.get(u,t);)c[2]++,u++;if(u===o)return NaN;for(;u<o&&!a.get(u,t)&&c[3]<r;)c[3]++,u++;if(u===o||c[3]>=r)return NaN;for(;u<o&&a.get(u,t)&&c[4]<r;)c[4]++,u++;if(c[4]>=r)return NaN;var d=c[0]+c[1]+c[2]+c[3]+c[4];return 5*Math.abs(d-i)>=i?NaN:n.foundPatternCross(c)?n.centerFromEnd(c,u):NaN},n.prototype.handlePossibleCenter=function(e,t,r,i){var a=e[0]+e[1]+e[2]+e[3]+e[4],o=n.centerFromEnd(e,r),c=this.crossCheckVertical(t,Math.floor(o),e[2],a);if(!isNaN(c)&&(o=this.crossCheckHorizontal(Math.floor(o),Math.floor(c),e[2],a),!isNaN(o)&&(!i||this.crossCheckDiagonal(Math.floor(c),Math.floor(o),e[2],a)))){for(var u=a/7,d=!1,m=this.possibleCenters,g=0,_=m.length;g<_;g++){var w=m[g];if(w.aboutEquals(u,c,o)){m[g]=w.combineEstimate(c,o,u),d=!0;break}}if(!d){var A=new Fj(o,c,u);m.push(A),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(A)}return!0}return!1},n.prototype.findRowSkip=function(){var e,t,r=this.possibleCenters.length;if(r<=1)return 0;var i=null;try{for(var a=Wu(this.possibleCenters),o=a.next();!o.done;o=a.next()){var c=o.value;if(c.getCount()>=n.CENTER_QUORUM)if(i==null)i=c;else return this.hasSkipped=!0,Math.floor((Math.abs(i.getX()-c.getX())-Math.abs(i.getY()-c.getY()))/2)}}catch(u){e={error:u}}finally{try{o&&!o.done&&(t=a.return)&&t.call(a)}finally{if(e)throw e.error}}return 0},n.prototype.haveMultiplyConfirmedCenters=function(){var e,t,r,i,a=0,o=0,c=this.possibleCenters.length;try{for(var u=Wu(this.possibleCenters),d=u.next();!d.done;d=u.next()){var m=d.value;m.getCount()>=n.CENTER_QUORUM&&(a++,o+=m.getEstimatedModuleSize())}}catch(S){e={error:S}}finally{try{d&&!d.done&&(t=u.return)&&t.call(u)}finally{if(e)throw e.error}}if(a<3)return!1;var g=o/c,_=0;try{for(var w=Wu(this.possibleCenters),A=w.next();!A.done;A=w.next()){var m=A.value;_+=Math.abs(m.getEstimatedModuleSize()-g)}}catch(S){r={error:S}}finally{try{A&&!A.done&&(i=w.return)&&i.call(w)}finally{if(r)throw r.error}}return _<=.05*o},n.prototype.selectBestPatterns=function(){var e,t,r,i,a=this.possibleCenters.length;if(a<3)throw new oe;var o=this.possibleCenters,c;if(a>3){var u=0,d=0;try{for(var m=Wu(this.possibleCenters),g=m.next();!g.done;g=m.next()){var _=g.value,w=_.getEstimatedModuleSize();u+=w,d+=w*w}}catch(q){e={error:q}}finally{try{g&&!g.done&&(t=m.return)&&t.call(m)}finally{if(e)throw e.error}}c=u/a;var A=Math.sqrt(d/a-c*c);o.sort(function(q,$){var M=Math.abs($.getEstimatedModuleSize()-c),b=Math.abs(q.getEstimatedModuleSize()-c);return M<b?-1:M>b?1:0});for(var S=Math.max(.2*c,A),D=0;D<o.length&&o.length>3;D++){var C=o[D];Math.abs(C.getEstimatedModuleSize()-c)>S&&(o.splice(D,1),D--)}}if(o.length>3){var u=0;try{for(var k=Wu(o),V=k.next();!V.done;V=k.next()){var z=V.value;u+=z.getEstimatedModuleSize()}}catch($){r={error:$}}finally{try{V&&!V.done&&(i=k.return)&&i.call(k)}finally{if(r)throw r.error}}c=u/o.length,o.sort(function($,M){if(M.getCount()===$.getCount()){var b=Math.abs(M.getEstimatedModuleSize()-c),R=Math.abs($.getEstimatedModuleSize()-c);return b<R?1:b>R?-1:0}else return M.getCount()-$.getCount()}),o.splice(3)}return[o[0],o[1],o[2]]},n.CENTER_QUORUM=2,n.MIN_SKIP=3,n.MAX_MODULES=57,n})(),Hj=(function(){function n(e){this.image=e}return n.prototype.getImage=function(){return this.image},n.prototype.getResultPointCallback=function(){return this.resultPointCallback},n.prototype.detect=function(e){this.resultPointCallback=e==null?null:e.get(Gt.NEED_RESULT_POINT_CALLBACK);var t=new zj(this.image,this.resultPointCallback),r=t.find(e);return this.processFinderPatternInfo(r)},n.prototype.processFinderPatternInfo=function(e){var t=e.getTopLeft(),r=e.getTopRight(),i=e.getBottomLeft(),a=this.calculateModuleSize(t,r,i);if(a<1)throw new oe("No pattern found in proccess finder.");var o=n.computeDimension(t,r,i,a),c=tl.getProvisionalVersionForDimension(o),u=c.getDimensionForVersion()-7,d=null;if(c.getAlignmentPatternCenters().length>0)for(var m=r.getX()-t.getX()+i.getX(),g=r.getY()-t.getY()+i.getY(),_=1-3/u,w=Math.floor(t.getX()+_*(m-t.getX())),A=Math.floor(t.getY()+_*(g-t.getY())),S=4;S<=16;S<<=1)try{d=this.findAlignmentInRegion(a,w,A,S);break}catch(V){if(!(V instanceof oe))throw V}var D=n.createTransform(t,r,i,d,o),C=n.sampleGrid(this.image,D,o),k;return d===null?k=[i,t,r]:k=[i,t,r,d],new $y(C,k)},n.createTransform=function(e,t,r,i,a){var o=a-3.5,c,u,d,m;return i!==null?(c=i.getX(),u=i.getY(),d=o-3,m=d):(c=t.getX()-e.getX()+r.getX(),u=t.getY()-e.getY()+r.getY(),d=o,m=o),D3.quadrilateralToQuadrilateral(3.5,3.5,o,3.5,d,m,3.5,o,e.getX(),e.getY(),t.getX(),t.getY(),c,u,r.getX(),r.getY())},n.sampleGrid=function(e,t,r){var i=Xy.getInstance();return i.sampleGridWithTransform(e,r,r,t)},n.computeDimension=function(e,t,r,i){var a=wt.round(Ne.distance(e,t)/i),o=wt.round(Ne.distance(e,r)/i),c=Math.floor((a+o)/2)+7;switch(c&3){case 0:c++;break;case 2:c--;break;case 3:throw new oe("Dimensions could be not found.")}return c},n.prototype.calculateModuleSize=function(e,t,r){return(this.calculateModuleSizeOneWay(e,t)+this.calculateModuleSizeOneWay(e,r))/2},n.prototype.calculateModuleSizeOneWay=function(e,t){var r=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(e.getX()),Math.floor(e.getY()),Math.floor(t.getX()),Math.floor(t.getY())),i=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(t.getX()),Math.floor(t.getY()),Math.floor(e.getX()),Math.floor(e.getY()));return isNaN(r)?i/7:isNaN(i)?r/7:(r+i)/14},n.prototype.sizeOfBlackWhiteBlackRunBothWays=function(e,t,r,i){var a=this.sizeOfBlackWhiteBlackRun(e,t,r,i),o=1,c=e-(r-e);c<0?(o=e/(e-c),c=0):c>=this.image.getWidth()&&(o=(this.image.getWidth()-1-e)/(c-e),c=this.image.getWidth()-1);var u=Math.floor(t-(i-t)*o);return o=1,u<0?(o=t/(t-u),u=0):u>=this.image.getHeight()&&(o=(this.image.getHeight()-1-t)/(u-t),u=this.image.getHeight()-1),c=Math.floor(e+(c-e)*o),a+=this.sizeOfBlackWhiteBlackRun(e,t,c,u),a-1},n.prototype.sizeOfBlackWhiteBlackRun=function(e,t,r,i){var a=Math.abs(i-t)>Math.abs(r-e);if(a){var o=e;e=t,t=o,o=r,r=i,i=o}for(var c=Math.abs(r-e),u=Math.abs(i-t),d=-c/2,m=e<r?1:-1,g=t<i?1:-1,_=0,w=r+m,A=e,S=t;A!==w;A+=m){var D=a?S:A,C=a?A:S;if(_===1===this.image.get(D,C)){if(_===2)return wt.distance(A,S,e,t);_++}if(d+=u,d>0){if(S===i)break;S+=g,d-=c}}return _===2?wt.distance(r+m,i,e,t):NaN},n.prototype.findAlignmentInRegion=function(e,t,r,i){var a=Math.floor(i*e),o=Math.max(0,t-a),c=Math.min(this.image.getWidth()-1,t+a);if(c-o<e*3)throw new oe("Alignment top exceeds estimated module size.");var u=Math.max(0,r-a),d=Math.min(this.image.getHeight()-1,r+a);if(d-u<e*3)throw new oe("Alignment bottom exceeds estimated module size.");var m=new Bj(this.image,o,u,c-o,d-u,e,this.resultPointCallback);return m.find()},n})(),P0=(function(){function n(){this.decoder=new Pj}return n.prototype.getDecoder=function(){return this.decoder},n.prototype.decode=function(e,t){var r,i;if(t!=null&&t.get(Gt.PURE_BARCODE)!==void 0){var a=n.extractPureBits(e.getBlackMatrix());r=this.decoder.decodeBitMatrix(a,t),i=n.NO_POINTS}else{var o=new Hj(e.getBlackMatrix()).detect(t);r=this.decoder.decodeBitMatrix(o.getBits(),t),i=o.getPoints()}r.getOther()instanceof B3&&r.getOther().applyMirroredCorrection(i);var c=new yr(r.getText(),r.getRawBytes(),void 0,i,Le.QR_CODE,void 0),u=r.getByteSegments();u!==null&&c.putMetadata(or.BYTE_SEGMENTS,u);var d=r.getECLevel();return d!==null&&c.putMetadata(or.ERROR_CORRECTION_LEVEL,d),r.hasStructuredAppend()&&(c.putMetadata(or.STRUCTURED_APPEND_SEQUENCE,r.getStructuredAppendSequenceNumber()),c.putMetadata(or.STRUCTURED_APPEND_PARITY,r.getStructuredAppendParity())),c},n.prototype.reset=function(){},n.extractPureBits=function(e){var t=e.getTopLeftOnBit(),r=e.getBottomRightOnBit();if(t===null||r===null)throw new oe;var i=this.moduleSize(t,e),a=t[1],o=r[1],c=t[0],u=r[0];if(c>=u||a>=o)throw new oe;if(o-a!==u-c&&(u=c+(o-a),u>=e.getWidth()))throw new oe;var d=Math.round((u-c+1)/i),m=Math.round((o-a+1)/i);if(d<=0||m<=0)throw new oe;if(m!==d)throw new oe;var g=Math.floor(i/2);a+=g,c+=g;var _=c+Math.floor((d-1)*i)-u;if(_>0){if(_>g)throw new oe;c-=_}var w=a+Math.floor((m-1)*i)-o;if(w>0){if(w>g)throw new oe;a-=w}for(var A=new Ta(d,m),S=0;S<m;S++)for(var D=a+Math.floor(S*i),C=0;C<d;C++)e.get(c+Math.floor(C*i),D)&&A.set(C,S);return A},n.moduleSize=function(e,t){for(var r=t.getHeight(),i=t.getWidth(),a=e[0],o=e[1],c=!0,u=0;a<i&&o<r;){if(c!==t.get(a,o)){if(++u===5)break;c=!c}a++,o++}if(a===i||o===r)throw new oe;return(a-e[0])/7},n.NO_POINTS=new Array,n})(),Gj=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},vt=(function(){function n(){}return n.prototype.PDF417Common=function(){},n.getBitCountSum=function(e){return wt.sum(e)},n.toIntArray=function(e){var t,r;if(e==null||!e.length)return n.EMPTY_INT_ARRAY;var i=new Int32Array(e.length),a=0;try{for(var o=Gj(e),c=o.next();!c.done;c=o.next()){var u=c.value;i[a++]=u}}catch(d){t={error:d}}finally{try{c&&!c.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}return i},n.getCodeword=function(e){var t=Pn.binarySearch(n.SYMBOL_TABLE,e&262143);return t<0?-1:(n.CODEWORD_TABLE[t]-1)%n.NUMBER_OF_CODEWORDS},n.NUMBER_OF_CODEWORDS=929,n.MAX_CODEWORDS_IN_BARCODE=n.NUMBER_OF_CODEWORDS-1,n.MIN_ROWS_IN_BARCODE=3,n.MAX_ROWS_IN_BARCODE=90,n.MODULES_IN_CODEWORD=17,n.MODULES_IN_STOP_PATTERN=18,n.BARS_IN_MODULE=8,n.EMPTY_INT_ARRAY=new Int32Array([]),n.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),n.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]),n})(),qj=(function(){function n(e,t){this.bits=e,this.points=t}return n.prototype.getBits=function(){return this.bits},n.prototype.getPoints=function(){return this.points},n})(),$j=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Xj=(function(){function n(){}return n.detectMultiple=function(e,t,r){var i=e.getBlackMatrix(),a=n.detect(r,i);return a.length||(i=i.clone(),i.rotate180(),a=n.detect(r,i)),new qj(i,a)},n.detect=function(e,t){for(var r,i,a=new Array,o=0,c=0,u=!1;o<t.getHeight();){var d=n.findVertices(t,o,c);if(d[0]==null&&d[3]==null){if(!u)break;u=!1,c=0;try{for(var m=(r=void 0,$j(a)),g=m.next();!g.done;g=m.next()){var _=g.value;_[1]!=null&&(o=Math.trunc(Math.max(o,_[1].getY()))),_[3]!=null&&(o=Math.max(o,Math.trunc(_[3].getY())))}}catch(w){r={error:w}}finally{try{g&&!g.done&&(i=m.return)&&i.call(m)}finally{if(r)throw r.error}}o+=n.ROW_STEP;continue}if(u=!0,a.push(d),!e)break;d[2]!=null?(c=Math.trunc(d[2].getX()),o=Math.trunc(d[2].getY())):(c=Math.trunc(d[4].getX()),o=Math.trunc(d[4].getY()))}return a},n.findVertices=function(e,t,r){var i=e.getHeight(),a=e.getWidth(),o=new Array(8);return n.copyToResult(o,n.findRowsWithPattern(e,i,a,t,r,n.START_PATTERN),n.INDEXES_START_PATTERN),o[4]!=null&&(r=Math.trunc(o[4].getX()),t=Math.trunc(o[4].getY())),n.copyToResult(o,n.findRowsWithPattern(e,i,a,t,r,n.STOP_PATTERN),n.INDEXES_STOP_PATTERN),o},n.copyToResult=function(e,t,r){for(var i=0;i<r.length;i++)e[r[i]]=t[i]},n.findRowsWithPattern=function(e,t,r,i,a,o){for(var c=new Array(4),u=!1,d=new Int32Array(o.length);i<t;i+=n.ROW_STEP){var m=n.findGuardPattern(e,a,i,r,!1,o,d);if(m!=null){for(;i>0;){var g=n.findGuardPattern(e,a,--i,r,!1,o,d);if(g!=null)m=g;else{i++;break}}c[0]=new Ne(m[0],i),c[1]=new Ne(m[1],i),u=!0;break}}var _=i+1;if(u){for(var w=0,g=Int32Array.from([Math.trunc(c[0].getX()),Math.trunc(c[1].getX())]);_<t;_++){var m=n.findGuardPattern(e,g[0],_,r,!1,o,d);if(m!=null&&Math.abs(g[0]-m[0])<n.MAX_PATTERN_DRIFT&&Math.abs(g[1]-m[1])<n.MAX_PATTERN_DRIFT)g=m,w=0;else{if(w>n.SKIPPED_ROW_COUNT_MAX)break;w++}}_-=w+1,c[2]=new Ne(g[0],_),c[3]=new Ne(g[1],_)}return _-i<n.BARCODE_MIN_HEIGHT&&Pn.fill(c,null),c},n.findGuardPattern=function(e,t,r,i,a,o,c){Pn.fillWithin(c,0,c.length,0);for(var u=t,d=0;e.get(u,r)&&u>0&&d++<n.MAX_PIXEL_DRIFT;)u--;for(var m=u,g=0,_=o.length,w=a;m<i;m++){var A=e.get(m,r);if(A!==w)c[g]++;else{if(g===_-1){if(n.patternMatchVariance(c,o,n.MAX_INDIVIDUAL_VARIANCE)<n.MAX_AVG_VARIANCE)return new Int32Array([u,m]);u+=c[0]+c[1],Ht.arraycopy(c,2,c,0,g-1),c[g-1]=0,c[g]=0,g--}else g++;c[g]=1,w=!w}}return g===_-1&&n.patternMatchVariance(c,o,n.MAX_INDIVIDUAL_VARIANCE)<n.MAX_AVG_VARIANCE?new Int32Array([u,m-1]):null},n.patternMatchVariance=function(e,t,r){for(var i=e.length,a=0,o=0,c=0;c<i;c++)a+=e[c],o+=t[c];if(a<o)return 1/0;var u=a/o;r*=u;for(var d=0,m=0;m<i;m++){var g=e[m],_=t[m]*u,w=g>_?g-_:_-g;if(w>r)return 1/0;d+=w}return d/a},n.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),n.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),n.MAX_AVG_VARIANCE=.42,n.MAX_INDIVIDUAL_VARIANCE=.8,n.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),n.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),n.MAX_PIXEL_DRIFT=3,n.MAX_PATTERN_DRIFT=5,n.SKIPPED_ROW_COUNT_MAX=25,n.ROW_STEP=5,n.BARCODE_MIN_HEIGHT=10,n})(),Yj=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Jo=(function(){function n(e,t){if(t.length===0)throw new Be;this.field=e;var r=t.length;if(r>1&&t[0]===0){for(var i=1;i<r&&t[i]===0;)i++;i===r?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(r-i),Ht.arraycopy(t,i,this.coefficients,0,this.coefficients.length))}else this.coefficients=t}return n.prototype.getCoefficients=function(){return this.coefficients},n.prototype.getDegree=function(){return this.coefficients.length-1},n.prototype.isZero=function(){return this.coefficients[0]===0},n.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},n.prototype.evaluateAt=function(e){var t,r;if(e===0)return this.getCoefficient(0);if(e===1){var i=0;try{for(var a=Yj(this.coefficients),o=a.next();!o.done;o=a.next()){var c=o.value;i=this.field.add(i,c)}}catch(g){t={error:g}}finally{try{o&&!o.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}return i}for(var u=this.coefficients[0],d=this.coefficients.length,m=1;m<d;m++)u=this.field.add(this.field.multiply(e,u),this.coefficients[m]);return u},n.prototype.add=function(e){if(!this.field.equals(e.field))throw new Be("ModulusPolys do not have same ModulusGF field");if(this.isZero())return e;if(e.isZero())return this;var t=this.coefficients,r=e.coefficients;if(t.length>r.length){var i=t;t=r,r=i}var a=new Int32Array(r.length),o=r.length-t.length;Ht.arraycopy(r,0,a,0,o);for(var c=o;c<r.length;c++)a[c]=this.field.add(t[c-o],r[c]);return new n(this.field,a)},n.prototype.subtract=function(e){if(!this.field.equals(e.field))throw new Be("ModulusPolys do not have same ModulusGF field");return e.isZero()?this:this.add(e.negative())},n.prototype.multiply=function(e){return e instanceof n?this.multiplyOther(e):this.multiplyScalar(e)},n.prototype.multiplyOther=function(e){if(!this.field.equals(e.field))throw new Be("ModulusPolys do not have same ModulusGF field");if(this.isZero()||e.isZero())return new n(this.field,new Int32Array([0]));for(var t=this.coefficients,r=t.length,i=e.coefficients,a=i.length,o=new Int32Array(r+a-1),c=0;c<r;c++)for(var u=t[c],d=0;d<a;d++)o[c+d]=this.field.add(o[c+d],this.field.multiply(u,i[d]));return new n(this.field,o)},n.prototype.negative=function(){for(var e=this.coefficients.length,t=new Int32Array(e),r=0;r<e;r++)t[r]=this.field.subtract(0,this.coefficients[r]);return new n(this.field,t)},n.prototype.multiplyScalar=function(e){if(e===0)return new n(this.field,new Int32Array([0]));if(e===1)return this;for(var t=this.coefficients.length,r=new Int32Array(t),i=0;i<t;i++)r[i]=this.field.multiply(this.coefficients[i],e);return new n(this.field,r)},n.prototype.multiplyByMonomial=function(e,t){if(e<0)throw new Be;if(t===0)return new n(this.field,new Int32Array([0]));for(var r=this.coefficients.length,i=new Int32Array(r+e),a=0;a<r;a++)i[a]=this.field.multiply(this.coefficients[a],t);return new n(this.field,i)},n.prototype.toString=function(){for(var e=new nt,t=this.getDegree();t>=0;t--){var r=this.getCoefficient(t);r!==0&&(r<0?(e.append(" - "),r=-r):e.length()>0&&e.append(" + "),(t===0||r!==1)&&e.append(r),t!==0&&(t===1?e.append("x"):(e.append("x^"),e.append(t))))}return e.toString()},n})(),Kj=(function(){function n(){}return n.prototype.add=function(e,t){return(e+t)%this.modulus},n.prototype.subtract=function(e,t){return(this.modulus+e-t)%this.modulus},n.prototype.exp=function(e){return this.expTable[e]},n.prototype.log=function(e){if(e===0)throw new Be;return this.logTable[e]},n.prototype.inverse=function(e){if(e===0)throw new O3;return this.expTable[this.modulus-this.logTable[e]-1]},n.prototype.multiply=function(e,t){return e===0||t===0?0:this.expTable[(this.logTable[e]+this.logTable[t])%(this.modulus-1)]},n.prototype.getSize=function(){return this.modulus},n.prototype.equals=function(e){return e===this},n})(),Wj=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Qj=(function(n){Wj(e,n);function e(t,r){var i=n.call(this)||this;i.modulus=t,i.expTable=new Int32Array(t),i.logTable=new Int32Array(t);for(var a=1,o=0;o<t;o++)i.expTable[o]=a,a=a*r%t;for(var o=0;o<t-1;o++)i.logTable[i.expTable[o]]=o;return i.zero=new Jo(i,new Int32Array([0])),i.one=new Jo(i,new Int32Array([1])),i}return e.prototype.getZero=function(){return this.zero},e.prototype.getOne=function(){return this.one},e.prototype.buildMonomial=function(t,r){if(t<0)throw new Be;if(r===0)return this.zero;var i=new Int32Array(t+1);return i[0]=r,new Jo(this,i)},e.PDF417_GF=new e(vt.NUMBER_OF_CODEWORDS,3),e})(Kj),Zj=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Jj=(function(){function n(){this.field=Qj.PDF417_GF}return n.prototype.decode=function(e,t,r){for(var i,a,o=new Jo(this.field,e),c=new Int32Array(t),u=!1,d=t;d>0;d--){var m=o.evaluateAt(this.field.exp(d));c[t-d]=m,m!==0&&(u=!0)}if(!u)return 0;var g=this.field.getOne();if(r!=null)try{for(var _=Zj(r),w=_.next();!w.done;w=_.next()){var A=w.value,S=this.field.exp(e.length-1-A),D=new Jo(this.field,new Int32Array([this.field.subtract(0,S),1]));g=g.multiply(D)}}catch(b){i={error:b}}finally{try{w&&!w.done&&(a=_.return)&&a.call(_)}finally{if(i)throw i.error}}for(var C=new Jo(this.field,c),k=this.runEuclideanAlgorithm(this.field.buildMonomial(t,1),C,t),V=k[0],z=k[1],q=this.findErrorLocations(V),$=this.findErrorMagnitudes(z,V,q),d=0;d<q.length;d++){var M=e.length-1-this.field.log(q[d]);if(M<0)throw Cn.getChecksumInstance();e[M]=this.field.subtract(e[M],$[d])}return q.length},n.prototype.runEuclideanAlgorithm=function(e,t,r){if(e.getDegree()<t.getDegree()){var i=e;e=t,t=i}for(var a=e,o=t,c=this.field.getZero(),u=this.field.getOne();o.getDegree()>=Math.round(r/2);){var d=a,m=c;if(a=o,c=u,a.isZero())throw Cn.getChecksumInstance();o=d;for(var g=this.field.getZero(),_=a.getCoefficient(a.getDegree()),w=this.field.inverse(_);o.getDegree()>=a.getDegree()&&!o.isZero();){var A=o.getDegree()-a.getDegree(),S=this.field.multiply(o.getCoefficient(o.getDegree()),w);g=g.add(this.field.buildMonomial(A,S)),o=o.subtract(a.multiplyByMonomial(A,S))}u=g.multiply(c).subtract(m).negative()}var D=u.getCoefficient(0);if(D===0)throw Cn.getChecksumInstance();var C=this.field.inverse(D),k=u.multiply(C),V=o.multiply(C);return[k,V]},n.prototype.findErrorLocations=function(e){for(var t=e.getDegree(),r=new Int32Array(t),i=0,a=1;a<this.field.getSize()&&i<t;a++)e.evaluateAt(a)===0&&(r[i]=this.field.inverse(a),i++);if(i!==t)throw Cn.getChecksumInstance();return r},n.prototype.findErrorMagnitudes=function(e,t,r){for(var i=t.getDegree(),a=new Int32Array(i),o=1;o<=i;o++)a[i-o]=this.field.multiply(o,t.getCoefficient(o));for(var c=new Jo(this.field,a),u=r.length,d=new Int32Array(u),o=0;o<u;o++){var m=this.field.inverse(r[o]),g=this.field.subtract(0,e.evaluateAt(m)),_=this.field.inverse(c.evaluateAt(m));d[o]=this.field.multiply(g,_)}return d},n})(),vv=(function(){function n(e,t,r,i,a){e instanceof n?this.constructor_2(e):this.constructor_1(e,t,r,i,a)}return n.prototype.constructor_1=function(e,t,r,i,a){var o=t==null||r==null,c=i==null||a==null;if(o&&c)throw new oe;o?(t=new Ne(0,i.getY()),r=new Ne(0,a.getY())):c&&(i=new Ne(e.getWidth()-1,t.getY()),a=new Ne(e.getWidth()-1,r.getY())),this.image=e,this.topLeft=t,this.bottomLeft=r,this.topRight=i,this.bottomRight=a,this.minX=Math.trunc(Math.min(t.getX(),r.getX())),this.maxX=Math.trunc(Math.max(i.getX(),a.getX())),this.minY=Math.trunc(Math.min(t.getY(),i.getY())),this.maxY=Math.trunc(Math.max(r.getY(),a.getY()))},n.prototype.constructor_2=function(e){this.image=e.image,this.topLeft=e.getTopLeft(),this.bottomLeft=e.getBottomLeft(),this.topRight=e.getTopRight(),this.bottomRight=e.getBottomRight(),this.minX=e.getMinX(),this.maxX=e.getMaxX(),this.minY=e.getMinY(),this.maxY=e.getMaxY()},n.merge=function(e,t){return e==null?t:t==null?e:new n(e.image,e.topLeft,e.bottomLeft,t.topRight,t.bottomRight)},n.prototype.addMissingRows=function(e,t,r){var i=this.topLeft,a=this.bottomLeft,o=this.topRight,c=this.bottomRight;if(e>0){var u=r?this.topLeft:this.topRight,d=Math.trunc(u.getY()-e);d<0&&(d=0);var m=new Ne(u.getX(),d);r?i=m:o=m}if(t>0){var g=r?this.bottomLeft:this.bottomRight,_=Math.trunc(g.getY()+t);_>=this.image.getHeight()&&(_=this.image.getHeight()-1);var w=new Ne(g.getX(),_);r?a=w:c=w}return new n(this.image,i,a,o,c)},n.prototype.getMinX=function(){return this.minX},n.prototype.getMaxX=function(){return this.maxX},n.prototype.getMinY=function(){return this.minY},n.prototype.getMaxY=function(){return this.maxY},n.prototype.getTopLeft=function(){return this.topLeft},n.prototype.getTopRight=function(){return this.topRight},n.prototype.getBottomLeft=function(){return this.bottomLeft},n.prototype.getBottomRight=function(){return this.bottomRight},n})(),eL=(function(){function n(e,t,r,i){this.columnCount=e,this.errorCorrectionLevel=i,this.rowCountUpperPart=t,this.rowCountLowerPart=r,this.rowCount=t+r}return n.prototype.getColumnCount=function(){return this.columnCount},n.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},n.prototype.getRowCount=function(){return this.rowCount},n.prototype.getRowCountUpperPart=function(){return this.rowCountUpperPart},n.prototype.getRowCountLowerPart=function(){return this.rowCountLowerPart},n})(),Ky=(function(){function n(){this.buffer=""}return n.form=function(e,t){var r=-1;function i(o,c,u,d,m,g){if(o==="%%")return"%";if(t[++r]!==void 0){o=d?parseInt(d.substr(1)):void 0;var _=m?parseInt(m.substr(1)):void 0,w;switch(g){case"s":w=t[r];break;case"c":w=t[r][0];break;case"f":w=parseFloat(t[r]).toFixed(o);break;case"p":w=parseFloat(t[r]).toPrecision(o);break;case"e":w=parseFloat(t[r]).toExponential(o);break;case"x":w=parseInt(t[r]).toString(_||16);break;case"d":w=parseFloat(parseInt(t[r],_||10).toPrecision(o)).toFixed(0);break}w=typeof w=="object"?JSON.stringify(w):(+w).toString(_);for(var A=parseInt(u),S=u&&u[0]+""=="0"?"0":" ";w.length<A;)w=c!==void 0?w+S:S+w;return w}}var a=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(a,i)},n.prototype.format=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this.buffer+=n.form(e,t)},n.prototype.toString=function(){return this.buffer},n})(),tL=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},V3=(function(){function n(e){this.boundingBox=new vv(e),this.codewords=new Array(e.getMaxY()-e.getMinY()+1)}return n.prototype.getCodewordNearby=function(e){var t=this.getCodeword(e);if(t!=null)return t;for(var r=1;r<n.MAX_NEARBY_DISTANCE;r++){var i=this.imageRowToCodewordIndex(e)-r;if(i>=0&&(t=this.codewords[i],t!=null)||(i=this.imageRowToCodewordIndex(e)+r,i<this.codewords.length&&(t=this.codewords[i],t!=null)))return t}return null},n.prototype.imageRowToCodewordIndex=function(e){return e-this.boundingBox.getMinY()},n.prototype.setCodeword=function(e,t){this.codewords[this.imageRowToCodewordIndex(e)]=t},n.prototype.getCodeword=function(e){return this.codewords[this.imageRowToCodewordIndex(e)]},n.prototype.getBoundingBox=function(){return this.boundingBox},n.prototype.getCodewords=function(){return this.codewords},n.prototype.toString=function(){var e,t,r=new Ky,i=0;try{for(var a=tL(this.codewords),o=a.next();!o.done;o=a.next()){var c=o.value;if(c==null){r.format("%3d:    |   %n",i++);continue}r.format("%3d: %3d|%3d%n",i++,c.getRowNumber(),c.getValue())}}catch(u){e={error:u}}finally{try{o&&!o.done&&(t=a.return)&&t.call(a)}finally{if(e)throw e.error}}return r.toString()},n.MAX_NEARBY_DISTANCE=5,n})(),nL=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},rL=function(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,a=[],o;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(c){o={error:c}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(o)throw o.error}}return a},cf=(function(){function n(){this.values=new Map}return n.prototype.setValue=function(e){e=Math.trunc(e);var t=this.values.get(e);t==null&&(t=0),t++,this.values.set(e,t)},n.prototype.getValue=function(){var e,t,r=-1,i=new Array,a=function(g,_){var w={getKey:function(){return g},getValue:function(){return _}};w.getValue()>r?(r=w.getValue(),i=[],i.push(w.getKey())):w.getValue()===r&&i.push(w.getKey())};try{for(var o=nL(this.values.entries()),c=o.next();!c.done;c=o.next()){var u=rL(c.value,2),d=u[0],m=u[1];a(d,m)}}catch(g){e={error:g}}finally{try{c&&!c.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}return vt.toIntArray(i)},n.prototype.getConfidence=function(e){return this.values.get(e)},n})(),iL=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Wm=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},KA=(function(n){iL(e,n);function e(t,r){var i=n.call(this,t)||this;return i._isLeft=r,i}return e.prototype.setRowNumbers=function(){var t,r;try{for(var i=Wm(this.getCodewords()),a=i.next();!a.done;a=i.next()){var o=a.value;o?.setRowNumberAsRowIndicatorColumn()}}catch(c){t={error:c}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}},e.prototype.adjustCompleteIndicatorColumnRowNumbers=function(t){var r=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(r,t);for(var i=this.getBoundingBox(),a=this._isLeft?i.getTopLeft():i.getTopRight(),o=this._isLeft?i.getBottomLeft():i.getBottomRight(),c=this.imageRowToCodewordIndex(Math.trunc(a.getY())),u=this.imageRowToCodewordIndex(Math.trunc(o.getY())),d=-1,m=1,g=0,_=c;_<u;_++)if(r[_]!=null){var w=r[_],A=w.getRowNumber()-d;if(A===0)g++;else if(A===1)m=Math.max(m,g),g=1,d=w.getRowNumber();else if(A<0||w.getRowNumber()>=t.getRowCount()||A>_)r[_]=null;else{var S=void 0;m>2?S=(m-2)*A:S=A;for(var D=S>=_,C=1;C<=S&&!D;C++)D=r[_-C]!=null;D?r[_]=null:(d=w.getRowNumber(),g=1)}}},e.prototype.getRowHeights=function(){var t,r,i=this.getBarcodeMetadata();if(i==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(i);var a=new Int32Array(i.getRowCount());try{for(var o=Wm(this.getCodewords()),c=o.next();!c.done;c=o.next()){var u=c.value;if(u!=null){var d=u.getRowNumber();if(d>=a.length)continue;a[d]++}}}catch(m){t={error:m}}finally{try{c&&!c.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}return a},e.prototype.adjustIncompleteIndicatorColumnRowNumbers=function(t){for(var r=this.getBoundingBox(),i=this._isLeft?r.getTopLeft():r.getTopRight(),a=this._isLeft?r.getBottomLeft():r.getBottomRight(),o=this.imageRowToCodewordIndex(Math.trunc(i.getY())),c=this.imageRowToCodewordIndex(Math.trunc(a.getY())),u=this.getCodewords(),d=-1,m=o;m<c;m++)if(u[m]!=null){var g=u[m];g.setRowNumberAsRowIndicatorColumn();var _=g.getRowNumber()-d;_===0||(_===1?d=g.getRowNumber():g.getRowNumber()>=t.getRowCount()?u[m]=null:d=g.getRowNumber())}},e.prototype.getBarcodeMetadata=function(){var t,r,i=this.getCodewords(),a=new cf,o=new cf,c=new cf,u=new cf;try{for(var d=Wm(i),m=d.next();!m.done;m=d.next()){var g=m.value;if(g!=null){g.setRowNumberAsRowIndicatorColumn();var _=g.getValue()%30,w=g.getRowNumber();switch(this._isLeft||(w+=2),w%3){case 0:o.setValue(_*3+1);break;case 1:u.setValue(_/3),c.setValue(_%3);break;case 2:a.setValue(_+1);break}}}}catch(S){t={error:S}}finally{try{m&&!m.done&&(r=d.return)&&r.call(d)}finally{if(t)throw t.error}}if(a.getValue().length===0||o.getValue().length===0||c.getValue().length===0||u.getValue().length===0||a.getValue()[0]<1||o.getValue()[0]+c.getValue()[0]<vt.MIN_ROWS_IN_BARCODE||o.getValue()[0]+c.getValue()[0]>vt.MAX_ROWS_IN_BARCODE)return null;var A=new eL(a.getValue()[0],o.getValue()[0],c.getValue()[0],u.getValue()[0]);return this.removeIncorrectCodewords(i,A),A},e.prototype.removeIncorrectCodewords=function(t,r){for(var i=0;i<t.length;i++){var a=t[i];if(t[i]!=null){var o=a.getValue()%30,c=a.getRowNumber();if(c>r.getRowCount()){t[i]=null;continue}switch(this._isLeft||(c+=2),c%3){case 0:o*3+1!==r.getRowCountUpperPart()&&(t[i]=null);break;case 1:(Math.trunc(o/3)!==r.getErrorCorrectionLevel()||o%3!==r.getRowCountLowerPart())&&(t[i]=null);break;case 2:o+1!==r.getColumnCount()&&(t[i]=null);break}}}},e.prototype.isLeft=function(){return this._isLeft},e.prototype.toString=function(){return"IsLeft: "+this._isLeft+`
`+n.prototype.toString.call(this)},e})(V3),aL=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},sL=(function(){function n(e,t){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=e,this.barcodeColumnCount=e.getColumnCount(),this.boundingBox=t,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}return n.prototype.getDetectionResultColumns=function(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);var e=vt.MAX_CODEWORDS_IN_BARCODE,t;do t=e,e=this.adjustRowNumbersAndGetCount();while(e>0&&e<t);return this.detectionResultColumns},n.prototype.adjustIndicatorColumnRowNumbers=function(e){e?.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)},n.prototype.adjustRowNumbersAndGetCount=function(){var e=this.adjustRowNumbersByRow();if(e===0)return 0;for(var t=1;t<this.barcodeColumnCount+1;t++)for(var r=this.detectionResultColumns[t].getCodewords(),i=0;i<r.length;i++)r[i]!=null&&(r[i].hasValidRowNumber()||this.adjustRowNumbers(t,i,r));return e},n.prototype.adjustRowNumbersByRow=function(){this.adjustRowNumbersFromBothRI();var e=this.adjustRowNumbersFromLRI();return e+this.adjustRowNumbersFromRRI()},n.prototype.adjustRowNumbersFromBothRI=function(){if(!(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)){for(var e=this.detectionResultColumns[0].getCodewords(),t=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),r=0;r<e.length;r++)if(e[r]!=null&&t[r]!=null&&e[r].getRowNumber()===t[r].getRowNumber())for(var i=1;i<=this.barcodeColumnCount;i++){var a=this.detectionResultColumns[i].getCodewords()[r];a!=null&&(a.setRowNumber(e[r].getRowNumber()),a.hasValidRowNumber()||(this.detectionResultColumns[i].getCodewords()[r]=null))}}},n.prototype.adjustRowNumbersFromRRI=function(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;for(var e=0,t=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),r=0;r<t.length;r++)if(t[r]!=null)for(var i=t[r].getRowNumber(),a=0,o=this.barcodeColumnCount+1;o>0&&a<this.ADJUST_ROW_NUMBER_SKIP;o--){var c=this.detectionResultColumns[o].getCodewords()[r];c!=null&&(a=n.adjustRowNumberIfValid(i,a,c),c.hasValidRowNumber()||e++)}return e},n.prototype.adjustRowNumbersFromLRI=function(){if(this.detectionResultColumns[0]==null)return 0;for(var e=0,t=this.detectionResultColumns[0].getCodewords(),r=0;r<t.length;r++)if(t[r]!=null)for(var i=t[r].getRowNumber(),a=0,o=1;o<this.barcodeColumnCount+1&&a<this.ADJUST_ROW_NUMBER_SKIP;o++){var c=this.detectionResultColumns[o].getCodewords()[r];c!=null&&(a=n.adjustRowNumberIfValid(i,a,c),c.hasValidRowNumber()||e++)}return e},n.adjustRowNumberIfValid=function(e,t,r){return r==null||r.hasValidRowNumber()||(r.isValidRowNumber(e)?(r.setRowNumber(e),t=0):++t),t},n.prototype.adjustRowNumbers=function(e,t,r){var i,a;if(this.detectionResultColumns[e-1]!=null){var o=r[t],c=this.detectionResultColumns[e-1].getCodewords(),u=c;this.detectionResultColumns[e+1]!=null&&(u=this.detectionResultColumns[e+1].getCodewords());var d=new Array(14);d[2]=c[t],d[3]=u[t],t>0&&(d[0]=r[t-1],d[4]=c[t-1],d[5]=u[t-1]),t>1&&(d[8]=r[t-2],d[10]=c[t-2],d[11]=u[t-2]),t<r.length-1&&(d[1]=r[t+1],d[6]=c[t+1],d[7]=u[t+1]),t<r.length-2&&(d[9]=r[t+2],d[12]=c[t+2],d[13]=u[t+2]);try{for(var m=aL(d),g=m.next();!g.done;g=m.next()){var _=g.value;if(n.adjustRowNumber(o,_))return}}catch(w){i={error:w}}finally{try{g&&!g.done&&(a=m.return)&&a.call(m)}finally{if(i)throw i.error}}}},n.adjustRowNumber=function(e,t){return t==null?!1:t.hasValidRowNumber()&&t.getBucket()===e.getBucket()?(e.setRowNumber(t.getRowNumber()),!0):!1},n.prototype.getBarcodeColumnCount=function(){return this.barcodeColumnCount},n.prototype.getBarcodeRowCount=function(){return this.barcodeMetadata.getRowCount()},n.prototype.getBarcodeECLevel=function(){return this.barcodeMetadata.getErrorCorrectionLevel()},n.prototype.setBoundingBox=function(e){this.boundingBox=e},n.prototype.getBoundingBox=function(){return this.boundingBox},n.prototype.setDetectionResultColumn=function(e,t){this.detectionResultColumns[e]=t},n.prototype.getDetectionResultColumn=function(e){return this.detectionResultColumns[e]},n.prototype.toString=function(){var e=this.detectionResultColumns[0];e==null&&(e=this.detectionResultColumns[this.barcodeColumnCount+1]);for(var t=new Ky,r=0;r<e.getCodewords().length;r++){t.format("CW %3d:",r);for(var i=0;i<this.barcodeColumnCount+2;i++){if(this.detectionResultColumns[i]==null){t.format("    |   ");continue}var a=this.detectionResultColumns[i].getCodewords()[r];if(a==null){t.format("    |   ");continue}t.format(" %3d|%3d",a.getRowNumber(),a.getValue())}t.format("%n")}return t.toString()},n})(),oL=(function(){function n(e,t,r,i){this.rowNumber=n.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(e),this.endX=Math.trunc(t),this.bucket=Math.trunc(r),this.value=Math.trunc(i)}return n.prototype.hasValidRowNumber=function(){return this.isValidRowNumber(this.rowNumber)},n.prototype.isValidRowNumber=function(e){return e!==n.BARCODE_ROW_UNKNOWN&&this.bucket===e%3*3},n.prototype.setRowNumberAsRowIndicatorColumn=function(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))},n.prototype.getWidth=function(){return this.endX-this.startX},n.prototype.getStartX=function(){return this.startX},n.prototype.getEndX=function(){return this.endX},n.prototype.getBucket=function(){return this.bucket},n.prototype.getValue=function(){return this.value},n.prototype.getRowNumber=function(){return this.rowNumber},n.prototype.setRowNumber=function(e){this.rowNumber=e},n.prototype.toString=function(){return this.rowNumber+"|"+this.value},n.BARCODE_ROW_UNKNOWN=-1,n})(),lL=(function(){function n(){}return n.initialize=function(){for(var e=0;e<vt.SYMBOL_TABLE.length;e++)for(var t=vt.SYMBOL_TABLE[e],r=t&1,i=0;i<vt.BARS_IN_MODULE;i++){for(var a=0;(t&1)===r;)a+=1,t>>=1;r=t&1,n.RATIOS_TABLE[e]||(n.RATIOS_TABLE[e]=new Array(vt.BARS_IN_MODULE)),n.RATIOS_TABLE[e][vt.BARS_IN_MODULE-i-1]=Math.fround(a/vt.MODULES_IN_CODEWORD)}this.bSymbolTableReady=!0},n.getDecodedValue=function(e){var t=n.getDecodedCodewordValue(n.sampleBitCounts(e));return t!==-1?t:n.getClosestDecodedValue(e)},n.sampleBitCounts=function(e){for(var t=wt.sum(e),r=new Int32Array(vt.BARS_IN_MODULE),i=0,a=0,o=0;o<vt.MODULES_IN_CODEWORD;o++){var c=t/(2*vt.MODULES_IN_CODEWORD)+o*t/vt.MODULES_IN_CODEWORD;a+e[i]<=c&&(a+=e[i],i++),r[i]++}return r},n.getDecodedCodewordValue=function(e){var t=n.getBitValue(e);return vt.getCodeword(t)===-1?-1:t},n.getBitValue=function(e){for(var t=0,r=0;r<e.length;r++)for(var i=0;i<e[r];i++)t=t<<1|(r%2===0?1:0);return Math.trunc(t)},n.getClosestDecodedValue=function(e){var t=wt.sum(e),r=new Array(vt.BARS_IN_MODULE);if(t>1)for(var i=0;i<r.length;i++)r[i]=Math.fround(e[i]/t);var a=pv.MAX_VALUE,o=-1;this.bSymbolTableReady||n.initialize();for(var c=0;c<n.RATIOS_TABLE.length;c++){for(var u=0,d=n.RATIOS_TABLE[c],m=0;m<vt.BARS_IN_MODULE;m++){var g=Math.fround(d[m]-r[m]);if(u+=Math.fround(g*g),u>=a)break}u<a&&(a=u,o=vt.SYMBOL_TABLE[c])}return o},n.bSymbolTableReady=!1,n.RATIOS_TABLE=new Array(vt.SYMBOL_TABLE.length).map(function(e){return new Array(vt.BARS_IN_MODULE)}),n})(),cL=(function(){function n(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}return n.prototype.getSegmentIndex=function(){return this.segmentIndex},n.prototype.setSegmentIndex=function(e){this.segmentIndex=e},n.prototype.getFileId=function(){return this.fileId},n.prototype.setFileId=function(e){this.fileId=e},n.prototype.getOptionalData=function(){return this.optionalData},n.prototype.setOptionalData=function(e){this.optionalData=e},n.prototype.isLastSegment=function(){return this.lastSegment},n.prototype.setLastSegment=function(e){this.lastSegment=e},n.prototype.getSegmentCount=function(){return this.segmentCount},n.prototype.setSegmentCount=function(e){this.segmentCount=e},n.prototype.getSender=function(){return this.sender||null},n.prototype.setSender=function(e){this.sender=e},n.prototype.getAddressee=function(){return this.addressee||null},n.prototype.setAddressee=function(e){this.addressee=e},n.prototype.getFileName=function(){return this.fileName},n.prototype.setFileName=function(e){this.fileName=e},n.prototype.getFileSize=function(){return this.fileSize},n.prototype.setFileSize=function(e){this.fileSize=e},n.prototype.getChecksum=function(){return this.checksum},n.prototype.setChecksum=function(e){this.checksum=e},n.prototype.getTimestamp=function(){return this.timestamp},n.prototype.setTimestamp=function(e){this.timestamp=e},n})(),WA=(function(){function n(){}return n.parseLong=function(e,t){return t===void 0&&(t=void 0),parseInt(e,t)},n})(),uL=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),fL=(function(n){uL(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="NullPointerException",e})(Br),dL=(function(){function n(){}return n.prototype.writeBytes=function(e){this.writeBytesOffset(e,0,e.length)},n.prototype.writeBytesOffset=function(e,t,r){if(e==null)throw new fL;if(t<0||t>e.length||r<0||t+r>e.length||t+r<0)throw new qy;if(r===0)return;for(var i=0;i<r;i++)this.write(e[t+i])},n.prototype.flush=function(){},n.prototype.close=function(){},n})(),hL=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),pL=(function(n){hL(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e})(Br),mL=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),gL=(function(n){mL(e,n);function e(t){t===void 0&&(t=32);var r=n.call(this)||this;if(r.count=0,t<0)throw new Be("Negative initial size: "+t);return r.buf=new Uint8Array(t),r}return e.prototype.ensureCapacity=function(t){t-this.buf.length>0&&this.grow(t)},e.prototype.grow=function(t){var r=this.buf.length,i=r<<1;if(i-t<0&&(i=t),i<0){if(t<0)throw new pL;i=it.MAX_VALUE}this.buf=Pn.copyOfUint8Array(this.buf,i)},e.prototype.write=function(t){this.ensureCapacity(this.count+1),this.buf[this.count]=t,this.count+=1},e.prototype.writeBytesOffset=function(t,r,i){if(r<0||r>t.length||i<0||r+i-t.length>0)throw new qy;this.ensureCapacity(this.count+i),Ht.arraycopy(t,r,this.buf,this.count,i),this.count+=i},e.prototype.writeTo=function(t){t.writeBytesOffset(this.buf,0,this.count)},e.prototype.reset=function(){this.count=0},e.prototype.toByteArray=function(){return Pn.copyOfUint8Array(this.buf,this.count)},e.prototype.size=function(){return this.count},e.prototype.toString=function(t){return t?typeof t=="string"?this.toString_string(t):this.toString_number(t):this.toString_void()},e.prototype.toString_void=function(){return new String(this.buf).toString()},e.prototype.toString_string=function(t){return new String(this.buf).toString()},e.prototype.toString_number=function(t){return new String(this.buf).toString()},e.prototype.close=function(){},e})(dL),Vt;(function(n){n[n.ALPHA=0]="ALPHA",n[n.LOWER=1]="LOWER",n[n.MIXED=2]="MIXED",n[n.PUNCT=3]="PUNCT",n[n.ALPHA_SHIFT=4]="ALPHA_SHIFT",n[n.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(Vt||(Vt={}));function F3(){if(typeof window<"u")return window.BigInt||null;if(typeof global<"u")return global.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}var jh;function Hs(n){if(typeof jh>"u"&&(jh=F3()),jh===null)throw new Error("BigInt is not supported!");return jh(n)}function vL(){var n=[];n[0]=Hs(1);var e=Hs(900);n[1]=e;for(var t=2;t<16;t++)n[t]=n[t-1]*e;return n}var yL=(function(){function n(){}return n.decode=function(e,t){var r=new nt(""),i=Mn.ISO8859_1;r.enableDecoding(i);for(var a=1,o=e[a++],c=new cL;a<e[0];){switch(o){case n.TEXT_COMPACTION_MODE_LATCH:a=n.textCompaction(e,a,r);break;case n.BYTE_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:a=n.byteCompaction(o,e,i,a,r);break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(e[a++]);break;case n.NUMERIC_COMPACTION_MODE_LATCH:a=n.numericCompaction(e,a,r);break;case n.ECI_CHARSET:Mn.getCharacterSetECIByValue(e[a++]);break;case n.ECI_GENERAL_PURPOSE:a+=2;break;case n.ECI_USER_DEFINED:a++;break;case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:a=n.decodeMacroBlock(e,a,c);break;case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:throw new _e;default:a--,a=n.textCompaction(e,a,r);break}if(a<e.length)o=e[a++];else throw _e.getFormatInstance()}if(r.length()===0)throw _e.getFormatInstance();var u=new wp(null,r.toString(),null,t);return u.setOther(c),u},n.decodeMacroBlock=function(e,t,r){if(t+n.NUMBER_OF_SEQUENCE_CODEWORDS>e[0])throw _e.getFormatInstance();for(var i=new Int32Array(n.NUMBER_OF_SEQUENCE_CODEWORDS),a=0;a<n.NUMBER_OF_SEQUENCE_CODEWORDS;a++,t++)i[a]=e[t];r.setSegmentIndex(it.parseInt(n.decodeBase900toBase10(i,n.NUMBER_OF_SEQUENCE_CODEWORDS)));var o=new nt;t=n.textCompaction(e,t,o),r.setFileId(o.toString());var c=-1;for(e[t]===n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(c=t+1);t<e[0];)switch(e[t]){case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(t++,e[t]){case n.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:var u=new nt;t=n.textCompaction(e,t+1,u),r.setFileName(u.toString());break;case n.MACRO_PDF417_OPTIONAL_FIELD_SENDER:var d=new nt;t=n.textCompaction(e,t+1,d),r.setSender(d.toString());break;case n.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:var m=new nt;t=n.textCompaction(e,t+1,m),r.setAddressee(m.toString());break;case n.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:var g=new nt;t=n.numericCompaction(e,t+1,g),r.setSegmentCount(it.parseInt(g.toString()));break;case n.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:var _=new nt;t=n.numericCompaction(e,t+1,_),r.setTimestamp(WA.parseLong(_.toString()));break;case n.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:var w=new nt;t=n.numericCompaction(e,t+1,w),r.setChecksum(it.parseInt(w.toString()));break;case n.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:var A=new nt;t=n.numericCompaction(e,t+1,A),r.setFileSize(WA.parseLong(A.toString()));break;default:throw _e.getFormatInstance()}break;case n.MACRO_PDF417_TERMINATOR:t++,r.setLastSegment(!0);break;default:throw _e.getFormatInstance()}if(c!==-1){var S=t-c;r.isLastSegment()&&S--,r.setOptionalData(Pn.copyOfRange(e,c,c+S))}return t},n.textCompaction=function(e,t,r){for(var i=new Int32Array((e[0]-t)*2),a=new Int32Array((e[0]-t)*2),o=0,c=!1;t<e[0]&&!c;){var u=e[t++];if(u<n.TEXT_COMPACTION_MODE_LATCH)i[o]=u/30,i[o+1]=u%30,o+=2;else switch(u){case n.TEXT_COMPACTION_MODE_LATCH:i[o++]=n.TEXT_COMPACTION_MODE_LATCH;break;case n.BYTE_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:case n.NUMERIC_COMPACTION_MODE_LATCH:case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:t--,c=!0;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i[o]=n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,u=e[t++],a[o]=u,o++;break}}return n.decodeTextCompaction(i,a,o,r),t},n.decodeTextCompaction=function(e,t,r,i){for(var a=Vt.ALPHA,o=Vt.ALPHA,c=0;c<r;){var u=e[c],d="";switch(a){case Vt.ALPHA:if(u<26)d=String.fromCharCode(65+u);else switch(u){case 26:d=" ";break;case n.LL:a=Vt.LOWER;break;case n.ML:a=Vt.MIXED;break;case n.PS:o=a,a=Vt.PUNCT_SHIFT;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[c]);break;case n.TEXT_COMPACTION_MODE_LATCH:a=Vt.ALPHA;break}break;case Vt.LOWER:if(u<26)d=String.fromCharCode(97+u);else switch(u){case 26:d=" ";break;case n.AS:o=a,a=Vt.ALPHA_SHIFT;break;case n.ML:a=Vt.MIXED;break;case n.PS:o=a,a=Vt.PUNCT_SHIFT;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[c]);break;case n.TEXT_COMPACTION_MODE_LATCH:a=Vt.ALPHA;break}break;case Vt.MIXED:if(u<n.PL)d=n.MIXED_CHARS[u];else switch(u){case n.PL:a=Vt.PUNCT;break;case 26:d=" ";break;case n.LL:a=Vt.LOWER;break;case n.AL:a=Vt.ALPHA;break;case n.PS:o=a,a=Vt.PUNCT_SHIFT;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[c]);break;case n.TEXT_COMPACTION_MODE_LATCH:a=Vt.ALPHA;break}break;case Vt.PUNCT:if(u<n.PAL)d=n.PUNCT_CHARS[u];else switch(u){case n.PAL:a=Vt.ALPHA;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[c]);break;case n.TEXT_COMPACTION_MODE_LATCH:a=Vt.ALPHA;break}break;case Vt.ALPHA_SHIFT:if(a=o,u<26)d=String.fromCharCode(65+u);else switch(u){case 26:d=" ";break;case n.TEXT_COMPACTION_MODE_LATCH:a=Vt.ALPHA;break}break;case Vt.PUNCT_SHIFT:if(a=o,u<n.PAL)d=n.PUNCT_CHARS[u];else switch(u){case n.PAL:a=Vt.ALPHA;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[c]);break;case n.TEXT_COMPACTION_MODE_LATCH:a=Vt.ALPHA;break}break}d!==""&&i.append(d),c++}},n.byteCompaction=function(e,t,r,i,a){var o=new gL,c=0,u=0,d=!1;switch(e){case n.BYTE_COMPACTION_MODE_LATCH:for(var m=new Int32Array(6),g=t[i++];i<t[0]&&!d;)switch(m[c++]=g,u=900*u+g,g=t[i++],g){case n.TEXT_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH:case n.NUMERIC_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:i--,d=!0;break;default:if(c%5===0&&c>0){for(var _=0;_<6;++_)o.write(Number(Hs(u)>>Hs(8*(5-_))));u=0,c=0}break}i===t[0]&&g<n.TEXT_COMPACTION_MODE_LATCH&&(m[c++]=g);for(var w=0;w<c;w++)o.write(m[w]);break;case n.BYTE_COMPACTION_MODE_LATCH_6:for(;i<t[0]&&!d;){var A=t[i++];if(A<n.TEXT_COMPACTION_MODE_LATCH)c++,u=900*u+A;else switch(A){case n.TEXT_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH:case n.NUMERIC_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:i--,d=!0;break}if(c%5===0&&c>0){for(var _=0;_<6;++_)o.write(Number(Hs(u)>>Hs(8*(5-_))));u=0,c=0}}break}return a.append(_i.decode(o.toByteArray(),r)),i},n.numericCompaction=function(e,t,r){for(var i=0,a=!1,o=new Int32Array(n.MAX_NUMERIC_CODEWORDS);t<e[0]&&!a;){var c=e[t++];if(t===e[0]&&(a=!0),c<n.TEXT_COMPACTION_MODE_LATCH)o[i]=c,i++;else switch(c){case n.TEXT_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:t--,a=!0;break}(i%n.MAX_NUMERIC_CODEWORDS===0||c===n.NUMERIC_COMPACTION_MODE_LATCH||a)&&i>0&&(r.append(n.decodeBase900toBase10(o,i)),i=0)}return t},n.decodeBase900toBase10=function(e,t){for(var r=Hs(0),i=0;i<t;i++)r+=n.EXP900[t-i-1]*Hs(e[i]);var a=r.toString();if(a.charAt(0)!=="1")throw new _e;return a.substring(1)},n.TEXT_COMPACTION_MODE_LATCH=900,n.BYTE_COMPACTION_MODE_LATCH=901,n.NUMERIC_COMPACTION_MODE_LATCH=902,n.BYTE_COMPACTION_MODE_LATCH_6=924,n.ECI_USER_DEFINED=925,n.ECI_GENERAL_PURPOSE=926,n.ECI_CHARSET=927,n.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,n.MACRO_PDF417_TERMINATOR=922,n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,n.MAX_NUMERIC_CODEWORDS=15,n.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,n.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,n.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,n.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,n.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,n.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,n.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,n.PL=25,n.LL=27,n.AS=27,n.ML=28,n.AL=28,n.PS=29,n.PAL=29,n.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,n.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",n.EXP900=F3()?vL():[],n.NUMBER_OF_SEQUENCE_CODEWORDS=2,n})(),Qu=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},_L=(function(){function n(){}return n.decode=function(e,t,r,i,a,o,c){for(var u=new vv(e,t,r,i,a),d=null,m=null,g,_=!0;;_=!1){if(t!=null&&(d=n.getRowIndicatorColumn(e,u,t,!0,o,c)),i!=null&&(m=n.getRowIndicatorColumn(e,u,i,!1,o,c)),g=n.merge(d,m),g==null)throw oe.getNotFoundInstance();var w=g.getBoundingBox();if(_&&w!=null&&(w.getMinY()<u.getMinY()||w.getMaxY()>u.getMaxY()))u=w;else break}g.setBoundingBox(u);var A=g.getBarcodeColumnCount()+1;g.setDetectionResultColumn(0,d),g.setDetectionResultColumn(A,m);for(var S=d!=null,D=1;D<=A;D++){var C=S?D:A-D;if(g.getDetectionResultColumn(C)===void 0){var k=void 0;C===0||C===A?k=new KA(u,C===0):k=new V3(u),g.setDetectionResultColumn(C,k);for(var V=-1,z=V,q=u.getMinY();q<=u.getMaxY();q++){if(V=n.getStartColumn(g,C,q,S),V<0||V>u.getMaxX()){if(z===-1)continue;V=z}var $=n.detectCodeword(e,u.getMinX(),u.getMaxX(),S,V,q,o,c);$!=null&&(k.setCodeword(q,$),z=V,o=Math.min(o,$.getWidth()),c=Math.max(c,$.getWidth()))}}}return n.createDecoderResult(g)},n.merge=function(e,t){if(e==null&&t==null)return null;var r=n.getBarcodeMetadata(e,t);if(r==null)return null;var i=vv.merge(n.adjustBoundingBox(e),n.adjustBoundingBox(t));return new sL(r,i)},n.adjustBoundingBox=function(e){var t,r;if(e==null)return null;var i=e.getRowHeights();if(i==null)return null;var a=n.getMax(i),o=0;try{for(var c=Qu(i),u=c.next();!u.done;u=c.next()){var d=u.value;if(o+=a-d,d>0)break}}catch(w){t={error:w}}finally{try{u&&!u.done&&(r=c.return)&&r.call(c)}finally{if(t)throw t.error}}for(var m=e.getCodewords(),g=0;o>0&&m[g]==null;g++)o--;for(var _=0,g=i.length-1;g>=0&&(_+=a-i[g],!(i[g]>0));g--);for(var g=m.length-1;_>0&&m[g]==null;g--)_--;return e.getBoundingBox().addMissingRows(o,_,e.isLeft())},n.getMax=function(e){var t,r,i=-1;try{for(var a=Qu(e),o=a.next();!o.done;o=a.next()){var c=o.value;i=Math.max(i,c)}}catch(u){t={error:u}}finally{try{o&&!o.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}return i},n.getBarcodeMetadata=function(e,t){var r;if(e==null||(r=e.getBarcodeMetadata())==null)return t==null?null:t.getBarcodeMetadata();var i;return t==null||(i=t.getBarcodeMetadata())==null?r:r.getColumnCount()!==i.getColumnCount()&&r.getErrorCorrectionLevel()!==i.getErrorCorrectionLevel()&&r.getRowCount()!==i.getRowCount()?null:r},n.getRowIndicatorColumn=function(e,t,r,i,a,o){for(var c=new KA(t,i),u=0;u<2;u++)for(var d=u===0?1:-1,m=Math.trunc(Math.trunc(r.getX())),g=Math.trunc(Math.trunc(r.getY()));g<=t.getMaxY()&&g>=t.getMinY();g+=d){var _=n.detectCodeword(e,0,e.getWidth(),i,m,g,a,o);_!=null&&(c.setCodeword(g,_),i?m=_.getStartX():m=_.getEndX())}return c},n.adjustCodewordCount=function(e,t){var r=t[0][1],i=r.getValue(),a=e.getBarcodeColumnCount()*e.getBarcodeRowCount()-n.getNumberOfECCodeWords(e.getBarcodeECLevel());if(i.length===0){if(a<1||a>vt.MAX_CODEWORDS_IN_BARCODE)throw oe.getNotFoundInstance();r.setValue(a)}else i[0]!==a&&r.setValue(a)},n.createDecoderResult=function(e){var t=n.createBarcodeMatrix(e);n.adjustCodewordCount(e,t);for(var r=new Array,i=new Int32Array(e.getBarcodeRowCount()*e.getBarcodeColumnCount()),a=[],o=new Array,c=0;c<e.getBarcodeRowCount();c++)for(var u=0;u<e.getBarcodeColumnCount();u++){var d=t[c][u+1].getValue(),m=c*e.getBarcodeColumnCount()+u;d.length===0?r.push(m):d.length===1?i[m]=d[0]:(o.push(m),a.push(d))}for(var g=new Array(a.length),_=0;_<g.length;_++)g[_]=a[_];return n.createDecoderResultFromAmbiguousValues(e.getBarcodeECLevel(),i,vt.toIntArray(r),vt.toIntArray(o),g)},n.createDecoderResultFromAmbiguousValues=function(e,t,r,i,a){for(var o=new Int32Array(i.length),c=100;c-- >0;){for(var u=0;u<o.length;u++)t[i[u]]=a[u][o[u]];try{return n.decodeCodewords(t,e,r)}catch(m){var d=m instanceof Cn;if(!d)throw m}if(o.length===0)throw Cn.getChecksumInstance();for(var u=0;u<o.length;u++)if(o[u]<a[u].length-1){o[u]++;break}else if(o[u]=0,u===o.length-1)throw Cn.getChecksumInstance()}throw Cn.getChecksumInstance()},n.createBarcodeMatrix=function(e){for(var t,r,i,a,o=Array.from({length:e.getBarcodeRowCount()},function(){return new Array(e.getBarcodeColumnCount()+2)}),c=0;c<o.length;c++)for(var u=0;u<o[c].length;u++)o[c][u]=new cf;var d=0;try{for(var m=Qu(e.getDetectionResultColumns()),g=m.next();!g.done;g=m.next()){var _=g.value;if(_!=null)try{for(var w=(i=void 0,Qu(_.getCodewords())),A=w.next();!A.done;A=w.next()){var S=A.value;if(S!=null){var D=S.getRowNumber();if(D>=0){if(D>=o.length)continue;o[D][d].setValue(S.getValue())}}}}catch(C){i={error:C}}finally{try{A&&!A.done&&(a=w.return)&&a.call(w)}finally{if(i)throw i.error}}d++}}catch(C){t={error:C}}finally{try{g&&!g.done&&(r=m.return)&&r.call(m)}finally{if(t)throw t.error}}return o},n.isValidBarcodeColumn=function(e,t){return t>=0&&t<=e.getBarcodeColumnCount()+1},n.getStartColumn=function(e,t,r,i){var a,o,c=i?1:-1,u=null;if(n.isValidBarcodeColumn(e,t-c)&&(u=e.getDetectionResultColumn(t-c).getCodeword(r)),u!=null)return i?u.getEndX():u.getStartX();if(u=e.getDetectionResultColumn(t).getCodewordNearby(r),u!=null)return i?u.getStartX():u.getEndX();if(n.isValidBarcodeColumn(e,t-c)&&(u=e.getDetectionResultColumn(t-c).getCodewordNearby(r)),u!=null)return i?u.getEndX():u.getStartX();for(var d=0;n.isValidBarcodeColumn(e,t-c);){t-=c;try{for(var m=(a=void 0,Qu(e.getDetectionResultColumn(t).getCodewords())),g=m.next();!g.done;g=m.next()){var _=g.value;if(_!=null)return(i?_.getEndX():_.getStartX())+c*d*(_.getEndX()-_.getStartX())}}catch(w){a={error:w}}finally{try{g&&!g.done&&(o=m.return)&&o.call(m)}finally{if(a)throw a.error}}d++}return i?e.getBoundingBox().getMinX():e.getBoundingBox().getMaxX()},n.detectCodeword=function(e,t,r,i,a,o,c,u){a=n.adjustCodewordStartColumn(e,t,r,i,a,o);var d=n.getModuleBitCount(e,t,r,i,a,o);if(d==null)return null;var m,g=wt.sum(d);if(i)m=a+g;else{for(var _=0;_<d.length/2;_++){var w=d[_];d[_]=d[d.length-1-_],d[d.length-1-_]=w}m=a,a=m-g}if(!n.checkCodewordSkew(g,c,u))return null;var A=lL.getDecodedValue(d),S=vt.getCodeword(A);return S===-1?null:new oL(a,m,n.getCodewordBucketNumber(A),S)},n.getModuleBitCount=function(e,t,r,i,a,o){for(var c=a,u=new Int32Array(8),d=0,m=i?1:-1,g=i;(i?c<r:c>=t)&&d<u.length;)e.get(c,o)===g?(u[d]++,c+=m):(d++,g=!g);return d===u.length||c===(i?r:t)&&d===u.length-1?u:null},n.getNumberOfECCodeWords=function(e){return 2<<e},n.adjustCodewordStartColumn=function(e,t,r,i,a,o){for(var c=a,u=i?-1:1,d=0;d<2;d++){for(;(i?c>=t:c<r)&&i===e.get(c,o);){if(Math.abs(a-c)>n.CODEWORD_SKEW_SIZE)return a;c+=u}u=-u,i=!i}return c},n.checkCodewordSkew=function(e,t,r){return t-n.CODEWORD_SKEW_SIZE<=e&&e<=r+n.CODEWORD_SKEW_SIZE},n.decodeCodewords=function(e,t,r){if(e.length===0)throw _e.getFormatInstance();var i=1<<t+1,a=n.correctErrors(e,r,i);n.verifyCodewordCount(e,i);var o=yL.decode(e,""+t);return o.setErrorsCorrected(a),o.setErasures(r.length),o},n.correctErrors=function(e,t,r){if(t!=null&&t.length>r/2+n.MAX_ERRORS||r<0||r>n.MAX_EC_CODEWORDS)throw Cn.getChecksumInstance();return n.errorCorrection.decode(e,r,t)},n.verifyCodewordCount=function(e,t){if(e.length<4)throw _e.getFormatInstance();var r=e[0];if(r>e.length)throw _e.getFormatInstance();if(r===0)if(t<e.length)e[0]=e.length-t;else throw _e.getFormatInstance()},n.getBitCountForCodeword=function(e){for(var t=new Int32Array(8),r=0,i=t.length-1;!((e&1)!==r&&(r=e&1,i--,i<0));)t[i]++,e>>=1;return t},n.getCodewordBucketNumber=function(e){return e instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(e):this.getCodewordBucketNumber_number(e)},n.getCodewordBucketNumber_number=function(e){return n.getCodewordBucketNumber(n.getBitCountForCodeword(e))},n.getCodewordBucketNumber_Int32Array=function(e){return(e[0]-e[2]+e[4]-e[6]+9)%9},n.toString=function(e){for(var t=new Ky,r=0;r<e.length;r++){t.format("Row %2d: ",r);for(var i=0;i<e[r].length;i++){var a=e[r][i];a.getValue().length===0?t.format("        ",null):t.format("%4d(%2d)",a.getValue()[0],a.getConfidence(a.getValue()[0]))}t.format("%n")}return t.toString()},n.CODEWORD_SKEW_SIZE=2,n.MAX_ERRORS=3,n.MAX_EC_CODEWORDS=512,n.errorCorrection=new Jj,n})(),xL=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},k0=(function(){function n(){}return n.prototype.decode=function(e,t){t===void 0&&(t=null);var r=n.decode(e,t,!1);if(r==null||r.length===0||r[0]==null)throw oe.getNotFoundInstance();return r[0]},n.prototype.decodeMultiple=function(e,t){t===void 0&&(t=null);try{return n.decode(e,t,!0)}catch(r){throw r instanceof _e||r instanceof Cn?oe.getNotFoundInstance():r}},n.decode=function(e,t,r){var i,a,o=new Array,c=Xj.detectMultiple(e,t,r);try{for(var u=xL(c.getPoints()),d=u.next();!d.done;d=u.next()){var m=d.value,g=_L.decode(c.getBits(),m[4],m[5],m[6],m[7],n.getMinCodewordWidth(m),n.getMaxCodewordWidth(m)),_=new yr(g.getText(),g.getRawBytes(),void 0,m,Le.PDF_417);_.putMetadata(or.ERROR_CORRECTION_LEVEL,g.getECLevel());var w=g.getOther();w!=null&&_.putMetadata(or.PDF417_EXTRA_METADATA,w),o.push(_)}}catch(A){i={error:A}}finally{try{d&&!d.done&&(a=u.return)&&a.call(u)}finally{if(i)throw i.error}}return o.map(function(A){return A})},n.getMaxWidth=function(e,t){return e==null||t==null?0:Math.trunc(Math.abs(e.getX()-t.getX()))},n.getMinWidth=function(e,t){return e==null||t==null?it.MAX_VALUE:Math.trunc(Math.abs(e.getX()-t.getX()))},n.getMaxCodewordWidth=function(e){return Math.floor(Math.max(Math.max(n.getMaxWidth(e[0],e[4]),n.getMaxWidth(e[6],e[2])*vt.MODULES_IN_CODEWORD/vt.MODULES_IN_STOP_PATTERN),Math.max(n.getMaxWidth(e[1],e[5]),n.getMaxWidth(e[7],e[3])*vt.MODULES_IN_CODEWORD/vt.MODULES_IN_STOP_PATTERN)))},n.getMinCodewordWidth=function(e){return Math.floor(Math.min(Math.min(n.getMinWidth(e[0],e[4]),n.getMinWidth(e[6],e[2])*vt.MODULES_IN_CODEWORD/vt.MODULES_IN_STOP_PATTERN),Math.min(n.getMinWidth(e[1],e[5]),n.getMinWidth(e[7],e[3])*vt.MODULES_IN_CODEWORD/vt.MODULES_IN_STOP_PATTERN)))},n.prototype.reset=function(){},n})(),wL=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),QA=(function(n){wL(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="ReaderException",e})(Br),ZA=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},U3=(function(){function n(){}return n.prototype.decode=function(e,t){return this.setHints(t),this.decodeInternal(e)},n.prototype.decodeWithState=function(e){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(e)},n.prototype.setHints=function(e){this.hints=e;var t=e!=null&&e.get(Gt.TRY_HARDER)!==void 0,r=e==null?null:e.get(Gt.POSSIBLE_FORMATS),i=new Array;if(r!=null){var a=r.some(function(o){return o===Le.UPC_A||o===Le.UPC_E||o===Le.EAN_13||o===Le.EAN_8||o===Le.CODABAR||o===Le.CODE_39||o===Le.CODE_93||o===Le.CODE_128||o===Le.ITF||o===Le.RSS_14||o===Le.RSS_EXPANDED});a&&!t&&i.push(new dc(e)),r.includes(Le.QR_CODE)&&i.push(new P0),r.includes(Le.DATA_MATRIX)&&i.push(new M0),r.includes(Le.AZTEC)&&i.push(new O0),r.includes(Le.PDF_417)&&i.push(new k0),a&&t&&i.push(new dc(e))}i.length===0&&(t||i.push(new dc(e)),i.push(new P0),i.push(new M0),i.push(new O0),i.push(new k0),t&&i.push(new dc(e))),this.readers=i},n.prototype.reset=function(){var e,t;if(this.readers!==null)try{for(var r=ZA(this.readers),i=r.next();!i.done;i=r.next()){var a=i.value;a.reset()}}catch(o){e={error:o}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}},n.prototype.decodeInternal=function(e){var t,r;if(this.readers===null)throw new QA("No readers where selected, nothing can be read.");try{for(var i=ZA(this.readers),a=i.next();!a.done;a=i.next()){var o=a.value;try{return o.decode(e,this.hints)}catch(c){if(c instanceof QA)continue}}}catch(c){t={error:c}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}throw new oe("No MultiFormat Readers were able to detect the code.")},n})(),EL=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})();(function(n){EL(e,n);function e(t,r){t===void 0&&(t=null),r===void 0&&(r=500);var i=this,a=new U3;return a.setHints(t),i=n.call(this,a,r)||this,i}return e.prototype.decodeBitmap=function(t){return this.reader.decodeWithState(t)},e})(qc);var AL=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})();(function(n){AL(e,n);function e(t){return t===void 0&&(t=500),n.call(this,new k0,t)||this}return e})(qc);var bL=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})();(function(n){bL(e,n);function e(t){return t===void 0&&(t=500),n.call(this,new P0,t)||this}return e})(qc);var yv;(function(n){n[n.ERROR_CORRECTION=0]="ERROR_CORRECTION",n[n.CHARACTER_SET=1]="CHARACTER_SET",n[n.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",n[n.DATA_MATRIX_COMPACT=3]="DATA_MATRIX_COMPACT",n[n.MIN_SIZE=4]="MIN_SIZE",n[n.MAX_SIZE=5]="MAX_SIZE",n[n.MARGIN=6]="MARGIN",n[n.PDF417_COMPACT=7]="PDF417_COMPACT",n[n.PDF417_COMPACTION=8]="PDF417_COMPACTION",n[n.PDF417_DIMENSIONS=9]="PDF417_DIMENSIONS",n[n.AZTEC_LAYERS=10]="AZTEC_LAYERS",n[n.QR_VERSION=11]="QR_VERSION",n[n.GS1_FORMAT=12]="GS1_FORMAT",n[n.FORCE_C40=13]="FORCE_C40"})(yv||(yv={}));const Lh=yv;var z3=(function(){function n(e){this.field=e,this.cachedGenerators=[],this.cachedGenerators.push(new no(e,Int32Array.from([1])))}return n.prototype.buildGenerator=function(e){var t=this.cachedGenerators;if(e>=t.length)for(var r=t[t.length-1],i=this.field,a=t.length;a<=e;a++){var o=r.multiply(new no(i,Int32Array.from([1,i.exp(a-1+i.getGeneratorBase())])));t.push(o),r=o}return t[e]},n.prototype.encode=function(e,t){if(t===0)throw new Be("No error correction bytes");var r=e.length-t;if(r<=0)throw new Be("No data bytes provided");var i=this.buildGenerator(t),a=new Int32Array(r);Ht.arraycopy(e,0,a,0,r);var o=new no(this.field,a);o=o.multiplyByMonomial(t,1);for(var c=o.divide(i)[1],u=c.getCoefficients(),d=t-u.length,m=0;m<d;m++)e[r+m]=0;Ht.arraycopy(u,0,e,r+d,u.length)},n})(),uf=(function(){function n(){}return n.applyMaskPenaltyRule1=function(e){return n.applyMaskPenaltyRule1Internal(e,!0)+n.applyMaskPenaltyRule1Internal(e,!1)},n.applyMaskPenaltyRule2=function(e){for(var t=0,r=e.getArray(),i=e.getWidth(),a=e.getHeight(),o=0;o<a-1;o++)for(var c=r[o],u=0;u<i-1;u++){var d=c[u];d===c[u+1]&&d===r[o+1][u]&&d===r[o+1][u+1]&&t++}return n.N2*t},n.applyMaskPenaltyRule3=function(e){for(var t=0,r=e.getArray(),i=e.getWidth(),a=e.getHeight(),o=0;o<a;o++)for(var c=0;c<i;c++){var u=r[o];c+6<i&&u[c]===1&&u[c+1]===0&&u[c+2]===1&&u[c+3]===1&&u[c+4]===1&&u[c+5]===0&&u[c+6]===1&&(n.isWhiteHorizontal(u,c-4,c)||n.isWhiteHorizontal(u,c+7,c+11))&&t++,o+6<a&&r[o][c]===1&&r[o+1][c]===0&&r[o+2][c]===1&&r[o+3][c]===1&&r[o+4][c]===1&&r[o+5][c]===0&&r[o+6][c]===1&&(n.isWhiteVertical(r,c,o-4,o)||n.isWhiteVertical(r,c,o+7,o+11))&&t++}return t*n.N3},n.isWhiteHorizontal=function(e,t,r){t=Math.max(t,0),r=Math.min(r,e.length);for(var i=t;i<r;i++)if(e[i]===1)return!1;return!0},n.isWhiteVertical=function(e,t,r,i){r=Math.max(r,0),i=Math.min(i,e.length);for(var a=r;a<i;a++)if(e[a][t]===1)return!1;return!0},n.applyMaskPenaltyRule4=function(e){for(var t=0,r=e.getArray(),i=e.getWidth(),a=e.getHeight(),o=0;o<a;o++)for(var c=r[o],u=0;u<i;u++)c[u]===1&&t++;var d=e.getHeight()*e.getWidth(),m=Math.floor(Math.abs(t*2-d)*10/d);return m*n.N4},n.getDataMaskBit=function(e,t,r){var i,a;switch(e){case 0:i=r+t&1;break;case 1:i=r&1;break;case 2:i=t%3;break;case 3:i=(r+t)%3;break;case 4:i=Math.floor(r/2)+Math.floor(t/3)&1;break;case 5:a=r*t,i=(a&1)+a%3;break;case 6:a=r*t,i=(a&1)+a%3&1;break;case 7:a=r*t,i=a%3+(r+t&1)&1;break;default:throw new Be("Invalid mask pattern: "+e)}return i===0},n.applyMaskPenaltyRule1Internal=function(e,t){for(var r=0,i=t?e.getHeight():e.getWidth(),a=t?e.getWidth():e.getHeight(),o=e.getArray(),c=0;c<i;c++){for(var u=0,d=-1,m=0;m<a;m++){var g=t?o[c][m]:o[m][c];g===d?u++:(u>=5&&(r+=n.N1+(u-5)),u=1,d=g)}u>=5&&(r+=n.N1+(u-5))}return r},n.N1=3,n.N2=3,n.N3=40,n.N4=10,n})(),SL=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},CL=(function(){function n(e,t){this.width=e,this.height=t;for(var r=new Array(t),i=0;i!==t;i++)r[i]=new Uint8Array(e);this.bytes=r}return n.prototype.getHeight=function(){return this.height},n.prototype.getWidth=function(){return this.width},n.prototype.get=function(e,t){return this.bytes[t][e]},n.prototype.getArray=function(){return this.bytes},n.prototype.setNumber=function(e,t,r){this.bytes[t][e]=r},n.prototype.setBoolean=function(e,t,r){this.bytes[t][e]=r?1:0},n.prototype.clear=function(e){var t,r;try{for(var i=SL(this.bytes),a=i.next();!a.done;a=i.next()){var o=a.value;Pn.fill(o,e)}}catch(c){t={error:c}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;if(this.width!==t.width||this.height!==t.height)return!1;for(var r=0,i=this.height;r<i;++r)for(var a=this.bytes[r],o=t.bytes[r],c=0,u=this.width;c<u;++c)if(a[c]!==o[c])return!1;return!0},n.prototype.toString=function(){for(var e=new nt,t=0,r=this.height;t<r;++t){for(var i=this.bytes[t],a=0,o=this.width;a<o;++a)switch(i[a]){case 0:e.append(" 0");break;case 1:e.append(" 1");break;default:e.append("  ");break}e.append(`
`)}return e.toString()},n})(),_v=(function(){function n(){this.maskPattern=-1}return n.prototype.getMode=function(){return this.mode},n.prototype.getECLevel=function(){return this.ecLevel},n.prototype.getVersion=function(){return this.version},n.prototype.getMaskPattern=function(){return this.maskPattern},n.prototype.getMatrix=function(){return this.matrix},n.prototype.toString=function(){var e=new nt;return e.append(`<<
`),e.append(" mode: "),e.append(this.mode?this.mode.toString():"null"),e.append(`
 ecLevel: `),e.append(this.ecLevel?this.ecLevel.toString():"null"),e.append(`
 version: `),e.append(this.version?this.version.toString():"null"),e.append(`
 maskPattern: `),e.append(this.maskPattern.toString()),this.matrix?(e.append(`
 matrix:
`),e.append(this.matrix.toString())):e.append(`
 matrix: null
`),e.append(`>>
`),e.toString()},n.prototype.setMode=function(e){this.mode=e},n.prototype.setECLevel=function(e){this.ecLevel=e},n.prototype.setVersion=function(e){this.version=e},n.prototype.setMaskPattern=function(e){this.maskPattern=e},n.prototype.setMatrix=function(e){this.matrix=e},n.isValidMaskPattern=function(e){return e>=0&&e<n.NUM_MASK_PATTERNS},n.NUM_MASK_PATTERNS=8,n})(),TL=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Xt=(function(n){TL(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="WriterException",e})(Br),JA=(function(){function n(){}return n.clearMatrix=function(e){e.clear(255)},n.buildMatrix=function(e,t,r,i,a){n.clearMatrix(a),n.embedBasicPatterns(r,a),n.embedTypeInfo(t,i,a),n.maybeEmbedVersionInfo(r,a),n.embedDataBits(e,i,a)},n.embedBasicPatterns=function(e,t){n.embedPositionDetectionPatternsAndSeparators(t),n.embedDarkDotAtLeftBottomCorner(t),n.maybeEmbedPositionAdjustmentPatterns(e,t),n.embedTimingPatterns(t)},n.embedTypeInfo=function(e,t,r){var i=new Yn;n.makeTypeInfoBits(e,t,i);for(var a=0,o=i.getSize();a<o;++a){var c=i.get(i.getSize()-1-a),u=n.TYPE_INFO_COORDINATES[a],d=u[0],m=u[1];if(r.setBoolean(d,m,c),a<8){var g=r.getWidth()-a-1,_=8;r.setBoolean(g,_,c)}else{var g=8,_=r.getHeight()-7+(a-8);r.setBoolean(g,_,c)}}},n.maybeEmbedVersionInfo=function(e,t){if(!(e.getVersionNumber()<7)){var r=new Yn;n.makeVersionInfoBits(e,r);for(var i=17,a=0;a<6;++a)for(var o=0;o<3;++o){var c=r.get(i);i--,t.setBoolean(a,t.getHeight()-11+o,c),t.setBoolean(t.getHeight()-11+o,a,c)}}},n.embedDataBits=function(e,t,r){for(var i=0,a=-1,o=r.getWidth()-1,c=r.getHeight()-1;o>0;){for(o===6&&(o-=1);c>=0&&c<r.getHeight();){for(var u=0;u<2;++u){var d=o-u;if(n.isEmpty(r.get(d,c))){var m=void 0;i<e.getSize()?(m=e.get(i),++i):m=!1,t!==255&&uf.getDataMaskBit(t,d,c)&&(m=!m),r.setBoolean(d,c,m)}}c+=a}a=-a,c+=a,o-=2}if(i!==e.getSize())throw new Xt("Not all bits consumed: "+i+"/"+e.getSize())},n.findMSBSet=function(e){return 32-it.numberOfLeadingZeros(e)},n.calculateBCHCode=function(e,t){if(t===0)throw new Be("0 polynomial");var r=n.findMSBSet(t);for(e<<=r-1;n.findMSBSet(e)>=r;)e^=t<<n.findMSBSet(e)-r;return e},n.makeTypeInfoBits=function(e,t,r){if(!_v.isValidMaskPattern(t))throw new Xt("Invalid mask pattern");var i=e.getBits()<<3|t;r.appendBits(i,5);var a=n.calculateBCHCode(i,n.TYPE_INFO_POLY);r.appendBits(a,10);var o=new Yn;if(o.appendBits(n.TYPE_INFO_MASK_PATTERN,15),r.xor(o),r.getSize()!==15)throw new Xt("should not happen but we got: "+r.getSize())},n.makeVersionInfoBits=function(e,t){t.appendBits(e.getVersionNumber(),6);var r=n.calculateBCHCode(e.getVersionNumber(),n.VERSION_INFO_POLY);if(t.appendBits(r,12),t.getSize()!==18)throw new Xt("should not happen but we got: "+t.getSize())},n.isEmpty=function(e){return e===255},n.embedTimingPatterns=function(e){for(var t=8;t<e.getWidth()-8;++t){var r=(t+1)%2;n.isEmpty(e.get(t,6))&&e.setNumber(t,6,r),n.isEmpty(e.get(6,t))&&e.setNumber(6,t,r)}},n.embedDarkDotAtLeftBottomCorner=function(e){if(e.get(8,e.getHeight()-8)===0)throw new Xt;e.setNumber(8,e.getHeight()-8,1)},n.embedHorizontalSeparationPattern=function(e,t,r){for(var i=0;i<8;++i){if(!n.isEmpty(r.get(e+i,t)))throw new Xt;r.setNumber(e+i,t,0)}},n.embedVerticalSeparationPattern=function(e,t,r){for(var i=0;i<7;++i){if(!n.isEmpty(r.get(e,t+i)))throw new Xt;r.setNumber(e,t+i,0)}},n.embedPositionAdjustmentPattern=function(e,t,r){for(var i=0;i<5;++i)for(var a=n.POSITION_ADJUSTMENT_PATTERN[i],o=0;o<5;++o)r.setNumber(e+o,t+i,a[o])},n.embedPositionDetectionPattern=function(e,t,r){for(var i=0;i<7;++i)for(var a=n.POSITION_DETECTION_PATTERN[i],o=0;o<7;++o)r.setNumber(e+o,t+i,a[o])},n.embedPositionDetectionPatternsAndSeparators=function(e){var t=n.POSITION_DETECTION_PATTERN[0].length;n.embedPositionDetectionPattern(0,0,e),n.embedPositionDetectionPattern(e.getWidth()-t,0,e),n.embedPositionDetectionPattern(0,e.getWidth()-t,e);var r=8;n.embedHorizontalSeparationPattern(0,r-1,e),n.embedHorizontalSeparationPattern(e.getWidth()-r,r-1,e),n.embedHorizontalSeparationPattern(0,e.getWidth()-r,e);var i=7;n.embedVerticalSeparationPattern(i,0,e),n.embedVerticalSeparationPattern(e.getHeight()-i-1,0,e),n.embedVerticalSeparationPattern(i,e.getHeight()-i,e)},n.maybeEmbedPositionAdjustmentPatterns=function(e,t){if(!(e.getVersionNumber()<2))for(var r=e.getVersionNumber()-1,i=n.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[r],a=0,o=i.length;a!==o;a++){var c=i[a];if(c>=0)for(var u=0;u!==o;u++){var d=i[u];d>=0&&n.isEmpty(t.get(d,c))&&n.embedPositionAdjustmentPattern(d-2,c-2,t)}}},n.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),n.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),n.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),n.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),n.VERSION_INFO_POLY=7973,n.TYPE_INFO_POLY=1335,n.TYPE_INFO_MASK_PATTERN=21522,n})(),IL=(function(){function n(e,t){this.dataBytes=e,this.errorCorrectionBytes=t}return n.prototype.getDataBytes=function(){return this.dataBytes},n.prototype.getErrorCorrectionBytes=function(){return this.errorCorrectionBytes},n})(),eb=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};(function(){function n(){}return n.calculateMaskPenalty=function(e){return uf.applyMaskPenaltyRule1(e)+uf.applyMaskPenaltyRule2(e)+uf.applyMaskPenaltyRule3(e)+uf.applyMaskPenaltyRule4(e)},n.encode=function(e,t,r){r===void 0&&(r=null);var i=n.DEFAULT_BYTE_MODE_ENCODING,a=r!==null&&r.get(Lh.CHARACTER_SET)!==void 0;a&&(i=r.get(Lh.CHARACTER_SET).toString());var o=this.chooseMode(e,i),c=new Yn;if(o===Yt.BYTE&&(a||n.DEFAULT_BYTE_MODE_ENCODING!==i)){var u=Mn.getCharacterSetECIByName(i);u!==void 0&&this.appendECI(u,c)}this.appendModeInfo(o,c);var d=new Yn;this.appendBytes(e,o,d,i);var m;if(r!==null&&r.get(Lh.QR_VERSION)!==void 0){var g=Number.parseInt(r.get(Lh.QR_VERSION).toString(),10);m=tl.getVersionForNumber(g);var _=this.calculateBitsNeeded(o,c,d,m);if(!this.willFit(_,m,t))throw new Xt("Data too big for requested version")}else m=this.recommendVersion(t,o,c,d);var w=new Yn;w.appendBitArray(c);var A=o===Yt.BYTE?d.getSizeInBytes():e.length;this.appendLengthInfo(A,m,o,w),w.appendBitArray(d);var S=m.getECBlocksForLevel(t),D=m.getTotalCodewords()-S.getTotalECCodewords();this.terminateBits(D,w);var C=this.interleaveWithECBytes(w,m.getTotalCodewords(),D,S.getNumBlocks()),k=new _v;k.setECLevel(t),k.setMode(o),k.setVersion(m);var V=m.getDimensionForVersion(),z=new CL(V,V),q=this.chooseMaskPattern(C,t,m,z);return k.setMaskPattern(q),JA.buildMatrix(C,t,m,q,z),k.setMatrix(z),k},n.recommendVersion=function(e,t,r,i){var a=this.calculateBitsNeeded(t,r,i,tl.getVersionForNumber(1)),o=this.chooseVersion(a,e),c=this.calculateBitsNeeded(t,r,i,o);return this.chooseVersion(c,e)},n.calculateBitsNeeded=function(e,t,r,i){return t.getSize()+e.getCharacterCountBits(i)+r.getSize()},n.getAlphanumericCode=function(e){return e<n.ALPHANUMERIC_TABLE.length?n.ALPHANUMERIC_TABLE[e]:-1},n.chooseMode=function(e,t){if(t===void 0&&(t=null),Mn.SJIS.getName()===t&&this.isOnlyDoubleByteKanji(e))return Yt.KANJI;for(var r=!1,i=!1,a=0,o=e.length;a<o;++a){var c=e.charAt(a);if(n.isDigit(c))r=!0;else if(this.getAlphanumericCode(c.charCodeAt(0))!==-1)i=!0;else return Yt.BYTE}return i?Yt.ALPHANUMERIC:r?Yt.NUMERIC:Yt.BYTE},n.isOnlyDoubleByteKanji=function(e){var t;try{t=_i.encode(e,Mn.SJIS)}catch{return!1}var r=t.length;if(r%2!==0)return!1;for(var i=0;i<r;i+=2){var a=t[i]&255;if((a<129||a>159)&&(a<224||a>235))return!1}return!0},n.chooseMaskPattern=function(e,t,r,i){for(var a=Number.MAX_SAFE_INTEGER,o=-1,c=0;c<_v.NUM_MASK_PATTERNS;c++){JA.buildMatrix(e,t,r,c,i);var u=this.calculateMaskPenalty(i);u<a&&(a=u,o=c)}return o},n.chooseVersion=function(e,t){for(var r=1;r<=40;r++){var i=tl.getVersionForNumber(r);if(n.willFit(e,i,t))return i}throw new Xt("Data too big")},n.willFit=function(e,t,r){var i=t.getTotalCodewords(),a=t.getECBlocksForLevel(r),o=a.getTotalECCodewords(),c=i-o,u=(e+7)/8;return c>=u},n.terminateBits=function(e,t){var r=e*8;if(t.getSize()>r)throw new Xt("data bits cannot fit in the QR Code"+t.getSize()+" > "+r);for(var i=0;i<4&&t.getSize()<r;++i)t.appendBit(!1);var a=t.getSize()&7;if(a>0)for(var i=a;i<8;i++)t.appendBit(!1);for(var o=e-t.getSizeInBytes(),i=0;i<o;++i)t.appendBits((i&1)===0?236:17,8);if(t.getSize()!==r)throw new Xt("Bits size does not equal capacity")},n.getNumDataBytesAndNumECBytesForBlockID=function(e,t,r,i,a,o){if(i>=r)throw new Xt("Block ID too large");var c=e%r,u=r-c,d=Math.floor(e/r),m=d+1,g=Math.floor(t/r),_=g+1,w=d-g,A=m-_;if(w!==A)throw new Xt("EC bytes mismatch");if(r!==u+c)throw new Xt("RS blocks mismatch");if(e!==(g+w)*u+(_+A)*c)throw new Xt("Total bytes mismatch");i<u?(a[0]=g,o[0]=w):(a[0]=_,o[0]=A)},n.interleaveWithECBytes=function(e,t,r,i){var a,o,c,u;if(e.getSizeInBytes()!==r)throw new Xt("Number of bits and data bytes does not match");for(var d=0,m=0,g=0,_=new Array,w=0;w<i;++w){var A=new Int32Array(1),S=new Int32Array(1);n.getNumDataBytesAndNumECBytesForBlockID(t,r,i,w,A,S);var D=A[0],C=new Uint8Array(D);e.toBytes(8*d,C,0,D);var k=n.generateECBytes(C,S[0]);_.push(new IL(C,k)),m=Math.max(m,D),g=Math.max(g,k.length),d+=A[0]}if(r!==d)throw new Xt("Data bytes does not match offset");for(var V=new Yn,w=0;w<m;++w)try{for(var z=(a=void 0,eb(_)),q=z.next();!q.done;q=z.next()){var $=q.value,C=$.getDataBytes();w<C.length&&V.appendBits(C[w],8)}}catch(I){a={error:I}}finally{try{q&&!q.done&&(o=z.return)&&o.call(z)}finally{if(a)throw a.error}}for(var w=0;w<g;++w)try{for(var M=(c=void 0,eb(_)),b=M.next();!b.done;b=M.next()){var $=b.value,k=$.getErrorCorrectionBytes();w<k.length&&V.appendBits(k[w],8)}}catch(I){c={error:I}}finally{try{b&&!b.done&&(u=M.return)&&u.call(M)}finally{if(c)throw c.error}}if(t!==V.getSizeInBytes())throw new Xt("Interleaving error: "+t+" and "+V.getSizeInBytes()+" differ.");return V},n.generateECBytes=function(e,t){for(var r=e.length,i=new Int32Array(r+t),a=0;a<r;a++)i[a]=e[a]&255;new z3(kr.QR_CODE_FIELD_256).encode(i,t);for(var o=new Uint8Array(t),a=0;a<t;a++)o[a]=i[r+a];return o},n.appendModeInfo=function(e,t){t.appendBits(e.getBits(),4)},n.appendLengthInfo=function(e,t,r,i){var a=r.getCharacterCountBits(t);if(e>=1<<a)throw new Xt(e+" is bigger than "+((1<<a)-1));i.appendBits(e,a)},n.appendBytes=function(e,t,r,i){switch(t){case Yt.NUMERIC:n.appendNumericBytes(e,r);break;case Yt.ALPHANUMERIC:n.appendAlphanumericBytes(e,r);break;case Yt.BYTE:n.append8BitBytes(e,r,i);break;case Yt.KANJI:n.appendKanjiBytes(e,r);break;default:throw new Xt("Invalid mode: "+t)}},n.getDigit=function(e){return e.charCodeAt(0)-48},n.isDigit=function(e){var t=n.getDigit(e);return t>=0&&t<=9},n.appendNumericBytes=function(e,t){for(var r=e.length,i=0;i<r;){var a=n.getDigit(e.charAt(i));if(i+2<r){var o=n.getDigit(e.charAt(i+1)),c=n.getDigit(e.charAt(i+2));t.appendBits(a*100+o*10+c,10),i+=3}else if(i+1<r){var o=n.getDigit(e.charAt(i+1));t.appendBits(a*10+o,7),i+=2}else t.appendBits(a,4),i++}},n.appendAlphanumericBytes=function(e,t){for(var r=e.length,i=0;i<r;){var a=n.getAlphanumericCode(e.charCodeAt(i));if(a===-1)throw new Xt;if(i+1<r){var o=n.getAlphanumericCode(e.charCodeAt(i+1));if(o===-1)throw new Xt;t.appendBits(a*45+o,11),i+=2}else t.appendBits(a,6),i++}},n.append8BitBytes=function(e,t,r){var i;try{i=_i.encode(e,r)}catch(u){throw new Xt(u)}for(var a=0,o=i.length;a!==o;a++){var c=i[a];t.appendBits(c,8)}},n.appendKanjiBytes=function(e,t){var r;try{r=_i.encode(e,Mn.SJIS)}catch(g){throw new Xt(g)}for(var i=r.length,a=0;a<i;a+=2){var o=r[a]&255,c=r[a+1]&255,u=o<<8&4294967295|c,d=-1;if(u>=33088&&u<=40956?d=u-33088:u>=57408&&u<=60351&&(d=u-49472),d===-1)throw new Xt("Invalid byte sequence");var m=(d>>8)*192+(d&255);t.appendBits(m,13)}},n.appendECI=function(e,t){t.appendBits(Yt.ECI.getBits(),4),t.appendBits(e.getValue(),8)},n.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),n.DEFAULT_BYTE_MODE_ENCODING=Mn.UTF8.getName(),n})();var NL=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})();(function(n){NL(e,n);function e(t,r,i,a,o,c,u,d){var m=n.call(this,c,u)||this;if(m.yuvData=t,m.dataWidth=r,m.dataHeight=i,m.left=a,m.top=o,a+c>r||o+u>i)throw new Be("Crop rectangle does not fit within image data.");return d&&m.reverseHorizontal(c,u),m}return e.prototype.getRow=function(t,r){if(t<0||t>=this.getHeight())throw new Be("Requested row is outside the image: "+t);var i=this.getWidth();(r==null||r.length<i)&&(r=new Uint8ClampedArray(i));var a=(t+this.top)*this.dataWidth+this.left;return Ht.arraycopy(this.yuvData,a,r,0,i),r},e.prototype.getMatrix=function(){var t=this.getWidth(),r=this.getHeight();if(t===this.dataWidth&&r===this.dataHeight)return this.yuvData;var i=t*r,a=new Uint8ClampedArray(i),o=this.top*this.dataWidth+this.left;if(t===this.dataWidth)return Ht.arraycopy(this.yuvData,o,a,0,i),a;for(var c=0;c<r;c++){var u=c*t;Ht.arraycopy(this.yuvData,o,a,u,t),o+=this.dataWidth}return a},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(t,r,i,a){return new e(this.yuvData,this.dataWidth,this.dataHeight,this.left+t,this.top+r,i,a,!1)},e.prototype.renderThumbnail=function(){for(var t=this.getWidth()/e.THUMBNAIL_SCALE_FACTOR,r=this.getHeight()/e.THUMBNAIL_SCALE_FACTOR,i=new Int32Array(t*r),a=this.yuvData,o=this.top*this.dataWidth+this.left,c=0;c<r;c++){for(var u=c*t,d=0;d<t;d++){var m=a[o+d*e.THUMBNAIL_SCALE_FACTOR]&255;i[u+d]=4278190080|m*65793}o+=this.dataWidth*e.THUMBNAIL_SCALE_FACTOR}return i},e.prototype.getThumbnailWidth=function(){return this.getWidth()/e.THUMBNAIL_SCALE_FACTOR},e.prototype.getThumbnailHeight=function(){return this.getHeight()/e.THUMBNAIL_SCALE_FACTOR},e.prototype.reverseHorizontal=function(t,r){for(var i=this.yuvData,a=0,o=this.top*this.dataWidth+this.left;a<r;a++,o+=this.dataWidth)for(var c=o+t/2,u=o,d=o+t-1;u<c;u++,d--){var m=i[u];i[u]=i[d],i[d]=m}},e.prototype.invert=function(){return new xp(this)},e.THUMBNAIL_SCALE_FACTOR=2,e})(Zf);var RL=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})();(function(n){RL(e,n);function e(t,r,i,a,o,c,u){var d=n.call(this,r,i)||this;if(d.dataWidth=a,d.dataHeight=o,d.left=c,d.top=u,t.BYTES_PER_ELEMENT===4){for(var m=r*i,g=new Uint8ClampedArray(m),_=0;_<m;_++){var w=t[_],A=w>>16&255,S=w>>7&510,D=w&255;g[_]=(A+S+D)/4&255}d.luminances=g}else d.luminances=t;if(a===void 0&&(d.dataWidth=r),o===void 0&&(d.dataHeight=i),c===void 0&&(d.left=0),u===void 0&&(d.top=0),d.left+r>d.dataWidth||d.top+i>d.dataHeight)throw new Be("Crop rectangle does not fit within image data.");return d}return e.prototype.getRow=function(t,r){if(t<0||t>=this.getHeight())throw new Be("Requested row is outside the image: "+t);var i=this.getWidth();(r==null||r.length<i)&&(r=new Uint8ClampedArray(i));var a=(t+this.top)*this.dataWidth+this.left;return Ht.arraycopy(this.luminances,a,r,0,i),r},e.prototype.getMatrix=function(){var t=this.getWidth(),r=this.getHeight();if(t===this.dataWidth&&r===this.dataHeight)return this.luminances;var i=t*r,a=new Uint8ClampedArray(i),o=this.top*this.dataWidth+this.left;if(t===this.dataWidth)return Ht.arraycopy(this.luminances,o,a,0,i),a;for(var c=0;c<r;c++){var u=c*t;Ht.arraycopy(this.luminances,o,a,u,t),o+=this.dataWidth}return a},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(t,r,i,a){return new e(this.luminances,i,a,this.dataWidth,this.dataHeight,this.left+t,this.top+r)},e.prototype.invert=function(){return new xp(this)},e})(Zf);var OL=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),DL=(function(n){OL(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.forName=function(t){return this.getCharacterSetECIByName(t)},e})(Mn),ML=(function(){function n(){}return n.ISO_8859_1=Mn.ISO8859_1,n})(),xv,PL=301,kL=function(n,e){for(var t=1,r=0;r<255;r++)e[r]=t,n[t]=r,t*=2,t>=256&&(t^=PL);return{LOG:n,ALOG:e}};xv=kL([],[]),xv.LOG;xv.ALOG;var tb;(function(n){n[n.FORCE_NONE=0]="FORCE_NONE",n[n.FORCE_SQUARE=1]="FORCE_SQUARE",n[n.FORCE_RECTANGLE=2]="FORCE_RECTANGLE"})(tb||(tb={}));var nb=129,H3=230,jL=231,LL=235,BL=236,VL=237,FL=238,UL=239,zL=240,Qm=254,HL=254,rb="[)>05",ib="[)>06",ab="",Dt=0,rr=1,br=2,On=3,Hn=4,mr=5,GL=(function(){function n(){}return n.prototype.getEncodingMode=function(){return Dt},n.prototype.encode=function(e){var t=Li.determineConsecutiveDigitCount(e.getMessage(),e.pos);if(t>=2)e.writeCodeword(this.encodeASCIIDigits(e.getMessage().charCodeAt(e.pos),e.getMessage().charCodeAt(e.pos+1))),e.pos+=2;else{var r=e.getCurrentChar(),i=Li.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(i!==this.getEncodingMode())switch(i){case mr:e.writeCodeword(jL),e.signalEncoderChange(mr);return;case rr:e.writeCodeword(H3),e.signalEncoderChange(rr);return;case On:e.writeCodeword(FL),e.signalEncoderChange(On);break;case br:e.writeCodeword(UL),e.signalEncoderChange(br);break;case Hn:e.writeCodeword(zL),e.signalEncoderChange(Hn);break;default:throw new Error("Illegal mode: "+i)}else Li.isExtendedASCII(r)?(e.writeCodeword(LL),e.writeCodeword(r-128+1),e.pos++):(e.writeCodeword(r+1),e.pos++)}},n.prototype.encodeASCIIDigits=function(e,t){if(Li.isDigit(e)&&Li.isDigit(t)){var r=(e-48)*10+(t-48);return r+130}throw new Error("not digits: "+e+t)},n})(),qL=(function(){function n(){}return n.prototype.getEncodingMode=function(){return mr},n.prototype.encode=function(e){var t=new nt;for(t.append(0);e.hasMoreCharacters();){var r=e.getCurrentChar();t.append(r),e.pos++;var i=Li.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(i!==this.getEncodingMode()){e.signalEncoderChange(Dt);break}}var a=t.length()-1,o=1,c=e.getCodewordCount()+a+o;e.updateSymbolInfo(c);var u=e.getSymbolInfo().getDataCapacity()-c>0;if(e.hasMoreCharacters()||u)if(a<=249)t.setCharAt(0,pt.getCharAt(a));else if(a<=1555)t.setCharAt(0,pt.getCharAt(Math.floor(a/250)+249)),t.insert(1,pt.getCharAt(a%250));else throw new Error("Message length not in valid ranges: "+a);for(var d=0,r=t.length();d<r;d++)e.writeCodeword(this.randomize255State(t.charAt(d).charCodeAt(0),e.getCodewordCount()+1))},n.prototype.randomize255State=function(e,t){var r=149*t%255+1,i=e+r;return i<=255?i:i-256},n})(),Wy=(function(){function n(){}return n.prototype.getEncodingMode=function(){return rr},n.prototype.encodeMaximal=function(e){for(var t=new nt,r=0,i=e.pos,a=0;e.hasMoreCharacters();){var o=e.getCurrentChar();e.pos++,r=this.encodeChar(o,t),t.length()%3===0&&(i=e.pos,a=t.length())}if(a!==t.length()){var c=Math.floor(t.length()/3*2),u=Math.floor(e.getCodewordCount()+c+1);e.updateSymbolInfo(u);var d=e.getSymbolInfo().getDataCapacity()-u,m=Math.floor(t.length()%3);(m===2&&d!==2||m===1&&(r>3||d!==1))&&(e.pos=i)}t.length()>0&&e.writeCodeword(H3),this.handleEOD(e,t)},n.prototype.encode=function(e){for(var t=new nt;e.hasMoreCharacters();){var r=e.getCurrentChar();e.pos++;var i=this.encodeChar(r,t),a=Math.floor(t.length()/3)*2,o=e.getCodewordCount()+a;e.updateSymbolInfo(o);var c=e.getSymbolInfo().getDataCapacity()-o;if(!e.hasMoreCharacters()){var u=new nt;for(t.length()%3===2&&c!==2&&(i=this.backtrackOneCharacter(e,t,u,i));t.length()%3===1&&(i>3||c!==1);)i=this.backtrackOneCharacter(e,t,u,i);break}var d=t.length();if(d%3===0){var m=Li.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(m!==this.getEncodingMode()){e.signalEncoderChange(Dt);break}}}this.handleEOD(e,t)},n.prototype.backtrackOneCharacter=function(e,t,r,i){var a=t.length(),o=t.toString().substring(0,a-i);t.setLengthToZero(),t.append(o),e.pos--;var c=e.getCurrentChar();return i=this.encodeChar(c,r),e.resetSymbolInfo(),i},n.prototype.writeNextTriplet=function(e,t){e.writeCodewords(this.encodeToCodewords(t.toString()));var r=t.toString().substring(3);t.setLengthToZero(),t.append(r)},n.prototype.handleEOD=function(e,t){var r=Math.floor(t.length()/3*2),i=t.length()%3,a=e.getCodewordCount()+r;e.updateSymbolInfo(a);var o=e.getSymbolInfo().getDataCapacity()-a;if(i===2){for(t.append("\0");t.length()>=3;)this.writeNextTriplet(e,t);e.hasMoreCharacters()&&e.writeCodeword(Qm)}else if(o===1&&i===1){for(;t.length()>=3;)this.writeNextTriplet(e,t);e.hasMoreCharacters()&&e.writeCodeword(Qm),e.pos--}else if(i===0){for(;t.length()>=3;)this.writeNextTriplet(e,t);(o>0||e.hasMoreCharacters())&&e.writeCodeword(Qm)}else throw new Error("Unexpected case. Please report!");e.signalEncoderChange(Dt)},n.prototype.encodeChar=function(e,t){if(e===32)return t.append(3),1;if(e>=48&&e<=57)return t.append(e-48+4),1;if(e>=65&&e<=90)return t.append(e-65+14),1;if(e<32)return t.append(0),t.append(e),2;if(e<=47)return t.append(1),t.append(e-33),2;if(e<=64)return t.append(1),t.append(e-58+15),2;if(e<=95)return t.append(1),t.append(e-91+22),2;if(e<=127)return t.append(2),t.append(e-96),2;t.append("1");var r=2;return r+=this.encodeChar(e-128,t),r},n.prototype.encodeToCodewords=function(e){var t=1600*e.charCodeAt(0)+40*e.charCodeAt(1)+e.charCodeAt(2)+1,r=t/256,i=t%256,a=new nt;return a.append(r),a.append(i),a.toString()},n})(),$L=(function(){function n(){}return n.prototype.getEncodingMode=function(){return Hn},n.prototype.encode=function(e){for(var t=new nt;e.hasMoreCharacters();){var r=e.getCurrentChar();this.encodeChar(r,t),e.pos++;var i=t.length();if(i>=4){e.writeCodewords(this.encodeToCodewords(t.toString()));var a=t.toString().substring(4);t.setLengthToZero(),t.append(a);var o=Li.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(o!==this.getEncodingMode()){e.signalEncoderChange(Dt);break}}}t.append(pt.getCharAt(31)),this.handleEOD(e,t)},n.prototype.handleEOD=function(e,t){try{var r=t.length();if(r===0)return;if(r===1){e.updateSymbolInfo();var i=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount(),a=e.getRemainingCharacters();if(a>i&&(e.updateSymbolInfo(e.getCodewordCount()+1),i=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount()),a<=i&&i<=2)return}if(r>4)throw new Error("Count must not exceed 4");var o=r-1,c=this.encodeToCodewords(t.toString()),u=!e.hasMoreCharacters(),d=u&&o<=2;if(o<=2){e.updateSymbolInfo(e.getCodewordCount()+o);var i=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount();i>=3&&(d=!1,e.updateSymbolInfo(e.getCodewordCount()+c.length))}d?(e.resetSymbolInfo(),e.pos-=o):e.writeCodewords(c)}finally{e.signalEncoderChange(Dt)}},n.prototype.encodeChar=function(e,t){e>=32&&e<=63?t.append(e):e>=64&&e<=94?t.append(pt.getCharAt(e-64)):Li.illegalCharacter(pt.getCharAt(e))},n.prototype.encodeToCodewords=function(e){var t=e.length;if(t===0)throw new Error("StringBuilder must not be empty");var r=e.charAt(0).charCodeAt(0),i=t>=2?e.charAt(1).charCodeAt(0):0,a=t>=3?e.charAt(2).charCodeAt(0):0,o=t>=4?e.charAt(3).charCodeAt(0):0,c=(r<<18)+(i<<12)+(a<<6)+o,u=c>>16&255,d=c>>8&255,m=c&255,g=new nt;return g.append(u),t>=2&&g.append(d),t>=3&&g.append(m),g.toString()},n})(),XL=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),YL=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Ct=(function(){function n(e,t,r,i,a,o,c,u){c===void 0&&(c=0),u===void 0&&(u=0),this.rectangular=e,this.dataCapacity=t,this.errorCodewords=r,this.matrixWidth=i,this.matrixHeight=a,this.dataRegions=o,this.rsBlockData=c,this.rsBlockError=u}return n.lookup=function(e,t,r,i,a){var o,c;t===void 0&&(t=0),r===void 0&&(r=null),i===void 0&&(i=null),a===void 0&&(a=!0);try{for(var u=YL(WL),d=u.next();!d.done;d=u.next()){var m=d.value;if(!(t===1&&m.rectangular)&&!(t===2&&!m.rectangular)&&!(r!=null&&(m.getSymbolWidth()<r.getWidth()||m.getSymbolHeight()<r.getHeight()))&&!(i!=null&&(m.getSymbolWidth()>i.getWidth()||m.getSymbolHeight()>i.getHeight()))&&e<=m.dataCapacity)return m}}catch(g){o={error:g}}finally{try{d&&!d.done&&(c=u.return)&&c.call(u)}finally{if(o)throw o.error}}if(a)throw new Error("Can't find a symbol arrangement that matches the message. Data codewords: "+e);return null},n.prototype.getHorizontalDataRegions=function(){switch(this.dataRegions){case 1:return 1;case 2:case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},n.prototype.getVerticalDataRegions=function(){switch(this.dataRegions){case 1:case 2:return 1;case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},n.prototype.getSymbolDataWidth=function(){return this.getHorizontalDataRegions()*this.matrixWidth},n.prototype.getSymbolDataHeight=function(){return this.getVerticalDataRegions()*this.matrixHeight},n.prototype.getSymbolWidth=function(){return this.getSymbolDataWidth()+this.getHorizontalDataRegions()*2},n.prototype.getSymbolHeight=function(){return this.getSymbolDataHeight()+this.getVerticalDataRegions()*2},n.prototype.getCodewordCount=function(){return this.dataCapacity+this.errorCodewords},n.prototype.getInterleavedBlockCount=function(){return this.rsBlockData?this.dataCapacity/this.rsBlockData:1},n.prototype.getDataCapacity=function(){return this.dataCapacity},n.prototype.getErrorCodewords=function(){return this.errorCodewords},n.prototype.getDataLengthForInterleavedBlock=function(e){return this.rsBlockData},n.prototype.getErrorLengthForInterleavedBlock=function(e){return this.rsBlockError},n})(),KL=(function(n){XL(e,n);function e(){return n.call(this,!1,1558,620,22,22,36,-1,62)||this}return e.prototype.getInterleavedBlockCount=function(){return 10},e.prototype.getDataLengthForInterleavedBlock=function(t){return t<=8?156:155},e})(Ct),WL=[new Ct(!1,3,5,8,8,1),new Ct(!1,5,7,10,10,1),new Ct(!0,5,7,16,6,1),new Ct(!1,8,10,12,12,1),new Ct(!0,10,11,14,6,2),new Ct(!1,12,12,14,14,1),new Ct(!0,16,14,24,10,1),new Ct(!1,18,14,16,16,1),new Ct(!1,22,18,18,18,1),new Ct(!0,22,18,16,10,2),new Ct(!1,30,20,20,20,1),new Ct(!0,32,24,16,14,2),new Ct(!1,36,24,22,22,1),new Ct(!1,44,28,24,24,1),new Ct(!0,49,28,22,14,2),new Ct(!1,62,36,14,14,4),new Ct(!1,86,42,16,16,4),new Ct(!1,114,48,18,18,4),new Ct(!1,144,56,20,20,4),new Ct(!1,174,68,22,22,4),new Ct(!1,204,84,24,24,4,102,42),new Ct(!1,280,112,14,14,16,140,56),new Ct(!1,368,144,16,16,16,92,36),new Ct(!1,456,192,18,18,16,114,48),new Ct(!1,576,224,20,20,16,144,56),new Ct(!1,696,272,22,22,16,174,68),new Ct(!1,816,336,24,24,16,136,56),new Ct(!1,1050,408,18,18,36,175,68),new Ct(!1,1304,496,20,20,36,163,62),new KL],QL=(function(){function n(e){this.msg=e,this.pos=0,this.skipAtEnd=0;for(var t=e.split("").map(function(c){return c.charCodeAt(0)}),r=new nt,i=0,a=t.length;i<a;i++){var o=String.fromCharCode(t[i]&255);if(o==="?"&&e.charAt(i)!=="?")throw new Error("Message contains characters outside ISO-8859-1 encoding.");r.append(o)}this.msg=r.toString(),this.shape=0,this.codewords=new nt,this.newEncoding=-1}return n.prototype.setSymbolShape=function(e){this.shape=e},n.prototype.setSizeConstraints=function(e,t){this.minSize=e,this.maxSize=t},n.prototype.getMessage=function(){return this.msg},n.prototype.setSkipAtEnd=function(e){this.skipAtEnd=e},n.prototype.getCurrentChar=function(){return this.msg.charCodeAt(this.pos)},n.prototype.getCurrent=function(){return this.msg.charCodeAt(this.pos)},n.prototype.getCodewords=function(){return this.codewords},n.prototype.writeCodewords=function(e){this.codewords.append(e)},n.prototype.writeCodeword=function(e){this.codewords.append(e)},n.prototype.getCodewordCount=function(){return this.codewords.length()},n.prototype.getNewEncoding=function(){return this.newEncoding},n.prototype.signalEncoderChange=function(e){this.newEncoding=e},n.prototype.resetEncoderSignal=function(){this.newEncoding=-1},n.prototype.hasMoreCharacters=function(){return this.pos<this.getTotalMessageCharCount()},n.prototype.getTotalMessageCharCount=function(){return this.msg.length-this.skipAtEnd},n.prototype.getRemainingCharacters=function(){return this.getTotalMessageCharCount()-this.pos},n.prototype.getSymbolInfo=function(){return this.symbolInfo},n.prototype.updateSymbolInfo=function(e){e===void 0&&(e=this.getCodewordCount()),(this.symbolInfo==null||e>this.symbolInfo.getDataCapacity())&&(this.symbolInfo=Ct.lookup(e,this.shape,this.minSize,this.maxSize,!0))},n.prototype.resetSymbolInfo=function(){this.symbolInfo=null},n})(),ZL=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),JL=(function(n){ZL(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getEncodingMode=function(){return On},e.prototype.encode=function(t){for(var r=new nt;t.hasMoreCharacters();){var i=t.getCurrentChar();t.pos++,this.encodeChar(i,r);var a=r.length();if(a%3===0){this.writeNextTriplet(t,r);var o=Li.lookAheadTest(t.getMessage(),t.pos,this.getEncodingMode());if(o!==this.getEncodingMode()){t.signalEncoderChange(Dt);break}}}this.handleEOD(t,r)},e.prototype.encodeChar=function(t,r){switch(t){case 13:r.append(0);break;case 42:r.append(1);break;case 62:r.append(2);break;case 32:r.append(3);break;default:t>=48&&t<=57?r.append(t-48+4):t>=65&&t<=90?r.append(t-65+14):Li.illegalCharacter(pt.getCharAt(t));break}return 1},e.prototype.handleEOD=function(t,r){t.updateSymbolInfo();var i=t.getSymbolInfo().getDataCapacity()-t.getCodewordCount(),a=r.length();t.pos-=a,(t.getRemainingCharacters()>1||i>1||t.getRemainingCharacters()!==i)&&t.writeCodeword(HL),t.getNewEncoding()<0&&t.signalEncoderChange(Dt)},e})(Wy),eB=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),tB=(function(n){eB(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getEncodingMode=function(){return br},e.prototype.encodeChar=function(t,r){if(t===32)return r.append(3),1;if(t>=48&&t<=57)return r.append(t-48+4),1;if(t>=97&&t<=122)return r.append(t-97+14),1;if(t<32)return r.append(0),r.append(t),2;if(t<=47)return r.append(1),r.append(t-33),2;if(t<=64)return r.append(1),r.append(t-58+15),2;if(t>=91&&t<=95)return r.append(1),r.append(t-91+22),2;if(t===96)return r.append(2),r.append(0),2;if(t<=90)return r.append(2),r.append(t-65+1),2;if(t<=127)return r.append(2),r.append(t-123+27),2;r.append("1");var i=2;return i+=this.encodeChar(t-128,r),i},e})(Wy),Li=(function(){function n(){}return n.randomize253State=function(e){var t=149*e%253+1,r=nb+t;return r<=254?r:r-254},n.encodeHighLevel=function(e,t,r,i,a){t===void 0&&(t=0),r===void 0&&(r=null),i===void 0&&(i=null),a===void 0&&(a=!1);var o=new Wy,c=[new GL,o,new tB,new JL,new $L,new qL],u=new QL(e);u.setSymbolShape(t),u.setSizeConstraints(r,i),e.startsWith(rb)&&e.endsWith(ab)?(u.writeCodeword(BL),u.setSkipAtEnd(2),u.pos+=rb.length):e.startsWith(ib)&&e.endsWith(ab)&&(u.writeCodeword(VL),u.setSkipAtEnd(2),u.pos+=ib.length);var d=Dt;for(a&&(o.encodeMaximal(u),d=u.getNewEncoding(),u.resetEncoderSignal());u.hasMoreCharacters();)c[d].encode(u),u.getNewEncoding()>=0&&(d=u.getNewEncoding(),u.resetEncoderSignal());var m=u.getCodewordCount();u.updateSymbolInfo();var g=u.getSymbolInfo().getDataCapacity();m<g&&d!==Dt&&d!==mr&&d!==Hn&&u.writeCodeword("");var _=u.getCodewords();for(_.length()<g&&_.append(nb);_.length()<g;)_.append(this.randomize253State(_.length()+1));return u.getCodewords().toString()},n.lookAheadTest=function(e,t,r){var i=this.lookAheadTestIntern(e,t,r);if(r===On&&i===On){for(var a=Math.min(t+3,e.length),o=t;o<a;o++)if(!this.isNativeX12(e.charCodeAt(o)))return Dt}else if(r===Hn&&i===Hn){for(var a=Math.min(t+4,e.length),o=t;o<a;o++)if(!this.isNativeEDIFACT(e.charCodeAt(o)))return Dt}return i},n.lookAheadTestIntern=function(e,t,r){if(t>=e.length)return r;var i;r===Dt?i=[0,1,1,1,1,1.25]:(i=[1,2,2,2,2,2.25],i[r]=0);for(var a=0,o=new Uint8Array(6),c=[];;){if(t+a===e.length){Pn.fill(o,0),Pn.fill(c,0);var u=this.findMinimums(i,c,it.MAX_VALUE,o),d=this.getMinimumCount(o);if(c[Dt]===u)return Dt;if(d===1){if(o[mr]>0)return mr;if(o[Hn]>0)return Hn;if(o[br]>0)return br;if(o[On]>0)return On}return rr}var m=e.charCodeAt(t+a);if(a++,this.isDigit(m)?i[Dt]+=.5:this.isExtendedASCII(m)?(i[Dt]=Math.ceil(i[Dt]),i[Dt]+=2):(i[Dt]=Math.ceil(i[Dt]),i[Dt]++),this.isNativeC40(m)?i[rr]+=2/3:this.isExtendedASCII(m)?i[rr]+=8/3:i[rr]+=4/3,this.isNativeText(m)?i[br]+=2/3:this.isExtendedASCII(m)?i[br]+=8/3:i[br]+=4/3,this.isNativeX12(m)?i[On]+=2/3:this.isExtendedASCII(m)?i[On]+=13/3:i[On]+=10/3,this.isNativeEDIFACT(m)?i[Hn]+=3/4:this.isExtendedASCII(m)?i[Hn]+=17/4:i[Hn]+=13/4,this.isSpecialB256(m)?i[mr]+=4:i[mr]++,a>=4){if(Pn.fill(o,0),Pn.fill(c,0),this.findMinimums(i,c,it.MAX_VALUE,o),c[Dt]<this.min(c[mr],c[rr],c[br],c[On],c[Hn]))return Dt;if(c[mr]<c[Dt]||c[mr]+1<this.min(c[rr],c[br],c[On],c[Hn]))return mr;if(c[Hn]+1<this.min(c[mr],c[rr],c[br],c[On],c[Dt]))return Hn;if(c[br]+1<this.min(c[mr],c[rr],c[Hn],c[On],c[Dt]))return br;if(c[On]+1<this.min(c[mr],c[rr],c[Hn],c[br],c[Dt]))return On;if(c[rr]+1<this.min(c[Dt],c[mr],c[Hn],c[br])){if(c[rr]<c[On])return rr;if(c[rr]===c[On]){for(var g=t+a+1;g<e.length;){var _=e.charCodeAt(g);if(this.isX12TermSep(_))return On;if(!this.isNativeX12(_))break;g++}return rr}}}}},n.min=function(e,t,r,i,a){var o=Math.min(e,Math.min(t,Math.min(r,i)));return a===void 0?o:Math.min(o,a)},n.findMinimums=function(e,t,r,i){for(var a=0;a<6;a++){var o=t[a]=Math.ceil(e[a]);r>o&&(r=o,Pn.fill(i,0)),r===o&&(i[a]=i[a]+1)}return r},n.getMinimumCount=function(e){for(var t=0,r=0;r<6;r++)t+=e[r];return t||0},n.isDigit=function(e){return e>=48&&e<=57},n.isExtendedASCII=function(e){return e>=128&&e<=255},n.isNativeC40=function(e){return e===32||e>=48&&e<=57||e>=65&&e<=90},n.isNativeText=function(e){return e===32||e>=48&&e<=57||e>=97&&e<=122},n.isNativeX12=function(e){return this.isX12TermSep(e)||e===32||e>=48&&e<=57||e>=65&&e<=90},n.isX12TermSep=function(e){return e===13||e===42||e===62},n.isNativeEDIFACT=function(e){return e>=32&&e<=94},n.isSpecialB256=function(e){return!1},n.determineConsecutiveDigitCount=function(e,t){t===void 0&&(t=0);for(var r=e.length,i=t;i<r&&this.isDigit(e.charCodeAt(i));)i++;return i-t},n.illegalCharacter=function(e){var t=it.toHexString(e.charCodeAt(0));throw t="0000".substring(0,4-t.length)+t,new Error("Illegal character: "+e+" (0x"+t+")")},n})(),Zm=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},sb=(function(){function n(e){this.charset=e,this.name=e.name}return n.prototype.canEncode=function(e){try{return _i.encode(e,this.charset)!=null}catch{return!1}},n})(),nB=(function(){function n(e,t,r){var i,a,o,c,u,d;this.ENCODERS=["IBM437","ISO-8859-2","ISO-8859-3","ISO-8859-4","ISO-8859-5","ISO-8859-6","ISO-8859-7","ISO-8859-8","ISO-8859-9","ISO-8859-10","ISO-8859-11","ISO-8859-13","ISO-8859-14","ISO-8859-15","ISO-8859-16","windows-1250","windows-1251","windows-1252","windows-1256","Shift_JIS"].map(function(R){return new sb(DL.forName(R))}),this.encoders=[];var m=[];m.push(new sb(ML.ISO_8859_1));for(var g=t!=null&&t.name.startsWith("UTF"),_=0;_<e.length;_++){var w=!1;try{for(var A=(i=void 0,Zm(m)),S=A.next();!S.done;S=A.next()){var D=S.value,C=e.charAt(_),k=C.charCodeAt(0);if(k===r||D.canEncode(C)){w=!0;break}}}catch(R){i={error:R}}finally{try{S&&!S.done&&(a=A.return)&&a.call(A)}finally{if(i)throw i.error}}if(!w)try{for(var V=(o=void 0,Zm(this.ENCODERS)),z=V.next();!z.done;z=V.next()){var D=z.value;if(D.canEncode(e.charAt(_))){m.push(D),w=!0;break}}}catch(R){o={error:R}}finally{try{z&&!z.done&&(c=V.return)&&c.call(V)}finally{if(o)throw o.error}}w||(g=!0)}if(m.length===1&&!g)this.encoders=[m[0]];else{this.encoders=[];var q=0;try{for(var $=Zm(m),M=$.next();!M.done;M=$.next()){var D=M.value;this.encoders[q++]=D}}catch(R){u={error:R}}finally{try{M&&!M.done&&(d=$.return)&&d.call($)}finally{if(u)throw u.error}}}var b=-1;if(t!=null){for(var _=0;_<this.encoders.length;_++)if(this.encoders[_]!=null&&t.name===this.encoders[_].name){b=_;break}}this.priorityEncoderIndex=b}return n.prototype.length=function(){return this.encoders.length},n.prototype.getCharsetName=function(e){if(!(e<this.length()))throw new Error("index must be less than length");return this.encoders[e].name},n.prototype.getCharset=function(e){if(!(e<this.length()))throw new Error("index must be less than length");return this.encoders[e].charset},n.prototype.getECIValue=function(e){return this.encoders[e].charset.getValueIdentifier()},n.prototype.getPriorityEncoderIndex=function(){return this.priorityEncoderIndex},n.prototype.canEncode=function(e,t){if(!(t<this.length()))throw new Error("index must be less than length");return!0},n.prototype.encode=function(e,t){if(!(t<this.length()))throw new Error("index must be less than length");return _i.encode(pt.getCharAt(e),this.encoders[t].name)},n})(),rB=3,iB=(function(){function n(e,t,r){this.fnc1=r;var i=new nB(e,t,r);if(i.length()===1)for(var a=0;a<this.bytes.length;a++){var o=e.charAt(a).charCodeAt(0);this.bytes[a]=o===r?1e3:o}else this.bytes=this.encodeMinimally(e,i,r)}return n.prototype.getFNC1Character=function(){return this.fnc1},n.prototype.length=function(){return this.bytes.length},n.prototype.haveNCharacters=function(e,t){if(e+t-1>=this.bytes.length)return!1;for(var r=0;r<t;r++)if(this.isECI(e+r))return!1;return!0},n.prototype.charAt=function(e){if(e<0||e>=this.length())throw new Error(""+e);if(this.isECI(e))throw new Error("value at "+e+" is not a character but an ECI");return this.isFNC1(e)?this.fnc1:this.bytes[e]},n.prototype.subSequence=function(e,t){if(e<0||e>t||t>this.length())throw new Error(""+e);for(var r=new nt,i=e;i<t;i++){if(this.isECI(i))throw new Error("value at "+i+" is not a character but an ECI");r.append(this.charAt(i))}return r.toString()},n.prototype.isECI=function(e){if(e<0||e>=this.length())throw new Error(""+e);return this.bytes[e]>255&&this.bytes[e]<=999},n.prototype.isFNC1=function(e){if(e<0||e>=this.length())throw new Error(""+e);return this.bytes[e]===1e3},n.prototype.getECIValue=function(e){if(e<0||e>=this.length())throw new Error(""+e);if(!this.isECI(e))throw new Error("value at "+e+" is not an ECI but a character");return this.bytes[e]-256},n.prototype.addEdge=function(e,t,r){(e[t][r.encoderIndex]==null||e[t][r.encoderIndex].cachedTotalSize>r.cachedTotalSize)&&(e[t][r.encoderIndex]=r)},n.prototype.addEdges=function(e,t,r,i,a,o){var c=e.charAt(i).charCodeAt(0),u=0,d=t.length();t.getPriorityEncoderIndex()>=0&&(c===o||t.canEncode(c,t.getPriorityEncoderIndex()))&&(u=t.getPriorityEncoderIndex(),d=u+1);for(var m=u;m<d;m++)(c===o||t.canEncode(c,m))&&this.addEdge(r,i+1,new ob(c,t,m,a,o))},n.prototype.encodeMinimally=function(e,t,r){var i=e.length,a=new ob[i+1][t.length()];this.addEdges(e,t,a,0,null,r);for(var o=1;o<=i;o++){for(var c=0;c<t.length();c++)a[o][c]!=null&&o<i&&this.addEdges(e,t,a,o,a[o][c],r);for(var c=0;c<t.length();c++)a[o-1][c]=null}for(var u=-1,d=it.MAX_VALUE,c=0;c<t.length();c++)if(a[i][c]!=null){var m=a[i][c];m.cachedTotalSize<d&&(d=m.cachedTotalSize,u=c)}if(u<0)throw new Error('Failed to encode "'+e+'"');for(var g=[],_=a[i][u];_!=null;){if(_.isFNC1())g.unshift(1e3);else for(var w=t.encode(_.c,_.encoderIndex),o=w.length-1;o>=0;o--)g.unshift(w[o]&255);var A=_.previous===null?0:_.previous.encoderIndex;A!==_.encoderIndex&&g.unshift(256+t.getECIValue(_.encoderIndex)),_=_.previous}for(var S=[],o=0;o<S.length;o++)S[o]=g[o];return S},n})(),ob=(function(){function n(e,t,r,i,a){this.c=e,this.encoderSet=t,this.encoderIndex=r,this.previous=i,this.fnc1=a,this.c=e===a?1e3:e;var o=this.isFNC1()?1:t.encode(e,r).length,c=i===null?0:i.encoderIndex;c!==r&&(o+=rB),i!=null&&(o+=i.cachedTotalSize),this.cachedTotalSize=o}return n.prototype.isFNC1=function(){return this.c===1e3},n})(),aB=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})();var lb;(function(n){n[n.ASCII=0]="ASCII",n[n.C40=1]="C40",n[n.TEXT=2]="TEXT",n[n.X12=3]="X12",n[n.EDF=4]="EDF",n[n.B256=5]="B256"})(lb||(lb={}));(function(n){aB(e,n);function e(t,r,i,a,o){var c=n.call(this,t,r,i)||this;return c.shape=a,c.macroId=o,c}return e.prototype.getMacroId=function(){return this.macroId},e.prototype.getShapeHint=function(){return this.shape},e})(iB);var sB=(function(){function n(){}return n.prototype.isCompact=function(){return this.compact},n.prototype.setCompact=function(e){this.compact=e},n.prototype.getSize=function(){return this.size},n.prototype.setSize=function(e){this.size=e},n.prototype.getLayers=function(){return this.layers},n.prototype.setLayers=function(e){this.layers=e},n.prototype.getCodeWords=function(){return this.codeWords},n.prototype.setCodeWords=function(e){this.codeWords=e},n.prototype.getMatrix=function(){return this.matrix},n.prototype.setMatrix=function(e){this.matrix=e},n})(),cb=(function(){function n(){}return n.singletonList=function(e){return[e]},n.min=function(e,t){return e.sort(t)[0]},n})(),oB=(function(){function n(e){this.previous=e}return n.prototype.getPrevious=function(){return this.previous},n})(),lB=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Qy=(function(n){lB(e,n);function e(t,r,i){var a=n.call(this,t)||this;return a.value=r,a.bitCount=i,a}return e.prototype.appendTo=function(t,r){t.appendBits(this.value,this.bitCount)},e.prototype.add=function(t,r){return new e(this,t,r)},e.prototype.addBinaryShift=function(t,r){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new e(this,t,r)},e.prototype.toString=function(){var t=this.value&(1<<this.bitCount)-1;return t|=1<<this.bitCount,"<"+it.toBinaryString(t|1<<this.bitCount).substring(1)+">"},e})(oB),cB=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),uB=(function(n){cB(e,n);function e(t,r,i){var a=n.call(this,t,0,0)||this;return a.binaryShiftStart=r,a.binaryShiftByteCount=i,a}return e.prototype.appendTo=function(t,r){for(var i=0;i<this.binaryShiftByteCount;i++)(i===0||i===31&&this.binaryShiftByteCount<=62)&&(t.appendBits(31,5),this.binaryShiftByteCount>62?t.appendBits(this.binaryShiftByteCount-31,16):i===0?t.appendBits(Math.min(this.binaryShiftByteCount,31),5):t.appendBits(this.binaryShiftByteCount-31,5)),t.appendBits(r[this.binaryShiftStart+i],8)},e.prototype.addBinaryShift=function(t,r){return new e(this,t,r)},e.prototype.toString=function(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"},e})(Qy);function fB(n,e,t){return new uB(n,e,t)}function Zu(n,e,t){return new Qy(n,e,t)}var dB=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],ro=0,j0=1,vi=2,G3=3,_a=4,hB=new Qy(null,0,0),Jm=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])],pB=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};function mB(n){var e,t;try{for(var r=pB(n),i=r.next();!i.done;i=r.next()){var a=i.value;Pn.fill(a,-1)}}catch(o){e={error:o}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}return n[ro][_a]=0,n[j0][_a]=0,n[j0][ro]=28,n[G3][_a]=0,n[vi][_a]=0,n[vi][ro]=15,n}var q3=mB(Pn.createInt32Array(6,6)),gB=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},vB=(function(){function n(e,t,r,i){this.token=e,this.mode=t,this.binaryShiftByteCount=r,this.bitCount=i}return n.prototype.getMode=function(){return this.mode},n.prototype.getToken=function(){return this.token},n.prototype.getBinaryShiftByteCount=function(){return this.binaryShiftByteCount},n.prototype.getBitCount=function(){return this.bitCount},n.prototype.latchAndAppend=function(e,t){var r=this.bitCount,i=this.token;if(e!==this.mode){var a=Jm[this.mode][e];i=Zu(i,a&65535,a>>16),r+=a>>16}var o=e===vi?4:5;return i=Zu(i,t,o),new n(i,e,0,r+o)},n.prototype.shiftAndAppend=function(e,t){var r=this.token,i=this.mode===vi?4:5;return r=Zu(r,q3[this.mode][e],i),r=Zu(r,t,5),new n(r,this.mode,0,this.bitCount+i+5)},n.prototype.addBinaryShiftChar=function(e){var t=this.token,r=this.mode,i=this.bitCount;if(this.mode===_a||this.mode===vi){var a=Jm[r][ro];t=Zu(t,a&65535,a>>16),i+=a>>16,r=ro}var o=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,c=new n(t,r,this.binaryShiftByteCount+1,i+o);return c.binaryShiftByteCount===2078&&(c=c.endBinaryShift(e+1)),c},n.prototype.endBinaryShift=function(e){if(this.binaryShiftByteCount===0)return this;var t=this.token;return t=fB(t,e-this.binaryShiftByteCount,this.binaryShiftByteCount),new n(t,this.mode,0,this.bitCount)},n.prototype.isBetterThanOrEqualTo=function(e){var t=this.bitCount+(Jm[this.mode][e.mode]>>16);return this.binaryShiftByteCount<e.binaryShiftByteCount?t+=n.calculateBinaryShiftCost(e)-n.calculateBinaryShiftCost(this):this.binaryShiftByteCount>e.binaryShiftByteCount&&e.binaryShiftByteCount>0&&(t+=10),t<=e.bitCount},n.prototype.toBitArray=function(e){for(var t,r,i=[],a=this.endBinaryShift(e.length).token;a!==null;a=a.getPrevious())i.unshift(a);var o=new Yn;try{for(var c=gB(i),u=c.next();!u.done;u=c.next()){var d=u.value;d.appendTo(o,e)}}catch(m){t={error:m}}finally{try{u&&!u.done&&(r=c.return)&&r.call(c)}finally{if(t)throw t.error}}return o},n.prototype.toString=function(){return pt.format("%s bits=%d bytes=%d",dB[this.mode],this.bitCount,this.binaryShiftByteCount)},n.calculateBinaryShiftCost=function(e){return e.binaryShiftByteCount>62?21:e.binaryShiftByteCount>31?20:e.binaryShiftByteCount>0?10:0},n.INITIAL_STATE=new n(hB,ro,0,0),n})();function yB(n){var e=pt.getCharCode(" "),t=pt.getCharCode("."),r=pt.getCharCode(",");n[ro][e]=1;for(var i=pt.getCharCode("Z"),a=pt.getCharCode("A"),o=a;o<=i;o++)n[ro][o]=o-a+2;n[j0][e]=1;for(var c=pt.getCharCode("z"),u=pt.getCharCode("a"),o=u;o<=c;o++)n[j0][o]=o-u+2;n[vi][e]=1;for(var d=pt.getCharCode("9"),m=pt.getCharCode("0"),o=m;o<=d;o++)n[vi][o]=o-m+2;n[vi][r]=12,n[vi][t]=13;for(var g=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""],_=0;_<g.length;_++)n[G3][pt.getCharCode(g[_])]=_;for(var w=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"],_=0;_<w.length;_++)pt.getCharCode(w[_])>0&&(n[_a][pt.getCharCode(w[_])]=_);return n}var eg=yB(Pn.createInt32Array(5,256)),Bh=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},_B=(function(){function n(e){this.text=e}return n.prototype.encode=function(){for(var e=pt.getCharCode(" "),t=pt.getCharCode(`
`),r=cb.singletonList(vB.INITIAL_STATE),i=0;i<this.text.length;i++){var a=void 0,o=i+1<this.text.length?this.text[i+1]:0;switch(this.text[i]){case pt.getCharCode("\r"):a=o===t?2:0;break;case pt.getCharCode("."):a=o===e?3:0;break;case pt.getCharCode(","):a=o===e?4:0;break;case pt.getCharCode(":"):a=o===e?5:0;break;default:a=0}a>0?(r=n.updateStateListForPair(r,i,a),i++):r=this.updateStateListForChar(r,i)}var c=cb.min(r,function(u,d){return u.getBitCount()-d.getBitCount()});return c.toBitArray(this.text)},n.prototype.updateStateListForChar=function(e,t){var r,i,a=[];try{for(var o=Bh(e),c=o.next();!c.done;c=o.next()){var u=c.value;this.updateStateForChar(u,t,a)}}catch(d){r={error:d}}finally{try{c&&!c.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}return n.simplifyStates(a)},n.prototype.updateStateForChar=function(e,t,r){for(var i=this.text[t]&255,a=eg[e.getMode()][i]>0,o=null,c=0;c<=_a;c++){var u=eg[c][i];if(u>0){if(o==null&&(o=e.endBinaryShift(t)),!a||c===e.getMode()||c===vi){var d=o.latchAndAppend(c,u);r.push(d)}if(!a&&q3[e.getMode()][c]>=0){var m=o.shiftAndAppend(c,u);r.push(m)}}}if(e.getBinaryShiftByteCount()>0||eg[e.getMode()][i]===0){var g=e.addBinaryShiftChar(t);r.push(g)}},n.updateStateListForPair=function(e,t,r){var i,a,o=[];try{for(var c=Bh(e),u=c.next();!u.done;u=c.next()){var d=u.value;this.updateStateForPair(d,t,r,o)}}catch(m){i={error:m}}finally{try{u&&!u.done&&(a=c.return)&&a.call(c)}finally{if(i)throw i.error}}return this.simplifyStates(o)},n.updateStateForPair=function(e,t,r,i){var a=e.endBinaryShift(t);if(i.push(a.latchAndAppend(_a,r)),e.getMode()!==_a&&i.push(a.shiftAndAppend(_a,r)),r===3||r===4){var o=a.latchAndAppend(vi,16-r).latchAndAppend(vi,1);i.push(o)}if(e.getBinaryShiftByteCount()>0){var c=e.addBinaryShiftChar(t).addBinaryShiftChar(t+1);i.push(c)}},n.simplifyStates=function(e){var t,r,i,a,o=[];try{for(var c=Bh(e),u=c.next();!u.done;u=c.next()){var d=u.value,m=!0,g=function(D){if(D.isBetterThanOrEqualTo(d))return m=!1,"break";d.isBetterThanOrEqualTo(D)&&(o=o.filter(function(C){return C!==D}))};try{for(var _=(i=void 0,Bh(o)),w=_.next();!w.done;w=_.next()){var A=w.value,S=g(A);if(S==="break")break}}catch(D){i={error:D}}finally{try{w&&!w.done&&(a=_.return)&&a.call(_)}finally{if(i)throw i.error}}m&&o.push(d)}}catch(D){t={error:D}}finally{try{u&&!u.done&&(r=c.return)&&r.call(c)}finally{if(t)throw t.error}}return o},n})(),xB=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};(function(){function n(){}return n.encodeBytes=function(e){return n.encode(e,n.DEFAULT_EC_PERCENT,n.DEFAULT_AZTEC_LAYERS)},n.encode=function(e,t,r){var i=new _B(e).encode(),a=it.truncDivision(i.getSize()*t,100)+11,o=i.getSize()+a,c,u,d,m,g;if(r!==n.DEFAULT_AZTEC_LAYERS){if(c=r<0,u=Math.abs(r),u>(c?n.MAX_NB_BITS_COMPACT:n.MAX_NB_BITS))throw new Be(pt.format("Illegal value %s for layers",r));d=n.totalBitsInLayer(u,c),m=n.WORD_SIZE[u];var _=d-d%m;if(g=n.stuffBits(i,m),g.getSize()+a>_)throw new Be("Data to large for user specified layer");if(c&&g.getSize()>m*64)throw new Be("Data to large for user specified layer")}else{m=0,g=null;for(var w=0;;w++){if(w>n.MAX_NB_BITS)throw new Be("Data too large for an Aztec code");if(c=w<=3,u=c?w+1:w,d=n.totalBitsInLayer(u,c),!(o>d)){(g==null||m!==n.WORD_SIZE[u])&&(m=n.WORD_SIZE[u],g=n.stuffBits(i,m));var _=d-d%m;if(!(c&&g.getSize()>m*64)&&g.getSize()+a<=_)break}}}var A=n.generateCheckWords(g,d,m),S=g.getSize()/m,D=n.generateModeMessage(c,u,S),C=(c?11:14)+u*4,k=new Int32Array(C),V;if(c){V=C;for(var w=0;w<k.length;w++)k[w]=w}else{V=C+1+2*it.truncDivision(it.truncDivision(C,2)-1,15);for(var z=it.truncDivision(C,2),q=it.truncDivision(V,2),w=0;w<z;w++){var $=w+it.truncDivision(w,15);k[z-w-1]=q-$-1,k[z+w]=q+$+1}}for(var M=new Ta(V),w=0,b=0;w<u;w++){for(var R=(u-w)*4+(c?9:12),I=0;I<R;I++)for(var O=I*2,L=0;L<2;L++)A.get(b+O+L)&&M.set(k[w*2+L],k[w*2+I]),A.get(b+R*2+O+L)&&M.set(k[w*2+I],k[C-1-w*2-L]),A.get(b+R*4+O+L)&&M.set(k[C-1-w*2-L],k[C-1-w*2-I]),A.get(b+R*6+O+L)&&M.set(k[C-1-w*2-I],k[w*2+L]);b+=R*8}if(n.drawModeMessage(M,c,V,D),c)n.drawBullsEye(M,it.truncDivision(V,2),5);else{n.drawBullsEye(M,it.truncDivision(V,2),7);for(var w=0,I=0;w<it.truncDivision(C,2)-1;w+=15,I+=16)for(var L=it.truncDivision(V,2)&1;L<V;L+=2)M.set(it.truncDivision(V,2)-I,L),M.set(it.truncDivision(V,2)+I,L),M.set(L,it.truncDivision(V,2)-I),M.set(L,it.truncDivision(V,2)+I)}var j=new sB;return j.setCompact(c),j.setSize(V),j.setLayers(u),j.setCodeWords(S),j.setMatrix(M),j},n.drawBullsEye=function(e,t,r){for(var i=0;i<r;i+=2)for(var a=t-i;a<=t+i;a++)e.set(a,t-i),e.set(a,t+i),e.set(t-i,a),e.set(t+i,a);e.set(t-r,t-r),e.set(t-r+1,t-r),e.set(t-r,t-r+1),e.set(t+r,t-r),e.set(t+r,t-r+1),e.set(t+r,t+r-1)},n.generateModeMessage=function(e,t,r){var i=new Yn;return e?(i.appendBits(t-1,2),i.appendBits(r-1,6),i=n.generateCheckWords(i,28,4)):(i.appendBits(t-1,5),i.appendBits(r-1,11),i=n.generateCheckWords(i,40,4)),i},n.drawModeMessage=function(e,t,r,i){var a=it.truncDivision(r,2);if(t)for(var o=0;o<7;o++){var c=a-3+o;i.get(o)&&e.set(c,a-5),i.get(o+7)&&e.set(a+5,c),i.get(20-o)&&e.set(c,a+5),i.get(27-o)&&e.set(a-5,c)}else for(var o=0;o<10;o++){var c=a-5+o+it.truncDivision(o,5);i.get(o)&&e.set(c,a-7),i.get(o+10)&&e.set(a+7,c),i.get(29-o)&&e.set(c,a+7),i.get(39-o)&&e.set(a-7,c)}},n.generateCheckWords=function(e,t,r){var i,a,o=e.getSize()/r,c=new z3(n.getGF(r)),u=it.truncDivision(t,r),d=n.bitsToWords(e,r,u);c.encode(d,u-o);var m=t%r,g=new Yn;g.appendBits(0,m);try{for(var _=xB(Array.from(d)),w=_.next();!w.done;w=_.next()){var A=w.value;g.appendBits(A,r)}}catch(S){i={error:S}}finally{try{w&&!w.done&&(a=_.return)&&a.call(_)}finally{if(i)throw i.error}}return g},n.bitsToWords=function(e,t,r){var i=new Int32Array(r),a,o;for(a=0,o=e.getSize()/t;a<o;a++){for(var c=0,u=0;u<t;u++)c|=e.get(a*t+u)?1<<t-u-1:0;i[a]=c}return i},n.getGF=function(e){switch(e){case 4:return kr.AZTEC_PARAM;case 6:return kr.AZTEC_DATA_6;case 8:return kr.AZTEC_DATA_8;case 10:return kr.AZTEC_DATA_10;case 12:return kr.AZTEC_DATA_12;default:throw new Be("Unsupported word size "+e)}},n.stuffBits=function(e,t){for(var r=new Yn,i=e.getSize(),a=(1<<t)-2,o=0;o<i;o+=t){for(var c=0,u=0;u<t;u++)(o+u>=i||e.get(o+u))&&(c|=1<<t-1-u);(c&a)===a?(r.appendBits(c&a,t),o--):(c&a)===0?(r.appendBits(c|1,t),o--):r.appendBits(c,t)}return r},n.totalBitsInLayer=function(e,t){return((t?88:112)+16*e)*e},n.DEFAULT_EC_PERCENT=33,n.DEFAULT_AZTEC_LAYERS=0,n.MAX_NB_BITS=32,n.MAX_NB_BITS_COMPACT=4,n.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]),n})();var wB=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),EB=(function(n){wB(e,n);function e(t){var r=n.call(this,t.width,t.height)||this;return r.canvas=t,r.tempCanvasElement=null,r.buffer=e.makeBufferFromCanvasImageData(t),r}return e.makeBufferFromCanvasImageData=function(t){var r;try{r=t.getContext("2d",{willReadFrequently:!0})}catch{r=t.getContext("2d")}if(!r)throw new Error("Couldn't get canvas context.");var i=r.getImageData(0,0,t.width,t.height);return e.toGrayscaleBuffer(i.data,t.width,t.height)},e.toGrayscaleBuffer=function(t,r,i){for(var a=new Uint8ClampedArray(r*i),o=0,c=0,u=t.length;o<u;o+=4,c++){var d=void 0,m=t[o+3];if(m===0)d=255;else{var g=t[o],_=t[o+1],w=t[o+2];d=306*g+601*_+117*w+512>>10}a[c]=d}return a},e.prototype.getRow=function(t,r){if(t<0||t>=this.getHeight())throw new Be("Requested row is outside the image: "+t);var i=this.getWidth(),a=t*i;return r===null?r=this.buffer.slice(a,a+i):(r.length<i&&(r=new Uint8ClampedArray(i)),r.set(this.buffer.slice(a,a+i))),r},e.prototype.getMatrix=function(){return this.buffer},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(t,r,i,a){return n.prototype.crop.call(this,t,r,i,a),this},e.prototype.isRotateSupported=function(){return!0},e.prototype.rotateCounterClockwise=function(){return this.rotate(-90),this},e.prototype.rotateCounterClockwise45=function(){return this.rotate(-45),this},e.prototype.invert=function(){return new xp(this)},e.prototype.getTempCanvasElement=function(){if(this.tempCanvasElement===null){var t=this.canvas.ownerDocument.createElement("canvas");t.width=this.canvas.width,t.height=this.canvas.height,this.tempCanvasElement=t}return this.tempCanvasElement},e.prototype.rotate=function(t){var r=this.getTempCanvasElement();if(!r)throw new Error("Could not create a Canvas element.");var i=t*e.DEGREE_TO_RADIANS,a=this.canvas.width,o=this.canvas.height,c=Math.ceil(Math.abs(Math.cos(i))*a+Math.abs(Math.sin(i))*o),u=Math.ceil(Math.abs(Math.sin(i))*a+Math.abs(Math.cos(i))*o);r.width=c,r.height=u;var d=r.getContext("2d");if(!d)throw new Error("Could not create a Canvas Context element.");return d.translate(c/2,u/2),d.rotate(i),d.drawImage(this.canvas,a/-2,o/-2),this.buffer=e.makeBufferFromCanvasImageData(r),this},e.DEGREE_TO_RADIANS=Math.PI/180,e})(Zf);function $3(){return typeof navigator<"u"}function AB(){return $3()&&!!navigator.mediaDevices}function bB(){return!!(AB()&&navigator.mediaDevices.enumerateDevices)}var pc=function(){return pc=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},pc.apply(this,arguments)},nn=function(n,e,t,r){function i(a){return a instanceof t?a:new t(function(o){o(a)})}return new(t||(t=Promise))(function(a,o){function c(m){try{d(r.next(m))}catch(g){o(g)}}function u(m){try{d(r.throw(m))}catch(g){o(g)}}function d(m){m.done?a(m.value):i(m.value).then(c,u)}d((r=r.apply(n,e||[])).next())})},rn=function(n,e){var t={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,i,a,o;return o={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function c(d){return function(m){return u([d,m])}}function u(d){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,i&&(a=d[0]&2?i.return:d[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,d[1])).done)return a;switch(i=0,a&&(d=[d[0]&2,a.value]),d[0]){case 0:case 1:a=d;break;case 4:return t.label++,{value:d[1],done:!1};case 5:t.label++,i=d[1],d=[0];continue;case 7:d=t.ops.pop(),t.trys.pop();continue;default:if(a=t.trys,!(a=a.length>0&&a[a.length-1])&&(d[0]===6||d[0]===2)){t=0;continue}if(d[0]===3&&(!a||d[1]>a[0]&&d[1]<a[3])){t.label=d[1];break}if(d[0]===6&&t.label<a[1]){t.label=a[1],a=d;break}if(a&&t.label<a[2]){t.label=a[2],t.ops.push(d);break}a[2]&&t.ops.pop(),t.trys.pop();continue}d=e.call(n,t)}catch(m){d=[6,m],i=0}finally{r=a=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},tg=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},SB={delayBetweenScanAttempts:500,delayBetweenScanSuccess:500,tryPlayVideoTimeout:5e3},$c=(function(){function n(e,t,r){t===void 0&&(t=new Map),r===void 0&&(r={}),this.reader=e,this.hints=t,this.options=pc(pc({},SB),r)}return Object.defineProperty(n.prototype,"possibleFormats",{set:function(e){this.hints.set(Gt.POSSIBLE_FORMATS,e)},enumerable:!1,configurable:!0}),n.addVideoSource=function(e,t){try{e.srcObject=t}catch{console.error("got interrupted by new loading request")}},n.mediaStreamSetTorch=function(e,t){return nn(this,void 0,void 0,function(){return rn(this,function(r){switch(r.label){case 0:return[4,e.applyConstraints({advanced:[{fillLightMode:t?"flash":"off",torch:!!t}]})];case 1:return r.sent(),[2]}})})},n.mediaStreamIsTorchCompatible=function(e){var t,r,i=e.getVideoTracks();try{for(var a=tg(i),o=a.next();!o.done;o=a.next()){var c=o.value;if(n.mediaStreamIsTorchCompatibleTrack(c))return!0}}catch(u){t={error:u}}finally{try{o&&!o.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}return!1},n.mediaStreamIsTorchCompatibleTrack=function(e){try{var t=e.getCapabilities();return"torch"in t}catch(r){return console.error(r),console.warn("Your browser may be not fully compatible with WebRTC and/or ImageCapture specs. Torch will not be available."),!1}},n.isVideoPlaying=function(e){return e.currentTime>0&&!e.paused&&e.readyState>2},n.getMediaElement=function(e,t){var r=document.getElementById(e);if(!r)throw new pn("element with id '".concat(e,"' not found"));if(r.nodeName.toLowerCase()!==t.toLowerCase())throw new pn("element with id '".concat(e,"' must be an ").concat(t," element"));return r},n.createVideoElement=function(e){if(e instanceof HTMLVideoElement)return e;if(typeof e=="string")return n.getMediaElement(e,"video");if(!e&&typeof document<"u"){var t=document.createElement("video");return t.width=200,t.height=200,t}throw new Error("Couldn't get videoElement from videoSource!")},n.prepareImageElement=function(e){if(e instanceof HTMLImageElement)return e;if(typeof e=="string")return n.getMediaElement(e,"img");if(typeof e>"u"){var t=document.createElement("img");return t.width=200,t.height=200,t}throw new Error("Couldn't get imageElement from imageSource!")},n.prepareVideoElement=function(e){var t=n.createVideoElement(e);return t.setAttribute("autoplay","true"),t.setAttribute("muted","true"),t.setAttribute("playsinline","true"),t},n.isImageLoaded=function(e){return!(!e.complete||e.naturalWidth===0)},n.createBinaryBitmapFromCanvas=function(e){var t=new EB(e),r=new R3(t);return new N3(r)},n.drawImageOnCanvas=function(e,t){e.drawImage(t,0,0)},n.getMediaElementDimensions=function(e){if(e instanceof HTMLVideoElement)return{height:e.videoHeight,width:e.videoWidth};if(e instanceof HTMLImageElement)return{height:e.naturalHeight||e.height,width:e.naturalWidth||e.width};throw new Error("Couldn't find the Source's dimensions!")},n.createCaptureCanvas=function(e){if(!e)throw new pn("Cannot create a capture canvas without a media element.");if(typeof document>"u")throw new Error(`The page "Document" is undefined, make sure you're running in a browser.`);var t=document.createElement("canvas"),r=n.getMediaElementDimensions(e),i=r.width,a=r.height;return t.style.width=i+"px",t.style.height=a+"px",t.width=i,t.height=a,t},n.tryPlayVideo=function(e){return nn(this,void 0,void 0,function(){var t;return rn(this,function(r){switch(r.label){case 0:if(e?.ended)return console.error("Trying to play video that has ended."),[2,!1];if(n.isVideoPlaying(e))return console.warn("Trying to play video that is already playing."),[2,!0];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,e.play()];case 2:return r.sent(),[2,!0];case 3:return t=r.sent(),console.warn("It was not possible to play the video.",t),[2,!1];case 4:return[2]}})})},n.createCanvasFromMediaElement=function(e){var t=n.createCaptureCanvas(e),r=t.getContext("2d");if(!r)throw new Error("Couldn't find Canvas 2D Context.");return n.drawImageOnCanvas(r,e),t},n.createBinaryBitmapFromMediaElem=function(e){var t=n.createCanvasFromMediaElement(e);return n.createBinaryBitmapFromCanvas(t)},n.destroyImageElement=function(e){e.src="",e.removeAttribute("src"),e=void 0},n.listVideoInputDevices=function(){return nn(this,void 0,void 0,function(){var e,t,r,i,a,o,c,u,d,m,g,_;return rn(this,function(w){switch(w.label){case 0:if(!$3())throw new Error("Can't enumerate devices, navigator is not present.");if(!bB())throw new Error("Can't enumerate devices, method not supported.");return[4,navigator.mediaDevices.enumerateDevices()];case 1:e=w.sent(),t=[];try{for(r=tg(e),i=r.next();!i.done;i=r.next())a=i.value,o=a.kind==="video"?"videoinput":a.kind,o==="videoinput"&&(c=a.deviceId||a.id,u=a.label||"Video device ".concat(t.length+1),d=a.groupId,m={deviceId:c,label:u,kind:o,groupId:d},t.push(m))}catch(A){g={error:A}}finally{try{i&&!i.done&&(_=r.return)&&_.call(r)}finally{if(g)throw g.error}}return[2,t]}})})},n.findDeviceById=function(e){return nn(this,void 0,void 0,function(){var t;return rn(this,function(r){switch(r.label){case 0:return[4,n.listVideoInputDevices()];case 1:return t=r.sent(),t?[2,t.find(function(i){return i.deviceId===e})]:[2]}})})},n.cleanVideoSource=function(e){if(e){try{e.srcObject=null}catch{e.src=""}e&&e.removeAttribute("src")}},n.releaseAllStreams=function(){n.streamTracker.length!==0&&n.streamTracker.forEach(function(e){e.getTracks().forEach(function(t){return t.stop()})}),n.streamTracker=[]},n.playVideoOnLoadAsync=function(e,t){return nn(this,void 0,void 0,function(){var r;return rn(this,function(i){switch(i.label){case 0:return[4,n.tryPlayVideo(e)];case 1:return r=i.sent(),r?[2,!0]:[2,new Promise(function(a,o){var c=setTimeout(function(){n.isVideoPlaying(e)||(o(!1),e.removeEventListener("canplay",u))},t),u=function(){n.tryPlayVideo(e).then(function(d){clearTimeout(c),e.removeEventListener("canplay",u),a(d)})};e.addEventListener("canplay",u)})]}})})},n.attachStreamToVideo=function(e,t,r){return r===void 0&&(r=5e3),nn(this,void 0,void 0,function(){var i;return rn(this,function(a){switch(a.label){case 0:return i=n.prepareVideoElement(t),n.addVideoSource(i,e),[4,n.playVideoOnLoadAsync(i,r)];case 1:return a.sent(),[2,i]}})})},n._waitImageLoad=function(e){return new Promise(function(t,r){var i=1e4,a=setTimeout(function(){n.isImageLoaded(e)||(e.removeEventListener("load",o),r())},i),o=function(){clearTimeout(a),e.removeEventListener("load",o),t()};e.addEventListener("load",o)})},n.checkCallbackFnOrThrow=function(e){if(!e)throw new pn("`callbackFn` is a required parameter, you cannot capture results without it.")},n.disposeMediaStream=function(e){e.getVideoTracks().forEach(function(t){return t.stop()}),e=void 0},n.prototype.decode=function(e){var t=n.createCanvasFromMediaElement(e);return this.decodeFromCanvas(t)},n.prototype.decodeBitmap=function(e){return this.reader.decode(e,this.hints)},n.prototype.decodeFromCanvas=function(e){var t=n.createBinaryBitmapFromCanvas(e);return this.decodeBitmap(t)},n.prototype.decodeFromImageElement=function(e){return nn(this,void 0,void 0,function(){var t;return rn(this,function(r){switch(r.label){case 0:if(!e)throw new pn("An image element must be provided.");return t=n.prepareImageElement(e),[4,this._decodeOnLoadImage(t)];case 1:return[2,r.sent()]}})})},n.prototype.decodeFromImageUrl=function(e){return nn(this,void 0,void 0,function(){var t;return rn(this,function(r){switch(r.label){case 0:if(!e)throw new pn("An URL must be provided.");t=n.prepareImageElement(),t.src=e,r.label=1;case 1:return r.trys.push([1,,3,4]),[4,this.decodeFromImageElement(t)];case 2:return[2,r.sent()];case 3:return n.destroyImageElement(t),[7];case 4:return[2]}})})},n.prototype.decodeFromConstraints=function(e,t,r){return nn(this,void 0,void 0,function(){var i,a;return rn(this,function(o){switch(o.label){case 0:return n.checkCallbackFnOrThrow(r),[4,this.getUserMedia(e)];case 1:i=o.sent(),o.label=2;case 2:return o.trys.push([2,4,,5]),[4,this.decodeFromStream(i,t,r)];case 3:return[2,o.sent()];case 4:throw a=o.sent(),n.disposeMediaStream(i),a;case 5:return[2]}})})},n.prototype.decodeFromStream=function(e,t,r){return nn(this,void 0,void 0,function(){var i,a,o,c,u,d,m,g,_,w=this;return rn(this,function(A){switch(A.label){case 0:return n.checkCallbackFnOrThrow(r),i=this.options.tryPlayVideoTimeout,[4,n.attachStreamToVideo(e,t,i)];case 1:return a=A.sent(),o=function(){n.disposeMediaStream(e),n.cleanVideoSource(a)},c=this.scan(a,r,o),u=e.getVideoTracks(),d=pc(pc({},c),{stop:function(){c.stop()},streamVideoConstraintsApply:function(S,D){return nn(this,void 0,void 0,function(){var C,k,V,z,q,$,M;return rn(this,function(b){switch(b.label){case 0:C=D?u.filter(D):u,b.label=1;case 1:b.trys.push([1,6,7,8]),k=tg(C),V=k.next(),b.label=2;case 2:return V.done?[3,5]:(z=V.value,[4,z.applyConstraints(S)]);case 3:b.sent(),b.label=4;case 4:return V=k.next(),[3,2];case 5:return[3,8];case 6:return q=b.sent(),$={error:q},[3,8];case 7:try{V&&!V.done&&(M=k.return)&&M.call(k)}finally{if($)throw $.error}return[7];case 8:return[2]}})})},streamVideoConstraintsGet:function(S){return u.find(S).getConstraints()},streamVideoSettingsGet:function(S){return u.find(S).getSettings()},streamVideoCapabilitiesGet:function(S){return u.find(S).getCapabilities()}}),m=n.mediaStreamIsTorchCompatible(e),m&&(g=u?.find(function(S){return n.mediaStreamIsTorchCompatibleTrack(S)}),_=function(S){return nn(w,void 0,void 0,function(){return rn(this,function(D){switch(D.label){case 0:return[4,n.mediaStreamSetTorch(g,S)];case 1:return D.sent(),[2]}})})},d.switchTorch=_,d.stop=function(){return nn(w,void 0,void 0,function(){return rn(this,function(S){switch(S.label){case 0:return c.stop(),[4,_(!1)];case 1:return S.sent(),[2]}})})}),[2,d]}})})},n.prototype.decodeFromVideoDevice=function(e,t,r){return nn(this,void 0,void 0,function(){var i,a;return rn(this,function(o){switch(o.label){case 0:return n.checkCallbackFnOrThrow(r),e?i={deviceId:{exact:e}}:i={facingMode:"environment"},a={video:i},[4,this.decodeFromConstraints(a,t,r)];case 1:return[2,o.sent()]}})})},n.prototype.decodeFromVideoElement=function(e,t){return nn(this,void 0,void 0,function(){var r,i;return rn(this,function(a){switch(a.label){case 0:if(n.checkCallbackFnOrThrow(t),!e)throw new pn("A video element must be provided.");return r=n.prepareVideoElement(e),i=this.options.tryPlayVideoTimeout,[4,n.playVideoOnLoadAsync(r,i)];case 1:return a.sent(),[2,this.scan(r,t)]}})})},n.prototype.decodeFromVideoUrl=function(e,t){return nn(this,void 0,void 0,function(){var r,i,a,o;return rn(this,function(c){switch(c.label){case 0:if(n.checkCallbackFnOrThrow(t),!e)throw new pn("An URL must be provided.");return r=n.prepareVideoElement(),r.src=e,i=function(){n.cleanVideoSource(r)},a=this.options.tryPlayVideoTimeout,[4,n.playVideoOnLoadAsync(r,a)];case 1:return c.sent(),o=this.scan(r,t,i),[2,o]}})})},n.prototype.decodeOnceFromConstraints=function(e,t){return nn(this,void 0,void 0,function(){var r;return rn(this,function(i){switch(i.label){case 0:return[4,this.getUserMedia(e)];case 1:return r=i.sent(),[4,this.decodeOnceFromStream(r,t)];case 2:return[2,i.sent()]}})})},n.prototype.decodeOnceFromStream=function(e,t){return nn(this,void 0,void 0,function(){var r,i,a;return rn(this,function(o){switch(o.label){case 0:return r=!!t,[4,n.attachStreamToVideo(e,t)];case 1:i=o.sent(),o.label=2;case 2:return o.trys.push([2,,4,5]),[4,this.scanOneResult(i)];case 3:return a=o.sent(),[2,a];case 4:return r||n.cleanVideoSource(i),[7];case 5:return[2]}})})},n.prototype.decodeOnceFromVideoDevice=function(e,t){return nn(this,void 0,void 0,function(){var r,i;return rn(this,function(a){switch(a.label){case 0:return e?r={deviceId:{exact:e}}:r={facingMode:"environment"},i={video:r},[4,this.decodeOnceFromConstraints(i,t)];case 1:return[2,a.sent()]}})})},n.prototype.decodeOnceFromVideoElement=function(e){return nn(this,void 0,void 0,function(){var t,r;return rn(this,function(i){switch(i.label){case 0:if(!e)throw new pn("A video element must be provided.");return t=n.prepareVideoElement(e),r=this.options.tryPlayVideoTimeout,[4,n.playVideoOnLoadAsync(t,r)];case 1:return i.sent(),[4,this.scanOneResult(t)];case 2:return[2,i.sent()]}})})},n.prototype.decodeOnceFromVideoUrl=function(e){return nn(this,void 0,void 0,function(){var t,r;return rn(this,function(i){switch(i.label){case 0:if(!e)throw new pn("An URL must be provided.");t=n.prepareVideoElement(),t.src=e,r=this.decodeOnceFromVideoElement(t),i.label=1;case 1:return i.trys.push([1,,3,4]),[4,r];case 2:return[2,i.sent()];case 3:return n.cleanVideoSource(t),[7];case 4:return[2]}})})},n.prototype.scanOneResult=function(e,t,r,i){var a=this;return t===void 0&&(t=!0),r===void 0&&(r=!0),i===void 0&&(i=!0),new Promise(function(o,c){a.scan(e,function(u,d,m){if(u){o(u),m.stop();return}if(d){if(d instanceof oe&&t||d instanceof Cn&&r||d instanceof _e&&i)return;m.stop(),c(d)}})})},n.prototype.scan=function(e,t,r){var i=this;n.checkCallbackFnOrThrow(t);var a=n.createCaptureCanvas(e),o;try{o=a.getContext("2d",{willReadFrequently:!0})}catch{o=a.getContext("2d")}if(!o)throw new Error("Couldn't create canvas for visual element scan.");var c=function(){o=void 0,a=void 0},u=!1,d,m=function(){u=!0,clearTimeout(d),c(),r&&r()},g={stop:m},_=function(){if(!u)try{n.drawImageOnCanvas(o,e);var w=i.decodeFromCanvas(a);t(w,void 0,g),d=setTimeout(_,i.options.delayBetweenScanSuccess)}catch(C){t(void 0,C,g);var A=C instanceof Cn,S=C instanceof _e,D=C instanceof oe;if(A||S||D){d=setTimeout(_,i.options.delayBetweenScanAttempts);return}c(),r&&r(C)}};return _(),g},n.prototype._decodeOnLoadImage=function(e){return nn(this,void 0,void 0,function(){var t;return rn(this,function(r){switch(r.label){case 0:return t=n.isImageLoaded(e),t?[3,2]:[4,n._waitImageLoad(e)];case 1:r.sent(),r.label=2;case 2:return[2,this.decode(e)]}})})},n.prototype.getUserMedia=function(e){return nn(this,void 0,void 0,function(){var t;return rn(this,function(r){switch(r.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return t=r.sent(),n.streamTracker.push(t),[2,t]}})})},n.streamTracker=[],n})(),CB=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})();(function(n){CB(e,n);function e(t,r){return n.call(this,new O0,t,r)||this}return e})($c);var TB=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})();(function(n){TB(e,n);function e(t,r){return n.call(this,new dc(t),t,r)||this}return e})($c);var IB=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})();(function(n){IB(e,n);function e(t,r){return n.call(this,new M0,t,r)||this}return e})($c);var NB=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),RB=(function(n){NB(e,n);function e(t,r){var i=this,a=new U3;return a.setHints(t),i=n.call(this,a,t,r)||this,i.reader=a,i}return Object.defineProperty(e.prototype,"possibleFormats",{set:function(t){this.hints.set(Gt.POSSIBLE_FORMATS,t),this.reader.setHints(this.hints)},enumerable:!1,configurable:!0}),e.prototype.decodeBitmap=function(t){return this.reader.decodeWithState(t)},e.prototype.setHints=function(t){this.hints=t,this.reader.setHints(this.hints)},e})($c),OB=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})();(function(n){OB(e,n);function e(t,r){return n.call(this,new k0,t,r)||this}return e})($c);var DB=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),MB=(function(n){DB(e,n);function e(t,r){return n.call(this,new P0,t,r)||this}return e})($c);const Ap=[{value:"open",label:""},{value:"middle",label:""},{value:"close",label:""}],PB=Ap.reduce((n,e)=>(n[e.value]=e.label,n),{}),ff=50,mc=100,mi=50,kB="admin-cash-audit-vouchers-",jB="admin-cash-audit-voucher-usage-",LB="admin-cash-audit-janken-adjustment-",wv="admin-cash-audit:voucher-usage-updated",Ev="admin-cash-audit:janken-adjustment-updated",n0={open:0,middle:0,close:0},L0={plus:mi,minus:-mi};function Zy(n){return n==="plus"||n==="minus"}function Jy(n){const e=n.getFullYear(),t=String(n.getMonth()+1).padStart(2,"0"),r=String(n.getDate()).padStart(2,"0");return`${e}-${t}-${r}`}function es(n){const e=Number(n);return!Number.isFinite(e)||e<=0?0:Math.floor(e)}function X3(n){return`${kB}${Jy(n??new Date)}`}function B0(n){return`${jB}${Jy(n??new Date)}`}function V0(n){return`${LB}${Jy(n??new Date)}`}function e2(n){if(typeof window>"u")return null;try{return window.localStorage.getItem(n)}catch(e){return console.warn("",e),null}}function kf(n,e){if(!(typeof window>"u"))try{e===null?window.localStorage.removeItem(n):window.localStorage.setItem(n,e)}catch(t){console.warn("",t)}}function BB(n){const e=e2(X3(n));if(!e)return{...n0};try{const t=JSON.parse(e);return Ap.reduce((r,i)=>(r[i.value]=es(t?.[i.value]),r),{...n0})}catch(t){return console.warn("",t),{...n0}}}function ub(n,e){const t=Ap.reduce((r,i)=>(r[i.value]=es(n?.[i.value]),r),{...n0});kf(X3(e),JSON.stringify(t))}function VB(n){return typeof n=="object"&&n!==null&&"count50"in n&&"count100"in n?{count50:es(n.count50),count100:es(n.count100)}:{count50:0,count100:es(n)}}function Xc(n){const e=e2(B0(n));if(!e)return{};try{const r=JSON.parse(e)?.entries??{};return Object.entries(r).reduce((i,[a,o])=>{const c=VB(o);return(c.count50>0||c.count100>0)&&(i[a]=c),i},{})}catch(t){return console.warn("",t),{}}}function Av(n,e){const t=Object.entries(n).reduce((r,[i,a])=>{const o={count50:es(a.count50),count100:es(a.count100)};return(o.count50>0||o.count100>0)&&(r[i]=o),r},{});if(Object.keys(t).length===0)kf(B0(e),null);else{const r={entries:t};kf(B0(e),JSON.stringify(r))}}function bp(n){const e=e2(V0(n));if(!e)return{};try{const r=JSON.parse(e)?.entries??{};return Object.entries(r).reduce((i,[a,o])=>(Zy(o)&&(i[a]=o),i),{})}catch(t){return console.warn("",t),{}}}function bv(n,e){const t=Object.entries(n).reduce((r,[i,a])=>(Zy(a)&&(r[i]=a),r),{});if(Object.keys(t).length===0)kf(V0(e),null);else{const r={entries:t};kf(V0(e),JSON.stringify(r))}}function Sv(){typeof window>"u"||window.dispatchEvent(new CustomEvent(wv))}function Cv(){typeof window>"u"||window.dispatchEvent(new CustomEvent(Ev))}function fb(n){const e=Xc(n);return Object.values(e).reduce((t,r)=>t+r.count50+r.count100,0)}function db(n){const e=Xc(n);return Object.values(e).reduce((t,r)=>t+r.count50,0)}function hb(n){const e=Xc(n);return Object.values(e).reduce((t,r)=>t+r.count100,0)}function pb(n,e){return n?Xc(e)[n]??{count50:0,count100:0}:{count50:0,count100:0}}function FB(n,e,t){if(!n)return;const r={count50:es(e.count50),count100:es(e.count100)},i=Xc(t);if(r.count50===0&&r.count100===0){n in i&&(delete i[n],Av(i,t),Sv());return}const a=i[n];a&&a.count50===r.count50&&a.count100===r.count100||(i[n]=r,Av(i,t),Sv())}function mb(n,e){if(!n)return;const t=Xc(e);n in t&&(delete t[n],Av(t,e),Sv())}function UB(n){return n==="plus"?L0.plus:n==="minus"?L0.minus:0}function gb(n,e){return n?bp(e)[n]??"none":"none"}function zB(n,e,t){if(!n)return;const r=bp(t);if(!Zy(e)){n in r&&(delete r[n],bv(r,t),Cv());return}r[n]!==e&&(r[n]=e,bv(r,t),Cv())}function vb(n,e){if(!n)return;const t=bp(e);n in t&&(delete t[n],bv(t,e),Cv())}function yb(n){const e=bp(n);return Object.values(e).reduce((t,r)=>(r==="plus"?(t.totalAmount+=L0.plus,t.plusCount+=1):r==="minus"&&(t.totalAmount+=L0.minus,t.minusCount+=1),t),{totalAmount:0,plusCount:0,minusCount:0})}function HB(n){return V0(n)}function GB(n){return B0(n)}function pi(n){return`${n.toLocaleString()}`}function ng(n){const e=pi(Math.abs(n));return n>0?`+${e}`:n<0?`-${e}`:e}const _b=["drink_hojicha","drink_cocoa","drink_coffee","drink_milkcoffee"],qB=[{value:"none",label:"0",description:"",delta:0,tone:"neutral"},{value:"plus",label:`+${pi(mi)}`,description:"50",delta:mi,tone:"positive"},{value:"minus",label:`-${pi(mi)}`,description:"50",delta:-mi,tone:"negative"}],$B={:"",:"",:""},XB={:"warning",:"success",:"neutral"};function YB(){const n=P.useMemo(()=>{const ae=new Date;ae.setHours(0,0,0,0);const Ae=new Date(ae);return Ae.setDate(Ae.getDate()+1),{start:ae,end:Ae}},[]),{orders:e,loading:t,error:r}=Gc(n),{language:i}=Yi(),a=P.useMemo(()=>e.map(_p),[e]),[o,c]=P.useState(""),[u,d]=P.useState(null),[m,g]=P.useState(!1),[_,w]=P.useState(!1),[A,S]=P.useState(null),[D,C]=P.useState(null),[k,V]=P.useState({}),[z,q]=P.useState(null),[$,M]=P.useState(null),[b,R]=P.useState({count50:0,count100:0}),[I,O]=P.useState("none"),L=P.useRef(null),j=P.useRef(null),W=P.useRef({}),ge=P.useMemo(()=>a.filter(ae=>ae.payment==="").sort((ae,Ae)=>{const je=ae.createdAtDate?.getTime()??0,fe=Ae.createdAtDate?.getTime()??0;return je-fe}),[a]),H=P.useMemo(()=>{if(!o.trim())return ge;const ae=o.trim().toLowerCase();return ge.filter(Ae=>`${Ae.ticket} ${Ae.id} ${Ae.callNumber} ${Ae.items} ${ki(Ae.id)}`.toLowerCase().includes(ae))},[o,ge]),G=P.useMemo(()=>{const ae=H.find(je=>je.id===u);if(ae)return ae;const Ae=a.find(je=>je.id===u);return Ae||(H[0]??null)},[H,u,a]),le=P.useMemo(()=>u?[...k[u]??[]].reverse():[],[k,u]),ve=P.useMemo(()=>G?Pf(G):[],[G]),He=P.useMemo(()=>G?ki(G.id):"----",[G]);P.useEffect(()=>{!G&&H.length>0&&d(H[0].id)},[H,G]),P.useEffect(()=>{if(!G)return;const ae=W.current[G.id];ae&&ae.scrollIntoView({block:"nearest",behavior:"smooth"})},[G]);const Y=P.useMemo(()=>G?Math.floor(G.total/ff):0,[G]),ne=P.useMemo(()=>G?Math.floor(G.total/mc):0,[G]);P.useEffect(()=>{if(!G){R({count50:0,count100:0});return}const ae=pb(G.id),Ae={count50:Math.min(Math.max(0,ae.count50),Y),count100:Math.min(Math.max(0,ae.count100),ne)};R(Ae)},[G,Y,ne]),P.useEffect(()=>{if(!G){O("none");return}const ae=G.raw.items??{};if(!_b.some(fe=>(ae[fe]??0)>0)){O("none");return}const je=gb(G.id);O(je)},[G]);const me=P.useMemo(()=>b.count50*ff+b.count100*mc,[b]),we=P.useMemo(()=>b.count50+b.count100,[b]),be=P.useMemo(()=>{if(!G)return!1;const ae=G.raw.items??{};return _b.some(Ae=>(ae[Ae]??0)>0)},[G]),ye=P.useMemo(()=>be?UB(I):0,[I,be]),Te=P.useMemo(()=>{if(!G)return 0;const ae=G.total,Ae=be?ae+ye:ae;return Ae<0?0:Ae},[G,be,ye]),Ye=P.useMemo(()=>Math.max(Te-me,0),[Te,me]),Re=be?"":"",zt=G?.payment!=="",Ze=P.useCallback(ae=>{R(Ae=>{const je=Ae.count50+ae,fe=Math.min(Math.max(0,je),Y);return{...Ae,count50:fe}})},[Y]),In=P.useCallback(ae=>{R(Ae=>{const je=Ae.count100+ae,fe=Math.min(Math.max(0,je),ne);return{...Ae,count100:fe}})},[ne]),Kn=P.useCallback(ae=>{const Ae=ae.currentTarget.value;O(Ae)},[]),Et=P.useMemo(()=>a.filter(ae=>ae.payment==="").sort((ae,Ae)=>{const je=ae.createdAtDate?.getTime()??0;return(Ae.createdAtDate?.getTime()??0)-je}).slice(0,6),[a]),Ln=P.useMemo(()=>({waiting:ge.length,totalDue:ge.reduce((ae,Ae)=>ae+Ae.total,0),settledToday:Et.length}),[ge,Et]),cr=P.useCallback(ae=>ae?(d(ae.id),c(""),!0):!1,[c,d]),ur=P.useCallback((ae,Ae)=>{V(je=>{const fe=[...je[ae]??[],{status:Ae,time:new Date().toISOString()}];return{...je,[ae]:fe}})},[]),Bn=P.useCallback(async(ae,Ae)=>{q(ae.id),M(null);try{await ya(ae.id,ae.ticket,{payment:Ae,progress:ae.progress}),ur(ae.id,Ae)}catch(je){throw console.error("",je),M(""),je}finally{q(null)}},[ur]),gt=P.useCallback(async ae=>{try{await Bn(ae,"");const Ae=G?.id===ae.id?b:pb(ae.id),je=Math.max(0,Math.floor(ae.total/ff)),fe=Math.max(0,Math.floor(ae.total/mc)),Pe={count50:Math.min(Math.max(0,Ae.count50),je),count100:Math.min(Math.max(0,Ae.count100),fe)};FB(ae.id,Pe);const Fe=G?.id===ae.id?be?I:"none":gb(ae.id);zB(ae.id,Fe),u===ae.id&&(S(""),O("none"),d(null))}catch{}},[I,Bn,u,G?.id,be,b]),Pt=P.useCallback(async ae=>{const Ae=` ${ae.callNumber}`;if(window.confirm(`${Ae} 
`))try{await Bn(ae,""),mb(ae.id),vb(ae.id),u===ae.id&&(R({count50:0,count100:0}),S(""),O("none"),d(null))}catch{}},[Bn,u]),Wn=P.useCallback(async ae=>{try{const Ae=ae.progress===""?"":ae.progress;q(ae.id),M(null);try{await ya(ae.id,ae.ticket,{payment:"",progress:Ae}),ur(ae.id,"")}catch(je){throw console.error("",je),M(""),je}finally{q(null)}mb(ae.id),vb(ae.id),u===ae.id&&(R({count50:0,count100:0}),O("none")),d(ae.id),S(ae.progress===""?"":"")}catch{}},[u,ur]),cn=P.useCallback(()=>{if(j.current?.stop(),j.current=null,L.current){const ae=L.current.srcObject;ae instanceof MediaStream&&ae.getTracks().forEach(Ae=>Ae.stop()),L.current.srcObject=null}w(!1)},[j,w,L]);P.useEffect(()=>()=>cn(),[cn]);const _r=P.useCallback(ae=>{const Ae=ae.trim();if(!Ae)return null;const je=Ae.toLowerCase(),fe=je.match(/t[-_ ]?(\w{3,})/),Pe=je.match(/#(\d{3,})/),Fe=je.match(/(?:no\.?|call||#)?\s*(\d{1,4})$/),ze=a.find(De=>ki(De.id).toLowerCase()===je);if(ze)return ze;const Je=fe?`T-${fe[1]}`:null,rt=Pe?`#${Pe[1]}`:null,Ce=Fe?Number.parseInt(Fe[1],10):null;if(Je){const De=a.find(tt=>tt.ticket.toLowerCase()===Je.toLowerCase());if(De)return De}if(rt){const De=a.find(tt=>tt.id.toLowerCase()===rt.toLowerCase());if(De)return De}if(Ce){const De=a.find(tt=>tt.callNumber===Ce);if(De)return De}return a.find(De=>De.ticket.toLowerCase()===je)??a.find(De=>De.id.toLowerCase()===je)??a.find(De=>De.callNumber.toString()===je)??null},[a]),tn=P.useCallback(ae=>{const Ae=_r(ae);Ae?(cr(Ae),S(` ${Ae.ticket}  ${Ae.callNumber} ${ki(Ae.id)}`),C(null),g(!1)):(S(`QR${ae}`),C(""))},[_r,cr]);P.useEffect(()=>{if(!m){cn();return}let ae=!1;return(async()=>{if(L.current){w(!0),C(null),S("");try{const fe=await new MB(void 0,{delayBetweenScanAttempts:200}).decodeFromVideoDevice(void 0,L.current,(Pe,Fe,ze)=>{if(ae){ze.stop();return}Pe?(tn(Pe.getText()),ze.stop()):Fe&&!(Fe instanceof oe)&&C(Fe.message)});if(ae){fe.stop();return}j.current=fe,S("QR")}catch(je){if(ae)return;console.error(je),C(je instanceof Error?je.message:""),g(!1)}}})(),()=>{ae=!0,cn()}},[tn,m,cn]);const fr=P.useCallback(()=>{C(null),S(null),g(!0)},[]),Jr=P.useCallback(()=>{g(!1),cn()},[cn]);return t?p.jsx("p",{children:""}):p.jsxs("div",{className:"admin-payment-page",children:[m&&p.jsx("div",{className:"admin-payment-scanner-overlay",role:"dialog","aria-modal":"true",children:p.jsxs("div",{className:"admin-payment-scanner-dialog",children:[p.jsxs("header",{className:"admin-payment-scanner-header",children:[p.jsx("h2",{children:"QR"}),p.jsx("button",{type:"button",className:"admin-payment-scanner-close",onClick:Jr,children:""})]}),p.jsx("video",{ref:L,className:"admin-payment-scanner-video",autoPlay:!0,muted:!0,playsInline:!0}),p.jsxs("footer",{className:"admin-payment-scanner-footer",children:[p.jsx("span",{className:"admin-payment-scan-status",children:_?A??"":A??""}),p.jsxs("div",{className:"admin-payment-scanner-actions",children:[D&&p.jsx("p",{className:"admin-payment-scan-error",role:"alert",children:D}),p.jsx("button",{type:"button",className:"admin-payment-stop",onClick:Jr,children:""})]})]})]})}),p.jsxs("section",{className:"admin-payment-summary","aria-label":"",children:[p.jsxs("div",{className:"admin-payment-summary-card",children:[p.jsx("p",{className:"admin-payment-summary-title",children:""}),p.jsxs("p",{className:"admin-payment-summary-value",children:[Ln.waiting,""]})]}),p.jsxs("div",{className:"admin-payment-summary-card",children:[p.jsx("p",{className:"admin-payment-summary-title",children:""}),p.jsx("p",{className:"admin-payment-summary-value",children:pi(Ln.totalDue)})]}),p.jsxs("div",{className:"admin-payment-summary-card",children:[p.jsx("p",{className:"admin-payment-summary-title",children:""}),p.jsxs("p",{className:"admin-payment-summary-value",children:[Ln.settledToday,""]})]})]}),r&&p.jsx("p",{className:"admin-error",role:"alert",children:""}),$&&p.jsx("p",{className:"admin-error",role:"alert",children:$}),p.jsxs("div",{className:"admin-payment-shell",children:[p.jsxs("aside",{className:"admin-payment-sidebar","aria-label":"",children:[p.jsxs("div",{className:"admin-payment-sidebar-header",children:[p.jsx("h2",{children:""}),p.jsxs("div",{className:"field",children:[p.jsx("label",{htmlFor:"payment-search",children:""}),p.jsx("input",{id:"payment-search",type:"search",placeholder:"",value:o,onChange:ae=>c(ae.target.value)})]}),p.jsx("button",{type:"button",className:"admin-payment-qr-button",onClick:fr,children:"QR"})]}),A&&!m&&p.jsx("p",{className:"admin-payment-scan-message",children:A}),D&&!m&&p.jsx("p",{className:"admin-payment-scan-error",role:"alert",children:D}),p.jsxs("div",{className:"admin-payment-list",children:[H.map(ae=>p.jsx("button",{type:"button",className:`admin-payment-list-item${G?.id===ae.id?" active":""}`,onClick:()=>d(ae.id),ref:Ae=>{W.current[ae.id]=Ae},"aria-pressed":G?.id===ae.id,children:p.jsx("p",{className:"admin-payment-ticket","aria-label":` ${ae.callNumber}`,children:ae.callNumber})},ae.id)),H.length===0&&p.jsx("p",{className:"admin-payment-empty",children:""})]})]}),p.jsxs("section",{className:"admin-payment-main","aria-live":"polite",children:[G?p.jsxs("article",{className:"admin-payment-detail-card",children:[p.jsxs("div",{className:"admin-payment-detail-header",children:[p.jsxs("div",{className:"admin-payment-identifiers",children:[p.jsx("p",{className:"admin-payment-ticket large","aria-label":` ${G.callNumber}`,children:G.callNumber}),p.jsxs("p",{className:"admin-payment-order",children:[" ",He]}),p.jsxs("p",{className:"admin-payment-order subtle",children:[" ",G.id]}),p.jsxs("p",{className:"admin-payment-order subtle",children:[" ",G.ticket]})]}),p.jsxs("div",{className:"admin-payment-total-box",children:[p.jsxs("section",{className:"admin-payment-breakdown-panel","aria-label":"",children:[p.jsxs("div",{className:"admin-payment-breakdown-row prominent",children:[p.jsx("p",{className:"admin-payment-breakdown-label",children:""}),p.jsx("p",{className:"admin-payment-cash-due","aria-live":"polite",children:pi(Ye)})]}),p.jsxs("div",{className:"admin-payment-breakdown-row",children:[p.jsx("p",{className:"admin-payment-breakdown-label",children:"50"}),p.jsxs("div",{className:"admin-payment-voucher-control","aria-label":"50",children:[p.jsx("button",{type:"button",className:"admin-payment-adjust",onClick:()=>Ze(-1),disabled:b.count50===0,"aria-label":"501",children:"-"}),p.jsxs("span",{className:"admin-payment-voucher-count","aria-live":"polite",children:[b.count50," ",pi(b.count50*ff),""]}),p.jsx("button",{type:"button",className:"admin-payment-adjust",onClick:()=>Ze(1),disabled:b.count50>=Y,"aria-label":"501",children:"+"})]})]}),p.jsxs("div",{className:"admin-payment-breakdown-row",children:[p.jsx("p",{className:"admin-payment-breakdown-label",children:"100"}),p.jsxs("div",{className:"admin-payment-voucher-control","aria-label":"100",children:[p.jsx("button",{type:"button",className:"admin-payment-adjust",onClick:()=>In(-1),disabled:b.count100===0,"aria-label":"1001",children:"-"}),p.jsxs("span",{className:"admin-payment-voucher-count","aria-live":"polite",children:[b.count100," ",pi(b.count100*mc),""]}),p.jsx("button",{type:"button",className:"admin-payment-adjust",onClick:()=>In(1),disabled:b.count100>=ne,"aria-label":"1001",children:"+"})]})]}),be&&p.jsxs("div",{className:"admin-payment-breakdown-row",children:[p.jsx("p",{className:"admin-payment-breakdown-label",children:""}),p.jsx("p",{className:`admin-payment-janken-value${ye>0?" is-plus":ye<0?" is-minus":""}`,children:ng(ye)})]}),p.jsx("hr",{className:"admin-payment-breakdown-divider"}),p.jsxs("p",{className:"admin-payment-breakdown-total","aria-live":"polite",children:[Re," ",pi(Te)]}),be&&p.jsxs("p",{className:"admin-payment-breakdown-note",children:[" ",pi(G.total)]})]}),be&&p.jsxs("section",{className:"admin-payment-janken-panel","aria-label":"",children:[p.jsx("p",{className:"admin-payment-janken-title",children:""}),p.jsxs("fieldset",{className:"admin-payment-janken-fieldset","aria-disabled":zt,children:[p.jsx("legend",{className:"sr-only",children:""}),p.jsx("div",{className:"admin-payment-janken-options",children:qB.map(ae=>{const Ae=ae.delta===0?`${pi(0)}`:ng(ae.delta),je=`admin-payment-janken-option${I===ae.value?" is-active":""}${zt?" is-disabled":""}`;return p.jsxs("label",{className:je,"data-tone":ae.tone,children:[p.jsx("input",{type:"radio",name:"admin-payment-janken",value:ae.value,checked:I===ae.value,onChange:Kn,disabled:zt}),p.jsxs("span",{className:"admin-payment-janken-option-header",children:[p.jsx("span",{className:`admin-payment-janken-badge ${ae.tone}`,"aria-hidden":"true",children:Ae}),p.jsx("span",{className:"admin-payment-janken-label",children:ae.label})]}),p.jsx("span",{className:"admin-payment-janken-description",children:ae.description})]},ae.value)})})]}),p.jsxs("div",{className:"admin-payment-janken-footer",children:[p.jsxs("div",{className:"admin-payment-janken-summary","aria-live":"polite",children:[p.jsx("span",{className:"admin-payment-janken-summary-label",children:""}),p.jsx("span",{className:`admin-payment-janken-value${ye>0?" is-plus":ye<0?" is-minus":""}`,children:ng(ye)})]}),p.jsx("span",{className:"admin-payment-janken-helper",children:""})]})]}),p.jsxs("div",{className:"admin-payment-voucher-summary","aria-live":"polite",children:[p.jsx("p",{className:"admin-payment-voucher-summary-label",children:""}),p.jsxs("p",{className:"admin-payment-voucher-summary-value",children:[we," ",p.jsxs("span",{className:"admin-payment-voucher-summary-amount",children:["",pi(me),""]})]}),b.count50>0&&p.jsxs("p",{className:"admin-payment-voucher-summary-detail",children:["50: ",b.count50,"100: ",b.count100,""]})]}),p.jsxs("div",{className:"admin-payment-actions",children:[G.payment===""&&p.jsxs(p.Fragment,{children:[p.jsx("button",{type:"button",className:"admin-payment-action",onClick:()=>gt(G),disabled:z===G.id,children:""}),p.jsx("button",{type:"button",className:"admin-payment-inline-button",onClick:()=>Pt(G),disabled:z===G.id,children:""})]}),(G.payment===""||G.payment==="")&&p.jsx("button",{type:"button",className:"admin-payment-action admin-payment-action--ghost",onClick:()=>Wn(G),disabled:z===G.id,children:""})]})]})]}),p.jsxs("div",{className:"admin-payment-detail-body",children:[p.jsxs("section",{className:"admin-payment-detail-items",children:[p.jsx("h3",{children:""}),ve.length>0?p.jsx(uv,{entries:ve,totalAriaLabel:"",variant:"compact",className:"admin-payment-items-inline"}):p.jsx("p",{className:"admin-payment-detail-placeholder",children:""})]}),p.jsxs("section",{className:"admin-payment-detail-meta",children:[p.jsxs("dl",{children:[p.jsxs("div",{children:[p.jsx("dt",{children:""}),p.jsx("dd",{children:p.jsx("span",{className:`admin-payment-chip ${XB[G.payment]}`,children:Nc(G.payment,i)})})]}),p.jsxs("div",{children:[p.jsx("dt",{children:""}),p.jsx("dd",{children:G.createdAt})]}),p.jsxs("div",{children:[p.jsx("dt",{children:""}),p.jsx("dd",{children:He})]}),p.jsxs("div",{children:[p.jsx("dt",{children:""}),p.jsx("dd",{children:G.ticket})]})]}),p.jsx("p",{className:"admin-payment-hint",children:""})]})]})]}):p.jsx("div",{className:"admin-payment-detail-placeholder",children:p.jsx("p",{className:"admin-payment-empty",children:""})}),p.jsxs("section",{className:"admin-payment-history","aria-label":"",children:[p.jsx("header",{children:p.jsx("h3",{children:""})}),G?le.length>0?p.jsx("ul",{children:le.map((ae,Ae)=>p.jsxs("li",{children:[p.jsx("span",{children:new Date(ae.time).toLocaleString()}),p.jsx("span",{children:$B[ae.status]})]},`${ae.time}-${Ae}`))}):p.jsx("p",{className:"admin-payment-history-empty",children:""}):p.jsx("p",{className:"admin-payment-history-empty",children:""})]}),p.jsxs("section",{className:"admin-payment-recent","aria-label":"",children:[p.jsxs("header",{className:"admin-payment-recent-header",children:[p.jsx("h3",{children:""}),p.jsx("p",{className:"admin-payment-recent-sub",children:""})]}),p.jsxs("ul",{children:[Et.map(ae=>{const Ae=ki(ae.id),je=ae.items.replace(//g,"");return p.jsx("li",{children:p.jsxs("article",{className:"admin-payment-recent-card",children:[p.jsxs("div",{className:"admin-payment-recent-top",children:[p.jsxs("span",{className:"admin-payment-recent-ticket","aria-label":` ${ae.callNumber}`,children:[" ",ae.callNumber]}),p.jsxs("div",{className:"admin-payment-recent-meta",children:[p.jsx("span",{className:"admin-payment-recent-total",children:pi(ae.total)}),p.jsx("time",{dateTime:ae.createdAt,className:"admin-payment-time",children:ae.createdAt})]})]}),p.jsx("p",{className:"admin-payment-recent-items","aria-label":"",children:je}),p.jsxs("dl",{className:"admin-payment-recent-identifiers",children:[p.jsxs("div",{children:[p.jsx("dt",{children:""}),p.jsx("dd",{children:Ae})]}),p.jsxs("div",{children:[p.jsx("dt",{children:""}),p.jsx("dd",{children:ae.id})]}),p.jsxs("div",{children:[p.jsx("dt",{children:""}),p.jsx("dd",{children:ae.ticket})]})]}),p.jsx("div",{className:"admin-payment-recent-actions",children:p.jsx("button",{type:"button",className:"admin-payment-revert",onClick:()=>Wn(ae),disabled:z===ae.id,children:""})})]})},ae.id)}),Et.length===0&&p.jsx("li",{className:"admin-payment-recent-empty",children:""})]})]})]})]})]})}function KB(){const[n,e]=P.useState(!0),[t,r]=P.useState(""),[i,a]=P.useState(new Date),o=()=>{e(u=>{const d=!u;return a(new Date),d})},c=()=>{a(new Date)};return p.jsxs("div",{className:"admin-grid",style:{gap:"24px",maxWidth:720},children:[p.jsxs("section",{className:"admin-card",children:[p.jsx("h3",{children:""}),p.jsx("p",{children:""}),p.jsxs("div",{className:"admin-toggle",role:"switch","aria-checked":n,children:[p.jsx("input",{type:"checkbox",checked:n,onChange:o}),p.jsx("span",{children:n?"":""})]}),p.jsx("p",{style:{color:"#64748b"},children:n?"":""}),p.jsx("div",{className:"admin-divider"}),p.jsxs("div",{className:"admin-list",children:[p.jsx("label",{htmlFor:"reception-memo",children:""}),p.jsx("textarea",{id:"reception-memo",rows:4,style:{borderRadius:12,border:"1px solid #cbd5f5",padding:"12px 16px",fontSize:"1rem",resize:"vertical"},placeholder:":  30 ",value:t,onChange:u=>r(u.target.value)}),p.jsx("button",{type:"button",className:"admin-primary-button",onClick:c,children:""}),i&&p.jsxs("small",{style:{color:"#64748b"},children:[": ",i.toLocaleString("ja-JP")]})]})]}),p.jsxs("section",{className:"admin-card",children:[p.jsx("h3",{children:""}),p.jsx("p",{children:" Slack / LINE WORKS Webhook URL "}),p.jsxs("div",{className:"admin-list",children:[p.jsx("label",{htmlFor:"reception-webhook",children:"Webhook URL"}),p.jsx("input",{id:"reception-webhook",placeholder:"https://hooks.slack.com/...",style:{borderRadius:12,border:"1px solid #cbd5f5",padding:"10px 14px",fontSize:"1rem"}}),p.jsx("button",{type:"button",className:"admin-secondary-button",children:""})]})]})]})}function WB(n,e){const t=n.match(/^(\d{1,2}):(\d{2})$/);if(!t)return null;const[,r,i]=t,a=Number.parseInt(r,10),o=Number.parseInt(i,10);if(Number.isNaN(a)||Number.isNaN(o))return null;const c=new Date(e);return c.setHours(a,o,0,0),c.getTime()>e.getTime()&&c.setDate(c.getDate()-1),c}function QB(n,e){const t=WB(n,e);if(!t)return null;const r=e.getTime()-t.getTime();if(r<0)return null;const i=Math.floor(r/6e4);if(i<1)return"1";const a=Math.floor(i/60),o=i%60;return a===0?`${i}`:o===0?`${a}`:`${a}${o}`}function ZB(){const n=P.useMemo(()=>{const H=new Date;H.setHours(0,0,0,0);const G=new Date(H);return G.setDate(G.getDate()+1),{start:H,end:G}},[]),{orders:e,loading:t,error:r}=Gc(n),{language:i}=Yi(),a=P.useMemo(()=>e.map(_p),[e]),[o,c]=P.useState(""),[u,d]=P.useState(!1),[m,g]=P.useState(null),[_,w]=P.useState(null),[A,S]=P.useState(()=>new Date),[D,C]=P.useState(null),[k,V]=P.useState(null),z=o.trim().toLowerCase(),q=P.useMemo(()=>z?a.filter(H=>[H.callNumber.toString(),H.ticket,H.id,H.items,H.progress,H.payment,Nc(H.payment,i),ki(H.id)].filter(le=>typeof le=="string").some(le=>le.toLowerCase().includes(z))):a,[a,z,i]),$=P.useMemo(()=>q.filter(H=>H.progress==="").sort((H,G)=>{const le=H.createdAtDate?.getTime()??0,ve=G.createdAtDate?.getTime()??0;return le-ve}),[q]),M=P.useMemo(()=>q.filter(H=>H.progress==="").sort((H,G)=>{const le=H.createdAtDate?.getTime()??0;return(G.createdAtDate?.getTime()??0)-le}),[q]),b=P.useMemo(()=>q.filter(H=>H.progress==="").sort((H,G)=>{const le=H.createdAtDate?.getTime()??0,ve=G.createdAtDate?.getTime()??0;return le-ve}),[q]),R=P.useMemo(()=>({ready:$.length,delivered:M.length,upcoming:b.length}),[$,M,b]),I=P.useCallback(async H=>{C(H.id),V(null);try{await ya(H.id,H.ticket,{progress:"",payment:H.payment})}catch(G){console.error("",G),V("")}finally{C(null)}},[]),O=P.useCallback(async H=>{C(H.id),V(null);try{await ya(H.id,H.ticket,{progress:"",payment:H.payment})}catch(G){console.error("",G),V("")}finally{C(null)}},[]);P.useEffect(()=>{const H=window.setInterval(()=>{S(new Date)},6e4);return()=>{window.clearInterval(H)}},[]),P.useEffect(()=>{if(!z){w(null);return}const H=q[0];w(H?.id??null)},[q,z]),P.useEffect(()=>{if(!_||typeof document>"u")return;const H=document.querySelector(`[data-order-id="${_}"]`);H&&H.scrollIntoView({behavior:"smooth",block:"center"})},[_,$.length,M.length,b.length]);const L=H=>{c(H.target.value),g(null)},j=()=>{c(""),w(null),g(null)},W=P.useCallback(H=>QB(H,A),[A]),ge=H=>{const G=H.trim();if(!G)return;const le=a.find(ve=>ve.ticket.toLowerCase()===G.toLowerCase()||ve.id.toLowerCase()===G.toLowerCase()||ki(ve.id).toLowerCase()===G.toLowerCase()||ve.callNumber.toString()===G);c(G),w(le?.id??null),g(le?null:`${G}`),d(!1)};return t?p.jsx("p",{children:""}):p.jsxs("div",{className:"admin-serving-page",children:[p.jsxs("section",{className:"admin-serving-controls","aria-label":"",children:[p.jsxs("div",{className:"admin-serving-search",children:[p.jsx("label",{htmlFor:"serving-search-input",children:""}),p.jsxs("div",{className:"admin-serving-search-input",children:[p.jsx("input",{id:"serving-search-input",type:"search",value:o,onChange:L,placeholder:"","aria-describedby":"serving-search-hint"}),o&&p.jsx("button",{type:"button",className:"admin-serving-search-clear",onClick:j,children:""})]}),p.jsx("p",{id:"serving-search-hint",className:"admin-serving-search-hint",children:""})]}),p.jsxs("div",{className:"admin-serving-controls-actions",children:[p.jsx("button",{type:"button",className:"admin-serving-button ghost",onClick:()=>{g(null),d(!0)},children:"QR"}),m&&p.jsx("p",{className:"admin-serving-scanner-error",children:m})]})]}),p.jsxs("section",{className:"admin-serving-summary","aria-label":"",children:[p.jsxs("div",{className:"admin-serving-summary-card",children:[p.jsx("p",{className:"admin-serving-summary-title",children:""}),p.jsxs("p",{className:"admin-serving-summary-value",children:[R.ready,""]})]}),p.jsxs("div",{className:"admin-serving-summary-card",children:[p.jsx("p",{className:"admin-serving-summary-title",children:""}),p.jsxs("p",{className:"admin-serving-summary-value",children:[R.upcoming,""]})]}),p.jsxs("div",{className:"admin-serving-summary-card",children:[p.jsx("p",{className:"admin-serving-summary-title",children:""}),p.jsxs("p",{className:"admin-serving-summary-value",children:[R.delivered,""]})]})]}),r&&p.jsx("p",{className:"admin-error",role:"alert",children:""}),k&&p.jsx("p",{className:"admin-error",role:"alert",children:k}),o&&q.length===0&&p.jsxs("p",{className:"admin-serving-search-empty",role:"status",children:["",o,""]}),p.jsxs("div",{className:"admin-serving-columns",children:[p.jsxs("section",{className:"admin-serving-section","aria-label":"",children:[p.jsxs("header",{className:"admin-serving-section-header",children:[p.jsx("h2",{children:""}),p.jsx("p",{children:""})]}),p.jsxs("div",{className:"admin-serving-list",children:[$.map(H=>{const G=ki(H.id),le=W(H.createdAt),ve=Pf(H);return p.jsxs("article",{className:`admin-serving-card${H.id===_?" highlight":""}`,"data-order-id":H.id,children:[p.jsxs("header",{className:"admin-serving-card-header-inline",children:[p.jsxs("div",{className:"admin-serving-header-primary",children:[p.jsx("span",{className:"admin-serving-ticket","aria-label":` ${H.callNumber}`,children:p.jsx("span",{className:"admin-payment-ticket badge",children:H.callNumber})}),p.jsxs("span",{className:"admin-serving-code",children:[" ",G]}),p.jsxs("span",{className:"admin-serving-progress-code",children:[" ",H.ticket]})]}),p.jsxs("div",{className:"admin-serving-header-meta",children:[p.jsx("time",{dateTime:H.createdAt,className:"admin-serving-time",children:H.createdAt}),le&&p.jsx("span",{className:"admin-serving-elapsed",children:le})]})]}),ve.length>0&&p.jsx(uv,{entries:ve,totalAriaLabel:"",variant:"compact",className:"admin-serving-items-inline"}),p.jsxs("footer",{children:[p.jsxs("div",{className:"admin-serving-meta",children:[p.jsx("span",{className:`admin-serving-payment ${H.payment===""?"paid":"unpaid"}`,children:Nc(H.payment,i)}),p.jsxs("span",{className:"admin-serving-total",children:["",H.total.toLocaleString()]})]}),p.jsx("div",{className:"admin-serving-actions",children:p.jsx("button",{type:"button",className:"admin-serving-button primary",onClick:()=>I(H),disabled:D===H.id,children:""})})]})]},H.id)}),$.length===0&&p.jsx("p",{className:"admin-serving-empty",children:""})]})]}),p.jsxs("aside",{className:"admin-serving-side",children:[p.jsxs("section",{className:"admin-serving-section","aria-label":"",children:[p.jsxs("header",{className:"admin-serving-section-header",children:[p.jsx("h2",{children:""}),p.jsx("p",{children:""})]}),p.jsxs("div",{className:"admin-serving-list compact",children:[b.map(H=>{const G=ki(H.id),le=W(H.createdAt),ve=Pf(H);return p.jsxs("article",{className:`admin-serving-mini-card${H.id===_?" highlight":""}`,"data-order-id":H.id,children:[p.jsxs("div",{className:"admin-serving-mini-header",children:[p.jsx("span",{className:"admin-serving-ticket","aria-label":` ${H.callNumber}`,children:p.jsx("span",{className:"admin-payment-ticket badge small",children:H.callNumber})}),p.jsxs("span",{className:"admin-serving-code",children:[" ",G]}),p.jsxs("span",{className:"admin-serving-progress-code",children:[" ",H.ticket]})]}),ve.length>0&&p.jsx(uv,{entries:ve,showTotal:!1,variant:"compact",className:"admin-serving-items-inline"}),p.jsxs("div",{className:"admin-serving-time-group",children:[p.jsx("time",{dateTime:H.createdAt,className:"admin-serving-time",children:H.createdAt}),le&&p.jsx("span",{className:"admin-serving-elapsed",children:le})]}),p.jsx("div",{className:"admin-serving-mini-actions",children:p.jsx("button",{type:"button",className:"admin-serving-button primary small",onClick:()=>I(H),disabled:D===H.id,children:""})})]},H.id)}),b.length===0&&p.jsx("p",{className:"admin-serving-empty",children:""})]})]}),p.jsxs("section",{className:"admin-serving-section","aria-label":"",children:[p.jsxs("header",{className:"admin-serving-section-header",children:[p.jsx("h2",{children:""}),p.jsx("p",{children:""})]}),p.jsxs("div",{className:"admin-serving-list compact",children:[M.map(H=>{const G=ki(H.id),le=W(H.createdAt);return p.jsxs("article",{className:`admin-serving-mini-card${H.id===_?" highlight":""}`,"data-order-id":H.id,children:[p.jsxs("div",{children:[p.jsx("p",{className:"admin-serving-ticket","aria-label":` ${H.callNumber}`,children:p.jsx("span",{className:"admin-payment-ticket badge small",children:H.callNumber})}),p.jsxs("p",{className:"admin-serving-code",children:[" ",G]}),p.jsxs("p",{className:"admin-serving-progress-code",children:[" ",H.ticket]})]}),p.jsxs("div",{className:"admin-serving-time-group",children:[p.jsx("time",{dateTime:H.createdAt,className:"admin-serving-time",children:H.createdAt}),le&&p.jsx("span",{className:"admin-serving-elapsed",children:le})]}),p.jsx("button",{type:"button",className:"admin-serving-button ghost",onClick:()=>O(H),disabled:D===H.id,children:""})]},H.id)}),M.length===0&&p.jsx("p",{className:"admin-serving-empty",children:""})]})]})]})]}),u&&p.jsx(JB,{onDetected:ge,onCancel:()=>{d(!1),g(null)},onCameraError:H=>g(H)})]})}function JB({onDetected:n,onCancel:e,onCameraError:t}){const r=P.useRef(null),[i,a]=P.useState(!0),[o,c]=P.useState(null),u=P.useRef(!1);return P.useEffect(()=>{const d=new RB;let m;return u.current=!1,(async()=>{const _=r.current??void 0;if(!_){const w="";c(w),t(w);return}try{m=await d.decodeFromVideoDevice(void 0,_,(w,A,S)=>{if(w&&!u.current&&(u.current=!0,S.stop(),n(w.getText())),A&&!(A instanceof Error&&A.name==="NotFoundException")){const D=A instanceof Error?A.message:String(A);c(D)}}),a(!1)}catch(w){const A=w instanceof Error?w.message:"";c(A),t(A)}})(),()=>{m?.stop()}},[n,t]),P.useEffect(()=>{o&&t(o)},[o,t]),p.jsx("div",{className:"admin-serving-scanner-overlay",role:"dialog","aria-modal":"true","aria-label":"QR",children:p.jsxs("div",{className:"admin-serving-scanner-dialog",children:[p.jsxs("header",{className:"admin-serving-scanner-header",children:[p.jsx("h2",{children:"QR"}),p.jsx("button",{type:"button",className:"admin-serving-button ghost",onClick:e,children:""})]}),p.jsx("p",{className:"admin-serving-scanner-hint",children:"QR"}),p.jsxs("div",{className:"admin-serving-scanner-video-wrap",children:[p.jsx("video",{ref:r,className:"admin-serving-scanner-video",autoPlay:!0,muted:!0,playsInline:!0}),i&&p.jsx("span",{className:"admin-serving-scanner-status",children:""})]}),o&&p.jsx("p",{className:"admin-serving-scanner-error",children:o})]})})}const Tv="app:kitchen-toast-test";function eV(n={}){if(typeof window>"u")return;const e={orderId:n.orderId??"TEST-ORDER",callNumber:n.callNumber??Math.floor(Math.random()*900+100),total:n.total??1500,itemSummary:n.itemSummary??":  1 /  1",createdAt:n.createdAt??new Date().toISOString()},t=new CustomEvent(Tv,{detail:e});window.dispatchEvent(t)}function tV(n){if(typeof window>"u")return()=>{};const e=t=>{n(t.detail)};return window.addEventListener(Tv,e),()=>{window.removeEventListener(Tv,e)}}const nV=[{id:"system",label:""},{id:"light",label:""},{id:"dark",label:""}],rV=[{id:"admin",label:"",enabled:!0},{id:"kitchen",label:"",enabled:!0},{id:"staff",label:"",enabled:!1}];function iV(){const[n,e]=P.useState("system"),[t,r]=P.useState(!0),[i,a]=P.useState(!0),{menuItems:o,baseMenuItemMap:c,overrides:u,updateMenuItem:d,resetMenuItem:m,resetAllMenuItems:g}=fl(),_=()=>Object.entries(c).reduce((O,[L,j])=>(O[L]={label:j.label,price:String(j.price)},O),{}),w=()=>Object.keys(c).reduce((O,L)=>(O[L]=null,O),{}),[A,S]=P.useState(()=>_()),[D,C]=P.useState(()=>w()),[k,V]=P.useState(null),[z,q]=P.useState({});P.useEffect(()=>{S(_()),C(w())},[]),P.useEffect(()=>{S(O=>{const L={...O};let j=!1;return o.forEach(W=>{const ge=O[W.key],H=String(W.price),G=W.label;if(!ge){L[W.key]={label:G,price:H},j=!0;return}const le=ge.price!==H,ve=ge.label!==G;!le&&!ve||(!le&&ge.price!==H&&(L[W.key]={...ge,price:H},j=!0),!ve&&ge.label!==G&&(L[W.key]={...ge,label:G},j=!0))}),j?L:O})},[o]);const $=(O,L,j)=>{S(W=>({...W,[O]:{...W[O],[L]:j}})),C(W=>({...W,[O]:null})),V(null)},M=async O=>{const L=A[O];if(!L)return;const j=L.label.trim();if(!j){C(H=>({...H,[O]:{type:"error",message:""}}));return}if(j.length>40){C(H=>({...H,[O]:{type:"error",message:"40"}}));return}const W=Number(L.price);if(!Number.isFinite(W)||W<0){C(H=>({...H,[O]:{type:"error",message:"0"}}));return}const ge=Math.round(W);try{await d(O,{label:j,price:ge}),S(H=>({...H,[O]:{label:j,price:String(ge)}})),C(H=>({...H,[O]:{type:"success",message:""}})),V(null)}catch(H){console.error("",H),C(G=>({...G,[O]:{type:"error",message:""}}))}},b=async(O,L)=>{V(null),C(j=>({...j,[O]:null})),q(j=>({...j,[O]:!0}));try{await d(O,{soldOut:L}),C(j=>({...j,[O]:{type:"success",message:L?"":""}}))}catch(j){console.error("",j),C(W=>({...W,[O]:{type:"error",message:""}}))}finally{q(j=>{const W={...j};return delete W[O],W})}},R=async O=>{if(V(null),!!!u[O]){const j=o.find(W=>W.key===O);if(!j)return;S(W=>({...W,[O]:{label:j.label,price:String(j.price)}})),C(W=>({...W,[O]:{type:"success",message:""}}));return}try{await m(O);const j=c[O];S(W=>({...W,[O]:{label:j.label,price:String(j.price)}})),C(W=>({...W,[O]:{type:"success",message:""}}))}catch(j){console.error("",j),C(W=>({...W,[O]:{type:"error",message:""}}))}},I=async()=>{if(V(null),!(Object.keys(u).length>0)){V({type:"success",message:""});return}try{await g(),S(_()),C(w()),V({type:"success",message:""})}catch(L){console.error("",L),V({type:"error",message:""})}};return p.jsxs("div",{className:"admin-grid",style:{gap:"24px",maxWidth:720},children:[p.jsxs("section",{className:"admin-card",children:[p.jsxs("header",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:"1rem",flexWrap:"wrap"},children:[p.jsxs("div",{children:[p.jsx("h3",{style:{margin:0},children:""}),p.jsx("p",{style:{margin:"4px 0 0",color:"#475569"},children:""})]}),p.jsx("button",{type:"button",className:"admin-secondary-button",onClick:()=>{I()},children:""})]}),k&&p.jsx("p",{role:"status",style:{marginTop:"12px",padding:"8px 12px",borderRadius:8,backgroundColor:k.type==="success"?"#ecfdf5":"#fee2e2",color:k.type==="success"?"#047857":"#b91c1c"},children:k.message}),p.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"16px",marginTop:"16px"},children:o.map(O=>{const L=A[O.key],j=c[O.key],W=D[O.key],ge=String(O.price),H=L?L.label!==O.label||L.price!==ge:!1,G=!!u[O.key];return p.jsxs("article",{style:{border:"1px solid #e2e8f0",borderRadius:12,padding:"16px",backgroundColor:"#f8fafc",display:"flex",flexDirection:"column",gap:"12px"},children:[p.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:"0.75rem",flexWrap:"wrap"},children:[p.jsxs("div",{children:[p.jsx("h4",{style:{margin:0},children:O.label}),p.jsxs("p",{style:{margin:"4px 0 0",color:"#64748b"},children:["ID: ",O.key]})]}),G&&p.jsx("span",{style:{display:"inline-flex",alignItems:"center",gap:"0.25rem",padding:"4px 10px",borderRadius:999,backgroundColor:"#1e40af",color:"#eff6ff",fontSize:"0.85rem"},children:""})]}),p.jsxs("div",{style:{display:"grid",gap:"12px",gridTemplateColumns:"repeat(auto-fit, minmax(180px, 1fr))"},children:[p.jsxs("label",{style:{display:"flex",flexDirection:"column",gap:"6px"},children:[p.jsx("span",{style:{fontWeight:600},children:""}),p.jsx("input",{type:"text",value:L?.label??"",onChange:le=>$(O.key,"label",le.target.value),placeholder:j.label,style:{borderRadius:8,border:"1px solid #cbd5f5",padding:"10px 12px",fontSize:"1rem"}})]}),p.jsxs("label",{style:{display:"flex",flexDirection:"column",gap:"6px"},children:[p.jsx("span",{style:{fontWeight:600},children:" ()"}),p.jsx("input",{type:"number",min:0,inputMode:"numeric",value:L?.price??"",onChange:le=>$(O.key,"price",le.target.value),style:{borderRadius:8,border:"1px solid #cbd5f5",padding:"10px 12px",fontSize:"1rem"}})]})]}),p.jsxs("div",{className:"admin-menu-soldout-control",children:[p.jsxs("label",{className:"admin-menu-soldout-toggle",children:[p.jsx("input",{type:"checkbox",checked:O.soldOut,onChange:le=>{b(O.key,le.target.checked)},disabled:!!z[O.key]}),p.jsx("span",{children:O.soldOut?"":""})]}),p.jsx("p",{className:"admin-menu-soldout-helper",children:""})]}),p.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"8px"},children:[p.jsx("button",{type:"button",className:"admin-primary-button",onClick:()=>{M(O.key)},disabled:!H,children:""}),p.jsx("button",{type:"button",className:"admin-secondary-button",onClick:()=>{R(O.key)},children:G?"":""}),p.jsxs("span",{style:{color:"#64748b",alignSelf:"center",fontSize:"0.9rem"},children:[": ",j.label,"",j.price.toLocaleString(),""]})]}),W&&p.jsx("p",{role:"status",style:{margin:0,padding:"8px 12px",borderRadius:8,backgroundColor:W.type==="success"?"#ecfdf5":"#fee2e2",color:W.type==="success"?"#047857":"#b91c1c"},children:W.message})]},O.key)})})]}),p.jsxs("section",{className:"admin-card",children:[p.jsx("h3",{children:""}),p.jsx("p",{children:""}),p.jsx("div",{className:"admin-list",children:nV.map(O=>p.jsxs("label",{style:{display:"flex",gap:12,alignItems:"center"},children:[p.jsx("input",{type:"radio",name:"theme",value:O.id,checked:n===O.id,onChange:()=>e(O.id)}),O.label]},O.id))})]}),p.jsxs("section",{className:"admin-card",children:[p.jsx("h3",{children:""}),p.jsxs("div",{className:"admin-list",children:[p.jsxs("label",{style:{display:"flex",alignItems:"center",gap:12},children:[p.jsx("input",{type:"checkbox",checked:t,onChange:O=>r(O.target.checked)}),""]}),p.jsxs("label",{style:{display:"flex",alignItems:"center",gap:12},children:[p.jsx("input",{type:"checkbox",checked:i,onChange:O=>a(O.target.checked)}),""]}),p.jsx("button",{type:"button",className:"admin-secondary-button",onClick:()=>eV(),children:""})]})]}),p.jsxs("section",{className:"admin-card",children:[p.jsx("h3",{children:""}),p.jsx("p",{children:"Firestore "}),p.jsx("ul",{className:"admin-list",style:{margin:0},children:rV.map(O=>p.jsxs("li",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[p.jsxs("div",{children:[p.jsx("p",{style:{margin:0},children:O.label}),p.jsxs("small",{style:{color:"#64748b"},children:["ID: ",O.id]})]}),p.jsxs("label",{style:{display:"flex",alignItems:"center",gap:10},children:[p.jsx("input",{type:"checkbox",defaultChecked:O.enabled})," "]})]},O.id))})]})]})}function aV(n,e){if(n.match(/^[a-z]+:\/\//i))return n;if(n.match(/^\/\//))return window.location.protocol+n;if(n.match(/^[a-z]+:/i))return n;const t=document.implementation.createHTMLDocument(),r=t.createElement("base"),i=t.createElement("a");return t.head.appendChild(r),t.body.appendChild(i),e&&(r.href=e),i.href=n,i.href}const sV=(()=>{let n=0;const e=()=>`0000${(Math.random()*36**4<<0).toString(36)}`.slice(-4);return()=>(n+=1,`u${e()}${n}`)})();function io(n){const e=[];for(let t=0,r=n.length;t<r;t++)e.push(n[t]);return e}let tc=null;function Y3(n={}){return tc||(n.includeStyleProperties?(tc=n.includeStyleProperties,tc):(tc=io(window.getComputedStyle(document.documentElement)),tc))}function F0(n,e){const r=(n.ownerDocument.defaultView||window).getComputedStyle(n).getPropertyValue(e);return r?parseFloat(r.replace("px","")):0}function oV(n){const e=F0(n,"border-left-width"),t=F0(n,"border-right-width");return n.clientWidth+e+t}function lV(n){const e=F0(n,"border-top-width"),t=F0(n,"border-bottom-width");return n.clientHeight+e+t}function K3(n,e={}){const t=e.width||oV(n),r=e.height||lV(n);return{width:t,height:r}}function cV(){let n,e;try{e=process}catch{}const t=e&&e.env?e.env.devicePixelRatio:null;return t&&(n=parseInt(t,10),Number.isNaN(n)&&(n=1)),n||window.devicePixelRatio||1}const Yr=16384;function uV(n){(n.width>Yr||n.height>Yr)&&(n.width>Yr&&n.height>Yr?n.width>n.height?(n.height*=Yr/n.width,n.width=Yr):(n.width*=Yr/n.height,n.height=Yr):n.width>Yr?(n.height*=Yr/n.width,n.width=Yr):(n.width*=Yr/n.height,n.height=Yr))}function U0(n){return new Promise((e,t)=>{const r=new Image;r.onload=()=>{r.decode().then(()=>{requestAnimationFrame(()=>e(r))})},r.onerror=t,r.crossOrigin="anonymous",r.decoding="async",r.src=n})}async function fV(n){return Promise.resolve().then(()=>new XMLSerializer().serializeToString(n)).then(encodeURIComponent).then(e=>`data:image/svg+xml;charset=utf-8,${e}`)}async function dV(n,e,t){const r="http://www.w3.org/2000/svg",i=document.createElementNS(r,"svg"),a=document.createElementNS(r,"foreignObject");return i.setAttribute("width",`${e}`),i.setAttribute("height",`${t}`),i.setAttribute("viewBox",`0 0 ${e} ${t}`),a.setAttribute("width","100%"),a.setAttribute("height","100%"),a.setAttribute("x","0"),a.setAttribute("y","0"),a.setAttribute("externalResourcesRequired","true"),i.appendChild(a),a.appendChild(n),fV(i)}const jr=(n,e)=>{if(n instanceof e)return!0;const t=Object.getPrototypeOf(n);return t===null?!1:t.constructor.name===e.name||jr(t,e)};function hV(n){const e=n.getPropertyValue("content");return`${n.cssText} content: '${e.replace(/'|"/g,"")}';`}function pV(n,e){return Y3(e).map(t=>{const r=n.getPropertyValue(t),i=n.getPropertyPriority(t);return`${t}: ${r}${i?" !important":""};`}).join(" ")}function mV(n,e,t,r){const i=`.${n}:${e}`,a=t.cssText?hV(t):pV(t,r);return document.createTextNode(`${i}{${a}}`)}function xb(n,e,t,r){const i=window.getComputedStyle(n,t),a=i.getPropertyValue("content");if(a===""||a==="none")return;const o=sV();try{e.className=`${e.className} ${o}`}catch{return}const c=document.createElement("style");c.appendChild(mV(o,t,i,r)),e.appendChild(c)}function gV(n,e,t){xb(n,e,":before",t),xb(n,e,":after",t)}const wb="application/font-woff",Eb="image/jpeg",vV={woff:wb,woff2:wb,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:Eb,jpeg:Eb,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml",webp:"image/webp"};function yV(n){const e=/\.([^./]*?)$/g.exec(n);return e?e[1]:""}function t2(n){const e=yV(n).toLowerCase();return vV[e]||""}function _V(n){return n.split(/,/)[1]}function Iv(n){return n.search(/^(data:)/)!==-1}function xV(n,e){return`data:${e};base64,${n}`}async function W3(n,e,t){const r=await fetch(n,e);if(r.status===404)throw new Error(`Resource "${r.url}" not found`);const i=await r.blob();return new Promise((a,o)=>{const c=new FileReader;c.onerror=o,c.onloadend=()=>{try{a(t({res:r,result:c.result}))}catch(u){o(u)}},c.readAsDataURL(i)})}const rg={};function wV(n,e,t){let r=n.replace(/\?.*/,"");return t&&(r=n),/ttf|otf|eot|woff2?/i.test(r)&&(r=r.replace(/.*\//,"")),e?`[${e}]${r}`:r}async function n2(n,e,t){const r=wV(n,e,t.includeQueryParams);if(rg[r]!=null)return rg[r];t.cacheBust&&(n+=(/\?/.test(n)?"&":"?")+new Date().getTime());let i;try{const a=await W3(n,t.fetchRequestInit,({res:o,result:c})=>(e||(e=o.headers.get("Content-Type")||""),_V(c)));i=xV(a,e)}catch(a){i=t.imagePlaceholder||"";let o=`Failed to fetch resource: ${n}`;a&&(o=typeof a=="string"?a:a.message),o&&console.warn(o)}return rg[r]=i,i}async function EV(n){const e=n.toDataURL();return e==="data:,"?n.cloneNode(!1):U0(e)}async function AV(n,e){if(n.currentSrc){const a=document.createElement("canvas"),o=a.getContext("2d");a.width=n.clientWidth,a.height=n.clientHeight,o?.drawImage(n,0,0,a.width,a.height);const c=a.toDataURL();return U0(c)}const t=n.poster,r=t2(t),i=await n2(t,r,e);return U0(i)}async function bV(n,e){var t;try{if(!((t=n?.contentDocument)===null||t===void 0)&&t.body)return await Sp(n.contentDocument.body,e,!0)}catch{}return n.cloneNode(!1)}async function SV(n,e){return jr(n,HTMLCanvasElement)?EV(n):jr(n,HTMLVideoElement)?AV(n,e):jr(n,HTMLIFrameElement)?bV(n,e):n.cloneNode(Q3(n))}const CV=n=>n.tagName!=null&&n.tagName.toUpperCase()==="SLOT",Q3=n=>n.tagName!=null&&n.tagName.toUpperCase()==="SVG";async function TV(n,e,t){var r,i;if(Q3(e))return e;let a=[];return CV(n)&&n.assignedNodes?a=io(n.assignedNodes()):jr(n,HTMLIFrameElement)&&(!((r=n.contentDocument)===null||r===void 0)&&r.body)?a=io(n.contentDocument.body.childNodes):a=io(((i=n.shadowRoot)!==null&&i!==void 0?i:n).childNodes),a.length===0||jr(n,HTMLVideoElement)||await a.reduce((o,c)=>o.then(()=>Sp(c,t)).then(u=>{u&&e.appendChild(u)}),Promise.resolve()),e}function IV(n,e,t){const r=e.style;if(!r)return;const i=window.getComputedStyle(n);i.cssText?(r.cssText=i.cssText,r.transformOrigin=i.transformOrigin):Y3(t).forEach(a=>{let o=i.getPropertyValue(a);a==="font-size"&&o.endsWith("px")&&(o=`${Math.floor(parseFloat(o.substring(0,o.length-2)))-.1}px`),jr(n,HTMLIFrameElement)&&a==="display"&&o==="inline"&&(o="block"),a==="d"&&e.getAttribute("d")&&(o=`path(${e.getAttribute("d")})`),r.setProperty(a,o,i.getPropertyPriority(a))})}function NV(n,e){jr(n,HTMLTextAreaElement)&&(e.innerHTML=n.value),jr(n,HTMLInputElement)&&e.setAttribute("value",n.value)}function RV(n,e){if(jr(n,HTMLSelectElement)){const t=e,r=Array.from(t.children).find(i=>n.value===i.getAttribute("value"));r&&r.setAttribute("selected","")}}function OV(n,e,t){return jr(e,Element)&&(IV(n,e,t),gV(n,e,t),NV(n,e),RV(n,e)),e}async function DV(n,e){const t=n.querySelectorAll?n.querySelectorAll("use"):[];if(t.length===0)return n;const r={};for(let a=0;a<t.length;a++){const c=t[a].getAttribute("xlink:href");if(c){const u=n.querySelector(c),d=document.querySelector(c);!u&&d&&!r[c]&&(r[c]=await Sp(d,e,!0))}}const i=Object.values(r);if(i.length){const a="http://www.w3.org/1999/xhtml",o=document.createElementNS(a,"svg");o.setAttribute("xmlns",a),o.style.position="absolute",o.style.width="0",o.style.height="0",o.style.overflow="hidden",o.style.display="none";const c=document.createElementNS(a,"defs");o.appendChild(c);for(let u=0;u<i.length;u++)c.appendChild(i[u]);n.appendChild(o)}return n}async function Sp(n,e,t){return!t&&e.filter&&!e.filter(n)?null:Promise.resolve(n).then(r=>SV(r,e)).then(r=>TV(n,r,e)).then(r=>OV(n,r,e)).then(r=>DV(r,e))}const Z3=/url\((['"]?)([^'"]+?)\1\)/g,MV=/url\([^)]+\)\s*format\((["']?)([^"']+)\1\)/g,PV=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;function kV(n){const e=n.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1");return new RegExp(`(url\\(['"]?)(${e})(['"]?\\))`,"g")}function jV(n){const e=[];return n.replace(Z3,(t,r,i)=>(e.push(i),t)),e.filter(t=>!Iv(t))}async function LV(n,e,t,r,i){try{const a=t?aV(e,t):e,o=t2(e);let c;return i||(c=await n2(a,o,r)),n.replace(kV(e),`$1${c}$3`)}catch{}return n}function BV(n,{preferredFontFormat:e}){return e?n.replace(PV,t=>{for(;;){const[r,,i]=MV.exec(t)||[];if(!i)return"";if(i===e)return`src: ${r};`}}):n}function J3(n){return n.search(Z3)!==-1}async function eI(n,e,t){if(!J3(n))return n;const r=BV(n,t);return jV(r).reduce((a,o)=>a.then(c=>LV(c,o,e,t)),Promise.resolve(r))}async function nc(n,e,t){var r;const i=(r=e.style)===null||r===void 0?void 0:r.getPropertyValue(n);if(i){const a=await eI(i,null,t);return e.style.setProperty(n,a,e.style.getPropertyPriority(n)),!0}return!1}async function VV(n,e){await nc("background",n,e)||await nc("background-image",n,e),await nc("mask",n,e)||await nc("-webkit-mask",n,e)||await nc("mask-image",n,e)||await nc("-webkit-mask-image",n,e)}async function FV(n,e){const t=jr(n,HTMLImageElement);if(!(t&&!Iv(n.src))&&!(jr(n,SVGImageElement)&&!Iv(n.href.baseVal)))return;const r=t?n.src:n.href.baseVal,i=await n2(r,t2(r),e);await new Promise((a,o)=>{n.onload=a,n.onerror=e.onImageErrorHandler?(...u)=>{try{a(e.onImageErrorHandler(...u))}catch(d){o(d)}}:o;const c=n;c.decode&&(c.decode=a),c.loading==="lazy"&&(c.loading="eager"),t?(n.srcset="",n.src=i):n.href.baseVal=i})}async function UV(n,e){const r=io(n.childNodes).map(i=>tI(i,e));await Promise.all(r).then(()=>n)}async function tI(n,e){jr(n,Element)&&(await VV(n,e),await FV(n,e),await UV(n,e))}function zV(n,e){const{style:t}=n;e.backgroundColor&&(t.backgroundColor=e.backgroundColor),e.width&&(t.width=`${e.width}px`),e.height&&(t.height=`${e.height}px`);const r=e.style;return r!=null&&Object.keys(r).forEach(i=>{t[i]=r[i]}),n}const Ab={};async function bb(n){let e=Ab[n];if(e!=null)return e;const r=await(await fetch(n)).text();return e={url:n,cssText:r},Ab[n]=e,e}async function Sb(n,e){let t=n.cssText;const r=/url\(["']?([^"')]+)["']?\)/g,a=(t.match(/url\([^)]+\)/g)||[]).map(async o=>{let c=o.replace(r,"$1");return c.startsWith("https://")||(c=new URL(c,n.url).href),W3(c,e.fetchRequestInit,({result:u})=>(t=t.replace(o,`url(${u})`),[o,u]))});return Promise.all(a).then(()=>t)}function Cb(n){if(n==null)return[];const e=[],t=/(\/\*[\s\S]*?\*\/)/gi;let r=n.replace(t,"");const i=new RegExp("((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})","gi");for(;;){const u=i.exec(r);if(u===null)break;e.push(u[0])}r=r.replace(i,"");const a=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi,o="((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})",c=new RegExp(o,"gi");for(;;){let u=a.exec(r);if(u===null){if(u=c.exec(r),u===null)break;a.lastIndex=c.lastIndex}else c.lastIndex=a.lastIndex;e.push(u[0])}return e}async function HV(n,e){const t=[],r=[];return n.forEach(i=>{if("cssRules"in i)try{io(i.cssRules||[]).forEach((a,o)=>{if(a.type===CSSRule.IMPORT_RULE){let c=o+1;const u=a.href,d=bb(u).then(m=>Sb(m,e)).then(m=>Cb(m).forEach(g=>{try{i.insertRule(g,g.startsWith("@import")?c+=1:i.cssRules.length)}catch(_){console.error("Error inserting rule from remote css",{rule:g,error:_})}})).catch(m=>{console.error("Error loading remote css",m.toString())});r.push(d)}})}catch(a){const o=n.find(c=>c.href==null)||document.styleSheets[0];i.href!=null&&r.push(bb(i.href).then(c=>Sb(c,e)).then(c=>Cb(c).forEach(u=>{o.insertRule(u,o.cssRules.length)})).catch(c=>{console.error("Error loading remote stylesheet",c)})),console.error("Error inlining remote css file",a)}}),Promise.all(r).then(()=>(n.forEach(i=>{if("cssRules"in i)try{io(i.cssRules||[]).forEach(a=>{t.push(a)})}catch(a){console.error(`Error while reading CSS rules from ${i.href}`,a)}}),t))}function GV(n){return n.filter(e=>e.type===CSSRule.FONT_FACE_RULE).filter(e=>J3(e.style.getPropertyValue("src")))}async function qV(n,e){if(n.ownerDocument==null)throw new Error("Provided element is not within a Document");const t=io(n.ownerDocument.styleSheets),r=await HV(t,e);return GV(r)}function nI(n){return n.trim().replace(/["']/g,"")}function $V(n){const e=new Set;function t(r){(r.style.fontFamily||getComputedStyle(r).fontFamily).split(",").forEach(a=>{e.add(nI(a))}),Array.from(r.children).forEach(a=>{a instanceof HTMLElement&&t(a)})}return t(n),e}async function XV(n,e){const t=await qV(n,e),r=$V(n);return(await Promise.all(t.filter(a=>r.has(nI(a.style.fontFamily))).map(a=>{const o=a.parentStyleSheet?a.parentStyleSheet.href:null;return eI(a.cssText,o,e)}))).join(`
`)}async function YV(n,e){const t=e.fontEmbedCSS!=null?e.fontEmbedCSS:e.skipFonts?null:await XV(n,e);if(t){const r=document.createElement("style"),i=document.createTextNode(t);r.appendChild(i),n.firstChild?n.insertBefore(r,n.firstChild):n.appendChild(r)}}async function KV(n,e={}){const{width:t,height:r}=K3(n,e),i=await Sp(n,e,!0);return await YV(i,e),await tI(i,e),zV(i,e),await dV(i,t,r)}async function WV(n,e={}){const{width:t,height:r}=K3(n,e),i=await KV(n,e),a=await U0(i),o=document.createElement("canvas"),c=o.getContext("2d"),u=e.pixelRatio||cV(),d=e.canvasWidth||t,m=e.canvasHeight||r;return o.width=d*u,o.height=m*u,e.skipAutoScale||uV(o),o.style.width=`${d}`,o.style.height=`${m}`,e.backgroundColor&&(c.fillStyle=e.backgroundColor,c.fillRect(0,0,o.width,o.height)),c.drawImage(a,0,0,o.width,o.height),o}async function Tb(n,e={}){return(await WV(n,e)).toDataURL()}const QV=[{value:1e4,label:"10,000",kind:"bill"},{value:5e3,label:"5,000",kind:"bill"},{value:2e3,label:"2,000",kind:"bill"},{value:1e3,label:"1,000",kind:"bill"}],ZV=[{value:500,label:"500",kind:"coin"},{value:100,label:"100",kind:"coin"},{value:50,label:"50",kind:"coin"},{value:10,label:"10",kind:"coin"},{value:5,label:"5",kind:"coin"},{value:1,label:"1",kind:"coin"}],r0=[...QV,...ZV],Ib=["middle","close"],$e=new Intl.NumberFormat("ja-JP",{style:"currency",currency:"JPY",maximumFractionDigits:0}),xt=new Intl.NumberFormat("ja-JP",{maximumFractionDigits:0}),Nb=new Intl.DateTimeFormat("ja-JP",{dateStyle:"medium",timeStyle:"short"});function Kr(n){const e=$e.format(Math.abs(n));return n>0?`+${e}`:n<0?`-${e}`:e}function ig(){return r0.reduce((n,e)=>(n[e.value]=0,n),{})}function JV(){const[n]=P.useState(()=>new Date),e=P.useCallback(()=>{const fe=BB(n),Pe=fb(n),Fe={...fe},ze={open:"manual",middle:"manual",close:"manual"};let Je=!1;return Pe>0&&Ib.forEach(rt=>{Fe[rt]<=0&&(Fe[rt]=Pe,ze[rt]="auto",Je=!0)}),{presets:Fe,source:ze,shouldPersist:Je,usageTotal:Pe}},[n]),t=P.useMemo(()=>e(),[e]),[r,i]=P.useState(()=>ig()),[a,o]=P.useState(""),[c,u]=P.useState(!1),[d,m]=P.useState(null),[g,_]=P.useState(null),[w,A]=P.useState(()=>{if(typeof window>"u")return"open";try{const fe=`cash-audit-open-image-${n.toISOString().split("T")[0]}`;return localStorage.getItem(fe)!==null?"middle":"open"}catch{return"open"}}),[S,D]=P.useState(()=>t.presets),[C,k]=P.useState(()=>t.source),[V,z]=P.useState(()=>t.presets.open),[q,$]=P.useState(()=>t.usageTotal),[M,b]=P.useState(()=>db(n)),[R,I]=P.useState(()=>hb(n)),[O,L]=P.useState(()=>yb(n)),j=P.useRef(null);P.useRef(null);const W=P.useRef(C),ge=P.useCallback(()=>`cash-audit-open-image-${n.toISOString().split("T")[0]}`,[n]),H=P.useCallback(()=>`cash-audit-open-total-${n.toISOString().split("T")[0]}`,[n]),[G,le]=P.useState(()=>{if(typeof window>"u")return null;try{return localStorage.getItem(ge())??null}catch{return null}}),[ve,He]=P.useState(()=>{if(typeof window>"u")return null;try{const fe=localStorage.getItem(H());return fe?Number(fe):null}catch{return null}}),Y=P.useCallback(async()=>{if(!(!j.current||w!=="open")){u(!0),m(null);try{const fe=await Tb(j.current,{cacheBust:!0,pixelRatio:2,backgroundColor:"#ffffff"}),Pe=r0.filter(dr=>dr.kind==="bill").reduce((dr,un)=>dr+(r[un.value]??0)*un.value,0),Fe=r0.filter(dr=>dr.kind==="coin").reduce((dr,un)=>dr+(r[un.value]??0)*un.value,0),ze=Pe+Fe,Je=document.createElement("a"),rt=n.toISOString().split("T")[0],Ce=new Date().toISOString().replace(/[:.]/g,"-");Je.download=`cash-audit-open-${rt}-${Ce}.png`,Je.href=fe,Je.click();const De=ge(),tt=H();localStorage.setItem(De,fe),localStorage.setItem(tt,String(ze)),le(fe),He(ze),_(new Date)}catch(fe){console.error("Failed to save open shift image",fe),m("")}finally{u(!1)}}},[w,ge,H,r,n]),ne=P.useMemo(()=>{const fe=new Date(n);return fe.setHours(0,0,0,0),fe},[n]),me=P.useMemo(()=>{const fe=new Date(ne);return fe.setDate(fe.getDate()+1),fe},[ne]),we=P.useMemo(()=>({start:ne,end:me}),[ne,me]),{orders:be}=Gc(we),ye=P.useMemo(()=>{const fe=ne.getTime(),Pe=me.getTime();return be.reduce((Fe,ze)=>{const Je=ze.createdAt??ze.updatedAt;if(!Je)return Fe;const rt=Je.getTime();return rt<fe||rt>=Pe||(ze.payment===""?(Fe.paidTotal+=ze.total,Fe.paidCount+=1):ze.payment===""&&(Fe.unpaidTotal+=ze.total,Fe.unpaidCount+=1)),Fe},{paidTotal:0,unpaidTotal:0,paidCount:0,unpaidCount:0})},[be,ne,me]);P.useEffect(()=>{W.current=C},[C]),P.useEffect(()=>{t.shouldPersist&&(ub(t.presets,n),$(t.usageTotal))},[n,t]);const Te=P.useCallback(fe=>{ub(fe,n)},[n]),Ye=P.useCallback((fe,Pe,Fe="manual")=>{D(ze=>{if(ze[fe]===Pe)return ze;const Je={...ze,[fe]:Pe};return Te(Je),Je}),k(ze=>ze[fe]===Fe?ze:{...ze,[fe]:Fe})},[Te]);P.useEffect(()=>{z(S[w])},[w,S]),P.useEffect(()=>{if(typeof window>"u")return;const fe=()=>{const rt=fb(n),Ce=db(n),De=hb(n);$(rt),b(Ce),I(De),D(tt=>{const dr=W.current;let un=tt,Ei=!1;return Ib.forEach(Kt=>{dr[Kt]==="auto"&&tt[Kt]!==rt&&(Ei||(un={...tt},Ei=!0),un[Kt]=rt)}),Ei?(Te(un),un):tt})},Pe=()=>{const rt=yb(n);L(rt)},Fe=GB(n),ze=HB(n),Je=rt=>{rt.key===Fe?fe():rt.key===ze&&Pe()};return window.addEventListener(wv,fe),window.addEventListener(Ev,Pe),window.addEventListener("storage",Je),()=>{window.removeEventListener(wv,fe),window.removeEventListener(Ev,Pe),window.removeEventListener("storage",Je)}},[n,Te]);const Re=P.useMemo(()=>{const fe=r0.map(De=>{const tt=r[De.value]??0,dr=De.value*tt;return{...De,count:tt,subtotal:dr}}),Pe=fe.filter(De=>De.kind==="bill"),Fe=fe.filter(De=>De.kind==="coin"),ze=Pe.reduce((De,tt)=>De+tt.subtotal,0),Je=Fe.reduce((De,tt)=>De+tt.subtotal,0),rt=Pe.reduce((De,tt)=>De+tt.count,0),Ce=Fe.reduce((De,tt)=>De+tt.count,0);return{billItems:Pe,coinItems:Fe,billTotal:ze,coinTotal:Je,grandTotal:ze+Je,totalBills:rt,totalCoins:Ce,totalPieces:rt+Ce}},[r]),zt=PB[w],Ze=P.useMemo(()=>V*mc,[V]),In=P.useMemo(()=>M*ff,[M]),Kn=P.useMemo(()=>R*mc,[R]),Et=P.useMemo(()=>In+Kn,[In,Kn]),Ln=P.useMemo(()=>O.plusCount*mi,[O.plusCount]),cr=P.useMemo(()=>-O.minusCount*mi,[O.minusCount]),ur=P.useMemo(()=>O.plusCount+O.minusCount,[O.plusCount,O.minusCount]),Bn=P.useMemo(()=>Kr(O.totalAmount),[O.totalAmount]),gt=P.useMemo(()=>{if(!ve||w==="open")return null;const fe=ve+ye.paidTotal-Et+O.totalAmount,Pe=Re.grandTotal,Fe=Pe-fe,ze=Math.abs(Fe)<=1;return{openTotal:ve,paidTotal:ye.paidTotal,voucherAmount:Et,jankenAmount:O.totalAmount,expectedAmount:fe,actualAmount:Pe,difference:Fe,isMatched:ze}},[ve,Re.grandTotal,ye.paidTotal,Et,O.totalAmount,w]),Pt=P.useMemo(()=>{const fe=ye.paidTotal,Pe=Et,Fe=O.totalAmount;return(ve??0)+fe-Pe+Fe},[ye.paidTotal,Et,O.totalAmount,ve]),Wn=P.useMemo(()=>Re.grandTotal,[Re.grandTotal]),cn=P.useMemo(()=>Wn-Pt,[Wn,Pt]),_r=P.useMemo(()=>Math.abs(cn)<=1,[cn]),tn=P.useMemo(()=>new Date,[r,a,w,V,O]),fr=fe=>Pe=>{const Fe=Pe.currentTarget.valueAsNumber;i(ze=>({...ze,[fe]:Number.isNaN(Fe)||Fe<0?0:Math.floor(Fe)}))},Jr=fe=>{const Pe=fe.currentTarget.value;A(Pe),z(S[Pe]??0),Pe==="open"&&(i(ig()),o(""))},ae=fe=>{const Pe=fe.currentTarget.valueAsNumber,Fe=Number.isNaN(Pe)||Pe<0?0:Math.floor(Pe);z(Fe),Ye(w,Fe,"manual")},Ae=()=>{i(ig()),m(null);const fe=e();D(fe.presets),k(fe.source);const Pe=fe.presets[w];z(Pe),$(fe.usageTotal),Te(fe.presets)},je=async()=>{if(j.current){u(!0),m(null);try{const fe=await Tb(j.current,{cacheBust:!0,pixelRatio:2,backgroundColor:"#ffffff"}),Pe=document.createElement("a"),Fe=new Date().toISOString().replace(/[:.]/g,"-");Pe.download=`cash-audit-${Fe}.png`,Pe.href=fe,Pe.click(),_(new Date)}catch(fe){console.error("Failed to save cash audit as image",fe),m("")}finally{u(!1)}}};return p.jsxs("div",{className:"admin-grid admin-cash-audit-layout",children:[p.jsxs("div",{className:"admin-cash-audit-input-column",children:[p.jsxs("section",{className:"admin-card admin-cash-audit-config",children:[p.jsx("header",{className:"admin-card-header",children:p.jsxs("div",{children:[p.jsx("h3",{children:""}),p.jsx("p",{children:""})]})}),p.jsxs("fieldset",{className:"admin-cash-audit-shift-group",children:[p.jsx("legend",{children:""}),p.jsx("div",{className:"admin-cash-audit-shift-options",children:Ap.map(fe=>p.jsxs("label",{className:`admin-cash-audit-shift-option${w===fe.value?" is-active":""}`,children:[p.jsx("input",{type:"radio",name:"cash-audit-shift",value:fe.value,checked:w===fe.value,onChange:Jr}),p.jsx("span",{children:fe.label})]},fe.value))})]}),p.jsxs("div",{className:"admin-cash-audit-voucher-field",children:[p.jsx("label",{htmlFor:"cash-audit-voucher-count",children:""}),p.jsxs("div",{className:"admin-cash-audit-count-input",children:[p.jsx("input",{id:"cash-audit-voucher-count",className:"admin-input admin-input--compact",type:"number",min:0,step:1,inputMode:"numeric",pattern:"[0-9]*",value:V,onChange:ae}),p.jsx("span",{className:"admin-cash-audit-count-suffix",children:""})]}),p.jsx("p",{className:"admin-cash-audit-helper",children:""}),p.jsxs("div",{className:"admin-cash-audit-voucher-total",children:[p.jsx("span",{children:"100"}),p.jsx("strong",{children:$e.format(Ze)})]}),p.jsxs("div",{className:"admin-cash-audit-voucher-usage",children:[p.jsx("span",{children:""}),p.jsxs("strong",{children:[xt.format(q)," "]}),p.jsxs("span",{className:"admin-cash-audit-voucher-usage-amount",children:[" ",$e.format(Et)]})]}),p.jsxs("div",{className:"admin-cash-audit-voucher-usage-breakdown",children:[p.jsxs("div",{className:"admin-cash-audit-voucher-usage-item",children:[p.jsx("span",{children:"50"}),p.jsxs("strong",{children:[xt.format(M)," "]}),p.jsx("span",{className:"admin-cash-audit-voucher-usage-amount",children:$e.format(In)})]}),p.jsxs("div",{className:"admin-cash-audit-voucher-usage-item",children:[p.jsx("span",{children:"100"}),p.jsxs("strong",{children:[xt.format(R)," "]}),p.jsx("span",{className:"admin-cash-audit-voucher-usage-amount",children:$e.format(Kn)})]})]}),w!=="open"&&p.jsxs("div",{className:"admin-cash-audit-balance-check","aria-live":"polite",children:[p.jsxs("div",{className:"admin-cash-audit-balance-header",children:[p.jsx("span",{className:"admin-cash-audit-balance-label",children:""}),p.jsx("span",{className:`admin-cash-audit-balance-status${_r?" is-balanced":" is-unbalanced"}`,children:_r?" ":" "})]}),p.jsxs("div",{className:"admin-cash-audit-balance-details",children:[p.jsxs("div",{className:"admin-cash-audit-balance-row",children:[p.jsx("span",{children:""}),p.jsx("strong",{children:$e.format(Pt)})]}),p.jsxs("div",{className:"admin-cash-audit-balance-row",children:[p.jsx("span",{children:""}),p.jsx("strong",{children:$e.format(Wn)})]}),p.jsxs("div",{className:"admin-cash-audit-balance-row",children:[p.jsx("span",{children:""}),p.jsxs("div",{className:"admin-cash-audit-balance-breakdown",children:[ve&&p.jsxs("span",{children:[": ",$e.format(ve)]}),p.jsxs("span",{children:[": ",$e.format(ye.paidTotal)]}),p.jsxs("span",{children:[": -",$e.format(Et)]}),p.jsxs("span",{children:[": ",Kr(O.totalAmount)]})]})]}),p.jsx("hr",{className:"admin-cash-audit-balance-divider"}),p.jsxs("div",{className:`admin-cash-audit-balance-difference${_r?"":" is-unbalanced"}`,children:[p.jsx("span",{children:""}),p.jsx("strong",{className:cn>0?" is-plus":cn<0?" is-minus":"",children:Kr(cn)})]})]})]}),p.jsxs("div",{className:"admin-cash-audit-janken-summary","aria-live":"polite",children:[p.jsxs("div",{className:"admin-cash-audit-janken-header",children:[p.jsx("span",{className:"admin-cash-audit-janken-label",children:""}),p.jsx("span",{className:`admin-cash-audit-janken-total${O.totalAmount>0?" is-plus":O.totalAmount<0?" is-minus":""}`,children:Bn})]}),p.jsxs("div",{className:"admin-cash-audit-janken-details",children:[p.jsxs("span",{className:"admin-cash-audit-janken-pill positive",children:[Kr(mi),"  ",xt.format(O.plusCount)," "]}),p.jsxs("span",{className:"admin-cash-audit-janken-pill negative",children:[Kr(-mi),"  ",xt.format(O.minusCount)," "]}),p.jsxs("span",{className:"admin-cash-audit-janken-pill neutral",children:[" ",xt.format(ur)," "]})]}),p.jsx("span",{className:"admin-cash-audit-janken-note",children:""})]})]}),(w==="middle"||w==="close")&&p.jsxs("div",{className:"admin-cash-audit-shift-summary",children:[p.jsxs("div",{className:"admin-cash-audit-summary-item paid",children:[p.jsx("span",{className:"admin-cash-audit-summary-label",children:""}),p.jsx("strong",{className:"admin-cash-audit-summary-amount",children:$e.format(ye.paidTotal)}),p.jsxs("span",{className:"admin-cash-audit-summary-meta",children:[xt.format(ye.paidCount)," "]})]}),p.jsxs("div",{className:"admin-cash-audit-summary-item unpaid",children:[p.jsx("span",{className:"admin-cash-audit-summary-label",children:""}),p.jsx("strong",{className:"admin-cash-audit-summary-amount",children:$e.format(ye.unpaidTotal)}),p.jsxs("span",{className:"admin-cash-audit-summary-meta",children:[xt.format(ye.unpaidCount)," "]})]})]})]}),p.jsxs("section",{className:"admin-card",children:[p.jsxs("header",{className:"admin-card-header",children:[p.jsxs("div",{children:[p.jsx("h3",{children:""}),p.jsx("p",{children:""})]}),p.jsxs("dl",{className:"admin-cash-audit-group-summary",children:[p.jsxs("div",{children:[p.jsx("dt",{children:""}),p.jsxs("dd",{children:[xt.format(Re.totalBills)," "]})]}),p.jsxs("div",{children:[p.jsx("dt",{children:""}),p.jsx("dd",{children:$e.format(Re.billTotal)})]})]})]}),p.jsxs("table",{className:"admin-table admin-cash-audit-table",children:[p.jsx("thead",{children:p.jsxs("tr",{children:[p.jsx("th",{scope:"col",children:""}),p.jsx("th",{scope:"col",children:""}),p.jsx("th",{scope:"col",children:""})]})}),p.jsx("tbody",{children:Re.billItems.map(fe=>p.jsxs("tr",{children:[p.jsx("th",{scope:"row",children:fe.label}),p.jsxs("td",{children:[p.jsxs("label",{className:"sr-only",htmlFor:`denomination-${fe.value}`,children:[fe.label,""]}),p.jsxs("div",{className:"admin-cash-audit-count-input",children:[p.jsx("input",{id:`denomination-${fe.value}`,className:"admin-input admin-input--compact",type:"number",min:0,step:1,inputMode:"numeric",pattern:"[0-9]*",value:fe.count,onChange:fr(fe.value)}),p.jsx("span",{className:"admin-cash-audit-count-suffix",children:""})]})]}),p.jsx("td",{className:"admin-text-right admin-cash-audit-value",children:$e.format(fe.subtotal)})]},`bill-${fe.value}`))}),p.jsx("tfoot",{children:p.jsxs("tr",{children:[p.jsx("th",{scope:"row",children:""}),p.jsx("td",{children:p.jsxs("span",{className:"admin-cash-audit-total-chip",children:[xt.format(Re.totalBills)," "]})}),p.jsx("td",{className:"admin-text-right admin-cash-audit-value",children:$e.format(Re.billTotal)})]})})]})]}),p.jsxs("section",{className:"admin-card",children:[p.jsxs("header",{className:"admin-card-header",children:[p.jsxs("div",{children:[p.jsx("h3",{children:""}),p.jsx("p",{children:""})]}),p.jsxs("dl",{className:"admin-cash-audit-group-summary",children:[p.jsxs("div",{children:[p.jsx("dt",{children:""}),p.jsxs("dd",{children:[xt.format(Re.totalCoins)," "]})]}),p.jsxs("div",{children:[p.jsx("dt",{children:""}),p.jsx("dd",{children:$e.format(Re.coinTotal)})]})]})]}),p.jsxs("table",{className:"admin-table admin-cash-audit-table",children:[p.jsx("thead",{children:p.jsxs("tr",{children:[p.jsx("th",{scope:"col",children:""}),p.jsx("th",{scope:"col",children:""}),p.jsx("th",{scope:"col",children:""})]})}),p.jsx("tbody",{children:Re.coinItems.map(fe=>p.jsxs("tr",{children:[p.jsx("th",{scope:"row",children:fe.label}),p.jsxs("td",{children:[p.jsxs("label",{className:"sr-only",htmlFor:`denomination-${fe.value}`,children:[fe.label,""]}),p.jsxs("div",{className:"admin-cash-audit-count-input",children:[p.jsx("input",{id:`denomination-${fe.value}`,className:"admin-input admin-input--compact",type:"number",min:0,step:1,inputMode:"numeric",pattern:"[0-9]*",value:fe.count,onChange:fr(fe.value)}),p.jsx("span",{className:"admin-cash-audit-count-suffix",children:""})]})]}),p.jsx("td",{className:"admin-text-right admin-cash-audit-value",children:$e.format(fe.subtotal)})]},`coin-${fe.value}`))}),p.jsx("tfoot",{children:p.jsxs("tr",{children:[p.jsx("th",{scope:"row",children:""}),p.jsx("td",{children:p.jsxs("span",{className:"admin-cash-audit-total-chip",children:[xt.format(Re.totalCoins)," "]})}),p.jsx("td",{className:"admin-text-right admin-cash-audit-value",children:$e.format(Re.coinTotal)})]})})]})]}),p.jsxs("section",{className:"admin-card admin-cash-audit-actions",children:[p.jsx("header",{className:"admin-card-header",children:p.jsxs("div",{children:[p.jsx("h3",{children:""}),p.jsx("p",{children:""})]})}),p.jsxs("div",{className:"admin-cash-audit-note-field",children:[p.jsx("label",{htmlFor:"cash-audit-note",children:""}),p.jsx("textarea",{id:"cash-audit-note",className:"admin-textarea",value:a,maxLength:400,placeholder:": 15:30 :  100",onChange:fe=>o(fe.target.value)})]}),p.jsxs("div",{className:"admin-cash-audit-buttons",children:[p.jsx("button",{type:"button",className:"admin-secondary-button",onClick:Ae,children:""}),w==="open"?p.jsx("button",{type:"button",className:"admin-primary-button",onClick:Y,disabled:c,children:c?"":""}):p.jsx("button",{type:"button",className:"admin-primary-button",onClick:je,disabled:c,children:c?"":""})]}),p.jsxs("div",{className:"admin-cash-audit-feedback",children:[p.jsxs("span",{children:[" ",$e.format(Re.grandTotal)," / ",Re.totalPieces," "]}),p.jsxs("span",{className:"admin-cash-audit-feedback-muted",children:[" ",xt.format(V)," ",$e.format(Ze),""]}),p.jsxs("span",{className:"admin-cash-audit-feedback-muted",children:[" ",Bn,"+",xt.format(O.plusCount)," / -",xt.format(O.minusCount)," "]}),p.jsxs("span",{className:"admin-cash-audit-feedback-muted",children:[" ",zt]}),g&&p.jsxs("span",{className:"admin-cash-audit-feedback-muted",children:[": ",Nb.format(g)]})]}),d&&p.jsx("p",{className:"admin-cash-audit-error",children:d})]})]}),p.jsxs("section",{className:"admin-card admin-cash-audit-report",ref:j,children:[p.jsxs("header",{className:"admin-cash-audit-report-header",children:[p.jsx("p",{className:"admin-content-overline",children:""}),p.jsx("h3",{children:$e.format(Re.grandTotal)}),p.jsxs("div",{className:"admin-cash-audit-report-meta",children:[p.jsxs("span",{children:[" ",$e.format(Re.billTotal)]}),p.jsxs("span",{children:[" ",$e.format(Re.coinTotal)]}),p.jsxs("span",{children:[" ",xt.format(V)," ",$e.format(Ze),""]}),p.jsxs("span",{children:[" ",Bn,"+",xt.format(O.plusCount)," / -",xt.format(O.minusCount)," "]}),p.jsxs("span",{children:[" ",xt.format(Re.totalPieces)," "]}),p.jsxs("span",{children:[" ",xt.format(q)," ",$e.format(Et),""]}),p.jsxs("span",{children:["50 ",xt.format(M)," ",$e.format(In)," 100 ",xt.format(R)," ",$e.format(Kn),""]}),(w==="middle"||w==="close")&&p.jsxs(p.Fragment,{children:[p.jsxs("span",{className:"admin-cash-audit-report-summary-item paid",children:[": ",$e.format(ye.paidTotal),"",xt.format(ye.paidCount)," "]}),p.jsxs("span",{className:"admin-cash-audit-report-summary-item unpaid",children:[": ",$e.format(ye.unpaidTotal),"",xt.format(ye.unpaidCount)," "]}),p.jsxs("span",{className:_r?"admin-cash-audit-balance-status-balanced":"admin-cash-audit-balance-status-unbalanced",children:[": ",_r?" ":" ",": ",Kr(cn),""]}),p.jsxs("span",{children:[": ",$e.format(Pt),ve&&`: ${$e.format(ve)} + : ${$e.format(ye.paidTotal)} - : ${$e.format(Et)} + : ${Kr(O.totalAmount)}`,!ve&&`: ${$e.format(ye.paidTotal)} - : ${$e.format(Et)} + : ${Kr(O.totalAmount)}`]})]})]}),p.jsxs("p",{className:"admin-cash-audit-timestamp",children:[": ",Nb.format(tn)]}),p.jsxs("p",{className:"admin-cash-audit-shift-label",children:[": ",zt]})]}),p.jsxs("div",{className:"admin-cash-audit-report-grid",children:[p.jsxs("article",{children:[p.jsx("h4",{children:""}),p.jsxs("table",{children:[p.jsx("thead",{children:p.jsxs("tr",{children:[p.jsx("th",{scope:"col",children:""}),p.jsx("th",{scope:"col",children:""}),p.jsx("th",{scope:"col",children:""})]})}),p.jsx("tbody",{children:Re.billItems.map(fe=>p.jsxs("tr",{children:[p.jsx("td",{children:fe.label}),p.jsxs("td",{children:[xt.format(fe.count)," "]}),p.jsx("td",{children:$e.format(fe.subtotal)})]},`report-bill-${fe.value}`))})]})]}),p.jsxs("article",{children:[p.jsx("h4",{children:""}),p.jsxs("table",{children:[p.jsx("thead",{children:p.jsxs("tr",{children:[p.jsx("th",{scope:"col",children:""}),p.jsx("th",{scope:"col",children:""}),p.jsx("th",{scope:"col",children:""})]})}),p.jsx("tbody",{children:Re.coinItems.map(fe=>p.jsxs("tr",{children:[p.jsx("td",{children:fe.label}),p.jsxs("td",{children:[xt.format(fe.count)," "]}),p.jsx("td",{children:$e.format(fe.subtotal)})]},`report-coin-${fe.value}`))})]})]}),p.jsxs("article",{children:[p.jsx("h4",{children:""}),p.jsxs("table",{children:[p.jsx("thead",{children:p.jsxs("tr",{children:[p.jsx("th",{scope:"col",children:""}),p.jsx("th",{scope:"col",children:""}),p.jsx("th",{scope:"col",children:""})]})}),p.jsxs("tbody",{children:[p.jsxs("tr",{children:[p.jsx("td",{children:"50"}),p.jsxs("td",{children:[xt.format(M)," "]}),p.jsx("td",{children:$e.format(In)})]}),p.jsxs("tr",{children:[p.jsx("td",{children:"100"}),p.jsxs("td",{children:[xt.format(R)," "]}),p.jsx("td",{children:$e.format(Kn)})]}),p.jsxs("tr",{children:[p.jsx("td",{children:""}),p.jsxs("td",{children:[xt.format(q)," "]}),p.jsx("td",{children:$e.format(Et)})]})]})]})]}),p.jsxs("article",{children:[p.jsx("h4",{children:""}),p.jsxs("table",{children:[p.jsx("thead",{children:p.jsxs("tr",{children:[p.jsx("th",{scope:"col",children:""}),p.jsx("th",{scope:"col",children:""}),p.jsx("th",{scope:"col",children:""})]})}),p.jsxs("tbody",{children:[p.jsxs("tr",{children:[p.jsxs("td",{children:["+",$e.format(mi)]}),p.jsxs("td",{children:[xt.format(O.plusCount)," "]}),p.jsx("td",{children:Kr(Ln)})]}),p.jsxs("tr",{children:[p.jsxs("td",{children:["-",$e.format(mi)]}),p.jsxs("td",{children:[xt.format(O.minusCount)," "]}),p.jsx("td",{children:Kr(cr)})]}),p.jsxs("tr",{children:[p.jsx("td",{children:""}),p.jsxs("td",{children:[xt.format(ur)," "]}),p.jsx("td",{children:Kr(O.totalAmount)})]})]})]})]})]}),p.jsxs("div",{className:"admin-cash-audit-note-preview",children:[p.jsx("h4",{children:""}),p.jsx("p",{children:a||""})]}),(w==="middle"||w==="close")&&p.jsxs("div",{className:"admin-cash-audit-report-adjustment",children:[p.jsx("h4",{children:""}),p.jsxs("div",{className:"admin-cash-audit-adjustment-breakdown",children:[p.jsxs("div",{className:"admin-cash-audit-adjustment-row",children:[p.jsx("span",{children:""}),p.jsx("strong",{children:gt?$e.format(gt.openTotal):""})]}),p.jsxs("div",{className:"admin-cash-audit-adjustment-row",children:[p.jsx("span",{children:""}),p.jsxs("strong",{children:["+",$e.format(ye.paidTotal)]})]}),p.jsxs("div",{className:"admin-cash-audit-adjustment-row",children:[p.jsx("span",{children:""}),p.jsxs("strong",{children:["-",$e.format(Et)]})]}),p.jsxs("div",{className:"admin-cash-audit-adjustment-row",children:[p.jsx("span",{children:""}),p.jsx("strong",{children:Kr(O.totalAmount)})]}),p.jsx("hr",{className:"admin-cash-audit-adjustment-divider"}),p.jsxs("div",{className:"admin-cash-audit-adjustment-row admin-cash-audit-adjustment-total",children:[p.jsx("span",{children:""}),p.jsx("strong",{children:gt?$e.format(gt.expectedAmount):""})]}),p.jsx("hr",{className:"admin-cash-audit-adjustment-divider"}),p.jsxs("div",{className:"admin-cash-audit-adjustment-row",children:[p.jsx("span",{children:""}),p.jsx("strong",{children:$e.format(Re.grandTotal)})]}),gt&&p.jsxs("div",{className:`admin-cash-audit-adjustment-row admin-cash-audit-adjustment-comparison ${gt.isMatched?"is-matched":"is-unmatched"}`,children:[p.jsx("span",{children:""}),p.jsxs("strong",{children:[gt.isMatched?" ":" ","",Kr(gt.difference),""]})]})]})]})]})]})}const Rb=[{id:"dashboard",label:"",path:"/admin/dashboard",icon:"",allowedRoles:["admin"]},{id:"orders",label:"",path:"/admin/orders",icon:"",allowedRoles:["admin"]},{id:"production",label:"",path:"/admin/production",icon:"",allowedRoles:["admin","staff"]},{id:"serving",label:"",path:"/admin/serving",icon:"",allowedRoles:["admin","staff"]},{id:"payments",label:"",path:"/admin/payments",icon:"",allowedRoles:["admin","staff"]},{id:"cash-audit",label:"",path:"/admin/cash-audit",icon:"",allowedRoles:["admin"]},{id:"reception",label:"",path:"/admin/reception",icon:"",allowedRoles:["admin"]},{id:"export",label:"",path:"/admin/export",icon:"",allowedRoles:["admin"]},{id:"settings",label:"",path:"/admin/settings",icon:"",allowedRoles:["admin"]}];function eF(){const[n,e]=P.useState(!1),[t,r]=P.useState(!0),i=Xi(),a=ol(),{roles:o,signOut:c}=yp(),u=P.useCallback(C=>C.some(k=>o.includes(k)),[o]),d=P.useMemo(()=>Rb.filter(C=>u(C.allowedRoles)),[u]),m=d[0]?.path??"/admin";P.useEffect(()=>{e(!1)},[i.pathname]);const g=P.useMemo(()=>{const C=d.find(k=>i.pathname.startsWith(k.path));return C||(Rb.find(k=>i.pathname.startsWith(k.path))??null)},[d,i.pathname]);P.useEffect(()=>{g&&!u(g.allowedRoles)&&d.length>0&&a(d[0].path,{replace:!0})},[g,d,u,a]);const _=t||n,w=()=>{r(C=>!C),e(!1)},A=()=>{c()},S=["admin","kitchen","staff"],D=["admin-shell",t?"sidebar-pinned":"",n?"sidebar-open":""].filter(Boolean).join(" ");return p.jsxs("div",{className:D,children:[p.jsxs("button",{type:"button",className:"admin-hamburger","aria-controls":"admin-sidebar","aria-expanded":n,onClick:()=>e(C=>!C),children:[p.jsx("span",{className:"admin-hamburger-bar"}),p.jsx("span",{className:"admin-hamburger-bar"}),p.jsx("span",{className:"admin-hamburger-bar"}),p.jsx("span",{className:"sr-only",children:""})]}),p.jsxs("aside",{id:"admin-sidebar",className:`admin-sidebar${_?" open":""}${t?" pinned":""}`,children:[p.jsx("div",{className:"admin-sidebar-header",children:p.jsxs("div",{children:[p.jsx("p",{className:"admin-sidebar-title",children:""}),p.jsx("p",{className:"admin-sidebar-subtitle",children:""})]})}),p.jsx("nav",{"aria-label":"",className:"admin-sidebar-nav",children:p.jsx("ul",{children:d.map(C=>{const k=g?.id===C.id;return p.jsx("li",{children:p.jsxs("button",{type:"button",className:`admin-nav-button${k?" active":""}`,onClick:()=>a(C.path),children:[p.jsx("span",{"aria-hidden":!0,className:"admin-nav-icon",children:C.icon}),p.jsx("span",{children:C.label})]})},C.id)})})}),p.jsxs("div",{className:"admin-sidebar-footer",children:[p.jsxs("button",{type:"button",className:"admin-logout-button",onClick:A,children:[p.jsx("span",{"aria-hidden":!0,className:"admin-nav-icon",children:""}),p.jsx("span",{children:""})]}),p.jsxs("p",{className:"admin-roles",children:[":"," ",S.map(C=>{const k=o.includes(C);return p.jsx("span",{className:`admin-badge${k?"":" muted"}`,children:C},C)})]})]})]}),p.jsxs("div",{className:"admin-content",children:[p.jsxs("header",{className:"admin-content-header",children:[p.jsxs("div",{children:[p.jsxs("p",{className:"admin-content-overline",children:[g?.label??"",""]}),p.jsx("h1",{children:g?.label??""})]}),p.jsx("div",{className:"admin-header-actions",children:p.jsxs("button",{type:"button",className:`admin-sidebar-toggle${t?"":" is-collapsed"}`,onClick:w,children:[p.jsx("span",{className:"dot","aria-hidden":!0}),t?"":""]})})]}),p.jsx("section",{className:"admin-content-main",children:p.jsxs(ES,{children:[p.jsx(Jt,{index:!0,element:p.jsx(di,{to:m,replace:!0})}),p.jsx(Jt,{path:"dashboard",element:u(["admin"])?p.jsx(bA,{}):p.jsx(di,{to:m,replace:!0})}),p.jsx(Jt,{path:"orders",element:u(["admin"])?p.jsx(DP,{}):p.jsx(di,{to:m,replace:!0})}),p.jsx(Jt,{path:"production",element:u(["admin","staff"])?p.jsx(LP,{}):p.jsx(di,{to:m,replace:!0})}),p.jsx(Jt,{path:"serving",element:u(["admin","staff"])?p.jsx(ZB,{}):p.jsx(di,{to:m,replace:!0})}),p.jsx(Jt,{path:"payments",element:u(["admin","staff"])?p.jsx(YB,{}):p.jsx(di,{to:m,replace:!0})}),p.jsx(Jt,{path:"cash-audit",element:u(["admin"])?p.jsx(JV,{}):p.jsx(di,{to:m,replace:!0})}),p.jsx(Jt,{path:"reception",element:u(["admin"])?p.jsx(KB,{}):p.jsx(di,{to:m,replace:!0})}),p.jsx(Jt,{path:"export",element:u(["admin"])?p.jsx(bA,{mode:"export"}):p.jsx(di,{to:m,replace:!0})}),p.jsx(Jt,{path:"settings",element:u(["admin"])?p.jsx(iV,{}):p.jsx(di,{to:m,replace:!0})}),p.jsx(Jt,{path:"*",element:p.jsx(di,{to:m,replace:!0})})]})})]})]})}const r2="order-history.v1",tF=20,Nv=new Set,i2=()=>typeof window<"u"&&typeof window.localStorage<"u",rI=()=>{if(!i2())return[];try{const n=window.localStorage.getItem(r2);if(!n)return[];const e=JSON.parse(n);return Array.isArray(e)?e.filter(t=>t&&typeof t=="object"&&"orderId"in t&&"ticket"in t).map(t=>{const r=typeof t.createdAt=="string"||t.createdAt instanceof Date?new Date(t.createdAt):void 0,i=r&&!Number.isNaN(r.getTime())?r:void 0;return{...t,callNumber:typeof t.callNumber=="number"&&Number.isFinite(t.callNumber)?t.callNumber:0,createdAt:i}}):[]}catch(n){return console.warn("Failed to parse order history from storage",n),[]}},iI=n=>{if(i2())try{window.localStorage.setItem(r2,JSON.stringify(n))}catch(e){console.warn("Failed to write order history to storage",e)}},a2=()=>{Nv.forEach(n=>n())},nF=()=>rI(),rF=n=>{const e=rI(),r=[{...n,callNumber:typeof n.callNumber=="number"&&Number.isFinite(n.callNumber)?n.callNumber:0,savedAt:new Date().toISOString()},...e.filter(i=>i.orderId!==n.orderId&&i.ticket!==n.ticket)].slice(0,tF);return iI(r),a2(),r},iF=()=>{iI([]),a2()},aF=n=>(Nv.add(n),()=>{Nv.delete(n)});i2()&&window.addEventListener("storage",n=>{n.key===r2&&a2()});const Ob=()=>nF();function sF(){return P.useSyncExternalStore(aF,Ob,Ob)}function oF(){const n=sF(),{language:e}=Yi(),t=ss[e].status,r=()=>{(typeof window>"u"||window.confirm(t.historyClearConfirm))&&iF()};return p.jsxs("div",{className:"content-container",children:[p.jsxs("section",{className:"content-card",children:[p.jsx("h1",{className:"section-title",children:t.title}),p.jsx("p",{className:"section-description",children:t.descriptionLead}),p.jsx("p",{className:"section-description",children:t.descriptionFollow})]}),n.length>0&&p.jsxs("section",{className:"content-card history-card","aria-live":"polite",children:[p.jsxs("div",{className:"history-header",children:[p.jsx("h2",{className:"section-title",children:t.historyTitle}),p.jsx("button",{type:"button",className:"history-clear",onClick:r,children:t.historyClear})]}),p.jsx("p",{className:"history-description",children:t.historyDescription}),p.jsx("ul",{className:"order-history-list",children:n.map(i=>p.jsxs("li",{className:"order-history-item","aria-live":"polite",children:[p.jsx("div",{className:"order-history-row",children:p.jsx("span",{className:"order-history-date",children:new Date(i.savedAt).toLocaleString()})}),p.jsxs("div",{className:"order-history-row meta",children:[p.jsxs("span",{children:[t.historyCallNumberLabel,":"," ",i.callNumber>0?i.callNumber:t.historyPendingCallNumber]}),p.jsxs("span",{children:[t.historyOrderIdLabel,": ",i.orderId]})]}),p.jsx("div",{className:"order-history-row meta",children:p.jsxs("span",{children:[t.historyTotalLabel,": ",i.total.toLocaleString()]})})]},i.orderId))})]})]})}var rc={},ag,Db;function lF(){return Db||(Db=1,ag=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then}),ag}var sg={},zs={},Mb;function dl(){if(Mb)return zs;Mb=1;let n;const e=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];return zs.getSymbolSize=function(r){if(!r)throw new Error('"version" cannot be null or undefined');if(r<1||r>40)throw new Error('"version" should be in range from 1 to 40');return r*4+17},zs.getSymbolTotalCodewords=function(r){return e[r]},zs.getBCHDigit=function(t){let r=0;for(;t!==0;)r++,t>>>=1;return r},zs.setToSJISFunction=function(r){if(typeof r!="function")throw new Error('"toSJISFunc" is not a valid function.');n=r},zs.isKanjiModeEnabled=function(){return typeof n<"u"},zs.toSJIS=function(r){return n(r)},zs}var og={},Pb;function s2(){return Pb||(Pb=1,(function(n){n.L={bit:1},n.M={bit:0},n.Q={bit:3},n.H={bit:2};function e(t){if(typeof t!="string")throw new Error("Param is not a string");switch(t.toLowerCase()){case"l":case"low":return n.L;case"m":case"medium":return n.M;case"q":case"quartile":return n.Q;case"h":case"high":return n.H;default:throw new Error("Unknown EC Level: "+t)}}n.isValid=function(r){return r&&typeof r.bit<"u"&&r.bit>=0&&r.bit<4},n.from=function(r,i){if(n.isValid(r))return r;try{return e(r)}catch{return i}}})(og)),og}var lg,kb;function cF(){if(kb)return lg;kb=1;function n(){this.buffer=[],this.length=0}return n.prototype={get:function(e){const t=Math.floor(e/8);return(this.buffer[t]>>>7-e%8&1)===1},put:function(e,t){for(let r=0;r<t;r++)this.putBit((e>>>t-r-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(e){const t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}},lg=n,lg}var cg,jb;function uF(){if(jb)return cg;jb=1;function n(e){if(!e||e<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=e,this.data=new Uint8Array(e*e),this.reservedBit=new Uint8Array(e*e)}return n.prototype.set=function(e,t,r,i){const a=e*this.size+t;this.data[a]=r,i&&(this.reservedBit[a]=!0)},n.prototype.get=function(e,t){return this.data[e*this.size+t]},n.prototype.xor=function(e,t,r){this.data[e*this.size+t]^=r},n.prototype.isReserved=function(e,t){return this.reservedBit[e*this.size+t]},cg=n,cg}var ug={},Lb;function fF(){return Lb||(Lb=1,(function(n){const e=dl().getSymbolSize;n.getRowColCoords=function(r){if(r===1)return[];const i=Math.floor(r/7)+2,a=e(r),o=a===145?26:Math.ceil((a-13)/(2*i-2))*2,c=[a-7];for(let u=1;u<i-1;u++)c[u]=c[u-1]-o;return c.push(6),c.reverse()},n.getPositions=function(r){const i=[],a=n.getRowColCoords(r),o=a.length;for(let c=0;c<o;c++)for(let u=0;u<o;u++)c===0&&u===0||c===0&&u===o-1||c===o-1&&u===0||i.push([a[c],a[u]]);return i}})(ug)),ug}var fg={},Bb;function dF(){if(Bb)return fg;Bb=1;const n=dl().getSymbolSize,e=7;return fg.getPositions=function(r){const i=n(r);return[[0,0],[i-e,0],[0,i-e]]},fg}var dg={},Vb;function hF(){return Vb||(Vb=1,(function(n){n.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const e={N1:3,N2:3,N3:40,N4:10};n.isValid=function(i){return i!=null&&i!==""&&!isNaN(i)&&i>=0&&i<=7},n.from=function(i){return n.isValid(i)?parseInt(i,10):void 0},n.getPenaltyN1=function(i){const a=i.size;let o=0,c=0,u=0,d=null,m=null;for(let g=0;g<a;g++){c=u=0,d=m=null;for(let _=0;_<a;_++){let w=i.get(g,_);w===d?c++:(c>=5&&(o+=e.N1+(c-5)),d=w,c=1),w=i.get(_,g),w===m?u++:(u>=5&&(o+=e.N1+(u-5)),m=w,u=1)}c>=5&&(o+=e.N1+(c-5)),u>=5&&(o+=e.N1+(u-5))}return o},n.getPenaltyN2=function(i){const a=i.size;let o=0;for(let c=0;c<a-1;c++)for(let u=0;u<a-1;u++){const d=i.get(c,u)+i.get(c,u+1)+i.get(c+1,u)+i.get(c+1,u+1);(d===4||d===0)&&o++}return o*e.N2},n.getPenaltyN3=function(i){const a=i.size;let o=0,c=0,u=0;for(let d=0;d<a;d++){c=u=0;for(let m=0;m<a;m++)c=c<<1&2047|i.get(d,m),m>=10&&(c===1488||c===93)&&o++,u=u<<1&2047|i.get(m,d),m>=10&&(u===1488||u===93)&&o++}return o*e.N3},n.getPenaltyN4=function(i){let a=0;const o=i.data.length;for(let u=0;u<o;u++)a+=i.data[u];return Math.abs(Math.ceil(a*100/o/5)-10)*e.N4};function t(r,i,a){switch(r){case n.Patterns.PATTERN000:return(i+a)%2===0;case n.Patterns.PATTERN001:return i%2===0;case n.Patterns.PATTERN010:return a%3===0;case n.Patterns.PATTERN011:return(i+a)%3===0;case n.Patterns.PATTERN100:return(Math.floor(i/2)+Math.floor(a/3))%2===0;case n.Patterns.PATTERN101:return i*a%2+i*a%3===0;case n.Patterns.PATTERN110:return(i*a%2+i*a%3)%2===0;case n.Patterns.PATTERN111:return(i*a%3+(i+a)%2)%2===0;default:throw new Error("bad maskPattern:"+r)}}n.applyMask=function(i,a){const o=a.size;for(let c=0;c<o;c++)for(let u=0;u<o;u++)a.isReserved(u,c)||a.xor(u,c,t(i,u,c))},n.getBestMask=function(i,a){const o=Object.keys(n.Patterns).length;let c=0,u=1/0;for(let d=0;d<o;d++){a(d),n.applyMask(d,i);const m=n.getPenaltyN1(i)+n.getPenaltyN2(i)+n.getPenaltyN3(i)+n.getPenaltyN4(i);n.applyMask(d,i),m<u&&(u=m,c=d)}return c}})(dg)),dg}var Vh={},Fb;function aI(){if(Fb)return Vh;Fb=1;const n=s2(),e=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],t=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];return Vh.getBlocksCount=function(i,a){switch(a){case n.L:return e[(i-1)*4+0];case n.M:return e[(i-1)*4+1];case n.Q:return e[(i-1)*4+2];case n.H:return e[(i-1)*4+3];default:return}},Vh.getTotalCodewordsCount=function(i,a){switch(a){case n.L:return t[(i-1)*4+0];case n.M:return t[(i-1)*4+1];case n.Q:return t[(i-1)*4+2];case n.H:return t[(i-1)*4+3];default:return}},Vh}var hg={},Ju={},Ub;function pF(){if(Ub)return Ju;Ub=1;const n=new Uint8Array(512),e=new Uint8Array(256);return(function(){let r=1;for(let i=0;i<255;i++)n[i]=r,e[r]=i,r<<=1,r&256&&(r^=285);for(let i=255;i<512;i++)n[i]=n[i-255]})(),Ju.log=function(r){if(r<1)throw new Error("log("+r+")");return e[r]},Ju.exp=function(r){return n[r]},Ju.mul=function(r,i){return r===0||i===0?0:n[e[r]+e[i]]},Ju}var zb;function mF(){return zb||(zb=1,(function(n){const e=pF();n.mul=function(r,i){const a=new Uint8Array(r.length+i.length-1);for(let o=0;o<r.length;o++)for(let c=0;c<i.length;c++)a[o+c]^=e.mul(r[o],i[c]);return a},n.mod=function(r,i){let a=new Uint8Array(r);for(;a.length-i.length>=0;){const o=a[0];for(let u=0;u<i.length;u++)a[u]^=e.mul(i[u],o);let c=0;for(;c<a.length&&a[c]===0;)c++;a=a.slice(c)}return a},n.generateECPolynomial=function(r){let i=new Uint8Array([1]);for(let a=0;a<r;a++)i=n.mul(i,new Uint8Array([1,e.exp(a)]));return i}})(hg)),hg}var pg,Hb;function gF(){if(Hb)return pg;Hb=1;const n=mF();function e(t){this.genPoly=void 0,this.degree=t,this.degree&&this.initialize(this.degree)}return e.prototype.initialize=function(r){this.degree=r,this.genPoly=n.generateECPolynomial(this.degree)},e.prototype.encode=function(r){if(!this.genPoly)throw new Error("Encoder not initialized");const i=new Uint8Array(r.length+this.degree);i.set(r);const a=n.mod(i,this.genPoly),o=this.degree-a.length;if(o>0){const c=new Uint8Array(this.degree);return c.set(a,o),c}return a},pg=e,pg}var mg={},gg={},vg={},Gb;function sI(){return Gb||(Gb=1,vg.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40}),vg}var ga={},qb;function oI(){if(qb)return ga;qb=1;const n="[0-9]+",e="[A-Z $%*+\\-./:]+";let t="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";t=t.replace(/u/g,"\\u");const r="(?:(?![A-Z0-9 $%*+\\-./:]|"+t+`)(?:.|[\r
]))+`;ga.KANJI=new RegExp(t,"g"),ga.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),ga.BYTE=new RegExp(r,"g"),ga.NUMERIC=new RegExp(n,"g"),ga.ALPHANUMERIC=new RegExp(e,"g");const i=new RegExp("^"+t+"$"),a=new RegExp("^"+n+"$"),o=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");return ga.testKanji=function(u){return i.test(u)},ga.testNumeric=function(u){return a.test(u)},ga.testAlphanumeric=function(u){return o.test(u)},ga}var $b;function hl(){return $b||($b=1,(function(n){const e=sI(),t=oI();n.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},n.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},n.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},n.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},n.MIXED={bit:-1},n.getCharCountIndicator=function(a,o){if(!a.ccBits)throw new Error("Invalid mode: "+a);if(!e.isValid(o))throw new Error("Invalid version: "+o);return o>=1&&o<10?a.ccBits[0]:o<27?a.ccBits[1]:a.ccBits[2]},n.getBestModeForData=function(a){return t.testNumeric(a)?n.NUMERIC:t.testAlphanumeric(a)?n.ALPHANUMERIC:t.testKanji(a)?n.KANJI:n.BYTE},n.toString=function(a){if(a&&a.id)return a.id;throw new Error("Invalid mode")},n.isValid=function(a){return a&&a.bit&&a.ccBits};function r(i){if(typeof i!="string")throw new Error("Param is not a string");switch(i.toLowerCase()){case"numeric":return n.NUMERIC;case"alphanumeric":return n.ALPHANUMERIC;case"kanji":return n.KANJI;case"byte":return n.BYTE;default:throw new Error("Unknown mode: "+i)}}n.from=function(a,o){if(n.isValid(a))return a;try{return r(a)}catch{return o}}})(gg)),gg}var Xb;function vF(){return Xb||(Xb=1,(function(n){const e=dl(),t=aI(),r=s2(),i=hl(),a=sI(),o=7973,c=e.getBCHDigit(o);function u(_,w,A){for(let S=1;S<=40;S++)if(w<=n.getCapacity(S,A,_))return S}function d(_,w){return i.getCharCountIndicator(_,w)+4}function m(_,w){let A=0;return _.forEach(function(S){const D=d(S.mode,w);A+=D+S.getBitsLength()}),A}function g(_,w){for(let A=1;A<=40;A++)if(m(_,A)<=n.getCapacity(A,w,i.MIXED))return A}n.from=function(w,A){return a.isValid(w)?parseInt(w,10):A},n.getCapacity=function(w,A,S){if(!a.isValid(w))throw new Error("Invalid QR Code version");typeof S>"u"&&(S=i.BYTE);const D=e.getSymbolTotalCodewords(w),C=t.getTotalCodewordsCount(w,A),k=(D-C)*8;if(S===i.MIXED)return k;const V=k-d(S,w);switch(S){case i.NUMERIC:return Math.floor(V/10*3);case i.ALPHANUMERIC:return Math.floor(V/11*2);case i.KANJI:return Math.floor(V/13);case i.BYTE:default:return Math.floor(V/8)}},n.getBestVersionForData=function(w,A){let S;const D=r.from(A,r.M);if(Array.isArray(w)){if(w.length>1)return g(w,D);if(w.length===0)return 1;S=w[0]}else S=w;return u(S.mode,S.getLength(),D)},n.getEncodedBits=function(w){if(!a.isValid(w)||w<7)throw new Error("Invalid QR Code version");let A=w<<12;for(;e.getBCHDigit(A)-c>=0;)A^=o<<e.getBCHDigit(A)-c;return w<<12|A}})(mg)),mg}var yg={},Yb;function yF(){if(Yb)return yg;Yb=1;const n=dl(),e=1335,t=21522,r=n.getBCHDigit(e);return yg.getEncodedBits=function(a,o){const c=a.bit<<3|o;let u=c<<10;for(;n.getBCHDigit(u)-r>=0;)u^=e<<n.getBCHDigit(u)-r;return(c<<10|u)^t},yg}var _g={},xg,Kb;function _F(){if(Kb)return xg;Kb=1;const n=hl();function e(t){this.mode=n.NUMERIC,this.data=t.toString()}return e.getBitsLength=function(r){return 10*Math.floor(r/3)+(r%3?r%3*3+1:0)},e.prototype.getLength=function(){return this.data.length},e.prototype.getBitsLength=function(){return e.getBitsLength(this.data.length)},e.prototype.write=function(r){let i,a,o;for(i=0;i+3<=this.data.length;i+=3)a=this.data.substr(i,3),o=parseInt(a,10),r.put(o,10);const c=this.data.length-i;c>0&&(a=this.data.substr(i),o=parseInt(a,10),r.put(o,c*3+1))},xg=e,xg}var wg,Wb;function xF(){if(Wb)return wg;Wb=1;const n=hl(),e=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function t(r){this.mode=n.ALPHANUMERIC,this.data=r}return t.getBitsLength=function(i){return 11*Math.floor(i/2)+6*(i%2)},t.prototype.getLength=function(){return this.data.length},t.prototype.getBitsLength=function(){return t.getBitsLength(this.data.length)},t.prototype.write=function(i){let a;for(a=0;a+2<=this.data.length;a+=2){let o=e.indexOf(this.data[a])*45;o+=e.indexOf(this.data[a+1]),i.put(o,11)}this.data.length%2&&i.put(e.indexOf(this.data[a]),6)},wg=t,wg}var Eg,Qb;function wF(){if(Qb)return Eg;Qb=1;const n=hl();function e(t){this.mode=n.BYTE,typeof t=="string"?this.data=new TextEncoder().encode(t):this.data=new Uint8Array(t)}return e.getBitsLength=function(r){return r*8},e.prototype.getLength=function(){return this.data.length},e.prototype.getBitsLength=function(){return e.getBitsLength(this.data.length)},e.prototype.write=function(t){for(let r=0,i=this.data.length;r<i;r++)t.put(this.data[r],8)},Eg=e,Eg}var Ag,Zb;function EF(){if(Zb)return Ag;Zb=1;const n=hl(),e=dl();function t(r){this.mode=n.KANJI,this.data=r}return t.getBitsLength=function(i){return i*13},t.prototype.getLength=function(){return this.data.length},t.prototype.getBitsLength=function(){return t.getBitsLength(this.data.length)},t.prototype.write=function(r){let i;for(i=0;i<this.data.length;i++){let a=e.toSJIS(this.data[i]);if(a>=33088&&a<=40956)a-=33088;else if(a>=57408&&a<=60351)a-=49472;else throw new Error("Invalid SJIS character: "+this.data[i]+`
Make sure your charset is UTF-8`);a=(a>>>8&255)*192+(a&255),r.put(a,13)}},Ag=t,Ag}var bg={exports:{}},Jb;function AF(){return Jb||(Jb=1,(function(n){var e={single_source_shortest_paths:function(t,r,i){var a={},o={};o[r]=0;var c=e.PriorityQueue.make();c.push(r,0);for(var u,d,m,g,_,w,A,S,D;!c.empty();){u=c.pop(),d=u.value,g=u.cost,_=t[d]||{};for(m in _)_.hasOwnProperty(m)&&(w=_[m],A=g+w,S=o[m],D=typeof o[m]>"u",(D||S>A)&&(o[m]=A,c.push(m,A),a[m]=d))}if(typeof i<"u"&&typeof o[i]>"u"){var C=["Could not find a path from ",r," to ",i,"."].join("");throw new Error(C)}return a},extract_shortest_path_from_predecessor_list:function(t,r){for(var i=[],a=r;a;)i.push(a),t[a],a=t[a];return i.reverse(),i},find_path:function(t,r,i){var a=e.single_source_shortest_paths(t,r,i);return e.extract_shortest_path_from_predecessor_list(a,i)},PriorityQueue:{make:function(t){var r=e.PriorityQueue,i={},a;t=t||{};for(a in r)r.hasOwnProperty(a)&&(i[a]=r[a]);return i.queue=[],i.sorter=t.sorter||r.default_sorter,i},default_sorter:function(t,r){return t.cost-r.cost},push:function(t,r){var i={value:t,cost:r};this.queue.push(i),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};n.exports=e})(bg)),bg.exports}var eS;function bF(){return eS||(eS=1,(function(n){const e=hl(),t=_F(),r=xF(),i=wF(),a=EF(),o=oI(),c=dl(),u=AF();function d(C){return unescape(encodeURIComponent(C)).length}function m(C,k,V){const z=[];let q;for(;(q=C.exec(V))!==null;)z.push({data:q[0],index:q.index,mode:k,length:q[0].length});return z}function g(C){const k=m(o.NUMERIC,e.NUMERIC,C),V=m(o.ALPHANUMERIC,e.ALPHANUMERIC,C);let z,q;return c.isKanjiModeEnabled()?(z=m(o.BYTE,e.BYTE,C),q=m(o.KANJI,e.KANJI,C)):(z=m(o.BYTE_KANJI,e.BYTE,C),q=[]),k.concat(V,z,q).sort(function(M,b){return M.index-b.index}).map(function(M){return{data:M.data,mode:M.mode,length:M.length}})}function _(C,k){switch(k){case e.NUMERIC:return t.getBitsLength(C);case e.ALPHANUMERIC:return r.getBitsLength(C);case e.KANJI:return a.getBitsLength(C);case e.BYTE:return i.getBitsLength(C)}}function w(C){return C.reduce(function(k,V){const z=k.length-1>=0?k[k.length-1]:null;return z&&z.mode===V.mode?(k[k.length-1].data+=V.data,k):(k.push(V),k)},[])}function A(C){const k=[];for(let V=0;V<C.length;V++){const z=C[V];switch(z.mode){case e.NUMERIC:k.push([z,{data:z.data,mode:e.ALPHANUMERIC,length:z.length},{data:z.data,mode:e.BYTE,length:z.length}]);break;case e.ALPHANUMERIC:k.push([z,{data:z.data,mode:e.BYTE,length:z.length}]);break;case e.KANJI:k.push([z,{data:z.data,mode:e.BYTE,length:d(z.data)}]);break;case e.BYTE:k.push([{data:z.data,mode:e.BYTE,length:d(z.data)}])}}return k}function S(C,k){const V={},z={start:{}};let q=["start"];for(let $=0;$<C.length;$++){const M=C[$],b=[];for(let R=0;R<M.length;R++){const I=M[R],O=""+$+R;b.push(O),V[O]={node:I,lastCount:0},z[O]={};for(let L=0;L<q.length;L++){const j=q[L];V[j]&&V[j].node.mode===I.mode?(z[j][O]=_(V[j].lastCount+I.length,I.mode)-_(V[j].lastCount,I.mode),V[j].lastCount+=I.length):(V[j]&&(V[j].lastCount=I.length),z[j][O]=_(I.length,I.mode)+4+e.getCharCountIndicator(I.mode,k))}}q=b}for(let $=0;$<q.length;$++)z[q[$]].end=0;return{map:z,table:V}}function D(C,k){let V;const z=e.getBestModeForData(C);if(V=e.from(k,z),V!==e.BYTE&&V.bit<z.bit)throw new Error('"'+C+'" cannot be encoded with mode '+e.toString(V)+`.
 Suggested mode is: `+e.toString(z));switch(V===e.KANJI&&!c.isKanjiModeEnabled()&&(V=e.BYTE),V){case e.NUMERIC:return new t(C);case e.ALPHANUMERIC:return new r(C);case e.KANJI:return new a(C);case e.BYTE:return new i(C)}}n.fromArray=function(k){return k.reduce(function(V,z){return typeof z=="string"?V.push(D(z,null)):z.data&&V.push(D(z.data,z.mode)),V},[])},n.fromString=function(k,V){const z=g(k,c.isKanjiModeEnabled()),q=A(z),$=S(q,V),M=u.find_path($.map,"start","end"),b=[];for(let R=1;R<M.length-1;R++)b.push($.table[M[R]].node);return n.fromArray(w(b))},n.rawSplit=function(k){return n.fromArray(g(k,c.isKanjiModeEnabled()))}})(_g)),_g}var tS;function SF(){if(tS)return sg;tS=1;const n=dl(),e=s2(),t=cF(),r=uF(),i=fF(),a=dF(),o=hF(),c=aI(),u=gF(),d=vF(),m=yF(),g=hl(),_=bF();function w($,M){const b=$.size,R=a.getPositions(M);for(let I=0;I<R.length;I++){const O=R[I][0],L=R[I][1];for(let j=-1;j<=7;j++)if(!(O+j<=-1||b<=O+j))for(let W=-1;W<=7;W++)L+W<=-1||b<=L+W||(j>=0&&j<=6&&(W===0||W===6)||W>=0&&W<=6&&(j===0||j===6)||j>=2&&j<=4&&W>=2&&W<=4?$.set(O+j,L+W,!0,!0):$.set(O+j,L+W,!1,!0))}}function A($){const M=$.size;for(let b=8;b<M-8;b++){const R=b%2===0;$.set(b,6,R,!0),$.set(6,b,R,!0)}}function S($,M){const b=i.getPositions(M);for(let R=0;R<b.length;R++){const I=b[R][0],O=b[R][1];for(let L=-2;L<=2;L++)for(let j=-2;j<=2;j++)L===-2||L===2||j===-2||j===2||L===0&&j===0?$.set(I+L,O+j,!0,!0):$.set(I+L,O+j,!1,!0)}}function D($,M){const b=$.size,R=d.getEncodedBits(M);let I,O,L;for(let j=0;j<18;j++)I=Math.floor(j/3),O=j%3+b-8-3,L=(R>>j&1)===1,$.set(I,O,L,!0),$.set(O,I,L,!0)}function C($,M,b){const R=$.size,I=m.getEncodedBits(M,b);let O,L;for(O=0;O<15;O++)L=(I>>O&1)===1,O<6?$.set(O,8,L,!0):O<8?$.set(O+1,8,L,!0):$.set(R-15+O,8,L,!0),O<8?$.set(8,R-O-1,L,!0):O<9?$.set(8,15-O-1+1,L,!0):$.set(8,15-O-1,L,!0);$.set(R-8,8,1,!0)}function k($,M){const b=$.size;let R=-1,I=b-1,O=7,L=0;for(let j=b-1;j>0;j-=2)for(j===6&&j--;;){for(let W=0;W<2;W++)if(!$.isReserved(I,j-W)){let ge=!1;L<M.length&&(ge=(M[L]>>>O&1)===1),$.set(I,j-W,ge),O--,O===-1&&(L++,O=7)}if(I+=R,I<0||b<=I){I-=R,R=-R;break}}}function V($,M,b){const R=new t;b.forEach(function(W){R.put(W.mode.bit,4),R.put(W.getLength(),g.getCharCountIndicator(W.mode,$)),W.write(R)});const I=n.getSymbolTotalCodewords($),O=c.getTotalCodewordsCount($,M),L=(I-O)*8;for(R.getLengthInBits()+4<=L&&R.put(0,4);R.getLengthInBits()%8!==0;)R.putBit(0);const j=(L-R.getLengthInBits())/8;for(let W=0;W<j;W++)R.put(W%2?17:236,8);return z(R,$,M)}function z($,M,b){const R=n.getSymbolTotalCodewords(M),I=c.getTotalCodewordsCount(M,b),O=R-I,L=c.getBlocksCount(M,b),j=R%L,W=L-j,ge=Math.floor(R/L),H=Math.floor(O/L),G=H+1,le=ge-H,ve=new u(le);let He=0;const Y=new Array(L),ne=new Array(L);let me=0;const we=new Uint8Array($.buffer);for(let Re=0;Re<L;Re++){const zt=Re<W?H:G;Y[Re]=we.slice(He,He+zt),ne[Re]=ve.encode(Y[Re]),He+=zt,me=Math.max(me,zt)}const be=new Uint8Array(R);let ye=0,Te,Ye;for(Te=0;Te<me;Te++)for(Ye=0;Ye<L;Ye++)Te<Y[Ye].length&&(be[ye++]=Y[Ye][Te]);for(Te=0;Te<le;Te++)for(Ye=0;Ye<L;Ye++)be[ye++]=ne[Ye][Te];return be}function q($,M,b,R){let I;if(Array.isArray($))I=_.fromArray($);else if(typeof $=="string"){let ge=M;if(!ge){const H=_.rawSplit($);ge=d.getBestVersionForData(H,b)}I=_.fromString($,ge||40)}else throw new Error("Invalid data");const O=d.getBestVersionForData(I,b);if(!O)throw new Error("The amount of data is too big to be stored in a QR Code");if(!M)M=O;else if(M<O)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+O+`.
`);const L=V(M,b,I),j=n.getSymbolSize(M),W=new r(j);return w(W,M),A(W),S(W,M),C(W,b,0),M>=7&&D(W,M),k(W,L),isNaN(R)&&(R=o.getBestMask(W,C.bind(null,W,b))),o.applyMask(R,W),C(W,b,R),{modules:W,version:M,errorCorrectionLevel:b,maskPattern:R,segments:I}}return sg.create=function(M,b){if(typeof M>"u"||M==="")throw new Error("No input text");let R=e.M,I,O;return typeof b<"u"&&(R=e.from(b.errorCorrectionLevel,e.M),I=d.from(b.version),O=o.from(b.maskPattern),b.toSJISFunc&&n.setToSJISFunction(b.toSJISFunc)),q(M,I,R,O)},sg}var Sg={},Cg={},nS;function lI(){return nS||(nS=1,(function(n){function e(t){if(typeof t=="number"&&(t=t.toString()),typeof t!="string")throw new Error("Color should be defined as hex string");let r=t.slice().replace("#","").split("");if(r.length<3||r.length===5||r.length>8)throw new Error("Invalid hex color: "+t);(r.length===3||r.length===4)&&(r=Array.prototype.concat.apply([],r.map(function(a){return[a,a]}))),r.length===6&&r.push("F","F");const i=parseInt(r.join(""),16);return{r:i>>24&255,g:i>>16&255,b:i>>8&255,a:i&255,hex:"#"+r.slice(0,6).join("")}}n.getOptions=function(r){r||(r={}),r.color||(r.color={});const i=typeof r.margin>"u"||r.margin===null||r.margin<0?4:r.margin,a=r.width&&r.width>=21?r.width:void 0,o=r.scale||4;return{width:a,scale:a?4:o,margin:i,color:{dark:e(r.color.dark||"#000000ff"),light:e(r.color.light||"#ffffffff")},type:r.type,rendererOpts:r.rendererOpts||{}}},n.getScale=function(r,i){return i.width&&i.width>=r+i.margin*2?i.width/(r+i.margin*2):i.scale},n.getImageWidth=function(r,i){const a=n.getScale(r,i);return Math.floor((r+i.margin*2)*a)},n.qrToImageData=function(r,i,a){const o=i.modules.size,c=i.modules.data,u=n.getScale(o,a),d=Math.floor((o+a.margin*2)*u),m=a.margin*u,g=[a.color.light,a.color.dark];for(let _=0;_<d;_++)for(let w=0;w<d;w++){let A=(_*d+w)*4,S=a.color.light;if(_>=m&&w>=m&&_<d-m&&w<d-m){const D=Math.floor((_-m)/u),C=Math.floor((w-m)/u);S=g[c[D*o+C]?1:0]}r[A++]=S.r,r[A++]=S.g,r[A++]=S.b,r[A]=S.a}}})(Cg)),Cg}var rS;function CF(){return rS||(rS=1,(function(n){const e=lI();function t(i,a,o){i.clearRect(0,0,a.width,a.height),a.style||(a.style={}),a.height=o,a.width=o,a.style.height=o+"px",a.style.width=o+"px"}function r(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}n.render=function(a,o,c){let u=c,d=o;typeof u>"u"&&(!o||!o.getContext)&&(u=o,o=void 0),o||(d=r()),u=e.getOptions(u);const m=e.getImageWidth(a.modules.size,u),g=d.getContext("2d"),_=g.createImageData(m,m);return e.qrToImageData(_.data,a,u),t(g,d,m),g.putImageData(_,0,0),d},n.renderToDataURL=function(a,o,c){let u=c;typeof u>"u"&&(!o||!o.getContext)&&(u=o,o=void 0),u||(u={});const d=n.render(a,o,u),m=u.type||"image/png",g=u.rendererOpts||{};return d.toDataURL(m,g.quality)}})(Sg)),Sg}var Tg={},iS;function TF(){if(iS)return Tg;iS=1;const n=lI();function e(i,a){const o=i.a/255,c=a+'="'+i.hex+'"';return o<1?c+" "+a+'-opacity="'+o.toFixed(2).slice(1)+'"':c}function t(i,a,o){let c=i+a;return typeof o<"u"&&(c+=" "+o),c}function r(i,a,o){let c="",u=0,d=!1,m=0;for(let g=0;g<i.length;g++){const _=Math.floor(g%a),w=Math.floor(g/a);!_&&!d&&(d=!0),i[g]?(m++,g>0&&_>0&&i[g-1]||(c+=d?t("M",_+o,.5+w+o):t("m",u,0),u=0,d=!1),_+1<a&&i[g+1]||(c+=t("h",m),m=0)):u++}return c}return Tg.render=function(a,o,c){const u=n.getOptions(o),d=a.modules.size,m=a.modules.data,g=d+u.margin*2,_=u.color.light.a?"<path "+e(u.color.light,"fill")+' d="M0 0h'+g+"v"+g+'H0z"/>':"",w="<path "+e(u.color.dark,"stroke")+' d="'+r(m,d,u.margin)+'"/>',A='viewBox="0 0 '+g+" "+g+'"',D='<svg xmlns="http://www.w3.org/2000/svg" '+(u.width?'width="'+u.width+'" height="'+u.width+'" ':"")+A+' shape-rendering="crispEdges">'+_+w+`</svg>
`;return typeof c=="function"&&c(null,D),D},Tg}var aS;function IF(){if(aS)return rc;aS=1;const n=lF(),e=SF(),t=CF(),r=TF();function i(a,o,c,u,d){const m=[].slice.call(arguments,1),g=m.length,_=typeof m[g-1]=="function";if(!_&&!n())throw new Error("Callback required as last argument");if(_){if(g<2)throw new Error("Too few arguments provided");g===2?(d=c,c=o,o=u=void 0):g===3&&(o.getContext&&typeof d>"u"?(d=u,u=void 0):(d=u,u=c,c=o,o=void 0))}else{if(g<1)throw new Error("Too few arguments provided");return g===1?(c=o,o=u=void 0):g===2&&!o.getContext&&(u=c,c=o,o=void 0),new Promise(function(w,A){try{const S=e.create(c,u);w(a(S,o,u))}catch(S){A(S)}})}try{const w=e.create(c,u);d(null,a(w,o,u))}catch(w){d(w)}}return rc.create=e.create,rc.toCanvas=i.bind(null,t.render),rc.toDataURL=i.bind(null,t.renderToDataURL),rc.toString=i.bind(null,function(a,o,c){return r.render(a,c)}),rc}var NF=IF();const RF=q4(NF),OF=n=>{const e=n.replace(/^\/+/,"").replace(/\/+$/,"");return e?`/${e}`:""},DF=()=>{const n=OF("/Ichinikai/");return typeof window<"u"&&window.location?.origin?`${window.location.origin}${n}`.replace(/\/+$/,""):(n?`https://example.com${n}`:"https://example.com").replace(/\/+$/,"")},cI=n=>`${DF()}/progress/${encodeURIComponent(n)}`,xf=n=>{if(!n)return"";const e=n.trim();if(!e)return"";try{const t=new URL(e),r=t.pathname.match(/\/(?:order\/complete|progress)\/([^/]+)$/i);if(r&&r[1])return decodeURIComponent(r[1]).replace(/[^0-9a-z]/gi,"").toUpperCase();const i=t.searchParams.get("ticket");if(i)return i.replace(/[^0-9a-z]/gi,"").toUpperCase()}catch{}return e.replace(/[^0-9a-z]/gi,"").toUpperCase()},MF=n=>Number.isInteger(n)&&n!==null&&n!==void 0&&n>0?n:0,Fh=n=>{const e=n.items??{};return{orderId:n.orderId,ticket:n.ticket,callNumber:MF(n.callNumber),total:n.total,items:e,payment:n.payment,progress:n.progress,plating:Lr(e,n.plating),createdAt:n.createdAt?new Date(n.createdAt):void 0}},sS=n=>n instanceof Ia&&n.code==="permission-denied",uI=P.createContext(void 0),oS=()=>Object.keys(Hc).reduce((n,e)=>(n[e]=0,n),{});function PF({children:n}){const{menuItems:e}=fl(),[t,r]=P.useState(oS),[i,a]=P.useState(!1),[o,c]=P.useState(null),[u,d]=P.useState(null),m=P.useCallback((M,b)=>{r(R=>({...R,[M]:Math.max(0,Number.isFinite(b)?Math.floor(b):0)}))},[]),g=P.useCallback(()=>{r(oS())},[]),_=P.useMemo(()=>e.map(M=>({item:M,quantity:t[M.key],subtotal:t[M.key]*M.price})).filter(({quantity:M})=>M>0),[t,e]),w=P.useMemo(()=>_.reduce((M,b)=>M+b.subtotal,0),[_]),A=_.length>0;P.useEffect(()=>{r(M=>{let b=!1;const R={...M};return e.forEach(I=>{I.soldOut&&R[I.key]>0&&(R[I.key]=0,b=!0)}),b?R:M})},[e]);const S=P.useCallback(async M=>{const b=cI(M.ticket),R=await RF.toDataURL(b,{width:256,margin:1});return{summary:M,qrCode:R,progressUrl:b}},[]),D=P.useCallback(async()=>{if(i)return null;if(!A)return c("EMPTY_CART"),null;a(!0),c(null),d(null);try{const M=await aP(t),b=Fh(M),R=await S(b);d(R);try{rF(b)}catch(I){console.warn("",I)}return b}catch(M){return console.error(M),c("ORDER_FAILED"),null}finally{a(!1)}},[S,A,t,i]),C=P.useCallback(()=>{d(null)},[]),k=P.useCallback(()=>{g(),C(),c(null)},[C,g]),V=P.useCallback(async()=>{if(!u)return null;try{const M=await EA(u.summary.ticket);if(!M)return d(null),null;let b=null;try{b=await AA(M.orderId)}catch(I){if(!sS(I))throw I;console.info("orders  orderLookup ",I)}const R=Fh(b??M);return d(I=>I&&{...I,summary:R}),R}catch(M){throw console.error("",M),M}},[u]),z=P.useCallback(async M=>{const b=xf(M);if(!b)return null;try{const R=await EA(b);if(!R)return d(null),null;let I=null;try{I=await AA(R.orderId)}catch(j){if(!sS(j))throw j;console.info("orders  orderLookup ",j)}const O=Fh(I??R),L=await S(O);return d(L),O}catch(R){throw console.error("",R),R}},[S]),q=u?.summary.ticket??"";P.useEffect(()=>{if(!q)return;let M=!1;const b=cP(q,R=>{if(!R){d(null);return}const I=Fh(R);d(O=>{if(!O)return O;const L=O.summary;return L.progress!==I.progress||L.payment!==I.payment||L.callNumber!==I.callNumber||L.total!==I.total||L.orderId!==I.orderId?(I.progress===""&&!M&&(M=!0,b()),{...O,summary:I}):O})});return()=>{M||b()}},[q]);const $=P.useMemo(()=>({items:t,updateQuantity:m,resetItems:g,cartItems:_,total:w,hasItems:A,loading:i,error:o,setError:c,confirmOrder:D,orderResult:u,clearOrderResult:C,startNewOrder:k,refreshOrderResult:V,loadOrderByTicket:z}),[t,m,g,_,w,A,i,o,D,u,C,k,V,z]);return p.jsx(uI.Provider,{value:$,children:n})}function o2(){const n=P.useContext(uI);if(!n)throw new Error("useOrderFlow must be used within an OrderFlowProvider");return n}const fI=P.createContext(void 0),kF=6e3;function jF(n,e){const t=Object.entries(e.items).filter(([,r])=>r>0).map(([r,i])=>`${n[r]?.label??r} ${i}`).join(" / ");return{id:`${e.orderId}-${Date.now()}`,orderId:e.orderId,callNumber:e.callNumber??0,total:e.total,itemSummary:t||"",createdAt:e.createdAt??e.updatedAt??new Date,source:"new-order"}}function LF(n){return{id:`test-${Date.now()}`,orderId:n.orderId??"TEST-ORDER",callNumber:n.callNumber??0,total:n.total??0,itemSummary:n.itemSummary??": ",createdAt:n.createdAt?new Date(n.createdAt):new Date,source:"test"}}function BF({children:n}){const[e,t]=P.useState([]),r=P.useRef(new Map),i=P.useRef(new Set),{status:a,hasRole:o}=yp(),{menuItemMap:c}=fl(),u=a==="signed-in"&&o(["admin","staff","kitchen"]),d=P.useCallback(D=>{i.current.forEach(C=>{try{C(D)}catch(k){console.error("OrderToast listener failed",k)}})},[]),m=P.useCallback(D=>{t(k=>k.filter(V=>V.id!==D));const C=r.current.get(D);C&&(window.clearTimeout(C),r.current.delete(D))},[]),g=P.useCallback(D=>{const C=r.current.get(D);C&&window.clearTimeout(C);const k=window.setTimeout(()=>m(D),kF);r.current.set(D,k)},[m]),_=P.useCallback((D,C)=>{t(V=>[...V,D]),g(D.id);const k=C?{...C,toast:D}:{type:D.source,toast:D};return d(k),D},[d,g]),w=P.useCallback((D,C)=>{const k=D.id??`${D.orderId}-${Date.now()}`,V={...D,id:k,source:D.source??"custom"};return _(V,C)},[_]);P.useEffect(()=>{const D=r.current;return()=>{D.forEach(C=>window.clearTimeout(C)),D.clear()}},[]),P.useEffect(()=>{if(!u)return;const D=oP(C=>{const k=jF(c,C);_(k,{type:"new-order",order:C})});return()=>{D?.()}},[u,_,c]),P.useEffect(()=>{const D=tV(C=>{const k=LF(C);_(k,{type:"test"})});return()=>{D?.()}},[_]);const A=P.useCallback(D=>(i.current.add(D),()=>{i.current.delete(D)}),[]),S=P.useMemo(()=>({toasts:e,removeToast:m,addToast:w,registerListener:A}),[w,A,m,e]);return p.jsx(fI.Provider,{value:S,children:n})}function dI(){const n=P.useContext(fI);if(!n)throw new Error("useOrderToasts must be used within an OrderToastProvider");return n}function l2(){const[n,e]=P.useState(!1),[t,r]=P.useState(null);return P.useEffect(()=>{if(Ka){e(!0),r(null);return}const i=dC(Vi,async a=>{try{a||await cC(Vi),e(!0)}catch(o){console.error("",o),r("ANON_SIGNIN_FAILED")}});return()=>i()},[]),{ready:n,error:t}}const VF=P.memo(function({value:e,min:t=0,max:r,onChange:i,ariaLabel:a,decreaseLabel:o,increaseLabel:c,disabled:u=!1}){const d=()=>{if(u)return;const _=e-1;_<t||i(_)},m=()=>{if(u)return;const _=e+1;typeof r=="number"&&_>r||i(_)},g=`quantity-stepper${u?" disabled":""}`;return p.jsxs("div",{className:g,role:"group","aria-label":a,"aria-disabled":u,children:[p.jsx("button",{type:"button",className:"quantity-button decrease",onClick:d,"aria-label":o??"1",disabled:u||e<=t,children:""}),p.jsx("div",{className:"quantity-value","aria-live":"polite",children:e}),p.jsx("button",{type:"button",className:"quantity-button increase",onClick:m,"aria-label":c??"1",disabled:u||typeof r=="number"&&e>=r,children:""})]})});function FF(){const n=ol(),{ready:e,error:t}=l2(),{menuItems:r}=fl(),{items:i,updateQuantity:a,resetItems:o,total:c,hasItems:u,clearOrderResult:d,setError:m}=o2(),{language:g}=Yi(),_=ss[g],[w,A]=P.useState(null),[S,D]=P.useState("food"),[C,k]=P.useState(!1);P.useEffect(()=>{d(),m(null)},[d,m]);const V=q=>{if(q&&q.preventDefault(),A(null),!!e){if(!u){A("EMPTY_CART");return}n("/order/review")}},z=P.useMemo(()=>r.filter(q=>{const $=q.key.startsWith("drink_");return S==="drink"?$:!$}),[r,S]);return p.jsxs("div",{className:"content-container",children:[p.jsxs("section",{className:"content-card",style:{paddingBottom:"0"},children:[p.jsx("h1",{className:"section-title",children:_.orderInput.title}),p.jsx("p",{className:"section-description",style:{marginBottom:"1rem"},children:_.menu.imageNote}),p.jsxs("div",{className:"allergy-warning-container",children:[p.jsxs("div",{className:"allergy-warning-header",onClick:()=>k(!C),role:"button","aria-expanded":C,children:[p.jsx("span",{children:_.orderInput.descriptionLead}),p.jsx("span",{children:C?"":""})]}),C&&p.jsx("div",{className:"allergy-warning-content",children:_.orderInput.descriptionFollow})]}),!e&&!t&&p.jsx("p",{children:_.auth.signingIn}),t&&p.jsx("p",{className:"error-message",children:_.auth.error}),p.jsxs("div",{className:"category-tabs",children:[p.jsx("button",{type:"button",className:`category-tab ${S==="food"?"active":""}`,onClick:()=>D("food"),children:_.orderInput.categories.food}),p.jsx("button",{type:"button",className:`category-tab ${S==="drink"?"active":""}`,onClick:()=>D("drink"),children:_.orderInput.categories.drink})]}),p.jsxs("form",{className:"form-grid",onSubmit:V,style:{paddingBottom:"2rem"},children:[z.map(q=>{const $=Gy(q,g),M=AP(q,g),b=q.soldOut,R=i[q.key]??0,I=R>0,O=`menu-card${b?" sold-out":""}${I?" selected":""}`;return p.jsxs("article",{className:O,"aria-disabled":b,children:[p.jsx("div",{className:"menu-card-media",children:p.jsx("img",{src:q.image,alt:_.menu.imageAlt($),loading:"lazy",decoding:"async",width:320,height:200})}),p.jsxs("div",{className:"menu-card-body",children:[p.jsxs("header",{className:"menu-card-header",children:[p.jsxs("div",{className:"menu-card-title-group",children:[p.jsx("h2",{className:"menu-card-title",children:$}),q.allergens.length>0&&p.jsx("ul",{className:"menu-card-allergens","aria-label":_.menu.allergensLabel($),children:q.allergens.map(L=>{const j=z9[L],W=bP(j.key,g);return p.jsx("li",{className:"menu-card-allergen",title:W,"aria-label":W,children:p.jsx("span",{className:"menu-card-allergen-icon","aria-hidden":"true",children:p.jsx("img",{src:j.icon,alt:W,loading:"lazy",decoding:"async",width:32,height:32})})},j.key)})})]}),p.jsxs("div",{className:"menu-card-status",children:[p.jsxs("span",{className:"menu-card-price",children:["",q.price.toLocaleString()]}),b&&p.jsx("span",{className:"menu-card-badge",role:"status",children:_.menu.soldOutBadge})]})]}),p.jsx("p",{className:"menu-card-description",children:M}),b&&p.jsx("p",{className:"menu-card-soldout-note",children:_.menu.soldOutMessage}),p.jsx("div",{className:"menu-card-footer",children:p.jsx(VF,{value:R,disabled:b,onChange:L=>{b||(a(q.key,L),w&&A(null))},ariaLabel:_.menu.quantityLabel($),decreaseLabel:_.quantityStepper.decrease,increaseLabel:_.quantityStepper.increase})})]})]},q.key)}),w&&p.jsx("p",{style:{color:"#dc2626",margin:0},children:_.errors[w]}),p.jsx("div",{style:{height:"80px",gridColumn:"1 / -1"}})]})]}),p.jsxs("div",{className:"fixed-footer",children:[p.jsxs("div",{className:"fixed-footer-total",children:[p.jsx("span",{className:"fixed-footer-total-label",children:_.orderInput.totalLabel}),p.jsxs("span",{className:"fixed-footer-total-amount",children:["",c.toLocaleString()]})]}),p.jsx("button",{type:"button",className:"button primary fixed-footer-button",onClick:()=>V(),disabled:!e||!u,children:_.orderInput.reviewButton})]})]})}function UF(){const n=ol(),{ready:e,error:t}=l2(),{cartItems:r,total:i,hasItems:a,loading:o,error:c,setError:u,confirmOrder:d}=o2(),[m,g]=P.useState(null),[_,w]=P.useState(null),[A,S]=P.useState(!1),[D,C]=P.useState(!1),[k,V]=P.useState(null),{language:z}=Yi(),q=ss[z];P.useEffect(()=>{a||n("/order",{replace:!0})},[a,n]),P.useEffect(()=>{u(null)},[u]);const $=async()=>{const R=await d();if(R){g(R.ticket),w(R.callNumber);const I=cI(R.ticket);V(I),C(!0)}},M=async()=>{if(k)try{await navigator.clipboard.writeText(k)}catch(R){console.error("URL",R)}C(!1),m&&S(!0)},b=()=>{if(!m){S(!1);return}n(`/order/complete/${m}`,{replace:!0})};return p.jsx("div",{className:"content-container",children:p.jsxs("section",{className:"content-card",children:[p.jsx("h1",{className:"section-title",children:q.orderReview.title}),p.jsxs("p",{className:"section-description",children:[q.orderReview.descriptionLead,p.jsx("br",{}),q.orderReview.descriptionFollow]}),!e&&!t&&p.jsx("p",{children:q.auth.signingIn}),t&&p.jsx("p",{className:"error-message",children:q.auth.error}),p.jsxs("div",{className:"receipt-card",children:[p.jsxs("div",{className:"receipt-header",children:[p.jsx("span",{children:q.orderReview.tableHeaders.item}),p.jsx("span",{children:q.orderReview.tableHeaders.quantity}),p.jsx("span",{children:q.orderReview.tableHeaders.subtotal})]}),p.jsx("div",{className:"receipt-divider","aria-hidden":"true"}),p.jsx("div",{className:"receipt-items",children:r.map(({item:R,quantity:I,subtotal:O})=>p.jsxs("div",{className:"receipt-row",children:[p.jsx("div",{className:"receipt-item-info",children:p.jsx("span",{className:"receipt-item-name",children:Gy(R,z)})}),p.jsxs("span",{className:"receipt-item-qty",children:["",I]}),p.jsxs("span",{className:"receipt-item-subtotal",children:["",O.toLocaleString()]})]},R.key))}),p.jsx("div",{className:"receipt-divider","aria-hidden":"true"}),p.jsxs("div",{className:"receipt-total",children:[p.jsx("span",{children:q.orderReview.totalLabel}),p.jsxs("span",{children:["",i.toLocaleString()]})]}),D&&k&&p.jsx("div",{className:"url-copy-modal-backdrop",role:"dialog","aria-modal":"true","aria-labelledby":"url-copy-modal-title",children:p.jsxs("div",{className:"url-copy-modal",children:[_!==null&&_>0&&p.jsxs("div",{className:"url-copy-modal-order-id",children:[p.jsx("span",{className:"url-copy-modal-order-id-label",children:q.orderComplete.callNumberLabel}),p.jsx("span",{className:"url-copy-modal-order-id-value",children:_})]}),p.jsx("h2",{id:"url-copy-modal-title",children:q.orderReview.urlCopyModal.title}),p.jsx("p",{children:q.orderReview.urlCopyModal.description}),p.jsx("div",{className:"url-copy-modal-url",children:p.jsx("code",{className:"url-copy-modal-url-text",children:k})}),p.jsx("div",{className:"url-copy-modal-actions",children:p.jsx("button",{type:"button",className:"button primary",onClick:M,children:q.orderReview.urlCopyModal.copyButton})})]})}),A&&p.jsx("div",{className:"waste-guide-modal-backdrop",role:"presentation",children:p.jsxs("div",{className:"waste-guide-modal",role:"dialog","aria-modal":"true","aria-labelledby":"waste-guide-title","aria-describedby":"waste-guide-description",children:[p.jsx("h2",{id:"waste-guide-title",children:q.wasteGuide.title}),p.jsx("p",{id:"waste-guide-description",children:q.wasteGuide.description}),p.jsx("div",{className:"waste-guide-visual","aria-hidden":"true",children:q.wasteGuide.placeholder}),p.jsx("div",{className:"waste-guide-actions",children:p.jsx("button",{type:"button",className:"button primary",onClick:b,children:q.wasteGuide.confirm})})]})})]}),c&&p.jsx("p",{style:{color:"#dc2626",marginTop:0},children:q.errors[c]}),p.jsxs("div",{className:"button-row",children:[p.jsx("button",{type:"button",className:"button primary",onClick:$,disabled:!e||o,children:o?q.orderReview.confirming:q.orderReview.confirmButton}),p.jsx("button",{type:"button",className:"button secondary",onClick:()=>n("/order"),disabled:o,children:q.orderReview.changeButton})]})]})})}const zF=Zt("Thank_You_banner.png"),lS=[{key:"received",matches:[""]},{key:"ready",matches:[""]},{key:"completed",matches:[""]}];function Rv(n={}){const{enableTicketSearch:e=!1,ticketNavigationBase:t="/order/complete",fallbackPath:r="/status",titleOverride:i,descriptionOverride:a}=n,o=ol(),{ticket:c}=ON(),[u]=Vv(),d=u.get("ticket"),m=u.get("previewReady"),g=P.useMemo(()=>c?xf(c):d?xf(d):"",[d,c]),_=P.useMemo(()=>{const Ce=t||"/order/complete";return Ce.endsWith("/")?Ce.slice(0,-1):Ce},[t]),{ready:w,error:A}=l2(),{language:S}=Yi(),D=ss[S],C=D.orderComplete,k=D.auth,V=D.copy,{orderResult:z,startNewOrder:q,refreshOrderResult:$,loadOrderByTicket:M,clearOrderResult:b}=o2(),[R,I]=P.useState(!1),[O,L]=P.useState(null),[j,W]=P.useState(0),[ge,H]=P.useState(0),G=5e3,[le,ve]=P.useState(!1),[He,Y]=P.useState(null),[ne,me]=P.useState(""),[we,be]=P.useState(null),[ye,Te]=P.useState(!1),Ye=P.useRef(!1);P.useEffect(()=>{e&&(me(g),be(null))},[e,g]);const Re=z?.summary.ticket.toUpperCase(),zt=z&&(!g||Re===g)?z:null,Ze=zt?.summary,In=e,Kn=zt?.qrCode??"",Et=zt?.progressUrl??"",Ln=Ze?.progress??"",cr=Ln==="",ur=Ln==="",Bn=P.useMemo(()=>m==="1"||m==="true",[m]),gt=!!(Ze&&(cr||Bn)),{menuItemMap:Pt}=fl();P.useEffect(()=>{ur&&Ze&&!Ye.current&&(Ye.current=!0,Te(!0))},[ur,Ze]);const Wn=()=>{Te(!1),b()},cn=Ze?.callNumber&&Ze.callNumber>0?Ze.callNumber:null,_r=cn?C.readyInstructionWithCallNumber(cn):C.readyInstructionWait,tn=P.useMemo(()=>Ze?Ze.progress===""?{label:C.paymentState.complete,tone:"complete"}:Ze.payment===""&&Ze.progress===""?{label:C.paymentState.ready,tone:"ready"}:Ze.payment===""?{label:C.paymentState.paid,tone:"paid"}:{label:C.paymentState.unpaid,tone:"unpaid"}:{label:"",tone:"unpaid"},[C,Ze]),fr=P.useMemo(()=>{if(!Ze?.createdAt)return{display:"",iso:""};const Ce=new Date(Ze.createdAt);return Number.isNaN(Ce.getTime())?{display:"",iso:""}:{display:new Intl.DateTimeFormat(S==="ja"?"ja-JP":"en-US",{dateStyle:"medium",timeStyle:"short"}).format(Ce),iso:Ce.toISOString()}},[S,Ze?.createdAt]),Jr=P.useMemo(()=>SP(Ln,S),[Ln,S]),ae=P.useMemo(()=>{const Ce=lS.findIndex(De=>De.matches.includes(Ln));return Ce>=0?Ce:0},[Ln]);P.useEffect(()=>{zt&&Y(null)},[zt]),P.useEffect(()=>{if(!g){!z&&!e&&o(r,{replace:!0});return}if(z&&Re===g)return;let Ce=!0;return ve(!0),Y(null),M(g).then(De=>{Ce&&(De||o(`/order/not-found?ticket=${encodeURIComponent(g)}`,{replace:!0}))}).catch(De=>{console.error(De),Ce&&Y("loadFailed")}).finally(()=>{Ce&&ve(!1)}),()=>{Ce=!1}},[Re,e,r,M,o,g,z]),P.useEffect(()=>{!zt&&!le&&!g&&z&&o(`${_}/${z.summary.ticket}`,{replace:!0})},[le,o,g,z,zt,_]),P.useEffect(()=>{if(!j){H(0);return}const Ce=()=>{const tt=j-Date.now();H(tt>0?Math.ceil(tt/1e3):0)};Ce();const De=window.setInterval(Ce,500);return()=>window.clearInterval(De)},[j]);const Ae=Ce=>{Ce.preventDefault();const De=xf(ne);if(!De){be("required");return}be(null),me(De),o(`${_}/${De}`)},je=e?p.jsxs("section",{className:"content-card","aria-label":C.ticketSearch.regionLabel,children:[p.jsx("h2",{className:"section-title",children:C.ticketSearch.title}),p.jsx("p",{className:"section-description",children:C.ticketSearch.description}),p.jsxs("form",{className:"form-grid",onSubmit:Ae,children:[p.jsxs("div",{className:"field",children:[p.jsx("label",{htmlFor:"progress-ticket",children:C.ticketSearch.label}),p.jsx("input",{id:"progress-ticket",type:"text",inputMode:"text",value:ne,onChange:Ce=>me(Ce.target.value.toUpperCase()),placeholder:C.ticketSearch.placeholder,maxLength:24})]}),p.jsx("div",{className:"button-row",children:p.jsx("button",{type:"submit",className:"button primary",children:C.ticketSearch.button})})]}),we&&p.jsx("p",{className:"error-message",children:C.ticketSearch.error})]}):null;if(!Ze)return le?p.jsxs("div",{className:"content-container",children:[je,p.jsxs("section",{className:"content-card order-complete-card","aria-live":"polite",children:[p.jsx("h1",{className:"section-title",children:C.loadingTitle}),p.jsx("p",{className:"section-description",children:C.loadingDescription})]})]}):He?p.jsxs("div",{className:"content-container",children:[je,p.jsxs("section",{className:"content-card order-complete-card","aria-live":"polite",children:[p.jsx("h1",{className:"section-title",children:C.loadErrorTitle}),p.jsx("p",{className:"section-description",children:C.loadErrorDescription}),p.jsx("div",{className:"button-row",children:p.jsx("button",{type:"button",className:"button secondary",onClick:()=>o(r),children:C.loadErrorAction})})]})]}):e?p.jsxs("div",{className:"content-container",children:[je,p.jsxs("section",{className:"content-card order-complete-card","aria-live":"polite",children:[p.jsx("h1",{className:"section-title",children:C.inviteTitle}),p.jsx("p",{className:"section-description",children:C.inviteDescription})]})]}):null;const fe=i??C.title,Pe=a??(In?C.description.progressOnly:C.description.default),Fe=async()=>{if(!(R||Date.now()<j||ge>0)){I(!0),L(null);try{await $()||L("refreshFailed")}catch(Ce){console.error(Ce),L("refreshFailed")}finally{I(!1),W(Date.now()+G)}}},ze=async()=>{try{await navigator.clipboard.writeText(Ze.ticket),alert(V.progressCodeSuccess)}catch(Ce){console.error(Ce),alert(V.progressCodeFailure)}},Je=async()=>{try{await navigator.clipboard.writeText(Et),alert(V.progressLinkSuccess)}catch(Ce){console.error(Ce),alert(V.progressLinkFailure)}},rt=()=>{q(),o("/order")};return p.jsxs("div",{className:"content-container",children:[je,p.jsxs("section",{className:"content-card order-complete-card","aria-live":"polite",children:[p.jsx("h1",{className:"section-title",children:fe}),p.jsx("p",{className:"section-description",children:Pe}),!w&&!A&&p.jsx("p",{children:k.signingIn}),A&&p.jsx("p",{className:"error-message",children:k.error}),p.jsxs("div",{className:"completion-order-info",children:[p.jsxs("div",{className:"completion-status-card",children:[p.jsxs("div",{className:"completion-call-number-block","aria-live":"polite",children:[p.jsx("span",{className:"completion-label",children:C.callNumberLabel}),p.jsx("span",{className:"completion-call-number",children:Ze.callNumber>0?Ze.callNumber:C.callNumberPending})]}),p.jsx("div",{className:"payment-state",children:p.jsx("span",{className:`payment-state-badge ${tn.tone}`,children:tn.label})}),p.jsxs("div",{className:"completion-status-header",children:[p.jsx("span",{className:"completion-label",children:C.statusHeading}),p.jsx("button",{type:"button",className:"button secondary completion-refresh-button",onClick:Fe,disabled:R||ge>0,children:R?C.refresh.refreshing:ge>0?C.refresh.cooldown(ge):C.refresh.action})]}),O&&p.jsx("p",{className:"completion-refresh-error",children:C.refresh.error}),p.jsx("div",{className:"completion-progress",role:"list",children:lS.map((Ce,De)=>{const tt=["completion-progress-step",De<ae?"done":"",De===ae?"current":""].filter(Boolean).join(" ");return p.jsxs("div",{className:tt,role:"listitem",children:[p.jsx("div",{className:"completion-progress-node","aria-hidden":"true"}),p.jsx("span",{className:"completion-progress-label",children:CP(Ce.key,S)})]},Ce.key)})}),gt&&Ze&&p.jsxs("div",{className:`completion-ready-notice${Bn&&!cr?" preview":""}`,role:"status","aria-live":"assertive",children:[p.jsx("div",{className:"completion-ready-icon","aria-hidden":"true",children:p.jsx("svg",{viewBox:"0 0 24 24",focusable:"false","aria-hidden":"true",children:p.jsx("path",{d:"M9.5 16.25 5.75 12.5l1.5-1.5 2.25 2.25 6-6 1.5 1.5-7.5 7.5Z",fill:"currentColor"})})}),p.jsxs("div",{className:"completion-ready-copy",children:[p.jsx("p",{className:"completion-ready-title",children:C.readyTitle}),p.jsx("p",{className:"completion-ready-message",children:_r}),Bn&&!cr&&p.jsx("span",{className:"completion-ready-preview-tag",children:C.readyPreviewTag})]})]})]}),p.jsxs("div",{className:"completion-meta",children:[p.jsx("h2",{className:"completion-subheading",children:C.metaHeading}),p.jsxs("dl",{className:"completion-meta-list",children:[p.jsxs("div",{children:[p.jsx("dt",{children:C.meta.total}),p.jsxs("dd",{children:["",Ze.total.toLocaleString()]})]}),p.jsxs("div",{children:[p.jsx("dt",{children:C.meta.payment}),p.jsx("dd",{children:Nc(Ze.payment,S)})]}),p.jsxs("div",{children:[p.jsx("dt",{children:C.meta.progress}),p.jsx("dd",{children:Jr})]}),p.jsxs("div",{children:[p.jsx("dt",{children:C.meta.orderedAt}),p.jsx("dd",{children:fr.display?p.jsx("time",{dateTime:fr.iso,children:fr.display}):""})]})]})]})]}),ye&&p.jsx("div",{className:"thank-you-modal-backdrop",role:"dialog","aria-modal":"true","aria-labelledby":"thank-you-modal-title",children:p.jsxs("div",{className:"thank-you-modal",children:[p.jsx("img",{src:zF,alt:C.thankYouImageAlt,className:"thank-you-modal-image",loading:"lazy"}),p.jsxs("div",{className:"thank-you-modal-copy",children:[p.jsx("h2",{id:"thank-you-modal-title",className:"thank-you-modal-title",children:C.thankYouTitle}),p.jsx("p",{className:"thank-you-modal-message",children:C.thankYouMessage})]}),p.jsx("div",{className:"thank-you-modal-actions",children:p.jsx("button",{type:"button",className:"button primary",onClick:Wn,children:C.thankYouCloseButton})})]})}),Kn&&p.jsxs("div",{className:"completion-qr-block",children:[p.jsx("img",{src:Kn,alt:C.qrAlt}),p.jsx("span",{className:"completion-qr-caption",children:C.qrCaption})]}),p.jsxs("div",{className:"completion-identifiers",children:[p.jsxs("div",{className:"completion-order-id completion-identifier-card",children:[p.jsx("span",{className:"completion-label",children:C.identifiers.orderId}),p.jsx("span",{className:"completion-order-id-value",children:Ze.orderId})]}),In&&p.jsxs("div",{className:"completion-order-id completion-identifier-card",children:[p.jsx("span",{className:"completion-label",children:C.identifiers.ticket}),p.jsx("span",{className:"completion-order-id-value",style:{wordBreak:"break-all"},children:Ze.ticket})]})]}),p.jsxs("div",{className:"completion-items",children:[p.jsx("h2",{className:"completion-subheading",children:C.itemsHeading}),p.jsxs("table",{className:"completion-items-table",children:[p.jsx("thead",{children:p.jsxs("tr",{children:[p.jsx("th",{scope:"col",children:C.itemsTable.item}),p.jsx("th",{scope:"col",children:C.itemsTable.quantity}),p.jsx("th",{scope:"col",children:C.itemsTable.price}),p.jsx("th",{scope:"col",children:C.itemsTable.subtotal})]})}),p.jsxs("tbody",{children:[Object.entries(Ze.items).map(([Ce,De])=>{const tt=Pt[Ce];return tt?p.jsxs("tr",{children:[p.jsx("td",{children:Gy(tt,S)}),p.jsx("td",{className:"numeric",children:De}),p.jsxs("td",{className:"numeric",children:["",tt.price.toLocaleString()]}),p.jsxs("td",{className:"numeric",children:["",(tt.price*De).toLocaleString()]})]},Ce):null}),p.jsxs("tr",{className:"completion-items-total",children:[p.jsx("td",{colSpan:3,children:C.itemsTable.total}),p.jsxs("td",{className:"numeric",children:["",Ze.total.toLocaleString()]})]})]})]})]}),p.jsxs("div",{className:"button-row completion-actions",children:[p.jsx("button",{type:"button",className:"button primary",onClick:Je,children:C.actions.copyLink}),In&&Et&&p.jsx("button",{type:"button",className:"button secondary",onClick:ze,children:C.actions.copyCode}),p.jsx("button",{type:"button",className:"button secondary",onClick:rt,children:C.actions.startNew})]})]})]})}function cS(){const{language:n}=Yi(),t=ss[n].orderProgress;return p.jsx(Rv,{enableTicketSearch:!0,ticketNavigationBase:"/progress",fallbackPath:"/progress",titleOverride:t.title,descriptionOverride:t.description})}function HF(){const[n]=Vv(),e=n.get("ticket")??"",t=xf(e),{language:r}=Yi(),i=ss[r].ticketNotFound;return p.jsx("div",{className:"content-container",children:p.jsxs("section",{className:"content-card order-complete-card","aria-live":"polite",children:[p.jsx("h1",{className:"section-title",children:i.title}),p.jsx("p",{className:"section-description",children:t?i.descriptionKnown(t):i.descriptionUnknown}),p.jsxs("div",{className:"button-row",children:[p.jsx(a0,{className:"button primary",to:"/status",children:i.retry}),p.jsx(a0,{className:"button secondary",to:"/order",children:i.newOrder})]})]})})}const Ig=3600*1e3,hI=()=>{const{list:n}=yo();return n.reduce((e,t)=>(e[t.key]=0,e),{})},uS=n=>`${n.getHours().toString().padStart(2,"0")}:00`,GF=n=>n.createdAt??n.updatedAt;function qF(n,e,t=24){const r=e.getTime(),i=Array.from({length:t},(a,o)=>{const c=new Date(r+o*Ig),u=new Date(c.getTime()+Ig);return{slotStart:c,slotEnd:u,label:`${uS(c)} - ${uS(u)}`,totals:hI(),orderCount:0,totalItems:0}});return n.forEach(a=>{const o=GF(a);if(!o)return;const c=o.getTime()-r;if(c<0)return;const u=Math.floor(c/Ig);if(u<0||u>=t)return;const d=i[u];let m=!1;Object.entries(a.items).forEach(([g,_])=>{const w=Number(_);if(!Number.isFinite(w)||w<=0)return;const A=g;d.totals[A]=(d.totals[A]??0)+w,d.totalItems+=w,m=!0}),m&&(d.orderCount+=1)}),i}function $F(n){const e=hI(),t={:0,:0,:0};let r=0;return n.forEach(i=>{t[i.progress]=(t[i.progress]??0)+1,i.progress!==""&&(r+=1,Object.entries(i.items).forEach(([a,o])=>{const c=Number(o);if(!Number.isFinite(c)||c<=0)return;const u=a;e[u]=(e[u]??0)+c}))}),{orderCount:r,totals:e,statusCounts:t}}const XF=6e4,fS=n=>n.toISOString().slice(0,10),YF=n=>{const e=n.getHours().toString().padStart(2,"0"),t=n.getMinutes().toString().padStart(2,"0"),r=n.getSeconds().toString().padStart(2,"0");return`${e}:${t}:${r}`},KF=n=>{const e=new Date(n);return e.setDate(e.getDate()+1),e};function WF(){const[n,e]=P.useState(()=>fS(new Date)),[t,r]=P.useState([]),[i,a]=P.useState(!1),[o,c]=P.useState(null),[u,d]=P.useState(null),{registerListener:m}=dI(),{signOut:g}=yp(),{menuItems:_}=fl(),w=P.useMemo(()=>{const b=new Date(`${n}T00:00:00`);return b.setHours(0,0,0,0),b},[n]),A=P.useMemo(()=>KF(w),[w]),S=P.useCallback(async b=>{if(!b?.aborted){a(!0),c(null);try{const R=await sP({start:w,end:A});if(b?.aborted)return;r(R),d(new Date)}catch(R){if(b?.aborted)return;console.error(R);const I=R instanceof Error?R.message:"";c(I)}finally{b?.aborted||a(!1)}}},[w,A]),D=P.useRef(S);P.useEffect(()=>{D.current=S},[S]),P.useEffect(()=>{const b=new AbortController;return S(b.signal),()=>b.abort()},[S]),P.useEffect(()=>{const b=new AbortController,R=window.setInterval(()=>{S(b.signal)},XF);return()=>{b.abort(),window.clearInterval(R)}},[S]),P.useEffect(()=>{const b=m(R=>{R.type==="new-order"&&D.current()});return()=>{b()}},[m]);const C=P.useMemo(()=>qF(t,w,24),[t,w]),k=P.useMemo(()=>$F(t),[t]),V=P.useMemo(()=>C.filter(b=>b.totalItems>0),[C]),z=P.useMemo(()=>{const b=_.reduce((O,L)=>(O[L.key]=C.reduce((j,W)=>j+(W.totals[L.key]??0),0),O),{}),R=Object.values(b).reduce((O,L)=>O+L,0),I=C.reduce((O,L)=>O+L.orderCount,0);return{totals:b,totalItems:R,totalOrders:I}},[C,_]),q=b=>{e(b.target.value)},$=()=>{d(null),S()},M=()=>{g()};return p.jsxs("div",{className:"kitchen-page",children:[p.jsxs("header",{className:"kitchen-header",children:[p.jsxs("div",{children:[p.jsx("p",{className:"kitchen-overline",children:""}),p.jsx("h1",{children:""}),p.jsx("p",{className:"kitchen-description",children:""})]}),p.jsxs("div",{className:"kitchen-controls",role:"group","aria-label":"",children:[p.jsxs("label",{className:"kitchen-date-control",children:[p.jsx("span",{children:""}),p.jsx("input",{type:"date",value:n,onChange:q,max:fS(new Date)})]}),p.jsx("button",{type:"button",className:"button secondary",onClick:$,disabled:i,children:""}),p.jsx("button",{type:"button",className:"button secondary",onClick:M,children:""}),p.jsxs("p",{className:"kitchen-last-updated",children:[": ",u?YF(u):""]})]})]}),o&&p.jsx("div",{className:"kitchen-alert error",children:o}),i&&p.jsx("p",{className:"kitchen-loading",children:""}),p.jsxs("section",{className:"kitchen-section","aria-labelledby":"kitchen-current-orders",children:[p.jsxs("div",{className:"kitchen-section-header",children:[p.jsx("h2",{id:"kitchen-current-orders",children:""}),p.jsx("p",{children:""})]}),p.jsx("div",{className:"kitchen-summary-grid",children:_.map(b=>p.jsxs("article",{className:"kitchen-summary-card",children:[p.jsx("h3",{children:b.label}),p.jsxs("p",{className:"kitchen-summary-count",children:[k.totals[b.key],""]})]},b.key))}),p.jsxs("div",{className:"kitchen-status-chips",role:"list",children:[p.jsxs("span",{role:"listitem",className:"kitchen-status-chip",children:[" ",k.statusCounts.,""]}),p.jsxs("span",{role:"listitem",className:"kitchen-status-chip highlight",children:[" ",k.statusCounts.,""]}),p.jsxs("span",{role:"listitem",className:"kitchen-status-chip muted",children:[" ",k.statusCounts.,""]}),p.jsxs("span",{role:"listitem",className:"kitchen-status-chip total",children:[" ",k.orderCount,""]})]})]}),p.jsxs("section",{className:"kitchen-section","aria-labelledby":"kitchen-hourly-sales",children:[p.jsxs("div",{className:"kitchen-section-header",children:[p.jsx("h2",{id:"kitchen-hourly-sales",children:"1"}),p.jsx("p",{children:": 60"})]}),V.length===0?p.jsx("p",{className:"kitchen-empty",children:""}):p.jsx("div",{className:"kitchen-table-wrapper",children:p.jsxs("table",{className:"kitchen-table",children:[p.jsx("thead",{children:p.jsxs("tr",{children:[p.jsx("th",{scope:"col",children:""}),_.map(b=>p.jsx("th",{scope:"col",children:b.label},b.key)),p.jsx("th",{scope:"col",children:""}),p.jsx("th",{scope:"col",children:""})]})}),p.jsx("tbody",{children:V.map(b=>p.jsxs("tr",{children:[p.jsx("th",{scope:"row",children:b.label}),_.map(R=>p.jsx("td",{children:b.totals[R.key]>0?b.totals[R.key]:""},R.key)),p.jsx("td",{children:b.totalItems>0?b.totalItems:""}),p.jsx("td",{children:b.orderCount>0?b.orderCount:""})]},b.label))}),p.jsx("tfoot",{children:p.jsxs("tr",{children:[p.jsx("th",{scope:"row",children:""}),_.map(b=>p.jsx("td",{children:z.totals[b.key]||""},b.key)),p.jsx("td",{children:z.totalItems||""}),p.jsx("td",{children:z.totalOrders||""})]})})]})})]})]})}const QF={"new-order":"",test:"",custom:""},ZF={hour:"2-digit",minute:"2-digit"};function JF(n){return n?n.toLocaleTimeString([],ZF):""}function eU(n){if(!n)return;if(n instanceof Date)return n;const e=new Date(n);return Number.isNaN(e.getTime())?void 0:e}function tU(n){return n&&n>0?` ${n}`:""}const pI=P.memo(({ariaLabel:n="",className:e,hideWhenEmpty:t=!0,titleBySource:r,variant:i="dark"})=>{const{toasts:a,removeToast:o}=dI();if(t&&a.length===0)return null;const c=["order-toast-container",e].filter(Boolean).join(" ");return p.jsx("div",{className:c,role:"status","aria-live":"polite","aria-label":n,children:a.map(u=>{const d=r?.[u.source]??QF[u.source],m=eU(u.createdAt),g=JF(m),_=tU(u.callNumber),w=i==="light"?"order-toast--light":"";return p.jsxs("div",{className:`order-toast ${w}`,children:[p.jsx("button",{type:"button",className:"order-toast-close",onClick:()=>o(u.id),"aria-label":"",children:""}),p.jsxs("div",{className:"order-toast-content",children:[p.jsx("p",{className:"order-toast-title",children:d}),p.jsxs("p",{className:"order-toast-meta",children:[_,"   ",u.total.toLocaleString()]}),p.jsx("p",{className:"order-toast-message",children:u.itemSummary}),g&&p.jsxs("p",{className:"order-toast-meta",children:[" ",g]})]})]},u.id)})})});pI.displayName="OrderToastViewport";function dS({children:n,required:e,title:t,description:r}){const{status:i,error:a,signIn:o,signOut:c,hasRole:u}=yp(),d=P.useMemo(()=>Array.isArray(e)?e:[e],[e]),[m,g]=P.useState(""),[_,w]=P.useState(""),[A,S]=P.useState(!1),[D,C]=P.useState(null),k=P.useMemo(()=>({admin:"",kitchen:"",staff:""}),[]),V=P.useMemo(()=>d.map($=>k[$]).join(", "),[d,k]);P.useEffect(()=>{i==="signed-out"&&(g(""),w(""),S(!1),C(null))},[i]);const z=async $=>{if($.preventDefault(),!m||!_){C("");return}C(null),S(!0);try{await o({email:m,password:_})}catch(M){const b=M instanceof Error?M.message:"";C(b)}finally{S(!1)}},q=P.useMemo(()=>u(d),[u,d]);return i==="loading"?p.jsx("div",{className:"role-guard",children:p.jsx("div",{className:"role-guard-card",children:p.jsx("p",{className:"role-guard-status",children:""})})}):i==="signed-out"?p.jsx("div",{className:"role-guard",children:p.jsxs("div",{className:"role-guard-card",children:[p.jsx("h1",{children:t??""}),p.jsx("p",{className:"role-guard-description",children:r??` ${V} `}),p.jsxs("form",{className:"role-guard-form",onSubmit:z,children:[p.jsxs("label",{className:"role-guard-field",children:[p.jsx("span",{children:""}),p.jsx("input",{type:"email",autoComplete:"email",value:m,onChange:$=>g($.target.value),required:!0,placeholder:"admin@example.com"})]}),p.jsxs("label",{className:"role-guard-field",children:[p.jsx("span",{children:""}),p.jsx("input",{type:"password",autoComplete:"current-password",value:_,onChange:$=>w($.target.value),required:!0,placeholder:""})]}),(D||a)&&p.jsx("p",{className:"role-guard-error",children:D??a}),p.jsx("button",{type:"submit",className:"button primary",disabled:A,children:A?"":""})]})]})}):q?p.jsx(p.Fragment,{children:n}):p.jsx("div",{className:"role-guard",children:p.jsxs("div",{className:"role-guard-card",children:[p.jsx("h1",{children:""}),p.jsxs("p",{className:"role-guard-description",children:[V," "]}),(D||a)&&p.jsx("p",{className:"role-guard-error",children:D??a}),p.jsx("button",{type:"button",className:"button secondary",onClick:()=>c(),children:""})]})})}const nU=Zt("WebP/header/header.webp");function rU(){const{language:n}=Yi(),e=ss[n];return p.jsxs("div",{className:"not-found",children:[p.jsx("h1",{children:e.notFound.title}),p.jsx("p",{children:e.notFound.description})]})}function iU(){const n=Xi(),{language:e,setLanguage:t}=Yi(),r=n.pathname.startsWith("/admin"),i=n.pathname.startsWith("/kitchen"),a=r||i,o=r||i?"ja":e,c=ss[o],u=ss[e].languageToggle,d=["app-shell",r?"app-shell--wide":""].filter(Boolean).join(" "),m=r?"light":"dark",g=!r&&!i,_=g,w=o==="en"?"Mobile ordering system":"",A=e==="ja"?"en":"ja",S=()=>{t(A)};return p.jsx(BF,{children:p.jsxs(PF,{children:[p.jsxs("div",{className:d,children:[p.jsx("header",{className:["app-header",_?"app-header--public":"app-header--internal"].filter(Boolean).join(" "),children:_?p.jsxs("div",{className:"header-row",children:[p.jsx("img",{className:"header-combined-image",src:nU,alt:c.header.titleAlt}),g&&p.jsx("button",{type:"button",className:"language-switch",onClick:S,"aria-label":u.buttonAria(A),children:u.buttonText})]}):p.jsx("div",{className:"header-internal",children:p.jsxs("div",{className:"brand",children:[p.jsx("span",{"aria-hidden":"true",className:"brand-icon",children:""}),p.jsxs("div",{className:"brand-text",children:[p.jsx("span",{className:"brand-title",children:""}),p.jsx("span",{className:"brand-subtitle",children:w})]})]})})}),p.jsx("main",{className:"app-main",children:p.jsxs(ES,{children:[p.jsx(Jt,{path:"/",element:p.jsx(di,{to:"/order",replace:!0})}),p.jsx(Jt,{path:"/order",element:p.jsx(FF,{})}),p.jsx(Jt,{path:"/order/review",element:p.jsx(UF,{})}),p.jsx(Jt,{path:"/order/complete",element:p.jsx(Rv,{})}),p.jsx(Jt,{path:"/order/complete/:ticket",element:p.jsx(Rv,{})}),p.jsx(Jt,{path:"/order/not-found",element:p.jsx(HF,{})}),p.jsx(Jt,{path:"/status",element:p.jsx(oF,{})}),p.jsx(Jt,{path:"/progress",element:p.jsx(cS,{})}),p.jsx(Jt,{path:"/progress/:ticket",element:p.jsx(cS,{})}),p.jsx(Jt,{path:"/kitchen",element:p.jsx(dS,{required:"kitchen",title:"",description:"",children:p.jsx(WF,{})})}),p.jsx(Jt,{path:"/admin/*",element:p.jsx(dS,{required:["admin","staff"],title:"",description:"",children:p.jsx(eF,{})})}),p.jsx(Jt,{path:"*",element:p.jsx(rU,{})})]})}),p.jsx("footer",{className:"app-footer",children:p.jsxs("p",{children:[" ",new Date().getFullYear()," Hakuto Tanaka and Haruto Otsuka. All rights reserved."]})})]}),a&&p.jsx(pI,{variant:m,ariaLabel:""})]})})}const aU="/Ichinikai/";tN.createRoot(document.getElementById("root")).render(p.jsx(P.StrictMode,{children:p.jsx(mR,{basename:aU,children:p.jsx(U9,{children:p.jsx(_P,{children:p.jsx(iU,{})})})})}));
